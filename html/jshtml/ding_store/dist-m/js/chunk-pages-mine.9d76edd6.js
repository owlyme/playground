"use strict";(self.webpackChunkvue_h5_template=self.webpackChunkvue_h5_template||[]).push([[218],{470:(t,e,s)=>{s.d(e,{Z:()=>c});s(52355);var a=s(29233),i=(s(40733),s(85325)),n=(s(33948),s(39145)),o=s(24825);const{noop:r}=n.Y;var l={components:{Calendar:i.Z,Cell:a.Z},props:{onDateConfirm:{type:Function,default:r},themeColor:{type:String,default:"#516AE6"},type:{type:String,default:""}},data:()=>({keepDate:"",showKeepDate:!1,defaultDate:[],minDate:new Date((new Date).getFullYear()-10,0,1),maxDate:new Date((new Date).getFullYear()+10,0,1)}),mounted(){let t="";switch(this.type){case"MinePoint":t=(0,o.X)("myPointKeepDate");break;case"MineScore":t=(0,o.X)("myScoreKeepDate");break;case"LearningHours":t=(0,o.X)("myLearningHoursKeepDate");break;case"MineCertificate":t=(0,o.X)("myCertificateKeepDate");break;default:return""}t&&(this.defaultDate=[new Date(t[0]),new Date(t[1])],this.keepDate=`${t[0]}-${t[1]}`,this.$nextTick((()=>{this.$emit("onDateConfirm",t)})))},methods:{clearDate(){this.showKeepDate=!1,this.keepDate="",this.$emit("onDateConfirm",["",""],"toSet")},onkeepDateConfirm(t){const[e,s]=t;this.showKeepDate=!1,this.keepDate=`${this.formatKeepDate(e)} - ${this.formatKeepDate(s)}`,this.$emit("onDateConfirm",[this.formatKeepDate(e),this.formatKeepDate(s)],"toSet")},formatKeepDate:t=>`${t.getFullYear()}.${t.getMonth()+1}.${t.getDate()}`,formatter(t){const e=t.date.getFullYear(),s=t.date.getMonth(),a=t.date.getDate();return s===(new Date).getMonth()&&e===(new Date).getFullYear()&&a===(new Date).getDate()&&(t.text=this.$t("common.today")),t}}},c=(0,s(1001).Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mine-calendar"},[s("Cell",{staticClass:"mine-calendar-chosse-time",attrs:{title:t.$t("common.chooseTimeInterval"),value:t.keepDate,"is-link":""},on:{click:function(e){t.showKeepDate=!0}}}),s("Calendar",{attrs:{color:t.themeColor,formatter:t.formatter,"min-date":t.minDate,"max-date":t.maxDate,"default-date":t.defaultDate,type:"range"},on:{confirm:t.onkeepDateConfirm},model:{value:t.showKeepDate,callback:function(e){t.showKeepDate=e},expression:"showKeepDate"}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"clander-clear",on:{click:t.clearDate}},[t._v(t._s(t.$t("mineScore.reset")))]),s("span",{staticClass:"clander-title"},[t._v(t._s(t.$t("mineScore.dateSelect")))])])])],1)}),[],!1,null,"5d3d0297",null).exports},25161:(t,e,s)=>{s.d(e,{Z:()=>r});s(23307);var a=s(81392),i=(s(47601),s(44951)),n=s(67875),o={components:{[i.Z.name]:i.Z,[a.Z.name]:a.Z,ClCustomDepartment:n.Z},props:{dataDepartment:{type:Object,default:()=>{}}},data:()=>({dataDept:[],textOpenFlag:!1,showBtnFlag:!1}),computed:{showDeptData(){return this.dataDepartment.user_info&&Array.isArray(this.dataDepartment.user_info.department_infos)?this.dataDepartment.user_info.department_infos:this.dataDepartment.userInfo&&Array.isArray(this.dataDepartment.userInfo.department_infos)?this.dataDepartment.userInfo.department_infos:[]}},mounted(){this.$nextTick((()=>{this.calculateText()}))},methods:{calculateText(){this.textHeight="3.4em",this.$refs.desc.offsetHeight/14>3.4?(this.textOpenFlag=!0,this.showBtnFlag=!0):(this.textOpenFlag=!1,this.showBtnFlag=!1)}}},r=(0,s(1001).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text"},[s("div",{ref:"desc",staticClass:"titleText",class:{unfoldText:t.textOpenFlag},style:{"max-height":t.textOpenFlag?t.textHeight:""}},[t.showDeptData.length>0?s("div",{staticClass:"score-ranking-dept"},[s("cl-custom-department",{attrs:{"display-all":!0,list:t.showDeptData}})],1):s("div",{staticClass:"score-ranking-dept"},[t._v(" "+t._s(Array.isArray(t.data.department_names)?t.data.department_names.join(" / "):t.data.department_names)+" ")])]),t.showBtnFlag?s("span",{staticClass:"btn",on:{click:function(e){t.textOpenFlag=!t.textOpenFlag}}},[t.textOpenFlag?s("span",[t._v(" "+t._s(t.$t("attestation.open"))+" "),s("van-icon",{attrs:{name:"arrow-down"}})],1):s("span",[t._v(" "+t._s(t.$t("attestation.retract"))+" "),s("van-icon",{attrs:{name:"arrow-up"}})],1)]):t._e()])}),[],!1,null,"7cd9a61c",null).exports},97236:(t,e,s)=>{s.d(e,{Z:()=>i});var a={name:"ExchangeInfo",props:{title:{type:String,default:""},publisher:{type:Object,default:()=>({label:!1,content:!1})},contact:{type:Object,default:()=>({label:!1,content:!1})},receiveCom:{type:Object,default:()=>({label:!1,content:!1})},address:{type:Object,default:()=>({label:!1,content:!1})},receiveMethod:{type:Object,default:()=>({label:!1,content:!1})},reason:{type:Object,default:()=>({label:!1,content:!1})}}},i=(0,s(1001).Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"guide"},[s("div",{staticClass:"title"},[t._v(t._s(t.title))]),t.publisher.label?s("div",{staticClass:"publisher"},[s("span",{staticClass:"label"},[t._v(" "+t._s(t.publisher.label)+": ")]),s("span",{staticClass:"content"},[t._v(t._s(t.publisher.content))])]):t._e(),t.contact.label?s("div",{staticClass:"contact"},[s("span",{staticClass:"label"},[t._v(" "+t._s(t.contact.label)+": ")]),s("span",{staticClass:"content"},[t._v(t._s(t.contact.content))])]):t._e(),t.receiveCom.label?s("div",{staticClass:"firm"},[s("span",{staticClass:"label"},[t._v(" "+t._s(t.receiveCom.label)+": ")]),s("span",{staticClass:"content"},[t._v(t._s(t.receiveCom.content))])]):t._e(),t.address.label?s("div",{staticClass:"address"},[s("span",{staticClass:"label"},[t._v(" "+t._s(t.address.label)+": ")]),s("span",{staticClass:"content"},[t._v(t._s(t.address.content))])]):t._e(),t.receiveMethod.label?s("div",{staticClass:"collection-method"},[s("span",{staticClass:"label"},[t._v(" "+t._s(t.receiveMethod.label)+": ")]),s("span",{staticClass:"content"},[t._v(t._s(t.receiveMethod.content))])]):t._e(),t.reason.label?s("div",{staticClass:"reason"},[s("span",{staticClass:"label"},[t._v(" "+t._s(t.reason.label)+": ")]),s("span",{staticClass:"content"},[t._v(t._s(t.reason.content))])]):t._e()])}),[],!1,null,"3844480c",null).exports},19457:(t,e,s)=>{s.d(e,{Z:()=>i});var a={name:"OperateResult",components:{svgIcon:s(78551).Z},props:{iconName:{type:String,default:"done"},title:{type:String,default:""},color:{type:String,default:"#5DBD66"},tips:{type:String,default:""}},computed:{type(){return this.tips&&typeof this.tips}}},i=(0,s(1001).Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"operate-result"},[s("div",{staticClass:"operate-result-icon-container"},[s("div",{staticClass:"operate-result-icon",style:{backgroundColor:t.color}},[s("svg-icon",{attrs:{"icon-class":"icon-"+t.iconName,size:26,color:"#ffffff"}})],1)]),s("div",{staticClass:"operate-result-title",style:{color:t.color}},[t._v(t._s(t.title))]),s("div",{staticClass:"operate-result-tips"},["string"!==t.type?s("div",[t._t("default")],2):s("div",[t._v(t._s(t.tips))])])])}),[],!1,null,"4523527c",null).exports},78186:(t,e,s)=>{s.d(e,{Z:()=>r});s(70885);var a=s(6458),i=(s(18144),s(65641)),n=s(22648),o={name:"RankCard",components:{Col:i.Z,Row:a.Z},props:{summary:{type:Object,default:()=>{}},title:{type:String,default:""},label:{type:String,default:""},rank:{type:String,default:""}},computed:{themeColor(){return this.$store.state.themeColor}},methods:{getScore:t=>(0,n.i5)(t)}},r=(0,s(1001).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my_score"},[s("Row",{staticClass:"total"},[s("Col",{staticClass:"text_name",attrs:{span:"24"}},[t._v(t._s(t.title))]),s("Col",{staticClass:"real",attrs:{span:"24"}},[t._v(t._s(t.getScore(t.summary.study_power)))])],1),s("Row",{staticClass:"details",attrs:{gutter:"20"}},[s("Col",{staticClass:"mine",attrs:{span:"10"}},[s("Col",{staticClass:"text_name",attrs:{span:"24"}},[t._v(t._s(t.label))]),s("Col",{staticClass:"real",attrs:{span:"24"}},[t._v(t._s(t.getScore(t.summary.company_average)))])],1),s("Col",{staticClass:"mine",attrs:{span:"10",offset:"2"}},[s("Col",{staticClass:"text_name",attrs:{span:"24"}},[t._v(t._s(t.rank))]),s("Col",{staticClass:"real",attrs:{span:"24"}},[t._v(t._s(t.summary.rank))])],1)],1)],1)}),[],!1,null,"44551109",null).exports},95653:(t,e,s)=>{s.d(e,{Z:()=>o});s(47601);var a=s(44951),i=s(45877),n={name:"DeptRank",components:{[a.Z.name]:a.Z,ClCustomUser:i.Z},props:{data:{type:Object,default:()=>{}},unit:{type:String,default:""}}},o=(0,s(1001).Z)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dept-ranking"},[s("div",{staticClass:"dept-ranking-index"},[1===t.data.ranking?s("van-image",{staticClass:"dept-cup",attrs:{src:"https://oss.coolcollege.cn/1790078397779677184.png"}}):t._e(),2===t.data.ranking?s("van-image",{staticClass:"dept-cup",attrs:{src:"https://oss.coolcollege.cn/1790078398090055680.png"}}):t._e(),3===t.data.ranking?s("van-image",{staticClass:"dept-cup",attrs:{src:"https://oss.coolcollege.cn/1790078399004413952.png"}}):t._e(),t.data.ranking>3?s("div",{class:"dept-ranking-"+t.data.ranking+" index-font"},[t._v(t._s(t.data.ranking))]):t._e()],1),s("div",{staticClass:"content-container"},[s("div",{staticClass:"dept-ranking-people"},[s("cl-custom-user",{attrs:{type:t.data.source_type||t.data.sourceType,"data-type":"departmentName",value:t.data.id,name:t.data.name}})],1),s("div",{staticClass:"dept-ranking-score"},[s("span",{staticClass:"dept-ranking-score-real"},[t._v(" "+t._s(t.data.scores)+" ")]),t.unit?s("span",{staticClass:"dept-ranking-score-span"},[t._v(" "+t._s(t.unit)+" ")]):s("span",{staticClass:"dept-ranking-score-span"},[t._v(" "+t._s(t.$t("mineScore.points"))+" ")])])])])}),[],!1,null,"414492a7",null).exports},68876:(t,e,s)=>{s.d(e,{Z:()=>l});s(47601);var a=s(44951),i=s(4852),n=s(45877),o=s(25161),r={components:{[a.Z.name]:a.Z,Avatar:i.Z,ClCustomUser:n.Z,DeptExpandRetract:o.Z},props:{data:{type:Object,default:()=>{}},unit:{type:String,default:""}}},l=(0,s(1001).Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"score-ranking"},[s("div",{staticClass:"score-ranking-index"},[1===t.data.rank?s("van-image",{staticClass:"score-cup",attrs:{src:"https://oss.coolcollege.cn/1790078397779677184.png"}}):t._e(),2===t.data.rank?s("van-image",{staticClass:"score-cup",attrs:{src:"https://oss.coolcollege.cn/1790078398090055680.png"}}):t._e(),3===t.data.rank?s("van-image",{staticClass:"score-cup",attrs:{src:"https://oss.coolcollege.cn/1790078399004413952.png"}}):t._e(),t.data.rank>3?s("div",{class:"score-ranking-"+t.data.rank+" index-font"},[t._v(t._s(t.data.rank))]):t._e()],1),s("Avatar",{attrs:{src:t.data.avatar,width:"40",height:"40"}}),s("div",{staticClass:"score-ranking-people"},[t.data.userInfo&&t.data.userInfo.name?s("div",{staticClass:"score-ranking-name"},[s("cl-custom-user",{attrs:{type:t.data.userInfo.sourceType||t.data.userInfo.source_type,"data-type":"userName",value:t.data.userInfo.userId||t.data.userInfo.user_id,name:t.data.userInfo.name||"--"}})],1):s("div",{staticClass:"score-ranking-name"},[t._v(" "+t._s(t.data.name)+" ")]),s("div",[s("DeptExpandRetract",{attrs:{"data-department":t.data}})],1)]),s("div",{staticClass:"score-ranking-score"},[s("span",{staticClass:"score-score-real"},[t._v(t._s(t.data.score))]),s("span",{staticClass:"score-score-text"},[t.unit?s("span",[t._v(t._s(t.unit))]):s("span",[t._v(t._s(t.$t("mineScore.points")))])])])],1)}),[],!1,null,"1f06ad8f",null).exports},75026:(t,e,s)=>{s.r(e),s.d(e,{default:()=>P});var a=s(95082),i=(s(3791),s(93432)),n=(s(33948),s(26699),s(26294)),o=s(22648),r=s(28387),l=s(51527),c=(s(47601),s(44951)),d=(s(47238),s(75167)),u=(s(30541),s(57658),s(68092)),m=s(27632),h=s(96735),p=s(86144),g=s(4852),v=s(26325),_=s(45877),f={name:"MineData",components:{Avatar:g.Z,ClCustomUser:_.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z},props:{count:{type:Object,default:()=>{}},showAnyFunction:{type:Boolean,default:!0}},data(){return{taskProgress:0,loadList:!1,functionList:[{name:this.$t("mine.accumulativePoints"),icon:"icon-leijijifen",color:" #5dbd66",key:"integral_count",url:"/mine-points",show:this.showAnyFunction},{name:this.$t("mine.accumulativeCredits"),icon:"icon-leijixuefen",color:"#FFA000",key:"total_score",url:"/mine-scores",show:!0},{name:this.$t("mine.obtainedCredits"),icon:"icon-yihuozhengshu",color:"#9766CD",key:"certificate_count",url:"/mine/certificate",show:!0},{name:this.$t("mine.certified"),icon:"icon-yihuorenzheng",color:"#4268FF",key:"qualification_count",url:"/home-module/certification?activeTab=2",show:!0},{name:this.$t("mine.accumulativeLearningHours"),icon:"icon-datishichang",color:"#C58A43",key:"studyHours_count",url:"/learning-hours",show:!0}],is_vip:!1,end_time:"",isShowVipCard:!1,isDDAdmin:!1,blackList:{DINGTALK_ENTERPRISE_LOCK:(0,u.eY)("DINGTALK_ENTERPRISE_LOCK")},coolcollegeVip:h,renew:p,env:m.Z.env,medalInfo:{}}},computed:(0,a.Z)((0,a.Z)({},(0,n.mapGetters)({userInfo:"user/getUserInfo",primaryColor:"getPrimaryColor",portalInfo:"setting/getPortalInfo",qyShield:"setting/getQySwitch"})),{},{onlineService(){return this.$store.state.setting.onlineService}}),async mounted(){this.getMedalInfo(),"dingTalk"===m.Z.env&&await this.getUserData(),await this.getShowOtherInfo(),this.judgeShowDailyTask()},methods:{judgeShowDailyTask(){const t=(0,o.Ow)("HomeIntegrateTaskMobile");t&&this.functionList.unshift({name:t.params.title||this.$t("integrateTask.dailyMission"),icon:"icon-ic_task",color:"rgb(55 155 255)",key:"integral_task_progress",url:"/mine/mine-daily-task",show:!0})},async getShowOtherInfo(){try{const{data:t}=await r.Z.getShowLearnInfo(),{learn_open:e,share_open:s}=t;!0===e&&this.functionList.push({name:this.$t("mine.learnAbilityRank"),icon:"icon-xuexilizhishu",color:"#E75A3B",key:"learnAbility_count",url:"/mine/learn-ability/index",show:!0}),!0===s&&this.functionList.push({name:this.$t("mine.learnShareRank"),icon:"icon-xuexiligongxiangzhishu",color:"#EC4CB8",key:"learnShare_count",url:"/mine/learn-share/index",show:!0}),this.functionList=this.functionList.filter((t=>t.show)),this.loadList=!0}catch(t){this.loadList=!0}},linkTo(t){this.$router.push({path:t})},onOpenPackage(){this.$router.push({path:"/mine/learning-platform-vip"})},onLinkToMine(){this.$router.push({path:"/mine-info"})},getUserData(){const t={corp_id:this.userInfo.corpId,eid:this.userInfo.enterpriseId};Promise.all([r.Z.getUserIsVip(t),r.Z.getUserGoodsInfo()]).then((t=>{const e=t[0],s=t[1];this.is_vip="true"===e.data.is_vip,this.end_time=(0,o.p6)(e.data.end_time,"yyyy.MM.dd"),this.isShowVipCard=!0,this.isDDAdmin=s.data.isAdmin}))},onOpenRenew(){const t=`https://h5.dingtalk.com/appcenter/detail.html?showmenu=false&dd_share=false&articleCode=FW_GOODS-1000651011&goodsCode=FW_GOODS-1000651011&corpId=${this.userInfo.corpId}`;(0,v.default)({url:t})},async getMedalInfo(){const{data:t}=await r.Z.getMyMedalInfo(),{success:e,data:s}=t;"true"===e&&(this.medalInfo=s)},handleLinkToMedal(){this.$router.push({path:"/mine/medal/wall"})}}},y=s(1001),C=(0,y.Z)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mine-data"},[s("div",{staticClass:"mine-data-info"},[s("div",{staticClass:"mine-avatar-container"},[s("Avatar",{attrs:{src:t.userInfo.avatar,fit:"cover",height:t._f("pxTransToVw")(80),width:t._f("pxTransToVw")(80)}})],1),s("div",{staticClass:"name"},[s("div",{staticClass:"name-body-info"},[s("div",{staticClass:"name-body"},[s("div",{staticClass:"mine-data-info-username"},[s("div",{staticClass:"online-name"},[s("ClCustomUser",{attrs:{type:t.userInfo.sourceType,"data-type":"userName",value:t.userInfo.account,name:t.userInfo.name||""}})],1)]),t.medalInfo.medal_group_id?s("div",{class:"mine-data-info-medal medal-level-"+t.medalInfo.top1_medal_level+" "+(t.medalInfo.received_medal?"":"medal-gray"),on:{click:t.handleLinkToMedal}},[s("van-image",{staticClass:"mine-data-info-medal__icon",attrs:{src:t.medalInfo.top1_medal_url}}),s("span",{staticClass:"mine-data-info-medal__name"},[s("span",{staticClass:"van-ellipsis"},[t._v(t._s(t.medalInfo.top1_medal_name))]),t._v(t._s(t.medalInfo.current_credit+"/"+t.medalInfo.next_level_limit)+" ")]),s("van-progress",{attrs:{percentage:t.medalInfo.current_credit/t.medalInfo.next_level_limit*100<=100?t.medalInfo.current_credit/t.medalInfo.next_level_limit*100:100,"stroke-width":t._f("pxTransToVw")(2),color:"#fff","track-color":"rgba(255, 255, 255, 0.2)","show-pivot":!1}}),t.medalInfo.un_received_status?s("div",{staticClass:"mine-data-info-medal__dot"}):t._e()],1):t._e(),s("div",{staticClass:"mine-data-info-corpname"},[s("div",{staticClass:"mine-data-info-corpname-name"},[t._v(" "+t._s(t.portalInfo.defaultSelect?t.portalInfo.defaultSelect.name:t.userInfo.enterpriseName?t.userInfo.enterpriseName:"===")+" ")])])]),s("div",{on:{click:t.onLinkToMine}},[s("span",{staticClass:"name-edit"},[t._v(t._s(t.$t("mine.edit")))]),s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-arrow-r",color:"#B0B4C8",size:10}})],1)])])]),t.loadList?s("div",{staticClass:"mine-data-list"},t._l(t.functionList,(function(e){return s("div",{key:e.name,staticClass:"mine-data-list-item",on:{click:function(s){return t.linkTo(e.url,e.key)}}},[s("div",{staticClass:"mine-data-list-item-icon"},[s("svg-icon",{attrs:{size:18,"icon-class":e.icon,color:e.color}})],1),s("div",{staticClass:"mine-data-list-item-txt"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"mine-data-list-item-num"},[t._v(" "+t._s(t.count[e.key])+" ")])])})),0):t._e(),"dingTalk"===t.env&&t.isDDAdmin&&t.isShowVipCard?s("div",{staticClass:"purchase",style:{background:t.primaryColor}},[s("div",{class:["purchase-left",t.is_vip?"":"center"],on:{click:t.onOpenRenew}},[s("div",{staticClass:"purchase-top"},[s("img",{staticClass:"purchase-icon",attrs:{src:t.renew}}),s("div",{staticClass:"purchase-top-text"},[t._v(t._s(t.$t("mine.RenewalUpgrade")))])]),s("div",{staticClass:"purchase-bottom"},[t.end_time?s("span",{staticClass:"purchase-bottom-text"},[t._v(t._s(t.$t("mine.expireDate")+t.end_time))]):t._e(),s("svg-icon",{style:{color:"#fff"},attrs:{"icon-class":"icon-arrow-r",size:8}})],1)]),t.is_vip?s("div",{staticClass:"purchase-right",on:{click:t.onOpenPackage}},[s("div",{staticClass:"purchase-top"},[s("img",{staticClass:"purchase-icon",attrs:{src:t.coolcollegeVip}}),s("span",{staticClass:"purchase-top-text"},[t._v(t._s(t.$t("mine.coolcollegeVIP")))])]),s("div",{staticClass:"purchase-bottom"},[s("span",{staticClass:"purchase-bottom-text"},[t._v(t._s(t.$t("mine.servicePackage")))]),s("svg-icon",{style:{color:"#fff"},attrs:{"icon-class":"icon-arrow-r",size:8}})],1)]):t._e()]):t._e()])}),[],!1,null,"3d1db540",null).exports,b=(s(31960),s(10993)),$=(s(31146),s(41610)),k=(s(40962),s(41956)),Z=s(2068),w=s(93896),S=s(17563),D=s(17780),I=s(17452),x=s(67992),T={name:"MineFunction",components:{[c.Z.name]:c.Z,[k.Z.name]:k.Z},props:{count:{type:Object,default:()=>{}},showAnyFunction:{type:Boolean,default:!1},hasCard:{type:Boolean,default:!1}},data:()=>({loadList:!1,rowList:[],columnList:[],messageCount:0,tutorStatus:!1,blackList:{INVITE_TO_JOIN:(0,u.eY)("MINE_INVITE_TO_JOIN"),DINGTALK_ENTERPRISE_LOCK:(0,u.eY)("DINGTALK_ENTERPRISE_LOCK"),MINE_UPGRADE_ANNOUNCEMENT:(0,u.eY)("MINE_UPGRADE_ANNOUNCEMENT")},annualIsOpen:!1,isShowAnnual:!1,shanghaiSubsidyInfo:{},hasDot:!1,lectureId:"",ASSETS_OSS_HOST,isMicroApp:(0,D.xX)()}),computed:(0,a.Z)((0,a.Z)({},(0,n.mapGetters)({userInfo:"user/getUserInfo",primaryColor:"getPrimaryColor",qyShield:"setting/getQySwitch",isUnionTrain:"setting/getIsUnionTrain"})),{},{isAdmin(){return this.$store.state.user.isAdmin},marketOpen(){return this.$store.state.setting.marketOpen},onlineService(){return this.$store.state.setting.onlineService}}),created(){this.getAnnualStatus(),this.getShanghaiSubsidyInfo(),this.getIconTips()},mounted(){"h5"===m.Z.pureEnv?this.getMsgCount():this.getMenusExists()},methods:{getAnnualStatus(){"dingTalk"===m.Z.env?w.Z.getBlackListInfo({keyword:"ANNUAL_REPORT"}).then((t=>{this.annualIsOpen="true"===t.data.data.is_enable,this.isShowAnnual=this.annualIsOpen&&!(0,u.UI)("ANNUAL_REPORT")&&this.userInfo.isAnnalsVip&&this.userInfo.isAdmin})):this.isShowAnnual=!1},getMsgCount(){r.Z.getMessageCount().then((t=>{const e=Number(t.data.study)+Number(t.data.notice);this.messageCount=e,this.getMenusExists()})).catch((()=>{this.getMenusExists()}))},getMenusExists(){r.Z.getMenusExists().then((t=>{const{data:e=[]}=t.data;this.tutorStatus=e.some((t=>"1794890020289646592"===t.id&&"true"===t.status)),Z.Z.whetherLecture().then((t=>{this.lectureId=t.data.data,this.showList()})).catch((()=>{this.lectureId="",this.showList()}))}))},showList(){const t=this.messageCount>0?`(${this.messageCount})`:"",e=this.blackList.DINGTALK_ENTERPRISE_LOCK&&this.onlineService&&"false"===this.qyShield;this.rowList=[{name:this.$t("mine.mySelfStudy"),icon:"icon-wodezixue",url:"/mine/myself-study",key:"myselfStudy",show:!0},{name:this.$t("mine.myMicro"),icon:"icon-weikexianxingtubiao",url:"/mine/myself-micro-course",key:"micro",show:this.showMyMicro()},{name:this.$t("mine.approvalManagement"),icon:"icon-shenpiguanli",url:"/mine/approval-management",key:"approvalManagement",show:!0},{name:this.$t("pageTitle.learningTarget"),icon:"icon-xueximubiao",url:"/mine/learning-target",key:"learningTarget",show:this.canShowStudyTarget()},{name:this.$t("mine.myRating"),icon:"icon-wodepingfen",url:"/my-rating",key:"myRating",show:!0},{name:this.$t("mine.lessons"),icon:"icon-wodeshouke",url:`/home-module/lecturer-detail?lecturerId=${this.lectureId}&from=myLesson`,key:"myLessons",show:"false"===this.qyShield&&Boolean(this.lectureId)},{name:this.$t("mine.approval"),icon:"icon-shenpicaozuo",url:"/approvals",key:"approvals",show:"false"===this.qyShield},{name:this.$t("mine.marketingTask"),icon:"icon-woderenwu",url:"/pages/marketing/task/index",key:"task",show:"true"===this.marketOpen},{name:this.$t("mine.marketingShare"),icon:"icon-wodefenxiang",url:"/pages/marketing/content/index",key:"shares",show:"true"===this.marketOpen},{name:this.$t("mine.marketingClue"),icon:"icon-wodexiansuo",url:"/pages/marketing/clue/index",key:"clue",show:"true"===this.marketOpen},{name:this.$t("mine.marketingStatics"),icon:"icon-wodetongji",url:"/pages/marketing/statistics/index",key:"statistics",show:"true"===this.marketOpen},{name:this.$t("mine.lottery"),icon:"icon-zhongjiangjiluyidong",url:"/home-module/lottery/my-prize-list",key:"lottery",show:!0}],this.columnList=[{name:this.$t("mine.marketingCard"),url:"/pages/marketing/carte/index",key:"carte",show:"true"===this.marketOpen},{name:this.$t("mine.switchPortal"),url:"/select-portal",key:"door",show:!0},{name:this.$t("mine.faceRecognition"),url:"/face-result",key:"recognition",show:this.showAnyFunction&&(0,x.i3)()&&!this.isMicroApp},{name:this.$t("mine.instructorArea"),url:"/tutor-area/task-list?showStatus=unfinished",key:"instructorArea",show:this.tutorStatus},{name:`${this.$t("mine.messageCenter")}${t}`,url:"/mine/mine-notice",key:"messageCenter",show:"h5"===m.Z.pureEnv},{name:this.$t("mine.CheckInDaily"),url:"/daily-signin",key:"sign",show:this.showAnyFunction},{name:this.$t("mine.quickTour"),url:"/quick-tour",key:"quickTour",show:"dingTalk"===m.Z.env&&this.isAdmin},{name:this.$t("mine.onlineService"),url:"/online-service",key:"services",show:e},{name:this.$t("mine.settings"),url:"/setting",key:"setting",show:"false"===this.qyShield},{name:this.$t("mine.inviteToJoin"),url:"/pages/invite-to-join/index",key:"invite",show:"app"===m.Z.env&&this.isAdmin&&this.blackList.INVITE_TO_JOIN}],this.rowList=this.rowList.filter((t=>t.show)),this.columnList=this.columnList.filter((t=>t.show&&!("setting"===t.key&&"wecaht"===m.Z.env))),this.loadList=!0},linkTo(t,e){let s="";if("carte"!==t||this.hasCard){if("sign"===t)return s=this.isAdmin?e:"/sign-details",void this.$router.push({path:s,query:{fromPage:"signEntry"}});if(s=e,["services","door","myRating","setting","quickTour","learningTarget","approvalManagement","myLessons","messageCenter","instructorArea","myselfStudy","purchasedCourses","approvals","micro","lottery","recognition"].includes(t))this.$router.push({path:e});else if("dingTalk"!==m.Z.env||"shares"!==t&&"task"!==t&&"clue"!==t)m.Z.navigateTo({url:s});else{const e=`${MARKETING_H5}?r=${Math.floor(1e4*Math.random())}#/`,a=`access_token=${this.userInfo.accessToken}`;"shares"===t?this.linkToH5(`${e}materials/shared?${a}`):"task"===t?this.linkToH5(`${e}tasks?${a}`):"clue"===t?this.linkToH5(`${e}clues?${a}`):m.Z.navigateTo({url:s})}}else $.Z.alert({title:this.$t("mine.confirmTitle"),message:this.$t("mine.openCardTip"),confirmButtonText:this.$t("mine.iKnow"),confirmButtonColor:this.primaryColor})},linkToH5(t){m.Z.openLink({url:t})},previewImg(t){(0,b.Z)({images:t,startPosition:0})},canShowStudyTarget(){const t=window&&window.location.host;return"h5"===m.Z.env&&["medu.wuhanrt.com"].includes(t)},passwordLinkTo(t){m.Z.navigateTo({url:t})},showMyMicro(){return("dingTalk"===m.Z.env||"h5"===m.Z.pureEnv||"wechat_qy"===m.Z.env)&&"false"===this.isUnionTrain},goAnnuals(){(0,I.L)({path:"/mine/annual-report"},"app1")},getShanghaiSubsidyInfo(){return new Promise(((t,e)=>{let s=(new Date).getTime();this.shanghaiSubsidyInfo.omotime&&s-this.shanghaiSubsidyInfo.omotime<18e4?t(this.shanghaiSubsidyInfo):r.Z.getEnterpriseInfo({id:this.userInfo.enterpriseId}).then((e=>{const{data:s}=e,a=s.enterprises[0],i={appId:a.app_id,loginName:this.userInfo.userId,sign:a.sign,omotime:a.omotime,userName:this.userInfo.name,loginFlag:"2",province:a.province};this.shanghaiSubsidyInfo=i,t(i)})).catch((t=>{e(t),console.error(t)}))}))},onShanghaiSubsidyClick(){this.shanghaiSubsidyInfo.appId&&this.shanghaiSubsidyInfo.sign?this.getShanghaiSubsidyInfo().then((t=>{const e=`https://api.kttx.cn/singleLogin.do?${S.stringify(t)}`;"dingTalk"===m.Z.env?m.Z.openLink({url:`${EXTERNAL_Link_H5}?redirectUrl=${e}`}):window.location.href=e})):this.$router.push({path:"/mine/shanghai-subsidy-guide"})},toVersionList(){this.$router.push({path:"/mine/update-version"})},async getIconTips(){const{data:t}=await r.Z.getIconTips();0===t.code&&(this.hasDot=!0)}}},L={name:"Mine",components:{MineData:C,MineFunction:(0,y.Z)(T,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loadList?s("div",{staticClass:"mine-function",style:t.isMicroApp?"padding-bottom: 0":""},[s("div",{staticClass:"mine-function-row"},t._l(t.rowList,(function(e,a){return s("div",{key:a,staticClass:"mine-function-row-item",on:{click:function(s){return t.linkTo(e.key,e.url)}}},["lottery"===e.key?s("svg",{staticClass:"icon",attrs:{t:"1657590259617",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"74159",width:"24",height:"24"}},[s("path",{attrs:{d:"M883.138548 450.940355H140.790203C63.995547 450.940355 0 389.589958 0 310.235479c0-79.269151 61.435725-140.662212 140.790203-140.662212h742.348345c76.794656 0 140.790203 61.393061 140.790204 140.662212a140.363566 140.363566 0 0 1-140.790204 140.704876zM140.790203 248.842418c-35.837506 0-63.995547 28.158041-63.995547 63.995547 0 35.794843 28.158041 63.91022 63.995547 63.91022h742.348345c35.837506 0 63.995547-28.158041 63.995547-63.952884 0-35.837506-28.158041-63.952883-63.995547-63.952883H140.790203zM775.626029 1023.999147H248.302722c-92.153588 0-166.388422-74.192171-166.388422-166.303095V374.231026h860.100151v483.465026A166.004449 166.004449 0 0 1 775.626029 1023.999147zM158.708957 450.940355v406.755697c0 48.636616 38.397328 89.593766 87.033943 89.593766h529.883129c48.636616 0 89.593766-40.95715 89.593766-89.593766v-406.755697H158.708957z m317.417913 376.080498c-17.918753 0-33.277684-7.679466-46.076794-17.918753l-102.392875-102.307548a37.117417 37.117417 0 0 1 0-53.756259 37.117417 37.117417 0 0 1 53.756259 0l92.153588 92.153587 166.388422-163.785936a37.117417 37.117417 0 0 1 53.756259 0c15.358931 15.358931 15.358931 38.397328 0 53.756259l-174.067888 173.939897c-10.239288 12.799109-25.598219 17.918753-43.516971 17.918753zM282.902981 236.085972l-25.598218-25.598218a121.932849 121.932849 0 0 1 0-173.982561 122.103504 122.103504 0 0 1 174.067887 0l117.751807 120.268965-53.75626 53.713596-120.311628-120.226301a44.796883 44.796883 0 0 0-63.995547 0c-17.918753 15.358931-17.918753 43.474308 0 61.393061l2.559822 2.559822 25.598219 25.598219-56.316082 56.273417z m406.371724-51.196437l25.598218-25.598219c17.918753-17.918753 17.918753-46.03413 0-63.91022a44.796883 44.796883 0 0 0-63.995547 0l-120.311628 115.106658-53.756259-53.75626 120.311628-120.226301a122.103504 122.103504 0 0 1 174.067888 0 121.932849 121.932849 0 0 1 0 173.982561l-28.158041 28.15804-53.756259-53.756259z",fill:"#2D3040","p-id":"74160"}})]):s("svg-icon",{attrs:{size:24,"icon-class":e.icon,color:"#2D3040"}}),s("div",{staticClass:"mine-function-row-item-txt"},[t._v(t._s(e.name))]),"approvalManagement"===e.key&&t.count.approval_total_count>0?s("div",{staticClass:"mine-function-row-item-num"},[t._v(" "+t._s(t.count.approval_total_count>99?"99+":t.count.approval_total_count)+" ")]):t._e()],1)})),0),t.isShowAnnual?s("div",{staticClass:"mine-function-column mine-function-report",on:{click:t.goAnnuals}},[s("img",{staticClass:"mine-annuals-width",attrs:{src:"https://sdn.coolcollege.cn/assets/annual-report/2022-banner.png"}})]):t._e(),s("div",{staticClass:"mine-function-column"},[t._l(t.columnList,(function(e,a){return s("div",{key:a,staticClass:"mine-function-column-item",on:{click:function(s){return t.linkTo(e.key,e.url)}}},[s("div",[t._v(t._s(e.name))]),s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-arrow-r",color:"#B0B4C8",size:10}})],1)})),"上海"===t.shanghaiSubsidyInfo.province?s("div",{staticClass:"mine-function-column-item",on:{click:t.onShanghaiSubsidyClick}},[s("div",[t._v(t._s(t.$t("pageTitle.shanghaiSubsidyGuide")))]),s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-arrow-r",color:"#B0B4C8",size:10}})],1):t._e()],2),t.isAdmin&&t.blackList.MINE_UPGRADE_ANNOUNCEMENT&&"false"===t.qyShield?s("div",{staticClass:"mine-function-column"},[s("div",{staticClass:"mine-function-column-item",on:{click:t.toVersionList}},[s("div",{staticClass:"update-version"},[t._v(t._s(t.$t("mine.upgradeAnnouncement"))),t.hasDot?s("van-badge",{attrs:{dot:""}}):t._e()],1),s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-arrow-r",color:"#B0B4C8",size:10}})],1)]):t._e()]):t._e()}),[],!1,null,"492c0bb5",null).exports,BottomTarbar:l.Z,[i.Z.name]:i.Z},data:()=>({count:{},hasCard:!1,isShowAnyFunction:!0,active:"me",loading:!0,isMicroApp:(0,D.xX)()}),computed:(0,a.Z)({},(0,n.mapGetters)({userInfo:"user/getUserInfo",fresh:"microCourse/getFreshStatus"})),watch:{fresh(t){t&&(this.init(),this.$store.commit("microCourse/updateFresh",!1))}},mounted(){this.init()},methods:{init(){this.initData(),this.getCard(),this.showAnyFunction()},async initData(){try{let t=0;const e={page_size:1,page_number:1},[s,i]=await(0,o.Kb)(r.Z.getStudyHoursRanking(e));t=s?0:i&&i.data&&i.data.user&&i.data.user.studyDuration||0;const n=await r.Z.getStatistics();this.count=(0,a.Z)((0,a.Z)({},n.data),{},{studyHours_count:Math.ceil(t/60)}),this.loading=!1}catch(t){this.loading=!1,console.error(t)}},getCard(){r.Z.getUserCard().then((t=>{const{data:e}=t.data;this.hasCard=!!e,this.loading=!1}))},showAnyFunction(){const{enterpriseId:t}=this.userInfo;["1174539835835289618","1357242969568186483"].includes(t)&&(this.isShowAnyFunction=!1),this.loading=!1}}},P=(0,y.Z)(L,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-page"},[t.loading?s("van-loading",{staticClass:"init-loading",attrs:{size:"36"}}):t._e(),s("div",{staticClass:"mine-container"},[s("MineData",{attrs:{count:t.count,"show-any-function":t.isShowAnyFunction}}),s("MineFunction",{attrs:{count:t.count,"has-card":t.hasCard,"show-any-function":t.isShowAnyFunction}})],1),s("BottomTarbar",{attrs:{active:t.active}})],1)}),[],!1,null,"1068a492",null).exports},72283:(t,e,s)=>{s.r(e),s.d(e,{default:()=>b});s(34837);var a=s(39146),i=s(95082),n=(s(25773),s(35791)),o=(s(93787),s(20090)),r=(s(77141),s(30960)),l=(s(29941),s(64168)),c=(s(52355),s(29233)),d=(s(33948),s(73210),s(26294)),u=s(28387),m=s(22648),h=s(92442),p=(s(23307),s(81392)),g=(s(73474),s(74755)),v=s(45877),_={name:"",components:{[g.Z.name]:g.Z,[p.Z.name]:p.Z,ClCustomUser:v.Z},props:{show:{default:!1,type:Boolean},mergeConfig:{default:()=>({}),type:Object}},data:()=>({}),mounted(){},methods:{async mergeUser(t){try{this.$toast.loading({forbidClick:!0,message:this.$t("setting.mergeLoading"),loadingType:"spinner",duration:0});const e=await u.Z.mergeAccount((0,i.Z)((0,i.Z)({},this.mergeConfig),{},{type:t}));this.$toast.clear(),0===e.data.code?(this.$toast.success(this.$t("setting.mergeSuccess")),this.$emit("handleMerge")):this.$toast.fail(this.$t("setting.mergeSuccess"))}catch(t){console.error(t),this.$toast.clear()}}}},f=s(1001),y=(0,f.Z)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-popup",{style:{height:"100%"},attrs:{value:t.show,position:"bottom"}},[s("div",{staticClass:"pages-merge"},[s("div",{staticClass:"text-tips"},[t._v(" "+t._s("mobile"===t.mergeConfig.account_type?t.$t("setting.margeAccountTel"):t.$t("setting.margeAccountEmail"))+" "),s("cl-custom-user",{attrs:{type:t.mergeConfig.source_type,"data-type":"userName",value:t.mergeConfig.user_id,name:t.mergeConfig.name}}),t._v(" "+t._s(t.$t("setting.margeAccount"))+" ")],1),s("div",{staticClass:"text-top",on:{click:function(e){return t.mergeUser("isMe")}}},[s("div",{staticClass:"text-top-one"},[t._v(t._s(t.$t("setting.margeAccountMyself1")))]),s("div",{staticClass:"text-top-two"},[t._v(t._s(t.$t("setting.margeAccountMyself2")))])]),s("div",{staticClass:"text-top",on:{click:function(e){return t.mergeUser("notMe")}}},[s("div",{staticClass:"text-top-one"},[t._v(t._s(t.$t("setting.margeAccountNotMe1")))]),s("div",{staticClass:"text-top-two"},[t._v(t._s(t.$t("setting.margeAccountNotMe2")))])])])])}),[],!1,null,"5747a8dc",null).exports,C={name:"AccountBind",components:{[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,MergeAccount:y},props:{},data(){return{fromFocus:"",bindType:"mobile",verifyCode:"",account:"",countdown:60,loading:!1,sendloading:!1,modify:!1,sign:"",validateMobile:[{required:!0,message:this.$t("subsidy.placeholder",{input:this.$t("mine.mobile")})},{validator:h.gG,message:this.$t("mine.phoneFormatErrorTips")}],validateCode:[{required:!0,message:this.$t("subsidy.placeholder",{input:this.$t("mine.verifyCode")})},{validator:h.jE,message:this.$t("mine.verifyTip")}],validateEmail:[{required:!0,message:this.$t("subsidy.placeholder",{input:this.$t("mine.email")})},{validator:h.oH,message:this.$t("mine.emailErrorTips")}],showMergeAccount:!1,mergeConfig:{}}},computed:(0,i.Z)((0,i.Z)({},(0,d.mapGetters)({isPure:"getIsPure",primaryColor:"getPrimaryColor"})),(0,d.mapState)("mine",["infoList"])),mounted(){const{bindType:t="mobile",modify:e=!1}=this.$route.query;this.fromFocus=this.$route.query.fromFocus,this.key=this.$route.query.key,this.bindType=t,this.modify=e;const s="mobile"===t?this.$t("mine.changeMobile"):this.$t("mine.changeEmail");(0,m.Td)(s)},beforeDestroy(){clearInterval(this.sendCodeTimer)},created(){},methods:{async handleSubmit(t){this.loading=!0;let[e,s]=[null,null];const{account:n,verifyCode:o}=t,{bindType:r="mobile",account_id:l=""}=this.$route.query;this.modify?[e,s]=await u.Z.updateMobileOrEmail({code:o,account:n,type:r,account_id:l}):[e,s]=await u.Z.bindMobileOrEmail({code:o,account:n,type:r}),e||0!==s.data.code||("true"===s.data.data.is_show_account_bind?(this.showMergeAccount=!0,this.mergeConfig=(0,i.Z)((0,i.Z)({},s.data.data),{},{account:n})):((0,a.Z)(this.$t("mine.bindSuccess")),this.handleMerge())),this.loading=!1},handleMerge(){if(this.fromFocus){const t=this.infoList.map((t=>(this.key===t.key&&(t.value=this.account),(0,i.Z)({},t))));this.$store.commit("mine/changeInfoList",t),this.$router.go(-1)}else this.$router.go(-1)},async handleSendCode(){if(!this.account.trim())return;this.sendloading=!0;let t="";t="email"===this.bindType?u.Z.sendCodeByEmail:u.Z.sendCodeByMobile;const[e,s]=await t({[this.bindType]:this.account,isReplace:this.modify});if(e&&e.data.message)return e.data&&e.data.code&&"enterpriseapi.572001"===e.data.code?a.Z.fail(this.$t("mine.illegalMobile")):a.Z.fail(e.data.message),void(this.sendloading=!1);this.sendloading=!1,s.data&&0===s.data.code?(this.countdown--,this.sendCodeTimer=setInterval((()=>{this.countdown--,this.countdown<=0&&(this.countdown=60,clearInterval(this.sendCodeTimer))}),1e3)):(this.sendloading=!1,a.Z.fail(s.data?s.data.message:"error"))},handleValidateCode(t){if(this.account.trim())return!!t.trim()}}},b=(0,f.Z)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-bind-page"},[s("van-form",{ref:"formRef",attrs:{"label-width":"60px","validate-trigger":"onSubmit"},on:{submit:t.handleSubmit}},["mobile"===t.bindType?s("van-field",{attrs:{name:"account",clearable:"",label:t.$t("mine.mobile"),placeholder:t.$t("subsidy.placeholder",{input:t.$t("mine.mobile")}),rules:t.validateMobile},model:{value:t.account,callback:function(e){t.account="string"==typeof e?e.trim():e},expression:"account"}}):t._e(),"email"===t.bindType?s("van-field",{attrs:{name:"account",clearable:"",label:t.$t("mine.email"),placeholder:t.$t("subsidy.placeholder",{input:t.$t("mine.email")}),rules:t.validateEmail},model:{value:t.account,callback:function(e){t.account="string"==typeof e?e.trim():e},expression:"account"}}):t._e(),s("van-field",{attrs:{name:"verifyCode",disabled:!t.account,label:t.$t("mine.verifyCode"),placeholder:t.$t("subsidy.placeholder",{input:t.$t("mine.verifyCode")}),rules:t.validateCode},scopedSlots:t._u([{key:"extra",fn:function(){return[t.countdown>59||t.countdown<=0?s("van-button",{staticClass:"send-button",style:{color:t.primaryColor},attrs:{"native-type":"button",size:"mini",loading:t.sendloading},on:{click:t.handleSendCode}},[t._v(t._s(t.$t("mine.getverifyCode")))]):s("span",{style:{color:t.primaryColor}},[t._v(t._s(t.countdown)+" s")])]},proxy:!0}]),model:{value:t.verifyCode,callback:function(e){t.verifyCode="string"==typeof e?e.trim():e},expression:"verifyCode"}}),s("div",{staticClass:"confirm-button"},[s("van-button",{attrs:{block:"",loading:t.loading,color:t.primaryColor,"native-type":"submit"}},[t._v(" "+t._s(t.$t("common.confirm"))+" ")])],1)],1),s("merge-account",{attrs:{show:t.showMergeAccount,"merge-config":t.mergeConfig},on:{handleMerge:t.handleMerge}})],1)}),[],!1,null,"07d268c5",null).exports},80252:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});s(34837);var a=s(39146),i=(s(31146),s(41610)),n=(s(3791),s(93432)),o=(s(28301),s(45644)),r=(s(52355),s(29233)),l=(s(57658),s(22648)),c=s(28387),d={name:"",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z},data(){return{account_id_mobile:"",account_id_email:"",mobile:"",email:"",loading:!0,showMobileDiolog:!1,showEmailDiolog:!1,showSetPsdDiolog:!1,mobileActions:[{name:this.$t("mine.changeMobile"),key:"change"},{name:this.$t("mine.relieve"),key:"relieve"}],emailActions:[{name:this.$t("mine.changeEmail"),key:"change"},{name:this.$t("mine.relieve"),key:"relieve"}]}},computed:{setPsdActions(){return[{name:this.$t("mine.oldPwdSet"),key:"origin_psd"},{name:this.$t("mine.mobilePwdSet"),key:"mobile",disabled:!this.mobile},{name:this.$t("mine.emailPwdSet"),key:"email",disabled:!this.email}]}},created(){},mounted(){this.getBindInfo(),this.desensitizedStr=l.pB},methods:{onSelectSetPsdControl(t){this.$router.push({path:`/mine/modify-password?account=${this[t.key]||""}&type=${t.key}`})},desensitizedStr:t=>(0,l.pB)(t),handleSetPsd(){this.showSetPsdDiolog=!0},getBindInfo(){c.Z.getMobileBindInfo().then(((t={})=>{const{data:e={}}=t;0===e.code&&(e.data.mobile_info&&e.data.mobile_info.bind?(this.mobile=e.data.mobile_info.account,this.account_id_mobile=e.data.mobile_info.account_id):this.mobile="",e.data.email_info&&e.data.email_info.bind?(this.email=e.data.email_info.account,this.account_id_email=e.data.email_info.account_id):this.email=""),this.loading=!1})).catch((()=>{this.loading=!1}))},handleMobileLink(){this.mobile?this.showMobileDiolog=!0:this.$router.push({path:"/mine/account-bind?bindType=mobile"})},handleEmailLink(){this.email?this.showEmailDiolog=!0:this.$router.push({path:"/mine/account-bind?bindType=email"})},onSelectMobileControl(t){"change"===t.key?this.$router.push({path:`/mine/account-bind?bindType=mobile&account=${this.mobile}&modify=true&account_id=${this.account_id_mobile}`}):this.confirmUnbind("mobile")},onSelectEmailControl(t){"change"===t.key?this.$router.push({path:`/mine/account-bind?bindType=email&account=${this.email}&modify=true&account_id=${this.account_id_email}`}):this.confirmUnbind("email")},confirmUnbind(t){i.Z.confirm({title:this.$t("mine.unbind"),message:this.$t("mine.unbindTips",{type:this.$t(`mine.${t}`)})}).then((async()=>{let e={};e="mobile"===t?await c.Z.unbindMobileOrEmail({account_id:this.account_id_mobile}):await c.Z.unbindMobileOrEmail({account_id:this.account_id_email}),0===e.data.code&&((0,a.Z)(this.$t("mine.unbindSuccess")),this.getBindInfo())})).catch((()=>{}))}}},u=(0,s(1001).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-manage-page"},[t.loading?s("van-loading",{staticClass:"loading-action",attrs:{vertical:!0}}):[s("van-cell",{attrs:{title:t.$t("mine.bindPhone"),"is-link":"",value:t.desensitizedStr(t.mobile)},on:{click:t.handleMobileLink}}),s("van-cell",{attrs:{title:t.$t("mine.bindEmile"),"is-link":"",value:t.email},on:{click:t.handleEmailLink}}),t.mobile||t.email?s("van-cell",{attrs:{title:t.$t("mine.setPassword"),"is-link":""},on:{click:t.handleSetPsd}}):t._e(),s("van-action-sheet",{attrs:{actions:t.mobileActions,"cancel-text":t.$t("common.cancel"),"close-on-click-action":""},on:{select:t.onSelectMobileControl},model:{value:t.showMobileDiolog,callback:function(e){t.showMobileDiolog=e},expression:"showMobileDiolog"}}),s("van-action-sheet",{attrs:{actions:t.emailActions,"cancel-text":t.$t("common.cancel"),"close-on-click-action":""},on:{select:t.onSelectEmailControl},model:{value:t.showEmailDiolog,callback:function(e){t.showEmailDiolog=e},expression:"showEmailDiolog"}}),s("van-action-sheet",{attrs:{description:t.$t("mine.chooseMethod"),actions:t.setPsdActions,"cancel-text":t.$t("common.cancel"),"close-on-click-action":""},on:{select:t.onSelectSetPsdControl},model:{value:t.showSetPsdDiolog,callback:function(e){t.showSetPsdDiolog=e},expression:"showSetPsdDiolog"}})]],2)}),[],!1,null,"26029e9c",null).exports},73826:(t,e,s)=>{s.d(e,{Z:()=>_});var a=s(95082),i=(s(37254),s(58086)),n=(s(23307),s(81392)),o=(s(93787),s(20090)),r=(s(77141),s(30960)),l=(s(69710),s(57609)),c=(s(25773),s(35791)),d=(s(74916),s(77601),s(33948),s(26294)),u=s(39145),m=s(64404),h=s(95084),p=s(27632);const{noop:g}=u.Y;var v={components:{[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClUpload:m.Z,ClAttachment:h.Z},props:{approvalName:{type:String,default:""},defaultFormData:{type:Object,default:()=>({status:1})},scoreSetting:{type:Object,default:()=>({})},onSubmit:{type:Function,default:g}},data(){return{slider:100,formData:this.defaultFormData,pStatus:1,attachmentList:[],edit:!0,listType:["camera","album","video"]}},computed:(0,a.Z)({},(0,d.mapGetters)({primaryColor:"getPrimaryColor"})),watch:{defaultFormData:{handler(){this.formData=this.defaultFormData,this.attachmentList=this.formData.resources},immediate:!0}},created(){"dingTalk"===p.Z.env&&(this.listType=["camera","video","dingPlate"])},mounted(){this.$refs.vantTextarea.focus()},methods:{validatorScore:t=>!!(/^(0|[1-9][0-9]*)$/.test(t)&&t<=999),onSuccess(t){this.attachmentList=[...this.attachmentList,...t]},deleteFile(t){this.attachmentList.splice(t,1)},onClose(){this.onSubmit((0,a.Z)((0,a.Z)({},this.formData),{},{status:1}),this.attachmentList)}}},_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"approval-comment"},[s("van-form",{ref:"myForm",staticClass:"approval-form",on:{submit:function(e){return t.onSubmit(t.formData,t.attachmentList)}}},[s("div",{staticClass:"wrapper"},["submitReport"===t.approvalName?s("van-field",{attrs:{"label-align":"top",placeholder:t.$t("project.inputNumberTips"),name:"score",rules:[{validator:t.validatorScore,message:t.$t("myRating.validatorScore")}]},scopedSlots:t._u([{key:"label",fn:function(){return[s("div",[t._v(" "+t._s(t.$t("approval.bonusScore"))),s("span",{style:{color:"#969799"}},[t._v("("+t._s(t.$t("common.required"))+")")])])]},proxy:!0}],null,!1,1135902249),model:{value:t.formData.score,callback:function(e){t.$set(t.formData,"score",e)},expression:"formData.score"}}):t._e(),"approvalQualification"===t.approvalName&&"on"===t.scoreSetting.score_switch?s("van-field",{staticClass:"qScore",attrs:{"label-align":"top",name:"score",label:t.$t("approvals.gradeStudents")},scopedSlots:t._u([{key:"input",fn:function(){return[s("div",{staticClass:"scoreBox",style:{color:"#465DCD"}},[t._v(" "+t._s(t.formData.score)),s("span",{staticClass:"point"},[t._v(t._s(t.$t("myRating.point")))])]),s("van-slider",{attrs:{"bar-height":"5px","active-color":"#465DCD",max:t.scoreSetting.score},model:{value:t.formData.score,callback:function(e){t.$set(t.formData,"score",e)},expression:"formData.score"}}),s("div",{staticClass:"scoreLine"},[s("span",[t._v("0"+t._s(t.$t("myRating.point")))]),s("span",[t._v(t._s(t.scoreSetting.score/2)+t._s(t.$t("myRating.point")))]),s("span",[t._v(t._s(t.scoreSetting.score)+t._s(t.$t("myRating.point")))])])]},proxy:!0}],null,!1,3954074337)}):t._e(),s("van-field",{ref:"vantTextarea",attrs:{"label-align":"top",label:t.$t("common.introduction"),rows:"8",name:"suggest",maxlength:3e3,type:"textarea",placeholder:t.$t("approval.textAreaTips"+t.defaultFormData.status),"show-word-limit":"",rules:[{required:!0,message:t.$t("common.requiredFields")}]},model:{value:t.formData.suggest,callback:function(e){t.$set(t.formData,"suggest",e)},expression:"formData.suggest"}}),t.attachmentList.length>0?s("cl-attachment",{staticStyle:{padding:"12px 16px"},attrs:{"attachment-list":t.attachmentList,"is-delete":t.edit,"is-preview":!0},on:{delete:t.deleteFile}}):t._e(),s("cl-upload",{attrs:{"list-type":t.listType,"disk-name":"approval_manage"},on:{onSuccess:t.onSuccess}})],1),"approvalQualification"===t.approvalName||"submitReport"===t.approvalName?s("div",{staticClass:"footer comment-footer"},[s("van-button",{style:{backgroundColor:"#999",borderColor:"#999"},attrs:{type:"primary","native-type":"submit"},on:{click:function(e){t.formData.status=1}}},[t._v(t._s(t.$t("approval.saveDrafts")))]),s("van-button",{style:{backgroundColor:"#D64F4F",borderColor:"#D64F4F"},attrs:{type:"primary","native-type":"submit"},on:{click:function(e){t.formData.status=2}}},[t._v(t._s(t.$t("approval.reject")))]),s("van-button",{style:{backgroundColor:t.primaryColor,borderColor:t.primaryColor},attrs:{type:"primary","native-type":"submit"},on:{click:function(e){t.formData.status=3}}},[t._v(t._s(t.$t("approval.pass")))])],1):t._e(),"approvalCourse"===t.approvalName?s("div",{staticClass:"footer"},[s("van-button",{style:{backgroundColor:t.primaryColor,borderColor:t.primaryColor},attrs:{type:"primary",block:"","native-type":"submit"}},[t._v(t._s(t.$t("common.submit")))])],1):t._e()])],1)}),[],!1,null,"f89da9d6",null).exports},97795:(t,e,s)=>{s.r(e),s.d(e,{default:()=>v});var a=s(95082),i=(s(23307),s(81392)),n=(s(71404),s(57141)),o=(s(76424),s(41942)),r=(s(47601),s(44951)),l=s(26294),c=s(28387),d=s(20206),u=s(22648),m=s(95084),h=s(78368),p=s(45877),g={components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClAttachment:m.Z,ClCustomUser:p.Z},filters:{formatDate:t=>(0,u.p6)(t,"MM-dd hh:mm")},data:()=>({active:0,comments:[],defaultAvatar:h,commentsTypesObj:d.h}),computed:(0,a.Z)({},(0,l.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){const{instanceId:t}=this.$route.params;this.instanceId=t,this.getComments()},methods:{async getComments(){const{data:t}=await c.Z.getOperationComment(this.instanceId);this.comments=t.list,this.comments.forEach((t=>{t.forEach((t=>{t.opinion_btn=!1,t.opinion_open=!0}))})),this.$nextTick((()=>{this.getOpinionHeight()}))},getOpinionHeight(){let t=0;this.comments.forEach((e=>{e.forEach((e=>{const s=this.$refs.nodes[t].offsetHeight;e.opinion_height=s,e.opinion_btn=s>40,t++}))})),this.$forceUpdate()},changeOpinionOpen(t,e,s){this.comments[e][s].opinion_open=t,this.$forceUpdate()}}},v=(0,s(1001).Z)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"approval-result"},[s("van-steps",{attrs:{active:t.active,direction:"vertical","active-color":"#2d3040","inactive-color":"#2d3040"}},[t._l(t.comments,(function(e,a){return t._l(e,(function(e,i){return s("van-step",{key:e.id,staticClass:"comment-list",scopedSlots:t._u([{key:"active-icon",fn:function(){return[s("span",{staticClass:"step-icon"},[s("span",{staticClass:"step-active-icon"})])]},proxy:!0},{key:"inactive-icon",fn:function(){return[s("span",{staticClass:"step-icon"},[s("span",{staticClass:"step-active-icon"})])]},proxy:!0}],null,!0)},[s("div",{staticClass:"comment-item"},[s("div",{staticClass:"title"},[s("p",[s("van-image",{staticClass:"avatar",attrs:{src:e.approval_user_avatar||t.defaultAvatar,fit:"fill",round:""}}),s("cl-custom-user",{attrs:{type:e.sync_source_type,"data-type":"userName",value:e.sync_user_id,name:e.user_name}}),s("span",{staticClass:"operation",style:{color:t.commentsTypesObj[e.operation].color}},[t._v(t._s(t.$t(t.commentsTypesObj[e.operation].lang)))])],1),s("span",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(e.create_time)))])]),s("p",{ref:"nodes",refInFor:!0,staticClass:"opinion",style:{height:e.opinion_btn&&e.opinion_open?"40px":e.opinion_height,overflow:e.opinion_btn&&e.opinion_open?"hidden":"inherit",display:e.opinion_btn&&e.opinion_open?"-webkit-box":"inline-block"}},[t._v(" "+t._s(e.opinion)+" ")]),e.opinion_btn?s("p",{staticClass:"opinion-flexible",on:{click:function(s){return t.changeOpinionOpen(!e.opinion_open,a,i)}}},[t._v(" "+t._s(t.$t(e.opinion_open?"attestation.open":"attestation.retract"))+" ")]):t._e(),s("div",[e.resources&&e.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":e.resources,"is-preview":!0,theme:"light"}}):t._e()],1)])])}))}))],2)],1)}),[],!1,null,"36b98db6",null).exports},30795:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var a=s(95082),i=s(26294),n=s(28387),o={name:"CourseApprovalComment",components:{ApprovalComment:s(73826).Z},beforeRouteLeave(t,e,s){"course-reader"===t.name&&"CourseApprovalComment"===e.name?this.isRefresh=!1:(this.isRefresh=!0,this.formData={score:0,status:1,suggest:"",resources:[],operation_source:""}),s()},data:()=>({formData:{score:0,status:1,suggest:"",resources:[],operation_source:""},isRefresh:!0}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor"})),activated(){if(!this.isRefresh)return;const{type:t,operationId:e}=this.$route.query;this.operationId=e,this.formData.status="deny"===t?2:3},methods:{async onSubmit(t,e){const s=(0,a.Z)((0,a.Z)({},t),{},{resources:e.map((t=>({id:t.id})))});try{"success"===(await n.Z.submitOperation({operationId:this.operationId,data:s})).data.msg&&(this.$toast.success(this.$t("common.approvalSuccess")),this.$router.go(-2))}catch(t){this.$router.go(-2)}}}},r=(0,s(1001).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cl-page-container course-approval-comment"},[s("approval-comment",{key:t.formData.status,ref:"childApprovalComment",attrs:{"on-submit":t.onSubmit,"approval-name":"approvalCourse","default-form-data":t.formData}})],1)}),[],!1,null,"09471b02",null).exports},21485:(t,e,s)=>{s.r(e),s.d(e,{default:()=>v});var a=s(95082),i=(s(82500),s(49414)),n=(s(82522),s(10342)),o=(s(20581),s(50914)),r=(s(47601),s(44951)),l=(s(49153),s(5944)),c=(s(69710),s(57609)),d=(s(33948),s(57658),s(26294)),u=s(22648),m=s(28387),h=s(45877),p={components:{[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClCustomUser:h.Z},filters:{formatDate:function(t){return(0,u.p6)(t,"yyyy.MM.dd hh:mm")}},beforeRouteLeave(t,e,s){"approvalManagement"===t.name&&"courseApproval"===e.name&&localStorage.removeItem("courseTabName"),s()},data:function(){return{activeTab:"approval",tabs:[{name:"approval",lang:"approval.pendingApproval"},{name:"approved",lang:"approval.approval"}],list:[],loading:!1,finished:!1,params:{page_number:0,page_size:10,status:"approval"}}},computed:(0,a.Z)({},(0,d.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){localStorage.getItem("courseTabName")&&(this.activeTab=localStorage.getItem("courseTabName"),this.params.status=this.activeTab)},methods:{onTabChange(t){this.onRefresh(),localStorage.setItem("courseTabName",t)},onRefresh(){this.params=(0,a.Z)((0,a.Z)({},this.params),{},{status:this.activeTab,page_number:0}),this.loading=!0,this.finished=!1,this.list=[],this.loading&&this.onLoad()},async onLoad(){this.params.page_number+=1;const{data:t}=await m.Z.getCourseApprovalList(this.params),{list:e,has_next_page:s}=t;this.list=[...this.list,...e],this.loading=!1,"false"===s&&(this.finished=!0)},toCourseDetail(t){const{activeTab:e}=this,{course_type:s,course_id:a,id:i,instance_id:n}=t;"approval"===e?"microCourse"===s?this.$router.push({path:`/micro-watch/${a}/newest`,query:{studyType:"review",approvalId:i}}):this.$router.push({path:"/course-enterprise-detail",query:{courseResource:"approvalList",courseId:a,approvalId:i}}):"approved"===e&&this.$router.push({path:`/mine/approval-management/approval-result/${n}`})}}},g=p,v=(0,s(1001).Z)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course-approval"},[s("van-tabs",{attrs:{color:t.primaryColor,"line-width":24,sticky:""},on:{change:t.onTabChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabs,(function(e){return s("van-tab",{key:e.name,attrs:{title:t.$t(e.lang),name:e.name}})})),1),s("van-list",{staticClass:"course-list",attrs:{"loading-text":t.$t("common.loading"),finished:t.finished,"finished-text":t.finished&&0===t.list.length?"":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.list,(function(e){return s("div",{key:e.id,staticClass:"item-content",on:{click:function(s){return t.toCourseDetail(e)}}},[s("div",{staticClass:"item-img"},[s("van-image",{attrs:{fit:"fill",src:e.cover,width:"100%",height:"100%"}})],1),s("div",{staticClass:"item-info"},[s("div",{staticClass:"title"},[t._v(t._s(e.title))]),s("div",{staticClass:"introduce"},[t._v(t._s(t.$t("approval.from"))+" "),s("cl-custom-user",{attrs:{type:e.sync_source_type,"data-type":"userName",value:e.sync_user_id,name:e.create_user_name}})],1),s("div",{staticClass:"introduce last-introduce"},[s("div",{staticClass:"courseInfo"},[s("span",[t._v(t._s(t._f("formatDate")(e.create_time)))])]),s("div",{staticClass:"tip",attrs:{"on-click":"{this.handleTipTap}"}},["pass"===e.status?s("span",{staticClass:"tip-pass"},[t._v(t._s(t.$t("approval.pass")))]):t._e(),"reject"===e.status?s("span",{staticClass:"tip-reject"},[t._v(t._s(t.$t("approval.reject")))]):t._e(),""===e.status?s("span",{staticClass:"tip-pending"},[t._v(" "+t._s(t.$t("approval.pendingApproval"))+" ")]):t._e()])])])])})),t.finished&&0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e()],2)],1)}),[],!1,null,"5c5b7d55",null).exports},51359:(t,e,s)=>{s.r(e),s.d(e,{default:()=>C});var a=s(95082),i=(s(82500),s(49414)),n=(s(82522),s(10342)),o=(s(86039),s(20495)),r=(s(20581),s(50914)),l=(s(47601),s(44951)),c=(s(49153),s(5944)),d=(s(69710),s(57609)),u=(s(25773),s(35791)),m=(s(33948),s(26294)),h=s(22648),p=s(28387),g=s(78368),v=s(45877),_=s(67875),f={components:{[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClCustomUser:v.Z,ClCustomDepartment:_.Z},filters:{formatDate:function(t){return(0,h.p6)(t,"yyyy.MM.dd hh:mm:ss")}},data:function(){return{activeTab:"unapproved",tabs:[{name:"unapproved",lang:"approval.pendingApproval"},{name:"approved",lang:"approval.approval"}],list:[],loading:!1,finished:!1,enrollId:"",params:{keyword:"",status:"unapproved",page_number:0,page_size:10},defaultAvatar:g}},computed:(0,a.Z)({},(0,m.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){this.enrollId=this.$route.params.enrollId},methods:{onTabChange(){this.onRefresh()},onRefresh(){this.params=(0,a.Z)((0,a.Z)({},this.params),{},{status:this.activeTab,page_number:0}),this.loading=!0,this.finished=!1,this.list=[],this.loading&&this.onLoad()},async onLoad(){this.params.page_number+=1;const{data:t}=await p.Z.getEnrollApprovalsList((0,a.Z)({enrollId:this.enrollId},this.params)),{list:e,has_next_page:s}=t;this.list=[...this.list,...e],this.loading=!1,"false"!==s&&""!==s||(this.finished=!0)},async handleEnroll(t,e){const{data:s}=await p.Z.submitEnrollApprove({enrollId:this.enrollId,status:t,user_id:e});"true"===s.result&&(this.$toast.success(this.$t("common.approvalSuccess")),this.onRefresh())}}},y=f,C=(0,s(1001).Z)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"enroll-approval"},[s("van-tabs",{attrs:{color:t.primaryColor,"line-width":24,sticky:""},on:{change:t.onTabChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabs,(function(e){return s("van-tab",{key:e.name,attrs:{title:t.$t(e.lang),name:e.name}})})),1),s("van-divider",{style:{margin:"0"}}),s("van-search",{attrs:{placeholder:t.$t("approval.searchName")},on:{search:t.onRefresh,clear:t.onRefresh},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}}),s("van-divider",{style:{margin:"0"}}),s("van-list",{staticClass:"approval-list",attrs:{"loading-text":t.$t("common.loading"),finished:t.finished,"finished-text":t.finished&&0===t.list.length?"":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.list,(function(e){return s("div",{key:e.id,staticClass:"item-content"},[s("div",{staticClass:"item-info"},[s("div",{staticClass:"avatar"},[s("van-image",{attrs:{src:e.avatar||t.defaultAvatar,fit:"fill",width:"100%",height:"100%"}})],1),s("div",{staticClass:"title"},[s("p",{staticClass:"main-title"},[e.sync_user_info&&e.sync_user_info.name?s("cl-custom-user",{attrs:{type:e.sync_user_info.sourceType,"data-type":"userName",value:e.sync_user_info.userId,name:e.sync_user_info.name}}):s("span",[t._v(t._s(e.user_name))])],1),s("p",{staticClass:"sub-title"},[e.sync_user_info&&e.sync_user_info.department_infos?s("cl-custom-department",{attrs:{"display-all":!0,list:e.sync_user_info.department_infos}}):s("span",[t._v(t._s(e.department_path_name))])],1)])]),s("van-divider",{staticStyle:{marginBottom:"12px"}}),s("div",{staticClass:"item-tool"},[s("span",{staticClass:"time"},[t._v(t._s(t.$t("approval.enrollTime"))+"："+t._s(t._f("formatDate")(e.create_time)))]),"unapproved"===t.activeTab?s("div",{staticClass:"tool-btn"},[s("van-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(s){return t.handleEnroll("pass",e.user_id)}}},[t._v(t._s(t.$t("approval.pass")))]),s("van-button",{staticStyle:{marginLeft:"16px"},attrs:{plain:"",type:"danger",size:"mini"},on:{click:function(s){return t.handleEnroll("reject",e.user_id)}}},[t._v(t._s(t.$t("approval.refuse")))])],1):s("div",["pass"===e.status?s("span",{staticStyle:{color:"#5DBD66"}},[t._v(t._s(t.$t("approval.passed")))]):s("span",{staticStyle:{color:"#D8403D"}},[t._v(t._s(t.$t("approval.refused")))])])])],1)})),t.finished&&0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e()],2)],1)}),[],!1,null,"0574cbc9",null).exports},42308:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});s(21790);var a=s(24031),i=(s(20581),s(50914)),n=(s(47601),s(44951)),o=(s(49153),s(5944)),r=(s(33948),s(57658),s(28387)),l={components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z},data:()=>({loading:!1,finished:!1,list:[],params:{page_number:0,page_size:10}}),mounted(){},methods:{async onLoad(){this.params.page_number+=1;const t=await r.Z.getEnrollApprovals(this.params),{list:e,has_next_page:s}=t.data;this.list=[...this.list,...e],this.loading=!1,"false"!==s&&""!==s||(this.finished=!0)},handleApprovalDetail(t){this.$router.push({path:`/mine/approval-management/enroll-approval-list/${t}`})}}},c=l,d=(0,s(1001).Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cl-page-container"},[s("van-list",{staticClass:"enroll-list",attrs:{finished:t.finished,"loading-text":t.$t("common.loading"),"finished-text":t.finished&&0===t.list.length?"":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.list,(function(e){return s("div",{key:e.task_id,staticClass:"enroll-item",on:{click:function(s){return t.handleApprovalDetail(e.enroll_id)}}},[s("div",{staticClass:"item-cover"},[s("van-image",{attrs:{src:e.cover,fit:"fill",width:"100%",height:"100%"}})],1),s("div",{staticClass:"item-info"},[s("span",{staticClass:"title"},[t._v(" "+t._s(e.task_name)+" ")]),s("div",{staticClass:"detail"},[s("div",[s("span",{staticClass:"count"},[t._v(t._s(t.$t("approval.registration"))+": "+t._s(e.enroll_count))]),s("span",{staticClass:"count"},[t._v(t._s(t.$t("approval.pass"))+": "+t._s(e.pass_count))])]),0!==e.wait_count?s("van-tag",{attrs:{round:"",type:"danger",color:"#CF3C3C"}},[t._v(t._s(e.wait_count))]):t._e()],1)])])})),t.finished&&0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e()],2)],1)}),[],!1,null,"69e1aa2a",null).exports},82169:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});s(21790);var a=s(24031),i=(s(29941),s(64168)),n=(s(52355),s(29233)),o=(s(33948),s(28387)),r=s(78551),l=s(22648),c={name:"ApprovalList",components:{[n.Z.name]:n.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z,SvgIcon:r.Z},filters:{filterCount:t=>t>99?"99+":t},data:()=>({list:[{name:"approval_course_count",lang:"approval.courseApprovalInfo",count:0,icon:"icon-kechengshenpi",color:"#a16ede",url:"/mine/approval-management/course-approval"},{name:"approval_qualification_count",lang:"approval.qualificationApprovalInfo",count:0,icon:"icon-shicaozuoyeshenpi",color:"#55a1fe",url:"/mine/approval-management/qualification-approval"},{name:"enroll_approval_count",lang:"approval.registerApproval",count:0,icon:"icon-baomingshenpi1",color:"#e07a5f",url:"/mine/approval-management/enroll-approval"},{name:"submit_report_count",lang:"approval.reportApproval",count:0,icon:"icon-tibaoshenpi",color:"#5dbd66",url:"/mine/approval-management/submit-approval"}]}),mounted(){this.getStatistics()},methods:{async getStatistics(){const[t,e]=await(0,l.Kb)(o.Z.getStatistics());if(t)return void this.$toast(this.$this.$t("examAnswerDevice.checkError"));const{data:s}=e;s?this.list.forEach((t=>{t.count=s[t.name]})):this.$toast(this.$t("promptMessage.abnormalDataTips"))}}},d=(0,s(1001).Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"approval"},t._l(t.list,(function(e){return s("van-cell-group",{key:e.name,staticClass:"list-group"},[s("van-cell",{attrs:{size:"large","is-link":"",to:e.url},scopedSlots:t._u([{key:"title",fn:function(){return[s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":e.icon,color:e.color,size:17}}),t._v(" "+t._s(t.$t(e.lang))+" "),e.count>0?s("van-tag",{staticClass:"valueTag",attrs:{round:"",type:"danger"}},[t._v(t._s(t._f("filterCount")(e.count)))]):t._e()]},proxy:!0}],null,!0)})],1)})),1)}),[],!1,null,"4a95627a",null).exports},25442:(t,e,s)=>{s.r(e),s.d(e,{default:()=>w});var a=s(95082),i=(s(40733),s(85325)),n=(s(93787),s(20090)),o=(s(49902),s(62094)),r=(s(21920),s(58280)),l=(s(25773),s(35791)),c=(s(86039),s(20495)),d=(s(82500),s(49414)),u=(s(82522),s(10342)),m=(s(58052),s(68286)),h=(s(20581),s(50914)),p=(s(49153),s(5944)),g=(s(33948),s(57658),s(26294)),v=s(22648),_=s(28387),f=s(93896),y=s(23279),C=s.n(y),b=s(4852),$=s(45877),k={components:{[p.Z.name]:p.Z,[h.Z.name]:h.Z,[m.Z.name]:m.Z,[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,Avatar:b.Z,ClCustomUser:$.Z},filters:{formatDate:function(t){return(0,v.p6)(t,"yyyy-MM-dd")}},beforeRouteLeave(t,e,s){"approvalManagement"===t.name&&"qualificationApproval"===e.name&&localStorage.removeItem("qualificationTabName"),s()},data:function(){return{activeTab:"1",tabs:[{name:"1",lang:"approval.pendingApproval"},{name:"2",lang:"approval.approval"}],list:[],loading:!1,finished:!1,params:{page_number:0,page_size:10,status:"1",keyword:"",userIds:"",sort_type:"desc",start_time:"",end_time:""},value:"",isClick:!1,showCalendar:!1,minDate:new Date(2010,0,1),show:!1,showClear:"",defaltDate:[new Date((new Date).setHours(0,0,0,0))]}},computed:(0,a.Z)((0,a.Z)({},(0,g.mapGetters)({primaryColor:"getPrimaryColor",userInfo:"user/getUserInfo",qyWechatBook:"setting/getQyWechatBook"})),{},{arrow(){return this.isClick?"arrow-down":"arrow-up"}}),watch:{value(){""===this.value?this.showClear="":this.showClear="cross"}},mounted(){localStorage.getItem("qualificationTabName")&&(this.activeTab=localStorage.getItem("qualificationTabName"),this.params.status=this.activeTab)},methods:{clearDate(){this.value="",this.params.start_time="",this.params.end_time="",this.onSearch()},showFilter(){this.isClick=!this.isClick,this.show=this.isClick},formatDate:t=>`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()}`,onConfirm(t){const[e,s]=t;this.showCalendar=!1,this.value=`${this.formatDate(e)} - ${this.formatDate(s)}`,this.params.start_time=e.getTime(),this.params.end_time=s.getTime(),this.onSearch()},onTabChange(t){this.value="",this.params.start_time="",this.params.end_time="",this.params.sort_type="1"===t?"desc":"asc",this.show=!1,this.isClick=!1,localStorage.setItem("qualificationTabName",t),this.onSearch()},onRefresh(){this.params=(0,a.Z)((0,a.Z)({},this.params),{},{status:this.activeTab,page_number:0}),this.loading=!0,this.finished=!1,this.list=[],this.loading&&this.onLoad()},onSearch:C()((async function(){const{id:t}=await this.exchangeId(this.params.keyword);this.params.userIds=t,this.onRefresh()}),500),async exchangeId(t){let e="";const s="wx_app"===this.userInfo.appType&&this.qyWechatBook;if(t&&s)try{const s=await f.Z.searchUserIds(t),{data:a}=s;e=a.success?a.data:""}catch(t){console.error(t),e=""}return{value:t,id:e}},async onLoad(){this.params.page_number+=1;const{data:t}=await _.Z.geQualificationsList(this.params),{list:e,has_next_page:s}=t;this.list=[...this.list,...e],this.loading=!1,"false"===s&&(this.finished=!0)},toApproval(t){const{activeTab:e}=this;"1"===e?this.$router.push({path:`/mine/approval-management/qualification-approval-comment/${t.operation_id}`,query:{userId:t.user_id}}):this.$router.push({path:`/mine/approval-management/approval-result/${t.instance_id}`})}}},Z=k,w=(0,s(1001).Z)(Z,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"qualification-approval"},[s("van-tabs",{attrs:{color:t.primaryColor,"line-width":24,sticky:""},on:{change:t.onTabChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabs,(function(e){return s("van-tab",{key:e.name,attrs:{title:t.$t(e.lang),name:e.name}})})),1),s("div",{staticClass:"approval-filter"},[s("van-search",{attrs:{shape:"round",placeholder:t.$t("upload.placeholderSearch"),"show-action":""},on:{input:t.onSearch},scopedSlots:t._u([{key:"action",fn:function(){return[s("div",{staticClass:"filter-btn",on:{click:t.showFilter}},[s("van-button",{attrs:{round:"",plain:"",type:"default",size:"small",icon:t.arrow}},[t._v(t._s(t.$t("course.filter")))])],1)]},proxy:!0}]),model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"filter-condition"},[s("van-field",{attrs:{name:"radio",label:t.$t("questionnaire.single"),"label-width":"40"},scopedSlots:t._u([{key:"input",fn:function(){return[s("van-radio-group",{attrs:{direction:"horizontal"},on:{change:t.onSearch},model:{value:t.params.sort_type,callback:function(e){t.$set(t.params,"sort_type",e)},expression:"params.sort_type"}},[s("van-radio",{attrs:{name:"asc"}},[t._v(t._s(t.$t("upload.positiveOrder")))]),s("van-radio",{attrs:{name:"desc"}},[t._v(t._s(t.$t("upload.reverseOrder")))])],1)]},proxy:!0}])}),s("van-field",{attrs:{clickable:"",readonly:"",name:"calendar",value:t.value,label:t.$t("ddLive.time"),"label-width":"40",placeholder:t.$t("upload.selectDate"),"right-icon":t.showClear},on:{focus:function(e){t.showCalendar=!0},"click-right-icon":t.clearDate}}),s("van-calendar",{attrs:{"default-date":t.defaltDate,type:"range","min-date":t.minDate},on:{confirm:t.onConfirm},model:{value:t.showCalendar,callback:function(e){t.showCalendar=e},expression:"showCalendar"}})],1)],1),s("div",{staticClass:"qualification-list"},[s("van-list",{staticClass:"approval-list",attrs:{"loading-text":t.$t("common.loading"),finished:t.finished,"finished-text":t.finished&&0===t.list.length?"":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.list,(function(e){return s("div",{key:e.operation_id,staticClass:"item-content",on:{click:function(s){return t.toApproval(e)}}},[s("div",{staticClass:"flex-column"},[s("div",{staticClass:"operation-name ellipsis"},[t._v(t._s(e.operation_name))]),s("div",{staticClass:"operation-title ellipsis"},[t._v(t._s(e.title))]),s("div",{staticClass:"operation-user"},[s("Avatar",{staticClass:"avatar",attrs:{src:e.avatar,width:"24",height:"24"}}),s("cl-custom-user",{attrs:{type:e.sync_source_type,"data-type":"userName",value:e.sync_user_id,name:e.user_name}})],1)]),s("div",{staticClass:"flex-column"},[s("div",{staticClass:"operation-time"},[t._v(t._s(t._f("formatDate")(e.commit_time)))]),1===e.status?s("span",{staticClass:"tip-pending operation-status"},[t._v(t._s(t.$t("approval.pendingApproval")))]):t._e(),2===e.status?s("span",{staticClass:"tip-reject operation-status"},[t._v(t._s(t.$t("approval.reject")))]):t._e(),3===e.status?s("span",{staticClass:"tip-pass operation-status"},[t._v(" "+t._s(t.$t("approval.pass")))]):t._e()])])})),t.finished&&0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e()],2)],1)],1)}),[],!1,null,"6677cda3",null).exports},40899:(t,e,s)=>{s.r(e),s.d(e,{default:()=>m});var a=s(95082),i=(s(73474),s(74755)),n=(s(25773),s(35791)),o=s(26294),r=s(28387),l=s(95084),c=s(73826),d=s(45877),u={name:"QualificationApprovalComment",components:{[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClAttachment:l.Z,ApprovalComment:c.Z,ClCustomUser:d.Z},beforeRouteLeave(t,e,s){"course-reader"===t.name&&"QualificationApprovalComment"===e.name?this.isRefresh=!1:(this.hidePopup(),this.baseInfo={},this.formData={score:0,status:1,suggest:"",resources:[],operation_source:""},this.isRefresh=!0),s()},data:()=>({show:!1,baseInfo:{},formData:{score:0,status:1,suggest:"",resources:[],operation_source:""},scoreSetting:{},edit:!0,isRefresh:!0}),computed:(0,a.Z)({},(0,o.mapGetters)({primaryColor:"getPrimaryColor"})),activated(){if(!this.isRefresh)return;const{userId:t}=this.$route.query,{operationId:e}=this.$route.params;this.submitUserId=t,this.operationId=e,this.show=!1,this.init()},mounted(){},methods:{async showPopup(){this.show=!0;const{data:t}=await r.Z.getOperationsDraft(this.baseInfo.id);this.formData=(0,a.Z)((0,a.Z)({},this.formData),{},{score:t.data.score||0,suggest:t.data.suggest||"",resources:t.data.resources||[]})},hidePopup(){this.show=!1},handleClosePopup(){this.$refs.childApprovalComment.onClose()},async init(){this.$toast.loading({duration:0,message:this.$t("common.loading"),loadingType:"spinner",forbidClick:!0});const{data:t}=await r.Z.getOperationApproval({operationId:this.operationId,submitUserId:this.submitUserId});this.baseInfo=t.data,this.scoreSetting=this.baseInfo.score_setting,this.$toast.clear()},async onSubmit(t,e){const s=(0,a.Z)((0,a.Z)({},t),{},{resources:e.map((t=>({id:t.id}))),operation_source:this.baseInfo.operation_source});if(1===t.status)try{await r.Z.saveOperationsDraft({operationUserId:this.baseInfo.id,data:{resources:s.resources,score:s.score,suggest:s.suggest}}),this.hidePopup()}catch(t){"enterpriseapi.515001"===t.data.code&&this.$dialog.alert({title:this.$t("common.reminder"),message:this.$t("approval.beenApproved")}).then((()=>{this.$router.go(-1)}))}else try{"success"===(await r.Z.submitOperation({operationId:this.baseInfo.id,data:s})).data.msg&&(this.$toast.success(this.$t("common.approvalSuccess")),this.$router.go(-1))}catch(t){"enterpriseapi.515001"===t.data.code&&this.$dialog.alert({title:this.$t("common.reminder"),message:this.$t("approval.beenApproved")}).then((()=>{this.$router.go(-1)}))}}}},m=(0,s(1001).Z)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"qualification-approval-comment"},[s("div",{staticClass:"qualification-content"},[s("div",{staticClass:"qualification-info"},[s("p",{staticClass:"title"},[t._v(t._s(t.baseInfo.title))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.from"))+": "),s("cl-custom-user",{attrs:{type:t.baseInfo.creator_sync_source_type,"data-type":"userName",value:t.baseInfo.creator_sync_user_id,name:t.baseInfo.create_user}})],1)]),s("div",{staticClass:"comment-content"},[s("p",{staticClass:"title"},[t._v(t._s(t.$t("approval.workRequirements")))]),s("p",{staticClass:"content"},[t._v(t._s(t.baseInfo.content))]),t.baseInfo.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":t.baseInfo.resources,"is-preview":!0,theme:"light"}}):t._e()],1),s("p",{staticClass:"work-content"},[t._v(t._s(t.$t("approval.workContent")))]),t._l(t.baseInfo.steps,(function(e){return s("div",{key:e.id,staticClass:"qualification-field"},[s("p",{staticClass:"step"},[t._v(t._s(t.$t("approval.step",{step:e.step})))]),s("p",{staticClass:"content"},[t._v(t._s(e.content))]),e.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":e.resources,"is-preview":!0,theme:"light"}}):t._e()],1)}))],2),s("div",{staticClass:"footer"},[s("van-button",{style:{backgroundColor:t.primaryColor,borderColor:t.primaryColor},attrs:{type:"primary",block:""},on:{click:t.showPopup}},[t._v(t._s(t.$t("common.approve")))])],1),s("van-popup",{style:{height:"439px"},attrs:{closeable:"",round:"",position:"bottom",duration:"0","close-on-click-overlay":!1,"safe-area-inset-bottom":"","lock-scroll":!1},on:{"click-close-icon":t.handleClosePopup},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.show?s("approval-comment",{ref:"childApprovalComment",attrs:{"approval-name":"approvalQualification","on-submit":t.onSubmit,"has-save-drafts":!0,"default-form-data":t.formData,"score-setting":t.scoreSetting}}):t._e()],1)],1)}),[],!1,null,"1e8f8bf8",null).exports},61804:(t,e,s)=>{s.r(e),s.d(e,{default:()=>C});var a=s(95082),i=(s(82500),s(49414)),n=(s(82522),s(10342)),o=(s(86039),s(20495)),r=(s(58052),s(68286)),l=(s(20581),s(50914)),c=(s(47601),s(44951)),d=(s(49153),s(5944)),u=(s(69710),s(57609)),m=(s(25773),s(35791)),h=(s(33948),s(57658),s(26294)),p=s(22648),g=s(28387),v=s(78368),_=s(45877),f={components:{[m.Z.name]:m.Z,[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClCustomUser:_.Z},filters:{formatDate:function(t){return(0,p.p6)(Number(t),"yyyy.MM.dd hh:mm:ss")}},beforeRouteLeave(t,e,s){"approvalManagement"===t.name&&"submitApproval"===e.name&&localStorage.removeItem("submitTabName"),s()},data:function(){return{activeTab:"wait",tabs:[{name:"wait",lang:"approval.pendingApproval"},{name:"approved",lang:"approval.approval"}],list:[],loading:!1,finished:!1,refreshing:!1,enrollId:"",params:{status:"wait",page_number:0,page_size:10},defaultAvatar:v}},computed:(0,a.Z)({},(0,h.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){localStorage.getItem("submitTabName")&&(this.activeTab=localStorage.getItem("submitTabName"),this.params.status=this.activeTab)},methods:{onTabChange(t){this.onRefresh(),localStorage.setItem("submitTabName",t)},onRefresh(){this.params=(0,a.Z)((0,a.Z)({},this.params),{},{status:this.activeTab,page_number:0}),this.loading=!0,this.finished=!1,this.list=[],this.loading&&this.onLoad()},async onLoad(){this.refreshing&&(this.refreshing=!1),this.params.page_number+=1;const{data:t}=await g.Z.getSubmitApprovalList(this.params),{list:e,hasNextPage:s}=t.data;this.list=[...this.list,...e],this.loading=!1,s||(this.finished=!0)},toApproval(t){const{activeTab:e}=this;"wait"===e?this.$router.push({path:`/mine/approval-management/submit-approval-comment/${t.id}`}):this.$router.push({path:`/mine/approval-management/submit-approval-result/${t.instance_id}/${t.id}`})}}},y=f,C=(0,s(1001).Z)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"submit-approval"},[s("van-tabs",{attrs:{color:t.primaryColor,"line-width":24,sticky:""},on:{change:t.onTabChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabs,(function(e){return s("van-tab",{key:e.name,attrs:{title:t.$t(e.lang),name:e.name}})})),1),s("van-pull-refresh",{staticClass:"approval-list",on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{"loading-text":t.$t("common.loading"),finished:t.finished,"finished-text":t.finished&&0===t.list.length?"":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.list,(function(e){return s("div",{key:e.id,staticClass:"item-content",on:{click:function(s){return t.toApproval(e)}}},[s("div",{staticClass:"item-info"},[s("p",{staticClass:"title"},[t._v(t._s(e.name))]),s("p",{staticClass:"address"},[t._v(t._s(e.address))])]),s("van-divider",{staticStyle:{marginBottom:"12px"}}),s("div",{staticClass:"item-tool"},[s("div",{staticClass:"free"},[s("van-image",{staticClass:"avatar",attrs:{src:e.avatar||t.defaultAvatar,fit:"fill"}}),s("span",{staticClass:"time"},[s("cl-custom-user",{attrs:{type:e.source_type,"data-type":"userName",value:e.sync_user_id,name:e.submit_user}}),t._v(" ("+t._s(t._f("formatDate")(e.submit_report_time))+" "+t._s(t.$t("common.submit"))+")")],1)],1),"approved"===t.activeTab?s("div",["pass"===e.status?s("span",{staticStyle:{color:"#5DBD66"}},[t._v(t._s(t.$t("approval.pass")))]):s("span",{staticStyle:{color:"#D8403D"}},[t._v(t._s(t.$t("approval.reject")))])]):t._e()])],1)})),t.finished&&0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e()],2)],1)],1)}),[],!1,null,"cf6872f6",null).exports},76176:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});var a=s(95082),i=(s(73474),s(74755)),n=(s(23307),s(81392)),o=(s(93787),s(20090)),r=(s(77141),s(30960)),l=(s(69710),s(57609)),c=(s(25773),s(35791)),d=(s(74916),s(15306),s(26294)),u=s(28387),m=s(22648),h=s(95084),p=s(73826),g=s(45877),v={name:"SubmitApprovalComment",components:{[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClAttachment:h.Z,ApprovalComment:p.Z,ClCustomUser:g.Z},filters:{formatDate:function(t){return(0,m.p6)(Number(t),"yyyy.MM.dd hh:mm:ss")}},beforeRouteLeave(t,e,s){"course-reader"===t.name&&"SubmitApprovalComment"===e.name?this.isRefresh=!1:(this.hidePopup(),this.baseInfo={},this.formData={score:0,status:1,suggest:"",resources:[]},this.isRefresh=!0),s()},data:()=>({show:!1,baseInfo:{},formData:{score:0,status:1,suggest:"",resources:[]},scoreSetting:{},edit:!0,isRefresh:!0}),computed:(0,a.Z)({},(0,d.mapGetters)({primaryColor:"getPrimaryColor"})),created(){},activated(){if(!this.isRefresh)return;const{submitId:t}=this.$route.params;this.submitId=t,this.show=!1,this.init()},methods:{async showPopup(){this.show=!0;const{data:t}=await u.Z.getSubmitDraft(this.submitId);this.formData=(0,a.Z)((0,a.Z)({},this.formData),{},{score:t.data.score||0,suggest:t.data.suggest||"",resources:t.data.resources||[]})},hidePopup(){this.show=!1},async init(){this.$toast.loading({duration:0,message:this.$t("common.loading"),loadingType:"spinner",forbidClick:!0});try{const{data:t,msg:e}=await u.Z.getSubmitDetail(this.submitId);if(this.$toast.clear(),e)this.getSubmitDetailError(e);else{this.baseInfo=t.data;const{scoreSetting:e,status:s,instance_id:a,id:i}=this.baseInfo;this.scoreSetting=e,"wait"!==s&&this.$router.replace({path:`/mine/approval-management/submit-approval-result/${a}/${i}`})}}catch(t){this.$toast.clear(),this.getSubmitDetailError(t.data.message)}},getSubmitDetailError(t){this.$dialog.alert({title:this.$t("mine.confirmTitle"),message:t,showCancelButton:!1,confirmButtonText:this.$t("mine.iKnow"),confirmButtonColor:this.primaryColor}).then((()=>{this.$router.replace({path:"/mine/approval-management/submit-approval"})}))},async onSubmit(t,e){const s=(0,a.Z)((0,a.Z)({},t),{},{draft:1===t.status?"true":"false",instance_id:this.baseInfo.instanceId,resources:e.map((t=>({id:t.id})))});if(0===(await u.Z.saveSubmitDraft({submitId:this.submitId,data:s})).data.code)if(1===t.status)this.$toast.success(this.$t("common.operateSuccess")),this.hidePopup();else{const{from:t}=this.$route.query;this.$toast.success(this.$t("common.approvalSuccess")),"message"===t?this.$router.replace({path:"/mine/approval-management/submit-approval"}):this.$router.go(-1)}}}},_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"submit-approval-comment"},[s("div",{staticClass:"submit-content"},[s("div",{staticClass:"submit-info"},[s("p",{staticClass:"title"},[t._v(t._s(t.baseInfo.title))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("common.creator"))+": "),s("cl-custom-user",{attrs:{type:t.baseInfo.source_type,"data-type":"userName",value:t.baseInfo.sync_user_id,name:t.baseInfo.submit_user}})],1),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.manager"))+": "+t._s(t.baseInfo.head||"--"))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.joinTime"))+": "+t._s(t._f("formatDate")(t.baseInfo.participation_time)))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.classify"))+": "+t._s(t.baseInfo.classifyName||t.$t("approval.other")))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.duration"))+": "+t._s(t.baseInfo.duration)+t._s(t.baseInfo.duration?t.$t("approval.minutes"):null))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.submitTime"))+": "+t._s(t._f("formatDate")(t.baseInfo.submit_report_time)))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.updateTime"))+": "+t._s(t._f("formatDate")(t.baseInfo.update_time)))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.address"))+": "+t._s(t.baseInfo.address))]),s("p",{staticClass:"content"},[t._v(t._s(t.baseInfo.content))])]),s("div",{staticClass:"submit-field"},[t.baseInfo.resources&&t.baseInfo.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":t.baseInfo.resources,"is-preview":!0}}):t._e()],1)]),s("van-popup",{style:{height:"372px"},attrs:{closeable:"",round:"",position:"bottom",duration:"0","close-on-click-overlay":!1,"lock-scroll":!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("approval-comment",{ref:"childApprovalComment",attrs:{"approval-name":"submitReport","on-submit":t.onSubmit,"has-save-drafts":!0,"default-form-data":t.formData,"score-setting":t.scoreSetting}})],1),s("div",{staticClass:"footer"},[s("van-button",{style:{backgroundColor:t.primaryColor,borderColor:t.primaryColor},attrs:{type:"primary",block:""},on:{click:t.showPopup}},[t._v(t._s(t.$t("common.approve")))])],1)],1)}),[],!1,null,"acaa6c00",null).exports},22969:(t,e,s)=>{s.r(e),s.d(e,{default:()=>v});var a=s(95082),i=(s(71404),s(57141)),n=(s(76424),s(41942)),o=(s(47601),s(44951)),r=(s(74916),s(15306),s(26294)),l=s(28387),c=s(20206),d=s(22648),u=s(95084),m=s(78551),h=s(78368),p=s(45877),g={components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClAttachment:u.Z,SvgIcon:m.Z,ClCustomUser:p.Z},filters:{formatDate:t=>(0,d.p6)(Number(t),"yyyy-MM-dd hh:mm"),formatDate2:t=>(0,d.p6)(Number(t),"yyyy-MM-dd hh:mm:ss"),switchToLine:t=>t.map((t=>(0,d.Tq)(t,"toLine")))},data:()=>({active:0,approvalId:"",comments:[],newCommentObj:{},defaultAvatar:h,commentsTypesObj:c.h,baseInfo:{}}),computed:(0,a.Z)({},(0,r.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){const{instanceId:t,submitId:e}=this.$route.params;this.instanceId=t,this.submitId=e,this.getDetails()},methods:{async getComments(){const{instanceId:t,submitId:e}=this;try{const{data:s}=await l.Z.getSubmitRecord({instanceId:t,submitId:e});this.comments=s.data,this.comments.forEach((t=>{t.opinion_btn=!1,t.opinion_open=!0})),this.$nextTick((()=>{this.getOpinionHeight()})),this.newCommentObj=this.comments[this.comments.length-1]}catch(t){this.getSubmitDetailError(t.data.message)}},getOpinionHeight(){this.comments.forEach(((t,e)=>{const s=this.$refs.nodes[e].offsetHeight;t.opinion_height=s,t.opinion_btn=s>40})),this.$forceUpdate()},changeOpinionOpen(t,e){this.comments[e].opinion_open=t,this.$forceUpdate()},async getDetails(){this.$toast.loading({duration:0,message:this.$t("common.loading"),loadingType:"spinner",forbidClick:!0});try{const{data:t,msg:e}=await l.Z.getSubmitDetail(this.submitId);this.$toast.clear(),e?this.getSubmitDetailError(e):(this.baseInfo=t.data,this.getComments())}catch(t){this.$toast.clear(),this.getSubmitDetailError(t.data.message)}},getSubmitDetailError(t){this.$dialog.alert({title:this.$t("mine.confirmTitle"),message:t,showCancelButton:!1,confirmButtonText:this.$t("mine.iKnow"),confirmButtonColor:this.primaryColor}).then((()=>{this.$router.replace({path:"/mine/approval-management/submit-approval"})}))}}},v=(0,s(1001).Z)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"submit-approval-result"},[s("div",{staticClass:"approval-result"},[s("div",{staticClass:"result-box"},["pass"===t.newCommentObj.operation?s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-tongguo",color:"#5DBD66",size:54}}):t._e(),"reject"===t.newCommentObj.operation?s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-icon_close",color:"#D8403D",size:54}}):t._e(),s("p",{staticClass:"operation",style:{color:"pass"===t.newCommentObj.operation?"#5DBD66":"#D8403D"}},[t._v(" "+t._s("pass"===t.newCommentObj.operation?t.$t("attestation.approved"):t.$t("approval.rejected"))+" ")]),s("p",{staticClass:"time"},[t._v(t._s(t._f("formatDate2")(t.newCommentObj.createTime)))]),"pass"===t.newCommentObj.operation?s("p",{staticClass:"score"},[t._v(t._s(t.$t("approval.score"))+": "+t._s(t.newCommentObj.score)+t._s(t.$t("myRating.point")))]):t._e()],1),s("van-steps",{attrs:{active:t.active,direction:"vertical","active-color":"#2d3040","inactive-color":"#2d3040"}},t._l(t.comments,(function(e,a){return s("van-step",{key:e.id,staticClass:"comment-list",scopedSlots:t._u([{key:"active-icon",fn:function(){return[s("span",{staticClass:"step-icon"},[s("span",{staticClass:"step-active-icon"})])]},proxy:!0},{key:"inactive-icon",fn:function(){return[s("span",{staticClass:"step-icon"},[s("span",{staticClass:"step-active-icon"})])]},proxy:!0}],null,!0)},[s("div",{staticClass:"comment-item"},[s("div",{staticClass:"title"},[s("p",[s("van-image",{staticClass:"avatar",attrs:{src:e.userAvatar||t.defaultAvatar,fit:"fill",round:""}}),s("cl-custom-user",{attrs:{type:e.source_type,"data-type":"userName",value:e.sync_user_id,name:e.userName}}),s("span",{staticClass:"operation",style:{color:t.commentsTypesObj[e.operation].color}},[t._v(t._s(t.$t(t.commentsTypesObj[e.operation].lang)))])],1),s("span",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(e.createTime)))])]),s("p",{ref:"nodes",refInFor:!0,staticClass:"opinion",style:{height:e.opinion_btn&&e.opinion_open?"40px":e.opinion_height,overflow:e.opinion_btn&&e.opinion_open?"hidden":"inherit",display:e.opinion?e.opinion_btn&&e.opinion_open?"-webkit-box":"inline-block":"none"}},[t._v(" "+t._s(e.opinion)+" ")]),e.opinion_btn?s("p",{staticClass:"opinion-flexible",on:{click:function(s){return t.changeOpinionOpen(!e.opinion_open,a)}}},[t._v(" "+t._s(t.$t(e.opinion_open?"attestation.open":"attestation.retract"))+" ")]):t._e(),s("div",[e.resources&&e.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":e.resources,"is-preview":!0,theme:"light"}}):t._e()],1)])])})),1)],1),s("div",{staticClass:"submit-approval-comment"},[s("div",{staticClass:"submit-content"},[s("div",{staticClass:"submit-info"},[s("p",{staticClass:"title"},[t._v(t._s(t.baseInfo.title))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("common.creator"))+": "),s("cl-custom-user",{attrs:{type:t.baseInfo.source_type,"data-type":"userName",value:t.baseInfo.sync_user_id,name:t.baseInfo.submit_user}})],1),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.manager"))+": "+t._s(t.baseInfo.head||"--"))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.joinTime"))+": "+t._s(t._f("formatDate")(t.baseInfo.participation_time)))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.classify"))+": "+t._s(t.baseInfo.classifyName||t.$t("approval.other")))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.duration"))+": "+t._s(t.baseInfo.duration)+t._s(t.baseInfo.duration?t.$t("approval.minutes"):null))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.submitTime"))+": "+t._s(t._f("formatDate")(t.baseInfo.submit_report_time)))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.updateTime"))+": "+t._s(t._f("formatDate")(t.baseInfo.update_time)))]),s("p",{staticClass:"from"},[t._v(t._s(t.$t("approval.address"))+": "+t._s(t.baseInfo.address))]),s("p",{staticClass:"content"},[t._v(t._s(t.baseInfo.content))])]),s("div",{staticClass:"submit-field"},[t.baseInfo.resources&&t.baseInfo.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":t._f("switchToLine")(t.baseInfo.resources),"is-preview":!0}}):t._e()],1)])])])}),[],!1,null,"27179712",null).exports},92383:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});s(31960);var a=s(10993),i=s(95082),n=(s(3791),s(93432)),o=(s(47601),s(44951)),r=(s(49153),s(5944)),l=(s(20581),s(50914)),c=(s(74916),s(15306),s(26294)),d=s(22648),u=s(28387),m=s(27632),h=s(17563),p=s(470),g=s(24825),v={components:{[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,CalendarKeepDate:p.Z},data:()=>({dataLoading:!0,dataList:[],loading:!1,finished:!0,page:{page_number:1,page_size:20},start_time:"",end_time:""}),computed:(0,i.Z)({userInfo(){return this.$store.state.commonParams}},(0,c.mapGetters)({primaryColor:"getPrimaryColor",qyWechatBook:"setting/getQyWechatBook",userInfoVue:"user/getUserInfo"})),mounted(){!(0,g.X)("myCertificateKeepDate")&&this.getList()},methods:{async getList(){const t=(0,i.Z)((0,i.Z)({},this.page),{},{user_id:this.userInfo.userId,date_type:"issue",start_date:this.start_time,end_date:this.end_time}),{status:e,data:s}=await u.Z.getCertificateList(t).catch((()=>{this.dataLoading=!1,this.loading=!1}));200===e&&(this.dataList=1===this.page.page_number?s.list:this.dataList.concat(s.list),this.finished="false"===s.has_next_page),this.dataLoading=!1,this.loading=!1},onLoadMore(){this.page.page_number+=1,this.loading=!0,this.getList()},renderData(t){return t?(0,d.p6)(t,"yyyy-MM-dd"):this.$t("evaluation.permanent")},renderTipColor:t=>"deleted"===t?{background:"#FF6100"}:"overdue"===t?{background:"#FF3B30"}:void 0,preview(t,e){if("fail"===t)return;const s="wx_app"===this.userInfoVue.appType&&this.qyWechatBook&&"9005"===this.userInfoVue.appId;if("dingTalk"===m.Z.env)m.Z.previewImage({urls:[t]});else if("h5"===m.Z.pureEnv&&s){const s={enterpriseId:this.userInfoVue.enterpriseId,certificateId:e,accessToken:this.userInfoVue.accessToken,imageUrl:encodeURIComponent(t),from:"vue"},a=`${PUBLIC_H5}${ENTERPRISE_PATH}#/certificate?${h.stringify(s)}`;window.location.href=a}else(0,a.Z)({images:[t],showIndex:!1})},onDateConfirm(t,e){this.page.page_number=1,this.start_time=t[0]?new Date(t[0].replace(/\./g,"/")).getTime():"",this.end_time=t[1]?new Date(t[1].replace(/\./g,"/")).getTime()+864e5:"",e&&(0,g.r)("myCertificateKeepDate",t),this.getList()}}},_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mine-certificate"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.dataLoading,expression:"dataLoading"}],staticClass:"mine-certificate-center"}),s("CalendarKeepDate",{attrs:{type:"MineCertificate","theme-color":t.primaryColor},on:{onDateConfirm:t.onDateConfirm}}),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.dataLoading,expression:"!dataLoading"}]},[t.dataList.length?s("van-list",{staticClass:"mine-certificate-list",attrs:{finished:t.finished,"finished-text":t.$t("mine.noMore")},on:{load:t.onLoadMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e){return s("div",{key:e.id,staticClass:"mine-certificate-list-item",on:{click:function(s){return t.preview(e.image_url,e.id)}}},[s("div",{staticClass:"list-item-image flex-center"},["fail"===e.image_url?s("div",{staticClass:"certificate-img-fail"},[t._v(t._s(t.$t("mine.imgFailed")))]):s("div",{staticClass:"certificate-img-container flex-center"},[s("van-image",{staticClass:"certificate-img",attrs:{fit:"contain","lazy-load":"",src:e.image_url}})],1)]),s("div",{staticClass:"list-item-info"},[s("p",{staticClass:"item-info-name van-multi-ellipsis--l2"},[t._v(t._s(e.certificate_name))]),s("p",{staticClass:"item-info-p van-ellipsis"},[t._v(t._s(t.$t("attestation.certificateNumber"))+": "+t._s(e.certificate_code))]),s("p",{staticClass:"item-info-p van-ellipsis"},[t._v(t._s(t.$t("mine.expireDate"))+": "+t._s(t.renderData(e.overdue_date)))])]),"normal"!==e.status?s("div",{staticClass:"list-item-mask"},[s("div",{staticClass:"list-item-mask-tip",style:t.renderTipColor()},[t._v(t._s(t.$t("mine."+e.status)))])]):t._e()])})),0):s("van-empty",{staticClass:"mine-certificate-center",attrs:{description:t.$t("common.noDataTextTip")}})],1)],1)}),[],!1,null,null,null).exports},65951:(t,e,s)=>{s.d(e,{Z:()=>l});var a=s(95082),i=(s(25773),s(35791)),n=(s(47601),s(44951)),o=(s(57658),s(26294)),r={name:"SignBanner",components:{[n.Z.name]:n.Z,[i.Z.name]:i.Z},computed:(0,a.Z)((0,a.Z)({},(0,o.mapGetters)({qyShield:"setting/getQySwitch"})),{},{currentDate(){const t=new Date,e=t.getFullYear(),s=t.getMonth()+1,a=t.getDate();let i=t.getDay();switch(i){case 1:i=this.$t("signIn.Monday");break;case 2:i=this.$t("signIn.Tuesday");break;case 3:i=this.$t("signIn.Wednesday");break;case 4:i=this.$t("signIn.Thursday");break;case 5:i=this.$t("signIn.Friday");break;case 6:i=this.$t("signIn.Saturday");break;case 0:i=this.$t("signIn.Sunday");break;default:i=""}return`${e+this.$t("signIn.year")+s+this.$t("signIn.month")+a+this.$t("signIn.Sunr")} ${i}`}}),methods:{onPreviewPoster(){this.$router.push({path:"/sign-poster"})}}},l=(0,s(1001).Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-banner"},[s("van-image",{staticClass:"sign-banner-image",attrs:{src:"https://oss.coolcollege.cn/1789888153717444608.png"}}),s("div",{staticClass:"sign-banner-date"},[t._v(t._s(t.currentDate))]),s("div",{staticClass:"sign-banner-text"},[t._v(t._s(t.$t("signIn.tips")))]),"false"===t.qyShield?s("van-button",{staticClass:"sign-banner-poster",attrs:{round:""},on:{click:t.onPreviewPoster}},[t._v(" "+t._s(t.$t("signIn.generatePoster"))+" ")]):t._e()],1)}),[],!1,null,"4d444120",null).exports},88565:(t,e,s)=>{s.d(e,{Z:()=>c});s(34837);var a=s(39146),i=s(95082),n=(s(57658),s(26294)),o=s(23874),r=s(6106),l={name:"SignIn",components:{SvgIcon:s(78551).Z},props:{isShowDetailEntry:{type:Boolean,default:!0}},data:()=>({signStatus:"",days:0,continueDays:0}),computed:(0,i.Z)({},(0,n.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){this.signInStatus()},methods:{onSignInClick(){this.$router.push({path:"/sign-details"})},signInStatus(){const t=new Date,e=t.getFullYear(),s=t.getMonth()+1,a=s>10?s:`0${s}`;o.Z.loadRecords(`${e}${a}`).then((t=>{this.signStatus="false"===t.data.data.today_is_signed,this.days=t.data.data.accumulate_sign_count})),this.signInContinuityDays()},signInContinuityDays(){r.Z.signInContinuityDays().then((t=>{this.continueDays=t.data.data}))},toSignIn(){o.Z.goToSignIn().then((t=>{this.signStatus=!1,this.days=t.data.data.accumulate_sign_count,this.$emit("initRankingList"),this.signInContinuityDays();const e=t.data.data.integral_info;e&&(0,a.Z)({message:e,duration:3e3})}))}}},c=(0,s(1001).Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-info"},[s("div",{staticClass:"sign-info-top"},[s("span",{staticClass:"continues-days-tip"},[t._v(t._s(t.$t("signIn.continuousSignIn")))]),s("div",{staticClass:"total-signin-info"},[s("span",{staticClass:"total-tip-container",on:{click:t.onSignInClick}},[s("span",{staticClass:"total-tip"},[t._v(t._s(t.$t("signIn.cumulativeSignInDays")+" "+t.days+" "+t.$t("signIn.day")))]),t.isShowDetailEntry?s("svg-icon",{attrs:{"icon-class":"icon-arrow-r",size:12,color:"#7F849A"}}):t._e()],1)])]),s("div",{staticClass:"sign-info-details"},[s("div",{staticClass:"sign-info-details-days"},[s("div",[s("span",{staticClass:"times",style:{color:t.primaryColor}},[t._v(t._s(t.continueDays))]),t._v(t._s(t.$t("signIn.day"))+" ")])]),t.signStatus?s("div",{staticClass:"sign-info-details-btn",style:{background:t.primaryColor},on:{click:t.toSignIn}},[t._v(t._s(t.$t("signIn.daily")))]):s("div",{staticClass:"sign-info-details-btn signed",style:{background:t.primaryColor}},[t._v(t._s(t.$t("signIn.registered")))])])])}),[],!1,null,"ee9710ee",null).exports},81607:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});var a=s(95082),i=(s(47601),s(44951)),n=(s(20581),s(50914)),o=(s(33948),s(22648)),r=s(26294),l=s(23874),c=s(4852),d=s(65951),u=s(88565),m=s(45877),h=s(67875),p={name:"DailySignin",components:{SignBanner:d.Z,SignIn:u.Z,Avatar:c.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClCustomUser:m.Z,ClCustomDepartment:h.Z},data:()=>({rankingList:[],total:0,loading:!1,params:{user_id:"",page_num:0,page_size:5},fromPage:""}),computed:(0,a.Z)((0,a.Z)({},(0,r.mapGetters)({userInfo:"user/getUserInfo"})),{},{finished(){return this.params.page_num*this.params.page_size>this.total}}),mounted(){this.fromPage=this.$route.query.fromPage},methods:{onLoadMore(){this.params=(0,a.Z)((0,a.Z)({},this.params),{},{page_num:this.params.page_num+1}),this.loading=!0,this.$nextTick((()=>{l.Z.signInList(this.params).then((t=>{t.data.data.list.forEach((t=>{t.sign_time=(0,o.p6)(Number(t.sign_time),"yyyy.MM.dd hh:mm:ss")})),this.rankingList=[...this.rankingList,...t.data.data.list],this.total=t.data.data.total,this.loading=!1})).catch((()=>this.loading=!1))}))}}},g=(0,s(1001).Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-contanier"},[s("SignBanner"),s("SignIn",{attrs:{"is-show-detail-entry":"signEntry"===t.fromPage&&t.userInfo.isAdmin},on:{initRankingList:t.onLoadMore}}),s("div",{staticClass:"sign-record"},[t._v(t._s(t.$t("signIn.record")))]),s("div",{staticClass:"sign"},[s("van-list",{attrs:{finished:t.finished,"finished-text":t.rankingList.length?t.$t("common.noMore"):null},on:{load:t.onLoadMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.rankingList,(function(e,a){return s("div",{key:a,staticClass:"sign-list"},[s("Avatar",{attrs:{src:e.avatar,size:40,fit:"cover"}}),s("div",{staticClass:"sign-list-people"},[e.user_info&&e.user_info.name?s("div",{staticClass:"sign-list-people-name"},[s("cl-custom-user",{attrs:{type:e.user_info.source_type,"data-type":"userName",value:e.user_info.user_id,name:e.user_info.name||"--"}})],1):s("div",{staticClass:"sign-list-people-name"},[t._v(t._s(e.user_name))]),e.user_info&&e.user_info.department_info?s("div",{staticClass:"sign-list-people-dept"},[s("cl-custom-department",{attrs:{"display-all":!0,list:e.user_info.department_info}})],1):s("div",{staticClass:"sign-list-people-dept"},[t._v(t._s(e.department_name||""))])]),s("div",{staticClass:"sign-list-score"},[s("span",{staticClass:"sign-list-score-real"},[t._v(t._s(e.sign_time))])])],1)})),0),0===t.rankingList.length?s("div",{staticClass:"sign-default"},[s("van-image",{staticClass:"sign-default-image",attrs:{src:"https://oss.coolcollege.cn/1790035115800399872.png"}}),s("div",{staticClass:"sign-default-text"},[t._v(t._s(t.$t("signIn.none")))])],1):t._e()],1)],1)}),[],!1,null,"296f98ac",null).exports},22140:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var a=s(95082),i=(s(57658),s(26294)),n=s(23874),o=s(65951),r=s(88565),l=s(78551),c={name:"SignDetails",components:{SignBanner:o.Z,SignIn:r.Z,SvgIcon:l.Z},data:()=>({currentDay:"",currentMonth:"",currentYear:"",weekList:[{name:"一",class:""},{name:"二",class:""},{name:"三",class:""},{name:"四",class:""},{name:"五",class:""},{name:"六",class:""},{name:"日",class:""}],fromPage:"",dayList:[]}),computed:(0,a.Z)({},(0,i.mapGetters)({userInfo:"user/getUserInfo",primaryColor:"getPrimaryColor"})),async mounted(){this.fromPage=this.$route.query.fromPage,await this.initCalendar()},methods:{signInRecords(){n.Z.loadRecords(`${this.currentYear}${this.currentMonth}`).then((t=>{const{sign_records:e=[]}=t.data.data;this.dayList.forEach((t=>{e.forEach((e=>{t.day===Number(e)&&("today"===t.label?t.class="today_sign":t.class="active")}))}))}))},formatter(t){const e=(new Date).getFullYear(),s=(new Date).getMonth(),a=(new Date).getDate(),i=t.date.getFullYear(),n=t.date.getMonth(),o=t.date.getDate();return e===i&&s===n&&a===o&&(t.text="今"),t},getMonthFirstDate:t=>`${t.getFullYear()}/${t.getMonth()+1}/01`,preMonth(){const t=new Date(`${this.currentYear}/${this.currentMonth}/${this.currentDay}`),e=new Date(this.getMonthFirstDate(new Date(t.setDate(0))));this.initCalendar(e)},nextMonth(){const t=new Date(`${this.currentYear}/${this.currentMonth}/${this.currentDay}`),e=new Date(this.getMonthFirstDate(new Date(t.setDate(33))));this.initCalendar(e)},changeYear(t){this.currentYear="pre"===t?--this.currentYear:++this.currentYear;const e=new Date(`${this.currentYear}/${this.currentMonth}/${this.currentDay}`);this.initCalendar(e)},initCalendar(t){const e=t||new Date,s=this.getMonthFirstDate(e),a=new Date(s).getDay()?new Date(s).getDay():7,i=[],n=2-a,o=a<6?35:42;for(let t=n;t<n+o;t++){const e=new Date(new Date(s).setDate(t)),a=e.getDate(),n={day:a<t||t<=0?0:a,class:"",label:""};e.toDateString()===(new Date).toDateString()&&(n.class="today_unsign",n.label="today"),i.push(n)}this.dayList=i,this.currentDay=e.getDate(),this.currentMonth=e.getMonth()+1>=10?e.getMonth()+1:`0${e.getMonth()+1}`,this.currentYear=e.getFullYear(),this.signInRecords()}}},d=(0,s(1001).Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-details"},[s("SignBanner"),s("SignIn",{attrs:{"is-show-detail-entry":"signEntry"===t.fromPage&&t.userInfo.isAdmin}}),s("div",{staticClass:"calendar-wrap"},[s("div",{staticClass:"select-wrap"},[s("div",{staticClass:"iconfont",on:{click:function(e){return t.changeYear("pre")}}},[s("svg-icon",{attrs:{"icon-class":"icon-doubleleft",size:24,color:"rgba(0,0,0,0.45)"}})],1),s("div",{staticClass:"dates",on:{click:t.preMonth}},[s("svg-icon",{attrs:{"icon-class":"icon-left",size:24,color:"rgba(0,0,0,0.45)"}})],1),s("div",{staticClass:"current-date"},[t._v(" "+t._s(t.currentYear+"年"+t.currentMonth+"月")+" ")]),s("div",{staticClass:"dates",on:{click:t.nextMonth}},[s("svg-icon",{attrs:{"icon-class":"icon-right",size:24,color:"rgba(0,0,0,0.45)"}})],1),s("div",{on:{click:function(e){return t.changeYear("next")}}},[s("svg-icon",{attrs:{"icon-class":"icon-doubleright",size:24,color:"rgba(0,0,0,0.45)"}})],1)]),s("div",{staticClass:"calendar-body"},[s("div",{staticClass:"week-container"},t._l(t.weekList,(function(e){return s("div",{key:e.name,class:"week "+e.class},[t._v(t._s(e.name))])})),0),s("div",{staticClass:"day-container"},t._l(t.dayList,(function(e){return s("div",{key:e.index,staticClass:"day"},[s("span",{class:e.class+" day-text"},[t._v(" "+t._s("today"===e.label?"今":e.day>0?e.day:null)+" ")])])})),0)])])],1)}),[],!1,null,"3f0496bc",null).exports},94993:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});s(34837);var a=s(39146),i=s(95082),n=(s(25773),s(35791)),o=(s(47601),s(44951)),r=s(26294),l=s(23874),c=s(27632),d={name:"SignPoster",components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z},data:()=>({posterUrl:"",checkedTemplate:1,checkedThemeColor:{},env:c.Z.env}),computed:(0,i.Z)({},(0,r.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){this.checkedThemeColor={color:`${this.primaryColor}`,border:`1px solid ${this.primaryColor}`},this.getPostUrl(1)},methods:{getPostUrl(t){a.Z.loading({message:this.$t("promptMessage.loading")}),l.Z.getPostUrl(t).then((t=>{this.posterUrl=t.data.data.url,a.Z.clear()})).catch((()=>{a.Z.clear(),(0,a.Z)({message:this.$t("signIn.failedGetPoster"),duration:3e3,forbidClick:!0})}))},handleSwitchTemplate(t){this.checkedTemplate=t,this.getPostUrl(t)},savePoster(){c.Z.saveImage({url:this.posterUrl},(()=>{this.$toast.success(this.$t("attestation.saveSuccess"))}),(t=>{console.error(t),this.$toast.fail(this.$t("common.operateErrorWithRepeat"))}))},previewPoster(){"dingTalk"===this.env&&c.Z.previewImage({urls:[this.posterUrl]})}}},u=(0,s(1001).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-poster-container"},[s("div",{staticClass:"sign-poster-container-img",on:{click:t.previewPoster}},[s("van-image",{staticClass:"image",attrs:{src:t.posterUrl}})],1),s("div",{staticClass:"sign-poster-container-templates"},[s("van-button",{staticClass:"sign-poster-container-button",style:1===t.checkedTemplate?t.checkedThemeColor:"",on:{click:function(e){return t.handleSwitchTemplate(1)}}},[t._v(" "+t._s(t.$t("signIn.templateOne"))+" ")]),s("van-button",{staticClass:"sign-poster-container-button",style:2===t.checkedTemplate?t.checkedThemeColor:"",on:{click:function(e){return t.handleSwitchTemplate(2)}}},[t._v(" "+t._s(t.$t("signIn.templateTwo"))+" ")])],1),s("div",{staticClass:"sign-poster-container-footer"},["app"===t.env?s("van-button",{attrs:{color:t.primaryColor,block:""},on:{click:t.savePoster}},[t._v(" "+t._s(t.$t("signIn.save"))+" ")]):s("van-button",{attrs:{color:t.primaryColor,block:""},on:{click:t.previewPoster}},["dingTalk"!==t.env?s("span",[t._v(t._s(t.$t("signIn.longPressSave")))]):s("span",[t._v(t._s(t.$t("signIn.previewSave")))])])],1)])}),[],!1,null,"2b6f8c74",null).exports},71453:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});s(34837);var a=s(39146),i=s(95082),n=(s(49153),s(5944)),o=(s(70885),s(6458)),r=(s(18144),s(65641)),l=(s(52355),s(29233)),c=(s(20581),s(50914)),d=(s(73474),s(74755)),u=(s(22894),s(83608)),m=(s(33948),s(78186)),h=s(45877),p=s(28387),g=s(22648),v={name:"LearnScore",components:{Picker:u.Z,Popup:d.Z,List:c.Z,Cell:l.Z,Col:r.Z,Row:o.Z,RankCard:m.Z,Empty:n.Z,ClCustomUser:h.Z},data(){return{show:!1,loading:!1,summary:{company_average:0,rank:0,study_power:0},depts:[],dataList:[],dept_id:1,dept_name:this.$t("project.companyWide"),default_index:0,finished:!1,hasNextPage:!0,pagenation:{pageNumber:1,pageSize:10}}},computed:{themeColor(){return this.$store.state.themeColor}},mounted(){document.title=this.$t("mine.learnAbilityRank"),this.initSummary(),this.initList(),this.initDeptList()},methods:{isShow(){this.show=!0},onDeptSelectCancel(){this.show=!1},onDeptSelectConfirm(t,e){this.dept_id!==t.dept_id&&(this.dept_id=t.dept_id,this.dept_name=t.text,this.default_index=e,this.show=!1,this.dataList=[],this.pagenation.pageNumber=1,this.hasNextPage=!0,this.finished=!1,this.initList(),this.initSummary())},async initSummary(){const{getSummaryDetail:t}=p.Z;try{const{data:e}=await t(this.dept_id);this.summary=e}catch(t){this.summary={}}},async initList(){if(!this.hasNextPage)return;const{getListData:t}=p.Z;this.loading=!0;const e=(0,i.Z)((0,i.Z)({},this.pagenation),{},{departmentId:this.dept_id});try{const{data:s}=await t(e);s.hasNextPage||(this.finished=!0,this.hasNextPage=!1),this.dataList=[...this.dataList,...s.list],this.loading=!1}catch(t){this.dataList=[],this.loading=!1,this.finished=!0,a.Z.fail(this.$t("mine.errTips"))}},async initDeptList(){const{getDeptList:t}=p.Z,{data:e}=await t();0===e.code?this.depts=e.data.map((t=>({text:t.dept_name,dept_id:t.dept_id}))):this.depts=[]},onLoadData(){this.hasNextPage&&(this.pagenation.pageNumber++,this.initList())},getScore:t=>(0,g.i5)(t)}},_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"learn-score-container"},[s("div",{staticClass:"learn-score-summary"},[s("div",{staticClass:"learn-summary-box",style:{background:t.themeColor.backgroundColor}},[s("RankCard",{attrs:{summary:t.summary,title:t.$t("mine.learnAbilityRank"),label:t.$t("mine.average"),rank:t.$t("mine.myRank")}})],1)]),s("div",{staticClass:"learn-score-list"},[s("div",{staticClass:"learn-score-body"},[s("div",{staticClass:"learn-my-tabs"},[s("Row",{staticClass:"learn-my-tabs-box",attrs:{justify:"space-between"}},[s("Col",{attrs:{span:"12"}},[s("div",{staticClass:"learn-score-tab"},[s("div",[t._v(t._s(t.$t("mine.stuRank")))]),s("div",{staticClass:"learn-score-icon",style:{background:t.themeColor.primaryColor}})])]),s("Col",{attrs:{span:"12"}},[s("div",{staticClass:"learn-score-part",style:{color:t.themeColor.primaryColor},on:{click:t.isShow}},[t._v(t._s(t.$t("mine.current"))+": "+t._s(t.dept_name))])])],1),s("div",{staticClass:"learn-score-tab-content"},[t.loading||0!==t.dataList.length?s("List",{attrs:{finished:t.finished,"finished-text":t.$t("mine.noMore")},on:{load:t.onLoadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e){return s("Cell",{key:e.id,staticClass:"learn-cell-item",attrs:{value:t.getScore(e.study_power),"value-class":"learn-cell-study-power",border:""},scopedSlots:t._u([{key:"icon",fn:function(){return[s("div",{staticClass:"score-cell-img-box"},[s("div",{staticClass:"score-cell-index"},[1===e.rank?s("img",{attrs:{src:"https://oss.coolcollege.cn/1790078397779677184.png"}}):2===e.rank?s("img",{attrs:{src:"https://oss.coolcollege.cn/1790078398090055680.png"}}):3===e.rank?s("img",{attrs:{src:"https://oss.coolcollege.cn/1790078399004413952.png"}}):s("div",{class:"my-scorecom-ranking-"+e.rank},[t._v(t._s(e.rank))])]),s("img",{staticClass:"score-cell-avatar",attrs:{src:e.avatar}})])]},proxy:!0},{key:"title",fn:function(){return[s("cl-custom-user",{staticClass:"score-cell-title",attrs:{type:e.user_info.sourceType,"data-type":"userName",value:e.user_info.userId,name:e.name}})]},proxy:!0},{key:"label",fn:function(){return[Array.isArray(e.department_names)?s("div",{staticClass:"score-cell-label"},[t._v(t._s(e.department_names.join(",")))]):s("div",{staticClass:"score-cell-label"},[t._v(t._s(e.department_names))])]},proxy:!0}],null,!0)})})),1):s("Empty",{attrs:{description:t.$t("common.noDataTextTip")}})],1)],1)]),s("Popup",{attrs:{round:"",position:"bottom","custom-style":"height: 20%","bind:close":"onClose"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.show?s("div",{staticClass:"learn-score-part-list"},[s("Picker",{staticClass:"dept-picker",attrs:{columns:t.depts,"show-toolbar":"","visible-item-count":"4","default-index":t.default_index},on:{cancel:t.onDeptSelectCancel,confirm:t.onDeptSelectConfirm}})],1):t._e()])],1)])}),[],!1,null,"7c35de8c",null).exports},92846:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});s(34837);var a=s(39146),i=s(95082),n=(s(49153),s(5944)),o=(s(70885),s(6458)),r=(s(18144),s(65641)),l=(s(52355),s(29233)),c=(s(20581),s(50914)),d=(s(73474),s(74755)),u=(s(22894),s(83608)),m=(s(33948),s(28387)),h=s(22648),p=s(45877),g=s(78186),v={name:"LearnShare",components:{Picker:u.Z,Popup:d.Z,List:c.Z,Cell:l.Z,Col:r.Z,Row:o.Z,RankCard:g.Z,Empty:n.Z,ClCustomUser:p.Z},data(){return{show:!1,loading:!1,summary:{company_average:0,rank:0,study_power:0},depts:[],dataList:[],dept_id:1,dept_name:this.$t("project.companyWide"),default_index:0,finished:!1,hasNextPage:!0,pagenation:{pageNumber:1,pageSize:10}}},computed:{themeColor(){return this.$store.state.themeColor}},mounted(){document.title=this.$t("mine.learnShareRank"),this.initSummary(),this.initList(),this.initDeptList()},methods:{isShow(){this.show=!0},onDeptSelectCancel(){this.show=!1},onDeptSelectConfirm(t,e){this.dept_id!==t.dept_id&&(this.dept_id=t.dept_id,this.dept_name=t.text,this.default_index=e,this.show=!1,this.dataList=[],this.pagenation.pageNumber=1,this.finished=!1,this.hasNextPage=!0,this.initList(),this.initSummary())},async initSummary(){const{getSummaryData:t}=m.Z;try{const{data:e}=await t(this.dept_id);this.summary=e}catch(t){this.summary={}}},async initList(){if(!this.hasNextPage)return;const{getShareListData:t}=m.Z;this.loading=!0;const e=(0,i.Z)((0,i.Z)({},this.pagenation),{},{departmentId:this.dept_id});try{const{data:s}=await t(e);s.hasNextPage||(this.finished=!0,this.hasNextPage=!1),this.dataList=[...this.dataList,...s.list],this.loading=!1}catch(t){this.dataList=[],this.loading=!1,this.finished=!0,a.Z.fail(this.$t("mine.errTips"))}},async initDeptList(){const{getDeptList:t}=m.Z,{data:e}=await t();0===e.code?this.depts=e.data.map((t=>({text:t.dept_name,dept_id:t.dept_id}))):this.depts=[]},onLoadData(){this.hasNextPage&&(this.pagenation.pageNumber++,this.initList())},getScore:t=>(0,h.i5)(t)}},_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"learn-share-container"},[s("div",{staticClass:"learn-share-summary"},[s("div",{staticClass:"learn-summary-box",style:{background:t.themeColor.backgroundColor}},[s("RankCard",{attrs:{summary:t.summary,title:t.$t("mine.learnShareRank"),label:t.$t("mine.average"),rank:t.$t("mine.myRank")}})],1)]),s("div",{staticClass:"learn-share-list"},[s("div",{staticClass:"learn-share-body"},[s("div",{staticClass:"learn-my-tabs"},[s("Row",{staticClass:"learn-my-tabs-box",attrs:{justify:"space-between"}},[s("Col",{attrs:{span:"12"}},[s("div",{staticClass:"learn-share-tab"},[s("div",[t._v(t._s(t.$t("mine.stuRank")))]),s("div",{staticClass:"learn-share-icon",style:{background:t.themeColor.primaryColor}})])]),s("Col",{attrs:{span:"8",offset:"4"}},[s("div",{staticClass:"learn-share-part",style:{color:t.themeColor.primaryColor},on:{click:t.isShow}},[t._v(t._s(t.$t("mine.current"))+": "+t._s(t.dept_name))])])],1),s("div",{staticClass:"learn-share-tab-content"},[t.loading||0!==t.dataList.length?s("List",{attrs:{finished:t.finished,"finished-text":t.$t("mine.noMore")},on:{load:t.onLoadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e){return s("Cell",{key:e.id,staticClass:"learn-cell-item",attrs:{value:t.getScore(e.study_power),"value-class":"learn-cell-study-power",border:""},scopedSlots:t._u([{key:"icon",fn:function(){return[s("div",{staticClass:"share-cell-img-box"},[s("div",{staticClass:"share-cell-index"},[1===e.rank?s("img",{attrs:{src:"https://oss.coolcollege.cn/1790078397779677184.png"}}):2===e.rank?s("img",{attrs:{src:"https://oss.coolcollege.cn/1790078398090055680.png"}}):3===e.rank?s("img",{attrs:{src:"https://oss.coolcollege.cn/1790078399004413952.png"}}):s("div",{class:"my-scorecom-ranking-"+e.rank},[t._v(t._s(e.rank))])]),s("img",{staticClass:"share-cell-avatar",attrs:{src:e.avatar}})])]},proxy:!0},{key:"title",fn:function(){return[s("cl-custom-user",{staticClass:"share-cell-title",attrs:{type:e.user_info.sourceType,"data-type":"userName",value:e.user_info.userId,name:e.name}})]},proxy:!0},{key:"label",fn:function(){return[Array.isArray(e.department_names)?s("div",{staticClass:"share-cell-label"},[t._v(t._s(e.department_names.join(",")))]):s("div",{staticClass:"share-cell-label"},[t._v(t._s(e.department_names))])]},proxy:!0}],null,!0)})})),1):s("Empty",{attrs:{description:t.$t("common.noDataTextTip")}})],1)],1)]),s("Popup",{attrs:{round:"",position:"bottom","custom-style":"height: 20%","bind:close":"onClose"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.show?s("div",{staticClass:"learn-score-part-list"},[s("Picker",{staticClass:"dept-picker",attrs:{columns:t.depts,"show-toolbar":"","visible-item-count":"4","default-index":t.default_index},on:{cancel:t.onDeptSelectCancel,confirm:t.onDeptSelectConfirm}})],1):t._e()])],1)])}),[],!1,null,"3915ed4f",null).exports},90795:(t,e,s)=>{s.r(e),s.d(e,{default:()=>w});var a=s(95082),i=s(26294),n={name:"HoursDesc",props:{userRankInfo:{type:Object,default:()=>({ranking:0,studyDuration:0})}},data:()=>({}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){},methods:{}},o=s(1001),r=(0,o.Z)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-score",style:{background:t.primaryColor}},[s("div",{staticClass:"total"},[s("div",{staticClass:"title-container"},[s("span",{staticClass:"text-name"},[t._v(t._s(t.$t("mineScore.accumulativeLearningHours")))]),s("span",{staticClass:"text-tip"},[t._v(t._s(t.$t("mineScore.hoursComputeTip")))])]),s("div",{staticClass:"real"},[s("span",{ref:"studyDuration"},[t._v(t._s(t.userRankInfo.studyDuration?Math.ceil(t.userRankInfo.studyDuration/60):0))]),s("span",{staticClass:"score-text"},[t._v(t._s(t.$t("mineScore.minutes")))])])]),s("div",{staticClass:"details"},[s("div",{staticClass:"mine"},[s("div",{staticClass:"text-name"},[t._v(" "+t._s(t.$t("mineScore.myRanking"))+" ")]),s("div",{staticClass:"real"},[t._v(" "+t._s(t.userRankInfo.ranking||0)+" "),s("span",{staticClass:"score-text"},[t._v(t._s(t.$t("mineScore.ranking")))])])]),s("div",{staticClass:"mine"})])])}),[],!1,null,"605b71fa",null).exports,l=(s(22894),s(83608)),c=(s(73474),s(74755)),d=(s(82522),s(10342)),u=(s(82500),s(49414)),m=s(28387),h=(s(49153),s(5944)),p=(s(20581),s(50914)),g=(s(38862),s(33948),s(68876)),v={name:"HoursRank",components:{[p.Z.name]:p.Z,[h.Z.name]:h.Z,ScoreItem:g.Z},props:{setUserRankInfo:{type:Function,default:()=>{}},departmentId:{type:String,default:""}},data:()=>({list:[],loading:!1,finished:!1,pageNumber:1,pageSize:10}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor",userId:"getUserId"})),mounted(){this.onLoad()},methods:{async onLoad(){try{const{data:t}=await m.Z.getStudyHoursRanking({page_size:this.pageSize,page_number:this.pageNumber});if("{}"!==JSON.stringify(t)){const{list:e,user:s}=t;this.setUserRankInfo(s),this.list=[...this.list,...e.list].map((t=>(0,a.Z)((0,a.Z)({},t),{},{rank:t.ranking,score:Math.ceil(t.studyDuration/60),department_names:t.departmentName||"",userInfo:t.sync_user_info})))}this.finished=!0}finally{this.loading=!1}}}},_=v,f=(0,o.Z)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hours-ranking-list-container"},[s("van-list",{staticClass:"tab-scroll",attrs:{finished:t.finished,"finished-text":t.finished&&0===t.list.length?"":t.$t("common.noMore")},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"hours-ranking-list"},t._l(t.list,(function(e,a){return s("ScoreItem",{key:e.id+a,attrs:{data:e,unit:t.$t("mineScore.minutes")}})})),1),t.finished&&0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e()],1)],1)}),[],!1,null,"3a9e8f03",null).exports,y=s(95653),C={name:"DeptHoursRank",components:{[p.Z.name]:p.Z,[h.Z.name]:h.Z,DeptRank:y.Z},props:{departmentId:{type:String,default:""}},data:()=>({list:[],loading:!1,finished:!1,pageNumber:0,pageSize:20}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor",userId:"getUserId"})),methods:{resetQuery(){this.pageNumber=0,this.list=[],this.loading=!0,this.finished=!1,this.loading&&this.onLoad()},async onLoad(){try{this.pageNumber+=1;const{data:t}=await m.Z.deptStudyHoursRanking({page_size:this.pageSize,page_number:this.pageNumber,dept_id:this.departmentId}),{list:e,hasNextPage:s}=t;this.list=[...this.list,...e].map((t=>(0,a.Z)((0,a.Z)({},t),{},{scores:Math.ceil(t.studyDuration/60)}))),s||(this.finished=!0)}finally{this.loading=!1}}}},b=C,$=(0,o.Z)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dept-hours-ranking-list-container"},[s("van-list",{staticClass:"tab-scroll",attrs:{"immediate-check":!1,finished:t.finished,"finished-text":t.finished&&0===t.list.length?"":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"dept-hours-ranking-list"},t._l(t.list,(function(e){return s("DeptRank",{key:e.id,attrs:{data:e,unit:t.$t("mineScore.minutes")}})})),1)]),t.finished&&0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e()],1)}),[],!1,null,"5aa083b4",null).exports,k={name:"HoursList",components:{[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,HoursRank:f,DeptHoursRank:$},props:{setUserRankInfo:{type:Function,default:()=>{}}},data:()=>({refreshing:!1,show:!1,departments:[],departmentId:"1",departName:"",current:0,active:"HoursRank",showRank:!0}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor",rankVisibleConfig:"setting/getRankVisibleConfig"})),mounted(){const{showDeptHourRank:t,showTraineeHourRank:e}=this.rankVisibleConfig;t||e?(t&&!e&&this.changeTab("postStudyHours"),this.loadDept()):this.showRank=!1},methods:{changeTab(t){this.active=t,this.getScoreAndListByDeptId()},loadDept(){m.Z.getMyDept().then((t=>{this.departments=t.data.data,this.departmentId=t.data.data.length>0?t.data.data[0].dept_id:"1",this.departments.length>0&&this.departments.forEach((t=>{t.text=t.dept_name})),this.departName=this.departments[this.current].text}))},changeDept(t,e){this.departmentId=t.dept_id,this.current=e,this.departName=t.text,this.show=!1,this.getScoreAndListByDeptId(),this.$emit("onDepartmentIdConfirm",t.dept_id)},getScoreAndListByDeptId(){this.$nextTick((()=>{"postStudyHours"===this.active&&this.$refs.postStudyHours.resetQuery()}))}}},Z={name:"LearningHours",components:{HoursDesc:r,HoursList:(0,o.Z)(k,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mytabs"},[t.showRank?s("van-tabs",{attrs:{sticky:"","title-active-color":t.primaryColor,color:t.primaryColor,"line-width":"23px"},on:{change:t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t.rankVisibleConfig.showTraineeHourRank?s("van-tab",{attrs:{title:t.$t("mineScore.personalScoreRankingTop"),name:"HoursRank"}},[s("HoursRank",{ref:"HoursRank",attrs:{"set-user-rank-info":t.setUserRankInfo}})],1):t._e(),t.rankVisibleConfig.showDeptHourRank?s("van-tab",{attrs:{title:t.$t("mineScore.postScoreRanking"),name:"postStudyHours"}},[s("DeptHoursRank",{ref:"postStudyHours",attrs:{"department-id":t.departmentId}})],1):t._e(),"postStudyHours"===t.active?s("div",{staticClass:"score-ranking-piker",style:{color:t.primaryColor},attrs:{slot:"nav-right"},on:{click:function(e){t.show=!0}},slot:"nav-right"},[t.departName?s("span",[t._v(t._s(t.$t("mineScore.selection")+"："+t.departName))]):s("span",[t._v(t._s(t.$t("mineScore.department")))])]):t._e()],1):t._e(),s("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-picker",{staticClass:"picker",attrs:{"show-toolbar":"",columns:t.departments,"default-index":t.current},on:{cancel:function(e){t.show=!1},confirm:t.changeDept}})],1)],1)}),[],!1,null,"908549c8",null).exports},data:()=>({departmentId:"1",userRankInfo:{ranking:0,studyDuration:0}}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor"})),methods:{setUserRankInfo(t){this.userRankInfo={ranking:t.ranking,studyDuration:t.studyDuration}}}},w=(0,o.Z)(Z,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"learn-hours"},[s("HoursDesc",{attrs:{"user-rank-info":t.userRankInfo}}),s("HoursList",{attrs:{"set-user-rank-info":t.setUserRankInfo}})],1)}),[],!1,null,"73cd517a",null).exports},34771:(t,e,s)=>{s.r(e),s.d(e,{default:()=>c});s(25773);var a=s(35791),i=(s(47601),s(44951)),n=(s(39714),s(28387)),o=s(26325),r=s(22648),l={name:"LearningPlatformVip",components:{[i.Z.name]:i.Z,[a.Z.name]:a.Z},data:()=>({imgArr:["https://oss.coolcollege.cn/1796898047054188544.png","https://oss.coolcollege.cn/1796898071758639104.png","https://oss.coolcollege.cn/1796898081917243392.png","https://oss.coolcollege.cn/1796898090679144448.png"],ua:(0,r.ij)()}),computed:{corpId(){return this.$store.state.commonParams.corpId}},mounted(){this.fromPage=this.$route.query.fromPage},methods:{async buyNow(){const{data:t}=await n.Z.getGoodsUrl({dingId:this.corpId});"dingtalk_browser"===this.ua&&(0,o.default)({url:t.result.toString()})},async contactCustomerService(){const{data:t}=await n.Z.joinServiceGroup();"dingtalk_browser"===this.ua&&(0,o.default)({url:t.url})}}},c=(0,s(1001).Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"learning-platform-vip cl-page-container"},[s("div",{staticClass:"learning-platform-vip-content"},t._l(t.imgArr,(function(t,e){return s("van-image",{key:"image"+e,staticClass:"img",attrs:{src:t,fit:"heightFix"}})})),1),s("div",{staticClass:"learning-platform-vip-footer"},[s("div",{staticClass:"learning-platform-vip-button-group"},[s("van-button",{staticClass:"learning-platform-vip-button-advisory learning-platform-vip-button-view",attrs:{type:"default"},on:{click:t.contactCustomerService}},[t._v(t._s(t.$t("mine.onlineConsultation")))]),s("van-button",{staticClass:"learning-platform-vip-button-buy learning-platform-vip-button-view",attrs:{type:"primary"},on:{click:t.buyNow}},[t._v(t._s(t.$t("mine.buyNow")))])],1)])])}),[],!1,null,"f365bcf4",null).exports},50254:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var a=s(95082),i=(s(3791),s(93432)),n=(s(49153),s(5944)),o=(s(20581),s(50914)),r=s(22648),l=s(28387),c={components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z},filters:{formatDate:function(t){return(0,r.p6)(t,"yyyy-MM-dd  hh:mm")}},data:()=>({dataLoading:!0,dataList:[],loading:!1,finished:!0,page:{pageNumber:1,pageSize:"20"}}),computed:{userInfo(){return this.$store.state.commonParams}},mounted(){this.getList()},methods:{async getList(){const t=(0,a.Z)((0,a.Z)({},this.page),{},{userId:this.userInfo.userId}),{status:e,data:s}=await l.Z.getMineStudyList(t).catch((()=>{this.dataLoading=!1,this.loading=!1}));200===e&&s.data&&(this.dataList=this.dataList.concat(s.data.list),this.finished="false"===s.data.has_next_page),this.dataLoading=!1,this.loading=!1},onLoadMore(){this.page.pageNumber+=1,this.loading=!0,this.getList()}}},d=(0,s(1001).Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mine-learn-target"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.dataLoading,expression:"dataLoading"}],staticClass:"mine-learn-target-center"}),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.dataLoading,expression:"!dataLoading"}]},[t.dataList.length?s("van-list",{staticClass:"mine-learn-target-list",attrs:{finished:t.finished,"finished-text":t.$t("mine.noMore")},on:{load:t.onLoadMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e){return s("div",{key:e.id,staticClass:"mine-learn-target-list-item"},[s("div",{staticClass:"list-item-title"},[t._v(t._s(e.objective_name))]),s("div",{staticClass:"list-item-sub"},[t._v(t._s(t.$t("minePoints.effectiveTime"))+"： "),s("span",{staticClass:"list-item-sub-time"},[t._v(t._s(t._f("formatDate")(e.effect_date))+" - "+t._s(t._f("formatDate")(e.lapse_date)))])]),s("div",{staticClass:"list-item-info"},[s("div",[t._v(t._s(t.$t("studyProject.credit"))+"/"+t._s(t.$t("mineStudyTarget.targetCredits"))+"："),s("span",[t._v(t._s(e.standard_score_by_task?e.actual_score_by_task+"/"+e.standard_score_by_task:"--"))])]),s("div",[t._v(t._s(t.$t("mineStudyTarget.classHours"))+"/"+t._s(t.$t("mineStudyTarget.targetClassHours"))+"："),s("span",[t._v(t._s(e.standard_hour_by_task?e.actual_hour_by_task+"/"+e.standard_hour_by_task:"--"))])]),s("div",[t._v(t._s(t.$t("mineStudyTarget.taskCertificate"))+"/"+t._s(t.$t("mineStudyTarget.targetCertificate"))+"："),s("span",[t._v(t._s(e.standard_certificate_by_task?e.actual_certificate_by_task+"/"+e.standard_certificate_by_task:"--"))])]),s("div",[t._v(t._s(t.$t("mineStudyTarget.selfCertificate"))+"/"+t._s(t.$t("mineStudyTarget.targetCertificate"))+"："),s("span",[t._v(t._s(e.standard_certificate_by_self?e.actual_certificate_by_self+"/"+e.standard_certificate_by_self:"--"))])]),s("div",[t._v(t._s(t.$t("mineStudyTarget.integral"))+"/"+t._s(t.$t("mineStudyTarget.targetIntegral"))+"："),s("span",[t._v(t._s(e.standard_integral?e.actual_integral+"/"+e.standard_integral:"--"))])])])])})),0):s("van-empty",{staticClass:"mine-learn-target-center",attrs:{description:t.$t("common.noDataTextTip")}})],1)],1)}),[],!1,null,null,null).exports},33849:(t,e,s)=>{s.r(e),s.d(e,{default:()=>$});s(73474);var a=s(74755),i=(s(72975),s(98655)),n=(s(11155),s(91391)),o=(s(25773),s(35791)),r=(s(49153),s(5944)),l=(s(3791),s(93432)),c=(s(47601),s(44951)),d=(s(74916),s(77601),s(26699),s(57658),s(28387)),u=(s(47238),s(75167)),m=s(22648),h={name:"MedalDetailItem",components:{[c.Z.name]:c.Z,[o.Z.name]:o.Z,[u.Z.name]:u.Z},filters:{formatDate:t=>(0,m.p6)(t,"yyyy.MM.dd")},props:{data:{type:Object,default:()=>{}}},data:()=>({ASSETS_OSS_HOST}),computed:{percentage(){const t=Number(this.data.limit_condition);return(t-Number(this.data.difference_value))/t*100}},mounted(){},methods:{handleToLevelList(){this.$emit("toLevelList")},handleOnReceive(t){2===this.data.received_status&&this.$emit("onReceive",t)}}},p=s(1001),g=(0,p.Z)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"medal-detail-item"},[s("div",{staticClass:"medal-detail-item__icon"},[s("van-image",{staticClass:"medal-detail-item__icon__bg",attrs:{src:t.ASSETS_OSS_HOST+"/1839051639017836544.png"}}),s("van-image",{staticClass:"medal-detail-item__icon__img",class:0===t.data.received_status?"icon-gray":"",attrs:{src:t.data.medal_url}})],1),s("div",{staticClass:"medal-detail-item__name"},[t._v(t._s(t.data.medal_name))]),s("div",{staticClass:"medal-detail-item__limit"},[t._v(t._s(t.$t("medal.accumulatedCredits",{count:""+t.data.limit_condition})))]),s("div",{staticClass:"medal-detail-item__section"},[s("div",{class:t.data.description?"medal-detail-item__desc":"medal-detail-item__nodesc"},[t._v(t._s(t.data.description))]),1===t.data.received_status?s("div",{staticClass:"medal-detail-item__time"},[t._v(t._s(t.$t("medal.receivedTime"))+" ："+t._s(t._f("formatDate")(Number(t.data.receive_time))))]):t._e(),0===t.data.received_status?s("div",{staticClass:"medal-detail-item__progress"},[s("div",{staticClass:"medal-detail-item__progress__tip"},[t._v(t._s(t.$t("medal.medalTip",{score:""+t.data.difference_value}))+" ")]),s("van-progress",{attrs:{percentage:t.percentage,"stroke-width":t._f("pxTransToVw")(4),color:"#516AE6","track-color":"rgba(255, 255, 255, 0.2)","show-pivot":!1}})],1):t._e()])])}),[],!1,null,"2c87f323",null).exports,v={name:"ReceiveMedal",components:{[c.Z.name]:c.Z,[o.Z.name]:o.Z,[u.Z.name]:u.Z},props:{data:{type:Object,default:()=>{}}},data:()=>({ASSETS_OSS_HOST}),computed:{},mounted(){},methods:{handleClose(t){this.$emit("closeRecMedal",t)}}},_=(0,p.Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"medal-detail-receive"},[s("div",[s("p",{staticClass:"medal-detail-receive__title"},[t._v(t._s(t.$t("medal.congratulations")))])]),s("div",{staticClass:"medal-detail-receive__icon"},[s("van-image",{staticClass:"medal-detail-receive__icon__bg",attrs:{src:t.ASSETS_OSS_HOST+"/1845154112367366144.png"}}),s("van-image",{staticClass:"medal-detail-receive__icon__img",attrs:{src:t.data.medal_url}})],1),s("div",{staticClass:"medal-detail-receive__name"},[t._v(t._s(t.data.medal_name))]),s("div",{staticClass:"medal-detail-receive__limit"},[t._v("“"+t._s(t.$t("medal.accumulatedCredits",{count:""+t.data.limit_condition}))+"”")]),s("div",{staticClass:"medal-detail-receive__footer"},[s("div",{staticClass:"medal-detail-receive__btn",on:{click:function(){return t.handleClose(t.data.medal_id)}}},[s("van-button",{attrs:{round:"",block:"",color:"#495FCF"}},[t._v(t._s(t.$t("common.close")))])],1)])])}),[],!1,null,"4b688272",null).exports;let f=Date.now();const y=window.requestAnimationFrame||function(t){const e=Date.now(),s=Math.max(0,16-(e-f)),a=setTimeout(t,s);return f=e+s,a};function C(t,e,s){let a=0;const i=t.scrollLeft,n=0===s?1:Math.round(1e3*s/16);!function s(){var o;t.scrollLeft+=(e-i)/n,++a<n&&(o=s,y.call(window,o))}()}var b={name:"MedalDetail",components:{DetailItem:g,ReceiveMedal:_,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z},beforeRouteLeave(t,e,s){/(^\/mine\/medal\/level-list.*)/.test(t.path)?localStorage.setItem("medalIndex",this.currentIndex):localStorage.removeItem("medalIndex"),s()},data:()=>({ASSETS_OSS_HOST,showMedal:!1,loading:!0,detailList:[],currentMedalPage:{},currentIndex:0,currentMedalId:"",medalStatus:""}),computed:{id(){return this.$route.query.id},dataMedalCurrent(){return this.detailList.filter((t=>t.medal_id===this.currentMedalId))[0]}},watch:{currentIndex(t){localStorage.setItem("medalIndex",t)},currentMedalPage:{handler:function(){const t={1:this.$t("medal.received"),2:this.$t("medal.clickReceived"),0:this.$t("medal.unLock")};this.medalStatus=t[this.currentMedalPage.received_status]},deep:!0}},mounted(){(0,m.Td)(this.$t("pageTitle.medalDetail")),this.getMedalGroupLists(this.id)},methods:{async getMedalGroupLists(t,e){let s=null,a=null;const i={};e&&(i.medal_id=e),s=await d.Z.getMedalGroupList(t,i);const{success:n,data:o}=s.data;if(this.loading=!1,"true"===n){this.detailList=o.group_rel_medal_list,a=e?this.detailList.findIndex((t=>t.medal_id===e)):this.detailList.findIndex((t=>1===t.current_page));const t=localStorage.getItem("medalIndex");"string"!=typeof t||["undefined","null"].includes(t)||(a=Number(t)),a=a>-1?a:0,this.$nextTick((()=>{this.onModalIndexChange(a)}))}},async receiveMedals(t,e){try{const s=await d.Z.receiveMedal(t,e);this.loading=!1,"200000"===s.data.code?this.showMedal=!0:"590001"===s.data.code&&(this.detailList=[])}catch(t){console.error(t)}},handleToLevelList(){this.$router.push({path:`/mine/medal/level-list?id=${this.id}`})},handleOnReceive(t){2===this.currentMedalPage.received_status&&(this.currentMedalId=t,this.receiveMedals(this.id,t))},handleClosePop(){this.showMedal=!1,this.getMedalGroupLists(this.id,this.currentMedalId)},onModalIndexListChange(t){this.currentIndex=t;let e=this.detailList.filter((t=>t.medal_level-1===this.currentIndex));this.currentMedalPage=e[0],this.$refs.indicatorsSwipe&&this.$refs.indicatorsSwipe.swipeTo(t),this.scrollIntoView()},onModalIndexChange(t){this.currentIndex=t;let e=this.detailList.filter((t=>t.medal_level-1===this.currentIndex));this.currentMedalPage=e[0],this.onModalIndexListChange(t),this.$forceUpdate()},scrollIntoView(t){const e=this.$refs[`indicators-${this.currentIndex}`];if(!e)return;const{indicatorsList:s}=this.$refs,a=(s.offsetWidth-e[0].offsetWidth)/2;C(s,e[0].offsetLeft-a,t?0:.3)}}},$=(0,p.Z)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"medal-detail-container"},[t.loading?s("van-loading",{staticClass:"medal-detail-center"}):[t.detailList.length?s("div",{staticClass:"medal-detail-swipe"},[s("van-swipe",{ref:"indicatorsSwipe",attrs:{loop:!1,"show-indicators":!1,"initial-swipe":t.currentIndex},on:{change:t.onModalIndexChange}},t._l(t.detailList,(function(e){return s("van-swipe-item",{key:e.medal_id},[s("detail-item",{attrs:{data:e},on:{onReceive:t.handleOnReceive}})],1)})),1),s("div",{staticClass:"medal-detail-swipe__indicators"},[s("div",{ref:"indicatorsList",staticClass:"indicators-list"},t._l(t.detailList,(function(e,a){return s("div",{key:e.medal_id,ref:"indicators-"+a,refInFor:!0,staticClass:"indicators-list__item"},[s("div",{staticClass:"indicators-list__item_level"},[a>0?s("div",{staticClass:"indicators-list__item_line"}):t._e(),s("div",{staticClass:"indicators-list__item_lv",class:[a===t.currentIndex?"active":""],on:{click:function(){return t.onModalIndexListChange(a)}}},[s("van-image",{staticClass:"indicators-list__item_lv_img",class:[a===t.currentIndex?"active":"",0===e.received_status?"icon-gray":""],attrs:{src:e.medal_url}}),s("span",[t._v("LV"+t._s(e.medal_level))])],1)])])})),0)]),s("div",{staticClass:"medal-detail-item__footer"},[s("div",{staticClass:"medal-detail-item__section medal-detail-item__action"},[s("div",{staticClass:"medal-detail-item__btn"},[s("van-button",{attrs:{round:"",block:"",color:2===t.currentMedalPage.received_status?"#495FCF":"rgba(255,255,255,0.2)"},on:{click:function(){return t.handleOnReceive(t.currentMedalPage.medal_id)}}},[t._v(t._s(t.medalStatus))])],1),s("div",{staticClass:"medal-detail-item__level",on:{click:t.handleToLevelList}},[t._v(t._s(t.$t("medal.LevelDesc")))])])])],1):s("div",{staticClass:"medal-detail-center medal-detail-empty"},[s("img",{attrs:{src:t.ASSETS_OSS_HOST+"/1839042813690515456.png"}}),s("div",{staticClass:"medal-detail-empty__desc"},[t._v(t._s(t.$t("medal.MedalOfflined")))])]),s("div",{staticClass:"medal-detail-medal"},[s("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.showMedal,callback:function(e){t.showMedal=e},expression:"showMedal"}},[s("receive-medal",{attrs:{data:t.dataMedalCurrent},on:{closeRecMedal:t.handleClosePop}})],1)],1)]],2)}),[],!1,null,"26ad5eab",null).exports},40352:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});s(3791);var a=s(93432),i=(s(47601),s(44951)),n=s(28387),o=s(22648),r={name:"MedalLevelList",components:{[i.Z.name]:i.Z,[a.Z.name]:a.Z},data:()=>({ASSETS_OSS_HOST,loading:!0,isEmpty:!1,levelList:[]}),computed:{id(){return this.$route.query.id}},mounted(){(0,o.Td)(this.$t("pageTitle.medalLevelList")),this.getMedalGroupList()},methods:{async getMedalGroupList(){try{const{data:t}=await n.Z.getMedalGroupList(this.id),{data:e}=t;this.loading=!1,"200000"===t.code?this.levelList=e.group_rel_medal_list:"590001"===t.code&&(this.levelList=[],this.$router.back())}catch(t){console.error(t)}}}},l=(0,s(1001).Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"medal-level-list"},[t.loading?s("van-loading",{staticClass:"medal-level-list-center"}):s("div",[t.levelList.length?s("div",{staticClass:"medal-level"},[s("img",{attrs:{src:t.ASSETS_OSS_HOST+"/1838871047567446016.png"}}),s("div",{staticClass:"medal-level-data"},[t.levelList.length?s("div",{staticClass:"medal-level-list__title"},[t._v(t._s(t.$t("medal.medalLevel")))]):t._e(),s("div",{staticClass:"medal-level-list__list"},t._l(t.levelList,(function(e){return s("div",{key:e.medal_id,staticClass:"medal-level-list__item"},[s("div",{staticClass:"medal-level-list__item__icon"},[s("van-image",{staticClass:"medal-level-list__item__icon__img",attrs:{src:e.medal_url}}),s("span",[t._v("LV"+t._s(e.medal_level))])],1),s("div",{staticClass:"medal-level-list__item__desc"},[s("div",{staticClass:"medal-level-list__item__desc__name"},[t._v(t._s(e.medal_name))]),s("div",{staticClass:"medal-level-list__item__desc__limit"},[t._v(t._s(t.$t("medal.accumulatedCredit"))+" ："+t._s(e.limit_condition)+" "+t._s(t.$t("medal.credit")))]),s("div",{staticClass:"medal-level-list__item__desc__tip"},[t._v(t._s(e.description))])])])})),0)])]):s("div",{staticClass:"medal-level-list-center medal-level-empty"},[s("img",{attrs:{src:t.ASSETS_OSS_HOST+"/1839042813690515456.png"}}),s("div",{staticClass:"medal-level-empty__desc"},[t._v(t._s(t.$t("medal.MedalOfflined")))])])])],1)}),[],!1,null,"1b3f82c5",null).exports},28666:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});var a=s(95082),i=(s(49153),s(5944)),n=(s(3791),s(93432)),o=(s(47601),s(44951)),r=s(26294),l=s(4852),c=s(45877),d=(s(57658),s(78551)),u={name:"MedalWallList",components:{[o.Z.name]:o.Z,[i.Z.name]:i.Z,SvgIcon:d.Z},props:{list:{type:Array,default:()=>[]}},data:()=>({ASSETS_OSS_HOST}),mounted(){},methods:{handleToDetail(t){this.$router.push({path:`/mine/medal/detail?id=${t}`})}}},m=s(1001),h=(0,m.Z)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"medal-wall-list"},[s("div",{staticClass:"medal-wall-list__title"},[s("SvgIcon",{attrs:{"icon-class":"icon-zuoce"}}),s("span",{staticClass:"medal-wall-list__title__text"},[t._v(t._s(t.$t("medal.MedalLearning")))]),s("SvgIcon",{attrs:{"icon-class":"icon-youce"}})],1),s("div",{staticClass:"medal-wall-list__list"},[t.list.length?t._l(t.list,(function(e){return s("div",{key:e.medal_group_id,staticClass:"medal-wall-list__item",on:{click:function(){t.handleToDetail(e.medal_group_id)}}},[s("div",{staticClass:"medal-wall-list__item__img"},[s("van-image",{staticClass:"medal-wall-list__item__img__core",class:0===e.received_count?"icon-gray":"",attrs:{src:e.show_medal_url}}),e.un_received_status?s("div",{staticClass:"medal-wall-list__item__img__dot"}):t._e()],1),s("div",{staticClass:"medal-wall-list__item__name"},[t._v(t._s(e.medal_group_name))]),s("div",{staticClass:"medal-wall-list__item__count"},[t._v(t._s(t.$t("medal.lighted"))+" ："+t._s(e.received_count)+"/"+t._s(e.count))])])})):s("div",{staticClass:"medal-wall-list__empty"},[s("img",{attrs:{src:t.ASSETS_OSS_HOST+"/1826444171523788800.png"}}),s("div",{staticClass:"medal-wall-list__desc"},[t._v(t._s(t.$t("common.noData")))])])],2)])}),[],!1,null,"45890294",null).exports,p=s(28387),g=s(22648),v={name:"MedalWall",components:{Avatar:l.Z,ClCustomUser:c.Z,MedalList:h,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z},data:()=>({ASSETS_OSS_HOST,loading:!0,wallInfo:{}}),computed:(0,a.Z)({},(0,r.mapGetters)({userInfo:"user/getUserInfo"})),mounted(){(0,g.Td)(this.$t("pageTitle.medalWall")),this.getMedalWall()},methods:{async getMedalWall(){try{const{data:t}=await p.Z.getMedalWall(),{success:e,data:s}=t;if(this.loading=!1,"true"!==e)return;this.wallInfo=s}catch(t){console.error(t)}}}},_=(0,m.Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"medal-wall-container"},[t.loading?s("van-loading",{staticClass:"medal-wall-center"}):s("div",[s("div",{staticClass:"medal-wall-user"},[s("Avatar",{attrs:{src:t.userInfo.avatar,fit:"cover",height:t._f("pxTransToVw")(60),width:t._f("pxTransToVw")(60)}}),s("ClCustomUser",{attrs:{type:t.userInfo.sourceType,"data-type":"userName",value:t.userInfo.account,name:t.userInfo.name||""}})],1),s("div",{staticClass:"medal-wall-count"},[t._v(t._s(t.$t("medal.lighted"))+" ："+t._s(t.wallInfo.my_medal_count))]),s("div",{staticClass:"medal-wall-list-container"},[s("medal-list",{attrs:{list:t.wallInfo.study_list}})],1)])],1)}),[],!1,null,"70f7ae42",null).exports},37009:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});var a=s(95082),i=s(26294),n={name:"MineAnnuals",data:()=>({annualsUrl:""}),computed:(0,a.Z)({},(0,i.mapGetters)({userInfo:"user/getUserInfo"})),mounted(){this.annualsUrl=`https://gsdn.coolcollege.cn/annals/index.html?url=${CL_API}&token=${this.userInfo.accessToken}&id=${this.userInfo.enterpriseId}`}},o=(0,s(1001).Z)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"annuals-container"},[s("iframe",{style:{width:"100%",height:"100%"},attrs:{allowFullScreen:"",frameBorder:"0",src:t.annualsUrl}})])}),[],!1,null,"24272e15",null).exports},43727:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var a=s(95082),i=(s(18144),s(65641)),n=(s(70885),s(6458)),o=(s(23307),s(81392)),r=(s(3791),s(93432)),l=(s(57658),s(26294)),c=s(6106),d=s(27479),u=s(94194),m=s(22648),h={name:"MineDailyTask",components:{TaskItem:u.default,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,EmptyBox:d.Z},data:()=>({progress:"0/0",taskList:[],integralData:{},loading:!1,taskKeys:[]}),computed:(0,a.Z)({},(0,l.mapGetters)({primaryColor:"getPrimaryColor",fresh:"microCourse/getFreshStatus"})),watch:{fresh(t){t&&(this.getTaskShow(),this.$store.commit("microCourse/updateFresh",!1))}},mounted(){const t=(0,m.Ow)("HomeIntegrateTaskMobile");if(t){const{models:e={},params:s={}}=t;this.taskKeys=e.taskKeys||[],document.title=s.title||this.$t("integrateTask.dailyMission"),this.$nextTick((()=>{this.getTaskShow(),this.getTaskPoints()}))}},methods:{async getTaskShow(){this.loading=!0;const{data:t}=await c.Z.taskShow(this.taskKeys);if(0===t.code){const{progress:e,details:s}=t.data;this.progress=e,this.taskList=s}this.loading=!1},async getTaskPoints(){this.loading=!0;const{data:t}=await c.Z.getTaskPoints();0===t.code&&(this.integralData=t.data),this.loading=!1},handleLinkTo(){this.$router.push({path:"/points-description"})}}},p=(0,s(1001).Z)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mine-daily-task"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"list-loading",attrs:{size:"24"}}),s("div",{staticClass:"header",style:{background:t.primaryColor}},[s("div",{staticClass:"title"},[s("span",[t._v(t._s(t.$t("mine.todayTaskScore")))]),s("div",{staticClass:"integral-button",on:{click:t.handleLinkTo}},[s("van-icon",{attrs:{name:"warning"}}),t._v(" "+t._s(t.$t("mine.IntegralDescription"))+" ")],1)]),s("div",{staticClass:"today"},[s("span",[t._v(t._s(t.integralData.today))]),s("span",[t._v(t._s(t.$t("myRating.point")))])]),s("van-row",{attrs:{gutter:"20"}},[s("van-col",[s("div",{staticClass:"complete"},[t._v(t._s(t.$t("integrateTask.completedTask"))+" "+t._s(t.progress))])])],1),s("div",{staticClass:"pick-tip"},[t._v(t._s(t.$t("integrateTask.pickPointsTip")))])],1),0===t.taskList.length?s("EmptyBox"):s("div",{staticClass:"content"},t._l(t.taskList,(function(e){return s("div",{key:e.event_code,staticClass:"task-list-item"},[s("TaskItem",{attrs:{"item-data":e},on:{getList:t.getTaskShow}})],1)})),0)],1)}),[],!1,null,"b0f9c1a8",null).exports},36464:(t,e,s)=>{s.r(e),s.d(e,{default:()=>c});s(34837);var a=s(39146),i=s(95082),n=(s(25773),s(35791)),o=(s(33948),s(74916),s(77601),s(26294)),r=s(22648),l={name:"BindInfo",components:{[n.Z.name]:n.Z},data:()=>({name:"",value:"",placeholder:"",key:"",detail:"",editField:{},column_type:"",jobnumError:!1,idCardError:!1,columnError:!1}),computed:(0,i.Z)((0,i.Z)((0,i.Z)({},(0,o.mapGetters)({primaryColor:"getPrimaryColor"})),(0,o.mapState)("mine",["infoList"])),{},{maxLen(){return"name"===this.key?50:"jobnum"===this.key?20:60}}),mounted(){this.$nextTick((()=>{this.$refs.input.focus()})),this.key=this.$route.query.key;for(let t of this.infoList)if(this.key===t.key){this.name=t.name,this.value=t.value?t.value:"",this.column_type=t.column_type;break}(0,r.Td)(`${this.$t("mine.edit")}${this.name}`)},methods:{onSubmit(){if("jobnum"===this.key&&!/^[A-Za-z0-9]{0,20}$/.test(this.value))return void(0,a.Z)(`${this.$t("mine.jobnumTip")}`);if("身份证号"===this.name&&!/^[\w]{15,18}$/.test(this.value))return void(0,a.Z)(`${this.$t("mine.idCardTip")}`);if("手机号"===this.name&&this.value&&!/^[0-9-]+$/.test(this.value))return void(0,a.Z)(`${this.$t("mine.phoneTip")}`);const t=this.infoList.map((t=>(this.key===t.key&&(t.value=this.value),(0,i.Z)({},t))));this.$store.commit("mine/changeInfoList",t),this.$router.go(-1)}}},c=(0,s(1001).Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-info"},[s("div",{staticClass:"my-info-container"},[s("div",{staticClass:"my-info-body"},[s("div",{staticClass:"my-info-label"},[t._v(t._s(t.name))]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"value",modifiers:{trim:!0}}],ref:"input",staticClass:"my-info-label-labels",attrs:{type:"text",placeholder:t.$t("mine.pleaseInput")+""+t.name,maxlength:t.maxLen},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("div",{staticClass:"footer"},[s("van-button",{attrs:{type:"primary",block:"",color:t.primaryColor},on:{click:t.onSubmit}},[t._v(t._s(t.$t("mine.submit")))])],1)])}),[],!1,null,"637f2a7e",null).exports},99833:(t,e,s)=>{s.r(e),s.d(e,{default:()=>C});var a=s(95082),i=(s(34837),s(39146)),n=(s(3791),s(93432)),o=(s(25773),s(35791)),r=(s(73474),s(74755)),l=(s(26699),s(57658),s(33948),s(74916),s(15306),s(26294)),c=s(27632),d=s(28387),u=s(4852),m=s(78551),h=s(76953),p=s(54398),g=s(45877),v=s(67875),_=s(22648),f={name:"MineInfo",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,Avatar:u.Z,SvgIcon:m.Z,ClChooseUser:h.Z,ClChoosePost:p.Z,ClCustomUser:g.Z,ClCustomDepartment:v.Z},beforeRouteLeave(t,e,s){["/home-module","/mine"].includes(t.path)?this.isRefresh=!0:this.isRefresh=!1,s()},data:()=>({base_info:[],fromHome:!1,isRefresh:!1,showModal:!0,loading:!1,showModalDepartment:!1,showModalPost:!1,showModalUser:!1,configDepartment:{multiple:!0,limitTips:"",pickedUsers:[],pickedDepartments:[],disabledUsers:[],disabledDepartments:[],requiredUsers:[],requiredDepartments:[],responseUserOnly:!1,startWithDepartmentId:"",responseDepartmentOnly:!0,asyncLoad:!0,filterAuth:!1},configsDirect:{multiple:!1,limitTips:"",pickedUsers:[],pickedDepartments:[],disabledUsers:[],disabledDepartments:[],requiredUsers:[],requiredDepartments:[],responseUserOnly:!0,startWithDepartmentId:"",asyncLoad:!0,filterAuth:!1,maxUsers:1},configPost:{pickedPost:[]}}),computed:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,l.mapGetters)({primaryColor:"getPrimaryColor",userInfo:"user/getUserInfo"})),(0,l.mapState)("mine",["infoList"])),{},{isIpx:()=>(0,_.Rq)()}),mounted(){this.initData(),"home"===this.$route.query.fromHome?(0,_.Td)(this.$t("pageTitle.compeleteInformation")):(0,_.Td)(this.$t("pageTitle.personInformation"))},activated(){"home"===this.$route.query.fromHome?(0,_.Td)(this.$t("pageTitle.compeleteInformation")):(0,_.Td)(this.$t("pageTitle.personInformation")),this.isRefresh&&(this.fromHome=!1,this.initData())},methods:{handleAvatar(){this.nativeUpload({count:1,sourceType:["camera","album"],compressed:!0,percent:80})},nativeUpload(t){c.Z.chooseImage(t,(t=>{i.Z.loading({duration:0,forbidClick:!0,message:this.$t("mine.changeAvatarLoading")});let e={access_token:this.userInfo.accessToken};c.Z.uploadFile({url:d.Z.uploadOss(),fileName:"file",fileType:"image",formData:e,filePath:t.filePaths[0]},(async({data:t})=>{try{const{server:e,fileNewName:s}=t.data,a=`${e}/${s}`,{data:n}=await d.Z.editUserAvatar(a);0===n.code&&this.$store.commit("user/saveUserAvatar",{payload:a}),i.Z.clear()}catch(t){i.Z.fail({message:this.$t("mine.changeAvatarError")})}i.Z.clear()}),(()=>{i.Z.fail({message:this.$t("mine.changeAvatarError")}),i.Z.clear()}))}))},async initData(){i.Z.loading({duration:0});let t={};"home"===this.$route.query.fromHome&&(this.fromHome=!0),t="home"===this.$route.query.fromHome?await d.Z.getPersonalData({type:"force"}):await d.Z.getPersonalData({type:"allow"}),i.Z.clear(),t&&"200000"===t.data.code&&(this.base_info=t.data.data.base_info);const e=this.base_info.map((t=>{if(t.placeholder=`${this.$t("mine.pleaseInput")}${t.show_name}`,t.name=t.show_name,t.key=t.column,t.onClick=()=>{this.$router.push({path:"/bind-info",query:{key:t.key}})},"custom"!==t.column_type){const{column:e}=t;["department","post","leader"].includes(e)?(t.placeholder=`${this.$t("mine.pleaseInput")}${t.show_name}`,t.key=e,t.onClick=t=>{const s=t.id_key?t.id_key.split(","):[],a=t.value?t.value.split(","):[];"department"===e?(this.configDepartment.pickedDepartments=s.map(((t,e)=>({department_name:a[e],id:t,isChecked:!0}))),this.showModalDepartment=!0):"post"===e?(this.configPost.pickedPost=s.map(((t,e)=>({id:t,post_name:a[e]}))),this.showModalPost=!0):"leader"===e&&(this.configsDirect.pickedUsers=s.map(((t,e)=>({id:t,user_name:a[e]}))),this.showModalUser=!0)}):"mobile"===e?(t.placeholder=`${this.$t("mine.pleaseInput")}${t.show_name}`,t.key=e,t.onClick=()=>{t.value?this.$router.push({path:`/mine/account-bind?bindType=mobile&account=${t.value}&modify=true&fromFocus=true`,query:{key:t.key}}):this.$router.push({path:"/mine/account-bind?bindType=mobile&fromFocus=true",query:{key:t.key}})}):"email"===e&&(t.placeholder=`${this.$t("mine.pleaseInput")}${t.show_name}`,t.value=this.account||t.value,t.key=e,t.onClick=()=>{t.value?this.$router.push({path:`/mine/account-bind?bindType=email&account=${this.email}&modify=true&fromFocus=true`,query:{key:t.key}}):this.$router.push({path:"/mine/account-bind?bindType=email&fromFocus=true",query:{key:t.key}})})}return t}));this.$store.commit("mine/changeInfoList",e)},handelDeptOk(t){let{departments:e}=t;e=e.filter((t=>!0===t.isChecked));const s=this.infoList.findIndex((t=>"department"===t.key)),i=e.map((t=>t.id)).join(","),n=e.map((t=>t.department_name)).join(",");this.$set(this.infoList,s,(0,a.Z)((0,a.Z)({},this.infoList[s]),{},{value:n,id_key:i})),this.showModalDepartment=!1},handelOkPost(t){const{postList:e}=t,s=this.infoList.findIndex((t=>"post"===t.key)),i=e.map((t=>t.id)).join(","),n=e.map((t=>t.post_name)).join(",");this.$set(this.infoList,s,(0,a.Z)((0,a.Z)({},this.infoList[s]),{},{value:n,id_key:i})),this.showModalPost=!1},handelOkDirect(t){const{users:e}=t,s=this.infoList.findIndex((t=>"leader"===t.key)),{id:i}=e,n=e.user_name;this.$set(this.infoList,s,(0,a.Z)((0,a.Z)({},this.infoList[s]),{},{value:n,id_key:i})),this.showModalUser=!1},async saveStudentData(t){const e={extend_column_vos:[]};for(const t of this.infoList)["department","post","leader"].includes(t.key)?e[t.key]=t.id_key:["column1","column2","column3","column4","column5"].includes(t.key)?e.extend_column_vos.push({columnKey:t.key,columnValue:t.value}):e[t.key]=t.value;try{this.$toast.loading({duration:0});const s=await d.Z.savePersonalData(t,{department_ids:e.department,extend_column_vos:e.extend_column_vos,post_ids:e.post,supervisorId:e.leader,jobNumber:e.jobnum,loginEmail:e.email,loginMobile:e.mobile,name:e.name});if(this.$toast.clear(),"200000"===s.data.code){"force"===t?this.$router.replace({path:"/home-module"}):this.$router.go(-1);const e=this.infoList.filter((t=>"name"===t.key));if(e&&e.length>0&&e[0].value){const t=Object.assign(this.userInfo,{name:e[0].value});this.$store.commit("user/initUserInfo",t)}}}catch(e){setTimeout((()=>{this.$toast.clear()}),2e3),e&&e.data&&"enterpriseapi.5200"===e.data.code&&("force"===t&&this.initData(),this.$toast.fail(e.data.message))}},sureClose(){this.$router.go(-1)},beforeSave(t){return t.every((t=>!!t.value||((0,i.Z)(`${this.$t("mine.pleaseInput")}${t.name}`),!1)))},sureConfirm(t){"force"===t?this.beforeSave(this.infoList)&&this.saveStudentData(t):this.saveStudentData(t)}}},y=f,C=(0,s(1001).Z)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-info"},[s("div",{staticClass:"my-info-container"},[s("div",{staticClass:"my-info-body"},[t.fromHome?t._e():s("div",{staticClass:"my-info-avator"},[s("div",{staticClass:"my-info-label"},[t._v(t._s(t.$t("mine.photo")))]),s("div",{staticClass:"avatar"},[s("div",{staticClass:"mine-avatar-container",on:{click:t.handleAvatar}},[s("Avatar",{attrs:{src:t.userInfo.avatar,width:"36",height:"36",fit:"cover"}})],1),s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-arrow-r",color:"#B0B4C8",size:10}})],1)]),t.infoList.filter((function(t){return"base"===t.column_type})).length?s("div",{staticStyle:{"margin-bottom":"6px"}},t._l(t.infoList.filter((function(t){return"base"===t.column_type})),(function(e,a){return s("div",{key:a,staticClass:"my-info-avator",on:{click:function(t){return e.onClick(e)}}},[s("div",{staticClass:"my-info-label"},[t._v(t._s(e.name))]),s("div",{staticClass:"avatar"},["department"!==e.key&&"leader"!==e.key?s("div",{staticClass:"mine-label-container"},[e.value?s("div",{staticClass:"mine-label-container labels"},[t._v(" "+t._s(e.value)+" ")]):s("div",[t._v(t._s(e.placeholder))])]):s("div",[e.value&&e.id_key?s("div",{staticClass:"mine-label-container labels"},["leader"===e.key?s("cl-custom-user",{attrs:{type:e.source_type,"data-type":"userName",value:e.user_id,name:e.value}}):t._e(),"department"===e.key?s("cl-custom-department",{attrs:{"name-list":e.value.split(","),"source-type":e.source_type,list:e.id_key.split(","),"data-type":"departmentName"}}):t._e()],1):s("div",{staticClass:"mine-label-container"},[t._v(" "+t._s(e.placeholder)+" ")])]),s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-arrow-r",color:"#B0B4C8",size:10}})],1)])})),0):t._e(),t._l(t.infoList.filter((function(t){return"custom"===t.column_type})),(function(e,a){return s("div",{key:a,staticClass:"my-info-avator",on:{click:function(t){return e.onClick(e)}}},[s("div",{staticClass:"my-info-label"},[t._v(t._s(e.name))]),s("div",{staticClass:"avatar"},[e.value?s("div",{staticClass:"mine-label-container labels"},[t._v(" "+t._s(e.value)+" ")]):s("div",{staticClass:"mine-label-container "},[t._v(" "+t._s(e.placeholder)+" ")]),s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-arrow-r",color:"#B0B4C8",size:10}})],1)])}))],2),t.fromHome||t.loading?t._e():s("div",{staticClass:"info-bottom"},[s("div",{class:t.isIpx?"my-info-bottom my-info-bottom-ipx":"my-info-bottom"},[s("van-button",{attrs:{type:"default"},on:{click:t.sureClose}},[t._v(t._s(t.$t("common.cancel")))]),s("van-button",{attrs:{type:"primary",color:t.primaryColor},on:{click:function(e){return t.sureConfirm("allow")}}},[t._v(t._s(t.$t("mine.save")))])],1)]),t.fromHome&&!t.loading?s("div",{staticClass:"info-bottom-focus"},[s("div",{staticClass:"my-info-bottom-focus"},[s("van-button",{attrs:{type:"primary",color:t.primaryColor},on:{click:function(e){return t.sureConfirm("force")}}},[t._v(t._s(t.$t("mine.save")))])],1)]):t._e()]),s("van-popup",{style:{height:"80%"},attrs:{overlay:"",position:"bottom"},model:{value:t.showModalDepartment,callback:function(e){t.showModalDepartment=e},expression:"showModalDepartment"}},[t.showModalDepartment?s("cl-choose-user",{attrs:{config:t.configDepartment,"sync-organization":"app"},on:{onSuccess:t.handelDeptOk,cancel:function(e){t.showModalDepartment=!1}}}):t._e()],1),s("van-popup",{style:{height:"80%"},attrs:{overlay:"",position:"bottom"},model:{value:t.showModalPost,callback:function(e){t.showModalPost=e},expression:"showModalPost"}},[t.showModalPost?s("cl-choose-post",{attrs:{config:t.configPost},on:{onSuccess:t.handelOkPost,cancel:function(e){t.showModalPost=!1}}}):t._e()],1),s("van-popup",{style:{height:"80%"},attrs:{overlay:"",position:"bottom"},model:{value:t.showModalUser,callback:function(e){t.showModalUser=e},expression:"showModalUser"}},[t.showModalUser?s("cl-choose-user",{attrs:{config:t.configsDirect},on:{onSuccess:t.handelOkDirect,cancel:function(e){t.showModalUser=!1}}}):t._e()],1)],1)}),[],!1,null,"e654bf0c",null).exports},88173:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var a=s(95082),i=(s(40962),s(41956)),n=(s(52355),s(29233)),o=(s(57658),s(28387)),r=s(27632),l=s(26294),c={name:"NoticePage",components:{Cell:n.Z,Badge:i.Z},data:function(){return{typeList:[]}},computed:(0,a.Z)({},(0,l.mapGetters)({qyShield:"setting/getQySwitch"})),created(){},mounted(){"h5"===r.Z.pureEnv&&this.getMsgCount()},methods:{getMsgCount(){o.Z.getMessageCount().then((t=>{this.typeList=[{id:"news",title:this.$t("notice.officialNews"),show:!0,count:Number(t.data.notice)},{id:"learn",title:this.$t("notice.learningNotice"),show:!0,count:Number(t.data.study)},{id:"trainingTempPlan",title:this.$t("training.trainingTempPlan"),show:"false"===this.qyShield,count:Number(t.data.tempPlan)},{id:"trainingAnnualPlan",title:this.$t("training.trainingAnnualPlan"),show:"false"===this.qyShield,count:Number(t.data.yearPlan)},{id:"trainingMonthPlan",title:this.$t("training.trainingMonthPlan"),show:"false"===this.qyShield,count:Number(t.data.monthPlan)},{id:"trainingDemand",title:this.$t("training.trainingDemand"),show:"false"===this.qyShield,count:Number(t.data.trainingDemand)}].filter((t=>t.show))}))},handleClick(t){this.$router.push(`/mine/mine-notice/message-page?type=${t.id}`)}}},d=(0,s(1001).Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notice-page cl-page-container"},[t._l(t.typeList,(function(e){return s("Cell",{key:e.id,attrs:{"is-link":""},on:{click:function(s){return t.handleClick(e)}},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"page-item-row"},[s("div",{staticClass:"page-item-title"},[t._v(t._s(e.title))]),s("Badge",{directives:[{name:"show",rawName:"v-show",value:e.count,expression:"item.count"}],staticClass:"page-item-count",attrs:{content:e.count,max:"99"}})],1)]},proxy:!0}],null,!0)})})),s("Cell")],2)}),[],!1,null,"24256c9e",null).exports},53227:(t,e,s)=>{s.r(e),s.d(e,{default:()=>Z});var a=s(95082),i=(s(49153),s(5944)),n=(s(82500),s(49414)),o=(s(82522),s(10342)),r=(s(39610),s(2163)),l=s(26294),c=(s(20581),s(50914)),d=(s(47601),s(44951)),u=(s(74916),s(4723),s(57658),s(15306),s(6735),s(27632)),m=s(98512),h=s(69886),p=s(63874),g=s(45877),v={name:"MessageCard",components:{[d.Z.name]:d.Z,ClCustomUser:g.Z},props:{logoSrc:{type:String,default:""},enterpriseName:{type:String,default:""},info:{type:Object,default:()=>({})}},computed:(0,a.Z)((0,a.Z)({},(0,l.mapGetters)({userInfo:"user/getUserInfo",qyWechatBook:"setting/getQyWechatBook"})),{},{getImageSrc(){const{image:t,message_flag:e}=this.info;let s="todo.png";switch(t){case"@lALPDf0iwxbOfefNAeDNA8A":case"@lALPDetfSfaAi5TNAeDNA8A":s="pk_notice.png";break;case"@lALPDeC2zgm5ec_NAeDNA8A":s="pk_draw.png";break;case"@lALPDe7syJzXg-jNAeDNA8A":s="pk_failure.png";break;case"@lALPDetfSfgNc4nNAeDNA8A":s="pk_victory.png";break;case"@lALPDetfRKZBcALNAQrNAeg":s="marketing.png";break;case"@lALPDeC2t__sc9HNAeDNA8A":s="study.png";break;case"@lALPDeC2t__s593NAeDNA8A":s="exam.png";break;case"@lALPDeC2t__vm-_NAeDNA8A":s="exam_urge.png";break;case"@lALPDeC2t__u1OnNAeDNA8A":s="study_urge.png";break;case"@lALPDeC2t__uIUnNAeDNA8A":s="examination.png";break;case"@lALPDeC2t__tiH3NAeDNA8A":s="investigate.png";break;case"@lALPDeC2uAmPaofNAeDNA8A":s="qualification_approval.png";break;case"@lALPDeC2t__xDDzNAeDNA8A":s="todo.png";break;case"@lALPDeC2uBnjC4fNAeDNA8A":s="practice.png";break;case"@lALPDeC2uDlZa1rNAeDNA8A":case"@lALPDf0iwCdFGP_M8M0B4A":s="jobs_map.png";break;case"@lALPDeC2ublRe2rM8M0B4A":s="course_share.png";break;case"@lALPDeC2uuQuz7HM8M0B4A":s="course_enroll.png";break;case"@lALPDf0itxbiQcHM8M0B4A":s="announcement.png";break;case"@lALPDetfRcVEf5XM8M0B4A":s="multi_terminal_login.png";break;case"@lALPDeC2zjK5ytfM8M0B4A":s="tutorials_unfinished_list.png";break;case"@lALPDefRy2jgUNbM8M0B4A":s="student_evaluation_page.png";break;case"@lALPDfJ6VHJjNwzNAbDNAu4":s="course_director.png";break;case"@lALPDfYHzl4e7dnM8M0B4A":s="course_student.png";break;case"@lALPDf0i0qLGEIfNAeDNA8A":s="marking_reminder.png";break;case"@lALPDeC24YOuSbjNAeDNA8A":s="learning_project.png";break;default:s=`${e}.png`}return`${ASSETS_SDN_HOST}/assets/message/${s}`},getNewArray(){const{content:t}=this.info;const e=t.match(/(【.*?】)/g),s=[];return e&&e.forEach((t=>{s.push(t.replace("【","").replace("】",""))})),s},getContent(){const{content:t}=this.info;return t.split(/[【】]/)}}),methods:{async onNoticeClick(){if(!this.info.message_url)return;const t=(0,m.dL)(this.info.message_url);let e=h.Z.redirect(t);e&&(e instanceof Promise&&(e=await e),e.isH5?e.insideJump||this.$router.push(e.url):e.isExternalLink?(0,p.N8)({url:e.url}):u.Z.navigateTo({url:e.url}))}}},_=s(1001),f=(0,_.Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-container"},[s("div",{staticClass:"card-container-header"},[s("van-image",{staticClass:"avatar-icon img",attrs:{alt:"avatar",width:"52",src:t.logoSrc}})],1),"1"===t.info.message_type?s("div",{staticClass:"card-container-body"},[s("div",{staticClass:"card-container-body-content"},[t._v(t._s(t.info.content))])]):s("div",{staticClass:"card-container-body"},[s("div",{staticClass:"card-container-body-foot",on:{click:t.onNoticeClick}},[s("div",{staticClass:"card-container-body-foot-title1"},[t._v(t._s(t.enterpriseName))]),s("div",{staticClass:"card-container-body-foot-title2"},[t._v(t._s(t.info.title))]),t.info.image?s("van-image",{staticClass:"card-container-body-foot-image",attrs:{alt:t.info.message_flag,width:"100%",src:t.getImageSrc}}):t._e(),s("div",{staticClass:"card-container-body-foot-descript"},[t.qyWechatBook&&"wx_app"===t.userInfo.appType?s("span",t._l(t.getContent,(function(e,a){return s("span",{key:a.toString()},[t.getNewArray&&t.getNewArray.includes(e)?s("span",[s("ClCustomUser",{attrs:{type:"wx_sync","data-type":"userName",value:e,name:e}})],1):s("span",[t._v(" "+t._s(e)+" ")])])})),0):s("span",[t._v(" "+t._s(t.info.content)+" ")])]),s("div",{staticClass:"card-container-body-foot-link"},[t._v(" "+t._s(t.$t("signIn.seeDetails"))+" "),s("span",[t._v(">")])])],1)])])}),[],!1,null,"114412c8",null).exports,y={name:"MessageList",components:{[c.Z.name]:c.Z,MessageCard:f},props:{list:{type:Array,default:()=>[]},loading:{type:Boolean,default:()=>!1},finished:{type:Boolean,default:()=>!1},type:{type:String,default:""},logoSrc:{type:String,default:""},enterpriseName:{type:String,default:""}},data:()=>({isLoading:!1}),watch:{loading:{handler(t){this.isLoading=t}}},methods:{onLoad(){this.$emit("getMessageListNext")}}},C=(0,_.Z)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notice-list-container"},[t.list.length?s("van-list",{staticClass:"course-list",attrs:{finished:t.finished,"finished-text":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},t._l(t.list,(function(e){return s("message-card",{key:e.id,attrs:{info:e,type:t.type,"logo-src":t.logoSrc,"enterprise-name":t.enterpriseName}})})),1):t._e()],1)}),[],!1,null,"8979b978",null).exports,b=s(28387),$={name:"MessagePage",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,MessageList:C,[i.Z.name]:i.Z},beforeRouteLeave(t,e,s){if("/mine/mine-notice"===t.path)this.$store.commit("noKeepAlive","MessagePage");else if(e.meta.keepAlive){const t=document.querySelector(".notice-list-container"),s=t?t.scrollTop:0;e.meta.scrollTop=s}s()},data:function(){return{ASSETS_OSS_HOST,active:"noRead",list:[{key:"noRead",value:this.$t("notice.noRead"),count:0},{key:"read",value:this.$t("notice.read"),count:0}],loading:!1,noticeList:[],logoSrc:"",enterpriseName:"",params:{type:"learn"===this.$route.query.type?1:2},listData:[],listSetting:{loading:!1,finished:!1},noticeParams:{page_start:"",page_size:20,type:"learn"===this.$route.query.type?1:2,isRead:2},typeList:{news:2,learn:1,trainingDemand:3,trainingAnnualPlan:4,trainingMonthPlan:5,trainingTempPlan:6}}},computed:(0,a.Z)({type(){return this.$route.query.type}},(0,l.mapGetters)({primaryColor:"getPrimaryColor"})),activated(){this.$nextTick((()=>{const{scrollTop:t}=this.$route.meta,e=document.querySelector(".notice-list-container");t&&e&&(e.scrollTop=t)}))},mounted(){this.$route.query.active&&(this.active=this.$route.query.active),this.init(),this.getConfig(),this.getMessageListFirst()},beforeDestroy(){this.listData=[],this.paramsClear(),this.$toast.clear()},methods:{onTabChange(t){this.listData=[],this.noticeParams.isRead="noRead"===t?2:1,this.noticeParams.page_start="",this.init(),this.getMessageList()},async init(){const t={type:this.typeList[this.type]};try{const e=await b.Z.readMessageCount(t);"success"===e.data.code&&(this.list=this.list.map((t=>(0,a.Z)((0,a.Z)({},t),{},{count:"noRead"===t.key?Number(e.data.noRead):Number(e.data.yesRead)}))))}catch(t){}},async getConfig(){const t=await b.Z.getConfig();0===t.data.code&&(this.logoSrc=t.data.data.logo||`${ASSETS_OSS_HOST}/1794889942485307392.png`,this.enterpriseName=t.data.data.name)},getMessageListFirst(){this.listData=[],this.$set(this.listSetting,"loading",!0),this.noticeParams.page_start="",this.getMessageList()},getMessageListNext(){this.$set(this.listSetting,"loading",!0),this.getMessageList()},async getMessageList(){try{this.$set(this.listSetting,"loading",!0);const t=await b.Z.unreadMessage((0,a.Z)((0,a.Z)({},this.noticeParams),{},{page_start:this.noticeParams.page_start,page_size:this.noticeParams.page_size,type:this.typeList[this.type],isRead:"noRead"===this.active?2:1}));if(200===t.status){if(this.$set(this.listSetting,"loading",!1),"success"===t.data.code){const{list:e,next:s}=t.data;this.$set(this.listSetting,"finished",!s),this.noticeParams.page_start=s,this.listData=this.listData.concat(e||[])}}else this.$set(this.listSetting,"loading",!1)}catch(t){this.$set(this.listSetting,"loading",!1)}},paramsClear(){this.noticeParams=(0,a.Z)((0,a.Z)({},this.noticeParams),{},{page_size:20,page_start:""})}}},k=$,Z=(0,_.Z)(k,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-page cl-page-container"},[s("van-tabs",{attrs:{color:t.primaryColor,sticky:"","line-width":24},on:{change:t.onTabChange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.list,(function(t){return s("van-tab",{key:t.key,attrs:{name:t.key,title:t.value+(t.count?"("+t.count+")":"")}})})),1),t.listData.length>0?s("message-list",{attrs:{type:t.type,"logo-src":t.logoSrc,"enterprise-name":t.enterpriseName,list:t.listData,loading:t.listSetting.loading,finished:t.listSetting.finished},on:{getMessageListNext:t.getMessageListNext}}):s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}})],1)}),[],!1,null,"516b322c",null).exports},1602:(t,e,s)=>{s.r(e),s.d(e,{default:()=>I});var a=s(95082),i=s(26294),n=(s(23307),s(81392)),o=(s(57658),s(28387)),r=s(24825),l=s(22648),c={name:"PointsOverview",components:{[n.Z.name]:n.Z},filters:{formatFloat:t=>(0,l.$1)(t)},props:{keepDate:{type:Array,default:()=>["",""]}},data:()=>({overviewData:{total:0,available:0,today:0,rank:0,level:{level_name:"暂无",icon:""},user_percentage:"",contribution_percentage:"",study_percentage:"",other_percentage:""}}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor",userInfo:"user/getUserInfo"})),watch:{keepDate(t){const e={begin_time:t[0],end_time:t[1]};this.sendCalendarGetData(e)}},mounted(){this.getAccumulativePoints()},methods:{getAccumulativePoints(t=this.userInfo.userId){o.Z.getAccumulativePoints(t).then((t=>{const{data:e}=t;this.$nextTick((()=>{(0,r.X)("myPointKeepDate")&&(e.total=this.$refs.pointTotal.innerText),this.overviewData=e}))}))},sendCalendarGetData(t){o.Z.sendCalendarGetData(t).then((t=>{const{integral_count:e}=t&&t.data.data;this.overviewData.total=e}))},linkToMyTodayPointsList(){const{today:t=0}=this.overviewData;this.$router.push({path:"/today-points",query:{today_points:t}})},linkToPointsDescription(){this.$router.push({path:"/points-description"})}}},d=s(1001),u=(0,d.Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"my-score-score-general",style:{backgroundColor:t.primaryColor}},[s("div",{staticClass:"score-general-top"},[s("div",{staticClass:"total-score-container"},[s("span",{staticClass:"total-score-label"},[t._v(t._s(t.$t("minePoints.total")))]),s("div",{staticClass:"total-score-content"},[s("span",{ref:"pointTotal",staticClass:"total-score-value"},[t._v(t._s(t.overviewData.total||0))]),s("span",{staticClass:"total-score-unit"},[t._v(t._s(t.$t("mineScore.points")))])])]),s("div",{staticClass:"score-rule-desc-btn",on:{click:t.linkToPointsDescription}},[s("span",{staticClass:"btn-icon-container"},[s("SvgIcon",{staticClass:"iconfont btn-icon",attrs:{"icon-class":"icon-attention",size:10,color:"#ffffff"}})],1),s("span",{staticClass:"btn-text"},[t._v(" "+t._s(t.$t("mine.IntegralDescription"))+" ")])])]),s("div",{staticClass:"score-general-middle"},[s("div",{staticClass:"score-general-middle-score score-general-middle-left"},[s("div",{staticClass:"label"},[t._v(t._s(t.$t("minePoints.pointCanUse")))]),s("div",{staticClass:"value"},[s("span",{staticClass:"count"},[t._v(t._s(t.overviewData.available||0))]),s("span",{staticClass:"unit"},[t._v(t._s(t.$t("mineScore.points")))])])]),s("div",{staticClass:"score-general-middle-score score-general-middle-middle"},[s("div",{staticClass:"label",on:{click:t.linkToMyTodayPointsList}},[s("span",[t._v(t._s(t.$t("minePoints.todayPoints")))]),s("SvgIcon",{staticClass:"iconfont",style:{color:"#fff"},attrs:{"icon-class":"icon-right",size:9}})],1),s("div",{staticClass:"value"},[s("span",{staticClass:"count"},[t._v(t._s(t.overviewData.today))]),s("span",{staticClass:"unit"},[t._v(t._s(t.$t("mineScore.points")))])])]),s("div",{staticClass:"score-general-middle-score score-general-middle-right"},[s("div",{staticClass:"label"},[t._v(t._s(t.$t("minePoints.pointsLevel")))]),s("div",{staticClass:"level"},[s("van-icon",{attrs:{name:t.overviewData.level.icon}}),s("span",{staticClass:"count"},[t._v(t._s(t.overviewData.level.level_name))])],1)])]),s("div",{staticClass:"score-general-statistics"},[s("div",{staticClass:"statistics-item"},[s("div",{staticClass:"statistics-label"},[t._v(t._s(t.$t("minePoints.social")))]),s("div",{staticClass:"statistics-data"},[s("span",[t._v(t._s(t.overviewData.social_score)+t._s(t.$t("mineScore.points")))]),s("span",[t._v(t._s(t.overviewData.social_percentage)+" %")])])]),s("div",{staticClass:"statistics-item"},[s("div",{staticClass:"statistics-label"},[t._v(t._s(t.$t("minePoints.study")))]),s("div",{staticClass:"statistics-data"},[s("span",[t._v(t._s(t.overviewData.study_score)+t._s(t.$t("mineScore.points")))]),s("span",[t._v(t._s(t.overviewData.study_percentage)+" %")])])]),s("div",{staticClass:"statistics-item"},[s("div",{staticClass:"statistics-label"},[t._v(t._s(t.$t("minePoints.growth")))]),s("div",{staticClass:"statistics-data"},[s("span",[t._v(t._s(t.overviewData.growth_score)+t._s(t.$t("mineScore.points")))]),s("span",[t._v(t._s(t.overviewData.growth_percentage)+" %")])])]),s("div",{staticClass:"statistics-item"},[s("div",{staticClass:"statistics-label"},[t._v(t._s(t.$t("minePoints.contribution")))]),s("div",{staticClass:"statistics-data"},[s("span",[t._v(t._s(t.overviewData.contribution_score)+t._s(t.$t("mineScore.points")))]),s("span",[t._v(t._s(t.overviewData.contribution_percentage)+" %")])])])])])])}),[],!1,null,"2552c77e",null).exports,m={name:"PointMalls",computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor"})),methods:{onLinkToPointsMall(){this.$router.push({path:"/points-mall"})}}},h=(0,d.Z)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"exchange",on:{click:t.onLinkToPointsMall}},[s("div",{staticClass:"exchange-left"},[s("SvgIcon",{staticClass:"iconfont",attrs:{"icon-class":"icon-jifenduihuanshangpin",size:18,color:t.primaryColor}}),s("span",{staticClass:"exchange-tip"},[t._v(t._s(t.$t("minePoints.conversionTips")))])],1),s("span",{staticClass:"exchange-right",style:{color:t.primaryColor}},[t._v(t._s(t.$t("minePoints.redeemNow")))])])}),[],!1,null,"3386f99a",null).exports,p=(s(3791),s(93432)),g=(s(49153),s(5944)),v=(s(82522),s(10342)),_=(s(82500),s(49414)),f=(s(20581),s(50914)),y=(s(74916),s(15306),s(33948),s(11199)),C=s(14151),b=s(13110),$=s(4852),k=s(45877),Z=s(25161),w={name:"PointsList",components:{[f.Z.name]:f.Z,[_.Z.name]:_.Z,[v.Z.name]:v.Z,[g.Z.name]:g.Z,[p.Z.name]:p.Z,Avatar:$.Z,ClCustomUser:k.Z,DeptExpandRetract:Z.Z},filters:{timestampToTime:function(t){return(0,l.ZM)(t)}},props:{keepDate:{type:Array,default:()=>["",""]}},data:()=>({status:"leaderboard",loading:!1,finished:!1,leaderboardList:[],list:[],getLeaderboardParams:{page_number:1,page_size:20,department_id:"",begin_time:"",end_time:"",name:""},getMyPointsParams:{integral_type:"",start_time:"",end_time:"",page_number:1,page_size:20},indexImgStyle:{width:"18px",height:"18px"},first:y,second:C,third:b,pageLoading:!1}),computed:(0,a.Z)({},(0,i.mapGetters)({userInfo:"user/getUserInfo",primaryColor:"getPrimaryColor",rankVisibleConfig:"setting/getRankVisibleConfig"})),watch:{keepDate(t){this.getMyPointsParams.page_number=1,this.getMyPointsParams.start_time=t[0]?new Date(t[0].replace(/\./g,"/")).getTime():"",this.getMyPointsParams.end_time=t[0]?new Date(t[1].replace(/\./g,"/")).getTime()+864e5:"",this.getLeaderboardParams.page_number=1,this.getLeaderboardParams.begin_time=t[0]?new Date(t[0].replace(/\./g,"/")).getTime():"",this.getLeaderboardParams.end_time=t[0]?new Date(t[1].replace(/\./g,"/")).getTime()+864e5:"","leaderboard"===this.status?this.getLeaderboard():this.getMyPoints()}},created(){this.tabs=[{name:this.$t("minePoints.leaderboard"),status:"leaderboard"},{name:this.$t("minePoints.pointsDetail"),status:"pointsDetail"}],this.getMyPointsParams.start_time=this.keepDate[0]?new Date(this.keepDate[0].replace(/\./g,"/")).getTime():"",this.getMyPointsParams.end_time=this.keepDate[1]?new Date(this.keepDate[1].replace(/\./g,"/")).getTime()+864e5:""},mounted(){this.getInitData()},methods:{getInitData(){const{showTraineeIntegralRank:t}=this.rankVisibleConfig;t?!(0,r.X)("myPointKeepDate")&&this.getLeaderboard():(this.tabs=[{name:this.$t("minePoints.pointsDetail"),status:"pointsDetail"}],this.status="pointsDetail",!(0,r.X)("myPointKeepDate")&&this.getMyPoints())},onLoad(){this.loading=!0,"leaderboard"===this.status?(this.getLeaderboardParams.page_number+=1,this.getLeaderboard()):this.getMyPoints()},getLeaderboard(t=this.userInfo.userId){this.loading=!0,this.pageLoading=!0,1===this.getLeaderboardParams.page_number&&(this.leaderboardList=[]),o.Z.getLeaderboard(this.getLeaderboardParams,t).then((t=>{const{data:e}=t,{list:s=[],total:a}=e,i=s||[];this.leaderboardList=1===this.getLeaderboardParams.page_number?i:[...this.leaderboardList,...i],this.loading=!1,this.finished=this.leaderboardList.length>=a,this.pageLoading=!1})).catch((()=>{this.loading=!1,this.finished=!0,this.pageLoading=!1}))},getMyPoints(){this.loading=!0,this.pageLoading=!0,1===this.getMyPointsParams.page_number&&(this.list=[]);const t=(0,a.Z)((0,a.Z)({},this.getMyPointsParams),{},{begin_time:this.getMyPointsParams.start_time});o.Z.getMyPoints(t).then((t=>{const{list:e=[],total:s}=t.data.data;this.list=1===this.getMyPointsParams.page_number?e:[...this.list,...e],this.getMyPointsParams.page_number+=1,this.loading=!1,this.finished=this.list.length>=s,this.pageLoading=!1})).catch((()=>{this.loading=!1,this.finished=!0,this.pageLoading=!1}))},changeTab(t){this.status=t,this.getLeaderboardParams.page_number=1,this.getMyPointsParams.page_number=1,this.loading=!0,this.finished=!1,"leaderboard"===t?this.getLeaderboard():this.getMyPoints()}}},S=w,D={name:"MinePoint",components:{PointsOverview:u,PointMalls:h,PointsList:(0,d.Z)(S,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-container"},[s("van-tabs",{attrs:{color:t.primaryColor,"line-width":"23",sticky:""},on:{click:t.changeTab},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.tabs,(function(e){return s("van-tab",{key:e.status,attrs:{name:e.status,title:e.name,sticky:!0}},[t.loading||0!==t.leaderboardList.length||"leaderboard"!==t.status?t._e():s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}),t.leaderboardList.length>0&&"leaderboard"===t.status?s("van-list",{staticClass:"tab-scroll",attrs:{finished:t.finished,"finished-text":t.$t("common.noMore"),offset:"150"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.leaderboardList,(function(e,a){return s("div",{key:a,staticClass:"board-item"},[s("div",{staticClass:"rank"},[1===Number(e.index)?s("img",{style:t.indexImgStyle,attrs:{src:t.first,alt:"img"}}):2===Number(e.index)?s("img",{style:t.indexImgStyle,attrs:{src:t.second,alt:"img"}}):3===Number(e.index)?s("img",{style:t.indexImgStyle,attrs:{src:t.third,alt:"img"}}):Number(e.index)>3?s("span",[t._v(t._s(e.index))]):t._e()]),s("div",{staticClass:"right"},[s("div",{staticClass:"content"},[s("div",{staticClass:"avatar"},[s("Avatar",{attrs:{src:e.user_info?e.user_info.avatar:"",width:"34",height:"34"}})],1),s("div",{staticClass:"content-name"},[s("div",{staticClass:"name"},[s("cl-custom-user",{attrs:{type:e.user_info.source_type,"data-type":"userName",value:e.user_info.user_id,name:e.user_info.name}})],1),s("div",{staticClass:"department"},[s("DeptExpandRetract",{attrs:{"data-department":e}})],1)])])]),s("div",{staticClass:"score-ranking-score"},[s("span",{staticClass:"score-score-real"},[t._v(t._s(e.accumulate_score))]),s("span",{staticClass:"score-score-text"},[s("span",[t._v(t._s(t.$t("mineScore.points")))])])])])})),0):t._e(),t.loading||0!==t.list.length||"pointsDetail"!==t.status?t._e():s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}),t.list.length>0&&"pointsDetail"===t.status?s("van-list",{staticClass:"tab-scroll",attrs:{finished:t.finished,"finished-text":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return s("div",{key:a,staticClass:"detail-item"},[s("div",{staticClass:"item-left"},[s("div",{staticClass:"text"},[t._v(" "+t._s(e.event_content)+" ")]),s("div",{staticClass:"date"},[t._v(" "+t._s(t._f("timestampToTime")(Number(e.create_time)))+" ")])]),s("div",{staticClass:"item-right"},[t._v(" "+t._s(e.final_score+" "+t.$t("minePoints.points"))+" ")])])})),0):t._e()],1)})),1)],1)}),[],!1,null,"906c8ca6",null).exports,CalendarKeepDate:s(470).Z},data:()=>({keepDate:["",""]}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor",userInfo:"user/getUserInfo"})),methods:{onDateConfirm(t,e){this.keepDate=t,e&&(0,r.r)("myPointKeepDate",t)}}},I=(0,d.Z)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-points"},[s("CalendarKeepDate",{attrs:{type:"MinePoint","theme-color":t.primaryColor},on:{onDateConfirm:t.onDateConfirm}}),s("div",{staticClass:"my-points-container"},[t.userInfo.userId?s("PointsOverview",{attrs:{"keep-date":t.keepDate}}):t._e(),s("PointMalls")],1),s("PointsList",{attrs:{"keep-date":t.keepDate}})],1)}),[],!1,null,"27ae71f8",null).exports},71665:(t,e,s)=>{s.r(e),s.d(e,{default:()=>c});var a=s(2944),i={name:"PointsDescriptionTableItem",props:{data:{type:Object,default:()=>{}}}},n=s(1001),o=(0,n.Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.data.value.length>0?s("div",{staticClass:"points-descriptio-table-item"},[s("div",{staticClass:"points-description-title"},[s("div",{staticClass:"line"}),s("div",{staticClass:"name"},[t._v(" "+t._s(t.data.title)+" ")])]),s("div",{staticClass:"table-container"},[s("div",{staticClass:"points-description-table"},[s("div",{staticClass:"title-row"},t._l(t.data.row,(function(e,a){return s("div",{key:a,staticClass:"row-item",style:{flex:e.width}},[t._v(t._s(e.name))])})),0),s("div",{staticClass:"table-row"},t._l(t.data.value,(function(e,a){return s("div",{key:a,staticClass:"row-list"},t._l(t.data.row,(function(a,i){return s("div",{key:i,staticClass:"row-list-item",style:{flex:a.width}},[a.isImage?s("img",{staticClass:"item-image",attrs:{src:e[a.key]}}):s("span",[t._v(t._s(e[a.key]))])])})),0)})),0)])]),t.data.stringArray&&t.data.stringArray.length>0?s("div",{staticClass:"render-points-rule"},t._l(t.data.stringArray,(function(e,a){return s("div",{key:a,staticClass:"render-points-rule-item"},[s("div",{staticClass:"gary"},[t._v(t._s(e.title||""))]),s("div",[t._v(t._s(e.context||""))])])})),0):t._e()]):t._e()}),[],!1,null,"5afd1ca3",null).exports,r=s(28387),l={name:"PointsDescription",components:{PointsDescriptionTableItem:o},data(){return{renderValue:[{title:this.$t("minePoints.rewardRules"),row:[{name:this.$t("minePoints.type"),width:"45",key:"type"},{name:this.$t("minePoints.reward"),width:"25",key:"reward"},{name:this.$t("minePoints.limit"),width:"40",key:"limit"},{name:this.$t("minePoints.effectiveTime"),width:"30",key:"time"}],value:[],key:1},{title:this.$t("minePoints.continuousRule"),row:[{name:this.$t("minePoints.continuousDays"),width:"25",key:"day"},{name:this.$t("minePoints.reward"),width:"25",key:"reward"},{name:this.$t("minePoints.effectiveTime"),width:"15",key:"time"}],value:[],key:3},{title:this.$t("integrateTask.dailyTaskRules"),row:[{name:this.$t("integrateTask.action"),width:"50",key:"event_name"},{name:this.$t("integrateTask.extraReward"),width:"25",key:"extra_reward"}],value:[],key:4},{title:this.$t("minePoints.userLevel"),row:[{name:this.$t("minePoints.medal"),width:"25",key:"medal",isImage:!0},{name:this.$t("minePoints.level"),width:"25",key:"level"},{name:this.$t("minePoints.requiredPoints"),width:"15",key:"points"}],value:[],key:5}]}},mounted(){this.getPointsRules(),this.getContinuousCheck(),this.getIntegralTaskList(),this.getIntegralLevelList()},methods:{async getPointsRules(){const t=await r.Z.getPointsRules({page_size:9999,type:"enable",scene_code:1001});if(t.data&&t.data.rules&&t.data.rules.list){const{pointsRulesArray:e,stringArray:s}=(0,a.kH)(t.data);this.renderValue[0].value=e,this.renderValue[0].stringArray=s}},async getLectureRules(){try{const t={page_size:9999,type:"enable"},e=await r.Z.getLectureRules(t);if(e.data&&e.data.rules&&e.data.rules.list&&e.data.rules.list.length>0){const{lectureRulesArray:t,stringArray:s}=(0,a.sI)(e.data);this.renderValue[1].value=t,this.renderValue[1].stringArray=s}}catch(t){console.error(t)}},async getContinuousCheck(){try{const t={page_size:9999,type:"enable"},e=await r.Z.getContinuousCheck(t);if(e.data&&e.data.list&&e.data.list.length>0){const t=(0,a.xT)(e.data);this.renderValue[1].value=t}}catch(t){console.error(t)}},async getIntegralLevelList(){try{const t={page_number:1,type:"enable",page_size:9999},e=await r.Z.getIntegralLevelList(t);if(e.data&&e.data.list&&e.data.list.length>0){const t=(0,a.vd)(e.data);this.renderValue[3].value=t}}catch(t){console.error(t)}},async getIntegralTaskList(){try{const{data:t}=await r.Z.getDailyTaskRules();0===t.code&&(this.renderValue[2].value=t.data)}catch(t){console.error(t)}}}},c=(0,n.Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"points-description"},t._l(t.renderValue,(function(t,e){return s("div",{key:e,staticClass:"table-item"},[s("PointsDescriptionTableItem",{attrs:{data:t}})],1)})),0)}),[],!1,null,"5cf8067c",null).exports},67714:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});s(34837);var a=s(39146),i=s(95082),n=(s(20581),s(50914)),o=(s(49153),s(5944)),r=(s(33948),s(28387)),l=s(26294),c=s(22648),d={name:"TodayPointList",components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z},filters:{formatDate:function(t){let e=(0,c.p6)(Number(t),"yyyy-MM-dd  hh:mm").split(" ");return e[e.length-1]}},data:()=>({loading:!1,todayPointsList:[],getMyPointsParams:{type:0,start_time:`${new Date((new Date).toLocaleDateString()).getTime()}`,end_time:""+(new Date((new Date).toLocaleDateString()).getTime()+864e5-1),page_number:0,page_size:20}}),computed:(0,i.Z)({},(0,l.mapGetters)({userInfo:"user/getUserInfo",primaryColor:"getPrimaryColor"})),methods:{onLoadMore(){this.loading=!0,1===this.getMyPointsParams.page_number&&(this.todayPointsList=[],a.Z.loading({duration:0,forbidClick:!0,message:this.$t("common.loading")}));const t=(0,i.Z)((0,i.Z)({},this.getMyPointsParams),{},{begin_time:this.getMyPointsParams.start_time});r.Z.getMyPoints(t).then((t=>{this.getMyPointsParams.page_number+=1;const{list:e,total:s}=t.data.data,i=e||[];this.todayPointsList=[...this.todayPointsList,...i],this.finished=this.todayPointsList.length>=s,this.loading=!1,a.Z.clear()})).catch((()=>{this.loading=!1,this.finished=!0,a.Z.clear()}))}}},u=d,m=s(1001),h={name:"TodayPoints",components:{TodayPointList:(0,m.Z)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[0===t.todayPointsList.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e(),s("van-list",{attrs:{finished:t.finished,"finished-text":t.todayPointsList.length?t.$t("common.noMore"):null},on:{load:t.onLoadMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.todayPointsList,(function(e,a){return s("div",{key:a,staticClass:"today-points-item"},[s("span",{staticClass:"create-time"},[t._v(" "+t._s(t._f("formatDate")(e.create_time))+" ")]),s("div",{staticClass:"right"},[s("span",{staticClass:"content"},[t._v(t._s(e.content))]),s("span",{staticClass:"final-score"},[t._v(" "+t._s(e.final_score+" "+t.$t("minePoints.points"))+" ")])])])})),0)],1)}),[],!1,null,"064fb3d8",null).exports},data:()=>({todayPoints:""}),computed:{todayPoint(){return this.todayPoints?this.todayPoints:0}},mounted(){this.todayPoints=this.$route.query.today_points}},p=(0,m.Z)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"today-points-container"},[s("div",{staticClass:"top-container"},[s("div",{staticClass:"today-points"},[s("span",{staticClass:"points-value"},[t._v(t._s(t.todayPoint))]),s("span",{staticClass:"points-unit"},[t._v(t._s(t.$t("minePoints.points")))])]),s("span",{staticClass:"today-points-label"},[t._v(t._s(t.$t("minePoints.todayGetPoints")))])]),s("TodayPointList")],1)}),[],!1,null,"8cf4e73a",null).exports},35449:(t,e,s)=>{s.r(e),s.d(e,{default:()=>tt});var a=s(95082),i=s(26294),n=(s(23307),s(81392)),o=(s(74916),s(15306),s(57658),s(28387)),r=s(68092),l=s(24825),c={name:"ScoreDesc",components:{[n.Z.name]:n.Z},props:{keepDate:{type:Array,default:()=>["",""]},selDateAndResource:{type:Object,default:()=>{}},departmentId:{type:String,default:"1"}},data:()=>({myScoreInfo:{rank:0,today_score:0,total_score:0},dept_id:"1"}),computed:(0,a.Z)((0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor"})),{},{showNewTotal:()=>(0,r.UI)("RESOURCE_DATE_SCORE_SELECT")}),watch:{keepDate(t){this.start_time=t[0]?new Date(t[0].replace(/\./g,"/")).getTime():"",this.end_time=t[0]?new Date(t[1].replace(/\./g,"/")).getTime()+864e5:"",this.loadMyScore()},departmentId(t){this.dept_id=t,this.loadMyScore()},selDateAndResource(t){const{date:e,resourceIds:s}=t;this.sendDateAndResourceGetScore(e,s)}},mounted(){const{from:t}=this.$route.query;(0,l.X)("myScoreKeepDate")&&"home"!==t||this.loadMyScore()},methods:{loadMyScore(){const{from:t}=this.$route.query;if("home"===t)o.Z.getMyScoreInfoNew().then((t=>{this.myScoreInfo=t.data}));else{const t={dept_id:this.dept_id,start_time:this.start_time,end_time:this.end_time};o.Z.getMyScoreInfo(t).then((t=>{this.myScoreInfo=t.data}))}},linToMyTodayScoreList(){this.$router.push({path:"/today-scores",query:{today_score:this.myScoreInfo.today_score}})},sendCalendarGetData(t){o.Z.sendCalendarGetData(t).then((t=>{const{total_score:e}=t&&t.data.data;this.myScoreInfo.total_score=e}))},async sendDateAndResourceGetScore(t,e){const{from:s}=this.$route.query;if("home"===s)return;const a=t[0]?new Date(t[0].replace(/\./g,"/")).getTime():"",i=t[1]?new Date(t[1].replace(/\./g,"/")).getTime()+864e5:"",n=e?e.join(","):"",r=await o.Z.sendDateAndResourceGetScore({startTime:a,endTime:i,classifyList:n});this.myScoreInfo.total_score=r&&r.data&&r.data.data}}},d=s(1001),u=(0,d.Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"my-score",style:{background:t.primaryColor}},[s("div",{staticClass:"total"},[s("div",{staticClass:"text-name"},[t._v(t._s(t.showNewTotal?t.$t("mineScore.totalScores"):t.$t("mineScore.totalCredits")))]),s("div",{staticClass:"real"},[t._v(" "+t._s(t.myScoreInfo.total_score)+" "),s("span",{staticClass:"score-text"},[t._v(t._s(t.$t("mineScore.points")))])])]),s("div",{staticClass:"details"},[s("div",{staticClass:"mine",on:{click:t.linToMyTodayScoreList}},[s("div",{staticClass:"text-name"},[t._v(" "+t._s(t.$t("mineScore.todayCredits"))+" "),s("svg-icon",{attrs:{"icon-class":"icon-jinrujiantou",size:10,color:"#fff"}})],1),s("div",{staticClass:"real"},[t._v(" "+t._s(t.myScoreInfo.today_score)+" "),s("span",{staticClass:"score-text"},[t._v(t._s(t.$t("mineScore.points")))])])]),s("div",{staticClass:"mine"},[s("div",{staticClass:"text-name"},[t._v(t._s(t.$t("mineScore.myRanking")))]),s("div",{staticClass:"real"},[t._v(t._s(t.myScoreInfo.rank||"--")+" "),t.myScoreInfo.rank>0?s("span",{staticClass:"score-text"},[t._v(t._s(t.$t("mineScore.ranking")))]):t._e()])])])])])}),[],!1,null,"6b44f384",null).exports,m=(s(22894),s(83608)),h=(s(73474),s(74755)),p=(s(82522),s(10342)),g=(s(82500),s(49414)),v=(s(34837),s(39146)),_=(s(49153),s(5944)),f=(s(20581),s(50914)),y=(s(33948),s(45578)),C=s.n(y),b=s(6106),$=s(68876),k={name:"StudentRank",components:{[f.Z.name]:f.Z,[_.Z.name]:_.Z,ScoreItem:$.Z},props:{departmentId:{type:String,default:""},keepDate:{type:Array,default:()=>["",""]},dataType:{type:String,default:""}},data:()=>({scoreRankingList:[],loading:!1,pageSize:10,pageNumber:1,finished:!1}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor"})),watch:{keepDate(t){this.pageNumber=1,this.startTime=t[0]?new Date(t[0].replace(/\./g,"/")).getTime():"",this.endTime=t[0]?new Date(t[1].replace(/\./g,"/")).getTime()+864e5:"",this.loadRanking()}},mounted(){const{from:t}=this.$route.query;(0,l.X)("myScoreKeepDate")&&"home"!==t||this.init()},methods:{init(){this.scoreRankingList=[],this.pageNumber=1,this.startTime=this.keepDate[0]?new Date(this.keepDate[0].replace(/\./g,"/")).getTime():"",this.endTime=this.keepDate[1]?new Date(this.keepDate[1].replace(/\./g,"/")).getTime()+864e5:"",this.loading=!0,this.loadRanking()},onLoad(){this.pageNumber++,this.loading=!0,this.loadRanking()},async loadRanking(){1===this.pageNumber&&v.Z.loading({message:this.$t("promptMessage.loading"),duration:1e3});let t={page_size:this.pageSize,page_number:this.pageNumber},e=[null,{}];if("portal"===this.dataType)e=await b.Z.getScoreListByPortal(t);else{t=(0,a.Z)((0,a.Z)({},t),{},{dept_id:this.departmentId,start_time:this.startTime,end_time:this.endTime});const[s,i]=await o.Z.getRanking(t);e=[s,i.data]}const[s,i={}]=e;if(!s&&i.data){const{list:t,total:e}=i.data;this.scoreRankingList=1===this.pageNumber?t:[...this.scoreRankingList,...t],this.scoreRankingList=this.scoreRankingList.map((t=>(0,a.Z)((0,a.Z)({},t),{},{userInfo:t.user_info||t.userInfo}))),this.scoreRankingList=C()(this.scoreRankingList,"user_id"),this.finished=this.scoreRankingList.length>=e,this.loading=!1,v.Z.clear()}else this.loading=!1,this.finished=!0,v.Z.clear()}}},Z=k,w=(0,d.Z)(Z,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"score-ranking-list-container"},[0===t.scoreRankingList.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):s("div",{staticClass:"headline"},[s("van-list",{staticClass:"tab-scroll",attrs:{offset:"150",finished:t.finished,"finished-text":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"score-ranking-list"},t._l(t.scoreRankingList,(function(t){return s("ScoreItem",{key:t.user_id,attrs:{data:t}})})),1)])],1)],1)}),[],!1,null,"ec35e4aa",null).exports,S=s(95653),D={name:"PostRank",components:{[f.Z.name]:f.Z,[_.Z.name]:_.Z,DeptRank:S.Z},props:{departmentId:{type:String,default:""},keepDate:{type:Array,default:()=>["",""]}},data:()=>({list:[],loading:!1,pageSize:10,pageNumber:1,finished:!1}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor"})),watch:{keepDate(t){this.pageNumber=1,this.startTime=t[0]?new Date(t[0].replace(/\./g,"/")).getTime():"",this.endTime=t[0]?new Date(t[1].replace(/\./g,"/")).getTime()+864e5:"",this.getPostScoreRanking()}},methods:{init(){this.list=[],this.pageNumber=1,this.startTime=this.keepDate[0]?new Date(this.keepDate[0].replace(/\./g,"/")).getTime():"",this.endTime=this.keepDate[1]?new Date(this.keepDate[1].replace(/\./g,"/")).getTime()+864e5:"",this.loading=!0,this.getPostScoreRanking()},onLoad(){this.loading=!0,this.getPostScoreRanking()},getPostScoreRanking(){1===this.pageNumber&&v.Z.loading({message:this.$t("promptMessage.loading"),duration:1e3});const t={page_size:this.pageSize,page_number:this.pageNumber,dept_id:this.departmentId,start_time:this.startTime,end_time:this.endTime};o.Z.getPostScoreRanking(t).then((({data:t})=>{if(t.data){const{list:e,has_next_page:s}=t.data;this.list=1===this.pageNumber?e:[...this.list,...e],this.finished="false"===s,this.loading=!1,this.pageNumber++,v.Z.clear()}})).catch((()=>{this.loading=!1,this.finished=!0,v.Z.clear()}))}}},I=D,x=(0,d.Z)(I,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"score-ranking-list-container"},[0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):s("div",{staticClass:"headline"},[s("van-list",{staticClass:"tab-scroll",attrs:{offset:"100",finished:t.finished,"finished-text":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"score-ranking-list"},t._l(t.list,(function(t){return s("DeptRank",{key:t.ranking,attrs:{data:t}})})),1)])],1)],1)}),[],!1,null,"7ae45eb0",null).exports,T=s(22648),L={name:"DescItem",filters:{formatDate:function(t){return(0,T.p6)(t,"yyyy-MM-dd  hh:mm")}},props:{data:{type:Object,default:()=>{}}}},P=(0,d.Z)(L,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{key:t.data.userId,staticClass:"detail-item"},[s("div",{staticClass:"item-left"},[s("div",{staticClass:"text"},[t._v(" "+t._s(t.data.eventMsg)+" ")]),s("div",{staticClass:"date"},[t._v(" "+t._s(t._f("formatDate")(t.data.createTime))+" ")])]),s("div",{staticClass:"item-right"},[t._v(" "+t._s(t.data.score+" "+t.$t("mineScore.points"))+" ")])])}),[],!1,null,"778f07d6",null).exports,M=s(41609),E=s.n(M),R={name:"PostRank",components:{[f.Z.name]:f.Z,[_.Z.name]:_.Z,DescItem:P},props:{departmentId:{type:String,default:""},keepDate:{type:Array,default:()=>["",""]},selDateAndResource:{type:Object,default:()=>{}}},data:()=>({list:[],loading:!1,finished:!1,params:{excludeSelf:!1,departmentId:"",pageNumber:1,pageSize:20}}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor",userId:"getUserId"})),watch:{keepDate(t){this.params.pageNumber=1,this.params.startTime=t[0]?new Date(t[0].replace(/\./g,"/")).getTime():"",this.params.endTime=t[0]?new Date(t[1].replace(/\./g,"/")).getTime()+864e5:"",this.getScoreRecord()},selDateAndResource(t){const{date:e,resourceIds:s}=t;this.params.pageNumber=1,this.params.startTime=e[0]?new Date(e[0]).getTime():"",this.params.endTime=e[1]?new Date(e[1]).getTime()+864e5:"",this.params.classifyList=s.join(","),this.getScoreRecord()}},created(){(0,r.UI)("RESOURCE_DATE_SCORE_SELECT")?this.initNew():this.init()},methods:{init(){this.list=[],this.params.pageNumber=1,this.params.startTime=this.keepDate[0]?new Date(this.keepDate[0].replace(/\./g,"/")).getTime():"",this.params.endTime=this.keepDate[1]?new Date(this.keepDate[1].replace(/\./g,"/")).getTime()+864e5:"",this.loading=!0,this.getScoreRecord()},initNew(){const{date:t,resourceIds:e}=this.selDateAndResource;this.params.pageNumber=1,E()(t)||(this.params.startTime=t[0]?new Date(t[0]).getTime():"",this.params.endTime=t[1]?new Date(t[1]).getTime()+864e5:""),E()(e)||(this.params.classifyList=e.join(",")),this.getScoreRecord()},onLoad(){this.loading=!0,this.params.pageNumber+=1,this.getScoreRecord()},getScoreRecord(){const t=(0,r.UI)("RESOURCE_DATE_SCORE_SELECT")?o.Z.getScoreRecordNew:o.Z.getScoreRecord;this.loading=!0,1===this.params.pageNumber&&v.Z.loading({message:this.$t("promptMessage.loading"),duration:1e3}),t((0,a.Z)((0,a.Z)({},this.params),{},{userId:this.userId})).then((t=>{const{list:e,total:s}=t.data;this.list=1===this.params.pageNumber?e:[...this.list,...e],this.finished=this.list.length>=s,this.loading=!1,v.Z.clear()})).catch((()=>{v.Z.clear(),this.loading=!1,this.finished=!0}))}}},A=R,N=(0,d.Z)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"score-ranking-list-container"},[0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):s("div",{staticClass:"headline"},[s("van-list",{staticClass:"tab-scroll",attrs:{offset:"150",finished:t.finished,"finished-text":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"score-ranking-list"},t._l(t.list,(function(t){return s("DescItem",{key:t.id,attrs:{data:t}})})),1)])],1)],1)}),[],!1,null,"2fcde11a",null).exports,O={name:"ScoreList",components:{[g.Z.name]:g.Z,[p.Z.name]:p.Z,[h.Z.name]:h.Z,[m.Z.name]:m.Z,StudentRank:w,PostRank:x,ScoreRecord:N},props:{keepDate:{type:Array,default:()=>["",""]},selDateAndResource:{type:Object,default:()=>{}}},data:()=>({refreshing:!1,show:!1,departments:[],departmentId:"1",departName:"",current:0,active:"StudentRank",rankByDept:!0,tabVisible:[{type:"StudentRank",visible:!0},{type:"PostRank",visible:!0},{type:"ScoreRecord",visible:!0}],showDeptSelect:!0}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor",rankVisibleConfig:"setting/getRankVisibleConfig"})),created(){const{from:t}=this.$route.query;this.rankByDept="home"!==t},mounted(){this.handleTabVisible()},methods:{handleTabVisible(){const{showDeptCreditRank:t,showTraineeCreditRank:e}=this.rankVisibleConfig,s=[{type:"StudentRank",visible:e},{type:"PostRank",visible:this.rankByDept&&t},{type:"ScoreRecord",visible:!0}];this.tabVisible=s;const{type:a}=s.find((t=>t.visible));this.changeTab(a);const i=this.rankByDept&&(t||e);i&&this.loadDept(),this.showDeptSelect=i},changeTab(t){this.active=t,this.getScoreAndListByDeptId()},loadDept(){o.Z.getMyDept().then((t=>{this.departments=t.data.data,this.departmentId=t.data.data.length>0?t.data.data[0].dept_id:"1",this.departments.length>0&&this.departments.forEach((t=>{t.text=t.dept_name})),this.departName=this.departments[this.current].text}))},changeDept(t,e){this.departmentId=t.dept_id,this.current=e,this.departName=t.text,this.show=!1,this.getScoreAndListByDeptId(),this.$emit("onDepartmentIdConfirm",t.dept_id)},getScoreAndListByDeptId(){this.$nextTick((()=>{"StudentRank"===this.active?this.$refs.StudentRank.init():"PostRank"===this.active?this.$refs.PostRank.init():"ScoreRecord"===this.active&&this.$refs.ScoreRecord.init()}))}}},F=(0,d.Z)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mytabs"},[s("van-tabs",{attrs:{sticky:"","title-active-color":t.primaryColor,color:t.primaryColor,"line-width":"23px"},on:{change:t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t.tabVisible[0].visible?s("van-tab",{attrs:{title:t.$t("mineScore.personalScoreRanking"),name:"StudentRank"}},[s("StudentRank",{ref:"StudentRank",attrs:{"data-type":t.rankByDept?"dept":"portal","department-id":t.departmentId,"keep-date":t.keepDate}})],1):t._e(),t.tabVisible[1].visible?s("van-tab",{attrs:{title:t.$t("mineScore.postScoreRanking"),name:"PostRank"}},[s("PostRank",{ref:"PostRank",attrs:{"department-id":t.departmentId,"keep-date":t.keepDate}})],1):t._e(),s("van-tab",{attrs:{title:t.$t("mineScore.scoreRecordDetail"),name:"ScoreRecord"}},[s("ScoreRecord",{ref:"ScoreRecord",attrs:{"department-id":t.departmentId,"keep-date":t.keepDate,"sel-date-and-resource":t.selDateAndResource}})],1),"ScoreRecord"!==t.active&&t.showDeptSelect?s("div",{staticClass:"score-ranking-piker",style:{color:t.primaryColor},attrs:{slot:"nav-right"},on:{click:function(e){t.show=!0}},slot:"nav-right"},[t.departName?s("span",[t._v(t._s(t.$t("mineScore.selection")+"："+t.departName))]):s("span",[t._v(t._s(t.$t("mineScore.department")))])]):t._e()],1),s("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-picker",{staticClass:"picker",attrs:{"show-toolbar":"",columns:t.departments,"default-index":t.current},on:{cancel:function(e){t.show=!1},confirm:t.changeDept}})],1)],1)}),[],!1,null,"3c7f01de",null).exports,B=s(470),U=(s(40733),s(85325)),q=s(39145),z=s(27484),j=s.n(z),G=(s(21790),s(24031)),H=(s(30033),s(87837)),V=(s(25773),s(35791)),K={components:{Popup:h.Z,Button:V.Z,Checkbox:H.Z,Tag:G.Z},props:{visible:{type:Boolean,default:!1}},data:()=>({popUpVisible:!1,firstGradeList:[],secondGradeList:[],thirdGradeList:[],selResouceItems:[]}),computed:{ifChecked(){return t=>this.selResouceItems.findIndex((e=>e.id===t.id))>-1}},watch:{visible(t){this.popUpVisible=t}},mounted(){this.getResourceTree()},methods:{closePopup(){this.$emit("update:visible",!1)},tagClose(t){t.checked=!1;let e=this.selResouceItems.findIndex((e=>e.id===t.id));this.selResouceItems.splice(e,1)},async getResourceTree(){const t=await o.Z.getResourceTree();E()(t.data)||(t.data.forEach((t=>t.checked=!1)),this.firstGradeList=t.data)},resourceClick(t,e){!t.select&&t.id&&(1===e?(this.firstGradeList.forEach((e=>{e.select=e.id===t.id})),this.secondGradeList=t.children||[],this.thirdGradeList=[]):2===e?(this.secondGradeList.forEach((e=>{e.select=e.id===t.id})),this.thirdGradeList=t.children||[]):3===e&&this.thirdGradeList.forEach((e=>{e.select=e.id===t.id})))},checkBoxChange(t){if(t.id){let e=this.selResouceItems.findIndex((e=>e.id===t.id));t.checked&&e<0&&this.selResouceItems.push(t),!t.checked&&e>=0&&this.selResouceItems.splice(e,1)}},onSureClick(){this.$emit("onSureClick",this.selResouceItems),this.popUpVisible=!1},onClearClick(){this.selResouceItems.forEach((t=>t.checked=!1)),this.selResouceItems=[]}}},Y=(0,d.Z)(K,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Popup",{style:{height:"80%"},attrs:{round:"",position:"bottom",closeable:""},on:{close:t.closePopup},model:{value:t.popUpVisible,callback:function(e){t.popUpVisible=e},expression:"popUpVisible"}},[s("div",{staticClass:"select-resouce"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("mineScore.selectResource")))]),s("div",{staticClass:"resource-tree"},[s("div",{staticClass:"grade first-grade"},t._l(t.firstGradeList,(function(e){return s("div",{key:e.id,class:"item "+(e.select?"select":"")},[s("Checkbox",{attrs:{shape:"square","icon-size":"16px"},on:{click:function(s){return s.stopPropagation(),t.checkBoxChange(e,1)}},model:{value:e.checked,callback:function(s){t.$set(e,"checked",s)},expression:"item.checked"}}),s("span",{staticClass:"name",on:{click:function(s){return s.stopPropagation(),t.resourceClick(e,1)}}},[t._v(t._s(e.name))])],1)})),0),s("div",{staticClass:"grade second-grade"},t._l(t.secondGradeList,(function(e){return s("div",{key:e.id,class:"item "+(e.select?"select":"")},[s("Checkbox",{attrs:{shape:"square","icon-size":"16px"},on:{click:function(s){return s.stopPropagation(),t.checkBoxChange(e,2)}},model:{value:e.checked,callback:function(s){t.$set(e,"checked",s)},expression:"item.checked"}}),s("span",{staticClass:"name",on:{click:function(s){return s.stopPropagation(),t.resourceClick(e,2)}}},[t._v(t._s(e.name))])],1)})),0),s("div",{staticClass:"grade thrid-grade"},t._l(t.thirdGradeList,(function(e){return s("div",{key:e.id,class:"item "+(e.select?"select":"")},[s("Checkbox",{attrs:{shape:"square","icon-size":"16px"},on:{click:function(s){return s.stopPropagation(),t.checkBoxChange(e,3)}},model:{value:e.checked,callback:function(s){t.$set(e,"checked",s)},expression:"item.checked"}}),s("span",{staticClass:"name",on:{click:function(s){return s.stopPropagation(),t.resourceClick(e,3)}}},[t._v(t._s(e.name))])],1)})),0)]),s("div",{staticClass:"bottom-btn"},[s("div",{staticClass:"tags"},t._l(t.selResouceItems,(function(e,a){return s("Tag",{key:a,attrs:{closeable:""},on:{close:function(s){return t.tagClose(e)}}},[s("span",{staticClass:"tag-name"},[t._v(t._s(e.name))])])})),1),s("div",{staticClass:"bottom"},[s("div",{staticClass:"sel-count"},[t._v(t._s(t.$t("mineScore.choose"))+": "),s("span",[t._v(t._s(t.selResouceItems.length))]),t._v(t._s(t.$t("mineScore.resourceItems")))]),s("div",{staticClass:"btns"},[s("Button",{attrs:{size:"small",hairline:""},on:{click:t.onClearClick}},[t._v(t._s(t.$t("mineScore.clear")))]),s("Button",{attrs:{size:"small",hairline:"",type:"info"},on:{click:t.onSureClick}},[t._v(t._s(t.$t("mineScore.sure")))])],1)])])])])}),[],!1,null,null,null).exports;const{noop:W}=q.Y;var Q={components:{Calendar:U.Z,ResouceSelect:Y},props:{onDateConfirm:{type:Function,default:W},themeColor:{type:String,default:"#516AE6"}},data:()=>({keepDate:"",showKeepDate:!1,minDate:new Date((new Date).getFullYear()-10,0,1),maxDate:new Date((new Date).getFullYear()+10,0,1),showResouceSelect:!1,resourceIds:[],selDate:[],resourceName:""}),mounted(){this.calendarRef=this.$refs.calendar},methods:{onkeepDateConfirm(t){const[e,s]=t,a=[this.formatKeepDate(e),this.formatKeepDate(s)];this.selDate=a,this.showKeepDate=!1,this.keepDate=`${this.formatKeepDate(e)} - ${this.formatKeepDate(s)}`,this.$emit("dateResourceChange",{date:a,resourceIds:this.resourceIds})},formatKeepDate:t=>`${t.getFullYear()}.${t.getMonth()+1}.${t.getDate()}`,formatter(t){const e=t.date.getFullYear(),s=t.date.getMonth(),a=t.date.getDate();return s===(new Date).getMonth()&&e===(new Date).getFullYear()&&a===(new Date).getDate()&&(t.text=this.$t("common.today")),t},showResouce(){this.showResouceSelect=!0},showCalendar(){this.showKeepDate=!0},calendarBtnClick(){const t=j()().year(j()().year()).startOf("year").toDate(),e=j()().toDate();this.$refs.calendar.reset([t,e])},clearDate(){this.keepDate="",this.selDate=[],this.$refs.calendar.reset([]),this.showKeepDate=!1,this.$emit("dateResourceChange",{date:["",""],resourceIds:this.resourceIds})},onSureClick(t){const e=t.map((t=>t.id));this.resourceName=t.map((t=>t.name)).join(","),this.resourceIds=e,this.$emit("dateResourceChange",{date:this.selDate,resourceIds:e})}}},X=(0,d.Z)(Q,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mine-calendar-classify"},[s("div",{staticClass:"select-part"},[s("div",{staticClass:"sel-part",on:{click:t.showResouce}},[s("span",{class:"sel-name "+(t.resourceName.length>0?"sel":"")},[t._v(t._s(t.resourceName||t.$t("mineScore.resourceType")))]),s("span",{class:"triangle "+(t.showResouceSelect?"up":"")+" "+(t.resourceName.length>0?"sel":"")})]),s("div",{staticClass:"sel-part",on:{click:t.showCalendar}},[s("span",{class:"sel-name "+(t.keepDate.length>0?"sel":"")},[t._v(t._s(t.keepDate||t.$t("mineScore.timeScope")))]),s("span",{class:"triangle "+(t.showKeepDate?"up":"")+" "+(t.keepDate.length>0?"sel":"")})])]),s("Calendar",{ref:"calendar",attrs:{color:t.themeColor,formatter:t.formatter,"min-date":t.minDate,"max-date":t.maxDate,type:"range"},on:{confirm:t.onkeepDateConfirm},model:{value:t.showKeepDate,callback:function(e){t.showKeepDate=e},expression:"showKeepDate"}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"clander-btn",on:{click:t.calendarBtnClick}},[t._v(t._s(t.$t("mineScore.nowYear")))]),s("span",{staticClass:"clander-clear",on:{click:t.clearDate}},[t._v(t._s(t.$t("mineScore.clear")))]),s("span",{staticClass:"clander-title"},[t._v(t._s(t.$t("mineScore.dateSelect")))])])]),s("resouce-select",{attrs:{visible:t.showResouceSelect},on:{"update:visible":function(e){t.showResouceSelect=e},onSureClick:t.onSureClick}})],1)}),[],!1,null,null,null).exports,J={name:"MineScore",components:{ScoreDesc:u,ScoreList:F,CalendarKeepDate:B.Z,CalendarAndClassify:X},data:()=>({keepDate:["",""],departmentId:"1",selDateAndResource:{},showFilter:!0}),computed:(0,a.Z)((0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor",userInfo:"user/getUserInfo"})),{},{showResourceAndDate:()=>(0,r.UI)("RESOURCE_DATE_SCORE_SELECT")}),created(){const{from:t}=this.$route.query;this.showFilter="home"!==t},methods:{onDateConfirm(t,e){this.keepDate=t,e&&(0,l.r)("myScoreKeepDate",t)},dateResourceChange(t){this.selDateAndResource=t},onDepartmentIdConfirm(t){this.departmentId=t}}},tt=(0,d.Z)(J,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-scores"},[s("div",{staticClass:"score-ranking-container"},[t.showFilter?s("div",{staticClass:"top-picker"},[t.showResourceAndDate?s("CalendarAndClassify",{on:{dateResourceChange:t.dateResourceChange}}):t._e(),t.showResourceAndDate?t._e():s("CalendarKeepDate",{attrs:{type:"MineScore","theme-color":t.primaryColor},on:{onDateConfirm:t.onDateConfirm}})],1):t._e(),s("ScoreDesc",{attrs:{"keep-date":t.keepDate,"department-id":t.departmentId,"sel-date-and-resource":t.selDateAndResource}}),s("ScoreList",{attrs:{"keep-date":t.keepDate,"sel-date-and-resource":t.selDateAndResource},on:{onDepartmentIdConfirm:t.onDepartmentIdConfirm}})],1)])}),[],!1,null,"041099b6",null).exports},54152:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});s(34837);var a=s(39146),i=(s(49153),s(5944)),n=(s(20581),s(50914)),o=(s(33948),s(28387)),r=s(22648),l={name:"TodayScoreList",components:{[n.Z.name]:n.Z,[i.Z.name]:i.Z},data:()=>({dataList:[],loading:!1,pageSize:10,pageNumber:1,finished:!1}),methods:{onLoadMore(){this.loading=!0,1===this.pageNumber&&a.Z.loading({message:this.$t("promptMessage.loading"),duration:1e3});const t={page_size:this.pageSize,page_number:this.pageNumber};o.Z.getScoreList(t).then((t=>{if(this.pageNumber++,t.data.list.length>0){for(let e=0;e<t.data.list.length;e++)t.data.list[e].create_time=(0,r.p6)(t.data.list[e].create_time,"hh:mm");this.dataList=[...this.dataList,...t.data.list],this.finished=this.dataList.length>=t.data.total,this.loading=!1}else this.finished=!0,this.loading=!1})).catch((()=>{this.loading=!1,this.finished=!0}))}}},c=s(1001),d={name:"TodayScore",components:{TodayScoreList:(0,c.Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[0===t.dataList.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e(),s("van-list",{attrs:{finished:t.finished,"finished-text":t.dataList.length?t.$t("common.noMore"):""},on:{load:t.onLoadMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"today-score-list"},t._l(t.dataList,(function(e){return s("div",{key:String(e.index),staticClass:"today-score-list-info"},[s("div",{staticClass:"today-score-list-info-msg"},[s("span",{staticClass:"today-score-list-info-msg-time"},[t._v(t._s(e.create_time))]),s("div",{staticClass:"today-score-list-info-msg-desc"},[t._v(t._s(e.event_msg))])]),s("div",{staticClass:"today-score-list-info-score"},[t._v(t._s(e.score_str))])])})),0)])],1)}),[],!1,null,"d14cbc28",null).exports},data:()=>({todayScore:""}),computed:{todayScores(){return this.todayScore?this.todayScore:0}},mounted(){this.todayScore=this.$route.query.today_score}},u=(0,c.Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"score-list-container"},[s("div",{staticClass:"get-score"},[s("div",{staticClass:"total"},[s("span",{staticClass:"num"},[t._v(t._s(t.todayScores))]),s("span",{staticClass:"score"},[t._v(t._s(t.$t("mineScore.points")))])]),s("span",{staticClass:"text"},[t._v(t._s(t.$t("mineScore.todayObtainedCredits")))])]),s("TodayScoreList")],1)}),[],!1,null,"4dfbcd72",null).exports},27329:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});s(52355);var a=s(29233),i=(s(57658),s(27632)),n=s(22648),o={name:"",components:{[a.Z.name]:a.Z},data(){return{rowConfig:[{label:this.$t("setting.checkUpdates"),onTap:()=>this.handleRenewVersion(),display:"android_app"===(0,n.ij)(),isLink:!1},{label:this.$t("mine.privacyPolicy"),onTap:()=>this.handleLinkTo("privacyPolicy"),display:!0,isLink:!0},{label:this.$t("mine.userProtocol"),onTap:()=>this.handleLinkTo("userProtocol"),display:!0,isLink:!0}]}},methods:{handleLinkTo(t){this.$router.push({path:"/common-iframe",query:{iframeUrl:encodeURIComponent({privacyPolicy:"https://gsdn.coolcollege.cn/assets/kuxueyuan/operate/currency/pc_privacy.html",userProtocol:"https://gsdn.coolcollege.cn/assets/kuxueyuan/operate/currency/user-agreement.html"}[t]),type:t}})},handleRenewVersion(){i.Z.checkUpdate()}}},r=(0,s(1001).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preference cl-page-container"},[s("div",{staticClass:"content"},[t._l(t.rowConfig,(function(e){return[e.display?s("van-cell",{key:e.label,attrs:{"is-link":e.isLink},on:{click:e.onTap}},[t._v(" "+t._s(e.label)+" ")]):t._e()]}))],2)])}),[],!1,null,"e4b62d36",null).exports},56615:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});s(23307);var a=s(81392),i=(s(20581),s(50914)),n=(s(25773),s(35791)),o=(s(30653),s(57370)),r=(s(33948),s(57658),s(4852)),l=s(28387),c={name:"",components:{NoticeBar:o.Z,Avatar:r.Z,Button:n.Z,List:i.Z,Icon:a.Z},data:()=>({admin_num:0,list:[],loading:!1,finished:!1,pageNumber:1}),mounted(){this.getUserList()},methods:{onLoad(){this.pageNumber+=1,this.getUserList()},async getUserList(){this.loading=!0;try{const t={roleId:2e7,pageNumber:this.pageNumber,pageSize:20},{data:{userList:e}}=await l.Z.getUserList(t),{list:s,total:a}=e;s&&s.length>0&&(this.list=[...this.list,...s],this.admin_num=a,this.loading=!1,this.finished=this.list.length>=a)}catch(t){this.list=[],this.admin_num=0,this.loading=!1,this.finished=!0}},isShowSelect(){this.$router.push({path:"/mine/setting/choose-user"})}}},d=c,u=(0,s(1001).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preference cl-page-container"},[s("NoticeBar",{attrs:{color:"#2D3040",background:"#FFF2F2F2"}},[s("Icon",{staticClass:"icon_tip",attrs:{name:"info",color:"#FFA000"}}),t._v(" "+t._s(t.$t("dingPersonnel.linkToPc"))+" ")],1),s("div",{staticClass:"cl_admin_page"},[s("div",{staticClass:"cl_admin_num"},[t._v(t._s(t.$t("dingPersonnel.userNumber"))+t._s(t.admin_num))]),s("List",{attrs:{finished:t.finished,"finished-text":t.$t("dingPersonnel.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return s("div",{key:e.id,staticClass:"cl_admin_page_item"},[s("div",{staticClass:"avatar"},[s("Avatar",{attrs:{src:e.user_info.avatar,width:"34",height:"34"}})],1),s("div",{staticClass:"content-name"},[s("div",{staticClass:"name"},[t._v(" "+t._s(e.user_info.name)+" ")]),s("div",{staticClass:"department"},[t._v(" "+t._s(e.user_info.deptName)+" ")])])])})),0)],1),s("div",{staticClass:"cl_admin_btn"},[s("Button",{staticClass:"cl_btn",attrs:{type:"primary"},on:{click:t.isShowSelect}},[t._v(t._s(t.$t("dingPersonnel.addManager")))])],1)],1)}),[],!1,null,"01b99a9e",null).exports},69428:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});s(52355);var a=s(29233),i=(s(57658),s(76953)),n=s(28387),o={name:"",components:{[a.Z.name]:a.Z,ClChooseUser:i.Z},data:()=>({orgConfig:{multiple:!0,pickedUsers:[],disabledUsers:[],pickedDepartments:[],disabledDepartments:[],requiredDepartments:[],requiredUsers:[],responseUserOnly:!0,filterAuth:!1}}),methods:{async onOrgSuccess({users:t}){const e=new FormData;e.append("roleId",2e7),e.append("userIds",t.map((t=>t.id)).join(","));const{data:s}=await n.Z.addUserList(e);0===s.code&&this.$router.push({path:"/mine/setting/admin-setting"})},onOrgCancel(){this.$router.push({path:"/mine/setting/admin-setting"})}}},r=(0,s(1001).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preference cl-page-container"},[s("div",{staticClass:"choose-user"},[s("ClChooseUser",{attrs:{config:t.orgConfig},on:{onSuccess:t.onOrgSuccess,cancel:t.onOrgCancel}})],1)])}),[],!1,null,"1e499926",null).exports},5155:(t,e,s)=>{s.r(e),s.d(e,{default:()=>h});s(31146);var a=s(41610),i=s(95082),n=(s(3791),s(93432)),o=(s(52355),s(29233)),r=(s(25773),s(35791)),l=(s(26699),s(57658),s(27632)),c=s(26294),d=s(68092),u=s(17780),m={name:"Setting",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z},data(){return{rowConfig:[{label:this.$t("pageTitle.accountBind"),onTap:()=>this.handleLink("/mine/account-manage"),display:!0,isLink:!0},{label:this.$t("setting.selectCompany"),onTap:()=>this.handleChooseEnterprise(),display:!["dingTalk","lark","wechat_qy"].includes(l.Z.env)&&!(0,u.xX)(),isLink:!0},{label:this.$t("setting.logout"),onTap:()=>this.linkToLogout(),display:"app"===l.Z.env&&!(0,u.xX)(),isLink:!0},{label:this.$t("setting.multiLanguage"),onTap:()=>this.linkTo({url:"/pages/sub-modules/setting/language/index"}),display:"dingTalk"===l.Z.env&&!(0,u.xX)(),isLink:!0},{label:this.$t("mine.aboutUs"),onTap:()=>this.handleLink("/mine/setting/about-us"),display:"app"===l.Z.env,isLink:!0},{label:this.$t("setting.adminSetting"),onTap:()=>this.handleLink("/mine/setting/admin-setting"),display:!1,isLink:!0}],loading:!0}},computed:(0,i.Z)((0,i.Z)({},(0,c.mapGetters)({primaryColor:"getPrimaryColor",pageFrom:"getPageFrom"})),{},{showExitBtn(){let t=localStorage.getItem("appTypeVue");return"lingnan"===t||!(["dingTalk","lark","wechat_qy"].includes(l.Z.env)||"yongyou"===t||"yunzhijia"===t||!(0,d.eY)("LOGOUT")||!(0,u.xX)())}}),mounted(){this.rowConfig[5].display="dingPersonnel"===this.pageFrom},methods:{linkTo({url:t}){l.Z.navigateTo({url:t})},linkToLogout(){this.$router.push({path:"/logout"})},handleLink(t){this.$router.push({path:t})},handleChooseEnterprise(){"app"===l.Z.env?l.Z.selectEnterprise():l.Z.navigateTo({url:"/pages/login/multiple-enterprise/index"})},handleCheckUpdates(){l.Z.checkUpdate()},signOutFun(){let t=this.$t("mine.loginOutTips"),e=this.$t("mine.loginOutContent");"wechat_h5"===l.Z.env&&(t=this.$t("mine.loginOut"),e=this.$t("mine.wxLogoutContent")),a.Z.confirm({title:t,message:e,confirmButtonText:this.$t("mine.loginOutConfirm"),cancelButtonText:this.$t("mine.loginOutCancel"),confirmButtonColor:this.primaryColor}).then((()=>{this.$store.dispatch("user/logout")})).catch((()=>{}))}}},h=(0,s(1001).Z)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preference"},[s("div",{staticClass:"content-top"},[t._l(t.rowConfig,(function(e){return[e.display?s("van-cell",{key:e.label,attrs:{"is-link":e.isLink},on:{click:e.onTap}},[t._v(" "+t._s(e.label)+" ")]):t._e()]}))],2),t.showExitBtn?s("div",{staticClass:"exit-btn-button",on:{click:function(e){return t.signOutFun()}}},[s("van-button",{attrs:{size:"large"}},[t._v(t._s(t.$t("mine.loginOut")))])],1):t._e()])}),[],!1,null,"28ea8270",null).exports},76546:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});s(31146);var a=s(41610),i=s(95082),n=(s(29941),s(64168)),o=(s(25773),s(35791)),r=(s(57658),s(26294)),l=s(27632),c={components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z},computed:(0,i.Z)({},(0,r.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){const{showDialog:t}=this.$route.query;"true"===t&&a.Z.confirm({title:this.$t("setting.logoutStatement"),className:"logout-dialog",allowHtml:!0,message:`<span style="color:red">${this.$t("setting.logoutCaution")}</span>`,confirmButtonText:this.$t("setting.oKLogout"),confirmButtonColor:this.primaryColor,cancelButtonText:this.$t("setting.thinkAgain")}).then((()=>{l.Z.exitLogin({})})).catch((()=>{this.$router.go(-1)}))},methods:{onSureLogout(){this.$router.push({path:"/verification-code"})},cancel(){this.$router.go(-1)}}},d=(0,s(1001).Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"confirm-container"},[s("div",{staticClass:"confirm-card"},[s("div",{staticClass:"confirm-card-title"},[t._v(" "+t._s(t.$t("setting.logoutTitle"))+" ")]),s("div",{staticClass:"confirm-card-content"},[t._v(" "+t._s(t.$t("setting.logoutTips"))+" ")])])]),s("van-cell-group",[s("div",{staticClass:"confirm-btn"},[s("van-button",{staticClass:"btn ok-btn",attrs:{color:t.primaryColor},on:{click:t.onSureLogout}},[t._v(t._s(t.$t("setting.oKLogout")))]),s("van-button",{staticClass:"btn cancel-btn",attrs:{type:"default"},on:{click:t.cancel}},[t._v(t._s(t.$t("setting.thinkAgain")))])],1)])],1)}),[],!1,null,"58bca784",null).exports},65597:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});s(34837);var a=s(39146),i=s(95082),n=(s(25773),s(35791)),o=(s(93787),s(20090)),r=(s(29941),s(64168)),l=(s(74916),s(15306),s(28387)),c=s(26294),d={components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z},data:()=>({mobile:"",value:"",showKeyboard:!1,verificationCode:"",verifyFlag:!1,verifyTime:60,VerificationTime:null,mobileError:""}),computed:(0,i.Z)({},(0,c.mapGetters)({primaryColor:"getPrimaryColor"})),methods:{getResetVerification(){this.mobile?l.Z.sendVerification({login_mobile:this.mobile,action_type:"logout"}).then((()=>{this.verifyFlag=!0,this.showKeyboard=!0,this.startVerificationTime()})).catch((t=>{console.error(t)})):this.mobileError=this.$t("minePoints.pleaseInpPhone")},onMobileChange(t){t&&(this.mobileError="")},startVerificationTime(){let t=null;t=setInterval((()=>{const t=this.verifyTime-1;if(0===t)return clearInterval(this.VerificationTime),this.verifyFlag=!1,void(this.verifyTime=60);this.verifyTime=t}),1e3),this.VerificationTime=t},onSure(){if(!this.mobile)return void a.Z.fail(this.$t("setting.mobilePlace"));if(!this.value)return void a.Z.fail(this.$t("setting.codePlace"));if(6!==this.value.length)return void a.Z.fail(this.$t("setting.codeLengthError"));const t={mobile:this.mobile,code:this.value,action_type:"logout"};l.Z.checkVerification((0,i.Z)({},t)).then((t=>{!0===t.data.check_late?a.Z.fail(this.$t("setting.expireTips")):!0===t.data.check_pass?this.$router.replace({path:"/logout",query:{showDialog:!0}}):a.Z.fail(this.$t("setting.verificationCodeError"))})).catch((t=>{console.error(t),a.Z.fail(this.$t("setting.verificationCodeError"))}))},cancel(){this.$router.go(-1)}}},u=(0,s(1001).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"code-container"},[s("van-cell-group",[s("van-field",{attrs:{"label-width":"50",type:"number",maxlength:"50",label:t.$t("setting.mobile"),placeholder:t.$t("setting.mobilePlace"),"error-message":t.mobileError},on:{input:t.onMobileChange},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),s("van-field",{attrs:{"label-width":"50",type:"number",maxlength:"6",label:t.$t("setting.verificationCode"),placeholder:t.$t("setting.codePlace")},scopedSlots:t._u([{key:"button",fn:function(){return[t.verifyFlag?s("div",[t._v(t._s(t.$t("setting.reacquire"))),s("span",[t._v(t._s(t.verifyTime))]),t._v(t._s(t.$t("setting.second")))]):s("div",{style:{color:t.primaryColor},on:{click:t.getResetVerification}},[t._v(t._s(t.$t("setting.getVerificationCode")))])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),s("van-cell-group",[s("div",{staticClass:"confirm-btn"},[s("van-button",{staticClass:"btn ok-btn",attrs:{color:t.primaryColor},on:{click:t.onSure}},[t._v(t._s(t.$t("setting.oKLogout")))]),s("van-button",{staticClass:"btn cancel-btn",attrs:{type:"default"},on:{click:t.cancel}},[t._v(t._s(t.$t("setting.thinkAgain")))])],1)])],1)}),[],!1,null,"7782996c",null).exports},33275:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});s(34837);var a=s(39146),i=s(95082),n=(s(25773),s(35791)),o=(s(93787),s(20090)),r=(s(77141),s(30960)),l=(s(29941),s(64168)),c=(s(52355),s(29233)),d=(s(33948),s(73210),s(26294)),u=s(28387),m=s(41051),h=s(92442),p=s(4374),g=s(57969),v={name:"",components:{[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z},props:{},data(){return{verifyCode:"",mobile:"",email:"",account:"",countdown:60,sign:"",accountType:"origin_psd",password:"",confirmPassword:"",loading:!1,sendloading:!1,validateMobile:[{required:!0,message:this.$t("subsidy.placeholder",{input:this.$t("mine.mobile")})},{validator:h.gG,message:this.$t("mine.phoneFormatErrorTips")}],validateCode:[{required:!0,message:this.$t("subsidy.placeholder",{input:this.$t("mine.verifyCode")})},{validator:h.jE,message:this.$t("mine.verifyTip")}],validateEmail:[{required:!0,message:this.$t("subsidy.placeholder",{input:this.$t("mine.email")})},{validator:h.oH,message:this.$t("mine.emailErrorTips")}],validatePassword:[{required:!0,message:this.$t("mine.newPasswordVd")},{validator:t=>(0,h.sx)(t,20),message:this.$t("mine.maxLengthTip")},{validator:t=>(0,h.gT)(t,6),message:this.$t("mine.minLengthTip")},{validator:h.uo,message:this.$t("mine.newPasswordValidate")}]}},computed:(0,i.Z)((0,i.Z)({},(0,d.mapGetters)({isPure:"getIsPure",primaryColor:"getPrimaryColor"})),{},{accountDesc(){const t={mobile:this.$t("mine.mobile"),email:this.$t("mine.email"),origin_psd:this.$t("mine.oldPwd")};return{validate:{mobile:this.validateMobile,email:this.validateEmail,origin_psd:[{required:!0,message:this.$t("subsidy.placeholder",{input:t.origin_psd})}]}[this.accountType],label:t[this.accountType],placeholder:this.$t("subsidy.placeholder",{input:t[this.accountType]})}}}),mounted(){const{account:t,type:e}=this.$route.query;this.account=t||"",this.accountType=e||"origin_psd"},beforeDestroy(){clearInterval(this.sendCodeTimer)},created(){},methods:{async handleSubmit(t){this.loading=!0;const{verifyCode:e,password:s,origin_psd:i}=t;if("origin_psd"===this.accountType){const t={new_passwd:(0,m.v)(s),old_passwd:(0,m.v)(i)},{data:e}=await u.Z.changePsdByOriginal(t);"true"===e.success?((0,a.Z)(this.$t("mine.modifyPsdSuccess")),this.$router.go(-1)):p.Z[e.code]&&p.Z[e.code].showErrorMessage&&a.Z.fail(p.Z[e.code].content[g.Z.locale])}else{const t={code:e,new_passwd:(0,m.v)(s),account:this.account,type:this.accountType},[i,n]=await u.Z.changePsdByMobileOrEmail(t);i||0!==n.data.code||((0,a.Z)(this.$t("mine.modifyPsdSuccess")),this.$router.go(-1))}this.loading=!1},async handleSendCode(){if(!this.account.trim())return;this.sendloading=!0;let[t,e]=[null,null];if("mobile"===this.accountType?[t,e]=await u.Z.sendPsdCodeByMobile({mobile:this.account}):[t,e]=await u.Z.sendPsdCodeByEmail({email:this.account}),t&&t.data.message)return a.Z.fail(t.data.message),void(this.sendloading=!1);this.sendloading=!1,e&&e.data&&0===e.data.code?(this.countdown--,this.sendCodeTimer=setInterval((()=>{this.countdown--,this.countdown<=0&&(this.countdown=60,clearInterval(this.sendCodeTimer))}),1e3)):a.Z.fail(e&&e.data?e.data.message:"error")},validateConfirmPsd(t){return t.trim()===this.password.trim()}}},_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modify-password-page"},[s("van-form",{ref:"formRef",attrs:{"label-width":"80px","validate-first":"","validate-trigger":"onSubmit"},on:{submit:t.handleSubmit}},[s("van-field",{staticClass:"account-action",attrs:{name:t.accountType,clearable:"",disabled:"origin_psd"!==t.accountType,label:t.accountDesc.label,placeholder:t.accountDesc.placeholder,rules:t.accountDesc.validate},model:{value:t.account,callback:function(e){t.account="string"==typeof e?e.trim():e},expression:"account"}}),"origin_psd"!==t.accountType?s("van-field",{staticClass:"content-gap",attrs:{name:"verifyCode",clearable:"",label:t.$t("mine.verifyCode"),placeholder:t.$t("subsidy.placeholder",{input:t.$t("mine.verifyCode")}),rules:t.validateCode},scopedSlots:t._u([{key:"extra",fn:function(){return[t.countdown>59||t.countdown<=0?s("van-button",{staticClass:"send-button",style:{color:t.primaryColor},attrs:{"native-type":"button",size:"mini",loading:t.sendloading},on:{click:t.handleSendCode}},[t._v(t._s(t.$t("mine.getverifyCode")))]):s("span",{style:{color:t.primaryColor}},[t._v(t._s(t.countdown)+" s")])]},proxy:!0}],null,!1,2594683064),model:{value:t.verifyCode,callback:function(e){t.verifyCode="string"==typeof e?e.trim():e},expression:"verifyCode"}}):t._e(),s("van-field",{attrs:{type:"password",clearable:"",name:"password",label:t.$t("mine.newPassword"),placeholder:t.$t("mine.newPasswordVd"),rules:t.validatePassword},model:{value:t.password,callback:function(e){t.password="string"==typeof e?e.trim():e},expression:"password"}}),s("van-field",{attrs:{type:"password",name:"confirmPassword",clearable:"",label:t.$t("mine.newPasswordConfirm"),placeholder:t.$t("mine.passwordConfirmTip"),rules:[{required:!0},{validator:t.validateConfirmPsd,message:t.$t("mine.inconsistent")}]},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword="string"==typeof e?e.trim():e},expression:"confirmPassword"}}),s("div",{staticClass:"confirm-button"},[s("van-button",{attrs:{block:"",loading:t.loading,color:t.primaryColor,"native-type":"submit"}},[t._v(" "+t._s(t.$t("common.confirm"))+" ")])],1)],1)],1)}),[],!1,null,"f039880e",null).exports},68584:(t,e,s)=>{s.d(e,{Z:()=>$});var a=s(95082),i=(s(31146),s(41610)),n=(s(34837),s(39146)),o=(s(47601),s(44951)),r=(s(20581),s(50914)),l=(s(71322),s(85471)),c=(s(53743),s(59978)),d=(s(629),s(67763)),u=(s(52355),s(29233)),m=(s(70885),s(6458)),h=(s(18144),s(65641)),p=(s(57658),s(26699),s(32023),s(26294)),g=s(78551),v=s(4374),_=s(55595),f=s(49017),y=s(95969),C=s(22648),b={name:"MicroOwnList",components:{SvgIcon:g.Z,[h.Z.name]:h.Z,[m.Z.name]:m.Z,[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.Component.name]:i.Z.Component},filters:{datetime(t){const e=new Date(t);return(0,C.p6)(e,"yyyy.MM.dd hh:mm")}},props:{micro:{type:Array,default:()=>[]}},data:()=>({isLoading:!1,failStyle:{backgroundColor:"rgba(255, 77, 79, 0.15)",color:"#FF4D4F"}}),computed:(0,a.Z)({},(0,p.mapGetters)({access_token:"getToken",language:"language",primaryColor:"getPrimaryColor"})),methods:{showStatusCount(t){let e=this.getStatusItem(t);return e.value===(0,f.KN)().MICRO_QUEUE&&e.mq_count},showCreateTime(t){return this.getStatusItem(t).value===(0,f.KN)().MICRO_PUBLISHED.value},displayStatus(t){return this.getStatusItem(t).lang},displayOption(t){let e=this.getStatusItem(t);return e.value!==(0,f.xf)().MICRO_AUDIT.value&&e.value!==(0,f.xf)().MICRO_PUBLISHING.value&&e.value!==(0,f.KN)().MICRO_QUEUE.value},getStatusItem:t=>(0,f.J5)("true"===t.is_ai_course,"true"===t.is_ai_course?t.ai_status:t.status),getStatusStyle(t){let e=this.getStatusItem(t);if(e.value===(0,f.xf)().MICRO_PUBLISH_FAILED.value||e.value===(0,f.xf)().MICRO_AUDIT_FAILED.value||e.value===(0,f.KN)().MICRO_GENERATED_FAILED.value)return this.failStyle},operateMicro(t,{id:e,resource_type:s,is_ai_course:a}){switch(t.text){case this.$t("micro.edit"):this.editMicro(e,s,"true"===a);break;case this.$t("micro.delete"):this.showConfirmDialog(this.$t("micro.confirmDelete"),(()=>this.deleteMicro(e)));break;case this.$t("micro.revocation"):this.showConfirmDialog(this.$t("micro.confirmRevocation"),(()=>this.revocationMicro(e,"stop")));break;case this.$t("micro.retry"):this.revocationMicro(e,"retry");break;case this.$t("micro.release"):this.releaseMicro(e,"release",s,"true"===a);break;case this.$t("micro.unRelease"):this.showConfirmDialog(this.$t("micro.confirmUnRelease"),(()=>this.releaseMicro(e,"draft",s,"true"===a)))}},editMicro(t,e,s=!1){s?this.$router.push({name:"AICoverInfo",params:{id:t}}):this.$router.push({path:"/micro-create",query:{status:"edit",origin:"myMicroCourse",id:t,type:"image"===e?"voice":e}})},releaseMicro(t,e,s,a){"release"===e?_.Z.needApprovalCheck().then((({data:i})=>{0===i.code&&(i.data.state?this.editMicro(t,s,a):this.updateMicroCourses(t,e))})):this.updateMicroCourses(t,e)},updateMicroCourses(t,e){_.Z.updateMicroCourses([{course_id:t}],e).then((({data:t})=>{"true"===t.updated&&((0,n.Z)({message:"release"===e?this.$t("micro.releaseSuccessful"):this.$t("micro.unReleaseSuccessful"),position:"top"}),this.$emit("refresh"))}))},deleteMicro(t){_.Z.deleteMicroCourses([{course_id:t}]).then((t=>{"true"===t.data.deleted?((0,n.Z)({message:this.$t("micro.deleteSuccessful"),position:"top"}),this.$emit("refresh")):(0,n.Z)({message:v.Z[t.code].content[this.language],position:"top"})}))},revocationMicro(t,e){_.Z.operateAiCourse({courseId:t,type:e}).then((t=>{t.data.code===f.Y.success&&((0,n.Z)({message:this.$t("common.operateSuccess"),position:"top"}),this.$emit("refresh"))}))},jumpApproval(t){const e=this.getStatusItem(t).value;[(0,f.xf)().MICRO_AUDIT.value,(0,f.xf)().MICRO_AUDIT_FAILED.value].includes(e)?t.platform_instance_id?this.$router.push({path:"/approved-process",query:{instanceId:t.platform_instance_id,approvalType:"me"}}):this.$router.push({path:y.Z.resource.operationResult({courseId:t.id,pageFrom:"microcourseList"})}):[(0,f.xf)().MICRO_PUBLISH_FAILED.value,(0,f.xf)().MICRO_UNPUBLISHED.value,(0,f.KN)().MICRO_GENERATED_FAILED.value].includes(e)?this.editMicro(t.id,t.resource_type,"true"===t.is_ai_course):e===(0,f.xf)().MICRO_PUBLISHED.value&&this.goToMicroDetail(t.id)},showConfirmDialog(t,e){i.Z.confirm({title:t}).then((()=>{e()})).catch((()=>{}))},goToMicroDetail(t){this.$router.push(`/micro-watch/${t}/newest?access_token=${this.access_token}&studyType=my_course`)}}},$=(0,s(1001).Z)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"micro-own-list"},t._l(t.micro,(function(e,a){return s("van-cell",{key:e.id,staticClass:"micro-own-list-item",on:{click:function(s){return t.jumpApproval(e)}}},[s("van-row",{staticClass:"course-row",attrs:{type:"flex",justify:"space-around"}},[s("van-col",{attrs:{span:"8"}},[s("van-image",{staticClass:"thumbnail",attrs:{src:e.cover,width:"100%",fit:"cover"}})],1),"true"===e.is_ai_course?s("van-col",{staticClass:"row-left-cover",attrs:{span:"8"}},[s("div",{staticClass:"image-tag-box"},[s("span",{staticClass:"image-tag"},[t._v(t._s(t.$t("micro.AIMicroCourse")))])])]):t._e(),s("van-col",{staticClass:"row-right",attrs:{span:"16"}},[s("div",{staticClass:"row-right-top"},[s("p",{staticClass:"title"},[t._v(t._s(e.title))]),s("p",{staticClass:"classify"},[t._v("#"+t._s(e.course_classify_name))]),s("p",{staticClass:"updateTime"},[t._v(t._s(t.displayStatus(e)?"":e.update_time))]),t.showCreateTime(e)?s("p",{staticClass:"createtime"},[t._v(t._s(t._f("datetime")(e.create_time)))]):s("p",{staticClass:"status"},[s("span",{staticClass:"status-tag",style:t.getStatusStyle(e)},[s("span",[t._v(t._s(t.displayStatus(e)))]),t._v(" "),t.showStatusCount(e)?s("span",[t._v("("+t._s(e.mq_count)+")")]):t._e()])])]),s("van-grid",{staticStyle:{bottom:"4px"},attrs:{direction:"horizontal","column-num":3,border:!1,center:!1}},[s("van-grid-item",[s("svg-icon",{attrs:{size:15,"icon-class":"icon-pinglun",color:"#C0C2CB"}}),s("span",[t._v(t._s(e.comment_count))])],1),s("van-grid-item",[s("svg-icon",{attrs:{size:15,"icon-class":"icon-zan2",color:"#C0C2CB"}}),s("span",[t._v(t._s(e.like_count))])],1),t.displayOption(e)?s("van-grid-item",{staticClass:"opreate",on:{click:function(t){t.stopPropagation()}}},[s("van-popover",{attrs:{trigger:"click",actions:t.getStatusItem(e).actions,placement:a>0?"top":"bottom"},on:{select:function(s){return t.operateMicro(s,e)}},scopedSlots:t._u([{key:"reference",fn:function(){return[s("svg-icon",{attrs:{size:16,"icon-class":"icon-more",color:"#C0C2CB"}})]},proxy:!0}],null,!0),model:{value:e.showPopover,callback:function(s){t.$set(e,"showPopover",s)},expression:"item.showPopover"}})],1):t._e()],1)],1)],1)],1)})),1)}),[],!1,null,"4490cddc",null).exports},82524:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});s(20581);var a=s(50914),i=(s(58052),s(68286)),n=(s(49153),s(5944)),o=(s(33948),s(55595)),r=s(22648),l=s(68584),c=s(65859),d={name:"MyMicroCourse",components:{[n.Z.name]:n.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z,MicroList:l.Z},data:()=>({params:{status:"DRAFT",page_number:1,page_size:10},microList:[],loading:!1,finished:!1,refreshing:!1,noDataUrl:c}),mounted(){this.getMicroList()},methods:{async getMicroList(t=!0){this.finished=!1,this.loading=!0;const e=await o.Z.getMicroCourses(this.params);e.data.list.forEach((t=>{t.showPopover=!1,t.newStatus=t.is_ai_course?t.ai_status:t.status,t.update_time=(0,r.p6)(t.update_time,"yyyy-MM-dd hh:mm")})),this.microList=t?[...e.data.list]:[...this.microList,...e.data.list],this.loading=!1,this.finished="false"===e.data.has_next_page},resetList(){this.params.page_number=1,this.getMicroList()},onLoad(){this.refreshing?(this.refreshing=!1,this.resetList()):(this.params.page_number+=1,this.getMicroList(!1))},onRefresh(){setTimeout((()=>{this.onLoad()}),100)}}},u=(0,s(1001).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"micro-course-draft-wrap"},[t.microList.length>0||t.loading?s("div",{staticClass:"micro-course-list-container"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{"immediate-check":!1,finished:t.finished,"finished-text":t.$t("micro.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("micro-list",{attrs:{micro:t.microList},on:{refresh:t.resetList}})],1)],1)],1):s("div",{staticClass:"micro-course-empty"},[s("van-empty",{attrs:{image:t.noDataUrl,description:t.$t("common.noDataTextTip")}},[s("span",{staticClass:"tip"},[t._v(t._s(t.$t("micro.draftsEmptyTip")))])])],1)])}),[],!1,null,"a9de82ea",null).exports},3:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});s(20581);var a=s(50914),i=(s(58052),s(68286)),n=(s(49153),s(5944)),o=(s(39610),s(2163)),r=(s(86039),s(20495)),l=(s(33948),s(57658),s(78551)),c=s(42765),d=s(55595),u=s(22648),m=s(68584),h=s(15123),p={name:"MyMicroCourse",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z,SvgIcon:l.Z,MicroEnter:c.Z,MicroList:m.Z},beforeRouteLeave(t,e,s){"AIContentInfo"!==t.name&&"AICoursePreview"!==t.name?s():(0,h.Bv)("/micro")},data:()=>({params:{status:"NOT_DRAFT",keyword:"",page_number:1,page_size:10},microList:[],loading:!1,finished:!1,refreshing:!1,tipText:""}),mounted(){this.getMicroList(),this.getFailCourseCount()},methods:{async getMicroList(t=!0){this.finished=!1,this.loading=!0;const{getMicroCourses:e}=d.Z,s=await e(this.params);s.data.list.forEach((t=>{t.showPopover=!1,t.newStatus=t.is_ai_course?t.ai_status:t.status,t.update_time=(0,u.p6)(t.update_time,"yyyy-MM-dd hh:mm")})),this.microList=t?[...s.data.list]:[...this.microList,...s.data.list],this.loading=!1,this.finished="false"===s.data.has_next_page},getFailCourseCount(){d.Z.checkMicroCourseFail().then((t=>{this.tipText=t.data.data||""}))},onInput(t){""===t&&this.resetList()},toDraftsPage(t){"tip"===t&&(this.tipText=""),this.$router.push({path:"/mine/myself-micro-course/drafts"})},resetList(){this.params.page_number=1,this.getMicroList()},onLoad(){this.refreshing?(this.refreshing=!1,this.resetList()):(this.params.page_number+=1,this.getMicroList(!1))},onRefresh(){setTimeout((()=>{this.onLoad()}),100)}}},g=(0,s(1001).Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"micro-course-wrap cl-page-container"},[s("van-sticky",[s("div",{staticClass:"micro-course-top"},[s("van-search",{staticClass:"micro-course-search",attrs:{placeholder:t.$t("micro.pleaseEnterMicro")},on:{clear:t.resetList,search:t.resetList,input:t.onInput},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}}),s("div",{staticClass:"micro-course-top-btn",on:{click:t.toDraftsPage}},[s("span",{staticClass:"btn-icon"},[s("svg-icon",{attrs:{"icon-class":"icon-caogao",size:16,color:"#2D3040"}})],1),s("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("micro.drafts")))])])],1),t.tipText?s("div",{staticClass:"micro-course-tip",on:{click:function(e){return t.toDraftsPage("tip")}}},[s("span",{staticClass:"tip-content"},[t._v(t._s(t.tipText))]),s("span",{staticClass:"tip-icon"},[s("svg-icon",{attrs:{"icon-class":"icon-right",size:16,color:"#ED6A0C"}})],1)]):t._e()]),t.microList.length>0||t.loading?s("div",{staticClass:"micro-course-list-container"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{"immediate-check":!1,finished:t.finished,"finished-text":t.$t("micro.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("micro-list",{attrs:{micro:t.microList},on:{refresh:t.resetList}})],1)],1)],1):s("div",{staticClass:"micro-course-empty"},[s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}})],1),s("micro-enter",{on:{click:function(t){t.stopPropagation()}}})],1)}),[],!1,null,"c3b29e84",null).exports},47319:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});s(47601);var a=s(44951),i=(s(47238),s(75167)),n=(s(82522),s(10342)),o=(s(82500),s(49414)),r=(s(58052),s(68286)),l=(s(52355),s(29233)),c=(s(20581),s(50914)),d=(s(69710),s(57609)),u=(s(86039),s(20495)),m=s(28387),h=s(52196),p={name:"DocPreview",components:{[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z},data:()=>({params:{keyword:"",status:"",page_size:20,page_number:1},activeTab:"unfinished",studyList:[],loading:!1,finished:!1,refreshing:!1}),computed:{themeColor(){return this.$store.state.themeColor.primaryColor}},mounted(){this.onSearch()},methods:{selectStudyType(){this.onSearch()},onSearch(t){this.refreshing&&(this.studyList=[],this.refreshing=!1),this.loading=!0,this.params.status=this.activeTab,m.Z.getMyselfStudyList(this.params).then((e=>{this.loading=!1,e.data.list.length<this.params.page_size&&(this.finished=!0),this.studyList="add"===t?this.studyList.concat(e.data.list):[].concat(e.data.list)}))},onRefresh(){this.finished=!1,this.loading=!0,this.params.page_number=1,this.onSearch()},onload(){this.params.page_number++,this.onSearch("add")},linkToDetail(t){t.courseType="course",2===t.biz_type?t.courseType="micro_course":0===t.biz_type||1===t.biz_type?t.courseSource="enterprise":(8===t.biz_type||9===t.biz_type)&&(t.courseType="course"),(0,h.f2)({courseData:t})}}},g=(0,s(1001).Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"study-wrap cl-page-container"},[s("van-search",{staticClass:"study-search",attrs:{placeholder:t.$t("knowledge.searchPlaceholder")},on:{search:t.onSearch},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}}),s("div",{staticClass:"study-content"},[s("van-tabs",{attrs:{color:t.themeColor},on:{click:t.selectStudyType},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[s("van-tab",{attrs:{title:t.$t("common.unfinished"),name:"unfinished"}}),s("van-tab",{attrs:{title:t.$t("common.finished"),name:"finished"}})],1),s("van-divider"),s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{offset:50,"immediate-check":!1,finished:t.finished,"finished-text":t.$t("common.noMore")},on:{load:t.onload},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.studyList,(function(e){return s("van-cell",{key:e.id,staticClass:"study-list-wrap",on:{click:function(s){return t.linkToDetail(e)}}},[s("van-image",{staticClass:"cover",attrs:{src:e.cover}}),s("div",{staticClass:"right-content"},[s("p",{staticClass:"title"},[t._v(t._s(e.title))]),s("p",{staticClass:"content"},[s("van-progress",{staticClass:"process",attrs:{"show-pivot":!1,percentage:+e.process,"stroke-width":"4",color:t.themeColor}}),s("span",{staticClass:"text",style:{color:t.themeColor}},[t._v(t._s(e.process)+"%")])],1)])],1)})),1)],1)],1)],1)}),[],!1,null,"664d3a72",null).exports},68532:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});var a=s(95082),i=s(17563),n=s(26294),o=s(27632),r={name:"OnlineService",data:()=>({src:""}),computed:(0,a.Z)({},(0,n.mapGetters)({userInfo:"user/getUserInfo"})),mounted(){const{appType:t}=this.userInfo;let e=4;switch(t){case"e_app":e=1;break;case"wx_app":e=2;break;case"fs_app":e=3}let s=4;switch(o.Z.env){case"app":s=2;break;case"wechat_qy":s=9;break;default:s=4}const a={uname:this.userInfo.name,realname:`${this.userInfo.enterpriseName}--${this.userInfo.name}`,face:this.userInfo.avatar,title_flag:this.userInfo.enterpriseName,is_vip:this.userInfo.isVip,source:s,color:this.$store.state.themeColor.primaryColor.split("#")[1],robotid:e};this.src=`https://kuxueyuan.sobot.com/chat/h5/v2/index.html?sysnum=98a88d91298542da9ca5a7c2a2bc89ba&${i.stringify(a)}`}},l=(0,s(1001).Z)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("iframe",{attrs:{src:t.src,frameborder:"no",border:"0",marginWidth:"0",marginHeight:"0"}})}),[],!1,null,"6b9c3939",null).exports},20283:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});s(47601);var a=s(44951),i=(s(47238),s(75167)),n=(s(82522),s(10342)),o=(s(82500),s(49414)),r=(s(58052),s(68286)),l=(s(52355),s(29233)),c=(s(20581),s(50914)),d=(s(69710),s(57609)),u=(s(86039),s(20495)),m=s(28387),h=s(52196),p={name:"DocPreview",components:{[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z},data:()=>({params:{keyword:"",page_size:20,page_number:1},purchasedCourses:[],loading:!1,finished:!1,refreshing:!1}),computed:{themeColor(){return this.$store.state.themeColor.primaryColor}},mounted(){this.onSearch()},methods:{selectStudyType(){this.onSearch()},onSearch(t){this.refreshing&&(this.purchasedCourses=[],this.refreshing=!1),this.loading=!0,m.Z.getCoursesList(this.params).then((e=>{this.loading=!1,e.data.list.length<this.params.page_size&&(this.finished=!0),this.purchasedCourses="add"===t?this.purchasedCourses.concat(e.data.list):[].concat(e.data.list)}))},onRefresh(){this.finished=!1,this.loading=!0,this.params.page_number=1,this.onSearch()},onload(){this.params.page_number++,this.onSearch("add")},linkToDetail(t){t.courseType="course",2===t.biz_type?t.courseType="micro_course":0!==t.biz_type&&1!==t.biz_type||(t.courseSource="enterprise"),(0,h.f2)({courseData:t})}}},g=(0,s(1001).Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"purchased-wrap  cl-page-container"},[s("van-search",{staticClass:"purchased-search",attrs:{placeholder:t.$t("knowledge.searchPlaceholder")},on:{search:t.onSearch},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}}),s("div",{staticClass:"purchased-content"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{staticClass:"purchased-list",attrs:{offset:50,"immediate-check":!1,finished:t.finished,"finished-text":t.$t("common.noMore")},on:{load:t.onload},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.purchasedCourses,(function(e){return s("van-cell",{key:e.id,staticClass:"purchased-list-cell",on:{click:function(s){return t.linkToDetail(e)}}},[s("van-image",{staticClass:"cover",style:{width:"100%"},attrs:{src:e.cover,height:95}}),s("div",{staticClass:"bottom-content"},[s("p",{staticClass:"title"},[t._v(t._s(e.good_name))])])],1)})),1)],1)],1)],1)}),[],!1,null,"e6dbc39a",null).exports},10253:(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});s(57658);var a={name:"QuickTour",components:{SvgIcon:s(78551).Z},data(){return{columnList:[{name:this.$t("guideBanner.onlineNotice"),key:"notice"},{name:this.$t("guideBanner.newEmployee"),key:"new_employee_task"},{name:this.$t("guideBanner.questionPractice"),key:"exercises_question_bank"},{name:this.$t("guideBanner.carryingSystem"),key:"student_management"},{name:this.$t("guideBanner.StudyExaminationIntegration"),key:"learning_task_management"},{name:this.$t("guideBanner.onlineExamination"),key:"exam_tasks"},{name:this.$t("guideBanner.employeeMotivation"),key:"integral_management"},{name:this.$t("guideBanner.coursewareMicrolecture"),key:"material"}]}},methods:{linkTo(t){this.$router.push({path:"/quick-tour-detail",query:{quickKey:t}})}}},i=(0,s(1001).Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quick-tour"},t._l(t.columnList,(function(e){return s("div",{key:e.key,staticClass:"quick-tour-column-item",on:{click:function(s){return t.linkTo(e.key)}}},[s("div",{staticClass:"column-item-text"},[t._v(" "+t._s(e.name)+" ")]),s("svg-icon",{attrs:{"icon-class":"icon-arrow-r",size:10,color:"#B0B4C8"}})],1)})),0)}),[],!1,null,"4b86b70c",null).exports},78790:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});s(34837);var a=s(39146),i=(s(47601),s(44951)),n=s(28387),o={name:"TestCase",components:{[i.Z.name]:i.Z},data(){return{nameParam:{notice:this.$t("guideBanner.announcement"),new_employee_task:this.$t("guideBanner.newEmployeeTasks"),exercises_question_bank:this.$t("guideBanner.questionPractice"),student_management:this.$t("guideBanner.studentManagement"),learning_task_management:this.$t("guideBanner.learningAssignment"),exam_tasks:this.$t("data.examTasks"),integral_management:this.$t("guideBanner.pointsSettings"),material:this.$t("guideBanner.material")},realName:"",paramKey:""}},mounted(){const{quickKey:t}=this.$route.query;this.paramKey=t,this.realName=this.nameParam[t]},methods:{sendWorkNotice(){n.Z.sendMsgByPc(this.paramKey).then((()=>{a.Z.success(this.$t("promptMessage.sendSuccessfully"))})).catch((()=>{}))}}},r=(0,s(1001).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"test-case-quick-tour"},[s("van-image",{staticClass:"test-case-quick-tour-img",attrs:{src:"https://oss.coolcollege.cn/1800279094823358464.png"}}),s("div",{staticClass:"normal-name"},[t._v(t._s(t.$t("guideBanner.testCase1")))]),s("div",{staticClass:"normal-name"},[t._v(t._s(t.$t("guideBanner.testCase2")))]),s("div",{staticClass:"normal-name"},[t._v(t._s(t.$t("guideBanner.testCase3"))),s("span",{staticClass:"real-name"},[t._v(t._s(t.realName))]),t._v(t._s(t.$t("guideBanner.testCase4")))]),s("div",{staticClass:"test-case-quick-tour-footer",on:{click:t.sendWorkNotice}},[s("div",{staticClass:"test-case-quick-tour-footer-btn"},[t._v(t._s(t.$t("guideBanner.testCase5")))])])],1)}),[],!1,null,"efb7c0ca",null).exports},89370:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});s(47601);var a=s(44951),i=(s(57658),s(27632)),n=s(28387),o={name:"QuickTourDetail",components:{[a.Z.name]:a.Z},data(){return{imgSrc:{notice:{url:"https://gsdn.coolcollege.cn/assets/kuxueyuan/mobile/guide/certification.png",name:this.$t("guideBanner.onlineNotice")},new_employee_task:{url:"https://gsdn.coolcollege.cn/assets/kuxueyuan/mobile/guide/employee_management.png",name:this.$t("guideBanner.newEmployee")},exercises_question_bank:{url:"https://gsdn.coolcollege.cn/assets/kuxueyuan/mobile/guide/practice.png",name:this.$t("guideBanner.questionPractice")},student_management:{url:"https://gsdn.coolcollege.cn/assets/kuxueyuan/mobile/guide/user_management.png",name:this.$t("guideBanner.carryingSystem")},learning_task_management:{url:"https://gsdn.coolcollege.cn/assets/kuxueyuan/mobile/guide/study_management.png",name:this.$t("guideBanner.StudyExaminationIntegration")},exam_tasks:{url:"https://gsdn.coolcollege.cn/assets/kuxueyuan/mobile/guide/exam_management.png",name:this.$t("guideBanner.onlineExamination")},integral_management:{url:"https://gsdn.coolcollege.cn/assets/kuxueyuan/mobile/guide/points.png",name:this.$t("guideBanner.employeeMotivation")},material:{url:"https://gsdn.coolcollege.cn/assets/kuxueyuan/mobile/guide/resources.png",name:this.$t("guideBanner.coursewareMicrolecture")}},groupUrl:"",realImgSrc:""}},mounted(){const{quickKey:t}=this.$route.query;document.title=this.imgSrc[t].name,this.realImgSrc=this.imgSrc[t].url,this.getGroupUrl()},methods:{getGroupUrl(){n.Z.getGroupUrl().then((t=>{const{url:e}=t.data;this.groupUrl=e}))},contactStudyCounselor(){i.Z.openLink({url:this.groupUrl})},tryToPc(){const{quickKey:t}=this.$route.query;this.$router.push({path:"/test-case",query:{quickKey:t}})}}},r=(0,s(1001).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quick-tour-detail"},[s("div",{staticClass:"quick-tour-detail-scroll"},[s("van-image",{staticClass:"quick-tour-detail-scroll-img",attrs:{src:t.realImgSrc}})],1),s("div",{staticClass:"quick-tour-detail-footer"},[s("div",{staticClass:"quick-tour-detail-footer-btn active-btn",on:{click:t.contactStudyCounselor}},[s("span",{staticClass:"init-course-btn-text"},[t._v(t._s(t.$t("guideBanner.contactLearningAdvisor")))])]),s("div",{staticClass:"quick-tour-detail-footer-btn",on:{click:t.tryToPc}},[s("span",{staticClass:"init-course-btn-text"},[t._v(t._s(t.$t("guideBanner.goPCTry")))])])])])}),[],!1,null,"1ce707a2",null).exports},30034:(t,e,s)=>{s.d(e,{Z:()=>n});var a=s(22648),i={name:"",components:{},filters:{formatDate:function(t){return(0,a.p6)(t,"yyyy-MM-dd  hh:mm")}},props:{goodsInfo:{type:Object,default:()=>({})}},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{}},n=(0,s(1001).Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods-card",on:{click:function(e){return t.$emit("onLinkTo")}}},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.goodsInfo.image||"https://oss.coolcollege.cn/1790752251254542336.png",alt:""}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"name"},[t._v(t._s(t.goodsInfo.good_name))]),s("div",{staticClass:"time"},[s("span",[t._v(t._s(t.$t("pointsMall.orderTime"))+" ")]),s("span",[t._v(t._s(t._f("formatDate")(t.goodsInfo.order_time)))])]),s("div",{staticClass:"prise"},[s("div",{staticClass:"col"},[s("span",{staticClass:"unit"},[t._v(t._s(t.$t("pointsMall.consume"))+" ")]),s("span",{staticClass:"num"},[t._v(t._s(t.goodsInfo.score))])]),s("div",{staticClass:"col"},[s("div",{staticClass:"number"},[t._v("X"+t._s(t.goodsInfo.exchange_num||1))])])])])]),t._t("bottom")],2)}),[],!1,null,"47f12014",null).exports},52830:(t,e,s)=>{s.d(e,{Z:()=>_});s(31146);var a=s(41610),i=(s(49902),s(62094)),n=(s(21920),s(58280)),o=(s(5289),s(26946)),r=(s(56629),s(55165)),l=(s(25773),s(35791)),c=(s(29941),s(64168)),d=(s(93787),s(20090)),u=(s(77141),s(30960)),m=(s(73474),s(74755)),h=(s(57658),s(62712)),p=s(28387),g=s(30034),v={name:"OrderPopup",components:{[m.Z.name]:m.Z,[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,GoodCard:g.Z},props:{visible:{type:Boolean,default:!1},detail:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!1}},data:()=>({receive_person:"",receive_phone:"",receive_addressDetails:"",exchange_num:1,deliver_method:0,loading:!1,container:null,good_deliver_method:0}),computed:{show:{get(){return this.visible},set(t){this.$emit("update:visible",t)}},maxExchangeNum(){const{my_remain_score:t,score:e,inventory:s}=this.detail;return s<Math.floor(t/e)?s:Math.floor(t/e)}},watch:{},created(){},mounted(){this.container=this.$refs.orderDetail,this.methodsGoodsAndOrder()},methods:{methodsGoodsAndOrder(){const{deliver_method:t=0,good_deliver_method:e=0}=this.detail;this.deliver_method=2===t?0:t,this.getAddress(),this.good_deliver_method=this.isEdit?e:t,this.isEdit&&2!==this.good_deliver_method&&this.good_deliver_method!==this.deliver_method&&(this.deliver_method=this.good_deliver_method)},async getAddress(){if(0===this.detail.deliver_method)return;if(this.isEdit){const{receive_addressDetails:t,receive_person:e,receive_phone:s}=this.detail;return this.receive_addressDetails=t,this.receive_person=e,void(this.receive_phone=s)}const{data:t={}}=await p.Z.getAddressDetail(),{receive_addressDetails:e,receive_person:s,receive_phone:a}=t;this.receive_addressDetails=e,this.receive_person=s,this.receive_phone=a},async onSubmit(t){if(this.loading=!0,this.isEdit)try{await h.Z.updateOrderInfo(this.detail.id,{receive_person:0===this.deliver_method?"":this.receive_person,receive_addressDetails:0===this.deliver_method?"":this.receive_addressDetails,receive_phone:0===this.deliver_method?"":this.receive_phone,deliver_method:this.deliver_method}),this.loading=!1,this.handlePopup(),this.$emit("refresh")}catch(t){this.loading=!1,this.$toast.fail(this.$t("common.operateErrorWithRepeat"))}else a.Z.confirm({message:this.$t("minePoints.isContinue")}).then((async()=>{try{const{data:e}=await p.Z.exGoodsById(this.detail.id,t);this.$router.push({path:"/points-mall/order-detail",query:{id:e.id}})}catch(t){this.loading=!1;const{data:e}=t;if("enterpriseapi.560011"===e.code)return void this.$toast.fail(this.$t("pointsMall.productDownTip"));if("enterpriseapi.560009"===e.code)return void this.$toast.fail(this.$t("pointsMall.inventoryNotEnoughTip"));this.$toast.fail(this.$t("pointsMall.createOrderError"))}}));this.loading=!1},handlePopup(){this.$emit("update:visible",!1)}}},_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-popup",{staticClass:"order-pop",attrs:{round:"",closeable:"","close-on-click-overlay":!1,position:"bottom"},on:{closed:t.handlePopup},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"order-detail"},[s("div",{staticClass:"title"},[t._v(t._s(t.isEdit?t.$t("pointsMall.editOrder"):t.$t("minePoints.conformOrder")))]),s("div",[s("div",{staticClass:"top-wrap"},[t.isEdit?s("GoodCard",{attrs:{"goods-info":t.detail},on:{onLinkTo:function(){}}}):s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.detail.image||"https://oss.coolcollege.cn/1790752251254542336.png",alt:""}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"prise"},[s("div",{staticClass:"num"},[t._v(t._s(t.detail.score))]),s("div",{staticClass:"unit"},[t._v(t._s(t.$t("pointsMall.points")))])]),s("div",{staticClass:"name"},[t._v(t._s(t.detail.name))])])])],1)]),s("div",{staticClass:"divider-line"}),s("van-form",{ref:"formRef",on:{submit:t.onSubmit}},[s("van-cell-group",{attrs:{border:!1}},[t.isEdit?t._e():s("van-field",{attrs:{name:"exchange_num",label:t.$t("pointsMall.exchangeNum")},scopedSlots:t._u([{key:"input",fn:function(){return[s("van-stepper",{attrs:{disabled:!t.detail.repeat_exchange,max:t.maxExchangeNum},model:{value:t.exchange_num,callback:function(e){t.exchange_num=e},expression:"exchange_num"}})]},proxy:!0}],null,!1,2659214219)}),s("van-field",{attrs:{name:"deliver_method",label:t.$t("minePoints.receivingMethod")},scopedSlots:t._u([{key:"input",fn:function(){return[s("van-radio-group",{staticClass:"receive-type",attrs:{direction:"horizontal"},model:{value:t.deliver_method,callback:function(e){t.deliver_method=e},expression:"deliver_method"}},[1!==t.good_deliver_method?s("van-radio",{attrs:{name:0},scopedSlots:t._u([{key:"icon",fn:function(e){return[s("span",{class:e.checked?"check-radio":"radio"},[t._v(t._s(t.$t("pointsMall.pickup")))])]}}],null,!1,4023260237)}):t._e(),0!==t.good_deliver_method?s("van-radio",{attrs:{name:1},scopedSlots:t._u([{key:"icon",fn:function(e){return[s("span",{class:e.checked?"check-radio":"radio"},[t._v(t._s(t.$t("pointsMall.mail")))])]}}],null,!1,3822686864)}):t._e()],1)]},proxy:!0}])}),1===t.deliver_method?[s("van-field",{attrs:{name:"receive_person",required:"",maxlength:"30",label:t.$t("minePoints.receiveInfoPerson"),placeholder:t.$t("minePoints.pleaseInpPerson"),rules:[{required:!0}]},model:{value:t.receive_person,callback:function(e){t.receive_person="string"==typeof e?e.trim():e},expression:"receive_person"}}),s("van-field",{attrs:{name:"receive_phone",required:"",maxlength:"20",type:"number",label:t.$t("minePoints.receiveInfoPhone"),placeholder:t.$t("minePoints.pleaseInpPhone"),rules:[{required:!0}]},model:{value:t.receive_phone,callback:function(e){t.receive_phone=e},expression:"receive_phone"}}),s("van-field",{attrs:{name:"receive_addressDetails",rows:"4",autosize:"",required:"",maxlength:"100",type:"textarea",label:t.$t("minePoints.receiveInfoAddress"),placeholder:t.$t("common.input",{name:t.$t("minePoints.receiveInfoAddress")}),rules:[{required:!0}]},model:{value:t.receive_addressDetails,callback:function(e){t.receive_addressDetails="string"==typeof e?e.trim():e},expression:"receive_addressDetails"}})]:[s("div",{staticClass:"deliver-info"},[s("div",{staticClass:"deliver-info-item"},[s("span",{staticClass:"lable"},[t._v(t._s(t.$t("pointsMall.publisher")))]),s("span",[t._v("：")]),s("span",{staticClass:"value"},[t._v(t._s(t.detail.deliver_user_name))])]),s("div",{staticClass:"deliver-info-item"},[s("span",{staticClass:"lable"},[t._v(t._s(t.$t("minePoints.contact")))]),s("span",[t._v("：")]),s("span",{staticClass:"value"},[s("span",{staticClass:"phone"},[t._v(t._s(t.detail.deliver_user_contact))])])]),s("div",{staticClass:"deliver-info-item"},[s("span",{staticClass:"lable"},[t._v(t._s(t.$t("minePoints.receiveAddress")))]),s("span",[t._v("：")]),s("span",{staticClass:"value"},[t._v(t._s(t.detail.receive_address))])])])]],2),s("div",{staticClass:"confirm-order-btn"},[s("van-button",{attrs:{loading:t.loading,type:"primary","native-type":"submit"}},[t._v(" "+t._s(t.$t("minePoints.conformOrder"))+" ")])],1)],1)],1)])}),[],!1,null,"258e296f",null).exports},70826:(t,e,s)=>{s.r(e),s.d(e,{default:()=>b});s(34837);var a=s(39146),i=s(95082),n=(s(82522),s(10342)),o=(s(82500),s(49414)),r=(s(33948),s(57658),s(26294)),l=s(98512),c=s(62712),d=s(16701),u=(s(25773),s(35791)),m=(s(20581),s(50914)),h=s(30034),p={name:"",components:{Button:u.Z},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{handleToList(){this.$router.push({path:"/points-mall"})}}},g=s(1001),v=(0,g.Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mall-empty"},[s("img",{attrs:{src:"https://oss.coolcollege.cn/1826935526276599808.png",alt:""}}),s("p",[t._v(t._s(t.$t("common.noDataTextTip")))]),s("p",[t._v(t._s(t.$t("pointsMall.exchangeTip")))]),s("Button",{on:{click:t.handleToList}},[t._v(t._s(t.$t("pointsMall.toExchange")))])],1)}),[],!1,null,"1310e656",null).exports,_=s(52830),f={name:"ExchangeRecordCom",components:{[m.Z.name]:m.Z,[u.Z.name]:u.Z,GoodCard:h.Z,Empty:v,OrderPopup:_.Z},props:{dataList:{type:Array,default:()=>[]},type:{type:String,default:""},finished:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},data:()=>({loadingReal:!1,orderPopVisible:!1,editItem:{}}),watch:{orderPopVisible(t){t||(this.editItem={})},loading(t){this.loadingReal=t}},methods:{handleEdit(t,e){t.stopPropagation(),this.orderPopVisible=!0,this.editItem=e},loadFun(){this.$emit("onload")}}},y=(0,g.Z)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"exchange-record-com-container"},[t.dataList.length>0?s("van-list",{attrs:{finished:t.finished,"finished-text":t.$t("common.listNoData")},on:{load:t.loadFun},model:{value:t.loadingReal,callback:function(e){t.loadingReal=e},expression:"loadingReal"}},[t._l(t.dataList,(function(e){return s("div",{key:e.id,staticClass:"goods-item"},[s("GoodCard",{attrs:{"goods-info":e,type:t.type},on:{onLinkTo:function(s){return t.$emit("onLinkTo",e)}},scopedSlots:t._u([{key:"bottom",fn:function(){return[s("div",{staticClass:"desc"},[2===e.grant_status?s("p",{staticClass:"reason"},[t._v(t._s(t.$t("pointsMall.cancelReason"))+"："+t._s(e.refuse_reason||t.$t("common.no")))]):t._e(),0===e.grant_status?s("van-button",{on:{click:function(s){return t.handleEdit(s,e)}}},[t._v(t._s(t.$t("pointsMall.editOrder")))]):t._e()],1)]},proxy:!0}],null,!0)})],1)})),t.orderPopVisible?s("OrderPopup",{attrs:{detail:t.editItem,visible:t.orderPopVisible,"is-edit":""},on:{"update:visible":function(e){t.orderPopVisible=e},refresh:function(e){return t.$emit("onRefresh")}}}):t._e()],2):s("Empty")],1)}),[],!1,null,"0174a8d1",null).exports,C={name:"ExchangeRecord",components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z,ExchangeRecordCom:y,HomeLink:d.Z},data:()=>({activeTabIndex:0,pageSize:15,unreceivedPageNumber:1,receivedPageNumber:1,rejectPageNumber:1,unreceivedList:[],receivedList:[],rejectList:[],unreceivedLoading:!0,receivedLoading:!0,rejectLoading:!0,finished:!1,loading:!1,Status:{RECEIVED:"received",UNRECEIVED:"unreceived",REJECT:"reject"},showHomeLink:!1}),computed:(0,i.Z)({},(0,r.mapGetters)({ScanStatus:"pointsMall/getScanStatus",activeTab:"pointsMall/getActiveTab",primaryColor:"getPrimaryColor"})),mounted(){this.activeTabIndex=this.activeTab||0,this.onload();let t=(0,l.DP)();this.showHomeLink="true"===t.showHomeLink},methods:(0,i.Z)((0,i.Z)({},(0,r.mapMutations)("pointsMall",["setActiveTab"])),{},{onload(t){this.refreshing&&(this.unreceivedList=[],this.receivedList=[],this.rejectList=[]),0===this.activeTabIndex?("refresh"===t&&(this.unreceivedPageNumber=1),this.getUnreceivedDataList()):1===this.activeTabIndex?("refresh"===t&&(this.receivedPageNumber=1),this.getReceivedDataList()):("refresh"===t&&(this.rejectPageNumber=1),this.getRejectDataList())},getUnreceivedDataList(){this.loading=!0,1===this.unreceivedPageNumber&&a.Z.loading({duration:0,forbidClick:!0,message:this.$t("common.loading")}),c.Z.getExchangeList({grant_status:this.activeTabIndex,page_number:this.unreceivedPageNumber,page_size:this.pageSize}).then((t=>{this.loading=!1;const{data:e}=t,s=e.list;this.unreceivedList=1===this.unreceivedPageNumber?s:[...this.unreceivedList,...s],this.unreceivedPageNumber+=1,this.unreceivedLoading=!1,this.finished=this.unreceivedList.length>=e.total,a.Z.clear()})).catch((()=>{this.loading=!1,this.unreceivedLoading=!1,this.finished=!0,a.Z.clear()}))},getReceivedDataList(){this.loading=!0,1===this.receivedPageNumber&&a.Z.loading({duration:0,forbidClick:!0,message:this.$t("common.loading")}),c.Z.getExchangeList({grant_status:this.activeTabIndex,page_number:this.receivedPageNumber,page_size:this.pageSize}).then((t=>{this.loading=!1;const{data:e}=t,s=e.list;this.receivedList=1===this.receivedPageNumber?s:[...this.receivedList,...s],this.receivedPageNumber+=1,this.finished=this.receivedList.length>=e.total,this.receivedLoading=!1,a.Z.clear()})).catch((()=>{this.loading=!1,this.finished=!0,this.receivedLoading=!1,a.Z.clear()}))},getRejectDataList(){this.loading=!0,1===this.rejectPageNumber&&a.Z.loading({duration:0,forbidClick:!0,message:this.$t("common.loading")}),c.Z.getExchangeList({grant_status:this.activeTabIndex,page_number:this.rejectPageNumber,page_size:this.pageSize}).then((t=>{this.loading=!1;const{data:e}=t,s=e.list;this.rejectList=1===this.rejectPageNumber?s:[...this.rejectList,...s],this.rejectPageNumber+=1,this.finished=this.rejectList.length>=e.total,this.rejectLoading=!1,a.Z.clear()})).catch((()=>{this.loading=!1,this.finished=!0,this.rejectLoading=!1,a.Z.clear()}))},handleTabClick(t){this.activeTabIndex=t,this.unreceivedList=[],this.receivedList=[],this.rejectList=[],0===this.activeTabIndex?(this.unreceivedLoading=!0,this.unreceivedPageNumber=1,this.getUnreceivedDataList()):1===this.activeTabIndex?(this.receivedLoading=!0,this.receivedPageNumber=1,this.getReceivedDataList()):(this.rejectLoading=!0,this.rejectPageNumber=1,this.getRejectDataList()),this.setActiveTab({payload:{type:t}})},handletoDetail(t){this.$router.push({path:"/points-mall/order-detail",query:{id:t.id}})}})},b=(0,g.Z)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.showHomeLink?s("home-link"):t._e(),s("van-tabs",{attrs:{sticky:"",color:t.primaryColor,"line-width":"24"},on:{change:t.handleTabClick},model:{value:t.activeTabIndex,callback:function(e){t.activeTabIndex=e},expression:"activeTabIndex"}},[s("van-tab",{attrs:{title:t.$t("pointsMall.pending"),name:0}},[s("div",{staticClass:"tab-content"},[t.unreceivedLoading?t._e():s("ExchangeRecordCom",{key:t.activeTabIndex,ref:"unreceived",attrs:{finished:t.finished,loading:t.loading,"data-list":t.unreceivedList,type:t.Status.UNRECEIVED},on:{onload:t.onload,onRefresh:function(e){return t.onload("refresh")},onLinkTo:t.handletoDetail}})],1)]),s("van-tab",{attrs:{title:t.$t("pointsMall.released"),name:1}},[s("div",{staticClass:"tab-content"},[t.receivedLoading?t._e():s("ExchangeRecordCom",{key:t.activeTabIndex,ref:"received",attrs:{"data-list":t.receivedList,finished:t.finished,loading:t.loading,type:t.Status.RECEIVED},on:{onload:t.onload,onLinkTo:t.handletoDetail}})],1)]),s("van-tab",{attrs:{title:t.$t("pointsMall.canceled"),name:2}},[s("div",{staticClass:"tab-content"},[t.rejectLoading?t._e():s("ExchangeRecordCom",{key:t.activeTabIndex,ref:"reject",attrs:{finished:t.finished,loading:t.loading,"data-list":t.rejectList,type:t.Status.REJECT},on:{onload:t.onload,onLinkTo:t.handletoDetail}})],1)])],1)],1)}),[],!1,null,"d2a0dbca",null).exports},4560:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});s(23307);var a=s(81392),i=(s(25773),s(35791)),n=(s(73210),s(57658),s(78551)),o=s(27632),r={name:"ReceiveMethods",components:{},props:{detail:{type:Object,default:()=>({})}},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{handleCopyPhone(){o.Z.copy({text:this.detail.deliver_user_contact}),this.$toast.success(this.$t("pointsMall.copySuccess"))}}},l=s(1001),c=(0,l.Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"receive-methods"},[1===t.detail.deliver_method?s("div",{staticClass:"mail"},[s("div",{staticClass:"methods"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("minePoints.receivingMethod")))]),s("div",{staticClass:"icon"},[s("svg-icon",{attrs:{"icon-class":"icon-xingzhuang",size:40,color:"#7F849A"}})],1)]),s("div",{staticClass:"stream"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("pointsMall.mailInfo")))]),s("div",{staticClass:"company"},[s("span",[t._v(t._s(t.$t("minePoints.logisticCom"))+"：")]),s("span",[t._v(t._s(t.detail.logistics_company||"--"))])]),s("div",{staticClass:"number"},[s("span",[t._v(t._s(t.$t("minePoints.logisticNo"))+"：")]),s("span",[t._v(t._s(t.detail.logistics_num||"--"))])])])]):s("div",{staticClass:"pick"},[s("div",{staticClass:"methods"},[s("div",{staticClass:"icon"},[s("svg-icon",{attrs:{"icon-class":"icon-xingzhuang1",size:40,color:"#7F849A"}})],1),s("div",{staticClass:"title"},[t._v(t._s(t.$t("minePoints.receivingMethod")))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("span",{staticClass:"lable"},[t._v(t._s(t.$t("minePoints.sendUser")))]),s("span",[t._v("：")]),s("span",{staticClass:"value"},[t._v(t._s(t.detail.deliver_user_name))])]),s("div",{staticClass:"item"},[s("span",{staticClass:"lable"},[t._v(t._s(t.$t("minePoints.contact")))]),s("span",[t._v("：")]),s("span",{staticClass:"value"},[s("span",{staticClass:"phone"},[t._v(t._s(t.detail.deliver_user_contact))]),t.detail.deliver_user_contact?s("span",{staticClass:"copy-btn",on:{click:t.handleCopyPhone}},[t._v(t._s(t.$t("common.copy")))]):t._e()])]),s("div",{staticClass:"item"},[s("span",{staticClass:"lable"},[t._v(t._s(t.$t("minePoints.receiveAddress")))]),s("span",[t._v("：")]),s("span",{staticClass:"value"},[t._v(t._s(t.detail.receive_address))])])])])])])}),[],!1,null,"bd01db06",null).exports,d=s(30034),u=s(52830),m=s(62712),h={name:"OrderDetail",components:{[i.Z.name]:i.Z,[a.Z.name]:a.Z,SvgIcon:n.Z,ReceiveMethods:c,GoodsCard:d.Z,OrderPopup:u.Z},data:()=>({detail:{},orderPopVisible:!1}),computed:{statusTop(){const{grant_status:t,refuse_reason:e=""}=this.detail;return 1===t?{icon:"icon-daifafang",label:this.$t("pointsMall.released")}:2===t?{icon:"icon-yiquxiao",label:this.$t("pointsMall.canceled"),reason:String(e).trim()}:{icon:"icon-daifafang",label:this.$t("pointsMall.pending")}}},watch:{},created(){const{id:t}=this.$route.query;this.id=t},mounted(){this.getOrderDetail()},methods:{async getOrderDetail(){const{data:t={}}=await m.Z.getOrderDetail(this.id);this.detail=t},handleToRecord(){this.$router.push({path:"/exchange-record"})},handleEditOrder(){this.orderPopVisible=!0}}},p=(0,l.Z)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-detail"},[s("div",{staticClass:"top"},[s("div",{staticClass:"bg"},[s("div",{staticClass:"status"},[s("div",{staticClass:"detail"},[s("div",{staticClass:"icon"},[s("svg-icon",{attrs:{"icon-class":t.statusTop.icon,size:20,color:"#fff"}})],1),s("div",{staticClass:"type"},[t._v(" "+t._s(t.statusTop.label)+" ")])]),t.statusTop.reason?s("div",{staticClass:"reason"},[t._v(" "+t._s(t.statusTop.reason)+" ")]):t._e()]),1===t.detail.deliver_method?s("div",{staticClass:"receiver"},[s("div",{staticClass:"person"},[s("span",{staticClass:"name"},[t._v(t._s(t.detail.receive_person))]),s("span",{staticClass:"phone"},[t._v(t._s(t.detail.receive_phone))])]),s("div",{staticClass:"address"},[t._v(t._s(t.detail.receive_addressDetails))])]):t._e(),0===t.detail.deliver_method&&t.detail.exchange_code?s("div",{staticClass:"receiver"},[s("div",{staticClass:"code-desc"},[s("span",[t._v(t._s(t.$t("pointsMall.receiveCode")))]),t._v("   "),s("span",{staticClass:"code"},[t._v(t._s(t.detail.exchange_code))])])]):t._e()]),s("div",{staticClass:"detail"},[s("div",{staticClass:"goods"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("pointsMall.goodsInfo")))]),s("GoodsCard",{attrs:{"goods-info":t.detail}})],1),s("ReceiveMethods",{attrs:{detail:t.detail}}),s("div",{staticClass:"tips"},[s("span",[t._v("*"+t._s(t.$t("pointsMall.orderTip"))+" ")]),s("span",{staticClass:"view-btn",on:{click:t.handleToRecord}},[t._v(t._s(t.$t("micro.view")))])])],1)]),0===t.detail.grant_status?s("div",{staticClass:"bottom"},[s("van-button",{on:{click:t.handleEditOrder}},[t._v(t._s(t.$t("pointsMall.editOrder")))])],1):t._e(),t.orderPopVisible?s("OrderPopup",{attrs:{detail:t.detail,visible:t.orderPopVisible,"is-edit":""},on:{"update:visible":function(e){t.orderPopVisible=e},refresh:t.getOrderDetail}}):t._e()],1)}),[],!1,null,"4fc6b526",null).exports},31509:(t,e,s)=>{s.r(e),s.d(e,{default:()=>Z});s(31960);var a=s(10993),i=(s(25773),s(35791)),n=(s(31930),s(94907)),o=(s(3791),s(93432)),r=(s(70885),s(6458)),l=(s(18144),s(65641)),c=(s(47601),s(44951)),d=(s(74916),s(15306),s(77601),s(24603),s(28450),s(39714),s(28387)),u=s(52830),m=s(95082),h=(s(49153),s(5944)),p=(s(39610),s(2163)),g=(s(73474),s(74755)),v=(s(57658),s(95969)),_=s(52196),f={name:"OrderPopup",components:{[g.Z.name]:g.Z,[i.Z.name]:i.Z,[p.Z.name]:p.Z,Empty:h.Z},props:{visible:{type:Boolean,default:!1},detail:{type:Object,default:()=>({})}},data:()=>({}),computed:{show:{get(){return this.visible},set(t){this.$emit("update:visible",t)}},hasDeleted(){const{has_exchange:t,total_conditions:e}=this.detail;return t&&!e}},created(){},mounted(){},methods:{handlePopup(){this.$emit("update:visible",!1)},handleClick(t){const{con_id:e,con_type:s,qualified_status:a,con_status:i,biz_course:n={}}=t;switch(s){case"course":return void this.toCourseDetail((0,m.Z)((0,m.Z)({},n),{},{id:e,courseSource:2===n.scope?"enterprise":"platform",courseType:"course"}));case"study_project":return void this.toCourseDetail((0,m.Z)((0,m.Z)({},n),{},{id:e,courseType:"course",bizType:3}));case"study_plan":if(3===i)return void this.$toast(this.$t("home.taskNotStarted"));const t=a?"finished":2===i?"overdue":"unfinished";this.$router.push({path:v.Z.home.studyDetail({studyId:e,studyStatus:t,origin:"vue"})})}},async toCourseDetail(t){try{await(0,_.XS)({courseData:t}),(0,_.f2)({courseData:t})}catch(t){this.$toast({message:this.$t("home.bannerNoRightView"),duration:1500})}},getImageUrl(t){switch(t){case"course":default:return`${ASSETS_OSS_HOST}/1826458120071811072.png`;case"study_project":return`${ASSETS_OSS_HOST}/1826458120243777536.png`;case"study_plan":return`${ASSETS_OSS_HOST}/1826458120235388928.png`}},getConType(t){switch(t){case"course":default:return this.$t("common.course");case"study_project":return this.$t("pageTitle.trainingProgram");case"study_plan":return this.$t("search.studyTask")}}}},y=s(1001),C=(0,y.Z)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-popup",{staticClass:"conditions-pop",attrs:{round:"",position:"bottom"},on:{closed:t.handlePopup},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"conditions-detail"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("minePoints.exchangeConditions")))]),t.hasDeleted?s("div",{staticClass:"tip"},[s("div",{staticClass:"tip-info"},[t._v(t._s(t.$t("minePoints.exchangeConditionsTip1")))]),s("div",{staticClass:"progress"},[t._v(t._s(t.$t("minePoints.exchangeConditionsProgress"))+": "),s("span",{staticClass:"num"},[t._v("0/0")])])]):s("div",{staticClass:"tip"},[s("div",{staticClass:"tip-info"},[t._v(t._s(t.$t("minePoints.exchangeConditionsTip")))]),s("div",{staticClass:"progress"},[t._v(t._s(t.$t("minePoints.exchangeConditionsProgress"))+": "),s("span",{staticClass:"num"},[t._v(t._s(t.detail.completed_conditions||0)+"/"+t._s(t.detail.total_conditions||0))])])]),s("div",{staticClass:"content"},[t.hasDeleted?s("Empty"):t._l(t.detail.exchangeRecordList,(function(e){return s("div",{key:e.id,staticClass:"card",on:{click:function(s){return t.handleClick(e)}}},[s("div",{staticClass:"first-line"},[s("div",{staticClass:"content-type"},[s("img",{staticClass:"content-img",attrs:{src:t.getImageUrl(e.con_type),alt:""}}),t._v(" "+t._s(t.getConType(e.con_type))+" ")]),s("div",{class:e.qualified_status?"status-complete":"status-not-complete"},[t._v(t._s(e.qualified_status?t.$t("common.finished"):t.$t("common.unfinished")))])]),s("div",{staticClass:"card-title"},[t._v(t._s(e.con_name))])])})),t.hasDeleted?t._e():s("div",{staticClass:"end"},[t._v(t._s(t.$t("minePoints.noMore")))])],2),s("div",{staticClass:"footer-btn",on:{click:t.handlePopup}},[s("van-button",{attrs:{type:"primary"}},[t._v(" "+t._s(t.$t("minePoints.closeConditionsPop"))+" ")])],1)])])}),[],!1,null,"054c06ae",null).exports,b=s(27632),$=s(78551),k={components:{VanImage:c.Z,Col:l.Z,Row:r.Z,Loading:o.Z,Overlay:n.Z,Button:i.Z,OrderPopup:u.Z,ConditionsPopup:C,SvgIcon:$.Z},data:()=>({detail:{},loading:!1,orderPopVisible:!1,goodsId:"",conditionsPopVisible:!1}),computed:{themeColor(){return this.$store.state.themeColor.backgroundColor||"#516AE6"},primaryColor(){return this.$store.state.themeColor.primaryColor||"#516AE6"},getImage(){return this.detail.image?this.detail.image:"https://oss.coolcollege.cn/1790752251254542336.png"},getTimeStatus(){const{is_time_limited:t,is_time_limited_str:e,expire_time:s}=this.detail;return t&&"false"!==e?(new Date).getTime()>s?"expired":"normal":"unlimited"},getLastTimeTime(){return"unlimited"===this.getTimeStatus?`${this.$t("minePoints.unlimited")}`:`${this.formatDate(this.detail.expire_time,"yyyy-MM-dd  hh:mm")}`}},mounted(){const{query:t}=this.$route,{id:e}=t;this.goodsId=e,this.getMallDetail(e)},methods:{async getMallDetail(t){const{getGoodsDetailById:e}=d.Z;this.loading=!0;try{const{data:s}=await e(t);this.detail=s,this.loading=!1}catch(t){this.detail={},this.loading=!1}},previewImage(){"dingTalk"===b.Z.env?b.Z.previewImage({urls:[this.getImage]}):(0,a.Z)({images:[this.getImage],showIndex:!1})},getRegNum(t){const e=/(?!^)(?=(\d{3})+$)/g;return t?String(t).replace(e,","):0},handleExchange(){const{has_ordered:t,repeat_exchange:e,my_remain_score:s,score:a,remain_inventory:i,has_exchange:n,total_conditions:o,completed_conditions:r,status:l}=this.detail;i<1?this.$toast(this.$t("pointsMall.outOfStock")):"expired"!==this.getTimeStatus?"true"!==t||e?s<a?this.$toast(this.$t("pointsMall.insufficientCredit")):"down"!==l?n&&0!==o&&o!==r?this.$toast(this.$t("pointsMall.conditionsNotCompleteTip")):n&&0===o?this.$toast(this.$t("minePoints.exchangeConditionsTip1")):this.orderPopVisible=!0:this.$toast(this.$t("pointsMall.productDownTip")):this.$toast(this.$t("pointsMall.hasRedeemed")):this.$toast(this.$t("pointsMall.redeemClosed"))},getOver(){if("true"===this.detail.is_time_limited_str){return(new Date).getTime()>this.detail.expire_time}return!1},formatDate(t,e){const s=t?new Date(t):new Date;let a=e;if(isNaN(s.getDate()))return s;/(y+)/.test(a)&&(a=a.replace(RegExp.$1,`${s.getFullYear()}`.substr(4-RegExp.$1.length)));const i={"M+":s.getMonth()+1,"d+":s.getDate(),"h+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds()};for(const t in i)if(new RegExp(`(${t})`,"u").test(a)){const e=`${i[t]}`;a=a.replace(RegExp.$1,1===RegExp.$1.length?e:`00${e}`.substr(e.length))}return a},viewConditionsDetail(){this.conditionsPopVisible=!0}}},Z=(0,y.Z)(k,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"points-mall-detail-container"},[s("div",{staticClass:"points-mall-img"},[s("VanImage",{attrs:{width:"100%",height:"100%",fit:"fill",src:t.getImage},on:{click:t.previewImage}})],1),s("div",{staticClass:"goods-info"},[s("div",{staticClass:"goods-info-score"},[s("span",{staticClass:"num"},[t._v(t._s(t.getRegNum(t.detail.score)))]),s("span",{staticClass:"unit"},[t._v(t._s(t.$t("minePoints.points")))])]),s("div",{staticClass:"goods-info-name"},[t._v(t._s(t.detail.name))]),s("div",{staticClass:"goods-info-row"},[s("Row",{attrs:{gutter:"20"}},[s("Col",{staticClass:"goods-info-desc",attrs:{span:"8"}},[s("span",[t._v(t._s(t.$t("minePoints.inventory"))+" ")]),s("span",{class:"remain-num-"+t.detail.remain_inventory},[t._v(t._s(t.$t("pointsMall.piece",{num:t.getRegNum(t.detail.remain_inventory)})))])]),s("Col",{staticClass:"goods-info-desc",attrs:{span:"12"}},[s("span",[t._v(t._s(t.$t("minePoints.lastTime"))+" ")]),s("span",{class:"expired"===t.getTimeStatus?"remain-num-0":""},[t._v(t._s(t.getLastTimeTime))])])],1)],1),t.detail.has_exchange?s("div",{staticClass:"goods-conditions",on:{click:t.viewConditionsDetail}},[s("div",{staticClass:"goods-conditions-left"},[s("span",{staticClass:"goods-conditions-title"},[t._v(t._s(t.$t("minePoints.exchangeConditions")))]),s("span",[t._v(t._s(t.$t("minePoints.conditionDesc")))])]),s("div",{staticClass:"goods-conditions-right"},[t._v(" "+t._s(t.detail.completed_conditions||0)+"/"+t._s(t.detail.total_conditions||0)+" "),s("SvgIcon",{staticStyle:{"margin-left":"5px"},attrs:{color:"#171A1D",size:14,"icon-class":"icon-arrow-r1"}})],1)]):t._e()]),t.detail.description?s("div",{staticClass:"goods-detail"},[s("div",{staticClass:"goods-detail-title"},[t._v(t._s(t.$t("minePoints.mallDetail")))]),s("div",{staticClass:"goods-detail-html",domProps:{innerHTML:t.xss(t._s(t.detail.description))}})]):t._e(),s("div",{staticClass:"goods-bottom-btn"},[s("Button",{style:{width:"100%"},attrs:{"class-name":"canExchange",type:"primary"},on:{click:t.handleExchange}},[t._v(t._s(t.$t("pointsMall.redeemNow")))])],1),s("Overlay",{attrs:{show:t.loading,"z-index":"100","class-name":"loading"},on:{click:function(e){t.loading=!1}}},[s("div",{staticClass:"wrapper",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"block"},[s("Loading",{attrs:{size:"24px",vertical:""}},[t._v(t._s(t.$t("minePoints.isLoading")))])],1)])]),t.orderPopVisible?s("OrderPopup",{attrs:{detail:t.detail,visible:t.orderPopVisible},on:{"update:visible":function(e){t.orderPopVisible=e},refresh:function(e){return t.getMallDetail(t.goodsId)}}}):t._e(),t.conditionsPopVisible?s("ConditionsPopup",{attrs:{detail:t.detail,visible:t.conditionsPopVisible},on:{"update:visible":function(e){t.conditionsPopVisible=e}}}):t._e()],1)}),[],!1,null,"f06fef6a",null).exports},16984:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});s(31146);var a=s(41610),i=(s(34837),s(39146)),n=(s(20581),s(50914)),o=(s(49153),s(5944)),r=(s(33948),s(57658),s(98512)),l=s(62712),c=s(16701),d={name:"GoodListPageTitle",props:{userScoreData:{type:Object,default:()=>{}},onShowTips:{type:Function,default:()=>{console.warn("showTips")}},onLinkToExchangeRecords:{type:Function,default:()=>{console.warn("onLinkToExchangeRecord")}}},methods:{showTips(){this.$emit("onShowTips")},linkToExchangeRecords(){this.$emit("onLinkToExchangeRecords")}}},u=s(1001),m=(0,u.Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"score-top-container"},[s("div",{staticClass:"score-left"},[s("div",{staticClass:"score-box"},[s("span",{staticClass:"remain-score"},[t._v(t._s(t.userScoreData.remain_score))]),s("span",{staticClass:"remain-score-label"},[t._v(t._s(t.$t("minePoints.pointsAvailable")))])])]),s("div",{staticClass:"score-right"},[s("div",{staticClass:"record-btn",on:{click:function(e){return t.linkToExchangeRecords()}}},[t._v(" "+t._s(t.$t("minePoints.redemptionRecord"))+" ")])])])}),[],!1,null,"63cbd012",null).exports,h=(s(47601),s(44951)),p={name:"ImageWithStatus",components:{[h.Z.name]:h.Z},props:{imageSrc:{type:String,default:""},goodsStatus:{type:String,default:""},hasExchange:{type:Number,default:0}},data:()=>({goodsStatusTipZh:!1,goodsStatusTipEn:!1}),created(){"unlimited"===this.goodsStatus?(this.goodsStatusTipZh=!1,this.goodsStatusTipEn=!1):"expired"===this.goodsStatus?(this.goodsStatusTipZh=this.$t("minePoints.hadClose"),this.goodsStatusTipEn="Closed"):"soldOut"===this.goodsStatus&&(this.goodsStatusTipZh=this.$t("minePoints.noRest"),this.goodsStatusTipEn="Sold Out")}},g={name:"GoodsCard",components:{ImageWithStatus:(0,u.Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods-cover"},[s("div",{staticClass:"goods-cover-container"},[s("van-image",{staticClass:"goods-img",attrs:{src:t.imageSrc||"https://oss.coolcollege.cn/1790752251254542336.png"}})],1),t.goodsStatusTipZh&&t.goodsStatusTipEn?s("div",{staticClass:"goods-status"},[s("div",{staticClass:"goods-status-tip"},[t._v(t._s(t.goodsStatusTipZh))]),s("div",{staticClass:"goods-status-tip"},[t._v(t._s(t.goodsStatusTipEn))])]):t._e(),t.hasExchange?s("div",{staticClass:"has-exchange"},[t._v(t._s(t.$t("minePoints.hasExchange")))]):t._e()])}),[],!1,null,"d1a8d656",null).exports},props:{cardData:{type:Object,default:()=>({image:"",name:"name",score:"score",order_count:"count",remain_inventory:"remain_inventory"})}},methods:{goodsStatus(){const{is_time_limited:t,expire_time:e,remain_inventory:s}=this.cardData;return s<1?"soldOut":t&&"false"!==t?(new Date).getTime()>e?"expired":void 0:"unlimited"}}},v={name:"GoodList",components:{GoodListPageTitle:m,GoodsCard:(0,u.Z)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-item-container"},[s("ImageWithStatus",{attrs:{"image-src":t.cardData.image,"goods-status":t.goodsStatus(),"has-exchange":t.cardData.has_exchange}}),s("div",{staticClass:"goods-info"},[s("div",{staticClass:"goods-score-container"},[s("span",{staticClass:"goods-score"},[t._v(t._s(t.cardData.score)+" ")]),s("span",{staticClass:"goods-points"},[t._v(t._s(t.$t("minePoints.points"))+" ")])]),s("div",{staticClass:"goods-name"},[t._v(t._s(t.cardData.name))]),s("div",{staticClass:"goods-inventory"},[t._v(t._s(t.cardData.order_count)+t._s(t.$t("pointsMall.redeemed"))+" / "+t._s(t.$t("pointsMall.stock"))+t._s(t.cardData.remain_inventory))])])],1)}),[],!1,null,"4b254e2e",null).exports,[o.Z.name]:o.Z,[n.Z.name]:n.Z,HomeLink:c.Z},data:()=>({goodsList:[],userScoreData:{avatar:"",remain_score:""},pageNumber:0,loading:!1,finished:!1,showHomeLink:!1}),mounted(){this.onLoad();let t=(0,r.DP)();this.showHomeLink="true"===t.showHomeLink},methods:{onLoad(){this.pageNumber+=1,this.getGoodsList(),this.getRemainScore()},getGoodsList(){const t={page_size:10,page_number:this.pageNumber};1===this.pageNumber&&i.Z.loading(),l.Z.getGoodsList(t).then((t=>{const{data:e}=t;this.goodsList=1===this.pageNumber?e.list:[...this.goodsList,...e.list],this.finished=this.goodsList.length>=e.total,this.loading=!1,i.Z.clear()})).catch((()=>(this.loading=!1,this.finished=!0,i.Z.clear(),Promise.resolve(!1))))},getRemainScore(){l.Z.getRemainScore().then((t=>{this.userScoreData=t.data})).catch((()=>Promise.resolve(!1)))},showTips(){const t=this.$t;(0,a.Z)({title:t("promptMessage.warmTips"),showCancelButton:!1,message:`${t("pointsMall.conversionStandard")}: ${t("pointsMall.conversionRule")}`,confirmButtonText:t("promptMessage.roger"),confirm:()=>{}})},linkToExchangeRecords(){this.$router.push({path:"/exchange-record"})},linkToGoodsDetail(t){this.$router.push({path:`/points-detail?id=${t}`})}}},_=(0,u.Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goodsList-content"},[t.showHomeLink?s("home-link"):t._e(),s("GoodListPageTitle",{attrs:{"user-score-data":t.userScoreData},on:{onShowTips:t.showTips,onLinkToExchangeRecords:t.linkToExchangeRecords}}),t.goodsList.length>0?s("div",{staticClass:"list-container"},[s("van-list",{attrs:{finished:t.finished,"finished-text":t.$t("common.listNoData")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"list-content"},t._l(t.goodsList,(function(e){return s("div",{key:e.id,staticClass:"item",on:{click:function(s){return t.linkToGoodsDetail(e.id)}}},[s("GoodsCard",{attrs:{"card-data":e}})],1)})),0)])],1):s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}})],1)}),[],!1,null,"0fdec6ba",null).exports},80870:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});s(34837);var a=s(39146),i=(s(31146),s(41610)),n=s(95082),o=(s(58247),s(85573)),r=(s(73474),s(74755)),l=(s(25773),s(35791)),c=(s(29941),s(64168)),d=(s(93787),s(20090)),u=(s(77141),s(30960)),m=(s(57658),s(85384)),h=s(28387),p={components:{Form:u.Z,Field:d.Z,CellGroup:c.Z,Button:l.Z,Popup:r.Z,Cascader:o.Z,OverlayLoading:m.Z},data:()=>({loading:!0,receive_person:"",receive_phone:"",receive_address:"",cascaderValue:"",receive_province:"",receive_city:"",receive_zone:"",receive_road:"",receive_addressDetails:"",showPicker:!1,detail:{},id:"",fieldNames:{text:"address_name",value:"id",children:"children"},options:[]}),computed:{getImage(){return this.detail.image?this.detail.image:"https://oss.coolcollege.cn/1790752251254542336.png"}},created(){},async mounted(){const{query:t}=this.$route,{id:e}=t;this.id=e,await this.getAdressDetail(),await this.getMallDetail(),await this.getInitCityData()},methods:{async getAdressDetail(){const{getAddressDetail:t}=h.Z;try{const{data:e}=await t(),{receive_person:s,receive_phone:a,receive_province:i,receive_city:n,receive_zone:o,receive_road:r,receive_addressDetails:l}=e;this.receive_person=s,this.receive_phone=a,this.receive_province=i,this.receive_city=n,this.receive_zone=o,this.receive_road=r,this.receive_addressDetails=l}catch(t){this.receive_person="",this.receive_phone="",this.receive_province="",this.receive_city="",this.receive_zone="",this.receive_road="",this.receive_addressDetails=""}},async getMallDetail(){const{getGoodsDetailById:t}=h.Z;this.loading=!0;try{const{data:e}=await t(this.id);this.detail=e,this.loading=!1}catch(t){this.detail={},this.loading=!1}},getTreeData(t){for(let e=0;e<t.length;e++)t[e].children.length<1&&t[e]&&t[e].parent_id===this.receive_zone?t[e].children=void 0:this.getTreeData(t[e].children);return t},onClickShowPicker(){this.showPicker=!this.showPicker,this.cascaderValue=this.receive_road||""},async getInitCityData(){const{getCityData:t}=h.Z,e=["0",this.receive_province,this.receive_city,this.receive_zone].filter(Boolean).join(","),s={parentId:e.length>1?e:"0"},{data:a}=await t(s);if(e.length>1)return this.options=this.getTreeData(a),this.receive_address=this.getReceiveAddress(),void(this.cascaderValue=[this.receive_province,this.receive_city,this.receive_zone,this.receive_road].filter(Boolean).pop());a&&Array.isArray(a[0])&&(this.cascaderValue="",this.receive_address="",this.options=a[0].map((t=>(0,n.Z)((0,n.Z)({},t),{},{children:[]}))))},getReceiveAddress(){const t=[this.receive_province,this.receive_city,this.receive_zone,this.receive_road].filter(Boolean),e=t[0]||"",s=t[1]||"",a=t[2]||"",i=t[3]||"",n=e?this.options.filter((t=>t.id===e))[0]:{},o=s?n.children.filter((t=>t.id===s))[0]:{},r=a?o.children.filter((t=>t.id===a))[0]:{},l=i?r.children.filter((t=>t.id===i))[0]:{};return[n,o,r,l].filter(Boolean).map((t=>t.address_name)).join("/")},async getNextDataById(t,e){const{getCityData:s}=h.Z,a={parentId:t||"0"},{data:i}=await s(a);return i&&Array.isArray(i[t])?2===e?i[t].map((t=>(0,n.Z)({},t))):i[t].map((t=>(0,n.Z)((0,n.Z)({},t),{},{children:[]}))):[]},async onChange({selectedOptions:t,tabIndex:e}){if(this.targetOption=t[t.length-1],!t[1]||!t[2]||!t[3]){const t=await this.getNextDataById(this.targetOption.id,e);this.targetOption.children=t}},onFinish({selectedOptions:t}){this.showPicker=!1,this.receive_address=t.map((t=>t.address_name)).join("/"),this.cascaderValue=t.map((t=>t.id)).join(","),this.receive_province=t[0].id,this.receive_city=t[1].id,this.receive_zone=t[2].id,this.receive_road=t[3].id},onSubmit(t){const{receive_person:e,receive_phone:s,receive_addressDetails:n}=t;i.Z.confirm({message:this.$t("minePoints.isContinue"),confirmButtonColor:"#07c160"}).then((async()=>{const t={receive_person:e,receive_phone:s,receive_addressDetails:n,receive_province:this.receive_province,receive_city:this.receive_city,receive_zone:this.receive_zone,receive_road:this.receive_road},{exGoodsById:i}=h.Z;try{const{data:e}=await i(this.id,t);e&&e.id&&this.$router.push({path:`/unaccalimed-page?id=${e.id}&type=unreceived`})}catch(t){this.loading=!1;const{data:e}=t;if("enterpriseapi.560011"===e.code)return void a.Z.fail(this.$t("pointsMall.productDownTip"));if("enterpriseapi.560009"===e.code)return void this.$toast.fail(this.$t("pointsMall.inventoryNotEnoughTip"));a.Z.fail(this.$t("promptMessage.error"))}})).catch((()=>{this.loading=!1}))}}},g=(0,s(1001).Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"confirm-order-container"},[s("overlay-loading",{attrs:{show:t.loading}}),s("div",{staticClass:"confirm-order-address"},[s("Form",{on:{submit:t.onSubmit}},[s("CellGroup",[s("Field",{attrs:{name:"receive_person",required:"",maxlength:"30","show-word-limit":"",label:t.$t("minePoints.receiveInfoPerson"),placeholder:t.$t("minePoints.pleaseInpPerson"),rules:[{required:"true"}]},model:{value:t.receive_person,callback:function(e){t.receive_person=e},expression:"receive_person"}}),s("Field",{attrs:{name:"receive_phone",required:"",maxlength:"20",type:"number","show-word-limit":"",label:t.$t("minePoints.receiveInfoPhone"),placeholder:t.$t("minePoints.pleaseInpPhone"),rules:[{required:"true"}]},model:{value:t.receive_phone,callback:function(e){t.receive_phone=e},expression:"receive_phone"}}),s("Field",{attrs:{name:"receive_address","is-link":"",required:"",readonly:"",label:t.$t("minePoints.selectZone"),placeholder:t.$t("minePoints.pleaseInpSelect"),rules:[{required:"true"}]},on:{click:t.onClickShowPicker},model:{value:t.receive_address,callback:function(e){t.receive_address=e},expression:"receive_address"}}),s("Field",{attrs:{name:"receive_addressDetails",required:"",maxlength:"100","show-word-limit":"",label:t.$t("minePoints.detailAddress"),placeholder:t.$t("minePoints.pleaseInpDetail"),rules:[{required:"true"}]},model:{value:t.receive_addressDetails,callback:function(e){t.receive_addressDetails=e},expression:"receive_addressDetails"}})],1),s("div",{staticClass:"shop-mall-detail"},[s("div",{staticClass:"shop-mall-detail-info"},[s("div",{staticClass:"shop-mall-info-body"},[s("div",{staticClass:"shop-mall-body-img"},[s("img",{attrs:{src:t.getImage,alt:""}})]),s("div",{staticClass:"shop-mall-body-detail"},[s("div",{staticClass:"shop-mall-detail-title"},[t._v(t._s(t.detail.name))]),s("div",{staticClass:"shop-mall-detail-title color"},[t._v("x1")])])])]),s("div",{staticClass:"shop-mall-detail-score"},[s("div",{staticClass:"shop-mall-score-body"},[s("div",{staticClass:"shop-mall-score-title"},[t._v(t._s(t.$t("minePoints.points")))]),s("div",{staticClass:"shop-mall-score-num"},[t._v(t._s(t.detail.score))])])])]),s("div",{staticClass:"confirm-order-btn"},[s("Button",{attrs:{block:"",type:"primary","native-type":"submit"}},[t._v(" "+t._s(t.$t("minePoints.conformOrder"))+" ")])],1)],1)],1),s("Popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[s("Cascader",{attrs:{title:t.$t("minePoints.pleaseInpSelect"),options:t.options,"field-names":t.fieldNames},on:{close:function(e){t.showPicker=!1},change:t.onChange,finish:t.onFinish},model:{value:t.cascaderValue,callback:function(e){t.cascaderValue=e},expression:"cascaderValue"}})],1)],1)}),[],!1,null,"c2adbc58",null).exports},90002:(t,e,s)=>{s.r(e),s.d(e,{default:()=>m});s(34837);var a=s(39146),i=s(95082),n=(s(33948),s(26294)),o=s(22648),r=s(62712),l=s(28387),c=s(19457),d=s(97236),u={name:"ReceivePage",components:{OperateResult:c.Z,ExchangeInfo:d.Z},data(){return{iconName:"",title:"",color:"",scanExchangeResultTitle:"",scanReceiveResultTitle:"",scanSendResultTitle:"",scanExchangeResultPublisher:{},scanExchangeResultAddress:{},receiveMethod:{},scanExchangeResultContact:{},receiveInfoPublisher:{},receiveInfoContact:{},receiveInfoAddress:{},sendInfoPublisher:{},sendInfoContact:{},sendInfoAddress:{},ids:[],areas:[],getAddressDetail:"",type:this.$route.query.type||this.$route.query.newType,show:!0}},computed:(0,i.Z)({},(0,n.mapGetters)({ScanStatus:"pointsMall/getScanStatus",exchangeResult:"pointsMall/getScanExchangeResult",newType:"pointsMall/getScanType"})),mounted(){const{orderId:t,deliverUserId:e,id:s}=this.$route.query;this.type&&this.type===this.ScanStatus.ALREDAYRECEIVED?r.Z.getOrderDetail(s).then((async t=>{const{data:e={}}=t;this.ids=[e.receive_province,e.receive_city,e.receive_zone].filter(Boolean),this.areas=[e.receive_province,e.receive_city,e.receive_zone,e.receive_road].filter(Boolean),this.getAddressDetail=await this.getAddress(),e.receive_time=(0,o.p6)(e.receive_time,"yyyy-MM-dd  hh:mm"),this.scanExchangeResult({payload:{scanExchangeResult:e}}),this.updateExchangeType({payload:{type:this.ScanStatus.RECEIVEDSUCCESS}}),this.dealResult()})):(this.updateExchangeType({payload:{type:this.ScanStatus.RECEIVEDSUCCESS}}),this.scanQrcode({payload:{orderId:t,deliverUserId:e}}).then((async t=>{const{receive_province:e,receive_city:s,receive_zone:a,receive_road:i}=t.data;this.ids=[e,s,a].filter(Boolean),this.areas=[e,s,a,i].filter(Boolean),this.getAddressDetail=await this.getAddress(),this.dealResult()})).catch((()=>{this.updateExchangeType({payload:{type:this.ScanStatus.AUTHFAILED}}),this.dealResult()})))},methods:(0,i.Z)((0,i.Z)((0,i.Z)({},(0,n.mapMutations)("pointsMall",["scanExchangeResult","updateExchangeType"])),(0,n.mapActions)("pointsMall",["scanQrcode"])),{},{dealResult(){this.scanExchangeResultPublisher={label:this.$t("pointsMall.publisher"),content:this.exchangeResult.deliver_user_name},this.scanExchangeResultAddress={label:this.$t("minePoints.address"),content:this.exchangeResult.receive_address},this.newType!==this.ScanStatus.RECEIVEDSUCCESS&&this.newType!==this.ScanStatus.ALREDAYRECEIVED||(this.scanReceiveResultTitle=this.$t("pointsMall.receiveInfo"),this.receiveInfoPublisher={label:this.$t("minePoints.receiveInfoPerson"),content:this.exchangeResult.receive_person||"--"},this.receiveInfoContact={label:this.$t("minePoints.receiveInfoPhone"),content:this.exchangeResult.receive_phone||"--"},this.receiveInfoAddress={label:this.$t("minePoints.receiveInfoAddress"),content:`${this.getAddressDetail}${this.exchangeResult.receive_addressDetails||""}`||"--"}),this.newType===this.ScanStatus.RECEIVEDSUCCESS?(this.iconName="wancheng",this.title=this.$t("pointsMall.succeed"),this.color="#5DBD66",this.scanExchangeResultTitle=this.$t("pointsMall.redeemGuide"),this.scanSendResultTitle=this.$t("minePoints.sendInfo"),this.scanExchangeResultContact={label:this.$t("pointsMall.contact"),content:this.exchangeResult.deliver_user_contact},this.receiveMethod={label:!1,content:!1},this.sendInfoContact={label:this.$t("minePoints.logisticCom"),content:this.exchangeResult.logistics_company||"--"},this.sendInfoPublisher={label:this.$t("minePoints.logisticInfo"),content:1===this.exchangeResult.logistics?this.$t("minePoints.needLogistic"):this.$t("minePoints.notLogistic")},this.sendInfoAddress={label:this.$t("minePoints.logisticNo"),content:this.exchangeResult.logistics_num||"--"}):this.newType===this.ScanStatus.ALREDAYRECEIVED?(this.iconName="point",this.title=this.$t("pointsMall.hasReceived"),this.color="#FFA000",this.scanExchangeResultTitle=this.$t("pointsMall.receivingRecord"),this.receiveMethod={label:this.$t("pointsMall.receivingMethod"),content:this.$t("pointsMall.scanQRcode")},this.scanExchangeResultContact={label:!1,content:!1}):(this.iconName="fault",this.title=this.$t("pointsMall.receiveFail"),this.color="#D8403D",this.show=!1,a.Z.fail({message:this.$t("pointsMall.authenticationFail")}))},async getAddress(){const{getCityData:t}=l.Z,e=["0",...this.ids].join(","),s={parentId:e.length>1?e:"0"},{data:a}=await t(s);return`${await this.getReceiveAddress(a)}`},getReceiveAddress(t){const e=this.areas[0]||"",s=this.areas[1]||"",a=this.areas[2]||"",i=this.areas[3]||"",n=e?t.filter((t=>t.id===e))[0]:{},o=s?n.children.filter((t=>t.id===s))[0]:{},r=a?o.children.filter((t=>t.id===a))[0]:{},l=i?r.children.filter((t=>t.id===i))[0]:{};return[n,o,r,l].filter(Boolean).map((t=>t.address_name)).join("")}})},m=(0,s(1001).Z)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"receive-container"},[s("OperateResult",{attrs:{"icon-name":t.iconName,title:t.title,color:t.color}},[s("div",{staticClass:"receive-time"},[t._v(" "+t._s(t.$t("pointsMall.receiveTime"))+": "),s("span",{staticClass:"receive-time-content"},[t._v(t._s(t.exchangeResult.receive_time))])])]),s("div",{staticClass:"receive-module-gap"}),t.show?s("div",[t.newType!==t.ScanStatus.ALREDAYRECEIVED||t.newType!==t.ScanStatus.RECEIVEDSUCCESS?s("ExchangeInfo",{attrs:{title:t.scanExchangeResultTitle,publisher:t.scanExchangeResultPublisher,contact:t.scanExchangeResultContact,address:t.scanExchangeResultAddress,"receive-method":t.receiveMethod}}):t._e(),t.newType===t.ScanStatus.RECEIVEDSUCCESS?s("ExchangeInfo",{attrs:{title:t.scanSendResultTitle,publisher:t.sendInfoPublisher,contact:t.sendInfoContact,address:t.sendInfoAddress}}):t._e(),s("ExchangeInfo",{attrs:{title:t.scanReceiveResultTitle,publisher:t.receiveInfoPublisher,contact:t.receiveInfoContact,address:t.receiveInfoAddress}})],1):t._e()],1)}),[],!1,null,"2bc0e45a",null).exports},13238:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var a=s(95082),i=(s(33948),s(26294)),n=s(22648),o=s(62712),r=s(28387),l=s(19457),c=s(97236),d={name:"ReceivePage",components:{OperateResult:l.Z,ExchangeInfo:c.Z},data(){return{iconName:"",title:"",color:"",scanExchangeResultTitle:this.$t("pointsMall.redeemGuide"),scanExchangeResultPublisher:{},scanExchangeResultContact:{},scanExchangeResultReason:{},scanExchangeResultAddress:{},receiveMethod:{},receiveInfoPublisher:{},receiveInfoContact:{},receiveInfoAddress:{},ids:[],areas:[],getAddressDetail:"",type:this.$route.query.type}},computed:(0,a.Z)({},(0,i.mapGetters)({ScanStatus:"pointsMall/getScanStatus",newType:"pointsMall/getScanType",exchangeResult:"pointsMall/getScanExchangeResult"})),mounted(){const{id:t}=this.$route.query;this.type&&this.type===this.ScanStatus.REJECT?o.Z.getOrderDetail(t).then((async t=>{const{data:e={}}=t;this.ids=[e.receive_province,e.receive_city,e.receive_zone].filter(Boolean),this.areas=[e.receive_province,e.receive_city,e.receive_zone,e.receive_road].filter(Boolean),this.getAddressDetail=await this.getAddress(),e.refuse_time=(0,n.p6)(e.refuse_time,"yyyy-MM-dd  hh:mm"),this.scanExchangeResult({payload:{scanExchangeResult:e}}),this.updateExchangeType({payload:{type:this.ScanStatus.REJECT}}),this.dealResult()})):(this.updateExchangeType({payload:{type:this.ScanStatus.REJECT}}),this.dealResult())},methods:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,i.mapMutations)("pointsMall",["updateExchangeType","scanExchangeResult"])),(0,i.mapActions)("pointsMall",["scanQrcode"])),{},{dealResult(){this.newType===this.ScanStatus.REJECT?(this.iconName="point",this.title=this.$t("minePoints.hasReject"),this.color="#D8403D",this.scanExchangeResultPublisher={label:this.$t("pointsMall.publisher"),content:this.exchangeResult.deliver_user_name},this.scanExchangeResultContact={label:this.$t("pointsMall.contact"),content:this.exchangeResult.deliver_user_contact},this.scanExchangeResultReason={label:this.$t("minePoints.rejectReason"),content:this.exchangeResult.refuse_reason},this.scanExchangeResultAddress={label:!1,content:!1},this.receiveMethod={label:!1,content:!1},this.receiveInfoPublisher={label:this.$t("minePoints.receiveInfoPerson"),content:this.exchangeResult.receive_person||"--"},this.receiveInfoContact={label:this.$t("minePoints.receiveInfoPhone"),content:this.exchangeResult.receive_phone||"--"},this.receiveInfoAddress={label:this.$t("minePoints.receiveInfoAddress"),content:`${this.getAddressDetail}${this.exchangeResult.receive_addressDetails}`||"--"}):(this.iconName="point",this.title=this.$t("minePoints.hasReject"),this.color="#D8403D")},async getAddress(){const{getCityData:t}=r.Z,e=["0",...this.ids].join(","),s={parentId:e.length>1?e:"0"},{data:a}=await t(s);return`${await this.getReceiveAddress(a)}`},getReceiveAddress(t){const e=this.areas[0]||"",s=this.areas[1]||"",a=this.areas[2]||"",i=this.areas[3]||"",n=e?t.filter((t=>t.id===e))[0]:{},o=s?n.children.filter((t=>t.id===s))[0]:{},r=a?o.children.filter((t=>t.id===a))[0]:{},l=i?r.children.filter((t=>t.id===i))[0]:{};return[n,o,r,l].filter(Boolean).map((t=>t.address_name)).join("")}})},u=(0,s(1001).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reject-container"},[s("OperateResult",{attrs:{"icon-name":t.iconName,title:t.title,color:t.color}},[s("div",{staticClass:"reject-time"},[t._v(" "+t._s(t.$t("minePoints.rejectTime"))+": "),s("span",{staticClass:"reject-time-content"},[t._v(t._s(t.exchangeResult.refuse_time))])])]),s("div",{staticClass:"reject-module-gap"}),t.newType===t.ScanStatus.REJECT?s("ExchangeInfo",{attrs:{title:t.scanExchangeResultTitle,publisher:t.scanExchangeResultPublisher,contact:t.scanExchangeResultContact,address:t.scanExchangeResultAddress,"reject-method":t.receiveMethod,reason:t.scanExchangeResultReason}}):t._e(),s("ExchangeInfo",{attrs:{title:t.$t("pointsMall.receiveInfo"),publisher:t.receiveInfoPublisher,contact:t.receiveInfoContact,address:t.receiveInfoAddress}})],1)}),[],!1,null,"190f9994",null).exports},68365:(t,e,s)=>{s.r(e),s.d(e,{default:()=>f});s(31146);var a=s(41610),i=(s(34837),s(39146)),n=s(95082),o=(s(3791),s(93432)),r=(s(25773),s(35791)),l=(s(26699),s(32023),s(57658),s(33948),s(26294)),c=s(22648),d=s(98512),u=s(27632),m=s(62712),h=s(28387),p=s(16701),g=s(19457),v=s(97236),_={name:"UnaccalimedPage",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,OperateResult:g.Z,ExchangeInfo:v.Z,HomeLink:p.Z},data(){return{ua:(0,c.ij)().toLowerCase(),exchangeInfoPublisher:{},exchangeInfoContact:{},exchangeInfoAddress:{},receiveMethod:{},sendInfoContact:{},sendInfoPublisher:{},sendInfoAddress:{},receiveInfoPublisher:{},receiveInfoContact:{},receiveInfoAddress:{},ids:[],areas:[],sendMethod:{label:!1,content:!1},type:this.$route.query.type,showHomeLink:!1}},computed:(0,n.Z)((0,n.Z)({},(0,l.mapGetters)({goodsInfo:"pointsMall/getGoodsInfo",Status:"pointsMall/getScanStatus",ScanStatus:"pointsMall/getScanStatus"})),{},{title(){return this.type===this.Status.ISSUED?this.$t("minePoints.hasIssure"):this.$t("pointsMall.redeemedSuccess")},color(){return this.type===this.Status.ISSUED?"#FFA000":"#5DBD66"}}),async created(){const{id:t}=this.$route.query;if(this.type===this.Status.ISSUED){const{data:e}=await m.Z.getOrderDetail(t);1===e.receive_status&&(this.setActiveTab({payload:{type:1}}),this.$router.go(-1))}let e=(0,d.DP)();this.showHomeLink="true"===e.showHomeLink},mounted(){const{id:t}=this.$route.query;!this.type||this.type!==this.Status.UNRECEIVED&&this.type!==this.Status.ISSUED||m.Z.getOrderDetail(t).then((async t=>{const{data:e={}}=t;this.ids=[e.receive_province,e.receive_city,e.receive_zone].filter(Boolean),this.areas=[e.receive_province,e.receive_city,e.receive_zone,e.receive_road].filter(Boolean);const s=await this.getAddress();this.$store.commit("pointsMall/updateGoodsInfo",{payload:{goodsInfo:e}}),this.exchangeInfoPublisher={label:this.$t("pointsMall.publisher"),content:e.deliver_user_name},this.exchangeInfoContact={label:this.$t("pointsMall.contact"),content:e.deliver_user_contact},this.exchangeInfoAddress={label:this.$t("minePoints.address"),content:e.receive_address},this.receiveMethod={label:this.$t("pointsMall.receivingMethod"),content:this.$t("pointsMall.scanQRcode")},this.sendInfoPublisher={label:this.$t("minePoints.logisticInfo"),content:1===e.logistics?this.$t("minePoints.needLogistic"):this.$t("minePoints.notLogistic")},this.sendInfoContact={label:this.$t("minePoints.logisticCom"),content:e.logistics_company||"--"},this.sendInfoAddress={label:this.$t("minePoints.logisticNo"),content:e.logistics_num||"--"},this.receiveInfoPublisher={label:this.$t("minePoints.receiveInfoPerson"),content:e.receive_person||"--"},this.receiveInfoContact={label:this.$t("minePoints.receiveInfoPhone"),content:e.receive_phone||"--"},this.receiveInfoAddress={label:this.$t("minePoints.receiveInfoAddress"),content:`${s}${e.receive_addressDetails||""}`||"--"}}))},methods:(0,n.Z)((0,n.Z)({},(0,l.mapMutations)("pointsMall",["setActiveTab"])),{},{alipayScan(t){!t||t.includes("http")?t&&""!==t&&u.Z.navigateTo({url:`/pages/common-webview/index?type=pointsMallEvent&url=${t}`}):(0,i.Z)({message:this.$t("minePoints.scanFailTips")})},fsScan(t){if(t&&!t.includes("lark"))return void(0,i.Z)({message:this.$t("minePoints.scanFailTips")});const e=decodeURIComponent(t)||"",s=e&&e.split("&")[2].split("=")[1],a=e&&e.split("&")[3].split("=")[1],n=e&&e.split("&")[4].split("=")[1];u.Z.navigateTo({url:`/pages/messageRedirect/messageRedirect?deliverUserId=${s}&orderId=${a}&flag=${n}&fs_app=fs_app`})},scanSuccess(t,e){let s={};if(e&&"h5"===e){if(-1===t.indexOf("fromApp"))return void(0,i.Z)({message:this.$t("minePoints.noUseParams"),duration:2e3});s=this.strToJSON(t)}else s=JSON.parse(t);const{deliverUserId:a,orderId:n,flag:o}=s;this.$router.push({path:`/receive-page?orderId=${n}&deliverUserId=${a}&type=${o}`})},scanFail(){(0,i.Z)({message:this.$t("minePoints.scanFailTips"),duration:2e3})},otherScan(){(0,i.Z)({message:this.$t("minePoints.notSupported"),duration:3e3,forbidClick:!0})},handleScan(){const t="zhiYuan"===u.Z.env,e="dingTalk"===u.Z.env,s="lark"===u.Z.env,a="app"===u.Z.env;e||t||s||a?u.Z.scan({type:"qr"},(i=>{const{code:n}=i;a||t?this.scanSuccess(n,"h5"):e?this.alipayScan(n):s?this.fsScan(n):this.otherScan()}),(t=>{this.scanFail(t)})):this.otherScan()},strToJSON(t){let e=t.split("&"),s={};for(let t of e){let e=t.split("=");s[e[0]]=e[1]}return s},handleConfirm(){a.Z.confirm({message:this.$t("minePoints.isSureGet"),showCancelButton:!0,confirmButtonColor:"#07c160"}).then((async()=>{try{const{data:t}=await m.Z.getSureReceiveGoods(this.goodsInfo.id),e=this.ScanStatus.ALREDAYRECEIVED;this.$router.push({path:"/receive-page",query:{newType:e,id:t.id}})}catch(t){(0,i.Z)({message:"已确认收货",duration:2e3})}})).catch((()=>{}))},async getAddress(){const{getCityData:t}=h.Z,e=["0",...this.ids].join(","),s={parentId:e.length>1?e:"0"},{data:a}=await t(s);return`${await this.getReceiveAddress(a)}`},getReceiveAddress(t){const e=this.areas[0]||"",s=this.areas[1]||"",a=this.areas[2]||"",i=this.areas[3]||"",n=e?t.filter((t=>t.id===e))[0]:{},o=s?n.children.filter((t=>t.id===s))[0]:{},r=a?o.children.filter((t=>t.id===a))[0]:{},l=i?r.children.filter((t=>t.id===i))[0]:{};return[n,o,r,l].filter(Boolean).map((t=>t.address_name)).join("")}})},f=(0,s(1001).Z)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"exchange-success-container"},[t.showHomeLink?s("home-link"):t._e(),s("OperateResult",{attrs:{title:t.title,tips:t.$t("pointsMall.redemptionGuide"),color:t.color,"icon-name":"wancheng"}}),s("div",{staticClass:"exchange-success-module-gap"}),s("ExchangeInfo",{attrs:{title:t.$t("pointsMall.redeemGuide"),publisher:t.exchangeInfoPublisher,contact:t.exchangeInfoContact,address:t.exchangeInfoAddress,"receive-method":t.receiveMethod}}),t.type===t.Status.ISSUED?s("ExchangeInfo",{attrs:{title:t.$t("minePoints.sendInfo"),publisher:t.sendInfoPublisher,contact:t.sendMethod,address:t.sendInfoAddress,"receive-method":t.sendMethod,"receive-com":t.sendInfoContact}}):t._e(),s("ExchangeInfo",{attrs:{title:t.$t("pointsMall.receiveInfo"),publisher:t.receiveInfoPublisher,contact:t.receiveInfoContact,address:t.receiveInfoAddress}}),s("div",{staticClass:"box-bottom"}),1===t.goodsInfo.grant_status?s("div",{staticClass:"exchange-success-scan"},[s("van-button",{attrs:{type:"default"},on:{click:t.handleScan}},[t._v(t._s(t.$t("minePoints.scanQR")))]),s("van-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v(t._s(t.$t("minePoints.conformGet")))])],1):s("div",{staticClass:"exchange-success-scan"},[s("van-button",{attrs:{type:"primary"},on:{click:t.handleScan}},[t._v(t._s(t.$t("minePoints.scanQR")))])],1)],1)}),[],!1,null,"b6562cd8",null).exports},47916:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});var a=s(95082),i=(s(3791),s(93432)),n=(s(74916),s(15306),s(26294)),o=s(78551),r={name:"MineSelectPortal",components:{[i.Z.name]:i.Z,SvgIcon:o.Z},data:()=>({loading:!1}),computed:(0,a.Z)({},(0,n.mapGetters)({userInfo:"user/getUserInfo",portalInfo:"setting/getPortalInfo",primaryColor:"getPrimaryColor"})),mounted(){this.loading=!0,this.$store.dispatch("setting/fetchCustomPortals"),this.loading=!1},methods:{async selectPortal(t){this.portalInfo.defaultSelect.id!==t.id&&await this.$store.dispatch("setting/changeCustomPortals",t),this.$router.replace({path:"/mine"})}}},l=(0,s(1001).Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.loading?s("van-loading"):t._e(),s("div",{staticClass:"mine-select-depart-done"},t._l(t.portalInfo.list,(function(e,a){return s("div",{key:a,staticClass:"mine-select-depart-done-box",on:{click:function(s){return t.selectPortal(e)}}},[s("div",{staticClass:"mine-select-depart-done-box-name",style:{color:t.portalInfo.defaultSelect.id===e.id?t.primaryColor:"#2D3040"}},[t._v(t._s(e.name))]),t.portalInfo.defaultSelect.id===e.id?s("SvgIcon",{staticClass:"mine-select-depart-done-box-icon",attrs:{"icon-class":"icon-icon-test1",size:14,color:t.primaryColor}}):t._e()],1)})),0)],1)}),[],!1,null,"4149c7ca",null).exports},90906:(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});var a={},i=(0,s(1001).Z)(a,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"shanghai-subsidy-guide-container"},[e("div",{staticClass:"shanghai-subsidy-guide-container__content"},[e("div",{staticClass:"shanghai-subsidy-guide-container__content__footer"})])])}],!1,null,"7d618127",null).exports},60048:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});var a=s(95082),i=(s(30033),s(87837)),n=(s(49153),s(5944)),o=(s(82522),s(10342)),r=(s(82500),s(49414)),l=(s(20581),s(50914)),c=(s(57658),s(28387)),d=s(26294),u=s(22648),m=s(95969),h=s(4852),p={name:"EvaluationList",components:{[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,Avatar:h.Z},filters:{formatDate:function(t){return(0,u.p6)(t,"yyyy-MM-dd  hh:mm")}},data(){return{tabs:[],query:{showStatus:"unfinished"},tutorTaskList:[],loading:!0,approvingList:[],approvedList:[],checkedId:[],isIpx:this.$store.state.user.isIpx}},computed:(0,a.Z)({themeColor(){return this.$store.state.themeColor}},(0,d.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){this.query=this.$route.query,this.tabs=[{name:this.$t("tutor.toBeCounseled"),status:"unfinished"},{name:this.$t("tutor.coached"),status:"finished"}],this.getApprovingList(),this.getApprovedList()},methods:{gotoStudyDetail(t){const{query:e}=this.$route;this.$router.push(m.Z.resource.studyTask({resourceId:e.plan_id,studentId:t.user_id}))},getList(t){const{query:e}=this,s={status:t};return c.Z.getApprenticeList(s,e.tutorials_id)},getApprovingList(){this.getList("unfinished").then((t=>{const{data:e=[]}=t.data;this.approvingList=e.map((t=>(0,a.Z)((0,a.Z)({},t),{},{checked:!1}))),this.loading=!1})).catch((()=>{this.loading=!1}))},getApprovedList(){this.getList("finished").then((t=>{const{data:e=[]}=t.data;this.approvedList=e.map((t=>(0,a.Z)((0,a.Z)({},t),{},{checked:!1}))),this.loading=!1})).catch((()=>{this.loading=!1}))},changeTab(t){this.query.showStatus=t},gotoTutorResult(t){this.$router.push(`/tutor-area/tutor-result?tutorials_id=${t.tutorials_id}&user_id=${t.user_id}`)},checkResource(t,e){const{checkedId:s,approvingList:i}=this,n=s.indexOf(t.user_id);let o=[];-1===n?(s.push(t.user_id),o=i.map(((t,s)=>e===s?(0,a.Z)((0,a.Z)({},t),{},{checked:!0}):t))):(s.splice(n,1),o=i.map(((t,s)=>e===s?(0,a.Z)((0,a.Z)({},t),{},{checked:!1}):t))),this.checkedId=s,this.approvingList=o},allCheckout(){const{approvingList:t,checkedId:e}=this;let s=[];if(e.length===t.length)s=t.map((t=>(0,a.Z)((0,a.Z)({},t),{},{checked:!1}))),this.checkedId=[],this.approvingList=s;else{const e=[];s=t.map((t=>(0,a.Z)((0,a.Z)({},t),{},{checked:!0}))),t.forEach((t=>{e.push(t.user_id)})),this.checkedId=e,this.approvingList=s}},gotoEidt(){const{checkedId:t,query:e}=this;t.length&&this.$router.push(`/tutor-area/tutor-coach?tutorials_id=${e.tutorials_id}&tutorials_status=${t.length>1?"all":"single"}&user_id=${t.join(",")}&plan_id=${e.plan_id}`)}}},g=(0,s(1001).Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"people-list-wrapper"},[s("van-tabs",{attrs:{sticky:"",color:t.themeColor.primaryColor},on:{click:t.changeTab},model:{value:t.query.showStatus,callback:function(e){t.$set(t.query,"showStatus",e)},expression:"query.showStatus"}},t._l(t.tabs,(function(e){return s("van-tab",{key:e.status,attrs:{name:e.status,title:e.name}},["unfinished"===t.query.showStatus?[t.loading||0!==t.approvingList.length?s("van-list",{attrs:{finished:!0,"finished-text":t.$t("common.noMore")},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"all-checkout-wrapper",on:{click:t.allCheckout}},[s("div",{staticClass:"all-checkout"},[s("div",{staticClass:"all-item-checkbox"},[s("van-checkbox",{attrs:{shape:"square",value:t.checkedId.length===t.approvingList.length,"checked-color":t.primaryColor}})],1),s("div",{staticClass:"all-checkout-title"},[t._v(t._s(t.$t("tutor.selectAll")))])])]),t._l(t.approvingList,(function(e,a){return s("div",{key:e.user_id,staticClass:"list_card_item"},[s("div",{staticClass:"list_card_item-wrapper"},[s("div",{staticClass:"list_card_item-checkbox",on:{click:function(s){return t.checkResource(e,a)}}},[s("div",{staticClass:"tutors-item-checkbox"},[s("van-checkbox",{attrs:{shape:"square",value:e.checked,"checked-color":t.primaryColor}})],1),s("div",{class:"lecturer-card "+(a===t.approvingList.length-1?"lecturer-card-last":"")},[s("Avatar",{attrs:{src:e.avatar,width:"34",height:"34"}}),s("div",{staticClass:"lecture-right"},[s("div",{staticClass:"lecturer-content_top"},[s("div",{staticClass:"name"},[t._v(" "+t._s(e.name))])]),s("div",{staticClass:"lecturer-content_bottom"},[t._v(" "+t._s(e.departments)+" ")])])],1)]),s("div",{staticClass:"list-card-goto-details",on:{click:function(s){return t.gotoStudyDetail(e)}}},[t._v(" "+t._s(t.$t("tutor.studyDeatil"))+" ")])])])}))],2):s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}})]:[t.loading||0!==t.approvedList.length?s("van-list",{attrs:{finished:!0,"finished-text":t.$t("common.noMore")},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.approvedList,(function(e,a){return s("div",{key:e.user_id,staticClass:"list_card_item"},[s("div",{staticClass:"list_card_item-wrapper",on:{click:function(s){return t.gotoTutorResult(e)}}},[s("div",{staticClass:"list_card_item-checkbox"},[s("div",{class:"lecturer-card "+(a===t.approvingList.length-1?"lecturer-card-last":"")},[s("Avatar",{attrs:{src:e.avatar,width:"34",height:"34"}}),s("div",{staticClass:"lecture-right"},[s("div",{staticClass:"lecturer-content_top"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"lecturer-content_bottom"},[t._v(" "+t._s(e.departments)+" ")])])],1)]),s("div",{staticClass:"list-card-status"},[s("div",{staticClass:"list-card-status-top"},[t._v(t._s("unevaluated"===e.evaluation_status?t.$t("tutor.unevaluated"):t.$t("tutor.evaluated")))]),"unevaluated"!==e.evaluation_status?s("div",{staticClass:"list-card-status-bottom"},[t._v(t._s(t._f("formatDate")(e.apprentice_create_time)))]):t._e()])])])})),0):s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}})]],2)})),1),"unfinished"===t.query.showStatus&&t.approvingList.length>0?s("div",{class:"people-list-footer "+(t.$store.state.user.isIpx?"people-list-footer-ipx":"")},[s("div",{staticClass:"people-list-footer-btn",style:"backgroundColor: "+(t.checkedId.length?t.primaryColor:""),on:{click:function(e){return t.gotoEidt()}}},[t._v(" "+t._s(t.$t("tutor.bulkSubmission"))+" ")])]):t._e()],1)}),[],!1,null,"5ec3382e",null).exports},21605:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});s(31146);var a=s(41610),i=s(95082),n=(s(93787),s(20090)),o=(s(37254),s(58086)),r=(s(30033),s(87837)),l=(s(49153),s(5944)),c=(s(82522),s(10342)),d=(s(82500),s(49414)),u=(s(20581),s(50914)),m=(s(74916),s(4723),s(57658),s(28387)),h=s(26294),p=s(22648),g=s(95084),v={name:"TutorCoachStudentEdit",components:{[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,ClAttachment:g.Z},filters:{formatDate:function(t){return(0,p.p6)(t,"yyyy-MM-dd  hh:mm")}},beforeRouteLeave(t,e,s){"course-reader"===t.name?this.isRefresh=!1:(this.isRefresh=!0,this.datas={},this.stepsList=[],this.score=0),s()},data(){return{loading:!0,suggest:"",score:0,totalScore:100,hasScore:!1,datas:{},tutorials_id:"",stepsList:[],isIpx:this.$store.state.user.isIpx,isRefresh:!1}},computed:(0,i.Z)({themeColor(){return this.$store.state.themeColor}},(0,h.mapGetters)({userId:"getUserId",primaryColor:"getPrimaryColor"})),mounted(){const{query:t}=this.$route;this.hasScore="on"===t.switch,this.tutorials_id=t.tutorials_id,this.tutor_user_id=t.tutor_user_id,this.planId=t.planId,this.initData()},activated(){if(this.isRefresh){const{query:t}=this.$route;this.hasScore="on"===t.switch,this.tutorials_id=t.tutorials_id,this.tutor_user_id=t.tutor_user_id,this.planId=t.planId,this.initData()}},methods:{initData(){const{tutorials_id:t,tutor_user_id:e}=this;this.$toast.loading({duration:0,loadingType:"spinner",forbidClick:!0}),m.Z.getApprenticeInfo({tutorials_id:t,tutorials_status:"single",tutor_user_id:e,user_id:this.userId}).then((t=>{this.loading=!1,this.$toast.clear();const e=t.data.data;e.approval_time=(0,p.p6)(e.approval_time,"yyyy-MM-dd  hh:mm"),e.steps&&e.steps.map((t=>{t.resources&&t.resources.map((t=>{t.type=t.type.match(/^(image\/)/)?t.type.split("/")[1]:t.type}))})),this.datas=e,this.stepsList=e.steps||[],this.score=Number(e.score),this.suggest="unevaluated"===e.evaluation_status?"":e.evaluation})).catch((()=>{this.loading=!1,this.$toast.clear()}))},submit(){const{tutorials_id:t,tutor_user_id:e,planId:s}=this,{suggest:i,score:n}=this;if(i)return i.length>240?(a.Z.alert({title:this.$t("mine.loginOutTips"),message:this.$t("tutor.charactersTips",{num:240})}),!1):void m.Z.putEvaluation({tutorials_id:t,planId:s,score:n,evaluation:i}).then((i=>{0===i.data.code&&a.Z.alert({title:this.$t("promptMessage.submitSuccessfully")}).then((()=>{this.$router.push(`/tutor-area/student-result?tutorials_id=${t}&tutor_user_id=${e}&planId=${s}&rootInPage=inFieldOperation`)}))}))}}},_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"student-edit"},[t.loading?t._e():s("div",{staticClass:"student-edit-in-field-operation"},[t.hasScore?s("div",{staticClass:"operation-score"},[s("div",{staticClass:"operation-score__title"},[t._v(t._s(t.$t("tutor.rateTutor",{name:t.datas.tutor_name||""})))]),s("div",{staticClass:"operation-score__score",style:"color: "+t.themeColor.primaryColor},[t._v(t._s(t.score)),s("span",[t._v(t._s(t.$t("myRating.point")))])]),s("div",{staticClass:"operation-score__slider"},[s("van-slider",{attrs:{min:0,max:t.totalScore},scopedSlots:t._u([{key:"button",fn:function(){return[s("div",{staticClass:"custom-button"})]},proxy:!0}],null,!1,2603049259),model:{value:t.score,callback:function(e){t.score=e},expression:"score"}})],1),s("div",{staticClass:"operation-score__scale"},[s("span",[t._v("0"+t._s(t.$t("myRating.point")))]),s("span",[t._v(t._s(t.totalScore/2)+t._s(t.$t("myRating.point")))]),s("span",[t._v(t._s(t.totalScore)+t._s(t.$t("myRating.point")))])])]):t._e(),s("div",{staticClass:"in-field-operation-content"},[s("div",{staticClass:"operation-content-section"},[s("van-field",{attrs:{rows:"5",type:"textarea",maxlength:240,placeholder:t.$t("tutor.textAreaTips")},model:{value:t.suggest,callback:function(e){t.suggest=e},expression:"suggest"}})],1)]),t.stepsList.length>0?s("div",{staticClass:"results-in-field-body"},[s("div",{class:"body-list "+(2===t.datas.status?"body-list-margin":"")},[s("div",{staticClass:"tutor-desc"},[t._v(t._s(t.$t("tutor.tutorDesc")))]),t._l(t.stepsList,(function(e,a){return s("div",{key:String(a),staticClass:"list-item"},[s("div",{staticClass:"list-title"},[t._v(t._s(t.$t("tutor.stepNumber",{step:a+1})))]),e.content?s("div",{staticClass:"list-describe"},[t._v(t._s(e.content))]):t._e(),e.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":e.resources,"is-delete":!1,"is-preview":!0}}):t._e()],1)}))],2)]):t._e(),s("div",{class:t.isIpx?"student-edit-footer student-edit-footer-ipx":"student-edit-footer"},[s("div",{class:t.suggest?"submint-btn-active":"submint-btn",style:"backgroundColor: "+(t.suggest?t.themeColor.primaryColor:""),on:{click:function(e){return t.submit()}}},[t._v(" "+t._s(t.$t("common.submit"))+" ")])])])])}),[],!1,null,"304955e6",null).exports},72619:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});var a=s(95082),i=(s(37254),s(58086)),n=(s(30033),s(87837)),o=(s(49153),s(5944)),r=(s(82522),s(10342)),l=(s(82500),s(49414)),c=(s(20581),s(50914)),d=(s(74916),s(4723),s(57658),s(28387)),u=s(26294),m=s(22648),h=s(95084),p={name:"EvaluationList",components:{[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClAttachment:h.Z},filters:{formatDate:function(t){return(0,m.p6)(t,"yyyy-MM-dd  hh:mm")}},data(){return{loading:!0,datas:{},stepsList:[],origin:"go",clickArea:"",isIpx:this.$store.state.user.isIpx}},computed:(0,a.Z)({themeColor(){return this.$store.state.themeColor}},(0,u.mapGetters)({userId:"getUserId",primaryColor:"getPrimaryColor"})),mounted(){const{query:t}=this.$route;this.origin=t.rootInPage||"go",this.tutorials_id=t.tutorials_id,this.tutor_user_id=t.tutor_user_id,this.planId=t.planId,this.clickArea="",this.initData()},methods:{initData(){const{tutorials_id:t,tutor_user_id:e}=this;d.Z.getApprenticeInfo({tutorials_id:t,tutorials_status:"single",tutor_user_id:e,user_id:this.userId}).then((t=>{const e=t.data.data;e.apprentice_create_time=(0,m.p6)(e.apprentice_create_time,"yyyy-MM-dd  hh:mm"),e.steps&&e.steps.map((t=>{t.resources&&t.resources.map((t=>{t.type=t.type.match(/^(image\/)/)?t.type.split("/")[1]:t.type}))})),this.loading=!1,this.datas=e,this.stepsList=e.steps||[]})).catch((()=>{this.loading=!1}))},resubmit(){const{tutor_user_id:t,tutorials_id:e,planId:s}=this;"inFieldOperation"===this.origin?(this.clickArea="resubmit",this.$router.go(-1)):this.$router.push(`/tutor-area/student-edit?tutorials_id=${e}&tutor_user_id=${t}&planId=${s}&switch=on`)}}},g=(0,s(1001).Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"student-results-in-field"},[s("div",{staticClass:"results-in-field-header"},[s("div",{staticClass:"status-box"},["unevaluated"===t.datas.evaluation_status?s("div",{staticClass:"status-unevaluated"},[s("div",{staticClass:"status-title"},[t._v(t._s(t.$t("tutor.rateTutor",{name:t.datas.tutor_name||""})))]),s("span",{staticClass:"status-unevaluated-desc"},[t._v(t._s(t.$t("tutor.rateTutor",{name:t.datas.tutor_name||""})))]),s("span",{staticClass:"status-unevaluated-people"},[t._v(t._s(t.$t("tutor.assessor"))+"："+t._s(t.datas.apprentice_user_name))])]):s("div",{staticClass:"status-evaluated"},[s("div",{staticClass:"status-title"},[t._v(t._s(t.$t("tutor.rateTutor",{name:t.datas.tutor_name||""})))]),s("div",{staticClass:"status-evaluated-title"},[s("span",{staticClass:"status-evaluated-title-status"},[t._v(t._s(t.datas.score)+t._s(t.$t("myRating.point")))]),s("span",{staticClass:"status-evaluated-title-name"},[t._v(t._s(t.$t("tutor.studentAssessmentResult")))])]),s("div",{staticClass:"status-evaluated-content"},[s("span",{staticClass:"comments"},[t._v(t._s(t.$t("tutor.comments"))+"：")]),s("span",{staticClass:"comments-content"},[t._v(t._s(t.datas.evaluation))]),s("span",{staticClass:"comments-name"},[t._v(t._s(t.$t("tutor.assessor"))+"："+t._s(t.datas.apprentice_user_name))]),s("span",{staticClass:"comments-time comments-name"},[t._v(t._s(t.$t("tutor.evaluationTime"))+"："+t._s(t.datas.apprentice_create_time))])])])])]),t.stepsList.length>0?s("div",{staticClass:"results-in-field-body"},[s("div",{class:"body-list "+(2===t.datas.status?"body-list-margin":"")},[s("div",{staticClass:"tutor-desc",attrs:{div:""}},[t._v(t._s(t.$t("tutor.tutorDesc")))]),t._l(t.stepsList,(function(e,a){return s("div",{key:String(a),staticClass:"list-item"},[s("div",{staticClass:"list-title"},[t._v(t._s(t.$t("tutor.stepNumber",{step:a+1})))]),e.content?s("div",{staticClass:"list-describe"},[t._v(t._s(e.content))]):t._e(),e.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":e.resources,"is-delete":!1,"is-preview":!0}}):t._e()],1)}))],2)]):t._e(),s("div",{staticClass:"ipx-fix"}),s("div",{class:"results-in-field-footer "+(t.isIpx?"student-result-footer-ipx":"")},[s("div",{staticClass:"results-in-field-footer-btn",style:"background: "+t.themeColor.primaryColor,on:{click:function(e){return t.resubmit()}}},[t._v(t._s(t.$t("attestation.resubmit")))])])])}),[],!1,null,"5175e352",null).exports},16256:(t,e,s)=>{s.r(e),s.d(e,{default:()=>m});s(49153);var a=s(5944),i=(s(82522),s(10342)),n=(s(82500),s(49414)),o=(s(20581),s(50914)),r=s(28387),l=(s(57658),{name:"TaskCard",components:{SvgIcon:s(78551).Z},props:{dataSource:{type:Object,required:!0,default:()=>({})},showStatus:{type:String,required:!0,default:()=>"unfinished"}},data:()=>({}),computed:{themeColor(){return this.$store.state.themeColor}},methods:{practicalOperationDetail(){const{tutorials_id:t,plan_id:e}=this.dataSource;this.$router.push({path:"/tutor-area/people-list",query:{showStatus:this.showStatus,tutorials_id:t,plan_id:e}})}}}),c=s(1001),d=(0,c.Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-container tutor-task-list-list-wrapper"},[s("div",{staticClass:"main-title"},[t._v(t._s(t.dataSource.title))]),s("div",{staticClass:"list_card_body"},[s("div",{staticClass:"content",on:{click:function(e){return t.practicalOperationDetail()}}},[s("div",{staticClass:"approvel-icon-box"},[s("SvgIcon",{staticClass:"iconfont",attrs:{"icon-class":"icon-fudaorenwu",color:"#F5A422"}})],1),s("div",{staticClass:"content-title"},[t._v(t._s(t.dataSource.tutorials_title))]),s("div",{staticClass:"status-tip"},[s("span",{staticClass:"status",staticStyle:{color:"'#7F849A'"}},[t._v(" "+t._s("unfinished"===t.showStatus?t.$t("tutor.toFinish"):t.$t("signIn.seeDetails"))+" ")]),s("span",{staticClass:"arrow"},[s("SvgIcon",{staticClass:"iconfont",attrs:{"icon-class":"icon-jinrujiantou",color:"#7F849A",size:12}})],1)])])]),s("div",{staticClass:"author"},[s("span",[t._v(t._s(t.dataSource.train_count)+t._s(t.$t("data.people"))+" "+t._s("unfinished"===t.showStatus?t.$t("tutor.toBeCounseled"):t.$t("tutor.coached")))])])])}),[],!1,null,"490ca2a9",null).exports,u={name:"EvaluationList",components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z,TaskCard:d},data:()=>({tabs:[],params:{status:"unfinished",page_number:1},tutorTaskList:[],loading:!0,finished:!1}),computed:{themeColor(){return this.$store.state.themeColor}},created(){this.tabs=[{name:this.$t("common.unfinished"),status:"unfinished"},{name:this.$t("common.finished"),status:"finished"}],this.getTutorTaskList()},methods:{onLoad(){this.loading=!0,this.getTutorTaskList()},getTutorTaskList(){1===this.params.page_number&&(this.tutorTaskList=[]),r.Z.getTutorCoachTaskList(this.params).then((t=>{this.tutorTaskList=this.tutorTaskList.concat(t.data.list),this.params.page_number+=1,this.finished="false"===t.data.has_next_page,this.loading=!1})).catch((()=>{this.loading=!1,this.finished=!0}))},changeTab(t){this.params.status=t,this.params.page_number=1,this.finished=!1,this.onLoad()}}},m=(0,c.Z)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tutor-list"},[s("van-tabs",{attrs:{sticky:"",color:t.themeColor.primaryColor},on:{click:t.changeTab},model:{value:t.params.status,callback:function(e){t.$set(t.params,"status",e)},expression:"params.status"}},t._l(t.tabs,(function(e){return s("van-tab",{key:e.status,attrs:{name:e.status,title:e.name}},[t.loading||0!==t.tutorTaskList.length?s("van-list",{attrs:{finished:t.finished,"finished-text":t.$t("common.noMore")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.tutorTaskList,(function(a,i){return s("div",{key:e.id+""+i,staticClass:"list_card_item"},[s("task-card",{attrs:{"data-source":a,"show-status":t.params.status}})],1)})),0):s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}})],1)})),1)],1)}),[],!1,null,"52cd2866",null).exports},65150:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});s(31146);var a=s(41610),i=s(95082),n=(s(93787),s(20090)),o=(s(49153),s(5944)),r=(s(82522),s(10342)),l=(s(82500),s(49414)),c=(s(20581),s(50914)),d=(s(74916),s(4723),s(33948),s(57658),s(26294)),u=s(28387),m=s(78551),h=s(64404),p=s(95084),g={name:"TutorCoach",components:{[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,ClUpload:h.Z,SvgIcon:m.Z,ClAttachment:p.Z},beforeRouteLeave(t,e,s){"course-reader"===t.name?this.isRefresh=!1:(this.isRefresh=!0,this.datas={},this.stepsList=[]),s()},data:()=>({spaceId:"",datas:{},stepsList:[],tutorials_id:"",tutorials_status:"",user_id:"",isDelete:!0,isSubmit:!1,isSaveDrafts:!0,iconList:[],refreshKey:(new Date).getTime(),isRefresh:!1}),computed:(0,i.Z)({},(0,d.mapGetters)({userId:"getUserId",themeColor:"getPrimaryColor"})),created(){const{query:t}=this.$route;this.tutorials_id=t.tutorials_id,this.tutorials_status=t.tutorials_status,this.user_id=t.user_id,this.plan_id=t.plan_id,this.initData()},activated(){if(this.isRefresh){const{query:t}=this.$route;this.tutorials_id=t.tutorials_id,this.tutorials_status=t.tutorials_status,this.user_id=t.user_id,this.plan_id=t.plan_id,this.initData()}},destroyed(){this.isSaveDrafts&&this.isSubmit&&"submit"!==this.datas.tutor_status&&this.autoSave()},methods:{initData(){const{tutorials_id:t,tutorials_status:e,user_id:s}=this;u.Z.getApprenticeInfo({tutorials_id:t,tutorials_status:e,user_id:s,tutor_user_id:this.userId}).then((t=>{this.datas=t.data.data;let e=[];0===t.data.data.steps.length?e=[{content:"",resources:[],step:this.$t("tutor.stepNumber",{step:1})}]:(t.data.data.steps.forEach((t=>{t.step=this.$t("tutor.stepNumber",{step:t.step}),null===t.content&&(t.content=""),t.resources&&t.resources.forEach((t=>{t.type=t.type.match(/^(image\/)/)?t.type.split("/")[1]:t.type}))})),e=t.data.data.steps),this.stepsList=e,this.inputMonitor(e)}))},changContent(){this.inputMonitor(this.stepsList)},inputMonitor(t){let e=0;t.forEach((t=>{0!==t.resources.length||t.content||(e+=1)})),e===t.length?this.isSubmit=!1:this.isSubmit=!0},onSuccess(t,e){const{stepsList:s}=this;e.resources=[...e.resources,...t],this.stepsList=s,this.inputMonitor(s)},addStep(){const{stepsList:t}=this,e=[{content:"",resources:[],step:this.$t("tutor.stepNumber",{step:t.length+1})}];this.stepsList=t.concat(e),this.inputMonitor(this.stepsList)},stepsDelete(t){const{stepsList:e}=this;e.splice(t,1),this.stepsList=e.map(((t,e)=>(0,i.Z)((0,i.Z)({},t),{},{step:this.$t("tutor.stepNumber",{step:e+1})}))),this.inputMonitor(e)},deleteFile(t,e){a.Z.confirm({title:this.$t("promptMessage.warmTips"),message:this.$t("promptMessage.delete"),confirmButtonText:this.$t("buttons.confirm"),cancelButtonText:this.$t("buttons.cancel"),showCancelButton:!0}).then((()=>{const{resources:s}=this.stepsList[e];this.operationFileDelete(s[t].id,e,t)}))},operationFileDelete(t,e,s){u.Z.operationFileDelete(t).then((()=>{const{stepsList:t}=this;t[e].resources.splice(s,1),this.stepsList=t,this.inputMonitor(t)}))},submit(t){const{tutorials_id:e,user_id:s,plan_id:i}=this;let n=0;const o=[];return!!this.isSubmit&&(this.stepsList.forEach(((t,e)=>{0!==t.resources.length||t.content||(n+=1);const s={content:t.content,step:e+1,resources:[]};o.push(s),t.resources.forEach(((t,s)=>{const a={resourceId:t.id,sort:s+1};o[e].resources.push(a)}))})),n>0&&"1"===t?(a.Z.confirm({title:"",message:this.$t("attestation.fillPracticalOperationTips"),confirmButtonText:this.$t("buttons.confirm"),showCancelButton:!1}),!1):(this.$toast.loading({duration:0,message:"1"===t?this.$t("attestation.submit"):this.$t("attestation.saveIng"),loadingType:"spinner",forbidClick:!0}),void u.Z.putTutorSubmit({tutorials_id:e,user_id:s,status:t,allList:o}).then((a=>{if(this.$toast.clear(),0===a.data.code)if(this.isSaveDrafts=!1,"0"===t)this.$router.back(-1);else{1===(s.split(",")||[]).length?this.$router.push(`/tutor-area/tutor-result?tutorials_id=${e}&user_id=${s}&plan_id=${i}&rootInPage=inFieldOperation`):this.$router.back(-1)}else this.$toast.clear(),this.$toast(this.$t("attestation.saveFail"))}))))},autoSave(){const{tutorials_id:t,user_id:e}=this,s=[];this.stepsList.forEach(((t,e)=>{const a={content:t.content,step:e+1,resources:[]};s.push(a),t.resources.forEach(((t,a)=>{const i={resourceId:t.id,sort:a+1};s[e].resources.push(i)}))})),u.Z.putTutorSubmit({tutorials_id:t,user_id:e,status:0,allList:s})}}},v=g,_=(0,s(1001).Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tutor-edit-in-field-operation"},[s("div",{staticClass:"in-field-operation-top-scrollView"},[t.datas.content||t.datas.title?s("div",{staticClass:"in-field-operation-top-attachment"},[t.datas.title?s("div",{staticClass:"in-field-operation-title"},[t._v(" "+t._s(t.datas.title)+" ")]):t._e(),t.datas.content?s("div",{staticClass:"in-field-operation-context"},[s("div",{staticClass:"label"},[t._v(t._s(t.$t("tutor.counselingRequirements"))+"：")]),s("div",{staticClass:"content"},[t._v(t._s(t.datas.content))])]):t._e()]):t._e(),t._l(t.stepsList,(function(e,a){return s("div",{key:a,staticClass:"in-field-operation-content"},[s("div",{staticClass:"operation-content-title"},[s("span",{staticClass:"step"},[t._v(t._s(e.step))]),0!=a?s("div",{on:{click:function(e){return t.stepsDelete(a)}}},[s("SvgIcon",{attrs:{"icon-class":"icon-fault",color:"#7F849A",size:12}})],1):t._e()]),s("div",{staticClass:"operation-content-section"},[s("van-field",{attrs:{rows:"5",type:"textarea",maxlength:1200,placeholder:t.$t("attestation.practicalExamTips")},on:{input:function(e){return t.changContent()}},model:{value:e.content,callback:function(s){t.$set(e,"content",s)},expression:"item.content"}})],1),e.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":e.resources,"is-delete":!0,"is-preview":!0},on:{delete:function(e){return t.deleteFile(e,a)}}}):t._e(),s("cl-upload",{attrs:{"list-type":["photo","album","video","dingPlate"],"disk-name":"operation"},on:{onSuccess:function(s){return t.onSuccess(s,e)}}})],1)})),s("div",{staticClass:"in-field-operation-step",on:{click:function(e){return t.addStep()}}},[s("div",{staticClass:"add-step"},[t._v(" "+t._s(t.$t("attestation.addSteps"))+" ")])]),s("div",{staticClass:"ipx-fix"}),s("div",{class:t.$store.state.user.isIpx?"in-field-operation-footer in-field-operation-footer-ipx":"in-field-operation-footer"},[s("div",{class:t.isSubmit?"save-btn-active":"save-btn",style:t.isSubmit?"border: 1px solid "+t.themeColor+";color: "+t.themeColor:"",on:{click:function(e){return t.submit("0")}}},[t._v(" "+t._s(t.$t("signIn.save"))+" ")]),s("div",{class:t.isSubmit?"submint-btn-active":"submint-btn",style:{background:t.isSubmit?t.themeColor:""},on:{click:function(e){return t.submit("1")}}},[t._v(" "+t._s(t.$t("common.submit"))+" ")])])],2)])}),[],!1,null,"210cdca2",null).exports},4315:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var a=s(95082),i=(s(30033),s(87837)),n=(s(49153),s(5944)),o=(s(82522),s(10342)),r=(s(82500),s(49414)),l=(s(20581),s(50914)),c=(s(74916),s(4723),s(57658),s(28387)),d=s(26294),u=s(22648),m=s(95084),h={name:"EvaluationList",components:{[l.Z.name]:l.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,ClAttachment:m.Z},filters:{formatDate:function(t){return(0,u.p6)(t,"yyyy-MM-dd  hh:mm")}},data(){return{datas:{},stepsList:[],origin:"go",tutorials_id:"",user_id:"",plan_id:"",clickArea:"",isIpx:this.$store.state.user.isIpx,loading:!0}},computed:(0,a.Z)({themeColor(){return this.$store.state.themeColor}},(0,d.mapGetters)({userId:"getUserId"})),mounted(){const{query:t}=this.$route;this.origin=t.rootInPage||"go",this.tutorials_id=t.tutorials_id,this.user_id=t.user_id,this.plan_id=t.plan_id,this.initData()},methods:{initData(){this.$toast.loading({duration:0,loadingType:"spinner",forbidClick:!0});const{tutorials_id:t,user_id:e}=this;c.Z.getApprenticeInfo({tutorials_id:t,tutorials_status:"single",user_id:e,tutor_user_id:this.userId}).then((t=>{this.loading=!1,this.$toast.clear();const e=t.data.data;e.apprentice_create_time=(0,u.p6)(e.apprentice_create_time,"yyyy-MM-dd  hh:mm"),e.steps&&e.steps.map((t=>{t.resources&&t.resources.map((t=>{t.type=t.type.match(/^(image\/)/)?t.type.split("/")[1]:t.type}))})),this.datas=e,this.stepsList=e.steps||[]})).catch((()=>{this.loading=!1}))},resubmit(){const{tutorials_id:t,user_id:e,plan_id:s}=this,a=e.split(",")||[];"inFieldOperation"===this.origin?(this.clickArea="resubmit",this.$router.go(-1)):1===a.length&&this.$router.push(`/tutor-area/tutor-coach?tutorials_id=${t}&tutorials_status=single&user_id=${e}&plan_id=${s}`)}}},p=(0,s(1001).Z)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loading?t._e():s("div",{staticClass:"tutor-result"},[s("div",{staticClass:"tutor-results-in-field"},[s("div",{staticClass:"results-in-field-header"},[s("div",{staticClass:"status-box"},["unevaluated"===t.datas.evaluation_status?s("div",{staticClass:"status-unevaluated"},[s("span",{staticClass:"status-unevaluated-desc"},[t._v(t._s(t.$t("tutor.waitStudentEvaluation")))]),s("span",{staticClass:"status-unevaluated-people"},[t._v(t._s(t.$t("tutor.assessor"))+"："+t._s(t.datas.apprentice_user_name))])]):s("div",{staticClass:"status-evaluated"},[s("div",{staticClass:"status-evaluated-title"},[s("span",{staticClass:"status-evaluated-title-status"},[t._v(t._s(t.datas.score)+t._s(t.$t("myRating.point")))]),s("span",{staticClass:"status-evaluated-title-name"},[t._v(t._s(t.$t("tutor.studentAssessmentResult")))])]),s("div",{staticClass:"status-evaluated-content"},[s("span",{staticClass:"comments"},[t._v(t._s(t.$t("common.introduction"))+"：")]),s("span",{staticClass:"comments-content"},[t._v(t._s(t.datas.evaluation))]),s("span",{staticClass:"comments-name"},[t._v(t._s(t.$t("tutor.assessor"))+"："+t._s(t.datas.apprentice_user_name))]),s("span",{staticClass:"comments-time comments-name"},[t._v(t._s(t.$t("tutor.evaluationTime"))+"："+t._s(t.datas.apprentice_create_time))])])])])]),t.stepsList.length>0?s("div",{staticClass:"results-in-field-body"},[s("div",{class:"body-list "+(2===t.datas.status?"body-list-margin":"")},t._l(t.stepsList,(function(e,a){return s("div",{key:String(a),staticClass:"list-item"},[s("div",{staticClass:"list-title"},[t._v(t._s(t.$t("tutor.stepNumber",{step:a+1})))]),e.content?s("div",{staticClass:"list-describe"},[t._v(t._s(e.content))]):t._e(),e.resources.length>0?s("cl-attachment",{attrs:{"attachment-list":e.resources,"is-delete":!1,"is-preview":!0}}):t._e()],1)})),0)]):t._e(),s("div",{class:"results-in-field-footer "+(t.isIpx?"tutor-result-footer-ipx":"")},[s("div",{staticClass:"results-in-field-footer-btn",style:t.themeColor,on:{click:function(e){return t.resubmit()}}},[t._v(t._s(t.$t("attestation.resubmit")))])])])])}),[],!1,null,"59f82e3f",null).exports},15790:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});s(34837);var a=s(39146),i=(s(49153),s(5944)),n=(s(52355),s(29233)),o=(s(20581),s(50914)),r=(s(33948),s(57658),s(22648)),l=s(28387),c={name:"UpdateVersion",components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z},filters:{formatDate:function(t){return(0,r.p6)(t,"yyyy-MM-dd hh:mm:ss")}},data:()=>({list:[],loading:!1,finished:!1,page:{page_num:0,page_size:10}}),methods:{getNotificationInfo(){1===this.page.page_num&&(this.list=[],a.Z.loading({duration:0,forbidClick:!0,message:this.$t("common.loading")})),l.Z.getNotificationInfo(this.page).then((t=>{this.list=[...this.list,...t.data.data.list],this.finished=this.list.length>=t.data.data.total,this.loading=!1,a.Z.clear()})).catch((()=>{this.loading=!1,this.finished=!0,a.Z.clear()}))},onLoad(){this.loading=!0,this.page.page_num+=1,this.getNotificationInfo()},toLookDetail(t){this.$router.push({path:"/mine/version-info",query:{id:t}})}}},d=(0,s(1001).Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"version-update"},[s("van-list",{staticClass:"version-update-list",attrs:{finished:t.finished,"finished-text":t.list.length>0?t.$t("mine.noMore"):null},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return s("van-cell",{key:e.id,on:{click:function(s){return t.toLookDetail(e.id)}}},[s("div",{staticClass:"version-update-list-container"},[s("div",{staticClass:"version-update-list-status"},[0===e.status?s("span",{staticClass:"dot unread"}):t._e(),1===e.status?s("span",{staticClass:"dot read"}):t._e()]),s("div",{staticClass:"version-update-list-info"},[s("div",{staticClass:"version-update-list-info-top"},[s("span",{staticClass:"name"},[t._v(t._s(e.version_number))])]),s("div",{staticClass:"version-update-list-info-bot"},[s("span",{staticClass:"time"},[t._v(" "+t._s(t.$t("mine.releaseTime"))+"："+t._s(t._f("formatDate")(e.begin_date)))])])])])])})),1),0===t.list.length?s("van-empty",{attrs:{description:t.$t("common.noDataTextTip")}}):t._e()],1)}),[],!1,null,"03453d6b",null).exports},23260:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});var a=s(28387),i=s(22648),n={filters:{formatDate:function(t){return(0,i.p6)(t,"yyyy-MM-dd  hh:mm:ss")}},data:()=>({versionInfo:{}}),created(){const{id:t}=this.$route.query;this.getNotificationInfo(t)},methods:{async getNotificationInfo(t){const{data:e}=await a.Z.getNotificationInfo({id:t});e&&(this.versionInfo=e.data)}}},o=(0,s(1001).Z)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"version-info"},[s("div",{staticClass:"version-info-container"},[s("div",{staticClass:"name"},[t._v(" "+t._s(t.versionInfo.version_number)+" ")]),s("div",{staticClass:"time"},[t._v(" "+t._s(t.$t("mine.releaseTime"))+"："+t._s(t._f("formatDate")(t.versionInfo.begin_date))+" ")]),s("h5",[t._v(t._s(t.$t("mine.summary")))]),s("div",{staticClass:"digest",domProps:{innerHTML:t.xss(t._s(t.versionInfo.digest))}}),s("h5",[t._v(t._s(t.$t("mine.content")))]),t.versionInfo.content?s("div",{staticClass:"content",domProps:{innerHTML:t.xss(t._s(t.versionInfo.content))}}):s("div",[t._v("--")])])])}),[],!1,null,"973ed3e0",null).exports},20206:(t,e,s)=>{s.d(e,{h:()=>a});const a={creation:{lang:"approval.initiateApproval",color:"#FFA000"},pass:{lang:"approval.pass",color:"#5DBD66"},reject:{lang:"approval.reject",color:"#D8403D"}}},92442:(t,e,s)=>{s.d(e,{gG:()=>n,gT:()=>i,jE:()=>r,oH:()=>o,sx:()=>a,uo:()=>l});s(73210),s(74916),s(77601);const a=(t,e)=>!(t.trim().length>e),i=(t,e)=>!(t.trim().length<e),n=t=>!!/^[\x2D0-9]+$/.test(t),o=t=>!!/\b[%\+\x2D\.0-9A-Z_a-z]+@[\x2D\.0-9A-Z_a-z]+\.[A-Za-z]{2,6}\b/.test(t),r=t=>!!/^[0-9]{6}$/.test(t),l=t=>!!/(?=(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*[A-Z])(?=(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*[a-z])(?=(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*[0-9])/.test(t)}}]);