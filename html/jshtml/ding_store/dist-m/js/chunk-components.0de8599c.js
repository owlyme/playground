"use strict";(self.webpackChunkvue_h5_template=self.webpackChunkvue_h5_template||[]).push([[525],{74022:(e,t,s)=>{s.d(t,{Z:()=>l});s(70885);var a=s(6458),i=(s(18144),s(65641)),o=(s(23307),s(81392)),r=(s(25773),s(35791)),n={components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z},filters:{filterShortName(e){if(e)return e.substring(e.length-2)}},props:{users:{type:Array,default:()=>[]},isFold:{type:Boolean,default:!1},max:{type:Number,default:2},isMust:{type:Boolean,default:!0},signType:{type:String,default:"any"},edit:{type:Boolean,default:!0},joint:{type:Boolean,default:!0}},data:()=>({}),computed:{},created(){},mounted(){},methods:{}},l=(0,s(1001).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-row",{staticClass:"approver",class:{fold:e.isFold},attrs:{type:"flex"}},[e.isFold&&e.users.length>e.max?s("van-col",{staticClass:"all",on:{click:function(t){return e.$emit("onAll")}}},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{staticClass:"head"},[s("van-icon",{staticClass:"friends-icon",attrs:{name:"friends"}})],1)]),s("div",{staticClass:"right"},[s("span",{staticClass:"joint"},["all"===e.signType?[e._v("+")]:"any"===e.signType?[e._v("/")]:[e._v(">")]],2)])]),s("div",{staticClass:"bottom"},[s("p",{staticClass:"name"},[e._v(e._s(e.$t("approvals.lookAtAll")))])])]):e._e(),e._l(e.users,(function(t,a){return s("van-col",{key:t.id,class:{hide:e.isFold&&e.users.length>e.max&&a<e.users.length-e.max}},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{staticClass:"head"},[e.edit?s("div",{staticClass:"remove"},[s("van-icon",{attrs:{name:"clear"},on:{click:function(t){return e.$emit("onRemove",a)}}})],1):e._e(),e._v(" "+e._s(e._f("filterShortName")(t.name))+" ")])]),e.edit||!e.edit&&e.users.length>1&&a!==e.users.length-1?s("div",{staticClass:"right"},[e.joint?s("span",{staticClass:"joint"},["all"===e.signType?[e._v("+")]:"any"===e.signType?[e._v("/")]:[e._v(">")]],2):e._e()]):e._e()]),s("div",{staticClass:"bottom"},[s("p",{staticClass:"name"},[e._v(e._s(t.name))])])])})),e.edit?s("van-col",{staticClass:"add",on:{click:function(t){return e.$emit("onAdd",e.users)}}},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{staticClass:"head"},[e.isFold&&e.isMust&&0===e.users.length?s("div",{staticClass:"remove"},[s("span",{staticClass:"must"},[e._v("*")])]):e._e(),s("van-icon",{staticClass:"plus-icon",attrs:{name:"plus"}})],1)])])]):e._e()],2)}),[],!1,null,"16fb0caa",null).exports},86722:(e,t,s)=>{s.d(t,{Z:()=>i});var a={name:"CommonAudio",props:{playerId:{type:String,default:"player-id"},playerUrl:{type:String,default:""},loop:{type:Boolean,default:!1},controls:{type:Boolean,default:!1}},methods:{onPlayerEnded(){this.$emit("onPlayerEnded")},onPlay(){this.$emit("onPlay")},onPause(){this.$emit("onPause")}}},i=(0,s(1001).Z)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("audio",{staticClass:"common-audio",attrs:{id:e.playerId,loop:e.loop,controls:e.controls,src:e.playerUrl},on:{ended:e.onPlayerEnded,play:e.onPlay,pause:e.onPause}})}),[],!1,null,"a5ab6d36",null).exports},4852:(e,t,s)=>{s.d(t,{Z:()=>r});s(47601);var a=s(44951),i=s.p+"img/avatar_dark_default.7d1bb4d1.png",o={name:"Avatar",components:{[a.Z.name]:a.Z},props:{src:{type:String,default:""},fit:{type:String,default:"fill"},sex:{type:Number,default:2},width:{type:[Number,String],default:40},height:{type:[Number,String],default:40},sexWidth:{type:Number,default:15},sexHeight:{type:Number,default:15}},data:()=>({defaultAvatar:i,ManTipPicture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAA0lBMVEUAAABJtv9Vqv9VqvRVo+pbqvRVp/BWqO5Xp+5WqO9Wp+5Vp+5Wp+5Wp+5Wp+5WqO9Wp+9Wp+5Xp+5aqe5dq+5eq+5frO5vtPBwtPBxtPBxtfBytfBztvB0tvF9u/GGwPKHwPKNw/OYyfSbyvSby/Sm0PWn0faq0var0/a52ve62/e/3fjA3vjC3/jD4PjG4fnH4fnI4vnJ4/nK4/nP5vrQ5vrR5/rg7vvn8/zr9P3v9v3v9/3w9/3x9/3y+P3z+f34+/77/P77/f79/v7+/v7///+RTxJ7AAAAEXRSTlMABwwYJC1XiZmbx8ji6vT4+TH0AcAAAAE/SURBVDjLjZPZeoIwEIUDIquAUWmttbbaavdWurjUtYF5/1dqwhIDypeeCwY4P2QmmUGIS9VNx/V91zF1FR1LszzM5VlayVaMJi6oaSiiX7Pxkezawa838Ak16vz7kz4lsn8oNq6QneZh4EoZSX2l/MOYKUprYdVapa9CYIrTB4vun1cCuoMR4YCnIv1o4YsfIDmAdWQenP7D28tdQP3ViAMmcnK7/RSzxbcbWPUGHHCQKyZHInrZ9HD3I8zeusjP7oYAy5tWZ0xgGwgJ+RyYAblicQxwWwDyJXbwncROBM8C4PIk9zBNYovAqwA4vMw5rM9YvAa4FwCTb9QE4JMS/SVElwKg860OFgDr969fgEfBp1vND+t8kZwSTNsCYInHHUzm+91sWGhd7T8NI285adPK214+OPLRkw9v9fj/AcmVSlKKHou6AAAAAElFTkSuQmCC",WomanTipPicture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABFFBMVEUAAAD/bZL/apX/apX/Y47/ZpP/Z5D/Zo//Zo//ZpH/Z5D/ZpD/ZpD/ZpD/ZpD/ZpD/ZpD/ZpD/Z5D/Z5H/aJH/apP/a5P/bJT/dJr/dpv/dpz/d5z/e5//fKD/faD/faH/fqH/f6L/hab/hqf/iqr/jKv/ka//kq//nbf/nbj/n7n/qMD/qcH/rML/rMP/rcP/rsT/tcn/tsn/vM7/vc//vtD/v9D/wNH/wdH/w9T/xtX/zNr/zdr/0d3/09//2eP/2uT/2+X/3Ob/3uf/3+f/3+j/4en/4+v/5Ov/5ez/5uz/6e//6u//7PH/7fL/7vL/8PT/8fT/9Pf/9vj/9/n/+Pn/+Pr/+fr//f3//f7//v7///9zDK96AAAAEXRSTlMABwwYJC1XiZmbx8ji6vT4+TH0AcAAAAFQSURBVDjLjVPnWsJAEDxaKiGcYgURu2Jv2LtGEJGI2Jj3fw8TcrkchHxx/mS/ncnd7twuIRxJSdEN0zR0RUqSMNJqjnLk1PQQnZDzdAB5OSHyKY2GoKUCPpOlI5DN8P9H8o6CnZHQaAQ0rw6ZRkLu9yfWP1697X4/bU34vbjdqgI/dY0+6kWWUB3/BH/oOX4Olxd3OnhmZ+SSRBL4hR7W3e9cB5ssJRFFEOzh0Qt2/YAqRBcENdS8YAmfLKUTQxAc4MILVvDBUgYxBcEautP94Bg3LGVywX2rTAsNPLiK6i82uMC/og67XLGBr8tTC7ga41f4RRabsG20G65PvbNJyovkbRZfgXapsLp/tD0flKUERlXeAbsy/FwSt9rh282QwrHaf6wXvJVmm2gNCtTguU+sEqUz1t3g6Kb/MzDxIxc7tPFjH7848asXv7zR6/8HhbhP26rJKyMAAAAASUVORK5CYII="})},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"avatar-wrap"},[s("van-image",{staticClass:"avatar-icon img",attrs:{"lazy-load":"",round:"",alt:"avatar",fit:e.fit,height:e.height,width:e.width,src:e.src.ossimg()||e.defaultAvatar}}),0===e.sex?s("van-image",{staticClass:"sex",attrs:{src:e.ManTipPicture,fit:"cover",height:e.sexHeight,width:e.sexWidth}}):e._e(),1===e.sex?s("van-image",{staticClass:"sex",attrs:{src:e.WomanTipPicture,fit:"cover",height:e.sexHeight,width:e.sexWidth}}):e._e()],1)}),[],!1,null,"7d69313a",null).exports},51527:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(95082),i=(s(47601),s(44951)),o=(s(152),s(62476)),r=(s(52073),s(15032)),n=(s(74916),s(15306),s(98512)),l=s(26294),c=s(27632);const d=(e,t="study")=>{const s={study:["icon-xuexixin_zhengchang","icon-xuexixin_xuanzhong"],course:["icon-kechengxin_zhengchang","icon-kechengxin_xuanzhong"],discover:["icon-tab-discover","icon-tab-discovers"],mine:["icon-wodexin_zhengchang","icon-wodexin_xuanzhong"]};return e&&e[t]&&e[t]||s[t]};var u=s(17780),p={name:"BottomTabBar",components:{Tabbar:r.Z,TabbarItem:o.Z,VanImage:i.Z},props:{active:{type:String,default:"homePage"},disable:{type:Boolean,default:!1}},data:()=>({iconMap:{},activeTab:"homePage"}),computed:(0,a.Z)({},(0,l.mapGetters)({primaryColor:"getPrimaryColor",mobileMenuSetting:"setting/getMobileMenuSetting",customNavigation:"setting/getCustomNavigation"})),watch:{customNavigation:{handler(){this.initTabData()},deep:!0}},mounted(){this.initTabData()},methods:{isMicro:()=>(0,u.xX)(),guideId:e=>"course"===e.key?"firstBoot1":"me"===e.key?"firstBoot2":"",initTabData(){this.iconMap=(({iconMapData:e,iconConfig:t,mobileSetting:s={}})=>{const{showDiscover:a,showKnowledgeBase:i}=s,o=a&&("dingTalk"===c.Z.env||"h5"===c.Z.env||"dingTalk_browser"===c.Z.env||"wechat_browser"===c.Z.env||"lark"===c.Z.env||"zhiYuan"===c.Z.env),r={},n=e||{homePage:{title:"tabBar.study",icon:d(t,"study"),show:!0,url:"/home-module"},course:{title:"tabBar.course",icon:d(t,"course"),show:i,url:"/knowledge",id:"firstBoot1"},discover:{title:"tabBar.discover",icon:d(t,"discover"),show:o,url:"/discovery"},me:{title:"tabBar.mine",icon:d(t,"mine"),show:!0,url:"/mine",id:"firstBoot2"}};for(let e in n)n[e].show&&(r[e]=n[e]);return r})({iconMapData:Object.keys(this.customNavigation).length>0?this.customNavigation:null,mobileSetting:this.mobileMenuSetting})},handleTabBar(e){if(this.disable)return;if(Object.keys(this.iconMap).length>0){const t=this.iconMap[e];t&&this.$router.replace({path:`${t.url}?${(0,n.WZ)()}`})}}}},m=(0,s(1001).Z)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isMicro()?s("div"):s("Tabbar",{staticClass:"bottom-tab-bar",attrs:{id:"bottomTab",value:e.active,fixed:"","inactive-color":"rgb(83, 85, 91)",placeholder:"","safe-area-inset-bottom":""},on:{change:e.handleTabBar}},e._l(e.iconMap,(function(t,a){return s("TabbarItem",{key:a,attrs:{name:a,replace:""}},[s("div",{staticClass:"tab-content",attrs:{id:e.guideId(t)}},[t.custom?s("van-image",{attrs:{width:"25",height:"25",src:e.active===a?t.icon[1]:t.icon[0],fit:"fill"}}):s("SvgIcon",{attrs:{color:""+(e.active===a?e.primaryColor:"rgb(83, 85, 91)"),size:21,"icon-class":""+(e.active===a?t.icon[1]:t.icon[0])}}),s("span",{staticClass:"bottom-tab-bar-title",style:t.custom||e.active!==a?"color: rgb(83, 85, 91)":"color: "+e.primaryColor},[e._v(" "+e._s(t.custom?t.title:e.$t(t.title))+" ")])],1)])})),1)}),[],!1,null,"d01cd2ca",null).exports},95084:(e,t,s)=>{s.d(t,{Z:()=>g});var a=s(95082),i=(s(47601),s(44951)),o=(s(26699),s(32023),s(33948),s(27632)),r=s(26294),n=s(51173),l=s(39778),c=s(72244),d=s(78551),u=s(95969),p=s(5141),m=s(71522),h={components:{[i.Z.name]:i.Z,SvgIcon:d.Z},filters:{formatByte(e){if(e>0){const{value:t,unit:s}=(0,n.Z)(e);return`${t} ${s}`}return""}},props:{attachmentList:{type:Array,default:()=>[]},stepsList:{type:Array,default:()=>[]},isDelete:{type:Boolean,default:!1},isPreview:{type:Boolean,default:!1},theme:{type:String,default:"gray"}},data:()=>({isDing:!1,fileTypeObj:l.G}),computed:(0,a.Z)((0,a.Z)({},(0,r.mapState)(["commonParams"])),(0,r.mapState)("user",["dingUserId"])),created(){},mounted(){"alipay"!==this.env&&"dingTalk_h5"!==o.Z.specialEnv||(this.isDing=!0)},methods:{getRealType:e=>(e.indexOf("image")>-1||e.indexOf("video")>-1)&&e.split("/")[1]?e.split("/")[1]:e.indexOf("audio")>-1&&e.split("/")[0]?e.split("/")[0]:e,handlePreview(){let e=!1;return this.stepsList.forEach((t=>{t.resources.filter((e=>11===e.status||""===e.status)).length&&(e=!0)})),e},getStatusName(e){return 1===e||2===e?this.$t("attestation.transcoding"):4===e?this.$t("attestation.transcodingFailure"):""},previewFile(e){if(this.handlePreview())this.$toast({message:this.$t("upload.previewFileTip")});else if("zip"!==e.type&&"rar"!==e.type||"DING_PAN"===e.storage_type)if(3===e.status)if("DING_PAN"===e.storage_type)this.isDing?p.Z.getSpaceId({corpId:this.commonParams.corpId,dingUserId:this.dingUserId,fileids:e.url}).then((()=>{o.Z.previewFileInDingTalk({corpId:this.commonParams.corpId,spaceId:e.path,fileId:e.url,fileName:e.actual_name||e.name,fileSize:e.size,fileType:e.type})})):this.$toast({message:this.$t("upload.pleaseToDingView")});else if(c.Wb.includes(e.type))"ALIBABA_PRIVATE"===e.storage_type?m.Z.getPrivateImgUrl(e.video_id).then((t=>{const{data:s}=t;0===s.code&&s.data&&u.Z.course.toCourseReader({readerType:"image",title:e.actual_name||e.name,url:encodeURIComponent(s.data.docResourceDownloadUrl),resourceId:e.id})})):u.Z.course.toCourseReader({readerType:"image",title:e.actual_name||e.name,url:encodeURIComponent(e.url),resourceId:e.id});else if([...c.KM,...c.Bg].includes(e.type))u.Z.course.toCourseReader({readerType:"media",title:e.actual_name||e.name,url:e.url,resourceId:e.id,contentType:e.content_type,storageType:e.storage_type,videoId:e.video_id});else if("scorm"===e.type)u.Z.course.toCourseReader({readerType:"scorm",title:e.actual_name||e.name,url:e.url,resourceId:e.id});else if("link"===e.type||"html"===e.type||"h5"===e.type)u.Z.course.toCourseReader({readerType:"html",title:e.actual_name||e.name,url:e.url,resourceId:e.id});else if("article"===e.type)u.Z.course.toCourseReader({readerType:"article",title:e.actual_name||e.name,resourceId:e.id});else{const t={readerType:"doc",type:e.type,path:e.path,url:encodeURIComponent(e.url),title:e.actual_name||e.name,storageType:e.storage_type,videoId:e.video_id,resourceId:e.id};u.Z.course.toCourseReader(t)}else 5===e.status?this.$toast({message:this.$t("upload.transcodingErrorTip")}):11===e.status?this.$toast({message:this.$t("upload.uploadingErrorTip")}):4===e.status?this.$toast({message:this.$t("upload.transcodingFailTip")}):this.$toast({message:this.$t("upload.transcodingPlayerTip")});else this.$toast({message:this.$t("upload.previewFileZip")})},judgeImage(e){const{type:t,storage_type:s}=e;return!(!c.Wb.includes(t)||"DING_PAN"===s)},imgFormatAliBaba(e){const{video_id:t}=e;return"ALIBABA_PRIVATE"===e.storage_type&&m.Z.getPrivateImgUrl(t).then((e=>{const{data:t}=e;return 0===t.code&&t.data?t.data.docResourceDownloadUrl:""})),e.url}}},g=(0,s(1001).Z)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"attachment-list"},e._l(e.attachmentList,(function(t,a){return s("li",{key:t.id,staticClass:"accessory-item",class:e.theme},[s("div",{staticClass:"text-box",class:{disabled:!e.isDing&&"DING_PAN"===t.storage_type},on:{click:function(s){return e.previewFile(t)}}},[s("p",{staticClass:"free"},[s("span",[e.fileTypeObj[e.getRealType(t.type)]?s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":e.fileTypeObj[e.getRealType(t.type)][0],color:e.isDing||"DING_PAN"!==t.storage_type?e.fileTypeObj[e.getRealType(t.type)][1]:"#D9DBE4",size:16}}):e._e()],1),s("span",{staticClass:"type"},[e._v(e._s(e.getRealType(t.type)))]),s("span",{staticClass:"size"},[e._v(e._s(e._f("formatByte")(t.size)))]),"block"===t.disblock&&5!==t.status?s("span",{staticClass:"upload"},["success"!=t.uploadStatus?s("span",{staticClass:"title"},[e._v(e._s(e.$t("attestation.uploadIng")))]):e._e(),"success"==t.uploadStatus?s("span",{staticClass:"title"},[e._v(e._s(e.$t("attestation.uploadSuccess")))]):e._e(),s("span",{class:100==t.currentRate?"update-schedule":"update-rate"},[e._v(e._s(t.currentRate)+"%")])]):e._e(),1===t.status||2===t.status||4===t.status||5===t.status?s("span",{staticClass:"upload-faild"},[5===t.status?[s("span",{staticClass:"title"},[e._v(e._s(e.$t("attestation.uploadError")))]),s("svg-icon",{attrs:{"icon-class":"icon-shuaxin",color:"#FF4727",size:12}})]:s("span",{staticClass:"title"},[e._v(e._s(e.getStatusName(t.status)))])],2):e._e()]),s("p",{staticClass:"title"},[e._v(e._s("h5"===t.type?t.url:t.name))]),e.isPreview&&e.judgeImage(t)?s("p",{staticClass:"preview-img"},[s("van-image",{attrs:{fit:"cover",width:"100%",height:"100%",src:e.imgFormatAliBaba(t)}})],1):e._e()]),e.isDelete?s("div",{staticClass:"close-box",on:{click:function(t){return e.$emit("delete",a)}}},[s("svg-icon",{attrs:{"icon-class":"icon-icon_close",color:"#B1B5C6",size:16}})],1):e._e(),e.isDing||"DING_PAN"!==t.storage_type?e._e():s("div",{staticClass:"close-box"},[s("svg-icon",{attrs:{"icon-class":"icon-lock1",color:"#C0C2CB",size:16}})],1)])})),0)}),[],!1,null,"fcd6621c",null).exports},54398:(e,t,s)=>{s.d(t,{Z:()=>f});s(34837);var a=s(39146),i=s(95082),o=(s(25773),s(35791)),r=(s(47601),s(44951)),n=(s(93787),s(20090)),l=(s(31930),s(94907)),c=(s(48444),s(84014)),d=(s(30033),s(87837)),u=(s(26699),s(32023),s(33948),s(57658),s(28514)),p=s(26294),m=s(32900),h=s(78551),g={name:"AddressBook",components:{Search:u.Z,SvgIcon:h.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[n.Z.name]:n.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z},props:{config:{default:()=>({pickedPost:[]}),type:Object}},data:()=>({postTreeData:[],showList:[],chooseList:[],chooseIds:[],breadNav:[],searchText:"",isSearch:!1}),computed:(0,i.Z)({primaryColor(){return this.$store.state.themeColor.primaryColor}},(0,p.mapGetters)({userInfo:"user/getUserInfo",qyWechatBook:"setting/getQyWechatBook"})),mounted(){this.funInitData(),this.chooseList=this.config.pickedPost||[],this.chooseIds=this.chooseList.map((e=>e.id))},methods:{async funInitData(){this.showLoading();const e=await m.Z.getPost();this.hideLoading(),this.postTreeData=e.data.posts,this.showList=e.data.posts},async searchUser(e){if(this.searchText=e,this.isSearch=!0,!e)return void this.changeRootLevel();const t=await m.Z.getPost({post_name:e});this.showList=t.data.posts},toggleCheckPost({disabled:e,item:t}){if(!e)if(this.chooseIds.includes(t.id))this.chooseList=this.chooseList.filter((e=>e.id!==t.id)),this.chooseIds=this.chooseList.map((e=>e.id));else{const e=[...this.chooseList];e.push(t),this.chooseList=e,this.chooseIds=this.chooseList.map((e=>e.id))}},nextLevel({disabled:e,children:t,item:s}){if(e)return;this.showList=t;const a=[...this.breadNav];a.push({post_name:s.post_name,id:s.id,children:t}),this.breadNav=a},changeLevel({index:e,item:t}){if(e===this.breadNav.length-1)return;const s=[...this.breadNav.slice(0,e+1)];this.breadNav=s,this.showList=t.children},changeRootLevel(){this.showList=this.postTreeData,this.breadNav=[]},handleCancel(){this.$emit("cancel")},sureClose(){this.$emit("onSuccess",{postList:this.chooseList})},showLoading(){a.Z.loading({forbidClick:!0,duration:0})},hideLoading(){a.Z.clear()}}},f=(0,s(1001).Z)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"address-book-post"},[s("div",{staticClass:"top-search"},[s("Search",{attrs:{placeholder:e.$t("common.search"),text:e.searchText},on:{input:e.searchUser,search:e.searchUser}}),s("div",{staticClass:"contacts"},[s("span",{on:{click:function(t){return t.stopPropagation(),e.changeRootLevel.apply(null,arguments)}}},[e._v(e._s(e.$t("common.all")))]),e._l(e.breadNav,(function(t,a){return s("span",{key:t.id,style:{color:e.primaryColor},on:{click:function(s){return s.stopPropagation(),e.changeLevel({index:a,id:t.id,item:t})}}},[s("SvgIcon",{attrs:{color:"#f0f0f0",size:12,"icon-class":"icon-jinrujiantou"}}),s("span",[e._v(" "+e._s(t.post_name))])],1)}))],2)],1),s("div",{staticClass:"list-wrap"},[e.showList.length>0?s("div",{staticClass:"dept-list"},e._l(e.showList,(function(t,a){return s("div",{key:a,staticClass:"list-item",on:{click:function(s){return e.toggleCheckPost({disabled:"post_group"===t.post_type,item:t,index:a})}}},[s("van-checkbox",{attrs:{value:e.chooseIds.includes(t.id),name:t.id,disabled:"post_group"===t.post_type,"checked-color":e.primaryColor,"icon-size":"23px"}}),s("div",{staticClass:"name-next"},[s("span",{staticClass:"name-count"},[s("span",{staticClass:"names cl-ellipsis"},[e._v(" "+e._s(t.post_name)+" ")])]),"post_group"===t.post_type?s("span",{staticClass:"next-btn",style:{opacity:"post_group"===t.post_type&&t.children&&0!==t.children.length?1:.5},on:{click:function(s){return s.stopPropagation(),e.nextLevel({disabled:"post_group"!==t.post_type||!t.children||0===t.children.length,children:t.children,item:t})}}},[s("SvgIcon",{attrs:{color:e.primaryColor,size:14,"icon-class":"icon-xiaji"}}),s("span",{style:{color:e.primaryColor}},[e._v(e._s(e.$t("chooseUser.next")))])],1):e._e()])],1)})),0):e._e()]),s("div",{staticClass:"bottom-btn"},[s("span",{staticClass:"bottom-left"},[s("span",{staticClass:"selected-tip"},[e._v(e._s(e.$t("chooseUser.selected"))+"：")]),s("span",{staticClass:"dept-person",style:{color:e.primaryColor}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.chooseList,expression:"chooseList"}]},[e._v(e._s(e.chooseList.length))])])]),s("span",[s("span",{staticClass:"btns cancel",on:{click:function(t){return t.stopPropagation(),e.handleCancel.apply(null,arguments)}}},[e._v(e._s(e.$t("common.cancel")))]),s("van-button",{staticStyle:{width:"75px"},attrs:{size:"small",color:e.primaryColor},on:{click:function(t){return t.stopPropagation(),e.sureClose.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("common.confirm"))+" ")])],1)])])}),[],!1,null,"e5ab6600",null).exports},76953:(e,t,s)=>{s.d(t,{Z:()=>w});s(31146);var a=s(41610),i=(s(34837),s(39146)),o=s(95082),r=(s(25773),s(35791)),n=(s(47601),s(44951)),l=(s(93787),s(20090)),c=(s(31930),s(94907)),d=(s(48444),s(84014)),u=(s(30033),s(87837)),p=(s(33948),s(57658),s(28514)),m=s(26294),h=s(32900),g=s(78551),f=s(78368),v=s(50361),y=s.n(v),_=s(45877),C=s(67875),k=s(93896),b={name:"AddressBook",components:{Search:p.Z,SvgIcon:g.Z,[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[n.Z.name]:n.Z,[r.Z.name]:r.Z,ClCustomUser:_.Z,ClCustomDepartment:C.Z},props:{config:{default:()=>({multiple:!0,limitTips:"",pickedUsers:[],pickedDepartments:[],disabledUsers:[],disabledDepartments:[],requiredUsers:[],requiredDepartments:[],responseUserOnly:!1,responseDepartmentOnly:!1,startWithDepartmentId:"",filterAuth:!0,asyncLoad:!0}),type:Object},syncOrganization:{type:String,default:""}},data:()=>({deptTree:{},loadDept:!1,loadUser:!1,searchText:"",userIds:"",isCheckAll:!1,isSearch:!1,deptList:[],userList:[],breadNav:[],checkedDept:[],checkedUser:[],checkedUserIds:[],checkedUserCount:0,checkedDeptCount:0,showCheckedDisplay:!1,pickedUsers:[],isCompleteLoading:!0,avatar:f}),computed:(0,o.Z)({primaryColor(){return this.$store.state.themeColor.primaryColor}},(0,m.mapGetters)({userInfo:"user/getUserInfo",qyWechatBook:"setting/getQyWechatBook"})),mounted(){this.funInitData()},methods:{funInitData(){this.pickedUsers=this.config.pickedUsers&&this.config.pickedUsers.length?[...this.config.pickedUsers]:[];let e=0;this.config.pickedDepartments&&this.config.pickedDepartments.length>0&&this.config.pickedDepartments.forEach((t=>{t.isChecked=!0,e+=t.user_count})),this.config.pickedUsers&&this.config.pickedUsers.length&&this.config.pickedUsers.forEach((e=>{e.isChecked=!0})),this.checkedDept=this.config.pickedDepartments?[...this.config.pickedDepartments]:[],this.checkedUser=this.config.pickedUsers?[...this.config.pickedUsers]:[],this.config.pickedUsers&&this.config.pickedUsers.length?this.checkedUserCount=this.computedCheckedCount(this.config.pickedUsers,this.config.pickedDepartments||[]):this.checkedUserCount=e,this.checkedDeptCount=this.config.pickedDepartments?this.config.pickedDepartments.length:0,!this.config.responseUserOnly&&this.config.multiple&&this.getDeptList(this.config.startWithDepartmentId,!0),this.getUserList(this.config.startWithDepartmentId)},computedCheckedCount(e,t){let s=0;return e.forEach((e=>{e.isChecked&&s++})),t.forEach((e=>{e.isChecked&&(s+=e.user_count)})),s},async getDeptList(e,t){this.loadDept=!0,this.showLoading();const s=void 0===this.config.asyncLoad||this.config.asyncLoad;let{data:a}=await h.Z.getDeptListById({recursion:!s,query_user_count:!0,parent_id:e,filter_auth:void 0===this.config.filterAuth||this.config.filterAuth,sync_organization:this.syncOrganization||""});if(this.loadDept=!1,this.hideLoading(),a.children=a.children||[],s)s&&(a.children.forEach((e=>{e.isChecked=-1!==this.checkedDept.findIndex((t=>t.id===e.id&&t.isChecked)),e.parentIds=this.breadNav.map((e=>e.id)),t&&(this.config.pickedDepartments&&-1!==this.config.pickedDepartments.findIndex((t=>t.id===e.id))&&(e.isChecked=!0),this.config.requiredDepartments&&-1!==this.config.requiredDepartments.findIndex((t=>t===e.id))&&(e.isChecked=!0,e.disabled=!0),this.config.disabledDepartments&&-1!==this.config.disabledDepartments.findIndex((t=>t===e.id))&&(e.disabled=!0))})),this.deptList=a.children,this.isCompleteLoading=!0);else{const e=this.initDeptList(a.children);this.deptTree=e.deptTree,this.deptList=this.deptTree.root}this.config.responseDepartmentOnly&&(this.isCheckAll=this.computedCheckAll(this.deptList,[]))},initDeptList(e){return{deptTree:this.flatTreeData(e,{root:e},["root"],[]).treeObj}},flatTreeData(e,t,s){return e.forEach((e=>{e.isChecked=!1,e.parentIds=[...s],this.config.pickedDepartments&&-1!==this.config.pickedDepartments.findIndex((t=>t.id===e.id))&&(e.isChecked=!0),this.config.requiredDepartments&&-1!==this.config.requiredDepartments.findIndex((t=>t===e.id))&&(e.isChecked=!0,e.disabled=!0),this.config.disabledDepartments&&-1!==this.config.disabledDepartments.findIndex((t=>t===e.id))&&(e.disabled=!0),e.children&&e.children.length>0&&(t[e.id]=[...e.children],s.push(e.id),this.flatTreeData(e.children,t,s))})),{treeObj:t}},async getUserList(e){if(this.config.responseDepartmentOnly)return;this.loadUser=!0,this.showLoading();let{data:t}=await h.Z.getUserListById({filter_auth:void 0===this.config.filterAuth||this.config.filterAuth,recursion:!1,departmentId:e||1});t.users&&(this.loadUser=!1,this.hideLoading(),t.users.forEach((e=>{e.isChecked=-1!==this.checkedUser.findIndex((t=>t.id===e.id)),-1!==this.pickedUsers.findIndex((t=>t.id===e.id))&&(e.isChecked=!0),this.config.requiredUsers&&-1!==this.config.requiredUsers.findIndex((t=>t===e.id))&&(e.disabled=!0,e.isChecked=!0),this.config.disabledUsers&&-1!==this.config.disabledUsers.findIndex((t=>t===e.id))&&(e.disabled=!0)})),this.userList=t.users||[],(this.deptList.length>0||this.userList.length>0)&&(this.isCheckAll=this.computedCheckAll(this.deptList,this.userList)))},async searchUser(e){const{id:t}=await this.exchangeId(e);this.searchText=e,this.userIds=t,this.isSearch=!0,this.isCheckAll=!1,e?this.searchUserList(e):this.changeRootLevel()},async exchangeId(e){let t="";const s="wx_app"===this.userInfo.appType&&this.qyWechatBook;if(e&&s)try{const s=await k.Z.searchUserIds(e),{data:a}=s;t=a.success?a.data:""}catch(e){console.error(e),t=""}return{value:e,id:t}},async searchUserList(e){this.loadUser=!0,this.showLoading();let{data:t}=await h.Z.searchUserList({user_name:""===this.userIds?e:"",userIds:this.userIds,filter_auth:void 0===this.config.filterAuth||this.config.filterAuth});t.users&&(this.loadUser=!1,this.hideLoading(),t.users.forEach((e=>{e.dept=e.department_names?e.department_names[0]:"",e.isChecked=-1!==this.checkedUser.findIndex((t=>t.id===e.id)),-1!==this.pickedUsers.findIndex((t=>t.id===e.id))&&(e.isChecked=!0),this.config.requiredUsers&&-1!==this.config.requiredUsers.findIndex((t=>t===e.id))&&(e.disabled=!0,e.isChecked=!0),this.config.disabledUsers&&-1!==this.config.disabledUsers.findIndex((t=>t===e.id))&&(e.disabled=!0)})),this.userList=t.users,t.users.length?this.isCheckAll=this.computedCheckAll(this.deptList,t.users):this.isCheckAll=!1)},computedCheckAll:(e,t)=>!(e.some((e=>!1===e.isChecked))||t.some((e=>!1===e.isChecked))),toggleCheckDept({id:e="",disabled:t,index:s}){if(t)return;const a=s;let{checkedDeptCount:o}=this,r=y()(this.checkedDept),n=null,l=0;n=this.deptList[a],n.isChecked=!n.isChecked,l=r.findIndex((t=>t.id===e)),-1===l?r.push(n):r.splice(l,1,n),n.isChecked?(o+=1,o=this.computedDeptTreeCheck(o,n.id)):o-=1;const c=this.computedCheckedCount(this.checkedUser,r);if(void 0!==this.config.maxUsers&&c>this.config.maxUsers){const{maxUsers:e}=this.config;return(0,i.Z)(this.config.limitTips||this.$t("chooseUser.limitTips",{maxUsers:e})),void(this.deptList[a].isChecked=!1)}this.deptList[a].isChecked=n.isChecked,this.checkedDept=y()(r),this.checkedDeptCount=o,this.checkedUserCount=c,this.isCheckAll=n.isChecked&&this.computedCheckAll(this.deptList,this.userList)},computedDeptTreeCheck(e,t){const s=void 0===this.config.asyncLoad||this.config.asyncLoad;if(s){if(s){const s=y()(this.checkedDept);s.forEach((s=>{s.parentIds&&-1!==s.parentIds.indexOf(t)&&(s.isChecked=!1,e-=1)}));let a=s.filter((e=>e.isChecked));this.checkedDept=y()(a)}}else{const s=this.deptTree[t];s&&s.forEach((t=>{t.isChecked&&(t.isChecked=!1,e-=1,this.computedDeptTreeCheck(e,t.id))}))}return e},toggleCheckUser({id:e="",disabled:t,index:s}){if(!this.config.multiple){if(t)return;const s=this.userList.find((t=>t.id===e));return void this.$emit("onSuccess",{users:s})}const a=y()(this.checkedUser),o=a.findIndex((t=>t.id===e)),r=y()(this.pickedUsers),n=s;let l="";l=this.userList[n],l.isChecked=!l.isChecked,-1===o?l.isChecked&&a.push(l):a.splice(o,1);const c=r.findIndex((t=>t.id===e));-1!==c&&r.splice(c,1);const d=this.computedCheckedCount(a,this.checkedDept);if(void 0!==this.config.maxUsers&&d>this.config.maxUsers){const{maxUsers:e}=this.config;return(0,i.Z)(this.config.limitTips||this.$t("chooseUser.limitTips",{maxUsers:e})),void(this.userList[n].isChecked=!1)}this.userList[n].isChecked=l.isChecked,this.checkedUser=y()(a),this.checkedUserCount=d,this.pickedUsers=y()(r),this.isCheckAll=l.isChecked&&this.computedCheckAll(this.deptList,this.userList)},nextLevel({id:e,disabled:t,name:s}){if(!this.isCompleteLoading)return;if(this.isCompleteLoading=!1,t)return void(this.isCompleteLoading=!0);this.breadNav.push({id:e,name:s}),this.isCheckAll=!1;const a=void 0===this.config.asyncLoad||this.config.asyncLoad;a?a&&!this.config.responseUserOnly&&this.config.multiple&&this.getDeptList(e):(this.deptList=this.deptTree[e]||[],this.userList=[]),this.getUserList(e)},changeLevel({id:e,index:t}){if(t===this.breadNav.length-1)return;const s=[...this.breadNav.slice(0,t+1)],a=void 0===this.config.asyncLoad||this.config.asyncLoad;this.breadNav=s,this.isCheckAll=!1,a?a&&!this.config.responseUserOnly&&this.config.multiple&&this.getDeptList(e):(this.deptList=this.deptTree[e],this.userList=[]),this.getUserList(e)},changeRootLevel(){const e=void 0===this.config.asyncLoad||this.config.asyncLoad;this.breadNav=[],this.isCheckAll=!1,this.isSearch=!1,this.searchText="",e?e&&!this.config.responseUserOnly&&this.config.multiple&&this.getDeptList(1):this.deptList=this.deptTree.root,this.getUserList("")},toggleCheckedAll(){let{isCheckAll:e}=this;e=!e;let{checkedDeptCount:t}=this;const s=y()(this.checkedUser),a=y()(this.checkedDept),o=y()(this.pickedUsers);let r=y()(this.userList),n=y()(this.deptList);const l=r.map((t=>{if(t.disabled||t.isChecked===e)return t;t.isChecked=e;const a=s.findIndex((e=>e.id===t.id));-1===a?s.push(t):s.splice(a,1);const i=o.findIndex((e=>e.id===t.id));return-1!==i&&o.splice(i,1),t}));this.isSearch||n.forEach((s=>{if(s.isChecked===e||s.disabled)return;s.isChecked=e;const i=a.findIndex((e=>e.id===s.id));e?(t+=1,t=this.computedDeptTreeCheck(t,s.id),-1===i?a.push(s):a[i].isChecked=!0):(t-=1,-1!==i&&a.splice(i,1))}));const c=this.computedCheckedCount(s,a);if(void 0!==this.config.maxUsers&&c>this.config.maxUsers){const{maxUsers:e}=this.config;return(0,i.Z)(this.config.limitTips||this.$t("chooseUser.limitTips",{maxUsers:e})),void(this.isCheckAll=!1)}this.isCheckAll=e,this.deptList=y()(n),this.userList=y()(l),this.checkedUser=y()(s),this.checkedDept=y()(a),this.checkedUserCount=c,this.checkedDeptCount=t,this.pickedUsers=y()(o)},handleCancel(){this.$emit("cancel")},sureClose(){this.config.responseUserOnly&&0===this.checkedUserCount?(0,i.Z)(this.$t("chooseUser.noOnlySelTips")):this.config.responseDepartmentOnly&&0===this.checkedDeptCount?(0,i.Z)(this.$t("chooseUser.noOnlyDeptTips")):this.config.responseDepartmentOnly||this.config.responseUserOnly||0!==this.checkedDeptCount||0!==this.checkedUserCount?this.checkedDeptCount>0&&!this.config.responseDepartmentOnly?a.Z.confirm({title:this.$t("common.reminder"),message:this.$t("chooseUser.confirmContent"),confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel")}).then((()=>{this.uniqueDeptUser(this.checkedDept,this.checkedUser)})):this.uniqueDeptUser(this.checkedDept,this.checkedUser):(0,i.Z)(this.$t("chooseUser.noSelTips"))},async uniqueDeptUser(e,t){let s=e.filter((e=>e.isChecked));const a={dept_ids:s.map((e=>e.id)),user_ids:t.map((e=>e.id))};let i=await h.Z.distinctNew(a);this.$emit("onSuccess",{selectedCount:i.data.user_count,users:t,departments:s})},showLoading(){i.Z.loading({forbidClick:!0,duration:0})},hideLoading(){this.loadDept||this.loadUser||i.Z.clear()}}},w=(0,s(1001).Z)(b,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"address-book-user"},[s("div",{staticClass:"top-search"},[e.config.responseDepartmentOnly?e._e():s("Search",{attrs:{placeholder:e.$t("common.search"),text:e.searchText},on:{input:e.searchUser}}),s("div",{staticClass:"contacts"},[s("span",{on:{click:function(t){return t.stopPropagation(),e.changeRootLevel.apply(null,arguments)}}},[e._v(e._s(e.$t("chooseUser.contacts")))]),e._l(e.breadNav,(function(t,a){return s("span",{key:t.id,style:{color:e.primaryColor},on:{click:function(s){return s.stopPropagation(),e.changeLevel({index:a,id:t.id})}}},[s("SvgIcon",{attrs:{color:"#f0f0f0",size:12,"icon-class":"icon-jinrujiantou"}}),s("span",[e._v(" "+e._s(t.name))])],1)}))],2)],1),s("div",{staticClass:"list-wrap"},[e.config.multiple?s("div",{staticClass:"check-all"},[s("span",{on:{click:e.toggleCheckedAll}},[s("van-checkbox",{attrs:{value:e.isCheckAll,name:"isCheckAll","checked-color":e.primaryColor,"icon-size":"23px"}},[e._v(e._s(e.$t("chooseUser.checkAll")))])],1)]):e._e(),e.config.multiple&&!e.config.responseUserOnly&&!e.isSearch&&e.deptList.length>0?s("div",{staticClass:"dept-list"},e._l(e.deptList,(function(t,a){return s("div",{key:a,staticClass:"list-item",on:{click:function(s){return e.toggleCheckDept({disabled:t.disabled,id:t.id,index:a})}}},[s("van-checkbox",{attrs:{value:t.isChecked,name:t.id,disabled:t.disabled,"checked-color":e.primaryColor,"icon-size":"23px"}}),s("div",{staticClass:"name-next"},[s("span",{staticClass:"name-count"},[s("span",{staticClass:"names cl-ellipsis"},[s("cl-custom-user",{attrs:{type:t.source_type,"data-type":"departmentName",value:t.id,name:t.department_name}})],1),e.config.responseDepartmentOnly?e._e():s("span",[e._v("("+e._s(t.user_count)+e._s(e.$t("chooseUser.personUnits"))+")")])]),s("span",{staticClass:"next-btn",style:{opacity:t.isChecked||t.disabled||"false"===t.has_children&&e.config.responseDepartmentOnly?.5:1},on:{click:function(s){s.stopPropagation(),e.nextLevel({disabled:t.isChecked||t.disabled||"false"===t.has_children&&e.config.responseDepartmentOnly,id:t.id,name:t.department_name})}}},[s("SvgIcon",{attrs:{color:e.primaryColor,size:14,"icon-class":"icon-xiaji"}}),s("span",{style:{color:e.primaryColor}},[e._v(e._s(e.$t("chooseUser.next")))])],1)])],1)})),0):e._e(),e.config.responseDepartmentOnly?e._e():s("div",{staticClass:"user-list"},e._l(e.userList,(function(t,a){return s("div",{key:a,staticClass:"list-item",on:{click:function(s){return e.toggleCheckUser({id:t.id,disabled:t.disabled,index:a})}}},[s("van-checkbox",{attrs:{value:t.isChecked,name:t.id,disabled:t.disabled,"checked-color":e.primaryColor,"icon-size":"23px"}}),s("div",{staticClass:"user-img-name"},[s("van-image",{staticClass:"user-avator",attrs:{src:t.avator||e.avatar,width:"32",height:"32",fit:"cover",round:""}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.dept,expression:"!item.dept"}],staticClass:"names cl-ellipsis"},[s("cl-custom-user",{attrs:{type:t.source_type,"data-type":"userName",value:t.user_id,name:t.user_name||t.name}})],1),t.dept?s("span",{staticClass:"names-dept"},[s("div",{staticClass:"name cl-ellipsis"},[s("cl-custom-user",{attrs:{type:t.source_type,"data-type":"userName",value:t.user_id,name:t.user_name||t.name}})],1),s("div",{staticClass:"dept cl-ellipsis"},[s("cl-custom-department",{attrs:{"name-list":t.department_names,"source-type":t.source_type,list:t.department_ids}})],1)]):e._e()],1)],1)})),0)]),s("div",{staticClass:"bottom-btn"},[s("span",{staticClass:"bottom-left"},[s("span",{staticClass:"selected-tip"},[e._v(e._s(e.$t("chooseUser.selected"))+"：")]),s("span",{staticClass:"dept-person",style:{color:e.primaryColor}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.checkedDeptCount,expression:"checkedDeptCount"}]},[e._v(e._s(e.checkedDeptCount)+" "+e._s(e.$t("chooseUser.departments")))]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.checkedUser.length,expression:"checkedUser.length"}]},[e._v(e._s(e.checkedUser.length)+" "+e._s(e.$t("chooseUser.personCount")))])])]),s("span",[s("span",{staticClass:"btns cancel",on:{click:function(t){return t.stopPropagation(),e.handleCancel.apply(null,arguments)}}},[e._v(e._s(e.$t("common.cancel")))]),e.config.multiple?[e.config.responseDepartmentOnly?s("van-button",{staticStyle:{width:"75px"},attrs:{size:"small",color:e.primaryColor},on:{click:function(t){return t.stopPropagation(),e.sureClose.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("common.confirm"))+" ")]):s("van-button",{attrs:{size:"small",color:e.primaryColor},on:{click:function(t){return t.stopPropagation(),e.sureClose.apply(null,arguments)}}},[e._v(e._s(e.$t("common.confirm"))+"("+e._s(e.checkedUserCount)+e._s(e.config.maxUsers?"/"+e.config.maxUsers:"")+")")])]:e._e()],2)])])}),[],!1,null,"6ce16248",null).exports},45494:(e,t,s)=>{s.d(t,{Z:()=>d});var a=s(95082),i=(s(73474),s(74755)),o=(s(82500),s(49414)),r=(s(82522),s(10342)),n=s(26294),l=s(25295),c={name:"ClClassify",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{classifyId:{type:String,required:!1,default:""},authType:{type:String,required:!1,default:"query"}},data:()=>({levelOneList:[],levelTwoList:[],levelThreeList:[[],[],[]],activeLevelOne:"",activeLevelTwo:"",activeLevelThree:["","",""],currentItem:{},selectResult:[]}),computed:(0,a.Z)({},(0,n.mapGetters)({primaryColor:"getPrimaryColor"})),watch:{},mounted(){this.init()},methods:{async init(){const e=await l.Z.getPermissionClassify({parentId:this.classifyId,includeUnclassified:!0,authType:this.authType});this.levelOneList=e.data.list,this.$emit("loadEnd",!0)},async handleClickLevelOne(e){if(this.activeLevelOne===e.id)return;this.activeLevelOne=e.id,this.levelThreeList=[[],[],[]],this.levelTwoList=[],this.activeLevelTwo="",this.activeLevelThree=["","",""],this.selectResult=[e];const t=await l.Z.getPermissionClassify({parentId:e.id,authType:this.authType});this.levelTwoList=t.data.list,this.handleChange()},async handleClickLevelTwo(e){if(this.activeLevelTwo===e.id)return;this.levelThreeList=[[],[],[]],this.activeLevelThree=["","",""],this.activeLevelTwo=e.id,this.selectResult=[this.selectResult[0],e];const t=await l.Z.getPermissionClassify({parentId:e.id,authType:this.authType});if(e.hasChildren){const e=t.data.list;this.$set(this.levelThreeList,0,e)}else this.activeLevelThree=["","",""];this.handleChange()},async handleClickLevelSub(e,t,s){if(this.$set(this.activeLevelThree,e,s),this.$set(this.selectResult,e+2,t),e<2&&t.hasChildren){const s=await l.Z.getPermissionClassify({parentId:t.id,authType:this.authType}),{list:a}=s.data;this.$set(this.levelThreeList,e+1,a)}this.handleChange()},handleChange(){this.$emit("change",this.selectResult)}}},d=(0,s(1001).Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-classify"},[s("div",{staticClass:"classify-tabs-one"},[s("div",{staticClass:"one-level"},e._l(e.levelOneList,(function(t){return s("span",{key:t.id,class:"one-item "+(e.activeLevelOne===t.id&&"active-one-item"),on:{click:function(s){return e.handleClickLevelOne(t)}}},[e._v(e._s(t.name))])})),0)]),e.levelTwoList.length>1?s("div",{staticClass:"classify-tabs-two"},[s("div",{staticClass:"two-level"},e._l(e.levelTwoList,(function(t){return s("span",{key:t.id,class:"two-item "+(e.activeLevelTwo===t.id&&"active-two-item"),on:{click:function(s){return e.handleClickLevelTwo(t)}}},[e._v(e._s(t.name)+" "),s("span",{class:[e.activeLevelTwo===t.id?"down":"",t.hasChildren?"triangle":"","tab-icon"]})])})),0)]):e._e(),s("div",{staticClass:"classify-modal-three"},e._l(e.levelThreeList,(function(t,a){return s("div",{key:a,staticClass:"classify-column"},e._l(t,(function(t,i){return s("div",{key:i,staticClass:"column-item",class:[e.activeLevelThree[a]===i?"active":""],on:{click:function(s){return e.handleClickLevelSub(a,t,i)}}},[s("span",{staticClass:"item-name"},[e._v(e._s(t.name))]),e.activeLevelThree[a]===i?s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-duigou",color:e.primaryColor}}):e._e()],1)})),0)})),0)])}),[],!1,null,"ea382754",null).exports},67875:(e,t,s)=>{s.d(t,{Z:()=>i});var a={name:"ClCustomDepartment",components:{ClCustomUser:s(45877).Z},props:{list:{type:Array,default:()=>[]},nameList:{type:Array,default:()=>[]},sourceType:{type:String,default:""},displayAll:{type:Boolean,default:!1}}},i=(0,s(1001).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.displayAll?s("span",e._l(e.list,(function(t,a){return s("span",{key:a.toString()},[e._l(t.department_ids.split("/"),(function(i,o){return s("span",{key:a.toString()+o.toString()},[s("cl-custom-user",{attrs:{type:t.source_type,"data-type":"departmentName",value:i,name:t.department_names.split("/")[o]}}),e._v(" "+e._s(o===t.department_ids.split("/").length-1?"":"/")+" ")],1)})),e._v(" "+e._s(a===e.list.length-1?"":",")+" ")],2)})),0):s("span",e._l(e.list,(function(t,a){return s("span",{key:a.toString()},[s("cl-custom-user",{attrs:{type:e.sourceType,"data-type":"departmentName",value:t,name:e.nameList[a]}}),e._v(" "+e._s(a===e.list.length-1?"":",")+" ")],1)})),0)}),[],!1,null,null,null).exports},45877:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(95082),i={name:"WxOpenData",props:{type:{type:String,default:"userName"},openid:{type:String,default:""}},watch:{openid(){window.parent&&window.parent.WWOpenData&&window.parent.WWOpenData.bind(this.$el)}},mounted(){window.parent&&window.parent.WWOpenData&&window.parent.WWOpenData.bind(this.$el)}},o=s(1001),r=(0,o.Z)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("ww-open-data",{attrs:{type:e.type,openid:e.openid}})}),[],!1,null,null,null).exports,n=s(26294),l={name:"ClCustomUser",components:{WxOpenData:r},props:{type:{type:String,default:""},dataType:{type:String,default:"userName"},value:{type:String,default:""},name:{type:String,default:""}},data:()=>({changeQy:!0}),computed:(0,a.Z)((0,a.Z)({},(0,n.mapGetters)({qyWechatBook:"setting/getQyWechatBook"})),{},{showWxOpenData(){const{appId:e=""}=JSON.parse(localStorage.getItem("userInfoVue"));return this.qyWechatBook&&"wx_sync"===this.type&&"9005"===e}}),watch:{value(e,t){e!==t&&(this.changeQy=!1,setTimeout((()=>{this.changeQy=!0}),20))}}},c=(0,o.Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showWxOpenData&&e.changeQy?s("WxOpenData",{attrs:{type:e.dataType,openid:e.value}}):s("span",[e._v(e._s(e.name))])}),[],!1,null,null,null).exports},92130:(e,t,s)=>{s.d(t,{Z:()=>r});s(73474);var a=s(74755),i=(s(47163),s(21469)),o={name:"StudyList",components:{[i.Z.name]:i.Z,[a.Z.name]:a.Z},props:{showModal:{type:Boolean,default:()=>!1},timeValue:{type:Date,default:()=>new Date},dateType:{type:String,default:()=>"datetime"}},data:function(){return{show:!0}},methods:{closePopup(){this.$emit("onCancel")},confirm(e){this.$emit("onConfirm",e)}}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-popup",{style:{height:"320px"},attrs:{value:e.showModal,position:"bottom","close-on-popstate":!0,"close-on-click-overlay":!1,"safe-area-inset-bottom":!0}},[s("div",{staticClass:"cl-date-select"},[s("van-datetime-picker",{attrs:{value:e.timeValue,type:e.dateType,"confirm-button-text":e.$t("buttons.confirm"),"cancel-button-text":e.$t("buttons.cancel")},on:{cancel:e.closePopup,confirm:e.confirm}})],1)])}),[],!1,null,null,null).exports},83913:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(95082),i=(s(25773),s(35791)),o=s(26294),r={components:{[i.Z.name]:i.Z},props:{limitHeight:{type:Number,default:200}},data:()=>({isOpen:!0,isShowFoldButton:!1}),computed:(0,a.Z)({},(0,o.mapGetters)({primaryColor:"getPrimaryColor"})),watch:{},mounted(){this.$nextTick((()=>{this.getContentHeight()}))},methods:{getContentHeight(){const e=this.$refs.nodes.offsetHeight;this.isOpen=e<this.limitHeight,this.isOpen||(this.isShowFoldButton=!0),this.$forceUpdate()},changeFold(){this.isOpen=!this.isOpen}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-fold"},[s("div",{ref:"nodes",staticClass:"cl-fold-content",style:{height:e.isShowFoldButton&&!e.isOpen?e.limitHeight+"px":"auto",overflow:e.isShowFoldButton?"hidden":"inherit"}},[e._t("default")],2),e.isShowFoldButton?s("van-button",{attrs:{color:e.primaryColor,size:"small",block:""},on:{click:e.changeFold}},[e.isOpen?s("span",[e._v(e._s(e.$t("attestation.retract")))]):s("span",[e._v(e._s(e.$t("attestation.open")))])]):e._e()],1)}),[],!1,null,"f218232c",null).exports},56994:(e,t,s)=>{s.d(t,{Z:()=>d});s(31960);var a=s(10993),i=(s(47601),s(44951)),o=(s(23307),s(81392)),r=(s(33948),s(27632)),n=s(50361),l=s.n(n),c={name:"ClImageUpload",components:{[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{count:{type:Number,default:9},showUpload:{type:Boolean,default:!0},imageList:{type:Array,default:()=>[]}},data:()=>({images:[]}),watch:{imageList:{handler(e){this.images=e},deep:!0,immediate:!0}},methods:{chooseImage(){const e={count:1,sourceType:["camera","album"],compressed:!0,percent:80};this.$emit("preview"),r.Z.chooseImage(e,(e=>{let t={access_token:this.$store.state.commonParams.accessToken};e&&e.filePaths[0]&&(this.$toast.loading({duration:0,forbidClick:!0}),r.Z.uploadFile({url:`${CL_API}/knowledge-api/common/upload`,fileName:"file",fileType:"image",formData:t,filePath:e.filePaths[0]},(({data:e})=>{const{server:t,fileNewName:s}=e.data,a=`${t}/${s}`;this.$forceUpdate(),this.$toast.clear();const i=[...this.imageList,{url:a}];this.$emit("change",i)}),(()=>{this.$toast.clear(),this.$toast.fail(this.$t("attestation.uploadFailedTips"))})))}))},previewImage(e,t){this.$emit("preview"),"dingTalk"!==r.Z.env?(0,a.Z)({images:this.images.map((e=>e.url)),startPosition:t}):r.Z.previewImage({urls:this.images.map((e=>e.url)),current:t})},onImageRemove(e){const t=l()(this.imageList);t.splice(e,1),this.$emit("change",t)}}},d=(0,s(1001).Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-image-upload"},[s("div",{staticClass:"image-wrapper"},[e._l(e.images,(function(t,a){return s("div",{key:a,staticClass:"image-item card"},[s("van-image",{attrs:{fit:"cover",src:t.url,width:"100%",height:"100%"},on:{click:function(s){return e.previewImage(t.url,a)}}}),e.showUpload?s("span",{staticClass:"image-remove"},[s("van-icon",{attrs:{name:"cross",size:"6px",color:"#FFF"},on:{click:function(t){return e.onImageRemove(a)}}})],1):e._e()],1)})),e.showUpload&&e.images.length<e.count?s("div",{staticClass:"image-upload card",on:{click:e.chooseImage}},[s("van-icon",{attrs:{name:"photograph",size:"18px"}}),e._v(" "+e._s(e.$t("examination.uploadImage"))+" ")],1):e._e()],2)])}),[],!1,null,"6323c7b9",null).exports},22950:(e,t,s)=>{s.d(t,{Z:()=>c});s(47601);var a=s(44951),i=(s(73474),s(74755)),o=s(98512),r=s(22648),n=s(27632),l={components:{Popup:i.Z,VanImage:a.Z},data:()=>({show:!1,baseUrl:""}),mounted(){const e=(0,o.DP)();e.launchImage&&this.$store.state.setting.showLaunch&&(n.Z.hideLoading(),this.show=!0,this.$store.commit("setting/updateShowLaunch",{flag:!1}),this.baseUrl=e.launchImage,e.startupPageColor&&(0,r.vk)(e.startupPageColor))},methods:{closeImg(){this.show=!1}}},c=(0,s(1001).Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Popup",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticClass:"fit-image"},[s("VanImage",{attrs:{width:"100%",height:"100%",src:e.baseUrl,fit:"cover"}})],1)])}),[],!1,null,"7ed4ca54",null).exports},8202:(e,t,s)=>{s.d(t,{Z:()=>n});s(31960);var a=s(10993),i=(s(47601),s(44951)),o=s(27632),r={name:"PictureSquares",components:{[i.Z.name]:i.Z},props:{pictures:{type:Array,default:()=>Array.from({length:5},(()=>({url:"https://oss.coolcollege.cn/1819484173321244672.jpeg"})))}},data:()=>({fit:"cover"}),computed:{images(){return this.pictures.map((e=>e.url))}},methods:{previewImage(e,t){this.$emit("preview"),"dingTalk"!==o.Z.env?(0,a.Z)({images:this.images,startPosition:t}):o.Z.previewImage({urls:this.images,current:t})}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"picture-squares"},[1===e.pictures.length?s("div",{staticClass:"image-length-1"},e._l(e.pictures,(function(t,a){return s("van-image",{key:a,attrs:{radius:"8",fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,0)}}})})),1):e._e(),2===e.pictures.length?s("div",{staticClass:"image-length-2 flex-row"},e._l(e.pictures,(function(t,a){return s("van-image",{key:a,staticClass:"half-image",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a)}}})})),1):e._e(),3===e.pictures.length?s("div",{staticClass:"image-length-3 flex-row"},[s("van-image",{staticClass:"half-image",attrs:{fit:e.fit,src:e.pictures[0].url},on:{click:function(t){return e.previewImage(e.pictures[0].url,0)}}}),s("div",{staticClass:"flex-column"},e._l(e.pictures.slice(1,3),(function(t,a){return s("van-image",{key:a,staticClass:"half-height-image",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+1)}}})})),1)],1):e._e(),4===e.pictures.length?s("div",{staticClass:"image-length-4 flex-column"},[s("van-image",{staticClass:"common",attrs:{fit:e.fit,src:e.pictures[0].url},on:{click:function(t){return e.previewImage(e.pictures[0].url,0)}}}),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(1,4),(function(t,a){return s("van-image",{key:a,staticClass:"third-image",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+1)}}})})),1)],1):e._e(),5===e.pictures.length?s("div",{staticClass:"image-length-5 flex-column"},[s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(0,2),(function(t,a){return s("van-image",{key:a,staticClass:"half-image common",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a)}}})})),1),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(2,5),(function(t,a){return s("van-image",{key:a,staticClass:"third-image",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+2)}}})})),1)]):e._e(),6===e.pictures.length?s("div",{staticClass:"image-length-6 flex-column"},[s("div",{staticClass:"flex-row"},[s("van-image",{staticClass:"half-image common",attrs:{fit:e.fit,src:e.pictures[0].url},on:{click:function(t){return e.previewImage(e.pictures[0].url,0)}}}),s("div",{staticClass:"flex-column"},e._l(e.pictures.slice(1,3),(function(t,a){return s("van-image",{key:a,staticClass:"half-height-image no-border",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+1)}}})})),1)],1),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(3,6),(function(t,a){return s("van-image",{key:a,staticClass:"third-image",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+3)}}})})),1)]):e._e(),7===e.pictures.length?s("div",{staticClass:"image-length-7 flex-column"},[s("van-image",{staticClass:"common",attrs:{fit:e.fit,src:e.pictures[0].url},on:{click:function(t){return e.previewImage(e.pictures[0].url,0)}}}),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(1,4),(function(t,a){return s("van-image",{key:a,staticClass:"third-image no-border",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+1)}}})})),1),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(4,7),(function(t,a){return s("van-image",{key:a,staticClass:"third-image",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+4)}}})})),1)],1):e._e(),8===e.pictures.length?s("div",{staticClass:"image-length-8 flex-column"},[s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(0,2),(function(t,a){return s("van-image",{key:a,staticClass:"half-image common",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a)}}})})),1),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(2,5),(function(t,a){return s("van-image",{key:a,staticClass:"third-image no-border",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+2)}}})})),1),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(5,8),(function(t,a){return s("van-image",{key:a,staticClass:"third-image",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+5)}}})})),1)]):e._e(),9===e.pictures.length?s("div",{staticClass:"image-length-9 flex-column"},[s("div",{staticClass:"flex-row"},[s("van-image",{staticClass:"half-image common",attrs:{fit:e.fit,src:e.pictures[0].url},on:{click:function(t){return e.previewImage(e.pictures[0].url,0)}}}),s("div",{staticClass:"flex-column"},e._l(e.pictures.slice(1,3),(function(t,a){return s("van-image",{key:a,staticClass:"half-height-image no-border",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+1)}}})})),1)],1),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(3,6),(function(t,a){return s("van-image",{key:a,staticClass:"third-image no-border",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+3)}}})})),1),s("div",{staticClass:"flex-row"},e._l(e.pictures.slice(6,9),(function(t,a){return s("van-image",{key:a,staticClass:"third-image",attrs:{fit:e.fit,src:t.url},on:{click:function(s){return e.previewImage(t.url,a+6)}}})})),1)]):e._e()])}),[],!1,null,"4a1b8065",null).exports},77522:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(95082),i=(s(47601),s(44951)),o=(s(25773),s(35791)),r=(s(74916),s(15306),s(33948),s(26294)),n={components:{[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{type:{type:String,default:"error"},title:{type:String,default:""},description:{type:String,default:""},buttons:{type:Array,default:()=>[]}},data(){return{defaultButtons:[{type:"button",text:this.$t("home.goHome"),callBack:()=>{this.$router.replace({path:"/home-module"})}}],resultIcon:{success:`${ASSETS_SDN_HOST}/assets/kuxueyuan/default-page/success.png`,info:`${ASSETS_SDN_HOST}/assets/kuxueyuan/default-page/info.png`,warning:`${ASSETS_SDN_HOST}/assets/kuxueyuan/default-page/warning.png`,error:`${ASSETS_SDN_HOST}/assets/kuxueyuan/default-page/error.png`,403:`${ASSETS_SDN_HOST}/assets/kuxueyuan/default-page/403.png`,404:`${ASSETS_SDN_HOST}/assets/kuxueyuan/default-page/404.png`,500:`${ASSETS_SDN_HOST}/assets/kuxueyuan/default-page/500.png`}}},computed:(0,a.Z)({},(0,r.mapGetters)({userInfo:"user/getUserInfo",primaryColor:"getPrimaryColor"})),watch:{buttons(e){e.length>0&&(this.defaultButtons=[...this.defaultButtons,...e])}},mounted(){},methods:{}},l=(0,s(1001).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-result cl-page-container"},[s("van-image",{staticClass:"icon",attrs:{src:e.type?e.resultIcon[e.type]:e.type,width:"160"}}),e.title?s("p",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),e.description?s("p",{staticClass:"desc"},[e._v(e._s(e.description))]):e._e(),e._l(e.defaultButtons,(function(t,a){return s("div",{key:a,on:{click:t.callBack}},["button"===t.type?s("van-button",{staticClass:"btn",attrs:{color:"#465DCD"}},[e._v(e._s(t.text))]):"text"===t.type?s("p",{staticClass:"btn text-btn"},[e._v(e._s(t.text))]):e._e()],1)}))],2)}),[],!1,null,"1ca3d494",null).exports},61913:(e,t,s)=>{s.d(t,{Z:()=>c});s(34837);var a=s(39146),i=(s(39610),s(2163)),o=(s(86039),s(20495)),r=(s(28301),s(45644)),n=(s(57658),s(32900)),l={components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{show:{type:Boolean,default:!1}},data:()=>({dept:[],searchValue:"",deptTab:[],showModal:!1,params:{page_number:1,page_size:1e4,filter_auth:!1,source_type:"",department_id:1,keyword:""}}),computed:{primaryColor(){return this.$store.state.themeColor.primaryColor}},watch:{show:{handler(){this.showModal=this.show}}},methods:{onClear(){this.searchValue="",this.onSearch()},onSearch(){this.params.keyword=this.searchValue,this.searchValue?this.params.department_id="":this.params.department_id=1,this.getDepartment()},showLoading(){a.Z.loading({forbidClick:!0,duration:0})},hideLoading(){a.Z.clear()},getDepartment(){this.showLoading(),n.Z.getDepartment(this.params).then((e=>{const{dept_page:t}=e.data.data;this.dept=t.list,this.hideLoading()})).catch((e=>{console.error("e",e),this.hideLoading()}))},selectDept(e){this.$emit("onOk",e)},open(){this.deptTab=[],this.searchValue="",this.params.department_id=1,this.onClear()},close(){this.$emit("hide")},goNextDept(e,t=""){const{id:s,name:a,index:i}=e;1===s?(this.deptTab=[],this.params.department_id=1):"add"===t?this.deptTab.push({id:s,name:a}):"reduce"===t&&(this.deptTab=this.deptTab.slice(0,i+1)),this.searchValue="",this.params.keyword="",this.params.department_id=s,this.getDepartment()}}},c=(0,s(1001).Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-select-department-content"},[s("van-action-sheet",{attrs:{round:!1},on:{close:e.close,open:e.open},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[s("div",{staticClass:"select-department-top-fix"},[s("van-search",{attrs:{placeholder:e.$t("common.search")},on:{search:e.onSearch,clear:e.onClear},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),s("div",{staticClass:"select-nav"},[e.deptTab.length?s("span",{on:{click:function(t){return t.stopPropagation(),e.goNextDept({id:1})}}},[e._v(e._s(e.$t("project.primaryDepartment")))]):s("span",[e._v(e._s(e.$t("project.primaryDepartment")))]),e.deptTab.length?s("span",[s("SvgIcon",{attrs:{color:"#f0f0f0",size:12,"icon-class":"icon-jinrujiantou"}})],1):e._e(),e._l(e.deptTab,(function(t,a){return s("strong",{key:a.toString()},[a===e.deptTab.length-1?s("span",[e._v(" "+e._s(t.name)+" ")]):s("span",{on:{click:function(s){return e.goNextDept({name:t.name,id:t.id,index:a},"reduce")}}},[e._v(" "+e._s(t.name)+" "),s("SvgIcon",{attrs:{color:"#f0f0f0",size:12,"icon-class":"icon-jinrujiantou"}})],1)])}))],2)],1),s("div",{staticClass:"cl-select-department"},[s("div",{staticClass:"select-item",on:{click:function(t){return t.stopPropagation(),e.selectDept(1)}}},[s("span",{staticClass:"select-all"},[e._v(e._s(e.$t("project.wholeCompany")))])]),s("div",{staticClass:"select-item-content"},e._l(e.dept,(function(t,a){return s("div",{key:a.toString(),staticClass:"select-item",on:{click:function(s){return s.stopPropagation(),e.selectDept(t.id)}}},[s("a",{staticClass:"department-name"},[e._v(e._s(t.name))]),"true"===t.have_sub_node?s("strong",{staticClass:"select-icon-content",on:{click:function(s){return s.stopPropagation(),e.goNextDept({name:t.name,id:t.id},"add")}}},[s("SvgIcon",{attrs:{color:e.primaryColor,size:14,"icon-class":"icon-xiaji"}}),s("span",{staticClass:"select-icon",style:{color:e.primaryColor}},[e._v(e._s(e.$t("chooseUser.next")))])],1):s("strong",{staticClass:"select-icon-content disabled"},[s("SvgIcon",{attrs:{color:"#BDC0CE",size:14,"icon-class":"icon-xiaji"}}),s("span",{staticClass:"select-icon",style:{color:"#BDC0CE"}},[e._v(e._s(e.$t("chooseUser.next")))])],1)])})),0)])])],1)}),[],!1,null,"96b1170c",null).exports},62501:(e,t,s)=>{s.d(t,{Z:()=>u});var a=s(95082),i=(s(84352),s(4321)),o=(s(25773),s(35791)),r=(s(26699),s(32023),s(57658),s(27632)),n=s(26294),l=s(55602),c=s(68728),d={components:{[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{show:{type:Boolean,default:!1},optionsKey:{type:Array,default:()=>[]},shareParams:{type:Object,default:()=>({pc_url:"/home",mobile_url:"/home-module",pc_type:"student",mobile_type:"h5",is_auth_enterprise:!0})},title:{type:String,default:""},site1:{type:Object,default:()=>({})},site2:{type:Object,default:()=>({})},lecturer:{type:Object,default:()=>({})},desc:{type:String,default:""},imageUrl:{type:String,default:""},from:{type:String,default:""},isShareMsg:{type:Boolean,default:!1}},data(){return{showShare:!1,defaultOptions:[{name:this.$t("share.dingTalk"),key:"dingtalk",icon:`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/share-dingtalk.png`,show:!1},{name:this.$t("share.feiShu"),key:"feishu",icon:`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/share-feishu.png`,show:!1},{name:this.$t("share.wxWork"),key:"wxwork",icon:`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/share-wxwork.png`,show:!1},{name:this.$t("share.webChat"),key:"wechat",icon:`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/share-wechat.png`,show:!1},{name:this.$t("share.webChatMoments"),key:"wechat-moments",icon:`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/share-wechat-moments.png`,show:!1},{name:this.$t("signIn.generatePoster"),key:"poster",icon:`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/share-poster.png`,show:!0},{name:this.$t("share.link"),key:"link",icon:"link",show:!0}]}},computed:(0,a.Z)((0,a.Z)({},(0,n.mapGetters)({userInfo:"user/getUserInfo"})),{},{options(){let e=[];if(this.optionsKey.length>0)this.defaultOptions.map((e=>(e.show=this.optionsKey.includes(e.key),e)));else{const e=r.Z.specialEnv;this.defaultOptions.map((t=>{const s=t.key;return t.show="dingtalk"===s?"dingTalk_h5"===e||"app"===e:"feishu"===s?"lark"===e:"wxwork"===s?"wechat_qy"===e:"wechat"!==s&&"wechat-moments"!==s||"app"===e,t}))}return e=this.defaultOptions.filter((e=>!0===e.show)),e}}),watch:{show:{handler(){this.showShare=this.show}}},beforeDestroy(){"dingTalk_h5"===r.Z.specialEnv&&this.isShareMsg&&(0,l._f)({shareInfo:null})},mounted(){this.$nextTick((()=>{this.isShareMsg&&(0,l._f)({shareInfo:{title:this.title,desc:this.title,path:`/pages/messageRedirect/messageRedirect?${(0,l.jr)(this.shareParams)}`,imageUrl:this.getShareImg()},from:this.from,callBack:()=>{}})}))},methods:{onShare(e){(0,l._9)({shareInfo:{title:this.title,desc:this.desc,path:(0,l.jr)(this.shareParams),imageUrl:this.getShareImg("small")},appShareType:e,from:this.from,callBack:()=>{}})},onLinkCopy(){(0,l.fB)({link:(0,l.jr)(this.shareParams),from:this.from})},poster(){const e={title:this.title,path:(0,l.jr)(this.shareParams),from:this.from};this.site1.value&&(e.site1=this.site1),this.site2.value&&(e.site2=this.site2),this.lecturer.name&&(e.lecture=this.lecturer),this.$router.push({name:"Poster",params:e})},onSelect(e){if("poster"===e.key)this.poster();else if("link"===e.key)this.onLinkCopy();else{let t=null;"dingtalk"===e.key?t=2:"wechat"===e.key?t=1:"wechat-moments"===e.key&&(t=3),this.onShare(t)}this.$emit("closeShareSheet")},onClose(){this.$emit("closeShareSheet")},getShareImg(e){const t=(0,c.Jn)(this.from);return"small"===e?(0,c.dC)(t):t}}},u=(0,s(1001).Z)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-share",on:{click:function(e){return e.stopPropagation(),function(){}.apply(null,arguments)}}},[s("van-share-sheet",{staticClass:"download-share-sheet",attrs:{title:e.$t("share.shareTo"),options:e.options,"cancel-text":e.$t("common.cancel")},on:{select:e.onSelect,cancel:e.onClose,"click-overlay":e.onClose},model:{value:e.showShare,callback:function(t){e.showShare=t},expression:"showShare"}})],1)}),[],!1,null,null,null).exports},64404:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(95082),i=(s(33948),s(57658),s(21703),s(26699),s(32023),s(27632)),o=s(26294),r=s(5141),n=s(39778),l=s(72244),c=s(39145),d=s(78551);const{noop:u}=c.Y;var p={components:{SvgIcon:d.Z},props:{listType:{type:Array,default:()=>["camera","album","video"]},diskName:{type:String,default:""},onSuccess:{type:Function,default:u},onError:{type:Function,default:u},count:{type:Number,default:9}},data:()=>({uploadList:[]}),computed:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,o.mapState)("setting",["dingDiskChoose"])),(0,o.mapState)("user",["dingUserId"])),(0,o.mapState)(["commonParams"])),watch:{},created(){},mounted(){this.initUploadList()},methods:{initUploadList(){const{listType:e}=this;let t=[];for(let s of e)if("dingPlate"!==s)t.push((0,a.Z)({},n.s.find((e=>e.name===s))));else if("dingTalk"===i.Z.env||"dingTalk_h5"===i.Z.specialEnv){if(!this.diskName)return void this.$dialog.alert({title:"提示",message:'请检查管理端 "移动端钉盘选取模块名称"'});this.$store.dispatch("setting/initAdvanceSetting").then((()=>{const e=this.dingDiskChoose.find((e=>e.type===this.diskName));e&&"true"===e.param.checked&&t.push((0,a.Z)({},n.s.find((e=>e.name===s))))}))}this.uploadList=t},async onSelect(e){if("camera"===e||"album"===e||"photo"===e){let t={count:this.count,sourceType:["camera","album"]};"camera"!==e&&"album"!==e||(t.sourceType=[e]),c.w.chooseImage(t,(async e=>{this.$toast.loading({duration:0,message:this.$t("common.uploading"),loadingType:"spinner",forbidClick:!0});try{const t=await r.Z.uploadFileIsImage(e);this.$emit("onSuccess",t),this.$toast.clear()}catch(e){console.error(e),this.$toast.clear()}}))}else if("video"===e)sessionStorage.setItem("isOpenScan",!0),c.w.chooseVideo({},(async e=>{try{let t={};"app"===i.Z.env?(t=await r.Z.uploadFileIsVideoApp(e),t=t[0]):(this.$toast.loading({duration:0,message:this.$t("common.uploading"),loadingType:"spinner",forbidClick:!0}),t=await r.Z.uploadFileIsVideo(e)),this.$toast.clear(),sessionStorage.setItem("isOpenScan",!1),this.$emit("onSuccess",[(0,a.Z)((0,a.Z)({},t),{},{content_type:t.type,id:t.resource_id,size:e.size,name:t.filename})])}catch(e){sessionStorage.setItem("isOpenScan",!1),console.error("上传失败：",e),this.$toast.clear(),this.$toast.fail(this.$t("subsidy.uploadFailed"))}}),(e=>{sessionStorage.setItem("isOpenScan",!1),console.error("视频选择失败：",e),this.$toast.fail(this.$t("common.uploadFail"))}));else if("dingPlate"===e){const e=await r.Z.getSpaceId({corpId:this.commonParams.corpId,dingUserId:this.dingUserId}),{spaceId:t}=e.data.data;c.w.chooseDingPlate({spaceId:t},(async e=>{this.$toast.loading({duration:0,message:this.$t("common.uploading"),loadingType:"spinner",forbidClick:!0});const{data:t}=await r.Z.uploadFileFromDingTalk(e);this.$toast.clear();const s=t.data;this.$emit("onSuccess",s)}))}},beforeUpload(){const e=arguments,t=e[0],s=e[1],a=e[2];return new Promise(((e,i)=>{if("camera"===t||"album"===t){if(s.length>a)return this.$toast(this.$t("micro.uploadVoiceTip",a)),void i(new Error("something bad happened"));for(let e=0;e<s.length;e++)if(!l.Wb.includes(s.type))return this.$toast(this.$t("micro.notSupportImageType")),void i(new Error("something bad happened"))}"video"===t&&(s.length>a&&(this.$dialog.alert({content:this.$t("micro.uploadVoiceTip",a),closable:!1,title:"Warning"}),i(new Error("something bad happened"))),s[0].size/1024/1024>200&&(this.$toast(this.$t("micro.videoLimit",{num:200})),this.$dialog.alert({content:this.$t("micro.uploadVoiceTip",a),closable:!1,title:"Warning"}),i(new Error("something bad happened"))),l.Bg.includes(s.type)||(this.$toast(this.$t("micro.notSupportVideoType")),i(new Error("something bad happened")))),e()}))}}},m=(0,s(1001).Z)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-upload"},e._l(e.uploadList,(function(t){return s("div",{key:t.name,staticClass:"upload-item",on:{click:function(s){return e.onSelect(t.name)}}},[s("svg-icon",{attrs:{"icon-class":t.icon,size:18,color:"#2D3040"}}),s("p",[e._v(e._s(e.$t(t.lang)))])],1)})),0)}),[],!1,null,"08df14bd",null).exports},56857:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(95082),i=s(26294),o=s(32900),r={name:"WxUserName",props:{openid:{type:String,default:""}},mounted(){window.parent&&window.parent.WWOpenData&&window.parent.WWOpenData.bind(this.$el)}},n=s(1001),l={name:"ClUserName",components:{WxUserName:(0,n.Z)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("ww-open-data",{attrs:{type:"userName",openid:e.openid}})}),[],!1,null,null,null).exports},props:{userId:{type:String,default:"",required:!0},userName:{type:String,default:"",required:!0}},data:()=>({finalName:"",hasName:!0,openid:""}),computed:(0,a.Z)({},(0,i.mapState)("user",["appType"])),mounted(){"wx_app"===this.appType&&this.getUserInfo(this.userId)},methods:{async getUserInfo(e){try{const t=await o.Z.getUserName(e),{code:s,data:a}=t.data;if("200000"===s&&a){const{hasName:e,sourceType:t,name:s="",thirdId:i}=a;this.hasName=e,this.hasName?this.finalName=s:"wx_sync"===t&&(this.openid=i)}}catch(e){this.finalName=this.userName}}}},c=(0,n.Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return"wx_app"!==e.appType?s("span",[e._v(e._s(e.userName))]):e.hasName?s("span",[e._v(e._s(e.finalName))]):s("wx-user-name",{attrs:{openid:e.openid}})}),[],!1,null,null,null).exports},24357:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(95082),i=(s(57658),s(26294)),o={name:"ClWaterMark",components:{ClCustomUser:s(45877).Z},props:{scenes:{type:String,default:()=>""},rotate:{type:Number,default:-35}},data:()=>({showWaterMark:!1,waterMarkCount:50,isUserName:!1,isDispersive:!1,waterMarkText:[],commentText:""}),computed:(0,a.Z)({},(0,i.mapGetters)({userInfo:"user/getUserInfo",waterMark:"setting/getWatermarks",position:"user/getPostNames"})),mounted(){this.init()},methods:{toJSON(){},init(){this.getWaterMarkText(this.waterMark),this.getWaterMarkApplication(this.waterMark),this.getWaterIsDispersive(this.waterMark)},getWaterMarkText(e){const{jobnumber:t}=this.userInfo,s=e.find((e=>"content_setting"===e.type)),a=e.find((e=>"content_custom"===e.type));-1!==s.param.comment.indexOf("name")&&(this.isUserName=!0),"true"===a.param.checked&&""!==a.param.comment[0]&&(this.commentText=a.param.comment[0]),-1!==s.param.comment.indexOf("position")&&this.position[0]&&""!==this.position[0]&&this.waterMarkText.push(this.position[0]),-1!==s.param.comment.indexOf("jobnumber")&&t&&""!==t&&this.waterMarkText.push(t)},getWaterMarkApplication(e){-1!==e.find((e=>"application_scenario"===e.type)).param.comment.indexOf(this.scenes)&&(this.showWaterMark=!0)},getWaterIsDispersive(e){const t=e.find((e=>"dispersive"===e.type));this.isDispersive="true"===t.param.checked}}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showWaterMark?s("div",{staticClass:"common-watermark"},e._l(new Array(e.waterMarkCount).fill(0),(function(t,a){return s("div",{key:a,class:"common-watermark-item "+(e.isDispersive?"isDispersive":"")},[s("span",{staticClass:"common-watermark-item-content",style:{transform:e.rotate?"rotate("+e.rotate+"deg)":"rotate(-35deg)"}},[""!==e.commentText?s("span",[e._v(e._s(e.commentText))]):e._e(),e.isUserName?s("span",[""!==e.commentText?s("span",[e._v("-")]):e._e(),s("cl-custom-user",{attrs:{type:e.userInfo.source_type||e.userInfo.sourceType,"data-type":"userName",value:e.userInfo.unionid||e.userInfo.account,name:e.userInfo.name||""}})],1):e._e(),s("span",[(e.isUserName||""!==e.commentText)&&e.waterMarkText.length>0?s("span",[e._v("-")]):e._e(),e._v(e._s(e.waterMarkText.join("-")))])])])})),0):e._e()}),[],!1,null,"6130edb6",null).exports},45879:(e,t,s)=>{s.d(t,{Z:()=>i});var a={components:{SvgIcon:s(78551).Z}},i=(0,s(1001).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"comment-placeholder"},[s("div",{staticClass:"comment-placeholder-container"},[s("svg-icon",{attrs:{color:"#FAAD14","icon-class":"icon-e-tipe"}}),s("div",{staticClass:"tip"},[e._v(e._s(e.$t("common.commentForbiddenTip")))])],1)])}),[],!1,null,"4a4027eb",null).exports},81533:(e,t,s)=>{s.d(t,{Z:()=>n});s(34837);var a=s(39146),i=s(95082),o=(s(73210),s(74916),s(4723),s(15306),s(26294)),r={name:"ClMaskTextarea",components:{},props:{placeholder:{type:String,default:""},value:{type:String,default:""},isShow:{type:Boolean,default:!1},onUpdate:{type:Function,default:function(){}},maxLength:{type:Number,default:-1},char:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value}},computed:(0,i.Z)((0,i.Z)({},(0,o.mapGetters)({primaryColor:"getPrimaryColor"})),{},{maxLen(){if(!this.char)return this.maxLength;const e=((this.currentValue.trim()||"").match(/[\u4E00-\u9FA5]/g)||[]).length;return this.maxLength-e}}),mounted(){},methods:{touchmoveTextarea(e){let{target:t}=e;t&&"TEXTAREA"===t.tagName&&e.stopPropagation()},sure(){const e=this.currentValue;if(this.char&&this.showRestLen<0)(0,a.Z)(this.$t("promptMessage.moreLimited"));else if(e.length>0){if(0===e.trim().length)return void this.$toast.fail(this.$t("promptMessage.emptyComments"));this.$emit("onUpdate",!0,e)}},noFn:()=>!1,handleInput(e){let{value:t}=e.detail;this.currentValue=t},getLen(){return((this.currentValue.trim()||"").replace(/[\u4E00-\u9FA5]/g,"01")||[]).length},showRestLen(){return this.char?this.maxLength-this.getLen():this.maxLength-this.currentValue.length}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-mask-textarea",on:{touchmove:function(e){e.preventDefault()}}},[s("div",{staticClass:"textarea-mask",on:{click:function(t){return e.$emit("onUpdate",!1)}}},[s("div",{staticClass:"top-input",on:{click:function(t){return t.stopPropagation(),e.noFn.apply(null,arguments)}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],attrs:{placeholder:e.placeholder,autofocus:"",maxlength:e.maxLen},domProps:{value:e.currentValue},on:{touchmove:e.touchmoveTextarea,input:function(t){t.target.composing||(e.currentValue=t.target.value)}}})]),s("div",{staticClass:"bottom-btn",on:{click:function(t){return t.stopPropagation(),e.noFn.apply(null,arguments)}}},[s("span",{staticClass:"left-btn cancel",on:{click:function(t){return e.$emit("onUpdate",!1)}}},[e._v(" "+e._s(e.$t("buttons.cancel"))+" ")]),-1!==e.maxLength&&e.showRestLen()<=10?s("span",{staticClass:"input-count-label red-color"},[e._v(" "+e._s(e.showRestLen())+" ")]):e._e(),s("span",{staticClass:"right-btn sure",style:{color:0===e.currentValue.length?"#7f849a":e.primaryColor},on:{click:e.sure}},[e._v(" "+e._s(e.$t("buttons.send"))+" ")])])])])}),[],!1,null,"bc6e2614",null).exports},81245:(e,t,s)=>{s.d(t,{Z:()=>m});s(73474);var a=s(74755),i=(s(47601),s(44951)),o=s(13365),r=s(78551),n=s(22648),l=s(64534),c={components:{SvgIcon:r.Z,replyMe:l.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z},props:{replyDetail:{type:Object,default:()=>{}},isAuthor:{type:Boolean,default:!1}},data:()=>({showCommentPop:!1,avatar:o}),mounted(){},methods:{changeTimeAgoLabel(e){return e?(0,n.TC)(e,this):""},handleDel(){this.$emit("deleteReply",this.replyDetail)},handleReply(){this.showCommentPop=!0},handleComment(e){this.showCommentPop=!1,this.$emit("commentFinished",e,this.replyDetail)},handleClose(){this.showCommentPop=!1}}},d=s(1001),u=(0,d.Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"last-reply"},[s("div",{staticClass:"header"},[s("van-image",{staticStyle:{"margin-right":"8px"},attrs:{src:e.replyDetail.author?e.replyDetail.author.avatar:e.avatar,width:"20",height:"20",round:"",fit:"cover"}}),s("span",{staticClass:"author-name"},[e._v(e._s(e.replyDetail.author?e.replyDetail.author.name:""))]),s("SvgIcon",{staticStyle:{"margin-right":"5px"},attrs:{color:"#7f849a",size:14,"icon-class":"icon-right"}}),s("span",{staticClass:"author-name"},[e._v(e._s(e.replyDetail.target?e.replyDetail.target.name:""))])],1),s("div",{staticClass:"contents"},[e._v(e._s(e.replyDetail.content))]),s("div",{staticClass:"footer"},[s("span",[e._v(e._s(e.changeTimeAgoLabel(e.replyDetail.createAt)))]),s("span",[s("span",{directives:[{name:"show",rawName:"v-show",value:e.isAuthor,expression:"isAuthor"}],staticStyle:{"margin-right":"20px"},on:{click:function(t){return t.stopPropagation(),e.handleDel.apply(null,arguments)}}},[s("SvgIcon",{staticStyle:{"margin-right":"5px"},attrs:{color:"#c0c2cb",size:14,"icon-class":"icon-icon_delex"}}),s("span",[e._v(e._s(e.$t("micro.delete")))])],1),s("span",{on:{click:function(t){return t.stopPropagation(),e.handleReply.apply(null,arguments)}}},[s("SvgIcon",{staticStyle:{"margin-right":"5px"},attrs:{color:"#c0c2cb",size:14,"icon-class":"icon-huifu1"}}),s("span",[e._v(e._s(e.$t("micro.reply")))])],1)])]),s("van-popup",{attrs:{position:"bottom","get-container":"body","safe-area-inset-bottom":""},model:{value:e.showCommentPop,callback:function(t){e.showCommentPop=t},expression:"showCommentPop"}},[s("div",{staticClass:"common-popup-content"},[s("replyMe",{attrs:{"show-comment":e.showCommentPop,target:e.replyDetail.author},on:{comment:e.handleComment}})],1)])],1)}),[],!1,null,"842c2a4a",null).exports,p={name:"Comment",components:{SvgIcon:r.Z,lastReply:u,replyMe:l.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z},props:{commentObj:{type:Object,default:()=>{}},isAuthor:{type:Boolean,default:!1}},data:()=>({avatar:o,showCommentPop:!1}),mounted(){},methods:{changeTimeAgoLabel(e){return e?(0,n.TC)(e,this):""},handleDel(){this.$emit("deleteComment",this.commentObj)},deleteReply(e){this.$emit("deleteReply",e,this.commentObj)},handleReply(){this.showCommentPop=!0},commentFinished(e,t){this.showCommentPop=!1,this.$emit("commentFinished",e,this.commentObj,t)}}},m=(0,d.Z)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"comment-wrap"},[s("div",{staticClass:"header"},[s("van-image",{staticStyle:{"margin-right":"8px"},attrs:{src:e.commentObj.author?e.commentObj.author.avatar:e.avatar,width:"30",height:"30",round:"",fit:"cover"}}),s("span",{staticClass:"author-name"},[e._v(e._s(e.commentObj.author?e.commentObj.author.name:""))])],1),s("div",{staticStyle:{"padding-left":"40px"}},[s("div",{staticClass:"contents"},[e._v(e._s(e.commentObj.content))]),s("div",{staticClass:"footer"},[s("span",[e._v(e._s(e.changeTimeAgoLabel(e.commentObj.createAt)))]),s("span",[s("span",{directives:[{name:"show",rawName:"v-show",value:e.isAuthor,expression:"isAuthor"}],staticStyle:{"margin-right":"20px"},on:{click:function(t){return t.stopPropagation(),e.handleDel.apply(null,arguments)}}},[s("SvgIcon",{staticStyle:{"margin-right":"5px"},attrs:{color:"#c0c2cb",size:14,"icon-class":"icon-icon_delex"}}),s("span",[e._v(e._s(e.$t("micro.delete")))])],1),s("span",{on:{click:function(t){return t.stopPropagation(),e.handleReply.apply(null,arguments)}}},[s("SvgIcon",{staticStyle:{"margin-right":"5px"},attrs:{color:"#c0c2cb",size:14,"icon-class":"icon-huifu1"}}),s("span",[e._v(e._s(e.$t("micro.reply")))])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commentObj.reply.length,expression:"commentObj.reply.length"}],staticClass:"reply-list"},e._l(e.commentObj.reply,(function(t){return s("lastReply",{key:t.id,attrs:{"is-author":e.isAuthor,"reply-detail":t},on:{commentFinished:e.commentFinished,deleteReply:e.deleteReply}})})),1)]),s("van-popup",{attrs:{position:"bottom","get-container":"body","safe-area-inset-bottom":""},model:{value:e.showCommentPop,callback:function(t){e.showCommentPop=t},expression:"showCommentPop"}},[s("div",{staticClass:"common-popup-content"},[s("replyMe",{attrs:{"show-comment":e.showCommentPop,target:e.commentObj.author},on:{comment:e.commentFinished}})],1)])],1)}),[],!1,null,"dac06746",null).exports},64534:(e,t,s)=>{s.d(t,{Z:()=>r});s(34837);var a=s(39146),i=(s(93787),s(20090)),o={components:{[i.Z.name]:i.Z},props:{showComment:{type:Boolean,default:!1},target:{type:Object,default:()=>{}},commitLoading:{type:Boolean,default:!1}},data:()=>({val:""}),watch:{showComment(){this.val=""}},mounted(){this.val=""},methods:{handleVal(e){this.val=e},handlePublish(){this.commitLoading||(this.val?this.$emit("comment",this.val):(0,a.Z)(this.$t("micro.commentPlaceholder")))}}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply-me"},[s("div",{staticClass:"input-action-header"},[s("span",[e._v(e._s(e.$t("micro.reply"))+" "+e._s(e.target?e.target.name:e.$t("micro.author"))+"：")]),s("span",{staticClass:"submit-btn",attrs:{disabled:e.commitLoading},on:{click:e.handlePublish}},[e._v(" "+e._s(e.$t("community.publish"))+" ")])]),s("van-field",{attrs:{type:"textarea",rows:"4","show-word-limit":"",clearable:"",placeholder:e.$t("community.placeholderInput")},on:{input:e.handleVal},model:{value:e.val,callback:function(t){e.val="string"==typeof t?t.trim():t},expression:"val"}})],1)}),[],!1,null,"8102e33e",null).exports},50459:(e,t,s)=>{s.d(t,{Z:()=>n});s(31968);var a=s(3809),i=(s(47601),s(44951)),o=(s(26699),s(56977),s(45877)),r={name:"CourseList",components:{[i.Z.name]:i.Z,[a.Z.name]:a.Z,ClCustomUser:o.Z},props:{column:{type:Number,default:2},source:{type:Array,default:()=>[]}},data:()=>({isWuhan:["medu.wuhanrt.com"].includes(location.host),rateNumberArr:[]}),computed:{primaryColor(){return this.$store.state.themeColor.primaryColor}},mounted(){this.isWuhan&&(this.source.forEach((e=>{e.rateNumber=(e.starLevel/100).toFixed()/2})),this.$set(this.source))},methods:{onItemClick(e){this.$emit("click",e)}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"course-list",class:"col-"+e.column},e._l(e.source,(function(t,i){return a("div",{key:i,staticClass:"course-card",on:{click:function(s){return e.onItemClick(t)}}},[a("div",{staticClass:"card-image"},[a("van-image",{attrs:{src:t.cover||s(51881),width:"100%",height:"100%",fit:"fill"}})],1),a("div",{staticClass:"card-content"},[a("div",{staticClass:"card-title"},[e._v(e._s(t.title))]),a("div",{staticClass:"card-desc"},[a("div",{staticClass:"card-desc-top"},[a("div",{staticClass:"count"},[a("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-e-view",color:"#C0C2CB",size:12}}),a("span",{staticClass:"desc-text num"},[e._v(e._s(t.playCount||0))])],1),a("div",{staticClass:"lecturer"},[a("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-Eren",color:"#C0C2CB",size:12}}),t.teacherType&&"inside"===t.teacherType?a("span",{staticClass:"desc-text name"},[a("cl-custom-user",{attrs:{type:t.teacherSourceType,"data-type":"userName",value:t.teacherSyncUserId,name:t.teacherName||e.$t("micro.noLecturer")}})],1):a("span",{staticClass:"desc-text name"},[e._v(" "+e._s(t.teacherName||e.$t("micro.noLecturer"))+" ")])],1)]),a("div",{staticClass:"card-desc-bottom"},[a("div",{staticClass:"star"},[e.isWuhan?a("van-rate",{attrs:{"allow-half":"",size:"14",color:"#ffa818","void-icon":"star","void-color":"#C0C2CB",readonly:""},model:{value:t.rateNumber,callback:function(s){e.$set(t,"rateNumber",s)},expression:"item.rateNumber"}}):e._l([1,2,3,4,5],(function(s,i){return a("svg-icon",{key:i,staticClass:"iconfont",attrs:{"icon-class":"icon-xingxingchengcopy",color:s<=(0===t.starLevel?5:t.starLevel)?e.primaryColor:"#C0C2CB",size:14}})}))],2),"true"===t.showScore?a("div",{staticClass:"score"},[e._v(" "+e._s(t.awardScore)+e._s(e.$t("pointsMall.credits"))+" ")]):e._e()])])]),3===t.bizType?a("div",{staticClass:"card-tag"},[e._v(" "+e._s(e.$t("project.studyProject"))+" ")]):e._e(),"package"===t.resourceType?a("div",{staticClass:"card-tag package"},[e._v(" "+e._s(e.$t("course.coursePackage"))+" ")]):e._e()])})),0)}),[],!1,null,"b92cab98",null).exports},64508:(e,t,s)=>{s.d(t,{Z:()=>r});s(39610);var a=s(2163),i=(s(86039),s(20495)),o={components:{[i.Z.name]:i.Z,[a.Z.name]:a.Z},props:{placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},actionText:{type:String,default:""},showAction:{type:Boolean,default:!1},data:{type:String,default:""},maxlength:{type:Number,default:200}},data:()=>({value:""}),computed:{actionVisible(){return this.showAction||Boolean(this.value)}},watch:{data:{handler(e){this.value=e},deep:!0,immediate:!0}},beforeDestroy(){this.value=""},methods:{onSearch(e){this.$emit("search",this.value,e)},onSearchClick(){this.$emit("click")},onFocus(){this.$emit("focus")},onBlur(){this.$emit("blur")},onClear(){this.value="",this.$emit("clear")}}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-box",on:{click:e.onSearchClick}},[s("van-search",{attrs:{"show-action":e.actionVisible,placeholder:e.placeholder||e.$t("knowledge.searchPlaceholder"),disabled:e.disabled,maxlength:e.maxlength,"action-text":e.actionText},on:{search:function(){return e.onSearch("enter")},focus:e.onFocus,blur:e.onBlur,clear:e.onClear},scopedSlots:e._u([{key:"action",fn:function(){return[s("div",{on:{click:function(){return e.onSearch("click")}}},[e._v(e._s(e.actionText||e.$t("common.search")))])]},proxy:!0}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)}),[],!1,null,"15c7bbbc",null).exports},14884:(e,t,s)=>{s.d(t,{Z:()=>i});s(56977);var a={name:"CourseCard",components:{SvgIcon:s(78551).Z},props:{data:{type:Object,default:()=>{}},type:{type:String,default:"two"}},computed:{preferentialPriceData:function(){return this.formatPrice(this.data.preferentialPrice)},savePriceData:function(){return this.formatPrice(this.data.officialPrice-this.data.preferentialPrice)},isSaveMoney:function(){return this.data.officialPrice-this.data.preferentialPrice>0&&1===this.data.flag}},methods:{formatPrice(e=0){const t=(e/100).toFixed(2).split(".");return{integer:t[0],decimal:t[1]}}}},i=(0,s(1001).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:"large"==e.type?"box":"box_"+e.type,on:{click:function(t){return e.$emit("click")}}},[s("div",{class:"large"==e.type?"img":"img_"+e.type},[s("Img",{attrs:{src:e.data.cover}})],1),s("div",{class:"medium"==e.type?"content_medium":"content"},[s("div",{staticClass:"title"},[e._v(" "+e._s(e.data.title)+" ")]),s("div",{staticClass:"footer"},[s("div",{staticClass:"footerLeft"},[s("span",{staticClass:"footerLeftUnit"},[e._v("￥")]),s("span",{staticClass:"footerLeftNumber"},[e._v(e._s(e.preferentialPriceData.integer))]),s("span",{staticClass:"footerLeftDecimal"},[e._v("."+e._s(e.preferentialPriceData.decimal))]),e.isSaveMoney>0?s("span",{staticClass:"footerLeftSave"},[e._v(e._s("立省"+e.savePriceData.integer+"."+e.savePriceData.decimal))]):e._e()]),s("div",{staticClass:"footerRight"},[1===e.data.flag?[s("span",[s("SvgIcon",{attrs:{size:14,color:"rgb(243,156,32)","icon-class":"icon-jingpinkecheng"}})],1),s("span",{staticClass:"footerRightCourse"},[e._v(e._s(e.data.courseCount))])]:s("span",{staticClass:"footerView"},[s("SvgIcon",{attrs:{size:14,color:"rgba(0, 0, 0, .45)","icon-class":"icon-e-view"}}),e._v(" "+e._s(e.data.scanCount)+" ")],1)],2)])])])}),[],!1,null,"68c1a9c6",null).exports},72020:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});s(34837);var a=s(39146),i=s(62078),o=s(95082),r=(s(47601),s(44951)),n=(s(72975),s(98655)),l=(s(11155),s(91391)),c=(s(57658),s(39714),s(26699),s(26294)),d=s(27632),u=s(95969),p=s(6106),m=s(63874),h=s(22648),g=s(23111),f=s(52196);const v=["type","resourceId"];var y={name:"Banner",components:{Swipe:l.Z,SwipeItem:n.Z,VanImage:r.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{banners:[],swipeIndex:0}},computed:(0,o.Z)((0,o.Z)({},(0,c.mapGetters)({primaryColor:"getPrimaryColor",homeBannerColor:"setting/getHomeBannerColor"})),{},{bannerBackColor(){return this.homeBannerColor?(0,g.y)(this.homeBannerColor):"transparent"}}),watch:{models(e){if(1===e.banner.length){const{color:t}=e.banner[0];this.commonSetColor(t)}if(this.swipeIndex===this.models.currentIndex){const{color:e}=this.models.banner[this.models.currentIndex];this.commonSetColor(e)}this.setBannerList()}},mounted(){if(this.isOld)this.updateBannerList();else{const{color:e}=this.models.banner[0];this.commonSetColor(e),this.setBannerList()}},beforeDestroy(){sessionStorage.setItem("isOpenScan",!0)},methods:{setBannerList(){const{banner:e}=this.models;sessionStorage.setItem("isOpenScan",!1),this.banners=this.dealExpire(e)},async updateBannerList(){const e=this.models;let t=[];const{data:s}=await p.Z.getDefaultBanner();if(e&&e.banners&&e.banners.length>0)t=e.banners;else if(s&&200===s.code&&s.data.length>0){const e=s.data.find((e=>"image"===e.type));t.push({type:"image",url:e.url,id:Date.parse(new Date).toString(),resource_id:""})}else t.push({type:"image",url:"https://oss.coolcollege.cn/1811681929448263680.png",id:Date.parse(new Date).toString(),resource_id:""});sessionStorage.setItem("isOpenScan",!1),this.banners=this.dealExpire(t)},dealExpire(e){let t=e;return(this.isRender||this.isOld)&&(t=e.filter((e=>"true"!==e.expire)),0===t.length&&(t=[{type:"image",url:"https://oss.coolcollege.cn/1811681929448263680.png",id:Date.parse(new Date).toString(),resource_id:""}])),t},async toRedirectPage(e){let{type:t,resourceId:s}=e,a=(0,i.Z)(e,v),o="",r="",n={};switch(t){case"course":n="video"===a.data||"audio"===a.data?{courseType:"micro_course",id:s}:{courseType:"course",courseSource:"enterprise",id:s};break;case"image_text":n={bizType:6,id:s,courseType:"course"};break;case"project":this.$router.push({path:u.Z.studyProject.toStudyProject({studyProjectId:s})});break;case"task":o="",this.$router.push({path:u.Z.home.studyDetail({studyId:s,origin:"vue"})});break;case"exam":return void u.Z.exam.toExamOldNew({id:s,taskId:a.data.task_id});case"investigates":o=u.Z.resource.researchDetail({investigateId:s,questionnaireId:a&&a.data&&a.data.questionnaire_id});break;case"post_maps":r="DESERT_OASIS"===a.data.map_template?"postMap/universalMap/":"postMap/sky/","true"===a.data.isFirst&&await p.Z.postMapIntroduction(s),o=u.Z.resource.postMaps({resourceId:s,webUrl:r,map_template:a&&a.data&&a.data.map_template});break;case"qualifications":this.$router.push({path:u.Z.resource.certificationDesc(s)});break;case"evaluation":o=u.Z.resource.evaluation({resourceId:s});break;case"practice":o=u.Z.resource.practice({id:s});break;case"pk":o=u.Z.home.pkList();break;case"announcement":o=u.Z.home.noticeDetail({articleId:s});break;default:o="/home-module"}["course","image_text"].includes(t)?(0,f.f2)({courseData:n}):"announcement"===t||"investigates"===t||"practice"===t||"pk"===t||"post_maps"===t?this.$router.push({path:o}):u.Z.navigateTo(o)},visibleSuccess({res:e,type:t,resourceId:s}){const a=e&&e.data;a&&this.toRedirectPage((0,o.Z)({type:t,resourceId:s},a))},async handleToBannerDetail(e){if(!this.isOld&&!this.isRender)return;if("image"===e.type)return;if("link"===e.type)return void(0,m.N8)({url:e.link_url});const t=await p.Z.checkBannerVisible({resource_id:e.resource_id,type:e.type});t.data.success?this.visibleSuccess({res:t,type:e.type,resourceId:e.resource_id}):a.Z.fail(this.$t("home.bannerNoRightView"))},onChange(e){if(this.swipeIndex=e,!this.isOld){const{color:t}=this.models.banner[e];if("app"===d.Z.env&&"true"===sessionStorage.getItem("isOpenScan"))return;this.commonSetColor(t)}this.$emit("swipe",e)},commonSetColor(e){e&&(this.$store.commit("setting/setHomeBannerColor",e),(0,h.vk)((0,g.y)(e)))}}},_=y,C=(0,s(1001).Z)(_,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-banner"},[s("div",{staticClass:"banner-bg",style:{backgroundColor:e.isOld?e.primaryColor:e.bannerBackColor}}),s("div",{staticClass:"banner-swipe"},[s("Swipe",{attrs:{autoplay:3e3,"indicator-color":"white"},on:{change:e.onChange}},e._l(e.banners,(function(t,a){return s("SwipeItem",{key:a.toString()},[s("VanImage",{staticClass:"banner-image",attrs:{"lazy-load":"",src:t.url.ossimg()},on:{click:function(s){return e.handleToBannerDetail(t)}}})],1)})),1)],1)])}),[],!1,null,"648e12a4",null).exports},69548:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(95082),i=(s(53743),s(59978)),o=(s(629),s(67763)),r=(s(20581),s(50914)),n=(s(74916),s(15306),s(57658),s(26294)),l=s(26513),c=s(69126),d=s(73506),u={name:"BoutiqueCourse",components:{ModuleTitle:c.default,List:r.Z,Grid:o.Z,GridItem:i.Z,CourseCardBoutique:d.default},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{list:[],type:"column"}},computed:(0,a.Z)({themeColor(){return this.$store.state.themeColor},getTitle(){return this.isOld?this.$t("course.featuredCourses"):this.params.title||this.$t("course.featuredCourses")},getType(){return"l"===this.params.componentSize?"column":"row"}},(0,n.mapGetters)({qyShield:"setting/getQySwitch",isUnionTrain:"setting/getIsUnionTrain"})),watch:{params(e,t){e.limit!==t.limit&&this.getRecommendCourses()}},mounted(){this.getRecommendCourses()},methods:{async getRecommendCourses(){const e={page_number:1,page_size:this.params.limit,position:"discovery"},t=await l.Z.getRecommendCourses(e),{status:s,data:a}=t;200===s&&(this.list=a.courses)},toMore(e){(this.isOld||this.isRender)&&"more"===e&&this.$router.replace({path:"/discovery"})},goToDetail(e){(this.isOld||this.isRender)&&this.$router.push({path:`/course-platform-detail?courseResource=platform&courseId=${e.id}`})}}},p=(0,s(1001).Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return"false"===e.qyShield&&"false"===e.isUnionTrain?s("div",{class:"column"===e.getType?"boutique-course-container boutique-course-container-padding":"boutique-course-container"},[s("ModuleTitle",{attrs:{title:e.getTitle},on:{click:e.toMore}}),s("div",{staticClass:"course-content"},[s("List",{attrs:{"immediate-check":!1}},[s("Grid",{class:"column"===e.getType?"grid-column":"",attrs:{border:!1,"column-num":"column"===e.getType?2:1,gutter:"column"===e.getType?10:""}},e._l(e.list,(function(t){return s("GridItem",{key:t.id,class:"column"===e.getType?"course-item-column":"course-item-row",on:{click:function(s){return e.goToDetail(t)}}},[s("CourseCardBoutique",{attrs:{data:t,type:e.getType}})],1)})),1)],1)],1)],1):e._e()}),[],!1,null,"261bb7f5",null).exports},37762:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(95082),i=(s(45172),s(76475)),o=(s(57658),s(25295)),r=s(23111),n={name:"HomeClassify",components:{[i.Z.name]:i.Z},props:{params:{type:Object,default:()=>{}}},data:()=>({requestParams:{parentId:"0",includeUnclassified:!1},classifyList:[],modeType:"dark",loading:!1}),computed:{bannerBackColor(){const e=this.$store.state.setting.homeBannerColor;return(0,r.y)(e)}},created(){},mounted(){const{componentSize:e="dark"}=this.params;this.modeType=e,this.getClassify()},methods:{handleClick(e){const{id:t}=e;this.$router.push({path:"/classify-course",query:{classifyId:t}})},async getClassify(){const{data:e}=await o.Z.getPermissionClassify((0,a.Z)((0,a.Z)({},this.requestParams),{},{auth_type:"query"}));this.classifyList=e.list||[],this.loading=!1}}},l=(0,s(1001).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-clasify"},[s("van-skeleton",{attrs:{title:"",row:1,loading:e.loading}},[s("div",{staticClass:"home-clasify-wrap",style:{backgroundColor:"dark"===e.modeType?e.bannerBackColor:"#f2f2f2"}},[s("div",{staticClass:"home-clasify-container"},e._l(e.classifyList,(function(t){return s("span",{key:t.id,staticClass:"classify-item",style:{color:"dark"===e.modeType?"#fff":"#333"},on:{click:function(s){return e.handleClick(t)}}},[e._v(e._s(t.name))])})),0)])])],1)}),[],!1,null,"0676731e",null).exports},12799:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(95082),i=(s(57658),s(41817),s(33948),s(69126)),o=s(95969),r=s(6106),n=s(50361),l=s.n(n),c=s(15123),d={name:"Community",components:{ModuleTitle:i.default},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{list:[],defaultImageList:["https://oss.coolcollege.cn/1809903605982040064.png","https://oss.coolcollege.cn/1809903660298276864.png","https://oss.coolcollege.cn/1809903688303644672.png"]}},computed:{getTitle(){return this.isOld?this.models.custom_name:this.params.title||this.$t("homePage.circleDynamics")}},watch:{models:{handler(){this.getCommunityList()},deep:!0}},mounted(){this.getCommunityList()},methods:{onClick(e){if((this.isOld||this.isRender)&&"more"===e){const e=o.Z.home.enterCommunity();c.ZP.push({path:e})}},getCommunityList(){"automatic"===this.params.mode?this.getRealList():this.isRender?this.getListById():this.list=this.models.community},async getRealList(){const e=await r.Z.getCommunityList();if(0===e.data.code){const{content:t=[]}=e.data.data,{community:s}=this.models,i={id:"",name:"",desc:"",artNum:"",answerNum:""};this.list=s.map(((e,s)=>(0,a.Z)((0,a.Z)({},e),{},{community:t[s]?{id:t[s].id,name:t[s].name,desc:t[s].description,artNum:t[s].articleCount||0,answerNum:t[s].answerCount||0}:i})))}},async getListById(){const e=this.models.community.map((e=>e.community.id)).filter((e=>e));if(!e.length)return;const t=await r.Z.getCommunityListByIds(e),{data:s}=t.data,{community:i}=this.models,o={};for(const e of s)o[e.id]=e;const n=l()(i);for(const e of n)o[e.community.id]?e.community={id:o[e.community.id].id,name:o[e.community.id].name,desc:o[e.community.id].description,artNum:o[e.community.id].articleCount,answerNum:o[e.community.id].answerCount}:e.community=(0,a.Z)((0,a.Z)({},e.community),{},{id:""});this.list=n},handleToCommunityDetail(e){if(this.isRender&&Boolean(e)){const t=o.Z.resource.enterCircle({id:e});o.Z.navigateTo(t)}}}},u=d,p=(0,s(1001).Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-community"},[s("ModuleTitle",{attrs:{title:e.getTitle},on:{click:e.onClick}}),s("div",{staticClass:"scroll-community"},e._l(e.list,(function(t,a){return s("div",{key:a.toString(),staticClass:"community-item",style:{background:"url("+t.img+") no-repeat",backgroundSize:"cover"},on:{click:function(s){return e.handleToCommunityDetail(t.community.id)}}},[t.community.id?s("div",{staticClass:"community-info"},[s("div",{staticClass:"community-title van-ellipsis"},[e._v(e._s(t.community.name))]),s("div",{staticClass:"community-des van-multi-ellipsis--l2"},[e._v(e._s(t.community.desc))]),s("div",{staticClass:"community-avator"},[s("span",{staticClass:"avatars-item"},[e._v(" "+e._s(e.$t("project.article"))+"："+e._s(t.community.artNum)+" ")]),s("span",{staticClass:"community-attend"},[e._v(" "+e._s(e.$t("common.questionAndAnswer"))+"："+e._s(t.community.answerNum)+" ")])])]):e._e()])})),0)],1)}),[],!1,null,"1641bbd9",null).exports},73506:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});s(40962);var a=s(41956),i=(s(47601),s(44951)),o=(s(52355),s(29233)),r=(s(70885),s(6458)),n=(s(18144),s(65641)),l=s(22648),c=s(78551),d={name:"CourseCardCoutique",components:{Col:n.Z,Row:r.Z,Cell:o.Z,SvgIcon:c.Z,VanImage:i.Z,Badge:a.Z},props:{data:{type:Object,default:()=>{}},type:{type:String,default:"row"}},computed:{themeColor(){return this.$store.state.themeColor},price(){const{integer:e,decimal:t}=(0,l.T4)(this.data.official_price);return{integer:e,decimal:t}}}},u=(0,s(1001).Z)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["boutique-course-card","column"===e.type?"column":""]},[s("div",{staticClass:"course-image"},[s("Badge",{class:e.data.type},[s("VanImage",{staticClass:"course-cover",attrs:{fit:"cover",src:e.data.cover.ossimg(),"lazy-load":""}})],1)],1),s("div",{staticClass:"course-info"},[s("div",{staticClass:"course-title"},[e._v(" "+e._s(e.data.title)+" ")]),s("div",{staticClass:"course-other"},[s("Cell",{staticClass:"course-price",attrs:{center:"",border:!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",[e._v("￥")]),s("span",{staticClass:"cur-price van-ellipsis"},[e._v(e._s(e.price.integer))]),s("span",[e._v("."+e._s(e.price.decimal))])]},proxy:!0}])})],1),s("Row",{staticClass:"course-bottom"},[s("Col",{staticClass:"course-related",attrs:{span:"12"}},[s("SvgIcon",{staticClass:"iconfont",attrs:{size:12,"icon-class":"icon-e-view",color:"##B1B5C6"}}),s("span",{staticClass:"course-count"},[e._v(e._s(e.data.scan_count)+" ")])],1),s("Col",{attrs:{span:"12"}},[s("Cell",{attrs:{"value-class":"van-ellipsis user-name",center:"",border:!1,value:e.data.scope_name||e.$t("common.no")}})],1)],1)],1)])}),[],!1,null,"443933d0",null).exports},10140:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});s(40962);var a=s(41956),i=(s(47601),s(44951)),o=(s(31968),s(3809)),r=(s(52355),s(29233)),n=(s(70885),s(6458)),l=(s(18144),s(65641)),c=s(78368),d=s(78551),u={name:"CourseCard",components:{Col:l.Z,Row:n.Z,Cell:r.Z,Rate:o.Z,SvgIcon:d.Z,VanImage:i.Z,Badge:a.Z},props:{data:{type:Object,default:()=>{}},type:{type:String,default:"row"}},data:function(){return{defaultAvatar:c}},computed:{themeColor(){return this.$store.state.themeColor},getStar(){return this.data.star_level<=0?5:this.data.star_level}},mounted(){},methods:{getCourseType:()=>"",onCourseClick(){this.$emit("onCourseClick",this.data)}}},p=(0,s(1001).Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["course-card","column"===e.type?"column":""],on:{click:e.onCourseClick}},[s("Badge",{class:e.data.type,attrs:{content:e.getCourseType()}},[s("VanImage",{staticClass:"course-cover",attrs:{fit:"cover",src:e.data.cover.ossimg(),"lazy-load":""}})],1),s("div",{staticClass:"course-info"},[s("Cell",{attrs:{center:"","value-class":"couse-title van-ellipsis",border:!1,value:e.data.title}}),s("div",{staticClass:"course-user"},[s("div",{staticClass:"user-name"},[s("Cell",{attrs:{"value-class":"van-ellipsis user-name-gray",center:"",border:!1,value:e.data.user_name||e.$t("common.no")},scopedSlots:e._u([{key:"icon",fn:function(){return[s("VanImage",{staticClass:"course-avatar",attrs:{round:"",fit:"cover",src:e.data.avatar||e.defaultAvatar}})]},proxy:!0}])})],1),s("div",{staticClass:"course-star"},[s("Rate",{attrs:{size:10,color:"#ffd21e","void-icon":"star","void-color":"#eee",readonly:""},model:{value:e.getStar,callback:function(t){e.getStar=t},expression:"getStar"}})],1)]),s("Row",{staticClass:"course-bottom"},[s("Col",{staticClass:"course-related",attrs:{span:"16"}},[s("SvgIcon",{staticClass:"iconfont",attrs:{"icon-class":"icon-e-view",color:"##B1B5C6"}}),s("span",{staticClass:"course-count"},[e._v(e._s(e.data.scan_count)+" ")]),s("SvgIcon",{staticClass:"iconfont",attrs:{"icon-class":"icon-liuyan",color:"##B1B5C6"}}),s("span",[e._v(e._s(e.data.comment_count))])],1),s("Col",{staticClass:"course-score",attrs:{span:"8"}},["true"===e.data.show_score?s("span",[e._v(e._s(e.data.award_score)+" "+e._s(e.$t("pointsMall.credits")))]):e._e()])],1)],1)],1)}),[],!1,null,"47e44d4e",null).exports},2236:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});s(40962);var a=s(41956),i=(s(47601),s(44951)),o=(s(31968),s(3809)),r=(s(52355),s(29233)),n=(s(70885),s(6458)),l=(s(18144),s(65641)),c=(s(26699),s(78368)),d=s(78551),u=s(45877),p={name:"HomeCourseCard",components:{Col:l.Z,Row:n.Z,Cell:r.Z,Rate:o.Z,SvgIcon:d.Z,VanImage:i.Z,Badge:a.Z,ClCustomUser:u.Z},props:{data:{type:Object,default:()=>{}},type:{type:String,default:"row"}},data:function(){return{defaultAvatar:c}},computed:{themeColor(){return this.$store.state.themeColor},getStar(){return this.data.starLevel<=0?5:this.data.starLevel},showTip(){return[0,1,""].includes(this.data.bizType)&&(2!==this.data.scope||this.data.original)},getCourseType(){return 2!==this.data.scope?this.$t("homePage.purchasingSection"):this.data.original?this.$t("homePage.originalLesson"):""},getTeacherDefault(){return 2!==this.data.scope?this.$t("common.platformLecturer"):(this.data.original,this.$t("lecturer.NoLecturer"))},getCourseTypeColor(){return 2!==this.data.scope?{background:"#FFC96E",color:"#000000"}:{background:"#32D74B",color:"#FFFFFF"}}},mounted(){},methods:{onCourseClick(){}}},m=(0,s(1001).Z)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["home-course-card","column"===e.type?"column":""],on:{click:e.onCourseClick}},[s("div",{staticClass:"course-image"},[e.showTip?s("div",{staticClass:"course-image-tag",style:e.getCourseTypeColor},[e._v(" "+e._s(e.getCourseType)+" ")]):e._e(),s("Badge",{class:e.data.type},[s("VanImage",{staticClass:"course-cover",attrs:{fit:"cover",src:e.data.cover.ossimg(),"lazy-load":""}})],1)],1),s("div",{staticClass:"course-info"},[s("div",{staticClass:"course-title"},[e._v(" "+e._s(e.data.title)+" ")]),s("div",{staticClass:"course-user"},[s("Cell",{attrs:{"value-class":"van-ellipsis user-name",center:"",border:!1},scopedSlots:e._u([{key:"default",fn:function(){return[s("cl-custom-user",{attrs:{type:e.data.teacherSourceType,"data-type":"userName",value:e.data.teacherSyncUserId,name:e.data.teacherName||e.getTeacherDefault}})]},proxy:!0},{key:"icon",fn:function(){return[s("VanImage",{staticClass:"course-avatar",attrs:{round:"",fit:"cover",src:e.data.teacherAvatar||e.defaultAvatar}})]},proxy:!0}])}),s("Rate",{staticClass:"course-star",attrs:{size:10,color:"#FFBE51","void-icon":"star","void-color":"#eee",readonly:""},model:{value:e.getStar,callback:function(t){e.getStar=t},expression:"getStar"}})],1),s("Row",{staticClass:"course-bottom"},[s("Col",{staticClass:"course-related",attrs:{span:"16"}},[s("SvgIcon",{attrs:{size:14,"icon-class":"icon-e-view",color:"##B1B5C6"}}),s("span",{staticClass:"course-count"},[e._v(e._s(e.data.playCount))]),s("SvgIcon",{attrs:{size:14,"icon-class":"icon-liuyan",color:"##B1B5C6"}}),s("span",{staticClass:"course-count"},[e._v(e._s(e.data.commentCount))])],1),s("Col",{staticClass:"course-score",attrs:{span:"8"}},["true"===e.data.showScore?s("span",[e._v(e._s(e.data.awardScore)+e._s(e.$t("pointsMall.credits")))]):e._e()])],1)],1)])}),[],!1,null,"4b17b838",null).exports},69126:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a={name:"ModuleTitle",components:{SvgIcon:s(78551).Z},props:{styleObject:{type:Object,default:()=>{}},title:{type:String,default:""},id:{type:String,default:""},showMore:{type:Boolean,default:!0},showHelp:{type:Boolean,default:!1},click:{type:Function,default:()=>{}}},data:function(){return{}},mounted(){},methods:{lineClick(){this.$emit("click","line")},helpClick(){this.$emit("click","help")},moreClick(){this.$emit("click","more")}}},i=(0,s(1001).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"module-title",style:e.styleObject,attrs:{id:e.id},on:{click:e.lineClick}},[s("div",{staticClass:"title-left"},[s("span",{staticClass:"title-content"},[e._v(e._s(e.title))]),e.showHelp?s("span",{on:{click:e.helpClick}},[s("SvgIcon",{attrs:{"icon-class":"icon-e-help",color:"rgb(198, 198, 198)"}})],1):e._e()]),e.showMore?s("div",{staticClass:"title-right",on:{click:e.moreClick}},[s("span",[e._v(e._s(e.$t("knowledge.more")))])]):e._e()])}),[],!1,null,"29aaeb1f",null).exports},73514:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(95082),i=(s(53743),s(59978)),o=(s(629),s(67763)),r=(s(20581),s(50914)),n=(s(57658),s(2707),s(74916),s(15306),s(6106)),l=s(27479),c=s(52196),d=s(69126),u=s(2236),p=s(18446),m=s.n(p),h=s(50361),g=s.n(h),f=s(26294),v={name:"Task",components:{ModuleTitle:d.default,List:r.Z,Grid:o.Z,GridItem:i.Z,HomeCourseCard:u.default,EmptyBox:l.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{list:[],type:"column",mockData:{title:"示例课程名称标题",playCount:"66",awardScore:10,showScore:"true",cover:"https://oss.coolcollege.cn/1794908640189222912.png",teacherId:0,teacherName:"",teacherAvator:"",starLevel:0,commentCount:"99",scope:2,original:!0,courseSource:"enterprise",courseType:"course",bizType:0},pageIdConfig:{page_number:1,page_size:this.params.limit||3,exclude_course_type:["micro_course"]}}},computed:(0,a.Z)((0,a.Z)({},(0,f.mapGetters)({qyShield:"setting/getQySwitch"})),{},{themeColor(){return this.$store.state.themeColor},getTitle(){return this.isOld?this.$t("common.course"):this.params.title||this.$t("common.course")},getType(){return"l"===this.params.componentSize?"column":"row"},marketOpen(){return"true"===this.$store.state.setting.marketOpen},isAdmin(){const{user:e}=this.$store.state;return e.isAdmin}}),watch:{models(e,t){m()(e.courseList,t.courseList)||this.getCourseAllList()},params(e,t){e.limit!==t.limit&&this.getCourseAllList()}},mounted(){this.getCourseAllList()},methods:{getCourseAllList(){this.getCourseFromPath()},getCourseFromPath(){const{courseList:e}=this.models,{mode:t,limit:s}=this.params,a=g()(this.pageIdConfig);"course"===t?e.length>0?(a.ids=Array.from(e,(e=>e.id)).slice(0,s),"true"===this.qyShield&&a.exclude_course_type.push("live"),this.getCourseListByIdsAjax(a)):this.isRender||(this.list=new Array(s).fill(this.mockData)):this.getCourseFromRealUrl()},async getCourseListByIdsAjax(e){const{limit:t}=this.params;e.page_size=t;const s=(await n.Z.getCourseListByIds(e)).data.list;s.length>0?this.list=s:this.isRender?this.list=[]:this.list=new Array(t).fill(this.mockData)},dealTypes:e=>({study_project:"study_project",imageText:"image_text",liveCourse:"live"}[e]||"course"),getCourseFromRealUrl(){const{mode:e,classify:t,type:s,limit:a}=this.params,i=g()(this.pageIdConfig);"true"===this.qyShield&&i.exclude_course_type.push("live"),"classify"===e?(i.classify_id=t.content.id,i.sort_type=t.sort,t.content.id&&""!==t.content.id?this.getCourseListByIdsAjax(i):this.isRender?this.list=[]:this.list=new Array(a).fill(this.mockData)):(i.course_type=this.dealTypes(s.content),i.sort_type=s.sort,this.getCourseListByIdsAjax(i))},async goToDetail(e){if(this.$toast.clear(),this.isOld||this.isRender)try{await(0,c.XS)({courseData:e}),(0,c.f2)({courseData:e})}catch(e){this.$toast({message:this.$t("home.bannerNoRightView"),duration:1500})}},toMore(e){(this.isOld||this.isRender)&&"more"===e&&this.dealJumpInfo()},dealJumpInfo(){const{mode:e,classify:t,type:s}=this.params;"type"!==e||"false"!==this.qyShield||"liveCourse"!==s.content?"classify"===e&&t.content.id&&""!==t.content.id?this.$router.push({path:"/classify-course",query:{classifyId:t.content.id,sortType:t.sort}}):this.marketOpen?this.$router.push({path:"/course-all"}):this.$router.replace({path:"/knowledge"}):this.$router.push("/live-course")}}},y=(0,s(1001).Z)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:"column"===e.getType?"home-course-container home-course-container-padding":"home-course-container"},[s("ModuleTitle",{attrs:{id:"firstBoot4",title:e.getTitle},on:{click:e.toMore}}),s("div",{staticClass:"course-content"},[0===e.list.length?s("EmptyBox",{staticClass:"course-empty",attrs:{description:e.$t("setting.knowledgeGuide"),"link-src":e.isAdmin?"https://opencoolvision.yuque.com/docs/share/b8a6f5b0-ac64-47a2-b541-00350110445a?#":""}}):s("List",{attrs:{"immediate-check":!1}},[s("Grid",{class:"column"===e.getType?"grid-column":"",attrs:{border:!1,"column-num":"column"===e.getType?2:1,gutter:"column"===e.getType?10:""}},e._l(e.list,(function(t){return s("GridItem",{key:t.id,class:"column"===e.getType?"course-item-column":"course-item-row",on:{click:function(s){return e.goToDetail(t)}}},[s("HomeCourseCard",{attrs:{data:t,type:e.getType}})],1)})),1)],1)],1)],1)}),[],!1,null,"5da77e38",null).exports},79925:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(95082),i=(s(82500),s(49414)),o=(s(82522),s(10342)),r=(s(3791),s(93432)),n=s(26294),l=s(27632),c=s(69126),d=s(6106),u=s(10140),p=s(52196),m=s(27479),h={name:"CustomModule",components:{Loading:r.Z,EmptyBox:m.Z,Tab:o.Z,Tabs:i.Z,CourseCard:u.default,ModuleTitle:c.default},props:{models:{type:Object,required:!0}},data(){return{courseData:"course"===this.models.jump_type?[]:{classify_id:"",hottest:[],newest:[]},active:"newest",loading:!1}},computed:(0,a.Z)({},(0,n.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){"course"===this.models.jump_type?this.getCoursesByCourseIds({course_ids:this.models.jump_id}):this.models.jump_type&&"inside_course_classify"!==this.models.jump_type||this.getCoursesByClassifyIds({classify_ids:this.models.jump_id})},methods:{getCoursesByCourseIds(e){this.loading=!0,d.Z.getCoursesByCourseIds(e).then((e=>{const{data:t}=e,{list:s}=t;this.courseData=s})).finally((()=>{this.loading=!1}))},getCoursesByClassifyIds(e){this.loading=!0,d.Z.getCoursesByClassifyIds(e).then((e=>{const{data:t}=e;this.courseData=Array.isArray(t)&&t.length>0&&t[0]})).finally((()=>{this.loading=!1}))},onCourseClick(e){(0,p.f2)({courseData:e})},moduleTitleEvent(e){if("more"===e){const{title:e,jump_type:t,jump_id:s}=this.models;t&&"inside_course_classify"!==t?"course"===t&&l.Z.navigateTo({url:`/pages/home-modules/custom-course-list/index?id=${s}&title=${e}`}):l.Z.navigateTo({url:`/pages/home-modules/custom-course/index?id=${s}&sortType=${this.active}&title=${e||""}`})}}}},g=(0,s(1001).Z)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"custom_module_container"},[s("ModuleTitle",{attrs:{title:e.models.custom_name||e.models.name,"style-object":{padding:"16px"}},on:{click:e.moduleTitleEvent}}),s("div",{staticClass:"custom_module"},[e.loading?s("Loading",{attrs:{vertical:""}}):"course"===e.models.jump_type?[s("div",{staticClass:"data_container"},[e.courseData.length<=0?s("EmptyBox"):e._l(e.courseData,(function(t){return s("CourseCard",{key:t.id,attrs:{data:t},on:{onCourseClick:e.onCourseClick}})}))],2)]:e.models.jump_type&&"inside_course_classify"!==e.models.jump_type?e._e():[s("Tabs",{staticClass:"classify_tabs",attrs:{color:e.primaryColor},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[s("Tab",{attrs:{title:e.$t("micro.latest")}},[s("div",{staticClass:"data_container"},[e.courseData.newest.length<=0?s("EmptyBox"):e._l(e.courseData.newest,(function(t){return s("CourseCard",{key:t.id,attrs:{data:t},on:{onCourseClick:e.onCourseClick}})}))],2)]),s("Tab",{attrs:{title:e.$t("micro.hottest")}},[s("div",{staticClass:"data_container"},[e.courseData.hottest.length<=0?s("EmptyBox"):e._l(e.courseData.hottest,(function(t){return s("CourseCard",{key:t.id,attrs:{data:t},on:{onCourseClick:e.onCourseClick}})}))],2)])],1)]],2)],1)}),[],!1,null,"d2813c52",null).exports},98044:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(95082),i=(s(47601),s(44951)),o=s(4852),r=s(6106),n=s(78551),l=s(45877),c=s(27632),d=s(52196),u=s(74848),p={name:"FeedItem",components:{VanImage:i.Z,SvgIcon:n.Z,Avatar:o.Z,ClCustomUser:l.Z},props:{data:{type:Object,required:!0},showAllData:{type:Boolean,default:!1}},data:()=>({}),computed:{},created(){},mounted(){},methods:{formatFeedTime:e=>(0,u.formatFeedTime)(Number(e)),onThumbsUpOrCancel(){this.$emit("click",{feedId:this.data.feed_id,thumbsUpNumber:this.data.thumbs_up_number,thumbId:this.data.my_thumb_id})},onExamClick(){c.Z.navigateTo({url:`/pages/exam-bag/exam/exam-ranking/index?examId=${this.data.resource_id}`})},onCertificateClick(){const e=JSON.parse(this.data.content);this.$emit("tiggleViewCertificate",{visible:!0,url:e.certificate_img_url})},async onCourseClick(e){const{courseType:t,courseResource:s,errMsg:i}=e;if("micro_course"===t){this.$toast.clear();if(!(await r.Z.checkVisible({resourceId:this.data.resource_id,type:"course"})).data.success)return void this.$toast({message:this.$t("micro.microUnTip"),duration:1500})}(0,d.f2)({courseData:(0,a.Z)((0,a.Z)({},this.data.feedResult),{},{courseType:t,courseSource:s,errMsg:i,resourceId:this.data.resource_id})})}}},m=(0,s(1001).Z)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["feed_item_container",e.showAllData?"list-item":""]},[s("div",{staticClass:"header"},[s("Avatar",{staticClass:"avatar",attrs:{src:e.data.creator_avatar,width:"22",height:"22"}}),s("div",{staticClass:"header_content"},[s("span",{staticClass:"userName"},[s("cl-custom-user",{attrs:{type:e.data.creator_source_type,"data-type":"userName",value:e.data.creator_sync_user_id,name:e.data.creator_name}})],1),s("span",{staticClass:"feedTime"},[e._v(e._s(e.formatFeedTime(e.data.feed_time)))]),s("span",{staticClass:"feedDesc"},[e._v(e._s(e.$t("feed."+e.data.type.replace(/\./,"_"))))])])],1),s("div",{staticClass:"content"},["course.creation"===e.data.type?s("div",{staticClass:"feed-card-body",on:{click:function(t){return e.onCourseClick({courseResource:"enterprise",courseType:e.data.feedResult.course_type})}}},[s("div",{staticClass:"courseThumbnailBox"},[s("VanImage",{staticClass:"courseThumbnail",attrs:{"lazy-load":"",fit:"fill",src:e.data.thumbnail.ossimg()}})],1),s("div",{staticClass:"courseDetails"},[s("div",{staticClass:"courseInfo"},[s("div",{staticClass:"courseName"},[e._v(" "+e._s(e.data.feedResult.title)+" ")]),s("div",{staticClass:"coursewareInfo"},[0!==e.data.feedResult.resource_count?s("div",{staticClass:"coursewareInfo-item"},[s("SvgIcon",{staticClass:"coursewareInfo-icon",attrs:{"icon-class":"icon-Ekejian",size:12,color:"#D6D6E2"}}),s("span",{staticClass:"coursewareCount"},[e._v(e._s(e.data.feedResult.resource_count))])],1):e._e(),e.data.feedResult.score?s("div",{staticClass:"coursewareInfo-item"},[s("span",{staticClass:"coursewareInfo-text score"},[e._v(e._s(e.data.feedResult.score)+" "+e._s(e.$t("studyProject.credit")))])]):e._e()])])])]):e._e(),"course.finish"===e.data.type?s("div",{staticClass:"feed-card-body",on:{click:function(t){return e.onCourseClick({courseResource:"enterprise",courseType:e.data.feedResult.course_type,errMsg:e.data.feedResult.err_msg})}}},[s("div",{staticClass:"courseThumbnailBox"},[s("VanImage",{staticClass:"courseThumbnail",attrs:{"lazy-load":"",fit:"fill",src:e.data.thumbnail.ossimg()}})],1),s("div",{staticClass:"courseDetails"},[s("div",{staticClass:"courseInfo"},[s("div",{staticClass:"courseName"},[e._v(" "+e._s(e.data.feedResult.title)+" ")]),s("div",{staticClass:"coursewareInfo"},[0!==e.data.feedResult.resource_count?s("div",{staticClass:"coursewareInfo-item"},[s("SvgIcon",{staticClass:"coursewareInfo-icon",attrs:{"icon-class":"icon-Ekejian",size:12,color:"#D6D6E2"}}),s("span",{staticClass:"'coursewareInfo-text coursewareCount"},[e._v(e._s(e.data.feedResult.resource_count))])],1):e._e()])])])]):e._e(),"resource.finish"===e.data.type?s("div",{staticClass:"feed-card-body",on:{click:function(t){return e.onCourseClick({courseResource:"platform",courseType:e.data.feedResult.course_type})}}},[s("div",{staticClass:"courseThumbnailBox"},[s("VanImage",{staticClass:"courseThumbnail",attrs:{"lazy-load":"",fit:"fill",src:e.data.thumbnail.ossimg()}})],1),s("div",{staticClass:"courseDetails"},[s("div",{staticClass:"courseInfo"},[s("div",{staticClass:"courseName"},[e._v(" "+e._s(e.data.feedResult.title)+" ")]),s("div",{staticClass:"coursewareInfo"},[0!==e.data.feedResult.resource_count?s("div",{staticClass:"coursewareInfo-item"},[s("SvgIcon",{attrs:{"icon-class":"icon-Ekejian",size:12,color:"#D6D6E2"}}),s("span",{staticClass:"'coursewareInfo-text coursewareCount"},[e._v(e._s(e.data.feedResult.resource_count))])],1):e._e()])])])]):e._e(),"exam.fullmark"===e.data.type?s("div",{staticClass:"feed-card-body",on:{click:e.onExamClick}},[s("div",{staticClass:"courseThumbnailBox"},[s("VanImage",{staticClass:"courseThumbnail",attrs:{"lazy-load":"",fit:"fill",src:e.data.thumbnail.ossimg()}})],1),s("div",{staticClass:"courseDetails"},[s("div",{staticClass:"courseInfo"},[s("div",{staticClass:"courseName"},[e._v(" "+e._s(e.data.feedResult.exam_name)+" ")]),s("View",{attrs:{"class-name":"coursewareInfo"}},[s("SvgIcon",{attrs:{color:"#D6D6E2",size:24,"icon-class":"icon-Eren"}}),e.data.feedResult.exam_creator_name?s("span",[e._v(e._s(e.data.feedResult.exam_creator_name))]):e._e()],1)])])]):e._e(),"certificate.award"===e.data.type?s("div",{staticClass:"feed-card-body",on:{click:e.onCertificateClick}},[s("div",{staticClass:"courseThumbnailBox"},[s("VanImage",{staticClass:"hat",attrs:{"lazy-load":"",fit:"fill",src:"https://oss.coolcollege.cn/1790328430332612608.png".ossimg()}}),e.data.creator_avatar?s("VanImage",{staticClass:"userAvatar",attrs:{"lazy-load":"",fit:"fill",src:e.data.creator_avatar.ossimg()}}):e._e(),s("VanImage",{staticClass:"courseThumbnail",attrs:{"lazy-load":"",fit:"fill",src:e.data.thumbnail.ossimg()}})],1),s("div",{staticClass:"courseDetails"},[s("div",{staticClass:"courseInfo"},[s("div",{staticClass:"courseName"},[e._v(" "+e._s(e.data.feedResult.certificate_name)+" ")])])])]):e._e()]),s("div",{staticClass:"footer"},["course.creation"===e.data.type||"resource.finish"===e.data.type||"course.finish"===e.data.type?s("div",{staticClass:"learning"},[e._v(e._s(e.data.feedResult.learner_count)+" "+e._s(e.$t("home.learning")))]):e._e(),"exam.fullmark"===e.data.type?s("div",{staticClass:"learning"},[e._v(e._s(e.data.feedResult.exam_join_count)+" "+e._s(e.$t("home.peopleJoined")))]):e._e(),"certificate.award"===e.data.type?s("div",{staticClass:"learning"},[e._v(e._s(e.data.feedResult.certificate_get_count)+" "+e._s(e.$t("home.obtainCertificates")))]):e._e(),s("div",{staticClass:"zan-container",on:{click:e.onThumbsUpOrCancel}},[s("SvgIcon",{attrs:{color:""===e.data.my_thumb_id?"#ABAEBC":"#465DCD",size:14,"icon-class":"icon-zan2"}}),s("span",{staticClass:"zan-num"},[e._v(" "+e._s(e.data.thumbs_up_number))])],1)])])}),[],!1,null,"4dec48f1",null).exports},15829:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});s(20581);var a=s(50914),i=(s(3791),s(93432)),o=(s(47601),s(44951)),r=(s(73474),s(74755)),n=(s(33948),s(57658),s(6106)),l=s(23493),c=s.n(l),d=s(69126),u=s(98044),p=s(27479),m={components:{Popup:r.Z,VanImage:o.Z,Loading:i.Z,EmptyBox:p.Z,ModuleTitle:d.default,FeedItem:u.default,List:a.Z},props:{isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0},models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},showAllData:{type:Boolean,default:!1}},data:()=>({list:[],paramsRequest:{marker:"",page_size:10},viewCertificate:{visible:!1,url:""},loading:!0,finished:!1,isLoading:!0,feedHomeList:[]}),computed:{getTitle(){return this.isOld?this.models.custom_name:this.params.title||this.$t("homePage.studyStatus")}},watch:{list:{handler:function(e){this.feedHomeList=e,this.isOld&&(this.feedHomeList=e.slice(0,5))},deep:!0}},created(){},mounted(){this.getFeed()},methods:{async getFeed(){const[e,{data:t}]=await n.Z.getFeed(this.paramsRequest);if(!e&&t){const{feeds:e,next:s,resourceIds:a}=t,[i,o]=await n.Z.getFeedResultDetail({resource_ids:a});this.finished=""===s,this.isLoading=!1,!i&&o&&(this.loading=!1,e.forEach(((e,t)=>{e.feedResult=o.data["feed.result"][t]}))),this.paramsRequest.marker=s,this.list=[...this.list,...e]}},onLoad(){this.getFeed()},onThumbsUpOrCancel({thumbsUpNumber:e,thumbId:t,feedId:s}){""!==t&&e>0?this.thumbsUpOrCancel({feedId:s,thumbs_up:"false",thumbId:t}):this.thumbsUpOrCancel({feedId:s,thumbs_up:"true",thumbId:t})},thumbsUpOrCancel({feedId:e,thumbs_up:t,thumbId:s}){n.Z.thumbsUpOrCancel({feedId:e,thumbs_up:t,thumbId:s}).then((({data:t})=>{const s=t.my_thumb_id,a=t.thumbs_up_number;this.updateThumbUpNumber({feedId:e,myThumbId:s,thumbsUpNumber:a})}))},updateThumbUpNumber({thumbsUpNumber:e,myThumbId:t,feedId:s}){const a=this.list.map((a=>a.feed_id===s?(a.my_thumb_id=t,a.thumbs_up_number=e,a):a));this.list=a},onThumbsUpOrCancelThrottle:c()((function({thumbsUpNumber:e,thumbId:t,feedId:s}){this.onThumbsUpOrCancel({thumbsUpNumber:e,thumbId:t,feedId:s})}),400),moduleTitleEvent(e){"more"===e&&this.$router.push({path:"/home-module/feed-list"})},tiggleViewCertificate({visible:e,url:t}){this.viewCertificate={visible:e,url:t}}}},h=(0,s(1001).Z)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"feed_container"},[e.showAllData?s("List",{attrs:{finished:e.finished,"immediate-check":!1,"finished-text":e.$t("common.noMore")},on:{load:e.onLoad},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},e._l(e.list,(function(t){return s("FeedItem",{key:t.feed_id,attrs:{data:t,"show-all-data":""},on:{click:e.onThumbsUpOrCancelThrottle,tiggleViewCertificate:e.tiggleViewCertificate}})})),1):s("div",{staticClass:"feed"},[s("ModuleTitle",{attrs:{title:e.getTitle},on:{click:e.moduleTitleEvent}}),e.loading?s("Loading",{attrs:{vertical:""}}):e._l(e.feedHomeList,(function(t){return s("FeedItem",{key:t.feed_id,attrs:{data:t},on:{click:e.onThumbsUpOrCancelThrottle,tiggleViewCertificate:e.tiggleViewCertificate}})}))],2),e.loading&&e.isLoading||0!==e.list.length?e._e():s("EmptyBox",{staticClass:"feed_empty"}),s("Popup",{attrs:{"lock-scroll":!1},model:{value:e.viewCertificate.visible,callback:function(t){e.$set(e.viewCertificate,"visible",t)},expression:"viewCertificate.visible"}},[s("VanImage",{staticClass:"certificate_img",attrs:{fit:"fill",src:e.viewCertificate.url}})],1)],1)}),[],!1,null,"da949cea",null).exports},55091:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(93846),i={name:"",components:{},data:()=>({guideSteps:a.m,showGuide:!0,guideTip:"",style:{},style2:{},guideTitile:"",lastStep:!1,showArrow:!1}),computed:{primaryColor(){return this.$store.state.themeColor.primaryColor}},created(){},mounted(){this.mask()},methods:{mask(){if(0===this.guideSteps.length){const e=document.getElementById("container");return e&&e.scrollIntoView({block:"start"}),void(this.showGuide=!1)}this.showGuide=!0,this.$nextTick((()=>{this.renderGuide()}))},renderGuide(){const{id:e,popover:{desc:t,title:s,position:a}}=this.guideSteps[0];let i=document.getElementById(e);if(i&&1===this.guideSteps.length&&(this.lastStep=!0),!i)return void this.handleNext();const{offsetWidth:o,offsetHeight:r}=i;i.scrollIntoView({block:"center"}),setTimeout((()=>{const{top:e,left:n,bottom:l}=i.getBoundingClientRect();let{clientWidth:c,clientHeight:d}=document.getElementById("homeModule");const u={borderLeftWidth:`${Math.abs(n-5)}px`,borderRightWidth:`${Math.abs(c-n-o-5)}px`,borderTopWidth:`${Math.abs(e)}px`,borderBottomWidth:`${Math.abs(d-r-e)}px`};this.style=u;const p={position:"fixed"};"bottom"===a&&(this.showArrow=!0,p.top=`${l}px`,p.transform=" translateY(10px)"),this.style2=p,this.guideTip=t,this.guideTitile=s}),0)},handleNext(){this.guideSteps.shift(),this.mask(),this.lastStep&&this.$emit("nextModal")},handleClose(){this.lastStep||this.$dialog.confirm({confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),message:this.$t("setting.skipGuide"),confirmButtonColor:this.primaryColor}).then((()=>{this.guideSteps=[],this.mask(),this.$emit("nextModal")}))}}},o=(0,s(1001).Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showGuide?s("div",{staticClass:"guide-mask",style:e.style,attrs:{id:"guide-mask"}},[s("div",{staticClass:"mask-tip",style:e.style2,attrs:{id:"mask-tip"}},[s("div",{staticClass:"title"},[e._v(" "+e._s(e.guideTitile)+" ")]),s("div",{staticClass:"desc",attrs:{id:"desc"}},[e._v(e._s(e.guideTip))]),s("div",{staticClass:"footer"},[s("div",{staticClass:"close-btn",on:{click:e.handleClose}},[e._v(e._s(e.lastStep?"":e.$t("initCourse.skipBtn")))]),s("div",{staticClass:"next-btn",on:{click:e.handleNext}},[e._v(e._s(e.lastStep?e.$t("buttons.know"):e.$t("project.nextStep")))])]),e.showArrow?s("span",{staticClass:"arrow"}):e._e()])]):e._e()}),[],!1,null,"1f5e5871",null).exports},19978:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(95082),i=(s(73474),s(74755)),o=(s(26699),s(32023),s(26294)),r=s(96012),n=s(45877),l=s(55091),c=s(6106),d=s(17780),u={name:"FirstGuide",components:{[i.Z.name]:i.Z,ClCustomUser:n.Z,GuideSteps:l.default},props:{showGuide:{type:Boolean,default:!1}},data:()=>({showPop:!1,imgUrl:"https://oss.coolcollege.cn/1831403669485129728.png".ossimg(),isClose:!1}),computed:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,o.mapState)(["language"])),(0,o.mapGetters)({userInfo:"user/getUserInfo"})),{},{user(){return this.$store.state.user}}),created(){},mounted(){"en-us"===this.language&&(this.imgUrl="https://oss.coolcollege.cn/1831403693342330880.png".ossimg()),["scjgxa.coolcollege.cn"].includes(location.host)||(0,d.xX)()?this.$emit("nextModal"):this.judgeShowFirstGuide()},methods:{renderGuideSteps(){this.showPop=!1,this.isClose=!0},nextModal(){this.$emit("nextModal")},async judgeShowFirstGuide(){try{const{userId:e,enterpriseId:t}=this.userInfo;if(r.u.includes(t))this.$emit("nextModal");else{const t={userId:e,type:10},s=await c.Z.getUserGuideCheck(t),{guide_view:a,is_new_enterprise:i}=s.data.data,o=a&&i;this.showPop=o,this.$store.commit("setting/showFirstGuide",{showFirstGuide:o}),this.showPop||this.$emit("nextModal")}}catch(e){console.error(e)}}}},p=(0,s(1001).Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showPop?s("van-popup",{staticClass:"sign-pop-up",attrs:{"lock-scroll":!1,round:"","close-on-click-overlay":!1},on:{closed:e.renderGuideSteps},model:{value:e.showPop,callback:function(t){e.showPop=t},expression:"showPop"}},[s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.imgUrl,expression:"imgUrl",arg:"background-image"}],staticClass:"guide-modal"},[s("div",{staticClass:"guide-modal-close",on:{click:e.renderGuideSteps}},[s("SvgIcon",{attrs:{"icon-class":"icon-guanbichuangjianweike",type:"clear",size:30,color:"#fff"}})],1),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("ClCustomUser",{attrs:{type:e.user.sourceType||e.user.source_type,"data-type":"userName",value:e.user.unionid||e.user.account,name:e.user.name||"--"}})],1),s("div",{staticClass:"detail"},[e._v(e._s(e.$t("setting.welcomTip")))])]),s("div",{staticClass:"go",on:{click:e.renderGuideSteps}})])]):e.isClose?s("GuideSteps",{on:{nextModal:e.nextModal}}):e._e()}),[],!1,null,"c5a46c28",null).exports},4005:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(95082),i=(s(53743),s(59978)),o=(s(629),s(67763)),r=(s(152),s(62476)),n=(s(52073),s(15032)),l=(s(72975),s(98655)),c=(s(11155),s(91391)),d=(s(57658),s(26699),s(26294)),u=s(6106),p=s(63874),m=s(95969),h=s(68092),g=s(83096),f=s(23493),v=s.n(f),y=s(57969),_=s(49017),C={name:"GraphicNav",components:{Swipe:c.Z,SwipeItem:l.Z,Tabbar:n.Z,TabbarItem:r.Z,Grid:o.Z,GridItem:i.Z},props:{models:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{navs:[],active:-1,mapNum:"",PKNum:"",communityNum:"",studyProjectNum:this.$t("studyProject.onNew"),originMenu:[],newExamEnterprise:!1}},computed:(0,a.Z)({},(0,d.mapGetters)({primaryColor:"getPrimaryColor",aiCourseNewFlag:"microCourse/getAiCourseNewFlag",commonParams:"getCommonParams",versionType:"getVersionType"})),watch:{models(){this.isOld?this.initOldData():this.initNewData()}},async mounted(){this.isOld?this.initOldData():this.initNewData(),this.getCommunityCount(),this.getPostMapCount(),this.judgeExamEnterprise(),"platform"!==this.versionType&&await this.getAiCourseNewFlagAction({type:_.qQ.firstShow}),this.judgeExamEnterprise()},methods:(0,a.Z)((0,a.Z)({},(0,d.mapActions)({getAiCourseNewFlagAction:"microCourse/getAiCourseNewFlagAction"})),{},{initOldData(){const e=this.models.children;this.originMenu=e,this.navs=(0,g.dealNav)(e)},initNewData(){this.originMenu=this.models.porcelain_area,this.navs=(0,g.dealNav)(this.models.porcelain_area,!1)},getBadge(e){let t="";return"study_project"===e.key&&(t=this.studyProjectNum||""),"jobMap"===e.key&&(t=this.mapNum||""),"community"===e.key&&(t=this.communityNum||""),"exam"===e.key&&this.newExamEnterprise&&(t=this.$t("studyProject.onNew")),"microCourse"===e.key&&this.aiCourseNewFlag[_.qQ.firstShow]&&(t=y.Z.t("micro.aiCourse.new")),"exam"===e.key&&this.newExamEnterprise&&(t=this.$t("studyProject.onNew")),this.isOld||this.isRender?t:""},async getPostMapCount(){const{data:e}=await u.Z.getPostMapCount();this.mapNum=e.not_started_count>99?"99+":e.not_started_count},async getCommunityCount(){let e=!1;if(this.isOld){const t=this.models;t&&t.children&&(e=t.children.some((e=>e.checked&&"community"===e.key)))}else{const{porcelain_area:t}=this.models;t&&(e=t.some((e=>e.checked&&"community"===e.key)))}if(!e)return;const{data:t}=await u.Z.getCommunityCount();this.communityNum=t.data>99?"99+":t.data},async homeNavClick(e){const{url:t,key:s}=e,a=e.jump_id,i=e.jump_title;if("intelligent_accompaniment_app"===t){const e=await u.Z.getAccompanyLink();return void(0,p.N8)({url:e.data.data})}if("inside_course_classify"===t)return;if("inside_course_classify"===e.jump_type)return void this.$router.push({path:t});if("/home-module/exam-list"===t){return void("new"===await(0,h.dP)(0)?this.$router.push({path:t}):this.$router.push({path:m.Z.resource.examList()}))}if("course"===t){const e=await u.Z.checkCourseVisible(a);let t="";if("micro_course"===e.data.course_type)t=`/micro-watch/${a}/newest`;else{if("study"===e.data.course_type)return t=m.Z.studyProject.toStudyProject({studyProjectId:a}),void this.$router.push({path:t});t=m.Z.resource.enterpriseByNav({id:a})}m.Z.navigateTo(t)}else"link"===t?(0,p.N8)({url:i}):"toMicro"===t?m.Z.navigateTo(e.url):["survey","lecturer","certification","data","checkin","talentDevelopment","submitReport","study","study_project","microCourse","practice","pk_game_mobile","evaluationMobile","community","jobMap"].includes(s)?this.$router.push({path:t}):m.Z.navigateTo(t)},onNavDetail:v()((function(e){(this.isOld||this.isRender)&&this.homeNavClick(e)}),1e3),getTitle(e){return this.isRender||this.isOld?e.custom_name||e.name:e.custom_name},async judgeExamEnterprise(){const e=await(0,h.dP)(0);this.newExamEnterprise="new"===e}})},k=(0,s(1001).Z)(C,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["home-nav",e.originMenu.length<=5?"home-nav-one-line":""],attrs:{id:"firstBoot3"}},[s("div",[s("Swipe",{attrs:{autoplay:0,"indicator-color":"white",loop:!1}},e._l(e.navs,(function(t,a){return s("SwipeItem",{key:a.toString()},[s("Grid",{attrs:{"column-num":5,border:!1}},e._l(t,(function(t,i){return s("GridItem",{key:i.toString()+a.toString(),on:{click:function(s){return e.onNavDetail(t)}}},[s("Tabbar",{attrs:{fixed:!1},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[s("TabbarItem",{attrs:{icon:t.image,name:t.key,badge:e.getBadge(t)},scopedSlots:e._u([""!==t.image?{key:"icon",fn:function(){return[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.image.ossimg(),expression:"nav.image.ossimg()"}]})]},proxy:!0}:null],null,!0)},[s("span",{staticClass:"van-ellipsis"},[e._v(e._s(e.getTitle(t)))])])],1)],1)})),1)],1)})),1)],1)])}),[],!1,null,"5c84aa43",null).exports},16475:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(95082),i=(s(47238),s(75167)),o=(s(25773),s(35791)),r=(s(3791),s(93432)),n=(s(57658),s(6106)),l=s(69126),c=s(27479),d=s(26294),u=s(94194),p={name:"DailyTask",components:{[r.Z.name]:r.Z,ModuleTitle:l.default,EmptyBox:c.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z,TaskItem:u.default},props:{models:{type:Object,default:()=>({taskKeys:[]})},params:{type:Object,default:()=>({})}},data:()=>({taskList:[],progress:"",loading:!0}),computed:(0,a.Z)({themeColor(){return this.$store.state.themeColor},getTitle(){return this.params.title||this.$t("integrateTask.dailyMission")}},(0,d.mapGetters)({fresh:"microCourse/getFreshStatus"})),watch:{models(){this.getDailyTaskData()},fresh(e){e&&(this.getDailyTaskData(),this.$store.commit("microCourse/updateFresh",!1))}},mounted(){this.getDailyTaskData()},methods:{async getDailyTaskData(){this.loading=!0;const{data:e}=await n.Z.taskShow(this.models.taskKeys);0===e.code&&(this.taskList=e.data.details.slice(0,3),this.progress=e.data.progress,this.loading=!1)},moduleTitleEvent(){this.$router.push("/mine/mine-daily-task")}}},m=(0,s(1001).Z)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"daily-task"},[e.loading?s("van-loading",{staticClass:"task-loading",attrs:{size:"24"}}):e._e(),s("ModuleTitle",{attrs:{title:e.getTitle,"style-object":{padding:"16px 0"}},on:{click:e.moduleTitleEvent}}),0===e.taskList.length?s("EmptyBox"):s("div",{staticClass:"daily-task-content"},[s("div",{staticClass:"text"},[e._v(" "+e._s(e.$t("integrateTask.completedTask"))+" "),s("span",{staticClass:"progress",style:{color:e.themeColor.primaryColor}},[e._v(" "+e._s(e.progress))])]),e._l(e.taskList,(function(t){return s("TaskItem",{key:t.event_code,attrs:{"item-data":t},on:{getList:e.getDailyTaskData}})}))],2)],1)}),[],!1,null,"f347950c",null).exports},94194:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});s(34837);var a=s(39146),i=(s(25773),s(35791)),o=(s(47238),s(75167)),r=s(78551),n=s(83096),l=s(6106),c={name:"TaskItem",components:{SvgIcon:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{itemData:{type:Object,default:()=>{}}},data:()=>({taskList:[],progress:null}),computed:{themeColor(){return this.$store.state.themeColor},taskStatus(){const{learn_progress:e,receive_status:t}=this.itemData;return Number(e)<100?"progress":Number(e)>=100&&"true"!==t?"receive":"done"}},watch:{},mounted(){},methods:{handleLink(e){Number(e.learn_progress)>=100||(0,n.handleLinkToByCode)(e.event_code)},async handlePick(e){const{data:t}=await l.Z.pickPoints(e);0===t.code?((0,a.Z)(t.msg),this.$emit("getList"),this.$store.commit("homeModule/refreshPoints",!0)):(0,a.Z)(t.msg)}}},d=(0,s(1001).Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"task-item",on:{click:function(t){return e.handleLink(e.itemData)}}},[s("div",{staticClass:"task-item-left"},[s("div",{staticClass:"task-item-title"},[e._v(e._s(e.itemData.event_name))]),s("div",{staticClass:"task-item-text"},[e._v(e._s(e.itemData.rule_detail))])]),s("div",{staticClass:"task-item-right"},["progress"===e.taskStatus?s("div",{staticClass:"progress"},[s("van-progress",{attrs:{color:e.themeColor.primaryColor,percentage:e.itemData.learn_progress,"show-pivot":!1}}),s("span",{staticClass:"percent"},[e._v(" "+e._s(e.itemData.learn_progress)+"%")])],1):e._e(),"receive"===e.taskStatus?s("div",{staticClass:"text-tip"},[s("van-button",{attrs:{size:"mini",color:e.themeColor.primaryColor,plain:""},on:{click:function(t){return t.stopPropagation(),e.handlePick(e.itemData.event_code)}}},[e._v(e._s(e.$t("integrateTask.get")))])],1):e._e(),"done"===e.taskStatus?s("div",{staticClass:"text-tip"},[s("SvgIcon",{staticClass:"iconfont",attrs:{"icon-class":"icon-tongguo",color:"#52C41A"}}),s("span",[e._v(e._s(e.$t("data.finished")))])],1):e._e()])])}),[],!1,null,"5a1fec1f",null).exports},58440:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(95082),i=(s(3791),s(93432)),o=(s(57658),s(69126)),r=s(6106),n=s(27479),l=s(95969),c=s(50361),d=s.n(c),u=s(18446),p=s.n(u),m=s(77140),h=s(26294),g={name:"Lecturers",components:{Loading:i.Z,EmptyBox:n.Z,ModuleTitle:o.default,LecturerItem:m.default},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:()=>({lecturersList:[],loading:!1,mockData:{id:"1",lecturer_name:"示例讲师名称",avatar:"",course_count:"100",level_name:"此处是讲师等级",adept_field:["擅长领域","擅长领域"]},lecturesConfig:{page_size:3,page_number:1,status:1}}),computed:(0,a.Z)({getTitle(){return this.isOld?this.models.custom_name:this.params.title||this.$t("common.teacher")}},(0,h.mapState)(["templateId"])),watch:{models(e,t){p()(e.lecturerKeys,t.lecturerKeys)||this.getLecturer()},params(e,t){e.limit===t.limit&&e.config===t.config&&e.type===t.type||this.getLecturer()}},mounted(){this.getLecturer()},methods:{getLecturer(){this.isOld?this.getHomeLecturerList(this.lecturesConfig):this.judgeList()},judgeList(){const{lecturerKeys:e}=this.models,{config:t,type:s,limit:a=3}=this.params,i=d()(this.lecturesConfig);"all"===t?e.length>0?(i.lecturer_ids=e.slice(0,a).join(","),this.getHomeLecturerList(i)):this.isRender?(this.loading=!1,this.lecturersList=[]):(this.lecturersList=new Array(a).fill(this.mockData),this.loading=!1):(i.type=s,this.getHomeLecturerList(i))},getHomeLecturerList(e){this.loading=!0,this.params&&this.params.limit&&(e.page_size=this.params.limit),this.templateId&&(e.template_id=this.templateId),r.Z.getHomeLecturerList(e).then((({data:e})=>{const{list:t}=e,s=t.map((e=>(e.adept_field=e.adept_field?e.adept_field.split(","):[this.$t("home.NoTags")],e)));this.lecturersList=s})).finally((()=>{this.loading=!1}))},moduleTitleEvent(e){(this.isOld||this.isRender)&&"more"===e&&this.$router.push({path:l.Z.home.lecturesList()})}}},f=(0,s(1001).Z)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lecturers_container"},[s("div",{staticClass:"lecturers"},[s("ModuleTitle",{attrs:{title:e.getTitle},on:{click:e.moduleTitleEvent}}),e.loading?s("Loading",{attrs:{vertical:""}}):e.lecturersList.length<=0?s("EmptyBox",{staticClass:"lecture_empty"}):e._l(e.lecturersList,(function(t,a){return s("LecturerItem",{key:a.toString(),attrs:{data:t,"is-render":e.isRender,"is-old":e.isOld}})}))],2)])}),[],!1,null,"1aa51b16",null).exports},77140:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});s(57658);var a=s(4852),i=s(45877),o=s(95969),r={name:"LecturerItem",components:{Avatar:a.Z,ClCustomUser:i.Z},props:{data:{type:Object,required:!0},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:()=>({}),computed:{},created(){},mounted(){},methods:{linkToLecturerDetail(){(this.isOld||this.isRender)&&this.$router.push({path:o.Z.home.lecturerDetail(this.data.id)})}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lecturer_item_container",on:{click:e.linkToLecturerDetail}},[s("Avatar",{attrs:{src:e.data.avatar,width:"56",height:"56"}}),s("div",{staticClass:"content"},[s("div",{staticClass:"name"},[s("cl-custom-user",{attrs:{type:e.data.lecturer_source_type,"data-type":"userName",value:e.data.lecturer_sync_user_id,name:e.data.lecturer_name}})],1),s("div",{staticClass:"level_container"},[e.data.level_name?s("span",{staticClass:"level"},[e._v(" "+e._s(e.data.level_name)+" ")]):s("span",{staticClass:"level default"},[e._v(" "+e._s(e.$t("home.NoGrade")))])]),s("div",{staticClass:"tags_container"},e._l(e.data.adept_field,(function(t,a){return s("span",{key:a,staticClass:"tag"},[e._v(e._s(t))])})),0)])],1)}),[],!1,null,"14d1baae",null).exports},26457:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(95082),i=(s(25773),s(35791)),o=(s(3791),s(93432)),r=(s(52355),s(29233)),n=(s(47601),s(44951)),l=(s(57658),s(2707),s(6106)),c=s(52196),d=s(78368),u=s(27479),p=s(45877),m=s(98512),h=s(18446),g=s.n(h),f=s(50361),v=s.n(f),y=s(69126),_=s(26294),C={name:"Micro",components:{ModuleTitle:y.default,VanImage:n.Z,Cell:r.Z,Loading:o.Z,Button:i.Z,EmptyBox:u.Z,ClCustomUser:p.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0}},data:function(){return{list:[],defaultAvatar:d,pageIdConfig:{page_number:1,page_size:this.params.limit||4,course_type:["micro_course"]},loading:!1,mockData:{title:"示例课程名称标题",playCount:"66",awardScore:10,showScore:"true",cover:"https://oss.coolcollege.cn/1794908640189222912.png",teacherId:0,teacherName:"暂无",starLevel:0,commentCount:"99",scope:2,original:!0,courseSource:"enterprise",courseType:"course",bizType:2,summary:"测试描述",createUserAvatar:d,createUserName:"暂无"}}},computed:(0,a.Z)({getTitle(){return this.params.title||this.$t("home.MCourse")}},(0,_.mapGetters)({isUnionTrain:"setting/getIsUnionTrain"})),watch:{models(e,t){g()(e.courseList,t.courseList)||this.getMicroList()},params(e,t){e.limit!==t.limit&&this.getMicroList()}},mounted(){this.getMicroList()},methods:{handleGoMicroPage(){this.$router.push("/micro")},getMicroList(){this.loading=!0,this.getMicroFromPath()},getMicroFromPath(){const{courseList:e}=this.models,{mode:t,limit:s,classify:a}=this.params,i=v()(this.pageIdConfig);"course"===t?e.length>0?(i.ids=Array.from(e,(e=>e.id)),this.getCourseListByIdsAjax(i)):this.isRender?(this.list=[],this.loading=!1):(this.list=new Array(s).fill(this.mockData),this.loading=!1):a.content.id&&""!==a.content.id?(i.classify_id=a.content.id,i.sort_type=a.sort,this.getCourseListByIdsAjax(i)):this.isRender?(this.list=[],this.loading=!1):(this.list=new Array(s).fill(this.mockData),this.loading=!1)},async getCourseListByIdsAjax(e){const{limit:t}=this.params;e.page_size=t;const s=(await l.Z.getCourseListByIds(e)).data.list;s.length>0?this.list=s:this.isRender?this.list=[]:this.list=new Array(t).fill(this.mockData),this.loading=!1},onClick(e){if(this.isRender&&"more"===e){const{mode:e,classify:t}=this.params;this.$router.push({path:"/micro",params:{sort:"course"===e?"newest":t.sort}})}},async handleToMicroDetail(e){this.$toast.clear();const{mode:t,classify:s}=this.params,a="course"===t?"newest":s.sort;if(this.isRender)try{await(0,c.XS)({courseData:e}),this.$router.push(`/micro-watch/${e.id}/${a}?${(0,m.WZ)()}`)}catch(e){this.$toast({message:this.$t("home.bannerNoRightView"),duration:1500})}}}},k=(0,s(1001).Z)(C,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return"false"===e.isUnionTrain?s("div",{staticClass:"home-micro"},[s("ModuleTitle",{attrs:{id:"firstBoot6",title:e.getTitle},on:{click:e.onClick}}),e.loading?s("Loading",{attrs:{vertical:""}}):s("div",{staticClass:"scroll-micro"},[0===e.list.length?s("div",{staticClass:"micro_empty_box"},[s("EmptyBox",{staticClass:"micro_empty",attrs:{description:e.$t("common.noDataTip2")}}),s("Button",{staticClass:"micro_button",attrs:{icon:"plus",size:"small"},on:{click:e.handleGoMicroPage}},[e._v(e._s(e.$t("common.release")))])],1):e._l(e.list,(function(t,a){return s("div",{key:a.toString(),staticClass:"micro-item",on:{click:function(s){return e.handleToMicroDetail(t)}}},[s("VanImage",{staticClass:"micro-list-bottom-img",attrs:{"lazy-load":"",fit:"cover",src:t.cover.ossimg()}}),s("div",{staticClass:"micro-list-bottom-content"},[s("Cell",{attrs:{"value-class":"van-ellipsis",center:"",border:!1},scopedSlots:e._u([{key:"icon",fn:function(){return[s("VanImage",{staticClass:"micro-avatar",attrs:{round:"","lazy-load":"",fit:"cover",src:t.createUserAvatar.ossimg()||e.defaultAvatar}})]},proxy:!0},{key:"default",fn:function(){return[s("ClCustomUser",{attrs:{type:t.creatorSourceType,"data-type":"userName",value:t.creatorSyncUserId,name:t.createUserName||e.$t("common.no")}})]},proxy:!0}],null,!0)}),s("Cell",{staticClass:"micro-title",attrs:{"value-class":"van-ellipsis",center:"",border:!1,value:t.title}})],1)],1)}))],2)],1):e._e()}),[],!1,null,"2efca082",null).exports},91242:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});s(30653);var a=s(57370),i=(s(72975),s(98655)),o=(s(11155),s(91391)),r=(s(33948),s(57658),s(6106)),n=s(78551),l=s(95969),c={name:"Notice",components:{Swipe:o.Z,SwipeItem:i.Z,NoticeBar:a.Z,SvgIcon:n.Z},props:{isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0},models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}}},data:function(){return{requestParams:{page_size:3,page_number:1},notices:[]}},computed:{themeColor(){return this.$store.state.themeColor},title(){const{title:e=""}=this.params;return e||this.$t("homePage.notice")}},watch:{},mounted(){this.getNoticeList()},methods:{async getNoticeList(){const{getNoticeList:e}=r.Z,[t,s]=await e(this.requestParams);!t&&s.data.pageInfo&&(this.notices=s.data.pageInfo.list)},enterNoticeDetails(e){e&&(this.isOld||this.isRender)&&this.$router.push({path:l.Z.home.noticeDetail({articleId:e.id})})},enterNoticeList(){(this.isOld||this.isRender)&&this.$router.push({path:l.Z.home.noticeList()})}}},d=(0,s(1001).Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-notice"},[s("div",{staticClass:"home-notice-inner"},[s("div",{staticClass:"notice-icon"},[s("div",{staticClass:"notice-logo-wrap",style:{backgroundColor:e.themeColor.primaryColor}}),s("div",{staticClass:"notice-title"},[e._v(e._s(e.title))])]),s("NoticeBar",{attrs:{scrollable:!1,background:"white",color:"#7f849a"}},[s("Swipe",{staticClass:"notice-swipe",attrs:{vertical:"",autoplay:2e3,delay:500,"show-indicators":!1}},[e.notices.length>0?s("div",e._l(e.notices,(function(t){return s("SwipeItem",{key:t.id,on:{click:function(s){return e.enterNoticeDetails(t)}}},[e._v(" "+e._s(t.title)+" ")])})),1):s("div",[s("SwipeItem",[e._v(" 暂无数据 ")])],1)])],1),e.notices.length>0?s("div",{staticClass:"notice-more",on:{click:e.enterNoticeList}},[s("svg-icon",{attrs:{color:"#adadad","icon-class":"icon-arrow-r"}})],1):e._e()],1)])}),[],!1,null,"aada2e0a",null).exports},66150:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});s(57658);var a=s(78551),i=s(95969),o={components:{SvgIcon:a.Z},props:{isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data(){return{pointsMall:this.$t("mine.pointsMall")}},computed:{},created(){},mounted(){},methods:{onLinkToPointsMall(){(this.isOld||this.isRender)&&this.$router.push({path:i.Z.home.pointsMall({isHome:!0})})}}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"points_mall_container"},[s("div",{staticClass:"points_mall_inner"},[s("div",{staticClass:"name"},[s("span",[e._v(e._s(e.$t("pointsMall.point")))]),s("span",[e._v(e._s(e.$t("pointsMall.mall")))])]),s("div",{staticClass:"tip_container"},[s("SvgIcon",{attrs:{"icon-class":"icon-jifenduihuanshangpin",size:20,color:"#D79032"}}),s("span",{staticClass:"tip"},[e._v(e._s(e.$t("pointsMall.conversionTips")))])],1),s("div",{staticClass:"exchange",on:{click:e.onLinkToPointsMall}},[s("span",[e._v(e._s(e.$t("pointsMall.redeemNow")))])])])])}),[],!1,null,"285cf8f4",null).exports},21112:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});s(3791);var a=s(93432),i=(s(56977),s(57658),s(27426)),o={name:"Panel",components:{ModuleTitle:s(69126).default,[a.Z.name]:a.Z},filters:{formatHour:e=>(e/3600).toFixed(1)},props:{models:{type:Object,default:()=>({taskKeys:[]})},params:{type:Object,default:()=>({})}},data:()=>({pointsData:{today:0,total:0,available:0},scoreData:{today:0,total:0,studyDuration:0},loading:!1}),computed:{getTitle(){return this.params.title||this.$t("pointsMall.credits")},refreshPoints(){return this.$store.state.homeModule.refreshPoints}},watch:{refreshPoints(e){e&&this.getData()}},mounted(){this.getData()},methods:{async getData(){this.loading=!0;const{data:e={}}=await i.LE.myIntegral(1),{today_score:t,total_score:s,study_duration:a,total_integral:o,today_integral:r,available_integral:n}=e;this.pointsData={today:r,total:o,available:n},this.scoreData={today:t,total:s,studyDuration:a},this.loading=!1,this.refreshPoints&&this.$store.commit("homeModule/refreshSignAndPoints",!1)},toPage(e){this.$router.push({path:e,query:{from:"home"}})}}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"points-panel"},[s("ModuleTitle",{attrs:{title:e.getTitle,"style-object":{padding:"16px 0"},"show-more":!1}}),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"course-list-center"}),s("div",{staticClass:"points-panel-content"},[s("div",{staticClass:"scoring-box"},[s("div",{staticClass:"box-title"},[e._v(" "+e._s(e.$t("minePoints.todayPoints"))+" "),s("span",{on:{click:function(t){return e.toPage("/mine-points")}}},[e._v(e._s(e.$t("knowledge.more")))])]),s("div",{staticClass:"num"},[e._v(" "+e._s(e.pointsData.today)+" ")]),s("div",{staticClass:"num-box"},[s("div",{staticClass:"num-box-item"},[s("span",{staticClass:"num-box-title"},[e._v(e._s(e.$t("mine.accumulativePoints")))]),s("span",{staticClass:"num-box-count"},[e._v(e._s(e.pointsData.total))])]),s("div",{staticClass:"num-box-item"},[s("span",{staticClass:"num-box-title"},[e._v(e._s(e.$t("minePoints.pointCanUse")))]),s("span",{staticClass:"num-box-count"},[e._v(e._s(e.pointsData.available))])])])]),s("div",{staticClass:"grade-box"},[s("div",{staticClass:"box-title"},[e._v(" "+e._s(e.$t("minePoints.todayCredit"))+" "),s("span",{on:{click:function(t){return e.toPage("/mine-scores")}}},[e._v(e._s(e.$t("knowledge.more")))])]),s("div",{staticClass:"num"},[e._v(" "+e._s(e.scoreData.today)+" ")]),s("div",{staticClass:"num-box"},[s("div",{staticClass:"num-box-item"},[s("span",{staticClass:"num-box-title"},[e._v(e._s(e.$t("mine.accumulativeCredits")))]),s("span",{staticClass:"num-box-count"},[e._v(e._s(e.scoreData.total))])]),s("div",{staticClass:"num-box-item"},[s("span",{staticClass:"num-box-title"},[e._v(e._s(e.$t("mine.totalCredit")))]),s("span",{staticClass:"num-box-count"},[e._v(e._s(e._f("formatHour")(e.scoreData.studyDuration)))])])])])])],1)}),[],!1,null,"1dca64be",null).exports},74495:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(95082),i=(s(3791),s(93432)),o=(s(73474),s(74755)),r=(s(47601),s(44951)),n=(s(29941),s(64168)),l=(s(52355),s(29233)),c=(s(31146),s(41610)),d=(s(33948),s(91058),s(57658),s(26294)),u=s(6106),p=s(27479),m=s(69126),h=s(34422);const g=`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/credits-ranking1.png`.ossimg(),f=`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/credits-ranking2.png`.ossimg(),v=`${ASSETS_SDN_HOST}/assets/kuxueyuan/mobile/icon/credits-ranking3.png`.ossimg();var y={name:"Ranking",components:{[c.Z.name]:c.Z,[l.Z.name]:l.Z,[n.Z.name]:n.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,ModuleTitle:m.default,RankItem:h.default,EmptyBox:p.Z,Loading:i.Z},props:{models:{type:Object,default:()=>({})},params:{type:Object,default:()=>({})},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:()=>({rankInfo:{ranks:[],mine:{rank:-1,value:"0"}},showHelp:!1,loading:!1,courseStudy:g,taskStudy:f,examStudy:v}),computed:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,d.mapState)(["templateId"])),(0,d.mapGetters)({primaryColor:"getPrimaryColor"})),{},{getTitle(){return this.isOld?this.models.custom_name:this.params.title||("credits"===this.params.type?this.$t("home.scoreRanking"):this.$t("homePage.pointsRanking"))}}),mounted(){this.isOld||"credits"===this.params.type?this.getHomeScoreInfo():this.getHomeIntegralInfo()},methods:{async getHomeScoreInfo(){this.loading=!0;const[e,{data:t}]=await u.Z.getHomeScoreInfo({template_id:this.templateId});if(!e){const{rank:e,total_score:s,ranks:i}=t;this.rankInfo=(0,a.Z)((0,a.Z)({},this.rankInfo),{},{ranks:i,mine:{rank:parseInt(e,10),value:s}})}this.loading=!1},async getHomeIntegralInfo(){this.loading=!0;const[e,{data:t}]=await u.Z.getNewIntegralList({template_id:this.templateId,page_num:3});if(!e&&t.data){const{myIntegral:e,myRank:s,integralRankList:i}=t.data;this.rankInfo=(0,a.Z)((0,a.Z)({},this.rankInfo),{},{mine:{rank:s,value:e},ranks:(i||[]).map((e=>({rank:e.rank,userInfo:e.userInfo,avatar:e.userInfo.avatar,name:e.userInfo.name,score:e.integral})))})}this.loading=!1},moduleTitleEvent(e){"help"!==e||"integral"!==this.params.type?(this.isOld||this.isRender)&&("help"===e?this.showHelp=!0:"more"===e&&(this.isOld||this.isRender)&&(this.isOld||"credits"===this.params.type?this.$router.push({path:"/mine-scores",query:{from:"home"}}):this.$router.push({path:"/mine-points"}))):this.$toast(this.$t("home.hourUpdateTip"))},closeHelp(){this.showHelp=!1}}},_=(0,s(1001).Z)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ranking-container"},[s("ModuleTitle",{attrs:{title:e.getTitle,"show-help":e.isOld||"credits"===e.params.type||"integral"===e.params.type,"style-object":{padding:"16px"}},on:{click:e.moduleTitleEvent}}),e.loading?s("Loading",{attrs:{vertical:""}}):s("div",{staticClass:"ranking"},[s("section",{staticClass:"mine_score"},[s("span",[e._v(e._s(e.isOld||"credits"===e.params.type?e.$t("home.myScore"):e.$t("home.myPoints"))+": "+e._s(e.rankInfo.mine.value))]),s("span",{staticClass:"rank"},[e._v(e._s(e.$t("home.rank"))+": "+e._s(-1===e.rankInfo.mine.rank?e.$t("home.outerList"):e.rankInfo.mine.rank))])]),e.rankInfo.ranks<=0?s("EmptyBox",{staticClass:"rank-empty"}):e._l(e.rankInfo.ranks,(function(e){return s("RankItem",{key:e.user_id,attrs:{data:e}})}))],2),s("van-dialog",{attrs:{"class-name":"help-container","close-on-click-overlay":!0,"confirm-button-text":e.$t("common.iKnow"),theme:"round-button","confirm-button-color":e.primaryColor},on:{click:e.closeHelp},scopedSlots:e._u([{key:"title",fn:function(){return[s("div",{staticClass:"help-title"},[e._v(e._s(e.$t("home.getCredits")))])]},proxy:!0}]),model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}},[s("div",{staticClass:"help-tip"},[e._v(e._s(e.$t("home.hourUpdateTip")))]),s("div",{staticClass:"help-main"},[s("p",[s("span",[e._v(e._s(e.$t("home.courseStudy")))]),s("van-image",{attrs:{src:e.courseStudy}})],1),s("p",[s("span",[e._v(e._s(e.$t("home.taskStudy")))]),s("van-image",{attrs:{src:e.taskStudy}})],1),s("p",[s("span",[e._v(e._s(e.$t("home.examStudy")))]),s("van-image",{attrs:{src:e.examStudy}})],1)])])],1)}),[],!1,null,"e439e392",null).exports},34422:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});s(47601);var a=s(44951),i=s(4852),o=s(45877),r=s(67875),n=s(78368),l={name:"RankItem",components:{VanImage:a.Z,Avatar:i.Z,ClCustomUser:o.Z,ClCustomDepartment:r.Z},props:{data:{type:Object,required:!0}},data:()=>({levelImage:[{color:"#fb9c0b",url:"https://oss.coolcollege.cn/1790751727201423360.png"},{color:"#c4c4c4",url:"https://oss.coolcollege.cn/1790751728975613952.png"},{color:"#a87e68",url:"https://oss.coolcollege.cn/1790751730716250112.png"}],defaultAvatar:n}),computed:{},created(){},mounted(){},methods:{}},c=(0,s(1001).Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rank_item_container"},[s("div",{staticClass:"rank_item"},[s("div",{staticClass:"level_tip_container"},[s("VanImage",{staticClass:"bg_img",attrs:{"lazy-load":"",src:e.levelImage[e.data.rank-1].url.ossimg(),fit:"fill",width:"20",height:"20"}})],1),s("div",{staticClass:"avtar_container"},[s("Avatar",{attrs:{src:e.data.avatar||e.defaultAvatar}})],1),s("div",{staticClass:"content_container"},[s("div",{staticClass:"content"},[e.data.userInfo&&e.data.userInfo.name?s("div",{staticClass:"lable"},[s("cl-custom-user",{attrs:{type:e.data.userInfo.sourceType||e.data.userInfo.source_type,"data-type":"userName",value:e.data.userInfo.userId||e.data.userInfo.user_id,name:e.data.userInfo.name||"--"}})],1):s("div",{staticClass:"lable"},[s("cl-custom-user",{attrs:{type:e.data.source_type,"data-type":"userName",value:e.data.sync_user_id,name:e.data.name||"--"}})],1),e.data.userInfo&&e.data.userInfo.department_infos?s("div",{staticClass:"department"},[s("cl-custom-department",{attrs:{"display-all":!0,list:e.data.userInfo.department_infos}})],1):s("div",{staticClass:"department"},[e._v(" "+e._s(e.data.department_names?e.data.department_names.join(" / "):"")+" ")])]),s("span",{staticClass:"score",style:{color:e.levelImage[e.data.rank-1].color}},[e._v(" "+e._s(e.data.score)+" ")])])])])}),[],!1,null,"3cf48e3f",null).exports},60211:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(95082),i=(s(86039),s(20495)),o=(s(57658),s(26699),s(32023),s(95969)),r=s(78551),n=s(27632),l=s(26294),c=s(23111),d=s(27137),u=s(22648),p=s(55602),m={name:"Search",components:{VanSearch:i.Z,SvgIcon:r.Z,VersionTip:d.default},props:{isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},computed:(0,a.Z)((0,a.Z)({themeColor(){return this.$store.state.themeColor}},(0,l.mapGetters)({primaryColor:"getPrimaryColor",homeBannerColor:"setting/getHomeBannerColor"})),{},{bannerBackColor(){const e=this.$store.state.setting.homeBannerColor;return(0,c.y)(e)},showScan:()=>"app"===n.Z.env}),methods:{isGray:()=>(0,u.SL)(),onClick(){(this.isOld||this.isRender)&&this.$router.push({path:o.Z.home.toHomeSearch()})},scanCode(){sessionStorage.setItem("isOpenScan",!0),n.Z.scan({type:"qr"},(e=>{if(sessionStorage.setItem("isOpenScan",!1),e){let{code:t}=e;if(this.$toast.clear(),t.indexOf("enternalLink")>-1)return void(window.location.href=t);if(t.includes("/assets-share.html"))return void(0,p.tD)(t);if(-1===t.indexOf("fromApp"))return void this.$toast(this.$t("common.invalidParameter"));n.Z.navigateTo({url:`/pages/messageRedirect/messageRedirect?${t}`})}}),(e=>{sessionStorage.setItem("isOpenScan",!1)}))}}},h=(0,s(1001).Z)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("VersionTip"),s("div",{staticClass:"home-search",style:{background:e.isOld?e.themeColor.primaryColor:e.bannerBackColor||e.themeColor.primaryColor}},[s("div",{class:["home-search-content",e.showScan?"has-scan":""]},[s("VanSearch",{attrs:{background:e.isOld?e.themeColor.primaryColor:e.bannerBackColor||e.themeColor.primaryColor,placeholder:e.isGray()?e.$t("common.search"):e.$t("common.searchKeywords"),readonly:""},on:{click:e.onClick}})],1),e.showScan?s("div",{staticClass:"home-search-scan"},[s("div",{staticClass:"home-scan",on:{click:e.scanCode}},[s("SvgIcon",{attrs:{size:24,color:"#FFFFFF"===e.bannerBackColor?"#333":"#fff","icon-class":"icon-saoyisao"}})],1)]):e._e()])],1)}),[],!1,null,"45b5cc4a",null).exports},27137:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});s(30653);var a=s(57370),i=s(6106),o={components:{[a.Z.name]:a.Z},data:()=>({showTip:!1,content:"",id:""}),created(){this.getWeatherHasInfo()},methods:{async getWeatherHasInfo(){const{data:e}=await i.Z.getWeatherHasInfo();0===e.code&&(this.showTip=!0,this.content=e.data.content,this.id=e.data.id)},async close(){this.showTip=!1;const e={id:this.id};await i.Z.updateRecordStatus(e)}}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.showTip,expression:"showTip"}],staticClass:"version-tip"},[s("van-notice-bar",{staticClass:"version-tip-bar",attrs:{color:"#BF9B66",background:"#FFFBE6",scrollable:"","left-icon":"info-o",mode:"closeable"},on:{close:e.close}},[s("div",{staticClass:"version-tip-bar-content"},[e._v(e._s(e.$t("subsidy.tips"))+"："+e._s(e.content))])])],1)}),[],!1,null,"521c7e5c",null).exports},16010:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});s(34837);var a=s(39146),i=(s(3791),s(93432)),o=(s(25773),s(35791)),r=s(6106),n={name:"CheckIn",components:{[o.Z.name]:o.Z,[i.Z.name]:i.Z},directives:{scroll:{inserted(e,t){t.value.isToday&&t.value.index>0&&e.parentNode.parentNode.scrollTo(e.offsetLeft,0)}}},data:()=>({loading:!1,active:1,signInData:{},signList:[]}),computed:{themeColor(){return this.$store.state.themeColor},refreshSignIn(){return this.$store.state.homeModule.refreshSignIn}},watch:{refreshSignIn(e){e&&this.getSignData()}},async mounted(){await this.getSignData()},methods:{async getSignData(){this.loading=!0;const{data:e}=await r.Z.getSignIn();if(0===e.code){const{continuous_sign_in_day_count:t,today_is_what_day:s,sign_in_integral_count:a,signed_today:i,next_reward_day:o,today_position:r,sign_info_list:n,daily_sign_score:l}=e.data,c={continuousDays:t,todayIs:s,signedToday:i,dailySignScore:l,reward:a,nextRewardDays:o,todayPosition:r,signInfoList:n};this.signInData=e.data,this.handleSignData(c),this.loading=!1}this.refreshSignIn&&this.$store.commit("homeModule/refreshSignIn",!1)},handleSignData(e){const{signedToday:t,todayPosition:s,signInfoList:a=[]}=e,i="https://oss.coolcollege.cn/1816993863513018368.png",o="https://oss.coolcollege.cn/1816993863471075328.png",r="https://oss.coolcollege.cn/1816993863655624704.png",n=a.map(((e,a)=>(e.title=this.$t("signIn.days",{num:e.what_day}),e.content=this.$t("integrateTask.unitPoints",{num:e.integral}),e.icon=r,e.index=a,a+1<Number(s)&&(e.content=this.$t("signIn.signed"),e.icon=i,e.checked=!0),"true"===e.continuous&&(e.title=this.$t("integrateTask.continuousReward"),e.icon=o),"true"===e.today&&(e.title=this.$t("common.today"),e.checked="true"===t,e.content="true"===t?this.$t("signIn.signed"):this.$t("integrateTask.unitPoints",{num:e.integral}),"true"===e.continuous&&(e.icon=o),"true"===t&&(e.icon=i),e.isToday=!0),e)));this.signList=n},toSignIn(){r.Z.toSignIn().then((e=>{if(2e4===e.data.code){const{integral_info:t}=e.data.data;t&&((0,a.Z)({type:"text",message:t,duration:3e3}),this.getSignData()),this.$store.commit("homeModule/refreshPoints",!0)}else 4e4===e.data.code?(0,a.Z)({type:"fail",message:this.$t("signIn.hasSigned"),duration:3e3}):(0,a.Z)({type:"fail",message:e.data.msg,duration:1e3})})).catch((e=>{(0,a.Z)({type:"fail",message:e.data.msg,duration:1e3})}))}}},l=(0,s(1001).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sign-in-mobile"},[s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("span",{staticClass:"title-text"},[e._v(e._s(e.$t("signIn.signIn")))]),s("span",{staticClass:"text"},[e._v(e._s(e.$t("signIn.signInTip",{num:e.signInData.next_reward_day})))])]),e.loading?s("van-loading",{staticClass:"task-loading",attrs:{size:"24"}}):e._e(),s("div",{staticClass:"detail"},[s("div",{staticClass:"detail-container"},[s("div",{staticClass:"scroll-container"},e._l(e.signList,(function(t,a){return s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t,expression:"item"}],key:a,staticClass:"module",class:t.isToday?"active":"",style:{backgroundColor:t.isToday?e.themeColor.primaryColor:""}},[s("div",{staticClass:"day"},[e._v(e._s(t.title))]),s("div",{staticClass:"sign-success"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.icon.ossimg(),expression:"item.icon.ossimg()"}],attrs:{alt:""}})]),s("div",{staticClass:"result"},[e._v(" "+e._s(t.content))]),t.isToday&&!t.checked?s("div",{staticClass:"sign-in-btn",style:{color:e.themeColor.primaryColor},attrs:{plain:""},on:{click:e.toSignIn}},[e._v(e._s(e.$t("signIn.signIn")))]):e._e()])})),0)])])],1)])}),[],!1,null,"0e7d3cb0",null).exports},93437:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});s(34837);var a=s(39146),i=s(95082),o=(s(73474),s(74755)),r=(s(57658),s(6106)),n=s(26294),l={name:"SignIn",components:{[o.Z.name]:o.Z},data:()=>({showDialog:!1,days:0,continuityDays:0,isSignIn:!1}),computed:(0,i.Z)({},(0,n.mapGetters)({qyShield:"setting/getQySwitch",userInfo:"user/getUserInfo"})),created(){},mounted(){this.getSignInInfos()},methods:{async getSignInInfos(){const{data:e}=await r.Z.signInDialog(),{status:t}=e.data;if(this.showDialog="true"===t,this.showDialog){const{data:e}=await r.Z.signInContinuityDays(),t=e.data;this.continuityDays=t}},toSignIn(){r.Z.toSignIn().then((async e=>{if(2e4===e.data.code){const{integral_info:t}=e.data.data,{data:s}=await r.Z.signInContinuityDays(),i=s.data;this.continuityDays=i,this.isSignIn=!0,t&&(0,a.Z)({type:"text",message:t,duration:3e3}),this.$store.commit("homeModule/refreshSignAndPoints",!0)}else 4e4===e.data.code?(0,a.Z)({type:"fail",message:this.$t("signIn.hasSigned"),duration:3e3}):(0,a.Z)({type:"fail",message:e.data.msg,duration:1e3})})).catch((e=>{(0,a.Z)({type:"fail",message:e.data.msg,duration:1e3})}))},toGeneratePoster(){"false"===this.qyShield?(this.showDialog=!1,this.$router.push({path:"/sign-poster"})):this.closeDialog()},closeDialog(){this.showDialog=!1,r.Z.closeSignInDialog()}}},c=(0,s(1001).Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-popup",{staticClass:"sign-pop-up",attrs:{"lock-scroll":!1,round:""},on:{closed:e.closeDialog},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[s("div",{class:"sign-in "+(e.isSignIn?"isSignIn":"")},[s("div",{staticClass:"sign-in-close",on:{click:e.closeDialog}},[s("SvgIcon",{attrs:{"icon-class":"icon-icon_close",type:"clear",size:18,color:"#fff"}})],1),s("div",{staticClass:"sign-in-title",style:{color:e.isSignIn?"#516AE6":"#fff"}},[e._v(" "+e._s(e.isSignIn?e.$t("signIn.checkInSuccess"):e.$t("signIn.checkInDaily"))+" ")]),s("div",{staticClass:"sign-in-content"},[e._v(" "+e._s(e.$t("signIn.continuousSignIn"))),s("span",[e._v(e._s(e.continuityDays))]),e._v(e._s(e.$t("signIn.day"))+" ")]),s("div",{staticClass:"sign-in-tip"},[e._v(e._s(e.$t("signIn.tips")))]),e.showDialog&&!e.isSignIn?s("div",{staticClass:"sign-in-btn",on:{click:e.toSignIn}},[e._v(" "+e._s(e.$t("signIn.daily"))+" ")]):e._e(),e.isSignIn?s("div",{staticClass:"sign-in-btn",on:{click:e.toGeneratePoster}},[e._v(" "+e._s("false"===e.qyShield?e.$t("signIn.generateLearningPosters"):e.$t("common.iKnow"))+" ")]):e._e()])])}),[],!1,null,"dcbd08e8",null).exports},20688:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(95082),i=(s(3791),s(93432)),o=(s(57658),s(26513)),r=s(69126),n=s(26294),l={name:"SysLearningPath",components:{ModuleTitle:r.default,[i.Z.name]:i.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{list:[],dataLoading:!0,pathItem:["https://oss.coolcollege.cn/1809903216171814912.png".ossimg(),"https://oss.coolcollege.cn/1809902998227390464.png".ossimg(),"https://oss.coolcollege.cn/1809903299470692352.png".ossimg(),"https://oss.coolcollege.cn/1809903394261962752.png".ossimg(),"https://oss.coolcollege.cn/1809903422216998912.png".ossimg()]}},computed:(0,a.Z)((0,a.Z)({},(0,n.mapGetters)({qyShield:"setting/getQySwitch",isUnionTrain:"setting/getIsUnionTrain"})),{},{getTitle(){return this.isOld?this.$t("homePage.studyPath"):this.params.title||this.$t("homePage.studyPath")}}),mounted(){this.fieldCourses()},methods:{async fieldCourses(){const e=await o.Z.fieldCourses({count:5}),{status:t,data:s}=e;this.dataLoading=!1,200===t&&(this.list=s)},handleToCommunityDetail(e){(this.isOld||this.isRender)&&(this.$store.commit("discoveryFilter/resetFilter"),this.$router.push({path:`/discovery/discovery-courselist?type=fieldCourse&id=${e}`}))}}},c=(0,s(1001).Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return"false"===e.qyShield&&!1===e.isUnionTrain?s("div",{staticClass:"home-sys-learning-path"},[s("ModuleTitle",{attrs:{title:e.getTitle,"show-more":!1}}),s("div",{staticClass:"scroll-path"},[e.dataLoading?s("van-loading",{staticClass:"loading-center"}):e._l(e.list,(function(t,a){return s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.pathItem[a%5],expression:"pathItem[i % 5]",arg:"background-image"}],key:t.id,class:["path-item","path-item-"+a%5],on:{click:function(s){return e.handleToCommunityDetail(t.id)}}},[s("div",{staticClass:"path-info"},[s("div",{staticClass:"path-title "},[e._v(e._s(t.name))]),s("div",{staticClass:"path-des van-ellipsis"},[e._v(e._s(e.$t("homePage.curriculumStructure")))])])])}))],2)],1):e._e()}),[],!1,null,"14cf1f48",null).exports},10192:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});s(34837);var a=s(39146),i=s(95082),o=(s(3791),s(93432)),r=(s(70885),s(6458)),n=(s(18144),s(65641)),l=(s(47238),s(75167)),c=(s(53743),s(59978)),d=(s(629),s(67763)),u=(s(33948),s(57658),s(26699),s(6106)),p=s(25295),m=s(22648),h=s(95969),g=s(27479),f=s(45877),v=s(26294),y={name:"Task",components:{ModuleTitle:s(69126).default,Grid:d.Z,GridItem:c.Z,Progress:l.Z,Col:n.Z,Row:r.Z,EmptyBox:g.Z,Loading:o.Z,ClCustomUser:f.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{list:[],styleType:"row",timestamp:(new Date).getTime(),num:3,showEmpty:!1,isLoading:!0}},computed:(0,i.Z)({themeColor(){return this.$store.state.themeColor},getTitle(){return this.isOld?this.models.custom_name:this.params.title||this.$t("homePage.myTask")},emptyDescription(){const{user:e}=this.$store.state;return e.isAdmin?this.$t("setting.homeTaskGuide"):this.$t("common.noDataTip3")},isAdmin(){const{user:e}=this.$store.state;return e.isAdmin}},(0,v.mapGetters)({fresh:"microCourse/getFreshStatus"})),watch:{fresh(e){e&&(this.getTaskList(),this.$store.commit("microCourse/updateFresh",!1))}},mounted(){this.getTaskList()},methods:{async getTaskList(){const{getTaskList:e}=u.Z,[t,s]=await e();if(!t){const{data:e}=s;this.isLoading=!1,e.list.forEach((e=>{e.startTimeLabel=(0,m.p6)(e.begin_time,"MM-dd  hh:mm"),e.endTimeLabel=(0,m.p6)(e.end_time,"MM-dd  hh:mm")})),this.list=e.list.length>0?e.list.slice(0,this.num):e.list}},getTaskType(e){let t="";switch(e){case"exam":t=this.$t("home.exam");break;case"neo":t=this.$t("home.Newbie");break;case"online":t=this.$t("home.Online");break;case"offline":t=this.$t("home.Offline");break;case"mix":t=this.$t("home.Complex");break;case"research":t=this.$t("home.Survey");break;case"course":t=this.$t("home.Course");break;case"evaluation":t=this.$t("home.evaluationTask");break;case"project":t=this.$t("signIn.project");break;default:t=this.$t("home.MCourse")}return t},getTime(e){let t="";return t="research"===e.type?"permanent"===e.term_type?this.$t("evaluation.permanent"):this.timestamp<e.begin_time?`${this.$t("home.startTime")}:${e.startTimeLabel}`:`${this.$t("home.endTime")}:${e.endTimeLabel}`:"project"===e.type?`${this.$t("home.startTime")}:${e.startTimeLabel}`:e.progress>0?`${this.$t("home.endTime")}:${e.endTimeLabel}`:`${this.$t("home.startTime")}:${e.startTimeLabel}`,t},getProgress(e){let t="";return("exam"===e.type||"research"===e.type)&&(t=this.getLabelStr(e)),(this.timestamp<e.begin_time||"overdue"===e.task_status)&&(t=this.getLabelStr(e,null)),"project"===e.type&&(t=this.getProjectLabelStr(e)),t},getProjectLabelStr(e){return"overdue"===e.task_status?this.$t("home.overdue"):""},getLabelStr(e,t){if(this.timestamp<e.begin_time)return this.$t("home.notStarted");switch(e.task_status){case"overdue":return this.$t("home.overdue");case"finished":return this.$t("home.finished");case"passed":return this.$t("home.passed");case"failed":return this.$t("home.failed");case"scoring":return this.$t("home.scoring");case"absence":return this.$t("home.absence");default:return void 0!==t?t:this.$t("home.unfinished")}},onClick(e){(this.isOld||this.isRender)&&"more"===e&&this.$router.push({path:h.Z.resource.projectList()})},goToDetail(e){if(!this.isOld&&!this.isRender)return;const{id:t,type:s,category:i,questionnaire_id:o,begin_time:r,end_time:n,task_status:l,open_result:c,resource_type:d,task_id:u,term_type:m}=e;if("exam"===s)h.Z.exam.toExamOldNew({id:t,taskId:u});else if("evaluation"===s){const e="superior"===i?"evaluation-superior-detail":"evaluation-detail";h.Z.resource.enterEvaluation({id:t,category:i,url:e,taskDetail:this.$t("home.taskDetail")})}else if(["neo","online","offline","mix","course"].includes(s)){if((new Date).getTime()<r)return void a.Z.fail(this.$t("home.taskNotStarted"));this.$router.push({path:h.Z.home.studyDetail({studyId:t,studyStatus:l,origin:"vue"})})}else if("project"===s)p.Z.addScanCount({id:t}),this.$router.push({path:h.Z.studyProject.toStudyProject({studyProjectId:t})});else{let e="";if("unfinished"===l){if("permanent"===m)return h.Z.resource.enterUndefinedDetail({resourceType:d,id:t,questionnaireId:o}),!1;if((new Date).getTime()<r)e=this.$t("home.researchNotStartTips");else{if(!(n&&(new Date).getTime()>n))return h.Z.resource.enterUndefinedDetail({resourceType:d,id:t,questionnaireId:o}),!1;e=this.$t("home.researchEndedTips")}}else if("finished"===l){if("true"===c)return h.Z.resource.enterFinishedDetail({id:t}),!1;e=this.$t("home.resultDisclosureTips")}else e=this.$t("home.researchEndedTips");a.Z.fail({overlay:!0,message:e})}}}},_=(0,s(1001).Z)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-task"},[s("ModuleTitle",{attrs:{id:"firstBoot5",title:e.getTitle},on:{click:e.onClick}}),e.isLoading?s("Loading",{attrs:{vertical:""}}):s("div",{staticClass:"task-content"},[0===e.list.length?s("EmptyBox",{staticClass:"task-empty",attrs:{description:e.$t("common.noDataTextTip"),"extra-text":e.emptyDescription,"link-src":e.isAdmin?"https://opencoolvision.yuque.com/docs/share/367745be-0d64-4b5c-b9df-85b272d71128?#":""}}):[s("Grid",{attrs:{border:!1,"column-num":"column"===e.styleType?2:1,gutter:"column"===e.styleType?10:""}},e._l(e.list,(function(t){return s("GridItem",{key:t.id,on:{click:function(s){return e.goToDetail(t)}}},[s("div",{staticClass:"task-info-top"},[s("span",{class:"card-type_"+t.type+" task-type"},[s("i"),e._v(e._s(e.getTaskType(t.type))+" ")]),"true"===t.show_score?s("span",{staticClass:"task-score"},[e._v(e._s(t.award_score+e.$t("pointsMall.credits")))]):e._e()]),s("div",{staticClass:"task-info-title van-ellipsis"},[e._v(" "+e._s(t.title)+" ")]),s("div",{staticClass:"task-info-bottom"},[s("Row",[s("Col",{staticClass:"task-assign",attrs:{span:"8"}},[s("span",{staticClass:"van-ellipsis"},[s("cl-custom-user",{attrs:{type:t.creator_source_type,"data-type":"userName",value:t.creator_sync_user_id,name:t.create_user_name}})],1),e._v(e._s("project"===t.type?e.$t("myTask.create"):e.$t("common.assign"))+" ")]),s("Col",{staticClass:"task-date",attrs:{span:"10"}},[e._v(" "+e._s(e.getTime(t))+" ")]),s("Col",{staticClass:"task-progress",attrs:{span:"6"}},[""!==e.getProgress(t)?s("span",[e._v(e._s(e.getProgress(t)))]):s("div",{staticClass:"progress-info"},[s("Progress",{attrs:{color:e.themeColor.primaryColor,percentage:t.progress,"show-pivot":!1}}),s("span",{style:{color:e.themeColor.primaryColor}},[e._v(e._s(t.progress)+"%")])],1)])],1)],1)])})),1)]],2)],1)}),[],!1,null,"64980cc2",null).exports},96646:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(95082),i=(s(25773),s(35791)),o=(s(47601),s(44951)),r=(s(73474),s(74755)),n=(s(57658),s(6106)),l=s(22648),c=s(26294),d=s(17780),u={name:"UpdateVersion",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z},filters:{formatDate:function(e){return(0,l.p6)(e,"yyyy-MM-dd  hh:mm:ss")}},data:()=>({showDialog:!1,versionDetail:{}}),computed:(0,a.Z)({},(0,c.mapGetters)({userInfo:"user/getUserInfo"})),mounted(){const{isAdmin:e}=this.userInfo,t="shaanguedu.coolcollege.cn"===window.location.host;!e||t||(0,d.xX)()?(this.showDialog=!1,this.$emit("nextModal")):this.getUpdateNotification()},methods:{async getUpdateNotification(){const{data:e}=await n.Z.updateNotification();0===e.code?(this.showDialog=!0,this.versionDetail=e.data):(this.showDialog=!1,this.$emit("nextModal"))},toLookDetail(){this.$router.push({path:"/mine/version-info",query:{id:this.versionDetail.id}})},closeDialog(){this.showDialog=!1,this.$emit("nextModal")}}},p=(0,s(1001).Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-popup",{staticClass:"version-popup",attrs:{"lock-scroll":!1,closeable:""},on:{closed:e.closeDialog},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[s("div",{staticClass:"version-update-container"},[s("div",{staticClass:"scroll-content"},[s("div",{staticClass:"version-update-img"},[s("van-image",{attrs:{"lazy-load":"",width:"209px",height:"139px",fit:"cover",src:"https://oss.coolcollege.cn/1809011489927991296.png".ossimg()}})],1),s("div",{staticClass:"version-update-title"},[s("div",{staticClass:"version-update-title-name"},[e._v(" "+e._s(e.versionDetail.version_number)+" ")]),s("div",{staticClass:"version-update-title-time"},[e._v(" "+e._s(e.$t("mine.releaseTime"))+"："+e._s(e._f("formatDate")(e.versionDetail.begin_date))+" ")])]),s("div",{staticClass:"version-update-digest"},[s("h5",[e._v(e._s(e.$t("mine.summary")))]),s("div",{staticClass:"version-update-digest-content",domProps:{innerHTML:e.xss(e._s(e.versionDetail.digest))}})])]),s("div",{staticClass:"btn"},[s("van-button",{attrs:{type:"info",size:"small"},on:{click:e.toLookDetail}},[e._v(e._s(e.$t("mine.learnMore")))])],1)])])}),[],!1,null,"7792bf6c",null).exports},14638:(e,t,s)=>{s.d(t,{Z:()=>c});s(25773);var a=s(35791),i=s(24357),o=s(11651),r=s(22648),n=s(17780),l={name:"CoolVideo",components:{[a.Z.name]:a.Z,ClWaterMark:i.Z},props:{playerId:{type:String,default:"cool-player"},src:{type:String,default:""},loop:{type:Boolean,default:!1},controls:{type:Boolean,default:!1},preload:{type:String,default:"metadata"},autoplay:{type:Boolean,default:!1},playbackRates:{type:Array,default:()=>[.75,1,1.25,1.5,2]},muted:{type:Boolean,default:!1},enableProgressGesture:{type:Boolean,default:!1},isMediaNext:{type:Boolean,default:!1},showSpeedButton:{type:Boolean,default:!1},showBigPlayBtn:{type:Boolean,default:!0},showFullscreenBtn:{type:Boolean,default:!1},canDraggable:{type:Boolean,default:!0},contentType:{type:String,default:""},height:{type:[Number,String],default:"100%"},width:{type:[Number,String],default:"100%"},showWaterMark:{type:Boolean,default:!0}},data:()=>({player:null,playOver:!1,nextNum:5,nextTimer:null,isHorizontal:!0,isPlaying:!1,playerHeight:"100%"}),computed:{videoHeight(){return(0,o.W)(this.height)}},watch:{src(e,t){e!==t&&this.init()}},destroyed(){this.player&&this.player.dispose()},mounted(){this.playerHeight=this.height,this.init()},methods:{init(){clearInterval(this.nextTimer),this.player&&this.player.dispose();let e="aliplayer";const t=navigator.userAgent.toLowerCase().indexOf("dingtalk")>-1;"ios"===(0,r.Os)()&&!t&&!(0,n.xX)()&&(e="videojs"),this.isPlaying=this.autoplay,this.player=new CoolPlayer({width:this.width,height:this.playerHeight,id:this.playerId,core:e,platform:"mobile",source:this.src,showFullBtn:this.showFullscreenBtn,showSpeed:this.showSpeedButton,contentType:this.contentType,draggable:this.canDraggable,enableProgressGesture:this.enableProgressGesture,enableCustomController:!0,speed:this.playbackRates,preload:this.preload,autoplay:this.autoplay,showControl:this.controls,showBigPlayBtn:this.showBigPlayBtn,isHorizontal:this.isHorizontal,vodRetry:1,onEnded:()=>{this.onPlayerEnded()},onPause:()=>{this.$emit("onPause")},onPlay:()=>{this.$emit("onPlay")},onCanPlay:()=>{this.$emit("ready")},onVolumechange:()=>{this.$emit("onVolumechange")},loadedmetadata:()=>{this.$emit("loadedmetadata")},canplaythrough:()=>{this.$emit("canplaythrough")},onError:e=>{this.$emit("onError",e)},onWaiting:e=>{this.$emit("seeking",e)},onTimeUpdate:(e,t)=>{this.onTimeupdate(e,t)},onFullscreenChange:e=>{this.playerHeight=e?"100%":this.height,this.$emit("onFullscreenChange",e)},onHorizontalChange:e=>{this.isHorizontal=e}})},onTimeupdate(e,t){this.$emit("refreshProgress",t,e)},getPlayer(){return{currentTime:e=>{if(!e&&"number"!=typeof e)return this.getPlayerInfo().current;this.seek(e)},duration:()=>this.getPlayerInfo().duration,play:this.play,pause:this.pause,isPlaying:this.getPlayerInfo().status.indexOf("play")>-1,playStatus:this.getPlayerInfo().status}},getPlayerInfo(){const{current:e,duration:t,status:s}=this.player.getPlayerInfo();return{current:e,duration:t,status:s}},onPlayerEnded(){this.isPlaying=!1,this.$emit("onPlayerEnded"),this.onNextMedia()},onReplay(){this.play(),this.initNextMedia()},pause(){this.player.pause(),this.isPlaying=!1},play(){this.player.play(),this.isPlaying=!0,this.isMediaNext&&this.initNextMedia()},seek(e){this.player.seek(e)},onNextMedia(){this.playOver=!0,this.isMediaNext&&(clearInterval(this.nextTimer),this.nextTimer=setInterval((()=>{this.nextNum-=1,0===this.nextNum&&(clearInterval(this.nextTimer),this.nextNum=5,this.playOver=!1,this.$emit("onNextPlayCourseware"))}),1e3))},initNextMedia(){clearInterval(this.nextTimer),this.nextNum=5,this.playOver=!1}}},c=(0,s(1001).Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cool-video-wrapper",style:{height:e.videoHeight}},[s("div",{attrs:{id:e.playerId}}),e.showWaterMark?s("cl-water-mark",{attrs:{scenes:"video"}}):e._e(),e.isMediaNext&&e.playOver?s("div",{staticClass:"continuePlayMasking"},[s("p",[e._v(" "+e._s(e.$t("course.continuePlayTip"))+"  "),s("span",{staticClass:"continueTimer"},[s("span",{staticClass:"num"},[e._v(e._s(e.nextNum))]),e._v("s")])]),s("van-button",{staticClass:"continueBtn",attrs:{type:"primary",size:"small",round:""},on:{click:e.onReplay},scopedSlots:e._u([{key:"icon",fn:function(){return[s("svg-icon",{staticClass:"iconfont",attrs:{size:15,"icon-class":"icon-zhongbo",color:"#7F95FF"}})]},proxy:!0},{key:"default",fn:function(){return[s("span",{staticClass:"continueReplay"},[e._v(e._s(e.$t("course.replay")))])]},proxy:!0}],null,!1,3917663978)})],1):e._e()],1)}),[],!1,null,null,null).exports},61564:(e,t,s)=>{s.d(t,{Z:()=>i});var a={name:"CourseCover"},i=(0,s(1001).Z)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"course-cover"},[e._t("default")],2)}),[],!1,null,"a5f1f8ec",null).exports},45854:(e,t,s)=>{s.d(t,{Z:()=>_});var a=s(95082),i=(s(26699),s(32023),s(38862),s(74916),s(15306),s(25934)),o=s(69119),r=s(71522),n=s(56955),l=s(24357),c=(s(34837),s(39146)),d=(s(30653),s(57370)),u=(s(25773),s(35791)),p=(s(73474),s(74755)),m=(s(91058),s(78551)),h=s(22648),g=s(68092),f={name:"DocReader",components:{SvgIcon:m.Z,[p.Z.name]:p.Z,[u.Z.name]:u.Z,[d.Z.name]:d.Z,ClWaterMark:l.Z},filters:{formatTime:e=>(0,h.Es)(e)},props:{docInfo:{type:Object,default:()=>({path:"",storageType:"",progressType:"",type:"",title:"",studyId:"",courseId:"",resourceId:"",isSaveProgress:!1,progress:"",studyTime:"",studyTimeLimit:""})},watermarkConfig:{type:Object,default:()=>({wmType:0,wmValue:""})},privateAuth:{type:Object,default:()=>{}}},data:()=>({initConfig:{wmFont:"bold 24px Serif",wmHeight:250,wmColor:"rgba(192, 192, 192, 0.25)"},totalPages:0,docType:"",isShowSelectPage:!1,isRotated:!1,currentPage:1,countDown:0,formatTime:"",progress:0,totalStudyLimit:0,recentStart:0}),computed:{showTopTip(){const{isSaveProgress:e,studyTimeLimit:t,progress:s}=this.docInfo;return!!e&&!(t<=0&&s<100)},themeColor(){return this.$store.state.themeColor},pageItemStyle(){return e=>e===this.currentPage?{color:"#fff",backgroundColor:this.themeColor.primaryColor}:{color:"#444",backgroundColor:"#F7F8FA"}},iframeUrl(){const{path:e,storageType:t,resourceId:s}=this.docInfo;return"ALIBABA_PRIVATE"===t?`https://preview.imm.aliyun.com/index.html?docId=${s}`:e}},watch:{countDown(e){this.formatTime=(0,h.Es)(e),this.progress=parseInt((this.totalStudyLimit-e)/this.totalStudyLimit*100,10),e<=0&&this.saveDocProgress(),this.recentStart=parseInt(this.totalStudyLimit-e,10)},currentPage(e){const{isSaveProgress:t,studyTimeLimit:s,progress:a}=this.docInfo;t&&s<=0&&this.countDown<=0&&((a<100||this.propgress<100)&&(this.progress=parseInt(e/this.totalPages*100,10)),this.recentStart=e,this.saveDocProgress())},isRotated(e){const t=document.getElementById("previewDocContainer");e?t.className+=" rotate":t.className="previewDocContainer"}},beforeDestroy(){clearTimeout(this.countDownTimer),clearTimeout(this.saveProcessTimer),window.removeEventListener("message",this.messageFun,!1)},mounted(){window.addEventListener("message",this.messageFun,!1)},methods:{handleScreenRotate(){this.isRotated=!this.isRotated},sendMessage(e,t){document.getElementById("aliyunPreview").contentWindow.postMessage((0,h.F$)({action:e,data:t}),"*")},messageFun(e){try{if(e.data){const t=JSON.parse(e.data);switch(t.action){case"preview.ready":this.initDocData();break;case"preview.meta":this.handlePageConfig(t.data);break;case"page.readPage":this.currentPage=t.data.pageIndex+1;break;case"message.error":c.Z.fail(t.data.result)}}}catch(e){console.error(e)}},handlePageConfig(e){const{pc:t,pro:s,ext:a}=e;this.totalPages=t,this.docType=a||s;const{studyTimeLimit:i,progress:o,isSaveProgress:r,studyTime:n}=this.docInfo;if(r){let e=0,t=o,s=n;"xlsx"===this.docType||"xls"===this.docType||1===this.totalPages?(e=i,i<=0&&(t=100,s=1)):(i<=0&&(this.currentPage=parseInt(n,10)||1,setTimeout((()=>{this.setPageNum()}),200)),e=i*this.totalPages),this.totalStudyLimit=e,this.progress=t,this.recentStart=s,i>0&&t<100&&(this.countDown=parseInt(e*(100-t)/100,10),this.setCountDown(),this.setProgressTimer()),this.$nextTick((()=>{this.saveDocProgress()}))}},setPageNum(){this.sendMessage("logic.toPage",{pageIndex:this.currentPage-1})},initDocData(){const{storageType:e}=this.docInfo;let t=(0,a.Z)((0,a.Z)({},this.initConfig),this.watermarkConfig);"ALIBABA_PRIVATE"===e&&(t=(0,a.Z)((0,a.Z)({},t),this.privateAuth)),this.sendMessage("preview.init",t)},handleShowPageSelect(e){this.isShowSelectPage=e},handlePageChange(e){this.currentPage=e,this.setPageNum(),this.isShowSelectPage=!1},saveDocProgress(){const e={progress:this.progress,recent_start:this.recentStart,page_count:this.totalPages};this.$emit("saveProgress",e)},setCountDown(){const e=this;this.countDownTimer=setTimeout((function t(){e.countDown-=1,e.countDown<=0?clearTimeout(e.countDownTimer):e.countDownTimer=setTimeout(t,1e3)}),1e3)},setProgressTimer(){const e=this,t=(0,g.UI)("MOBILE_PLAYER_1MIN_SAVE_PROGRESS")?6e4:2e4;this.saveProcessTimer=setTimeout((function s(){e.saveDocProgress(),e.progress>=100?clearTimeout(e.saveProcessTimer):e.saveProcessTimer=setTimeout(s,t)}),t)}}},v=s(1001),y={name:"DocReader",components:{AliDoc:(0,v.Z)(f,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"previewDocContainer",attrs:{id:"previewDocContainer"}},[e.showTopTip?s("div",{staticClass:"countDownContainer",attrs:{id:"countDownContainer"}},[e.countDown>0?s("van-notice-bar",{attrs:{"left-icon":"info-o",color:"#465DCD",background:"#f4f5f7"}},[e._v(e._s(e.$t("preview.countDownTip",{time:e.formatTime})))]):e._e(),e.progress>=100?s("van-notice-bar",{attrs:{"left-icon":"info-o",color:"#465DCD",background:"#f4f5f7"}},[e._v(e._s(e.$t("preview.completeTip")))]):e._e()],1):e._e(),s("div",{staticClass:"iframeContainer",style:{paddingTop:e.showTopTip?"40px":0},attrs:{id:"iframeContainer"}},[s("iframe",{attrs:{id:"aliyunPreview",allowfullscreen:"",frameborder:"0",src:e.iframeUrl}}),s("cl-water-mark",{attrs:{scenes:"document"}})],1),s("div",{staticClass:"bottomControls"},["xlsx"!==e.docType&&"xls"!==e.docType?s("div",{staticClass:"choosePageBtn btnIcon",attrs:{id:"choosePageBtn"},on:{click:function(t){return e.handleShowPageSelect(!0)}}},[s("SvgIcon",{attrs:{"icon-class":"icon-kecheng",color:e.themeColor.primaryColor}})],1):e._e(),s("van-popup",{attrs:{position:"bottom"},model:{value:e.isShowSelectPage,callback:function(t){e.isShowSelectPage=t},expression:"isShowSelectPage"}},[s("div",{staticClass:"pageOpreateContainer"},[s("div",{staticClass:"chooseTips"},[e._v(e._s(e.$t("preview.selectPage")))]),s("div",{staticClass:"pagelistContainer"},e._l(e.totalPages,(function(t,a){return s("span",{key:a,staticClass:"pageItem",style:e.pageItemStyle(t),on:{click:function(s){return e.handlePageChange(t)}}},[e._v(e._s(t))])})),0),s("div",{staticClass:"cancelBtn",style:"color:"+e.themeColor.primaryColor,on:{click:function(t){return e.handleShowPageSelect(!1)}}},[e._v(" "+e._s(e.$t("common.cancel"))+" ")])])]),s("div",{staticClass:"rotateBtn btnIcon",on:{click:e.handleScreenRotate}},[s("SvgIcon",{attrs:{"icon-class":"icon-hengping",color:e.themeColor.primaryColor}})],1)],1)])}),[],!1,null,"705bac52",null).exports,ClWaterMark:l.Z},props:{queryData:{type:Object,default:()=>({})}},data:()=>({readerType:"",watermarkConfig:{},privateAuth:{},localAuth:{},pageCount:0,batchNumber:(0,i.Z)(),learningTimer:null}),computed:{watermarkInfo(){const{name:e,position:t,jobnumber:s}=this.$store.state.user;return{name:e,position:t,jobnumber:s}},docInfo(){const{studyTimeLimit:e,isSaveProgress:t,progress:s}=this.queryData;return(0,a.Z)((0,a.Z)({},this.queryData),{},{studyTimeLimit:Number(e),progress:Number(s),isSaveProgress:"true"===t})},userInfo(){return this.$store.state.commonParams},saveProgressUrl(){const{isSaveProgress:e}=this.$route.query;if("true"!==e)return"";const{progressType:t,courseId:s,resourceId:a,studyId:i,mapId:o}=this.docInfo,{accessToken:r,enterpriseId:l,userId:c}=this.userInfo;let d=n.Z.getSaveProgressUrl(t,{studyId:i,courseId:s,resourceId:a});return d=`${d}?access_token=${r}&enterprise_id=${l}&user_id=${c}&mapId=${o}`,d},docReaderUrl(){if("ALI"===this.readerType)return;const{userId:e,accessToken:t}=this.userInfo,{title:s,type:a,url:i,studyTimeLimit:o,studyTime:r,progress:n,resourceId:l,courseId:c}=this.docInfo,d={isSaveProgress:""!==this.saveProgressUrl,isSaveRecord:!1,access_token:t,userId:e,hostUrl:`${CL_API}/enterprise-api`,courseType:1,planId:this.docInfo.studyId,resourceId:l,courseId:c,saveRecordProgressUrl:this.saveProgressUrl,saveProgressUrl:this.saveProgressUrl,studyTimeLimit:o,studyTime:r,progress:n,url:i,type:"eapp"};let u="";"LOCAL"===this.readerType?(u=LOCAL_DOC_HOST,d.url=d.url.includes("https")?d.url:`https://${d.url}`):u=DOC_HOST;const p=JSON.stringify(d),m=`${s.substring(0,20)}.${a}`.replace(/[ "-&\(-\*<>-@L\^`\{-~\u3010\u3011\uFF08\uFF09]/g,"");return`${u}${`?i=13399&ssl=1&iparms=${encodeURIComponent(p)}&furl=${i}?attname=${m}`}`}},watch:{pageCount(e){const{studyTimeLimit:t,progress:s}=this.docInfo;if(e>0&&t>0){const a=this;this.$nextTick((()=>{a.learningTimer||(a.recordLearningTime(),clearInterval(a.learningTimer),a.learningTimer=null,a.learningTimer=setInterval((()=>{a.recordLearningTime()}),o.If));const i=t*e,r=100===s?i:.01*(100-s)*i;a.leftTimer=setTimeout((()=>{clearInterval(a.learningTimer),a.learningTimer=null,a.recordLearningTime(),clearInterval(a.leftTimer),a.leftTimer=null}),1e3*r)}))}}},beforeDestroy(){this.privateAuth={};const{studyTimeLimit:e}=this.docInfo;clearInterval(this.learningTimer),this.learningTimer=null,this.pageCount>0&&e>0&&this.leftTimer&&this.recordLearningTime(),clearInterval(this.leftTimer),this.leftTimer=null},created(){this.initDocReader(),window.addEventListener("message",this.localMessageFun,!1)},methods:{localMessageFun(e){try{const t=e.data;"refreshAuthKey"===t&&this.handleLocalMessage("refreshAuthKey");const s="string"==typeof t&&JSON.parse(t);"logic.setMetaInfo"===s.action&&s.data?("xlsx"!==s.data.ext&&"xls"!==s.data.ext||(s.data.pc=1),this.pageCount=s.data.pc):"ow365"===s.info&&(this.pageCount=s.page.total)}catch(e){console.error(e)}},async handleLocalMessage(e){const{storageType:t,videoId:s}=this.docInfo;if("LOCAL"!==t)return;await this.getLocalAuth(s),window.addEventListener("message",this.localMessageFun,!1);const a={action:e,value:this.localAuth};document.getElementById("doc-reader-webview").contentWindow.postMessage(JSON.stringify(a),"*")},async initDocReader(){const{docPlayerMode:e}=this.$store.state.setting;console.warn(e,"文档放映模式");const{path:t="",storageType:s,videoId:a}=this.docInfo;"ALIBABA_PRIVATE"===s?(await this.getPrivateAuth(a),this.readerType="ALI"):"LOCAL"===s?this.readerType="LOCAL":"compat"===e&&t.includes("preview.imm.aliyun")?this.readerType="ALI":this.readerType="365"},async getPrivateAuth(e){const{data:t}=await r.Z.getPrivateImgUrl(e);0===t.code&&(this.privateAuth=t.data||{})},async getLocalAuth(e){const{data:t}=await r.Z.getLocalDocAuth(e);0===t.code&&t.data&&(this.localAuth=t.data||{})},async saveProgress({progress:e,recent_start:t,page_count:s}){const{progressType:a,courseId:i,resourceId:o,studyId:r}=this.docInfo,l={progress:e,recent_start:t,page_count:s,tempTime:Date.parse(new Date)};await n.Z.saveProgress(a,{studyId:r,courseId:i,resourceId:o},l,null,!0)},async recordLearningTime(){const{progressType:e,courseId:t,resourceId:s,studyId:a}=this.queryData,i={courseId:t,resourceId:s,studyId:a},o={batchNumber:this.batchNumber,pageCount:this.pageCount};try{await n.Z.postClassHourTiming(e,i,o)}catch(e){console.warn(e)}}}},_=(0,v.Z)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.readerType?s("div",{staticClass:"doc-reader"},["ALI"===e.readerType?s("AliDoc",{attrs:{"doc-info":e.docInfo,"private-auth":e.privateAuth},on:{saveProgress:e.saveProgress}}):s("iframe",{ref:"docWebview",attrs:{id:"doc-reader-webview",src:e.docReaderUrl,frameborder:"0",width:"100%",height:"100%"},on:{load:function(t){return e.handleLocalMessage("initDocReader")}}}),s("cl-water-mark",{attrs:{scenes:"document"}})],1):e._e()}),[],!1,null,"08e1a0d2",null).exports},27479:(e,t,s)=>{s.d(t,{Z:()=>n});s(47601);var a=s(44951),i=s(63874),o=s(65859),r={name:"EmptyBox",components:{[a.Z.name]:a.Z},props:{description:{type:String,default(){return this.$t("common.noData")}},extraText:{type:String,default:()=>""},image:{type:String,default:o},linkSrc:{type:String,default:""}},data:()=>({}),computed:{},created(){},mounted(){},methods:{openLink(){(0,i.N8)({url:this.linkSrc})}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"empty-box"},[s("van-image",{attrs:{src:e.image,fit:"cover"}}),s("div",{staticClass:"desc"},[e._v(e._s(e.description))]),e.extraText?s("div",{staticClass:"desc-extra"},[e._v(e._s(e.extraText))]):e._e(),e.linkSrc?s("div",{staticClass:"link-src",on:{click:e.openLink}},[e._v(e._s(e.$t("setting.viewActionGuide")))]):e._e()],1)}),[],!1,null,"44035e3e",null).exports},15480:(e,t,s)=>{s.d(t,{Z:()=>u});s(23307);var a=s(81392),i=(s(31930),s(94907)),o=s(14171),r=s(78368),n=s(68092);const l=e=>`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/${e}`;var c={name:"Info",components:{Overlay:i.Z,Icon:a.Z},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#map-info"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{progress:{type:Number,default:0},score:{type:Number,default:0},num:{type:Number,default:0},summary:{type:String,default:""},studyInfo:{type:Object,default:()=>{}},avatar:{type:String,default:""},mapConfig:{type:Object,default:()=>{}}},data:function(){return{resolveImg:l,defaultAvatar:r,calcAvatar:"",showMap:!1}},computed:{learningRequirementsTips:()=>e=>o.Z.project.learningRequirementsTips(e),getTotalHour(){return e=>{let t=0,s="--";return e&&e.forEach((e=>{e.resources.forEach((e=>{let s=("mp4"===e.content_type||"mp3"===e.content_type)&&3===e.resource_status,a=1===e.type||s||6===e.type;e.duration&&a&&(t+=Number(e.duration))}))})),t<60&&t>0?s=this.$t("project.second",{key:t}):t>60&&(s=this.$t("project.minute",{key:Math.ceil(t/60)})),s}},isShowLearnRequire:()=>(0,n.eY)("HIDE_QUALIFICATION_CRITERIA")},mounted(){this.initRender()},activated(){},methods:{initRender(){this.calcAvatar=this.avatar||r},handleOpen(){this.showMap=!0},handleClose(){this.showMap=!1},previewCertificate(){this.$emit("previewCertificate")}}},d=c,u=(0,s(1001).Z)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"map-info",attrs:{id:"map-info"}},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"container"},[s("section",{staticClass:"container__badge"},[s("img",{staticClass:"container__badge__avatar",attrs:{src:e.calcAvatar}}),s("span",{staticClass:"container__badge__progress",style:{background:e.mapConfig.score_ava}},[e._v(e._s(e.progress)+"%")])]),s("section",{staticClass:"container__info",style:{background:e.mapConfig.score_bg}},[s("p",[e._v(" "+e._s(e.$t("studyProject.hadGotScore",{score:e.score}))+" ")]),s("p",[e._v(" "+e._s(e.$t("studyProject.hadExceed",{num:e.num}))+" ")])]),s("section",{staticClass:"container__summary",on:{click:e.handleOpen}},[s("span",{staticClass:"container__summary__icon"},[s("img",{attrs:{src:e.resolveImg("mapIcon.png")}})]),s("span",{staticClass:"container__summary__text"},[e._v(" "+e._s(e.$t("studyProject.summary"))+" ")])]),s("Overlay",{attrs:{show:e.showMap,duration:"0.3"}},[s("div",{staticClass:"modal-content"},[s("img",{staticClass:"modal-content__image",attrs:{src:e.resolveImg(e.mapConfig.summary_bgpic)}}),s("div",{staticClass:"modal-content__summary",on:{touchmove:function(e){e.stopPropagation()}}},[e._v(" "+e._s(e.summary||e.$t("project.noIntroduction"))+" "),e.studyInfo.stages&&e.studyInfo.stages.length>0?s("div",[e._v(" "+e._s(e.$t("project.estimatedHours"))+"： "+e._s(e.getTotalHour(e.studyInfo.stages))+" ")]):e._e(),e.isShowLearnRequire?s("div",{staticClass:"top-info-standard"},[s("p",[e._v(e._s(e.$t("personnelDevelope.qualificationCriteria"))+"： "+e._s(e.learningRequirementsTips(e.studyInfo))+" ")])]):e._e(),s("div",{staticClass:"top-info-reward"},[Number(e.studyInfo.is_get_score)>0?s("span",[e._v(" "+e._s(e.$t("studyProject.qualifyingRewards")+"：")+" "+e._s(e.studyInfo.is_get_score+e.$t("studyProject.credit"))+" ")]):e._e(),e.studyInfo.certificate_name?s("span",{staticClass:"top-info-reward-certi",on:{click:e.previewCertificate}},[s("br"),e._v(" "+e._s(e.$t("studyProject.getCerti")+"：")+" "),s("span",[e._v(" "+e._s("《"+e.studyInfo.certificate_name+"》")+" ")])]):e._e()])]),s("span",{staticClass:"modal-content__close",on:{click:e.handleClose}},[s("Icon",{attrs:{name:"close",color:"#fff",size:"9vw"}})],1)])])],1)])])}),[],!1,null,"7668e26e",null).exports},56359:(e,t,s)=>{s.d(t,{Z:()=>f});var a=s(78368),i=(s(23307),s(81392)),o=s(11046),r=s(95969),n=s(17452);let l=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/checkPoints_mask.png`,c=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/path-left.png`,d=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/path-right.png`,u=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/unlock_bg.png`,p=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/pass_bg.png`;var m={name:"Planet",components:{Icon:i.Z},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#desert-planet"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{levelsMaxNumber:{type:Number,default:100},id:{type:String,default:""},mapId:{type:String,default:""},idx:{type:Number,default:1},index:{type:Number,default:1},lock:{type:Boolean,default:!0},first:{type:Number,default:0},position:{type:String,default:"left"},showPath:{type:Boolean,default:!1},avatar:{type:String,default:""},name:{type:String,default:""},status:{type:String,default:""},score:{type:Number,default:0},unlockNum:{type:Number,default:0},unlockAvatars:{type:Array,default:()=>[]},progress:{type:Number,default:0},shouldAnimationDelay:{type:Boolean,default:!0},allCompleted:{type:Boolean,default:!1},onImgClick:{type:Function,default:()=>{}},coputedList:{type:Array,default:()=>[]},currntTop:{type:Number,default:0},faceStatus:{type:String,default:""}},data:function(){return{checkpoint_mask:l,pathLeft:c,pathRight:d,pathImage:"",pathClass:"",viewClassNames:"",moveClassNames:"",levelInview:(()=>{let e={};for(let t=1;t<this.levelsMaxNumber;t++)e[t]=0;return e})(),avatarClassNames:"",avatarImage:"",planetClassNames:"",renderInfoFlag:"1",completedClass:"",indicatorClassNames:"",lockInfoClass:"",avatarsClassNames:"",indicatorItemClassNames:"",processingClass:"",renderPathClass:"",planetNum:0,infoFadeIn:!1}},computed:{},watch:{currntTop:{handler(e){!this.infoFadeIn&&this.setInfoFadeIn(e)},deep:!0},lock:{handler(){this.initRender()},deep:!0},status:{handler(){this.initRender(),this.setInfoFadeIn()}}},mounted(){this.initRender(),this.setInfoFadeIn()},activated(){},methods:{initRender(){this.setRenderInfosFlag(),this.setViewClass()},setViewClass(){const{idx:e,position:t,shouldAnimationDelay:s,avatar:a}=this;this.pathClass="path "+("left"===t?"path-left":"path-right"),this.pathImage="left"===t?c:d;this.levelInview[e]+=1,this.viewClassNames=`${this.levelInview[e]<=1?"inview":""} ${this.levelInview[e]>1?"inview-static":""} planet-attr-${e} planet-attr ${"left"===this.position?"planet-left":"planet-right"} planet_rows`,this.moveClassNames="mover-wrapper "+(e%2==0?"move-top":"move-top-reverse"),this.avatarClassNames=`${"finish"===status?"avatar-container-completed":""} ${s?"":"avatar-container__rightnow"}`,this.avatarImage="finish"===status?"":a,this.planetClassNames=`item-planet-image item-planet-image-idx${e} item-planet${e} item-planet`,this.setRenderInfoClass()},setRenderInfoClass(){const{idx:e,position:t,renderInfoFlag:s}=this;switch(String(s)){case"1":this.completedClass=`infos infos-idx${e} infos-completed `,this.indicatorClassNames=`indicator__num indicator__num-${e}`;break;case"2":this.lockInfoClass=`infos infos-idx${e} infos-lock `,this.indicatorClassNames="indicator "+("left"===t?"indicator-left":"indicator-right"),this.indicatorItemClassNames="indicator__num indicator__num-disabled",this.avatarsClassNames="avatars "+("left"===t?"avatars-left":"avatars-right");break;case"3":this.processingClass=`infos infos-idx${e} infos-process `,this.indicatorClassNames=`indicator__num indicator__num-${e}`}},setRenderInfosFlag(){switch(this.status){case"finish":default:this.renderInfoFlag="1";break;case"lock":this.renderInfoFlag=this.lock?"2":"3";break;case"current":case"not_qualified":this.renderInfoFlag="3"}},handleClick(){const{lock:e}=this;e?this.$toast(this.$t("studyProject.lockedClick")):this.jumpBus()},jumpBus(){if("/visitor-page/study-project-map"===this.$route.path){const{courseId:e}=this.$route.query;(0,o.RJ)({type:"study_project",course:{id:e}})}else{const{studyId:e,courseIds:t,all_checked:s}=this.$route.params,{idx:a}=this;(0,n.L)({path:r.Z.studyProject.toStudyProject({studyProjectId:e,current:a,pathTo:"detail",all_checked:s,courseIds:t,faceStatus:this.faceStatus})},"app")}},resolvePlanetImage(){const{idx:e,lock:t}=this;return 1!==e&&t?u:p},setInfoFadeIn(){const{rowInfoRef:e}=this.$refs;e.getBoundingClientRect().top>0&&(this.infoFadeIn=!0)}}},h=s(1001),g={name:"PlanetList",components:{Planet:(0,h.Z)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:1===e.coputedList.length?"checkpoint_container desert-planet desert-planet-one":"checkpoint_container desert-planet",attrs:{id:"desert-planet"}},[0!==Number(e.index)?s("div",{class:e.pathClass},[s("img",{attrs:{src:e.pathImage}})]):e._e(),e.index<=6?s("img",{class:"checkpoint_mask"+e.position,attrs:{src:e.checkpoint_mask,alt:""}}):e._e(),s("div",{class:1===e.coputedList.length?"planet-row planet-row-one":"planet-row"},[s("div",{ref:"rowInfoRef",class:e.viewClassNames},[s("div",{class:e.moveClassNames},["current"===e.status?s("div",{class:e.avatarClassNames},[e.avatarImage?s("div",{staticClass:"avatar_box_wrapper"},[s("img",{staticClass:"avatar",attrs:{src:e.avatarImage}}),s("div",{staticClass:"avatar_angle"}),s("div",{staticClass:"avatar_shadow"})]):e._e()]):e._e(),s("div",{class:e.planetClassNames,style:{background:"url("+e.resolvePlanetImage()+") no-repeat","background-size":"cover","text-align":"center"},on:{click:e.handleClick}},[s("span",{domProps:{textContent:e._s(Number(e.idx)>=10?e.idx:"0"+e.idx)}})])]),"1"===e.renderInfoFlag?s("span",[s("div",{class:[e.completedClass,e.infoFadeIn&&("left"===e.position?"infos-left":"infos-right")]},[s("div",{staticClass:"name",domProps:{textContent:e._s(e.name)}}),s("div",{staticClass:"progress"},[s("Icon",{attrs:{name:"checked",color:"#fff",size:"3.5vw"}}),e._v(" "+e._s(e.$t("common.finished"))+" ")],1)])]):"2"===e.renderInfoFlag?s("span",[s("div",{class:[e.lockInfoClass,e.infoFadeIn&&("left"===e.position?"infos-left":"infos-right")]},[s("div",{class:e.indicatorClassNames},[s("span",{staticClass:"indicator__score"},[e._v("+"+e._s(e.score+e.$t("studyProject.score")))])]),s("div",{staticClass:"name"},[e._v(e._s(e.name))]),s("div",{class:e.avatarsClassNames},[0===Number(e.progress)&&e.unlockAvatars&&e.unlockAvatars.length>0?s("div",{staticClass:"avatars__wrapper"},e._l(e.unlockAvatars,(function(t){return s("span",{key:""+(t+e.index),staticClass:"avatars__wrapper__item"},[s("img",{attrs:{src:t}})])})),0):e._e(),Number(e.progress)>0?s("span",{staticClass:"avatars__num"},[e._v(e._s(e.progress)+"%")]):s("span",{staticClass:"avatars__num"},[e._v(" "+e._s(e.$t("studyProject.hadUnlocked",{unlockNum:e.unlockNum}))+" ")])])])]):"3"===e.renderInfoFlag?s("span",[s("div",{class:[e.processingClass,e.infoFadeIn&&("left"===e.position?"infos-left":"infos-right")]},[s("div",{staticClass:"name"},[e._v(e._s(e.name))]),s("div",{staticClass:"progress"},[e._v(e._s(e.progress)+"%")])])]):e._e()])])])}),[],!1,null,"b2b22cd4",null).exports},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#planet-container"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{mapId:{type:String,default:""},list:{type:Array,default:()=>[]},first:{type:Number,default:0},avatar:{type:String,default:""},rocketIn:{type:Boolean,default:!1},allCompleted:{type:Boolean,default:!1},mapConfig:{type:Object,default:()=>{}},stagePass:{type:Boolean,default:!1},currntTop:{type:Number,default:0},faceStatus:{type:String,default:""}},data:function(){return{coputedList:[],defaultAvatarImg:a}},watch:{list:{handler:function(e){const{list:t}=this;this.coputedList=this.resetListData(t,e)},deep:!0},stagePass:{handler:function(e){const{list:t}=this;this.coputedList=this.resetListData(t,e)},deep:!0}},beforeCreate(){},created(){},mounted(){const{list:e}=this;this.coputedList=this.resetListData(e)},activated(){},methods:{resetListData(e){return this.stagePass?e&&e.forEach(((t,s)=>{t.locked="lock"===String(t.status)&&"current"!==t.status,t.infoFadeIn=Boolean(s>=e.length-4)})):e&&e.forEach(((t,s)=>{t.locked=!1,t.infoFadeIn=Boolean(s>=e.length-4)})),e}}},f=(0,h.Z)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"planet-container",attrs:{id:"planet-container"}},e._l(e.coputedList,(function(t,a){return s("Planet",{key:String(a+"_"+t.sort),ref:"planetRef"+t.index,refInFor:!0,attrs:{id:String(a+"_"+t.sort),"map-id":e.mapId,idx:t.sort,lock:t.locked,first:e.first,status:String(t.status).toLowerCase(),position:t.sort%2==0?"right":"left","show-path":Boolean(a!==e.list.length-1),avatar:e.avatar||e.defaultAvatarImg,name:t.name,score:t.score,"unlock-num":t.unlockNum,"unlock-avatars":t.photoList&&t.photoList.slice(0,3),progress:t.process,"should-animation-delay":e.rocketIn,"all-completed":e.allCompleted,"map-config":e.mapConfig,index:a,list:e.list,"coputed-list":e.coputedList,"info-fade-in":t.infoFadeIn,"currnt-top":e.currntTop,"face-status":e.faceStatus}})})),1)}),[],!1,null,"c63c2b8c",null).exports},29332:(e,t,s)=>{s.d(t,{Z:()=>o});const a=e=>`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/${e}`;var i={name:"Planet",components:{},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#map-planet"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{mapConfig:{type:Object,default:()=>{}}},data:function(){return{resolveImg:a}},computed:{},mounted(){},activated(){},methods:{}},o=(0,s(1001).Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"start_mask",attrs:{id:"map-mask"}},e._l(e.mapConfig.startMask,(function(t){return s("img",{key:t,attrs:{src:e.resolveImg(t),alt:""}})})),0)}),[],!1,null,"373ae3d4",null).exports},24142:(e,t,s)=>{s.d(t,{Z:()=>n});s(23307);var a=s(81392),i=(s(31930),s(94907));const o=e=>`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/${e}`;var r={name:"SuccessModal",components:{Overlay:i.Z,Icon:a.Z},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#map-success-modal"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{showSuccess:{type:Boolean,default:!1},certificateName:{type:String,default:""},score:{type:Number,default:0},handleSuccessModalClose:{type:Function,default:()=>{}},mapConfig:{type:Object,default:()=>{}}},data:function(){return{resolveImg:o}},computed:{},mounted(){},activated(){},methods:{handleClose(){this.handleSuccessModalClose()}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"map-success-modal",attrs:{id:"map-success-modal"}},[s("Overlay",{attrs:{show:e.showSuccess,duration:"0.3"}},[s("div",{staticClass:"modal-content"},[s("img",{staticClass:"modal-content__image",attrs:{src:e.resolveImg(e.mapConfig.sucess_bg)}}),s("div",{staticClass:"modal-content__text"},[s("p",[e._v(" "+e._s(e.$t("studyProject.rewardQualication",{certificateName:e.certificateName}))+" ")]),s("p",[e._v(" "+e._s(e.$t("studyProject.rewardScore",{score:e.score}))+" ")])]),s("span",{staticClass:"modal-content__close",on:{click:e.handleClose}},[s("Icon",{attrs:{name:"close",color:"#fff",size:"9vw"}})],1)])])],1)}),[],!1,null,"fd0ecad0",null).exports},39069:(e,t,s)=>{s.d(t,{Z:()=>p});s(23307);var a=s(81392),i=(s(31930),s(94907)),o=s(14171),r=s(68092),n=s(78368);let l=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/summary-modal.png`,c=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/mapIcon.png`;var d={name:"Info",components:{Overlay:i.Z,Icon:a.Z},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#map-info"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{progress:{type:Number,default:0},score:{type:Number,default:0},num:{type:Number,default:0},summary:{type:String,default:""},studyInfo:{type:Object,default:()=>{}},avatar:{type:String,default:""}},data:function(){return{summaryModal:l,defaultAvatar:n,mapIcon:c,calcAvatar:"",showMap:!1}},computed:{learningRequirementsTips:()=>e=>o.Z.project.learningRequirementsTips(e),getTotalHour(){return e=>{let t=0,s="--";return e&&e.forEach((e=>{e.resources.forEach((e=>{let s=("mp4"===e.content_type||"mp3"===e.content_type)&&3===e.resource_status,a=1===e.type||s||6===e.type;e.duration&&a&&(t+=Number(e.duration))}))})),t<60&&t>0?s=this.$t("project.second",{key:t}):t>60&&(s=this.$t("project.minute",{key:Math.ceil(t/60)})),s}},isShowLearnRequire:()=>(0,r.eY)("HIDE_QUALIFICATION_CRITERIA")},watch:{},mounted(){this.initRender()},activated(){},methods:{initRender(){this.calcAvatar=this.avatar||n},handleOpen(){this.showMap=!0},handleClose(){this.showMap=!1},previewCertificate(){this.$emit("previewCertificate")}}},u=d,p=(0,s(1001).Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"map-info",attrs:{id:"map-info"}},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"container"},[s("section",{staticClass:"container__badge"},[s("img",{staticClass:"container__badge__avatar",attrs:{src:e.calcAvatar}}),s("span",{staticClass:"container__badge__progress"},[e._v(e._s(e.progress)+"%")])]),s("section",{staticClass:"container__info"},[s("p",[e._v(" "+e._s(e.$t("studyProject.hadGotScore",{score:e.score}))+" ")]),s("p",[e._v(" "+e._s(e.$t("studyProject.hadExceed",{num:e.num}))+" ")])]),s("section",{staticClass:"container__summary",on:{click:e.handleOpen}},[s("span",{staticClass:"container__summary__icon"},[s("img",{attrs:{src:e.mapIcon}})]),s("span",{staticClass:"container__summary__text"},[e._v(" "+e._s(e.$t("studyProject.summary"))+" ")])]),s("Overlay",{attrs:{show:e.showMap,duration:"0.3"}},[s("div",{staticClass:"modal-content"},[s("img",{staticClass:"modal-content__image",attrs:{src:e.summaryModal}}),s("div",{staticClass:"modal-content__summary",on:{touchmove:function(e){e.stopPropagation()}}},[e._v(" "+e._s(e.summary||e.$t("project.noIntroduction"))+" "),e.studyInfo.stages&&e.studyInfo.stages.length>0?s("div",[e._v(" "+e._s(e.$t("project.estimatedHours"))+"： "+e._s(e.getTotalHour(e.studyInfo.stages))+" ")]):e._e(),e.isShowLearnRequire?s("div",{staticClass:"top-info-standard"},[s("p",[e._v(e._s(e.$t("personnelDevelope.qualificationCriteria"))+"： "+e._s(e.learningRequirementsTips(e.studyInfo))+" ")])]):e._e(),s("div",{staticClass:"top-info-reward"},[Number(e.studyInfo.is_get_score)>0?s("span",[e._v(" "+e._s(e.$t("studyProject.qualifyingRewards")+"：")+" "+e._s(e.studyInfo.is_get_score+e.$t("studyProject.credit"))+" ")]):e._e(),e.studyInfo.certificate_name?s("span",{staticClass:"top-info-reward-certi",on:{click:e.previewCertificate}},[s("br"),e._v(" "+e._s(e.$t("studyProject.getCerti")+"：")+" "),s("span",[e._v(e._s("《"+e.studyInfo.certificate_name+"》")+" ")])]):e._e()])]),s("span",{staticClass:"modal-content__close",on:{click:e.handleClose}},[s("Icon",{attrs:{name:"close",color:"#fff",size:"9vw"}})],1)])])],1)])])}),[],!1,null,"5575e858",null).exports},62143:(e,t,s)=>{s.d(t,{Z:()=>p});s(23307);var a=s(81392),i=s(11046),o=s(95969),r=s(17452);var n={name:"Planet",components:{Icon:a.Z},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#map-planet"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{levelsMaxNumber:{type:Number,default:100},id:{type:String,default:""},mapId:{type:String,default:""},idx:{type:Number,default:1},lock:{type:Boolean,default:!0},first:{type:Number,default:0},position:{type:String,default:"left"},showPath:{type:Boolean,default:!1},avatar:{type:String,default:""},name:{type:String,default:""},status:{type:String,default:""},score:{type:Number,default:0},unlockNum:{type:Number,default:0},unlockAvatars:{type:Array,default:()=>[]},progress:{type:Number,default:0},shouldAnimationDelay:{type:Boolean,default:!0},allCompleted:{type:Boolean,default:!1},onImgClick:{type:Function,default:()=>{}},currntTop:{type:Number,default:0},faceStatus:{type:String,default:""}},data:function(){return{levelInview:(()=>{let e={};for(let t=1;t<this.levelsMaxNumber;t++)e[t]=0;return e})(),viewClassNames:"inview",moveClassNames:"",planetClassNames:"",avatarClass:"avatar-container",avatarImage:"",renderInfoFlag:"1",completedClass:"",indicatorClassNames:"",lockInfoClass:"",avatarsClassNames:"",indicatorItemClassNames:"",processingClass:"",renderPathClass:"",pathImage:"",infoFadeIn:!1}},computed:{idxImg(){return this.idx%10||10}},watch:{currntTop:{handler(e){!this.infoFadeIn&&this.setInfoFadeIn(e)},deep:!0},lock:{handler(){this.initRender()},deep:!0}},mounted(){this.initRender(),this.setInfoFadeIn()},activated(){},methods:{initRender(){this.initScroll(),this.setRenderInfosFlag(),this.setViewClass()},initScroll(){const{lock:e,allCompleted:t,first:s,idx:a}=this,{planetRef:i}=this.$refs;!e&&!t&&s>=a&&a>1&&i&&i.scrollIntoView({block:"center"})},setViewClass(){const{idx:e,lock:t,position:s,progress:a,status:i}=this;this.moveClassNames="mover-wrapper "+(e%2==0?"move-top":"move-top-reverse"),this.planetClassNames=`item-planet-image item-planet-image-idx${this.idxImg} item-planet${this.idxImg}`,this.levelInview[e]+=1,this.viewClassNames=`${this.levelInview[e]<=1?"inview":""} ${this.levelInview[e]>1?"inview-static":""} planet-attr-${e} planet-attr ${"left"===this.position?"planet-left":"planet-right"}`,this.avatarClass=`avatar-container  ${"finish"===i?"avatar-container-completed":""} ${this.shouldAnimationDelay?"":"avatar-container__rightnow"}`,this.avatarImage="finish"===i?"https://gsdn.coolcollege.cn/assets/kuxueyuan/postmap/mobile/astronaut.png":"current"===i?this.avatar:"",this.setRenderInfoClass(),this.renderPathClass="path "+("left"===s?"path-left":"path-right");const o=a<100?`https://oss.coolcollege.cn/1789886497235800064.gif?t=${Math.random()}`:"https://gsdn.coolcollege.cn/assets/kuxueyuan/postmap/mobile/path.png";this.pathImage=t?"https://gsdn.coolcollege.cn/assets/kuxueyuan/postmap/mobile/path-lock.png":o},setRenderInfoClass(){const{idx:e,position:t,renderInfoFlag:s}=this;switch(String(s)){case"1":this.completedClass=`infos infos-idx${e} infos-completed `,this.indicatorClassNames=`indicator__num indicator__num-${e}`;break;case"2":this.lockInfoClass=`infos infos-idx${e} infos-lock `,this.indicatorClassNames="indicator "+("left"===t?"indicator-left":"indicator-right"),this.indicatorItemClassNames="indicator__num indicator__num-disabled",this.avatarsClassNames="avatars "+("left"===t?"avatars-left":"avatars-right");break;case"3":this.processingClass=`infos infos-idx${e} infos-process `,this.indicatorClassNames=`indicator__num indicator__num-${e}`}},resolvePlanetImage(){return 1!==this.idx&&this.lock?`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/${this.idxImg}-lock.png`:`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/${this.idxImg}.png`},handleClick(){this.onImgClick();const{lock:e}=this;e?this.$toast(this.$t("studyProject.lockedClick")):this.jumpBus()},jumpBus(){if("/visitor-page/study-project-map"===this.$route.path){const{courseId:e}=this.$route.query;(0,i.RJ)({type:"study_project",course:{id:e}})}else{const{studyId:e,courseIds:t,all_checked:s}=this.$route.params,{idx:a}=this;(0,r.L)({path:o.Z.studyProject.toStudyProject({studyProjectId:e,current:a,pathTo:"detail",all_checked:s,courseIds:t,faceStatus:this.faceStatus})},"app")}},setRenderInfosFlag(){switch(this.status){case"finish":default:this.renderInfoFlag="1";break;case"lock":this.renderInfoFlag=this.lock?"2":"3";break;case"current":case"not_qualified":this.renderInfoFlag="3"}},setInfoFadeIn(){const{rowInfoRef:e}=this.$refs;e.getBoundingClientRect().top>0&&(this.infoFadeIn=!0)}}},l=s(1001),c=(0,l.Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"planetRef",staticClass:"planet-row map-planet",attrs:{id:"map-planet"}},[s("div",[s("div",{ref:"rowInfoRef",class:e.viewClassNames},[s("div",{class:e.moveClassNames},[e.lock||"current"!==e.status?e._e():s("div",{class:e.avatarClass},[s("img",{staticClass:"avatar",attrs:{src:e.avatarImage}})]),s("img",{class:e.planetClassNames,attrs:{src:e.resolvePlanetImage()},on:{click:e.handleClick}})]),"1"===e.renderInfoFlag?s("span",[s("div",{class:[e.completedClass,e.infoFadeIn&&("left"===e.position?"infos-left":"infos-right")]},[s("div",{staticClass:"indicator"},[s("span",{class:e.indicatorClassNames},[e._v(e._s(Number(e.idx)>=10?e.idx:"0"+e.idx))])]),s("div",{staticClass:"name",domProps:{textContent:e._s(e.name)}}),s("div",{staticClass:"progress"},[s("Icon",{attrs:{name:"checked",color:"#fff",size:"3.5vw"}}),e._v(" "+e._s(e.$t("common.finished"))+" ")],1)])]):"2"===e.renderInfoFlag?s("span",[s("div",{class:[e.lockInfoClass,e.infoFadeIn&&("left"===e.position?"infos-left":"infos-right")]},[s("div",{class:e.indicatorClassNames},[s("span",{class:e.indicatorItemClassNames},[s("Icon",{attrs:{name:"lock",color:"#fff",size:"3.5vw"}})],1),s("span",{staticClass:"indicator__score"},[e._v("+"+e._s(e.score+e.$t("studyProject.score")))])]),s("div",{staticClass:"name"},[e._v(e._s(e.name))]),s("div",{class:e.avatarsClassNames},[0===Number(e.progress)?s("div",{staticClass:"avatars__wrapper"},e._l(e.unlockAvatars,(function(e,t){return s("span",{key:""+(e+t),staticClass:"avatars__wrapper__item"},[s("img",{attrs:{src:e}})])})),0):e._e(),Number(e.progress)>0?s("span",{staticClass:"avatars__num"},[e._v(e._s(e.progress)+"%")]):s("span",{staticClass:"avatars__num"},[e._v(" "+e._s(e.$t("studyProject.hadUnlocked",{unlockNum:e.unlockNum}))+" ")])])])]):"3"===e.renderInfoFlag?s("span",[s("div",{class:[e.processingClass,e.infoFadeIn&&("left"===e.position?"infos-left":"infos-right")]},[s("div",{staticClass:"indicator"},[s("span",{class:e.indicatorClassNames},[e._v(e._s(Number(e.idx)>10?e.idx:"0"+e.idx))])]),s("div",{staticClass:"name"},[e._v(e._s(e.name))]),s("div",{staticClass:"progress"},[e._v(e._s(e.progress)+"%")])])]):e._e()]),e.showPath?s("div",{class:e.renderPathClass},[s("img",{attrs:{src:e.pathImage}})]):e._e()])])}),[],!1,null,"4ae9044c",null).exports,d=s(78368),u={name:"PlanetList",components:{Planet:c},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#planet-container"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{mapId:{type:String,default:""},list:{type:Array,default:()=>[]},first:{type:Number,default:0},avatar:{type:String,default:""},rocketIn:{type:Boolean,default:!1},allCompleted:{type:Boolean,default:!1},stagePass:{type:Boolean,default:!1},currntTop:{type:Number,default:0},faceStatus:{type:String,default:""}},data:function(){return{coputedList:[],defaultAvatarImg:d}},watch:{list:{handler:function(e){const{list:t}=this;this.coputedList=this.resetListData(t,e)},deep:!0}},beforeCreate(){},created(){},mounted(){const{list:e}=this;this.coputedList=this.resetListData(e)},activated(){},methods:{resetListData(e){return this.stagePass?e&&e.forEach((e=>{e.locked="lock"===String(e.status)&&"current"!==e.status})):e&&e.forEach((e=>{e.locked=!1})),e}}},p=(0,l.Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"planet-container",attrs:{id:"planet-container"}},e._l(e.coputedList,(function(t,a){return s("Planet",{key:String(a+"_"+t.sort),attrs:{id:String(a+"_"+t.sort),"map-id":e.mapId,idx:t.sort,lock:t.locked,status:String(t.status).toLowerCase(),first:e.first,position:t.sort%2==0?"left":"right","show-path":Boolean(a!==e.list.length-1),avatar:e.avatar||e.defaultAvatarImg,name:t.name,score:t.score,"unlock-num":t.unlockNum,"unlock-avatars":t.photoList&&t.photoList.slice(0,3),progress:t.process,"should-animation-delay":e.rocketIn,"all-completed":e.allCompleted,"currnt-top":e.currntTop,"face-status":e.faceStatus}})})),1)}),[],!1,null,"c9263d6c",null).exports},76426:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(95082),i=s(26294);let o=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/rocket.png`;var r={name:"Rocket",components:{},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#project-sky"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{rocketIn:{type:Boolean,default:!0},keepAlive:{type:Boolean,default:!0}},data:function(){return{rocketImg:o,rocktClass:""}},computed:(0,a.Z)({},(0,i.mapGetters)({})),watch:{rocketIn:{handler(){this.setRocketClass()}}},mounted(){this.setRocketClass()},activated(){this.$nextTick((()=>{const{scrollTop:e}=this.$route.meta,t=document.querySelector("#project-sky");e&&t&&(t.scrollTop=e)}))},methods:{setRocketClass(){this.keepAlive?this.rocktClass="rocket-alive":this.rocktClass=this.rocketIn?"rocket-in":""}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rocket-container",attrs:{id:"map-rocket"}},[s("img",{staticClass:"rocket",class:e.rocktClass,attrs:{src:e.rocketImg,alt:""}})])}),[],!1,null,"705bbd1f",null).exports},91529:(e,t,s)=>{s.d(t,{Z:()=>n});s(23307);var a=s(81392),i=(s(31930),s(94907));let o=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/success-modal.png`;var r={name:"SuccessModal",components:{Overlay:i.Z,Icon:a.Z},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#map-success-modal"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{showSuccess:{type:Boolean,default:!1},certificateName:{type:String,default:""},score:{type:Number,default:0},handleSuccessModalClose:{type:Function,default:()=>{}}},data:function(){return{successModalImg:o}},computed:{},mounted(){},activated(){},methods:{handleClose(){this.handleSuccessModalClose()}}},n=(0,s(1001).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"map-success-modal",attrs:{id:"map-success-modal"}},[s("Overlay",{attrs:{show:e.showSuccess,duration:"0.3"}},[s("div",{staticClass:"modal-content"},[s("img",{staticClass:"modal-content__image",attrs:{src:e.successModalImg}}),s("div",{staticClass:"modal-content__text"},[s("p",[e._v(" "+e._s(e.$t("studyProject.rewardQualication",{certificateName:e.certificateName}))+" ")]),s("p",[e._v(" "+e._s(e.$t("studyProject.rewardScore",{score:e.score}))+" ")])]),s("span",{staticClass:"modal-content__close",on:{click:e.handleClose}},[s("Icon",{attrs:{name:"close",color:"#fff",size:"9vw"}})],1)])])],1)}),[],!1,null,"29bc21f2",null).exports},96202:(e,t,s)=>{s.d(t,{Z:()=>o});let a=`${ASSETS_SDN_HOST}/assets/kuxueyuan/postmap/mobile/sun-1.png`;var i={name:"Sun",components:{},beforeRouteLeave(e,t,s){if(t.meta.keepAlive){const e=document.querySelector("#map-sun"),s=e?e.scrollTop:0;t.meta.scrollTop=s}s()},props:{},data:function(){return{sun:a}},computed:{},mounted(){},activated(){},methods:{}},o=(0,s(1001).Z)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("img",{ref:"sunMapRef",staticClass:"image-sun",attrs:{src:e.sun}})}),[],!1,null,"1c0b02d4",null).exports},58227:(e,t,s)=>{s.d(t,{Z:()=>d});s(23307);var a=s(81392),i=(s(30653),s(57370)),o=(s(25773),s(35791)),r=(s(47601),s(44951)),n=s(74074),l=s(32900),c={name:"MemberAuth",components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z,[a.Z.name]:a.Z},data:()=>({showMemberAuth:!1,showHidden:!1}),computed:{},mounted(){this.getMemberStatus()},methods:{handleInvite(){(0,n.Ox)({id:E_APP_ID,corpId:localStorage.getItem("corpId")}).catch((e=>{console.error(e)}))},handleAuth(){(0,n.pd)({id:E_APP_ID,corpId:localStorage.getItem("corpId"),type:"INVITE"}).catch((e=>{console.error(e)}))},showDetail(){this.showHidden=!0},closeAuth(){this.showMemberAuth=!1},async getMemberStatus(){try{const e=localStorage.getItem("corpId"),{data:t}=await l.Z.getMemberStatus(e);!0===t.success&&(this.showMemberAuth="1"===t.data.authorityType)}catch(e){this.showMemberAuth=!1}}}},d=(0,s(1001).Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showMemberAuth?s("div",{staticClass:"top-info-member-auth"},[e.showHidden?s("div",{staticClass:"top-info-member-auth-card"},[s("div",{staticClass:"auth-card-body"},[s("div",{staticClass:"left"},[s("h3",{staticClass:"title"},[e._v(e._s(e.$t("course.inviteToTry")))]),s("div",{staticClass:"desc"},[e._v(e._s(e.$t("course.inviteToMoreUse")))]),s("div",{staticClass:"btn-box"},[s("span",{staticClass:"btn",on:{click:function(t){return t.stopPropagation(),e.handleInvite.apply(null,arguments)}}},[e._v(e._s(e.$t("course.inviteCollege")))]),s("span",{staticClass:"btn",on:{click:function(t){return t.stopPropagation(),e.handleAuth.apply(null,arguments)}}},[e._v(e._s(e.$t("course.acl")))])])]),s("div",{staticClass:"right"},[s("img",{staticClass:"img",attrs:{src:"https://oss.coolcollege.cn/1846494174111731712.png"}}),s("van-icon",{staticClass:"icon",attrs:{name:"cross",size:"15"},on:{click:e.closeAuth}})],1)])]):s("van-notice-bar",{attrs:{mode:"closeable",color:"#2C3041",background:"#ecf9ff",wrapable:"",scrollable:!1,"left-icon":"info-o"},on:{close:e.closeAuth,click:e.showDetail}},[e._v(" "+e._s(e.$t("course.inviteTip"))+" "),s("span",{staticClass:"operation"},[e._v(e._s(e.$t("course.lookOver")))])])],1):e._e()}),[],!1,null,"1dad3cfc",null).exports},75230:(e,t,s)=>{s.d(t,{Z:()=>r});s(47601);var a=s(44951),i=s.p+"img/no-data-gray.52a61032.png",o={name:"NoData",components:{[a.Z.name]:a.Z},props:{tipText:{type:String,default:""}},data:()=>({noSrc:i,tipTextReal:""}),mounted(){this.tipTextReal=this.tipText||this.$t("common.noDataTextTip")}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"no-data"},[s("van-image",{staticClass:"imgs",attrs:{src:e.noSrc}}),s("div",{staticClass:"no-text"},[e._v(e._s(e.tipTextReal))])],1)}),[],!1,null,"41df86b2",null).exports},68163:(e,t,s)=>{s.d(t,{Z:()=>g});var a=s(95082),i=(s(33948),s(57658),s(26699),s(32023),s(27632)),o=s(26294),r=s(5141),n=s(39778),l=s(72244),c=s(39145),d=s(78551),u=s(68092),p=s(54304);const{noop:m}=c.Y;var h={components:{SvgIcon:d.Z},props:{listType:{type:Array,default:()=>["camera","album","video"]},diskName:{type:String,default:""},onSuccess:{type:Function,default:m},onError:{type:Function,default:m},count:{type:Number,default:9}},data:()=>({uploadList:[]}),computed:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,o.mapState)("setting",["dingDiskChoose"])),(0,o.mapState)("user",["dingUserId"])),(0,o.mapState)(["commonParams"])),mounted(){this.initUploadList()},methods:{initUploadList(){const{listType:e}=this;let t=[];for(let s of e)if("dingPlate"!==s)t.push((0,a.Z)({},n.s.find((e=>e.name===s))));else if("dingTalk"===i.Z.env||"dingTalk_h5"===i.Z.specialEnv){if(!this.diskName)return void this.$dialog.alert({title:this.$t("mine.loginOutTips"),message:this.$t("approval.dingTalkTip")});this.$store.dispatch("setting/initAdvanceSetting").then((()=>{const e=this.dingDiskChoose.find((e=>e.type===this.diskName));e&&"true"===e.param.checked&&t.push((0,a.Z)({},n.s.find((e=>e.name===s))))}))}this.uploadList=t},async onSelect(e){if("camera"===e||"album"===e||"photo"===e)(0,u.eY)("OPERATION_OSS_UPLOAD")?this.handleChooseImageOss(e):this.handleChooseImageApi(e);else if("video"===e)(0,u.eY)("OPERATION_OSS_UPLOAD")?this.handleChooseVideoOss():this.handleChooseVideoApi();else if("dingPlate"===e){const e=await r.Z.getSpaceId({corpId:this.commonParams.corpId,dingUserId:this.dingUserId}),{spaceId:t}=e.data.data;c.w.chooseDingPlate({spaceId:t},(async e=>{this.$toast.loading({duration:0,message:this.$t("common.uploading"),loadingType:"spinner",forbidClick:!0});const{data:t}=await r.Z.uploadFileFromDingTalk(e);this.$toast.clear();const s=t.data;this.$emit("onSuccess",s)}))}},handleChooseImageOss(e){if("app"===i.Z.env)this.handleChooseImageApi(e);else{let t=["camera","album"];"camera"!==e&&"album"!==e||(t=[e]);let s=this.count;"wechat_h5"===(0,p.xc)()&&(s=1),c.w.chooseImageByInput({count:s,sourceType:t,success:e=>{for(let t=0;t<e.files.length;t++){const s=e.files[t].name.split("."),a=s[s.length-1].toLowerCase();if(!l.Wb.includes(a))return setTimeout((()=>{this.$toast({message:this.$t("micro.notSupportImageType")})}),0),!1}this.$emit("chooseFiles",{choosedFiles:e.files,notLibrary:!0})},fail:({message:e})=>{this.$toast({message:e})}})}},handleChooseImageApi(e){let t={count:this.count,sourceType:["camera","album"]};"camera"!==e&&"album"!==e||(t.sourceType=[e]),c.w.chooseImage(t,(async e=>{this.$toast.loading({duration:0,message:this.$t("common.uploading"),loadingType:"spinner",forbidClick:!0});try{const t=await r.Z.uploadFileIsImage(e);this.$emit("onSuccess",t),this.$toast.clear()}catch(e){console.error(e),this.$toast.clear()}}))},handleChooseVideoOss(){if("app"===i.Z.env)this.handleChooseVideoApi();else{let e=500;(0,u.UI)("OSS_UPLOAD_NO_LIMIT")&&(e=null),c.w.chooseVideoByInput({sizeLimit:e,success:e=>{const{file:t}=e,s=t.name.split("."),a=s[s.length-1].toLowerCase();if(!l.Bg.includes(a))return setTimeout((()=>{this.$toast({message:this.$t("micro.notSupportVideoType")})}),0),!1;this.$emit("chooseFiles",{choosedFiles:[t],notLibrary:!0})},fail:({message:e})=>{this.$toast({message:e})}})}},handleChooseVideoApi(){sessionStorage.setItem("isOpenScan",!0),c.w.chooseVideo({maxDuration:300},(async e=>{try{let t={};"app"===i.Z.env?(t=await r.Z.uploadFileIsVideoApp(e),t=t[0]):(this.$toast.loading({duration:0,message:this.$t("common.uploading"),loadingType:"spinner",forbidClick:!0}),t=await r.Z.uploadFileIsVideo(e)),this.$toast.clear(),sessionStorage.setItem("isOpenScan",!1),this.$emit("onSuccess",[(0,a.Z)((0,a.Z)({},t),{},{content_type:t.type,id:t.resource_id,size:e.size,name:t.filename})])}catch(e){sessionStorage.setItem("isOpenScan",!1),console.error("上传失败：",e),this.$toast.clear(),this.$toast.fail(this.$t("subsidy.uploadFailed"))}}),(e=>{sessionStorage.setItem("isOpenScan",!1),console.error("视频选择失败：",e),this.$toast.fail(this.$t("common.uploadFail"))}))}}},g=(0,s(1001).Z)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-upload"},e._l(e.uploadList,(function(t){return s("div",{key:t.name,staticClass:"upload-item",on:{click:function(s){return e.onSelect(t.name)}}},[s("svg-icon",{attrs:{"icon-class":t.icon,size:18,color:"#2D3040"}}),s("p",[e._v(e._s(e.$t(t.lang)))])],1)})),0)}),[],!1,null,"49e57ce6",null).exports},85384:(e,t,s)=>{s.d(t,{Z:()=>n});s(3791);var a=s(93432),i=(s(31930),s(94907)),o={name:"UpgradedVersionOverlay",components:{[i.Z.name]:i.Z,[a.Z.name]:a.Z},props:{show:{type:Boolean,default:!1},text:{type:String,default:""}},computed:{isOverlay:function(){return this.show}}},r={};var n=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"overlay-wrap"},[s("van-overlay",{attrs:{show:e.isOverlay}},[s("div",{staticClass:"overlay-context-wrap"},[s("van-loading",{attrs:{color:"#fff"}},[e._v(e._s(e.text))])],1)])],1)}),[],!1,(function(e){this.false=r.locals||r}),"5ea9a883",null).exports},46730:(e,t,s)=>{s.d(t,{Z:()=>v});s(31146);var a=s(41610),i=(s(34837),s(39146)),o=(s(73474),s(74755)),r=(s(29941),s(64168)),n=(s(52355),s(29233)),l=(s(49902),s(62094)),c=(s(21920),s(58280)),d=(s(38862),s(78551)),u=s(76953),p=s(25042),m=s(27632),h=s(68092),g=s(22648),f={components:{SvgIcon:d.Z,ClChooseUser:u.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[n.Z.name]:n.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z},props:{showPayModal:{type:Boolean,default:!1},teamPayFlag:{type:Boolean,default:!1},dataInfo:{type:Object,default:()=>{}},studyId:{type:String,default:""},goodsType:{type:String,default:""},showPayType:{type:String,default:""},wxContext:{type:String,default:""}},data(){return{payVisiable:!1,payType:"all",radioList:[{title:this.$t("payment.weChatPay"),value:"wx",icon:"icon-weixinzhifu"},{title:this.$t("payment.aliPay"),value:"ali",icon:"icon-zhifubaozhifu"}],orgConfig:{multiple:!0,pickedUsers:[],disabledUsers:[],pickedDepartments:[],disabledDepartments:[],requiredDepartments:[],requiredUsers:[],responseUserOnly:!1},checkedVisibleUser:{departments:[],users:[],userIds:""},visibleCount:0,showOrg:!1,checkSelTradeResCache:{},toReload:!1,formMessages:"",whiteList:{teamBuy:(0,h.UI)(this.enterpriseWhiteAndBlackList,"STUDY_PROJECT_TEEM_BUY")},isPrueH5:"h5"===m.Z.pureEnv&&"app"!==m.Z.env,newRadioList:"",isInnerFrame:!(window.top===window.self)||"dingTalk_h5"===m.Z.specialEnv}},computed:{countPrice(){return this.teamPayFlag?this.dataInfo.preferential_price_str*this.visibleCount:this.dataInfo.preferential_price_str},themeColor(){return this.$store.state.themeColor.primaryColor},isDingTalk:()=>"dingTalk"===m.Z.env},watch:{showPayModal(e){if(e&&this.isInnerFrame){const t={type:"pay",params:{data:{teamPayFlag:this.teamPayFlag,dataInfo:this.dataInfo,studyId:this.studyId,goodsType:this.goodsType,showPayType:this.showPayType,wxContext:this.wxContext,showPayModal:e},callbackId:"payment"}};"dingTalk_h5"===m.Z.specialEnv?window.parent.dd.postMessage(t):window.parent.postMessage(t,"*"),this.payVisiable=!1,this.$emit("closeModal")}else this.payVisiable=e}},mounted(){const{radioList:e,showPayType:t}=this,s="all"===t?e:e.filter((e=>e.value===t));this.newRadioList=s},destroyed(){if(this.isInnerFrame){const e={type:"pay",params:{data:{showPayModal:!1},callbackId:"payment"}};"dingTalk_h5"===m.Z.specialEnv?window.parent.dd.postMessage(e):window.parent.postMessage(e,"*")}},methods:{onOrgError(){this.showOrg=!1},onOrgSuccess(e){this.setCheckedBus(e)},setCheckedBus(e){const{users:t=[],departments:s=[]}=e;let a="",i="";t.length&&(a=t.map((e=>e.id)).join(",")),s.length&&(i=s.map((e=>e.id)).join(",")),this.checkedVisibleUser={departments:s,users:t,userIds:a,departmentIds:i},this.$nextTick((()=>{this.checkSelStudentBus()}))},filterStudentToast(e,t){const{checkSelTradeResCache:s}=this,{filter_user_count:a=0}=t;a>0&&(!e||s!==JSON.stringify(t))&&(0,i.Z)(this.$t("project.payFilterMsg"))},checkSelStudentBus(e){const{userIds:t,departmentIds:s}=this.checkedVisibleUser,{project_id:a}=this.dataInfo,{checkSelStudentTrade:i}=p.Z;i({projectId:a,userIds:t,departmentIds:s,groupIds:"",postIds:""}).then((t=>{if(t&&t.data&&Number(0===t.data.code)){e||(this.checkSelTradeResCache=JSON.stringify(t.data.data));const{buy_user_count:s=0}=t.data.data;return this.filterStudentToast(e,t.data.data),this.showOrg=!1,this.visibleCount=s,s}})).catch((e=>{this.showOrg=!1,this.$emit("catchError",{errorInfo:e.data})}))},onCloseModal(){this.$emit("closeModal"),this.payType="all"},payBar(){Number(this.countPrice)&&(this.toReload?this.onToReload():this.onToPay())},payBeforeVerify(e,t){const{payType:s,wxContext:a,teamPayFlag:i,isPrueH5:o,$toast:r}=this,n=navigator.userAgent.toLowerCase().indexOf("dingtalk")>-1,l=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1;if("miniProgram"===a&&i){if(!this.checkSelStudentBus(!0))return r(this.$t("project.hadBuy")),!1}if("all"===s)return r(this.$t("payment.payMethod")),!1;if(o){if("WXPAY"===e&&!t&&"miniProgram"===a)return r(this.$t("project.noMiniOpenId")),!1;if("WXPAY"===e&&!t&&n)return this.jumpOtherBrowser(),!1;if("WXPAY"===e&&!t&&l)return this.jumpOtherBrowser(),!1}return!0},jumpOtherBrowser(){a.Z.confirm({title:this.$t("login.loginOutTips"),content:this.$t("payment.jumpOtherBrowser")})},payMiniProgram(e){setTimeout((()=>{a.Z.confirm({title:this.$t("project.payBackTitle"),message:this.$t("project.payBackContent"),confirmButtonText:this.$t("project.payBackOk"),cancelText:this.$t("project.payBackCancel")}).then((e=>{e.confirm&&this.onToReload()})).catch((()=>{console.error("showModal fail")}))}),1e3),wx.miniProgram.navigateTo({url:`/pages/pay/pay?timeStamp=${e.data.data.time_stamp}&nonceStr=${encodeURIComponent(e.data.data.nonce_str)}&packageParam=${encodeURIComponent(e.data.data.package)}&signType=${e.data.data.sign_type}&paySign=${encodeURIComponent(e.data.data.pay_sign)}`})},payWechatOfficialAccount(e){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",(()=>{this.onBridgeReady(e)}),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",(()=>{this.onBridgeReady(e)})),document.attachEvent("onWeixinJSBridgeReady",(()=>{this.onBridgeReady(e)}))):this.onBridgeReady(e)},alipay(e){const{isPrueH5:t}=this;let s=navigator.userAgent.toLowerCase().indexOf("dingtalk")>-1;this.formMessages=e.data.data,this.$nextTick((()=>{document.forms[0].submit(),t&&s&&(this.toReload=!0)}))},onToReload(){window&&window.location.reload()},onToPay(){const{payType:e,goodsType:t,wxContext:s,isPrueH5:a,dataInfo:o}=this,{studyProjectPay:r}=p.Z,n=(0,g.cF)("miniOpenId"),l="ali"===e?"ALIPAY":"WXPAY";if(!this.payBeforeVerify(l,n))return!1;i.Z.loading({message:this.$t("common.loading"),loadingType:"spinner"});const c=o.project_id;let d="";a&&(d="h5"),"app"===m.Z.env&&(d="WXPAY"===l?"wxApp":"alipayApp");const{userIds:u="",departmentIds:h=""}=this.checkedVisibleUser;r({goods_id:c,terminal_type:n?"jsapi":"h5",pay_channel:l,open_id:n,redirect_type:d,goods_type:t,project_order_user:{user_ids:u,department_ids:h,group_ids:"",post_ids:""}}).then((t=>{if(i.Z.clear(),1!==t.data.code)if("ali"===e)this.alipay(t);else if(n){const e={appId:t.data.data.app_id,nonceStr:t.data.data.nonce_str,paySign:t.data.data.pay_sign,signType:t.data.data.sign_type,timeStamp:t.data.data.time_stamp,package:t.data.data.package};"miniProgram"===s?this.payMiniProgram(t):"officialAccounts"===s&&this.payWechatOfficialAccount(e)}else window.location.href=t.data.data;else(0,i.Z)(t.data.msg)}))},onTeamSelClick(){this.showOrg=!0},onBridgeReady(e){const t=this;this.toReload=!0,WeixinJSBridge.invoke("getBrandWCPayRequest",e,(e=>{"get_brand_wcpay_request:ok"===e.err_msg?setTimeout((()=>{window&&window.location.reload()}),1e3):((0,i.Z)(this.$t("payment.payFailed")),t.toReload=!1)}))}}},v=(0,s(1001).Z)(f,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"study-project-pay-modal-container"},[s("van-popup",{style:{height:"40%"},attrs:{position:"bottom","transition-appear":!0,"safe-area-inset-bottom":!0,"close-icon":"close",closeable:""},on:{close:e.onCloseModal},model:{value:e.payVisiable,callback:function(t){e.payVisiable=t},expression:"payVisiable"}},[e.whiteList.teamBuy&&e.teamPayFlag?s("div",{staticClass:"student-but",on:{click:e.onTeamSelClick}},[s("span",{staticClass:"student-name-title"},[e._v(e._s(e.$t("project.selPersonTitle")))]),s("span",{staticClass:"student-think"},[0!==e.visibleCount?s("span",{staticClass:"student-name-think"},[e._v(" "+e._s(e.$t("project.peopleNum",e.visibleCount))+" ")]):s("span",{staticClass:"student-name-think student-name-gray"},[e._v(" "+e._s(e.$t("project.peopleNum",e.visibleCount))+" ")]),s("span",{staticClass:"iconfont icon-chakanpaiming"})])]):e._e(),s("div",{staticClass:"pay-modal-price"},[e._v("￥"),s("span",{staticClass:"pay-modal-price-num"},[e._v(e._s(e.countPrice))]),e._v(e._s(e.$t("payment.yuan")))]),s("div",{staticClass:"pay-type"},[s("van-radio-group",{model:{value:e.payType,callback:function(t){e.payType=t},expression:"payType"}},[s("van-cell-group",e._l(e.newRadioList,(function(t,a){return s("div",{key:a},[s("van-cell",{attrs:{title:t.title,clickable:""},on:{click:function(s){e.payType=t.value}},scopedSlots:e._u([{key:"icon",fn:function(){return[s("div",{staticClass:"icon-content"},[s("SvgIcon",{attrs:{size:22,color:t.color,"icon-class":t.icon}})],1)]},proxy:!0},{key:"right-icon",fn:function(){return[e.isDingTalk?s("div",{staticClass:"radio-group-item-radio"},[s("van-radio",{attrs:{name:t.value}})],1):s("div",[s("van-radio",{attrs:{name:t.value}})],1)]},proxy:!0}],null,!0)})],1)})),0)],1)],1),s("div",{staticClass:"pay-modal-bottom"},[s("div",{staticClass:"pay-bar",style:{background:Number(e.countPrice)?e.themeColor:"#c0c2cb"},on:{click:e.payBar}},[e.toReload?s("span",[e._v(e._s(e.$t("payment.paySuccess")))]):s("span",[e._v(e._s(""+e.$t("payment.confirmPayment")+e.countPrice+e.$t("payment.yuan")))])])])]),s("div",{staticClass:"introduce-html",domProps:{innerHTML:e.formMessages}}),e.whiteList.teamBuy&&e.teamPayFlag&&e.showOrg?s("div",{staticClass:"study-project-pey-choose-person"},[s("ClChooseUser",{attrs:{config:e.orgConfig},on:{onSuccess:e.onOrgSuccess,cancel:e.onOrgCancel}})],1):e._e()],1)}),[],!1,null,"f0ff3644",null).exports},65971:(e,t,s)=>{s.d(t,{Z:()=>o});s(47238);var a=s(75167),i={components:{[a.Z.name]:a.Z},props:{progress:{type:Number,default:0},color:{type:String,default:""},textColor:{type:String,default:"#969799"}}},o=(0,s(1001).Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"percent"},[s("span",{staticClass:"post_progress"},[s("van-progress",{attrs:{percentage:e.progress,color:e.color,"show-pivot":!1,"track-color":"#EBEBEB"}})],1),s("span",{staticClass:"post_progress_name",style:{color:e.textColor}},[e._v(e._s(e.progress+"%"))])])}),[],!1,null,"5d69f346",null).exports},46764:(e,t,s)=>{s.d(t,{Z:()=>S});var a=s(95082),i=(s(23307),s(81392)),o=(s(82522),s(10342)),r=(s(82500),s(49414)),n=(s(26699),s(32023),s(57658),s(33948),s(26294)),l=s(39145),c=s(19138),d=s(78178),u=(s(3791),s(93432)),p=(s(47601),s(44951)),m=s(92592),h=s(27632),g=s(78551),f=s(17201),v=s(56955),y=s(55602);const{noop:_}=l.Y;var C={name:"UpgradedVersionOverlay",components:{[i.Z.name]:i.Z,[p.Z.name]:p.Z,[u.Z.name]:u.Z,SvgIcon:g.Z},props:{qrType:{type:String,default:"statics"},flag:{type:String,default:""},query:{type:String,default:""},option:{type:Object,default:()=>({})},onChange:{type:Function,default:_}},data:()=>({saveImageUrl:"",specialEnv:h.Z.specialEnv,loading:!0,iconDownload:f,refreshRate:c.T8,pathUrl:""}),computed:(0,a.Z)({},(0,n.mapState)("user",["corpId","appId"])),watch:{query(){this.renderQrCode()},"option.name"(){this.renderQrCode()}},mounted(){const{qrType:e}=this;"dynamic"===e?this.refreshQrcode():this.renderQrCode()},methods:{async renderQrCode(){let{query:e,flag:t,qrType:s,option:a}=this,i="",o="";if("dynamic"===s){o=(await d.Z.getQrcodeServerTime()).data.data.server_time}if(e+=`&flag=${t}&qcTime=${o}`,"ding"===a.name)i=await this.getQrCode(`${c.jw[t]}?${e}`);else if("wx"===a.name||"weixin"===a.name){const s=await d.Z.getWxCode({scene:e,flag:t});s.data.wx_code&&(i=`data:image/jpg;base64,${s.data.wx_code}`),"weixin"===a.name&&"9005"===this.appId&&(i=await this.getQrCode(`${c.jw[t]}?${e}`))}else"app"===a.name?i=await this.getQrCode(`${e}${a.query}`):"fs"===a.name&&(i=await this.getQrCode(`${CL_FS_PATH_INDEX}?${e}`));this.pathUrl=i;const r="weixin"===a.name&&"9005"!==this.appId;"wx"===a.name||r?this.saveImageUrl=i:m.toDataURL(i,{width:this.option.width}).then((e=>{this.saveImageUrl=e})).catch((()=>{this.$toast.fail(this.$t("signIn.failedGenerateCode"))})),this.loading=!1},async getQrCode(e){const t=await v.Z.generateShortLinkAjax((0,y.jr)({pc_url:"",mobile_url:e,pc_type:"",mobile_type:"h5"}));return(0,y.fZ)(t.data.short_link)},refreshQrcode(){this.timer&&clearInterval(this.timer),this.renderQrCode(),this.onChange(),this.timer=setInterval((()=>{this.refreshQrcode()}),this.refreshRate)},callbackQrCode(e){this.saveImageUrl=e}}},k=s(1001),b=(0,k.Z)(C,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"qr-code"},[s("div",{staticClass:"qrcode-container"},[e.loading?s("div",{staticClass:"qrcode-loading-container"},[s("van-loading",{attrs:{type:"spinner",color:"#C0C0C0","text-color":"rgb(138,138,138)",size:"29px",vertical:""}},[e._v(e._s(e.$t("signIn.loadingQrCode")))])],1):s("img",{attrs:{src:e.saveImageUrl,alt:"",width:e.option.width}}),e.loading||e.saveImageUrl?e._e():s("div",{staticClass:"qrcode-error-container"},[s("p",[s("van-icon",{attrs:{name:"qr-invalid",size:"29",color:"#C0C0C0"}})],1),s("p",{style:{color:"rgb(138,138,138)",fontSize:"14px"}},[e._v(e._s(e.$t("signIn.failedGenerateCode")))])])]),s("div",{staticClass:"qrcode-text"},["dynamic"===e.qrType?s("span",{staticClass:"text",on:{click:e.refreshQrcode}},[s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-zhongxinjiazaitupian",size:14,color:"#465DCD"}}),e._v(" "+e._s(e.$t("signIn.refreshQrCode"))+" ")],1):e._e()])])}),[],!1,null,"ff3c54e4",null).exports;const{noop:w}=l.Y;var I={components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z,QrCode:b},props:{qrType:{type:String,default:"statics"},flag:{type:String,default:""},query:{type:String,default:""},onChange:{type:Function,default:w},transfer:{type:Boolean,default:!1},sourceType:{type:String,default:""}},data:()=>({activeTab:"",tabs:[],option:{}}),computed:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,n.mapState)("setting",["isOpenWxQrCode"])),(0,n.mapGetters)({primaryColor:"getPrimaryColor"})),{},{getSourceType(){return"study_plan"===this.sourceType?this.$t("search.task"):this.$t("signIn.project")}}),mounted(){this.initAppTypeScan()},methods:{getCodeInfo(){return{url:this.$refs.scanCode.pathUrl,type:this.option.name}},onTabChange(e){this.getQrCodeOption(e)},async initAppTypeScan(){const e=await d.Z.getEnterpriseOrganizations(),{sync_organizes:t}=e.data;(t.includes("third_oa_app")||t.includes("seeyon_app"))&&t.push("ding"),t.includes("app")||t.push("app");const s=this.filterCode(t);this.tabs=this.filterOrganizes(s),this.activeTab=this.tabs[0].name,this.getQrCodeOption(this.activeTab)},getQrCodeOption(e){this.option=this.tabs.filter((t=>t.name===e))[0]},filterCode(e){let t=[];const s=new Set([...e]);return 1===s.size&&s.has("app")||s.delete("app"),t=[...s],this.isOpenWxQrCode&&t.push("wx"),t},filterOrganizes(e){let t=[];for(let s of e)c.Bl.forEach((e=>{s===e.name&&t.push(e)}));return t}}},S=(0,k.Z)(I,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[e.tabs.length>1?[s("van-tabs",{attrs:{color:e.primaryColor,"line-width":24,sticky:""},on:{change:e.onTabChange},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabs,(function(t){return s("van-tab",{key:t.name,attrs:{title:e.$t(t.lang),name:t.name}})})),1)]:e._e(),e.transfer?s("p",{staticClass:"transfer-text",style:{top:e.tabs.length>1?"70px":"22px"}},[s("van-icon",{attrs:{name:"manager-o"}}),s("span",[e._v(e._s(e.$t("signIn.transferText",{sourceType:e.getSourceType})))])],1):e._e(),e.option.name?s("qr-code",{ref:"scanCode",attrs:{"qr-type":e.qrType,flag:e.flag,query:e.query,option:e.option,"on-change":e.onChange}}):e._e()],2)}),[],!1,null,"853e7af2",null).exports},35253:(e,t,s)=>{s.d(t,{Z:()=>_});var a=s(95082),i=(s(71322),s(85471)),o=(s(31968),s(3809)),r=(s(49902),s(62094)),n=(s(21920),s(58280)),l=(s(23307),s(81392)),c=(s(93787),s(20090)),d=(s(77141),s(30960)),u=(s(69710),s(57609)),p=(s(48444),s(84014)),m=(s(30033),s(87837)),h=(s(25773),s(35791)),g=(s(57658),s(26294)),f=s(39145);const{noop:v}=f.Y;var y={components:{[h.Z.name]:h.Z,[m.Z.name]:m.Z,[p.Z.name]:p.Z,[u.Z.name]:u.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[n.Z.name]:n.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{edit:{type:Boolean,default:!0},rule:{type:Object,default:()=>({})},onSubmit:{type:Function,default:v}},data:()=>({formData:{}}),computed:(0,a.Z)({},(0,g.mapGetters)({primaryColor:"getPrimaryColor"})),watch:{rule(){this.setFormData()}},created(){this.setFormData()},mounted(){},activated(){this.formData={}},methods:{itemValidator(e,t){if("1"!==t.is_must&&"true"!==t.is_must&&"score"!==t.type)return!0;if("score"===t.type){let s=!0;return"1"!==t.is_must&&"true"!==t.is_must||(s=Boolean(e)),t.instruction_must&&t.instruction&&s&&(s=Boolean(this.formData[t.id].instruction_content)),s}if(e&&"true"===e.is_other)return Boolean(e.other_answer);if("multiple"===t.type){const t=e.find((e=>"true"===e.is_other));return!t||Boolean(t.other_answer)}return!0},handleSubmit(e){Object.keys(this.formData).forEach((t=>{e[t]=this.formData[t]})),this.onSubmit(e)},errorMessage(e){let t="";if("score"===e.type){const{num:s,instruction_content:a}=this.formData[e.id];let i=[];e.instruction_must&&(a||i.push(this.$t("questionnaire.scoringExplanation"))),"1"!==e.is_must&&"true"!==e.is_must||s||i.push(this.$t("questionnaire.scoringMark")),t=i.join(",")}else t=this.$t("common.requiredFields");return t},rateChange(e){setTimeout((()=>{this.formData[e].showPopover=!0}),0)},setFormData(){for(let e=0;e<this.rule.questions.length;e++)"score"===this.rule.questions[e].type&&this.$set(this.formData,this.rule.questions[e].id,{num:0,instruction_content:"",showPopover:!1})}}},_=(0,s(1001).Z)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-form",{staticClass:"questionnaire",attrs:{id:"questionnaire"},on:{submit:e.handleSubmit}},[s("div",{staticClass:"questionnaire-info"},[s("p",{staticClass:"title"},[e._v(e._s(e.rule.questionnaire_title||e.rule.title))]),s("p",{staticClass:"description"},[e._v(e._s(e.rule.description))]),"true"===e.rule.anonymous&&e.edit?s("p",{staticClass:"anonymous"},[e._v(e._s(e.$t("questionnaire.tips")))]):e._e()]),e._l(e.rule.questions,(function(t){return s("div",{key:t.id,staticClass:"questionnaire-field van-hairline--bottom"},[s("p",{staticClass:"q-status"},["single"===t.type?s("span",[e._v(e._s(e.$t("questionnaire.single")))]):e._e(),"multiple"===t.type?s("span",[e._v(e._s(e.$t("questionnaire.multiple")))]):e._e(),"score"===t.type?s("span",[e._v(e._s(e.$t("questionnaire.rate")))]):e._e(),"input"===t.type?s("span",[e._v(e._s(e.$t("questionnaire.shortAnswer")))]):e._e()]),s("p",{staticClass:"q-title"},["1"===t.is_must||"true"===t.is_must?s("span",{staticClass:"must"},[e._v("*")]):e._e(),e._v(" "+e._s(t.title)+" ")]),"single"===t.type||"multiple"===t.type||"score"===t.type?s("van-field",{attrs:{name:t.id,rules:[{required:"1"===t.is_must||"true"===t.is_must,validator:function(s){return e.itemValidator(s,t)},message:e.errorMessage(t)}]},scopedSlots:e._u([{key:"input",fn:function(){return[e.edit?["single"===t.type?s("van-radio-group",{staticClass:"demo-radio-group",attrs:{"checked-color":e.primaryColor,"icon-size":"18"},model:{value:e.formData[t.id],callback:function(s){e.$set(e.formData,t.id,s)},expression:"formData[item.id]"}},e._l(t.options,(function(t){return s("van-radio",{key:t.id,attrs:{name:t}},[e._v(" "+e._s(t.title)+" "),"true"===t.is_other?s("input",{directives:[{name:"model",rawName:"v-model",value:t.other_answer,expression:"option.other_answer"}],staticClass:"other-input",attrs:{type:"text"},domProps:{value:t.other_answer},on:{input:function(s){s.target.composing||e.$set(t,"other_answer",s.target.value)}}}):e._e()])})),1):"multiple"===t.type?s("van-checkbox-group",{staticClass:"demo-checkbox-group",attrs:{"checked-color":e.primaryColor,"icon-size":"18"},model:{value:e.formData[t.id],callback:function(s){e.$set(e.formData,t.id,s)},expression:"formData[item.id]"}},e._l(t.options,(function(t){return s("van-checkbox",{key:t.id,attrs:{name:t,shape:"square"}},[e._v(" "+e._s(t.title)+" "),"true"===t.is_other?s("input",{directives:[{name:"model",rawName:"v-model",value:t.other_answer,expression:"option.other_answer"}],staticClass:"other-input",attrs:{type:"text"},domProps:{value:t.other_answer},on:{input:function(s){s.target.composing||e.$set(t,"other_answer",s.target.value)}}}):e._e()])})),1):e._e(),"score"===t.type&&e.formData[t.id]?s("div",{staticClass:"score"},[s("div",{staticClass:"score-rate"},[s("van-popover",{attrs:{trigger:"click",placement:"top","get-container":"#questionnaire","close-on-click-action":!1},scopedSlots:e._u([{key:"reference",fn:function(){return[s("van-rate",{attrs:{count:t.options.length,color:"#FFBE51","void-icon":"star","void-color":"#C3C3C3"},on:{change:function(s){return e.rateChange(t.id)}},model:{value:e.formData[t.id].num,callback:function(s){e.$set(e.formData[t.id],"num",s)},expression:"formData[item.id].num"}})]},proxy:!0}],null,!0),model:{value:e.formData[t.id].showPopover,callback:function(s){e.$set(e.formData[t.id],"showPopover",s)},expression:"formData[item.id].showPopover"}},[e.formData[t.id].num>0?s("div",{staticClass:"score-rate-tip"},[s("div",{staticClass:"score-rate-tip-title"},[e._v(e._s(t.options[e.formData[t.id].num-1].title))]),s("div",[e._v(e._s(e.$t("myRating.points"))+"："+e._s(t.options[e.formData[t.id].num-1].score))]),s("div",{staticClass:"score-rate-tip-arrow"},e._l(t.options.length,(function(a,i){return s("span",{key:i.toString(),class:{"score-rate-tip-arrow-active":e.formData[t.id].num===i+1}})})),0)]):e._e()])],1),s("div",{staticClass:"score-rateBox"},[s("div",{staticClass:"van-ellipsis"},[e._v(e._s(t.options[0].title))]),s("div",{staticClass:"van-ellipsis"},[e._v(e._s(t.options[t.options.length-1].title))])]),t.instruction?s("van-field",{staticClass:"score-textarea",attrs:{name:t.id,rows:"4",autosize:"",maxlength:"300",type:"textarea","show-word-limit":"",placeholder:e.$t("questionnaire.scoringExplanation")+(t.instruction_must?"("+e.$t("trainingReport.required")+")":"")},model:{value:e.formData[t.id].instruction_content,callback:function(s){e.$set(e.formData[t.id],"instruction_content",s)},expression:"formData[item.id]['instruction_content']"}}):e._e()],1):e._e()]:["single"===t.type?s("van-radio-group",{staticClass:"demo-radio-group",attrs:{"checked-color":e.primaryColor,"icon-size":"18",disabled:""},model:{value:t.answer.normal[0],callback:function(s){e.$set(t.answer.normal,0,s)},expression:"item.answer.normal[0]"}},e._l(t.options,(function(a){return s("van-radio",{key:a.id,attrs:{name:a.id}},["true"===a.is_other?[e._v(" "+e._s(t.answer.other||a.title)+" ")]:[e._v(" "+e._s(a.title)+" ")]],2)})),1):"multiple"===t.type?s("van-checkbox-group",{staticClass:"demo-checkbox-group",attrs:{"checked-color":e.primaryColor,"icon-size":"18",disabled:""},model:{value:t.answer.normal,callback:function(s){e.$set(t.answer,"normal",s)},expression:"item.answer.normal"}},e._l(t.options,(function(a){return s("van-checkbox",{key:a.id,attrs:{name:a.id,shape:"square"}},["true"===a.is_other?[e._v(" "+e._s(t.answer.other||a.title)+" ")]:[e._v(" "+e._s(a.title)+" ")]],2)})),1):e._e(),"score"===t.type&&e.formData[t.id]?s("div",{staticClass:"score"},[s("div",{staticClass:"score-rate"},[s("van-rate",{attrs:{count:t.options.length,color:"#FFA000","void-icon":"star","void-color":"#D1D2D6",readonly:""},model:{value:t.answer.normal[0],callback:function(s){e.$set(t.answer.normal,0,s)},expression:"item.answer.normal[0]"}})],1),s("div",{staticClass:"score-rateBox"},[s("div",{staticClass:"van-ellipsis"},[e._v(e._s(t.options[0].title))]),s("div",{staticClass:"van-ellipsis"},[e._v(e._s(t.options[t.options.length-1].title))])]),t.instruction?s("van-field",{staticClass:"score-textarea",attrs:{name:t.id,rows:"4",disabled:"",autosize:"",maxlength:"300",type:"textarea","show-word-limit":""},model:{value:t.answer.instruction_content,callback:function(s){e.$set(t.answer,"instruction_content",s)},expression:"item.answer.instruction_content"}}):e._e()],1):e._e()]]},proxy:!0}],null,!0)}):e._e(),e.edit?["input"===t.type&&"true"!==t.is_multiple_rows?s("van-field",{staticClass:"custom-input",attrs:{name:t.id,rules:[{required:"1"===t.is_must||"true"===t.is_must,message:e.$t("common.requiredFields")}]},model:{value:e.formData[t.id],callback:function(s){e.$set(e.formData,t.id,s)},expression:"formData[item.id]"}}):e._e(),"input"===t.type&&"true"===t.is_multiple_rows?s("van-field",{staticClass:"custom-input",attrs:{name:t.id,rows:"3",autosize:"",type:"textarea",rules:[{required:"1"===t.is_must||"true"===t.is_must,message:e.$t("common.requiredFields")}]},model:{value:e.formData[t.id],callback:function(s){e.$set(e.formData,t.id,s)},expression:"formData[item.id]"}}):e._e()]:["input"===t.type&&"true"!==t.is_multiple_rows?s("van-field",{staticClass:"custom-input",attrs:{name:t.id,disabled:""},model:{value:t.answer.normal[0],callback:function(s){e.$set(t.answer.normal,0,s)},expression:"item.answer.normal[0]"}}):e._e(),"input"===t.type&&"true"===t.is_multiple_rows?s("van-field",{staticClass:"custom-input",attrs:{name:t.id,rows:"3",autosize:"",type:"textarea",disabled:""},model:{value:t.answer.normal[0],callback:function(s){e.$set(t.answer.normal,0,s)},expression:"item.answer.normal[0]"}}):e._e()]],2)})),e.edit?s("div",{staticClass:"footer"},[s("van-button",{attrs:{type:"primary",block:"",color:e.primaryColor}},[e._v(e._s(e.$t("common.submit")))])],1):e._e()],2)}),[],!1,null,"3caee399",null).exports},27793:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(95082),i=s(26294),o={props:{list:{type:Array,default:()=>[]},activeKey:{type:String,default:""}},data:()=>({defaultActiveKey:""}),computed:(0,a.Z)({},(0,i.mapGetters)({primaryColor:"getPrimaryColor"})),mounted(){this.defaultActiveKey=this.activeKey||this.list[0].key},methods:{handClick(e){this.defaultActiveKey=e,this.$emit("changeType",e)}}},r=(0,s(1001).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cl-radio-group"},e._l(e.list,(function(t,a){return s("span",{key:t.key,class:["cl-radio-btn",a!==e.list.length-1&&e.defaultActiveKey===e.list[a+1].key?"cl-radio-btn-active":""],style:{color:e.defaultActiveKey===t.key?e.primaryColor:"rgba(0, 0, 0, 0.65)",borderColor:e.defaultActiveKey===t.key?e.primaryColor:""},on:{click:function(s){return e.handClick(t.key)}}},[e._v(e._s(t.name))])})),0)}),[],!1,null,"62b76e5a",null).exports},62527:(e,t,s)=>{s.d(t,{Z:()=>p});var a=s(95082),i=(s(31968),s(3809)),o=(s(47601),s(44951)),r=(s(25773),s(35791)),n=s(26294),l=s(23279),c=s.n(l),d=s(72268),u={components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{edit:{type:Boolean,default:!1},star:{type:Number,default:5}},data:function(){return{value:5,AppraiseImg:d,starRating:["bad","better","good","perfect","great"]}},computed:(0,a.Z)((0,a.Z)({},(0,n.mapGetters)({primaryColor:"getPrimaryColor"})),{},{activeIndex(){return this.value-1}}),watch:{star:{handler(e){this.value=e},deep:!0,immediate:!0}},mounted(){},methods:{onSubmit:c()((function(){this.$emit("onSubmit",this.value)}),500)}},p=(0,s(1001).Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rating-modal"},[s("div",{staticClass:"rating-main"},[s("van-image",{staticClass:"rating-img",attrs:{src:e.AppraiseImg}}),s("div",{staticClass:"rating-text"},[e._v(e._s(e.$t("star."+e.starRating[e.activeIndex])))]),s("div",{staticClass:"rating-score",style:{color:e.primaryColor}},[e._v(e._s(e.$t("star.myScore"))+"："+e._s(e.value)+e._s(e.$t("myRating.point")))]),s("div",{staticClass:"rating-rate"},[s("van-rate",{attrs:{size:28,gutter:"12",color:e.primaryColor,"void-icon":"star","void-color":"#D8DFF3",readonly:!e.edit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e.edit?s("van-button",{staticClass:"rating-button",attrs:{type:"primary",block:"",color:e.primaryColor},on:{click:e.onSubmit}},[e._v(e._s(e.$t("common.submit")))]):e._e(),s("van-button",{staticClass:"rating-button",style:{borderColor:"transparent",color:"#7F849A"},attrs:{type:"default",block:""},on:{click:function(t){return e.$emit("cancelModal")}}},[e._v(e._s(e.edit?e.$t("common.cancel"):e.$t("common.close")))])],1)])}),[],!1,null,"b2fb5fe8",null).exports},49642:(e,t,s)=>{s.d(t,{Z:()=>p});var a=s(95082),i=(s(31968),s(3809)),o=(s(47601),s(44951)),r=(s(25773),s(35791)),n=s(26294),l=s(23279),c=s.n(l),d=s(72268),u={components:{[r.Z.name]:r.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{edit:{type:Boolean,default:!1}},data:function(){return{value:0,AppraiseImg:d,starRating:["bad","bad","better","better","good","good","perfect","perfect","great","great"]}},computed:(0,a.Z)((0,a.Z)({},(0,n.mapGetters)({primaryColor:"getPrimaryColor"})),{},{activeIndex(){return 0===this.value?0:2*this.value-1}}),mounted(){},methods:{onSubmit:c()((function(){this.$emit("onSubmit",this.value)}),500)}},p=(0,s(1001).Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"private-rating-modal"},[s("div",{staticClass:"rating-main"},[s("van-image",{staticClass:"rating-img",attrs:{src:e.AppraiseImg}}),s("div",{staticClass:"rating-text"},[e._v(e._s(e.$t("star."+e.starRating[e.activeIndex])))]),s("div",{staticClass:"rating-score",style:{color:e.primaryColor}},[e._v(e._s(e.$t("star.myScore"))+"："+e._s(2*e.value)+e._s(e.$t("myRating.point")))]),s("div",{staticClass:"rating-rate"},[s("van-rate",{attrs:{"allow-half":"",size:28,gutter:"12",color:e.primaryColor,"void-icon":"star","void-color":"#D8DFF3",readonly:!e.edit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e.edit?s("van-button",{staticClass:"rating-button",attrs:{type:"primary",block:"",color:e.primaryColor},on:{click:e.onSubmit}},[e._v(e._s(e.$t("common.submit")))]):e._e(),s("van-button",{staticClass:"rating-button",style:{borderColor:"transparent",color:"#7F849A"},attrs:{type:"default",block:""},on:{click:function(t){return e.$emit("cancelModal")}}},[e._v(e._s(e.edit?e.$t("common.cancel"):e.$t("common.close")))])],1)])}),[],!1,null,"75416d1a",null).exports},28514:(e,t,s)=>{s.d(t,{Z:()=>o});s(86039);var a=s(20495),i={name:"SearchInput",components:{[a.Z.name]:a.Z},props:{prefixCls:{type:String,default:"search-input"},placeholder:{type:String,default:""},text:{type:String,default:""}},data(){return{showAction:!1,searchVal:"",timer:null,timeout:null,plaseInput:this.placeholder||this.$t("community.placeholderInput")}},mounted(){this.searchVal=this.text},methods:{handleSearch(){this.$emit("search",this.searchVal)},handleSearcInput(){null!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.$emit("input",this.searchVal)}),500)},handleBlur(){null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showAction=!1}),100)}}},o=(0,s(1001).Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:"search-input "+e.prefixCls},[s("van-search",{attrs:{"show-action":e.showAction,placeholder:e.plaseInput},on:{focus:function(t){e.showAction=!0},blur:e.handleBlur,input:e.handleSearcInput,search:e.handleSearch},scopedSlots:e._u([{key:"action",fn:function(){return[s("div",{staticClass:"search-btn-text",on:{click:function(t){return t.stopPropagation(),e.handleSearch.apply(null,arguments)}}},[e._v(e._s(e.$t("common.search")))])]},proxy:!0}]),model:{value:e.searchVal,callback:function(t){e.searchVal="string"==typeof t?t.trim():t},expression:"searchVal"}})],1)}),[],!1,null,"4dcc0814",null).exports},73641:(e,t,s)=>{s.d(t,{Z:()=>x});var a=s(95082),i=(s(21790),s(24031)),o=(s(31960),s(10993)),r=(s(37138),s(2113)),n=(s(74268),s(55948)),l=(s(38862),s(74916),s(15306),s(25042)),c=(s(34837),s(39146)),d=s(26294),u=s(84533),p=s(22648),m={components:{},props:{resourceInfo:{type:Object,default:()=>{}},dataInfo:{type:Object,default:()=>{}}},computed:{formatTime:()=>e=>e.live_lesson?"0"===e.live_lesson.live_end_time?(0,p.p6)(e.live_lesson.live_start_time,"yyyy-MM-dd  hh:mm"):(0,p.yM)(e.live_lesson.live_start_time,e.live_lesson.live_end_time):"",renderIcon(){const{resourceInfo:e}=this;let t="mp4"===e.type&&"mp3"!==e.original_type,s=("mp3"===e.type||"mp4"===e.type)&&"mp3"===e.original_type,a="";return"jpg"!==e.type&&"png"!==e.type&&"jpeg"!==e.type||(a="picture"),t?u.e.mp4:s?u.e.mp3:u.e[e.type]||u.e[a]},courseTypeImportant(){return e=>{const{courseIds:t,all_checked:s}=this.$route.query,a=t?decodeURIComponent(t).split(","):[];return"true"===s||-1!==a.indexOf(e.id)}},showVideoTime(){return e=>8!==e.sourceType&&16!==e.sourceType&&("mp3"===e.type||"mp4"===e.type||"course"===e.type||"micro_course"===e.type||"exam"===e.type||"newExam"===e.type)&&"studyProject"===this.dataInfo.pageSourceType}}},h=s(1001),g=(0,h.Z)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-type"},[s("div",{staticClass:"stage-icon-content"},[s("div",{staticClass:"icon"},[s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":e.renderIcon.type,color:e.renderIcon.color,size:15}})],1),e._v(" "+e._s(e.renderIcon.typeName)+" ")]),e.courseTypeImportant(e.resourceInfo)?s("span",{staticClass:"course-type-important"},[e._v(" "+e._s(e.$t("course.importantCourse"))+" ")]):e._e(),e.showVideoTime(e.resourceInfo)?s("span",{staticClass:"course-duration"},[e._v(" "+e._s(e.resourceInfo.formatDuration)+" ")]):e._e(),"liveClass"===e.resourceInfo.type?s("span",[e._v(" "+e._s(e.formatTime(e.resourceInfo))+" ")]):e._e(),"mp4"===e.resourceInfo.type&&"finish"===e.resourceInfo.ai_upgrade_status?s("span",{staticClass:"ai-deal-success"},[e._v(" "+e._s(e.$t("course.aiDealSuccess"))+" ")]):e._e()])}),[],!1,null,"c023df6e",null).exports,f=s(65971),v=s(80251),y={components:{ProgressBar:f.Z,CourseWareShare:v.Z},props:{resourceInfo:{type:Object,default:()=>{}},dataInfo:{type:Object,default:()=>{}},themeColor:{type:String,default:""}},data:()=>({learnStatus:"",showDownload:!1}),computed:{canDownLoad:function(){if(this.dataInfo.isView)return!1;if(!this.dataInfo.course_download)return!1;if(8===this.resourceInfo.sourceType)return!1;const e="article"===this.resourceInfo.type,t=this.dataInfo.task_begin_time&&this.dataInfo.task_begin_time<(new Date).getTime();return!("pass"!==this.dataInfo.enroll_status||"true"!==this.dataInfo.have_purchased&&!this.dataInfo.is_free||this.dataInfo.task_begin_time&&!t||2!==this.resourceInfo.initType&&3!==this.resourceInfo.initType||3!==Number(this.resourceInfo.resource_status)&&"operation"!==this.resourceInfo.type||e||"LOCAL"===this.resourceInfo.storage_type)}},watch:{dataInfo(){this.renderResourceStatus(this.resourceInfo)}},mounted(){this.renderResourceStatus(this.resourceInfo)},methods:{renderResourceStatus(e){let t={class:"",node:""};const{student_id:s}=this.$route.params,{pageSourceType:a}=this.dataInfo;if(this.judgeLock(e))t.tag="lock",t.node={tag:"lock"};else if(s&&"task"===a)t.tag="mask";else if("transcoding"===e.status)t.class="trans-coding",t.node=this.$t("study.transCoding"),t.tag="transcoding";else if(e.progress>=0&&e.progress<100&&"exam"!==e.type&&"investigate"!==e.type&&"evaluation"!==e.type&&"operation"!==e.type&&"tutorials"!==e.type&&"newExam"!==e.type&&"practice"!==e.type)t.class="course-progress",t.tag="progress";else if("exam"===e.type||"newExam"===e.type)t.class="exam-info",t.node=this.renderExamStatus(e.status),t.tag="exam";else if("operation"===e.type){let s="";switch(e.resource_status){case 0:s="operation_unfinished";break;case 1:s="operation_inReview";break;case 2:s="operation_reject";break;case 3:s="operation_finished"}t.node=this.renderExamStatus(s),t.tag="operation"}else if("investigate"===e.type||"evaluation"===e.type)t.tag="investigateEvaluation",100===e.progress?(t.node=this.$t("study.finished"),t.class="completed"):t.node=this.$t("course.unfinished");else if("practice"===e.type){const{practice_infos:s}=e.practice;if(t.tag="practice",t.node={node:this.$t("practice.notPractice"),style:{color:"#969799"}},Array.isArray(s)&&s.length>0){const{pass_status:e}=s[0];"pass"===e?t.node={node:this.$t("practice.pass"),style:{color:"#5DBD66"}}:"failed"===e&&(t.node={node:this.$t("practice.failed"),style:{color:"#D8403D"}})}}else e.progress>=100&&"exam"!==e.type?(t.node=this.$t("course.finished"),t.class="progress-over",t.tag="finished"):"tutorials"===e.type&&(t.node=this.renderExamStatus(e.status),t.tag="tutorials");this.learnStatus=t},renderExamStatus(e){let t={};switch(e){case"absence":t.class="absence",t.node=this.$t("signIn.absence");break;case"scoring":case"pending":t.class="scoring",t.node=this.$t("study.waitMarking");break;case"passed":t.class="passed",t.node=this.$t("study.passed");break;case"perfect":t.class="perfect",t.node=this.$t("study.perfect");break;case"failed":t.class="failed",t.node=this.$t("study.failed");break;case"unfinished":t.class="unfinished",t.node=this.$t("common.unfinished");break;case"inProgress":t.class="in_progress",t.node=this.$t("examination.ongoing");break;case"untested":t.class="reject-status status-pass-ing",t.node=this.$t("examination.resultStatus.notTested");break;case"operation_unfinished":t.class="reject-status status-pass-ing",t.node=this.$t("course.unfinished");break;case"operation_inReview":t.class="reject-status status-pass-ing",t.node=this.$t("study.inReview");break;case"operation_reject":t.class="reject-status status-pass-ing-red",t.node=this.$t("study.reject");break;case"operation_finished":t.class="reject-status status-pass-ing",t.node=this.$t("study.finished");break;case"no_tutor":t.class="status-tutorials-ing",t.node=this.$t("study.chooseTutor");break;case"to_be_submitted":t.class="status-tutorials-ing-disabled",t.node=this.$t("study.subByTutor");break;case"to_be_evaluated":t.class="status-tutorials-ing",t.node=this.$t("study.startEvaluation");break;case"evaluated":t.class="status-tutorials-ing",t.node=this.$t("signIn.details")}return t},judgeLock(e){const{pageSourceType:t}=this.dataInfo;return"task"===t||"certificationDetails"===t?this.judgeTaskLock(e):this.judgeStudyProjectLock(e)},judgeTaskLock(e){if("false"===e.can_start_study)return!0},judgeStudyProjectLock(e){const{dataInfo:t}=this;let s=!1;return"study_project"===t.type&&0!==t.camp_periods.length||"study_project"===t.type&&0===t.camp_periods.length&&"true"===t.have_purchased&&"false"===e.can_start_study?s=!0:"study_project"!==t.type||0!==t.camp_periods.length||"false"!==t.have_purchased||t.is_free?("study_project"===t.type&&0===t.camp_periods.length&&"false"===t.have_purchased&&t.is_free&&"pass"!==t.enroll_status||"study_project"===t.type&&0===t.camp_periods.length&&"false"===t.have_purchased&&t.is_free&&"pass"===t.enroll_status&&"false"===e.can_start_study||"camp_period"===t.type&&"false"===t.have_purchased&&"false"===t.is_registration&&"false"===t.in_registration_time||"camp_period"===t.type&&"false"===t.have_purchased&&"false"===t.is_registration&&"true"===t.in_registration_time||"camp_period"===t.type&&"false"===t.have_purchased&&"true"===t.is_registration&&"false"===e.can_start_study||"camp_period"===t.type&&"true"===t.have_purchased&&"false"===e.can_start_study)&&(s=!0):s=!0,s},downloadResource(){this.showDownload=!0},hiddenShareSheet(){this.showDownload=!1}}},_=(0,h.Z)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{class:"lock"!==e.learnStatus.tag?"stage-resource-status":""},["mask"===e.learnStatus.mask?s("div",{staticClass:"not-study-mask"}):e._e(),e.canDownLoad&&"lock"!==e.learnStatus.tag?s("div",{staticClass:"download-icon",on:{click:function(t){return t.stopPropagation(),e.downloadResource()}}},[s("SvgIcon",{attrs:{"icon-class":"icon-xiazai",size:16,color:"rgba(0, 0, 0, 0.25)"}})],1):e._e(),"lock"===e.learnStatus.tag?s("div",{staticClass:"not-study-mask"},["lock"==e.learnStatus.node.tag?s("div",{staticClass:"not-study-icon"},[s("svg-icon",{staticClass:"iconfont",attrs:{"icon-class":"icon-lock",color:"#C0C2CB",size:15}})],1):e._e()]):"transcoding"===e.learnStatus.tag?s("div",{class:e.learnStatus.class},[e._v(e._s(e.learnStatus.node))]):"progress"===e.learnStatus.tag?s("div",{class:e.learnStatus.class},[s("ProgressBar",{attrs:{"theme-color":e.themeColor,progress:e.resourceInfo.progress,"text-color":e.themeColor}})],1):"exam"===e.learnStatus.tag?s("div",{class:e.learnStatus.class},[s("span",{class:e.learnStatus.node.class},[e._v(e._s(e.learnStatus.node.node))])]):"operation"===e.learnStatus.tag?s("div",[s("span",{class:e.learnStatus.node.class},[e._v(e._s(e.learnStatus.node.node))])]):"investigateEvaluation"===e.learnStatus.tag?s("div",{staticClass:"investigate-info"},[s("span",{class:e.learnStatus.class},[e._v(e._s(e.learnStatus.node))])]):"tutorials"===e.learnStatus.tag?s("div",{staticClass:"tutorials-reject"},[s("span",{class:e.learnStatus.node.class},[e._v(e._s(e.learnStatus.node.node))])]):"finished"===e.learnStatus.tag?s("div",{class:e.learnStatus.class},[e._v(" "+e._s(e.learnStatus.node)+" ")]):"practice"===e.learnStatus.tag?s("div",{staticClass:"practice"},[s("span",{style:e.learnStatus.node.style},[e._v(e._s(e.learnStatus.node.node))])]):e._e()]),s("course-ware-share",{attrs:{"is-show":e.showDownload,"current-item":{path:e.resourceInfo.path,url:e.resourceInfo.url,type:e.resourceInfo.type,id:e.resourceInfo.id,name:e.resourceInfo.title,storageType:e.resourceInfo.storage_type,videoId:e.resourceInfo.video_id}},on:{closeCourseWareShare:e.hiddenShareSheet}})],1)}),[],!1,null,"b425de12",null).exports,C={components:{},props:{resourceInfo:{type:Object,default:()=>{}},dataInfo:{type:Object,default:()=>{}}},computed:{isShowRepeat(){const{show_repeat_exam:e,type:t}=this.resourceInfo,{task_end_time:s}=this.dataInfo;let a=!0;return a=!(s&&(new Date).getTime()>s&&"exam"===t)&&e,a}}},k=(0,h.Z)(C,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return"exam"===e.resourceInfo.type||"newExam"===e.resourceInfo.type?s("div",{staticClass:"exam-info"},["passed"!==e.resourceInfo.status&&"failed"!==e.resourceInfo.status&&"perfect"!==e.resourceInfo.status&&"endNotShow"!==e.resourceInfo.status||!e.resourceInfo.show_result&&!e.resourceInfo.show_repeat_exam?e._e():s("div",{staticClass:"passed"},[s("div",{staticClass:"score"},[e.resourceInfo.show_result?s("span",[e._v(" "+e._s(e.$t("study.score"))+"："+e._s(e.resourceInfo.score)+" ")]):e._e()]),e.isShowRepeat?s("div",{staticClass:"score-status"},[e._v(e._s(e.$t("study.retake")))]):e._e()])]):e._e()}),[],!1,null,"56821573",null).exports,b=s(78551),w={components:{IconType:g,ResourceStatus:_,[c.Z.name]:c.Z,[i.Z.name]:i.Z,ScorePreview:k,SvgIcon:b.Z},props:{resourceInfo:{type:Object,default:()=>{}},dataInfo:{type:Object,default:()=>{}},currentStage:{type:Object,default:()=>{}},stageIndex:{type:Number,default:0},index:{type:Number,default:0},isPreview:{type:Boolean,default:!1}},data:()=>({color:"",iconClass:"",name:"",colorMap:{prepartion:" #CCCCCC",live:"#00CA00",expired:"#FF001D",end:"#ADADAD"},statusMap:{prepartion:"offline.notStarted",live:"ddLive.living",expired:"minePoints.expiredTime",end:"signIn.finished"}}),computed:(0,a.Z)((0,a.Z)({},(0,d.mapState)("setting",["dragSwitch"])),{},{isScorePreview:()=>k,themeColor(){return this.$store.state.themeColor.primaryColor},lockTime:()=>e=>(0,p.p6)(e,"yyyy-MM-dd  hh:mm")}),methods:{courseTap(e){if(this.dataInfo.isView)return;const t=(0,a.Z)((0,a.Z)({},e),{},{courseId:e.id,currentStage:this.currentStage,currentStageIndex:this.stageIndex,currentResourceIndex:this.index});this.$emit("resourceOnTap",t)}}},I=(0,h.Z)(w,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-one",on:{click:function(t){return e.courseTap(e.resourceInfo)}}},[s("div",{staticClass:"course-one-left"},[s("IconType",{attrs:{"resource-info":e.resourceInfo,"data-info":e.dataInfo}}),s("div",{staticClass:"course-title"},[s("span",{class:"liveClass"===e.resourceInfo.type?"live_class_title":""},[e._v(e._s(e.resourceInfo.title))]),"onlyOne"===e.resourceInfo.finishStandardStr?s("span",{staticClass:"finish-only"},[s("SvgIcon",{attrs:{"icon-class":"icon-tips",color:"#D5D8DE",size:14}}),e._v(e._s(e.$t("course.finishStandard")))],1):e._e(),"liveClass"===e.resourceInfo.type?s("van-tag",{attrs:{color:e.colorMap[e.resourceInfo.live_lesson.live_status]}},[e._v(e._s(e.$t(e.statusMap[e.resourceInfo.live_lesson.live_status])))]):e._e()],1),s(e.isScorePreview,{tag:"component",attrs:{"resource-info":e.resourceInfo,"data-info":e.dataInfo}}),"false"===e.resourceInfo.can_start_study&&e.resourceInfo.unlocking_time?s("div",{staticClass:"unlocking_time"},[e._v(e._s(e.$t("course.unlockedTime"))+"："+e._s(e.resourceInfo.unlocking_time))]):e._e()],1),s("ResourceStatus",{attrs:{"resource-info":e.resourceInfo,"data-info":e.dataInfo,"theme-color":e.themeColor}}),e.isPreview?s("div",{staticClass:"not-study-mask"}):e._e(),e.resourceInfo.examLock?s("div",{staticClass:"not-study-mask"}):e._e()],1)}),[],!1,null,"60298314",null).exports,S={components:{LearnRequireTip:s(83867).Z},props:{stagesList:{type:Array,default:()=>[]},resourceInfo:{type:Object,default:()=>{}},index:{type:Number,default:0}},computed:{isEllipsis(){const{is_get_score:e,certificate_name:t,content:s}=this.resourceInfo,{stagesList:a,index:i}=this;let o=a[i]&&!a[i].more;return(e||t||s)&&o?"van-ellipsis":""}},methods:{onDetailClick(e){this.$emit("onDetailClick",e)},previewCertificate(e){this.$emit("previewCertificate",e)}}},T=(0,h.Z)(S,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"stages-desc-title"},[s("div",{class:e.isEllipsis},[Number(e.resourceInfo.is_get_score)||e.resourceInfo.certificate_name?s("div",[Number(e.resourceInfo.is_get_score)>0?s("div",{staticClass:"stage-top-info-reward"},[e._v(" "+e._s(e.$t("project.qualifyingRewards"))+"："),s("span",[e._v(e._s(e.resourceInfo.is_get_score)+e._s(e.$t("pointsMall.credits")))])]):e._e(),e.resourceInfo.certificate_name?s("div",{staticClass:"stage-top-info-reward"},[e._v(" "+e._s(e.$t("studyProject.getCerti"))+"： "),s("span",{staticClass:"stage-top-info-reward-certi",on:{click:function(t){return e.previewCertificate(e.resourceInfo.certificate_id)}}},[e._v(" 《"+e._s(e.resourceInfo.certificate_name)+"》 ")])]):e._e()]):e._e(),Number(e.resourceInfo.is_get_score)||e.resourceInfo.certificate_name?s("span",{staticClass:"stage-detail-but",on:{click:function(t){return e.onDetailClick(e.index)}}},[e.stagesList[e.index]&&e.stagesList[e.index].more?s("strong",[e._v(e._s(e.$t("attestation.retract")))]):s("strong",[e._v(e._s(e.$t("attestation.open")))])]):e._e()]),e.stagesList[e.index]&&e.stagesList[e.index].more?s("p",[s("LearnRequireTip",{attrs:{info:e.resourceInfo,"is-ellipsis":e.isEllipsis}})],1):e._e()])}),[],!1,null,"72eb6b21",null).exports,$={components:{[n.Z.name]:n.Z,[r.Z.name]:r.Z,[o.Z.name]:o.Z,StagesItem:I,ScoreCertificate:T,[i.Z.name]:i.Z},props:{dataInfo:{type:Object,default:()=>{}},isPreview:{type:Boolean,default:!1}},data:()=>({activeNames:"1",stagesList:[]}),computed:{isScoreCertificate(){const{pageSourceType:e}=this.dataInfo;return"studyProject"===e?T:""},renderTaskMode(){return e=>{let t=e.course_list.find((e=>e.unlocking_time))?this.$t("study.unlockMode"):this.$t("study.recruitModel");return e.course_list.find((e=>"false"===e.can_start_study))?t:""}}},watch:{dataInfo:{handler(){this.stagesList=this.dataInfo.stagesList}},$route(e){if("/project-detail"===e.path){const{current:e}=this.$route.query;e&&(this.activeNames=e)}}},mounted(){this.stagesList=this.dataInfo.stagesList;const{current:e}=this.$route.query;e&&(this.activeNames=e)},methods:{onDetailClick(e){let t=this.stagesList.map(((t,s)=>s===e?(0,a.Z)((0,a.Z)({},t),{},{more:!t.more}):(0,a.Z)({},t)));this.stagesList=t},previewCertificate(e){const{getCertificate:t}=l.Z;t(e).then((e=>{(0,o.Z)([e.data.preview_url])}))},resourceOnTap(e){this.$emit("resourceOnTap",e)},onChange(e){let{query:t}=this.$router.history.current,{path:s}=this.$router.history.current,a=JSON.parse(JSON.stringify(t));a.current=e,this.$router.replace({path:s,query:a})}}},x=(0,h.Z)($,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-detail-stages-content"},[s("van-collapse",{attrs:{accordion:""},on:{change:e.onChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.dataInfo.stages,(function(t,a){return s("van-collapse-item",{key:a,attrs:{name:(a+1).toString()},scopedSlots:e._u([{key:"title",fn:function(){return[s("div",{staticClass:"stage-title"},[e._v(e._s(t.stage_name)+" "),"task"===e.dataInfo.pageSourceType&&e.renderTaskMode(t)?s("van-tag",{attrs:{plain:"",type:"primary"}},[e._v(e._s(e.renderTaskMode(t)))]):e._e()],1)]},proxy:!0}],null,!0)},[s("div",{staticClass:"stage-desc"},[e._v(" "+e._s(t.content)+" ")]),s("div",[s(e.isScoreCertificate,{tag:"component",attrs:{"resource-info":t,"stages-list":e.stagesList,index:a},on:{onDetailClick:e.onDetailClick,previewCertificate:e.previewCertificate}}),s("div",{class:[e.isScoreCertificate?"course-container":""]},e._l(t.course_list,(function(i,o){return s("StagesItem",{key:o,attrs:{"resource-info":i,"data-info":e.dataInfo,"stage-index":a,index:o,"current-stage":t,"is-preview":e.isPreview},on:{resourceOnTap:e.resourceOnTap}})})),1)],1)])})),1)],1)}),[],!1,null,"4e03da0c",null).exports},78551:(e,t,s)=>{s.d(t,{Z:()=>i});var a={name:"SvgIcon",props:{iconClass:{type:String,default:""},size:{type:Number,default:16},color:{type:String,default:"#000"},realClass:{type:String,default:""}},computed:{dealPxToVw:function(){return`${this.size/3.75}vw`}}},i=(0,s(1001).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{class:["svg-icon",e.realClass],style:{fontSize:e.dealPxToVw,color:e.color},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#"+e.iconClass}})])}),[],!1,null,"32472e80",null).exports},27083:(e,t,s)=>{s.d(t,{Z:()=>i});var a={name:"TutorBomb",components:{Avatar:s(4852).Z},props:{checkedId:{type:String,default:""},tutorialsModel:{type:String,default:""},tutorsList:{type:Array,default:()=>[]},change:{type:Function,default:()=>{}},cancel:{type:Function,default:()=>{}},confirm:{type:Function,default:()=>{}},noShowDesc:{type:Boolean,default:!1}},data:()=>({nowCheckedId:""}),computed:{themeColor(){return this.$store.state.themeColor},checkedThemeColor(){return`1px solid ${this.$store.state.themeColor.primaryColor}`}},watch:{checkedId(e){this.nowCheckedId=e}},created(){},mounted(){this.nowCheckedId=this.checkedId},methods:{onChange(e){this.change&&this.$emit("change",e)},onCancel(){this.$emit("cancel")},onConfirm(){this.$emit("confirm")}}},i=(0,s(1001).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tutors-wrapper"},[s("div",{staticClass:"tutors-mask"}),s("div",{staticClass:"tutors-content"},[e.noShowDesc?e._e():s("div",{staticClass:"tutors-body-desc"},[e._v(" "+e._s("resource_evaluation"===e.tutorialsModel?e.$t("study.tutorBodyDesc"):e.$t("study.tutorBodyDesc1")))]),s("div",{staticClass:"tutors-body"},e._l(e.tutorsList,(function(t,a){return s("div",{key:t.user_id,staticClass:"tutors-radio-LecturerCard-container",on:{click:function(s){return e.onChange(t)}}},[s("div",{staticClass:"radio-input",style:t.user_id===e.nowCheckedId?e.checkedThemeColor:""},[e.nowCheckedId===t.user_id?s("span",{staticClass:"icon-dot",style:{backgroundColor:e.themeColor.primaryColor}}):e._e()]),s("div",{key:"item.user_id",class:["lecturer-card",a===e.tutorsList.length-1?"lecturer-card-last":""]},[s("Avatar",{staticClass:"avatar",attrs:{src:t.avatar}}),s("div",{staticClass:"lecture-right"},[s("div",{staticClass:"lecturer-content_top"},[s("span",{staticClass:"name"},[e._v(" "+e._s(t.user_name))])]),s("div",{staticClass:"lecturer-content_bottom"},[e._v(" "+e._s(t.department_name)+" ")])])],1)])})),0),s("div",{staticClass:"tutors-footer tutors-footer'"},[s("div",{staticClass:"left-btn",on:{click:function(t){return t.stopPropagation(),e.onCancel.apply(null,arguments)}}},[e._v(e._s(e.$t("common.cancel")))]),s("div",{staticClass:"right-btn",on:{click:function(t){return t.stopPropagation(),e.onConfirm.apply(null,arguments)}}},[e._v(e._s(e.$t("common.confirm")))])])])])}),[],!1,null,"7bbfc64b",null).exports},62443:(e,t,s)=>{s.r(t),t.default={}},203:(e,t,s)=>{s.r(t),t.default={}},35301:(e,t,s)=>{s.r(t),t.default={}},39819:(e,t,s)=>{s.d(t,{Z:()=>j});var a=s(39299),i=s(95082),o=s(82482),r=(s(7455),s(67294)),n=s(85589),l=s.n(n),c=(s(31960),s(10993)),d=s(27632);class u extends r.Component{constructor(e){super(e),(0,o.Z)(this,"preview",(()=>{var{mediaData:e}=this.props,t=[e.url];"dingTalk"===d.Z.env?d.Z.previewImage({urls:t,index:0}):(0,c.Z)({images:t,startPosition:0})}))}render(){var{mediaData:e}=this.props;return r.createElement("div",{className:"article-img"},r.createElement("img",{src:e.url,onClick:this.preview}))}}var p=u,m=s(48534),h=s(32452),g=s(96838),f=e=>{var t="".concat(CL_API,"/cool-resource-manager/resource/server/video/").concat(e,"/playInfo");return g.Z.get({url:t,params:{}})},v=s(95969),y=(s(26699),s(84533));class _ extends r.Component{render(){var{iconClass:e,size:t=16,color:s="#000",realClass:a}=this.props;return r.createElement("svg",{style:{fontSize:t,color:s},className:"svg-icon, ".concat(a),"aria-hidden":"true",width:t,height:t,viewBox:"0 0 ".concat(t," ").concat(t)},r.createElement("use",{xlinkHref:"#".concat(e)}))}}var C=_,k=s(57969);class b extends r.Component{constructor(e){var t;super(e),t=this,(0,o.Z)(this,"getImmediateRecord",(()=>{var e;(e=>{var t="".concat(CL_API,"/enterprise-api/course/resource/getOne");return g.Z.get({url:t,params:e})})({resourceId:null===(e=this.state.record)||void 0===e?void 0:e.id}).then((e=>{var{data:t}=e.data;this.setState({record:t,isLoading:!1})})).catch((()=>{this.setState({isLoading:!1,resourceError:!0})}))})),(0,o.Z)(this,"getPrivateDocUrl",function(){var e=(0,m.Z)((function*(e){if(!e)return null;try{var{data:t}=yield(e=>{var t="".concat(CL_API,"/cool-resource-manager/resource/server/doc/").concat(e,"/readToken");return g.Z.get({url:t,params:{}})})(e);if(0===t.code)return t.data}catch(e){return""}}));return function(t){return e.apply(this,arguments)}}()),(0,o.Z)(this,"handlePreview",function(){var e=(0,m.Z)((function*(e){var{record:s}=e,{storage_type:a=""}=s,i=s.video_id||s.videoId;if(a&&"ALIBABA_PRIVATE"===a){if(!i)return;var o=yield t.getPrivateDocUrl(i);s.privateDocAuthInfo=o}var r={readerType:"doc",type:s.type,path:s.path,url:encodeURIComponent(s.url),title:s.actualName||s.name,storageType:s.storage_type,videoId:s.video_id||s.videoId,resourceId:s.id};v.Z.course.toCourseReader(r)}));return function(t){return e.apply(this,arguments)}}()),(0,o.Z)(this,"handleDelete",(()=>{this.props.editor.setValue(h.ContentUtils.removeBlock(this.props.editorState,this.props.block))}));var{meta:s,mediaData:a}=e,i="";i=s?s.record:a.meta.record,this.state={showModal:!1,record:i}}componentDidMount(){this.getImmediateRecord()}render(){var{prefixCls:e,editable:t=!0,t:s}=this.props,{record:a,isLoading:i}=this.state;if(i)return null;var o,n="mp4"===(o=a).type&&o.contentType.indexOf("video")>-1?y.e.mp4:"mp4"===o.type&&o.contentType.indexOf("audio")>-1?y.e.mp3:["ppt","pptx","doc","docx","pdf","xls","xlsx","txt","article","link","h5","ddi","mp3"].includes(o.type)?y.e[o.type]:["html","picture","scorm"].includes(o.contentType)?y.e[o.contentType]:y.e.others;return r.createElement("div",{className:e,onClick:()=>this.handlePreview({record:a})},r.createElement(C,{realClass:"".concat(e,"__icon"),iconClass:n.type,color:n.color}),r.createElement("span",{className:"".concat(e,"__title")},null==a?void 0:a.name),r.createElement("span",{className:"".concat(e,"__action")},r.createElement("span",null,k.Z.t("community.clickLook")),t&&r.createElement("span",{onClick:this.handleDelete},r.createElement("span",{className:"iconfont icon-icon_close"}))))}}(0,o.Z)(b,"defaultProps",{prefixCls:"cl-h5-article__atomics-doc"});var w=b,I=s(11651),S=s(45697),T=s.n(S),$=s(22648),x=s(17780);class Z extends r.Component{constructor(e){super(e),this.state={isHorizontal:!0}}componentDidMount(){this.init()}componentDidUpdate(e){e.src!==this.props.src&&this.init()}init(){this.player&&this.player.dispose();var e="aliplayer",t=["dingTalk","dingTalk_browser"].includes(d.Z.env);"ios"===(0,$.Os)()&&!t&&!(0,x.xX)()&&(e="videojs"),console.warn(d.Z.env,(0,$.Os)(),"获取当前环境日志");var{width:s,height:a,playerId:i,src:o,showFullscreenBtn:r,showSpeedButton:n,contentType:l,canDraggable:c,enableProgressGesture:u,playbackRates:p,preload:m,autoplay:h,controls:g,showBigPlayBtn:f}=this.props,{isHorizontal:v}=this.state;this.player=new CoolPlayer({width:s,height:(0,I.W)(a),id:i,core:e,platform:"mobile",source:o,showFullBtn:r,showSpeed:n,contentType:l,draggable:c,enableProgressGesture:u,enableCustomController:!0,speed:p,preload:m,autoplay:h,showControl:g,showBigPlayBtn:f,isHorizontal:v,vodRetry:1,onEnded:()=>{this.props.onPlayerEnded&&this.props.onPlayerEnded(),this.props.updatePlayStatus&&this.props.updatePlayStatus(!1)},onPause:()=>{this.props.onPause&&this.props.onPause(),this.props.updatePlayStatus&&this.props.updatePlayStatus(!1)},onPlay:()=>{this.props.onPlay&&this.props.onPlay(),this.props.updatePlayStatus&&this.props.updatePlayStatus(!0)},onCanPlay:()=>{this.props.ready&&this.props.ready()},onVolumechange:()=>{this.props.onVolumechange&&this.props.onVolumechange()},loadedmetadata:()=>{this.props.loadedmetadata&&this.props.loadedmetadata()},canplaythrough:()=>{this.props.canplaythrough&&this.props.canplaythrough()},onError:e=>{this.props.onError&&this.props.onError(e)},onWaiting:e=>{this.props.seeking&&this.props.seeking(e)},onTimeUpdate:(e,t)=>{this.props.refreshProgress&&this.props.refreshProgress(t,e)},onFullscreenChange:e=>{this.props.onFullscreenChange&&this.props.onFullscreenChange(e)},onHorizontalChange:e=>{this.setState({isHorizontal:e})}})}componentWillUnmount(){this.player&&this.player.dispose()}getPlayer(){return{currentTime:e=>{if(!e&&"number"!=typeof e)return this.getPlayerInfo().current;this.seek(e)},duration:()=>this.getPlayerInfo().duration,play:this.play,pause:this.pause,isPlaying:this.getPlayerInfo().status.indexOf("play")>-1,playStatus:this.getPlayerInfo().status}}getPlayerInfo(){var{current:e,duration:t,status:s}=this.player.getPlayerInfo();return{current:e,duration:t,status:s}}render(){var{height:e,playerId:t}=this.props;return r.createElement("div",{className:"cool-video-wrapper",style:{height:(0,I.W)(e)}},r.createElement("div",{id:t}))}}Z.defaultProps={playerId:"cool-player",src:"",loop:!1,controls:!1,preload:"metadata",autoplay:!1,playbackRates:[.75,1,1.25,1.5,2],muted:!1,enableProgressGesture:!1,showSpeedButton:!1,showBigPlayBtn:!0,showFullscreenBtn:!1,canDraggable:!0,contentType:"",height:"100%",width:"100%"},Z.propTypes={playerId:T().string,src:T().string,loop:T().bool,controls:T().bool,preload:T().string,autoplay:T().bool,playbackRates:T().array,muted:T().bool,enableProgressGesture:T().bool,showSpeedButton:T().bool,showBigPlayBtn:T().bool,showFullscreenBtn:T().bool,canDraggable:T().bool,contentType:T().string,height:T().number||T().string,width:T().number||T().string};var D=Z,P=r.createContext(null);class L extends r.Component{constructor(e){super(e),(0,o.Z)(this,"getPrivateVodUrl",function(){var e=(0,m.Z)((function*(e){if(!e)return null;try{var{data:t}=yield f(e);if(0===t.code)return t.data}catch(e){return null}}));return function(t){return e.apply(this,arguments)}}()),(0,o.Z)(this,"refreshProgress",(()=>{var{currentPlayId:e}=this.context,{mediaData:{meta:t}}=this.props,{record:s}=t;e&&e!==s.id&&"playing"===this.videoRef.player.playStatus&&this.videoRef.player.pause()})),this.state={playUrl:""}}componentDidMount(){var e=this;return(0,m.Z)((function*(){var{mediaData:{meta:t}}=e.props,{record:s}=t,{storage_type:a}=s,i=s.video_id||s.videoId;if(a&&"ALIBABA_PRIVATE"===a){var o=yield e.getPrivateVodUrl(i);if(!o)return;o.videoPlayInfo&&e.setState({playUrl:o.videoPlayInfo})}}))()}render(){var{mediaData:{meta:e},prefixCls:t}=this.props,{record:s}=e,{storage_type:a}=s,{playUrl:i}=this.state,o=1===s.status||2===s.status;return r.createElement("div",{className:t,style:{height:(0,I.W)(200)}},o?r.createElement("div",null,k.Z.t("attestation.transcodingRunningTip")):r.createElement(D,{ref:e=>this.videoRef=e,playerId:"braft-media-".concat(s.id),src:a&&"ALIBABA_PRIVATE"===a?i:s.url,controls:!0,canDraggable:!0,height:200,showSpeedButton:!0,showFullscreenBtn:!0,updatePlayStatus:e=>this.props.updatePlayId(e?s.id:""),refreshProgress:this.refreshProgress}))}}(0,o.Z)(L,"defaultProps",{prefixCls:"cl-h5-article__atomics-audio"}),(0,o.Z)(L,"contextType",P);var N=L,A=(s(91058),s(47467)),B=s.n(A);class O extends r.Component{constructor(e){super(e),(0,o.Z)(this,"formatTime",(e=>{e=parseInt(e);var t=parseInt(e/60),s=e%60;return"".concat(t,":").concat(s<=9?"0".concat(s):s)})),(0,o.Z)(this,"getDuration",(()=>{var{src:e}=this.props;B().get("https://frontendapi.coolcollege.cn/media/getDuration?path=".concat(e)).then((e=>{e.data&&this.setDuration(e.data)}))})),(0,o.Z)(this,"setDuration",(e=>{this.setState({totalTime:this.formatTime(e),duration:e},(()=>{var t=this.timelineRef.current,s=this.hasCached(),a=Math.floor(s/e*t.scrollWidth);this.setState({timelineWidth:t.scrollWidth-8,cacheProgressWidth:a})}))})),(0,o.Z)(this,"timeUpdate",(e=>{var{target:t}=e,{currentTime:s}=t,{isPlay:a,timelineWidth:i,duration:o}=this.state,{recordId:r}=this.props,{currentPlayId:n}=this.context;""!==n&&n!==r&&(this.audioRef.current.pause(),this.setState({isPlay:!1}));var l=this.hasCached(),c=i+8,d=Math.floor(l/o*c);this.setState({currentTime:this.formatTime(s>=o?0:s),playLineLeft:s>=o?0:Math.floor(s/o*i),cacheProgressWidth:l>=o?c:d}),s>=o&&a&&this.play()})),(0,o.Z)(this,"play",(()=>{var{isPlay:e,duration:t}=this.state;t<=0||(this.setState({isPlay:!e}),e?this.audioRef.current.pause():(this.audioRef.current.play(),this.props.onPlay()))})),(0,o.Z)(this,"handleEnded",(()=>{this.setState({isPlay:!1,playLineLeft:0,currentTime:this.formatTime(0)})})),(0,o.Z)(this,"hasCached",(()=>{var e=this.audioRef.current,{buffered:t}=e;return t.length>0?t.end(e.buffered.length-1):0})),(0,o.Z)(this,"timelineClick",(e=>{var t=this.timelineRef.current,s=this.audioRef.current,a=this.hasCached(),{timelineWidth:i,isPlay:o,cacheProgressWidth:r,duration:n}=this.state,l=e.pageX-t.offsetLeft,c=n*(l=l<=0?0:l)/i;c>=a?(l=r-8,s.currentTime=a):s.currentTime=c,this.setState({playLineLeft:l}),o||this.play()})),(0,o.Z)(this,"handleDragStart",(e=>{var{touches:t}=e,s=this.timelineRef.current,{timelineWidth:a,isPlay:i}=this.state,o=t[0].pageX-s.offsetLeft;o=o<=0?0:o>a?a:o,this.setState({playLineLeft:o}),i&&this.play()})),(0,o.Z)(this,"handleDragEnd",(()=>{var{isPlay:e,timelineWidth:t,playLineLeft:s,duration:a}=this.state,i=this.audioRef.current;if(!e){var o=a*s/t,r=this.hasCached();o>=r?(i.currentTime=r,this.setState({playLineLeft:Math.floor(r/a*t)})):i.currentTime=a*s/t,this.play()}})),this.state={isPlay:!1,duration:0,currentTime:this.formatTime(0),totalTime:this.formatTime(0),timelineWidth:0,playLineLeft:0,cacheProgressWidth:0,src:e.src||""},this.audioRef=r.createRef(),this.timelineRef=r.createRef(),this.playHeadRef=r.createRef()}componentDidMount(){var e=this.audioRef.current,t=this.playHeadRef.current;e.addEventListener("timeupdate",this.timeUpdate),e.addEventListener("ended",this.handleEnded),t.addEventListener("touchmove",this.handleDragStart),t.addEventListener("touchend",this.handleDragEnd),this.getDuration()}UNSAFE_componentWillReceiveProps(e){e.src!==this.props.src&&this.setState({src:e.src},(()=>{this.getDuration()}))}componentDidUpdate(){}render(){var{src:e}=this.props,{isPlay:t,currentTime:s,totalTime:a,playLineLeft:i,cacheProgressWidth:o}=this.state;return r.createElement("div",{className:"audio-wrap"},r.createElement("audio",{className:"audio-ele",ref:this.audioRef,src:e,preload:"metadata",controls:!0}),r.createElement("span",{onClick:this.play},r.createElement(C,{iconClass:t?"icone-pause":"icone-play",color:"#565657",size:14})),r.createElement("span",{className:"audio-time"},r.createElement("span",{className:"audio-time-current"},s),"/",r.createElement("span",{className:"audio-time-total"},a)),r.createElement("div",{ref:this.timelineRef,className:"audio-timeline",onClick:this.timelineClick},r.createElement("div",{ref:this.playHeadRef,onTouchEnd:this.handleDragEnd,style:{left:"".concat(i,"px")},className:"audio-timeline-play"}),r.createElement("div",{className:"audio-timeline-played",style:{width:"".concat(i,"px")}}),r.createElement("div",{className:"audio-timeline-cached",style:{width:"".concat(o,"px")}})))}}(0,o.Z)(O,"contextType",P);var E=O;class R extends r.Component{constructor(e){super(e),(0,o.Z)(this,"getPrivateVodUrl",function(){var e=(0,m.Z)((function*(e){if(!e)return null;try{var{data:t}=yield f(e);if(0===t.code)return t.data}catch(e){return null}}));return function(t){return e.apply(this,arguments)}}()),this.state={playUrl:""}}componentDidMount(){var e=this;return(0,m.Z)((function*(){var{mediaData:{meta:t}}=e.props,{record:s}=t,{storage_type:a}=s,i=s.video_id||s.videoId;if(a&&"ALIBABA_PRIVATE"===a){var o=yield e.getPrivateVodUrl(i);if(!o)return;o.videoPlayInfo&&e.setState({playUrl:o.videoPlayInfo})}}))()}render(){var{mediaData:{meta:e},prefixCls:t}=this.props,{record:s}=e,{storage_type:a}=s,{playUrl:i}=this.state;return r.createElement("div",{className:t,id:s.id},r.createElement(C,{realClass:"".concat(t,"-icon"),iconClass:"icon-music",color:"#FF5E94",size:"16px"}),r.createElement("div",{className:"".concat(t,"-play")},r.createElement(E,{src:a&&"ALIBABA_PRIVATE"===a?i:s.url,audioId:s.id,onPlay:()=>this.props.updatePlayId(s.id),recordId:e.record.id})))}}(0,o.Z)(R,"defaultProps",{prefixCls:"cl-h5-article__atomics-doc"});var M=R;class j extends r.Component{constructor(e){super(e),(0,o.Z)(this,"blockRendererFn",((e,t)=>{var s=null,o=e.getEntityAt(0);if(!o)return null;var n=t.editorState.getCurrentContent().getEntity(o),l=n.getType(),c=n.getData(),d=(0,i.Z)((0,i.Z)({},t),{},{block:e,mediaData:c,entityKey:o});return"IMAGE"===l&&(s={component:()=>r.createElement(p,d)}),"DOC"===l&&(s={component:()=>r.createElement(w,(0,a.Z)({},d,{editable:!1}))}),"CUSTOMER_AUDIO"===l&&(s={component:()=>r.createElement(M,(0,a.Z)({},d,{editable:!1,updatePlayId:this.updatePlayId}))}),"CUSTOMER_VIDEO"===l&&(s={component:()=>r.createElement(N,(0,a.Z)({},d,{editable:!1,updatePlayId:this.updatePlayId}))}),s})),(0,o.Z)(this,"updatePlayId",(e=>{this.setState((0,i.Z)((0,i.Z)({},this.state),{},{currentPlayId:e}))})),this.state={editorState:l().createEditorState(this.props.data||null),currentPlayId:""}}componentDidUpdate(e){if(this.props.data!==e.data){var{data:t}=this.props;if(!t)return;this.setState({editorState:l().createEditorState(t||null)})}}render(){var{prefixCls:e}=this.props;return r.createElement("div",{className:"cl-h5-article ".concat(e)},r.createElement(P.Provider,{value:this.state},r.createElement(l(),{ref:e=>this.editorInstance=e,value:this.state.editorState,readOnly:!0,controls:[],blockRendererFn:this.blockRendererFn})))}}(0,o.Z)(j,"defaultProps",{prefixCls:"cl-h5-article-preview"})},29032:(e,t,s)=>{s.d(t,{P:()=>d});var a=s(95082),i=s(26294),o=s(32900),r={name:"WxDepartmentName",props:{openid:{type:String,default:""}},mounted(){window.parent&&window.parent.WWOpenData&&window.parent.WWOpenData.bind(this.$el)}},n=s(1001),l={name:"ClDepartmentNames",components:{WxDepartmentName:(0,n.Z)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("ww-open-data",{attrs:{type:"departmentName",openid:e.openid}})}),[],!1,null,null,null).exports},props:{departmentIds:{type:Array,required:!0,default:()=>[]},departmentNames:{type:Array,required:!0,default:()=>[]},separator:{type:String,default:","}},data:()=>({finalDepartments:[]}),computed:(0,a.Z)({},(0,i.mapState)("user",["appType"])),mounted(){"wx_app"===this.appType&&this.getDepartmentNames()},methods:{async getDepartmentNames(){const e=await o.Z.getDepartmentNames(this.departmentIds),{code:t,data:s}=e.data;"200000"===t&&(this.finalDepartments=s)}}},c={components:{DepartmentNames:(0,n.Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return"wx_app"!==e.appType?s("span",e._l(e.departmentNames,(function(t,a){return s("span",{key:a.toString()},[e._v(" "+e._s(t)+e._s(a===e.departmentNames.length-1?"":e.separator)+" ")])})),0):s("span",e._l(e.finalDepartments,(function(t,a){return s("span",{key:a.toString()},[t.hasName?[e._v(" "+e._s(t.name)+e._s(a===e.finalDepartments.length-1?"":e.separator)+" ")]:[s("wx-department-name",{attrs:{openid:t.thirdId}}),e._v(e._s(a===e.finalDepartments.length-1?"":e.separator)+" ")]],2)})),0)}),[],!1,null,null,null).exports},props:{allDepartmentsList:{type:Array,default:()=>[]}}},d=(0,n.Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",e._l(e.allDepartmentsList,(function(t,a){return s("span",{key:t.department_ids},[s("department-names",{attrs:{"department-ids":t.department_ids.split("/"),"department-names":t.department_names.split("/"),separator:"/"}}),e._v(" "+e._s(a===e.allDepartmentsList.length-1?"":",")+" ")],1)})),0)}),[],!1,null,null,null).exports},68728:(e,t,s)=>{s.d(t,{If:()=>i,Jn:()=>r,VH:()=>a,dC:()=>n,ud:()=>o});const a="course",i="imageText",o="microCourse",r=e=>{switch(e){case a:case i:case o:return`${ASSETS_OSS_HOST}/1860971501487001600.png`;case"studyProject":return`${ASSETS_OSS_HOST}/1860971685772136448.png`;case"qualification":return`${ASSETS_OSS_HOST}/1860971773978349568.png`;case"trainingReport":return`${ASSETS_OSS_HOST}/1860972282994888704.png`;case"exam":return`${ASSETS_OSS_HOST}/1860972372409061376.png`;case"investigate":return`${ASSETS_OSS_HOST}/1860972464083963904.png`;case"questionnaire":return`${ASSETS_OSS_HOST}/1860972522963603456.png`;case"community":return`${ASSETS_OSS_HOST}/1860972614785306624.png`;case"evaluation":return`${ASSETS_OSS_HOST}/1860972686008782848.png`;case"pk":return`${ASSETS_OSS_HOST}/1860968027051397120.png`;default:return""}},n=e=>e?`${e}?x-oss-process=image/crop,w_191,h_191,x_32,y_0`:e},74848:(e,t,s)=>{s.r(t),s.d(t,{formatFeedTime:()=>i});var a=s(22648);const i=e=>{const t=new Date,s=t.getFullYear(),i=t.getMonth(),o=t.getDate();let r="";return r=(new Date(`${s}/${i+1}/${o}`).getTime()-e)/1e3<=0?(0,a.p6)(e,"hh:mm"):(0,a.p6)(e,"yyyy-MM-dd"),r}},99423:(e,t,s)=>{s.r(t);var a=s(60211),i=s(72020),o=s(4005),r=s(91242),n=s(12799),l=s(10192),c=s(37762),d=s(74495),u=s(66150),p=s(26457),m=s(58440),h=s(20688),g=s(15829),f=s(73514),v=s(69548),y=s(21112),_=s(16010),C=s(16475);t.default={HomeSearchMobile:a.default,HomeBannerMobile:i.default,HomeGuideMobile:o.default,HomeNoticeMobile:r.default,HomeCommunityMobile:n.default,HomeTaskMobile:l.default,HomeCreditsMobile:d.default,HomeIntegralMobile:d.default,HomePointsMallMobile:u.default,HomeMicroMobile:p.default,HomeLecturerMobile:m.default,HomeSystemMobile:h.default,HomeDynamicsMobile:g.default,HomeCourseMobile:f.default,HomeBoutiqueMobile:v.default,HomePointsPanelMobile:y.default,HomeSignInMobile:_.default,HomeIntegrateTaskMobile:C.default,HomeClassifyMobile:c.default}},83096:(e,t,s)=>{s.r(t),s.d(t,{dealNav:()=>n,handleLinkToByCode:()=>l});s(26699),s(32023),s(57658);var a=s(8400),i=s.n(a),o=s(15123),r=s(95969);const n=(e,t=!0)=>{t||e.forEach((e=>{"false"===e.custom_jump&&(e.key=e.jump_title)}));return i()(e,10)},l=e=>{let t="";const s={community:{code:["101202","101204","101210"],url:r.Z.home.enterCommunity()},pk:{code:["101207","101208"],url:r.Z.resource.pkList()},practice:{code:["101206"],url:r.Z.resource.practiceList()},task:{code:["101215","101216","101217"],url:r.Z.resource.studyList()},exam:{code:["101218"],url:r.Z.resource.examList()}};for(const a in s)if(Object.hasOwnProperty.call(s,a)&&s[a].code.includes(e))return t=s[a].url,void o.ZP.push({path:t});t||o.ZP.push({path:"/knowledge"})}},11046:(e,t,s)=>{s.d(t,{RJ:()=>c,ju:()=>d,rf:()=>l});s(21703),s(57658),s(26699);var a=s(22648),i=s(63874),o=s(15123),r=s(20243),n=s(27632);function l({flag:e,id:t,styleType:s="normal"}){let a="";switch(e){case"study_project":a=`/pages/login/login-account/index?renderType=visitor&flag=${e}&projectId=${t}&styleType=${s}`;break;case"course_study":a=`/pages/login/login-account/index?renderType=visitor&flag=${e}&courseId=${t}`;break;default:a="/pages/login/login-account/index"}n.Z.redirectTo({url:a})}async function c({type:e="image",linkUrl:t="",course:s={id:"",style_type:"",project_id:""},classify:a={id:""}}){let c="",d="";if("default"===e)try{const e=await r.Z.getVisitorInfo({domain_url:localStorage.getItem("domain")});c=e.data.page_id,d=e.data.enterprise_id}catch(e){throw new Error(e)}if("image"!==e)if("link"===e&&t)(0,i.N8)({url:t},!0);else if("default"!==e){if("classify"===e&&a.id)o.ZP.push({path:`/visitor-page/course-list?renderType=visitor&classifyId=${a.id}`});else if(["course","study_project"].includes(e))try{if(await r.Z.courseDetailCanSee(),"course"===e&&s.id)return void o.ZP.push({path:`/visitor-page/course-detail?renderType=visitor&id=${s.id}`});if("study_project"===e){const{id:e,style_type:t,project_id:a}=s;if(["desert","star"].includes(t)&&a)return void o.ZP.push({path:`/visitor-page/study-project-map?styleType=${t}&id=${a}&courseId=${e}`});e&&o.ZP.push({path:`/visitor-page/study-project?renderType=visitor&id=${e}`})}}catch(e){l({flag:""})}}else n.Z.navigateTo({url:`/pages/visitor/index?enterpriseId=${d}&pageId=${c}&type=home`})}function d(e){const t=(0,a.L7)(e),{courseType:s,bizType:i}=t;return"course"===s&&3===i?"study_project":"course"}},43195:(e,t,s)=>{s.d(t,{Z:()=>Ie});var a=s(95082),i=(s(72975),s(98655)),o=(s(11155),s(91391)),r=(s(57658),s(41996)),n={name:"Banner",components:{[o.Z.name]:o.Z,[i.Z.name]:i.Z},props:{pageId:{type:Number,default:0},pagePosition:{type:String,default:""},models:{type:Object,required:!0,default:()=>{}}},data:()=>({}),methods:{handleClick(e){switch(e.type){case"page":e.content.page&&this.$router.push({path:`/find?pageId=${e.content.page.id}&businessType=mobile-find`});break;case"course":e.content.course&&(0,r.x)(e.content.course);break;case"courseClass":e.content.courseClass&&this.$router.push({path:`/find/course-list?pageId=${this.pageId}&pagePosition=${this.pagePosition}&type=class&classKey=${e.content.courseClass.checkedKeys}&postKey=${e.content.courseClass.postCheckKeys}`});break;case"lecturer":this.$router.push({path:"/find/lecturer-list"})}}}},l=s(1001),c=(0,l.Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},e._l(e.models.banner,(function(t){return s("van-swipe-item",{key:t.id},[s("img",{attrs:{src:t.url},on:{click:function(s){return e.handleClick(t)}}})])})),1)}),[],!1,null,"54e41bde",null).exports,d=s(34246),u={name:"Lecturer",components:{},props:{pageId:{type:Number,default:0},pagePosition:{type:String,default:""},models:{type:Object,required:!0,default:()=>{}},params:{type:Object,required:!0,default:()=>{}}},data:()=>({list:[]}),mounted(){this.models.lecturerKeys.length>0&&this.params.showCount>0&&d.Z.getLecturerListByIds({lecturer_ids:this.models.lecturerKeys.slice(0,this.params.showCount)}).then((e=>{0===e.data.code&&(this.list=e.data.data.teachers||[])}))},methods:{handleClick(){this.$router.push({path:`/find/lecturer-list?pagePosition=${this.pagePosition}&pageId=${this.pageId}`})},hanldeLecturerClick(e){this.$router.push({path:`/find/lecturer-detail/${e}`})}}},p=(0,l.Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lecturer"},[s("div",{staticClass:"lecturer-header"},[s("div",{staticClass:"lecturer-header-title",style:{textAlign:e.params.position}},[e._v(e._s(e.params.title))]),s("div",{staticClass:"lecturer-header-extra",on:{click:e.handleClick}},[e._v("更多")])]),e.list.length>0?s("ul",{class:[1===e.params.column?"lecturerContentOne lecturerContent":"lecturerContentTwo lecturerContent"]},e._l(e.list,(function(t){return s("li",{key:t.id,staticClass:"lecturerContentCard",on:{click:function(s){return e.hanldeLecturerClick(t.id)}}},[s("div",{staticClass:"lecturerContentLeft",style:{backgroundImage:"url("+(t.avatar||"https://oss.coolcollege.cn/1790708689137700864.png")+")"}}),s("div",{staticClass:"lecturerContentRight"},[s("div",{staticClass:"rightName"},[e._v(e._s(t.name))]),s("div",{staticClass:"rightDescription"},[e._v(e._s(t.simple_introduce))]),s("div",{staticClass:"rightCourse"},[e._v("已授课程 "+e._s(t.course_count||0))])])])})),0):s("div",{staticClass:"nodata"},[s("img",{attrs:{src:"https://oss.coolcollege.cn/1789886518823882752.png"}}),s("div",[e._v("暂无讲师")])])])}),[],!1,null,"62caa83f",null).exports,m={name:"GraphicNav",components:{},props:{models:{type:Object,required:!0,default:()=>{}},params:{type:Object,required:!0,default:()=>{}},pageId:{type:Number,default:0},pagePosition:{type:String,default:""}},data:()=>({}),methods:{handleClick(e){switch(e.type){case"page":e.content.page&&this.$router.push({path:`/find?pageId=${e.content.page.id}&businessType=mobile-find`});break;case"course":e.content.course&&(0,r.x)(e.content.course);break;case"courseClass":e.content.courseClass&&this.$router.push({path:`/find/course-list?pageId=${this.pageId}&pagePosition=${this.pagePosition}&type=class&classKey=${e.content.courseClass.checkedKeys}&postKey=${e.content.courseClass.postCheckKeys}`});break;case"lecturer":this.$router.push({path:"/find/lecturer-list"})}}}},h=(0,l.Z)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"navWrapper"},[s("ul",{staticClass:"nav"},e._l(e.models.nav,(function(t){return s("li",{key:t.id,staticClass:"topBottom",style:{width:"calc(100 / "+e.params.column+" * 1%)"},on:{click:function(s){return e.handleClick(t)}}},[s("div",{staticClass:"image"},[s("img",{attrs:{src:t.url}})]),s("div",{staticClass:"text"},[s("div",{staticClass:"title"},[e._v(e._s(t.title))]),s("div",{staticClass:"subTitle"},[e._v(e._s(t.subTitle))])])])})),0)])}),[],!1,null,"1f27bc39",null).exports,g=(s(23307),{name:"ShopSign",components:{VanIcon:s(81392).Z},data:()=>({shopInfo:{logo:"",shopName:"",profile:""},shopFeature:{nameColor:"#fff",descColor:"#fff",isDesc:!0,isName:!0,backGround:"1",backGroundColor:"#CCCCCC",backGroundImage:"https://oss.coolcollege.cn/1794908640189222912.png"},background:"url(https://oss.coolcollege.cn/1794908640189222912.png)",titleColor:"#fff",textColor:"#fff",defaultLogo:"https://oss.coolcollege.cn/1794908640189222912.png"}),mounted(){this.getInfo()},methods:{toList(){this.$router.push({path:"/find/course-list?type=class&classKey=all&postKey=all"})},getInfo(){d.Z.getSupplier({supplierId:this.$store.state.routeStack[0].query.scopeId}).then((e=>{if(0===e.data.code){const t=e.data.data;try{const e=JSON.parse(t.shopFeatureApp);this.shopFeature=e}catch(e){console.error(e)}this.shopInfo=t}}))}}}),f=(0,l.Z)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"shop-sign",style:{background:1==e.shopFeature.backGround?"url("+e.shopFeature.backGroundImage+")":e.shopFeature.backGroundColor}},[s("div",{staticClass:"search",on:{click:e.toList}},[s("span",{staticClass:"icon color_white"},[s("VanIcon",{attrs:{color:"#fff",name:"search"}})],1),s("span",{staticClass:"color_white"},[e._v("搜索课程")])]),s("div",{staticClass:"shop-sign-content"},[s("div",{staticClass:"shop-sign-logo"},[s("img",{attrs:{src:e.shopInfo.logo||e.defaultLogo}})]),s("div",{staticClass:"shop-sign-desc"},[s("div",{staticClass:"shop-sign-desc-title",style:{color:e.shopFeature.nameColor}},[e._v(e._s(e.shopFeature.isName?e.shopInfo.shopName||e.shopInfo.name:null))]),s("div",{staticClass:"shop-sign-desc-text",style:{color:e.shopFeature.descColor}},[e._v(e._s(e.shopFeature.isDesc?e.shopInfo.profile:null))])])])])}),[],!1,null,"f71e53b8",null).exports,v=(s(49153),s(5944)),y=(s(3791),s(93432)),_={name:"CourseList",components:{Card:s(14884).Z,Loading:y.Z,Empty:v.Z},props:{models:{type:Object,default:()=>({postData:[],courseData:[],classData:[]})},params:{type:Object,default:()=>({showNumber:8,title:"推荐课程2",type:"course",cardType:"two"})},pageId:{type:[String,Number],default:""},pagePosition:{type:String,default:""}},data:()=>({dataSource:[],loading:!1}),mounted(){this.getCourseList()},methods:{getCourseList(){const e=this.models.courseData.slice(0,this.models.courseData.length>this.params.showNumber?this.params.showNumber:this.models.courseData.length);d.Z.batchQueryCourse({course_ids:e.map((e=>({id:e.id,flag:e.flag})))}).then((e=>{0===e.data.code&&(this.dataSource=e.data.data?e.data.data.courses:[])}))},toDetail(e){(0,r.x)(e)},toMore(){const{pageId:e,pagePosition:t,params:{type:s},models:{classData:a,postData:i}}=this.$props;this.$router.push({path:"/find/course-list",query:{type:s,pageId:e,pagePosition:t,classKey:a[0],postKey:i[0]}})}}},C=(0,l.Z)(_,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"design-course"},[s("div",{staticClass:"box"},[s("div",{staticClass:"left"},[e._v(e._s(e.params.title))]),s("div",{staticClass:"right",on:{click:e.toMore}},[e._v("更多")])]),e.loading?s("Loading",[e._v(" 加载中... ")]):e._e(),s("div",{staticClass:"design-course-list"},e._l(e.dataSource,(function(t,a){return s("Card",{key:a,attrs:{type:e.params.cardType,data:t},on:{click:function(s){return e.toDetail(t)}}})})),1),0!=e.dataSource.length||e.loading?e._e():s("Empty")],1)}),[],!1,null,"c5b165d2",null).exports,k={props:{models:{type:Object,required:!0,default:()=>{}}}},b={BannerBgyMobile:c,LecturerBgyMobile:p,LecturerBgyMobile2:p,GraphicNavMobile:h,GraphicNav2Mobile:h,RichTextMobile:(0,l.Z)(k,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"html-box",domProps:{innerHTML:e.xss(e._s(e.models.html))}})}),[],!1,null,null,null).exports,ShopSignMobile:f,CourseListMobile:C,CourseListMobileMedium:C,CourseListMobileLarge:C},w=s(99423),I=(s(86039),s(20495)),S=s(26294),T=s(23111),$={name:"Search",components:{VanSearch:I.Z},props:{isRender:{type:Boolean,default:!0}},computed:(0,a.Z)((0,a.Z)({themeColor(){return this.$store.state.themeColor}},(0,S.mapGetters)({primaryColor:"getPrimaryColor",homeBannerColor:"setting/getHomeBannerColor"})),{},{bannerBackColor(){const e=this.$store.state.setting.homeBannerColor;return(0,T.y)(e)}}),methods:{onClick(){this.isRender&&this.$router.push({path:"/visitor-page/course-search"})}}},x=(0,l.Z)($,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-search"},[s("VanSearch",{attrs:{background:e.bannerBackColor||e.themeColor.primaryColor,placeholder:e.$t("common.search"),readonly:""},on:{click:e.onClick}})],1)}),[],!1,null,"7ec1ecfe",null).exports,Z=(s(47601),s(44951)),D=s(22648),P=s(11046),L={name:"Banner",components:{Swipe:o.Z,SwipeItem:i.Z,VanImage:Z.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0}},data:function(){return{banners:[],swipeIndex:0}},computed:(0,a.Z)((0,a.Z)({},(0,S.mapGetters)({primaryColor:"getPrimaryColor",homeBannerColor:"setting/getHomeBannerColor"})),{},{bannerBackColor(){const e=this.$store.state.setting.homeBannerColor;return(0,T.y)(e)}}),watch:{models(e,t){const s=e.banner.length===t.banner.length;if(1===e.banner.length){const{color:t}=e.banner[0];this.commonSetColor(t)}if(this.swipeIndex===e.currentIndex&&s){const{color:t}=e.banner[e.currentIndex];this.commonSetColor(t)}this.setBannerList()}},mounted(){const{color:e}=this.models.banner[0];this.commonSetColor(e),this.setBannerList()},methods:{setBannerList(){const{banner:e}=this.models;this.banners=e},handleToBannerDetail(e){this.isRender&&(0,P.RJ)(e)},onChange(e){this.swipeIndex=e;const{color:t}=this.models.banner[e];this.commonSetColor(t),this.$emit("swipe",e)},commonSetColor(e){e&&(this.$store.commit("setting/setHomeBannerColor",e),(0,D.vk)((0,T.y)(e)))}}},N=L,A=(0,l.Z)(N,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-banner"},[s("div",{staticClass:"banner-bg",style:{backgroundColor:e.bannerBackColor}}),s("div",{staticClass:"banner-swipe"},[s("Swipe",{attrs:{autoplay:3e3,"indicator-color":"white"},on:{change:e.onChange}},e._l(e.banners,(function(t,a){return s("SwipeItem",{key:a.toString()},[s("VanImage",{staticClass:"banner-image",attrs:{src:t.url},on:{click:function(s){return e.handleToBannerDetail(t)}}})],1)})),1)],1)])}),[],!1,null,"3b942e5a",null).exports,B=(s(53743),s(59978)),O=(s(629),s(67763)),E=(s(152),s(62476)),R=(s(52073),s(15032)),M=s(23493),j=s.n(M),U=s(83096),F={name:"GraphicNav",components:{Swipe:o.Z,SwipeItem:i.Z,Tabbar:R.Z,TabbarItem:E.Z,Grid:O.Z,GridItem:B.Z},props:{models:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{navs:[],originMenu:[]}},computed:(0,a.Z)({},(0,S.mapGetters)({primaryColor:"getPrimaryColor"})),watch:{models(){this.initNewData()}},mounted(){this.initNewData()},methods:{initNewData(){this.originMenu=this.models.porcelain_area,this.navs=(0,U.dealNav)(this.models.porcelain_area,!1)},homeNavClick(e){(0,P.RJ)(e)},onNavDetail:j()((function(e){this.isRender&&this.homeNavClick(e)}),1e3)}},z=(0,l.Z)(F,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["home-nav",e.originMenu.length<=5?"home-nav-one-line":""]},[s("div",[s("Swipe",{attrs:{autoplay:0,"indicator-color":"white",loop:!1}},e._l(e.navs,(function(t,a){return s("SwipeItem",{key:a.toString()},[s("Grid",{attrs:{"column-num":5,border:!1}},e._l(t,(function(t,i){return s("GridItem",{key:i.toString()+a.toString(),on:{click:function(s){return e.onNavDetail(t)}}},[s("Tabbar",{attrs:{fixed:!1}},[s("TabbarItem",{attrs:{icon:t.image},scopedSlots:e._u([""!==t.image?{key:"icon",fn:function(){return[s("img",{attrs:{src:t.image}})]},proxy:!0}:null],null,!0)},[s("span",{staticClass:"van-ellipsis"},[e._v(e._s(t.name))])])],1)],1)})),1)],1)})),1)],1)])}),[],!1,null,"5c2d774a",null).exports,q=(s(38862),s(78551)),V={name:"ModuleTitle",components:{SvgIcon:q.Z},props:{styleObject:{type:Object,default:()=>{}},title:{type:String,default:""},showMore:{type:Boolean,default:!0},showHelp:{type:Boolean,default:!1},click:{type:Function,default:()=>{}}},data:function(){return{}},mounted(){},methods:{lineClick(){this.$emit("click","line")},helpClick(){this.$emit("click","help")},moreClick(){this.$emit("click","more")}}},H=(0,l.Z)(V,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"module-title",style:e.styleObject,on:{click:e.lineClick}},[s("div",{staticClass:"title-left"},[s("span",{staticClass:"title-content"},[e._v(e._s(e.title))]),e.showHelp?s("span",{on:{click:e.helpClick}},[s("SvgIcon",{attrs:{"icon-class":"icon-e-help",color:"rgb(198, 198, 198)"}})],1):e._e()]),e.showMore?s("div",{staticClass:"title-right",on:{click:e.moreClick}},[s("span",[e._v(e._s(e.$t("knowledge.more")))])]):e._e()])}),[],!1,null,"849d204c",null).exports,W=s(27479),G={name:"LecturerItem",components:{Avatar:s(4852).Z},props:{data:{type:Object,required:!0},isRender:{type:Boolean,default:!0}},data:()=>({}),computed:{},created(){},mounted(){},methods:{linkToLecturerDetail(){this.isRender&&this.$router.push({path:"/visitor-page/lecturer-detail",query:{lecturerId:this.data.id,renderType:"visitor"}})}}},K=(0,l.Z)(G,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lecturer_item_container",on:{click:e.linkToLecturerDetail}},[s("Avatar",{attrs:{src:e.data.avatar,width:"56",height:"56"}}),s("div",{staticClass:"content"},[s("div",{staticClass:"name"},[e._v(e._s(e.data.lecturer_name))]),s("div",{staticClass:"level_container"},[e.data.level_name?s("span",{staticClass:"level"},[e._v(" "+e._s(e.data.level_name)+" ")]):s("span",{staticClass:"level default"},[e._v(" "+e._s(e.$t("home.NoGrade")))])]),s("div",{staticClass:"tags_container"},e._l(e.data.adept_field,(function(t,a){return s("span",{key:a,staticClass:"tag"},[e._v(e._s(t))])})),0)])],1)}),[],!1,null,"553594f6",null).exports,Q={name:"Lecturers",components:{Loading:y.Z,EmptyBox:W.Z,ModuleTitle:H,LecturerItem:K},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0}},data:()=>({lecturerList:[],loading:!1,mockData:[{id:"1",lecturer_name:"示例讲师名称",avatar:"",course_count:"100",level_name:"此处是讲师等级",adept_field:["擅长领域","擅长领域"]},{id:"2",lecturer_name:"示例讲师名称",avatar:"",course_count:"100",level_name:"此处是讲师等级",adept_field:["擅长领域","擅长领域","擅长领域","擅长领域","擅长领域","擅长领域"]},{id:"3",lecturer_name:"示例讲师名称",avatar:"",course_count:"100",level_name:"此处是讲师等级",adept_field:["擅长领域"]}]}),computed:{getTitle(){return this.params.title},showMore(){return this.lecturerList.length>0}},watch:{models(){this.getLecturer()}},mounted(){this.getLecturer()},methods:{getLecturer(){if(!this.models.lecturer.length)return void(this.lecturerList=this.isRender?[]:this.mockData);const{showCount:e=3}=this.params;this.lecturerList=this.models.lecturer.slice(0,e)},moduleTitleEvent(e){this.isRender&&"more"===e&&this.$router.push({path:"/visitor-page/lecturer-list",query:{renderType:"visitor",ids:JSON.stringify(this.models.lecturerKeys)}})}}},J=(0,l.Z)(Q,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lecturers_container"},[s("div",{staticClass:"lecturers"},[s("ModuleTitle",{attrs:{title:e.getTitle,"show-more":e.showMore},on:{click:e.moduleTitleEvent}}),e.loading?s("Loading",{attrs:{vertical:""}}):e.lecturerList.length<=0?s("EmptyBox",{staticClass:"lecture_empty"}):e._l(e.lecturerList,(function(t){return s("LecturerItem",{key:t.id,attrs:{data:t,"is-render":e.isRender}})}))],2)])}),[],!1,null,"d17ec5f8",null).exports,Y=(s(20581),s(50914)),X=(s(2707),s(20243)),ee=(s(40962),s(41956)),te=(s(31968),s(3809)),se=(s(52355),s(29233)),ae=(s(70885),s(6458)),ie=(s(18144),s(65641)),oe=s(78368),re={name:"VisitorCourseCard",components:{Col:ie.Z,Row:ae.Z,Cell:se.Z,Rate:te.Z,SvgIcon:q.Z,VanImage:Z.Z,Badge:ee.Z},props:{data:{type:Object,default:()=>{}},type:{type:String,default:"row"}},data:function(){return{defaultAvatar:oe}},computed:{themeColor(){return this.$store.state.themeColor},getStar(){return this.data.starLevel<=0?5:this.data.starLevel},dealPrise(){return 3===this.data.bizType&&!this.data.free&&this.data.preferentialPrice>0?`￥${this.data.preferentialPriceStr}`:this.$t("course.free")},dealOfficialPrise(){return 0!==this.data.officialPrice?`￥${this.data.officialPriceStr}`:""}},mounted(){},methods:{onCourseClick(){}}},ne=(0,l.Z)(re,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["visitor-course-card","column"===e.type?"column":""],on:{click:e.onCourseClick}},[s("div",{staticClass:"course-image"},[s("Badge",{class:e.data.type},[s("VanImage",{staticClass:"course-cover",attrs:{fit:"cover",src:e.data.cover}})],1)],1),s("div",{staticClass:"course-info"},[s("div",{staticClass:"course-title"},[e._v(" "+e._s(e.data.title)+" ")]),"column"===e.type?s("div",{staticClass:"course-price"},[s("span",{staticClass:"course-price-preferential"},[e._v(e._s(e.dealPrise))]),s("span",{staticClass:"course-price-official"},[e._v(e._s(e.dealOfficialPrise))])]):e._e(),s("Row",{staticClass:"course-content"},[s("Col",{staticClass:"course-column-left",attrs:{span:"12"}},["column"===e.type?s("Cell",{attrs:{"value-class":"van-ellipsis course-users",center:"",border:!1,value:e.data.teacherName||e.$t("lecturer.NoLecturer")},scopedSlots:e._u([{key:"icon",fn:function(){return[s("VanImage",{staticClass:"course-avatar",attrs:{round:"",fit:"cover",src:e.data.teacherAvatar||e.defaultAvatar}})]},proxy:!0}],null,!1,3466417567)}):s("div",{staticClass:"course-price"},[s("span",{staticClass:"course-price-preferential"},[e._v(e._s(e.dealPrise))]),s("span",{staticClass:"course-price-official"},[e._v(e._s(e.dealOfficialPrise))])])],1),s("Col",{staticClass:"course-column-right",attrs:{span:"12"}},[s("Rate",{staticClass:"course-star",attrs:{size:10,color:"#FFBE51","void-icon":"star","void-color":"#eee",readonly:""},model:{value:e.getStar,callback:function(t){e.getStar=t},expression:"getStar"}})],1)],1),"column"===e.type?s("Row",{staticClass:"course-content"},[s("Col",{staticClass:"course-column-left",attrs:{span:"24"}},[s("div",{staticClass:"course-icons"},[s("SvgIcon",{attrs:{size:14,"real-class":"course-icons-see","icon-class":"icon-e-view",color:"##B1B5C6"}}),s("span",{staticClass:"course-count"},[e._v(e._s(e.data.playCount))]),s("SvgIcon",{attrs:{size:12,"real-class":"course-icons-like","icon-class":"icon-zan2",color:"##B1B5C6"}}),s("span",{staticClass:"course-count"},[e._v(e._s(e.data.likeCount))])],1)])],1):s("Row",{staticClass:"course-content"},[s("Col",{staticClass:"course-column-left",attrs:{span:"12"}},[s("Cell",{attrs:{"value-class":"van-ellipsis course-users",center:"",border:!1,value:e.data.teacherName||e.$t("lecturer.NoLecturer")},scopedSlots:e._u([{key:"icon",fn:function(){return[s("VanImage",{staticClass:"course-avatar",attrs:{round:"",fit:"cover",src:e.data.teacherAvatar||e.defaultAvatar}})]},proxy:!0}])})],1),s("Col",{staticClass:"course-column-right",attrs:{span:"12"}},[s("div",{staticClass:"course-icons"},[s("SvgIcon",{attrs:{size:14,"real-class":"course-icons-see","icon-class":"icon-e-view",color:"##B1B5C6"}}),s("span",{staticClass:"course-count"},[e._v(e._s(e.data.playCount))]),s("SvgIcon",{attrs:{size:12,"real-class":"course-icons-like","icon-class":"icon-zan2",color:"##B1B5C6"}}),s("span",{staticClass:"course-count"},[e._v(e._s(e.data.likeCount))])],1)])],1)],1)])}),[],!1,null,"21b94652",null).exports,le=s(18446),ce=s.n(le),de=s(50361),ue=s.n(de),pe={name:"VisitorCourse",components:{ModuleTitle:H,List:Y.Z,Grid:O.Z,GridItem:B.Z,VisitorCourseCard:ne,EmptyBox:W.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0},isOld:{type:Boolean,default:!0}},data:function(){return{list:[],type:"column",mockData:{title:"示例课程名称标题",playCount:"66",awardScore:10,showScore:"true",cover:"https://oss.coolcollege.cn/1794908640189222912.png",teacherId:0,teacherName:"测试讲师",teacherAvator:"",starLevel:0,likeCount:"99",scope:2,original:!0,courseSource:"enterprise",courseType:"course",bizType:0,free:!0,officialPrice:22,preferentialPrice:11,officialPriceStr:"22.00",preferentialPriceStr:"11.00"},pageIdConfig:{page_number:1,page_size:this.params.limit||3,exclude_course_type:["micro_course","live","image_text"],ids:[]},showMore:!0}},computed:{themeColor(){return this.$store.state.themeColor},getTitle(){return this.params.title},getType(){return"l"===this.params.componentSize?"column":"row"},marketOpen(){return"true"===this.$store.state.setting.marketOpen}},watch:{models(e,t){ce()(e.courseList,t.courseList)||this.getCourseFromPath()},params(e,t){e.limit!==t.limit&&this.getCourseFromPath()}},mounted(){this.getCourseFromPath()},methods:{getCourseFromPath(){const{courseList:e}=this.models,{mode:t,limit:s}=this.params,a=ue()(this.pageIdConfig);"course"===t?e.length>0?(a.ids=Array.from(e,(e=>e.id)).slice(0,s),this.getCourseListByIdsAjax(a)):(this.isRender||(this.list=new Array(s).fill(this.mockData)),this.showMore=!1):this.getCourseFromRealUrl()},async getCourseListByIdsAjax(e){const{limit:t}=this.params;e.page_size=t;const s=(await X.Z.getVisitorCourseListByIds(e)).data.list;s.length>0?(this.list=s,this.showMore=!0):this.isRender?(this.list=[],this.showMore=!1):(this.list=new Array(t).fill(this.mockData),this.showMore=!1)},dealTypes:e=>({study_project:"study_project",imageText:"image_text",liveCourse:"live"}[e]||"course"),getCourseFromRealUrl(){const{mode:e,classify:t,type:s,limit:a}=this.params,i=ue()(this.pageIdConfig);"classify"===e?(i.classify_id=t.content.id,i.sort_type=t.sort,t.content.id&&""!==t.content.id?this.getCourseListByIdsAjax(i):this.isRender?(this.list=[],this.showMore=!1):(this.list=new Array(a).fill(this.mockData),this.showMore=!1)):(i.course_type=this.dealTypes(s.content),i.sort_type=s.sort,this.getCourseListByIdsAjax(i))},goToDetail(e){this.$toast.clear();const t=(0,P.ju)(e),{id:s,projectId:a,styleType:i}=e,o={course:{id:s,project_id:a,style_type:i},type:t};(0,P.RJ)(o)},toMore(e){this.isRender&&"more"===e&&this.dealJumpInfo()},dealJumpInfo(){const{courseList:e}=this.models,{mode:t,classify:s,type:a}=this.params;if("course"===t){const t=Array.from(e,(e=>e.id));this.$router.push({name:"visitor-course-list",query:{renderType:"visitor",ids:JSON.stringify(t)}})}else"classify"===t&&s.content.id&&""!==s.content.id?this.$router.push({path:"/visitor-page/course-list",query:{classifyId:s.content.id,sortType:s.sort,renderType:"visitor"}}):this.$router.push({path:"/visitor-page/course-list",query:{courseType:this.dealTypes(a.content),sortType:a.sort,renderType:"visitor"}})}}},me=(0,l.Z)(pe,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:"column"===e.getType?"visitor-course-container visitor-course-container-padding":"visitor-course-container"},[s("ModuleTitle",{attrs:{title:e.getTitle,"show-more":e.showMore},on:{click:e.toMore}}),s("div",{staticClass:"course-content"},[0===e.list.length?s("EmptyBox",{staticClass:"course-empty"}):e._e(),s("List",{attrs:{"immediate-check":!1}},[s("Grid",{class:"column"===e.getType?"grid-column":"",attrs:{border:!1,"column-num":"column"===e.getType?2:1,gutter:"column"===e.getType?10:""}},e._l(e.list,(function(t){return s("GridItem",{key:t.id,class:"column"===e.getType?"course-item-column":"course-item-row",on:{click:function(s){return e.goToDetail(t)}}},[s("VisitorCourseCard",{attrs:{data:t,type:e.getType}})],1)})),1)],1)],1)],1)}),[],!1,null,"6094e7aa",null).exports,he=s(63874),ge={name:"Link",components:{[Z.Z.name]:Z.Z,EmptyBox:W.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0}},data:()=>({pageNumber:1}),computed:{pageSize(){return this.params.showCount||12},list(){return this.models.linkList||[]},totalPage(){return Math.ceil(this.list.length/this.pageSize)},currentList(){const e=(this.pageNumber-1)*this.pageSize;return this.list.slice(e,e+this.pageSize)}},mounted(){},methods:{onPrevClick(){1!==this.pageNumber&&this.pageNumber--},onNextClick(){this.pageNumber!==this.totalPage&&this.pageNumber++},handleClick(e){e.linkUrl&&(0,he.N8)({url:e.linkUrl},!0)}}},fe=(0,l.Z)(ge,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"link"},[s("div",{staticClass:"link-title"},[s("span",{staticClass:"title van-ellipsis"},[e._v(e._s(e.params.title))]),e.list.length>e.pageSize?s("div",{staticClass:"link-switch"},[s("span",{staticClass:"switch-up",on:{click:e.onPrevClick}},[s("svg-icon",{attrs:{"icon-class":"icon-arrow-l1",color:1===e.pageNumber?"#DBDBDB":"#B9B9BB",size:12}})],1),s("span",{staticClass:"switch-down",on:{click:e.onNextClick}},[s("svg-icon",{attrs:{"icon-class":"icon-arrow-r1",color:e.pageNumber===e.totalPage?"#DBDBDB":"#B9B9BB",size:12}})],1)]):e._e()]),e.list.length?s("div",{staticClass:"link-core"},e._l(e.currentList,(function(t,a){return s("div",{key:a.toString(),staticClass:"link-item",on:{click:function(s){return e.handleClick(t)}}},[s("van-image",{staticClass:"image",attrs:{fit:"cover",src:t.logo,alt:"link"}}),s("div",{staticClass:"link-text van-ellipsis"},[e._v(e._s(t.name))])],1)})),0):e.isRender?e._e():s("EmptyBox",{staticClass:"empty"})],1)}),[],!1,null,"b6e28a46",null).exports,ve={name:"AdvertisingOperation",components:{VanImage:Z.Z},props:{models:{type:Object,default:()=>{}},params:{type:Object,default:()=>{}},isRender:{type:Boolean,default:!0}},computed:{},methods:{linkToPage(){this.isRender&&(0,P.RJ)(this.models)}}},ye=(0,l.Z)(ve,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"advertising-operation",on:{click:e.linkToPage}},[s("VanImage",{staticClass:"image",attrs:{fit:"fill",src:e.models.url,alt:"advertising"}})],1)}),[],!1,null,"52e803f1",null).exports,_e=(s(31960),s(10993)),Ce=s(32900),ke=s(27632),be={name:"Footer",components:{[Z.Z.name]:Z.Z},data:()=>({logo:"https://oss.coolcollege.cn/1794889942485307392.png"}),computed:{feature(){const{visitorCommon:e}=this.$store.state.visitor,t=e.find((e=>"VisitorPageFooter"===e.component_title));return t?t.feature:null}},mounted(){this.init()},methods:{linkTo(e){(0,he.N8)({url:e},!0)},init(){Ce.Z.getEnterpriseLogoRequeset({enterprise_id:this.$route.query.enterpriseId,domain:(0,D.kE)()||""}).then((e=>{this.logo=e.data.data.logo}))},previewImage(e){"dingTalk"===ke.Z.env?ke.Z.previewImage({urls:[e]}):(0,_e.Z)({images:[e],showIndex:!1})}}},we={VisitorSearchMobile:x,VisitorBannerMobile:A,VisitorGuideMobile:z,VisitorLecturerMobile:J,VisitorCourseMobile:me,VisitorAdvertisingMobile:ye,VisitorLinkMobile:fe,VisitorFooterMobile:(0,l.Z)(be,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.feature?s("div",{staticClass:"footer",class:e.feature.params.bgColor},[s("div",{staticClass:"footer-line-1"},[s("van-image",{staticClass:"image",attrs:{fit:"scale-down",src:e.logo,alt:"logo"}}),s("span",{staticClass:"title"},[e._v(e._s(e.feature.params.title))])],1),s("div",{staticClass:"footer-line-2"},[s("div",{staticClass:"text-1"},[e._v(e._s(e.feature.params.firstText))]),s("div",{staticClass:"text-2"},[e._v(e._s(e.feature.params.secondText)+" ")]),s("div",{staticClass:"text-3"},[e._v(e._s(e.feature.params.thirdText))])]),s("div",{staticClass:"footer-line-3"},e._l(e.feature.models.picList,(function(t,a){return s("div",{key:a,staticClass:"pic-item",on:{click:function(){return e.previewImage(t.url)}}},[s("van-image",{staticClass:"image",attrs:{fit:"cover",src:t.url,alt:"qrcode"}}),s("div",{staticClass:"pic-text van-ellipsis"},[e._v(e._s(t.content))])],1)})),0),s("div",{staticClass:"footer-line-4"},[e.feature.params.recodeInfo?s("div",[e._v(e._s(e.feature.params.recodeInfo)+" ")]):e._e(),e.feature.params.recodeNum?s("div",{staticClass:"recordNum",on:{click:function(){return e.linkTo(e.feature.params.jumpUrl)}}},[e._v(" "+e._s(e.feature.params.recodeNum))]):e._e(),e.feature.params.recodeNum2?s("div",{on:{click:function(){return e.linkTo(e.feature.params.jumpUrl2)}}},[e._v(e._s(e.feature.params.recodeNum2))]):e._e()])]):e._e()}),[],!1,null,"0ee96e22",null).exports},Ie=(0,a.Z)((0,a.Z)((0,a.Z)({},b),w.default),we)}}]);