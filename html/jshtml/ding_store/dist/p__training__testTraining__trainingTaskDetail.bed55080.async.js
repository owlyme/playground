(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[5769],{4408:function(J,W,e){"use strict";var b=e(12924),t=e.n(b),A=e(28216),F=e(17780),K=e(38642),g=v=>({userInfo:v.user}),u=v=>{var d=v.title;return(0,F.xX)()&&setTimeout(()=>{document.title=d},0),(0,b.useEffect)(()=>{if(d&&document.title!==d&&setTimeout(()=>{document.title=d},0),(0,K.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var w=document.querySelector(".zoom-report");w&&(w.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[d]),t().createElement(t().Fragment,null)};u.defautProps={title:""},W.Z=(0,A.$j)(g)(u)},1164:function(J,W,e){"use strict";var b=e(12924),t=e.n(b),A=e(76651),F=e(38642),K=e(91302),g=u=>{var v=navigator.userAgent.toLocaleLowerCase(),d=localStorage.getItem("enterpriseId"),w=(0,F.lz)(d,u.projectType),x=localStorage.getItem("dingPersonnel"),y=K.bl.includes(x),k=u.target;function M(N){if(k==="self"&&(N.preventDefault(),A.m8.push(u.to)),y){if(u.projectType==="student"){window.location.href="".concat(w,"/").concat(u.to);return}A.m8.push(u.to);return}if(dd.version){N.preventDefault();var C="";u.to.includes("?")?C="".concat(w).concat(u.to,"&ddtab=true"):C="".concat(w).concat(u.to,"?ddtab=true"),dd.biz.util.openLink({url:C})}else v.indexOf("lark")!==-1&&(window.location.href="".concat(w).concat(u.to))}return t().createElement("a",{rel:"noreferrer",href:"".concat(u.projectType==="student"?"".concat(w).concat(u.to):"#".concat(u.to)),className:"".concat(u.wrapCls," cl-pointer"),target:v.indexOf("lark")!==-1||y?"_self":u.target||"_blank",onClick:M},u.children)};g.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},g.targetTo=u=>{var v=u.path,d=u.from,w=u.isExternalLink,x=w===void 0?!1:w,y=u.isAsync,k=y===void 0?!1:y,M=u.openName,N=M===void 0?"_blank":M,C=u.projectType,I=C===void 0?"manage":C,G=u.ddTab,H=G===void 0?!0:G,R,Q=localStorage.getItem("dingPersonnel"),te=K.bl.includes(Q),q=navigator.userAgent.toLocaleLowerCase(),$=localStorage.getItem("enterpriseId"),n=(0,F.lz)($,I),a=localStorage.getItem("appType"),l=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var f="";if(R=x?"":n,te&&!x){if(I==="student"){window.location.href="".concat(n).concat(v);return}A.m8.push(v);return}v.includes("?")?f="".concat(R).concat(v,"&ddtab=").concat(H):f="".concat(R).concat(v,"?ddtab=").concat(H),dd.biz.util.openLink({url:f})}else if(q.indexOf("lark")!==-1)R=x?"":n,window.location.href="".concat(R).concat(v);else if(a==="wx_app"&&l&&x&&d==="imgText")R=x?"":I==="student"?"".concat(n):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(R).concat(v)});else if(R=x?"":I==="student"?"".concat(n):"#",k){var _=window.open("","_blank");setTimeout(()=>{_.location="".concat(R).concat(v)},100)}else window.open("".concat(R).concat(v),N)},W.Z=g},85725:function(J,W,e){"use strict";e.d(W,{Zv:function(){return A},t2:function(){return F},ew:function(){return K}});var b=e(37055),t=e(10237);function A(u,v){var d=b.ZP.PlatformCourse.learningUrl(u);return t.WY.get({url:d,params:v})}function F(u){var v=u.planId,d=b.ZP.EnterpriseCourse.playCountStatistics();t.qg.post({url:d,data:{courseId:v}})}var K=u=>{var v=b.ZP.Common.addDownloadLog(),d={param:u};return t.WY.get({url:v,params:d})},g=u=>{var v=CONFIG.visitors.shouldGoToCourseDetails(),d={setting_type:u};return request.get({url:v,params:d})}},80810:function(J,W,e){"use strict";var b=e(66456),t=e(55313),A=e(34669),F=e(82833),K=e(34792),g=e(48086),u=e(88986),v=e(12924),d=e.n(v),w=e(91768),x=e(76651),y=e(57068),k=e(28216),M=e(84874),N=e(37055),C=e(6793),I=e(70517),G=e(10237),H=e(1164),R=e(85725);class Q extends d().Component{constructor($){super($);this.columns=[{title:this.props.t("questionn.improvePlan"),dataIndex:"resource_name",key:"resource_name",className:"taskTitle",render:(n,a)=>{var l=this.props.subPrefixCls,f=a.type,_=a.resource,O=(0,u.Z)({},N.e1),P=O.crs,j=(0,I.ZG)(a.source),D="".concat(l,"__table__columncontent ").concat(l,"__table__columncontent-absolute");f!=="crs"?_.content_type&&_.content_type.indexOf("audio")>-1?P=O.mp3:_.type==="article"?P=O.h5:P=O[_.type]:j&&(P="icon-icon_study");var z=d().createElement(M.Z,{iconClass:P,size:"16px"}),Z=a.type==="ex"?a.examName:n;return d().createElement(v.Fragment,null,d().createElement("span",{className:D},z," ",Z," ",this.renderDuration({record:a})))}},{title:this.props.t("component.learningProgress"),dataIndex:"study_progress",key:"study_progress",width:200,render:(n,a)=>this.renderProgress({record:a})},{title:this.props.t("common.operate"),width:this.props.lng==="en_us"?210:160,dataIndex:"type",key:"type",render:(n,a,l)=>this.renderAction({str:n,record:a,index:l})}],this.checkBeforeEnter=()=>{var n=this.props,a=n.t,l=n.overdue;return new Promise(f=>{l?g.default.warning(a("study.beginStudyOverdue")):f()})},this.getIsSee=()=>{var n=this.props.infos;this.getShouldViewReport(n.evaluation_id).then(a=>{a.data.look==="true"?this.setState({isLook:!0}):this.setState({isLook:!1})})},this.getShouldViewReport=n=>{var a=N.ZP.PostTalentEvaluation.shouldViewReport(n);return G.WY.get({url:a})},this.handleGoToVideo=n=>{var a=n.record,l=a.resource;this.checkBeforeEnter().then(()=>{parseInt(l.status,10)!==3?g.default.warning(this.props.t("common.transcoding")):this.targetToWatch({path:"/course/watch",record:a,watchType:"video",projectType:"student"})})},this.targetToWatch=n=>{var a=n.path,l=n.record,f=n.watchType,_=y.parse(x.m8.location.search),O=_.id,P=_.fromPage,j=P===void 0?"myTestTask":P,D=_.type,z=this.props,Z=z.from,Y=z.hostParams,ee=l.resource,re=l.resource_id,se=l.video_id,ne=l.storage_type,ae={watchType:f,planId:O,courseId:ee.course_id,resourceId:re,fromPage:Z||j,source:"enterprise",courseName:"",exitAiUpdate:!1,type:D,videoId:se,storage_type:ne};Z&&Object.assign(ae,Y),x.m8.push({pathname:a,search:y.stringify(ae)})},this.handleGoToDoc=n=>{var a=n.record,l=a.resource;this.checkBeforeEnter().then(()=>{parseInt(l.status,10)!==3?g.default.warning(this.props.t("common.transcoding")):this.targetToWatch({path:"/course/watch",record:a,watchType:"doc",projectType:"student"})})},this.handleGoToH5=n=>{var a=n.record,l=a.resource;this.checkBeforeEnter().then(()=>{parseInt(l.status,10)!==3?g.default.warning(this.props.t("common.transcoding")):this.targetToWatch({path:"/course/watch",record:a,watchType:"h5",projectType:"student"})})},this.handleGoToCommon=n=>{var a=n.record,l=n.type,f=a.resource;this.checkBeforeEnter().then(()=>{parseInt(f.status,10)!==3?g.default.warning(this.props.t("common.transcoding")):this.targetToWatch({path:"/course/watch",record:a,watchType:l,projectType:"student"})})},this.renderDuration=n=>{var a=n.record,l=a.resource,f=a.type==="crs"?"crs":l.type,_="";return l&&l.duration!=="0"&&(l.status===3&&(f==="mp4"||f==="mp3")||f==="crs"&&!(0,I.ZG)(a.source))&&(_=(0,C.xj)(l.duration)),_},this.renderProgress=n=>{var a=n.record,l=a.study_progress,f=d().createElement(F.Z,{percent:l,size:"small"});return f},this.gotoDDICourse=n=>{var a=n.record,l=y.parse(x.m8.location.search),f=l.id,_=a.course_id;this.checkBeforeEnter().then(()=>{(0,R.Zv)(_,{is_preview:"false",is_person_purchase:"false",plan_id:f}).then(O=>{H.Z.targetTo({path:O.data.learning_url,isExternalLink:!0})})})},this.renderAction=n=>{var a=n.record,l=a.study_progress,f=a.resource,_=a.content_type,O="",P=a.type==="crs"?"crs":f.type,j=this.props,D=j.t,z=j.overdue,Z=z?"cl-primary cl-disabled":"cl-primary";return(P==="mp3"||P==="mp4")&&(O=d().createElement("span",{className:Z,onClick:()=>this.handleGoToVideo({record:a})},"".concat(D(l===0?"study.startLearning":"study.continueLearning")))),P&&N.Yq.indexOf(P.toLowerCase())>-1&&(O=d().createElement("span",{className:Z,onClick:()=>this.handleGoToDoc({record:a})},"".concat(D(l===0?"study.startLearning":"study.continueLearning")))),(P==="h5"||P==="article")&&(O=d().createElement("span",{className:Z,onClick:()=>this.handleGoToH5({record:a})},"".concat(D(l===0?"study.startLearning":"study.continueLearning")))),(_==="html"||P==="html")&&(O=d().createElement("span",{className:Z,onClick:()=>this.handleGoToCommon({record:a,type:"html"})},"".concat(D(l===0?"study.startLearning":"study.continueLearning")))),(_==="picture"||N.WB.includes(P))&&(O=d().createElement("span",{className:Z,onClick:()=>this.handleGoToCommon({record:a,type:"picture"})},"".concat(D(l===0?"study.startLearning":"study.continueLearning")))),(_==="scorm"||P==="scorm")&&(O=d().createElement("span",{className:Z,onClick:()=>this.handleGoToCommon({record:a,type:"scorm"})},"".concat(D(l===0?"study.startLearning":"study.continueLearning")))),P==="crs"&&(0,I.ZG)(a.source)&&(O=d().createElement("span",{className:Z,onClick:()=>this.gotoDDICourse({record:a})},"".concat(D(l===0?"study.startLearning":"study.continueLearning")))),O},this.renderTitle=()=>{var n=this.props,a=n.subPrefixCls,l=n.title,f="".concat(a,"__title");return d().createElement("h1",{className:f},l)},this.renderSubTitle=()=>{var n=this.props,a=n.subPrefixCls,l=n.subTitle;if(!l)return null;var f="".concat(a,"__subtitle");return d().createElement("h6",{className:f},l)},this.dealCrsCourseInfo=n=>(n.forEach(a=>{(0,I.ZG)(a.source)&&(a.newResources=a.resources,a.resources=null)}),n),this.renderTable=()=>{var n=this.props,a=n.subPrefixCls,l=n.list,f=n.t,_=this.state.isLook,O=this.props.infos,P=O.evaluation_tool_type,j="".concat(a,"__table");return d().createElement("div",{className:j},d().createElement(t.Z,{pagination:!1,columns:this.columns,rowKey:D=>D.resource_id,expandable:{childrenColumnName:"resources",defaultExpandAllRows:!0},dataSource:_?this.dealCrsCourseInfo(l):[],summary:()=>!_&&P==="tool"?d().createElement("span",{className:"view-report-tips-span"},f("questionn.viewReportTips")):null}))},this.state={isLook:!0}}componentDidMount(){var $=this.props.versionType;$==="platform"&&this.getIsSee()}render(){var $=this.props.subPrefixCls;return d().createElement("section",{className:$},this.renderTitle(),this.renderSubTitle(),this.renderTable())}}Q.defaultProps={subPrefixCls:"ups-taskTable"};var te=q=>{var $=q.user;return{lng:$.lng,userId:$.id,corpId:$.corpId,account:$.account,versionType:$.versionType}};W.Z=(0,k.$j)(te)((0,w.Z)()(Q))},16614:function(J,W,e){"use strict";e.r(W),e.d(W,{default:function(){return pe}});var b=e(12924),t=e.n(b),A=e(91768),F=e(4408),K=e(20228),g=e(11382),u=e(34669),v=e(82833),d=e(71153),w=e(60331),x=e(34792),y=e(48086),k=e(57663),M=e(71577),N=e(88986),C=e(76651),I=e(57068),G=e(28216),H=e(80810),R=e(14781),Q=e(53431),te=e(66456),q=e(55313),$=e(22385),n=e(31097),a=e(47673),l=e(4107),f=e(43358),_=e(34041),O=e(78138),P=e.n(O),j=e(41253),D=e(55839),z=e(37055),Z=e(10237),Y=e(38642),ee=_.Z.Option,re=l.Z.Search;class se extends t().Component{constructor(s){super(s);this.jumpEvaluation=r=>{var i=this.state.infos,c=i.evaluation_id;this.checkBeforeEnter({infos:i}).then(()=>{i.evaluation_tool_type==="tool"?(0,Y.eJ)({url:"/training/questionn/evaluation/response?".concat(I.stringify({evaluationId:c,type:"open",id:c,testId:c}))}):(0,Y.eJ)({url:"/training/questionn/evaluation/model/response?id=".concat(c,"&studentId=").concat(r.user_id,"&type=").concat(r.relation)})})},this.openEvaluationReport=(r,i)=>{var c=this.state.infos;if(!(c.open_result==="false"&&i==="finished")){var m=c.evaluation_id;this.checkBeforeEnter({infos:c,type:"report"}).then(()=>{c.evaluation_tool_type==="tool"?(0,Y.eJ)({url:"/training/questionn/evaluation/response?".concat(I.stringify({evaluationId:m,type:"report",id:m,testId:m}))}):(0,Y.eJ)({url:"/talentedDevelopment/evaluationMenu/myTestTask/showReport?studentId=".concat(r.user_id,"&planId=").concat(m,"&fromPage=student")})})}},this.checkBeforeEnter=r=>{var i=r.infos,c=r.type,m=c===void 0?"":c,h=i.start_time,o=i.end_time,U=i.term_type,B=this.props.t,p=Date.now(),E=U==="custom"&&p<h,L=U==="custom"&&p>o;return new Promise(T=>{if(m==="report")return T();E?y.default.warning(B("study.beginStudyNotStarted")):L?y.default.warning(B("study.beginStudyOverdue")):T()})},this.getShouldViewReport=r=>{var i=z.ZP.PostTalentEvaluation.shouldViewReport(r);return Z.WY.get({url:i})},this.getStudentListApi=()=>{var r=this.props,i=r.userId,c=r.planId,m=this.state,h=m.keyword,o=m.status,U=m.page_number,B=m.page_size;(0,j.TF)({userId:i,planId:c,keyword:h,status:o,page_number:U,page_size:B}).then(p=>{this.setState({infos:p.data,studentList:p.data.page_info.list,studentTotal:p.data.page_info.total})})},this.handleNumberChange=r=>{this.setState({page_number:r},()=>{this.getStudentListApi()})},this.handleSizeChange=(r,i)=>{this.setState({page_size:i},()=>{this.getStudentListApi()})},this.handleChangSearch=r=>{this.setState({keyword:r},()=>{this.getStudentListApi()})},this.handleCommonTarget=(r,i)=>{switch(r){case"show":this.openEvaluationReport(i,"unfinished");break;case"urge":this.urgeEvaluation(i);break;case"startEvaluation":this.jumpEvaluation(i);break;default:break}},this.urgeEvaluation=r=>{var i=this.props.t,c=I.parse(C.m8.location.search),m=c.id;(0,D.wf)(m,[r.user_id]).then(h=>{h.data.code===0&&y.default.success(i("evaluation.sendSuccess"))})},this.renderHisComments=r=>{var i=this.props.t,c=[],m=[{key:"self",value:r.self},{key:"same_level",value:r.same_level},{key:"subordinate",value:r.subordinate},{key:"superior",value:r.superior}];m.forEach(o=>{o.value==="false"&&c.push(o)});var h="";return c.length===0?!1:(c.forEach(o=>{switch(o.key){case"self":h+="".concat(i("evaluation.self"),"\uFF0C");break;case"same_level":h+="".concat(i("evaluation.sameLevel"),"\uFF0C");break;case"subordinate":h+="".concat(i("evaluation.subordinate"),"\uFF0C");break;case"superior":h+="".concat(i("personnelDevelope.evaluationSuperior"),"\uFF0C");break;default:break}}),"".concat(i("practiceOperation.wait")).concat(h.substring(0,h.lastIndexOf("\uFF0C"))))},this.state={studentList:[],textParam:{unfinished:s.t("common.unFinish"),overdue:s.t("marketing.hasOverdue"),finished:s.t("questionn.completed")},studentTotal:0,page_number:1,page_size:20,keyword:"",status:"",infos:{}}}componentDidMount(){this.getStudentListApi()}render(){var s=this.state,r=s.studentList,i=s.page_number,c=s.page_size,m=s.studentTotal,h=s.status,o=this.props.t,U=(0,N.Z)((0,N.Z)({},z.XE.INITIAL_PAGINATION),{},{total:m,current:i,pageSize:c,onChange:this.handleNumberChange,onShowSizeChange:this.handleSizeChange}),B=[{title:o("evaluationManage.assessee"),dataIndex:"user_name",key:"user_name"},{title:o("evaluationManage.relationship"),dataIndex:"relation",key:"relation",render:p=>{var E="";switch(p){case"self":E=o("personnelDevelope.self");break;case"superior":E=o("personnelDevelope.evaluationSuperior");break;case"subordinate":E=o("evaluation.subordinate");break;case"sameLevel":E=o("evaluation.sameLevel");break;default:break}return E}},{title:o("evaluationManage.taskStatus"),dataIndex:"status",key:"status",render:p=>t().createElement("span",null,this.state.textParam[p])},{title:o("evaluationManage.statusUpdateTime"),dataIndex:"update_time",key:"update_time",render:p=>t().createElement("span",null,P()(p).format("YYYY-MM-DD HH:mm"))},{title:o("evaluationManage.evaluationStatus"),dataIndex:"evaluation_status",key:"evaluation_status",render:p=>o(p==="true"?"tutorial.haveEvaluation":"tutorial.waitEvaluate")},{title:this.props.t("common.operate"),render:(p,E)=>{var L=[],T=this.props.infos;return E.status==="finished"?T.open_result==="true"?L.push({open:!0,name:o("personnelDevelope.assessmentReport"),clickTag:"report"}):L.push({open:!1,name:o("personnelDevelope.assessmentReport")}):E.status==="overdue"?L.push({name:o("marketing.hasOverdue"),disAbled:!0}):E.relation==="superior"?(L.push({name:o("personnelDevelope.check"),clickTag:"show"}),E.other_completed==="false"?L.push({name:o("evaluationManage.urgeEvaluate"),clickTag:"urge"}):E.superior!=="true"&&E.permit==="true"&&L.push({name:o("study.startAssessment"),clickTag:"startEvaluation"})):E.permit==="true"?L.push({name:o("study.startAssessment"),clickTag:"startEvaluation"}):E.permit==="false"&&L.push({name:o("evaluation.waitSuperiors"),hoverTip:this.renderHisComments(E),disAbled:!0}),L.map((S,X)=>S.open===!1?t().createElement("a",{key:X.toString(),className:"disabled-text he-table-spacing"},S.name):S.hoverTip!==void 0?S.hoverTip?t().createElement(n.Z,{title:S.hoverTip},t().createElement("a",{key:X.toString(),className:S.disAbled?"disabled-text":""},S.name)):t().createElement("a",{key:X.toString(),className:S.disAbled?"disabled-text":""},S.name):E.status==="finished"?t().createElement(n.Z,{title:T.open_result==="false"?o("evaluation.noPublishReport"):""},t().createElement("a",{className:"".concat(T.open_result==="false"?"disabled-text he-table-spacing":"he-table-spacing"),onClick:()=>this.openEvaluationReport(E,"finished")},S.name)):t().createElement("a",{key:X.toString(),onClick:()=>{this.handleCommonTarget(S.clickTag,E)},className:S.disAbled?"disabled-text he-table-spacing":"he-table-spacing"},S.name))}}];return t().createElement("div",{className:"evaluation_student"},t().createElement("div",{className:"evaluation_student_header"},t().createElement(_.Z,{value:h,className:"evaluation_student_header_input",onChange:p=>this.setState({status:p},()=>this.getStudentListApi())},t().createElement(ee,{value:""},o("common.all")),t().createElement(ee,{value:"unfinished"},o("common.unFinish")),t().createElement(ee,{value:"overdue"},o("marketing.hasOverdue")),t().createElement(ee,{value:"finished"},o("questionn.completed"))),t().createElement(re,{className:"evaluation_student_header_input",placeholder:o("searchInputPlaceholder.byNameSearch"),onSearch:this.handleChangSearch})),t().createElement(q.Z,{pagination:!1,columns:B,rowKey:p=>p.user_id,dataSource:r}),t().createElement("div",{className:"evaluation_student_footer"},t().createElement(Q.Z,U)))}}var ne=V=>{var s=V.user;return{lng:s.lng,userId:s.id,corpId:s.corpId,account:s.account,versionType:s.versionType}},ae=(0,G.$j)(ne)((0,A.Z)()(se)),oe=e(6793),le=e(65202);class ie extends t().Component{constructor(){super(...arguments);this.state={isLoading:!0,infos:{},improveList:[],overdue:!1,studentList:[],type:"self"},this.initData=()=>{var s=I.parse(C.m8.location.search),r=s.id,i=s.type;this.setState({type:i}),i==="superior"?this.getStudentListAndDetail(r):(0,j.JJ)(r).then(c=>{var m=c.data,h=m.study_resources,o=m.end_time,U=Date.now(),B=o&&U>o,p=h?this.dealData(h):[];this.setState({isLoading:!1,infos:c.data,improveList:p,overdue:B})})},this.getStudentListAndDetail=()=>{var s=I.parse(C.m8.location.search),r=s.id,i=this.props.userInfo.id;(0,j.TF)({userId:i,planId:r}).then(c=>{var m=c.data.end_time,h=Date.now(),o=m&&h>m;this.setState({isLoading:!1,infos:c.data,overdue:o})})},this.dealData=s=>{var r=[];return s.forEach(i=>{r.push((0,N.Z)((0,N.Z)({},i),{},{type:"crs"}))}),r},this.renderActiveBtn=()=>{var s=this.state.infos,r=s.evaluation_process,i=s.open_result,c=s.status,m=s.end_time,h=s.self,o=s.self_completed,U=s.evaluation_tool_type,B=Date.now(),p=this.props.t,E=m&&B>m,L=!!E;if(r===100&&c===1)return i==="true"?t().createElement(M.Z,{disabled:L,type:"primary",onClick:()=>this.handleGoToEvaluation({infos:s,evaluationType:"report"})},p("study.viewReport")):t().createElement(M.Z,{disabled:!0,type:"primary"},p("study.viewReport"));var T={};if(U==="tool")return r<100&&c===2?t().createElement(M.Z,{disabled:!0,type:"primary"},p("evaluation.waitSuperiors")):t().createElement(M.Z,{disabled:L,type:"primary",onClick:()=>this.handleGoToEvaluation({infos:s,evaluationType:"open"})},p("study.startAssessment"));h==="true"?o==="true"?T={name:p("evaluation.waitSuperiors"),isClick:!1,tag:"wait"}:T={name:p("study.startAssessment"),isClick:!0,tag:"start"}:T={name:p("evaluation.waitSuperiors"),isClick:!1,tag:"wait"};var S={disabled:T.tag==="wait"?!0:L,type:"primary"};return T.tag==="start"&&(S.onClick=()=>this.handleGoToEvaluation({infos:s,evaluationType:"open"})),t().createElement(M.Z,S,T.name)},this.getShouldViewReport=s=>{var r=z.ZP.PostTalentEvaluation.shouldViewReport(s);return Z.WY.get({url:r})},this.handleGoToEvaluation=s=>{var r=s.infos,i=s.evaluationType,c=r.evaluation_id,m=I.parse(C.m8.location.search),h=m.type,o=this.props.userInfo;this.checkBeforeEnter({infos:r,evaluationType:i}).then(()=>{r.evaluation_tool_type==="tool"?(0,Y.eJ)({url:"/training/questionn/evaluation/response?".concat(I.stringify({evaluationId:c,type:i,id:c,testId:c}))}):i==="report"?(0,Y.eJ)({url:"/talentedDevelopment/evaluationMenu/myTestTask/showReport?studentId=".concat(o.id,"&planId=").concat(c,"&fromPage=student")}):(0,Y.eJ)({url:"/training/questionn/evaluation/model/response?id=".concat(c,"&type=").concat(h)})})},this.checkBeforeEnter=s=>{var r=s.infos,i=s.type,c=i===void 0?"":i,m=r.start_time,h=r.end_time,o=r.term_type,U=r.evaluation_tool_type,B=this.props,p=B.t,E=B.versionType,L=Date.now(),T=o==="custom"&&L<m,S=o==="custom"&&L>h;return new Promise(X=>{T?y.default.warning(p("study.beginStudyNotStarted")):S?y.default.warning(p("study.beginStudyOverdue")):E==="platform"&&c==="report"&&U==="tool"?this.getShouldViewReport(r.evaluation_id).then(ve=>{ve.data.look==="true"?X():y.default.warning(p("questionn.viewReportTips"))}):X()})},this.renderTitle=()=>{var s=this.state.infos,r=s.title,i=s.term_type,c=s.start_time,m=s.end_time,h=s.create_user_name,o=s.finish_promote,U=s.status,B=s.qualified_status,p=s.evaluation_process,E=this.state.type,L=(0,le.p)(),T=this.props.t;return t().createElement("div",{className:"header-elective-task"},t().createElement("div",{className:"header-taskView"},t().createElement("div",{className:"header-taskView-header"},t().createElement("span",{className:"title"},r),(o==="false"&&U===1||o==="true"&&B==="true")&&t().createElement(w.Z,{color:"green"},T("study.employeePass"))),t().createElement("div",{className:"header-taskView-summary"},t().createElement("span",null,T("exam.validityPeriod"),"\uFF1A"),i==="custom"?"".concat((0,oe.p6)(c)," ~ ").concat((0,oe.p6)(m)):T("evaluationManage.permanent"),t().createElement("span",{className:"creator-left-padding"},T("common.creator"),"\uFF1A"),h),E==="superior"?null:t().createElement("div",{className:"header-taskView-summary"},t().createElement("span",null,T("common.passingCriteria"),"\uFF1A"),T(o==="false"?"learning.completeJobEvaluation":"evaluationManage.checkCaseStudy")),E==="superior"?null:t().createElement("div",{className:"header-taskView-summary",style:{marginTop:10}},this.renderActiveBtn())),t().createElement("div",{className:"header-taskView-progress",style:{flexDirection:"column",justifyContent:"center",height:158}},p!==null&&t().createElement(v.Z,{percent:p,type:"circle",width:67,strokeColor:L,format:S=>t().createElement("span",{className:"circle-blue-value",style:{color:L}},S,"% ",t().createElement("br",null)," ",t().createElement("span",{className:"circle-blue-label"},T("authentication.totalProgress")))})))}}componentDidMount(){this.initData()}render(){var s=this.props.prefixCls,r=this.state,i=r.isLoading,c=r.improveList,m=r.overdue,h=r.infos,o=r.type,U=r.studentList,B=I.parse(C.m8.location.search),p=B.id;return i?t().createElement("div",{className:"".concat(s,"__loading")},t().createElement(g.Z,{size:"large"})):t().createElement("div",{className:s},this.renderTitle(),o==="superior"?t().createElement("div",{className:"".concat(s,"__content")},t().createElement("div",{className:"assessment-table-box"},t().createElement(ae,{planId:p,list:U,overdue:m,infos:h,type:o}))):t().createElement("div",{className:"".concat(s,"__content")},t().createElement("div",{className:"assessment-table-box"},t().createElement(H.Z,{list:c,overdue:m,infos:h}))))}}ie.defaultProps={prefixCls:"assessment-task-view"};var ue=V=>({userInfo:V.user,themeColor:V.advancedSetting.themeColor,versionType:V.user.versionType}),ce=(0,G.$j)(ue)((0,A.Z)()(ie));function de(V){var s=V.t,r=(window.location.hash||"").includes("/training/evaluationManage/testTaskDetail")?s("marketing.taskDetail"):s("documentTitle.trainingTaskLearning2");return t().createElement(t().Fragment,null,t().createElement(F.Z,{title:r}),t().createElement(ce,V))}var pe=(0,A.Z)()(de)},41253:function(J,W,e){"use strict";e.d(W,{JJ:function(){return A},TF:function(){return K}});var b=e(37055),t=e(10237);function A(g){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=b.ZP.evaluateManage.queryMyEvaluationTask({id:g});return t.WY.get({url:v,params:u})}function F(g){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=CONFIG.PostTalentEvaluation.improveNowPlan(g);return request.get({url:v,params:u})}function K(g){var u=g.userId,v=g.planId,d=g.keyword,w=g.status,x=g.page_number,y=g.page_size,k=b.ZP.PostTalentEvaluation.getStudentList(u,v);return t.WY.get({url:k,params:{keyword:d,status:w,page_size:y,page_number:x}})}},65202:function(J,W,e){"use strict";e.d(W,{p:function(){return b}});function b(){return localStorage.getItem("themeColor")||"#516AE6"}},70517:function(J,W,e){"use strict";e.d(W,{ZG:function(){return u},v8:function(){return v},Yv:function(){return d},$v:function(){return w},yW:function(){return x}});var b=e(57361),t=e(9754),A=e.n(t),F=e(91302),K=e(10237),g=e(37055),u=y=>{var k=!1;return F.ch.forEach(M=>{(y||"").indexOf(M)!==-1&&(k=!0)}),k},v=function(){var y=(0,b.Z)(A().mark(function k(){var M;return A().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return M=g.ZP.LibraryList.checkMemberUserBinding(),C.abrupt("return",K.WY.get({url:M,params:{source_type:"lai_hua"}}));case 2:case"end":return C.stop()}},k)}));return function(){return y.apply(this,arguments)}}(),d=function(){var y=(0,b.Z)(A().mark(function k(M){var N,C,I,G;return A().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return N=g.ZP.LibraryList.thirdEditorUrl(),R.next=3,K.WY.get({url:N,params:{source_type:"lai_hua",route_type:M}});case 3:C=R.sent,I=C.data,G=C.success,G==="true"&&window.open(I.url,"_blank");case 7:case"end":return R.stop()}},k)}));return function(M){return y.apply(this,arguments)}}(),w=()=>{localStorage.setItem("openedMemberModal","true")},x=y=>{var k=g.ZP.LibraryList.addTrialMemberBinding();return K.WY.get({url:k,params:{source_type:"lai_hua",route_type:y}})}}}]);
