(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[454],{53009:function(oe,U,u){"use strict";u.d(U,{TD:function(){return x},$S:function(){return F},aI:function(){return H},Bg:function(){return I},tT:function(){return B},XN:function(){return R},YK:function(){return te},$x:function(){return re}});var q=u(81211),_=u(88986),$=u(78138),k=u.n($),P=u(78001),A=u(76651),J=u(38642),j=u(6793),C=u(37055),m=u(75205);function M(s){return s.map(l=>({name:l.name,id:l.id,proportion:0,disabled:l.totalCount===0||l.total_count===0}))}function O(s,l){return l.map((g,c)=>(0,_.Z)((0,_.Z)({},s[c]),{},{disabled:g.total_count===0}))}var Q=s=>{var l=0,g=s.checkedValue,c=s.fillBlank,d=s.shortAnswer;return g===2?c.checked&&!d.checked?l=3:!c.checked&&d.checked?l=4:l=2:l=1,l},D=s=>{for(var l in s)s[(0,J.FI)(l)]=s[l];return s},x=(s,l,g,c,d,i)=>{var e=s.map((t,h)=>{var b=t.list.map((o,n)=>{var r,a=o.data,p={};switch(o.componentName){case"CoursewareSelector":p={courseId:o.id,courseSort:n,courseType:3,flag:1,mappingId:o.mappingId?o.mappingId:""};break;case"CourseSelector":p={courseId:o.id,courseSort:n,courseType:1,flag:1,mappingId:o.mappingId?o.mappingId:""};break;case"AddExam":p={courseSort:n,title:a.title,type:"ex",cheatFlag:a.cheatFlag.isChecked?1:0,faceRecognition:a.cheatFlag.faceRecognition,examDuration:a.examDuration,summary:a.summary,flag:2,mappingId:o.mappingId?o.mappingId:"",courseId:o.id,markType:Q(a.markType),paperId:a.questionsMode===1?a.fixedQuestion.id:"",paperTitle:a.questionsMode===1?a.fixedQuestion.name:"",passLine:a.passLine,questionBankList:a.questionsMode===1?"":a.randomQuestion.bankQuesitonVoList.map(S=>S.id).join(","),questionMode:a.questionsMode,showKnowledge:a.knowledgePoints===1?"show":"hide",repeatExam:a.reExam.isChecked,multipleCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleCount,multipleUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleScore,fillBlankCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.fillBlankCount,fillBlankUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.fillBlankScore,fillBlankType:a.questionsMode===1?1:a.randomQuestion.bankQuesitonInfo.fillBlankType,shortAnswerCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.shortAnswerCount,shortAnswerUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.shortAnswerScore,shortAnswerType:a.questionsMode===1?1:a.randomQuestion.bankQuesitonInfo.shortAnswerType,singleCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.singleCount,singleUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.singleScore,trueOrFalseCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.trueOrFalseCount,trueOrFalseUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multipleMissedScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleMissedScore,totalScore:a.questionsMode===1?a.fixedQuestion.tableList.totalScore:"",answerParsing:a.reExam.isChecked?a.reExam.allowed.end:a.reExam.notAllowed.end,passingScore:a.questionsMode===1?Number(a.fixedQuestion.tableList.totalScore*a.passLine/100).toFixed(1):60,cutScreenCount:a.cheatFlag.switchNum!==null?a.cheatFlag.switchNum:-1,reExamRule:a.reExam.allowed.reRule,reExamNumber:a.reExam.allowed.reRule===2?a.reExam.allowed.reNum:0,scoreRule:a.reExam.allowed.record,viewRule:a.reExam.allowed.viewRule,proportional:a.questionsMode===2&&a.isOpenDrawQuestions?a.proportional:[],anonymousMarking:"".concat(a.markType.anonymousMarking),show_result:a.reExam.show_result};break;case"AddNewExam":var f=o.data,v=f.paperInfo,w=f.exam_times,E=f.cut_screen_times,y=f.random_order,L=f.mark_setting,N=f.result_visible,z=f.face_recognition,X=(0,q.Z)(f,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);p={courseSort:n,flag:15,courseType:15,type:"ex",courseId:o.id,mappingId:o.mappingId?o.mappingId:"",new_exam:(0,_.Z)((0,_.Z)((0,_.Z)({},X),(0,m.jJ)(z)),{},{paper_id:v.id,answer_rule:w.answer_rule,exam_count:w.exam_count||1,cut_screen_rule:E.cut_screen_rule,cut_screen_count:E.cut_screen_count||1,cut_screen_interval:E.cut_screen_interval||0,random_question:y.random_question,random_options:y.random_options,mark_type:L.mark_type,mark_question_type:{fill_blank:L.mark_type===m.lt.MANUAL?L.fill_blank:!1,short_answer:L.mark_type===m.lt.MANUAL?L.short_answer:!1},anonymous_marking:L.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...L.marker_list.map(S=>typeof S=="string"?S:S.id)],result_view_rule:N.result_view_rule,answer_parsing:N.answer_parsing,ranking_list_view_rule:N.ranking_list_view_rule,show_result:N.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};break;case"OfflineTrain":p={courseSort:n,flag:3,id:l&&!d?o.id:"",type:"xx",mappingId:o.mappingId?o.mappingId:"",title:a.title,begin_time:k()(a.dateRange.startTime).valueOf(),end_time:k()(a.dateRange.endTime).valueOf(),attachment:a.attachment.map(S=>S.id),course_duration:a.course_duration||"",lecturer_id:a.teacher.id,is_lecturer_confirm:!!a.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!a.teacher.is_lecturer_subsidy,address:a.address,introduction:a.introduction,is_open_offline_assessment:a.assess.is_open_offline_assessment,is_open_upload:a.other.is_open_upload,is_open_schedule:!1,remind_type:a.remind.remind_type,advance_minute:a.remind.advance_minute?Number(a.remind.advance_minute):0,is_lecturer_remind:a.remind.is_lecturer_remind,is_student_remind:a.remind.is_student_remind,is_lecturer_student_evaluate:a.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:a.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:a.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:a.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:a.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:a.evaluate.student_course_evaluate_content,assessment_total_score:a.assess.assessment_total_score,assessment_pass_score:a.assess.assessment_pass_score};break;case"AddInvestigate":g==="study"?p={courseSort:n,courseType:9,flag:4,id:o.id,questionnaireId:o.questionnaire.id,title:o.name,type:"questionnaire",mappingId:o.mappingId?o.mappingId:""}:p={courseId:o.id,courseType:9,flag:9,courseSort:n,investigate:{id:o.id,title:o.name,questionnaire_id:o.questionnaire.id}};break;case"AddPracticeTest":p={courseType:10,courseSort:n,flag:g==="study"?5:4,type:"sc",id:o.id,title:o.data.title,content:o.data.content||o.data.address,resources:o.data.attachment.map(S=>({resourceId:S.id})),scoreSetting:{scoreSwitch:o.data.mark.isFull?"on":"off",score:o.data.mark.value},workflowJson:o.data.workFlowTemplateId?{}:Z(o.data.supervisor),mappingId:o.mappingId?o.mappingId:"",job_type:o.data.job_type,workFlowTemplateId:o.data.workFlowTemplateId};break;case"AddJobEvaluation":p={courseSort:n,flag:6,title:o.data.title,productId:o.data.evaluationTools.product_id,modelId:o.data.evaluationTools.model_id,id:o.id||"",mappingId:o.mappingId?o.mappingId:""};break;case"Attendance":p={courseSort:n,flag:13,id:l&&!d?o.id:"",type:"attendance",mappingId:o.mappingId?o.mappingId:"",title:a.title,directors:a.directors.map(S=>typeof S=="object"&&(S.id||S.user_id)?S.id||S.user_id:S),name:a.name,qrcode_type:a.qrcode_type||"statics",sign_in_begin_time:a.sign_in_begin_time?k()(a.sign_in_begin_time).valueOf():"",sign_in_end_time:a.sign_in_end_time?k()(a.sign_in_end_time).valueOf():"",sign_out_begin_time:a.sign_out_begin_time?k()(a.sign_out_begin_time).valueOf():"",sign_out_end_time:a.sign_out_end_time?k()(a.sign_out_end_time).valueOf():"",relate_course:a.relate_course,relate_course_list:((r=a.relate_course_list)===null||r===void 0?void 0:r.length)>0?a.relate_course_list:[],remind_directors:a.remind_directors,advance_minute:a.advance_minute||0,qy_we_chat_vo:a.qy_we_chat_vo,address:a.address,longitude:a.longitude,latitude:a.latitude,address_detail:a.address_detail,sign_range:a.sign_range};break;case"AddAssessment":p=(0,_.Z)((0,_.Z)({},D(o.data)),{},{tutorId:i,courseSort:n,courseType:14,flag:14});break;default:break}return c==="unlock_mode"&&a.unlockingTime&&(p.unlockingTime=k()(a.unlockingTime).valueOf()),p.resource_lock=o.resource_lock||!1,p});return{content:t.desc,stageName:t.name,isOrder:t.inOrder,stageSort:h+1,stageId:l?t.stageId:"",startTime:c==="unlock_mode"&&t.studyTime?k()(t.studyTime[0]).valueOf():null,endTime:c==="unlock_mode"&&t.studyTime?k()(t.studyTime[1]).valueOf():null,course:b}});return e},F=s=>{var l=s.map((g,c)=>({content:g.desc,stage_name:g.name,is_order:g.inOrder,stage_sort:c+1,stage_id:g.stageId,resources:g.list.map((d,i)=>{var e=d.data;switch(d.componentName){case"CoursewareSelector":return{course_id:d.id,course_sort:i,course_type:3,flag:1,mappingId:d.mappingId};case"AddMentorCoaching":return{course_id:d.id,tutorials:{id:d.id,title:e.title,content:e.content,model:e.model,tutor_model:e.tutor_model,evaluation_type:e.evaluation_type,user_id:e.user_id||"",user_name:e.user_name||""},course_sort:i,course_type:12,flag:7,mappingId:d.mappingId};case"CourseSelector":return{course_id:d.id,course_sort:i,course_type:1,flag:1,mappingId:d.mappingId};case"AddExam":return{exam:{id:d.id,title:e.title,cheat_flag:e.cheatFlag.isChecked?1:0,exam_duration:e.examDuration,face_recognition:e.cheatFlag.faceRecognition,summary:e.summary,mark_type:Q(e.markType),paper_id:e.questionsMode===1?e.fixedQuestion.id:"",paper_name:e.questionsMode===1?e.fixedQuestion.name:"",pass_line:e.passLine,question_banks:e.questionsMode===1?"":e.randomQuestion.bankQuesitonVoList.map(v=>v.id),question_mode:e.questionsMode,show_knowledge:e.knowledgePoints===1?"show":"hide",repeat_exam:e.reExam.isChecked,multiple_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.shortAnswerType,short_answer_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerScore,single_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleScore,multiple_missed_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleMissedScore,true_or_false_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseScore,total_score:e.questionsMode===1?e.fixedQuestion.tableList.totalScore:"",answer_parsing:e.reExam.isChecked?e.reExam.allowed.end:e.reExam.notAllowed.end,passing_score:e.questionsMode===1?Number(e.fixedQuestion.tableList.totalScore*e.passLine/100).toFixed(1):60,cut_screen_count:e.cheatFlag.switchNum!==null?e.cheatFlag.switchNum:-1,re_exam_rule:e.reExam.allowed.reRule,re_exam_number:e.reExam.allowed.reRule===2?e.reExam.allowed.reNum:0,score_rule:e.reExam.allowed.record,view_rule:e.reExam.allowed.viewRule,proportional:e.questionsMode===2&&e.isOpenDrawQuestions?e.proportional:[],anonymous_marking:"".concat(e.markType.anonymousMarking),show_result:e.reExam.show_result},flag:2,course_sort:i,course_id:d.id,course_type:6,mappingId:d.mappingId};case"AddNewExam":var t=d.data,h=t.paperInfo,b=t.exam_times,o=t.cut_screen_times,n=t.random_order,r=t.mark_setting,a=t.result_visible,p=t.face_recognition,f=(0,q.Z)(t,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_sort:i,flag:15,type:"ex",course_id:d.id,course_type:15,mappingId:d.mappingId?d.mappingId:"",new_exam:(0,_.Z)((0,_.Z)((0,_.Z)({},f),(0,m.jJ)(p)),{},{paper_id:h.id,answer_rule:b.answer_rule,exam_count:b.exam_count||1,cut_screen_rule:o.cut_screen_rule,cut_screen_count:o.cut_screen_count||1,cut_screen_interval:o.cut_screen_interval||0,random_question:n.random_question,random_options:n.random_options,mark_type:r.mark_type,mark_question_type:{fill_blank:r.mark_type===m.lt.MANUAL?r.fill_blank:!1,short_answer:r.mark_type===m.lt.MANUAL?r.short_answer:!1},anonymous_marking:r.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...r.marker_list.map(v=>typeof v=="string"?v:v.id)],result_view_rule:a.result_view_rule,answer_parsing:a.answer_parsing,ranking_list_view_rule:a.ranking_list_view_rule,show_result:a.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddPracticeTest":return{operation:{id:d.id,title:d.data.title,content:d.data.content||d.data.address,type:"sc",resources:d.data.attachment.map(v=>({resourceId:v.id})),score_setting:{scoreSwitch:d.data.mark.isFull?"on":"off",score:d.data.mark.value},workflow_json:Z(d.data.supervisor),sort:i,job_type:d.data.job_type},course_type:10,course_sort:i,flag:5,mappingId:d.mappingId};case"AddInvestigate":return{course_id:d.id,course_type:9,flag:4,course_sort:i,investigate:{id:d.id,title:d.name,questionnaire_id:d.questionnaire.id}};default:return null}})}));return l};function Z(s){var l=[];if(s.type==="multilevel"){var g=s.multilevel;g.forEach(c=>{var d=[];c.forEach(i=>{d.push(i.id)}),l.push(d.join(","))})}else s.type==="or"?(s.or.forEach(c=>{l.push(c.id)}),l=[l.join(",")]):l=[];return{type:s.type,userIds:l}}var H=s=>{function l(i){if(i.questionMode===1){if(i.paperVo.fillBlankCount>0||i.paperVo.shortAnswerCount>0)return!0}else if(i.fillBlankCount>0||i.shortAnswerCount>0)return!0;return!1}function g(i){if(i.questionMode===1){if(i.paperVo.fillBlankCount>0)return!0}else if(i.fillBlankCount>0)return!0;return!1}function c(i){if(i.questionMode===1){if(i.paperVo.shortAnswerCount>0)return!0}else if(i.shortAnswerCount>0)return!0;return!1}var d=s.map((i,e)=>({key:"".concat(new Date().getTime()).concat(e),desc:i.content,name:i.stageName,inOrder:i.isOrder,stageId:i.id,studyTime:i.startTime?[k()(i.startTime),k()(i.endTime)]:["",""],list:i.courseMappingList.map(t=>{var h,b,o=t.planExamVos,n={},r,a;switch(t.flag){case 1:t.contentType==="audio/mp3"||t.contentType==="audio/mpeg"||t.contentType==="audio"?(a="mp3",r="mp3"):(a=t.type,r=t.type==="imageText"?"h5":t.type),n={id:t.courseId,name:t.name,type:t.courseType===1?"course":"courseware",icon:C.e1[r],originalType:a,componentName:t.courseType===1?"CourseSelector":"CoursewareSelector",status:t.courseType===1?"0":t.status,duration:t.duration,data:t,mappingId:t.mappingId};break;case 2:n={id:t.id,name:t.name,type:"ex",icon:C.e1.ex,componentName:"AddExam",duration:o.examDuration*60,data:{title:o.title,examDuration:o.examDuration,summary:o.summary,isOpenDrawQuestions:o.proportionalExamVos&&o.proportionalExamVos.length>0,proportional:o.proportionalExamVos&&(o.proportionalExamVos.length>0?O(o.proportionalExamVos,o.bankQuesitonVoList):o.questionMode===2?M(o.bankQuesitonVoList):[])||[],cheatFlag:{isChecked:!!o.cheatFlag,switchNum:o.cutScreenCount===-1?null:o.cutScreenCount,faceRecognition:o.faceRecognition},reExam:{show_result:o.show_result,isChecked:o.repeatExam,userJoin:o.user_join==="true",notAllowed:{end:o.answerParsing},allowed:{reRule:o.reExamRule,record:o.scoreRule,end:o.answerParsing,reNum:o.reExamRule===2?o.reExamNumber:1,viewRule:o.viewRule}},markType:{checkedValue:o.markType===1?1:2,artificialDisabled:o.markType===1&&!l(o),fillBlank:{checked:(o.markType===2||o.markType===3)&&g(o),disabled:!g(o)},shortAnswer:{checked:(o.markType===2||o.markType===4)&&c(o),disabled:!c(o)},anonymousMarking:o.anonymous_marking==="true"},questionsMode:o.questionMode,knowledgePoints:o.showKnowledge==="show"?1:2,passLine:o.passLine,fixedQuestion:o.questionMode===1?{id:o.paperVo.id,name:o.paperVo.title,tableList:{fillBlankCount:o.paperVo.fillBlankCount,fillBlankScore:o.paperVo.fillBlankScore,multipleCount:o.paperVo.multipleCount,multipleScore:o.paperVo.multipleScore,shortAnswerCount:o.paperVo.shortAnswerCount,shortAnswerScore:o.paperVo.shortAnswerScore,singleCount:o.paperVo.singleCount,singleScore:o.paperVo.singleScore,totalCount:o.paperVo.totalCount,totalScore:o.paperVo.totalScore,trueOrFalseCount:o.paperVo.trueOrFalseCount,trueOrFalseScore:o.paperVo.trueOrFalseScore}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:o.questionMode===2?{bankQuesitonVoList:o.bankQuesitonVoList.map(L=>({id:L.id,name:L.name,data:L})),bankQuesitonInfo:{fillBlankCount:o.fillBlankCount,fillBlankScore:o.fillBlankUnitScore,fillBlankType:+o.fillBlankType||1,multipleCount:o.multipleCount,multipleScore:o.multipleUnitScore,shortAnswerCount:o.shortAnswerCount,shortAnswerScore:o.shortAnswerUnitScore,shortAnswerType:+o.shortAnswerType||1,singleCount:o.singleCount,singleScore:o.singleUnitScore,trueOrFalseCount:o.trueOrFalseCount,trueOrFalseScore:o.trueOrFalseUnitScore,multipleMissedScore:o.multipleMissedScore}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},mappingId:t.mappingId,isExamEdit:t.isExamEdit};break;case 3:var p=t.offline_course_vo;n={id:t.id,name:t.name,type:"xx",componentName:"OfflineTrain",icon:C.e1.xx,data:(0,_.Z)({},ae(p)),mappingId:t.mappingId};break;case 4:case 5:if(t.type==="sc"||t.type==="operation"){n={id:t.id,name:t.title,type:"sc",icon:C.e1.sc,componentName:"AddPracticeTest",data:(0,J.UI)("PRIVACY_HLS_APPROVAL_MANAGE")?V(t):T(t),mappingId:t.mappingId};break}n={id:t.courseId,name:t.title||t.name,type:"investigate",icon:C.e1.questionnaire,componentName:"AddInvestigate",data:t,mappingId:t.mappingId,questionnaire:{id:t.questionnaireId,name:t.name}};break;case 6:n={id:t.evaluation.id,name:t.evaluation.title,productId:t.evaluation.product_id,modelId:t.evaluation.model_id,type:"jobEvaluation",icon:C.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:t.evaluation.title,evaluationTools:{product_id:t.evaluation.product_id,model_id:t.evaluation.model_id}},mappingId:t.mappingId};break;case 7:n={id:t.id,name:t.tutorials.title,type:"tutor",icon:C.e1.tutor,componentName:"AddMentorCoaching",data:(0,_.Z)((0,_.Z)({},t.tutorials),{},{tutor_model:t.tutorials.tutorModel,evaluation_type:t.tutorials.evaluationType,user_id:t.tutorials.userId,user_name:t.tutorials.userName}),mappingId:t.mappingId};break;case 9:n={id:t.courseId,name:t.title,type:"investigate",icon:C.e1.questionnaire,componentName:"AddInvestigate",data:t,questionnaire:{id:t.questionnaireId,name:t.name}};break;case 13:var f=t.course_sign_vo;n={id:t.id,name:t.name,type:"attendance",componentName:"Attendance",icon:C.e1.attendance,data:(0,_.Z)({},ne(f)),mappingId:t.mappingId};break;case 14:n={id:(t==null||(h=t.evaluate)===null||h===void 0?void 0:h.id)||"",name:(t==null||(b=t.evaluate)===null||b===void 0?void 0:b.name)||"",type:"assess",componentName:"AddAssessment",icon:C.e1.assess,data:(0,_.Z)({},Y(t.evaluate)),resource_lock:t.resource_lock};break;case 15:{var v=(0,A.Qm)()._store,w=v.getState(),E=w.user,y=(0,m.AC)({data:t.exam_plan_detail_v1,user:{id:E.id,name:E.name,creator:!0}});n={id:t.exam_plan_detail_v1.id,name:t.exam_plan_detail_v1.title,type:"ex",icon:C.e1.ex,componentName:"AddNewExam",duration:t.exam_plan_detail_v1.exam_duration*60,data:y,mappingId:t.mappingId,isExamEdit:t.isExamEdit}}default:break}return n.data&&(n.data.unlockingTime=t.unlockingTime?k()(t.unlockingTime):""),n.resource_lock=t.resource_lock,n})}));return d};function V(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources";return s.supervisor={lead:"",multilevel:[],or:[],type:"or"},s.mark={isFull:s.scoreSetting.score_switch==="on",value:s.scoreSetting.score_switch==="on"?s.scoreSetting.score:100},s.attachment=s[l],s}function T(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources",g=[],c=[];return s.workflowJson.type==="or"?s.workflowJson.nodeList[0].forEach(d=>{g.push({type:2,id:d.id,name:d.name,show:!0,unionid:d.unionid,user_id:d.sync_user_id,source_type:d.source_type||d.sourceType})}):s.workflowJson.type==="multilevel"&&s.workflowJson.nodeList.forEach(d=>{d.forEach(i=>{i.user_id=i.sync_user_id}),c.push(d)}),s.supervisor={or:g,multilevel:c,lead:"",type:s.workflowJson.type},s.mark={isFull:s.scoreSetting.score_switch==="on",value:s.scoreSetting.score_switch==="on"?s.scoreSetting.score:100},s.attachment=s[l],s}var I=(s,l)=>{var g=s.map((c,d)=>({id:c.id?c.id:"",content:c.desc,stage_name:c.name,is_order:l==="free_mode"?!1:c.inOrder,sort:d+1,progress:c.Standard.progressCheck?c.Standard.progress:"",exam_times:c.Standard.examCheck?c.Standard.examNum:"",practice_times:c.Standard.bankCheck?c.Standard.bankNum:"",operation_times:c.Standard.practiceCheck?c.Standard.practiceNum:"",finish_evaluation:c.Standard.jobEvaluationCheck?"true":"false",is_get_score:c.reward.getScoreChecked?c.reward.getScore:"",certificate_id:c.reward.certificateChecked?c.reward.certificateId:"",resources:c.list.map((i,e)=>{var t=i.data;switch(i.componentName){case"CoursewareSelector":return{course_id:i.id,replaced_old_id:i.replaced_old_id===i.id?"":i.replaced_old_id,sort:e,type:3,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"ClNewUpload":case"CourseSelector":return{course_id:i.id,replaced_old_id:i.replaced_old_id||"",sort:e,type:1,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"LiveClass":return{course_id:i.id,replaced_old_id:i.replaced_old_id||"",sort:e,type:16,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"AddExam":return{type:6,sort:e,course_id:i.id,exam:{title:t.title,cheat_flag:t.cheatFlag.isChecked?1:0,exam_duration:t.examDuration,face_recognition:t.cheatFlag.faceRecognition,summary:t.summary,mark_type:Q(t.markType),paper_id:t.questionsMode===1?t.fixedQuestion.id:"",pass_line:t.passLine,question_banks:t.questionsMode===1?[]:t.randomQuestion.bankQuesitonVoList.map(w=>w.id),question_mode:t.questionsMode,show_knowledge:t.knowledgePoints===1?"show":"hide",repeat_exam:t.reExam.isChecked,multiple_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:t.questionsMode===1?t.fixedQuestion.tableList.totalScore:"",answer_parsing:t.reExam.isChecked?t.reExam.allowed.end:t.reExam.notAllowed.end,passing_score:t.questionsMode===1?Number(t.fixedQuestion.tableList.totalScore*t.passLine/100).toFixed(1):60,cut_screen_count:t.cheatFlag.switchNum!==null?t.cheatFlag.switchNum:-1,re_exam_rule:t.reExam.allowed.reRule,re_exam_number:t.reExam.allowed.reRule===2?t.reExam.allowed.reNum:0,score_rule:t.reExam.allowed.record,view_rule:t.reExam.allowed.viewRule,proportional:t.questionsMode===2&&t.isOpenDrawQuestions?t.proportional:[],anonymous_marking:"".concat(t.markType.anonymousMarking),show_result:t.reExam.show_result},resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"AddNewExam":var h=i.data,b=h.paperInfo,o=h.exam_times,n=h.cut_screen_times,r=h.random_order,a=h.mark_setting,p=h.result_visible,f=h.face_recognition,v=(0,q.Z)(h,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{type:15,sort:e,course_id:i.id,new_exam:(0,_.Z)((0,_.Z)((0,_.Z)({},v),(0,m.jJ)(f)),{},{paper_id:b.id,answer_rule:o.answer_rule,exam_count:o.exam_count||1,cut_screen_rule:n.cut_screen_rule,cut_screen_count:n.cut_screen_count||1,cut_screen_interval:n.cut_screen_interval||0,random_question:r.random_question,random_options:r.random_options,mark_type:a.mark_type,mark_question_type:{fill_blank:a.mark_type===m.lt.MANUAL?a.fill_blank:!1,short_answer:a.mark_type===m.lt.MANUAL?a.short_answer:!1},anonymous_marking:a.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...a.marker_list.map(w=>typeof w=="string"?w:w.id)],result_view_rule:p.result_view_rule,answer_parsing:p.answer_parsing,ranking_list_view_rule:p.ranking_list_view_rule,show_result:p.show_result,reward_rule:null,authority_range:null,supervisor_mark:null}),resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"OfflineTrain":return{sort:e,type:7,course_id:i.id,offline_course:{id:t.id,title:t.title,begin_time:k()(t.dateRange.startTime).valueOf(),end_time:k()(t.dateRange.endTime).valueOf(),attachment:t.attachment.map(w=>w.id),course_duration:t.course_duration||"",lecturer_id:t.teacher.id,is_lecturer_confirm:!!t.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!t.teacher.is_lecturer_subsidy,address:t.address,introduction:t.introduction,is_open_offline_assessment:t.assess.is_open_offline_assessment,is_open_upload:t.other.is_open_upload,is_open_schedule:!1,remind_type:t.remind.remind_type,advance_minute:t.remind.advance_minute?Number(t.remind.advance_minute):0,is_lecturer_remind:t.remind.is_lecturer_remind,is_student_remind:t.remind.is_student_remind,is_director_remind:t.remind.is_director_remind,is_lecturer_student_evaluate:t.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:t.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:t.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:t.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:t.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:t.evaluate.student_course_evaluate_content,assessment_total_score:t.assess.assessment_total_score,assessment_pass_score:t.assess.assessment_pass_score},resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"AddInvestigate":return{sort:e,type:9,course_id:i.id||"",questionnaire_id:i.questionnaire.id,resource_lock:i.resource_lock||!1,title:i.name,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"AddPracticeTest":return{type:10,courseSort:e,sort:e,flag:4,course_id:i.id,title:i.data.title,content:i.data.content||i.data.address,resources:i.data.attachment.map(w=>({resourceId:w.id})),scoreSetting:{scoreSwitch:i.data.mark.isFull?"on":"off",score:i.data.mark.value},workflowJson:Z(i.data.supervisor),job_type:i.data.job_type,resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"AddJobEvaluation":return{sort:e,flag:6,type:11,evaluation:{id:i.id||"",title:i.data.title,product_id:i.data.evaluationTools.product_id,model_id:i.data.evaluationTools.model_id},resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"Attendance":return{sort:e,type:13,course_id:i.id,sign:{id:t.id,type:13,title:t.title,directors:t.directors.map(w=>typeof w=="object"&&(w.id||w.user_id)?w.id||w.user_id:w),name:t.name||"--",qrcode_type:t.qrcode_type,sign_in_begin_time:t.sign_in_begin_time,sign_in_end_time:t.sign_in_end_time,sign_out_begin_time:t.sign_out_begin_time,sign_out_end_time:t.sign_out_end_time,relate_course:t.relate_course,relate_course_list:t.relate_course_list,remind_directors:t.remind_directors,advance_minute:t.advance_minute,qy_we_chat_vo:t.qy_we_chat_vo,address:t.address,longitude:t.longitude,latitude:t.latitude,address_detail:t.address_detail,sign_range:t.sign_range},resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf()};case"AddAssessment":return{sort:e,type:14,course_id:i.id,resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf(),evaluateVo:{id:t.id,name:t.name,requirement:t.requirement,resource_id:t.resource_id,is_lock:t.is_lock,begin_time_unlock:t.begin_time_unlock,end_time_unlock:t.end_time_unlock,is_self_evaluate:t.is_self_evaluate,questionnaire_id:t.questionnaire_id,evaluate_form_title:t.evaluate_form_title,before_start_day:t.before_start_day,before_start_repeat:t.before_start_repeat,before_start_un_remind:t.before_start_un_remind,before_end_day:t.before_end_day,before_end_repeat:t.before_end_repeat,before_end_un_remind:t.before_end_un_remind,after_end_day:t.after_end_day,after_end_repeat:t.after_end_repeat,after_end_un_remind:t.after_end_un_remind,is_passed_standards:t.is_passed_standards,is_passed_option_three:t.is_passed_option_three,pass_standard_conditions:t.pass_standard_conditions,pass_standards_number:t.pass_standards_number,creator_user:t.creator_user}};case"AddPracticeBank":return{sort:e,type:17,course_id:i.id,resource_name:i.title,resource_lock:i.resource_lock||!1,unlocking_time:l==="unlock_mode"?null:k()(i.unlocking_time).valueOf(),practice:{title:i.data.title,question_bank_list:i.data.randomQuestion.bankQuesitonVoList.map(w=>w.id),pass_line:Number(i.data.stand)}};default:return null}})}));return g},B=function(l,g){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;function d(e){return e.fill_blank_count>0||e.short_answer_count>0}var i=l.map((e,t)=>{var h=e.resources.filter(n=>n.type==6||n.type==15).length,b=e.resources.filter(n=>n.type==17).length,o=e.resources.filter(n=>n.type==10).length;return{id:e.id,key:"".concat(new Date().getTime()).concat(t),desc:e.content,name:e.stage_name,inOrder:e.is_order,Standard:{progressCheck:e.progress>0,progress:e.progress||100,examCheck:e.exam_times>0,examNum:e.exam_times||h,bankCheck:e.practice_times>0,bankNum:e.practice_times||b,practiceCheck:e.operation_times>0,practiceNum:e.operation_times||o,jobEvaluationCheck:e.finish_evaluation==="true"},reward:{getScore:e.is_get_score?e.is_get_score:"",getScoreChecked:e.is_get_score>0,certificateId:e.certificate_id||"",certificateChecked:e.certificate_id!==0,certificateName:e.certificate_name,certificateImage:e.preview_url},hourClassId:e.id,hourClassStartTime:e.start_time,hourClassEndTime:e.end_time,list:e.resources.map(n=>{var r=n.exam;switch(n.type){case 1:return{id:n.course_id,name:n.resource_name,type:c&&n.biz_type==="imageText"?"twCourse":"course",icon:n.biz_type==="imageText"?C.e1.h5:C.e1.crs,componentName:"CourseSelector",duration:n.duration,data:n,unlocking_time:n.unlocking_time,lab_resource_id:n.lab_resource_id,lab_resource_name:n.lab_resource_name,lab_selected_id:n.lab_resource_id,resource_lock:n.resource_lock};case 3:{var a;return n.content_type==="article"||n.content_type==="link"?a=C.e1.h5:a=C.e1[n.contentType]||C.e1[n.content_type],{id:n.course_id,name:n.resource_name,type:"courseware",icon:a,componentName:"CoursewareSelector",duration:n.duration,status:n.resource_status,originalType:n.content_type==="article"||n.content_type==="link"?"h5":n.content_type||n.contentType,data:n,unlocking_time:n.unlocking_time,lab_resource_id:n.lab_resource_id,lab_resource_name:n.lab_resource_name,lab_selected_id:n.lab_resource_id,resource_lock:n.resource_lock}}case 6:return{id:n.course_id,name:r.title,type:"ex",icon:C.e1.ex,componentName:"AddExam",duration:r.exam_duration*60,data:{id:r.id,title:r.title,examDuration:r.exam_duration,summary:r.summary,isOpenDrawQuestions:r.proportionalExamVos&&r.proportionalExamVos.length>0,proportional:r.proportionalExamVos&&(r.proportionalExamVos.length>0?O(r.proportionalExamVos,r.question_bank_vos):r.question_mode===2?M(r.question_bank_vos):[])||[],cheatFlag:{isChecked:!!r.cheat_flag,switchNum:r.cut_screen_count===-1?null:r.cut_screen_count,faceRecognition:r.face_recognition},reExam:{show_result:r.show_result,isChecked:r.repeat_exam,userJoin:g?!1:r.user_join==="true",notAllowed:{end:r.answer_parsing},allowed:{reRule:r.re_exam_rule,record:r.score_rule,end:r.answer_parsing,reNum:r.re_exam_rule===2?r.re_exam_number:1,viewRule:r.view_rule}},markType:{checkedValue:r.mark_type===1?1:2,artificialDisabled:r.mark_type===1&&!d(r),fillBlank:{checked:(r.mark_type===2||r.mark_type===3)&&r.fill_blank_count,disabled:!r.fill_blank_count},shortAnswer:{checked:(r.mark_type===2||r.mark_type===4)&&r.short_answer_count,disabled:!r.short_answer_count},anonymousMarking:r.anonymous_marking==="true"},questionsMode:r.question_mode,knowledgePoints:r.show_knowledge==="show"?1:2,passLine:r.pass_line,fixedQuestion:r.question_mode===1?{id:r.paper_id,name:r.paper_name,tableList:{fillBlankCount:r.fill_blank_count,fillBlankScore:r.fill_blank_unit_score,multipleCount:r.multiple_count,multipleScore:r.multiple_unit_score,shortAnswerCount:r.short_answer_count,shortAnswerScore:r.short_answer_unit_score,singleCount:r.single_count,singleScore:r.single_unit_score,totalCount:r.total_count,totalScore:r.total_score,trueOrFalseCount:r.true_or_false_count,trueOrFalseScore:r.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:r.question_mode===2?{bankQuesitonVoList:r.question_bank_vos.map(y=>{var L=y.fill_blank_count,N=y.multiple_count,z=y.short_answer_count,X=y.single_count,S=y.total_count,G=y.true_or_false_count,le={fillBlankCount:L,shortAnswerCount:z,multipleCount:N,singleCount:X,totalCount:S,trueOrFalseCount:G};return{id:y.id,name:y.name,data:Object.assign(y,le),fillBlankCount:L,shortAnswerCount:z,multipleCount:N,singleCount:X,totalCount:S,trueOrFalseCount:G}}),bankQuesitonInfo:{fillBlankCount:r.fill_blank_count,fillBlankScore:r.fill_blank_unit_score,fillBlankType:+r.fillBlankType,multipleCount:r.multiple_count,multipleScore:r.multiple_unit_score,shortAnswerCount:r.short_answer_count,shortAnswerScore:r.short_answer_unit_score,shortAnswerType:+r.shortAnswerType,singleCount:r.single_count,singleScore:r.single_unit_score,trueOrFalseCount:r.true_or_false_count,trueOrFalseScore:r.true_or_false_unit_score,multipleMissedScore:r.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 7:return{id:g?"":n.offlineCourseEditVo.id,name:n.offlineCourseEditVo.title,key:n.offlineCourseEditVo.id,type:"xx",componentName:"OfflineTrain",icon:C.e1.xx,data:(0,_.Z)({},ae(n.offlineCourseEditVo,g)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 9:return{id:n.course_id,name:n.title||n.resource_name,type:"investigate",icon:C.e1.questionnaire,componentName:"AddInvestigate",data:n,questionnaire:{id:n.questionnaire_id,name:n.resource_name},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 10:return{id:n.course_id,name:n.title,type:"sc",icon:C.e1.sc,componentName:"AddPracticeTest",data:T(n,"operationResources"),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 11:return{id:n.evaluation.id,name:n.evaluation.title,productId:n.evaluation.product_id,modelId:n.evaluation.model_id,type:"jobEvaluation",icon:C.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:n.evaluation.title,evaluationTools:{product_id:n.evaluation.product_id,model_id:n.evaluation.model_id}},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 13:return{id:n.course_sign_vo.id,name:n.course_sign_vo.name,type:"attendance",componentName:"Attendance",icon:C.e1.attendance,data:(0,_.Z)({},ne(n.course_sign_vo,g)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 14:return{id:n.evaluate?n.evaluate.id:"",name:n.evaluate?n.evaluate.name:"",type:"assess",componentName:"AddAssessment",icon:C.e1.assess,data:(0,_.Z)({},Y(n.evaluate)),resource_lock:n.resource_lock,unlocking_time:n.unlocking_time};case 15:{var p=(0,A.Qm)()._store,f=p.getState(),v=f.user,w=(0,m.AC)({data:n.exam_plan_detail_v1,user:{id:v.id,name:v.name,creator:!0}});return{id:n.exam_plan_detail_v1.id,name:n.exam_plan_detail_v1.title,type:"ex",icon:C.e1.ex,componentName:"AddNewExam",unlocking_time:n.unlocking_time,resource_lock:n.resource_lock,duration:n.exam_plan_detail_v1.exam_duration*60,data:w}}case 16:return{id:g?"":n.course_id,name:n.title,key:n.course_id,type:"liveClass",componentName:"LiveClass",icon:C.e1.liveClass,data:(0,_.Z)({},se(n)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 17:var E=(0,m.S8)(n.practice);return{id:n.course_id,name:n.resource_name,type:"practice",componentName:"AddPracticeBank",unlocking_time:n.unlocking_time,resource_lock:n.resource_lock,data:E};default:return null}})}});return i},R=s=>{var l=s.map((g,c)=>({content:g.desc,stage_name:g.name,order:"".concat(g.inOrder),sort:c+1,course:g.list.map((d,i)=>{var e=d.data;switch(d.componentName){case"CoursewareSelector":return{course_id:d.id,course_sort:i,course_type:3,flag:1};case"CourseSelector":return{course_id:d.id,course_sort:i,course_type:1,flag:1};case"AddExam":return{flag:2,type:"ex",course_sort:i,course_id:d.id,title:e.title,cheat_flag:e.cheatFlag.isChecked?1:0,exam_duration:e.examDuration,face_recognition:e.cheatFlag.faceRecognition,summary:e.summary,mark_type:Q(e.markType),paper_id:e.questionsMode===1?e.fixedQuestion.id:"",paper_title:e.questionsMode===1?e.fixedQuestion.name:"",pass_line:e.passLine,question_bank_list:e.questionsMode===1?"":e.randomQuestion.bankQuesitonVoList.map(v=>v.id).join(","),question_mode:e.questionsMode,show_knowledge:e.knowledgePoints===1?"show":"hide",s_repeat_exam:"".concat(e.reExam.isChecked),multiple_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:e.questionsMode===1?e.fixedQuestion.tableList.totalScore:"",answer_parsing:e.reExam.isChecked?e.reExam.allowed.end:e.reExam.notAllowed.end,passing_score:e.questionsMode===1?Number(e.fixedQuestion.tableList.totalScore*e.passLine/100).toFixed(1):60,cut_screen_count:e.cheatFlag.switchNum!==null?e.cheatFlag.switchNum:-1,re_exam_rule:e.reExam.allowed.reRule,re_exam_number:e.reExam.allowed.reRule===2?e.reExam.allowed.reNum:0,score_rule:e.reExam.allowed.record,view_rule:e.reExam.allowed.viewRule,proportional:e.questionsMode===2&&e.isOpenDrawQuestions?e.proportional:[],anonymous_marking:"".concat(e.markType.anonymousMarking),show_result:e.reExam.show_result};case"AddNewExam":var t=d.data,h=t.paperInfo,b=t.exam_times,o=t.cut_screen_times,n=t.random_order,r=t.mark_setting,a=t.result_visible,p=t.face_recognition,f=(0,q.Z)(t,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_type:15,flag:15,type:"ex",course_sort:i,course_id:d.id,new_exam:(0,_.Z)((0,_.Z)((0,_.Z)({},f),(0,m.jJ)(p)),{},{paper_id:h.id,answer_rule:b.answer_rule,exam_count:b.exam_count||1,cut_screen_rule:o.cut_screen_rule,cut_screen_count:o.cut_screen_count||1,cut_screen_interval:o.cut_screen_interval||0,random_question:n.random_question,random_options:n.random_options,mark_type:r.mark_type,mark_question_type:{fill_blank:r.mark_type===m.lt.MANUAL?r.fill_blank:!1,short_answer:r.mark_type===m.lt.MANUAL?r.short_answer:!1},anonymous_marking:r.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...r.marker_list.map(v=>typeof v=="string"?v:v.id)],result_view_rule:a.result_view_rule,answer_parsing:a.answer_parsing,ranking_list_view_rule:a.ranking_list_view_rule,show_result:a.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddInvestigate":return{course_id:d.id,course_type:9,flag:9,course_sort:i,investigate:{id:d.id,title:d.name,questionnaire_id:d.questionnaire.id}};default:return null}})}));return l},te=s=>{function l(c){return c.fill_blank_count>0||c.short_answer_count>0}var g=s.map((c,d)=>({key:"".concat(new Date().getTime()).concat(d),desc:c.content,name:c.stage_name,inOrder:c.is_order,list:c.course_mapping_list.map(i=>{var e=i;switch(i.flag){case 1:return{id:i.course_id,name:i.name,type:i.course_type===1?"course":"courseware",icon:C.e1[i.type==="imageText"?"h5":i.contentType==="audio/mp3"?"mp3":i.type],originalType:i.type,componentName:i.course_type===1?"CourseSelector":"CoursewareSelector",status:i.course_type===1?"":i.status,duration:i.duration,data:i};case 2:return{id:i.course_id,name:e.title,type:"ex",icon:C.e1.ex,componentName:"AddExam",duration:e.exam_duration*60,data:{title:e.title,examDuration:e.exam_duration,summary:e.summary,isOpenDrawQuestions:e.proportionalExamVos&&e.proportionalExamVos.length>0,proportional:e.proportionalExamVos&&(e.proportionalExamVos.length>0?O(e.proportionalExamVos,e.bank_quesiton_list):e.question_mode===2?M(e.bank_quesiton_list):[])||[],cheatFlag:{isChecked:!!e.cheat_flag,switchNum:e.cut_screen_count===-1?null:e.cut_screen_count,faceRecognition:e.face_recognition},reExam:{show_result:e.show_result,isChecked:e.s_repeat_exam==="true",notAllowed:{end:e.answer_parsing},allowed:{reRule:e.re_exam_rule,record:e.score_rule,end:e.answer_parsing,reNum:e.re_exam_rule===2?e.re_exam_number:1,viewRule:e.view_rule}},markType:{checkedValue:e.mark_type===1?1:2,artificialDisabled:e.mark_type===1&&!l(e),fillBlank:{checked:(e.mark_type===2||e.mark_type===3)&&e.fill_blank_count,disabled:!e.fill_blank_count},shortAnswer:{checked:(e.mark_type===2||e.mark_type===4)&&e.short_answer_count,disabled:!e.short_answer_count},anonymousMarking:e.anonymous_marking==="true"},questionsMode:e.question_mode,knowledgePoints:e.show_knowledge==="show"?1:2,passLine:e.pass_line,fixedQuestion:e.question_mode===1?{id:e.paper_id,name:e.paper_title,tableList:{fillBlankCount:e.fill_blank_count,fillBlankScore:e.fill_blank_unit_score,multipleCount:e.multiple_count,multipleScore:e.multiple_unit_score,shortAnswerCount:e.short_answer_count,shortAnswerScore:e.short_answer_unit_score,singleCount:e.single_count,singleScore:e.single_unit_score,totalCount:e.paper_question_numbers,totalScore:e.total_score,trueOrFalseCount:e.true_or_false_count,trueOrFalseScore:e.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:e.question_mode===2?{bankQuesitonVoList:e.bank_quesiton_list.map(n=>{var r=n.fill_blank_count,a=n.multiple_count,p=n.short_answer_count,f=n.single_count,v=n.total_count,w=n.true_or_false_count,E={fillBlankCount:r,shortAnswerCount:p,multipleCount:a,singleCount:f,totalCount:v,trueOrFalseCount:w};return{id:n.id,name:n.name,data:Object.assign(n,E),fillBlankCount:r,shortAnswerCount:p,multipleCount:a,singleCount:f,totalCount:v,trueOrFalseCount:w}}),bankQuesitonInfo:{fillBlankCount:e.fill_blank_count,fillBlankScore:e.fill_blank_unit_score,fillBlankType:+e.fill_blank_type||1,multipleCount:e.multiple_count,multipleScore:e.multiple_unit_score,shortAnswerCount:e.short_answer_count,shortAnswerScore:e.short_answer_unit_score,shortAnswerType:+e.short_answer_type||1,singleCount:e.single_count,singleScore:e.single_unit_score,trueOrFalseCount:e.true_or_false_count,trueOrFalseScore:e.true_or_false_unit_score,multipleMissedScore:e.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}}};case 9:return{id:i.course_id,name:i.title,type:"investigate",icon:C.e1.questionnaire,componentName:"AddInvestigate",data:i,questionnaire:{id:i.questionnaire_id,name:i.name}};case 15:{var t=(0,A.Qm)()._store,h=t.getState(),b=h.user,o=(0,m.AC)({data:i.exam_plan_detail_v1,user:{id:b.id,name:b.name,creator:!0}});return{id:i.exam_plan_detail_v1.id,name:i.exam_plan_detail_v1.title,type:"ex",icon:C.e1.ex,componentName:"AddNewExam",duration:i.exam_plan_detail_v1.exam_duration*60,data:o}}default:return null}})}));return g},re=function(l){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return l.map((c,d)=>{var i=g.find(e=>e.stage_index-1===d);return c.list.map((e,t)=>{var h;i&&(h=i.resource_error_vos.find(o=>o.resource_index===t));var b=e.type;if(e.resource_type)switch(e.resource_type){case 1:b="course";break;case 2:case 3:b="courseware";break;case 6:case 15:b="ex";break;case 7:b="xx";break;case 9:b="questionnaire";break;case 13:b="attendance";break;case 14:b="assess";break;default:break}if(e.componentName)switch(e.componentName){case"CourseSelector":b="course";break;case"CoursewareSelector":b="courseware";break;case"AddNewExam":case"AddExam":b="ex";break;case"OfflineTrain":b="xx";break;case"Attendance":b="attendance";break;case"QuestionnaireSelector":case"AddInvestigate":b="questionnaire";break;case"AddPracticeTest":b="practicalIndustry";break;case"AddAssessment":b="assess";break;default:break}switch(b){case"course":e.resourceErrTip=h?h.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u88AB\u5220\u9664":h.resource_status==="un_released"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u300A".concat(h.resource_name,"\u300B\u672A\u53D1\u5E03\uFF0C\u8BF7\u542F\u7528\u540E\u518D\u7F16\u8F91"):"":"";break;case"courseware":e.resourceErrTip=h&&h.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u4EF6\u88AB\u5220\u9664":"";break;case"ex":e.resourceErrTip=h?h.resource_status==="bank_deleted"?"\u5F15\u7528\u7684\u9898\u5E93\u88AB\u5220\u9664":h.resource_status==="paper_deleted"?"\u5F15\u7528\u7684\u8BD5\u5377\u88AB\u5220\u9664":h.resource_status==="bank_missing"?"\u5F15\u7528\u7684\u9898\u5E93\u8BD5\u9898\u4E0D\u8DB3":"":"";break;case"xx":e.resourceErrTip=h&&h.resource_status==="time_expired"?"\u7EBF\u4E0B\u8BFE\u5DF2\u8FC7\u671F":"";break;case"questionnaire":e.resourceErrTip=h?h.resource_status==="deleted"?"\u5F15\u7528\u7684\u95EE\u5377\u88AB\u5220\u9664":h.resource_status==="un_released"?"\u5F15\u7528\u7684\u95EE\u5377\u672A\u53D1\u5E03":"":"";break;case"practicalIndustry":e.resourceErrTip=h&&h.resource_status==="operation_resource_deleted"?P.Z.t("component.practicalDeleteTip"):"";break;default:break}return null}),null}),l},ae=(s,l)=>({id:l?"":s.id,title:s.title,edit_status:s.edit_status,status:s.status,department_id:s.department_id||"",dateRange:{startTime:s.begin_time,endTime:s.end_time},address:s.address,course_duration:s.course_duration,has_lecturer_student_data:l?!1:s.has_lecturer_student_data,has_student_lecturer_data:l?!1:s.has_student_lecturer_data,has_student_course_data:l?!1:s.has_student_course_data,has_lecturer_assess_student_data:l?!1:s.has_lecturer_assess_student_data,teacher:{id:s.lecturer_id,name:s.lecturer_name,is_lecturer_confirm:s.is_lecturer_confirm,is_lecturer_subsidy:s.is_lecturer_subsidy,teacher_sync_user_id:s.teacher_sync_user_id,lecturer_name:s.lecturer_name,teacher_sync_source_type:s.teacher_sync_source_type,type:s.teacher_sync_type,teacher_sync_type:s.teacher_sync_type},introduction:s.introduction,attachment:s.attachment||[],other:{is_open_schedule:s.is_open_schedule,is_open_upload:s.is_open_upload},remind:{remind_type:s.remind_type||"offline_course",advance_minute:s.advance_minute,is_lecturer_remind:s.is_lecturer_remind,is_student_remind:s.is_student_remind,is_director_remind:s.is_director_remind},evaluate:{is_lecturer_student_evaluate:s.is_lecturer_student_evaluate,is_student_lecturer_evaluate:s.is_student_lecturer_evaluate,is_student_course_evaluate:s.is_student_course_evaluate,lecturer_student_evaluate_content:s.lecturer_student_evaluate_content?(0,_.Z)((0,_.Z)({},s.lecturer_student_evaluate_content),{},{passing_score:Number(s.lecturer_student_evaluate_content.passing_score),total_score:Number(s.lecturer_student_evaluate_content.total_score)}):{evaluate_type:"score",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_lecturer_evaluate_content:s.student_lecturer_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_course_evaluate_content:s.student_course_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""}},assess:{is_open_offline_assessment:s.is_open_offline_assessment,assessment_total_score:s.assessment_total_score,assessment_pass_score:s.assessment_pass_score},user_has_attendanted:l?!1:s.user_has_attendanted}),ne=(s,l)=>{var g=[];return l?s.attendance_course_vo.forEach(c=>{g.push((0,_.Z)((0,_.Z)({},c),{},{course_id:"",course_key:c.course_id}))}):g=s.attendance_course_vo,{courseId:s.courseId,directors:s.director?s.director.map(c=>c):s.directors,id:l?"":s.id,name:s.name,qrcode_type:s.qrcode_type,relate_course_list:g,sign_in_begin_time:s.sign_in_begin_time?(0,j.p6)(s.sign_in_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_in_end_time:s.sign_in_end_time?(0,j.p6)(s.sign_in_end_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_begin_time:s.sign_out_begin_time?(0,j.p6)(s.sign_out_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_end_time:s.sign_out_end_time?(0,j.p6)(s.sign_out_end_time,"yyyy-MM-dd hh:mm:ss"):"",source_type:s.source_type,remind_directors:s.remind_directors,advance_minute:s.advance_minute,user_has_attendanted:l?!1:s.user_has_attendanted,relate_course:s.relate_course,address:s.address,longitude:s.longitude,latitude:s.latitude,address_detail:s.address_detail,sign_range:s.sign_range}};function ee(s){return Object.prototype.toString.call(s)==="[object Object]"}function ie(s){return s.replace(/[A-Z]/g,l=>"_".concat(l.toLowerCase()))}function K(s){if(!ee(s))return s;for(var l={},g=Object.keys(s),c=0,d=g;c<d.length;c++){var i=d[c],e=s[i];i=ie(i),l[i]=ee(e)?K(e):e}return l}var Y=s=>{var l=K(s),g=l.id,c=l.name,d=l.requirement,i=l.resource_id,e=l.is_self_evaluate,t=l.is_lock,h=l.begin_time_unlock,b=l.end_time_unlock,o=l.questionnaire_id,n=l.evaluate_form_title,r=l.before_start_day,a=l.before_start_repeat,p=l.before_start_un_remind,f=l.before_end_day,v=l.before_end_repeat,w=l.before_end_un_remind,E=l.after_end_day,y=l.after_end_repeat,L=l.after_end_un_remind,N=l.is_passed_standards,z=l.is_passed_option_three,X=l.pass_standard_conditions,S=l.pass_standards_number,G=l.creator_user;return{id:g,name:c,requirement:d,resource_id:i,is_lock:t,begin_time_unlock:h,end_time_unlock:b,is_self_evaluate:e,questionnaire_id:o,evaluate_form_title:n,before_start_day:r,before_start_repeat:a,before_start_un_remind:p,before_end_day:f,before_end_repeat:v,before_end_un_remind:w,after_end_day:E,after_end_repeat:y,after_end_un_remind:L,is_passed_standards:N,is_passed_option_three:z,pass_standard_conditions:X,pass_standards_number:S,creator_user:G}},se=s=>({courseId:s.course_id,duration:s.duration,teacherName:s.live_lesson.teacher_name,startTime:s.live_lesson.live_start_time,endTime:s.live_lesson.live_end_time})},77444:function(oe,U,u){"use strict";var q=u(6793),_=u(3407),$=(0,q.me)(),k=_.Z[$].authentication.validation;U.Z={title:P=>(0,q.fy)(P)?(0,q.fy)(P).length>60?k.abilityDetailNameLimit:"":k.abilityDetailNameNull,summary:P=>{var A;return P?(0,q.fy)(P).length>500&&(A=_.Z[$].validation.limitedFiveHundred):A=k.abilityDetailSummaryNull,A},certificate:P=>{var A;return P.id||(A=k.abilityDetailIssueNull),A},checkSupervisor:P=>{var A,J=P.multilevel,j=P.type;if(j==="multilevel")if(J.length<2)A=k.abilityDetailSupervisionNull;else{var C={},m=[];J.forEach((M,O)=>{if(M.length===0){A=(0,q.ZT)("".concat(k.abilityDetailSupervisionStepNull),O+1);return}if(M.length>5){A=(0,q.ZT)("".concat(k.abilityDetailSupervisionStepLimit),O+1);return}M.forEach(Q=>{m.push(Q)})}),m.forEach(M=>{C[M.id]?A=k.abilityDetailSupervisionRepeat:C[M.id]=!0})}return A}}},12631:function(oe,U,u){"use strict";u.r(U),u.d(U,{default:function(){return o}});var q=u(12924),_=u.n(q),$=u(57663),k=u(71577),P=u(62029),A=u(20228),J=u(11382),j=u(34792),C=u(48086),m=u(71194),M=u(57016),O=u(91768),Q=u(28216),D=u(76651),x=u(80991),F=u(57068),Z=u(6998),H=u(44659),V=u(40767),T=u(47673),I=u(4107),B=u(88986),R=u(49101),te=u(43859),re=u(93117);class ae extends _().Component{constructor(r){super(r);this.handleSelectCertificate=()=>{var a=this.state.certificateConfig;a.visible=!0,this.setState({certificateConfig:a})},this.cancelSelectCertificate=()=>{var a=this.state.certificateConfig;a.visible=!1,this.setState({certificateConfig:a})},this.sureSelectCertificate=a=>{this.cancelSelectCertificate();var p=this.props.value;p.id=a[0].id,p.name=a[0].name,this.props.onFieldChange(p),this.setState({certificateConfig:(0,B.Z)((0,B.Z)({},this.state.certificateConfig),{},{defaultChecked:[p]})})},this.state={certificateConfig:{visible:!1,defaultChecked:[],onCancel:this.cancelSelectCertificate,onOk:this.sureSelectCertificate}}}componentDidMount(){var r=this.props.defaultValue;r&&this.setState({certificateConfig:(0,B.Z)((0,B.Z)({},this.state.certificateConfig),{},{defaultChecked:[r]})})}render(){var r=this.state.certificateConfig,a=this.props.value;return _().createElement("div",{className:"study-reward"},_().createElement("div",{className:"study-reward-item"},_().createElement(I.Z,{value:a.name,disabled:!0,className:"study-reward-number"}),_().createElement(k.Z,{type:"link",icon:_().createElement(R.Z,null),onClick:this.handleSelectCertificate},this.props.t("authentication.abilityDetailIssueSelect"))),_().createElement(re.Z,r))}}var ne=(0,te.Z)((0,O.Z)()(ae)),ee=u(77444),ie=u(10237),K=u(37055),Y=u(62615),se=u(52670),s=u(53009),l=u(6793),g=u(4408),c=u(70075),d=u(2396),i=u(38642),e=n=>({documentStudyLimit:n.advancedSetting.documentStudyLimit});class t extends _().Component{constructor(r){super(r);this.initRefFormik=a=>{this._refFormik=a},this.getTaskInfo=()=>{var a=F.parse(D.m8.location.search),p=a.id,f=this.state.isHuaLaiShi,v=f?K.ZP.PostAbility.customQueryAuth(p):K.ZP.PostAbility.queryAuth(p);ie.WY.get({url:v}).then(w=>{var E=w.data.data;this.setState({initialValues:{title:E.title,summary:E.summary,createUserId:E.createUser,stages:(0,s.aI)(E.stageList),studyLimit:{isChecked:E.studyTimeLimit!==0,limit:E.studyTimeLimit!==0?E.studyTimeLimit:1},certificate:{id:E.certificateId!==0?E.certificateId:"",name:E.certificateId!==0?E.certificateName:""},employeeRange:{rangeType:E.visibleRange==="all"?1:2,rangeList:{dept:E.scopes.department_list,post:E.scopes.post_list,group:E.scopes.group_list,user:E.scopes.user_list}},stagePass:E.stagePass,syncProgress:E.syncProgress},isLoading:!1})})},this.initRef=a=>{this.formRef=a},this.showConfirm=a=>{var p=this.props.t,f=this;M.Z.confirm({title:p("authentication.editAbilityTip"),content:"",onOk(){f.submit(a)}})},this.handleBeforeCreate=()=>{var a=this._refFormik;a.submitForm(),a.runValidations().then(p=>{if(!Object.keys(p).length){var f=a.state.values,v=f.title,w=f.summary,E=f.stages,y=f.studyLimit,L=f.certificate,N=f.employeeRange,z=f.stagePass,X=f.syncProgress,S={};S.department_list=N.rangeList.dept.map(W=>({id:W.id,name:W.name,type:1})),S.user_list=N.rangeList.user.map(W=>({id:W.id,name:W.name,type:2})),S.group_list=N.rangeList.group.map(W=>({id:W.id,name:W.name,type:3})),S.post_list=N.rangeList.post.map(W=>({id:W.id,name:W.name,type:W.type}));var G={title:(0,l.fy)(v),summary:w,stageJson:JSON.stringify((0,s.TD)(E)),certificateId:L.id,studyTimeLimit:y.isChecked?y.limit:0,visibleRange:N.rangeType===1?"all":"part",scopes:JSON.stringify(S),stagePass:z,syncProgress:X,qy_we_chat_vo:N.qyWeChatVo},le=F.parse(D.m8.location.search),ue=le.id;ue?this.showConfirm(G):this.submit(G)}})},this.submit=a=>{var p=F.parse(D.m8.location.search),f=p.id;ie.WY.post({url:this.getSubmitUrl(),data:a}).then(v=>{v.data.code===0?(C.default.success(f?this.props.t("common.saveSuccess"):this.props.t("common.releaseSuccess")),this.linkToList()):C.default.error(v.data.msg)}).catch(()=>{})},this.getSubmitUrl=()=>{var a=this.state.isHuaLaiShi,p=F.parse(D.m8.location.search),f=p.id,v;return a?v=f?K.ZP.PostAbility.customEditAuth(f):K.ZP.PostAbility.customAddAuth():v=f?K.ZP.PostAbility.editAuth(f):K.ZP.PostAbility.addAuth(),v},this.handleCancelEdit=()=>{this.linkToList()},this.linkToList=()=>{D.m8.push("/talentedDevelopment/authenticationMenu/ability")},this.state={initialValues:{title:"",summary:"",createUserId:"",stages:[{key:"".concat(new Date().getTime()),name:"".concat(this.props.t("formItem.stageTaskPanelTitle"),"1"),desc:"",list:[],inOrder:!1}],employeeRange:{rangeType:"",rangeList:{dept:[],post:[],group:[],user:[]}},studyLimit:{isChecked:this.props.documentStudyLimit!==0,limit:this.props.documentStudyLimit},certificate:{id:"",name:""},stagePass:!1,syncProgress:"false"},isLoading:!0,isPreview:!1,isHuaLaiShi:(0,i.UI)("PRIVACY_HLS_APPROVAL_MANAGE")}}componentDidMount(){var r=F.parse(D.m8.location.search),a=r.id;a?this.getTaskInfo():this.setState({isLoading:!1})}render(){var r=this.state,a=r.initialValues,p=r.isLoading,f=r.isPreview,v=r.isHuaLaiShi;if(p)return _().createElement(J.Z,{size:"large"});var w=this.props,E=w.prefixCls,y=w.t,L=F.parse(D.m8.location.search),N=L.id,z=N?"".concat(y("common.edit")).concat(y("authentication.abilityDetailTitle")):"".concat(y("common.add")).concat(y("authentication.abilityDetailTitle")),X=["questionsMode","passLine","drawQuestionsSwitch","weightInput"];return _().createElement("div",{className:E},_().createElement(g.Z,{title:y(N?"documentTitle.editCertification":"documentTitle.addCertification")}),_().createElement("div",{className:"".concat(E,"__content")},_().createElement(x.J9,{ref:this.initRefFormik,initialValues:a,render:S=>_().createElement(x.l0,{className:"cl-form"},_().createElement("h1",{className:"cl-form-htitle"},z),_().createElement("div",{className:"cl-form__sectitle"},y("exam.basicInformation")),_().createElement(x.gN,(0,P.Z)({name:"title",label:y("authentication.abilityDetailName"),required:!0,defaultValue:S.values.title,validate:G=>ee.Z.title(G),component:Z.Z,formType:"employee",placeholder:y("authentication.abilityDetailNamePlaceholder")},V.g)),_().createElement(x.gN,(0,P.Z)({name:"summary",label:y("authentication.abilityDetailSummary"),required:!0,validate:G=>(0,d.QK)(G,y("authentication.abilityDetailSummaryPlaceholder")),component:c.Z,type:"text",maxLength:500,rows:4,placeholder:y("authentication.abilityDetailSummaryPlaceholder"),style:{width:"350px"}},V.g)),_().createElement(x.gN,(0,P.Z)({label:y("authentication.abilityDetailIssue"),required:!0,component:ne,displayType:"Custom",name:"certificate",defaultValue:S.values.certificate,validate:ee.Z.certificate},V.g)),_().createElement("p",{className:"cl-form__divide padding"}),_().createElement("div",{className:"cl-form__sectitle"},y("authentication.abilityDetailSecStageTitle")),_().createElement(x.gN,{component:Y.Vi,displayType:"Custom",name:"stages",required:!0,isHasTutor:!0,validate:se.NW,resourceType:["courseware","course","exam","practice","imageTextCourse","investigate"],defaultFieldList:S.values.stages,examProps:{disabledFields:X},createUserId:S.values.createUserId,from:"certificate",isHuaLaiShi:v}),_().createElement(x.gN,{component:Y._e,name:"stagePass"}),_().createElement(x.gN,{component:Y.Pk,name:"syncProgress",isPreview:f}),_().createElement(x.gN,{component:Y.ww,displayType:"Custom",name:"employeeRange",secTitle:y("authentication.abilityDetailSecAssignTitle"),defaultFieldList:S.values.employeeRange,validate:se.FI,orgProps:{title:y("component.chooseVisibleScope")},qwTicketShow:!0}),_().createElement("div",{className:"cl-form__sectitle"},y("authentication.abilityDetailSecSettingTitle")),_().createElement(x.gN,{component:H.Z,displayType:"Custom",name:"studyLimit",componentType:"authentication"}),_().createElement(Y.I,null))}),_().createElement("div",{className:"cl-form-fixed-footer"},_().createElement("div",{className:"cl-form-fixed-footer__container"},_().createElement(k.Z,{onClick:this.handleBeforeCreate,type:"primary",htmlType:"submit"},y(N?"common.save":"common.release")),_().createElement(k.Z,{onClick:this.handleCancelEdit},y("common.cancel"))))))}}t.defaultProps={prefixCls:"employeetask-edit"};var h=(0,Q.$j)(e)((0,O.Z)()(t));class b extends _().Component{render(){return _().createElement(h,null)}}var o=b},44659:function(oe,U,u){"use strict";var q=u(77576),_=u(59314),$=u(22385),k=u(31097),P=u(77883),A=u(21888),J=u(63185),j=u(9676),C=u(12924),m=u.n(C),M=u(28216),O=u(91768),Q=u(17780),D=u(43859),x=u(16239),F=u(84874),Z=u(38642);class H extends m().Component{constructor(){super(...arguments);this.state={blackList:{jobEvaluationSwitch:(0,Z.eY)("STUDYTIME_JOBEVALUATION_SWITCH"),faceKnowTipFlag:(0,Z.eY)("STUDYTIMELIMT_EXAM_FACE_KNOW")},whiteList:{faceVideoSourceFlag:(0,Z.UI)("STUDYTIMELIMT_VIDEO_FACE_KNOW")}},this.renderText=()=>{var T=this.props.t;return m().createElement("div",null,m().createElement("p",{className:"title"},T("course.documentStudyLimitTip1")),m().createElement("p",{className:"title"},T("course.documentStudyLimitTip2")))},this.handleCheck=T=>{var I=T.target.checked,B=this.props.value;B.isChecked=I,this.props.onFieldChange(B)},this.handleInput=T=>{var I=this.props.value;I.limit=T,this.props.onFieldChange(I)},this.handleSwitch=T=>{var I=this.props.value;I.faceRecognition=T,this.props.onFieldChange(I)},this.handleMediaSwitch=T=>{var I=this.props.value;I.videoFaceRecognition=T,this.props.onFieldChange(I)},this.handleJobSwitch=T=>{var I=this.props.value;I.jobEvaluationResults=T,this.props.onFieldChange(I)}}render(){var T=this.props,I=T.value,B=T.isPreview,R=T.t,te=T.appType,re=T.isShowJobInput,ae=T.jobEvaluationCount,ne=T.componentType,ee=T.isEdit,ie=T.qyShield,K=this.state,Y=K.blackList,se=K.whiteList;return m().createElement("div",{className:"study-time-limit"},m().createElement("div",{className:"study-time-limit-title"},R("learning.learningAddSecSetTitle"),m().createElement("span",{className:"study-time-limit-sub"},R("learning.learningAddSecSetTitleTip"))),m().createElement("div",{className:"study-time-limit-input"},m().createElement(j.Z,{checked:I.isChecked,onChange:this.handleCheck,disabled:B||ee,className:I.isChecked?"study-time-limit-checked":""},R("learning.learningAddSecSetTitleInfo")),m().createElement(A.Z,{size:"middle",value:I.limit,disabled:!I.isChecked||B,onChange:this.handleInput,className:"study-time-limit-number",min:1,max:9999,precision:0}),m().createElement("span",{className:"study-time-limit-standard"}),R("course.secByPage"),m().createElement(k.Z,{placement:"top",title:this.renderText},m().createElement("span",null,m().createElement(F.Z,{iconClass:"icon-f-tipe"}))),I.isChecked?null:m().createElement("span",{className:"study-time-limit-tip"},R("course.documentStudyLimitTip"))),Y.jobEvaluationSwitch&&re&&ie==="false"&&m().createElement("div",{className:"study-time-limit-jobInput"},ae<1?m().createElement(_.Z,{defaultChecked:!1,checked:!1,disabled:!0,id:1}):m().createElement(_.Z,{checked:I.jobEvaluationResults,onChange:this.handleJobSwitch,disabled:B,id:2}),m().createElement("span",{className:"item-margin"}," ",R("learning.openJobEvaluationResults")," "),m().createElement("span",{className:"study-time-limit-tip"},R("learning.jobEvaluationResultsTip"))),(0,Q.xX)()||te==="wx_app"||te==="fs_app"||!x.Z[(0,x.c)()].showCl||ne==="authentication"||!Y.faceKnowTipFlag?null:m().createElement("div",{className:"study-time-limit-input"},m().createElement(_.Z,{defaultChecked:I.faceRecognition,onChange:this.handleSwitch,disabled:B}),m().createElement("span",{className:"item-margin"}," ",R("exam.faceKnow")," "),m().createElement("span",{className:"study-time-limit-tip"},R("exam.faceKnowTip"))),se.faceVideoSourceFlag?m().createElement("div",{className:"study-time-limit-input"},m().createElement(_.Z,{defaultChecked:I.videoFaceRecognition,onChange:this.handleMediaSwitch,disabled:B}),m().createElement("span",{className:"item-margin"}," ",R("exam.faceVideoSource")," "),m().createElement("span",{className:"study-time-limit-tip"},R("exam.faceVideoSourceTip"))):null)}}U.Z=(0,M.$j)(V=>({appType:V.user.appType,themeColor:V.advancedSetting.themeColor,qyShield:V.user.qyShield}))((0,D.Z)((0,O.Z)()(H)))},6998:function(oe,U,u){"use strict";var q=u(47673),_=u(4107),$=u(12924),k=u.n($),P=u(43859),A=u(80991),J=u(10237),j=u(37055);class C extends k().Component{constructor(){var M;super(...arguments);M=this,this.handleChange=O=>{var Q=O.target.value;this.props.onChange(Q)},this.handleBlur=()=>{var O=this.props.formType;switch(O){case"task":this.checkTaskName();break;case"project":this.checkProjectName();break;case"employee":this.checkTaskName(2);break;default:break}},this.checkTaskName=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,Q=j.ZP.EditStudyTask.checkTaskTitle(),D=M.props,x=D.value,F=D.formik,Z=D.t,H={edit:O,trainName:x};J.WY.get({url:Q,params:H}).then(V=>{V.data.code!==0&&(F.setFieldError("title",Z("learning.learningAddTitleRepeatTip")),F.setFieldTouched("title",!0,!1))})},this.checkProjectName=()=>{var O=j.ZP.EditStudyProject.checkProjectName(),Q=this.props,D=Q.value,x=Q.formik,F=Q.t,Z={title:D};J.WY.post({url:O,data:Z}).then(H=>{H.data.checked!=="true"&&(x.setFieldError("title",F("learning.learningAddTitleRepeatTip")),x.setFieldTouched("title",!0,!1))}).catch(H=>{H.response.data.code==="enterpriseapi.542001"&&(x.setFieldError("title",F("learning.learningAddTitleRepeatTip")),x.setFieldTouched("title",!0,!1))})}}render(){var M=this.props,O=M.value,Q=M.isPreview,D=M.placeholder;return k().createElement(_.Z,{style:{width:"350px"},value:O,disabled:Q,placeholder:D,onChange:this.handleChange})}}U.Z=(0,P.Z)((0,A.$j)(C))},40767:function(oe,U,u){"use strict";u.d(U,{g:function(){return q},c:function(){return _}});var q={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},_={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:20}}}}}]);
