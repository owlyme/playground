(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[330],{26096:function(ie,j,e){"use strict";var y=e(30887),A=e(99210),w=e(62029),I=e(22385),T=e(31097),H=e(12924),o=e.n(H),z=e(71967),p=e.n(z),u=e(1164),n=m=>m.type==="more"?m.disabled?o().createElement(A.Z.Item,(0,w.Z)({},m,{key:m.key,disabled:!0}),m.tooltip?o().createElement(T.Z,{title:m.tooltip},o().createElement("p",{className:"cl-dropdown-menuitem"},m.title)):o().createElement("p",{className:"cl-dropdown-menuitem"},m.title)):m.link?o().createElement(A.Z.Item,(0,w.Z)({},m,{key:m.key}),o().createElement(u.Z,{to:m.link},o().createElement("p",{className:"cl-dropdown-menuitem"},m.title))):o().createElement(A.Z.Item,(0,w.Z)({},m,{key:m.key}),o().createElement("p",{className:"cl-dropdown-menuitem",onClick:m.click},m.title)):m.disabled?m.tooltip?o().createElement(o().Fragment,{key:m.key},o().createElement(T.Z,{title:m.tooltip},o().createElement("span",{className:"".concat(p().pointer," ").concat(p().disabled)},m.title))):o().createElement(o().Fragment,{key:m.key},o().createElement("span",{className:"".concat(p().pointer," ").concat(p().disabled)},m.title)):m.link?o().createElement(o().Fragment,{key:m.key},o().createElement(u.Z,{to:m.link},o().createElement("span",{className:"cl-pointer ".concat(p().pointer)},m.title))):o().createElement(o().Fragment,{key:m.key},o().createElement("span",{className:"cl-pointer ".concat(p().pointer),onClick:m.click},m.title));j.Z=n},67620:function(ie,j,e){"use strict";var y=e(34792),A=e(48086),w=e(12924),I=e.n(w),T=e(19222),H=e.n(T),o=e(32407),z=e(37055),p=z.ZP.Common.editorUpload(),u="cl_editor_toolbar_default",n="cl_editor_content_default";class m extends w.Component{constructor(N){super(N);this.initEditor=()=>{this.editor=new(H())(".".concat(this.props.toolbarCls),".".concat(this.props.contentCls)),this.editor.config.zIndex=10,this.editor.config.onfocus=()=>{var i=document.querySelector(".".concat(this.props.contentCls));i&&(i.style.minHeight=this.props.contentHeight,i.style.height="auto")},this.editor.config.onblur=()=>{var i=document.querySelector(".".concat(this.props.contentCls));i&&(i.style.height=this.props.contentHeight)},this.editor.config.menus=this.props.controls,this.editor.config.placeholder=this.props.placeholderContent||o.Z.t("component.pleaseEnterText"),this.editor.config.onchange=i=>{this.props.onChange&&this.props.onChange(i)},this.editor.config.onchangeTimeout=300,this.editor.config.uploadImgServer=p,this.editor.config.uploadImgMaxLength=5,this.editor.config.uploadImgParams={access_token:window.localStorage.getItem("token")},this.editor.config.uploadFileName="files",this.editor.config.uploadImgHooks={customInsert(i,$){var L=$.data;L.forEach(V=>{i(V)})}},this.editor.config.pasteTextHandle=function(i){return~i.indexOf("<!--[if gte mso 9]><xml>")||~i.indexOf("<spanyes")?"\u7C98\u8D34\u5185\u5BB9\u6709\u4E71\u7801\uFF0C\u8BF7\u4F7F\u7528ctrl+shift+v\u6765\u7C98\u8D34\u5185\u5BB9(mac\u8BF7\u4F7F\u7528command+shift+v)":i},this.editor.config.focus=!1,this.editor.config.uploadImgMaxSize=3*1024*1024,this.editor.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp"],this.editor.config.showLinkImg=!1,this.editor.config.customAlert=function(i,$){switch($){case"success":A.default.success(i);break;case"info":A.default.info(i);break;case"warning":A.default.warning(i);break;case"error":A.default.error(i);break;default:A.default.info(i);break}},this.editor.create(),this.editor.txt.html("".concat(this.props.placeholder))},this.getHtml=()=>this.editor.txt.html(),this.getText=()=>this.editor.txt.text(),this.setHtml=i=>this.editor.txt.html(i),this.editor=null}componentDidMount(){this.initEditor()}render(){var N=this.props.toolbarCls?"".concat(this.props.toolbarCls," cl_editor_toolbar"):"".concat(u," cl_editor_toolbar"),i=this.props.contentCls?"".concat(this.props.contentCls," cl_editor_content"):"".concat(n," cl_editor_content");return I().createElement(I().Fragment,null,I().createElement("div",{className:N}),I().createElement("div",{className:i,style:{height:this.props.contentHeight,minHeight:this.props.contentHeight}}))}}m.defaultProps={controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],placeholder:"\u5185\u5BB9\u7F16\u8F91\u533A\u57DF",toolbarCls:u,contentCls:n,contentHeight:"300px",placeholderContent:""},j.Z=m},16598:function(ie,j,e){"use strict";var y=e(59250),A=e(13013),w=e(30887),I=e(99210),T=e(62029),H=e(12924),o=e.n(H),z=e(57254),p=e(91768),u=e(26096),n=(R,N)=>{var i=R.map($=>o().createElement(u.Z,(0,T.Z)({},$,{type:N,key:$.key||$.type})));return N==="more"?o().createElement(I.Z,null,i):i},m=R=>{var N=R.buttons,i=R.t,$=R.visibleNum,L=N.filter(v=>v.visible),V=$||1,q=[],W=[];if(L.length<=V)W=[...L];else if(L.length>V)W=[...L.slice(0,V)],q=[...L.slice(V)];else return"/";return o().createElement("div",{className:"cl-table__cell-action"},n(W),W.some(v=>v.visible)&&q.some(v=>v.visible)?o().createElement(o().Fragment,null,o().createElement("span",{className:"cl-pointer-divide"}),o().createElement(A.Z,{overlay:n(q,"more")},o().createElement("span",{className:"cl-pointer"},i("common.more")," ",o().createElement(z.Z,null)))):null)};m.defaultProps={visibleNum:1},j.Z=(0,p.Z)()(m)},72711:function(ie,j,e){"use strict";var y=e(77883),A=e(21888),w=e(12924),I=e.n(w),T=e(43859),H=o=>I().createElement(A.Z,o);j.Z=(0,T.Z)(H)},65749:function(ie,j,e){"use strict";var y=e(66456),A=e(55313),w=e(43185),I=e(53251),T=e(62029),H=e(57663),o=e(71577),z=e(34792),p=e(48086),u=e(12924),n=e.n(u),m=e(91768),R=e(84874),N=e(37055),i=e(18329),$=e(37882),L={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};class V extends n().Component{constructor(W){super(W);this.fileTeacherUpload=v=>{var Z=this.props.t;try{v.file&&v.file.response&&(v.file.response.data.err_msg_list?this.setState({teacherCheckTemplate:v.file.response.code,importedList:[v.file.response.data],uploadErrMsg:v.file.response.data.err_msg_list}):p.default.error(Z("upload.typeError")))}catch(E){p.default.error(Z("upload.errorTip"))}},this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{var v=this.props,Z=v.t,E=v.templateType,C=this.state,x=C.importedList,a=C.teacherCheckTemplate;if(a===""||a===1){p.default.error(Z("employeeSummary.importFail"));return}var U={access_token:window.localStorage.getItem("token"),file_name:x.map(k=>k.file_name).join(","),original_file_name:x.map(k=>k.original_file_name).join(","),template_type:E};this.props.onCreate(U)},this.getTeacherTemplate=()=>{var v=this.props.importTeacherUrl,Z=this.props.t;$.ZP.get({url:v}).then(E=>{E.data.code===0&&p.default.success(Z("study.compoundSucceed"))})},this.renderSubTitle=()=>{var v=this.props,Z=v.t,E=v.isLecturer,C=v.isTutor,x;return E?x=Z("employeeSummary.teacherImportPointsTips"):C&&(x=Z("employeeSummary.tutorImportPointsTips")),x},this.state={importedList:[],showLibErrorTip:!1,uploadConfig:{name:"file",action:"",showUploadList:!1,data:{access_token:window.localStorage.getItem("token"),template_type:this.props.templateType},onChange:this.fileTeacherUpload},uploadErrMsg:[],checkTemplate:"",teacherCheckTemplate:"",uploadAction:""}}componentDidMount(){var W=this.props,v=W.isLecturer,Z=W.isTutor,E=this.state.uploadConfig,C="";v?C=N.ZP.points.teacherImport():Z&&(C=N.ZP.points.tutorImport()),this.setState({uploadConfig:Object.assign(E,{action:C})})}componentDidUpdate(W){W.visible!==this.props.visible&&this.props.visible&&this.setState({importedList:[],showLibErrorTip:!1,uploadErrMsg:[]})}render(){var W=this.state,v=W.importedList,Z=W.uploadConfig,E=W.uploadErrMsg,C=this.props,x=C.t,a=C.visible,U=C.loading,k=[{title:x("component.fileName"),dataIndex:"original_file_name",key:"newfileName"},{title:x("component.successLabel"),dataIndex:"success_count"},{title:x("component.failedLabel"),dataIndex:"failed_count"}];return n().createElement(i.ZP,(0,T.Z)({},L,{title:x("authentication.bulkImport"),visible:a,confirmLoading:U,onCancel:this.onCancel,onOk:this.onOk}),n().createElement("div",{className:"import-score"},n().createElement("div",{className:"import-score-import"},n().createElement(o.Z,{className:"import-score-import-btn",onClick:this.getTeacherTemplate},n().createElement(R.Z,{iconClass:"icon-icon_donwloadx1"}),x("component.downloadTem")),n().createElement("span",{className:"import-score-import-tip"},this.renderSubTitle()),n().createElement(I.Z,(0,T.Z)({className:"import-score-import-btn right"},Z),n().createElement(o.Z,{type:"primary"},n().createElement(R.Z,{iconClass:"icon-import"}),v.length===0?x("component.importLabel"):x("employeeSummary.reImport")))),n().createElement("div",{className:"import-score-table"},n().createElement(A.Z,{dataSource:v,columns:k,bordered:!0,rowKey:O=>O.file_name,size:"middle",pagination:!1})),E.length>0?n().createElement("div",{className:"import-score-tip"},n().createElement("p",null,n().createElement(R.Z,{iconClass:"icon-tishi"}),x("component.errorTips"),":"),E.map((O,g)=>n().createElement("p",{key:g},O))):null))}}V.defaultProps={visible:!1,onCancel:()=>{},onOk:()=>{}},j.Z=(0,m.Z)()(V)},84009:function(ie,j,e){"use strict";var y=e(62029),A=e(12924),w=e.n(A),I=e(11092),T=e.n(I),H=e(6793),o=()=>z=>class extends w().Component{constructor(){super(...arguments);this.state={initTableClassName:""},this.handleTableSticky=()=>{var u=(0,I.findDOMNode)(this.pageRef);this.pageRef.tableRef.offsetTop+46<=u.parentNode.scrollTop?this.pageRef.tableRef.className.indexOf("fixed-table-thead")===-1&&(this.pageRef.tableRef.className="".concat(this.pageRef.tableRef.className," fixed-table-thead"),this.resetThTdWidth()):this.pageRef.tableRef.offsetTop>u.parentNode.scrollTop&&(this.pageRef.tableRef.className=this.state.initTableClassName)},this.resetThTdWidth=()=>{var u=this.pageRef.tableRef.getElementsByTagName("thead")[0];u.style.width="".concat(this.pageRef.tableRef.offsetWidth,"px");var n=u.childNodes[0];u.childNodes[1]&&(u.childNodes[1]="".concat(this.pageRef.tableRef.offsetWidth,"px")),n.style.width="".concat(this.pageRef.tableRef.offsetWidth,"px");var m=this.pageRef.tableRef.getElementsByTagName("tbody")[0].childNodes,R=!1;if(m&&m.length){try{var N=m[0].getAttribute("class");N==="ant-table-placeholder"&&(R=!0)}catch(L){console.log(L)}if(!R){var i=m[0].childNodes;if(i&&i.length){var $=i&&i.length&&Array.prototype.slice.call(i).map(L=>L.offsetWidth);n.childNodes&&n.childNodes.length&&Array.prototype.slice.call(n.childNodes).forEach((L,V)=>{L.style.width="".concat($[V],"px")}),$.map(L=>L)}}}}}componentDidMount(){var u=(0,I.findDOMNode)(this.pageRef);this.setState({initTableClassName:this.pageRef.tableRef.className}),u.parentNode.addEventListener("scroll",this.handleTableSticky),window.addEventListener("resize",this.resetThTdWidth)}componentDidUpdate(){(0,H.P2)(this.handleTableSticky,500)()}componentWillUnmount(){var u=(0,I.findDOMNode)(this.pageRef);u.parentNode.removeEventListener("scroll",this.handleTableSticky),window.removeEventListener("resize",this.resetThTdWidth)}render(){return w().createElement(z,(0,y.Z)({ref:u=>this.pageRef=u},this.props))}};j.Z=o},11449:function(ie,j,e){"use strict";e.d(j,{Z:function(){return k}});var y=e(88986),A=e(33565),w=e(12924),I=e.n(w),T=e(3115),H=e(49111),o=e(19650),z=e(62029),p=e(57663),u=e(71577),n=e(91768),m=e(28216),R=e(37055),N=e(10237);function i(O){var g=R.ZP.getHelpContentByMenuKey(),M={key:O};return N.WY.get({url:g,params:M})}var $=e(74228),L=e.n($),V=e(1164),q=e(76466),W=e(38642);class v extends I().Component{constructor(g){var M;super(g);M=this,this.getHelpContentByMenuKey=()=>{var l=this.props.defaultMenuKey;i(l).then(h=>{var S=h.data,P=S.help_url,Q=S.video_url;this.setState({videoUrl:Q,helpUrl:P})})},this.handleOpenHelpUrl=l=>{if((0,W.ve)()){window.open(l,"_blank");return}V.Z.targetTo({path:l,isExternalLink:!0})},this.handleOpenVideo=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M.props.t("helpCenter.video");M.setState(S=>({resourcePlayInfo:(0,y.Z)((0,y.Z)({},S.resourcePlayInfo),{},{resourceInfo:{originUrl:l,source:{FD:l,OD:l},contentType:"mp4"}}),previewInfo:(0,y.Z)((0,y.Z)({},S.previewInfo),{},{title:h,visible:!0,onCancel:M.handleCancelPreview})}))},this.handleCancelPreview=()=>{var l=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,y.Z)((0,y.Z)({},l),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:g.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var g=this.state,M=g.helpUrl,l=g.resourcePlayInfo,h=g.previewInfo,S=g.videoUrl,P=this.props.t;return I().createElement("div",{className:L().helpCenter},S&&I().createElement(u.Z,{type:"link",className:L()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(S)},P("helpCenter.video")),M&&I().createElement(u.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(M)},P("helpCenter.tutorial")),I().createElement(q.Z,(0,z.Z)({},l,{previewInfo:h})))}}var Z=O=>({defaultMenuKey:O.currentRoute.menuKey});v.defaultProps={defaultMenuKey:""};var E=(0,m.$j)(Z)((0,n.Z)()(v));function C(O){var g=O.extra,M=localStorage.getItem("dingPersonnel"),l=sessionStorage.getItem("dingPersonnel");return I().createElement(o.Z,null,g,M!=="dingPersonnel"&&l!=="dingPersonnel"&&(0,W.eY)("COMMONEXTRA_HELP_CENTER")&&I().createElement(E,null))}var x=C,a=e(4408);function U(O){var g=(0,w.useState)({helpCenter:(0,W.eY)("HEAD_HELP_CENTER_BUT")}),M=(0,A.Z)(g,1),l=M[0],h=O.pageContainerParams,S=h===void 0?{}:h,P=O.noPadding,Q=P===void 0?!1:P,X=O.isPersonal,ee=X===void 0?!1:X,ae=O.pageTitle,le=O.className,fe=le===void 0?"":le,Pe={extra:l.helpCenter?I().createElement(x,{extra:S.extra}):S.extra},oe=(0,y.Z)((0,y.Z)({},S),Pe);return I().createElement("div",{className:"page-container-content ".concat(Q?"page-container-noPadding":""," ").concat(ee?"page-container-content_personal_background":""," ").concat(fe)},ae&&I().createElement(a.Z,{title:ae}),ee?I().createElement(T.Z,null,O.children):I().createElement(T.Z,oe,O.children))}var k=U},89380:function(ie,j,e){"use strict";e.d(j,{Z:function(){return Re}});var y=e(62029),A=e(88986),w=e(57361),I=e(71194),T=e(57016),H=e(9754),o=e.n(H),z=e(12924),p=e.n(z),u=e(91768),n=e(80991),m=e(27010),R=e(6793),N=e(3407),i=(0,R.me)(),$=N.Z[i].employeeSummary,L=pe=>{var b;return pe||(b=$.certificateGetTime),b},V=pe=>{var b;return pe||(b=$.certificateInvalidScore),b},q=pe=>{var b;return pe.length===0&&(b=$.chooseTeacher),b},W=e(84874),v=e(31151),Z=e(43859);class E extends p().Component{constructor(){super(...arguments);this.state={visible:!1,teacher:[]},this.handleSelectTeacher=()=>{this.setState({visible:!0})},this.handleCancel=()=>{this.setState({visible:!1})},this.handleOk=b=>{this.handleSetData(b),this.setState({visible:!1})},this.handleDelete=(b,Y)=>{b.splice(Y,1),this.handleSetData(b)},this.handleSetData=b=>{var Y=this.props.defaultFieldList,D=Y.rangeList,_=(0,A.Z)((0,A.Z)({},Y),{},{rangeList:(0,A.Z)((0,A.Z)({},D),{},{user:b})});this.props.formik.setFieldValue("employeeRange",_)}}componentWillReceiveProps(b){var Y=b.defaultFieldList,D=Y.rangeList.user;this.setState({teacher:D})}render(){var b=this.state.teacher,Y=this.props.prefixCls;return p().createElement("div",{className:Y},b.map((D,_)=>p().createElement("div",{className:"".concat(Y,"__name"),key:D.id},D.name,p().createElement("span",{className:"".concat(Y,"__name__delete"),onClick:()=>this.handleDelete(b,_)},p().createElement(W.Z,{iconClass:"icon-guanbi1"})))),p().createElement("span",{className:"".concat(Y,"__add"),onClick:this.handleSelectTeacher},p().createElement(W.Z,{iconClass:"iconf-add-man"})),p().createElement(v.Z,{visible:this.state.visible,selectedArr:b,onOk:this.handleOk,onCancel:this.handleCancel,showTab:!0,multiple:!0}))}}E.defaultProps={prefixCls:"teacher-selector",defaultFieldList:{rangeType:2,rangeList:{dept:[],post:[],group:[],user:[]}}};var C=(0,Z.Z)((0,n.$j)(E)),x=e(43358),a=e(34041),U=a.Z.Option;class k extends p().Component{render(){var b=this.props,Y=b.options,D=b.onCateGoryChange,_=b.integralType,B=b.placeholder,J=b.disabled;return p().createElement("div",{className:"modify-type"},p().createElement("div",{className:"modify-type-value"},p().createElement(a.Z,{style:{width:200},placeholder:B,onChange:D,value:_,disabled:J},Y&&Y.map(me=>p().createElement(U,{value:me.name,key:me.value},me.value)))))}}var O=(0,Z.Z)((0,u.Z)()((0,n.$j)(k))),g=e(88983),M=e(47933);class l extends p().Component{render(){var b=this.props,Y=b.modifyType,D=b.onTypeChange,_=b.t,B=b.hideReduce,J=B===void 0?!1:B;return p().createElement("div",{className:"modify-type"},p().createElement("div",{className:"modify-type-value"},p().createElement(M.ZP.Group,{onChange:D,value:Y},p().createElement(M.ZP,{value:"award"},_("setting.rewardPoints")),!J&&p().createElement(M.ZP,{value:"reduce"},_("setting.reducePoints")),Y==="reduce"&&p().createElement("span",null,_("scoreRankingList.minusPointsTips")))))}}var h=(0,Z.Z)((0,u.Z)()((0,n.$j)(l)));class S extends p().Component{render(){var b=this.props,Y=b.label,D=b.defaultFieldList,_=D===void 0?{}:D,B=_.rangeList.user,J=B===void 0?[]:B;return p().createElement("div",{className:"single-object"},p().createElement("div",{className:"single-object-label"},Y),p().createElement("div",{className:"single-object-value"},J.map(me=>p().createElement("div",{className:"single-object-item",key:me.id},me.name))))}}var P=(0,Z.Z)((0,u.Z)()((0,n.$j)(S))),Q=e(62615),X=e(52670),ee=e(70075),ae=e(72711),le=e(2396),fe=e(18329),Pe=e(34773),oe={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};class Oe extends p().Component{constructor(b){var Y;super(b);Y=this,this.componentDidMount=()=>{this.getPointsCategory()},this.handleOptions=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_=arguments.length>1?arguments[1]:void 0,B=Y.props.type;return _==="award"?B==="lecture"?D.filter(J=>J.type==="award"&&J.name==="contributionAndHelp"):D.filter(J=>J.type==="award"):B==="lecture"?D.filter(J=>J.type==="deduct"&&J.name==="lowAndContent"):D.filter(J=>J.type==="deduct")},this.handleBeforeCreate=()=>{var D=this.props,_=D.t,B=D.type;this.refFormik.submitForm(),this.refFormik.runValidations().then(J=>{if(!Object.keys(J).length)var me=T.Z.warning({title:_("setting.modifyTitle"),content:_("setting.modifyContent"),okText:_("component.iKnow"),onOk:()=>{me.destroy();var ne=this.refFormik.state.values,ue=ne.employeeRange,de=ne.reason,Te=ne.datePicker,Ze=ne.modifyType,Me=ne.integralType,De=ne.points,Le=(0,Pe.b)(ue.rangeList),Ee={time:new Date(Te).getTime(),behavior:de,points:Ze==="award"?De.toString():parseInt(De*-1).toString(),integral_type:Me};B==="single"?Ee.user_ids=Le.userIds.join(","):B==="lecture"?Ee.teacherIds=Le.userIds.join(","):(Ee.group_ids=ue.rangeType===2?Le.groupIds.join(","):"",Ee.department_ids=ue.rangeType===2?Le.deptIds.join(","):"",Ee.user_ids=ue.rangeType===2?Le.userIds.join(","):"",Ee.post_ids=ue.rangeType===2?Le.postIds.join(","):""),this.props.onCreate(Ee)}})})},this.handleBeforeCancel=()=>{var D=this.props.onCancel;D()},this.getPointsCategory=(0,w.Z)(o().mark(function D(){var _,B,J;return o().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,(0,m.fV)();case 2:_=ne.sent,B=_.data,J=_.success,J==="true"&&Y.setState({pointsOptions:B.list||[]});case 6:case"end":return ne.stop()}},D)})),this.handleTypeChange=D=>{var _=this.state.pointsOptions,B=this.handleOptions(_,D.target.value);this.setState({options:B},()=>{this.setValues({modifyType:D.target.value,integralType:B[0]&&B[0].name})})},this.handleOptionChange=D=>{this.setValues({integralType:D})},this.setValues=D=>{var _=this.refFormik.state.values,B=(0,A.Z)((0,A.Z)({},_),D);this.refFormik.setValues(B),this.setState({initialParams:B},()=>{})},this.handleNumChange=D=>{this.setValues({points:parseInt(D)})},this.state={initialParams:{employeeRange:{rangeType:2,rangeList:{dept:[],post:[],group:[],user:[]}},reason:"",points:"0",modifyType:"award",datePicker:null,integralType:0},pointsOptions:[]}}componentWillReceiveProps(b){if(this.props.visible!==b.visible&&b.visible){var Y=this.handleOptions(this.state.pointsOptions,"award"),D={employeeRange:b.employeeRange,reason:"",points:"",datePicker:(0,R.k7)(new Date),modifyType:"award",integralType:Y[0]&&Y[0].name};this.setState({initialParams:D,options:Y},()=>{this.refFormik.setValues(D)})}}render(){var b=this.props,Y=b.prefixCls,D=b.visible,_=b.type,B=b.t,J=this.state,me=J.initialParams,ne=J.options;return D?p().createElement(fe.ZP,{wrapClassName:Y,visible:D,title:this.props.t("setting.pointsModify"),onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},p().createElement(n.J9,{ref:ue=>{this.refFormik=ue},initialValues:me,render:ue=>{var de=ue.values;return p().createElement(n.l0,{className:"cl-form modify-points-form"},p().createElement(n.gN,(0,y.Z)({component:_==="mutiple"?Q.ww:_==="single"?P:C,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:B("setting.modifyObject"),defaultFieldList:de.employeeRange,validate:X.FI,mode:["part"],orgProps:{title:B("employeeSummary.chooseRegisteredObject")},required:!0,onlyUser:!0},oe)),p().createElement(n.gN,(0,y.Z)({component:h,name:"modifyType ",label:B("setting.modifyType"),required:!0,hideReduce:_==="lecture",type:"Custom",onTypeChange:this.handleTypeChange,modifyType:de.modifyType},oe)),p().createElement(n.gN,(0,y.Z)({component:O,name:"integralType",label:de.modifyType==="award"?B("setting.addType"):B("setting.reduceType"),required:!0,disabled:_==="lecture",integralType:de.integralType,type:"Custom",placeholder:B("setting.selectPointsType",{type:de.modifyType==="award"?B("setting.reward"):B("setting.reduce")}),validate:Te=>(0,le.QK)(Te?String(Te):"",B("setting.selectPointsType",{type:de.modifyType==="award"?B("setting.reward"):B("setting.reduce")})),onCateGoryChange:this.handleOptionChange,options:ne},oe)),p().createElement(n.gN,(0,y.Z)({component:ae.Z,name:"points",label:B("setting.modifyNum"),required:!0,min:0,max:99999,precision:0,onChange:this.handleNumChange,value:Number(de.points),validate:V},oe)),p().createElement(n.gN,(0,y.Z)({component:Q.Mt,displayType:"Custom",name:"datePicker",label:B("setting.modifyDate"),required:!0,currentDay:!0,defaultFieldList:de.datePicker,validate:L},oe)),p().createElement(n.gN,(0,y.Z)({component:ee.Z,name:"reason",label:B("personal.pointsBehavior"),required:!0,type:"text",char:!0,defaultValue:de.reason,validate:Te=>(0,le.QK)(Te,B("employeeSummary.limitReasonWords")),placeholder:B("employeeSummary.limitReasonWords"),maxLength:30},oe)))}})):null}}Oe.defaultProps={type:"mutiple",employeeRange:{rangeType:2,rangeList:{dept:[],post:[],group:[],user:[]}}};var Re=(0,u.Z)()(Oe)},27010:function(ie,j,e){"use strict";e.d(j,{fV:function(){return w},c4:function(){return I},lT:function(){return H},WN:function(){return o},Pt:function(){return z},T7:function(){return p}});var y=e(10237),A=e(37055);function w(){var u=A.ZP.points.getPointsCategory();return y.WY.get({url:u})}function I(){var u=A.ZP.points.getChangeReason();return y.WY.get({url:u})}function T(u){var n=u.integral_type,m=u.update_reason,R=u.begin_time,N=u.end_time,i=CONFIG.points.exportPointsDetail();return request.post({url:i,params:{integral_type:n,update_reason:m,begin_time:R,end_time:N}})}function H(u){var n=A.ZP.points.submitPointsImport();return y.qg.post({url:n,data:u})}function o(u){var n=u.department_id,m=u.key_word,R=u.page_number,N=u.page_size,i=A.ZP.points.getPointsTableList();return y.WY.get({url:i,params:{department_id:n,key_word:m,page_number:R,page_size:N}})}function z(u,n){var m=n.begin_time,R=n.end_time,N=n.page_number,i=n.page_size,$=n.integral_type,L=n.update_reason,V=A.ZP.points.getUserPointsDetail(u);return y.WY.get({url:V,params:{begin_time:m,end_time:R,page_number:N,page_size:i,integral_type:$,update_reason:L}})}function p(u){var n=u.user_ids,m=u.department_ids,R=u.group_ids,N=u.post_ids,i=u.time,$=u.teacherIds,L=u.points,V=u.behavior,q=u.integral_type,W=A.ZP.points.manualPoints();return y.WY.post({url:W,data:{user_ids:n,department_ids:m,group_ids:R,post_ids:N,time:i,teacherIds:$,points:L,behavior:V,integral_type:q}})}},87497:function(ie,j,e){"use strict";e.d(j,{Z:function(){return U}});var y=e(62029),A=e(34792),w=e(48086),I=e(12924),T=e.n(I),H=e(91768),o=e(55446),z=e(18329),p=e(10237),u=e(37055),n=e(6793),m=e(2396),R=e(80991),N=e(7584),i=e(70075),$=e(69849),L=e(22385),V=e(31097),q=e(47673),W=e(4107),v=e(43859),Z=e(68628);class E extends T().Component{constructor(){super(...arguments);this.onChange=O=>{var g=O.target.value;g=g.replace(/[^\d]/g,""),this.props.onChange(g)}}render(){var O=this.props,g=O.value,M=O.t;return T().createElement("div",null,T().createElement(W.Z,{style:{width:"130px"},onChange:this.onChange,value:g}),"\xA0",M("payment.moneyUnit"),"\xA0\xA0\xA0",T().createElement(V.Z,{title:M("lecturerPage.courseFeeTip")},T().createElement(Z.Z,null)))}}var C=(0,v.Z)((0,R.$j)((0,H.Z)()(E))),x={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}};class a extends T().Component{constructor(O){super(O);this.onCancel=()=>{var g=this.props.onCancel;g&&this.props.onCancel()},this.onOk=()=>{this.formRef.submitForm()},this.handleLevel=g=>{var M=this.props,l=M.t,h=M.lecturerType,S=this.props.level?u.ZP.Lecturer.levelEdit(this.props.level.id):u.ZP.Lecturer.levelAdd(),P={id:this.props.level.id||"",name:(0,n.fy)(g.name),standard:g.standard,type:h||g.type,pay_standard:g.pay_standard};p.WY.post({url:S,data:P}).then(Q=>{if(Q.data.id){var X=this.props.level?l("lecturerPage.editSuccess"):l("lecturerPage.addSuccess");w.default.success(X),this.props.onHandleList(Q.data.id)}})},this.initRef=g=>{this.formRef=g},this.state={initialValues:{id:"",type:"inside",name:"",standard:"",pay_standard:""}},this.validate={checkTitle:g=>{var M=O.t,l;return(0,n.fy)(g)?(0,m.$s)((0,n.fy)(g))>32&&(l=M("lecturerPage.limitWords")):l=M("lecturerPage.enterGradeNameTip"),l},checkDescription:g=>{var M=O.t,l;return g&&(0,n.fy)(g).length>500&&(l=M("validation.limitedFiveHundred")),l}}}componentDidMount(){var O=this.state.initialValues,g=this.props.level;g&&(Object.keys(O).forEach(M=>{O[M]=g[M]}),this.setState({initialValues:O}))}render(){var O=this.props,g=O.level,M=g===void 0?{}:g,l=O.visible,h=O.t,S=O.lecturerType,P=S===void 0?"":S,Q={okText:h("common.ok"),cancelText:h("common.cancel"),size:"medium",destroyOnClose:!0,bodyStyle:{padding:"20px"},maskClosable:!1},X=h(M?"lecturerPage.editGrade":"lecturerPage.newGrade"),ee=this.state.initialValues;return T().createElement(z.ZP,(0,y.Z)({},Q,{visible:l,title:X,onCancel:this.onCancel,onOk:this.onOk}),T().createElement(R.J9,{ref:this.initRef,initialValues:ee,onSubmit:this.handleLevel,render:ae=>T().createElement(R.l0,null,T().createElement(R.gN,(0,y.Z)({name:"type",required:!0,label:h("lecturerPage.levelType"),component:$.Z,defaultValue:P!==""?P:ae.values.type,disabled:P!==""},x)),T().createElement(R.gN,(0,y.Z)({name:"name",required:!0,displayType:"Custom",label:h("lecturerPage.gradeName"),defaultValue:ae.values.name,component:N.Z,validate:le=>this.validate.checkTitle(le),maxLength:64,placeholder:h("lecturerPage.limitWords")},x)),T().createElement(R.gN,(0,y.Z)({name:"standard",displayType:"Custom",label:h("lecturerPage.levelDescription"),defaultValue:ae.values.standard,component:i.Z,validate:le=>this.validate.checkDescription(le),placeholder:h("lecturerPage.enterTextareaTip")},x)),T().createElement(R.gN,(0,y.Z)({name:"pay_standard",label:h("lecturerPage.courseFeeStandard"),defaultValue:ae.values.pay_standard,component:C},x)))}))}}var U=(0,H.Z)()(a)},69849:function(ie,j,e){"use strict";var y=e(88983),A=e(47933),w=e(12924),I=e.n(w),T=e(91768),H=e(43859),o=e(80991);class z extends I().Component{constructor(u){super(u);this.onChange=n=>{var m=n.target.value;this.props.onChange(m),this.props.handleChange&&this.props.handleChange(m)},this.options=[{label:u.t("lecturerPage.internalLecturer"),value:"inside"},{label:u.t("lecturerPage.externalLecturer"),value:"outside"}]}render(){var u=this.props,n=u.disabled,m=n===void 0?!1:n,R=u.defaultValue;return I().createElement("div",null,I().createElement(A.ZP.Group,{options:this.options,onChange:this.onChange,defaultValue:R,disabled:m}))}}j.Z=(0,H.Z)((0,o.$j)((0,T.Z)()(z)))},64065:function(ie,j,e){"use strict";var y=e(62029),A=e(88986),w=e(81211),I=e(12924),T=e.n(I),H=e(36546),o=-1;class z extends T().Component{render(){var m=this.props,R=m.isOver,N=m.connectDragSource,i=m.connectDropTarget,$=m.moveRow,L=(0,w.Z)(m,["isOver","connectDragSource","connectDropTarget","moveRow"]),V=(0,A.Z)((0,A.Z)({},L.style),{},{cursor:"move"}),q=L.className;return R&&(L.index>o&&(q+=" drop-over-downward"),L.index<o&&(q+=" drop-over-upward")),N(i(T().createElement("tr",(0,y.Z)({},L,{className:q,style:V}))))}}var p={beginDrag(n){return o=n.index,{index:n.index}}},u={drop(n,m){var R=m.getItem().index,N=n.index;R!==N&&(n.moveRow(R,N),m.getItem().index=N)}};j.Z=(0,H.GR)("row",u,(n,m)=>({connectDropTarget:n.dropTarget(),isOver:m.isOver()}))((0,H.Ej)("row",p,n=>({connectDragSource:n.dragSource()}))(z))},10615:function(ie,j,e){"use strict";e.r(j),e.d(j,{default:function(){return Et}});var y=e(62029),A=e(59250),w=e(13013),I=e(30887),T=e(99210),H=e(88983),o=e(47933),z=e(71194),p=e(57016),u=e(22385),n=e(31097),m=e(57663),R=e(71577),N=e(33565),i=e(88986),$=e(34792),L=e(48086),V=e(57361),q=e(14965),W=e(11448),v=e(43358),Z=e(34041),E=e(9754),C=e.n(E),x=e(12924),a=e.n(x),U=e(91768),k=e(84391),O=e(49101),g=e(90631),M=e(28216),l=e(50361),h=e.n(l),S=e(55446),P=e(80991),Q=e(69849),X=e(77576),ee=e(59314),ae=e(24144);class le extends a().Component{constructor(c){super(c);this.onUploadChange=t=>{var s=t.fileList,r=s.length>0?s[0].url:"";this.setState({avatar:r},()=>{this.setFiledValue(r)})},this.handleSwitch=t=>{t?this.setState({type:""}):this.setState({type:"crop"})},this.state={avatar:"",type:"crop"}}componentDidMount(){this.props.type==="inside"?this.setState({avatar:this.props.insideAvatar}):this.setState({avatar:this.props.outsideAvatar})}UNSAFE_componentWillReceiveProps(c){c.type!==this.props.type&&this.setState({avatar:c.type==="inside"?c.insideAvatar:c.outsideAvatar}),c.insideAvatar&&c.insideAvatar!==this.props.insideAvatar&&this.setState({avatar:c.insideAvatar})}setFiledValue(c){this.props.type==="inside"?this.props.formik.setFieldValue("inside_avatar",c):this.props.formik.setFieldValue("outside_avatar",c)}render(){var c=this.state,t=c.avatar,s=c.type,r=this.props.t;return a().createElement("div",{className:"lecturer_avatar"},a().createElement("div",{style:{marginBottom:"7px"}},a().createElement(ee.Z,{defaultChecked:!1,onChange:this.handleSwitch}),a().createElement("span",{className:"item-margin"},r("resourceLibrary.originUpload"))),a().createElement("div",null,a().createElement(ae.G2,{imageContainerClassName:"upload_avatar_container",fileList:t?[{url:t}]:[],uploadConfig:{accept:"jpeg, jpg, png"},onUploadedListChange:this.onUploadChange,size:{value:500,unit:"kb"},changeTip:r("setting.change"),clip:s,imgCropConfig:{widthScale:1,heightScale:1}})),a().createElement("div",{className:"lecturer_avatar_tip"},r("lecturerPage.avatarTypeTip")),a().createElement("div",{className:"lecturer_avatar_tip"},r("lecturerPage.avatarSizeTip")),a().createElement("div",{className:"lecturer_avatar_tip"},r("lecturerPage.avatarMeasureTip")))}}var fe=(0,P.$j)((0,U.Z)()(le)),Pe=e(31459),oe=e(43859);class Oe extends a().Component{constructor(c){super(c);this.onChange=t=>{var s=t.target.value;this.props.onChange(s)},this.options=[{label:c.t("lecturerPage.male"),value:0},{label:c.t("lecturerPage.female"),value:1}]}render(){var c=this.props.value;return a().createElement("div",null,a().createElement(o.ZP.Group,{options:this.options,onChange:this.onChange,value:c}))}}var Re=(0,oe.Z)((0,P.$j)((0,U.Z)()(Oe))),pe=e(48736),b=e(27049),Y=e(87497),D=e(10237),_=e(37055),B=Z.Z.Option;class J extends a().Component{constructor(c){super(c);this.onCancelAddLevel=()=>{this.setState({AddLevelVisible:!1})},this.getLevelList=t=>{var s=this.state.level,r=[];D.WY.get({url:_.ZP.Lecturer.getLevelList(),params:{type:this.props.form.values.type||""}}).then(d=>{d.data.list.forEach(f=>{r.push(f.id)}),t&&t==="filter"&&this.setState({level:r.indexOf(s)>-1?s:""}),this.setState({levelList:d.data.list})})},this.handleSelectLevel=t=>{this.props.onChange(t)},this.handleAddLevel=()=>{this.setState({AddLevelVisible:!0})},this.AddLevelSuccess=t=>{this.getLevelList(),this.setState({AddLevelVisible:!1}),this.handleSelectLevel(t)},this.state={levelList:[],AddLevelVisible:!1}}componentDidMount(){this.props.onRef&&this.props.onRef(this),this.getLevelList("filter")}render(){var c=this.props,t=c.value,s=c.t,r=c.lecturerType,d=this.state,f=d.levelList,F=d.AddLevelVisible;return a().createElement("div",null,a().createElement(Z.Z,{style:{width:482},placeholder:s("lecturerPage.selectGrade"),value:t,onChange:this.handleSelectLevel,dropdownRender:K=>a().createElement("div",null,K,a().createElement(b.Z,{style:{margin:"4px 0"}}),a().createElement("div",{className:f.length===0?"add-lecturer-name-level":"",onClick:this.handleAddLevel,style:{padding:"8px",cursor:"pointer"}},a().createElement(O.Z,null),s("lecturerPage.newGrade")))},f.map(K=>a().createElement(B,{value:K.id,key:K.id},K.name))),F&&a().createElement(Y.Z,{visible:F,onCancel:this.onCancelAddLevel,level:"",lecturerType:r,onHandleList:this.AddLevelSuccess}))}}var me=(0,oe.Z)((0,P.$j)((0,U.Z)()(J))),ne=e(78138),ue=e.n(ne),de=e(6793);class Te extends a().Component{constructor(){super(...arguments);this.handleChangeDate=(c,t)=>{var s=t?(0,de.jZ)(t):"";this.props.onChange(s)}}render(){var c=this.props.value;return a().createElement("div",null,a().createElement(W.Z,{defaultValue:c?ue()(c):"",format:"YYYY-MM-DD",value:c?ue()(c):"",onChange:this.handleChangeDate}))}}var Ze=(0,oe.Z)((0,P.$j)((0,U.Z)()(Te))),Me=e(67620);class De extends a().Component{constructor(){super(...arguments);this.handleChange=c=>{this.props.formik.setFieldValue("lecturer_describe",c)}}render(){var c=this.props.value;return a().createElement("div",null,a().createElement(Me.Z,{style:{width:"776px"},ref:t=>this.editorInstance=t,onChange:t=>this.handleChange(t),controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","image","undo","redo"],placeholder:c||""}))}}var Le=(0,oe.Z)((0,P.$j)((0,U.Z)()(De))),Ee=e(62615),be=e(7584),Ae=e(28531),xe=e(18329),ve={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}};class Ue extends a().Component{constructor(c){super(c);this.onCancel=()=>{var t=this.props.onCancel;t&&this.props.onCancel()},this.handleSubmit=()=>{this.formRef.submitForm()},this.handleAdd=t=>{var s={lecturer_name:t.type==="inside"?t.lecturer_name:t.lecturer_outside_name,avatar:t.type==="inside"?t.inside_avatar:t.outside_avatar,sex:t.sex,mobile:t.mobile||"",type:t.type,user_id:t.type==="inside"?t.user_id:"",level:t.level||"",tagList:t.adept_field.tagsNameList||[],adept_field:t.adept_field.tagsNameList?t.adept_field.tagsNameList.map(r=>r.tag_name).join(","):"",lecturer_describe:t.lecturer_describe||"",level_start_time:t.level_start_time,qy_we_chat_vo:t.qy_we_chat_vo};this.handleLecturerWithApi(s)},this.handleLecturerWithApi=t=>{var s=this.props.t,r=this.props.lecturerDetails.id?_.ZP.Lecturer.lecturerEdit(this.props.lecturerDetails.id):_.ZP.Lecturer.lecturerAdd();D.WY.post({url:r,data:t}).then(d=>{if(d.data.id){var f=this.props.lecturerDetails.id?s("lecturerPage.editSuccess"):s("lecturerPage.addSuccess");if(L.default.success(f),this.props.lecturerDetails.id){var F={tags:t.tagList,resourceId:this.props.lecturerDetails.id,resourceType:"lecturer"};(0,Ae.tB)(F)}else if(t.adept_field&&t.adept_field.length){var K={tags:t.tagList,resourceId:d.data.id,resourceType:"lecturer"};(0,Ae.tB)(K)}this.props.onHandleList()}})},this.handleTelAndMail=t=>{var s=t.target.value.trim(),r=this.state.formError;s&&s.length>30?r.mobile=this.props.t("validation.limitedThirty"):r.mobile="",this.setState(r)},this.initRef=t=>{this.formRef=t},this.handleChangeType=t=>{t==="outside"&&this.formRef.setFieldValue("lecturer_outside_name",this.formRef.state.values.lecturer_outside_name?this.formRef.state.values.lecturer_outside_name:""),this.childCheckLevel.handleSelectLevel(""),setTimeout(()=>{this.childCheckLevel.getLevelList()},500)},this.updateLectureInfo=t=>{this.setState({lectureInfo:(0,i.Z)((0,i.Z)({},this.state.lectureInfo),t)})},this.state={defaultAvatar:"https://oss.coolcollege.cn/1790708689137700864.png",initialValues:{inside_avatar:"https://oss.coolcollege.cn/1790708689137700864.png",outside_avatar:"https://oss.coolcollege.cn/1790708689137700864.png",type:"inside",lecturer_name:"",lecturer_outside_name:"",sex:0,level:"",level_start_time:"",mobile:"",lecturer_describe:"",adept_field:""},dealFinish:!1,lectureInfo:{default_avatar:"https://oss.coolcollege.cn/1790708689137700864.png",lectureSyncUserId:"",lectureSourceType:""}},this.validate={checkName:t=>{var s=c.t,r;return t.trim()||(r=s("course.emptyLecturers")),r},checkLevel:t=>{var s=c.t,r;return t||(r=s("lecturerPage.selectGrade")),r},checkLevelStart:t=>{var s=c.t,r;return t||(r=s("lecturerPage.selectLevelStart")),r}}}componentDidMount(){var c=this.props.lecturerDetails,t=this.state,s=t.initialValues,r=t.defaultAvatar,d=t.lectureInfo;c?(Object.keys(this.state.initialValues).forEach(f=>{s[f]=c[f]}),s.type==="outside"&&(s.lecturer_outside_name=c.lecturer_name,s.lecturer_name=""),s.outside_avatar=s.type==="outside"?c.avatar:r,s.inside_avatar=s.type==="inside"?c.avatar:r,d.lectureSyncUserId=c.sync_user_id||"",d.lectureSourceType=c.source_type||"",this.setState({initialValues:s,dealFinish:!0,lectureInfo:d})):this.setState({dealFinish:!0})}render(){var c=this.props,t=c.t,s=c.lecturerDetails,r={okText:t("common.ok"),cancelText:t("common.cancel"),size:"large",destroyOnClose:!0,bodyStyle:{padding:"20px"},maskClosable:!1},d=this.state,f=d.initialValues,F=d.dealFinish,K=d.lectureInfo,te=s.id?t("lecturerPage.editLecturer"):t("lecturerPage.newLecturer"),ye={resourceType:"lecturer",resourceId:s.id};return a().createElement("div",null,a().createElement(xe.ZP,(0,y.Z)({},r,{visible:this.props.visible,title:te,onCancel:this.onCancel,onOk:this.handleSubmit}),a().createElement("div",{className:"addLevel"},F&&a().createElement(P.J9,{ref:this.initRef,initialValues:f,onSubmit:this.handleAdd,render:G=>a().createElement(P.l0,null,a().createElement("div",{className:"addLevel_lecturer_avatar_container"},a().createElement(P.gN,(0,y.Z)({name:"avatar",required:!0,component:fe,defaultValue:G.values.inside_avatar,type:G.values.type,insideAvatar:G.values.inside_avatar,outsideAvatar:G.values.outside_avatar},ve))),a().createElement(P.gN,(0,y.Z)({name:"type",required:!0,label:t("lecturerPage.lecturerType"),defaultValue:G.values.type,disabled:!1,component:Q.Z,handleChange:se=>this.handleChangeType(se)},ve)),G.values.type==="outside"?a().createElement(P.gN,(0,y.Z)({name:"lecturer_outside_name",required:!0,displayType:"Custom",label:t("lecturerPage.lecturer"),defaultValue:G.values.lecturer_outside_name,value:G.values.lecturer_outside_name,component:be.Z,validate:se=>this.validate.checkName(se),maxLength:10,style:{width:"200px"},placeholder:t("lecturerPage.inputNameTip")},ve)):a().createElement(P.gN,(0,y.Z)({name:"lecturer_name",required:!0,label:t("lecturerPage.chooseLecturer"),defaultValue:G.values.lecturer_name,value:G.values.lecturer_name,lectureInfo:K,updateLectureInfo:se=>this.updateLectureInfo(se),validate:se=>this.validate.checkName(se),component:Pe.Z},ve)),a().createElement(P.gN,(0,y.Z)({name:"sex",required:!0,label:t("lecturerPage.sex"),defaultValue:G.values.sex,component:Re},ve)),a().createElement(P.gN,(0,y.Z)({name:"level",required:!0,label:t("lecturerPage.selectGrade"),defaultValue:G.values.level,validate:se=>this.validate.checkLevel(se),component:me,lecturerType:G.values.type,onRef:se=>{this.childCheckLevel=se}},ve)),a().createElement(P.gN,(0,y.Z)({name:"level_start_time",required:!0,label:t("lecturerPage.officeTimed"),defaultValue:G.values.level_start_time,value:G.values.level_start_time,validate:se=>this.validate.checkLevelStart(se),component:Ze},ve)),a().createElement(P.gN,(0,y.Z)({name:"mobile",displayType:"Custom",label:t("lecturerPage.contact"),defaultValue:G.values.mobile,component:be.Z,width:"482px",placeholder:t("lecturerPage.telAndMail")},ve)),a().createElement(P.gN,(0,y.Z)({name:"lecturer_describe",label:t("lecturerPage.introduction"),defaultValue:G.values.lecturer_describe,component:Le,value:G.values.lecturer_describe,width:"482px",displayType:"Custom"},ve)),a().createElement(P.gN,(0,y.Z)({name:"adept_field",label:t("lecturerPage.tags"),defaultValue:G.values.adept_field,value:G.values.adept_field,component:Ee.QS,placeholder:t("lecturerPage.telAndMail"),defaultFieldList:ye,displayType:"Custom"},ve)))}))))}}var Be=(0,U.Z)()(Ue),Ke=W.Z.RangePicker;class $e extends a().Component{constructor(c){var t;super(c);t=this,this.handleChangeDate=(r,d)=>{var f=this.state.searchPrams,F=d.map(G=>new Date(G)),K=(0,N.Z)(F,2),te=K[0],ye=K[1];this.setState({searchPrams:(0,i.Z)((0,i.Z)({},f),{},{start_time:te.getTime(),end_time:ye.getTime()})})},this.handleChangeRecordType=r=>{var d=r.target.value,f=this.state.searchPrams;this.setState({searchPrams:(0,i.Z)((0,i.Z)({},f),{},{lecturer_record_type:d})})},this.handleExport=(0,V.Z)(C().mark(function r(){var d,f;return C().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return d=t.props.t,K.next=3,D.WY.post({url:_.ZP.Lecturer.exportBaseInfo(),data:(0,i.Z)({},t.state.searchPrams)});case 3:f=K.sent,f.data.code===0&&(L.default.success(d("study.compoundSucceed")),t.props.handleOnCancel());case 5:case"end":return K.stop()}},r)})),this.handleOnCancel=()=>{this.props.handleOnCancel()};var s=c.params;this.state={searchPrams:(0,i.Z)({lecturer_record_type:"TEACHING",start_time:"",end_time:""},s)},this.recordTypeList=[{value:"TEACHING",label:c.t("lecturerPage.courseRecord")},{value:"SCROE",label:c.t("lecturerPage.integralRecord")},{value:"CLASSPAY",label:c.t("lecturerPage.courseFeeRecord")}]}render(){var c=this.props,t=c.visible,s=c.t,r=this.state.searchPrams;return a().createElement(xe.ZP,{title:s("common.detailExport"),visible:t,onOk:this.handleExport,onCancel:this.handleOnCancel},a().createElement("ul",{className:"lecture_detail-record"},a().createElement("li",null,s("lecturerPage.detailRecordType"),"\uFF1A",a().createElement(o.ZP.Group,{options:this.recordTypeList,onChange:this.handleChangeRecordType,value:r.lecturer_record_type})),a().createElement("li",null,s("lecturerPage.recordTime"),"\uFF1A",a().createElement(Ke,{format:"YYYY-MM-DD",onChange:this.handleChangeDate}))))}}var Ve=(0,U.Z)()($e),Fe=e(96172),yt=e(14781),je=e(53431),we=e(36546),Ye=e(57068),He=e(44289),ze=e(7145),Ge=e.n(ze),ke=e(76651),Qe=e(2310),Je=e(28107),Xe=e(64065),qe=e(36202),Se=e(84874),et=e(60667),tt=e(16598),ge=e(86726),at=e(79284),st=he=>({userInfo:he.user});class rt extends a().Component{constructor(){var c;super(...arguments);c=this,this.state={data:[],coursesVisible:!0,lecturer:"",latojaVisible:!1,referenceWithOtherConfig:{visible:!1,type:"lecturer",operation:"delete",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList},recordProps:{userId:"",visible:!1},dataTotal:0,pageConfig:{page_number:1,page_size:20},showCourseSelector:!1,defaultSelectedCourses:[],allowActions:(0,ge.V9)("lecturerList",this.props.userInfo.modules),params:this.props.params,isRefresh:this.props.isRefresh},this.onCancelRecord=()=>{this.setState(t=>({recordProps:(0,i.Z)((0,i.Z)({},t.recordProps),{},{visible:!1,userId:""})}))},this.onOfflineDuration=()=>{var t=this.props.t;return a().createElement(n.Z,{color:"white",placement:"topRight",trigger:["hover","click"],title:()=>a().createElement("div",null,a().createElement("h3",null,t("lecturerPage.coursesStandard")),a().createElement("div",{fontSize:"12px",style:{color:"#333"}},t("lecturerPage.theCourseDuration")))},a().createElement("span",null,t("lecturerPage.offlineDuration")),a().createElement(Se.Z,{iconClass:"icon-shuoming",color:"#8a8a8a"}))},this.onCoursesTaughtDuration=()=>{var t=this.props.t;return a().createElement(n.Z,{color:"white",placement:"topRight",trigger:["hover","click"],title:()=>a().createElement("div",null,a().createElement("h3",null,t("lecturerPage.coursesStandard")),a().createElement("div",{style:{color:"#333"}},t("lecturerPage.video")),a().createElement("div",{style:{color:"#333"}},t("lecturerPage.audio")),a().createElement("div",{style:{color:"#333"}},t("lecturerPage.otherContents")),a().createElement("div",{style:{color:"#333"}},t("lecturerPage.LearningProject")))},a().createElement("span",null,t("lecturerPage.coursesTaughtDuration")),a().createElement(Se.Z,{iconClass:"icon-shuoming",color:"#8a8a8a"}))},this.components={body:{row:localStorage.getItem("dingPersonnel")!=="dingPersonnel"?Xe.Z:!1}},this.operate=(t,s)=>{var r=_.ZP.Lecturer.lecturerUpdateStatus(t);D.WY.post({url:r,data:{status:s===0?1:0}}).then(d=>{d.data.update==="true"&&L.default.success(this.props.t("study.updateSuccess")),this.getLecturerList(this.props.params)})},this.edit=(t,s)=>{s!==1&&this.props.onEdit(t)},this.remove=(t,s,r)=>{s===1||r>0||this.props.onRemove(t,()=>{this.getLecturerList(this.props.params)})},this.getLecturerList=()=>{var t=this.state.pageConfig;this.setState({isLoading:!0},()=>{D.WY.get({url:_.ZP.Lecturer.getLecturerList(),params:(0,i.Z)((0,i.Z)({},this.props.params),t)}).then(s=>{s.data.list=s.data.list.map(r=>(r.create_time=(0,de.p6)(+r.create_time,"yyyy.MM.dd hh:mm"),r)),this.setState({isLoading:!1,data:s.data.list,dataTotal:s.data.total})})})},this.moveRow=(t,s)=>{var r=this.state.data,d=r[t],f=r[s];this.setState(Ge()(this.state,{data:{$splice:[[t,1],[s,0,d]]}})),this.updateSort(d.id,f.id)},this.updateSort=(t,s)=>{var r=_.ZP.Lecturer.lecturerSort(t);D.WY.post({url:r,data:{source_id:t,destination_id:s}}).then(d=>{d.data.update==="true"&&L.default.success(this.props.t("study.updateSuccess"))})},this.handleReferenceList=t=>{this.setState(s=>({referenceWithOtherConfig:(0,i.Z)((0,i.Z)({},s.referenceWithOtherConfig),{},{visible:!s.referenceWithOtherConfig.visible,resourceId:t||""})}))},this.getRecord=t=>{var s=t.type==="outside"?t.id:t.user_id;this.setState(r=>({recordProps:(0,i.Z)((0,i.Z)({},r.recordProps),{},{visible:!0,userId:s,id:t.id})}))},this.pageChange=t=>{var s=this.state.pageConfig;this.setState({pageConfig:Object.assign(s,{page_number:t})},()=>{this.getLecturerList()})},this.pageSizeChange=(t,s)=>{var r=this.state.pageConfig;this.setState({pageConfig:Object.assign(r,{page_size:s})},()=>{this.getLecturerList()})},this.goLectureDetail=t=>{ke.m8.push({pathname:"/lecturer/lecturerManage/lecturerDetail",search:Ye.stringify({type:t.type,id:t.id,user_id:t.user_id})})},this.deleteLecture=t=>{var s=this.props.t;t.latoja_count<=0?p.Z.confirm({content:s("lecturerPage.deleteLectureTip"),okText:s("common.ok"),cancelText:s("common.cancel"),onOk:()=>{this.remove(t.id,t.status,t.latoja_count)}}):this.handleReferenceList(t.id)},this.renderOperation=(t,s)=>{var r=this.state.allowActions,d=this.props.t,f=[{type:"preview",title:d("common.preview"),visible:(0,ge.H3)("show_lecturer",r),click:()=>this.goLectureDetail(s)},{type:"edit",title:d("common.edit"),visible:(0,ge.H3)("edit",r),disabled:s.status===1,click:()=>this.edit(s.id,s.status)},{type:"delete",title:d("common.delete"),visible:(0,ge.H3)("delete",r),disabled:s.status===1,click:()=>this.deleteLecture(s)},{type:"relatedCourse",title:d("lecturerPage.relatedCourses"),visible:(0,ge.H3)("related_courses",r),click:()=>this.handleShowCourseSelector(s)}];return a().createElement("div",{className:"cl-table__cell-action"},a().createElement(tt.Z,{buttons:f}),localStorage.getItem("dingPersonnel")!=="dingPersonnel"&&a().createElement(a().Fragment,null,a().createElement("span",{className:"cl-pointer-divide"}),a().createElement(Se.Z,{color:"#d1d2d6",iconClass:"iconf-move"})))},this.handleShowCourseSelector=function(){var t=(0,V.Z)(C().mark(function s(r){var d,f;return C().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,D.WY.get({url:_.ZP.Lecturer.coursesByChecked(r.id),params:{page_number:1,page_size:1e3}});case 2:d=K.sent,f=[],d.data.code===0&&(f=d.data.data.list.map(te=>({id:te,type:"course",componentName:"CourseSelect",icon:_.e1.course}))),c.setState({showCourseSelector:!0,defaultSelectedCourses:f,lecturer:r});case 6:case"end":return K.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.handleHideCourseSelector=()=>{this.setState({showCourseSelector:!1})},this.handleSelectCourses=t=>{this.setState({showCourseSelector:!1});var s=t.map(r=>r.id);this.relateCourses({course_ids:s})},this.relateCourses=function(){var t=(0,V.Z)(C().mark(function s(r){var d,f,F;return C().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return d=c.state.lecturer,f=_.ZP.Lecturer.relateCourse(c.state.lecturer.id),te.next=4,D.WY.post({url:f,data:(0,i.Z)((0,i.Z)({},r),{},{lecturer_name:d.lecturer_name})});case 4:F=te.sent,F.data.update==="true"&&(L.default.success(c.props.t("lecturerPage.successRelated")),c.getLecturerList());case 6:case"end":return te.stop()}},s)}));return function(s){return t.apply(this,arguments)}}()}componentDidMount(){this.getLecturerList()}componentWillReceiveProps(c){(c.params!==this.props.params||c.isRefresh!==this.props.isRefresh)&&this.getLecturerList(c.params)}render(){var c=this.props,t=c.t,s=c.headerTitle,r=c.toolBarRender,d=this.state.pageConfig,f=[{title:t("lecturerPage.lecturer"),dataIndex:"lecturer_name",key:"lecturer_name",width:110,render:(ce,re)=>a().createElement("span",{className:"lecturer_title"},a().createElement("span",null,re.type==="inside"?a().createElement(et.Z,{dataType:"userName",value:re.sync_user_id,name:re.lecturer_name,type:re.source_type}):a().createElement("span",{className:"name"},re.lecturer_name),a().createElement("span",{className:"quit"},re.lecturer_quit==="true"?t("lecturerPage.resignation"):"")))},{title:t("lecturerPage.sex"),dataIndex:"sex",key:"sex",width:80,render:(ce,re)=>re.sex===0?t("lecturerPage.male"):t("lecturerPage.female")},{title:t("lecturerPage.grade"),dataIndex:"level_name",key:"level_name",width:150,render:(ce,re)=>re.level_name?a().createElement(n.Z,{placement:"top",title:ce},a().createElement("span",{className:"lecturer-level-name"},ce)):"\u65E0"},{title:t("lecturerPage.officeTime"),dataIndex:"level_start_time",key:"level_start_time",width:160,render:ce=>ce?a().createElement("div",null,ue()(ce).format("YYYY-MM-DD")):"--"},{title:t("personal.scores"),dataIndex:"integral_count",key:"integral_count",width:110},{title:t("tutorial.satisfactions"),dataIndex:"satisfaction",key:"satisfaction",width:160},{title:t("lecturerPage.cumulativeMoney"),dataIndex:"actual_course_class_pay",key:"actual_course_class_pay",width:160},{title:t("common.status"),dataIndex:"lecturer_quit",key:"lecturer_quit",width:110,render:(ce,re)=>a().createElement("span",{className:"operate_switch"},a().createElement("span",{onClick:()=>this.operate(re.id,re.status)},a().createElement(ee.Z,{checked:re.status===1,checkedChildren:t("common.activated"),unCheckedChildren:t("common.deactivated")})))},{title:t("common.operate"),dataIndex:"",key:"operate",width:220,render:(ce,re)=>this.renderOperation(ce,re)}],F=this.state,K=F.data,te=F.referenceWithOtherConfig,ye=F.recordProps,G=F.dataTotal,se=F.isLoading,_e=F.showCourseSelector,Ce=F.defaultSelectedCourses,Ie=(0,i.Z)((0,i.Z)({},_.XE.INITIAL_PAGINATION),{},{current:d.page_number,total:Number(G),onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return a().createElement("div",null,a().createElement(qe.f,{loading:se,ref:ce=>this.tableRef=ce,columns:f,dataSource:K,components:this.components,pagination:!1,rowKey:ce=>ce.id,onRow:(ce,re)=>({index:re,moveRow:this.moveRow}),headerTitle:s,toolBarRender:r,tableUUID:"62e3b90b-686f-45d2-8a0c-0ec9a6385111"}),a().createElement("div",{className:"lecturerList-pagination"},a().createElement(je.Z,Ie)),a().createElement(Je.Z,(0,y.Z)({},te,{handleReferenceList:this.handleReferenceList})),a().createElement(Qe.Z,(0,y.Z)({},ye,{onCancelRecord:this.onCancelRecord,initScoreRank:this.getLecturerList,isLecturer:!0})),a().createElement(at.Z,{visible:_e,onCancel:this.handleHideCourseSelector,defaultChecked:Ce,onOk:this.handleSelectCourses,scope:2,courseType:"all"}))}}var nt=(0,M.$j)(st)((0,U.Z)()((0,we.Z5)(He.ZP)(rt))),it=e(89380),lt=e(21497),ot=e(97593),ct=e(11449),dt=e(84009),mt=e(48479),ut=e(4408),ht=e(65749),pt=e(31457),Ne=Z.Z.Option,vt=W.Z.RangePicker,gt={keyword:"",status:"",level:"",level_start_time:"",level_end_time:""},ft=he=>({userInfo:he.user,qyShield:he.user.qyShield});class We extends a().Component{constructor(c){var t;super(c);t=this,this.getIsOpenMultiOrg=(0,V.Z)(C().mark(function s(){return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.t0=t,d.next=3,(0,pt.dQ)();case 3:d.t1=d.sent,d.t2={isOpenMultiOrg:d.t1},d.t0.setState.call(d.t0,d.t2);case 6:case"end":return d.stop()}},s)})),this.getLecturerDetails=s=>{D.WY.get({url:_.ZP.Lecturer.lecturerQuery(s),params:{}}).then(r=>{r.data.adept_field=r.data.adept_field?r.data.adept_field.split(","):null,this.openModel(r.data)})},this.edit=s=>{this.getLecturerDetails(s)},this.remove=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>{},d=_.ZP.Lecturer.removeLecturer(s),f=t.props.t;D.WY.post({url:d}).then(F=>{F.data.deleted==="true"&&L.default.success(f("lecturerPage.deleteLecturerSucceed")),r()})},this.openModel=s=>{this.setState({addLecturerVisible:!0,lecturerDetails:s})},this.closeLecturer=()=>{this.setState({addLecturerVisible:!1})},this.getLevelList=s=>{D.WY.get({url:_.ZP.Lecturer.getLevelList(),params:s}).then(r=>{this.setState({levelList:r.data.list})})},this.handleStatus=s=>{var r=h()(this.state.page);this.setState({page:(0,i.Z)((0,i.Z)({},r),{},{status:s.target.value})})},this.handleLevel=s=>{var r=h()(this.state.page);this.setState({page:(0,i.Z)((0,i.Z)({},r),{},{level:s})})},this.handleSearch=s=>{var r=h()(this.state.page);this.setState({page:(0,i.Z)((0,i.Z)({},r),{},{keyword:s})})},this.dataRangeChange=(s,r)=>{var d=(0,N.Z)(r,2),f=d[0],F=d[1],K=h()(this.state.page);this.setState({page:(0,i.Z)((0,i.Z)({},K),{},{level_start_time:f,level_end_time:F})})},this.handleList=()=>{this.setState({addLecturerVisible:!1}),this.setState({isRefresh:this.state.isRefresh+1})},this.importScore=()=>{var s=this.state.allowActions,r=(0,ge.H3)("import_integral",s);if(!r)return null;var d=this.props.t;return a().createElement(n.Z,{placement:"topLeft",title:d("setting.noLimitTip")},a().createElement(R.Z,{type:"primary",className:"status_btn",ghost:!0,onClick:this.handleManualScore},d("employeeSummary.manualScore")))},this.handleManualScore=()=>{this.setState({manualProps:(0,i.Z)((0,i.Z)({},this.state.manualProps),{},{visible:!0})})},this.handleTemplateScore=()=>{this.setState({templateProps:{visible:!0}})},this.handleManualOk=s=>{var r=this.props.t,d=s.behavior,f=s.points,F=s.time,K=s.teacherIds,te=s.integral_type,ye={behavior:d,points:f,time:F,user_ids:K,integral_type:te};D.WY.post({url:_.ZP.points.manualTeacherPoints(),data:ye}).then(G=>{G.data.result==="true"?(L.default.success(r("employeeSummary.succeedManualPoints")),this.getLevelList()):L.default.error(r("employeeSummary.importFail"))}).catch(()=>{L.default.error(r("employeeSummary.importFail"))}),this.handleManualCancel()},this.handleTemplateOk=s=>{var r=this.props.t,d=_.ZP.points.saveTeacherImport();D.qg.post({url:d,data:s}).then(f=>{f.data.result==="true"?(L.default.success(r("employeeSummary.succeedImportPoints")),this.handleTemplateCancel(),this.getLevelList()):L.default.error(r("employeeSummary.importFail"))}).catch(()=>{L.default.error(r("employeeSummary.importFail"))})},this.handleManualCancel=()=>{this.setState({manualProps:(0,i.Z)((0,i.Z)({},this.state.manualProps),{},{visible:!1})})},this.handleTemplateCancel=()=>{this.setState({templateProps:{visible:!1}})},this.handleExport=()=>{var s=this.props.t,r=this.state.page;p.Z.confirm({title:s("common.tip"),content:s("employeeSummary.exportLecturePointsConfirm"),onOk:()=>{var d=(0,i.Z)({},r),f="?".concat(Object.entries(d).reduce((K,te)=>"".concat(K).concat(te[0],"=").concat(te[1],"&"),"")),F="".concat(f);(0,ot.N)({page:"teacherExport",props:this.props,query:F})}})},this.exportBtn=()=>{var s=this.props.t,r=this.state.allowActions,d=(0,ge.H3)("exported_data",r);return d?a().createElement(R.Z,{type:"primary",className:"status_btn",ghost:!0,onClick:this.handleExport,icon:a().createElement(k.Z,null)},s("common.exportData")):null},this.detailRecordBtn=()=>{var s=this.props.t,r=this.state.allowActions,d=(0,ge.H3)("lecturer_base_line_export",r);return d?a().createElement(R.Z,{type:"primary",className:"status_btn",ghost:!0,onClick:this.handleDetailExport},s("common.detailExport")):null},this.handleDetailExport=()=>{this.setState({detailRecordVisible:!0})},this.closeDetailRecord=()=>{this.setState({detailRecordVisible:!1})},this.renderLeftRow=()=>{var s=this.props.t,r=this.state.actionAdd;return a().createElement("div",{className:"lecturerList__header__status"},r?a().createElement(R.Z,{type:"primary",icon:a().createElement(O.Z,null),onClick:()=>this.openModel("")},s("lecturerPage.newLecturer")):null,this.importTeacher(),this.importScore(),this.exportBtn(),this.detailRecordBtn())},this.renderRightRow=()=>{var s=this.props.t;return a().createElement("div",{className:"lecturerList__header__query"},a().createElement(o.ZP.Group,{defaultValue:"",onChange:this.handleStatus},a().createElement(o.ZP.Button,{value:""},s("common.all")),a().createElement(o.ZP.Button,{value:"1"},s("common.activated")),a().createElement(o.ZP.Button,{value:"0"},s("common.deactivated"))),a().createElement(mt.Z,{onSearch:this.handleSearch,width:"300px",placeholder:s("searchInputPlaceholder.lecturer")}))},this.handleExportTeacher=s=>{var r=s.key,d="",f="";switch(r){case"importUserID":f="lecturer_user_id";break;case"importPhone":f="lecturer_mobile";break;case"importEmail":f="lecturer_email";break;default:break}d="".concat(_.ZP.points.importTeacherDownload(),"?template_type=").concat(f),this.setState({teacherProps:{visible:!0,importTeacherUrl:d,isLecturer:!0,templateType:f}})},this.importTeacher=()=>{var s=this.state,r=s.isOpenMultiOrg,d=s.allowActions,f=this.props.t,F=(0,ge.H3)("import_lecturer",d);if(!F)return null;var K=a().createElement(T.Z,{onClick:this.handleExportTeacher},a().createElement(T.Z.Item,{key:"importUserID"},"".concat(f("setting.importUserID")).concat(f("setting.importUserEmpty"))),r&&a().createElement(T.Z.Item,{key:"importPhone"},"".concat(f("setting.importPhone")).concat(f("setting.importUserEmpty"))),r&&a().createElement(T.Z.Item,{key:"importEmail"},"".concat(f("setting.importEmail")).concat(f("setting.importUserEmpty"))));return a().createElement(w.Z,{overlay:K},a().createElement(R.Z,{type:"primary",className:"status_btn",ghost:!0},a().createElement(g.Z,null),f("employeeSummary.importTeacher")))},this.hideTeacherTemplate=()=>{var s=this.state.teacherProps;this.setState({teacherProps:Object.assign(s,{visible:!1})})},this.handleTeacherOk=s=>{var r=this.props.t,d=_.ZP.points.saveImportTeacher();D.qg.post({url:d,data:s}).then(f=>{f.data.code===0?(L.default.success(r("employeeSummary.succeedImportTeacher")),this.hideTeacherTemplate(),this.getLevelList()):L.default.error(r("employeeSummary.importFail"))}).catch(()=>{L.default.error(r("employeeSummary.importFail"))})},this.state={lecturerMenu:(0,lt.gc)(JSON.parse(localStorage.modules),"lecturer"),allowActions:(0,ge.V9)("lecturerList",this.props.userInfo.modules),levelList:[],addLecturerVisible:!1,page:(0,i.Z)({},gt),actionAdd:"",manualProps:{visible:!1,type:"lecture"},templateProps:{visible:!1},isOpenMultiOrg:!1,teacherProps:{visible:!1},detailRecordVisible:!1,lecturerDetails:"",isRefresh:0}}componentDidMount(){this.getLevelList(),this.getIsOpenMultiOrg();var c=this.state.lecturerMenu;c.menus&&c.menus.forEach(t=>{t.children.forEach(s=>{s.key==="lecturerList"&&this.setState({actionAdd:s.actions[0]?s.actions[0].checked:!1})})})}render(){var c=this.props,t=c.prefixCls,s=c.t,r=this.state,d=r.levelList,f=r.addLecturerVisible,F=r.lecturerDetails,K=r.page,te=r.manualProps,ye=r.templateProps,G=r.teacherProps,se=r.detailRecordVisible,_e=r.isRefresh;return a().createElement(ct.Z,{pageContainerParams:{header:{title:s("leftMenuLists.lecturerList")}}},a().createElement(ut.Z,{title:s("leftMenuLists.lecturerList")}),a().createElement("div",{className:"lecturerList"},a().createElement("div",{className:"".concat(t,"__main-content")},a().createElement("div",null,a().createElement(Z.Z,{className:"cl-search-normal-width",placeholder:s("lecturerPage.selectGrade"),onChange:this.handleLevel},a().createElement(Ne,{value:""},s("common.all")),d.map(Ce=>a().createElement(Ne,{value:Ce.id,key:Ce.id},Ce.name))),a().createElement(vt,{className:"cl-search-rangePiker",format:"YYYY-MM-DD",placeholder:[s("lecturerPage.levelStartTime"),s("common.endTime")],onChange:(Ce,Ie)=>this.dataRangeChange(Ce,Ie)})),a().createElement("div",{className:"lecturerList__content",ref:Ce=>this.tableRef=Ce},a().createElement(nt,{onEdit:this.edit,params:K,isRefresh:_e,onRemove:this.remove,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow}))),f&&a().createElement(Be,{visible:f,onCancel:this.closeLecturer,onHandleList:this.handleList,lecturerDetails:F}),se&&a().createElement(Ve,{visible:se,handleOnCancel:this.closeDetailRecord,params:K}),a().createElement(it.Z,(0,y.Z)({},te,{onCancel:this.handleManualCancel,onCreate:this.handleManualOk,islecturer:!0})),a().createElement(Fe.Z,(0,y.Z)({},ye,{onCancel:this.handleTemplateCancel,onCreate:this.handleTemplateOk,islecturer:!0})),G.visible&&a().createElement(ht.Z,(0,y.Z)({},G,{onCancel:this.hideTeacherTemplate,onCreate:this.handleTeacherOk}))))}}We.defaultProps={prefixCls:"lecturerList"};var Et=(0,M.$j)(ft)((0,U.Z)()((0,dt.Z)()(We)))},28107:function(ie,j,e){"use strict";var y=e(66456),A=e(55313),w=e(22385),I=e(31097),T=e(57663),H=e(71577),o=e(71194),z=e(57016),p=e(88986),u=e(12924),n=e.n(u),m=e(91768),R=e(10237),N=e(37055),i=e(6793),$=e(18329),L=e(95664);class V extends n().Component{constructor(W){super(W);this.onCancel=()=>{var v=this.props,Z=v.handleReferenceList,E=v.onReferenceList;Z?Z():E&&E()},this.onContinueEdit=()=>{var v=this.props.continueEdit;v&&v()},this.initTableList=(v,Z)=>{var E=this.props,C=E.type,x=E.operation,a=E.resourceId,U=E.t,k=this.state.resourceTypes,O=Z||x;return this.setState({loading:!0}),R.WY.get({url:N.ZP.deleteResource.check(),params:(0,p.Z)((0,p.Z)({},this.state.params),{},{type:C,id:v||a})}).then(g=>{if(g.data.list&&g.data.list.length===0)return!0;if(g.data.total<2&&g.data.list.length>0){var M=g.data.list[0],l=M.title,h=M.type_name,S=M.create_user_name,P="";return O==="continueEdit"?P=(0,i.ZT)("".concat(U("component.continueEditReminderTip")),k[C],"\u300A".concat(l,"\u300B").concat(h)):O==="forbiddenEdit"?P=(0,i.ZT)("".concat(U("component.forbiddenEditReminderTip")),k[C],"\u300A".concat(l,"\u300B").concat(h)):P=(0,i.ZT)("".concat(U("component.deleteElseReminderTip")),k[C],"\u300A".concat(l,"\u300B(").concat(S?U("common.creator")+":"+S:"",")").concat(h),U(O==="delete"?"common.delete":"course.cancelRelease")),O==="move"?(z.Z.confirm({title:U("common.tip"),content:(0,i.ZT)("".concat(U("component.forbiddenMoveReminderTip")),"\u300A".concat(l,"\u300B").concat(h)),okText:U("common.ok"),onOk:()=>{this.onCancel()},onCancel:()=>{this.onCancel()}}),!1):(O==="continueEdit"?z.Z.confirm({title:U("common.tip"),content:P,okText:U("common.cancel"),cancelText:U("course.continueEdit"),onOk:()=>{this.onCancel()},onCancel:()=>{O==="continueEdit"&&this.props.continueEdit()}}):z.Z.info({title:U("common.tip"),content:P,okText:U("common.ok"),onOk:()=>{this.onCancel()}}),!1)}setTimeout(()=>{this.setState({loading:!1,tableList:g.data.list,tableTotal:g.data.total,tableTotalPages:g.data.pages})},300)})},this.handleTableChange=v=>{var Z=this.state.params;Z.page_number=v,this.setState({params:Z},()=>{this.initTableList()})},this.renderFooter=()=>{var v=this.props,Z=v.t,E=v.operation;return n().createElement("div",null,E==="continueEdit"?n().createElement(H.Z,{type:"primary",onClick:this.onContinueEdit},Z("course.continueEdit")):null,n().createElement(H.Z,{type:"primary",onClick:this.onCancel},Z("common.ok")))},this.state={loading:!0,params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0,resourceTypes:{questionnaire:this.props.t("common.questionnaire"),classify:this.props.t("course.category"),paper:this.props.t("exam.paperAddTitle"),question:this.props.t("learning.questionAddTitle"),course:this.props.t("study.course"),resource:this.props.t("common.courseware"),lecturer:this.props.t("course.lecturer"),evaluationProduct:this.props.t("questionn.evaluationTool")}},this.columns=[{title:this.props.t("common.number"),dataIndex:"userId",width:30,render:(v,Z,E)=>E+1},{title:this.props.t("common.name"),dataIndex:"title",width:420,render:v=>n().createElement(I.Z,{title:v},n().createElement("div",{className:"cl-text-ellipsis",style:{width:420}},v))},{title:this.props.t("study.type"),dataIndex:"type_name",width:120},{title:this.props.t("common.creator"),dataIndex:"create_user_name",width:30}]}componentDidMount(){var W=this.props.onRef;W&&W(this)}componentDidUpdate(W){var v=this.props.onRef;v||this.props.visible&&this.props.visible!==W.visible&&this.props.resourceId&&this.setState({params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0},()=>{this.initTableList()})}render(){var W=this.props,v=W.visible,Z=W.type,E=W.operation,C=W.t,x=this.state,a=x.loading,U=x.params,k=x.tableList,O=x.tableTotal,g=x.tableTotalPages,M=x.resourceTypes;return n().createElement("div",null,O>1?n().createElement($.ZP,{visible:v,title:E==="move"?"".concat(C("common.tip")):(0,i.ZT)("".concat(C("component.deleteReminder")),C(E==="delete"?"common.deletion":E==="cancelPublish"?"course.cancelRelease":"common.edit")),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},n().createElement("div",{className:"referenceWithOther"},n().createElement("div",{className:"referenceWithOther__tip"},E==="continueEdit"?"".concat(C("component.this")).concat(M[Z]).concat(C("component.continueEditReminderTip2")):E==="forbiddenEdit"?"".concat(C("component.pleaseNote")).concat(M[Z]).concat(C("component.forbiddenEditReminderTip2")):E==="move"?"".concat(C("component.forbiddenMoveTip")):(0,i.ZT)("".concat(C("component.deleteReminderTip")),M[Z],C(E==="delete"?"common.delete":"course.cancelRelease"))),n().createElement(A.Z,{bordered:!0,size:"middle",columns:this.columns,rowKey:"id",dataSource:k,pagination:!1,loading:a}),n().createElement(L.Z,{defaultPageSize:10,totalNum:O,totalPage:g,current:U.page_number,showRenderRefresh:!1,onChange:this.handleTableChange}))):null)}}j.Z=(0,m.Z)()(V)},96172:function(ie,j,e){"use strict";var y=e(66456),A=e(55313),w=e(43185),I=e(53251),T=e(62029),H=e(57663),o=e(71577),z=e(34792),p=e(48086),u=e(12924),n=e.n(u),m=e(91768),R=e(28216),N=e(84874),i=e(37055),$=e(18329),L=e(97593),V={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};class q extends n().Component{constructor(v){super(v);this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{var E=this.props.t,C=this.state,x=C.importedList,a=C.checkTemplate;if(a==="false"){p.default.error(E("upload.typeError"));return}var U={access_token:window.localStorage.getItem("token"),new_file_name:x.map(k=>k.new_file_name).join(","),original_file_name:x.map(k=>k.original_file_name).join(",")};this.props.onCreate(U)},this.fileUpload=E=>{var C=this.props.t;E.file&&E.file.response&&(E.file.response.error_messages?this.setState({checkTemplate:E.file.response.check,importedList:[E.file.response],uploadErrMsg:E.file.response.error_messages}):p.default.error(C("upload.typeError")))},this.downloadTemplate=()=>{var E=this.props,C=E.islecturer,x=E.isScore;C?window.location.href="".concat(i.ZP.points.downloadImport(),"?access_token=").concat(window.localStorage.getItem("token")):x?window.location.href="".concat(i.ZP.ScoreList.downloadTemplate(),"?access_token=").concat(window.localStorage.getItem("token")):(0,L.N)({page:"downloadPointsTemplate",props:this.props,rest:{},sendType:"get"})};var Z;v.isScore?Z=i.ZP.ScoreList.uploadTemplateScore():v.islecturer?Z=i.ZP.points.teacherPointsImport():Z=i.ZP.points.uploadPointsTemplate(),this.state={importedList:[],uploadConfig:{name:"file",action:Z,showUploadList:!1,headers:{"Enterprise-Id":localStorage.getItem("enterpriseId")},data:{access_token:window.localStorage.getItem("token")},onChange:this.fileUpload},uploadErrMsg:[],checkTemplate:""}}componentDidUpdate(v){v.visible!==this.props.visible&&this.props.visible&&this.setState({importedList:[],uploadErrMsg:[]})}render(){var v=this.state,Z=v.importedList,E=v.uploadConfig,C=v.uploadErrMsg,x=this.props,a=x.t,U=x.visible,k=x.isScore,O=x.loading,g=[{title:a("component.fileName"),dataIndex:"file_name",key:"newfileName"},{title:a("component.successLabel"),dataIndex:"success_count"},{title:a("component.failedLabel"),dataIndex:"failed_count"}];return n().createElement($.ZP,(0,T.Z)({},V,{title:a(k?"employeeSummary.multipleImportScore":"scoreRankingList.multipleImportPoints"),visible:U,confirmLoading:O,onCancel:this.onCancel,onOk:this.onOk}),n().createElement("div",{className:"import-score"},n().createElement("div",{className:"import-score-import"},n().createElement(o.Z,{className:"import-score-import-btn",onClick:this.downloadTemplate},n().createElement(N.Z,{iconClass:"icon-icon_donwloadx1"}),a("component.downloadTem")),n().createElement("span",{className:"import-score-import-tip"},a(k?"employeeSummary.multipleImportScoreTips":"scoreRankingList.multipleImportPointsTips")),n().createElement(I.Z,(0,T.Z)({className:"import-score-import-btn right"},E),n().createElement(o.Z,{type:"primary"},n().createElement(N.Z,{iconClass:"icon-import"}),Z.length===0?a("component.importLabel"):a("employeeSummary.reImport")))),n().createElement("div",{className:"import-score-table"},n().createElement(A.Z,{dataSource:Z,columns:g,bordered:!0,rowKey:M=>M.new_file_name,size:"middle",pagination:!1})),C.length>0?n().createElement("div",{className:"import-score-tip"},n().createElement("p",null,n().createElement(N.Z,{iconClass:"icon-tishi"}),a("component.errorTips"),":"),C.map((M,l)=>n().createElement("p",{key:l},M))):null))}}q.defaultProps={visible:!1,onCancel:()=>{},onOk:()=>{}},j.Z=(0,R.$j)()((0,m.Z)()(q))},2310:function(ie,j,e){"use strict";e.d(j,{Z:function(){return g}});var y=e(34792),A=e(48086),w=e(71194),I=e(57016),T=e(88986),H=e(12924),o=e.n(H),z=e(91768),p=e(28216),u=e(78138),n=e.n(u),m=e(57663),R=e(71577),N=e(84391),i=e(87722);class $ extends o().Component{constructor(){super(...arguments);this.state={},this.handleTimeRange=l=>{var h=l.startTime,S=l.endTime,P=l.dateStrings;if(!P.filter(X=>X).length){this.props.handleChangeDataRange({startTime:"",endTime:""});return}var Q={startTime:h,endTime:S};this.props.handleChangeDataRange(Q)},this.handleExport=()=>{this.props.handleExport()},this.handleDelete=()=>{this.props.handleDelete()},this.renderActionBtn=()=>{var l=this.props,h=l.selectedRowKeys,S=l.t;return o().createElement("div",null,o().createElement(R.Z,{onClick:this.handleDelete,disabled:h.length===0},S("scoreRankingList.withdrawInBatch")),o().createElement(R.Z,{type:"primary",onClick:this.handleExport},o().createElement(N.Z,null)," ",S("common.exportData")))}}render(){var l=this.props,h=l.currentRecord,S=l.t,P=l.defaultValue;return o().createElement("header",{className:"score-record__queryrow"},o().createElement("div",{className:"score-record__queryrow__text"},S("personal.todayTotalScores"),"\uFF1A",o().createElement("span",{style:{marginRight:"18px"}},h.today||0,S("common.score")),S("scoreRankingList.accumulatedGetPoints"),"\uFF1A",h.total||0,S("common.score")),o().createElement("section",{className:"score-record__queryrow__action"},o().createElement(i.Z,{timestamp:!0,format:"YYYY-MM-DD",showTime:!1,onCustomChange:this.handleTimeRange,defaultValue:P}),this.renderActionBtn()))}}$.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",showCheckbox:!0,showSearch:!0,showBtn:!0,defaultRadioValue:"",radioList:[],onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{}};var L=(0,z.Z)()($),V=e(66456),q=e(55313),W=e(22385),v=e(31097),Z=e(6793),E=e(37055);class C extends o().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("scoreRankingList.time"),dataIndex:"createTime",width:150,render:(l,h)=>"".concat((0,Z.p6)(+h.create_time))},{title:this.props.t("scoreRankingList.pointsBehavior"),dataIndex:"event_content",width:586,render:l=>o().createElement(v.Z,{title:l},o().createElement("div",{className:"cl-text-ellipsis",style:{width:555}},l))},{title:this.props.t("personal.scores"),dataIndex:"final_score",width:88,render:l=>o().createElement("span",null,l+this.props.t("common.examScoreUnit"))}],this.handleTableChange=l=>{this.props.onTableChange(l)},this.onSelectChange=(l,h)=>{this.props.onSelectChange(l,h)}}render(){var l=this.props,h=l.list,S=h===void 0?[]:h,P=l.loading,Q=l.paginationParams,X=Q===void 0?{}:Q,ee=l.selectedRowKeys,ae={onChange:this.onSelectChange,selectedRowKeys:ee,getCheckboxProps:fe=>({disabled:fe.can_back_out!==1})},le=(0,T.Z)((0,T.Z)({},E.XE.INITIAL_PAGINATION),X);return o().createElement("section",{className:"score-record__content__table"},o().createElement(q.Z,{bordered:!0,size:"middle",columns:this.columns,rowKey:"id",dataSource:S,pagination:le,loading:P,onChange:this.handleTableChange,rowSelection:ae}))}}var x=(0,z.Z)()(C),a=e(10237),U=e(97593),k=e(18329);class O extends o().Component{constructor(){super(...arguments);this.state={params:{begin_time:this.props.timeValue&&this.props.timeValue.begin_time||"",end_time:this.props.timeValue&&this.props.timeValue.end_time||"",page_number:1,page_size:20},tableLoading:!0,tableList:[],tableTotal:0,selectedRowKeys:[],currentRecord:{}},this.onCancel=()=>{this.setState({selectedRowKeys:[]}),this.props.onCancelRecord()},this.onSelectChange=(l,h)=>{this.setState({selectedRowKeys:h})},this.initTableList=()=>{var l=this.props.isLecturer;this.setState({tableLoading:!0});var h=this.state.params,S=h.begin_time,P=S===void 0?0:S,Q=h.end_time,X=Q===void 0?0:Q,ee=this.state.params;P&&(ee.begin_time=n()(P).startOf("day").valueOf()),X&&(ee.end_time=n()(X).endOf("day").valueOf()),l&&(ee.type=8),a.WY.get({url:E.ZP.points.integralDetails(this.props.userId),params:ee}).then(ae=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:ae.data.list,tableTotal:ae.data.total})},300)})},this.getCurrentRecord=()=>{var l=this.props.isLecturer,h={};l&&(h.type=8),a.WY.get({url:E.ZP.points.myIntegral(this.props.userId),params:h}).then(S=>{this.setState({currentRecord:S.data})})},this.handleChangePagination=l=>{var h=l.current,S=l.pageSize;this.setState(P=>({params:(0,T.Z)((0,T.Z)({},P.params),{},{page_number:h,page_size:S})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(l=>{this.setState(h=>({params:(0,T.Z)((0,T.Z)({},h.params),{},{page_number:1,page_size:20})}),()=>{l()})}),this.handleChangeDataRange=l=>{this.setState(h=>({params:(0,T.Z)((0,T.Z)({},h.params),{},{begin_time:l.startTime,end_time:l.endTime})}),()=>{this.initTableList()})},this.exportScoreRecord=()=>{var l=this.props,h=l.t,S=l.isLecturer,P=this.state.params;I.Z.confirm({title:h("common.tip"),content:h("employeeSummary.exportPerPointsConfirm"),onOk:()=>{var Q={begin_time:P.begin_time,end_time:P.end_time};S?(0,U.N)({page:"teacherImportPoints",props:this.props,query:Q,rest:{lecturerId:this.props.id},sendType:"post"}):(0,U.N)({page:"integralRankingDetails",props:this.props,query:Q,rest:{userId:this.props.userId},sendType:"post"})}})},this.showDeleteConfirm=()=>{var l=this.props.t,h=this;I.Z.confirm({title:l("scoreRankingList.pointsConfirmTip"),content:"",okText:l("common.ok"),cancelText:l("common.cancel"),onOk(){h.deleteScores()}})},this.deleteScores=()=>{var l=E.ZP.points.revocation(),h=this.state.selectedRowKeys,S=this.props,P=S.t,Q=S.isLecturer,X={list:h,user_id:Q?this.props.id:this.props.userId};a.WY.post({url:l,data:X}).then(ee=>{ee.data.code==="success"?(A.default.success(P("certificateRankingList.cancelSuccess")),this.initTableList(),this.getCurrentRecord(),this.props.initScoreRank(),this.setState({selectedRowKeys:[]})):A.default.error(P("study.operateFailed"))})}}componentDidUpdate(l){this.props.visible&&this.props.visible!==l.visible&&this.props.userId&&this.setState({params:{begin_time:this.props.timeValue&&this.props.timeValue.begin_time||"",end_time:this.props.timeValue&&this.props.timeValue.end_time||"",page_number:1,page_size:20},tableList:[],tableTotal:0,selectedRowKeys:[],currentRecord:{}},()=>{this.initTableList(),this.getCurrentRecord()})}render(){var l=this.props.visible,h=this.state,S=h.tableTotal,P=h.tableList,Q=h.tableLoading,X=h.params,ee=h.selectedRowKeys,ae=h.currentRecord,le={total:S,current:X.page_number,pageSize:X.page_size},fe=[X.begin_time,X.end_time],Pe=ee.map(oe=>oe.id);return o().createElement(k.ZP,{visible:l,title:this.props.t("scoreRankingList.pointsDetails"),onCancel:this.onCancel,footer:null,size:"large"},l?o().createElement("div",{className:"score-record"},o().createElement(L,{handleChangeDataRange:this.handleChangeDataRange,handleExport:this.exportScoreRecord,handleDelete:this.showDeleteConfirm,selectedRowKeys:Pe,currentRecord:ae,defaultValue:fe}),o().createElement("div",{className:"score-record__content"},o().createElement(x,{loading:Q,paginationParams:le,list:P,selectedRowKeys:Pe,onTableChange:this.handleChangePagination,onSelectChange:this.onSelectChange}))):null)}}var g=(0,p.$j)()((0,z.Z)()(O))}}]);
