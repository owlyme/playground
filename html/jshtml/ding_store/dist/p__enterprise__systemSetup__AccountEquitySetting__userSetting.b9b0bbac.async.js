(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[6301],{11110:function(Ue,ue,e){"use strict";var Z=e(88986),D=e(12924),J=e.n(D),M=e(28216),W=e(38642);class A extends J().Component{constructor(h){super(h);this.initMessage=()=>{var S=localStorage.getItem("appType");this.removeScript(),((T,I,w,E)=>{T[w]=function(){T.cbk=T.cbk||[],T.cbk.push(arguments)},E=I.createElement("script"),E.async=!0,E.id="zhichiScript",E.className=this.props.activeBtn||"zhiCustomBtn",E.src="https://kuxueyuan.sobot.com/chat/frame/v2/entrance.js?sysnum=98a88d91298542da9ca5a7c2a2bc89ba",I.body.appendChild(E)})(window,document,"zc");var n=4;switch(S){case"e_app":n=1;break;case"wx_app":n=2;break;case"fs_app":n=3;break;default:break}zc("config",(0,Z.Z)({robotid:n,custom:!0},this.state.messageParams)),zc("dynamic_ready")},this.removeScript=()=>{var S=document.querySelector("#zhichiScript");S&&S.parentNode.removeChild(S);var n=document.querySelector("#zc__sdk__container");n&&n.parentNode.removeChild(n);var T=document.querySelector("#zc__wapper__shadow");T&&T.parentNode.removeChild(T);var I=document.querySelector("#zc__bubble_container");I&&I.parentNode.removeChild(I)},this.state={messageParams:{uname:h.user.name,realname:"".concat(h.user.enterpriseName,"--").concat(h.user.name),face:h.user.avatar,title_flag:h.user.enterpriseName,tel:h.user.mobile,is_vip:h.user.isVip,color:localStorage.getItem("themeColor")&&localStorage.getItem("themeColor").split("#")[1]||"516AE6"}},this.props.onRef(this)}componentDidMount(){this.setState({},()=>{this.initMessage()}),(0,W.UI)("SCALE")&&(window.onmessage=h=>{h.data==='{"name":"init"}'&&h.origin==="https://kuxueyuan.sobot.com"&&(document.getElementById("zc__sdk__container").style.zoom=(0,W.uN)(.8).zoom)})}componentWillUnmount(){this.removeScript()}render(){return null}}ue.Z=(0,M.$j)(z=>({user:z.user}))(A)},4408:function(Ue,ue,e){"use strict";var Z=e(12924),D=e.n(Z),J=e(28216),M=e(17780),W=e(38642),A=h=>({userInfo:h.user}),z=h=>{var S=h.title;return(0,M.xX)()&&setTimeout(()=>{document.title=S},0),(0,Z.useEffect)(()=>{if(S&&document.title!==S&&setTimeout(()=>{document.title=S},0),(0,W.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var n=document.querySelector(".zoom-report");n&&(n.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[S]),D().createElement(D().Fragment,null)};z.defautProps={title:""},ue.Z=(0,J.$j)(A)(z)},1164:function(Ue,ue,e){"use strict";var Z=e(12924),D=e.n(Z),J=e(76651),M=e(38642),W=e(91302),A=z=>{var h=navigator.userAgent.toLocaleLowerCase(),S=localStorage.getItem("enterpriseId"),n=(0,M.lz)(S,z.projectType),T=localStorage.getItem("dingPersonnel"),I=W.bl.includes(T),w=z.target;function E(b){if(w==="self"&&(b.preventDefault(),J.m8.push(z.to)),I){if(z.projectType==="student"){window.location.href="".concat(n,"/").concat(z.to);return}J.m8.push(z.to);return}if(dd.version){b.preventDefault();var r="";z.to.includes("?")?r="".concat(n).concat(z.to,"&ddtab=true"):r="".concat(n).concat(z.to,"?ddtab=true"),dd.biz.util.openLink({url:r})}else h.indexOf("lark")!==-1&&(window.location.href="".concat(n).concat(z.to))}return D().createElement("a",{rel:"noreferrer",href:"".concat(z.projectType==="student"?"".concat(n).concat(z.to):"#".concat(z.to)),className:"".concat(z.wrapCls," cl-pointer"),target:h.indexOf("lark")!==-1||I?"_self":z.target||"_blank",onClick:E},z.children)};A.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},A.targetTo=z=>{var h=z.path,S=z.from,n=z.isExternalLink,T=n===void 0?!1:n,I=z.isAsync,w=I===void 0?!1:I,E=z.openName,b=E===void 0?"_blank":E,r=z.projectType,K=r===void 0?"manage":r,L=z.ddTab,$=L===void 0?!0:L,G,H=localStorage.getItem("dingPersonnel"),le=W.bl.includes(H),re=navigator.userAgent.toLocaleLowerCase(),ce=localStorage.getItem("enterpriseId"),Y=(0,M.lz)(ce,K),C=localStorage.getItem("appType"),Q=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var me="";if(G=T?"":Y,le&&!T){if(K==="student"){window.location.href="".concat(Y).concat(h);return}J.m8.push(h);return}h.includes("?")?me="".concat(G).concat(h,"&ddtab=").concat($):me="".concat(G).concat(h,"?ddtab=").concat($),dd.biz.util.openLink({url:me})}else if(re.indexOf("lark")!==-1)G=T?"":Y,window.location.href="".concat(G).concat(h);else if(C==="wx_app"&&Q&&T&&S==="imgText")G=T?"":K==="student"?"".concat(Y):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(G).concat(h)});else if(G=T?"":K==="student"?"".concat(Y):"#",w){var fe=window.open("","_blank");setTimeout(()=>{fe.location="".concat(G).concat(h)},100)}else window.open("".concat(G).concat(h),b)},ue.Z=A},87312:function(Ue,ue,e){"use strict";var Z=e(12924),D=e.n(Z),J=e(91768),M=W=>{var A=W.t;return D().createElement("div",{className:W.className?"".concat(W.className," no-result"):"no-result"},D().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1789886702513426432.png"),className:"no-data-img",alt:""}),D().createElement("p",{className:"no-data-tip"},W.tipText||A("common.empty")))};ue.Z=(0,J.Z)()(M)},88311:function(Ue,ue,e){"use strict";e.d(ue,{Z:function(){return be}});var Z=e(62029),D=e(47673),J=e(4107),M=e(33565),W=e(57361),A=e(34792),z=e(48086),h=e(88986),S=e(43358),n=e(34041),T=e(18106),I=e(88108),w=e(9754),E=e.n(w),b=e(12924),r=e.n(b),K=e(91768),L=e(77043),$=e.n(L),G=e(20228),H=e(11382),le=e(18721),re=e.n(le),ce=e(51975),Y=e(37055),C={breadNav:[{value:"",label:""}],checkOne:()=>{},checkAll:()=>{},nextLevel:()=>{},changeLevel:()=>{}},Q=r().createContext(C),me={searchResult:[],deptList:[],groupList:[],postList:[],deptUser:[],groupUser:[],postUser:[],clusterList:[],classList:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],initTypeList:()=>{},initTypeUser:()=>{},toggleDisplayItem:()=>{},toggleDisplayList:()=>{},checkListOne:()=>{},checkUserOne:()=>{},removeCheckedUser:()=>{},changeLevel:()=>{},hidePosts:!1,initHidePostsStatus:()=>{},clearSelectedAll:()=>{}},fe=r().createContext(me),Se=e(36017),xe=e(35247),Te=e(60667);class Oe extends r().Component{constructor(){super(...arguments);this.changeLevel=(g,p,a,s)=>{g.preventDefault(),this.props.contextData.changeLevel(p,a,s)}}render(){var g=this.props.contextData.breadNav.map((p,a)=>r().createElement(xe.Z.Item,{key:p.value},r().createElement("span",{className:"bread-nav-item",onClick:s=>this.changeLevel(s,p.value,a,!(re()(p,"authorized")&&p.authorized==="true"))},r().createElement(Te.Z,{dataType:"departmentName",value:p.value,name:p.label,type:p.sourceType}))));return r().createElement("div",{className:"bread-nav"},r().createElement(xe.Z,null,g))}}Oe.defaultProps={contextData:{breadNav:[]},changeLevel:()=>{}};var Ne=Oe,je=e(63185),Le=e(9676),Re=e(88983),We=e(47933),$e=e(22385),Be=e(31097),Ye=e(57119),ze=e(84874),qe=e(20136),et=e(55241),Ve=e(13062),Xe=e(71230),tt=e(89032),rt=e(15746),Ke=e(28216),_e=e(80430),Ae=e(10237);function st(){var O=CONFIG.Role.getUserManageRange();return request.get({url:O})}function dt(O){var g=Y.ZP.OrgDialog.getDeptInfoUrl({departmentId:O.departmentId});return delete O.departmentId,Ae.WY.get({url:g,params:O})}function ut(O){var g=Y.ZP.OrgDialog.getDeptUsersUrl({departmentId:O.departmentId});return delete O.departmentId,Ae.WY.get({url:g,params:O})}function at(O){var g=Y.ZP.OrgDialog.getUserDetailUrl();return Ae.WY.get({url:g,params:O})}function ke(O){var g=Y.ZP.OrgDialog.getScopeUsersAndDeptsUrl({departmentId:O.departmentId});return delete O.departmentId,Ae.WY.get({url:g,params:O})}function te(O){var g=Y.ZP.OrgDialog.postDeleteCacheUrl({cacheId:O.cacheId});return delete O.cacheId,Ae.WY.post({url:g,params:O})}var ye,j,X=(ye=(0,Ke.$j)(O=>{var g=O.user;return{enterpriseName:g.enterpriseName}}),ye(j=class extends r().Component{constructor(){super(...arguments);this.state={loading:!0,cardInfoFinal:this.props.cardInfo},this.renderTitle=()=>{var g=this.props,p=g.cardInfo,a=g.prefixCls,s=g.enterpriseName,m=p.source_type,c=p.user_id,t=p.name;return r().createElement("div",{className:"".concat(a,"__header")},r().createElement("div",{className:"".concat(a,"__header-name")},r().createElement(Te.Z,{type:m,value:c,name:t,dataType:"userName"})),r().createElement("div",{className:"".concat(a,"__header-corp")},s||"/"))},this.renderContent=()=>{var g=this.props,p=g.prefixCls,a=g.t,s=this.state.cardInfoFinal,m=s.user_id,c=s.job_number,t=s.post_names,f=t===void 0?[]:t,U=s.department_infos,N=U===void 0?[]:U,ae=()=>!(N instanceof Array)||N.length===0?"/":r().createElement(_e.Z,{list:N,displayAll:!0,isBlock:!0}),B=()=>!(f instanceof Array)||f.length===0?"/":f.map(ne=>r().createElement("div",{key:ne},ne)),oe=[{lable:"ID",value:m},{lable:a("personal.jobNumber"),value:c||"/"},{lable:a("setting.postLabel"),value:B()},{lable:a("learnRecord.department"),value:ae()}];return r().createElement("div",{className:"".concat(p,"__body")},oe.map(ne=>r().createElement(Xe.Z,{className:"".concat(p,"__body-item"),key:ne.value},r().createElement(rt.Z,{className:"".concat(p,"__body-item-lable")},ne.lable),r().createElement(rt.Z,{className:"".concat(p,"__body-item-value")},ne.value||"/"))))}}render(){var g=this.props,p=g.children,a=g.prefixCls,s=this.state,m=s.loading,c=s.cardInfoFinal;return r().createElement(et.Z,{overlayClassName:a,placement:"rightTop",title:this.renderTitle,content:m?r().createElement("div",{className:"".concat(a,"__body")},r().createElement(H.Z,null)):this.renderContent,onVisibleChange:t=>{t&&(c.detailInfo===!1?at({user_id:c.id}).then(f=>{this.setState({loading:!1,cardInfoFinal:(0,h.Z)((0,h.Z)((0,h.Z)({},c),f.data),{},{detailInfo:!0})})}).catch(f=>{console.error(f)}):this.setState({loading:!1}))},mouseEnterDelay:.5},p)}})||j);X.defaultProps={prefixCls:"user-card-popover",cardInfo:{}};var he=(0,K.Z)()(X),De=["cluster","class"];class Ie extends r().Component{constructor(){super(...arguments);this.checkOne=g=>{g.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=g=>{g.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var g=this.props,p=g.cardInfo,a=g.type,s=g.t;return p.authorized==="false"&&a==="dept"?r().createElement(Be.Z,{title:s("orgDialog.scopedAuthorize")},r().createElement(Ye.Z,{style:{marginLeft:"4px"}})):null}}render(){var g=this.props,p=g.t,a=g.cardInfo,s=a===void 0?{}:a,m=g.hidePosts,c=g.type,t=g.userCount,f=null;return this.props.hasNext?(f=r().createElement("div",{className:"next-level"},!(m&&c==="post")&&t>-1?r().createElement("span",{className:"next-level-count"},"(",t,")"):null,De.includes(c)?r().createElement("span",null):r().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},r().createElement(ze.Z,{iconClass:"icon-xiaji1"}),p("component.nextLevel"))),this.props.single?r().createElement("div",{className:"org-tree-item"},r().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),f):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&r().createElement("div",{className:"org-tree-item"},r().createElement(Le.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),f)):r().createElement("div",{className:"org-tree-item"},this.props.single?r().createElement(We.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},r().createElement(he,{cardInfo:s},this.props.title)):r().createElement(he,{cardInfo:s},r().createElement(Le.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title)))}}Ie.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var we=(0,K.Z)()(Ie),ie=["cluster","class"];class Ee extends r().Component{constructor(){super(...arguments);this.checkOne=g=>{g.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=g=>{g.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var g=this.props,p=g.cardInfo,a=g.type,s=g.t;return p.authorized==="false"&&a==="dept"?r().createElement(Be.Z,{title:s("orgDialog.scopedAuthorize")},r().createElement(Ye.Z,{style:{marginLeft:"4px"}})):null}}render(){var g=this.props,p=g.t,a=g.cardInfo,s=a===void 0?{}:a,m=g.hidePosts,c=g.type,t=g.userCount,f=null;return this.props.hasNext?(f=r().createElement("div",{className:"next-level"},r().createElement("span",{className:"next-level-belle"},!(m&&c==="post")&&t>-1?r().createElement("span",{className:"next-level-count"},"(",t,")"):null,ie.includes(c)?r().createElement("span",null):r().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},r().createElement(ze.Z,{iconClass:"icon-xiaji1"}),p("component.nextLevel")))),this.props.single?r().createElement("div",{className:"org-tree-item"},r().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},r().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),f):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&r().createElement("div",{className:"org-tree-item"},r().createElement(Le.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},r().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),f)):r().createElement("div",{className:"org-tree-item"},this.props.single?r().createElement(We.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},r().createElement(he,{cardInfo:s},r().createElement("span",{className:"org-tree-item-title"},this.props.title))):r().createElement(he,{cardInfo:s},r().createElement(Le.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},r().createElement("span",{className:"org-tree-item-title"},this.props.title))))}}Ee.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var He=(0,K.Z)()(Ee),Fe=e(38642),Qe=["cluster","class"];class nt extends r().Component{constructor(g){super(g);this.checkAll=(p,a)=>{p.preventDefault(),this.props.contextData.checkAll(a)},this.getIsCheckAll=()=>{var p=[].concat(this.context["".concat(this.props.dataTypeKey,"List")],Qe.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")]);if(p.length===0)return!1;var a=p.findIndex(s=>!s.isChecked);return a===-1},this.renderDeptName=(p,a)=>a==="dept"?r().createElement(Te.Z,{type:p.source_type,value:p.id,name:p.name,dataType:"departmentName"}):p.name,this.renderName=p=>r().createElement(Te.Z,{type:p.source_type,value:p.user_id,name:p.name,dataType:"userName"}),this.state={isShowCheckAllEle:!0,whiteList:{belleFlag:(0,Fe.UI)("BELLE_CUSTOMER_WHITE")}}}render(){var g=this.state,p=g.isShowCheckAllEle,a=g.whiteList,s=this.props,m=s.t,c=s.dataTypeKey,t=s.disableHidden,f=s.scrollFlag,U=this.context,N=U.maxDeptUserCount,ae=U.hidePosts,B=U.onlyPost,oe=U.onlyUser,ne=U.single,de=[],q=this.context["".concat(this.props.dataTypeKey,"List")].map(ee=>(de.push(r().createElement("div",{className:"title-item",key:ee.id},this.renderDeptName(ee,c))),a.belleFlag&&f?r().createElement(He,{type:c,key:ee.id,cardInfo:ee,hasNext:!0,checkable:N&&(ee==null?void 0:ee.userCount)>N?!1:!(B&&ee.post_type==="post_group"||oe),single:ne,userCount:ee.userCount,isChecked:!!ee.isChecked,itemId:ee.id,title:this.renderDeptName(ee,c),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!ee.children,hidePosts:ae,disableHidden:t}):r().createElement(we,{type:c,key:ee.id,cardInfo:ee,hasNext:!0,checkable:N&&(ee==null?void 0:ee.userCount)>N?!1:!(B&&ee.post_type==="post_group"||oe),single:ne,userCount:ee.userCount,isChecked:!!ee.isChecked,itemId:ee.id,title:this.renderDeptName(ee,c),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!ee.children,hidePosts:ae,disableHidden:t}))),pe=[],Ze=Qe.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")].map(ee=>(pe.push(r().createElement("div",{className:"title-item",key:ee.id},this.renderName(ee,c))),a.belleFlag&&f?r().createElement(He,{key:ee.id,hasNext:!1,title:this.renderName(ee),isChecked:!!ee.isChecked,itemId:ee.id,cardInfo:ee,checkable:!(ee.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:t}):r().createElement(we,{key:ee.id,hasNext:!1,title:this.renderName(ee),isChecked:!!ee.isChecked,itemId:ee.id,cardInfo:ee,checkable:!(ee.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:t}))),Ge=this.getIsCheckAll(),Je=r().createElement("div",{className:"org-tree-item"},r().createElement(Le.Z,{checked:Ge,defaultChecked:!0,onClick:ee=>this.checkAll(ee,!Ge)},m("common.all")));return r().createElement("div",{className:"".concat(this.context.oneDisplayType?"org-tree more-height":"org-tree"," ").concat(a.belleFlag&&f?"org-tree-belle":"")},!this.context.single&&this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&q.length===0&&Ze.length>0&&p||!this.context.single&&!this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&(q.length>0||Ze.length>0)&&p?Je:null,a.belleFlag&&f&&r().createElement("div",{className:"belle-title-scroll"},de,pe),q,Ze)}}nt.contextType=fe,nt.defaultProps={dataTypeKey:"dept",contextData:{},disableHidden:!1,scrollFlag:!1};var Me=(0,K.Z)()(nt),ot=e(25547),pt="999",ht=1,vt=["clusterList","classList"];class mt extends r().Component{constructor(g,p){var a;super(g);a=this,this.getClusterList=()=>{var s=Y.ZP.OrgDialog.getClusterList(),m={keyword:""};Ae.WY.get({url:s,params:m}).then(c=>{this.context.initTypeList("clusterList","checkedCluster",c.data.data.map(t=>({name:t.name,userCount:t.user_count,id:t.id,parentId:[""]})))})},this.getClassList=()=>{this.context.initTypeList("classList","checkedClass",[{name:"\u6D4B\u8BD52",userCount:2,id:"2",parentId:[""]},{name:"\u6D4B\u8BD54",userCount:1,id:"41",parentId:[""]}])},this.flatTreeData=(s,m)=>(s.children.forEach(c=>{c.children&&(m[c.id]=c.children,this.flatTreeData(c,m))}),m),this.getDeptList=function(s){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise((c,t)=>{var f=a.state.cacheId;dt({departmentId:s,cache_id:f,filter_auth:m&&!a.props.filterAuthOpen}).then(U=>{var N=U.data.children||[];N.forEach(B=>{B.parentId=U.data.id,B.userCount=B.user_count,B.name=B.department_name,B.all_name=r().createElement("span",null,a.state.contextData.breadNav.map(oe=>r().createElement("span",{key:oe.value},oe.label,"/")),B.department_name)});var ae=[];a.context.asyncDeptTree?ae=N:ae=a.flatTreeData(U.data,{[U.data.id]:N}),a.setState({deptList:ae}),a.context.initTypeList("deptList","checkedDept",N),c(U.data)}).catch(U=>{console.error(U),t(U)})})},this.getDeptUserList=function(s){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=a.state.cacheId;ut({departmentId:s,cache_id:c,filter_auth:m&&!a.props.filterAuthOpen}).then(t=>{t.data&&t.data.forEach(f=>{f.name=f.user_name,f.detailInfo=!1}),a.context.initTypeUser("deptUser",t.data)}).catch(t=>{console.error(t)})},this.getGroupList=()=>{var s=Y.ZP.Organization.getGroupList(),m={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ae.WY.get({url:s,params:m}).then(c=>{c.data.groups=c.data.groups||[],c.data.groups.forEach(t=>{t.parentId=this.state.contextData.breadNav.map(f=>f.value),t.userCount=t.user_count,t.name=t.group_name}),this.setState({groupList:c.data.groups}),this.context.initTypeList("groupList","checkedGroup",c.data.groups)})},this.getGroupUserList=s=>{var m=Y.ZP.Organization.getGroupUserList({groupId:s}),c={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ae.WY.get({url:m,params:c}).then(t=>{t.data.users&&t.data.users.forEach(f=>{f.name=f.user_name,f.parentId=this.state.contextData.breadNav.map(U=>U.value)}),this.context.initTypeUser("groupUser",t.data.users)})},this.getPostList=s=>{var m=Y.ZP.Organization.getPostTree(),c={filter_auth:!this.props.filterAuthOpen,post_id:s,user_type:this.context.userType};Ae.WY.get({url:m,params:c}).then(t=>{t.data.posts=t.data.posts||[],t.data.posts.forEach(f=>{f.parentId=this.state.contextData.breadNav.map(U=>U.value),f.userCount=f.user_count,f.name=f.post_name}),this.setState({postList:t.data.posts}),this.context.initTypeList("postList","checkedPost",t.data.posts),this.context.initHidePostsStatus(t.data.hide_posts==="true")})},this.getPostUserList=s=>{var m=Y.ZP.Organization.getPostUserList({postId:s}),c={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ae.WY.get({url:m,params:c}).then(t=>{t.data.users&&t.data.users.forEach(f=>{f.name=f.user_name,f.parentId=this.state.contextData.breadNav.map(U=>U.value)}),this.context.initTypeUser("postUser",t.data.users)})},this.getUserList=function(s){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;a.props.type==="dept"?a.getDeptUserList(s,m):a.props.type==="group"?a.getGroupUserList(s):a.getPostUserList(s)},this.checkOne=(s,m,c)=>{var t=this.state.checkedCount;if(m==="list"){var f=this.context[this.state.listType].find(N=>N.id===s);f.isChecked=c,f.all_name&&typeof f.all_name=="object"&&delete f.all_name,t=c?t+1:t-1,this.context.checkListOne(f,this.state.checkedListType,this.state.listType)}else if(m==="user"){var U=this.context[this.state.checkedUserType].find(N=>N.id===s);U.isChecked=c,t=c?t+1:t-1,this.context.checkUserOne(U,this.state.checkedUserType)}this.updateCheckedCount(t)},this.updateCheckedCount=s=>{this.setState({checkedCount:s})},this.checkAll=function(){var s=(0,W.Z)(E().mark(function m(c){var t,f,U,N,ae,B,oe,ne,de,q,pe,Ze,Ge,Je,ee;return E().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(t=a.state,f=t.contextData,U=t.cacheId,N=[...f.breadNav].reverse(),ae=(0,M.Z)(N,1),B=ae[0],oe=B.value,ne=[...a.context[a.state.checkedListType]],de=B.authorized==="false",q={departments:[],users:[]},!de){lt.next=12;break}return lt.next=9,ke({departmentId:oe,cache_id:U});case 9:pe=lt.sent,Ze=pe.data,q={departments:Ze.departments.map(Ce=>(Ce.isChecked=c,Ce.name=Ce.department_name,Ce.parentId=Ce.parent_ids.split("/"),Ce.parentAuthorize=!1,Ce.userCount=Ce.user_count,Ce)),users:Ze.users.map(Ce=>(Ce.isChecked=c,Ce.name=Ce.user_name,Ce.parentAuthorize=!1,Ce))};case 12:Ge=a.context[a.state.listType].map(Ce=>{Ce.isChecked=c,a.props.type!=="dept"&&ne.forEach(ct=>{ct.parentId.indexOf("".concat(Ce.id))!==-1&&(ct.isChecked=!1)});var it=ne.findIndex(ct=>ct.id===Ce.id);return it!==-1?ne[it].isChecked=c:ne.push(Ce),Ce}),Je=[],a.context.checkedUser.forEach(Ce=>{if(a.props.type!=="dept"){if(typeof Ce.parentId!="undefined"&&Ce.parentId.indexOf("".concat(oe))!==-1&&Ce.parentId[Ce.parentId.length-1]!==oe)return}else{var it=typeof Ce.parentId!="undefined"?Ce.parentId:Ce.department_ids||[];if(it.indexOf(oe)!==-1)return}Je.push(Ce)}),ee=vt.includes(a.state.listType)?[]:a.context[a.state.checkedUserType].map(Ce=>{Ce.isChecked=c;var it=Je.findIndex(ct=>ct.id===Ce.id);return it!==-1?Je[it].isChecked=c:Je.push(Ce),Ce}),a.context.toggleDisplayList(a.state.checkedListType,$()(q.departments,ne,"id"),a.state.listType,Ge,a.state.checkedUserType,ee,$()(q.users,Je,"id")),a.setState({checkedCount:c?(vt.includes(a.state.listType)?0:a.context[a.state.checkedUserType].length)+a.context[a.state.listType].length:0});case 18:case"end":return lt.stop()}},m)}));return function(m){return s.apply(this,arguments)}}(),this.nextLevel=(s,m,c)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var t=[...this.state.contextData.breadNav,{value:s.id,label:m,authorized:s.authorized}];this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{breadNav:t})},()=>{this.props.type==="post"?this.nextPostLevel(s.id,c):this.props.type==="dept"?this.nextDeptLevel(s.id,!(re()(s,"authorized")&&s.authorized==="true")):this.context.initTypeList("groupList","checkedGroup",[]),this.getUserList(s.id===pt?ht:s.id,!(re()(s,"authorized")&&s.authorized==="true"))})},this.nextDeptLevel=(s,m)=>{if(this.context.asyncDeptTree)this.getDeptList(s,m);else{var c=this.state.deptList[s];typeof c!="undefined"&&c.forEach(t=>{t.parentId=this.state.contextData.breadNav.map(f=>f.value),t.userCount=t.user_count,t.name=t.department_name}),this.context.initTypeList("deptList","checkedDept",c||[])}},this.nextPostLevel=(s,m)=>{if(m){var c=(0,ot.lK)(this.state.postList,s),t=c.children.map(f=>(f.name=f.post_name,f.parentId=this.state.contextData.breadNav.concat([s]).map(U=>U.value),f.userCount=f.user_count,f));this.context.initTypeList("postList","checkedPost",t)}},this.changeLevel=(s,m,c)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var t=this.props.type==="group"?[this.state.contextData.breadNav[0]]:this.state.contextData.breadNav.slice(0,m+1);this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{breadNav:t}),isSearch:!1},()=>{this.props.type==="dept"?this.changeDeptLevel(s,c):this.props.type==="group"?this.changeGroupLevel(s):this.props.type==="cluster"?this.getClusterList():this.props.type==="class"?this.getClassList():this.changePostLevel(s)})},this.changeDeptLevel=function(s){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(a.context.asyncDeptTree)a.getDeptList(s,m);else{var c=a.state.deptList[s];c.forEach(t=>{t.parentId=a.state.contextData.breadNav.map(f=>f.value),t.userCount=t.user_count,t.name=t.department_name}),a.context.initTypeList("deptList","checkedDept",c)}a.getDeptUserList(s===pt?ht:s,m)},this.changePostLevel=s=>{var m=s==="1"?this.state.postList:(0,ot.lK)(this.state.postList,s).children,c=m.map(t=>(t.name=t.post_name,t.parentId=this.state.contextData.breadNav.concat([s]).map(f=>f.value),t.userCount=t.user_count,t));this.context.initTypeList("postList","checkedPost",c),s!=="1"&&this.getPostUserList(s===pt?ht:s)},this.changeGroupLevel=s=>{s||(this.context.initTypeUser("groupUser",[]),this.context.initTypeList("groupList","checkedGroup",this.state.groupList))},this.state={postList:[],deptList:[],groupList:[],clusterList:[],classList:[],contextData:{breadNav:[this.props.defaultBreadNav],checkOne:this.checkOne,checkAll:this.checkAll,nextLevel:this.nextLevel,changeLevel:this.changeLevel},checkedCount:0,listType:"".concat(this.props.type,"List"),checkedListType:"checked".concat(this.props.type.charAt(0).toUpperCase()).concat(this.props.type.substr(1)),checkedUserType:"".concat(this.props.type,"User"),isSearch:!1,searchResult:[],loadDept:!1,loadUser:!1,cacheId:p.cacheId}}componentDidMount(){this.props.type!=="group"?this.props.type==="dept"?this.getDeptList("1").then(g=>{this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{breadNav:[{value:g.id,label:g.department_name,sourceType:g.source_type,authorized:g.authorized}]})}),this.getDeptUserList("1")}):this.getPostList("1"):this.getGroupList(1),this.props.type==="cluster"&&this.getClusterList(),this.props.type==="class"&&this.getClassList()}render(){return r().createElement(Q.Provider,{value:this.state.contextData},r().createElement("div",{className:"org-display-container org-display-dept"},r().createElement(ft,null),this.props.type==="dept"&&(this.state.loadDept||this.state.loadUser)?r().createElement("div",{className:"dept-loading"},r().createElement(H.Z,null)):null,r().createElement(yt,{dataTypeKey:this.props.type,disableHidden:this.props.disableHidden,scrollFlag:this.props.scrollFlag})))}}mt.contextType=fe;var ft=(0,ce.l)(Q,Ne),yt=(0,ce.l)(Q,Me);mt.defaultProps={defaultBreadNav:{value:"",label:"\u9177\u6E32\u79D1\u6280"},queryType:1,type:"dept",filterAuthOpen:!1,disableHidden:!1,scrollFlag:!1};var gt=mt,Ct=e(57663),Et=e(71577),ve=e(54549);class l extends r().Component{constructor(){super(...arguments);this.removeItem=(g,p,a,s)=>{g.preventDefault(),p.isChecked=!1,s==="user"?this.context.removeCheckedUser(p):this.context.checkListOne(p,a,"".concat(s,"List"))},this.displayName=(g,p)=>{var a={user:"userName",dept:"departmentName"}[g]||"",s={user:p.unionid||p.user_id||p.userId,dept:p.id}[g]||p.id;return r().createElement(Te.Z,{value:s,name:p.name,type:p.source_type||p.sourceType,dataType:a})},this.displayItem=g=>{var p=this.context,a=p.hidePosts,s=p.showUserCount,m="checked".concat(g.charAt(0).toUpperCase()).concat(g.substr(1)),c=this.context[m].map(t=>t.isChecked&&t.authorized!=="false"?r().createElement(Be.Z,{key:t.id,placement:"top",title:t.all_name||"",getPopupContainer:()=>document.querySelector(".checked-display-container")},r().createElement("div",{className:"display-item",key:t.id},this.displayName(g,t),g==="user"||a&&g==="post"?"":s&&t.userCount>-1?"(".concat(t.userCount,")"):"",t.reserve?null:r().createElement("span",{className:"display-item-close",onClick:f=>this.removeItem(f,t,m,g)},r().createElement(ve.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))):null);return c},this.handleClearSelected=()=>{this.context.clearSelectedAll()}}render(){var g=this.props.t,p=["dept","group","post","user","cluster","class"].map(a=>this.displayItem(a));return r().createElement("div",{className:"checked-display-container"},r().createElement("div",{className:"checked-display-container-header"},r().createElement("span",null,g("orgDialog.selected"),":"),r().createElement(Et.Z,{type:"link",onClick:this.handleClearSelected},g("orgDialog.clearAll"))),p)}}l.contextType=fe;var d=(0,K.Z)()(l),o=e(67222),i=e(6793),u=J.Z.Search;class v extends r().Component{constructor(g){var p;super(g);p=this,this.onChange=a=>{var s=this.props.appType,m=localStorage.getItem("qyWechatBook");if(a.preventDefault(),this.setState({value:a.target.value}),!(!a.target.value&&!this.props.showCancel)&&!this.props.disableChange){var c=s==="wx_app"&&m==="true";!(0,Fe.eY)("ORG_DIALOG_SEARCH")||c||(0,i.Ds)(this.debounceChange,500)()}},this.handleSearch=(a,s)=>{s.preventDefault(),!(!a&&!this.props.showCancel)&&this.extendReturn(a)},this.debounceChange=()=>{this.extendReturn(this.state.value)},this.extendReturn=function(){var a=(0,W.Z)(E().mark(function s(m){var c,t,f,U,N,ae,B,oe,ne;return E().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(c=p.props,t=c.appType,f=c.selectType,U=c.appId,N=localStorage.getItem("qyWechatBook"),ae="",B=t==="wx_app"&&N==="true"&&U==="9005",!(m&&f==="user"&&B)){q.next=17;break}return q.prev=5,q.next=8,(0,o.F_)(m);case 8:oe=q.sent,ne=oe.data,ne.success&&(ae=ne.data),q.next=17;break;case 13:q.prev=13,q.t0=q.catch(5),console.error(q.t0),ae="";case 17:p.props.onSearch(m,ae);case 18:case"end":return q.stop()}},s,null,[[5,13]])}));return function(s){return a.apply(this,arguments)}}(),this.state={value:""}}render(){var g=this.props,p=g.t,a=g.selectType;return r().createElement("div",{className:"top-search"},r().createElement(u,{placeholder:p(a==="user"?"component.searchStudent":a==="dept"?"component.searchDepartment":a==="post"?"component.searchPost":a==="cluster"?"component.searchCluster":a==="class"?"component.searchClass":"setting.searchGroup"),value:this.state.value,onSearch:this.handleSearch,allowClear:!0,onChange:this.onChange}))}}var y=(0,Ke.$j)(O=>({appType:O.user.appType,appId:O.user.appId}))((0,K.Z)()(v)),k=e(87312);class P extends b.Component{constructor(){super(...arguments);this.checkedAll=(g,p)=>{this.props.checkedAll(p)},this.getIsCheckedAll=()=>{var g=this.props.list,p=[].concat(g);if(p.length===0)return!1;var a=p.findIndex(s=>!s.isChecked);return a===-1},this.checkUser=(g,p)=>{p.isChecked=!p.isChecked,this.context.checkUserOne(p,"checkedUser")},this.checkSingleUser=(g,p)=>{p.isChecked=!0,this.context.checkUserOne(p,"checkedUser")},this.checkDept=(g,p)=>{p.isChecked=!p.isChecked,this.context.checkListOne(p,"checkedDept","deptList")},this.checkPost=(g,p)=>{p.isChecked=!p.isChecked,this.context.checkListOne(p,"checkedPost","postList")},this.checkGroup=(g,p)=>{p.isChecked=!p.isChecked,this.context.checkListOne(p,"checkedGroup","groupList")},this.checkedCluster=(g,p)=>{p.isChecked=!p.isChecked,this.context.checkListOne(p,"checkedCluster","clusterList")}}renderList(){var g=this.props,p=g.userListType,a=g.list,s=g.t,m=g.isSingle,c=g.hidePosts;return p==="user"&&!m?a.map(t=>r().createElement("div",{className:"search-result-item",key:t.id,onClick:f=>{this.checkUser(f,t)}},r().createElement(Le.Z,{checked:t.isChecked},r().createElement(he,{cardInfo:t},r().createElement("span",{className:"user-names"},r().createElement(Te.Z,{dataType:"userName",value:t.user_id,name:t.user_name,type:t.source_type}))),t.department_names&&t.department_names.length>0?r().createElement("span",{className:"user-dept"},r().createElement(_e.Z,{sourceType:t.source_type,list:t.leaf_department_ids,nameList:t.department_names})):null))):p==="user"&&m?a.map(t=>r().createElement("div",{className:"search-result-item",key:t.id,onClick:f=>{this.checkSingleUser(f,t)}},r().createElement("div",{className:"user-name"},r().createElement(he,{cardInfo:t},r().createElement(Te.Z,{dataType:"userName",value:t.user_id,name:t.user_name,type:t.source_type}))),t.department_names&&t.department_names.length>0?r().createElement("span",{className:"user-name-dept"},r().createElement(_e.Z,{sourceType:t.source_type,list:t.leaf_department_ids,nameList:t.department_names})):null)):p==="dept"?a.map(t=>r().createElement("div",{className:"search-result-dept-item",key:t.id,onClick:f=>{this.checkDept(f,t)}},r().createElement(Le.Z,{checked:t.isChecked,className:"department-left"},r().createElement("div",{className:"department-left-department"},r().createElement("div",{className:"user-name"},r().createElement(Te.Z,{dataType:"departmentName",value:t.id,name:t.department_name,type:t.source_type})),t.path&&t.path.length>0?r().createElement(Be.Z,{title:t.path.join(">"),mouseEnterDelay:.8},r().createElement("span",{className:"user-name-dept"},r().createElement(_e.Z,{list:t.department_infos||[],displayAll:!0}))):null)),r().createElement("div",{className:"department-right"},"(",t.userCount,s("common.userUnit"),")"))):p==="post"?a.map(t=>r().createElement("div",{className:"search-result-dept-item",key:t.id,onClick:f=>{this.checkPost(f,t)}},r().createElement(Le.Z,{checked:t.isChecked,className:"department-left"},r().createElement("div",{className:"department-left-department"},r().createElement("div",{className:"user-name"},t.name),t.path&&t.path.length>0?r().createElement(Be.Z,{title:t.path.join(">"),mouseEnterDelay:.8},r().createElement("span",{className:"user-name-dept"},r().createElement("span",null,t.path.join(">")))):null)),!c&&r().createElement("div",{className:"department-right"},"(",t.userCount,s("common.userUnit"),")"))):p==="group"?a.map(t=>r().createElement("div",{className:"search-result-dept-item",key:t.id,onClick:f=>{this.checkGroup(f,t)}},r().createElement(Le.Z,{checked:t.isChecked,className:"department-left"},r().createElement("div",{className:"department-left-department"},r().createElement("div",{className:"user-name"},t.name),t.path&&t.path.length>0?r().createElement(Be.Z,{title:t.path.join(">"),mouseEnterDelay:.8},r().createElement("span",{className:"user-name-dept"},r().createElement("span",null,t.path.join(">")))):null)),r().createElement("div",{className:"department-right"},"(",t.userCount,s("common.userUnit"),")"))):p==="cluster"?a.map(t=>r().createElement("div",{className:"search-result-dept-item",key:t.id,onClick:f=>{this.checkedCluster(f,t)}},r().createElement(Le.Z,{checked:t.isChecked,className:"department-left"},r().createElement("span",{className:"user-name"},t.name)),r().createElement("div",{className:"department-right"},"(",t.userCount,s("common.userUnit"),")"))):null}render(){var g=this.props,p=g.t,a=g.isSingle,s=this.getIsCheckedAll(),m=r().createElement("div",{className:"search-result-all"},r().createElement(Le.Z,{checked:s,onClick:c=>this.checkedAll(c,!s)},p("common.all")));return r().createElement("div",{className:"search-result-container more-height"},this.props.list.length>0?r().createElement(r().Fragment,null,!a&&m,this.renderList()):r().createElement(k.Z,{tipText:p("component.searchUserEmpty")}))}}P.contextType=fe,P.defaultProps={list:[]};var F=(0,K.Z)()(P),V=e(18329),_=e(65202),x=e(91648),R=I.Z.TabPane,se=n.Z.Option,ge={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0 20px"},maskClosable:!1};class Pe extends r().Component{constructor(g){var p;super(g);p=this,this.onCancel=()=>{var a=this.props.onCancel;this.setState({showCancel:!1}),a&&this.props.onCancel()},this.onOk=()=>{var a=this.props.onOk,s=this.state.contextData;this.setState({showCancel:!1});var m=0;if(a){var c=[];s.checkedDept.map(B=>(m+=B.isChecked?B.user_count:0,B.isChecked&&B.authorized!=="false"?c.push((0,h.Z)((0,h.Z)({},B),{},{renderType:"dept"})):null));var t=[];s.checkedPost.map(B=>(m+=B.isChecked?B.user_count:0,B.isChecked?t.push((0,h.Z)((0,h.Z)({},B),{},{renderType:"post"})):null));var f=[];s.checkedGroup.map(B=>(m+=B.isChecked?B.user_count:0,B.isChecked?f.push((0,h.Z)((0,h.Z)({},B),{},{renderType:"group"})):null));var U=[];s.checkedUser.map(B=>{if(!B.reserve)return m+=B.isChecked?1:0,B.isChecked?U.push((0,h.Z)((0,h.Z)({},B),{},{renderType:"user"})):null});var N=[];s.checkedCluster.map(B=>{if(!B.reserve)return m+=B.isChecked?1:0,B.isChecked?N.push((0,h.Z)((0,h.Z)({},B),{},{renderType:"cluster"})):null});var ae=[];if(s.checkedClass.map(B=>{if(!B.reserve)return m+=B.isChecked?1:0,B.isChecked?ae.push((0,h.Z)((0,h.Z)({},B),{},{renderType:"class"})):null}),m>this.props.maxUserCount){z.default.warn(this.props.beyondLimitTip);return}a({dept:c,post:t,group:f,user:U,cluster:N,classes:ae})}},this.getListParentId=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];s.forEach(oe=>{oe.isChecked=!0,oe.parentId=[""],oe.userCount=oe.userCount||oe.user_count||0});var U=a.map(oe=>oe.id),N=c.map(oe=>oe.id);if(U||N){var ae=Y.ZP.OrgDialog.getDeptParent(),B={query_type:1,dept_ids:U,user_ids:N};Ae.WY.post({url:ae,data:(0,h.Z)({},B)}).then(oe=>{var ne=oe.data.data;a.forEach(de=>{de.isChecked=!0;var q=ne.find(pe=>pe.id===de.id)||{path:[]};de.parentId=q.path[0]?q.path[0].split("/").slice(1):[],de.userCount=q.user_count||de.userCount||de.user_count||0}),m.forEach(de=>{de.isChecked=!0;var q=ne.find(pe=>pe.id===de.id)||{path:[]};de.parentId=q.path[0]?q.path[0].split("/").slice(1):[],de.userCount=de.userCount||de.user_count||0}),c.forEach(de=>{de.isChecked=!0;var q=[];ne.forEach(pe=>{pe.id===de.id&&pe.path.map(Ze=>{q.push(...Ze.split("/").slice(1))})}),de.parentId=Array.from(new Set(q))}),t.forEach(de=>{de.isChecked=!0;var q=ne.find(pe=>pe.id===de.id)||{path:[]};de.parentId=q.path[0]?q.path[0].split("/").slice(1):[],de.userCount=de.userCount||de.user_count||0}),f.forEach(de=>{de.isChecked=!0;var q=ne.find(pe=>pe.id===de.id)||{path:[]};de.parentId=q.path[0]?q.path[0].split("/").slice(1):[],de.userCount=de.userCount||de.user_count||0}),p.setState({contextData:(0,h.Z)((0,h.Z)({},p.state.contextData),{},{checkedDept:a,checkedGroup:s,checkedPost:m,checkedUser:c,checkedCluster:t,checkedClass:f})})})}else s.length>0?p.setState({contextData:(0,h.Z)((0,h.Z)({},p.state.contextData),{},{checkedGroup:s})}):p.setState({contextData:(0,h.Z)((0,h.Z)({},p.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[]})})},this.initHidePostsStatus=a=>{var s=this.state.contextData;this.setState({contextData:(0,h.Z)((0,h.Z)({},s),{},{hidePosts:a})})},this.initTypeList=(a,s,m)=>{m.forEach(c=>{var t=this.findItemIndex(c.id,s);t===-1?c.isChecked=!1:c.isChecked=this.state.contextData[s][t].isChecked}),this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{[a]:m})})},this.initTypeUser=(a,s)=>{var m=s||[...this.state.contextData[a]],c=this.props.reserveUser;m.forEach(t=>{var f=this.findItemIndex(t.id,"checkedUser");c.findIndex(U=>U.id===t.id)!==-1&&(t.reserve=!0),f===-1?t.isChecked=!1:t.isChecked=this.state.contextData.checkedUser[f].isChecked}),this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{[a]:m})})},this.toggleDisplayItem=(a,s)=>{var m=this.findItemIndex(a.id,s);return m===-1?s.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[s]:this.checkListParentId(s,a),checkedUser:a.isChecked?this.checkParentId(this.state.contextData.checkedUser,a.id):this.state.contextData.checkedUser}:{[s]:[...this.state.contextData[s],a]}:s.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[s]:this.checkListParentId(s,a),checkedUser:a.isChecked?this.checkParentId(this.state.contextData.checkedUser,a.id):this.state.contextData.checkedUser}:{checkedUser:this.getNewList(a,"checkedUser",!0),[s]:this.getNewList(a,s)}},this.toggleDisplayList=(a,s,m,c,t,f,U)=>{this.deleteAllName(s),this.deleteAllName(c),this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{[a]:s,[m]:c,[t]:f,checkedUser:U})})},this.deleteAllName=a=>{a.map(s=>(s.all_name&&typeof s.all_name=="object"&&delete s.all_name,s))},this.checkUserOne=(a,s)=>{this.props.single?this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{checkedUser:[a],[s]:s==="checkedUser"?[a]:this.getSingleUserList(a,s)})}):this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),this.toggleDisplayItem(a,s))})},this.dealAuthorizedFalseChecked=function(){var a=(0,W.Z)(E().mark(function s(m){var c,t,f,U,N,ae,B,oe,ne;return E().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return c=p.state.contextData,t=c.cacheId,f=c.checkedDept,U=c.checkedUser,N={checkedDept:[],checkedUser:[]},q.prev=2,q.next=5,ke({departmentId:m.id,cache_id:t});case 5:ae=q.sent,B=ae.data,oe=B.departments,ne=B.users,oe.push(m),oe.map(pe=>(pe.isChecked=!0,pe.name=pe.department_name,pe.parentId=pe.parent_ids.split("/"),pe.parentAuthorize=!1,pe.userCount=pe.user_count,pe)),ne.map(pe=>(pe.isChecked=!0,pe.name=pe.user_name,pe.parentAuthorize=!1,p.toggleDisplayItem(pe,"deptUser"),pe)),N=(0,h.Z)((0,h.Z)({},N),{},{checkedUser:$()(ne,U,"id"),checkedDept:$()(oe,f,"id")}),q.next=16;break;case 13:q.prev=13,q.t0=q.catch(2),console.error("\u83B7\u53D6\u90E8\u95E8\u7BA1\u8F96\u8303\u56F4\u51FA\u9519",q.t0);case 16:return q.abrupt("return",N);case 17:case"end":return q.stop()}},s,null,[[2,13]])}));return function(s){return a.apply(this,arguments)}}(),this.dealAuthorizedFalseUnChecked=a=>{var s=this.state.contextData,m=s.checkedDept,c=s.checkedUser,t=s.deptUser,f=[],U=m.filter(ae=>ae.parent_ids.split("/").indexOf(a.id)===-1),N=c.filter(ae=>{var B=ae.department_ids.indexOf(a.id)===-1;return B||f.push(ae.id),B});return{checkedDept:U,checkedUser:N,deptUser:f.length>0?t.map(ae=>(f.indexOf(ae.id)>-1&&(ae.isChecked=!1),ae)):t}},this.checkListOne=function(){var a=(0,W.Z)(E().mark(function s(m,c,t){var f;return E().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(f={checkedDept:[],checkedUser:[]},!(m.authorized==="false"&&c==="checkedDept")){N.next=12;break}if(!m.isChecked){N.next=8;break}return N.next=5,p.dealAuthorizedFalseChecked(m);case 5:N.t0=N.sent,N.next=9;break;case 8:N.t0=p.dealAuthorizedFalseUnChecked(m);case 9:f=N.t0,N.next=14;break;case 12:m.parentAuthorize===!1&&m.isChecked===!1&&p.unCheckedParentDept(m,c),f=(0,h.Z)({[t]:p.getNewList(m,t,!1)},p.toggleDisplayItem(m,c));case 14:p.setState({contextData:(0,h.Z)((0,h.Z)({},p.state.contextData),f)});case 15:case"end":return N.stop()}},s)}));return function(s,m,c){return a.apply(this,arguments)}}(),this.removeCheckedUser=a=>{this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{checkedUser:this.getNewList(a,"checkedUser"),deptUser:this.getNewList(a,"deptUser"),postUser:this.getNewList(a,"postUser"),groupUser:this.getNewList(a,"groupUser"),searchResult:this.getNewList(a,"searchResult")})})},this.unCheckedParentDept=(a,s)=>{var m=this.state.contextData.checkedDept,c=m.filter(U=>U.authorized==="false"&&s==="checkedUser"?a.department_ids.indexOf(U.id)>-1:s==="checkedDept"?a.parentId.indexOf(U.id)>-1:!1),t=(0,M.Z)(c,1),f=t[0];f&&(f.isChecked=!1,this.toggleDisplayItem(f,"checkedDept"),this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{checkedDept:c})}))},this.checkListParentId=(a,s)=>{var m=[...this.state.contextData[a]],c=this.findItemIndex(s.id,a);return m.forEach(t=>{t.id!==s.id&&t.parentId.indexOf("".concat(s.id))!==-1?t.isChecked=!1:t.id===s.id&&(t.isChecked=s.isChecked)}),c===-1&&m.push(s),m},this.checkParentId=(a,s)=>{var m=[];return a.forEach(c=>{var t=typeof c.parentId!="undefined"?c.parentId:c.department_ids||[];t.indexOf(s)===-1&&m.push(c)}),m},this.getNewList=(a,s,m)=>{var c=[...this.state.contextData[s]],t=this.findItemIndex(a.id,s);return t===-1?m&&c.push(a):c[t].isChecked=a.isChecked,c},this.getSingleUserList=(a,s)=>{var m=[...this.state.contextData[s]];return m.forEach(c=>{c.id===a.id?c.isChecked=a.isChecked:c.isChecked=!1}),m},this.findItemIndex=(a,s)=>this.state.contextData[s].findIndex(m=>m.id===a),this.clearTabPanelList=(a,s)=>{this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{[a]:[],[s]:[]})})},this.getTabs=()=>{var a=[],s,m,c=this.props,t=c.t,f=c.filterAuthOpen,U=c.disableHidden,N=c.scrollFlag,ae=this.state.contextData,B=ae.canUseGroups,oe=ae.canUseClass;return this.state.displayType.forEach(ne=>{switch(ne){case"dept":a.push({label:t("component.orgDialogDeptLabel"),key:"dept",defaultBreadNav:{value:"",label:"",sourceType:""},queryType:1});break;case"group":a.push({label:t("component.orgDialogGroupLabel"),key:"group",queryType:2,defaultBreadNav:{value:"",label:t("component.userGroup")}});break;case"post":a.push({label:t("component.orgDialogPostLabel"),key:"post",defaultBreadNav:{value:"1",label:t("common.post")},queryType:3});break;case"cluster":B&&a.push({label:t("component.orgDialogClusterLabel"),key:"cluster",defaultBreadNav:{value:"",label:""},queryType:4});break;case"class":oe&&a.push({label:t("component.orgDialogClassLabel"),key:"class",defaultBreadNav:{value:"",label:""},queryType:5});break}}),a.length===1?m=r().createElement(gt,{defaultBreadNav:a[0].defaultBreadNav,queryType:a[0].queryType,type:a[0].key,filterAuthOpen:f,disableHidden:U,scrollFlag:N}):(s=a.map(ne=>r().createElement(R,{tab:ne.label,key:ne.key},r().createElement(gt,{defaultBreadNav:ne.defaultBreadNav,queryType:ne.queryType,type:ne.key,filterAuthOpen:f,disableHidden:U,scrollFlag:N}))),m=r().createElement(I.Z,null,s)),m},this.handleSearch=(a,s)=>{var m=this.state.selectType;m==="user"?this.getUserList(a,s):m==="dept"?this.getDeptList(a):m==="post"?this.getPostList(a):m==="cluster"?this.getClusterResult(a):m==="class"?this.getClassResult(a):this.getGroupList(a)},this.getClusterResult=a=>{var s=Y.ZP.OrgDialog.getClusterList(),m={keyword:a};Ae.WY.get({url:s,params:m}).then(c=>{this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedCluster",c.data.data.map(t=>({name:t.name,userCount:t.user_count,id:t.id,parentId:[""]})))})},this.getUserList=(a,s)=>{var m=Y.ZP.OrgDialog.getUserByName(),c={user_name:s===""?a:"",filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType,userIds:s};Ae.WY.get({url:m,params:c}).then(t=>{t.data.users&&t.data.users.forEach(f=>{f.name=f.user_name}),this.setState({showCancel:!0}),this.initTypeUser("searchResult",t.data.users||[])})},this.getDeptList=a=>{var s=Y.ZP.Organization.queryDept(),m={department_name:a,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ae.WY.get({url:s,params:m}).then(c=>{c.data.departments&&c.data.departments.forEach(t=>{t.name=t.department_name,t.parentId=t.parent_ids?t.parent_ids.split("/"):[],t.userCount=t.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedDept",c.data.departments||[])})},this.getPostList=a=>{var s=Y.ZP.Organization.addPost(),m={post_name:a,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ae.WY.get({url:s,params:m}).then(c=>{c.data.posts&&c.data.posts.forEach(t=>{t.name=t.post_name,t.parentId=t.parent_id?t.parent_id.split("/"):[],t.userCount=t.user_count}),this.setState({hidePosts:c.data.hide_posts,showCancel:!0}),this.initTypeList("searchResult","checkedPost",c.data.posts||[])})},this.getGroupList=a=>{var s=Y.ZP.Organization.getGroupList(),m={group_name:a,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ae.WY.get({url:s,params:m}).then(c=>{c.data.groups&&c.data.groups.forEach(t=>{t.name=t.group_name,t.parentId=t.parent_id?t.parent_id.split("/"):[],t.userCount=t.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedGroup",c.data.groups||[])})},this.checkAllResult=a=>{var s=this.state,m=s.selectType,c=s.contextData,t="checked".concat(m.charAt(0).toUpperCase()).concat(m.substr(1)),f=[...c[t]],U=c.searchResult.map(ae=>{ae.isChecked=a;var B=f.findIndex(oe=>oe.id===ae.id);return B!==-1?f[B].isChecked=a:f.push(ae),ae}),N=f;this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{[t]:N,searchResult:U})})},this.clearSelectedAll=()=>{var a=this.state.contextData,s=a.checkedDept,m=a.checkedGroup,c=a.checkedPost,t=a.checkedUser,f=a.checkedCluster,U=a.checkedClass,N=a.deptList,ae=a.groupList,B=a.postList,oe=a.clusterList,ne=a.classList,de=a.deptUser,q=a.groupUser,pe=a.postUser,Ze=Ge=>(Ge.forEach(Je=>{Je.isChecked=!1}),Ge);this.setState({contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],deptList:s.length>0?Ze(N):N,groupList:m.length>0?Ze(ae):ae,postList:c.length>0?Ze(B):B,clusterList:f.length>0?Ze(oe):oe,classList:U.length>0?Ze(ne):ne,deptUser:t.length>0?Ze(de):de,groupUser:t.length>0?Ze(q):q,postUser:t.length>0?Ze(pe):pe})})},this.handleCancel=()=>{this.setState({showCancel:!1})},this.handleSelectChange=a=>{this.setState({selectType:a,contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{searchResult:[]})})},this.state={title:g.title||g.t("component.chooseAssignScope"),displayType:g.displayType?g.displayType:["dept"],selectType:"user",showCancel:!1,hidePosts:!1,contextData:{showUserCount:g.showUserCount,deptList:[],groupList:[],postList:[],clusterList:[],classList:[],deptUser:[],groupUser:[],postUser:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[],onlyUser:g.onlyUser,onlyDept:g.onlyDept,onlyPost:g.onlyPost,canUseGroups:g.useGroups,canUseClass:g.useClass,single:g.single,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,userType:this.props.userType,initTypeList:this.initTypeList,initTypeUser:this.initTypeUser,toggleDisplayItem:this.toggleDisplayItem,toggleDisplayList:this.toggleDisplayList,checkListOne:this.checkListOne,checkUserOne:this.checkUserOne,removeCheckedUser:this.removeCheckedUser,clearTabPanelList:this.clearTabPanelList,maxDeptUserCount:g.maxDeptUserCount,hidePosts:!1,initHidePostsStatus:this.initHidePostsStatus,cacheId:(0,x.Z)(),clearSelectedAll:this.clearSelectedAll}}}componentDidUpdate(g){if(g.visible!==this.props.visible&&this.props.visible){var p=this.props.initData,a=p.dept,s=p.group,m=p.post,c=p.user,t=p.cluster,f=p.classes;console.warn(c,"user");var U=this.props,N=U.reserveUser,ae=U.t,B=U.onlyDept,oe=U.onlyPost;N.forEach(ne=>{ne.reserve=!0}),this.setState({title:this.props.title||ae("component.chooseAssignScope"),displayType:this.props.displayType?this.props.displayType:["dept"],selectType:oe?"post":B?"dept":"user",contextData:(0,h.Z)((0,h.Z)({},this.state.contextData),{},{deptList:[],groupList:[],postList:[],deptUser:[],clusterList:[],classList:[],groupUser:[],postUser:[],searchResult:[],onlyUser:this.props.onlyUser,onlyDept:this.props.onlyDept,canUseGroups:this.props.useGroups,canUseClass:this.props.useClass,onlyPost:this.props.onlyPost,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,cacheId:(0,x.Z)()})},()=>{this.getListParentId(a,s,m,c.concat(N),t,f)})}}componentWillUnmount(){te({cacheId:this.state.contextData.cacheId}).then(()=>{console.warn("\u6E05\u9664\u7F13\u5B58\u6210\u529F")}).catch(g=>{console.error("\u6E05\u9664\u7F13\u5B58\u5931\u8D25",g)})}render(){var g=this.getTabs(),p=this.props,a=p.t,s=p.onlyUser,m=p.onlyDept,c=p.onlyPost,t=p.displayType,f=p.useGroups,U=p.useClass,N=p.onlyChoosePost,ae=(0,_.p)(),B=this.state,oe=B.showCancel,ne=B.selectType,de=B.hidePosts;return ge.okText=this.props.okText||a("common.ok"),r().createElement(V.ZP,(0,Z.Z)({},ge,this.props.modalConfig,{visible:this.props.visible,title:this.state.title,wrapClassName:[this.props.className,"cl-org-modal"],onCancel:this.onCancel,onOk:this.onOk}),r().createElement(fe.Provider,{value:this.state.contextData},r().createElement("div",{className:"cl-org"},r().createElement("div",{className:"cl-org-left"},this.props.visible?r().createElement("div",{className:"cl-org-left__top"},r().createElement(J.Z.Group,{compact:!0},r().createElement(n.Z,{className:"cl-org-left__top__select",value:ne,style:{width:80},onChange:this.handleSelectChange},r().createElement(se,{value:"user",disabled:m||c||N},a("authGroup.userLabel")),r().createElement(se,{value:"dept",disabled:s||N},a("setting.deptLabel")),r().createElement(se,{value:"post",disabled:!c&&(m||s)||t.length===1},a("common.post")),r().createElement(se,{value:"group",disabled:m||s||t.length===1||N},a("component.userGroup")),f?r().createElement(se,{value:"cluster"},a("component.useCluster")):null,U?r().createElement(se,{value:"class"},a("component.useClass")):null),r().createElement(y,{selectType:ne,onSearch:this.handleSearch,showCancel:oe,disableChange:this.props.disableChange})),oe?r().createElement("div",{className:"cl-org-left__top__cancel",onClick:this.handleCancel,style:{color:ae}},a("common.cancel")):null):null,oe?r().createElement(F,{isSingle:this.props.single,list:this.state.contextData.searchResult,userListType:ne,checkedAll:this.checkAllResult,hidePosts:de}):g),r().createElement("div",{className:"cl-org-right"},r().createElement(d,null)))))}}Pe.defaultProps={visible:!0,showUserCount:!0,displayType:["dept","group","post","cluster","class"],initData:{dept:[],post:[],group:[],user:[],cluster:[],classes:[]},reserveUser:[],onlyUser:!1,onlyDept:!1,onlyPost:!1,useGroups:!1,useClass:!1,asyncDeptTree:!0,userType:"active",single:!1,maxUserCount:Infinity,filterAuthOpen:!1,disableHidden:!1,beyondLimitTip:"",onOk:()=>{},modalConfig:{},maxDeptUserCount:0,onlyChoosePost:!1,scrollFlag:!1};var be=(0,K.Z)()(Pe)},36202:function(Ue,ue,e){"use strict";e.d(ue,{f:function(){return L}});var Z=e(62029),D=e(57361),J=e(33565),M=e(9754),W=e.n(M),A=e(12924),z=e.n(A),h=e(28175),S=e(41647),n=e(93485);function T($){var G={};if($.length===0)return G;var H=(0,n.Z)($),le;try{for(H.s();!(le=H.n()).done;){var re=le.value,ce=re,Y=ce.field,C=ce.fixed,Q=ce.order,me=ce.show;me?me==="true"||me===!0?G[Y]={fixed:C,order:Q,show:!0}:G[Y]={fixed:C,order:Q,show:!1}:G[Y]={fixed:C,order:Q,show:!0}}}catch(fe){H.e(fe)}finally{H.f()}return G}function I($){var G=[],H=Object.entries($);if(H.length===0)return G;for(var le=0,re=H;le<re.length;le++){var ce=re[le],Y=(0,J.Z)(ce,2),C=Y[0],Q=Y[1],me=Q.fixed,fe=Q.order,Se=Q.show;G.push({field:C,show:Se,fixed:me,order:fe})}return G}var w=e(38642),E=($,G)=>{var H=(0,A.useState)($),le=(0,J.Z)(H,2),re=le[0],ce=le[1];return(0,A.useEffect)(()=>{var Y=setTimeout(()=>{ce($)},G);return()=>{clearTimeout(Y)}},[$,G]),re},b=E;function r($,G){var H=useRef(G);useEffect(()=>{H.current=G},[G]),useEffect(()=>{var le=re=>{var ce,Y;console.warn($.current,"node.current",re.target),!((ce=(Y=$.current)===null||Y===void 0?void 0:Y.contains(re.target))!==null&&ce!==void 0?ce:!1)&&H.current&&H.current()};return document.addEventListener("mousedown",le),()=>{document.removeEventListener("mousedown",le)}},[$])}var K=!1;function L($){var G=(0,A.useState)({}),H=(0,J.Z)(G,2),le=H[0],re=H[1],ce=$.prefixCls,Y=$.rowKey,C=$.columnEmptyText,Q=$.pagination,me=$.headerTitle,fe=$.toolBarRender,Se=$.size,xe=$.loading,Te=xe===void 0?!1:xe,Oe=$.tableUUID;Oe||console.error("tableUUID is required!!!"),(0,A.useEffect)(()=>{function Le(We){return Re.apply(this,arguments)}function Re(){return Re=(0,D.Z)(W().mark(function We($e){var Be,Ye,ze,qe,et,Ve,Xe,tt;return W().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=2,(0,w.Kb)((0,S.U)($e));case 2:if(Be=Ke.sent,Ye=(0,J.Z)(Be,2),ze=Ye[0],qe=Ye[1],!ze){Ke.next=8;break}return Ke.abrupt("return");case 8:et=qe.data,Ve=et.data,Xe=Ve.fields,tt=T(Xe)||{},tt&&(K=!1,re(tt));case 13:case"end":return Ke.stop()}},We)})),Re.apply(this,arguments)}return Oe&&Le(Oe),()=>{K=!1}},[Oe]);var Ne=b(le,1e3);(0,A.useEffect)(()=>{!K||(0,S.I)(Oe,I(le))},[Ne]);function je(Le){K=!0,re(Le)}return z().createElement("div",{className:"SampleProTable_container ".concat($.className)},z().createElement(h.ZP,(0,Z.Z)({size:Se||"middle",rowKey:Y||"id",columnEmptyText:C||!1,pagination:Q||!1,options:{density:!1,fullScreen:!1,reload:!1,setting:!0},search:!1,loading:Te,headerTitle:me||"",toolBarRender:fe||null,columnsStateMap:le,onColumnsStateChange:je},$,{className:"".concat(ce,"-table")})))}},41647:function(Ue,ue,e){"use strict";e.d(ue,{I:function(){return J},U:function(){return M}});var Z=e(37055),D=e(10237);function J(W){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=Z.ZP.tableHeader.save(),h={fields:A,key:W};return D.WY.post({url:z,data:h})}function M(W){var A=Z.ZP.tableHeader.get(W);return D.WY.get({url:A})}},99891:function(Ue,ue,e){"use strict";var Z=e(12924),D=e.n(Z),J=e(28216),M=e(91768),W=e(37055),A=e(10237),z=e(60667);class h extends D().PureComponent{constructor(T){super(T);this.getWaterMarkText=I=>{var w=this.props.userInfo,E=w.jobNumber,b=localStorage.getItem("waterMarkPostName"),r=[],K=I.find($=>$.type==="content_setting"),L=I.find($=>$.type==="content_custom");return K.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),L.param.checked==="true"&&L.param.comment[0]!==""&&this.setState({commentText:L.param.comment[0]}),K.param.comment.indexOf("position")!==-1&&b&&b!==""&&r.push("".concat(b)),K.param.comment.indexOf("jobnumber")!==-1&&E&&E!==""&&r.push("".concat(E)),r.join("-")},this.getWaterMarkApplication=I=>{var w=this.props.scenes,E=I.find(b=>b.type==="application_scenario");E.param.comment.indexOf(w)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=I=>{var w=I.find(E=>E.type==="dispersive");this.setState({isDispersive:w.param.checked==="true"})},this.getDynamicSet=()=>{var I=W.ZP.advancedSetting.dynamicWaterMarkNew(),w={access_token:window.localStorage.getItem("token")};A.WY.get({url:I,params:w}).then(E=>{var b=JSON.parse(E.data.actions);this.setState({waterMarkText:this.getWaterMarkText(b),actions:b}),this.getWaterMarkApplication(b),this.getWaterIsDispersive(b)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var T=localStorage.getItem("waterMarkPostName");T===""||T===null?this.getPostName():this.getDynamicSet()}getPostName(){var T=W.ZP.advancedSetting.getPostName();A.WY.get({url:T}).then(I=>{localStorage.setItem("waterMarkPostName",I.data.post_names[0]||""),this.getDynamicSet()})}render(){var T=this.state,I=T.showWaterMark,w=T.waterMarkCount,E=T.isUserName,b=T.isDispersive,r=T.waterMarkText,K=T.actions,L=T.commentText,$=this.props.userInfo,G=$.name,H=$.unionid,le=$.sourceType;return D().createElement("div",{className:"common-watermark"},I&&new Array(w).fill(0).map((re,ce)=>D().createElement("div",{key:ce,className:"common-watermark-item ".concat(b?"isDispersive":"")},D().createElement("span",{className:"common-watermark-item-content"},L!==""&&D().createElement("span",{className:"item-part"},L),E&&D().createElement("span",null,L!==""&&D().createElement("span",null,"-"),D().createElement(z.Z,{dataType:"userName",value:H,name:G,type:le})),D().createElement("span",{className:"item-part"},(E||L!=="")&&r!==""&&D().createElement("span",null,"-"),r)))))}}var S=n=>({userInfo:n.user});ue.Z=(0,J.$j)(S)((0,M.Z)()(h))},80430:function(Ue,ue,e){"use strict";var Z=e(12924),D=e.n(Z),J=e(60667),M=W=>{var A=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},w=I.department_ids.split("/"),E=I.department_names.split("/"),b=w.map((r,K)=>D().createElement(J.Z,{key:r,dataType:"departmentName",value:r,name:E[K],type:I.source_type}));return D().createElement(D().Fragment,null,b.map((r,K)=>D().createElement("span",{key:r},r,K===E.length-1?"":"/")))},z=T=>D().createElement(J.Z,{dataType:"departmentName",value:T.department_id,name:T.department_name,type:T.source_type}),h=()=>{var T=W.list,I=T===void 0?[]:T,w=W.isBlock;if(!I.length)return null;var E=I.map(b=>A(b));return E.length&&E.length>1?D().createElement(D().Fragment,null,E.map((b,r)=>w?D().createElement("div",{key:b},b):D().createElement("span",{key:b},b,r===E.length-1?"":"\uFF0C"))):D().createElement(D().Fragment,null,E[0]||"")},S=()=>{var T=W.list,I=W.nameList,w=W.sourceType,E=W.isBlock,b=T.map((r,K)=>z({department_id:r,department_name:I[K],source_type:w}));return D().createElement(D().Fragment,null,b.map((r,K)=>E?D().createElement("div",{key:r},r):D().createElement("span",{key:r},r,K===b.length-1?"":"\uFF0C")))},n=()=>W.displayAll?h():S();return n()};M.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},ue.Z=M},60667:function(Ue,ue,e){"use strict";e.d(ue,{Z:function(){return h}});var Z=e(33565),D=e(12924),J=e.n(D),M=e(28216);function W(S){var n=S.type,T=S.openid,I=S.from,w=(0,D.useRef)(null);return(0,D.useLayoutEffect)(()=>{I==="vue"?window.parent.WWOpenData.bind(w.current):WWOpenData.bind(w.current)}),J().createElement("ww-open-data",{ref:w,type:n,openid:T})}var A=S=>{var n=S.wxWorkApiFlag,T=S.appType,I=S.from,w=(0,D.useState)(!1),E=(0,Z.Z)(w,2),b=E[0],r=E[1];(0,D.useEffect)(()=>{var $=localStorage.getItem("qyWechatBook");(T!=="wx_app"||n||$==="false"||I==="vue"||I==="taro")&&r(!0)},[n,T,I]);var K=(0,D.useCallback)(()=>{var $=S.type,G=S.value,H=S.name,le=H===void 0?"":H;switch(console.warn(S,"props"),$){case"wx_sync":{var re=S.dataType;return G?J().createElement(W,{from:I,type:re,openid:G}):le}default:return le}},[S]),L=()=>{var $=S.name,G=S.dataType,H=localStorage.getItem("qyWechatBook");if(G===""||H==="false")return $;if(I==="vue"||I==="taro")return K();switch(S.appType){case"wx_app":return K();default:return $}};return b?L():S.name};A.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var z=S=>({appType:S.user.appType,wxWorkApiFlag:S.user.wxWorkApiFlag}),h=(0,M.$j)(z)(A)},76466:function(Ue,ue,e){"use strict";e.d(ue,{Z:function(){return Et}});var Z=e(20228),D=e(11382),J=e(57663),M=e(71577),W=e(62029),A=e(57361),z=e(9754),h=e.n(z),S=e(12924),n=e.n(S),T=e(91512),I=e(68654),w=e(91768),E=e(4412),b=e.n(E);class r extends n().Component{render(){var l=this.props.t;return n().createElement("div",{className:"net-preview"},n().createElement("div",{className:"net-preview-center"},n().createElement("img",{src:b(),alt:"picture"}),n().createElement("h2",null,l("localStorage.tip")),n().createElement("p",null,l("localStorage.banPreview"))))}}var K=(0,w.Z)()(r),L=e(88986),$=e(34792),G=e(48086),H=e(28216),le=e(21594),re=e(41225),ce=e(10237),Y=(ve,l)=>(0,L.Z)({id:ve||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},l),C=Y;class Q extends S.Component{constructor(){super(...arguments);this.setupPlayer=l=>{var d=this.props,o=d.onVideoReady,i=o===void 0?()=>{}:o,u=d.playerConfig,v=d.contentType;l&&l==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,L.Z)((0,L.Z)({},u),{},{contentType:v==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:u.source,autoplay:u.autoplay,width:u.width,id:u.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:y=>{y.on("sourceloaded",k=>{var P=k.paramData,F=P.desc,V=P.definition;y.getComponent("VideoQuality")&&y.getComponent("VideoQuality").setCurrentQuality(F,V,u.id)}),y.on("ready",()=>{i()}),this.playerInstance=y,this.setPlayerConfig()}}))}}componentDidUpdate(l){l.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(l){this.player&&this.player.seek(l)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(l){this.player.setSpeed(l)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var l=this.props,d=l.onPlay,o=d===void 0?()=>{}:d,i=l.onTimeUpDate,u=i===void 0?()=>{}:i,v=l.onEnd,y=v===void 0?()=>{}:v,k=l.onPause,P=k===void 0?()=>{}:k,F=l.onError,V=F===void 0?()=>{}:F,_=this.playerInstance;_.on("play",()=>{o()}),_.on("pause",()=>{P()}),_.on("timeupdate",x=>{u(x)}),_.on("ended",()=>{y()}),_.on("error",(0,A.Z)(h().mark(function x(){return h().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:V();case 1:case"end":return se.stop()}},x)})))}render(){var l=this.props.playerConfig;return n().createElement("div",{className:"common-video-player-container"},n().createElement("div",{id:l.id}))}}Q.playerInstance=null,Q.defaultProps={playerConfig:C(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var me=Q,fe=(ve,l)=>(0,L.Z)({id:ve||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},l),Se=fe;class xe extends S.Component{constructor(){super(...arguments);this.setupPlayer=l=>{l&&l==="resetPlayer"&&this.player.dispose();var d=this.props,o=d.playerConfig,i=d.onVideoReady,u=i===void 0?()=>{}:i;this.player=new Aliplayer(o,v=>{v.on("sourceloaded",y=>{var k=y.paramData,P=k.desc,F=k.definition;v.getComponent("VideoQuality")&&v.getComponent("VideoQuality").setCurrentQuality(P,F,o.id)})}),this.player.on("ready",()=>{u()})},this.setPlayerConfig=()=>{var l=this.props,d=l.onPlay,o=d===void 0?()=>{}:d,i=l.onTimeUpDate,u=i===void 0?()=>{}:i,v=l.onEnd,y=v===void 0?()=>{}:v,k=l.onPause,P=k===void 0?()=>{}:k,F=l.onError,V=F===void 0?()=>{}:F;this.player.on("play",()=>{o()}),this.player.on("pause",()=>{P()}),this.player.on("timeupdate",_=>{u(_)}),this.player.on("ended",()=>{y()}),this.player.on("error",(0,A.Z)(h().mark(function _(){return h().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:V();case 1:case"end":return R.stop()}},_)})))},this.getPlayerContent=l=>{this.playerContainer=l}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(l){l.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(l){this.player.seek(l)}exitFull(){var l=this.player.fullscreenService;l&&l.isFullScreen&&l.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var l=this.props.playerConfig;return n().createElement("div",{className:"common-video-player-container"},n().createElement("div",{id:l.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}xe.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:Se()};var Te=xe;class Oe{constructor(l){this.hasCreated=!1,this.definition="",this.getQuality=l}createEl(l,d){var o=d._options&&d._options.language,i=d._el.id;this.isEn=o&&o==="en-us";var u=(0,le.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),v=(0,le.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),y=document.querySelector("#".concat(i," .prism-controlbar"));y.appendChild(u),l.appendChild(v)}setCurrentQuality(l,d,o){var i=document.querySelector("#".concat(o," .current-quality"));i.innerText=l,i.dataset.def=d,this.definition=d;var u=document.querySelector("#".concat(o," .quality-list")),v=u.querySelector(".current");v&&(v.className="");var y=u.querySelector('li[data-def="'.concat(d,'"]'));y&&(y.className="current")}created(l){this._urls=l._urls;var d=l._el.id,o=document.querySelector("#".concat(d," .current-quality")),i=document.querySelector("#".concat(d," .quality-list")),u=document.querySelector("#".concat(d," .quality-modal")),v=this._urls.map(P=>'<li data-def="'.concat(P.definition,'">').concat(P.desc,"</li>"));if(i.innerHTML=v.join(""),this.hasCreated==!1&&this.definition){var y=i.querySelector('li[data-def="'.concat(this.definition,'"]'));y.className="current"}this.hasCreated=!0;var k=null;o.onclick=()=>{i.style.display="block"},o.onmouseleave=()=>{k=setTimeout(()=>{i.style.display="none"},100)},i.onmouseenter=()=>{clearTimeout(k)},i.onmouseleave=()=>{i.style.display="none"},i.onclick=P=>{var F=P.target,V=F.dataset.def,_=F.innerText;if(V&&F.className!=="current"){var x=this._urls.find(R=>R.definition===V);l.loadByUrl(x.Url,l.getCurrentTime(),!0,!0),this.setCurrentQuality(x.desc,x.definition,d),u.style.display="block",u.querySelector("span.current-quality-tag").innerText=x.desc}this.getQuality(V,_)}}ready(l){var d=l._el.id,o=document.querySelector("#".concat(d," .quality-modal"));o.style.display="none";var i=document.querySelector("#".concat(d," .prism-setting-item.prism-setting-quality"));i&&i.classList.add("player-hidden")}}class Ne{createEl(l,d){var o=d._el.id,i=(0,le.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),u=document.querySelector("#".concat(o," .prism-controlbar"));u.appendChild(i)}ready(l){var d=l._el.id,o=document.querySelector("#".concat(d," .current-rate")),i=document.querySelector("#".concat(d," .rate-list")),u=null,v=document.querySelector("#".concat(d," .prism-setting-item.prism-setting-speed"));v&&v.classList.add("player-hidden"),o.onclick=()=>{i.style.display="block"},o.onmouseleave=()=>{u=setTimeout(()=>{i.style.display="none"},100)},i.onmouseenter=()=>{clearTimeout(u)},i.onmouseleave=()=>{i.style.display="none"},i.onclick=y=>{var k=y.target,P=k.dataset.rate;if(P){if(l.setSpeed(P),k.className!=="current"){var F=i.querySelector(".current");F&&(F.className=""),k.className="current"}i.style.display="none",o.innerText="".concat(P,"x")}}}}var je=e(69164),Le=e(37055);function Re(ve){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=Le.ZP.local.getLocalUrl(ve);return ce.WY.get({url:d,params:l})}var We=e(91648),$e=e(18329),Be=e(38642),Ye=e(9849),ze=e(99891);class qe extends S.Component{constructor(l){super();this.WaterMarkText=l,this.html=document.getElementsByClassName("common-watermark")}createEl(l){setTimeout(()=>{l.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var et=qe,Ve=ve=>({userInfo:ve.user});class Xe extends S.Component{constructor(l){var d;super(l);d=this,this.onVideoReady=o=>{var i=this.props,u=i.resourceInfo,v=i.mode,y=i.autoPlay,k=i.t,P=u.storageType;o==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(o),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(v==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),v==="preview"&&y&&this.play.play()):P==="ALIBABA_PRIVATE"||P==="LOCAL"?this.updateSource("resetPlayer"):(ce.WY.logger({keyword:"video",moduleName:"video-play",msg:k("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var o=this.props,i=o.draggable,u=o.mode,v=o.t,y=o.studyInfo,k=o.needCurrentTime,P=o.onCurrentTime,F=P===void 0?()=>{}:P,V=y.studyType,_=y.studyId,x=y.resourceId,R=this.state,se=R.showPreventHang,ge=R.dragSwitch,Pe=R.showRandomAlert,be=R.randomAlertDialogVisible,O=this.playingVideo,g=O.oneTime,p=O.popupWindowCount,a=O.maxPlayTime,s=O.progress,m=O.auditionLength,c=O.auditionType,t=O.duration,f=O.recentStart,U=this.play.getCurrentTime(),N=(se==="OPEN"||Pe==="OPEN")&&p>0;if(k&&F(U),m>0&&c===2&&U>m&&(this.play.seek(m),G.default.warning(v("component.haveALookOverTip")),this.play.pause()),u==="learn"&&N){var ae=t-g*p;if(p>0&&U>ae)if(this.play.pause(),Pe==="OPEN"){if(!be){var B=(0,We.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:B},()=>{(0,re.qp)({popupId:B,planId:_,resourceId:x,type:"popup_start"})}),this.play.exitFull()}}else se==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((i||s===100)&&(U>0&&(this.playingVideo.recentStart=U),!((V==="enterprise"||V==="studyProject")&&ge==="OPEN")))return!1;U>a?U-f>2?(this.playingVideo.recentStart=a,this.play.seek(a),G.default.warning(v("component.preventFastWatchTip"))):(this.playingVideo.recentStart=U,this.playingVideo.maxPlayTime=U):U>0&&U>this.playingVideo.recentStart&&(this.playingVideo.recentStart=U)},this.onPlay=()=>{var o=this.props,i=o.mode,u=o.onPlay,v=u===void 0?()=>{}:u;v();var y=this;i==="learn"&&!y.timer&&(y.timer=setTimeout(function k(){y.saveProgress(),clearTimeout(y.timer),y.timer=setTimeout(k,2e4)},2e4))},this.onPause=()=>{var o=this.props,i=o.studyInfo,u=o.mode,v=i.studyType;clearTimeout(this.timer),this.timer=null,u==="learn"&&(v==="platform"||v==="enterprise"||v==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var o=this.props.mode;o==="learn"&&this.saveProgress()},this.onError=o=>{var i=this.props.resourceInfo,u=i.storageType;(u==="ALIBABA_PRIVATE"||u==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var o=this.props.mode;this.initPlayVideo(),o==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var o=this.state,i=o.showPreventHang,u=o.showRandomAlert,v=this.props,y=v.t,k=v.playingVideo,P=v.studyInfo,F=v.autoPlay,V=k.recentStart,_=k.duration,x=k.progress,R=P.studyType,se=(i==="OPEN"||u==="OPEN")&&(R==="studyTask"||R==="enterprise"||R==="studyProject")&&x<100;se?(u==="OPEN"?this.setState({promptMessage:y("component.preventAlertTip"),dialogVisible:!0}):i==="OPEN"&&this.setState({promptMessage:y("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):F&&(this.play.play(),Math.ceil(V)<parseInt(_)&&this.play.seek(V))},this.playerShowPreventHang=()=>{var o=this.playingVideo,i=o.duration,u=o.recentStart,v=0;i>0&&i<180?(v=i/2,this.playingVideo.oneTime=v,u>=v?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):i>=180&&i<600?(v=i/3,this.playingVideo.oneTime=v,u>=2*v?this.playingVideo.popupWindowCount=0:u>=v?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(v=i/4,this.playingVideo.oneTime=v,u>=3*v?this.playingVideo.popupWindowCount=0:u>=2*v?this.playingVideo.popupWindowCount=1:u>=v?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var o=this.props,i=o.playingVideo,u=o.mode;if(u==="learn"){this.playingVideo=(0,L.Z)({},i);var v=i.duration,y=i.progress;this.playingVideo.hasFinished=parseInt(y)===100,this.playingVideo.maxPlayTime=parseInt(v)*parseInt(y)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,A.Z)(h().mark(function o(){var i,u,v,y,k,P,F,V,_,x,R,se,ge,Pe,be,O,g,p,a,s,m,c,t,f;return h().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(i=d.state,u=i.speedSwitch,v=i.dragSwitch,y=i.whiteList,k=d.props,P=k.resourceInfo,F=k.showQuality,V=P.contentType,_=P.storageType,x=P.source,R=P.playId,se=P.playerId,ge=P.showFullScreen,Pe=ge===void 0?!0:ge,be=Se(se),be.components=[],O=typeof x=="object"&&x.hasOwnProperty("FD")&&x.FD.indexOf("m3u8")===-1,F&&O&&V!=="mp3"&&(_&&_==="PUBLIC_CLOUD"||!_)&&be.components.push({name:"VideoQuality",type:Oe,args:[()=>{d.play.pause(),d.playingVideo.readyCount=0}]}),u==="OPEN"&&be.components.push({name:"VideoRate",type:Ne}),Pe&&(g=be.skinLayout.find(ae=>ae.name==="controlBar"),g&&g.children.splice(g.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),be.components.push({name:"VideoWaterMark",type:et}),p=x.FD,a=x.OD,p.indexOf("http://")>-1&&(p=p.replace("http://","https://")),a.indexOf("http://")>-1&&(a=a.replace("http://","https://")),s=y.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",x.OD=a&&a.indexOf(s)>-1&&a.indexOf(".mp4")>-1?a:p,x.FD=p,m=typeof x!="string"?JSON.stringify(x):x,be.source=m,v==="OPEN"&&(be.disableSeek=!0),_!=="ALIBABA_PRIVATE"){N.next=32;break}return N.next=22,(0,re.BR)(R);case 22:if(c=N.sent,!c){N.next=28;break}be.source=c,be.vodRetry=1,N.next=30;break;case 28:return d.setState({showPrivateVodError:!0}),N.abrupt("return");case 30:N.next=38;break;case 32:if(_!=="LOCAL"){N.next=38;break}return N.next=35,Re(R);case 35:t=N.sent,f=t.data,f.code===0&&(be.source="".concat(x.FD,"?auth_key=").concat(f.data.auth_key),be.vodRetry=1);case 38:d.setState({playerConfig:be});case 39:case"end":return N.stop()}},o)})),this.updateSource=function(){var o=(0,A.Z)(h().mark(function i(u){var v,y,k,P,F,V,_,x;return h().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(v=d.state.playerConfig,y=d.props.resourceInfo,k=y.storageType,P=y.source,F=y.playId,d.playingVideo.readyCount=0,k!=="ALIBABA_PRIVATE"){se.next=16;break}return se.next=7,(0,re.BR)(F);case 7:if(V=se.sent,!V){se.next=12;break}Object.assign(v,{source:V,vodRetry:1}),se.next=14;break;case 12:return d.setState({showPrivateVodError:!0}),se.abrupt("return");case 14:se.next=22;break;case 16:if(k!=="LOCAL"){se.next=22;break}return se.next=19,Re(F);case 19:_=se.sent,x=_.data,x.code===0&&Object.assign(v,{source:"".concat(P.FD,"?auth_key=").concat(x.data.auth_key),vodRetry:1});case 22:d.setState({playerConfig:v},()=>{d.play.setupPlayer(u)});case 23:case"end":return se.stop()}},i)}));return function(i){return o.apply(this,arguments)}}(),this.saveProgress=()=>{var o=this.props,i=o.studyInfo,u=o.userInfo,v=u.isLogin,y=u.enterpriseId,k=u.id,P=this.playingVideo,F=P.recentStart,V=P.duration,_=P.hasFinished,x=Math.ceil(+F);x>Number(V)&&(x=Number(V));var R=Math.ceil(x/+V*100);if((R>100||_)&&(R=100),v){var se=this.playingVideo,ge=se.auditionType,Pe=se.auditionLength;if(Pe>0&&ge===2){var be=Math.ceil(Pe/V*100);be<=R&&(R=be,x=Pe)}(0,re.sH)({studyInfo:i,progress:R,recent_start:x,enterpriseId:y,userId:k}).then(O=>{O&&O.data&&(0,je.Z)(O.data.integral_info||"")})}},this.getInfoFromSettings=(0,A.Z)(h().mark(function o(){var i,u,v,y,k,P,F,V,_;return h().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return i=d.props.studyInfo,u=i.studyType,v=i.projectId,R.next=4,(0,re.Gw)();case 4:if(y=R.sent,k=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],P=(0,le.RG)(y,k),u!=="studyProject"){R.next=14;break}return R.next=10,(0,Ye.NU)({id:v});case 10:F=R.sent,V=F.status,_=F.data,V===200&&(P.showPreventHang=_.prevent_cut_screen?"OPEN":"CLOSED",P.speedSwitch=_.speed_play?"OPEN":"CLOSED",P.dragSwitch=_.prevent_drag?"OPEN":"CLOSED");case 14:d.setState(P,()=>{d.dealVideoConfig()});case 15:case"end":return R.stop()}},o)})),this.dealAudioPoster=()=>{var o=this.props.resourceInfo.contentType,i=o===void 0?"":o;this.setState({showAudioPoster:i==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var o=this.state.showAudioPoster,i=this.play.playerContainer;o&&i&&(i.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),i.style.backgroundSize="cover")},this.getPlayInstance=o=>{this.play=o},this.handleOk=()=>{this.setState({dialogVisible:!1});var o=this.state.btnType,i=this.playingVideo.recentStart,u=this.props.t;o==="know"?(this.play.play(),this.play.seek(i),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:u("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,A.Z)(h().mark(function o(){var i,u,v,y;return h().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:i=d.props.studyInfo,u=i.studyId,v=i.resourceId,y=d.state.randomAlertUUID,(0,re.qp)({popupId:y,planId:u,resourceId:v,type:"popup_end"}).then(()=>{d.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),d.playingVideo.popupWindowCount-=1,d.play.play();case 6:case"end":return P.stop()}},o)})),this.renderFooter=()=>{var o=this.state.btnType,i=this.props.t;return n().createElement(M.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(o)},i(o==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var o=this.props.t;return n().createElement(M.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},o("common.ok"))},this.state={playerConfig:Se(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:l.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:l.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:l.t("component.randomAlertTip"),randomAlertModal:{title:l.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,Be.UI)("CL_VIDEO_BAIYING_COM_CN")}},l.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(l){var d=typeof l.resourceInfo.source!="string"?JSON.stringify(l.resourceInfo.source):l.resourceInfo.source,o=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;d!==o&&o!==""&&this.initInfo()}componentWillUnmount(){var l=this.props.mode;l==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var l=this.state,d=l.playerConfig,o=l.showPrivateVodError,i=l.dialogVisible,u=l.dialogModal,v=l.promptMessage,y=l.randomAlertDialogVisible,k=l.randomAlertModal,P=l.randomAlertTip,F=l.encryptedSwitch,V=this.props,_=V.resourceInfo,x=V.t,R=F==="OPEN"?me:Te;return n().createElement(S.Fragment,null,n().createElement(R,(0,W.Z)({ref:this.getPlayInstance},_,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:d,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),n().createElement($e.ZP,(0,W.Z)({visible:i},u,{footer:this.renderFooter()}),n().createElement("div",{className:"video-business-prompt"},v)),n().createElement($e.ZP,(0,W.Z)({visible:y},k,{footer:this.renderRandomFooter()}),n().createElement("div",{className:"video-player-container__prompt"},P)),o&&n().createElement("div",{className:"video-business-vod-error"},x("privateCloud.docReadError")),n().createElement(ze.Z,{scenes:"video"}))}}var tt=(0,H.$j)(Ve,null,null,{forwardRef:!0})((0,w.Z)("translation",{withRef:!0})(Xe)),rt=e(94184),Ke=e.n(rt),_e=e(84874),Ae=ve=>({userInfo:ve.user}),st={getPravateDocUrl:Le.ZP.localStorage.getPravateDocUrl};function dt(ve){return JSON.stringify(ve,(l,d)=>(typeof d=="function"&&(d=d.toString()),d))}function ut(ve){var l=parseInt(parseInt(ve,10)/60,10),d=parseInt(parseInt(ve,10)%60,10);return l<10&&(l="0".concat(l)),d<10&&(d="0".concat(d)),"".concat(l,":").concat(d)}class at extends S.Component{constructor(l){var d;super(l);d=this,this.messageFun=o=>{var i=this.props,u=i.docType,v=i.progress,y=i.studyTimeLimit,k=i.studyTime,P=this.state,F=P.jumpPageTag,V=P.totalTime,_=P.timeRemaining,x=this.state.previewDocData,R={};try{R=JSON.parse(o.data)}catch(se){return}switch(R.action){case"preview.ready":this.initDocData();break;case"preview.meta":x.totalPage=R.data.pc||1,x.currentPage=1,this.setState({previewDocData:x},()=>{this.reportStatusInterval()}),y>0?(this.saveProgress(v,k||"1",R.data.pc||1),this.setState({showCountDownContainer:!0})):u==="xlsx"||u==="xls"||x.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(v,k||"1",R.data.pc||1),y>0&&v<100?(this.setState({showCountDown:!0}),u==="xlsx"||u==="xls"?V=y:V=y*R.data.pc,_=parseInt(V*(1-v/100),10),this.setState({timeRemaining:_,totalTime:V},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(F){F=!1,this.setState({jumpPageTag:F});return}x.currentPage=R.data.pageIndex+1,this.setState({previewDocData:x}),y||this.saveProgress(Math.ceil(x.currentPage/x.totalPage*100),x.currentPage,x.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":G.default.error(R.data.result);break;default:break}},this.initDocData=(0,A.Z)(h().mark(function o(){var i,u,v,y,k,P,F,V,_,x,R,se,ge,Pe;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(d.setState({isShowPrivateError:!1}),i=d.props,u=i.docType,v=i.userInfo,y=i.documentWatermarkSettings,k=i.storageType,P=i.privateDocId,F=v.name,V=v.jobNumber,_=v.position,x="",R={},k!=="ALIBABA_PRIVATE"){O.next=18;break}return O.prev=6,se=st.getPravateDocUrl(P),O.next=10,ce.WY.get({url:se});case 10:ge=O.sent,Pe=ge.data,Pe.code===0?R=Pe.data||{}:d.setState({isShowPrivateError:!0}),O.next=18;break;case 15:O.prev=15,O.t0=O.catch(6),d.setState({isShowPrivateError:!0});case 18:if(y.indexOf("name")>-1&&(x="".concat(x+F," ")),y.indexOf("position")>-1&&(x="".concat(x+_," ")),y.indexOf("jobnumber")>-1&&(x+=V),x.length>0?window.sendMessage("preview.init",(0,L.Z)({wmType:1,wmValue:x,wmColor:"rgba(192, 192, 192, 0.4)"},R)):window.sendMessage("preview.init",(0,L.Z)({},R)),u!=="xlsx"&&u!=="ppt"&&u!=="pptx"&&u!=="xls"?d.setState({pageOperateContainerVisible:!0}):d.setState({pageOperateContainerVisible:!1}),!(u==="ppt"||u==="pptx")){O.next=29;break}O.t1=window,O.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},O.t1.sendMessage.call(O.t1,"setConfig",O.t2),O.next=32;break;case 29:O.t3=window,O.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},O.t3.sendMessage.call(O.t3,"setConfig",O.t4);case 32:case"end":return O.stop()}},o,null,[[6,15]])})),this.handleJumpPage=o=>{var i=this.state.previewDocData;i.currentPage=o,this.setState({jumpPageTag:!0,previewDocData:i});var u=o/i.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(u),o,i.totalPage),window.sendMessage("logic.toPage",{pageIndex:o-1})},this.redirectPage=()=>{var o=this.props,i=o.studyTimeLimit,u=o.studyTime,v=0;i===0&&(v=u-1>0?u-1:0),window.sendMessage("logic.toPage",{pageIndex:v})},this.docCountDown=()=>{var o=this.state.timeRemaining,i=this.state,u=i.totalTime,v=i.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{o-=1,this.setState({timeRemaining:o}),o<1&&(this.saveProgress(100,0,v.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var y=(u-o)/u*100;o<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(y),o,v.totalPage)},2e4)},this.saveProgress=(o,i,u)=>{var v=this.props.onSaveProgress;v&&v(o,i,u)},this.reportStatusInterval=()=>{var o=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var i=this.state.previewDocData.currentPage;o&&o({currentPage:i})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=o=>{this.docReader=o},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(l,d)=>{var o=this.docReader.contentWindow;o.postMessage(dt({action:l,data:d}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var l=this.props,d=l.t,o=l.storageType,i=l.privateDocId,u=this.props.aliUrl,v=this.state,y=v.previewDocData,k=v.pageOperateContainerVisible,P=v.timeRemaining,F=v.showCountDown,V=v.showCountDownContainer,_=v.showPageOperateContainer,x=v.isShowPrivateError;return o==="ALIBABA_PRIVATE"&&(u="https://preview.imm.aliyuncs.com/index.html?docId=".concat(i)),n().createElement("div",{className:"doc-reader-container"},n().createElement("div",{className:"ali-doc-container",style:{paddingBottom:k?"56px":"0"}},n().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:u,id:"aliyunPreview",ref:this.dealPreviewRef}),V?n().createElement("div",{className:"ali-doc-container__countdown"},F?n().createElement("div",null,n().createElement(_e.Z,{iconClass:"iconf-tipe",size:"16px"}),d("component.docStillStudy"),n().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",ut(P)," "),d("component.canDone")):n().createElement("div",null,n().createElement(_e.Z,{iconClass:"iconf-tipe",size:"16px"}),d("component.docHasFinish"))):null,k?n().createElement("div",{className:"ali-doc__operate"},n().createElement("div",{className:Ke()(["ali-doc__operate__content",_?"":"ali-doc__operate__hide-content"])},n().createElement("div",{className:"ali-doc__operate__pagination"},n().createElement("div",{className:"ali-doc__operate__pagination__pages"},y.currentPage," / ",y.totalPage),n().createElement("div",{className:"ali-doc__operate__pagination__toggle"},n().createElement("div",{className:"ali-doc__operate__pagination__choose"},n().createElement("span",null,d("component.choosePage"),n().createElement(_e.Z,{iconClass:"iconf-arrow-under",size:"14px"})),n().createElement("div",{className:"ali-doc__operate__page-list-container"},n().createElement("div",{className:"ali-doc__operate__choose-page"},d("component.fastChoosePage")),n().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:y.totalPage})).map((R,se)=>n().createElement("li",{key:R,onClick:()=>this.handleJumpPage(se+1)},se+1))))),n().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},d("common.collapse"))))),n().createElement("div",{className:Ke()("ali-doc__operate__unfold",_?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},d("common.expand"))):null,x&&n().createElement("div",{className:"ali-doc__error"},d("privateCloud.docReadError"))),n().createElement(ze.Z,{scenes:"document"}))}}at.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var ke=(0,H.$j)(Ae)((0,w.Z)()(at)),te=ve=>({userInfo:ve.user}),ye="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),j="".concat("https://doc.coolcollege.cn");class X extends n().Component{constructor(l){var d;super(l);d=this,this.onSaveProgress=(o,i,u)=>{var v=this.props,y=v.mode,k=v.studyInfo,P=v.userInfo,F=P.enterpriseId,V=P.id;y==="learn"&&(0,re.sH)({studyInfo:k,progress:o,page_count:u,recent_start:i,enterpriseId:F,userId:V}).then(_=>{_&&_.data&&(0,je.Z)(_.data.integral_info||"")})},this.messageFun=function(){var o=(0,A.Z)(h().mark(function i(u){var v,y,k,P,F,V;return h().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(u.data!=="local-resource"){x.next=9;break}if(v=d.props.resourceInfo,y=v.storageType,k=v.playId,!(y&&y==="LOCAL")){x.next=9;break}return x.next=6,Re(k);case 6:P=x.sent,F=P.data,F.code===0&&(V=document.getElementById("local-resource-box"),V.contentWindow.postMessage({msg:"local-auth-key",authKey:F.data.auth_key},"*"));case 9:case"end":return x.stop()}},i)}));return function(i){return o.apply(this,arguments)}}(),this.getInfoFromSettings=(0,A.Z)(h().mark(function o(){var i,u,v;return h().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,re.Gw)();case 2:i=k.sent,u=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],v=(0,le.RG)(i,u),d.setState(v,()=>{d.initDocPage(d.props)});case 6:case"end":return k.stop()}},o)})),this.initDocPage=(0,A.Z)(h().mark(function o(){var i,u,v,y,k,P,F,V,_,x,R,se,ge,Pe,be,O,g,p,a,s,m,c,t,f,U,N,ae,B,oe,ne,de,q,pe,Ze,Ge=arguments;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(i=Ge.length>0&&Ge[0]!==void 0?Ge[0]:{},u=i.resourceInfo,v=i.mode,y=i.studyInfo,k=i.userInfo,P=d.state.documentPlayerMode,F=u.docType,V=u.docTitle,_=u.url,x=u.studyTimeLimit,R=u.studyTime,se=u.aliUrl,ge=u.progress,Pe=u.storageType,be=u.playId,O=y.studyType,g=y.courseId,p=y.studyId,a=y.resourceId,s=k.enterpriseId,m=k.id,c=k.isLogin,t=k.token,f=P==="compat"&&se.indexOf("preview.imm.aliyun")>-1||Pe==="ALIBABA_PRIVATE",!f){ee.next=11;break}d.setState({showAliReader:!0}),ee.next=31;break;case 11:if(U=(0,re.sH)({enterpriseId:s,userId:m,token:t,studyInfo:y},!0),N=O==="studyTask"?2:1,ae=Le.ZP.SaveProgress.reportStatusInterval(y),B={isSaveProgress:c&&v==="learn"&&U,isSaveRecord:!1,access_token:t,userId:m,hostUrl:ye,courseId:g,resourceId:a,courseType:1,planId:p,studyTimeLimit:x,studyTime:R,saveProgressUrl:U,type:"eapp",progress:ge,saveRecordProgressUrl:ae,actionType:N},!(Pe&&Pe==="LOCAL")){ee.next=26;break}return ee.next=18,Re(be);case 18:if(oe=ee.sent,ne=oe.data,ne.code!==0){ee.next=25;break}B.auth_key=ne.data.auth_key,B.url=_,ee.next=26;break;case 25:return ee.abrupt("return");case 26:de=JSON.stringify(B),q="".concat(V,".").concat(F).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),pe="".concat(j,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(de),"&furl=").concat(_,"?attname=").concat(q),Pe&&Pe==="LOCAL"&&(Ze="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),pe="".concat(Ze,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(de),"&furl=").concat(_,"?attname=").concat(q)),d.setState({encodeUrl:pe});case 31:case"end":return ee.stop()}},o)})),this.handleReportStatusInterval=o=>{var i=o.currentPage,u=this.props,v=u.resourceInfo,y=u.mode,k=u.studyInfo,P=u.userInfo,F=v.type,V=k.courseId,_=k.studyId,x=k.resourceId,R=P.enterpriseId,se=P.id,ge=P.isLogin,Pe="",be="",O=0,g=!1;switch(F){case"enterprise":O=1,g=!0;break;case"study":Pe=_,O=2,g=!0;break;case"project":be=_,O=1,g=!0;break;default:break}if(!(!g||!ge)){var p={plan_id:Pe,enterprise_id:R,user_id:se,course_id:V,project_course_id:be,resource_id:x,current_page:i,action_type:O,send_time:Date.parse(new Date)};y==="learn"&&(0,re.Xc)(k,p)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(l){this.initDocPage(l)}render(){var l=this.props.resourceInfo,d=this.state,o=d.encodeUrl,i=d.documentWatermarkSettings,u=d.showAliReader,v=l.docType,y=l.type,k=l.studyTimeLimit,P=l.studyTime,F=l.aliUrl,V=l.progress,_=l.storageType,x=l.playId;return u?n().createElement(ke,{privateDocId:x,storageType:_,aliUrl:F,docType:v,progress:V,studyTime:P,studyTimeLimit:k,documentWatermarkSettings:i,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:y}):n().createElement("div",{className:"doc-reader-container"},n().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:o,frameBorder:"0",allowFullScreen:!0}),n().createElement(ze.Z,{scenes:"document"}))}}var he=(0,H.$j)(te)(X),De=e(38979),Ie=e(90706),we=e(12968),ie=e(44208),Ee=e(60667),He=ve=>({userInfo:ve.user});class Fe extends n().Component{constructor(){var l;super(...arguments);l=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var d=this.props,o=d.studyInfo,i=d.mode,u=d.userInfo,v=u.enterpriseId,y=u.id;i==="learn"&&(0,le.Gp)({studyInfo:o,enterpriseId:v,userId:y})},this.getInfoFromSettings=(0,A.Z)(h().mark(function d(){var o,i,u;return h().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,re.Gw)();case 2:o=y.sent,i=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],u=(0,le.RG)(o,i),l.setState(u,()=>{l.renderWatermark()});case 6:case"end":return y.stop()}},d)})),this.renderWatermark=()=>{var d=this.props.userInfo,o=this.state.imageWatermark,i=d.name,u=d.unionid,v=d.sourceType,y=d.jobNumber,k=d.position,P=[];o.indexOf("name")>-1&&P.push(n().createElement(Ee.Z,{dataType:"userName",value:u,name:i,type:v})),o.indexOf("position")>-1&&P.push(n().createElement("span",null,k)),o.indexOf("jobnumber")>-1&&P.push(n().createElement("span",null,y)),o.length>0&&this.setState({watermark:P.map((F,V)=>n().createElement("span",{key:V},F))})},this.handleError=d=>{var o=this.props.onError;o&&o(d)},this.getImageUrl=(0,A.Z)(h().mark(function d(){var o,i,u,v,y,k,P,F,V,_;return h().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(o=l.props,i=o.resourceInfo,u=o.t,v=i.playId,y=i.url,k=i.storageType,P=y,!k){R.next=21;break}if(k!=="ALIBABA_PRIVATE"){R.next=15;break}return R.next=7,(0,re.J7)(v);case 7:if(F=R.sent,!F){R.next=12;break}P=F,R.next=13;break;case 12:return R.abrupt("return",G.default.info(u("privateCloud.docReadError")));case 13:R.next=21;break;case 15:if(k!=="LOCAL"){R.next=21;break}return R.next=18,Re(v);case 18:V=R.sent,_=V.data,_.code===0&&(P="".concat(y,"?auth_key=").concat(_.data.auth_key));case 21:l.setState({imageUrl:[P]},()=>{var se=l.state.imageUrl,ge="image-business",Pe=document.querySelectorAll(".".concat(ge,"-image img"));Pe.forEach((be,O)=>{be.onerror=()=>{l.handleError(se[O])}})});case 22:case"end":return R.stop()}},d)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var l="image-business",d=this.props.resourceInfo,o=d.preview,i=o===void 0?!1:o,u=this.state,v=u.watermark,y=u.imageUrl;return n().createElement("div",{className:l},n().createElement(ze.Z,{scenes:"image"}),n().createElement(Ie.Z,{className:"".concat(l,"-carousel")},y.map((k,P)=>n().createElement("div",{className:"".concat(l,"-image"),key:P.toString()},n().createElement(ie.Z,{src:k,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:i})))))}}Fe.defaultProps={prefixCls:"watch-image-page"};var Qe=(0,H.$j)(He)((0,w.Z)()(Fe)),nt=ve=>({userInfo:ve.user});class Me extends n().Component{constructor(){var l;super(...arguments);l=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,A.Z)(h().mark(function d(){var o,i,u;return h().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,re.Gw)();case 2:o=y.sent,i=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],u=(0,le.RG)(o,i),l.setState(u,()=>{l.renderWatermark()});case 6:case"end":return y.stop()}},d)})),this.renderWatermark=()=>{var d=this.props.userInfo,o=this.state.htmlWatermark,i=d.name,u=d.unionid,v=d.sourceType,y=d.jobNumber,k=d.position,P=[];o.indexOf("name")>-1&&P.push(n().createElement(Ee.Z,{dataType:"userName",value:u,name:i,type:v})),o.indexOf("position")>-1&&P.push(n().createElement("span",null,k)),o.indexOf("jobnumber")>-1&&P.push(n().createElement("span",null,y)),o.length>0&&this.setState({watermark:P.map((F,V)=>n().createElement("span",{key:V},F))})},this.saveProgress=()=>{var d=this.props,o=d.studyInfo,i=d.mode,u=d.userInfo,v=u.enterpriseId,y=u.id;i==="learn"&&(0,le.Gp)({studyInfo:o,enterpriseId:v,userId:y})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var l="html-business",d=this.props.resourceInfo,o=d.url,i=this.state.watermark;return n().createElement("div",{className:l},n().createElement("div",{className:"".concat(l,"__html-watermark")},i),n().createElement("iframe",{title:"html",className:"".concat(l,"_iframe"),src:o}))}}var ot=(0,H.$j)(nt)((0,w.Z)()(Me)),pt=e(57068),ht=e(1164),vt=ve=>({userInfo:ve.user});class mt extends n().PureComponent{constructor(){super(...arguments);this.getHost=l=>{var d=l.split("//"),o=d[1].split("/");return[d[0],o[0]].join("//")},this.getScormUrl=()=>{var l=this.props,d=l.studyInfo,o=l.mode,i=l.userInfo,u=l.resourceInfo,v=l.from,y=i.enterpriseId,k=i.id,P=u.url,F=this.getHost(P);if(o==="learn"){var V=(0,L.Z)({userId:k,enterpriseId:y,access_token:localStorage.token,from:v,scormUrl:encodeURIComponent(P),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},d);return"".concat(F).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(pt.stringify(V))}return"".concat(F,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(P))},this.handleOpenScormLink=l=>{ht.Z.targetTo({path:l,isExternalLink:!0})}}render(){var l=this.props.t,d="scorm-business",o=this.getScormUrl(),i=(0,Be.UI)("SCORM_EXTERNAL_WATCH");return n().createElement("div",{className:d},i?n().createElement("div",{className:"".concat(d,"_scorm")},n().createElement("img",{className:"".concat(d,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),n().createElement("h5",null,l("resourcePlay.scormTip")),n().createElement(M.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(o)},l("resourceLibrary.h5LinkPlayButton"))):n().createElement("iframe",{title:"scorm",className:"".concat(d,"_iframe"),src:o}))}}var ft=(0,H.$j)(vt)((0,w.Z)()(mt));class yt extends n().Component{render(){var l=this.props,d=l.visible,o=l.title,i=l.onCancel,u=l.t,v=n().createElement("span",null,o);return n().createElement($e.ZP,{visible:d,title:v,onCancel:i,footer:null},n().createElement("div",{className:"ban-preview"},n().createElement("div",{className:"ban-preview-center"},n().createElement("img",{src:b(),alt:"picture"}),n().createElement("h2",null,u("localStorage.tip")),n().createElement("p",null,u("localStorage.banPreview"))),n().createElement("hr",null),n().createElement(M.Z,{type:"primary",className:"know",onClick:i},u("localStorage.onKnow"))))}}var gt=(0,w.Z)()(yt);class Ct extends S.Component{constructor(){var l;super(...arguments);l=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=d=>{var o=this.props.previewInfo,i=o.onCancel;this.onCancel(),i(d)},this.onGetVideoBusiness=d=>{var o=this.props.onRef,i=o===void 0?()=>{}:o;this.videoBusiness=d,i(d)},this.onFullScreen=()=>{var d=this.state.fullScreen;this.setState({fullScreen:!d})},this.handleJudgeNetwork=(0,A.Z)(h().mark(function d(){var o,i,u,v,y,k,P,F,V,_,x,R=arguments;return h().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(o=R.length>0&&R[0]!==void 0?R[0]:null,i=l.props,u=i.resourceInfo,v=i.watchType,y=u.storageType,k=u.playId,P=u.originUrl,F=v==="image"||v==="video"||v==="doc",V=null,o?V=o:P?V=P:V=u.url,!(F&&V&&k&&y&&y==="LOCAL")){ge.next=22;break}return ge.prev=7,ge.next=10,(0,re.NY)(k);case 10:return _=ge.sent,ge.next=13,(0,re.Hy)(V,_);case 13:x=ge.sent,x?l.setState({showBan:"no"}):l.setState({showBan:"yes"}),ge.next=20;break;case 17:ge.prev=17,ge.t0=ge.catch(7),l.setState({showBan:"yes"});case 20:ge.next=23;break;case 22:l.setState({showBan:"no"});case 23:case"end":return ge.stop()}},d,null,[[7,17]])})),this.renderOuter=()=>{var d=this.props,o=d.prefixCls,i=d.watchType,u=d.onCurrentTime,v=u===void 0?()=>{}:u;return n().createElement("div",{className:"".concat(o,"-outer")},i==="video"&&n().createElement(tt,(0,W.Z)({onCurrentTime:v,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),i==="doc"&&n().createElement(he,this.props),i==="image"&&n().createElement(Qe,(0,W.Z)({onError:this.handleJudgeNetwork},this.props)),i==="html"&&n().createElement(ot,this.props),i==="scorm"&&n().createElement(ft,this.props))},this.renderFooter=()=>{var d=this.props,o=d.resourceInfo.storageType,i=d.t,u=this.state.showBan,v=u!==""&&u==="yes";return o&&o!=="PUBLIC_CLOUD"&&v?n().createElement(M.Z,{type:"primary",className:"know",onClick:this.onCancelModel},i("localStorage.onKnow")):null}}componentDidMount(){var l=this.props.mode;l==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(l){l.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var l=this.state,d=l.showBan,o=l.fullScreen,i=this.props,u=i.mode,v=i.previewWay,y=i.previewInfo,k=i.prefixCls,P=i.t,F=i.showEnlarge,V=i.footer,_=V===void 0?null:V,x=y.visible,R=y.destroyOnClose,se=y.title,ge=d!==""&&d==="yes",Pe=d!==""&&d==="no";return n().createElement(S.Fragment,null,u==="preview"&&v==="popups"&&n().createElement($e.ZP,{destroyOnClose:R,visible:x,title:se,onCancel:this.onCancelModel,footer:_||this.renderFooter(),wrapClassName:"".concat(k,"-resource ").concat(o?"".concat(k,"-full"):"")},F&&n().createElement("div",{className:"".concat(k,"-resource-out-icon"),onClick:this.onFullScreen},o?n().createElement(T.Z,{className:"".concat(k,"-resource-icon")}):n().createElement(I.Z,{className:"".concat(k,"-resource-icon")})),n().createElement("div",{className:"".concat(k,"-inner")},!x&&n().createElement(D.Z,{size:"large"}),x&&Pe&&this.renderOuter(),ge&&n().createElement(K,null))),(u==="learn"||v==="page")&&Pe&&this.renderOuter(),(u==="learn"||v==="page")&&n().createElement(gt,{visible:ge,title:se||P("questionn.warmHint"),onCancel:this.onCancel}))}}Ct.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var Et=(0,w.Z)("translation",{withRef:!0})(Ct)},41225:function(Ue,ue,e){"use strict";e.d(ue,{Hy:function(){return A},NY:function(){return z},Gw:function(){return h},sH:function(){return T},BR:function(){return S},qp:function(){return I},Xc:function(){return w},J7:function(){return n}});var Z=e(57361),D=e(9754),J=e.n(D),M=e(10237),W=e(37055),A=function(){var E=(0,Z.Z)(J().mark(function b(){var r,K,L,$,G,H,le,re=arguments;return J().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return r=re.length>0&&re[0]!==void 0?re[0]:"",K=re.length>1&&re[1]!==void 0?re[1]:"",L="",r.startsWith("http")?($=r.split("//")[1].trim(),G=$.split("/")[0],L="https://".concat(G,"/cms/ticket")):(H=r.split("/")[0],L="https://".concat(H,"/cms/ticket")),Y.prev=4,Y.next=7,M.ZQ.get({url:L,params:{ticket:K}});case 7:if(le=Y.sent,!(le.status===200||le.status===403)){Y.next=10;break}return Y.abrupt("return",Promise.resolve(!0));case 10:return Y.abrupt("return",Promise.resolve(!1));case 13:return Y.prev=13,Y.t0=Y.catch(4),Y.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return Y.stop()}},b,null,[[4,13]])}));return function(){return E.apply(this,arguments)}}(),z=function(){var E=(0,Z.Z)(J().mark(function b(r){var K,L;return J().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,M.ZQ.get({url:W.ZP.local.getTicket(r)});case 2:if(K=G.sent,L=K.data,L.code!==0){G.next=6;break}return G.abrupt("return",Promise.resolve(L.data.ticket));case 6:return G.abrupt("return",Promise.resolve(""));case 7:case"end":return G.stop()}},b)}));return function(r){return E.apply(this,arguments)}}(),h=function(){var E=(0,Z.Z)(J().mark(function b(){var r;return J().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,M.WY.get({url:W.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return r=L.sent,L.abrupt("return",r.data.list);case 4:case"end":return L.stop()}},b)}));return function(){return E.apply(this,arguments)}}(),S=function(){var E=(0,Z.Z)(J().mark(function b(r){var K,L,$;return J().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,M.WY.get({url:W.ZP.localStorage.getPravateVideoUrl(r)});case 2:if(K=H.sent,K.data.code!==0){H.next=6;break}return L=K.data.data.videoPlayInfo,$=L===void 0?"":L,H.abrupt("return",$);case 6:return H.abrupt("return","");case 7:case"end":return H.stop()}},b)}));return function(r){return E.apply(this,arguments)}}(),n=function(){var E=(0,Z.Z)(J().mark(function b(r){var K,L,$;return J().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return K=W.ZP.localStorage.getPravateDocUrl(r),H.prev=1,H.next=4,M.WY.get({url:K});case 4:if(L=H.sent,$=L.data,!($.code===0&&$.data)){H.next=8;break}return H.abrupt("return",$.data.docResourceDownloadUrl||"");case 8:return H.abrupt("return","");case 11:return H.prev=11,H.t0=H.catch(1),H.abrupt("return","");case 14:case"end":return H.stop()}},b,null,[[1,11]])}));return function(r){return E.apply(this,arguments)}}(),T=function(b){var r=b.studyInfo,K=b.progress,L=b.recent_start,$=b.page_count,G=b.enterpriseId,H=b.userId,le=b.token,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ce,Y=r.studyType;if(Y==="studyTask"&&(ce=W.ZP.SaveProgress.studySaveProgress(r)),(Y==="course"||Y==="enterprise")&&(ce=W.ZP.SaveProgress.enterpriseCourseSaveProgress(r)),Y==="studyProject"&&(ce=W.ZP.SaveProgress.projectSaveProgress(r)),Y==="platform"&&(ce="".concat(W.ZP.SaveProgress.platformCourseSaveProgress(r))),(re||Y==="platform")&&(ce+="?enterprise_id=".concat(G,"&user_id=").concat(H)),re)return ce+="&access_token=".concat(le||localStorage.getItem("token")),ce;var C={progress:K,recent_start:L,tempTime:Date.parse(new Date)};return $&&(C.page_count=$),r.evaluationId&&(C.evaluation_id=r.evaluationId),M.WY.post({url:ce,data:C})},I=E=>{var b=E.popupId,r=E.planId,K=E.resourceId,L=E.type;return M.WY.post({url:W.ZP.TaskStudyRecord.setRandomPopupRecord(r),data:{course_id:K,terminal_type:"PC",popup_id:b,type:L}})},w=(E,b)=>{var r=W.ZP.SaveProgress.reportStatusInterval(E);return M.WY.post({url:r,data:b})}},21594:function(Ue,ue,e){"use strict";e.d(ue,{pu:function(){return W},RG:function(){return A},Gp:function(){return z},O8:function(){return h}});var Z=e(88986),D=e(69164),J=e(38642),M=e(41225),W=S=>{var n="";switch(S){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":n="studyTask";break;case"enterprise":n="enterprise";break;case"courseProject":n="studyProject";break;case"platform":case"purchased":n="platform";break;default:break}return n},A=(S,n)=>{var T={};return n.forEach(I=>{var w=S.find(L=>L.type===I.type);if(w)if(I.type==="document_duration_limit"){var E=w.action_list,b=E.find(L=>L.type==="random_popup_verification");!(0,J.UI)("RANDOM_POPUP_VERIFY")||!b?T[I.name]="CLOSE":T[I.name]=b.param.checked==="true"?"OPEN":"CLOSE"}else if(I.type==="document_player"){var r=JSON.parse(w.actions);r.forEach(L=>{L.param.checked==="true"&&(T[I.name]=L.type)})}else if(I.type==="dynamic_watermark"){var K=w.action_list;K.forEach(L=>{L.type===I.resourceType&&L.param.checked==="true"&&(T[I.name]=L.param.comment)})}else T[I.name]=w.switch_status}),T},z=S=>{(0,M.sH)((0,Z.Z)({progress:100,recent_start:1},S)).then(n=>{n&&n.data&&(0,D.Z)(n.data.integral_info||"")})},h=S=>{var n=document.createElement("div");return n.innerHTML=S,n.childNodes[0]}},51975:function(Ue,ue,e){"use strict";e.d(ue,{l:function(){return M}});var Z=e(62029),D=e(12924),J=e.n(D),M=(W,A)=>function(h){return J().createElement(W.Consumer,null,S=>J().createElement(A,(0,Z.Z)({},h,{contextData:S})))}},11449:function(Ue,ue,e){"use strict";e.d(ue,{Z:function(){return me}});var Z=e(88986),D=e(33565),J=e(12924),M=e.n(J),W=e(3115),A=e(49111),z=e(19650),h=e(62029),S=e(57663),n=e(71577),T=e(91768),I=e(28216),w=e(37055),E=e(10237);function b(fe){var Se=w.ZP.getHelpContentByMenuKey(),xe={key:fe};return E.WY.get({url:Se,params:xe})}var r=e(74228),K=e.n(r),L=e(1164),$=e(76466),G=e(38642);class H extends M().Component{constructor(Se){var xe;super(Se);xe=this,this.getHelpContentByMenuKey=()=>{var Te=this.props.defaultMenuKey;b(Te).then(Oe=>{var Ne=Oe.data,je=Ne.help_url,Le=Ne.video_url;this.setState({videoUrl:Le,helpUrl:je})})},this.handleOpenHelpUrl=Te=>{if((0,G.ve)()){window.open(Te,"_blank");return}L.Z.targetTo({path:Te,isExternalLink:!0})},this.handleOpenVideo=function(Te){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xe.props.t("helpCenter.video");xe.setState(Ne=>({resourcePlayInfo:(0,Z.Z)((0,Z.Z)({},Ne.resourcePlayInfo),{},{resourceInfo:{originUrl:Te,source:{FD:Te,OD:Te},contentType:"mp4"}}),previewInfo:(0,Z.Z)((0,Z.Z)({},Ne.previewInfo),{},{title:Oe,visible:!0,onCancel:xe.handleCancelPreview})}))},this.handleCancelPreview=()=>{var Te=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,Z.Z)((0,Z.Z)({},Te),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:Se.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var Se=this.state,xe=Se.helpUrl,Te=Se.resourcePlayInfo,Oe=Se.previewInfo,Ne=Se.videoUrl,je=this.props.t;return M().createElement("div",{className:K().helpCenter},Ne&&M().createElement(n.Z,{type:"link",className:K()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(Ne)},je("helpCenter.video")),xe&&M().createElement(n.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(xe)},je("helpCenter.tutorial")),M().createElement($.Z,(0,h.Z)({},Te,{previewInfo:Oe})))}}var le=fe=>({defaultMenuKey:fe.currentRoute.menuKey});H.defaultProps={defaultMenuKey:""};var re=(0,I.$j)(le)((0,T.Z)()(H));function ce(fe){var Se=fe.extra,xe=localStorage.getItem("dingPersonnel"),Te=sessionStorage.getItem("dingPersonnel");return M().createElement(z.Z,null,Se,xe!=="dingPersonnel"&&Te!=="dingPersonnel"&&(0,G.eY)("COMMONEXTRA_HELP_CENTER")&&M().createElement(re,null))}var Y=ce,C=e(4408);function Q(fe){var Se=(0,J.useState)({helpCenter:(0,G.eY)("HEAD_HELP_CENTER_BUT")}),xe=(0,D.Z)(Se,1),Te=xe[0],Oe=fe.pageContainerParams,Ne=Oe===void 0?{}:Oe,je=fe.noPadding,Le=je===void 0?!1:je,Re=fe.isPersonal,We=Re===void 0?!1:Re,$e=fe.pageTitle,Be=fe.className,Ye=Be===void 0?"":Be,ze={extra:Te.helpCenter?M().createElement(Y,{extra:Ne.extra}):Ne.extra},qe=(0,Z.Z)((0,Z.Z)({},Ne),ze);return M().createElement("div",{className:"page-container-content ".concat(Le?"page-container-noPadding":""," ").concat(We?"page-container-content_personal_background":""," ").concat(Ye)},$e&&M().createElement(C.Z,{title:$e}),We?M().createElement(W.Z,null,fe.children):M().createElement(W.Z,qe,fe.children))}var me=Q},86396:function(Ue,ue,e){"use strict";e.d(ue,{Mz:function(){return J},V5:function(){return M},kx:function(){return W},ju:function(){return A},KE:function(){return z},T_:function(){return h},c2:function(){return S}});var Z=e(37055),D=e(10237),J=()=>{var n=Z.ZP.LibraryList.checkMemberBinding();return D.WY.get({url:n})},M=n=>{var T=n.keyword,I=n.page_no,w=n.page_size,E=Z.ZP.LibraryList.memberInfoList();return D.WY.get({url:E,params:{query_type:"enterprise",keyword:T,page_no:I,page_size:w}})},W=n=>{var T=n.thirdMemberId,I=n.keyword,w=n.member_status,E=n.member_card_type,b=n.page_no,r=n.page_size,K=Z.ZP.LibraryList.memberUserInfoList(T);return D.WY.get({url:K,params:{keyword:I,member_status:w,member_card_type:E,page_no:b,page_size:r}})},A=n=>{var T=n.thirdMemberId,I=n.keyword,w=n.member_status,E=n.member_card_type,b=n.page_no,r=n.page_size,K=Z.ZP.LibraryList.memberEnterpriseInfoList(T);return D.WY.get({url:K,params:{keyword:I,member_status:w,member_card_type:E,page_no:b,page_size:r}})},z=n=>{var T=n.thirdMemberId,I=Z.ZP.LibraryList.queryMemberTypeList(T);return D.WY.get({url:I})},h=n=>{var T=n.thirdMemberId,I=Z.ZP.LibraryList.memberCount(T);return D.WY.get({url:I})},S=n=>{var T=n.thirdMemberId,I=n.member_card_type,w=n.user_list,E=Z.ZP.LibraryList.addUserMemberBinding(T);return D.WY.post({url:E,data:{member_card_type:I,user_list:w}})}},89411:function(Ue,ue,e){"use strict";e.r(ue),e.d(ue,{default:function(){return ut}});var Z=e(57663),D=e(71577),J=e(49111),M=e(19650),W=e(48736),A=e(27049),z=e(13062),h=e(71230),S=e(89032),n=e(15746),T=e(22385),I=e(31097),w=e(71194),E=e(57016),b=e(34792),r=e(48086),K=e(57361),L=e(88986),$=e(402),G=e(99545),H=e(43358),le=e(34041),re=e(9754),ce=e.n(re),Y=e(12924),C=e.n(Y),Q=e(28216),me=e(91768),fe=e(49101),Se=e(86396),xe=e(62029),Te=e(66456),Oe=e(55313),Ne=e(54549),je=e(74936),Le=e.n(je),Re=e(6793),We=e(91302),$e=e(18329),Be=e(88311),Ye=G.Z.Text;class ze extends C().Component{constructor(ke){super(ke);this.onCancel=()=>{this.props.onCancel()},this.onSubmit=te=>{var ye=this.state,j=ye.selectedRowKeys,X=ye.orgConfig,he=ye.isAdd,De={memberCardType:j[0],userList:X.initData.user.map(Ie=>({id:Ie.id,name:Ie.user_name}))};if(De.userList.length<1){r.default.warning(te("common.selectP",{name:te("accountEquity.employeeToBeDistributed")}));return}this.props.onOk(De,he)},this.onSelectChange=(te,ye)=>{this.setState(j=>({selectedRowKeys:te,orgConfig:(0,L.Z)((0,L.Z)({},j.orgConfig),{},{maxUserCount:ye[0].type_unassigned_quota})}))},this.handleOpenOrgDialog=()=>{this.setOrgModalVisibility(!0)},this.handleCancel=()=>{this.setOrgModalVisibility(!1)},this.handleOk=te=>{this.setState(ye=>({orgConfig:(0,L.Z)((0,L.Z)({},ye.orgConfig),{},{initData:{user:te.user},visible:!1})}))},this.setOrgModalVisibility=te=>{this.setState(ye=>({orgConfig:(0,L.Z)((0,L.Z)({},ye.orgConfig),{},{visible:te})}))},this.getColumns=te=>[{title:te("accountEquity.memberType"),dataIndex:"code",render:ye=>te(We.kX[ye])},{title:te("accountEquity.unassignedQuota"),dataIndex:"type_unassigned_quota"}],this.handleRemoveUser=te=>{this.setState(ye=>{var j=ye.orgConfig.initData.user;return{orgConfig:(0,L.Z)((0,L.Z)({},ye.orgConfig),{},{initData:{user:j.slice(0,te).concat(j.slice(te+1,j.length))}})}})},this.state={isAdd:!0,selectedRowKeys:[],memberCardTypeCount:[],orgConfig:{maxUserCount:50,visible:!1,initData:{user:[]}}}}componentDidUpdate(ke){if(ke.visible!==this.props.visible&&this.props.visible){var te=this.props,ye=te.selectedRecord,j=te.memberCountData,X=j.member_card_type_count.filter(De=>De.type_unassigned_quota>0),he=JSON.stringify(ye)==="{}";this.setState(De=>({isAdd:he,memberCardTypeCount:X,selectedRowKeys:[X[0].code],orgConfig:(0,L.Z)((0,L.Z)({},De.orgConfig),{},{maxUserCount:X[0].type_unassigned_quota,initData:{user:he?[]:[ye.user_info]}})}))}}render(){var ke=this.props,te=ke.t,ye=ke.visible,j=ke.memberCountData,X=this.state,he=X.selectedRowKeys,De=X.orgConfig,Ie=X.isAdd,we=X.memberCardTypeCount,ie={okText:te("common.ok"),cancelText:te("common.cancel"),size:"medium",destroyOnClose:!0,maskClosable:!1},Ee={selectedRowKeys:he,onChange:this.onSelectChange};return C().createElement($e.ZP,(0,xe.Z)({className:Le().memberUserModal,title:te(Ie?"accountEquity.distributeMember":"accountEquity.memberRenewal")},ie,{visible:ye,onCancel:this.onCancel,onOk:(0,Re.Ds)(()=>this.onSubmit(te),1e3)}),C().createElement(Oe.Z,{title:()=>j.member_name,rowSelection:(0,L.Z)({type:"radio"},Ee),columns:this.getColumns(te),dataSource:we,size:"small",rowKey:"code",pagination:!1}),C().createElement(h.Z,{style:{marginTop:8}},C().createElement(n.Z,{span:3},C().createElement("p",{style:{marginTop:5,marginBottom:0}},te("accountEquity.assignedPeople"),"\uFF1A")),C().createElement(n.Z,{span:21,style:{whiteSpace:"pre-wrap"}},Ie&&C().createElement(C().Fragment,null,C().createElement(D.Z,{className:Le().userBtn,type:"primary",onClick:this.handleOpenOrgDialog,icon:C().createElement(fe.Z,null)}," ",te("authScope.chooseUser")),C().createElement("br",null)),De.initData.user.map((He,Fe)=>C().createElement(D.Z,{className:Le().userBtn,key:He.id},He.name," ",Ie&&C().createElement(Ne.Z,{onClick:()=>this.handleRemoveUser(Fe)}))))),C().createElement(Be.Z,(0,xe.Z)({title:te("marketing.userRequired")},De,{beyondLimitTip:te("accountEquity.chooseUserTip"),onlyUser:!0,onOk:this.handleOk,onCancel:this.handleCancel})))}}ze.defaultProps={visible:!1,memberCountData:{},selectedRecord:{},onCancel:()=>{},onOk:()=>{}};var qe=(0,me.Z)()(ze),et=e(90962),Ve=e.n(et),Xe=e(86726),tt=e(36202),rt=e(11449),Ke=e(11110),_e=le.Z.Option,Ae=G.Z.Text,st={normal:"marketing.normal",expired:"certificateManage.isOverdue"};class dt extends C().Component{constructor(ke){var te;super(ke);te=this,this.onChangePage=(j,X)=>{this.setState(he=>({params:(0,L.Z)((0,L.Z)({},he.params),{},{pageSize:X,current:j})}))},this.onSearch=j=>{this.setState(X=>({params:(0,L.Z)((0,L.Z)({},X.params),{},{current:1,keyword:j})}))},this.onDistributeMember=j=>{this.setState({memberVisible:!0,currentRecord:j})},this.onCancel=()=>{this.setState({memberVisible:!1})},this.onOk=function(){var j=(0,K.Z)(ce().mark(function X(he,De,Ie){var we,ie,Ee,He,Fe,Qe;return ce().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return we=te.state.params,ie=we.thirdMemberId,Me.next=4,(0,Se.c2)({thirdMemberId:ie,member_card_type:De.memberCardType,user_list:De.userList});case 4:Ee=Me.sent,He=Ee.code,Fe=Ee.data,Qe=Ee.success,Qe==="true"?r.default.success(he(Ie?"accountEquity.successTip1":"accountEquity.successTip2")):He==="583002"&&Fe&&Fe.length>0&&E.Z.warning({className:"userSettingModal",title:C().createElement(C().Fragment,null,C().createElement("span",{className:"errorTitle"},he("accountEquity.addUserTip")),C().createElement("span",{className:"errorTitle2"},he("accountEquity.addUserTip2"))),icon:null,width:620,content:C().createElement("div",{style:{fontSize:"13px",color:"rgba(0, 0, 0, 0.5)",maxHeight:316,overflow:"auto"}},Fe.map(ot=>ot.user_name).join("\uFF1B")),okText:he("component.iKnow")}),te.onCancel(),te.fetchMemberCountData({thirdMemberId:ie}),te.ref.current.reload();case 12:case"end":return Me.stop()}},X)}));return function(X,he,De){return j.apply(this,arguments)}}(),this.ref=C().createRef(),this.fetchQueryMemberTypeData=function(){var j=(0,K.Z)(ce().mark(function X(he){var De,Ie,we;return ce().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return De=he.thirdMemberId,Ee.next=3,(0,Se.KE)({thirdMemberId:De});case 3:Ie=Ee.sent,we=Ie.data,te.setState({memberTypeList:we});case 6:case"end":return Ee.stop()}},X)}));return function(X){return j.apply(this,arguments)}}(),this.fetchMemberCountData=function(){var j=(0,K.Z)(ce().mark(function X(he){var De,Ie,we;return ce().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return De=he.thirdMemberId,Ee.next=3,(0,Se.T_)({thirdMemberId:De});case 3:Ie=Ee.sent,we=Ie.data,te.setState({memberCardTypeCountObj:we,memberAuthority:te.AddUnassignedQuota(we.member_card_type_count)});case 6:case"end":return Ee.stop()}},X)}));return function(X){return j.apply(this,arguments)}}(),this.getColumns=j=>{var X=this.state,he=X.showMemberAuthority,De=X.memberAuthority,Ie=X.typeLevel,we=[];return Ie==="user"?(we=[{title:j("common.userName"),dataIndex:["user_info","name"]},{title:j("accountEquity.memberStatus"),dataIndex:"member_status",renderText:ie=>C().createElement(C().Fragment,null,C().createElement("span",{className:"".concat(Ve().dot," ").concat(Ve()[ie])}),j(st[ie]))},{title:j("accountEquity.memberType"),dataIndex:"member_card_type",renderText:ie=>j(We.kX[ie])},{title:j("setting.expireDate"),dataIndex:"expires_time",renderText:ie=>(0,Re.p6)(ie,"yyyy-MM-dd")},{title:j("common.departmentLabel"),dataIndex:["user_info","dept_name"],width:200,renderText:ie=>C().createElement(I.Z,{placement:"topLeft",title:ie},C().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},ie))},{title:j("setting.watermarkJobNumber"),dataIndex:["user_info","jobnumber"]}],he&&we.push({title:j("common.operate"),dataIndex:"operate",render:(ie,Ee)=>C().createElement(I.Z,{placement:"topLeft",title:Ee.member_status==="normal"?j("accountEquity.memberTip"):De?"":j("accountEquity.memberLimit")},C().createElement("div",null,C().createElement("a",{disabled:Ee.member_status==="normal"||!De,onClick:()=>this.onDistributeMember(Ee)},j("accountEquity.renewal"))))})):Ie==="enterprise"&&(we=[{title:j("accountEquity.memberName"),dataIndex:"member_name"},{title:j("accountEquity.sourceName"),dataIndex:"source_name"},{title:j("accountEquity.memberStatus"),dataIndex:"member_status",renderText:ie=>C().createElement(C().Fragment,null,C().createElement("span",{className:"".concat(Ve().dot," ").concat(Ve()[ie])}),j(st[ie]))},{title:j("accountEquity.memberType"),dataIndex:"member_card_type",renderText:ie=>j(We.kX[ie])},{title:j("accountEquity.addMember"),dataIndex:"quota_count"},{title:j("setting.expireDate"),dataIndex:"expires_time",renderText:ie=>(0,Re.p6)(ie,"yyyy-MM-dd")}]),we},this.renderHeaderContent=()=>{var j=this.props.t,X=this.state.memberCardTypeCountObj.member_card_type_count;return C().createElement(h.Z,{className:Ve().countList},X&&X.length>0&&X.map(he=>C().createElement(n.Z,{key:he.code,span:8},C().createElement("label",{className:Ve().countLabel},j(We.kX[he.code]),"\uFF1A"),this.renderMemberDetail(j,he))))},this.renderMemberDetail=(j,X)=>C().createElement(M.Z,{split:C().createElement(A.Z,{type:"vertical"}),className:Ve().countText},C().createElement("span",null,j("accountEquity.total")," ",X.type_total_quota),C().createElement("span",null,j("accountEquity.unassigned")," ",X.type_unassigned_quota),C().createElement("span",null,j("certificateManage.isOverdue")," ",X.type_expired_quota)),this.handleChangeStatus=j=>{this.setState(X=>({params:(0,L.Z)((0,L.Z)({},X.params),{},{current:1,member_status:j})}))},this.handleChangeType=j=>{this.setState(X=>({params:(0,L.Z)((0,L.Z)({},X.params),{},{current:1,member_card_type:j})}))},this.renderHeaderTitle=j=>{var X=this.state,he=X.memberTypeList,De=X.addMemberAuthority,Ie=X.memberAuthority,we=X.typeLevel;return C().createElement(M.Z,null,De&&we==="user"&&C().createElement(I.Z,{placement:"topLeft",title:Ie?"":j("accountEquity.memberLimit")},C().createElement("div",null,C().createElement(D.Z,{key:"primary",type:"primary",disabled:!Ie,icon:C().createElement(fe.Z,null),onClick:()=>this.onDistributeMember({})},j("accountEquity.distributeMember")))),C().createElement(le.Z,{defaultValue:"",style:{width:224},onChange:this.handleChangeStatus},C().createElement(_e,{value:""},j("accountEquity.memberStatus")),Object.keys(st).map(ie=>C().createElement(_e,{value:ie,key:ie},j(st[ie])))),C().createElement(le.Z,{defaultValue:"",style:{width:224},onChange:this.handleChangeType},C().createElement(_e,{value:""},j("accountEquity.memberType")),he&&he.length>0&&he.map(ie=>C().createElement(_e,{value:ie.code,key:ie.code},j(We.kX[ie.code])))))},this.renderHeaderExtra=j=>C().createElement(Ae,{type:"secondary"},j("accountEquity.contactTip"),C().createElement("a",{className:"zhiCustomBtn"},j("course.contactService")));var ye=(0,Xe.V9)("memberAccountSettings",ke.modules);this.state={params:{keyword:"",current:1,pageSize:10,thirdMemberId:"",member_status:"",member_card_type:""},memberCardTypeCountObj:{},memberTypeList:[],memberVisible:!1,currentRecord:{},showMemberAuthority:(0,Xe.H3)("renew_member",ye),addMemberAuthority:(0,Xe.H3)("add_member",ye),memberAuthority:!0,typeLevel:"user"}}componentDidMount(){var ke=this.props.location.query,te=ke.thirdMemberId,ye=ke.typeLevel;this.fetchMemberCountData({thirdMemberId:te}),this.fetchQueryMemberTypeData({thirdMemberId:te}),this.setState(j=>({params:(0,L.Z)((0,L.Z)({},j.params),{},{thirdMemberId:te}),typeLevel:ye}))}AddUnassignedQuota(ke){var te=0;return ke.map(ye=>{te+=ye.type_unassigned_quota}),te!==0}render(){var ke=this.props.t,te=this.state,ye=te.params,j=te.memberVisible,X=te.memberCardTypeCountObj,he=te.currentRecord,De=te.typeLevel;return C().createElement(rt.Z,{noPadding:!0,className:Ve().userSetting,pageContainerParams:{header:{title:X!=null&&X.member_name?X==null?void 0:X.member_name:""},extra:this.renderHeaderExtra(ke)},pageTitle:ke("accountEquity.accountEquitySetting")},this.renderHeaderContent(),C().createElement("div",{className:Ve().userSettingContent},C().createElement(tt.f,{tableUUID:"b7ae2362-0db1-4ae6-963e-8bbfad7a5dc1",className:Ve().userSettingTable,actionRef:this.ref,columns:this.getColumns(ke),rowKey:"third_member_id",params:ye,request:function(){var Ie=(0,K.Z)(ce().mark(function we(ie){var Ee,He,Fe,Qe;return ce().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(De!=="user"){Me.next=8;break}return Me.next=3,(0,Se.kx)({page_no:ie.current,page_size:ie.pageSize,thirdMemberId:ie.thirdMemberId,keyword:ie.keyword,member_status:ie.member_status,member_card_type:ie.member_card_type});case 3:Fe=Me.sent,Ee=Fe.data,He=Fe.success,Me.next=13;break;case 8:return Me.next=10,(0,Se.ju)({page_no:ie.current,page_size:ie.pageSize,thirdMemberId:ie.thirdMemberId,keyword:ie.keyword,member_status:ie.member_status,member_card_type:ie.member_card_type});case 10:Qe=Me.sent,Ee=Qe.data,He=Qe.success;case 13:return Me.abrupt("return",{data:Ee.list,success:He==="true",total:Number(Ee.total)});case 14:case"end":return Me.stop()}},we)}));return function(we){return Ie.apply(this,arguments)}}(),headerTitle:this.renderHeaderTitle(ke),toolbar:{search:{style:{display:De==="user"?"inline-flex":"none",width:"272px"},placeholder:ke("common.searchNamePlaceholder"),allowClear:!0,onSearch:this.onSearch}},pagination:{show:!0,size:"middle",pageSize:ye.pageSize,current:ye.current,showTotal:Ie=>"".concat(ke("component.totalLabel")).concat(Ie).concat(ke("component.itemLabel")),onChange:this.onChangePage}})),C().createElement(Ke.Z,{onRef:()=>{},options:{type:3},activeBtn:"zhiCustomBtn"}),C().createElement(qe,{visible:j,memberCountData:X,selectedRecord:he,onCancel:this.onCancel,onOk:(Ie,we)=>this.onOk(ke,Ie,we)}))}}var ut=(0,Q.$j)(at=>({modules:at.user.modules}))((0,me.Z)()(dt))},9849:function(Ue,ue,e){"use strict";e.d(ue,{Ej:function(){return W},kL:function(){return A},T:function(){return z},NU:function(){return h},FL:function(){return S},fn:function(){return n},bm:function(){return T},jY:function(){return I},Vs:function(){return w},li:function(){return E},Nl:function(){return b},YF:function(){return r},Q6:function(){return K},zW:function(){return L},Zv:function(){return $},Qg:function(){return G},qc:function(){return H},Ve:function(){return re},rS:function(){return ce},Rh:function(){return Y}});var Z=e(10237),D=e(37055),J=e(38642),M={zaraFlag:(0,J.UI)("ZARA_H5")};function W(C,Q){var me=D.ZP.StudyProjectList.startStudy(C);return Z.WY.post({url:me,data:Q})}function A(C){var Q=D.ZP.Common.enroll(C);return Z.WY.post({url:Q})}function z(C,Q){var me=C.courseId,fe=D.ZP.StudyProjectList.studyProject(me);return Z.WY.get({url:fe,params:Q})}function h(C){var Q=C.id,me=M.zaraFlag?D.m1.getAssessmentProjectInfo(Q):D.m1.getProjectInfo(Q);return Z.WY.get({url:me})}function S(C){var Q=C.courseId,me=D.ZP.EnterpriseCourse.addScanCount(Q);return Z.WY.post({url:me})}function n(){var C=D.ZP.StudyProjectList.getAccountInfo();return Z.WY.get({url:C})}function T(C){var Q=D.ZP.StudyProjectList.projectCertiUrl(C);return Z.WY.get({url:Q})}function I(C){var Q=C.courseId,me=D.ZP.Courses.like(Q);return Z.WY.post({url:me})}function w(C){var Q=D.ZP.EnterpriseCourse.addCommentAndScore();return Z.qg.post({url:Q,data:C})}function E(C){var Q=D.ZP.EnterpriseCourse.getCourseComments();return Z.WY.get({url:Q,params:C})}function b(C){var Q=D.ZP.EnterpriseCourse.addCommentAndScore();return Z.qg.post({url:Q,data:C})}function r(C){var Q=D.ZP.EnterpriseCourse.deleteComment();return Z.qg.post({url:Q,data:C})}function K(C,Q){var me=D.ZP.StudyProjectList.projectStudyRecord(C);return Z.WY.get({url:me,params:Q})}function L(C){var Q=D.ZP.DingSpaceId.getSpaceId();return Z.WY.get({url:Q,params:C})}function $(C,Q){var me=D.ZP.PlatformCourse.learningUrl(C);return Z.WY.get({url:me,params:Q})}function G(C){var Q=D.ZP.MyExamTask.examIntro({examId:C});return Z.WY.get({url:Q})}function H(C){var Q=D.ZP.MyExamTask.examCheckStatus({examId:C});return Z.WY.get({url:Q})}function le(C,Q){var me=CONFIG.Common.getOperateLog(C);return formDataRequest.get({url:me,params:Q})}function re(C,Q){var me=M.zaraFlag?D.ZP.StudyProjectList.changeCustomStatus(C):D.ZP.StudyProjectList.changeStatus(C);return Z.WY.post({url:me,data:Q})}function ce(C){var Q=D.ZP.StudyProjectList.getProjectReward(C);return Z.WY.get({url:Q})}function Y(C){var Q=D.ZP.subsidyGz.subsidyCourseSetting(C);return Z.WY.get({url:Q})}},91648:function(Ue,ue,e){"use strict";e.d(ue,{Z:function(){return Z}});function Z(D,J){var M,W,A,z,M;if(W="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),M=[],A=void 0,J=J||W.length,D)for(A=0;A<D;)M[A]=W[0|Math.random()*J],A++;else for(z=void 0,M[8]=M[13]=M[18]=M[23]="-",M[14]="4",A=0;A<36;)M[A]||(z=0|Math.random()*16,M[A]=W[A===19?z&3|8:z]),A++;return M.join("")}},86726:function(Ue,ue,e){"use strict";e.d(ue,{V9:function(){return D},H3:function(){return J},e:function(){return M},F:function(){return W}});var Z=e(93485);function D(A){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=[];function S(n,T){var I=(0,Z.Z)(T),w;try{for(I.s();!(w=I.n()).done;){var E=w.value;if(E.key===n){h=E.actions;break}E.children instanceof Array&&E.children.length&&S(A,E.children)}}catch(b){I.e(b)}finally{I.f()}}return S(A,z),h}function J(A){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=z.find(S=>S.key===A)||{};return h.checked||!1}function M(A){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=!1;function S(n,T){var I=(0,Z.Z)(T),w;try{for(I.s();!(w=I.n()).done;){var E=w.value;if(E.key===n){h=E.checked;break}E.children instanceof Array&&E.children.length&&S(A,E.children)}}catch(b){I.e(b)}finally{I.f()}}return S(A,z),h}function W(A){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h="";function S(n,T){var I=(0,Z.Z)(T),w;try{for(I.s();!(w=I.n()).done;){var E=w.value;if(E.key===n){h=E.id;break}E.children instanceof Array&&E.children.length&&S(A,E.children)}}catch(b){I.e(b)}finally{I.f()}}return S(A,z),h}},69164:function(Ue,ue,e){"use strict";var Z=e(34792),D=e(48086);function J(M){M&&M.length>0&&D.default.success(M)}ue.Z=J},65202:function(Ue,ue,e){"use strict";e.d(ue,{p:function(){return Z}});function Z(){return localStorage.getItem("themeColor")||"#516AE6"}},25547:function(Ue,ue,e){"use strict";e.d(ue,{Yd:function(){return J},VX:function(){return W},lK:function(){return A},NP:function(){return z}});var Z=e(88986),D=e(93485);function J(h,S,n){var T=0;function I(w,E){for(var b=0;b<w.length;b++){var r=w[b];if(r[h]===S){T=E;break}else r.children instanceof Array&&r.children.length&&I(r.children,E+1)}}return I(n,1),T}function M(h){var S=1;function n(T,I){T.forEach(w=>{I>S&&(S=I),w.children&&w.children.length>0&&n(w.children,I+1)})}return n(h,1),S}function W(h,S,n){h.forEach((T,I,w)=>{if(T.id===S)return n(T,I,w);if(T.children)return W(T.children,S,n)})}function A(h,S){var n;function T(I){var w=(0,D.Z)(I),E;try{for(w.s();!(E=w.n()).done;){var b=E.value;if(b.id==S){n={id:b.id,name:b.name,children:b.children,parentId:b.parentId};break}b.children&&b.children instanceof Array&&b.children.length>0&&T(b.children)}}catch(r){w.e(r)}finally{w.f()}}return T(h),n?(0,Z.Z)((0,Z.Z)({},n),{},{children:n.children instanceof Array?n.children:[]}):{children:[],id:"",name:""}}var z=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",I=[...S];function w(E){Object.keys(n).forEach(b=>{var r=b,K=n[b];E[K]=E[r],E[T]=E[T]&&E[T]instanceof Array?[...E[T]]:[],E[T].length?E[T].forEach(L=>{w(L)}):delete E[T]})}return I.forEach(E=>w(E)),I}},4412:function(Ue){Ue.exports="data:image/png;base64,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"}}]);
