(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[2245],{30311:function(me,Q,e){"use strict";var x=e(22385),z=e(31097),_=e(12924),u=e.n(_),o=e(8812),i=e(28216),A=f=>{var s=(0,i.v9)(E=>{var V=E.advancedSetting;return{themeColor:V.themeColor}}),I=s.themeColor;return u().createElement(z.Z,{placement:"top",title:f.name},u().createElement("span",{className:"cl-table__cell-arrow",onClick:f.onClick},u().createElement("span",{style:{color:I}},f.name),u().createElement("span",{className:"cl-table__cell-arrow-icon"},u().createElement(o.Z,null))))};Q.Z=A},30389:function(me,Q,e){"use strict";e.d(Q,{Z:function(){return P}});var x=e(62029),z=e(20228),_=e(11382),u=e(12924),o=e.n(u),i=e(91768),A=e(80991),f={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},s=e(62615),I=e(52670);class E extends o().Component{render(){var n=this.props,t=n.values,d=n.mode,g=n.onlyChooseDept,l=n.reserveUser,b=n.t,R=n.orgProps,M=n.rangeAuth,$=n.projectId,X=n.onCancel,ne=n.onlyCreateUser;return o().createElement(A.l0,{className:"cl-form"},o().createElement(A.gN,(0,x.Z)({component:s.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:b("common.visibleRange"),defaultFieldList:t.employeeRange,validate:I.FI,mode:d,rangeAuth:M,onlyChooseDept:g,onlyCreateUser:ne,orgProps:R,reserveUser:l,projectId:$,onCancel:X,qwTicketShow:!0},f)))}}var V=(0,i.Z)()(E),U=e(18329),S=e(34773);class C extends o().Component{constructor(){super(...arguments);this.initRefFormik=n=>{this.refFormik=n},this.handleBeforeCreate=()=>{var n=this.refFormik;n.submitForm(),n.runValidations().then(t=>{if(!Object.keys(t).length){var d=n.state.values.employeeRange,g=(0,S.b)(d.rangeList),l={qyWeChatVo:d.qyWeChatVo,id:this.props.actionId,isAll:d.rangeType,groupIds:d.rangeType===2?g.groupIds.join(","):"",departmentIds:d.rangeType===2?g.deptIds.join(","):"",userIds:d.rangeType===2?g.userIds.join(","):"",postIds:d.rangeType===2?g.postIds.join(","):"",clusterIds:d.rangeType===2?g.clusterIds.join(","):"",qy_we_chat_vo:d.qyWeChatVo};this.props.onCreate(l)}})},this.handleBeforeCancel=()=>{var n=this.props.onCancel;n()}}render(){var n=this.props,t=n.visible,d=n.initialParams,g=n.isLoading,l=n.tipInfo,b=n.mode,R=n.onlyChooseDept,M=n.reserveUser,$=M===void 0?[]:M,X=n.t,ne=n.title,K=n.orgProps,O=n.rangeAuth,h=n.projectId,m=n.onCancel,D=n.onlyCreateUser,v=n.size;return g?o().createElement(_.Z,{size:"large"}):o().createElement(U.ZP,{wrapClassName:"cl-employee-selector-modal",visible:t,title:ne||X("component.changeUser"),okText:X("common.ok"),cancelText:X("common.cancel"),size:v,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},g?o().createElement(_.Z,{size:"large"}):o().createElement(A.J9,{ref:this.initRefFormik,initialValues:d,render:L=>o().createElement(V,(0,x.Z)({},L,{mode:b,rangeAuth:O,orgProps:K,onlyChooseDept:R,onlyCreateUser:D,reserveUser:$,projectId:h,onCancel:m}))}),l&&o().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},l))}}C.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var P=(0,i.Z)()(C)},63848:function(me,Q,e){"use strict";var x=e(36877),z=e(32969),_=e(12924),u=e.n(_),o=e(91768),i=e(56130);class A extends u().PureComponent{constructor(){super(...arguments);this.onChange=(s,I)=>{this.props.onChange(s,I)}}render(){var s=this.props,I=s.value,E=s.classify,V=s.showLabel,U=s.className,S=s.t,C=s.style;return u().createElement("div",{className:"classify-cascader ".concat(U)},V?u().createElement("span",{className:"classify-cascader-label"},S("component.selectClassifyLabel")):null,u().createElement(z.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(U),options:E,onChange:this.onChange,placeholder:S("component.selectClassifyLabel"),value:I,style:C,loadData:this.props.loadData}))}}A.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},Q.Z=(0,i.Z)((0,o.Z)()(A))},51697:function(me,Q,e){"use strict";var x=e(22385),z=e(31097),_=e(33565),u=e(12924),o=e.n(u),i=e(28216),A=e(84874),f=I=>{var E=I.title,V=I.visible,U=I.placement,S=U===void 0?"top":U,C=I.children,P=C===void 0?null:C,Z=I.isNewUser,n=Z===void 0?"":Z,t=I.closeGuide,d=I.guideStatus,g=(0,u.useState)(!1),l=(0,_.Z)(g,2),b=l[0],R=l[1],M=ne=>o().createElement("div",{className:"guide-tooltip-title"},ne,o().createElement("span",{onClick:$},o().createElement(A.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,u.useEffect)(()=>{R(V)},[V]);var $=ne=>{if(ne.stopPropagation(),ne.preventDefault(),R(!1),t){t();return}n==="true"&&I.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),X()},X=()=>{localStorage.setItem("guideStatus","false"),I.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return o().createElement(z.Z,{title:M(E),placement:S,visible:b&&d==="true"&&E},P)},s=I=>({guideStatus:I.advancedSetting.guideStatus,isNewUser:I.advancedSetting.isNewUser});Q.Z=(0,i.$j)(s)(f)},66123:function(me,Q,e){"use strict";e.d(Q,{T:function(){return h},t:function(){return b}});var x=e(71194),z=e(57016),_=e(22385),u=e(31097),o=e(88986),i=e(57361),A=e(33565),f=e(9754),s=e.n(f),I=e(12924),E=e.n(I),V=e(91768),U=e(28216),S=e(57068),C=e(76651),P=e(87983),Z=e.n(P),n=e(99367),t=e(98233),d=e(67479),g=e(1164);function l(m){var D=m.t,v=m.title,L=m.visible,N=m.uuid,j=m.id,H=m.fieldNames,ee=m.from,de=m.getList,ce=m.onCancel,c=m.hasTitleLink,w=c===void 0?!0:c,T=(0,U.v9)(te=>{var ae=te.advancedSetting;return{themeColor:ae.themeColor}}),Y=T.themeColor,J=(0,I.useState)({}),W=(0,A.Z)(J,2),k=W[0],re=W[1],ue={task:"learning",employee:"employee"},le=(te,ae)=>{if(te)return(0,t.nn)({origin:ue[ee],search:S.stringify({id:ae.id,title:ae.title,origin:ue[ee]})});var se={},ie="";switch(ee){case"task":se={id:ae.id,taskId:j,taskType:ee},ie="/training/learning/management/monitor/exam?".concat(S.stringify(se));break;case"employee":se={id:ae.id,taskId:j,taskType:ee},ie="/training/learning/task/employeeResult/exam?".concat(S.stringify(se));break;default:break}return ie},ve=function(){var te=(0,i.Z)(s().mark(function ae(){var se,ie,Re,oe=arguments;return s().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(se=oe.length>0&&oe[0]!==void 0?oe[0]:"unKnow",ie=oe.length>1?oe[1]:void 0,se!=="unKnow"){ye.next=7;break}return ye.next=5,(0,d.D)(ie.id);case 5:return Re=ye.sent,ye.abrupt("return",le(Re,ie));case 7:return ye.abrupt("return",le(se,ie));case 8:case"end":return ye.stop()}},ae)}));return function(){return te.apply(this,arguments)}}(),ge=function(){var te=(0,i.Z)(s().mark(function ae(se){var ie;return s().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(w){oe.next=2;break}return oe.abrupt("return");case 2:return oe.next=4,ve(se.new_exam==="true",se);case 4:ie=oe.sent,C.m8.push(ie);case 6:case"end":return oe.stop()}},ae)}));return function(se){return te.apply(this,arguments)}}(),Ce=function(){var te=(0,i.Z)(s().mark(function ae(se){var ie;return s().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(se.pending_count!==0){oe.next=2;break}return oe.abrupt("return");case 2:return oe.next=4,(0,t.Md)(se.new_exam==="true",{id:se.id,taskId:j,status:"pending",from:"projectNew"});case 4:ie=oe.sent,se.new_exam==="true"?g.Z.targetTo({path:ie}):C.m8.push(ie);case 6:case"end":return oe.stop()}},ae)}));return function(se){return te.apply(this,arguments)}}(),Le=te=>de((0,o.Z)((0,o.Z)({},te),{},{id:j}));return(0,I.useEffect)(()=>{re({query:te=>Le(te),columns:[{title:D("exam.testName"),dataIndex:H&&H.title||"title",width:300,key:"id",render:(te,ae)=>E().createElement(u.Z,{title:ae.title},E().createElement("div",{style:w?{color:Y,cursor:"pointer",width:300}:{},className:"cl-text-ellipsis",onClick:()=>{ge(ae)}},ae[H&&H.title||"title"]))},{title:D("exam.toBeGraded"),width:120,dataIndex:H&&H.pending_count||"pending_count",key:H&&H.pending_count||"pending_count",render:(te,ae)=>ae[H&&H.pending_count||"pending_count"]},{title:D("exam.operate"),key:"operate",width:localStorage.getItem("lng")==="en_us"?210:100,fixed:"right",buttons:[{name:D("trainingProject.markingPapers"),disabled:te=>!(te.pending_count>0&&te.reading_operation==="has_operation"),handleClick:te=>Ce(te)}]}]})},[H,N,j]),E().createElement(z.Z,{title:v||D("myExamTask.marking"),visible:L,width:600,bodyStyle:{padding:"0 24px 24px"},footer:null,onCancel:ce},k.query?E().createElement("div",{className:Z()["pending-pager-container"]},E().createElement(n.Z,{uniKey:"",uuid:N,queryParams:k,pagination:!0})):null)}var b=(0,V.Z)()(l),R=e(20136),M=e(55241),$=e(38778),X=e.n($),ne=e(84874);function K(m){var D=m.contentString,v=m.scrollElement,L=m.visible,N=m.authJudge,j=m.placement,H=j===void 0?"bottom":j,ee=m.closeGuide,de=m.zIndex,ce=de===void 0?100:de,c=(0,I.useState)(!1),w=(0,A.Z)(c,2),T=w[0],Y=w[1],J=k=>{k.stopPropagation(),v&&!v.isRelative&&(document.querySelector('[class*="'.concat(v.classContent,'"]')).style.position=""),Y(!1),typeof ee=="function"&&ee()},W=()=>E().createElement("div",{className:X()["intro-content"]},D,E().createElement("span",{className:X().close,onClick:k=>J(k)},E().createElement(ne.Z,{iconClass:"icon-guanbi1",size:"12px"})));return(0,I.useEffect)(()=>{L&&!T&&(typeof N=="function"&&N()||!N)&&(v&&!v.isRelative&&(document.querySelector('[class*="'.concat(v.classContent,'"]')).style.position="relative"),setTimeout(()=>{Y(!0)},500))},[L]),E().createElement(M.Z,{visible:T,placement:H,title:"",overlayClassName:X()["intro-card"],content:W(),zIndex:ce,getPopupContainer:()=>document.querySelector('[class*="'.concat(v.classContent,'"]'))},m.children)}var O=m=>({userId:m.user.id||window.localStorage.getItem("uid")}),h=(0,U.$j)(O)((0,V.Z)()(K))},54792:function(me,Q,e){"use strict";var x=e(62029),z=e(63185),_=e(9676),u=e(47673),o=e(4107),i=e(88986),A=e(12924),f=e.n(A),s=e(91768),I=e(59239),E=e(55446),V=e.n(E),U=e(18329),S=e(2396);class C extends f().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var n=this.props,t=n.form,d=n.id,g=n.onCreate,l=this.state.isChecked;t.validateFields((b,R)=>{if(!b){var M=(0,i.Z)({},R);l||(M.value=0);var $=(0,i.Z)((0,i.Z)({},M),{},{id:d});g($),setTimeout(()=>{t.resetFields()},100)}})},this.handleBeforeCancel=()=>{var n=this.props,t=n.form,d=n.onCancel;d(),setTimeout(()=>{t.resetFields()},100)},this.checkScore=(n,t,d)=>{var g=this.props.t,l=this.state.isChecked;if(l&&(0,S.kh)(t)){d(g("component.setScoreRuleTip"));return}d()},this.handleCheckChange=n=>{this.setState({isChecked:n.target.checked})},this.renderItem=()=>{var n=this.props,t=n.form,d=n.initialValue,g=n.labelTxt,l=this.state.isChecked,b=t.getFieldDecorator,R={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},M=l?b("value",{initialValue:d,rules:[{validator:this.checkScore}]})(f().createElement(o.Z,{maxLength:30,placeholder:""})):null,$=f().createElement(f().Fragment,null,f().createElement(_.Z,{checked:l,onChange:this.handleCheckChange},g));return f().createElement(I.Z.Item,(0,x.Z)({label:$},R),M)}}componentDidUpdate(n){this.props.visible&&this.props.visible!==n.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var n=this.props,t=n.visible,d=n.title,g=n.prefixCls;return f().createElement(U.ZP,{size:"small",visible:t,title:d,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},f().createElement(I.Z,{className:"".concat(g),layout:"horizontal",colon:!1},this.renderItem(),f().createElement("div",{className:"".concat(g,"__children")},this.props.children)))}}C.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var P=I.Z.create({name:"ClSetupBoxInModal"})(C);Q.Z=(0,s.Z)()(P)},11449:function(me,Q,e){"use strict";e.d(Q,{Z:function(){return ne}});var x=e(88986),z=e(33565),_=e(12924),u=e.n(_),o=e(3115),i=e(49111),A=e(19650),f=e(62029),s=e(57663),I=e(71577),E=e(91768),V=e(28216),U=e(37055),S=e(10237);function C(K){var O=U.ZP.getHelpContentByMenuKey(),h={key:K};return S.WY.get({url:O,params:h})}var P=e(74228),Z=e.n(P),n=e(1164),t=e(76466),d=e(38642);class g extends u().Component{constructor(O){var h;super(O);h=this,this.getHelpContentByMenuKey=()=>{var m=this.props.defaultMenuKey;C(m).then(D=>{var v=D.data,L=v.help_url,N=v.video_url;this.setState({videoUrl:N,helpUrl:L})})},this.handleOpenHelpUrl=m=>{if((0,d.ve)()){window.open(m,"_blank");return}n.Z.targetTo({path:m,isExternalLink:!0})},this.handleOpenVideo=function(m){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.props.t("helpCenter.video");h.setState(v=>({resourcePlayInfo:(0,x.Z)((0,x.Z)({},v.resourcePlayInfo),{},{resourceInfo:{originUrl:m,source:{FD:m,OD:m},contentType:"mp4"}}),previewInfo:(0,x.Z)((0,x.Z)({},v.previewInfo),{},{title:D,visible:!0,onCancel:h.handleCancelPreview})}))},this.handleCancelPreview=()=>{var m=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,x.Z)((0,x.Z)({},m),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:O.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var O=this.state,h=O.helpUrl,m=O.resourcePlayInfo,D=O.previewInfo,v=O.videoUrl,L=this.props.t;return u().createElement("div",{className:Z().helpCenter},v&&u().createElement(I.Z,{type:"link",className:Z()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(v)},L("helpCenter.video")),h&&u().createElement(I.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(h)},L("helpCenter.tutorial")),u().createElement(t.Z,(0,f.Z)({},m,{previewInfo:D})))}}var l=K=>({defaultMenuKey:K.currentRoute.menuKey});g.defaultProps={defaultMenuKey:""};var b=(0,V.$j)(l)((0,E.Z)()(g));function R(K){var O=K.extra,h=localStorage.getItem("dingPersonnel"),m=sessionStorage.getItem("dingPersonnel");return u().createElement(A.Z,null,O,h!=="dingPersonnel"&&m!=="dingPersonnel"&&(0,d.eY)("COMMONEXTRA_HELP_CENTER")&&u().createElement(b,null))}var M=R,$=e(4408);function X(K){var O=(0,_.useState)({helpCenter:(0,d.eY)("HEAD_HELP_CENTER_BUT")}),h=(0,z.Z)(O,1),m=h[0],D=K.pageContainerParams,v=D===void 0?{}:D,L=K.noPadding,N=L===void 0?!1:L,j=K.isPersonal,H=j===void 0?!1:j,ee=K.pageTitle,de=K.className,ce=de===void 0?"":de,c={extra:m.helpCenter?u().createElement(M,{extra:v.extra}):v.extra},w=(0,x.Z)((0,x.Z)({},v),c);return u().createElement("div",{className:"page-container-content ".concat(N?"page-container-noPadding":""," ").concat(H?"page-container-content_personal_background":""," ").concat(ce)},ee&&u().createElement($.Z,{title:ee}),H?u().createElement(o.Z,null,K.children):u().createElement(o.Z,w,K.children))}var ne=X},404:function(me,Q,e){"use strict";e.d(Q,{Z:function(){return K}});var x=e(62029),z=e(57663),_=e(71577),u=e(88986),o=e(12924),i=e.n(o),A=e(91768),f=e(20228),s=e(11382),I=e(34792),E=e(48086),V=e(80991),U=e(49010),S=e(77444),C=e(10237),P=e(37055),Z=e(18329);class n extends i().Component{constructor(){super(...arguments);this.initRefFormik=h=>{this._refFormik=h},this.state={initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}},isLoading:!0},this.getSingleApproval=()=>{var h=this.props.operationId,m=P.ZP.PostAbility.queryAuthApprovels(h);C.WY.get({url:m}).then(D=>{var v=[],L=D.data;L.type==="multilevel"&&L.approvers.map(N=>v.push(N)),this.setState({initialValues:{supervisor:{or:L.type==="or"?[...D.data.approvers[0]]:[],multilevel:v,lead:"",type:L.type}},isLoading:!1})})},this.handleBeforeCreate=()=>{var h=this._refFormik;h.submitForm(),h.runValidations().then(m=>{if(!Object.keys(m).length){var D=h.state.values.supervisor,v=localStorage.getItem("authorityType"),L=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1,N=[],j=[];if(D.type==="multilevel"){var H=D.multilevel;H.forEach(ce=>{var c=[];ce.forEach(w=>{c.push({id:w.id})}),N.push(c)}),L&&v==="1"&&H.forEach(ce=>{var c=[];c.push(ce[0].qyWeChatVo),j.push(c)})}else if(D.type==="or"){var ee=[];D.or.map(ce=>{ee.push({id:ce.id})}),N.push(ee),L&&v==="1"&&(j=[[D.qy_we_chat_vo]])}else N=[],j=[];var de={type:D.type,operation_ids:this.props.operationId,approvers:N,qy_we_approve_users:j};this.submit(de)}})},this.submit=h=>{C.WY.post({url:P.ZP.PostAbility.updateApprover(),data:h}).then(m=>{m.data&&(E.default.success(this.props.t("study.updateSuccess")),this.onCancel())})},this.onCancel=()=>{this.setState({initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}}},()=>{this.props.cancelSettingApprover()})}}componentDidUpdate(h){this.props.visible&&this.props.visible!==h.visible&&this.props.operationId&&(this.setState({isLoading:!0,initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}}}),this.props.isSingle?this.getSingleApproval():this.setState({isLoading:!1}))}render(){var h=this.state,m=h.initialValues,D=h.isLoading,v=this.props,L=v.visible,N=v.t,j=v.createUserId,H=v.isHasTutor;return i().createElement(Z.ZP,{visible:L,title:N("authentication.abilityDetailSecSupervisionTitle"),onCancel:this.onCancel,onOk:this.handleBeforeCreate,size:"medium"},D?i().createElement(s.Z,{size:"large"}):L&&i().createElement("div",{className:"auth-people"},i().createElement(V.J9,{ref:this.initRefFormik,initialValues:m,onSubmit:this.submit,render:ee=>i().createElement(V.l0,{className:"cl-form"},i().createElement(V.gN,{component:U.Z,isHasTutor:H,displayType:"Custom",name:"supervisor",createUserId:j,defaultFieldList:ee.values.supervisor,validate:S.Z.checkSupervisor,mode:"dialog"}))})))}}var t=(0,A.Z)()(n),d=e(22385),g=e(31097),l=e(28216),b=e(36202),R=e(60667);class M extends i().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("personal.practicalName"),dataIndex:"title",key:"title"},{title:this.props.t("authentication.abilityDetailApprover"),dataIndex:"approvers_list",key:"approvers_list",width:250,render:function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],D=Array.isArray(m)?[...m]:[];return i().createElement(g.Z,null,i().createElement("div",{className:"cl-text-ellipsis",style:{width:230}},D.map((v,L)=>Array.isArray(v)?i().createElement(i().Fragment,null,v.map((N,j)=>i().createElement(o.Fragment,{key:v.id},i().createElement(R.Z,{dataType:"userName",value:N.sync_user_id,name:N.name,type:N.source_type||v.sourceType}),j*L!=v.length*D.length-1&&","))):i().createElement(o.Fragment,{key:v.id},i().createElement(R.Z,{dataType:"userName",value:v.sync_user_id,name:v.name,type:v.source_type||v.sourceType}),L!==D.length-1&&","))))}},{title:this.props.t("common.operate"),width:80,key:"operate",render:h=>i().createElement("div",{className:"cl-table__cell-action"},i().createElement("span",{className:"cl-pointer",onClick:()=>this.props.settingApprover(h)},this.props.t("common.edit")))}]}render(){var h=this.props,m=h.list,D=m===void 0?[]:m,v=h.loading,L=h.selectedRowKeys,N=L===void 0?[]:L,j=h.onSelectChange,H=h.toolBarRender,ee={selectedRowKeys:N,onChange:j};return i().createElement("section",{className:"auth-people__content__table"},i().createElement(b.f,{bordered:!0,columns:this.columns,rowSelection:ee,rowKey:"id",dataSource:D,pagination:!1,loading:v,toolBarRender:H,tableUUID:"eebd1b51-6aad-436e-be45-a4fc2e1e858d"}))}}var $=O=>{var h=O.user;return{user:h,qyShield:h.qyShield}},X=(0,l.$j)($)((0,A.Z)()(M));class ne extends i().Component{constructor(){super(...arguments);this.state={params:{entity_type:"",entity_id:""},tableLoading:!0,tableList:[],settingApproverProps:{operationId:[],createUserId:"",isSingle:!1,visible:!1,isHasTutor:this.props.isHasTutor},selectedRowKeys:[]},this.initTableList=()=>{this.setState({tableLoading:!0}),C.WY.post({url:P.ZP.PostAbility.queryAuthWorkList(),data:this.state.params}).then(h=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:h.data.operations})},300)})},this.handleSelectChange=h=>{this.setState({selectedRowKeys:h})},this.multiSettingApprover=()=>{var h=this.state.selectedRowKeys;this.setState(m=>({settingApproverProps:(0,u.Z)((0,u.Z)({},m.settingApproverProps),{},{visible:!0,isSingle:!1,operationId:h})}))},this.settingApprover=h=>{this.setState(m=>({settingApproverProps:(0,u.Z)((0,u.Z)({},m.settingApproverProps),{},{visible:!0,isSingle:!0,operationId:[h.id],createUserId:this.props.createUserId})}))},this.cancelSettingApprover=()=>{this.initTableList(),this.setState(h=>({settingApproverProps:(0,u.Z)((0,u.Z)({},h.settingApproverProps),{},{visible:!1,operationId:[]})})),this.setState({selectedRowKeys:[]})},this.onCancel=()=>{this.props.closeApprovalList()},this.renderRightRow=()=>{var h=this.props.t,m=this.state.selectedRowKeys;return i().createElement("div",{className:"auth-people__content__query"},i().createElement(_.Z,{type:"primary",onClick:this.multiSettingApprover,disabled:m.length===0},h("personal.batchEdit")))}}componentDidUpdate(h){if(this.props.visible&&this.props.visible!==h.visible&&this.props.entityId){var m=this.props,D=m.entityId,v=m.entityType;this.setState({params:{entity_type:v,entity_id:D},tableList:[]},()=>{this.initTableList()})}}render(){var h=this.props,m=h.visible,D=h.t,v=h.isHasTutor,L=this.state,N=L.tableList,j=L.tableLoading,H=L.settingApproverProps,ee=L.selectedRowKeys;return i().createElement(Z.ZP,{visible:m,title:D("authentication.editApprovals"),onCancel:this.onCancel,footer:null,size:"large"},i().createElement("div",{className:"auth-people"},m?i().createElement(i().Fragment,null,i().createElement("div",{className:"auth-people__content"},i().createElement(X,{loading:j,list:N,selectedRowKeys:ee,onSelectChange:this.handleSelectChange,settingApprover:this.settingApprover,toolBarRender:this.renderRightRow}),i().createElement(t,(0,x.Z)({},H,{isHasTutor:v,cancelSettingApprover:this.cancelSettingApprover})))):null))}}var K=(0,A.Z)()(ne)},77444:function(me,Q,e){"use strict";var x=e(6793),z=e(3407),_=(0,x.me)(),u=z.Z[_].authentication.validation;Q.Z={title:o=>(0,x.fy)(o)?(0,x.fy)(o).length>60?u.abilityDetailNameLimit:"":u.abilityDetailNameNull,summary:o=>{var i;return o?(0,x.fy)(o).length>500&&(i=z.Z[_].validation.limitedFiveHundred):i=u.abilityDetailSummaryNull,i},certificate:o=>{var i;return o.id||(i=u.abilityDetailIssueNull),i},checkSupervisor:o=>{var i,A=o.multilevel,f=o.type;if(f==="multilevel")if(A.length<2)i=u.abilityDetailSupervisionNull;else{var s={},I=[];A.forEach((E,V)=>{if(E.length===0){i=(0,x.ZT)("".concat(u.abilityDetailSupervisionStepNull),V+1);return}if(E.length>5){i=(0,x.ZT)("".concat(u.abilityDetailSupervisionStepLimit),V+1);return}E.forEach(U=>{I.push(U)})}),I.forEach(E=>{s[E.id]?i=u.abilityDetailSupervisionRepeat:s[E.id]=!0})}return i}}},45224:function(me,Q,e){"use strict";e.r(Q),e.d(Q,{default:function(){return Ve}});var x=e(62029),z=e(57361),_=e(34792),u=e(48086),o=e(88986),i=e(9754),A=e.n(i),f=e(12924),s=e.n(f),I=e(91768),E=e(28216),V=e(57068),U=e(76651),S=e(72456),C=e(62117),P=e(43358),Z=e(34041),n=e(64262),t=Z.Z.Option;class d extends s().Component{constructor(){super(...arguments);this.state={typeOptions:[{id:"0",name:this.props.t("common.all")},{id:"1",name:this.props.t("common.approved")},{id:"2",name:this.props.t("common.ongoing")},{id:"3",name:this.props.t("common.pending")}]},this.handleTreeSelectChange=r=>{this.props.handleTreeSelectChange(r)},this.handleSelectChange=r=>{this.props.handleSelectChange(r)}}render(){var r=this.state.typeOptions;return s().createElement("div",{className:"auth-people__queryrow"},s().createElement(n.Z,{parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,handleTreeSelectChange:this.handleTreeSelectChange}),s().createElement("div",{className:"auth-people__queryrow__action"},s().createElement(Z.Z,{defaultValue:r[0].id,style:{width:150},onChange:this.handleSelectChange},r.map(a=>s().createElement(t,{value:a.id,key:a.id},a.name)))))}}var g=(0,I.Z)()(d),l=e(57663),b=e(71577),R=e(84391),M=e(48479);class $ extends s().Component{constructor(){super(...arguments);this.handleSearch=(r,a)=>{this.props.handleSearch(r,a)},this.handleExport=()=>{this.props.handleExport()},this.renderActionBtn=()=>s().createElement("div",{className:"auth-people__queryrow__action"},s().createElement(b.Z,{type:"primary",onClick:this.handleExport},s().createElement(R.Z,null)," ",this.props.t("common.exportData")))}render(){var r=this.props.t;return s().createElement("div",{className:"auth-people__queryrow"},s().createElement(M.Z,{onSearch:this.handleSearch,width:"260px",placeholder:r("searchInputPlaceholder.userName")}),this.renderActionBtn())}}var X=(0,I.Z)()($),ne=e(34669),K=e(82833),O=e(37055),h=e(55285);class m extends s().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("authentication.certificationProgress"),dataIndex:"progress",key:"progress",width:200,render:r=>s().createElement("span",null,s().createElement(K.Z,{percent:r}))},{title:this.props.t("common.status"),dataIndex:"statusName",key:"statusName",fixed:"right",width:90}],this.handleTableChange=r=>{this.props.onTableChange(r)}}render(){var r=this.props,a=r.list,p=a===void 0?[]:a,y=r.loading,B=r.paginationParams,F=B===void 0?{}:B,G=r.headerTitle,q=r.toolBarRender,he=(0,o.Z)((0,o.Z)({},O.XE.INITIAL_PAGINATION),F);return s().createElement("section",{className:"auth-people__content__table"},s().createElement(h.Z,{bordered:!0,style:{height:"100%",overflow:"hidden"},headExtra:[{title:this.props.t("common.number"),width:60,dataIndex:"orderId",key:"orderId",fixed:"left"}],columns:this.columns,rowKey:"userId",dataSource:p,pagination:he,loading:y,onChange:this.handleTableChange,headerTitle:G,toolBarRender:q,tableUUID:"7037550b-f58f-4c8e-b440-b880f4c59db9"}))}}var D=(0,I.Z)()(m),v=e(10237),L=e(18329);class N extends s().Component{constructor(){super(...arguments);this.state={params:{keyword:"",status:0,departmentId:"",pageNumber:1,pageSize:20},tableLoading:!0,tableList:[],tableTotal:0},this.initTableList=()=>{var r=this.props.authId;this.setState({tableLoading:!0}),v.WY.get({url:O.ZP.PostAbility.getAbilityPeople(r),params:this.state.params}).then(a=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:a.data.data.list,tableTotal:a.data.data.total})},300)})},this.handleChangPagination=r=>{var a=r.current,p=r.pageSize;this.setState(y=>({params:(0,o.Z)((0,o.Z)({},y.params),{},{pageNumber:a,pageSize:p})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(r=>{this.setState(a=>({params:(0,o.Z)((0,o.Z)({},a.params),{},{pageNumber:1,pageSize:20})}),()=>{r()})}),this.handleTreeSelectChange=r=>{this.resetPagination().then(()=>{this.setState(a=>({params:(0,o.Z)((0,o.Z)({},a.params),{},{departmentId:r})}),()=>{this.initTableList()})})},this.handleSelectChange=r=>{this.resetPagination().then(()=>{this.setState(a=>({params:(0,o.Z)((0,o.Z)({},a.params),{},{status:r})}),()=>{this.initTableList()})})},this.handleSearch=(r,a)=>{this.resetPagination().then(()=>{this.setState(p=>({params:(0,o.Z)((0,o.Z)({},p.params),{},{keyword:a===""?r:"",userIds:a})}),()=>{this.initTableList()})})},this.exportAuthPeople=()=>{var r="",a=this.state.params;Object.keys(a).forEach(y=>{r+="".concat(y,"=").concat(a[y],"&")});var p=this.props.authId;window.location.href="".concat(O.ZP.PostAbility.exportAbilityPeople(p),"?").concat(r,"access_token=").concat(window.localStorage.getItem("token"))},this.onCancel=()=>{this.props.cancelShowAuthPeople()},this.renderLeftRow=()=>s().createElement(g,{handleTreeSelectChange:this.handleTreeSelectChange,handleSelectChange:this.handleSelectChange,handleSearch:this.handleSearch,handleExport:this.exportAuthPeople}),this.renderRightRow=()=>s().createElement(X,{handleTreeSelectChange:this.handleTreeSelectChange,handleSelectChange:this.handleSelectChange,handleSearch:this.handleSearch,handleExport:this.exportAuthPeople})}componentDidUpdate(r){this.props.visible&&this.props.visible!==r.visible&&this.props.authId&&this.setState({params:{keyword:"",status:0,departmentId:"",pageNumber:1,pageSize:20},tableList:[],tableTotal:0},()=>{this.initTableList()})}render(){var r=this.props,a=r.visible,p=r.t,y=this.state,B=y.tableTotal,F=y.tableList,G=y.tableLoading,q=y.params,he={total:B,current:q.pageNumber,pageSize:q.pageSize};return s().createElement(L.ZP,{visible:a,title:p("authentication.certificationApplicant"),onCancel:this.onCancel,footer:null,size:"large"},s().createElement("div",{className:"auth-people"},a?s().createElement(s().Fragment,null,s().createElement("div",{className:"auth-people__content"},s().createElement(D,{loading:G,paginationParams:he,list:F,onTableChange:this.handleChangPagination,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow}))):null))}}var j=(0,I.Z)()(N),H=e(404),ee=e(14781),de=e(53431),ce=e(59250),c=e(13013),w=e(30887),T=e(99210),Y=e(22385),J=e(31097),W=e(71194),k=e(57016),re=e(77576),ue=e(59314),le=e(57254),ve=e(36202),ge=e(1164),Ce=e(30311),Le=e(6793),te=e(60667),ae=e(38642),se=pe=>{var r=pe.advancedSetting;return{themeColor:r.themeColor}};class ie extends s().Component{constructor(){super(...arguments);this.state={isHuaLaiShi:(0,ae.UI)("PRIVACY_HLS_APPROVAL_MANAGE")},this.columns=[{title:this.props.t("authentication.abilityDetailName"),dataIndex:"title",key:"title",onCell:()=>({style:{minWidth:227}})},{title:this.props.t("common.study"),dataIndex:"studyCount",key:"studyCount",width:76,render:(r,a)=>{var p=a.studyCount;return p>0?"".concat(p).concat(this.props.t("common.courseUnit")).concat(this.props.t("common.course")):"/"}},{title:this.props.t("authentication.exam"),dataIndex:"examCount",key:"examCount",width:80,render:(r,a)=>{var p=a.examCount;return p>0?"".concat(p).concat(this.props.t("study.examTimes")):"/"}},{title:this.props.t("setting.practice"),dataIndex:"operationCount",key:"operationCount",width:80,render:(r,a)=>{var p=a.operationCount;return p>0?"".concat(p).concat(this.props.t("study.examTimes")):"/"}},{title:this.props.t("exam.toBeGraded"),dataIndex:"pendingCount",key:"pendingCount",width:76,render:(r,a)=>r>0?s().createElement(Ce.Z,{name:r,onClick:()=>this.props.onShowReadPaper(a)}):0},{title:this.props.t("common.status"),dataIndex:"status",key:"status",width:80,render:(r,a)=>{var p=this.props.shouldRenderBeginOrstop;return s().createElement("span",{className:"update_status"},p?s().createElement(ue.Z,{checkedChildren:this.props.t("common.activatedStred"),unCheckedChildren:this.props.t("common.deactivatedStr"),checked:a.status===1,onChange:y=>this.handleChange({isChecked:y,record:a})}):a.status===1?this.props.t("common.activated"):this.props.t("common.deactivated"))}},{title:this.props.t("common.creator"),dataIndex:"createName",key:"createName",width:76,render:(r,a)=>{var p=a.sync_user_id,y=a.sync_source_type;return s().createElement(te.Z,{dataType:"userName",value:p,name:r,type:y})}},{title:this.props.t("common.updateTime"),dataIndex:"updateTime",key:"updateTime",render:(r,a)=>{var p=a.updateTime;return(0,Le.p6)(p)},width:147},{title:this.props.t("authentication.certificationApplicant"),dataIndex:"qualificationUserCount",key:"qualificationUserCount",width:80,render:(r,a)=>r>0?s().createElement(Ce.Z,{name:r,onClick:()=>this.showRowInfo(a)}):0},{title:this.props.t("common.operate"),width:110,key:"operate",render:r=>this.renderActions({record:r}),onCell:()=>({style:{minWidth:110}})}],this.handleTableChange=(r,a)=>{this.props.onTableChange({current:r,pageSize:a})},this.handleChange=r=>{var a=r.isChecked,p=r.record;this.props.onRowChange({isChecked:a,record:p})},this.showRowInfo=r=>{this.props.onRowShowInfo(r)},this.settingApprover=r=>{this.props.onRowSettingApprover(r)},this.showConfirm=r=>{var a=this;k.Z.confirm({title:this.props.t("authentication.deleteTip"),content:"",onOk(){a.props.deleteItem(r)}})},this.handleMenuClick=(r,a)=>{r==="delete"?this.showConfirm(a.id):r==="editApprovals"&&this.props.onRowEditApprovels(a)},this.renderActions=r=>{var a=r.record,p=this.state.isHuaLaiShi,y=this.props,B=y.shouldRenderConfigure,F=y.shouldRenderDelete,G=y.t,q=s().createElement(T.Z,{onClick:he=>{var Ee=he.key;return this.handleMenuClick(Ee,a)}},B?s().createElement(T.Z.Item,{key:"edit",disabled:a.status===1},a.status===1?s().createElement(J.Z,{title:this.props.t("lecturerPage.editTip")},s().createElement("span",{className:"cl-pointer\u2014forbid cl-disabled"},this.props.t("common.edit"))):s().createElement(ge.Z,{to:"/training/authentication/powerAdd?id=".concat(a.id)},s().createElement("span",{className:"cl-pointer"},this.props.t("common.edit")))):null,F?s().createElement(T.Z.Item,{key:"delete"},s().createElement("span",{className:"cl-pointer"},G("common.delete"))):null,p?null:s().createElement(T.Z.Item,{key:"editApprovals",disabled:a.operationCount===0},s().createElement("span",{className:a.operationCount===0?"cl-disabled":"cl-pointer"},G("authentication.editApprovals"))));return s().createElement("div",{className:"cl-table__cell-action"},s().createElement(ge.Z,{to:"/training/authentication/powerMonitor?id=".concat(a.id)},s().createElement("span",{className:"cl-pointer"},this.props.t("common.monitor"))),s().createElement("span",{className:"cl-pointer-divide"}),s().createElement(c.Z,{overlay:q},s().createElement("span",{className:"cl-pointer"},this.props.t("common.more")," ",s().createElement(le.Z,null))))}}render(){var r=this.props,a=r.list,p=a===void 0?[]:a,y=r.loading,B=r.paginationParams,F=B===void 0?{}:B,G=r.headerTitle,q=r.toolBarRender,he=(0,o.Z)((0,o.Z)({},O.XE.INITIAL_PAGINATION),F);return s().createElement(s().Fragment,null,s().createElement("div",{className:"ability-content-list"},s().createElement(ve.f,{columns:this.columns,rowKey:"id",dataSource:p,pagination:!1,loading:y,headerTitle:G,toolBarRender:q,tableUUID:"1a371bca-cb10-4e15-ab1e-676a9e8598ba"})),s().createElement("div",{className:"ability-pagination-wrapper"},s().createElement(de.Z,(0,x.Z)({},he,{onChange:this.handleTableChange,className:"ability-pagination"}))))}}var Re=(0,E.$j)(se)((0,I.Z)()(ie));function oe(pe){return we.apply(this,arguments)}function we(){return we=(0,z.Z)(A().mark(function pe(r){var a,p,y,B;return A().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return a=r.id,p=r.page_number,y=r.page_size,G.next=3,v.WY.get({url:O.ZP.PostAbility.getPendingExamList(a),params:{page_number:p,page_size:y,is_pending:"true"}});case 3:if(B=G.sent,B.status!==200){G.next=6;break}return G.abrupt("return",{data:{code:"200000",data:(0,o.Z)({},B.data)}});case 6:return G.abrupt("return",B);case 7:case"end":return G.stop()}},pe)})),we.apply(this,arguments)}var ye=e(86726),xe=e(11449),_e=e(47673),be=e(4107),Me=e(67222),Ne={size:"medium",destroyOnClose:!0,maskClosable:!1},Be=be.Z.Search,Se={page_number:1,page_size:10,current:1},Ie={AUTH:"auth",PLAN:"plan",PROJECT:"study_project"},Ue={[Ie.AUTH]:"authentication",[Ie.PLAN]:"learningTask",[Ie.PROJECT]:"project"};class De extends s().Component{constructor(r){var a;super(r);a=this,this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{var p=this.state.selectedRows;p.length===0?this.props.onOk():U.m8.push({pathname:"/training/examination/plan/testPaper",search:V.stringify({list:JSON.stringify(p.map(y=>({userId:y.user_id,planId:y.plan_id}))),from:Ue[this.props.type]})})},this.onKeywordChange=p=>{var y=p.target.value;this.setState({keyword:y})},this.onSearch=function(){var p=(0,z.Z)(A().mark(function y(B){var F,G,q,he,Ee,Te,Ze,Pe;return A().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(F=a.props,G=F.appType,q=F.appId,he=localStorage.getItem("qyWechatBook"),Ee="",Te=G==="wx_app"&&he==="true"&&q==="9005",!(B&&Te)){fe.next=17;break}return fe.prev=5,fe.next=8,(0,Me.F_)(B);case 8:Ze=fe.sent,Pe=Ze.data,Pe.success?Ee=Pe.data:Ee="",fe.next=17;break;case 13:fe.prev=13,fe.t0=fe.catch(5),console.error(fe.t0),Ee="";case 17:Se.page_number=1,a.pagination.current=1,a.setState({keyword:B,userIds:Ee},()=>{a.getWaitUser()});case 20:case"end":return fe.stop()}},y,null,[[5,13]])}));return function(y){return p.apply(this,arguments)}}(),this.getWaitUser=()=>{var p=this.props,y=p.planId,B=p.type,F=O.ZP.PostAbility.waitReadPaperUser(y),G=O.ZP.StudyTaskList.waitReadPaperUser(y),q="";B===Ie.AUTH&&(q=F),B===Ie.PLAN&&(q=G),B===Ie.PROJECT&&(q=G);var he=this.state,Ee=he.keyword,Te=he.userIds,Ze={keyword:Te===""?Ee:"",page_number:Se.page_number,page_size:Se.page_size,source_type:B,userIds:Te};v.WY.get({url:q,params:Ze}).then(Pe=>{this.setState({userList:Pe.data.list||Pe.data.page_info.list,userTotal:parseInt(Pe.data.total||Pe.data.page_info.total),authScope:{visible:Pe.data.authority_range==="true"}})})},this.pageChange=p=>{Se.page_number=p,this.pagination.current=p,this.getWaitUser()},this.selectRow=(p,y)=>{this.setState({selectedRows:y})},this.getTableColumn=()=>{var p=this.props.t,y=[{title:p("component.paperName"),dataIndex:"paper_name",key:"paper_name",width:220,render:(B,F)=>{var G=F.paper_name;return s().createElement(J.Z,{title:G},s().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},G))}},{title:p("component.paperStatus"),dataIndex:"paper_status",key:"paper_status",width:90,render:(B,F)=>{var G=F.paper_status;return s().createElement("div",{style:{color:"#f7625a"}},G)}}];return y},this.renderRightRow=()=>{var p=this.props.t;return s().createElement(Be,{onSearch:this.onSearch,onChange:this.onKeywordChange,className:"wait-read-paper-top-search",placeholder:p("common.searchPlaceholder"),allowClear:!0})},this.renderModalTitle=()=>{var p=this.props.t,y=this.state.authScope;return s().createElement("div",null,p("component.gradingList"),y.visible&&s().createElement("span",{className:"wait-read-paper-title-auth"},p("common.authScopeTip")))},this.state={keyword:"",userIds:"",userList:[],userTotal:0,selectedRows:[],authScope:{visible:!1}}}componentDidMount(){var r=this.props.t;this.tableColumns=this.getTableColumn(),this.pagination={current:1,defaultPageSize:10,size:"small",showSizeChanger:!1,onChange:this.pageChange,showTotal:a=>"".concat(r("component.totalLabel")).concat(a).concat(r("component.itemLabel"))}}componentDidUpdate(r){var a=this.props.visible;r.visible!==a&&a&&(Se.page_number=1,Se.page_size=10,this.setState({keyword:"",userIds:""},()=>{this.getWaitUser()}))}componentWillUnmount(){Se.page_number=1,Se.page_size=10}render(){var r=this.state,a=r.userList,p=r.userTotal,y=r.selectedRows,B=this.props.t;return s().createElement(L.ZP,(0,x.Z)({},Ne,{title:this.renderModalTitle(),okText:y.length>0?B("component.gradeing"):B("common.ok"),visible:this.props.visible,onCancel:this.onCancel,onOk:this.onOk}),s().createElement("div",{className:"wait-read-paper"},s().createElement("div",{className:"wait-read-paper-table"},s().createElement(h.Z,{dataSource:a,columns:this.tableColumns,bordered:!0,rowSelection:{onChange:this.selectRow},rowKey:F=>F.id,pagination:!1,toolBarRender:this.renderRightRow,tableUUID:"b980e804-14ce-44c0-ad41-fd6bbe1a36d3"}),s().createElement(de.Z,(0,x.Z)({className:"wait-read-paper-table-page"},this.pagination,{total:p})))))}}De.defaultProps={visible:!1,planId:"",type:Ie.PLAN,onCancel:()=>{},onOk:()=>{}};var Fe=(0,E.$j)(pe=>({appType:pe.user.appType,appId:pe.user.appId}))((0,I.Z)()((0,f.memo)(De))),Ke=e(4408),$e=e(66123),We=e(98233),je=pe=>({userInfo:pe.user}),Oe={getTableList:O.ZP.PostAbility.getTableList,updateAbilityStatus:O.ZP.PostAbility.updateAbilityStatus,updateCustomAbilityStatus:O.ZP.PostAbility.updateCustomAbilityStatus,deleteItem:O.ZP.PostAbility.deleteItem,deleteCustomItem:O.ZP.PostAbility.deleteCustomItem};class Ae extends s().Component{constructor(){var r;super(...arguments);r=this,this.state={allowActions:(0,ye.V9)("ability",this.props.userInfo.modules),params:{keyword:"",pageNumber:1,pageSize:20,status:"0",only_see_me:!1},radioList:[{name:this.props.t("common.all"),value:"0"},{name:this.props.t("common.activated"),value:"1"},{name:this.props.t("common.deactivated"),value:"2"}],tableLoading:!0,tableList:[],tableTotal:0,showAuthPeopleProps:{authId:"",visible:!1},approvalListProps:{entityType:"qualification",entityId:"",createUserId:"",visible:!1},pendingListConfig:{visible:!1,uuid:"6598ba4b-77fe-6fd8-b42a-d06b4a2271c2",hasTitleLink:!1},popOverProps:[{typeText:this.props.t("authentication.newCertification"),contentText:this.props.t("newUserGuidance.createCertificationIntro"),buttonText:this.props.t("lecturerPage.know")}],isHuaLaiShi:(0,ae.UI)("PRIVACY_HLS_APPROVAL_MANAGE")},this.onChangeOnlySeeMe=a=>{var p=this.state.params,y=a;this.setState({params:(0,o.Z)((0,o.Z)({},p),{},{pageNumber:1,only_see_me:y})},()=>{this.initTableList()})},this.onShowRowInfo=a=>{this.setState(p=>({showAuthPeopleProps:(0,o.Z)((0,o.Z)({},p.showAuthPeopleProps),{},{visible:!0,authId:a.id})}))},this.onRowEditApproval=a=>{this.setState(p=>({approvalListProps:(0,o.Z)((0,o.Z)({},p.approvalListProps),{},{visible:!0,entityId:a.id,createUserId:a.createUser})}))},this.initTableList=()=>{this.setState({tableLoading:!0}),v.WY.get({url:Oe.getTableList(),params:this.state.params}).then(a=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:a.data.list,tableTotal:a.data.total})},300)})},this.handleQueryRowRadiosChange=a=>{this.resetPagination().then(()=>{this.setState(p=>({params:(0,o.Z)((0,o.Z)({},p.params),{},{status:a})}),()=>{this.initTableList()})})},this.handleQueryRowSearch=a=>{this.resetPagination().then(()=>{this.setState(p=>({params:(0,o.Z)((0,o.Z)({},p.params),{},{keyword:a})}),()=>{this.initTableList()})})},this.handleChangPagination=a=>{var p=a.current,y=a.pageSize;this.setState(B=>({params:(0,o.Z)((0,o.Z)({},B.params),{},{pageNumber:p,pageSize:y})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(a=>{this.setState(p=>({params:(0,o.Z)((0,o.Z)({},p.params),{},{pageNumber:1,pageSize:20})}),()=>{a()})}),this.closeApprovalList=()=>{this.setState(a=>({approvalListProps:(0,o.Z)((0,o.Z)({},a.approvalListProps),{},{visible:!1,entityId:"",createUserId:""})}))},this.cancelShowAuthPeople=()=>{this.setState(a=>({showAuthPeopleProps:(0,o.Z)((0,o.Z)({},a.showAuthPeopleProps),{},{visible:!1,authId:""})}))},this.handleRowChange=a=>{var p=a.isChecked,y=a.record,B=this.state.isHuaLaiShi;v.WY.post({url:B?Oe.updateCustomAbilityStatus(y.id):Oe.updateAbilityStatus(y.id),params:{status:p?"1":"2"}}).then(F=>{F.data.code===0&&(u.default.success(this.props.t("study.updateSuccess")),this.initTableList())})},this.deleteItem=a=>{v.WY.post({url:this.state.isHuaLaiShi?Oe.deleteCustomItem(a):Oe.deleteItem(a),params:{currentAuthId:a}}).then(()=>{u.default.success(this.props.t("personal.removeSuccess")),this.initTableList()})},this.onShowReadPaper=function(){var a=(0,z.Z)(A().mark(function p(y){var B,F;return A().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(!(y.pendingCount===0||y.course_mapping_list.length===1&&y.readingOperation!=="has_operation")){q.next=3;break}return u.default.warning(r.props.t("examination.AbilityCannotMark")),q.abrupt("return");case 3:if(y.course_mapping_list.length!==1){q.next=10;break}return q.next=6,(0,We.Md)(y.course_mapping_list[0].courseType===15,{id:y.course_mapping_list[0].courseId,taskId:y.id,status:"pending",from:"projectNew"});case 6:B=q.sent,y.course_mapping_list[0].courseType===15?ge.Z.targetTo({path:B}):U.m8.push(B),q.next=14;break;case 10:F=r.state.pendingListConfig,F.visible=!0,F.id=y.id,r.setState({pendingListConfig:F});case 14:case"end":return q.stop()}},p)}));return function(p){return a.apply(this,arguments)}}(),this.getPendingPaperList=a=>oe((0,o.Z)({},a)),this.handlePendingCancel=()=>{var a=this.state.pendingListConfig;a.visible=!1,a.id="",this.setState({pendingListConfig:a})},this.renderLeftRow=()=>{var a=V.parse(U.m8.location.search),p=a.renderGuide,y=p===void 0?!1:p,B=this.state.popOverProps,F=this.props.t;return s().createElement(S.Z,{actionText:F("authentication.newCertification"),showBtn:!0,tabLink:"/training/authentication/powerAdd",popOverProps:B,renderGuide:y})},this.renderRightRow=()=>{var a=this.props.t,p=this.state.radioList;return s().createElement(C.Z,{showCheckbox:!0,onCheckboxChange:this.onChangeOnlySeeMe,radioList:p,onRadiosChange:this.handleQueryRowRadiosChange,onSearch:this.handleQueryRowSearch,inputPlaceholder:a("searchInputPlaceholder.ability")})}}componentDidMount(){this.initTableList()}render(){var r=this.state,a=r.tableTotal,p=r.tableList,y=r.tableLoading,B=r.params,F=r.allowActions,G=r.showAuthPeopleProps,q=r.approvalListProps,he=r.pendingListConfig,Ee={total:a,current:B.pageNumber,pageSize:B.pageSize};return s().createElement(xe.Z,{pageContainerParams:{header:{title:this.props.t("leftMenuLists.jobCertification")}}},s().createElement(Ke.Z,{title:this.props.t("leftMenuLists.jobCertification")}),s().createElement("div",{className:"certification-list sticky-table"},s().createElement("div",{className:"certification-list__content",ref:Te=>{this.tableRef=Te}},s().createElement(Re,{loading:y,paginationParams:Ee,list:p,onTableChange:this.handleChangPagination,onRowChange:this.handleRowChange,onRowShowInfo:this.onShowRowInfo,onRowEditApprovels:this.onRowEditApproval,onShowReadPaper:this.onShowReadPaper,deleteItem:this.deleteItem,shouldRenderConfigure:(0,ye.H3)("configure",F),shouldRenderDelete:(0,ye.H3)("delete",F),shouldRenderBeginOrstop:(0,ye.H3)("beginOrstop",F),headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow}),s().createElement(j,(0,x.Z)({},G,{cancelShowAuthPeople:this.cancelShowAuthPeople})),s().createElement(H.Z,(0,x.Z)({},q,{isHasTutor:!0,closeApprovalList:this.closeApprovalList})),he.visible&&s().createElement($e.t,(0,x.Z)({},he,{getList:this.getPendingPaperList,onCancel:this.handlePendingCancel})))))}}Ae.defaultProps={prefixCls:"certification-list"};var Ve=(0,E.$j)(je)((0,I.Z)()(Ae))},72456:function(me,Q,e){"use strict";var x=e(49111),z=e(19650),_=e(57663),u=e(71577),o=e(12924),i=e.n(o),A=e(28216),f=e(91768),s=e(84391),I=e(90631),E=e(49101),V=e(76651),U=e(31945),S=e(1164),C=e(51697),P=n=>{var t=n.user,d=n.currentRoute,g=n.advancedSetting;return{currentPath:d.path,allAuthRoutes:d.allAuthRoutes,userLng:t.lng,themeColor:g.themeColor,qyShield:t.qyShield}};class Z extends i().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var t=this.props.tabLink;V.m8.push(t)},this.renderActionBtn=()=>{var t=this.props,d=t.prefixCls,g=t.actionText,l=t.t,b=t.tabLink,R=t.showBtn,M=t.renderActionBtn,$=t.newPage,X=t.popOverProps,ne=X===void 0?[]:X,K=t.renderGuide,O=K===void 0?!1:K,h=t.showDownloadBtn,m=h===void 0?!1:h,D=t.showImportBtn,v=D===void 0?!1:D,L=t.showCreateBtn,N=L===void 0?!0:L,j=t.rowReverse,H=j===void 0?!1:j,ee="".concat(d,"__action");if(!R&&M&&typeof M=="function")return i().createElement("div",{className:ee},M());if(!R||!g)return null;var de=ne.length?ne[0].contentText:"";return i().createElement("div",{className:"".concat(ee," ").concat(H&&"row-reverse")},i().createElement(z.Z,{size:16},m&&i().createElement(u.Z,{icon:i().createElement(s.Z,null),onClick:this.handleDownload},l("common.exportData")),v&&i().createElement(u.Z,{icon:i().createElement(I.Z,null),onClick:this.handleImport},l("exam.importTemplate")),N&&$&&i().createElement(S.Z,{to:b},i().createElement(C.Z,{visible:de&&O,placement:"topLeft",title:de},i().createElement(u.Z,{type:"primary",id:"create-project-button",icon:i().createElement(E.Z,null)},g))),N&&!$&&i().createElement(u.Z,{type:"primary",id:"create-project-button",icon:i().createElement(E.Z,null),onClick:this.handleCreate},g)))},this.renderQueryRow=()=>{var t=this.props,d=t.queryRowParams,g=t.queryRowList,l=t.queryRowSelectedCourseIds,b=t.queryRowSelectedProjectIds,R=t.queryRowOnForceRender,M=t.queryRowOnClassifyChange,$=t.queryRowOnTypeChange,X=t.queryRowOnCourseTypeChange,ne=t.queryRowAllowActions,K=t.showNum,O=K===void 0?1:K;return i().createElement(U.Z,{params:d,list:g,selectedCourseIds:l,selectedProjectIds:b,onForceRender:R,onClassifyChange:M,onTypeChange:$,onCourseTypeChange:X,allowActions:ne,showNum:O,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var t=this.props,d=t.t,g=t.extraBtnSelectedRowKeys,l=t.extraBtnHandleMultiVisibleRange;return i().createElement(u.Z,{disabled:g.length===0,onClick:l},d("courseManage.setTheVisibility"))}}render(){var t=this.props,d=t.prefixCls,g=t.wrapCls,l=t.showRenderQueryRow,b=t.showRendeExtraBtn;return i().createElement(i().Fragment,null,i().createElement("div",{className:"render_other"},i().createElement("header",{className:"".concat(d," ").concat(g)},i().createElement("section",{className:"".concat(d,"__radiocol")},this.renderActionBtn(),l&&this.renderQueryRow(),b&&this.rendeExtraBtn()))))}}Z.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},Q.Z=(0,A.$j)(P)((0,f.Z)()(Z))},62117:function(me,Q,e){"use strict";var x=e(63185),z=e(9676),_=e(43358),u=e(34041),o=e(88983),i=e(47933),A=e(12924),f=e.n(A),s=e(28216),I=e(91768),E=e(48479),V=e(2971),U=e(45601),S=e(7249),C=Z=>{var n=Z.user,t=Z.currentRoute,d=Z.advancedSetting;return{currentPath:t.path,allAuthRoutes:t.allAuthRoutes,userLng:n.lng,themeColor:d.themeColor,appType:n.appType,appId:n.appId}};class P extends f().Component{constructor(n){super(n);this.setPlaceholder=()=>{var t=this.props,d=t.currentPath,g=t.allAuthRoutes,l=t.userLng,b=this.state.language,R=g[d],M=this.props,$=M.appType,X=M.appId,ne=localStorage.getItem("qyWechatBook"),K=$==="wx_app"&&ne==="true"&&X==="9005";if(!!R){var O=b[l].searchInputPlaceholder,h="";R.menuKey==="studyTemplate"||R.menuKey==="examTemplate"?h=O.template:R.menuKey==="employee"||R.menuKey==="obligatory"||R.menuKey==="elective"||R.menuKey==="plan"||R.menuKey==="evaluation"||R.menuKey==="myEvaluationPlan"?h=O.task:R.menuKey==="studyProject"?h=K?O.byProjectName:O.byProjectNameOrCreator:R.menuKey==="management"?h=K?O.byTaskName:O.byTaskNameOrCreator:h=O[R.menuKey],this.setState({currentPlaceholder:h})}},this.handleRadiosChange=t=>{this.props.onRadiosChange(t.target.value)},this.handleSelectChange=t=>{this.props.onSelectChange(t)},this.handleSearch=(t,d)=>{this.props.onSearch(t,d)},this.handleChange=t=>{this.props.onCheckboxChange(t.target.checked)},this.renderRadios=()=>{var t=this.props,d=t.prefixCls,g=t.radioList,l=t.defaultRadioValue,b=t.radioValue;if(!g.length)return null;var R=l||g[0].value,M="".concat(d,"__radios");return f().createElement("div",{className:M},typeof b!="undefined"?f().createElement(i.ZP.Group,{defaultValue:R,value:b,onChange:this.handleRadiosChange},g.map($=>f().createElement(i.ZP.Button,{key:$.value,value:$.value},$.name))):f().createElement(i.ZP.Group,{defaultValue:R,onChange:this.handleRadiosChange},g.map($=>f().createElement(i.ZP.Button,{key:$.value,value:$.value},$.name))))},this.renderSelect=()=>{var t=this.props,d=t.prefixCls,g=t.selectList,l=t.defaultSelectValue;if(!g.length)return null;var b=l||g[0].value,R="".concat(d,"__select");return f().createElement("div",{className:R},f().createElement(u.Z,{defaultValue:b,onChange:this.handleSelectChange,style:{minWidth:100}},g.map(M=>f().createElement(u.Z.Option,{key:M.value,value:M.value},M.name))))},this.renderOther=()=>{var t=this.props,d=t.prefixCls,g=t.renderOther,l=t.showOther,b="".concat(d,"__other");if(l&&g&&typeof g=="function")return f().createElement("div",{className:b},g())},this.renderCheckbox=()=>{var t=this.props,d=t.prefixCls,g=t.t,l=t.label,b=t.showCheckbox,R=t.renderActionSelect,M="".concat(d,"__checkbox");return!b&&R&&typeof R=="function"?f().createElement("div",{className:M},R()):b?f().createElement("div",{className:M},f().createElement(z.Z,{onChange:this.handleChange},l||g("common.myCreated"))):null},this.renderSearch=()=>{var t=this.props,d=t.prefixCls,g=t.showSearch,l=t.inputPlaceholder,b=t.maxLength,R=b===void 0?400:b,M=t.value,$="".concat(d,"__search");if(!g)return null;var X=this.state.currentPlaceholder;return l?f().createElement("div",{className:$},f().createElement(E.Z,{onSearch:this.handleSearch,placeholder:l,width:272,maxLength:R})):f().createElement("div",{className:$},f().createElement(E.Z,{onSearch:this.handleSearch,placeholder:X,width:272,maxLength:R,value:M}))},this.renderSearchOther=()=>{var t=this.props.renderSearchOther;return t?t():null},this.state={language:{zh_cn:U.Z,en_us:V.Z,zh_hk:S.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(n){n.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var n=this.props,t=n.prefixCls,d=n.wrapCls,g=n.showRenderRadios,l=g===void 0?!0:g,b=n.showRenderSelect;return f().createElement(f().Fragment,null,f().createElement("div",{className:"render_other"},this.renderOther(),f().createElement("header",{className:"".concat(t," ").concat(d)},f().createElement("section",{className:"".concat(t,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),l&&this.renderRadios(),b&&this.renderSelect(),this.renderSearch()))))}}P.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},Q.Z=(0,s.$j)(C)((0,I.Z)()(P))},31945:function(me,Q,e){"use strict";e.d(Q,{Z:function(){return de}});var x=e(88983),z=e(47933),_=e(20228),u=e(11382),o=e(62029),i=e(30887),A=e(99210),f=e(59250),s=e(13013),I=e(57663),E=e(71577),V=e(63185),U=e(9676),S=e(71194),C=e(57016),P=e(88986),Z=e(34792),n=e(48086),t=e(43358),d=e(34041),g=e(12924),l=e.n(g),b=e(28216),R=e(91768),M=e(57254),$=e(18329);class X extends l().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var c=this.props,w=c.visible,T=c.courseList,Y=c.t;return l().createElement($.ZP,{visible:w,title:Y("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},l().createElement("div",{className:"referenceWithOtherCourses"},l().createElement("div",{className:"referenceWithOtherCourses__tip"},Y("course.deleteCourseTip")),T.map((J,W)=>l().createElement("div",{className:"referenceWithOtherCourses__item",key:W},T.length>1?"".concat(W+1,"\u3001"):null," ",J))))}}var ne=(0,R.Z)()(X),K=e(10237),O=e(63848),h=e(58546),m=e(30389),D=e(54792),v=e(86726),L=e(37055),N=d.Z.Option,j={setClassify:L.ZP.CourseManageList.setClassify,setScore:L.ZP.CourseManageList.setScore,setBatchEmployee:L.ZP.CourseManageList.setBatchEmployee,deleteCourse:L.ZP.CourseManageList.deleteCourse,exportCourseView:L.ZP.CourseManageList.exportCourseView,syncCourse:L.ZP.CourseManageList.syncCourse},H=ce=>({qyShield:ce.user.qyShield});class ee extends l().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=c=>{this.props.onClassifyChange(c)},this.handleChangeType=c=>{this.props.onTypeChange(c)},this.handleChangeCourseType=c=>{this.props.onCourseTypeChange(c)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=c=>{var w=c.node,T=this.props,Y=T.selectedCourseIds,J=T.selectedProjectIds,W=T.onForceRender,k=T.t,re=w.id;re&&K.qg.post({url:j.setClassify(),data:{course_ids:Y.join(","),project_ids:J.join(","),classify_id:re}}).then(()=>{n.default.success(k("course.setCourseClassifySuccess")),W()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(c=>({scoreProps:(0,P.Z)((0,P.Z)({},c.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(c=>({scoreProps:(0,P.Z)((0,P.Z)({},c.scoreProps),{},{visible:!1})}))},this.handleScoreOk=c=>{var w=c.value;if(w===0){this.handleScoreCancel();return}var T=this.props,Y=T.selectedCourseIds,J=T.selectedProjectIds,W=T.onForceRender,k=T.t;K.qg.post({url:j.setScore(),data:{course_ids:Y.join(","),project_ids:J.join(","),credit:w}}).then(()=>{n.default.success(k("course.setCourseScoreSuccess")),W()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(c=>({employeeProps:(0,P.Z)((0,P.Z)({},c.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=c=>{var w=this.props,T=w.selectedCourseIds,Y=w.selectedProjectIds,J=w.onForceRender,W=w.t,k=c.isAll,re=c.departmentIds,ue=c.groupIds,le=c.postIds,ve=c.userIds,ge=c.qy_we_chat_vo;K.WY.post({url:j.setBatchEmployee(),data:{course_ids:T.join(","),project_ids:Y.join(","),department_ids:re,group_ids:ue,is_all:k,post_ids:le,user_ids:ve,qy_we_chat_vo:ge}}).then(()=>{n.default.success(W("personal.batchSetRangeSuccess")),J()}),this.handleEmployeeCancel()},this.showReferenceCourseList=c=>{this.setState(w=>({showReferenceCourseListProps:(0,P.Z)((0,P.Z)({},w.showReferenceCourseListProps),{},{visible:!w.showReferenceCourseListProps.visible,courseList:c||[]})}))},this.actionDelete=()=>{var c=this.props,w=c.selectedCourseIds,T=c.selectedProjectIds,Y=c.list,J=c.onForceRender,W=c.t,k=0,re=0,ue=[];if(Y.forEach(le=>{w.includes(le.course_id)&&(le.reference_plan_count>0&&(re+=1),le.reference_plan_count>0&&ue.push(le.title),le.can_delete==="true"&&(k+=1))}),re>0)this.showReferenceCourseList(ue);else if(k!==w.length)n.default.warning(W("personal.deletePlatformCourseTip"));else{if(T.length>0){n.default.warning(W("personal.deleteProjectCourseTip"));return}C.Z.confirm({title:W("common.tip"),content:W("common.confirmDeleteTitle"),onOk(){K.qg.post({url:j.deleteCourse(),data:{enterpriseId:L.ZP.enterpriseId,ids:w.join(","),project_ids:T.join(",")}}).then(le=>{var ve=le.data,ge=ve.code,Ce=ve.msg;n.default["".concat(ge===0?"success":"warning")](Ce),ge===0&&J()})}})}},this.actionSyncSetting=()=>{this.setState(c=>({asyncProps:(0,P.Z)((0,P.Z)({},c.asyncProps),{},{visible:!0})}))},this.onAsyncChange=c=>{this.setState(w=>({asyncProps:(0,P.Z)((0,P.Z)({},w.asyncProps),{},{value:c.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var c=this.props,w=c.selectedCourseIds,T=c.selectedProjectIds,Y=c.onForceRender,J=c.t,W=this.state.asyncProps;K.qg.post({url:j.syncCourse(),data:{course_ids:w.join(","),project_ids:T.join(","),syncProgress:W.value}}).then(k=>{var re=k.data,ue=re.code,le=re.msg;ue===0?(n.default.success(J("setting.setUpSucceed")),Y()):n.default.warning(le)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var c=this.props,w=c.selectedCourseIds,T=c.selectedProjectIds,Y=c.onForceRender,J=c.t;if(w.concat(T).length>20){n.default.warning(J("courseManage.exportMoreTip"));return}var W=j.exportCourseView(),k={course_Ids:w.join(","),project_Ids:T.join(",")};K.WY.get({url:W,params:k}).then(re=>{re.data.code===200&&n.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),Y(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var c=L.ZP.downLoadCenter.getDownLoadingCount();K.WY.get({url:c,params:{}}).then(w=>{sessionStorage.setItem("downloadingCount",w.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:w.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=c=>{this.props.onCheckboxChange(c.target.checked)},this.handleSharingQueryRowCheckboxChange=c=>{this.props.onSharingCheckboxChange(c.target.checked)},this.renderCondition=()=>{var c=this.props,w=c.prefixCls,T=c.params,Y=c.qyShield,J=c.t,W=T.classify_id?T.classify_id.split(","):[];return l().createElement("div",{className:"".concat(w,"__condition")},this.props.extraDom&&this.props.extraDom(),l().createElement(O.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:W,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),l().createElement(d.Z,{value:T.type,className:"cl-search-normal-width",onChange:this.handleChangeType},l().createElement(N,{value:""},this.props.t("courseManage.allOrigin")),l().createElement(N,{value:"original"},this.props.t("courseManage.originalCourse")),l().createElement(N,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),l().createElement(N,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:l().createElement(d.Z,{value:T.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},l().createElement(N,{value:"all"},this.props.t("courseManage.allType")),l().createElement(N,{value:"course"},this.props.t("common.courseLabel")),l().createElement(N,{value:"microCourse"},this.props.t("common.microCourse")),l().createElement(N,{value:"project"},this.props.t("leftMenuLists.studyProject"))),l().createElement(U.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},J("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&Y==="false"?l().createElement(U.Z,{onChange:this.handleSharingQueryRowCheckboxChange},J("common.sharing")):null)},this.renderActions=()=>{var c=this.props,w=c.prefixCls,T=c.selectedCourseIds,Y=c.selectedProjectIds,J=c.showNum,W=J===void 0?1:J,k=this.props.allowActions,re=(0,v.H3)("delete",k),ue=(0,v.H3)("adjustment_classification",k),le=(0,v.H3)("set_visible",k),ve=(0,v.H3)("export",k),ge=(0,v.H3)("set_score",k),Ce=(0,v.H3)("progressSync",k),Le=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:ue},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:ve},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:ge},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:le},{name:this.props.t("common.delete"),type:"actionDelete",isShow:re},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:Ce}],te=Le.filter(ie=>ie.isShow),ae=[],se=[];if(te.length)W?(ae=[...te.slice(0,W)],se=[...te.slice(W)]):se=[...te];else return null;return l().createElement("div",{className:"".concat(w,"__action")},ae.map(ie=>l().createElement(E.Z,{style:{marginRight:"8px"},key:ie.type,disabled:!(T.length+Y.length),onClick:this[ie.type]},ie.name)),se.length?l().createElement(s.Z,{disabled:!(T.length+Y.length),overlay:this.renderMoreButton({buttons:se})},l().createElement(E.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",l().createElement(M.Z,null))):"")}}renderMoreButton(c){var w=c.buttons,T=this.props,Y=T.selectedCourseIds,J=T.selectedProjectIds;return l().createElement(A.Z,{onClick:W=>{var k=W.key;this[k]()}},w.map(W=>W.isShow?l().createElement(A.Z.Item,{key:W.type,disabled:!(Y.length+J.length)},l().createElement("span",{className:"cl-pointer"},W.name)):null))}render(){var c=this.props,w=c.prefixCls,T=c.t,Y=c.showRenderCondition,J=Y===void 0?!0:Y,W=c.showRenderActions,k=W===void 0?!0:W,re=this.state,ue=re.classifyProps,le=re.scoreProps,ve=re.employeeProps,ge=re.showReferenceCourseListProps,Ce=re.asyncProps;return l().createElement("div",{className:w},J&&this.renderCondition(),k&&this.renderActions(),l().createElement(h.Z,(0,o.Z)({},ue,{title:T("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),l().createElement(D.Z,(0,o.Z)({},le,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),ve.visible&&l().createElement(m.Z,(0,o.Z)({},ve,{title:T("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:T("component.chooseVisibleScope")},isLoading:!ve.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),Ce.visible&&l().createElement($.ZP,{wrapClassName:"cl-async-selector-modal",visible:Ce.visible,title:T("common.scheduleSyncSetting"),okText:T("common.ok"),cancelText:T("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},Ce.visible?l().createElement("div",{className:"".concat(w,"__async")},l().createElement("p",null," ",T("common.scheduleSyncSettingTip")),l().createElement(z.ZP.Group,{onChange:this.onAsyncChange,value:Ce.value},l().createElement(z.ZP,{value:0},T("common.outSync")),l().createElement(z.ZP,{value:1},T("common.synchronization")))):l().createElement(u.Z,{size:"large"})),l().createElement(ne,(0,o.Z)({},ge,{showReferenceCourseList:this.showReferenceCourseList})))}}ee.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var de=(0,R.Z)()((0,b.$j)(H)(ee))},67479:function(me,Q,e){"use strict";e.d(Q,{D:function(){return f},W:function(){return I}});var x=e(57361),z=e(9754),_=e.n(z),u=e(57068),o=e(31916),i=e(38642),A=e(5430);function f(E){return s.apply(this,arguments)}function s(){return s=(0,x.Z)(_().mark(function E(V){var U,S,C,P,Z;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.uH)();case 3:if(U=t.sent,U!=="old"){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,(0,o.fP)(V);case 8:if(S=t.sent,C=S.data,P=C.code,Z=C.data,P!=="200000"){t.next=14;break}return t.abrupt("return",Z.exam_type==="new");case 14:t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",t.t0),t.abrupt("return",!1);case 20:case"end":return t.stop()}},E,null,[[0,16]])})),s.apply(this,arguments)}var I={examing:function(){var E=(0,x.Z)(_().mark(function U(S){var C,P,Z;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return C="",P=S.pageFrom==="ding_myExamTask"?(0,i.lz)(A.ZP.enterpriseId,"student"):"",t.next=4,f(S.exam_id);case 4:return Z=t.sent,Z?C="".concat(P,"/training/examination/new-exam/examing?").concat(u.stringify(S)):C="".concat(P,"/training/examination/exam/personal?").concat(u.stringify(S)),t.abrupt("return",C);case 7:case"end":return t.stop()}},U)}));function V(U){return E.apply(this,arguments)}return V}(),parse:E=>"/training/examination/new-exam/parse?".concat(u.stringify(E)),examData:E=>"/training/examination/exam-data?exam_id=".concat(E.exam_id,"&task_id=").concat(E.task_id),marking:E=>"/training/examination/new-exam/marking?".concat(u.stringify(E))}},98233:function(me,Q,e){"use strict";e.d(Q,{nn:function(){return A},OV:function(){return I},Md:function(){return V},uk:function(){return i}});var x=e(57361),z=e(9754),_=e.n(z),u=e(57068),o=e(67479),i={edit:S=>"/training/learning/project/add?".concat(u.stringify(S)),monitorDetail:S=>{var C=S.id,P=S.projectId,Z=S.origin,n=S.tab;return"/training/trainingProject/monitor?id=".concat(C,"&projectId=").concat(P,"&origin=").concat(Z,"&tab=").concat(n)},traineeView:S=>"/training/trainingProject/traineeView?".concat(u.stringify(S)),manageView:S=>"/training/trainingProject/manageView?".concat(u.stringify(S)),previewView:S=>"/training/trainingProject/previewView?".concat(u.stringify(S))};function A(S){var C=S.origin,P=S.search,Z=P===void 0?"":P,n={project:"/knowledgeBase/project/examination/newPlan/detail?".concat(Z),learning:"/training/learning/examination/newPlan/detail?".concat(Z),employee:"/training/employee/examination/newPlan/detail?".concat(Z),exam:"/training/examination/newPlan/detail?".concat(Z)};return n[C]||"/training/examination/newPlan/detail?".concat(Z)}function f(S,C){if(S){var P=u.stringify({id:C.id,title:C.title,origin:C.taskType,taskId:C.projectId});return A({origin:C.taskType,search:P})}var Z=u.stringify({id:C.id,taskId:C.taskId,from:C.from,taskType:C.taskType,projectId:C.projectId});return"/training/learning/project/monitor/exam?".concat(Z)}function s(S,C){return S?o.W.marking({exam_id:C.id,status:C.status,markScene:"manage"}):"/training/examination/plan/testPaper?id=".concat(C.id,"&from=").concat(C.from,"&taskId=").concat(C.taskId)}function I(){return E.apply(this,arguments)}function E(){return E=(0,x.Z)(_().mark(function S(){var C,P,Z,n=arguments;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(C=n.length>0&&n[0]!==void 0?n[0]:"unKnow",P=n.length>1?n[1]:void 0,C!=="unKnow"){d.next=7;break}return d.next=5,(0,o.D)(P.id);case 5:return Z=d.sent,d.abrupt("return",f(Z,P));case 7:return d.abrupt("return",f(C,P));case 8:case"end":return d.stop()}},S)})),E.apply(this,arguments)}function V(){return U.apply(this,arguments)}function U(){return U=(0,x.Z)(_().mark(function S(){var C,P,Z,n=arguments;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(C=n.length>0&&n[0]!==void 0?n[0]:"unKnow",P=n.length>1?n[1]:void 0,C!=="unKnow"){d.next=7;break}return d.next=5,(0,o.D)(P.id);case 5:return Z=d.sent,d.abrupt("return",s(Z,P));case 7:return d.abrupt("return",s(C,P));case 8:case"end":return d.stop()}},S)})),U.apply(this,arguments)}}}]);
