(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3257],{30311:function(ue,F,e){"use strict";var _=e(22385),Y=e(31097),G=e(12924),p=e.n(G),E=e(8812),r=e(28216),U=C=>{var S=(0,r.v9)(f=>{var W=f.advancedSetting;return{themeColor:W.themeColor}}),O=S.themeColor;return p().createElement(Y.Z,{placement:"top",title:C.name},p().createElement("span",{className:"cl-table__cell-arrow",onClick:C.onClick},p().createElement("span",{style:{color:O}},C.name),p().createElement("span",{className:"cl-table__cell-arrow-icon"},p().createElement(E.Z,null))))};F.Z=U},30389:function(ue,F,e){"use strict";e.d(F,{Z:function(){return h}});var _=e(62029),Y=e(20228),G=e(11382),p=e(12924),E=e.n(p),r=e(91768),U=e(80991),C={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},S=e(62615),O=e(52670);class f extends E().Component{render(){var i=this.props,s=i.values,c=i.mode,y=i.onlyChooseDept,l=i.reserveUser,B=i.t,R=i.orgProps,j=i.rangeAuth,K=i.projectId,X=i.onCancel,ee=i.onlyCreateUser;return E().createElement(U.l0,{className:"cl-form"},E().createElement(U.gN,(0,_.Z)({component:S.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:B("common.visibleRange"),defaultFieldList:s.employeeRange,validate:O.FI,mode:c,rangeAuth:j,onlyChooseDept:y,onlyCreateUser:ee,orgProps:R,reserveUser:l,projectId:K,onCancel:X,qwTicketShow:!0},C)))}}var W=(0,r.Z)()(f),b=e(18329),T=e(34773);class a extends E().Component{constructor(){super(...arguments);this.initRefFormik=i=>{this.refFormik=i},this.handleBeforeCreate=()=>{var i=this.refFormik;i.submitForm(),i.runValidations().then(s=>{if(!Object.keys(s).length){var c=i.state.values.employeeRange,y=(0,T.b)(c.rangeList),l={qyWeChatVo:c.qyWeChatVo,id:this.props.actionId,isAll:c.rangeType,groupIds:c.rangeType===2?y.groupIds.join(","):"",departmentIds:c.rangeType===2?y.deptIds.join(","):"",userIds:c.rangeType===2?y.userIds.join(","):"",postIds:c.rangeType===2?y.postIds.join(","):"",clusterIds:c.rangeType===2?y.clusterIds.join(","):"",qy_we_chat_vo:c.qyWeChatVo};this.props.onCreate(l)}})},this.handleBeforeCancel=()=>{var i=this.props.onCancel;i()}}render(){var i=this.props,s=i.visible,c=i.initialParams,y=i.isLoading,l=i.tipInfo,B=i.mode,R=i.onlyChooseDept,j=i.reserveUser,K=j===void 0?[]:j,X=i.t,ee=i.title,w=i.orgProps,Z=i.rangeAuth,m=i.projectId,g=i.onCancel,N=i.onlyCreateUser,P=i.size;return y?E().createElement(G.Z,{size:"large"}):E().createElement(b.ZP,{wrapClassName:"cl-employee-selector-modal",visible:s,title:ee||X("component.changeUser"),okText:X("common.ok"),cancelText:X("common.cancel"),size:P,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},y?E().createElement(G.Z,{size:"large"}):E().createElement(U.J9,{ref:this.initRefFormik,initialValues:c,render:A=>E().createElement(W,(0,_.Z)({},A,{mode:B,rangeAuth:Z,orgProps:w,onlyChooseDept:R,onlyCreateUser:N,reserveUser:K,projectId:m,onCancel:g}))}),l&&E().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},l))}}a.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var h=(0,r.Z)()(a)},63848:function(ue,F,e){"use strict";var _=e(36877),Y=e(32969),G=e(12924),p=e.n(G),E=e(91768),r=e(56130);class U extends p().PureComponent{constructor(){super(...arguments);this.onChange=(S,O)=>{this.props.onChange(S,O)}}render(){var S=this.props,O=S.value,f=S.classify,W=S.showLabel,b=S.className,T=S.t,a=S.style;return p().createElement("div",{className:"classify-cascader ".concat(b)},W?p().createElement("span",{className:"classify-cascader-label"},T("component.selectClassifyLabel")):null,p().createElement(Y.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(b),options:f,onChange:this.onChange,placeholder:T("component.selectClassifyLabel"),value:O,style:a,loadData:this.props.loadData}))}}U.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},F.Z=(0,r.Z)((0,E.Z)()(U))},51697:function(ue,F,e){"use strict";var _=e(22385),Y=e(31097),G=e(33565),p=e(12924),E=e.n(p),r=e(28216),U=e(84874),C=O=>{var f=O.title,W=O.visible,b=O.placement,T=b===void 0?"top":b,a=O.children,h=a===void 0?null:a,L=O.isNewUser,i=L===void 0?"":L,s=O.closeGuide,c=O.guideStatus,y=(0,p.useState)(!1),l=(0,G.Z)(y,2),B=l[0],R=l[1],j=ee=>E().createElement("div",{className:"guide-tooltip-title"},ee,E().createElement("span",{onClick:K},E().createElement(U.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,p.useEffect)(()=>{R(W)},[W]);var K=ee=>{if(ee.stopPropagation(),ee.preventDefault(),R(!1),s){s();return}i==="true"&&O.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),X()},X=()=>{localStorage.setItem("guideStatus","false"),O.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return E().createElement(Y.Z,{title:j(f),placement:T,visible:B&&c==="true"&&f},h)},S=O=>({guideStatus:O.advancedSetting.guideStatus,isNewUser:O.advancedSetting.isNewUser});F.Z=(0,r.$j)(S)(C)},95771:function(ue,F,e){"use strict";var _=e(62029),Y=e(66456),G=e(55313),p=e(33565),E=e(12924),r=e.n(E),U=e(91768),C=e(18329),S=e(60667),O=e(37055),f=e(10237),W={size:"medium",destroyOnClose:!0,maskClosable:!1,footer:null};function b(T){var a=T.visible,h=T.title,L=T.from,i=T.detail,s=T.sourceType,c=T.onCancel,y=T.t,l=(0,E.useState)([]),B=(0,p.Z)(l,2),R=B[0],j=B[1],K=[{title:y("historicRecords.teacherName"),dataIndex:"lecturer_name",key:"lecturer_name",render:(ee,w)=>r().createElement(S.Z,{dataType:"userName",value:w.teacher_sync_user_id,name:w.lecturer_name,type:w.teacher_sync_source_type})},{title:y("course.courseDetailName"),dataIndex:"course_name",key:"course_name",width:300}];L==="lecturerAveScore"&&K.push({title:y("learning.questionnaireAddToolScore"),dataIndex:"average_score",key:"average_score"}),(0,E.useEffect)(()=>{a&&X()},[a]);function X(){var ee=L==="lecturerAveScore"?O.ZP.StudyTaskList.lecturerScoresList(i.id):O.ZP.StudyTaskList.lecturerList(i.id),w={source_type:s};f.WY.get({url:ee,params:w}).then(Z=>{j(Z.data.data)})}return r().createElement(C.ZP,(0,_.Z)({},W,{title:h,onCancel:c,visible:a}),r().createElement("div",null,r().createElement(G.Z,{bordered:!0,size:"middle",columns:K,dataSource:R,pagination:!1})))}F.Z=(0,U.Z)()(b)},66123:function(ue,F,e){"use strict";e.d(F,{T:function(){return m},t:function(){return B}});var _=e(71194),Y=e(57016),G=e(22385),p=e(31097),E=e(88986),r=e(57361),U=e(33565),C=e(9754),S=e.n(C),O=e(12924),f=e.n(O),W=e(91768),b=e(28216),T=e(57068),a=e(76651),h=e(87983),L=e.n(h),i=e(99367),s=e(98233),c=e(67479),y=e(1164);function l(g){var N=g.t,P=g.title,A=g.visible,$=g.uuid,H=g.id,te=g.fieldNames,ne=g.from,ge=g.getList,ve=g.onCancel,d=g.hasTitleLink,k=d===void 0?!0:d,M=(0,b.v9)(Q=>{var re=Q.advancedSetting;return{themeColor:re.themeColor}}),ae=M.themeColor,se=(0,O.useState)({}),z=(0,U.Z)(se,2),q=z[0],ie=z[1],Ce={task:"learning",employee:"employee"},pe=(Q,re)=>{if(Q)return(0,s.nn)({origin:Ce[ne],search:T.stringify({id:re.id,title:re.title,origin:Ce[ne]})});var oe={},le="";switch(ne){case"task":oe={id:re.id,taskId:H,taskType:ne},le="/training/learning/management/monitor/exam?".concat(T.stringify(oe));break;case"employee":oe={id:re.id,taskId:H,taskType:ne},le="/training/learning/task/employeeResult/exam?".concat(T.stringify(oe));break;default:break}return le},fe=function(){var Q=(0,r.Z)(S().mark(function re(){var oe,le,Ae,ce=arguments;return S().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(oe=ce.length>0&&ce[0]!==void 0?ce[0]:"unKnow",le=ce.length>1?ce[1]:void 0,oe!=="unKnow"){me.next=7;break}return me.next=5,(0,c.D)(le.id);case 5:return Ae=me.sent,me.abrupt("return",pe(Ae,le));case 7:return me.abrupt("return",pe(oe,le));case 8:case"end":return me.stop()}},re)}));return function(){return Q.apply(this,arguments)}}(),Pe=function(){var Q=(0,r.Z)(S().mark(function re(oe){var le;return S().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(k){ce.next=2;break}return ce.abrupt("return");case 2:return ce.next=4,fe(oe.new_exam==="true",oe);case 4:le=ce.sent,a.m8.push(le);case 6:case"end":return ce.stop()}},re)}));return function(oe){return Q.apply(this,arguments)}}(),Te=function(){var Q=(0,r.Z)(S().mark(function re(oe){var le;return S().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(oe.pending_count!==0){ce.next=2;break}return ce.abrupt("return");case 2:return ce.next=4,(0,s.Md)(oe.new_exam==="true",{id:oe.id,taskId:H,status:"pending",from:"projectNew"});case 4:le=ce.sent,oe.new_exam==="true"?y.Z.targetTo({path:le}):a.m8.push(le);case 6:case"end":return ce.stop()}},re)}));return function(oe){return Q.apply(this,arguments)}}(),De=Q=>ge((0,E.Z)((0,E.Z)({},Q),{},{id:H}));return(0,O.useEffect)(()=>{ie({query:Q=>De(Q),columns:[{title:N("exam.testName"),dataIndex:te&&te.title||"title",width:300,key:"id",render:(Q,re)=>f().createElement(p.Z,{title:re.title},f().createElement("div",{style:k?{color:ae,cursor:"pointer",width:300}:{},className:"cl-text-ellipsis",onClick:()=>{Pe(re)}},re[te&&te.title||"title"]))},{title:N("exam.toBeGraded"),width:120,dataIndex:te&&te.pending_count||"pending_count",key:te&&te.pending_count||"pending_count",render:(Q,re)=>re[te&&te.pending_count||"pending_count"]},{title:N("exam.operate"),key:"operate",width:localStorage.getItem("lng")==="en_us"?210:100,fixed:"right",buttons:[{name:N("trainingProject.markingPapers"),disabled:Q=>!(Q.pending_count>0&&Q.reading_operation==="has_operation"),handleClick:Q=>Te(Q)}]}]})},[te,$,H]),f().createElement(Y.Z,{title:P||N("myExamTask.marking"),visible:A,width:600,bodyStyle:{padding:"0 24px 24px"},footer:null,onCancel:ve},q.query?f().createElement("div",{className:L()["pending-pager-container"]},f().createElement(i.Z,{uniKey:"",uuid:$,queryParams:q,pagination:!0})):null)}var B=(0,W.Z)()(l),R=e(20136),j=e(55241),K=e(38778),X=e.n(K),ee=e(84874);function w(g){var N=g.contentString,P=g.scrollElement,A=g.visible,$=g.authJudge,H=g.placement,te=H===void 0?"bottom":H,ne=g.closeGuide,ge=g.zIndex,ve=ge===void 0?100:ge,d=(0,O.useState)(!1),k=(0,U.Z)(d,2),M=k[0],ae=k[1],se=q=>{q.stopPropagation(),P&&!P.isRelative&&(document.querySelector('[class*="'.concat(P.classContent,'"]')).style.position=""),ae(!1),typeof ne=="function"&&ne()},z=()=>f().createElement("div",{className:X()["intro-content"]},N,f().createElement("span",{className:X().close,onClick:q=>se(q)},f().createElement(ee.Z,{iconClass:"icon-guanbi1",size:"12px"})));return(0,O.useEffect)(()=>{A&&!M&&(typeof $=="function"&&$()||!$)&&(P&&!P.isRelative&&(document.querySelector('[class*="'.concat(P.classContent,'"]')).style.position="relative"),setTimeout(()=>{ae(!0)},500))},[A]),f().createElement(j.Z,{visible:M,placement:te,title:"",overlayClassName:X()["intro-card"],content:z(),zIndex:ve,getPopupContainer:()=>document.querySelector('[class*="'.concat(P.classContent,'"]'))},g.children)}var Z=g=>({userId:g.user.id||window.localStorage.getItem("uid")}),m=(0,b.$j)(Z)((0,W.Z)()(w))},59857:function(ue,F,e){"use strict";var _=e(22385),Y=e(31097),G=e(12924),p=e.n(G);class E extends p().Component{render(){var U=this.props,C=U.name,S=U.full_name,O=U.maxWidth;return p().createElement(Y.Z,{title:S},p().createElement("span",{className:"component-resource-category",style:{maxWidth:O||"160px"}},C))}}F.Z=E},54792:function(ue,F,e){"use strict";var _=e(62029),Y=e(63185),G=e(9676),p=e(47673),E=e(4107),r=e(88986),U=e(12924),C=e.n(U),S=e(91768),O=e(59239),f=e(55446),W=e.n(f),b=e(18329),T=e(2396);class a extends C().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var i=this.props,s=i.form,c=i.id,y=i.onCreate,l=this.state.isChecked;s.validateFields((B,R)=>{if(!B){var j=(0,r.Z)({},R);l||(j.value=0);var K=(0,r.Z)((0,r.Z)({},j),{},{id:c});y(K),setTimeout(()=>{s.resetFields()},100)}})},this.handleBeforeCancel=()=>{var i=this.props,s=i.form,c=i.onCancel;c(),setTimeout(()=>{s.resetFields()},100)},this.checkScore=(i,s,c)=>{var y=this.props.t,l=this.state.isChecked;if(l&&(0,T.kh)(s)){c(y("component.setScoreRuleTip"));return}c()},this.handleCheckChange=i=>{this.setState({isChecked:i.target.checked})},this.renderItem=()=>{var i=this.props,s=i.form,c=i.initialValue,y=i.labelTxt,l=this.state.isChecked,B=s.getFieldDecorator,R={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},j=l?B("value",{initialValue:c,rules:[{validator:this.checkScore}]})(C().createElement(E.Z,{maxLength:30,placeholder:""})):null,K=C().createElement(C().Fragment,null,C().createElement(G.Z,{checked:l,onChange:this.handleCheckChange},y));return C().createElement(O.Z.Item,(0,_.Z)({label:K},R),j)}}componentDidUpdate(i){this.props.visible&&this.props.visible!==i.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var i=this.props,s=i.visible,c=i.title,y=i.prefixCls;return C().createElement(b.ZP,{size:"small",visible:s,title:c,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},C().createElement(O.Z,{className:"".concat(y),layout:"horizontal",colon:!1},this.renderItem(),C().createElement("div",{className:"".concat(y,"__children")},this.props.children)))}}a.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var h=O.Z.create({name:"ClSetupBoxInModal"})(a);F.Z=(0,S.Z)()(h)},78509:function(ue,F,e){"use strict";var _=e(62029),Y=e(66456),G=e(55313),p=e(33565),E=e(12924),r=e.n(E),U=e(91768),C=e(18329),S=e(37055),O=e(10237),f=e(38642),W={zaraFlag:(0,f.UI)("ZARA_H5")},b={size:"medium",destroyOnClose:!0,maskClosable:!1,footer:null};function T(a){var h=a.t,L=a.visible,i=a.detail,s=a.sourceType,c=a.onCancel,y=a.title,l=(0,E.useState)([]),B=(0,p.Z)(l,2),R=B[0],j=B[1],K=[{title:h("documentTitle.matter"),dataIndex:"resource",key:"resource"},{title:h("common.courseLabel"),dataIndex:"course_normal",key:"course_normal"},{title:h("live.live"),dataIndex:"live_course",key:"live_course"},{title:h("course.graphicDetailTitle"),dataIndex:"course_graphic",key:"course_graphic"},{title:h("common.exam"),dataIndex:"exam",key:"exam"},{title:h("setting.practice"),dataIndex:"practice",key:"practice"},{title:h("common.offline"),dataIndex:"offline",key:"offline"},{title:h("questionn.investigate"),dataIndex:"research",key:"research"},{title:h("component.practiceExam"),dataIndex:"operation",key:"operation"},{title:h("learning.jobEvaluation"),dataIndex:"evaluation",key:"evaluation"},{title:h("component.attendance"),dataIndex:"sign",key:"sign"}];W.zaraFlag&&K.push({title:h("assessment.assess"),dataIndex:"evaluate",key:"evaluate",render:ee=>ee||0}),(0,E.useEffect)(()=>{L&&X()},[L]);function X(){var ee=W.zaraFlag?S.ZP.StudyProjectWithAssessment.coursesAmountList(i.id):S.ZP.StudyTaskList.coursesAmountList(i.id),w={source_type:s};O.WY.get({url:ee,params:w}).then(Z=>{j([Z.data.data])})}return r().createElement(C.ZP,(0,_.Z)({},b,{title:y||h("validation.stage"),onCancel:c,visible:L}),r().createElement("div",null,r().createElement(G.Z,{bordered:!0,size:"middle",columns:K,dataSource:R,pagination:!1})))}F.Z=(0,U.Z)()(T)},11449:function(ue,F,e){"use strict";e.d(F,{Z:function(){return ee}});var _=e(88986),Y=e(33565),G=e(12924),p=e.n(G),E=e(3115),r=e(49111),U=e(19650),C=e(62029),S=e(57663),O=e(71577),f=e(91768),W=e(28216),b=e(37055),T=e(10237);function a(w){var Z=b.ZP.getHelpContentByMenuKey(),m={key:w};return T.WY.get({url:Z,params:m})}var h=e(74228),L=e.n(h),i=e(1164),s=e(76466),c=e(38642);class y extends p().Component{constructor(Z){var m;super(Z);m=this,this.getHelpContentByMenuKey=()=>{var g=this.props.defaultMenuKey;a(g).then(N=>{var P=N.data,A=P.help_url,$=P.video_url;this.setState({videoUrl:$,helpUrl:A})})},this.handleOpenHelpUrl=g=>{if((0,c.ve)()){window.open(g,"_blank");return}i.Z.targetTo({path:g,isExternalLink:!0})},this.handleOpenVideo=function(g){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.props.t("helpCenter.video");m.setState(P=>({resourcePlayInfo:(0,_.Z)((0,_.Z)({},P.resourcePlayInfo),{},{resourceInfo:{originUrl:g,source:{FD:g,OD:g},contentType:"mp4"}}),previewInfo:(0,_.Z)((0,_.Z)({},P.previewInfo),{},{title:N,visible:!0,onCancel:m.handleCancelPreview})}))},this.handleCancelPreview=()=>{var g=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,_.Z)((0,_.Z)({},g),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:Z.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var Z=this.state,m=Z.helpUrl,g=Z.resourcePlayInfo,N=Z.previewInfo,P=Z.videoUrl,A=this.props.t;return p().createElement("div",{className:L().helpCenter},P&&p().createElement(O.Z,{type:"link",className:L()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(P)},A("helpCenter.video")),m&&p().createElement(O.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(m)},A("helpCenter.tutorial")),p().createElement(s.Z,(0,C.Z)({},g,{previewInfo:N})))}}var l=w=>({defaultMenuKey:w.currentRoute.menuKey});y.defaultProps={defaultMenuKey:""};var B=(0,W.$j)(l)((0,f.Z)()(y));function R(w){var Z=w.extra,m=localStorage.getItem("dingPersonnel"),g=sessionStorage.getItem("dingPersonnel");return p().createElement(U.Z,null,Z,m!=="dingPersonnel"&&g!=="dingPersonnel"&&(0,c.eY)("COMMONEXTRA_HELP_CENTER")&&p().createElement(B,null))}var j=R,K=e(4408);function X(w){var Z=(0,G.useState)({helpCenter:(0,c.eY)("HEAD_HELP_CENTER_BUT")}),m=(0,Y.Z)(Z,1),g=m[0],N=w.pageContainerParams,P=N===void 0?{}:N,A=w.noPadding,$=A===void 0?!1:A,H=w.isPersonal,te=H===void 0?!1:H,ne=w.pageTitle,ge=w.className,ve=ge===void 0?"":ge,d={extra:g.helpCenter?p().createElement(j,{extra:P.extra}):P.extra},k=(0,_.Z)((0,_.Z)({},P),d);return p().createElement("div",{className:"page-container-content ".concat($?"page-container-noPadding":""," ").concat(te?"page-container-content_personal_background":""," ").concat(ve)},ne&&p().createElement(K.Z,{title:ne}),te?p().createElement(E.Z,null,w.children):p().createElement(E.Z,k,w.children))}var ee=X},404:function(ue,F,e){"use strict";e.d(F,{Z:function(){return w}});var _=e(62029),Y=e(57663),G=e(71577),p=e(88986),E=e(12924),r=e.n(E),U=e(91768),C=e(20228),S=e(11382),O=e(34792),f=e(48086),W=e(80991),b=e(49010),T=e(77444),a=e(10237),h=e(37055),L=e(18329);class i extends r().Component{constructor(){super(...arguments);this.initRefFormik=m=>{this._refFormik=m},this.state={initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}},isLoading:!0},this.getSingleApproval=()=>{var m=this.props.operationId,g=h.ZP.PostAbility.queryAuthApprovels(m);a.WY.get({url:g}).then(N=>{var P=[],A=N.data;A.type==="multilevel"&&A.approvers.map($=>P.push($)),this.setState({initialValues:{supervisor:{or:A.type==="or"?[...N.data.approvers[0]]:[],multilevel:P,lead:"",type:A.type}},isLoading:!1})})},this.handleBeforeCreate=()=>{var m=this._refFormik;m.submitForm(),m.runValidations().then(g=>{if(!Object.keys(g).length){var N=m.state.values.supervisor,P=localStorage.getItem("authorityType"),A=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1,$=[],H=[];if(N.type==="multilevel"){var te=N.multilevel;te.forEach(ve=>{var d=[];ve.forEach(k=>{d.push({id:k.id})}),$.push(d)}),A&&P==="1"&&te.forEach(ve=>{var d=[];d.push(ve[0].qyWeChatVo),H.push(d)})}else if(N.type==="or"){var ne=[];N.or.map(ve=>{ne.push({id:ve.id})}),$.push(ne),A&&P==="1"&&(H=[[N.qy_we_chat_vo]])}else $=[],H=[];var ge={type:N.type,operation_ids:this.props.operationId,approvers:$,qy_we_approve_users:H};this.submit(ge)}})},this.submit=m=>{a.WY.post({url:h.ZP.PostAbility.updateApprover(),data:m}).then(g=>{g.data&&(f.default.success(this.props.t("study.updateSuccess")),this.onCancel())})},this.onCancel=()=>{this.setState({initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}}},()=>{this.props.cancelSettingApprover()})}}componentDidUpdate(m){this.props.visible&&this.props.visible!==m.visible&&this.props.operationId&&(this.setState({isLoading:!0,initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}}}),this.props.isSingle?this.getSingleApproval():this.setState({isLoading:!1}))}render(){var m=this.state,g=m.initialValues,N=m.isLoading,P=this.props,A=P.visible,$=P.t,H=P.createUserId,te=P.isHasTutor;return r().createElement(L.ZP,{visible:A,title:$("authentication.abilityDetailSecSupervisionTitle"),onCancel:this.onCancel,onOk:this.handleBeforeCreate,size:"medium"},N?r().createElement(S.Z,{size:"large"}):A&&r().createElement("div",{className:"auth-people"},r().createElement(W.J9,{ref:this.initRefFormik,initialValues:g,onSubmit:this.submit,render:ne=>r().createElement(W.l0,{className:"cl-form"},r().createElement(W.gN,{component:b.Z,isHasTutor:te,displayType:"Custom",name:"supervisor",createUserId:H,defaultFieldList:ne.values.supervisor,validate:T.Z.checkSupervisor,mode:"dialog"}))})))}}var s=(0,U.Z)()(i),c=e(22385),y=e(31097),l=e(28216),B=e(36202),R=e(60667);class j extends r().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("personal.practicalName"),dataIndex:"title",key:"title"},{title:this.props.t("authentication.abilityDetailApprover"),dataIndex:"approvers_list",key:"approvers_list",width:250,render:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],N=Array.isArray(g)?[...g]:[];return r().createElement(y.Z,null,r().createElement("div",{className:"cl-text-ellipsis",style:{width:230}},N.map((P,A)=>Array.isArray(P)?r().createElement(r().Fragment,null,P.map(($,H)=>r().createElement(E.Fragment,{key:P.id},r().createElement(R.Z,{dataType:"userName",value:$.sync_user_id,name:$.name,type:$.source_type||P.sourceType}),H*A!=P.length*N.length-1&&","))):r().createElement(E.Fragment,{key:P.id},r().createElement(R.Z,{dataType:"userName",value:P.sync_user_id,name:P.name,type:P.source_type||P.sourceType}),A!==N.length-1&&","))))}},{title:this.props.t("common.operate"),width:80,key:"operate",render:m=>r().createElement("div",{className:"cl-table__cell-action"},r().createElement("span",{className:"cl-pointer",onClick:()=>this.props.settingApprover(m)},this.props.t("common.edit")))}]}render(){var m=this.props,g=m.list,N=g===void 0?[]:g,P=m.loading,A=m.selectedRowKeys,$=A===void 0?[]:A,H=m.onSelectChange,te=m.toolBarRender,ne={selectedRowKeys:$,onChange:H};return r().createElement("section",{className:"auth-people__content__table"},r().createElement(B.f,{bordered:!0,columns:this.columns,rowSelection:ne,rowKey:"id",dataSource:N,pagination:!1,loading:P,toolBarRender:te,tableUUID:"eebd1b51-6aad-436e-be45-a4fc2e1e858d"}))}}var K=Z=>{var m=Z.user;return{user:m,qyShield:m.qyShield}},X=(0,l.$j)(K)((0,U.Z)()(j));class ee extends r().Component{constructor(){super(...arguments);this.state={params:{entity_type:"",entity_id:""},tableLoading:!0,tableList:[],settingApproverProps:{operationId:[],createUserId:"",isSingle:!1,visible:!1,isHasTutor:this.props.isHasTutor},selectedRowKeys:[]},this.initTableList=()=>{this.setState({tableLoading:!0}),a.WY.post({url:h.ZP.PostAbility.queryAuthWorkList(),data:this.state.params}).then(m=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:m.data.operations})},300)})},this.handleSelectChange=m=>{this.setState({selectedRowKeys:m})},this.multiSettingApprover=()=>{var m=this.state.selectedRowKeys;this.setState(g=>({settingApproverProps:(0,p.Z)((0,p.Z)({},g.settingApproverProps),{},{visible:!0,isSingle:!1,operationId:m})}))},this.settingApprover=m=>{this.setState(g=>({settingApproverProps:(0,p.Z)((0,p.Z)({},g.settingApproverProps),{},{visible:!0,isSingle:!0,operationId:[m.id],createUserId:this.props.createUserId})}))},this.cancelSettingApprover=()=>{this.initTableList(),this.setState(m=>({settingApproverProps:(0,p.Z)((0,p.Z)({},m.settingApproverProps),{},{visible:!1,operationId:[]})})),this.setState({selectedRowKeys:[]})},this.onCancel=()=>{this.props.closeApprovalList()},this.renderRightRow=()=>{var m=this.props.t,g=this.state.selectedRowKeys;return r().createElement("div",{className:"auth-people__content__query"},r().createElement(G.Z,{type:"primary",onClick:this.multiSettingApprover,disabled:g.length===0},m("personal.batchEdit")))}}componentDidUpdate(m){if(this.props.visible&&this.props.visible!==m.visible&&this.props.entityId){var g=this.props,N=g.entityId,P=g.entityType;this.setState({params:{entity_type:P,entity_id:N},tableList:[]},()=>{this.initTableList()})}}render(){var m=this.props,g=m.visible,N=m.t,P=m.isHasTutor,A=this.state,$=A.tableList,H=A.tableLoading,te=A.settingApproverProps,ne=A.selectedRowKeys;return r().createElement(L.ZP,{visible:g,title:N("authentication.editApprovals"),onCancel:this.onCancel,footer:null,size:"large"},r().createElement("div",{className:"auth-people"},g?r().createElement(r().Fragment,null,r().createElement("div",{className:"auth-people__content"},r().createElement(X,{loading:H,list:$,selectedRowKeys:ne,onSelectChange:this.handleSelectChange,settingApprover:this.settingApprover,toolBarRender:this.renderRightRow}),r().createElement(s,(0,_.Z)({},te,{isHasTutor:P,cancelSettingApprover:this.cancelSettingApprover})))):null))}}var w=(0,U.Z)()(ee)},77444:function(ue,F,e){"use strict";var _=e(6793),Y=e(3407),G=(0,_.me)(),p=Y.Z[G].authentication.validation;F.Z={title:E=>(0,_.fy)(E)?(0,_.fy)(E).length>60?p.abilityDetailNameLimit:"":p.abilityDetailNameNull,summary:E=>{var r;return E?(0,_.fy)(E).length>500&&(r=Y.Z[G].validation.limitedFiveHundred):r=p.abilityDetailSummaryNull,r},certificate:E=>{var r;return E.id||(r=p.abilityDetailIssueNull),r},checkSupervisor:E=>{var r,U=E.multilevel,C=E.type;if(C==="multilevel")if(U.length<2)r=p.abilityDetailSupervisionNull;else{var S={},O=[];U.forEach((f,W)=>{if(f.length===0){r=(0,_.ZT)("".concat(p.abilityDetailSupervisionStepNull),W+1);return}if(f.length>5){r=(0,_.ZT)("".concat(p.abilityDetailSupervisionStepLimit),W+1);return}f.forEach(b=>{O.push(b)})}),O.forEach(f=>{S[f.id]?r=p.abilityDetailSupervisionRepeat:S[f.id]=!0})}return r}}},72456:function(ue,F,e){"use strict";var _=e(49111),Y=e(19650),G=e(57663),p=e(71577),E=e(12924),r=e.n(E),U=e(28216),C=e(91768),S=e(84391),O=e(90631),f=e(49101),W=e(76651),b=e(31945),T=e(1164),a=e(51697),h=i=>{var s=i.user,c=i.currentRoute,y=i.advancedSetting;return{currentPath:c.path,allAuthRoutes:c.allAuthRoutes,userLng:s.lng,themeColor:y.themeColor,qyShield:s.qyShield}};class L extends r().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var s=this.props.tabLink;W.m8.push(s)},this.renderActionBtn=()=>{var s=this.props,c=s.prefixCls,y=s.actionText,l=s.t,B=s.tabLink,R=s.showBtn,j=s.renderActionBtn,K=s.newPage,X=s.popOverProps,ee=X===void 0?[]:X,w=s.renderGuide,Z=w===void 0?!1:w,m=s.showDownloadBtn,g=m===void 0?!1:m,N=s.showImportBtn,P=N===void 0?!1:N,A=s.showCreateBtn,$=A===void 0?!0:A,H=s.rowReverse,te=H===void 0?!1:H,ne="".concat(c,"__action");if(!R&&j&&typeof j=="function")return r().createElement("div",{className:ne},j());if(!R||!y)return null;var ge=ee.length?ee[0].contentText:"";return r().createElement("div",{className:"".concat(ne," ").concat(te&&"row-reverse")},r().createElement(Y.Z,{size:16},g&&r().createElement(p.Z,{icon:r().createElement(S.Z,null),onClick:this.handleDownload},l("common.exportData")),P&&r().createElement(p.Z,{icon:r().createElement(O.Z,null),onClick:this.handleImport},l("exam.importTemplate")),$&&K&&r().createElement(T.Z,{to:B},r().createElement(a.Z,{visible:ge&&Z,placement:"topLeft",title:ge},r().createElement(p.Z,{type:"primary",id:"create-project-button",icon:r().createElement(f.Z,null)},y))),$&&!K&&r().createElement(p.Z,{type:"primary",id:"create-project-button",icon:r().createElement(f.Z,null),onClick:this.handleCreate},y)))},this.renderQueryRow=()=>{var s=this.props,c=s.queryRowParams,y=s.queryRowList,l=s.queryRowSelectedCourseIds,B=s.queryRowSelectedProjectIds,R=s.queryRowOnForceRender,j=s.queryRowOnClassifyChange,K=s.queryRowOnTypeChange,X=s.queryRowOnCourseTypeChange,ee=s.queryRowAllowActions,w=s.showNum,Z=w===void 0?1:w;return r().createElement(b.Z,{params:c,list:y,selectedCourseIds:l,selectedProjectIds:B,onForceRender:R,onClassifyChange:j,onTypeChange:K,onCourseTypeChange:X,allowActions:ee,showNum:Z,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var s=this.props,c=s.t,y=s.extraBtnSelectedRowKeys,l=s.extraBtnHandleMultiVisibleRange;return r().createElement(p.Z,{disabled:y.length===0,onClick:l},c("courseManage.setTheVisibility"))}}render(){var s=this.props,c=s.prefixCls,y=s.wrapCls,l=s.showRenderQueryRow,B=s.showRendeExtraBtn;return r().createElement(r().Fragment,null,r().createElement("div",{className:"render_other"},r().createElement("header",{className:"".concat(c," ").concat(y)},r().createElement("section",{className:"".concat(c,"__radiocol")},this.renderActionBtn(),l&&this.renderQueryRow(),B&&this.rendeExtraBtn()))))}}L.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},F.Z=(0,U.$j)(h)((0,C.Z)()(L))},62117:function(ue,F,e){"use strict";var _=e(63185),Y=e(9676),G=e(43358),p=e(34041),E=e(88983),r=e(47933),U=e(12924),C=e.n(U),S=e(28216),O=e(91768),f=e(48479),W=e(2971),b=e(45601),T=e(7249),a=L=>{var i=L.user,s=L.currentRoute,c=L.advancedSetting;return{currentPath:s.path,allAuthRoutes:s.allAuthRoutes,userLng:i.lng,themeColor:c.themeColor,appType:i.appType,appId:i.appId}};class h extends C().Component{constructor(i){super(i);this.setPlaceholder=()=>{var s=this.props,c=s.currentPath,y=s.allAuthRoutes,l=s.userLng,B=this.state.language,R=y[c],j=this.props,K=j.appType,X=j.appId,ee=localStorage.getItem("qyWechatBook"),w=K==="wx_app"&&ee==="true"&&X==="9005";if(!!R){var Z=B[l].searchInputPlaceholder,m="";R.menuKey==="studyTemplate"||R.menuKey==="examTemplate"?m=Z.template:R.menuKey==="employee"||R.menuKey==="obligatory"||R.menuKey==="elective"||R.menuKey==="plan"||R.menuKey==="evaluation"||R.menuKey==="myEvaluationPlan"?m=Z.task:R.menuKey==="studyProject"?m=w?Z.byProjectName:Z.byProjectNameOrCreator:R.menuKey==="management"?m=w?Z.byTaskName:Z.byTaskNameOrCreator:m=Z[R.menuKey],this.setState({currentPlaceholder:m})}},this.handleRadiosChange=s=>{this.props.onRadiosChange(s.target.value)},this.handleSelectChange=s=>{this.props.onSelectChange(s)},this.handleSearch=(s,c)=>{this.props.onSearch(s,c)},this.handleChange=s=>{this.props.onCheckboxChange(s.target.checked)},this.renderRadios=()=>{var s=this.props,c=s.prefixCls,y=s.radioList,l=s.defaultRadioValue,B=s.radioValue;if(!y.length)return null;var R=l||y[0].value,j="".concat(c,"__radios");return C().createElement("div",{className:j},typeof B!="undefined"?C().createElement(r.ZP.Group,{defaultValue:R,value:B,onChange:this.handleRadiosChange},y.map(K=>C().createElement(r.ZP.Button,{key:K.value,value:K.value},K.name))):C().createElement(r.ZP.Group,{defaultValue:R,onChange:this.handleRadiosChange},y.map(K=>C().createElement(r.ZP.Button,{key:K.value,value:K.value},K.name))))},this.renderSelect=()=>{var s=this.props,c=s.prefixCls,y=s.selectList,l=s.defaultSelectValue;if(!y.length)return null;var B=l||y[0].value,R="".concat(c,"__select");return C().createElement("div",{className:R},C().createElement(p.Z,{defaultValue:B,onChange:this.handleSelectChange,style:{minWidth:100}},y.map(j=>C().createElement(p.Z.Option,{key:j.value,value:j.value},j.name))))},this.renderOther=()=>{var s=this.props,c=s.prefixCls,y=s.renderOther,l=s.showOther,B="".concat(c,"__other");if(l&&y&&typeof y=="function")return C().createElement("div",{className:B},y())},this.renderCheckbox=()=>{var s=this.props,c=s.prefixCls,y=s.t,l=s.label,B=s.showCheckbox,R=s.renderActionSelect,j="".concat(c,"__checkbox");return!B&&R&&typeof R=="function"?C().createElement("div",{className:j},R()):B?C().createElement("div",{className:j},C().createElement(Y.Z,{onChange:this.handleChange},l||y("common.myCreated"))):null},this.renderSearch=()=>{var s=this.props,c=s.prefixCls,y=s.showSearch,l=s.inputPlaceholder,B=s.maxLength,R=B===void 0?400:B,j=s.value,K="".concat(c,"__search");if(!y)return null;var X=this.state.currentPlaceholder;return l?C().createElement("div",{className:K},C().createElement(f.Z,{onSearch:this.handleSearch,placeholder:l,width:272,maxLength:R})):C().createElement("div",{className:K},C().createElement(f.Z,{onSearch:this.handleSearch,placeholder:X,width:272,maxLength:R,value:j}))},this.renderSearchOther=()=>{var s=this.props.renderSearchOther;return s?s():null},this.state={language:{zh_cn:b.Z,en_us:W.Z,zh_hk:T.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(i){i.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var i=this.props,s=i.prefixCls,c=i.wrapCls,y=i.showRenderRadios,l=y===void 0?!0:y,B=i.showRenderSelect;return C().createElement(C().Fragment,null,C().createElement("div",{className:"render_other"},this.renderOther(),C().createElement("header",{className:"".concat(s," ").concat(c)},C().createElement("section",{className:"".concat(s,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),l&&this.renderRadios(),B&&this.renderSelect(),this.renderSearch()))))}}h.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},F.Z=(0,S.$j)(a)((0,O.Z)()(h))},83431:function(ue,F,e){"use strict";var _=e(30887),Y=e(99210),G=e(22385),p=e(31097),E=e(12924),r=e.n(E),U=e(91768),C=e(57119),S=e(28216),O=W=>{var b=W.user;return{loginMode:b.loginMode}};function f(W){var b=W.onUrge,T=W.onDing,a=W.t,h=localStorage,L=h.appType,i=a(L==="wx_app"?"component.ordinaryUrgingWxTips":L==="fs_app"?"component.ordinaryUrgingFsTips":"component.ordinaryUrgingTips");return r().createElement(Y.Z,null,r().createElement(Y.Z.Item,{key:"1"},r().createElement(p.Z,{title:i},r().createElement("div",{className:"urge-menu-item",onClick:b},r().createElement("span",{className:"urge-menu-item__text"},a("component.ordinaryUrging")),r().createElement(C.Z,null)))),L==="e_app"?r().createElement(Y.Z.Item,{key:"2"},r().createElement(p.Z,{title:a("component.dingStudentsTips")},dd.version?r().createElement("div",{className:"urge-menu-item",onClick:T},r().createElement("span",{className:"urge-menu-item__text"},a("component.dingStudents")),r().createElement(C.Z,null)):r().createElement("div",{className:"urge-menu-item__forbidden"},r().createElement("span",{className:"urge-menu-item__text"},a("component.dingStudents")),r().createElement(C.Z,null)))):null)}F.Z=(0,S.$j)(O)((0,U.Z)()(f))},50080:function(ue,F,e){"use strict";e.r(F),e.d(F,{default:function(){return lt}});var _=e(62029),Y=e(14781),G=e(53431),p=e(57361),E=e(34792),r=e(48086),U=e(71194),C=e(57016),S=e(88986),O=e(43358),f=e(34041),W=e(9754),b=e.n(W),T=e(12924),a=e.n(T),h=e(91768),L=e(76651),i=e(57068),s=e(57119),c=e(72456),y=e(62117),l=e(404),B=e(14965),R=e(11448),j=e(78138),K=e.n(j),X=e(59239),ee=e(55446),w=e(18329),Z=e(37055),m=e(10237),g=e(38642),N={labelCol:{xs:{span:6},sm:{span:6}},wrapperCol:{xs:{span:16},sm:{span:16}}};class P extends a().Component{constructor(v){super(v);this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{var o=this.state,t=o.endTime,n=o.whiteList,u=this.props,x=u.planId,D=u.t;if(!t){this.setState({hasSelected:!0});return}var J=n.zaraFlag?Z.ZP.StudyTaskList.changeCustomTaskDate():Z.ZP.StudyTaskList.changeTaskDate(),I=n.zaraFlag?{id:x,end_time:t}:{id:x,endTime:t};m.qg.post({url:J,data:I}).then(de=>{de.data.code===0?r.default.success(D("myExamTask.postponeSuccess")):r.default.error(de.data.msg),this.props.onOk()}).catch(()=>{r.default.error(this.props.t("study.operateFailed")),this.props.onOk()})},this.changeEndTime=(o,t)=>{this.setState({endTime:t,hasSelected:!0})},this.state={endTime:"",hasSelected:!1,whiteList:{zaraFlag:(0,g.UI)("ZARA_H5")}}}render(){var v=this.props,o=v.startTime,t=v.t,n={title:t("common.postpone"),size:"small",destroyOnClose:!0,maskClosable:!1},u=this.state,x=u.endTime,D=u.hasSelected;return a().createElement(w.ZP,(0,_.Z)({},n,{visible:this.props.visible,onCancel:this.onCancel,onOk:this.onOk}),a().createElement("div",{className:"change-range"},a().createElement("div",{className:"change-range-title"},t("study.postponeDurationTip")),a().createElement("div",{className:"change-range-date"},a().createElement(X.Z,{layout:"horizontal"},a().createElement(X.Z.Item,(0,_.Z)({label:t("common.beginTime"),required:!0},N),a().createElement(R.Z,{showTime:!0,value:K()(o),format:"YYYY-MM-DD HH:mm",disabled:!0})),a().createElement(X.Z.Item,(0,_.Z)({label:t("common.endTime"),required:!0,validateStatus:!x&&D?"error":"",help:!x&&D?"\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4":""},N),a().createElement(R.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm",onChange:this.changeEndTime,disabledDate:J=>J.isBefore(o)}))))))}}P.defaultProps={visible:!1,planId:"",startTime:new Date().getTime(),onCancel:()=>{},onOk:()=>{}};var A=(0,h.Z)()(P),$=e(28216),H=e(30389),te=V=>{var v=V.publicVariable;return{isOpenTrainingCamp:v.isOpenTrainingCamp}};class ne extends a().Component{constructor(v){super(v);this.initParams=()=>{var o=Z.ZP.StudyTaskList.getTaskDetail(),t={id:this.props.planId};this.setState({isLoading:!0}),m.WY.get({url:o,params:t}).then(n=>{var u=n.data;this.setState({initialParams:{employeeRange:{rangeType:u.isNoticeAll?1:2,rangeList:{dept:u.departmentList||[],post:u.postList||[],group:u.groupList||[],user:u.userList||[],cluster:u.dingGroupList||[]}}},isLoading:!1})})},this.onOk=o=>{var t=Z.ZP.StudyTaskList.changeTaskUser(),n=this.props.planId,u=o.isAll,x=o.groupIds,D=o.departmentIds,J=o.userIds,I=o.postIds,de=o.clusterIds,Ee=o.qy_we_chat_vo,Le={id:n,isNoticeAll:u===2?0:1,isAllIn:u===2?0:1,groupIds:x,userIds:J,departmentIds:D,postIds:I,dingGroupIds:de,qy_we_chat_vo:Ee};m.qg.post({url:t,data:Le}).then(ye=>{ye.data.code===0&&r.default.success(ye.data.msg),this.props.onOk()}).catch(()=>{r.default.error(this.props.t("study.operateFailed"))})},this.state={initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},isLoading:!0}}componentDidUpdate(v){this.props.visible&&this.props.visible!==v.visible&&this.initParams()}render(){var v=this.state,o=v.initialParams,t=v.isLoading,n=this.props,u=n.visible,x=n.onCancel,D=n.isOpenTrainingCamp,J=n.t;return t?null:a().createElement(H.Z,{tipInfo:this.props.t("study.changeUserRangeTip"),initialParams:o,isLoading:t,visible:u,onCancel:x,onCreate:this.onOk,orgProps:{useGroups:D,title:J("component.chooseVisibleScope")}})}}ne.defaultProps={visible:!1,planId:"",onCancel:()=>{},onOk:()=>{}};var ge=(0,$.$j)(te)((0,h.Z)()(ne)),ve=e(59250),d=e(13013),k=e(22385),M=e(31097),ae=e(57663),se=e(71577),z=e(34669),q=e(82833),ie=e(57254),Ce=e(55285),pe=e(95664),fe=e(48479),Pe=e(83431),Te=e(54531),De=e(6793),Q={pageNumber:1,pageSize:5};class re extends a().Component{constructor(v){super(v);this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{this.props.onOk()},this.getOnGoingUser=()=>{var o=Z.ZP.StudyTaskList.getOnGoingUser(),t=this.state,n=t.keyword,u=t.userIds,x={keyword:n,userIds:u,planId:this.props.planId,taskStatus:1,pageNumber:Q.pageNumber,pageSize:Q.pageSize,queryTaskInfo:!0};m.WY.get({url:o,params:x}).then(D=>{this.setState({userList:D.data.data.voList.list,userTotal:D.data.data.voList.total,userTotalPage:D.data.data.voList.pages,trainTask:D.data.data.trainTask,dingUserIds:D.data.data.dingUserIds,authScope:{visible:D.data.data.authorityRange==="true"}})})},this.pageChange=o=>{Q.pageNumber=o,this.getOnGoingUser()},this.keywordChange=o=>{var t=o.target.value;this.setState({keyword:t})},this.search=(o,t)=>{Q.pageNumber=1,this.setState({keyword:t===""?o:"",userIds:t},()=>{this.getOnGoingUser()})},this.urgeUserStudy=()=>{var o=this.props.t;C.Z.confirm({title:o("study.remind"),content:o("study.urgeTip"),zIndex:99999,onOk:()=>{var t=Z.ZP.StudyTaskList.urgeUserStudy(),n={planId:this.props.planId};m.WY.get({url:t,params:n}).then(u=>{u.data.code===0?r.default.success(u.data.msg):u.data.code!==1&&r.default.error(u.data.msg)})}})},this.getTableColumn=()=>{var o=[{title:this.props.t("study.trainingProgress"),dataIndex:"process",key:"process",width:120,render:(t,n)=>{var u=n.process;return a().createElement(q.Z,{percent:+u,size:"small"})}}];return o},this.handleDing=()=>{var o=this.state,t=o.trainTask,n=o.dingUserIds,u=t.trainName,x=encodeURIComponent("/pages/messageRedirect/messageRedirect?flag=study&planId=".concat(this.props.planId)),D="dingtalk://dingtalkclient/action/open_micro_app?&appId=".concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(x,"&corpId=$CORPID$"),J={users:n,attachmentTitle:u,text:(0,De.ZT)(this.props.t("study.dingTips"),u),mobileUrl:D};(0,Te.nb)(J)},this.renderRightRow=()=>{var o=this.props,t=o.t,n=o.publishStatus;return a().createElement("div",{className:"ongoing-user-top"},a().createElement(fe.Z,{onSearch:this.search,prefixCls:"ongoing-user-top-search",placeholder:t("searchInputPlaceholder.userName")}),n==="unpublished"?a().createElement(M.Z,{title:t("study.cantPushMsg")},a().createElement(se.Z,{type:"primary",disabled:!0},this.props.t("study.remind")," ",a().createElement(ie.Z,null))):a().createElement(d.Z,{overlay:a().createElement(Pe.Z,{onUrge:this.urgeUserStudy,onDing:this.handleDing})},a().createElement(se.Z,{type:"primary"},this.props.t("study.remind")," ",a().createElement(ie.Z,null))))},this.state={keyword:"",userIds:"",userList:[],userTotal:0,trainTask:{},dingUserIds:[],authScope:{visible:!1}}}componentDidUpdate(v){v.visible!==this.props.visible&&this.props.visible&&(Q.pageNumber=1,Q.pageSize=5,this.setState({keyword:""},()=>{this.getOnGoingUser(),(0,Te.TN)()}))}render(){var v=this.props.t,o=this.state,t=o.userList,n=o.userTotal,u=o.userTotalPage,x=o.authScope,D={title:a().createElement("div",null,v("common.ongoing"),x.visible&&a().createElement("span",{className:"ongoing-user-title-auth"},v("common.authScopeTip"))),okText:v("common.ok"),cancelText:v("common.cancel"),size:"medium",destroyOnClose:!0,maskClosable:!1},J=this.getTableColumn();return a().createElement(w.ZP,(0,_.Z)({},D,{visible:this.props.visible,onCancel:this.onCancel,onOk:this.onOk}),a().createElement("div",{className:"ongoing-user"},a().createElement("div",{className:"ongoing-user-table"},a().createElement(Ce.Z,{dataSource:t,headExtra:[{title:this.props.t("common.No"),dataIndex:"userId",width:50,key:"userId",fixed:"left",render:(I,de,Ee)=>Ee+1}],columns:J,bordered:!0,rowKey:I=>I.userId,pagination:!1,toolBarRender:this.renderRightRow,tableUUID:"bc278301-5966-4b2d-ac42-41d316c7dcda"}),a().createElement(pe.Z,{totalNum:n,totalPage:u,current:Q.pageNumber,defaultPageSize:5,showRenderRefresh:!1,onChange:this.pageChange}))))}componentWillUnmount(){Q.pageNumber=1,Q.pageSize=5}}re.defaultProps={visible:!1,planId:"",onCancel:()=>{},onOk:()=>{}};var oe=(0,h.Z)()(re),le=e(48736),Ae=e(27049),ce=e(30887),Se=e(99210),me=e(86726),Oe=e(1164),Ue=V=>{var v=V.user,o=V.advancedSetting;return{modules:v.modules,themeColor:o.themeColor}};class ke extends a().PureComponent{constructor(v){super(v);this.deleteStudyTask=()=>{var o=this.state.whiteList,t=o.zaraFlag?Z.ZP.StudyTaskList.removeCustomTask():Z.ZP.StudyTaskList.removeTask(),n=this.props.record,u={id:n.id};m.qg.post({url:t,data:u}).then(x=>{x.data.code===0?(r.default.success(this.props.t("study.successfullyDeleted")),this.props.onRemove()):r.default.error(x.data.msg)})},this.remove=()=>{this.deleteStudyTask()},this.deleteTaskItem=()=>{var o=this.props.t;C.Z.confirm({title:o("study.confirmToDelete"),icon:a().createElement(s.Z,null),onOk:()=>{this.remove()}})},this.moreOperate=o=>{var t=this.props,n=t.record,u=t.onChangeTaskDate,x=t.onChangeTaskUser,D=t.onRowEditApprovels,J=t.onCancelRelease,I=t.t;return a().createElement(Se.Z,null,o.map(de=>{switch(de.type){case"monitor":return a().createElement(Se.Z.Item,{key:"monitor"},a().createElement(Oe.Z,{to:"/training/learning/management/monitor?id=".concat(n.id)},a().createElement("p",{className:"cl-dropdown-menuitem"},I("common.monitor"))));case"edit":return a().createElement(Se.Z.Item,{key:"edit"},n.planStatus==="published"?a().createElement(M.Z,{placement:"left",title:I("common.operationTips")},a().createElement("p",{className:"cl-dropdown-menuitem  cl-disabled"},I("common.edit"))):a().createElement(Oe.Z,{to:"/training/learn/management/add?id=".concat(n.id)},a().createElement("p",{className:"cl-dropdown-menuitem"},I("common.edit"))));case"delete":return a().createElement(Se.Z.Item,{key:"delete"},a().createElement("p",{className:"cl-dropdown-menuitem",onClick:()=>this.deleteTaskItem(n)},I("common.delete")));case"extension":return a().createElement(Se.Z.Item,{key:"extension"},a().createElement("p",{className:"cl-dropdown-menuitem",onClick:()=>u(n)},I("common.postpone")));case"change":return a().createElement(Se.Z.Item,{key:"change"},a().createElement("p",{className:"cl-dropdown-menuitem",onClick:()=>x(n)},I("common.change")));case"editApproval":return a().createElement(Se.Z.Item,{key:"editApproval"},a().createElement("p",{className:"cl-dropdown-menuitem"},n.totalOperationCount===0?a().createElement("span",{className:"cl-pointer\u2014forbid cl-disabled"},I("authentication.editApprovals")):a().createElement("span",{onClick:()=>D(n)},I("authentication.editApprovals"))));case"release":return a().createElement(Se.Z.Item,{key:"release"},n.planStatus==="published"?a().createElement("p",{className:"cl-dropdown-menuitem",onClick:()=>J(n)},I("course.cancelRelease")):a().createElement(Oe.Z,{to:"/training/learn/management/add?id=".concat(n.id)},a().createElement("p",{className:"cl-dropdown-menuitem"},I("common.release"))));default:return null}}))},this.renderOperateBtn=o=>{var t=this.props,n=t.record,u=t.onRowEditApprovels,x=t.onChangeTaskDate,D=t.onChangeTaskUser,J=t.onCancelRelease,I=t.t;return o.map(de=>{switch(de.type){case"monitor":return a().createElement(a().Fragment,{key:de.type},a().createElement(Oe.Z,{to:"/training/learning/management/monitor?id=".concat(n.id,"&planStatus=").concat(n.planStatus)},a().createElement("span",{className:"cl-pointer"},I("common.monitor"))));case"edit":return a().createElement(a().Fragment,{key:de.type},n.planStatus==="published"?a().createElement(M.Z,{placement:"left",title:I("common.operationTips")},a().createElement("span",{className:"cl-pointer cl-disabled"},a().createElement("span",{className:"cl-pointer"},I("common.edit")))):a().createElement(Oe.Z,{to:"/training/learn/management/add?id=".concat(n.id)},a().createElement("span",{className:"cl-pointer"},I("common.edit"))));case"delete":return a().createElement(a().Fragment,{key:"delete"},a().createElement("span",{className:"cl-pointer",onClick:()=>this.deleteTaskItem(n)},I("common.delete")));case"extension":return a().createElement(a().Fragment,{key:"extension"},a().createElement("span",{className:"cl-pointer",onClick:()=>x(n)},I("common.postpone")));case"change":return a().createElement(a().Fragment,{key:"change"},a().createElement("span",{className:"cl-pointer",onClick:()=>D(n)},I("common.change")));case"editApproval":return a().createElement(a().Fragment,{key:"editApproval"},a().createElement("span",{className:"cl-pointer"},n.totalOperationCount===0?a().createElement("span",{className:"cl-pointer cl-disabled"},I("authentication.editApprovals")):a().createElement("span",{className:"cl-pointer",onClick:()=>u(n)},I("authentication.editApprovals"))));case"release":return a().createElement(a().Fragment,{key:"release"},n.planStatus==="published"?a().createElement("span",{className:"cl-pointer",onClick:()=>J(n)},I("course.cancelRelease")):a().createElement(Oe.Z,{to:"/training/learn/management/add?id=".concat(n.id)},a().createElement("span",{className:"cl-pointer"},I("common.release"))));default:return null}})},this.state={actions:(0,me.V9)("management",v.modules),whiteList:{zaraFlag:(0,g.UI)("ZARA_H5")}}}render(){var v=this.state.actions,o=this.props.record,t=o.planOperation==="has_operation",n=o.planStatus==="published",u=o.taskType===6?[{type:"monitor",visible:(0,me.H3)("monitor",v)},{type:"delete",visible:(0,me.H3)("delete",v)&&t}]:[{type:"monitor",visible:(0,me.H3)("monitor",v)},{type:"edit",visible:(0,me.H3)("edit",v)&&t},{type:"delete",visible:(0,me.H3)("delete",v)&&t},{type:"extension",visible:t&&n},{type:"change",visible:t&&n},{type:"editApproval",visible:t},{type:"release",visible:!0}],x=String(o.score_type)==="1"?u.filter(I=>I.type!=="edit"&&I.type!=="change"&&I.type!=="editApproval"):u.filter(I=>I.visible),D=[],J=[];if(x.length>1)J=[x[0]],D=[...x.slice(1)];else if(x.length===1)J=[x[0]];else return"/";return a().createElement("div",{className:"cl-table__cell-action"},J.some(I=>I.visible)?this.renderOperateBtn(J):this.renderOperateBtn(D),J.some(I=>I.visible)&&D.some(I=>I.visible)?a().createElement(a().Fragment,null,a().createElement(Ae.Z,{type:"vertical"}),a().createElement(d.Z,{overlay:this.moreOperate(D)},a().createElement("a",{className:"cl-pointer"},this.props.t("common.more")," ",a().createElement(ie.Z,null)))):null)}}ke.defaultProps={record:{},onRemove:()=>{},onChangeTaskDate:()=>{},onChangeTaskUser:()=>{}};var Be=(0,$.$j)(Ue)((0,h.Z)()(ke)),xe=e(30311),We=e(84874),je=e(36202),Ke=e(59857),$e=e(1360),Ge=e.n($e),be=e(60667);class Fe extends a().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var v=[{title:this.props.t("study.type"),dataIndex:"taskType",key:"id",width:120,fixed:this.props.appType==="wx_app"?!1:"left",render:(o,t)=>{var n="";switch(t.taskType){case 1:n=this.props.t("study.online");break;case 2:n=this.props.t("study.offline");break;case 3:n=this.props.t("study.hybrid");break;case 4:n=this.props.t("study.newEmployee");break;case 6:n=this.props.t("study.course");break;default:break}return a().createElement("div",null,n,t.containExam&&a().createElement("img",{alt:"\u8003\u8BD5\u4EFB\u52A1",src:Ge(),style:{margin:"0 0 5px 5px"}}),t.containEvaluation&&a().createElement(We.Z,{size:"16px",iconClass:"icon-ce",color:"red"}))},onCell:()=>({style:{minWidth:80,maxWidth:120}})},{title:this.props.t("study.taskName"),dataIndex:"title",key:"title",fixed:this.props.appType==="wx_app"?!1:"left",width:200,render:(o,t)=>t.taskType===6?a().createElement(M.Z,{placement:"topLeft",title:t.title},a().createElement("div",null,t.title)):a().createElement(M.Z,{placement:"topLeft",title:t.title},a().createElement("span",{className:"link-to-view cl-hover",onClick:()=>this.jumpView(t)},t.title))},{title:this.props.t("learning.learningProjectAddCategory"),dataIndex:"classify_name",key:"classify_name",width:100,render:(o,t)=>a().createElement(Ke.Z,{name:t.classify_name,full_name:t.classify_path_name})},{title:this.props.t("lineClass.organizationDepartment"),dataIndex:"departName",key:"departName",width:100,render:(o,t)=>a().createElement(M.Z,{placement:"topLeft",title:a().createElement(be.Z,{dataType:"departmentName",value:t.depart_id,name:o,type:t.depart_source_type})},a().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},a().createElement(be.Z,{dataType:"departmentName",value:t.depart_id,name:o,type:t.depart_source_type})||"--"))},{title:this.props.t("common.completed"),dataIndex:"finishUserCount",key:"finishUserCount",width:90},{title:this.props.t("common.qualifiedCount"),dataIndex:"qualifiedCount",key:"qualifiedCount",width:100,render:o=>o||"--"},{title:this.props.t("common.ongoing"),dataIndex:"onGoingUserCount",key:"onGoingUserCount",width:80,render:(o,t)=>t.onGoingUserCount>0?a().createElement(xe.Z,{name:t.onGoingUserCount,onClick:()=>this.props.showGoingDetail(t)}):t.onGoingUserCount},{title:this.props.t("common.overdue"),dataIndex:"unFinishUserCount",key:"unFinishUserCount",width:80},{title:this.props.t("common.completionRate"),dataIndex:"finishPercent",key:"finishPercent",width:100,render:(o,t)=>{var n=t.finishPercent;return n?"".concat(n,"%"):"--"}},{title:this.props.t("common.passRate"),dataIndex:"qualifiedRate",key:"qualifiedRate",width:100,render:o=>o?"".concat(o,"%"):"--"},{title:this.props.t("common.participationRate"),dataIndex:"joinRate",key:"joinRate",width:100,render:o=>o?"".concat(o,"%"):"--"},{title:this.props.t("exam.toBeGraded"),dataIndex:"pendingCount",key:"pendingCount",width:70,render:(o,t)=>o>0?a().createElement(xe.Z,{name:o,onClick:()=>this.props.showReadPaper(t)}):o},{title:this.props.t("lineClass.totalTrainingTime"),dataIndex:"total_training_time",key:"total_training_time",width:80,render:o=>"".concat(o).concat(this.props.t("common.minutes"))},{title:this.props.t("lineClass.onlineTrainingTime"),dataIndex:"online_training_time",key:"online_training_time",width:80,render:o=>"".concat(o).concat(this.props.t("common.minutes"))},{title:this.props.t("lineClass.offlineTrainingTime"),dataIndex:"offline_training_time",key:"offline_training_time",width:80,render:o=>"".concat(o).concat(this.props.t("common.minutes"))},{title:this.props.t("lineClass.stageCourseNum"),dataIndex:"stage_course_num",key:"stage_course_num",width:70,render:(o,t)=>t.stage_course_num>0?a().createElement(xe.Z,{name:t.stage_course_num,onClick:()=>this.props.showStage(t)}):t.stage_course_num},{title:this.props.t("lineClass.lecturerNum"),dataIndex:"lecturer_num",key:"lecturer_num",width:80,render:(o,t)=>t.lecturer_num>0?a().createElement(xe.Z,{name:t.lecturer_num,onClick:()=>this.props.showLecturerNum(t)}):t.lecturer_num},{title:this.props.t("lineClass.lecturerAveScore"),dataIndex:"lecturer_ave_score",key:"lecturer_ave_score",width:70,render:(o,t)=>t.lecturer_ave_score>0?a().createElement(xe.Z,{name:t.lecturer_ave_score,onClick:()=>this.props.showLecturerAveScore(t)}):t.lecturer_ave_score},{title:this.props.t("common.creator"),dataIndex:"creatorName",key:"creatorName",width:90,render:(o,t)=>a().createElement(be.Z,{dataType:"userName",value:t.creator_sync_user_id,name:o,type:t.creator_source_type})},{title:this.props.t("common.createTime"),dataIndex:"createTime",key:"createTime",width:145,render:(o,t)=>{var n=t.createTime;return(0,De.p6)(n,"yyyy-MM-dd hh:mm")},onCell:()=>({style:{minWidth:100}})},{title:this.props.t("study.duration"),dataIndex:"beginTime",key:"beginTime",width:270,render:(o,t)=>t.taskType===6?"--":"".concat((0,De.p6)(t.beginTime,"yyyy-MM-dd hh:mm")," ~ ").concat((0,De.p6)(t.endTime,"yyyy-MM-dd hh:mm")),onCell:()=>({style:{minWidth:120,maxWidth:270}})},{title:this.props.t("common.operate"),key:"operate",width:120,fixed:"right",render:(o,t)=>a().createElement(Be,{record:t,onRemove:this.props.onRemove,onChangeTaskDate:this.props.showChangeTaskDate,onChangeTaskUser:this.props.showChangeTaskUser,onRowEditApprovels:this.props.onRowEditApprovels,onCancelRelease:this.props.onCancelRelease})}];return v},this.jumpView=v=>{Oe.Z.targetTo({path:"/training/learn/management/view?id=".concat(v.id)})}}render(){var v=this.props,o=v.isLoading,t=v.taskList,n=v.headerTitle,u=v.toolBarRender,x=this.getTableColumn();return a().createElement(je.f,{scroll:{y:"100%",x:"max-content"},loading:o,dataSource:t,columns:x,rowKey:D=>D.id,pagination:!1,headerTitle:n,toolBarRender:u,tableUUID:"5863e669-72f2-4e9f-adc1-a197feb12b4f"})}}var ze=(0,$.$j)(V=>({appType:V.user.appType}))((0,h.Z)()(Fe));function Ve(V){var v=Z.ZP.StudyTaskList.getTaskList();if((0,g.UI)("ZARA_H5")){v=Z.ZP.StudyTaskList.getCustomTaskList();for(var o in V)V[(0,g.rT)(o)]=V[o]}return m.WY.get({url:v,params:V})}function Ye(V){var v=Z.ZP.StudyTaskList.getTypeCount();return m.WY.get({url:v,params:V})}function pt(V){var v=V.keyword,o=V.scope,t=V.queryIntervalType,n=V.projectId,u=V.studyTaskType,x=V.beginTime,D=V.endTime,J=V.classify,I=V.planStatus,de=CONFIG.StudyTaskList.exportTaskList();return de+="?access_token=".concat(window.localStorage.getItem("token"),"&keyword=").concat(v,"&scope=").concat(o,"&classify_id=").concat(J.length?J[J.length-1]:"","&query_interval_type=").concat(t,"&project_id=").concat(n,"&study_task_type=").concat(u,"&begin_time=").concat(x,"&end_time=").concat(D,"&plan_status=").concat(I),request.get({url:de})}function He(V){var v=V.planId,o=(0,g.UI)("ZARA_H5")?Z.ZP.EmployeeEdit.cancelCustomPublishPlan():Z.ZP.EmployeeEdit.cancelPublishPlan(),t={plan_id:v};return m.qg.post({url:o,data:t})}function Qe(V){return we.apply(this,arguments)}function we(){return we=(0,p.Z)(b().mark(function V(v){var o,t,n,u;return b().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return o=v.id,t=v.page_number,n=v.page_size,D.next=3,m.WY.get({url:Z.ZP.StudyTaskMonitor.getExamsData(o),params:{page_number:t,page_size:n,is_pending:!0}});case 3:if(u=D.sent,u.status!==200){D.next=6;break}return D.abrupt("return",{data:{code:"200000",data:(0,S.Z)({},u.data)}});case 6:return D.abrupt("return",u);case 7:case"end":return D.stop()}},V)})),we.apply(this,arguments)}var Je=e(4408),Xe=e(97593),qe=e(11449),et=e(87722),tt=e(63848),at=e(78509),st=e(95771),nt=e(64262),rt=e(66123),it=e(98233),Ne=f.Z.Option,he={pageNumber:1,pageSize:20};class ot extends a().Component{constructor(v){var o;super(v);o=this,this.onClassifyChange=t=>{he.pageNumber=1,this.setState({classify:t},()=>{this.getTaskList(),this.getTypeCount()})},this.onTreeSelectChange=t=>{he.pageNumber=1,this.setState({departmentId:t},()=>{this.getTaskList(),this.getTypeCount()})},this.onSearch=(t,n)=>{he.pageNumber=1,this.setState({keyword:t,userIds:n},()=>{this.getTaskList(),this.getTypeCount()})},this.onRowEdit=t=>{this.setState(n=>({approvalListProps:(0,S.Z)((0,S.Z)({},n.approvalListProps),{},{visible:!0,entityId:t.id,createUserId:t.creatorId})}))},this.handleSelect=t=>{he.pageNumber=1,this.setState({scope:t},()=>{this.getTaskList(),this.getTypeCount()})},this.renderSelect=()=>{var t=this.props.t,n=[{name:t("common.all"),value:"all"},{name:t("workbench.myCreation"),value:"my"},{name:t("workbench.myCharge"),value:"responsible_by_me"}];return a().createElement(f.Z,{value:this.state.scope,style:{marginLeft:16,lineHeight:"31px",width:245},onChange:this.handleSelect},n.map(u=>a().createElement(Ne,{key:u.value,value:u.value},u.name)))},this.onChangeTaskUser=()=>{this.cancelChangeTaskUser(),this.getTaskList()},this.onChangeTaskDate=()=>{this.cancelChangeTaskDate(),this.getTaskList()},this.onRemove=()=>{this.getTaskList(),this.getTypeCount()},this.getPendingPaperList=t=>Qe((0,S.Z)({},t)),this.handlePendingCancel=()=>{var t=this.state.pendingListConfig;t.visible=!1,t.id="",this.setState({pendingListConfig:t})},this.getTaskList=()=>{var t=this.state,n=t.keyword,u=t.scope,x=t.queryIntervalType,D=t.projectId,J=t.studyTaskType,I=t.beginTime,de=t.endTime,Ee=t.classify,Le=t.planStatus,ye=t.timeType,Re=t.departmentId,Ie=t.userIds,Ze=he.pageNumber,_e=he.pageSize;this.setState({isLoading:!0}),Ve({timeType:ye,keyword:Ie?"":n,scope:u,studyTaskType:J,classify_id:Ee.length?Ee[Ee.length-1]:"",queryIntervalType:x,pageSize:_e,pageNumber:Ze,projectId:D,beginTime:I,endTime:de,planStatus:Le,department_id:Re,userIds:Ie}).then(Me=>{this.setState({isLoading:!1,taskList:Me.data.list,taskTotal:Me.data.total})})},this.getTypeCount=()=>{var t=this.state,n=t.scope,u=t.projectId,x=t.studyTaskType,D=t.beginTime,J=t.endTime,I=t.classify,de=t.keyword,Ee=t.timeType,Le=t.departmentId,ye=this.props.t;Ye({timeType:Ee,keyword:de,scope:n,projectId:u,studyTaskType:x,beginTime:D,endTime:J,classify_id:I.length?I[I.length-1]:"",departmentId:Le}).then(Re=>{var Ie=Re.data,Ze=Ie.endCount,_e=Ie.onGoingCount,Me=Ie.totalCount,ct=Ie.notStartCount,dt=Ie.publishedCount,ut=Ie.unpublishedCount;this.setState({radioList:[{name:"".concat(ye("common.all"),"(").concat(Me,")"),value:""},{name:"".concat(ye("courseManage.published"),"(").concat(dt,")"),value:"published"},{name:"".concat(ye("courseManage.unPublished"),"(").concat(ut,")"),value:"unpublished"}],selectList:[{name:"".concat(ye("common.all"),"(").concat(Me,")"),value:0},{name:"".concat(ye("common.notStarted"),"(").concat(ct,")"),value:1},{name:"".concat(ye("common.ongoing"),"(").concat(_e,")"),value:2},{name:"".concat(ye("common.ended"),"(").concat(Ze,")"),value:3}]})})},this.handleChangeDateRange=t=>{var n=t.dateStrings;he.pageNumber=1,this.setState({beginTime:n[0],endTime:n[1]},()=>{this.getTaskList(),this.getTypeCount()})},this.pageChange=t=>{he.pageNumber=t,this.getTaskList()},this.pageSizeChange=(t,n)=>{he.pageSize=n,this.getTaskList()},this.handleChangeTimeType=t=>{he.pageNumber=1,this.setState({timeType:t},()=>{this.getTaskList(),this.getTypeCount()})},this.handleChangeTaskType=t=>{he.pageNumber=1,this.setState({studyTaskType:t},()=>{this.getTaskList(),this.getTypeCount()})},this.handleCancelRelease=t=>{var n=this.props.t;C.Z.confirm({title:n("common.tip"),icon:a().createElement(s.Z,null),content:n("study.afterTheReleaseTaskNotBeVisible"),onOk:()=>{He({planId:t.id}).then(u=>{u.data.code===0?(this.getTaskList(),this.getTypeCount(),r.default.success(n("study.cancelSuccessful"))):u.data.code!==1&&r.default.warning(u.data.msg)}).catch(()=>{this.getTaskList(),this.getTypeCount()})}})},this.showChangeTaskDate=t=>{var n=this.state.changeTaskDateConfig;n.visible=!0,n.planId=t.id,n.startTime=t.beginTime,this.setState({changeTaskDateConfig:n})},this.cancelChangeTaskDate=()=>{var t=this.state.changeTaskDateConfig;t.visible=!1,this.setState({changeTaskDateConfig:t})},this.showChangeTaskUser=t=>{var n=this.state.changeTaskUserConfig;n.visible=!0,n.planId=t.id,this.setState({changeTaskUserConfig:n})},this.cancelChangeTaskUser=()=>{var t=this.state.changeTaskUserConfig;t.visible=!1,this.setState({changeTaskUserConfig:t})},this.cancelOnGoingUser=()=>{var t=this.state.onGoingUserConfig;t.visible=!1,this.setState({onGoingUserConfig:t})},this.showGoingDetail=t=>{if(t.onGoingUserCount!==0){var n=this.state.onGoingUserConfig;n.visible=!0,n.planId=t.id,n.publishStatus=t.planStatus,this.setState({onGoingUserConfig:n})}},this.showReadPaper=function(){var t=(0,p.Z)(b().mark(function n(u){var x,D;return b().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(u.pendingCount===0||u.course_mapping_list.length===1&&u.readingOperation!=="has_operation")){I.next=3;break}return r.default.warning(o.props.t("examination.cannotMark")),I.abrupt("return");case 3:if(u.course_mapping_list.length!==1){I.next=10;break}return I.next=6,(0,it.Md)(u.course_mapping_list[0].courseType===15,{id:u.course_mapping_list[0].courseId,taskId:u.id,status:"pending",from:"projectNew"});case 6:x=I.sent,u.course_mapping_list[0].courseType===15?Oe.Z.targetTo({path:x}):L.m8.push(x),I.next=14;break;case 10:D=o.state.pendingListConfig,D.visible=!0,D.id=u.id,o.setState({pendingListConfig:D});case 14:case"end":return I.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),this.showStage=t=>{if(t.stageCourseNum!==0){var n=this.state.stageTaskDetailConfig;n.visible=!0,n.detail=t,this.setState({stageTaskDetailConfig:n})}},this.showLecturerNum=t=>{if(t.lecturerNum!==0){var n=this.state.lecturerNumScoreConfig;n.visible=!0,n.detail=t,n.title=this.props.t("component.lecturer"),this.setState({lecturerNumScoreConfig:n,lecturerNumScoreFrom:"lecturerNum"})}},this.showLecturerAveScore=t=>{if(t.lecturerAveScore!==0){var n=this.state.lecturerNumScoreConfig;n.visible=!0,n.title=this.props.t("lecturerPage.lecturerStar"),n.detail=t,this.setState({lecturerNumScoreConfig:n,lecturerNumScoreFrom:"lecturerAveScore"})}},this.cancelWaitReadPaper=()=>{var t=this.state.waitReadPaperConfig;t.visible=!1,this.setState({waitReadPaperConfig:t})},this.handleChangeType=t=>{he.pageNumber=1,this.setState({planStatus:t},()=>{this.getTaskList()})},this.closeApprovalList=()=>{this.setState(t=>({approvalListProps:(0,S.Z)((0,S.Z)({},t.approvalListProps),{},{visible:!1,entityId:"",createUserId:""})}))},this.handleDownload=()=>{var t=this.state,n=t.keyword,u=t.scope,x=t.queryIntervalType,D=t.projectId,J=t.studyTaskType,I=t.beginTime,de=t.endTime,Ee=t.classify,Le=t.planStatus,ye=t.timeType,Re=t.departmentId;(0,Xe.N)({page:"learningTaskManagement",props:this.props,query:"?".concat(i.stringify({access_token:window.localStorage.getItem("token"),keyword:n,scope:u,classify_id:Ee.length?Ee[Ee.length-1]:"",query_interval_type:x,project_id:D,study_task_type:J,begin_time:I,end_time:de,plan_status:Le,time_type:ye,department_id:Re}))})},this.handleQueryRowSelectChange=t=>{he.pageNumber=1,this.setState({queryIntervalType:t},()=>{this.getTaskList()})},this.renderTimeType=()=>{var t=this.props.t,n=[{label:t("common.createTime"),value:"createTime"},{label:t("common.beginTime"),value:"beginTime"},{label:t("common.endTime"),value:"endTime"}];return a().createElement(f.Z,{style:{width:120},defaultValue:n[0].value,onChange:this.handleChangeTimeType},n.map(u=>a().createElement(Ne,{value:u.value,key:u.value},u.label)))},this.renderSelectType=()=>{var t=this.props.t,n=[{label:t("common.all"),value:""},{label:t("study.course"),value:"course"},{label:t("study.online"),value:"online"},{label:t("study.offline"),value:"under_line"},{label:t("study.studyExam"),value:"study_exam"},{label:t("study.hybrid"),value:"blend"}];return a().createElement(f.Z,{className:"user-panel-filter-score",style:{width:120,marginRight:"16px",marginBottom:"10px"},placeholder:t("study.type"),defaultValue:n[0].value,onChange:this.handleChangeTaskType},n.map(u=>a().createElement(Ne,{value:u.value,key:u.value},u.label)))},this.renderLeftRow=()=>{var t=this.props.t,n=this.state.actions,u=i.parse(L.m8.location.search),x=u.renderGuide,D=x===void 0?!1:x;return a().createElement(c.Z,{showBtn:(0,me.H3)("add",n),actionText:t("study.newTask"),tabLink:"/training/learn/management/add",onDownload:this.handleDownload,popOverProps:[{contentText:t("newUserGuidance.createStudyTaskIntro")}],renderGuide:D,showDownloadBtn:!0,onSelectChange:this.handleQueryRowSelectChange})},this.renderRightRow=()=>{var t=this.state,n=t.radioList,u=t.planStatus,x=t.selectList,D=this.props.t;return a().createElement(y.Z,{label:D("common.myCreated"),radioList:n,radioValue:u,onRadiosChange:this.handleChangeType,onSearch:this.onSearch,showCheckbox:!1,showRenderSelect:!0,selectList:x,onSelectChange:this.handleQueryRowSelectChange})},this.state={actions:(0,me.V9)("management",v.modules),keyword:"",scope:"all",studyTaskType:"",queryIntervalType:0,taskList:[],classify:[],departmentId:"",taskTotal:0,radioList:[],beginTime:"",endTime:"",planStatus:"",isLoading:!1,changeTaskDateConfig:{visible:!1,planId:"",startTime:new Date().getTime(),onCancel:this.cancelChangeTaskDate,onOk:this.onChangeTaskDate},changeTaskUserConfig:{visible:!1,planId:"",onCancel:this.cancelChangeTaskUser,onOk:this.onChangeTaskUser},onGoingUserConfig:{visible:!1,planId:"",onCancel:this.cancelOnGoingUser,onOk:this.cancelOnGoingUser},waitReadPaperConfig:{visible:!1,planId:"",onCancel:this.cancelWaitReadPaper,onOk:this.cancelWaitReadPaper},stageTaskDetailConfig:{visible:!1,detail:{}},lecturerNumScoreConfig:{visible:!1,detail:{},title:""},lecturerNumScoreFrom:"",projectId:"",approvalListProps:{entityType:"study",entityId:"",createUserId:"",visible:!1},selectList:[],timeType:"createTime",userIds:"",pendingListConfig:{visible:!1,uuid:"5331c9a5-5f67-4a89-847d-a74d47636518",getList:this.getPendingPaperList,onCancel:this.handlePendingCancel,from:"task"}}}componentDidMount(){var v=i.parse(this.props.location.search),o=v.fromWorkScope;this.props.dispatch({type:"publicVariable/getHasMenusPermissions",payload:{flag:"TrainingCamp"}}),v.projectId?this.setState({projectId:v.projectId,queryIntervalType:0},()=>{this.getTaskList(),this.getTypeCount()}):o?this.setState({scope:o},()=>{this.getTaskList(),this.getTypeCount()}):(this.getTaskList(),this.getTypeCount())}componentWillUnmount(){he.pageNumber=1,he.pageSize=20}render(){var v=this.state,o=v.taskList,t=v.taskTotal,n=v.isLoading,u=v.changeTaskDateConfig,x=v.changeTaskUserConfig,D=v.onGoingUserConfig,J=v.pendingListConfig,I=v.approvalListProps,de=v.classify,Ee=v.stageTaskDetailConfig,Le=v.lecturerNumScoreConfig,ye=v.lecturerNumScoreFrom,Re=(0,S.Z)((0,S.Z)({},Z.XE.INITIAL_PAGINATION),{},{current:he.pageNumber,total:t,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange}),Ie=this.props,Ze=Ie.t,_e=Ie.userLng;return a().createElement(qe.Z,{pageContainerParams:{header:{title:Ze("leftMenuLists.learningTask")}}},a().createElement(Je.Z,{title:Ze("common.studyTask")}),a().createElement("div",{className:"study-task sticky-table"},a().createElement("div",{className:"study-task-container"},a().createElement("div",{className:"study-task-list"},a().createElement("div",{className:"study-task-list-top_search"},this.renderTimeType(),a().createElement(et.Z,{format:"YYYY-MM-DD",onCustomChange:this.handleChangeDateRange,showTime:!1,className:"cl-search-normal-width"}),a().createElement(nt.Z,{placeholder:Ze("lineClass.selectDept"),className:"cl-search-normal-width",parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,handleTreeSelectChange:this.onTreeSelectChange}),this.renderSelectType(),a().createElement("div",{className:"study-task-select-padding"},a().createElement(tt.Z,{onChange:this.onClassifyChange,value:de,unclassified:!0,showLabel:!1,className:"cl-search-normal-width"})),this.renderSelect()),a().createElement("div",{className:"study-task-list-table",ref:Me=>{this.tableRef=Me}},a().createElement(ze,{lng:_e.lng,taskList:o,isLoading:n,showGoingDetail:this.showGoingDetail,showReadPaper:this.showReadPaper,showLecturerAveScore:this.showLecturerAveScore,showLecturerNum:this.showLecturerNum,showStage:this.showStage,onRemove:this.onRemove,showChangeTaskDate:this.showChangeTaskDate,showChangeTaskUser:this.showChangeTaskUser,onRowEditApprovels:this.onRowEdit,onCancelRelease:this.handleCancelRelease,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow})),t>he.pageSize||!Re.hideOnSinglePage?a().createElement("div",{className:"study-task-list-pagination"},a().createElement(G.Z,Re)):null)),a().createElement(A,u),a().createElement(ge,x),a().createElement(oe,D),J.visible&&a().createElement(rt.t,J),a().createElement(l.Z,(0,_.Z)({},I,{isHasTutor:!0,closeApprovalList:this.closeApprovalList})),a().createElement(at.Z,(0,_.Z)({},Ee,{sourceType:"study_plan",onCancel:()=>{this.setState({stageTaskDetailConfig:{visible:!1,detail:{}}})}})),a().createElement(st.Z,(0,_.Z)({},Le,{from:ye,sourceType:"study_plan",onCancel:()=>{this.setState({lecturerNumScoreConfig:{visible:!1,detail:{},title:""}})}}))))}}var lt=(0,L.$j)(V=>({modules:V.user.modules,userLng:V.user,themeColor:V.advancedSetting.themeColor}))((0,h.Z)()(ot))},31945:function(ue,F,e){"use strict";e.d(F,{Z:function(){return ge}});var _=e(88983),Y=e(47933),G=e(20228),p=e(11382),E=e(62029),r=e(30887),U=e(99210),C=e(59250),S=e(13013),O=e(57663),f=e(71577),W=e(63185),b=e(9676),T=e(71194),a=e(57016),h=e(88986),L=e(34792),i=e(48086),s=e(43358),c=e(34041),y=e(12924),l=e.n(y),B=e(28216),R=e(91768),j=e(57254),K=e(18329);class X extends l().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var d=this.props,k=d.visible,M=d.courseList,ae=d.t;return l().createElement(K.ZP,{visible:k,title:ae("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},l().createElement("div",{className:"referenceWithOtherCourses"},l().createElement("div",{className:"referenceWithOtherCourses__tip"},ae("course.deleteCourseTip")),M.map((se,z)=>l().createElement("div",{className:"referenceWithOtherCourses__item",key:z},M.length>1?"".concat(z+1,"\u3001"):null," ",se))))}}var ee=(0,R.Z)()(X),w=e(10237),Z=e(63848),m=e(58546),g=e(30389),N=e(54792),P=e(86726),A=e(37055),$=c.Z.Option,H={setClassify:A.ZP.CourseManageList.setClassify,setScore:A.ZP.CourseManageList.setScore,setBatchEmployee:A.ZP.CourseManageList.setBatchEmployee,deleteCourse:A.ZP.CourseManageList.deleteCourse,exportCourseView:A.ZP.CourseManageList.exportCourseView,syncCourse:A.ZP.CourseManageList.syncCourse},te=ve=>({qyShield:ve.user.qyShield});class ne extends l().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=d=>{this.props.onClassifyChange(d)},this.handleChangeType=d=>{this.props.onTypeChange(d)},this.handleChangeCourseType=d=>{this.props.onCourseTypeChange(d)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=d=>{var k=d.node,M=this.props,ae=M.selectedCourseIds,se=M.selectedProjectIds,z=M.onForceRender,q=M.t,ie=k.id;ie&&w.qg.post({url:H.setClassify(),data:{course_ids:ae.join(","),project_ids:se.join(","),classify_id:ie}}).then(()=>{i.default.success(q("course.setCourseClassifySuccess")),z()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(d=>({scoreProps:(0,h.Z)((0,h.Z)({},d.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(d=>({scoreProps:(0,h.Z)((0,h.Z)({},d.scoreProps),{},{visible:!1})}))},this.handleScoreOk=d=>{var k=d.value;if(k===0){this.handleScoreCancel();return}var M=this.props,ae=M.selectedCourseIds,se=M.selectedProjectIds,z=M.onForceRender,q=M.t;w.qg.post({url:H.setScore(),data:{course_ids:ae.join(","),project_ids:se.join(","),credit:k}}).then(()=>{i.default.success(q("course.setCourseScoreSuccess")),z()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(d=>({employeeProps:(0,h.Z)((0,h.Z)({},d.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=d=>{var k=this.props,M=k.selectedCourseIds,ae=k.selectedProjectIds,se=k.onForceRender,z=k.t,q=d.isAll,ie=d.departmentIds,Ce=d.groupIds,pe=d.postIds,fe=d.userIds,Pe=d.qy_we_chat_vo;w.WY.post({url:H.setBatchEmployee(),data:{course_ids:M.join(","),project_ids:ae.join(","),department_ids:ie,group_ids:Ce,is_all:q,post_ids:pe,user_ids:fe,qy_we_chat_vo:Pe}}).then(()=>{i.default.success(z("personal.batchSetRangeSuccess")),se()}),this.handleEmployeeCancel()},this.showReferenceCourseList=d=>{this.setState(k=>({showReferenceCourseListProps:(0,h.Z)((0,h.Z)({},k.showReferenceCourseListProps),{},{visible:!k.showReferenceCourseListProps.visible,courseList:d||[]})}))},this.actionDelete=()=>{var d=this.props,k=d.selectedCourseIds,M=d.selectedProjectIds,ae=d.list,se=d.onForceRender,z=d.t,q=0,ie=0,Ce=[];if(ae.forEach(pe=>{k.includes(pe.course_id)&&(pe.reference_plan_count>0&&(ie+=1),pe.reference_plan_count>0&&Ce.push(pe.title),pe.can_delete==="true"&&(q+=1))}),ie>0)this.showReferenceCourseList(Ce);else if(q!==k.length)i.default.warning(z("personal.deletePlatformCourseTip"));else{if(M.length>0){i.default.warning(z("personal.deleteProjectCourseTip"));return}a.Z.confirm({title:z("common.tip"),content:z("common.confirmDeleteTitle"),onOk(){w.qg.post({url:H.deleteCourse(),data:{enterpriseId:A.ZP.enterpriseId,ids:k.join(","),project_ids:M.join(",")}}).then(pe=>{var fe=pe.data,Pe=fe.code,Te=fe.msg;i.default["".concat(Pe===0?"success":"warning")](Te),Pe===0&&se()})}})}},this.actionSyncSetting=()=>{this.setState(d=>({asyncProps:(0,h.Z)((0,h.Z)({},d.asyncProps),{},{visible:!0})}))},this.onAsyncChange=d=>{this.setState(k=>({asyncProps:(0,h.Z)((0,h.Z)({},k.asyncProps),{},{value:d.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var d=this.props,k=d.selectedCourseIds,M=d.selectedProjectIds,ae=d.onForceRender,se=d.t,z=this.state.asyncProps;w.qg.post({url:H.syncCourse(),data:{course_ids:k.join(","),project_ids:M.join(","),syncProgress:z.value}}).then(q=>{var ie=q.data,Ce=ie.code,pe=ie.msg;Ce===0?(i.default.success(se("setting.setUpSucceed")),ae()):i.default.warning(pe)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var d=this.props,k=d.selectedCourseIds,M=d.selectedProjectIds,ae=d.onForceRender,se=d.t;if(k.concat(M).length>20){i.default.warning(se("courseManage.exportMoreTip"));return}var z=H.exportCourseView(),q={course_Ids:k.join(","),project_Ids:M.join(",")};w.WY.get({url:z,params:q}).then(ie=>{ie.data.code===200&&i.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),ae(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var d=A.ZP.downLoadCenter.getDownLoadingCount();w.WY.get({url:d,params:{}}).then(k=>{sessionStorage.setItem("downloadingCount",k.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:k.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=d=>{this.props.onCheckboxChange(d.target.checked)},this.handleSharingQueryRowCheckboxChange=d=>{this.props.onSharingCheckboxChange(d.target.checked)},this.renderCondition=()=>{var d=this.props,k=d.prefixCls,M=d.params,ae=d.qyShield,se=d.t,z=M.classify_id?M.classify_id.split(","):[];return l().createElement("div",{className:"".concat(k,"__condition")},this.props.extraDom&&this.props.extraDom(),l().createElement(Z.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:z,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),l().createElement(c.Z,{value:M.type,className:"cl-search-normal-width",onChange:this.handleChangeType},l().createElement($,{value:""},this.props.t("courseManage.allOrigin")),l().createElement($,{value:"original"},this.props.t("courseManage.originalCourse")),l().createElement($,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),l().createElement($,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:l().createElement(c.Z,{value:M.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},l().createElement($,{value:"all"},this.props.t("courseManage.allType")),l().createElement($,{value:"course"},this.props.t("common.courseLabel")),l().createElement($,{value:"microCourse"},this.props.t("common.microCourse")),l().createElement($,{value:"project"},this.props.t("leftMenuLists.studyProject"))),l().createElement(b.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},se("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&ae==="false"?l().createElement(b.Z,{onChange:this.handleSharingQueryRowCheckboxChange},se("common.sharing")):null)},this.renderActions=()=>{var d=this.props,k=d.prefixCls,M=d.selectedCourseIds,ae=d.selectedProjectIds,se=d.showNum,z=se===void 0?1:se,q=this.props.allowActions,ie=(0,P.H3)("delete",q),Ce=(0,P.H3)("adjustment_classification",q),pe=(0,P.H3)("set_visible",q),fe=(0,P.H3)("export",q),Pe=(0,P.H3)("set_score",q),Te=(0,P.H3)("progressSync",q),De=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:Ce},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:fe},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:Pe},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:pe},{name:this.props.t("common.delete"),type:"actionDelete",isShow:ie},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:Te}],Q=De.filter(le=>le.isShow),re=[],oe=[];if(Q.length)z?(re=[...Q.slice(0,z)],oe=[...Q.slice(z)]):oe=[...Q];else return null;return l().createElement("div",{className:"".concat(k,"__action")},re.map(le=>l().createElement(f.Z,{style:{marginRight:"8px"},key:le.type,disabled:!(M.length+ae.length),onClick:this[le.type]},le.name)),oe.length?l().createElement(S.Z,{disabled:!(M.length+ae.length),overlay:this.renderMoreButton({buttons:oe})},l().createElement(f.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",l().createElement(j.Z,null))):"")}}renderMoreButton(d){var k=d.buttons,M=this.props,ae=M.selectedCourseIds,se=M.selectedProjectIds;return l().createElement(U.Z,{onClick:z=>{var q=z.key;this[q]()}},k.map(z=>z.isShow?l().createElement(U.Z.Item,{key:z.type,disabled:!(ae.length+se.length)},l().createElement("span",{className:"cl-pointer"},z.name)):null))}render(){var d=this.props,k=d.prefixCls,M=d.t,ae=d.showRenderCondition,se=ae===void 0?!0:ae,z=d.showRenderActions,q=z===void 0?!0:z,ie=this.state,Ce=ie.classifyProps,pe=ie.scoreProps,fe=ie.employeeProps,Pe=ie.showReferenceCourseListProps,Te=ie.asyncProps;return l().createElement("div",{className:k},se&&this.renderCondition(),q&&this.renderActions(),l().createElement(m.Z,(0,E.Z)({},Ce,{title:M("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),l().createElement(N.Z,(0,E.Z)({},pe,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),fe.visible&&l().createElement(g.Z,(0,E.Z)({},fe,{title:M("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:M("component.chooseVisibleScope")},isLoading:!fe.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),Te.visible&&l().createElement(K.ZP,{wrapClassName:"cl-async-selector-modal",visible:Te.visible,title:M("common.scheduleSyncSetting"),okText:M("common.ok"),cancelText:M("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},Te.visible?l().createElement("div",{className:"".concat(k,"__async")},l().createElement("p",null," ",M("common.scheduleSyncSettingTip")),l().createElement(Y.ZP.Group,{onChange:this.onAsyncChange,value:Te.value},l().createElement(Y.ZP,{value:0},M("common.outSync")),l().createElement(Y.ZP,{value:1},M("common.synchronization")))):l().createElement(p.Z,{size:"large"})),l().createElement(ee,(0,E.Z)({},Pe,{showReferenceCourseList:this.showReferenceCourseList})))}}ne.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var ge=(0,R.Z)()((0,B.$j)(te)(ne))},67479:function(ue,F,e){"use strict";e.d(F,{D:function(){return C},W:function(){return O}});var _=e(57361),Y=e(9754),G=e.n(Y),p=e(57068),E=e(31916),r=e(38642),U=e(5430);function C(f){return S.apply(this,arguments)}function S(){return S=(0,_.Z)(G().mark(function f(W){var b,T,a,h,L;return G().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,(0,E.uH)();case 3:if(b=s.sent,b!=="old"){s.next=6;break}return s.abrupt("return",!1);case 6:return s.next=8,(0,E.fP)(W);case 8:if(T=s.sent,a=T.data,h=a.code,L=a.data,h!=="200000"){s.next=14;break}return s.abrupt("return",L.exam_type==="new");case 14:s.next=20;break;case 16:return s.prev=16,s.t0=s.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",s.t0),s.abrupt("return",!1);case 20:case"end":return s.stop()}},f,null,[[0,16]])})),S.apply(this,arguments)}var O={examing:function(){var f=(0,_.Z)(G().mark(function b(T){var a,h,L;return G().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a="",h=T.pageFrom==="ding_myExamTask"?(0,r.lz)(U.ZP.enterpriseId,"student"):"",s.next=4,C(T.exam_id);case 4:return L=s.sent,L?a="".concat(h,"/training/examination/new-exam/examing?").concat(p.stringify(T)):a="".concat(h,"/training/examination/exam/personal?").concat(p.stringify(T)),s.abrupt("return",a);case 7:case"end":return s.stop()}},b)}));function W(b){return f.apply(this,arguments)}return W}(),parse:f=>"/training/examination/new-exam/parse?".concat(p.stringify(f)),examData:f=>"/training/examination/exam-data?exam_id=".concat(f.exam_id,"&task_id=").concat(f.task_id),marking:f=>"/training/examination/new-exam/marking?".concat(p.stringify(f))}},98233:function(ue,F,e){"use strict";e.d(F,{nn:function(){return U},OV:function(){return O},Md:function(){return W},uk:function(){return r}});var _=e(57361),Y=e(9754),G=e.n(Y),p=e(57068),E=e(67479),r={edit:T=>"/training/learning/project/add?".concat(p.stringify(T)),monitorDetail:T=>{var a=T.id,h=T.projectId,L=T.origin,i=T.tab;return"/training/trainingProject/monitor?id=".concat(a,"&projectId=").concat(h,"&origin=").concat(L,"&tab=").concat(i)},traineeView:T=>"/training/trainingProject/traineeView?".concat(p.stringify(T)),manageView:T=>"/training/trainingProject/manageView?".concat(p.stringify(T)),previewView:T=>"/training/trainingProject/previewView?".concat(p.stringify(T))};function U(T){var a=T.origin,h=T.search,L=h===void 0?"":h,i={project:"/knowledgeBase/project/examination/newPlan/detail?".concat(L),learning:"/training/learning/examination/newPlan/detail?".concat(L),employee:"/training/employee/examination/newPlan/detail?".concat(L),exam:"/training/examination/newPlan/detail?".concat(L)};return i[a]||"/training/examination/newPlan/detail?".concat(L)}function C(T,a){if(T){var h=p.stringify({id:a.id,title:a.title,origin:a.taskType,taskId:a.projectId});return U({origin:a.taskType,search:h})}var L=p.stringify({id:a.id,taskId:a.taskId,from:a.from,taskType:a.taskType,projectId:a.projectId});return"/training/learning/project/monitor/exam?".concat(L)}function S(T,a){return T?E.W.marking({exam_id:a.id,status:a.status,markScene:"manage"}):"/training/examination/plan/testPaper?id=".concat(a.id,"&from=").concat(a.from,"&taskId=").concat(a.taskId)}function O(){return f.apply(this,arguments)}function f(){return f=(0,_.Z)(G().mark(function T(){var a,h,L,i=arguments;return G().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=i.length>0&&i[0]!==void 0?i[0]:"unKnow",h=i.length>1?i[1]:void 0,a!=="unKnow"){c.next=7;break}return c.next=5,(0,E.D)(h.id);case 5:return L=c.sent,c.abrupt("return",C(L,h));case 7:return c.abrupt("return",C(a,h));case 8:case"end":return c.stop()}},T)})),f.apply(this,arguments)}function W(){return b.apply(this,arguments)}function b(){return b=(0,_.Z)(G().mark(function T(){var a,h,L,i=arguments;return G().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=i.length>0&&i[0]!==void 0?i[0]:"unKnow",h=i.length>1?i[1]:void 0,a!=="unKnow"){c.next=7;break}return c.next=5,(0,E.D)(h.id);case 5:return L=c.sent,c.abrupt("return",S(L,h));case 7:return c.abrupt("return",S(a,h));case 8:case"end":return c.stop()}},T)})),b.apply(this,arguments)}},1360:function(ue){ue.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzExNDU1ZC1iODBmLTQxZGUtOTBjYi1jYTAwZjNhYTJkOWUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REQ2NjA1MUQwMzMyMTFFOEJFNENDRUIzNUQyMjAzQzQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REQ2NjA1MUMwMzMyMTFFOEJFNENDRUIzNUQyMjAzQzQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYjQ0MTFmYy01NmI1LTQ0ZTYtYmJmYy1lNmM5YjA1N2E2MDEiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1ZTk2ZjFkZC1jOTNiLTExN2EtYmRlMC1lYzY4Yzc3ZTUzOWIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5ZIKdpAAABZklEQVR42pRTPWsCQRB9d1wCVuJHIYIWIoJY29jaqY2BdDkQIY2FqZJCSGthEIKFfyB/QQtbC/0BIv4AxU4PQbQwyWY263G3uT3IDfeO2dudN3NvZzR2f3cL4I3wQIjif2YRPgjPBr160LQ2NAMBLAL22QZjZ50WpjI4lQJqNX8KEfOo+5adSAClkvwtnwdaLfeXqOE5YJrCD4Wo0AjQ7Yr1bAZUq8B4LBdCIjLoN94KikWgXgc6HeE3m8BgAKxWzpnvi4vAnd1dwXYLZDKkuyVgGyeWCFQV8KyLBTAcqoVUEnD1Gw0gmbzeuOUN5NmvBIYkYKUCZLNCqNMJ2O2A5dIJPB5lDcgMaXM6Bfp9ZzceBwoF4cdiAnZ2D8F6LWDbaCSXzZsqnfb8jX//hsNALuesy2VgPlcS7JXdeDiIPrBtswEmk7+n9vwW3mmYnoINE6Pni8B6POqFHA3sYv5OWbBxfv0RYAA4IW4sncYEMQAAAABJRU5ErkJggg=="}}]);
