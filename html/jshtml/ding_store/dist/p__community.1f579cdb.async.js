(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3422],{4408:function(K,_,e){"use strict";var f=e(12924),r=e.n(f),P=e(28216),d=e(17780),y=e(38642),a=s=>({userInfo:s.user}),m=s=>{var t=s.title;return(0,d.xX)()&&setTimeout(()=>{document.title=t},0),(0,f.useEffect)(()=>{if(t&&document.title!==t&&setTimeout(()=>{document.title=t},0),(0,y.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var o=document.querySelector(".zoom-report");o&&(o.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[t]),r().createElement(r().Fragment,null)};m.defautProps={title:""},_.Z=(0,P.$j)(a)(m)},60667:function(K,_,e){"use strict";e.d(_,{Z:function(){return s}});var f=e(33565),r=e(12924),P=e.n(r),d=e(28216);function y(t){var o=t.type,i=t.openid,c=t.from,n=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{c==="vue"?window.parent.WWOpenData.bind(n.current):WWOpenData.bind(n.current)}),P().createElement("ww-open-data",{ref:n,type:o,openid:i})}var a=t=>{var o=t.wxWorkApiFlag,i=t.appType,c=t.from,n=(0,r.useState)(!1),M=(0,f.Z)(n,2),v=M[0],C=M[1];(0,r.useEffect)(()=>{var E=localStorage.getItem("qyWechatBook");(i!=="wx_app"||o||E==="false"||c==="vue"||c==="taro")&&C(!0)},[o,i,c]);var Z=(0,r.useCallback)(()=>{var E=t.type,l=t.value,I=t.name,N=I===void 0?"":I;switch(console.warn(t,"props"),E){case"wx_sync":{var B=t.dataType;return l?P().createElement(y,{from:c,type:B,openid:l}):N}default:return N}},[t]),W=()=>{var E=t.name,l=t.dataType,I=localStorage.getItem("qyWechatBook");if(l===""||I==="false")return E;if(c==="vue"||c==="taro")return Z();switch(t.appType){case"wx_app":return Z();default:return E}};return v?W():t.name};a.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var m=t=>({appType:t.user.appType,wxWorkApiFlag:t.user.wxWorkApiFlag}),s=(0,d.$j)(m)(a)},27114:function(K,_,e){"use strict";var f=e(62029),r=e(12924),P=e.n(r),d=e(38642),y=a=>{var m=()=>{(0,d.eJ)({url:"".concat(a.to)})};return P().createElement("a",(0,f.Z)({onClick:()=>m()},a),a.children)};_.Z=y},3179:function(K,_,e){"use strict";var f=e(12924),r=e.n(f),P=e(91768),d=e(85589),y=e.n(d);class a extends r().Component{constructor(s){super(s);this.renderImgAction=()=>{var t=this.state.imgUrls,o=t.length;return t.length>4&&(t=t.slice(0,4)),t.map((i,c)=>r().createElement("div",{className:"img-box",key:c},r().createElement("img",{src:i,alt:""}),c===3&&o>4&&r().createElement("div",{className:"mask"},"+".concat(o-4))))},this.state={imgUrls:[],text:""}}componentDidMount(){var s=this.props.content,t=s===void 0?"":s;if(typeof t=="object"){var o=t.content.split("<br/>");this.setState({imgUrls:t.imgs,text:o})}else{var i=y().createEditorState(t),c=i.toHTML(),n=document.createElement("div");n.innerHTML=c;for(var M=n.getElementsByTagName("img"),v=[],C=0;C<M.length;C++)v.push(M[C].src);this.setState({imgUrls:v,text:n.innerText})}}render(){var s=this.props,t=s.prefixCls,o=s.content,i=this.state.text;return o?r().createElement("div",{className:"".concat(t)},r().createElement("div",{className:"".concat(t,"-text-action")},r().createElement("div",null,Array.isArray(i)?i.map((c,n)=>r().createElement("p",{key:n},c)):i)),r().createElement("div",{className:"".concat(t,"-img-action")},this.renderImgAction())):null}}a.defaultProps={prefixCls:"display-content",content:""},_.Z=(0,P.Z)()(a)},5835:function(K,_,e){"use strict";var f=e(49111),r=e(19650),P=e(94233),d=e(67869),y=e(71153),a=e(60331),m=e(12924),s=e.n(m),t=e(91768),o=e(2390),i=e(3179),c=e(38642),n=e(84874),M=e(27114),v=e(60667);class C extends m.Component{constructor(W){super(W);this.isJsonString=E=>{try{if(typeof JSON.parse(E)=="object")return!0}catch(l){return!1}return!1},this.state={}}render(){var W,E=this.props,l=E.itemData,I=E.t,N=E.type,B=N===void 0?"":N,V=E.isSearch,k=V===void 0?!1:V,q=(l==null?void 0:l.refType)==="ARTICLE"?I("community.publishArtTips"):I("community.answerQuestionTips"),Y=(l==null?void 0:l.refType)==="ARTICLE"?"/community/articleDetail":"/community/questionDetail",j=this.isJsonString(l.content)?JSON.parse(l.content).content:l.content;return s().createElement("div",{className:"home-list-item-box"},s().createElement("div",{className:"home-list-item-header"},s().createElement(M.Z,{to:"".concat(Y,"?id=").concat(l.refId),className:"home-list-item-title"},l.isTop===1&&!k&&B.toLowerCase()!=="question"&&s().createElement(a.Z,{color:"blue"},I("community.prePosition")),l.title),(l==null?void 0:l.space)&&s().createElement(o.rU,{to:"community/myCircle?id=".concat(l.space.id),className:"home-list-item-link"},l.space.name)),B!=="question"&&s().createElement("div",null,s().createElement(r.Z,{size:8,align:"center",style:{margin:"10px 0"}},s().createElement(d.C,{size:24,src:(l==null||(W=l.author)===null||W===void 0?void 0:W.avatar)||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png")}),s().createElement("div",{className:"home-list-item_name"},l&&s().createElement(v.Z,{dataType:"userName",value:l.author.user_id,name:l.author.name,type:l.author.source_type})),s().createElement("div",{className:"home-list-item_type"},q))),j&&s().createElement("div",{className:"home-list-item-content",onClick:()=>{(0,c.eJ)({url:"".concat(Y,"?id=").concat(l.refId)})}},s().createElement(i.Z,{content:j})),s().createElement("div",{className:"home-list-item-option"},s().createElement(r.Z,{size:10},l.refType==="ARTICLE"&&s().createElement("div",{type:"default",className:"home-list-item-option-btn"},s().createElement(r.Z,{size:3},s().createElement(n.Z,{iconClass:"icon-Comment",size:"14px"}),s().createElement("span",null,l.commentCount||0))),s().createElement("div",{type:"default",className:"home-list-item-option-btn"},s().createElement(r.Z,{size:3},s().createElement(n.Z,{iconClass:"icon-dianzan",size:"14px"}),s().createElement("span",null,l.stars||0)))),s().createElement("div",{className:"home-list-item-time"},(0,c.pi)(l.createTime))))}}_.Z=(0,t.Z)()(C)},71400:function(K,_,e){"use strict";var f=e(13062),r=e(71230),P=e(89032),d=e(15746),y=e(12924),a=e.n(y),m=e(91768),s=e(27114);class t extends y.PureComponent{render(){var i=this.props,c=i.circleList,n=c===void 0?[]:c,M=i.t;return a().createElement("div",{className:"circle-center-box"},a().createElement("div",{className:"circle-center-title"},a().createElement("div",null,M("community.group")),n.length>0&&a().createElement(s.Z,{to:"/community/moreGroup",className:"circle-center-link"},M("common.more"))),a().createElement("div",{className:"circle-center-body"},a().createElement(r.Z,{gutter:16},n.length>0?n.map(v=>a().createElement(d.Z,{span:6,key:v.id},a().createElement("div",{className:"circle-center-gutter-row"},a().createElement(s.Z,{to:"/community/myCircle?id=".concat(v.id),className:"circle-center-card"},a().createElement("img",{src:v.awatar}),a().createElement("span",{className:"circle-item-title"},v.name))))):a().createElement("div",{className:"no-group-tips"},M("community.noGroupTips")))))}}_.Z=(0,m.Z)()(t)},74266:function(K,_,e){"use strict";var f=e(13062),r=e(71230),P=e(89032),d=e(15746),y=e(12924),a=e.n(y),m=e(91768),s=e(28216),t=e(84874),o=e(27114),i,c,n=(i=(0,s.$j)(()=>({})),i(c=class extends y.Component{constructor(){super(...arguments);this.changeMyCenterTabs=v=>{var C=this.props.dispatch;C({type:"community/saveCreateCenterTab",payload:{activeMyTab:v}})}}render(){var v=this.props,C=v.questions,Z=v.answers,W=v.articles,E=v.showHeader,l=E===void 0?!1:E,I=v.t,N=[{title:I("community.myQuestion"),count:C,key:"question"},{title:I("community.myAnswer"),count:Z,key:"answer"},{title:I("community.myArticle"),count:W,key:"article"}];return a().createElement("div",{className:"create-center-box"},a().createElement(o.Z,{to:"/community/myCenter"},l&&a().createElement("div",{className:"create-center-title"},a().createElement("div",null,I("community.createCenter")),a().createElement(t.Z,{iconClass:"icon-f-arrow-right",fontSize:"18px",color:"#666"}))),a().createElement("div",{className:"create-center-body"},a().createElement(r.Z,{gutter:16},N.map(B=>a().createElement(d.Z,{key:B.key,className:"gutter-row",span:8},a().createElement(o.Z,{to:"/community/myCenter",onClick:()=>this.changeMyCenterTabs(B.key)},a().createElement("p",null,B.title),a().createElement("p",null,B.count)))))))}})||c);_.Z=(0,m.Z)()(n)},70110:function(K,_,e){"use strict";var f=e(12924),r=e.n(f),P=e(84874),d=e(27114);class y extends f.Component{constructor(m){super(m);this.state={}}render(){var m=this.props.cardList,s=m===void 0?[]:m;return r().createElement("div",{className:"guildLink_box"},s.map(t=>r().createElement("div",{className:"guildLink-container",key:t.id},r().createElement(d.Z,{to:t.link,className:"guildLink_card"},r().createElement("div",{className:"guildLink_card-bg",style:{background:t.backgroundColor||"#fff"}},r().createElement(P.Z,{iconClass:t.iconClass,size:"20px",color:t.color})),r().createElement("div",{className:"guild-card-title"},t.title)))))}}_.Z=y},22294:function(K,_,e){"use strict";var f=e(57663),r=e(71577),P=e(12924),d=e.n(P),y=e(38642);class a extends P.Component{constructor(s){super(s);this.state={}}backCommunityHome(){(0,y.eJ)({url:"/community"})}render(){var s=this.props.isShowHeader;return d().createElement("div",{className:"layer-layout-box"},s&&d().createElement("div",{className:"layer-layout-box-header"},d().createElement(r.Z,{onClick:this.backCommunityHome,type:"primary"},"\u8FD4\u56DE\u9996\u9875")),d().createElement("div",{className:"layer-layout-container"},this.props.children))}}a.defaultProps={isShowHeader:!1},_.Z=a},9168:function(K,_,e){"use strict";e.r(_),e.d(_,{default:function(){return ve}});var f=e(20228),r=e(11382),P=e(47673),d=e(4107),y=e(34792),a=e(48086),m=e(57361),s=e(18106),t=e(88108),o=e(9754),i=e.n(o),c=e(12924),n=e.n(c),M=e(91768),v=e(28216),C=e(10237),Z=e(37055),W=e(4408),E=e(38642),l=e(70110),I=e(22294),N=e(74266),B=e(71400),V=e(13254),k=e(14277),q=e(57663),Y=e(71577),j=e(88986),X=e(33565),de=e(5835);function ee(F){var A=F.t,g=F.prefixCls,p=F.type,D=(0,c.useState)([]),u=(0,X.Z)(D,2),O=u[0],h=u[1],R=(0,c.useState)({page:0,size:15,type:p}),L=(0,X.Z)(R,2),T=L[0],S=L[1],J=(0,c.useState)(0),x=(0,X.Z)(J,2),U=x[0],re=x[1],$=(0,c.useState)(!0),le=(0,X.Z)($,2),_e=le[0],ce=le[1],ye=function(){var z=(0,m.Z)(i().mark(function ie(){var oe,me,G,ue;return i().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return ce(!0),oe=Z.ZP.community.getHotList(),Q.next=4,C.WY.get({url:oe,params:T});case 4:me=Q.sent,G=me.data,G.code===0?(ue=G.data.content||[],h(O.concat(ue)),re(G.data.totalElements),ce(!1)):a.default.error(G.msg||A("community.isError"));case 7:case"end":return Q.stop()}},ie)}));return function(){return z.apply(this,arguments)}}();(0,c.useEffect)(()=>{ye()},[T]);var he=()=>{var z=T.page;S((0,j.Z)((0,j.Z)({},T),{},{page:z+1}))};return n().createElement(r.Z,{spinning:_e},n().createElement("div",{className:"".concat(g)},O.length>0?n().createElement(n().Fragment,null,O.map(z=>n().createElement(de.Z,{refType:z.refType,itemData:z,key:z.id,type:p})),n().createElement("div",{className:"".concat(g,"-bottom")},U>O.length?n().createElement(Y.Z,{type:"default",onClick:()=>he()},A("course.loadMore")):n().createElement("span",null,A("community.isBottom")))):n().createElement(k.Z,null)))}ee.defaultProps={prefixCls:"home-list-page",type:""};var w=(0,M.Z)()(ee),Ee=e(41279),te,ae,ne,H,b=t.Z.TabPane,se=(te=(0,v.$j)(F=>{var A=F.community;return{activeHomeTab:A.activeHomeTab}}),ae=Reflect.metadata("design:type",Function),ne=Reflect.metadata("design:paramtypes",[void 0]),te(H=ae(H=ne(H=class extends n().Component{constructor(A){var g;super(A);g=this,this.getMyCenterData=(0,m.Z)(i().mark(function p(){var D,u,O,h;return i().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return D=g.props.t,u=Z.ZP.community.getMyCenterData(),L.next=4,C.WY.get({url:u});case 4:O=L.sent,h=O.data,h.code===0?g.setState({answers:h.data.answers,articles:h.data.articles,questions:h.data.questions,loadCreateCenter:!1}):a.default.error(h.msg||D("community.isError"));case 7:case"end":return L.stop()}},p)})),this.getCircleData=function(){var p=(0,m.Z)(i().mark(function D(u){var O,h,R,L,T,S,J,x,U;return i().wrap(function($){for(;;)switch($.prev=$.next){case 0:return O=g.props.t,h=g.state,R=h.circlePageNum,L=h.circlePageSize,T=1,S=Z.ZP.community.getCircleData(T),J=u||{page:R,size:L},$.next=7,C.WY.get({url:S,params:J});case 7:x=$.sent,U=x.data,U.code===0?g.setState({circleList:U.data.content,circleTotalPage:U.data.totalPages,loadGroup:!1}):a.default.error(U.msg||O("community.isError"));case 10:case"end":return $.stop()}},D)}));return function(D){return p.apply(this,arguments)}}(),this.getHotTopic=(0,m.Z)(i().mark(function p(){var D,u,O,h,R;return i().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return D=g.props.t,u=Z.ZP.community.getTopicRecommend(),T.next=4,C.WY.post({url:u});case 4:O=T.sent,h=O.data,h.code===0?(R=h.data||[],g.setState({recommends:R.splice(0,5)})):a.default.error(h.msg||D("community.isError"));case 7:case"end":return T.stop()}},p)})),this.getCirclePage=p=>{var D=this.state,u=D.circlePageNum,O=D.circlePageSize,h=D.circleTotalPage;this.setState({circlePageNum:p?u<h-1?u+1:u:u===0?0:u-1,circlePageSize:O},()=>{var R=this.state,L=R.circlePageNum,T=R.circlePageSize,S={page:L,size:T};this.getCircleData(S)})},this.changeTabs=p=>{var D=this.props.dispatch;D({type:"community/saveCurrentTab",payload:{activeHomeTab:p}})},this.handleSearch=()=>{var p=this.inputRef.state.value?this.inputRef.state.value:"";(0,E.eJ)({url:"/community/searchDetail?text=".concat(p)})},this.handleLink=p=>{(0,E.eJ)({url:p}),this.getHotTopic()},this.state={answers:0,articles:0,questions:0,circlePageNum:0,circlePageSize:4,circleTotalPage:0,circleList:[],hotList:[],loadGroup:!0,loadCreateCenter:!0,recommends:[],cardList:[{title:A.t("community.addQuestion"),link:"/community/questionAndAnswer",id:1,iconClass:"icon-tigewenti",color:"#1890FF",backgroundColor:"rgba(4, 132, 252, 0.25)"},{title:A.t("community.answerQuestion"),link:"/community/answerQuestion",id:2,iconClass:"icon-huidawenti",color:"#FFA000",backgroundColor:"rgba(253, 150, 10, 0.25)"},{title:A.t("community.addArticle"),link:"/community/publishArticle",id:3,iconClass:"icon-fabiaowenzhang",color:"#2EB8BD",backgroundColor:"rgba(52, 184, 190, 0.25)"}]}}componentDidMount(){this.getMyCenterData(),this.getCircleData(),this.getHotTopic()}render(){var A=this.props,g=A.t,p=A.prefixCls,D=A.activeHomeTab,u=this.state,O=u.answers,h=u.articles,R=u.questions,L=u.circleList,T=u.cardList,S=u.loadGroup,J=u.loadCreateCenter,x=u.recommends;return n().createElement(I.Z,null,n().createElement(W.Z,{title:g("documentTitle.learningCommunity")}),n().createElement("div",{className:"".concat(p,"-content-sourceTabs")},n().createElement(d.Z.Search,{className:"community-home-search-input",ref:U=>this.inputRef=U,onSearch:this.handleSearch,placeholder:g("community.pleaseInput")}),n().createElement(t.Z,{defaultActiveKey:D,onChange:this.changeTabs},n().createElement(b,{tab:g("community.hot"),key:"hot"},n().createElement(w,null)),n().createElement(b,{tab:g("community.question"),key:"question"},n().createElement(w,{type:"QUESTION"})),n().createElement(b,{tab:g("community.article"),key:"article"},n().createElement(w,{type:"ARTICLE"})))),n().createElement("div",{className:"".concat(p,"-content-side")},n().createElement("div",{className:"".concat(p,"-content-side-groups")},n().createElement(l.Z,{cardList:T}),n().createElement(r.Z,{spinning:J},n().createElement(N.Z,{answers:O,articles:h,questions:R,showHeader:!0})),n().createElement(r.Z,{spinning:S},n().createElement(B.Z,{circleList:L,handleCurrentPage:U=>this.getCirclePage(U)})),n().createElement(Ee.Z,{title:g("community.hotTopic"),dataList:x,handleChange:this.getHotTopic,handleLink:this.handleLink}))))}})||H)||H)||H);se.defaultProps={prefixCls:"community-home"};var ve=(0,M.Z)()(se)},41279:function(K,_,e){"use strict";var f=e(13254),r=e(14277),P=e(49111),d=e(19650),y=e(12924),a=e.n(y),m=e(91768),s=e(84874);function t(o){var i=o.title,c=o.dataList,n=c===void 0?[]:c,M=o.t,v=o.handleChange,C=o.handleLink,Z=()=>{v()},W=E=>{!C||C(E)};return a().createElement("div",{className:"topic-recommend-box"},a().createElement("header",{className:"topic-recommend-header"},a().createElement("div",{className:"topic-recommend-title"},i),n.length>0&&a().createElement("div",{className:"topic-recommend-change",onClick:Z},a().createElement(s.Z,{iconClass:"icon-huanyihuan",size:"14px"}),M("community.change"))),n.length>0?n.map((E,l)=>a().createElement("div",{className:"topic-recommend-content",key:l},a().createElement(d.Z,null,a().createElement(s.Z,{iconClass:"icon-icon_huati",size:"14px"}),a().createElement("div",{className:"topic-recommend-tag",onClick:()=>W("/community/topicDetail?type=".concat("QUESTION","&tagName=",E))},E)))):a().createElement(r.Z,null))}_.Z=(0,m.Z)()(t)}}]);
