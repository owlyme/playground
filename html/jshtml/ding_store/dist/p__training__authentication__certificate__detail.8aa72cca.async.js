(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3425],{31652:function(ue,Y,i){"use strict";i.d(Y,{Z:function(){return w}});var O=i(13254),b=i(14277),W=i(20228),de=i(11382),ie=i(14781),F=i(53431),_=i(88986),ce=i(57361),B=i(9754),T=i.n(B),I=i(12924),f=i.n(I),t=i(91768),k=i(76828),re=i(71194),X=i(57016),S=i(76243),pe=i(84874);class A extends f().Component{constructor(){super(...arguments);this.handleSelect=()=>{var u=this.props,P=u.id,d=u.src,E=u.shouldRenderDelete;E||this.props.onSelect({id:P,src:d})},this.handleDelete=()=>{var u=this.props,P=u.id,d=u.src,E=u.onDelete,y=u.t;X.Z.confirm({title:y("authentication.certificateDetailOfficialTplDeleteTitle"),content:y("authentication.certificateDetailOfficialTplDeleteContent"),onOk(){E({id:P,src:d})}})},this.renderImageContent=()=>{var u=this.props,P=u.prefixCls,d=u.isPreset,E=u.src,y=u.layout,$="".concat(P,"__img");return f().createElement("div",{className:$,onClick:this.handleSelect},f().createElement("img",{className:"".concat($,"__cover"),src:E}),d&&f().createElement("img",{className:"".concat($,"__content"),src:S.To[y]}))},this.renderSelectedMask=()=>{var u=this.props,P=u.prefixCls,d=u.shouldRenderSelected,E=u.shouldRenderDelete;if(!d||E)return null;var y="".concat(P,"__selected");return f().createElement("div",{className:y},f().createElement("span",{className:"".concat(y,"__icon")},f().createElement(pe.Z,{iconClass:"icon-xuanzhongzhengshu",size:"32px",color:"#fff"})))},this.renderDelete=()=>{var u=this.props,P=u.prefixCls,d=u.shouldRenderDelete,E=u.isPreset,y=u.t;if(!d||E)return null;var $="".concat(P,"__delete");return f().createElement("div",{className:$,onClick:this.handleDelete},f().createElement("span",{className:"".concat($,"__icon")},f().createElement(pe.Z,{iconClass:"iconf-delete",size:"12px"}),y("common.delete")))}}render(){var u=this.props,P=u.prefixCls,d=u.type;return f().createElement("div",{className:"".concat(P," ").concat(d,"__image")},this.renderImageContent(),this.renderSelectedMask(),this.renderDelete())}}A.defaultProps={prefixCls:"certificate-template-image",type:"vertical",shouldRenderSelected:!1,shouldRenderDelete:!1,isPreset:!1,id:"",src:"",onSelect:()=>{},onDelete:()=>{}};var p=(0,t.Z)()(A),N=i(6793),h={vertical:{page_number:1,page_size:10},horizontal:{page_number:1,page_size:8}};class D extends f().Component{constructor(u){var P;super(u);P=this,this.onImgClick=d=>{var E=d.id,y=d.src;!this.props.showSelect||this.props.onSelect({id:E,src:y})},this.onPageChange=(d,E)=>{this.setState({imagePage:{page_number:d,page_size:E},isLoading:!0},this.getImagesList)},this.getImagesList=(0,ce.Z)(T().mark(function d(){var E,y,$,J,ee,R,te,K,le,z,ge;return T().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return E=P.props,y=E.type,$=E.showSelect,J=E.selectedId,ee=E.showDelete,R=P.state.imagePage,te=(0,_.Z)({style:y},R),ee&&(te.template_type="custom"),oe.next=6,(0,k.ar)(te);case 6:K=oe.sent,le=K.data,z=le.list,ge=le.total,P.setState({dataList:z,dataTotal:ge,isLoading:!1}),$&&!J&&z.length&&P.props.onSelect({id:z[0].id,src:z[0].url},"default");case 11:case"end":return oe.stop()}},d)})),this.handleDelete=d=>{var E=d.id;(0,k.Xc)(E).then(()=>{this.props.onDelete(E),this.getImagesList()})},this.renderContent=()=>{var d=this.props,E=d.prefixCls,y=d.showDelete,$=d.type,J=d.layout,ee=d.isPreset,R=d.showSelect,te=d.selectedId,K=this.state.dataList,le="".concat(E,"__content ").concat($,"__content");return f().createElement("div",{className:le},K.map(z=>f().createElement(p,{type:$,layout:J,key:z.id,id:z.id,src:z.url,shouldRenderDelete:y&&z.template_type!=="system",shouldRenderSelected:R&&te===z.id,isPreset:ee&&z.template_type==="system",onSelect:this.onImgClick,onDelete:this.handleDelete})))},this.renderFooter=()=>{var d=this.props,E=d.prefixCls,y=d.smallPagination,$=d.t,J=this.state,ee=J.dataTotal,R=J.imagePage,te="".concat(E,"__page");return f().createElement("div",{className:te},y?f().createElement(F.Z,{size:"small",defaultPageSize:R.page_size,current:R.page_number,total:ee,onChange:this.onPageChange}):f().createElement(F.Z,{showTotal:K=>(0,N.ZT)("".concat($("course.totalCount")),K),current:R.page_number,pageSize:R.page_size,showSizeChanger:!0,total:ee,onChange:this.onPageChange}))},this.state={isLoading:!0,imagePage:(0,_.Z)({},h[u.type]),dataList:[],dataTotal:0}}componentDidMount(){this.getImagesList()}componentDidUpdate(u){var P=this.props,d=P.type,E=P.showDelete;(u.type!==d||u.showDelete!==E)&&this.onPageChange(h[d].page_number,h[d].page_size)}render(){var u=this.props,P=u.prefixCls,d=u.type,E=u.t,y=this.state,$=y.isLoading,J=y.dataList;return f().createElement("div",{className:"".concat(P," ").concat(d,"__list")},$?f().createElement(de.Z,null):f().createElement(f().Fragment,null,J.length?f().createElement("div",null,this.renderContent(),this.renderFooter()):f().createElement(b.Z,{image:b.Z.PRESENTED_IMAGE_SIMPLE,description:E("authentication.noDataTip")})))}}D.defaultProps={prefixCls:"certificate-template-list",type:"vertical",showSelect:!1,selectedId:"",smallPagination:!1,showDelete:!1,onSelect:()=>{},onDelete:()=>{}};var w=(0,t.Z)()(D)},35717:function(ue,Y,i){"use strict";var O=i(88986),b=i(57663),W=i(71577),de=i(34669),ie=i(82833),F=i(12924),_=i.n(F),ce=i(91768),B=i(84391),T=i(76828),I=i(18329),f=i(84874),t=i(24144),k=i(6793),re=".jpg,.jpeg,.png",X={uploadProcess:"empty",warningText:"",uploadProgress:0,uploadSuccessInfo:{name:"",url:""}};class S extends _().Component{constructor(A){super(A);this.onBeforeUpload=p=>{var N=5120,h=this.props.t;if(re.indexOf(p.name.split(".").pop().toLowerCase())<0)return this.setState({uploadProcess:"uploadWarning",warningText:h("authentication.certificateDetailOfficialTplUploadFormat")}),!1;var D=p.size/1024<N;return D?(this.setState({uploadProcess:"uploading",uploadProgress:Math.floor(100*Math.random())}),!0):(this.setState({uploadProcess:"uploadWarning",warningText:h("authentication.certificateDetailOfficialTplUploadSize")}),!1)},this.onUploadSuccess=p=>{var N=p.fileList,h=N.length>0?N[0].url:"",D=N.length>0?N[0].fileName:"";this.setState({uploadProcess:"uploadSuccess",uploadSuccessInfo:{name:D,url:h}})},this.onUploadFailed=()=>{this.setState({uploadProcess:"uploadError"})},this.renderWrapper=()=>{var p=this.props.prefixCls,N=this.state,h=N.uploadProcess,D=N.typeValue,w="".concat(p,"__wrapper"),M;switch(h){case"uploadWarning":M=this.renderWrapperWarning();break;case"uploading":M=this.renderWrapperUploading();break;case"uploadError":M=this.renderWrapperError();break;case"uploadSuccess":M=this.renderWrapperSuccess();break;default:M=this.renderWrapperEmpty();break}return _().createElement("div",{className:"".concat(w," ").concat(D,"__wrapper")},h==="uploadSuccess"?this.renderWrapperSuccess():_().createElement("div",{className:"".concat(w,"__center")},M))},this.renderWrapperEmpty=()=>{var p=this.props,N=p.prefixCls,h=p.t,D="".concat(N,"__wrapper__empty");return _().createElement("div",{className:D},_().createElement("span",null,_().createElement(f.Z,{iconClass:"icon-zhengshuyulan",size:"58px",color:"#CDCDCD"})),_().createElement("p",null,h("authentication.certificateDetailOfficialTplUploadTip")))},this.renderWrapperWarning=()=>{var p=this.props.prefixCls,N=this.state.warningText,h="".concat(p,"__wrapper__warning");return _().createElement("div",{className:h},_().createElement(f.Z,{iconClass:"icon-f-tipe",size:"32px",color:"#FAAD14"}),_().createElement("p",null,N))},this.renderWrapperUploading=()=>{var p=this.props,N=p.prefixCls,h=p.t,D=this.state.uploadProgress,w="".concat(N,"__wrapper__uploading");return _().createElement("div",{className:w},_().createElement(ie.Z,{percent:D}),_().createElement("p",null,h("authentication.certificateDetailOfficialTplUploadLoading")))},this.renderWrapperError=()=>{var p=this.props,N=p.prefixCls,h=p.t,D=this.state.uploadProgress,w="".concat(N,"__wrapper__error");return _().createElement("div",{className:w},_().createElement(ie.Z,{percent:D,status:"exception"}),_().createElement("p",null,h("authentication.certificateDetailOfficialTplUploadError")))},this.renderWrapperSuccess=()=>{var p=this.props.prefixCls,N=this.state.uploadSuccessInfo,h="".concat(p,"__wrapper__success");return _().createElement("div",{className:h},_().createElement("img",{className:"".concat(h,"__tpl"),src:N.url}))},this.handleCancel=()=>this.props.onCancel(),this.handleOk=()=>{var p=this.state.uploadSuccessInfo,N=p.name,h=p.url,D=this.state.typeValue,w={title:N,url:h,style:D};(0,T.eZ)(w).then(()=>{this.props.onOk()})},this.renderTip=()=>{var p=this.props,N=p.prefixCls,h=p.t,D=this.state.typeValue,w=D==="vertical"?"1795*2598":"2598*1795",M="".concat(N,"__tip");return _().createElement("p",{className:M},(0,k.ZT)("".concat(h("authentication.certificateDetailOfficialTplUploadLimit")),w))},this.renderUploader=()=>{var p=this.props,N=p.prefixCls,h=p.t,D=this.state.uploadProcess,w="".concat(N,"__antduploader"),M=D==="uploading";return _().createElement("div",{className:w},_().createElement(t.ZM,{uploadConfig:{listType:"picture",accept:re,showUploadList:!1,disabled:M,maxCount:1},onBeforeUpload:this.onBeforeUpload,onUploadSuccess:this.onUploadSuccess,onUploadFailed:this.onUploadFailed,render:()=>_().createElement(W.Z,{type:"link",disabled:M},_().createElement(B.Z,null)," ",h(D==="empty"?"authentication.certificateDetailOfficialTplUpload":"authentication.certificateDetailOfficialTplUploadBtnRst"))}))},this.state=(0,O.Z)((0,O.Z)({},X),{},{typeValue:A.type})}componentDidUpdate(A,p){A.visible&&A.visible!==this.props.visible&&this.setState((0,O.Z)({},X)),p.typeValue!==this.props.type&&this.setState({typeValue:this.props.type})}render(){var A=this.props,p=A.prefixCls,N=A.visible,h=A.t,D=this.state.uploadProcess;return _().createElement(I.ZP,{title:h("authentication.certificateDetailOfficialTplUpload"),width:536,visible:N,okButtonProps:{disabled:D!=="uploadSuccess"},onCancel:this.handleCancel,onOk:this.handleOk},_().createElement("div",{className:p},this.renderWrapper(),this.renderTip(),this.renderUploader()))}}S.defaultProps={prefixCls:"certificateimg-selector__upload",visible:!1,type:"vertical",onOk:()=>{},onCancel:()=>{}},Y.Z=(0,ce.Z)()(S)},89133:function(ue,Y,i){"use strict";i.r(Y),i.d(Y,{default:function(){return $t}});var O=i(62029),b=i(20228),W=i(11382),de=i(71194),ie=i(57016),F=i(88986),_=i(57361),ce=i(34792),B=i(48086),T=i(9754),I=i.n(T),f=i(12924),t=i.n(f),k=i(91768),re=i(28216),X=i(57068),S=i(80991),pe=i(68855),A=i(7359),p=i(2829),N=i(57663),h=i(71577),D=i(24616),w=i(47673),M=i(4107),u=i(81211);class P extends t().Component{constructor(){super(...arguments);this.handleChangeValue=e=>{this.props.formik.setFieldValue("name",e.target.value)}}render(){var e=this.props,a=e.t,s=e.tReady,n=(0,u.Z)(e,["t","tReady"]);return t().createElement(M.Z,(0,O.Z)({type:"text",maxLength:32,placeholder:a("authentication.certificateDetailNamePlaceholder")},n,{onChange:this.handleChangeValue}))}}var d=(0,S.$j)((0,k.Z)()(P)),E=i(88983),y=i(47933);class $ extends t().Component{constructor(){super(...arguments);this.onChangeLanguage=e=>{var a=this.props.formik;a.setFieldValue("language_type",e.target.value)}}render(){var e=this.props,a=e.t,s=e.defaultValue;return t().createElement(y.ZP.Group,{onChange:this.onChangeLanguage,value:s},t().createElement(y.ZP,{value:"chinese"}," ",a("authentication.languageZh")," "),t().createElement(y.ZP,{value:"english"}," En "))}}var J=(0,S.$j)((0,k.Z)()($)),ee=i(77883),R=i(21888),te=i(43358),K=i(34041),le=i(33565),z=i(39098),ge=i(91302),Ee=v=>{var e=v.disabled,a=v.onChange,s=v.color,n=v.placement,r=(0,f.useState)(!1),l=(0,le.Z)(r,2),o=l[0],g=l[1],L=()=>t().createElement("div",{className:"font-setting-container__sketch-color-box font-setting-container__sketch-color-box__".concat(n)},t().createElement("div",{className:"font-setting-container__sketch-color-box-mask",onClick:C}),t().createElement(z.AI,{color:s,onChange:c})),c=Z=>{Z.hex&&a(Z.hex)},C=()=>{e||g(!o)};return t().createElement(t().Fragment,null,t().createElement("div",{className:"font-setting-container__item__color"},t().createElement("div",{className:"font-setting-container__item__color-box",onClick:C,style:{backgroundColor:s||"#000"}}),o?L():null))};class oe extends t().Component{constructor(){super(...arguments);this.state={oFontFamily:ge.d8}}render(){var e=this.props,a=e.t,s=e.fontSetting,n=e.colorPlacement,r=n===void 0?"bottomRight":n,l=s.font_family,o=s.font_size,g=s.color,L=s.line_height,c=this.state.oFontFamily;return t().createElement("div",{className:"font-setting-container"},t().createElement("div",{className:"font-setting-container__item"},t().createElement("span",null,a("authentication.certificateFontFamily"),"\uFF1A"),t().createElement(K.Z,{defaultValue:l,style:{width:132},onChange:C=>{this.props.onChange(C,"font_family")}},c.map(C=>t().createElement(K.Z.Option,{value:C.value,key:C.value},a(C.label))))),t().createElement("div",{className:"font-setting-container__item"},t().createElement("span",null,a("authentication.certificateFontSize"),"\uFF1A"),t().createElement(R.Z,{style:{width:60},min:36,max:200,defaultValue:o,onChange:C=>{this.props.onChange(C,"font_size")}})),t().createElement("div",{className:"font-setting-container__item"},t().createElement("span",null,a("authentication.certificateColor"),"\uFF1A"),t().createElement(Ee,{color:g,placement:r,onChange:C=>this.props.onChange(C,"color")})),t().createElement("div",{className:"font-setting-container__item"},t().createElement("span",null,a("authentication.certificateLineHeight"),"\uFF1A"),t().createElement(R.Z,{style:{width:60},min:1,max:30,step:"0.1",defaultValue:L,onChange:C=>{this.props.onChange(C,"line_height")}})))}}var ye=(0,k.Z)()(oe),Se=i(2396),Ie=M.Z.TextArea;class Me extends t().Component{constructor(){super(...arguments);this.state={showSetting:!1},this.onClickSetting=()=>{this.setState(e=>({showSetting:!e.showSetting}))},this.onValueChange=e=>{var a=this.props.name;this.props.char&&this.props.LimitLength&&(0,Se.$s)(e.target.value)>this.props.LimitLength&&(e.target.value=e.target.value.substring(0,(0,Se.rw)(e.target.value,this.props.LimitLength))),this.props.formik.setFieldValue(a,e.target.value)}}render(){var e=this.props,a=e.fontSetting,s=e.onFontChange,n=(0,u.Z)(e,["fontSetting","onFontChange"]),r=this.state.showSetting;return t().createElement(t().Fragment,null,t().createElement("div",{className:"certificate-textarea"},t().createElement(Ie,(0,O.Z)({},n,{onChange:this.onValueChange})),t().createElement(D.Z,{className:"certificate-textarea__setting",onClick:this.onClickSetting})),r&&t().createElement(ye,{fontSetting:a,onChange:s}))}}var $e=(0,S.$j)(Me),j={english:{cerName:"Certificate Title",name:"Name",dept:"Department",desc:"This is to certify that you have passed the examination",orderNum:"No.: ",issue_date:"Issue Date: ",overdue_date:"Expiry Date: ",effect_date:"Effective Date: ",job_number:"Job Number",position:"Position",permanent:"Permanently Valid",picture:"Picture",stamp:"Stamp: ",sealImg:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/seal-en.png"},chinese:{cerName:"\u8BC1\u4E66\u6807\u9898",name:"\u59D3\u540D",dept:"\u6240\u5728\u90E8\u95E8\u540D\u79F0",desc:"\u5179\u8BC1\u660E\u901A\u8FC7\u8BA4\u8BC1\u8003\u6838\uFF0C\u7279\u9881\u53D1\u6B64\u8BC1",orderNum:"\u8BC1\u4E66\u7F16\u53F7\uFF1A",issue_date:"\u9881\u53D1\u65E5\u671F\uFF1A",overdue_date:"\u5230\u671F\u65E5\u671F\uFF1A",effect_date:"\u751F\u6548\u65E5\u671F\uFF1A",job_number:"\u5DE5\u53F7",position:"\u5C97\u4F4D",permanent:"\u6C38\u4E45\u6709\u6548",picture:"\u7167\u7247",stamp:"\u7B7E\u540D/\u76D6\u7AE0\uFF1A",sealImg:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/seal-zh.png"}},he="UNIVERSAL",Ue="HUMAN_SOCIETY",Ve={title:{checked:!0,settings:{font_family:"\u963F\u91CC\u5DF4\u5DF4\u666E\u60E0\u4F53",font_size:"80",color:"#7B7979",line_height:"8.5"}},summary:{checked:!0,settings:{font_family:"\u963F\u91CC\u5DF4\u5DF4\u666E\u60E0\u4F53",font_size:"60",color:"#27282D",line_height:"1.6"}},certificate_code:{checked:!0},department:{checked:!1},picture:{checked:!1},logo_url:{checked:!1},common_seal:{checked:!1,settings:{font_family:"\u601D\u6E90\u9ED1\u4F53",font_size:"52",color:"#d64f4f",line_height:"1"}},custom_field:{field:[],settings:{font_family:"\u601D\u6E90\u9ED1\u4F53",font_size:"36",color:"#2F3033",line_height:"2.4"}}},Ne=K.Z.Option,we=v=>{var e=v.value,a=v.onChange,s=v.t,n=(0,u.Z)(v,["value","onChange","t"]),r=g=>{a((0,F.Z)((0,F.Z)({},e),{},{code:g.target.value}))},l=g=>{a({code:"",type:g})},o=e.type===he?8:16;return t().createElement("div",{className:"code-container"},t().createElement(K.Z,(0,O.Z)({value:e.type,onChange:l},n),t().createElement(Ne,{value:he},s("authentication.universalRule")),t().createElement(Ne,{value:Ue},s("authentication.humanSocietyRule"))),t().createElement("div",{className:"code-row"},t().createElement(M.Z,(0,O.Z)({placeholder:s("authentication.certificateDetailCodePlaceholder",{num:o}),className:"code-input",maxLength:o,value:e.code},n,{onChange:r})),t().createElement("span",null,s("authentication.codeMoreTip",{num:e.type===he?5:6}))))},Re=(0,S.$j)((0,k.Z)()(we)),fe=i(24144);class ze extends t().Component{constructor(){super(...arguments);this.onUploadedListChange=e=>{var a=e.fileList;this.props.formik.setFieldValue("logo_url",a.length?a[0].url:"")}}render(){var e=this.props,a=e.defaultUrl,s=e.t,n=e.disabled,r=[{uid:"111",url:a,name:"",status:"done"}];return t().createElement("div",{className:"upload-image-field"},t().createElement("div",{className:"upload_container"},t().createElement(fe.ZM,{uploadConfig:{maxCount:1,accept:".jpg,.jpeg,.png",showUploadList:!0,fileList:a?r:[]},fileList:a?r:[],onUploadedListChange:this.onUploadedListChange,size:{value:300,unit:"KB"},disabled:n,render:l=>(0,fe.iM)(l)})),t().createElement("div",{className:"upload-image-field-tip"},s("authentication.certificateDetailCoverTip")))}}var be=(0,S.$j)((0,k.Z)()(ze));class We extends t().Component{constructor(){super(...arguments);this.state={showSetting:!1},this.onClickSetting=()=>{this.setState(e=>({showSetting:!e.showSetting}))},this.onChangeRadioGroup=e=>{var a=this.props.formik;a.setFieldValue("common_seal.type",e.target.value)},this.onUploadedListChange=e=>{var a=e.fileList,s=a.length?a[0].url:"",n=this.props.formik;n.setFieldValue("common_seal.common_seal_url",s)},this.handleSetName=e=>{var a=this.props.formik;a.setFieldValue("common_seal.company_name",e)},this.renderUpload=()=>{var e=this.props,a=e.defaultValue,s=e.t,n=e.disabled,r=a.common_seal_url,l=[{uid:"222",url:r,name:"",status:"done"}];return t().createElement("div",{className:"upload-image-field"},t().createElement("div",{className:"upload_official_container"},t().createElement(fe.ZM,{uploadConfig:{maxCount:1,accept:".png",showUploadList:!0,fileList:l[0].url?l:[]},fileList:l[0].url?l:[],onUploadedListChange:this.onUploadedListChange,size:{value:300,unit:"KB"},disabled:n,render:o=>(0,fe.iM)(o)})),t().createElement("div",{className:"upload-image-field-tip"},s("authentication.officialSealTip")))}}render(){var e=this.props,a=e.defaultValue,s=e.t,n=e.disabled,r=e.fontSetting,l=e.onFontChange,o=this.state.showSetting,g=a.type,L=a.company_name;return t().createElement(t().Fragment,null,t().createElement(y.ZP.Group,{onChange:this.onChangeRadioGroup,value:g},t().createElement(y.ZP,{value:"name"},s("common.default")),t().createElement(y.ZP,{value:"picture"},s("component.practiceUploadPicBtnText"))),g==="name"?t().createElement("div",{className:"certificate-textarea"},t().createElement(M.Z,{type:"text",maxLength:25,placeholder:s("authentication.sealPlaceholder"),value:L,disabled:n,onChange:c=>this.handleSetName(c.target.value)}),t().createElement(D.Z,{className:"certificate-textarea__setting",onClick:this.onClickSetting})):this.renderUpload(),o&&t().createElement(ye,{fontSetting:r,onChange:l,colorPlacement:"topRight"}))}}var Be=(0,S.$j)((0,k.Z)()(We));class Ae extends t().Component{constructor(){super(...arguments);this.onChangeInputNumber=e=>{var a=this.props,s=a.formik,n=a.messageCountDown;s.setFieldValue("expire_date",e),n>e&&s.setFieldValue("message_properties.countdown_date",e)},this.onChangeRadioGroup=e=>{var a=this.props,s=a.formik,n=a.expireDate;s.setFieldValue("permanently_valid",e.target.value),e.target.value==="custom"&&s.setFieldValue("expire_date",n||1)}}render(){var e=this.props,a=e.t,s=e.validType,n=e.expireDate;return t().createElement(y.ZP.Group,{onChange:this.onChangeRadioGroup,value:s},t().createElement(y.ZP,{value:"permanent"}," ",a("authentication.permanent")," "),t().createElement(y.ZP,{value:"custom"},a("authentication.customValidityPeriod")," ",t().createElement(R.Z,{min:1,max:360,value:n,onChange:this.onChangeInputNumber})," ",a("authentication.effectiveMonths")))}}var je=(0,S.$j)((0,k.Z)()(Ae)),Ut=i(63185),G=i(9676),Vt=i(22385),Je=i(31097),Ke=i(68628),Ge=i(1977),He=i(54549),Ye=i(60667),Xe=i(88311);class xe extends t().Component{constructor(){super(...arguments);this.state={orgDialogVisible:!1},this.onChangeMessageType=e=>{var a=this.props.formik;a.setFieldValue("message",e.target.value)},this.onChangeExpiresInputNumber=e=>{var a=this.props.formik;a.setFieldValue("message_properties.countdown_date",e)},this.onRemindChange=(e,a)=>{var s=this.props,n=s.formik,r=s.messageProperties,l=JSON.parse(JSON.stringify(r));a==="nominee.checked"?l.nominee.checked=e:l[a]=e,n.setFieldValue("message_properties",l)},this.onShowOrgDialog=e=>{e.stopPropagation(),this.onRemindChange(!0,"nominee.checked"),this.setState({orgDialogVisible:!0})},this.handleGetLecturer=e=>{var a=this.props,s=a.formik,n=a.messageProperties,r=JSON.parse(JSON.stringify(n)),l=e.user,o=l.map(g=>({id:g.id,user_id:g.user_id,name:g.name,source_type:g.source_type}));r.nominee.users=o,s.setFieldValue("message_properties",r),this.setState({orgDialogVisible:!1})},this.handleRemoveUser=e=>{var a=this.props,s=a.formik,n=a.messageProperties,r=JSON.parse(JSON.stringify(n));r.nominee.users.splice(e,1),s.setFieldValue("message_properties",r)}}render(){var e=this.props,a=e.t,s=e.messageType,n=e.messageProperties,r=e.expireDate,l=this.state.orgDialogVisible;return t().createElement(t().Fragment,null,t().createElement(y.ZP.Group,{onChange:this.onChangeMessageType,value:s},t().createElement(y.ZP,{value:"send_message"}," ",a("common.activatedStr")," "),t().createElement(y.ZP,{value:"no_message"}," ",a("common.close")," ")),s==="send_message"&&t().createElement("div",{className:"certificate_message"},t().createElement("div",{className:"certificate_checkbox_group"},a("authentication.beforeCertificateExpires"),t().createElement(R.Z,{min:1,max:r,value:n.countdown_date,onChange:this.onChangeExpiresInputNumber}),a("authentication.certificateExpiration"),t().createElement(Je.Z,{title:a("authentication.reminderPeriod")},t().createElement(Ke.Z,null))),t().createElement("div",{className:"certificate_checkbox_group"},a("authentication.remindWho"),t().createElement(G.Z,{checked:n.user,value:"user",onChange:o=>{this.onRemindChange(o.target.checked,"user")}},a("authentication.remindStudents")),t().createElement(G.Z,{checked:n.created,value:"created",onChange:o=>{this.onRemindChange(o.target.checked,"created")}},a("authentication.remindFounder")),t().createElement(G.Z,{checked:n.nominee.checked,value:"nominee.checked",onChange:o=>{this.onRemindChange(o.target.checked,"nominee.checked")}},a("authentication.remindNominee")),t().createElement(Ge.Z,{onClick:this.onShowOrgDialog})),n.nominee.checked&&t().createElement("div",{className:"certificate_message__user"},n.nominee.users.map((o,g)=>t().createElement("div",{key:o.id,className:"certificate_message__user__item"},t().createElement(Ye.Z,{dataType:"userName",value:o.user_id,name:o.name,type:o.source_type}),t().createElement("span",{className:"display-item-close",onClick:()=>this.handleRemoveUser(g)},t().createElement(He.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))))),t().createElement(Xe.Z,{title:a("authentication.remindNominee"),visible:l,onOk:this.handleGetLecturer,onCancel:()=>this.setState({orgDialogVisible:!1}),onlyUser:!0,initData:{user:n.nominee.users}}))}}xe.defaultProps={prefixCls:"validityPeriod_component"};var Qe=(0,S.$j)((0,k.Z)()(xe)),qe=i(16239),ae=i(6793);class De extends t().Component{constructor(){super(...arguments);this.handleSwitch=()=>{this.props.formik.setFieldValue("isOperating",!0)},this.renderStyle=e=>{var a=e.font_family,s=e.font_size,n=e.color,r=e.line_height;return{fontFamily:a,fontSize:Number(s)/3,color:n,lineHeight:r}},this.renderInfoListItem=e=>{var a=this.props,s=a.userSetting,n=a.values,r=n.language_type,l=n.permanently_valid,o=n.expire_date;if(e==="issue_date"||e==="effect_date")return"".concat(j[r][e]).concat((0,ae.p6)(new Date,"yyyy-MM-dd"));var g=l==="custom"&&o?(0,ae.V0)((0,ae.p6)(new Date,"yyyy-MM-dd"),o):j[r].permanent;return e==="overdue_date"?"".concat(j[r][e]).concat(g):e==="job_number"||e==="position"?j[r][e]:s[e]||e},this.renderSealImg=()=>{var e=this.props.values,a=e.common_seal,s=e.language_type;return a.type==="name"?j[s].sealImg:a.common_seal_url},this.renderImageWrapper=()=>{var e=this.props,a=e.prefixCls,s=e.values,n=s.layout_id,r=s.image_url,l=s.language_type,o=s.title,g=s.logo_url,L=s.certificate_code,c=s.display,C=s.summary,Z=s.common_seal,m="".concat(a,"__img");return t().createElement("div",{className:"".concat(m," ").concat(n,"__img")},t().createElement("img",{src:r,alt:""}),t().createElement("div",{className:"".concat(m,"__content ").concat(n,"__content")},g&&c.logo_url.checked&&t().createElement("img",{className:"".concat(m,"__logo ").concat(n,"__logo"),src:g,alt:""}),c.title.checked&&t().createElement("h1",{className:"".concat(m,"__title ").concat(n,"__title"),style:this.renderStyle(c.title.settings)},o||j[l].cerName),t().createElement("div",{className:"".concat(m,"__name__content ").concat(n,"__name__content")},c.picture.checked&&t().createElement("div",{className:"".concat(m,"__picture")},j[l].picture),t().createElement("div",{className:"".concat(m,"__name__info")},t().createElement("h2",{className:"".concat(m,"__name")},j[l].name),c.department.checked&&t().createElement("div",{className:"".concat(m,"__department")},j[l].dept),c.summary.checked&&n==="horizontalLeft"&&t().createElement("div",{className:"".concat(m,"__name__info__summary"),style:this.renderStyle(c.summary.settings)},C))),c.summary.checked&&n!=="horizontalLeft"&&t().createElement("div",{className:"".concat(m,"__summary ").concat(n,"__summary"),style:this.renderStyle(c.summary.settings)},C),t().createElement("div",{className:"".concat(m,"__info ").concat(n,"__info")},t().createElement("div",{className:"".concat(m,"__list ").concat(n,"__list"),style:this.renderStyle(c.custom_field.settings)},c.certificate_code.checked&&t().createElement("p",{className:"".concat(m,"__list__item")},"".concat(j[l].orderNum).concat(L.code)),c.custom_field.field.map(U=>t().createElement("p",{key:U,className:"".concat(m,"__list__item")},this.renderInfoListItem(U)))),c.common_seal.checked&&t().createElement("div",{className:"".concat(m,"__seal")},t().createElement("span",null,j[l].stamp),t().createElement("div",{className:"".concat(m,"__seal__stamp ").concat(n,"__stamp")},this.renderSealImg()&&t().createElement("img",{className:"".concat(m,"__seal__img"),src:this.renderSealImg(),alt:""}),Z.type==="name"&&t().createElement("div",{className:"".concat(m,"__seal__text"),style:this.renderStyle(c.common_seal.settings)},t().createElement("svg",{className:"".concat(m,"__seal__text__svg"),xmlns:"http://www.w3.org/2000/svg",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t().createElement("defs",null,t().createElement("path",{id:"stamp",d:"M83,83 m-40,30 a50,50 0 1,1 80,0"})),t().createElement("text",{textAnchor:"middle"},t().createElement("textPath",{fill:c.common_seal.settings.color,xlinkHref:"#stamp",startOffset:"50%"}," ",Z.company_name)))))))))},this.renderFooter=()=>{var e=this.props,a=e.prefixCls,s=e.t,n="".concat(a,"__footer");return(0,qe.c)()==="huaqi"?null:t().createElement("div",{className:n,onClick:this.handleSwitch},s("authentication.certificateDetailOfficialTplSwitch"))}}render(){var e=this.props.prefixCls;return t().createElement("section",{className:e},this.renderImageWrapper(),this.renderFooter())}}De.defaultProps={prefixCls:"reactive-wrapper"};var et=(0,S.$j)((0,k.Z)()(De)),tt=i(35717),at=i(31652),st=i(18329),Ze={showDelete:!1,uploadModalShow:!1,forceLoading:!1,selectedId:"",selectedSrc:"",deleteIds:[]};class ke extends t().Component{constructor(){super(...arguments);this.state=(0,F.Z)((0,F.Z)({},Ze),{},{selectedId:this.props.formik.values.template_id,selectedSrc:this.props.formik.values.image_url}),this.handleShowUploader=()=>{this.setState({uploadModalShow:!0})},this.handleUploadCancel=()=>{this.setState({uploadModalShow:!1})},this.handleUploadOk=()=>{this.setState({uploadModalShow:!1,forceLoading:!0},()=>{this.setState({forceLoading:!1})})},this.handleOk=()=>{var e=this.props.formik,a=this.state,s=a.selectedId,n=a.selectedSrc;e.setFieldValue("isOperating",!1),e.setFieldValue("template_id",s),e.setFieldValue("image_url",n)},this.handleCancel=()=>{this.props.formik.setFieldValue("isOperating",!1)},this.handleToggleManagement=()=>{this.setState(e=>({showDelete:!e.showDelete}))},this.handleResetDelete=()=>{var e=this.state,a=e.deleteIds,s=e.selectedId;this.setState({showDelete:!1}),a.includes(s)&&this.setState({forceLoading:!0},()=>{this.handleSelect({id:"",src:""}),this.setState({forceLoading:!1})})},this.handleDelete=e=>{var a=[].concat(this.state.deleteIds);a.push(e),this.setState({deleteIds:a})},this.handleSelect=(e,a)=>{var s=e.id,n=e.src;if(a==="default"){var r=this.props.formik;r.setFieldValue("template_id",s),r.setFieldValue("image_url",n)}this.setState({selectedId:s,selectedSrc:n})},this.renderModalFooter=()=>{var e=this.props.t,a=this.state.showDelete;return a?[t().createElement(h.Z,{key:"resetDelete",type:"primary",onClick:this.handleResetDelete},e("common.ok"))]:[t().createElement(h.Z,{key:"cancel",onClick:this.handleCancel},e("common.cancel")),t().createElement(h.Z,{key:"ok",type:"primary",onClick:this.handleOk},e("common.ok"))]},this.renderHeader=()=>{var e=this.props,a=e.prefixCls,s=e.t,n=this.state.showDelete,r="".concat(a,"__header");return n?t().createElement("header",{className:r}):t().createElement("header",{className:r},t().createElement(h.Z,{type:"link",onClick:this.handleToggleManagement},s("authentication.certificateDetailOfficialTplManage")),t().createElement(h.Z,{type:"primary",ghost:!0,onClick:this.handleShowUploader},s("authentication.certificateDetailOfficialTplUpload")))},this.renderContent=()=>{var e=this.state,a=e.showDelete,s=e.selectedId,n=e.forceLoading,r=this.props.values,l=r.layout_id.startsWith("vertical")?"vertical":"horizontal";return t().createElement("div",null,n?null:t().createElement(at.Z,{smallPagination:!0,type:l,isPreset:!0,layout:r.layout_id,showDelete:a,onDelete:this.handleDelete,showSelect:!0,selectedId:s,onSelect:this.handleSelect}))}}componentDidUpdate(e){!e.values.isOperating&&e.values.isOperating!==this.props.values.isOperating&&this.setState((0,F.Z)((0,F.Z)({},Ze),{},{selectedId:e.formik.values.template_id,selectedSrc:e.formik.values.image_url}))}render(){var e=this.props,a=e.prefixCls,s=e.values,n=e.t,r=this.state.uploadModalShow,l=s.layout_id.startsWith("vertical")?"vertical":"horizontal";return t().createElement(st.ZP,{title:n("authentication.certificateDetailOfficialTplSwitch"),width:920,visible:s.isOperating,destroyOnClose:!0,bodyMask:r,footer:this.renderModalFooter(),onCancel:this.handleCancel},t().createElement("div",{className:a},s.isOperating&&t().createElement(t().Fragment,null,this.renderHeader(),this.renderContent())),t().createElement(tt.Z,{type:l,visible:r,onCancel:this.handleUploadCancel,onOk:this.handleUploadOk}))}}ke.defaultProps={prefixCls:"certificateimg-selector"};var nt=(0,S.$j)((0,k.Z)()(ke)),se=i(43859),it=(0,se.Z)(d),rt=(0,se.Z)(J),Pe=(0,se.Z)($e),lt=(0,se.Z)(Be),ot=(0,se.Z)(be),ct=(0,se.Z)(Re),mt=(0,se.Z)(je),dt=(0,se.Z)(Qe),pt=et,ht=nt,Q={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},ut=i(3407),Le=(0,ae.me)(),me=ut.Z[Le].authentication.validation,gt=v=>(0,ae.fy)(v)?(0,ae.fy)(v).length>32?me.certificateDetailNameNullLimit:"":me.certificateDetailNameNull,wt=(v,e)=>e&&trim(v).length>60?language[Le].validation.limitedSixty:"",ft=(v,e)=>{if(e){var a=v.type===he?8:16,s=/^[a-zA-Z\d]+$/;if((0,ae.fy)(v.code)){if((0,ae.fy)(v.code).length!==a)return a===8?me.certificateCodeLengthLimit8:me.certificateCodeLengthLimit16;if(!s.test(v.code))return me.certificateCodeLimit}else return me.certificateCodeNull}return""};class vt extends t().Component{render(){var e=this.props,a=e.values,s=e.t;return t().createElement("div",{className:"form-content__main__form__basic"},t().createElement("div",{className:"form-content__main__item"},t().createElement(S.gN,(0,O.Z)({required:!0,component:it,name:"name",label:s("authentication.certificateDetailName"),defaultValue:a.name,validate:n=>gt(n),placeholder:s("authentication.certificateDetailNamePlaceholder")},Q))),t().createElement("div",{className:"form-content__main__item"},t().createElement(S.gN,(0,O.Z)({component:rt,name:"language_type",label:s("authentication.certificateLanguage"),defaultValue:a.language_type},Q))),t().createElement("div",{className:"form-content__main__item"},t().createElement(S.gN,(0,O.Z)({label:s("authentication.validityPeriod"),component:mt,name:"permanently_valid",validType:a.permanently_valid,expireDate:a.expire_date,messageCountDown:a.message_properties.countdown_date},Q))),a.permanently_valid==="custom"&&t().createElement("div",{className:"form-content__main__item"},t().createElement(S.gN,(0,O.Z)({label:s("authentication.validMessage"),component:dt,name:"message",messageType:a.message,messageProperties:a.message_properties,expireDate:a.expire_date},Q))))}}var _t=(0,k.Z)()((0,S.$j)(vt));class yt extends t().Component{constructor(){super(...arguments);this.handleChangeCheckbox=(e,a)=>{var s=this.props,n=s.values,r=s.formik,l=JSON.parse(JSON.stringify(n));l.display[a].checked=e.target.checked,r.setValues(l)}}render(){var e=this.props,a=e.values,s=e.t;return t().createElement("div",{className:"form-content__main__form__content"},t().createElement("div",{className:"form-content__main__item"},t().createElement(G.Z,{key:"name",checked:a.display.title.checked,onChange:n=>this.handleChangeCheckbox(n,"title")}),t().createElement(S.gN,(0,O.Z)({component:Pe,name:"title",label:s("authentication.certificateTitle"),placeholder:s("validation.pleaseEnter"),autoSize:{maxRows:2},maxLength:100,disabled:!a.display.title.checked,defaultValue:a.title,fontSetting:a.display.title.settings,onFontChange:(n,r)=>{this.props.onFontChange(n,r,"title")}},Q))),t().createElement("div",{className:"form-content__main__item"},t().createElement(G.Z,{key:"summary",checked:a.display.summary.checked,onChange:n=>this.handleChangeCheckbox(n,"summary")}),t().createElement(S.gN,(0,O.Z)({component:Pe,name:"summary",label:s("authentication.certificateDescription"),placeholder:s("authentication.summaryPlaceholder"),rows:2,LimitLength:1e3,char:!0,disabled:!a.display.summary.checked,defaultValue:a.summary,fontSetting:a.display.summary.settings,onFontChange:(n,r)=>{this.props.onFontChange(n,r,"summary")}},Q))),t().createElement("div",{className:"form-content__main__item"},t().createElement(G.Z,{key:"certificateCode",checked:a.display.certificate_code.checked,onChange:n=>this.handleChangeCheckbox(n,"certificate_code")}),t().createElement(S.gN,(0,O.Z)({label:s("authentication.certificateDetailCode"),component:ct,required:a.display.certificate_code.checked,name:"certificate_code",disabled:!a.display.certificate_code.checked,defaultValue:a.certificate_code,validate:n=>ft(n,a.display.certificate_code.checked)},Q))),t().createElement("div",{className:"form-content__main__item"},t().createElement(G.Z,{key:"logo_url",checked:a.display.logo_url.checked,onChange:n=>this.handleChangeCheckbox(n,"logo_url")}),t().createElement(S.gN,(0,O.Z)({label:s("authentication.certificateDetailCover"),component:ot,name:"logo_url",defaultUrl:a.logo_url,disabled:!a.display.logo_url.checked},Q))),t().createElement("div",{className:"form-content__main__item"},t().createElement(G.Z,{key:"commonSeal",checked:a.display.common_seal.checked,onChange:n=>this.handleChangeCheckbox(n,"common_seal")}),t().createElement(S.gN,(0,O.Z)({label:s("authentication.certificateDetailOfficialSeal"),component:lt,name:"common_seal",defaultValue:a.common_seal,disabled:!a.display.common_seal.checked,fontSetting:a.display.common_seal.settings,onFontChange:(n,r)=>{this.props.onFontChange(n,r,"common_seal")}},Q))),t().createElement("div",{className:"form-content__main__item"},t().createElement(G.Z,{key:"picture",checked:a.display.picture.checked,onChange:n=>this.handleChangeCheckbox(n,"picture")}),t().createElement("span",{className:"form-content__main__item__content__text"},s("authentication.pictrue")),t().createElement("span",{className:"form-content__main__item__content__text__pictrue"},s("authentication.pictrueTip"))),t().createElement("div",{className:"form-content__main__item"},t().createElement(G.Z,{key:"department",checked:a.display.department.checked,onChange:n=>this.handleChangeCheckbox(n,"department")}),t().createElement("span",{className:"form-content__main__item__content__text"},s("common.department"))))}}var Ct=(0,k.Z)()((0,S.$j)(yt)),Et=i(36546),St=i(44289),Ce=i(76828),Nt=i(84874),xt=i(86458);class Dt extends t().Component{constructor(){var e;super(...arguments);e=this,this.state={initSetting:["issue_date","effect_date","overdue_date","job_number","position"],settings:[],userSetting:{}},this.getUserSettings=(0,_.Z)(I().mark(function a(){var s,n,r,l,o,g,L,c,C,Z,m,U;return I().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return s=e.props,n=s.values,r=s.isEdit,l=e.state.initSetting,o=[],V.prev=3,V.next=6,(0,Ce.el)();case 6:g=V.sent,L=g.data,c=L.action_list[0].param.keyValue,C={},c.forEach(x=>{C[x.columnKey]||(C[x.columnKey]=x.columnValue)}),e.setState({userSetting:C}),e.props.onSetUserStting(C),o=c.map(x=>x.columnKey),V.next=19;break;case 16:V.prev=16,V.t0=V.catch(3),o=[];case 19:Z=JSON.parse(JSON.stringify(n.display.custom_field.field)),m=[],U=[],Z.forEach(x=>{(o.includes(x)||l.includes(x))&&m.push([x,!0])}),l.forEach(x=>{Z.includes(x)||(r?U.push([x,!1]):m.push([x,!0]))}),o.forEach(x=>{Z.includes(x)||U.push([x,!1])}),e.setState({settings:m.concat(U)},e.setPropsField);case 26:case"end":return V.stop()}},a,null,[[3,16]])})),this.setPropsField=()=>{var a=this.props,s=a.values,n=a.formik,r=this.state,l=r.settings,o=r.userSetting,g=JSON.parse(JSON.stringify(s)),L=l.filter(c=>c[1]).map(c=>c[0]);L.map(c=>o[c]?o[c]:c),g.display.custom_field.field=L,n.setValues(g)},this.handleChangeCheckbox=(a,s)=>{this.setState(n=>(n.settings[s][1]=a.target.checked,{settings:n.settings}),this.setPropsField)},this.handleDND=(a,s)=>{var n=JSON.parse(JSON.stringify(this.state.settings)),r=n[a];n.splice(a,1),n.splice(s,0,r),this.setState({settings:n},this.setPropsField)},this.renderItem=a=>{var s=this.props.t,n=this.state,r=n.initSetting,l=n.userSetting;return r.includes(a)?s("authentication.".concat(a)):l[a]||a}}componentDidMount(){this.getUserSettings()}render(){var e=this.props,a=e.values,s=e.showFontSetting,n=this.state.settings;return t().createElement("div",{className:"form-content__main__form__more"},n.map((r,l)=>t().createElement(xt.Z,{id:r[0],key:r[0],index:l,onDND:this.handleDND},t().createElement("div",{className:"form-content__main__item"},t().createElement(G.Z,{key:r[0],checked:r[1],onChange:o=>this.handleChangeCheckbox(o,l)}),t().createElement("span",{className:"form-content__main__item__text"},this.renderItem(r[0])),t().createElement("span",{className:"item__action__drag"},localStorage.getItem("dingPersonnel")!=="dingPersonnel"&&t().createElement(Nt.Z,{iconClass:"iconf-move",size:"12px"}))))),s&&t().createElement(ye,{colorPlacement:"topRight",fontSetting:a.display.custom_field.settings,onChange:(r,l)=>{this.props.onFontChange(r,l,"custom_field")}}))}}var Zt=(0,Et.Z5)(St.ZP)((0,k.Z)()((0,S.$j)(Dt))),kt=i(62615);class Pt extends t().Component{constructor(){super(...arguments);this.state={showMoreFontSetting:!1,userSetting:{}},this.onClickSetting=e=>{e.stopPropagation(),this.setState(a=>({showMoreFontSetting:!a.showMoreFontSetting}))},this.onFontChange=(e,a,s)=>{var n=this.props,r=n.values,l=n.formik,o=JSON.parse(JSON.stringify(r));o.display[s].settings[a]=e,l.setValues(o)},this.handlePropsSubmit=()=>{var e=this.props.handleSubmit;e()},this.handleSetUserStting=e=>{this.setState({userSetting:e})},this.renderFooter=()=>{var e=this.props,a=e.isSubmitting,s=a===void 0?!1:a,n=e.onCancel,r=e.t,l=e.values,o=e.isEdit;return t().createElement("footer",{className:"cl-form-fixed-footer"},t().createElement("div",{className:"cl-form-fixed-footer__container  ".concat(l.layout_id,"__container")},t().createElement(h.Z,{onClick:n},r("common.return")),t().createElement(h.Z,{type:"primary",disabled:s,loading:s,onClick:this.handlePropsSubmit},r(o?"common.save":"common.release"))))},this.renderCollapseHeader=e=>{var a=this.props.t;return t().createElement("p",{className:"form-content__main__form__collapse__title"},a("authentication.collapseTitle".concat(e)),t().createElement("span",{className:"form-content__main__form__collapse__subtitle"}," ",a("authentication.collapseSubTitle".concat(e))," "),e===3&&t().createElement(D.Z,{className:"form-content__main__form__collapse__setting",onClick:this.onClickSetting}))}}render(){var e=this,a=this.props,s=a.values,n=a.title,r=a.isEdit,l=a.isCopy,o=this.state,g=o.showMoreFontSetting,L=o.userSetting;return t().createElement("div",{className:"form-content ".concat(s.layout_id,"-form-content")},t().createElement("h1",{className:"form-content__htitle"},n),t().createElement("div",{className:"form-content__main ".concat(s.layout_id,"-main")},t().createElement(pt,{values:s,userSetting:L}),t().createElement(S.l0,{className:"form-content__main__form"},t().createElement(p.Z,{defaultActiveKey:["basic","content","more"],ghost:!0},t().createElement(p.Z.Panel,{header:this.renderCollapseHeader(1),key:"basic"},t().createElement(_t,{values:s})),t().createElement(p.Z.Panel,{header:this.renderCollapseHeader(2),key:"content"},t().createElement(Ct,{values:s,onFontChange:function(){return e.onFontChange(...arguments)}})),t().createElement(p.Z.Panel,{header:this.renderCollapseHeader(3),key:"more"},t().createElement(Zt,{values:s,onFontChange:function(){return e.onFontChange(...arguments)},showFontSetting:g,isEdit:r||l,onSetUserStting:this.handleSetUserStting}))),t().createElement(kt.I,null),this.renderFooter())),t().createElement(ht,{values:s}))}}var Lt=(0,k.Z)()((0,S.$j)(Pt)),Ot=i(38642),Tt=i(4408),Ft=i(32407),Oe="https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/seal-zh.png",It=Ft.Z.language==="en_us"?"".concat(j.english.desc):"".concat(j.chinese.desc),Mt=v=>{var e=v.user;return{enterpriseName:e.enterpriseName,enterpriseLogo:e.enterpriseLogo}};class Te extends f.Component{constructor(){var e;super(...arguments);e=this,this.state={initialParams:{name:"",language_type:"chinese",layout_id:"verticalLeft",template_id:"",image_url:"",title:"",certificate_code:{type:he,code:""},summary:"".concat(It),expire_date:0,permanently_valid:"permanent",message:"send_message",message_properties:{countdown_date:1,created:!0,user:!0,nominee:{checked:!1,users:[]}},logo_url:this.props.enterpriseLogo,common_seal:{type:"name",company_name:this.props.enterpriseName,common_seal_url:Oe},isOperating:!1,display:{title:{checked:!0,settings:{font_family:"\u601D\u6E90\u9ED1\u4F53",font_size:"96",color:"#1F2B2B",line_height:"1.4"}},summary:{checked:!0,settings:{font_family:"\u601D\u6E90\u9ED1\u4F53",font_size:"42",color:"#27282D",line_height:"1.6"}},certificate_code:{checked:!0},department:{checked:!0},picture:{checked:!0},logo_url:{checked:!0},common_seal:{checked:!0,settings:{font_family:"\u601D\u6E90\u9ED1\u4F53",font_size:"52",color:"#d64f4f",line_height:"1"}},custom_field:{field:[],settings:{font_family:"\u601D\u6E90\u9ED1\u4F53",font_size:"36",color:"#2F3033",line_height:"1.4"}}}},isLoading:!0},this.parseString=a=>{try{return JSON.parse(a)}catch(s){return B.default.warning(s.message),null}},this.getDetailById=function(){var a=(0,_.Z)(I().mark(function s(n){var r,l,o,g,L,c,C,Z,m,U,ne,V,x;return I().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return r=e.state.initialParams,q.next=3,(0,Ce.Nm)(n);case 3:l=q.sent,o=l.data.data,g=o.language_type,L=o.company_name,c=o.common_seal_url,C=o.layout_id,Z=o.message_properties,m=o.display,U=o.certificate_code,ne=o.certificate_code_cate,V=ne===void 0?"":ne,x=e.parseString(Z)||{},e.setState({initialParams:(0,F.Z)((0,F.Z)({},o),{},{language_type:g||r.language_type,layout_id:C||r.layout_id,certificate_code:{code:U,type:V},message_properties:{countdown_date:Number(x.countdown_date),created:e.convert2Boolean(x.created),user:e.convert2Boolean(x.user),nominee:{checked:x.nominee?e.convert2Boolean(x.nominee.checked):!1,users:x.nominee?x.nominee.users:[]}},common_seal:{type:L?"name":"picture",company_name:L||e.props.enterpriseName,common_seal_url:c||Oe},display:{certificate_code:{checked:e.convert2Boolean(m.certificate_code.checked)},department:{checked:e.convert2Boolean(m.department.checked)},picture:{checked:e.convert2Boolean(m.picture.checked)},logo_url:{checked:e.convert2Boolean(m.logo_url.checked)},title:{checked:e.convert2Boolean(m.title.checked),settings:e.parseString(m.title.settings)||r.display.title.settings},summary:{checked:e.convert2Boolean(m.summary.checked),settings:e.parseString(m.summary.settings)||r.display.summary.settings},common_seal:{checked:e.convert2Boolean(m.common_seal.checked),settings:e.parseString(m.common_seal.settings)||r.display.common_seal.settings},custom_field:{field:m.custom_field.field||[],settings:e.parseString(m.custom_field.settings)||r.display.custom_field.settings}}}),isLoading:!1});case 8:case"end":return q.stop()}},s)}));return function(s){return a.apply(this,arguments)}}(),this.handleSubmit=function(){var a=(0,_.Z)(I().mark(function s(n,r){var l,o,g,L,c,C,Z,m,U,ne,V,x,ve,q,Fe,_e;return I().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return l=X.parse(e.props.history.location.search),o=l.id,g=l.copy,L=n.layout_id,c=n.common_seal,C=n.message_properties,Z=n.display,m=n.certificate_code,U=(0,F.Z)((0,F.Z)({},n),{},{style:L.startsWith("vertical")?"vertical":"horizontal",company_name:c.type==="name"?c.company_name:"",common_seal_url:c.type==="picture"?c.common_seal_url:"",message_properties:JSON.stringify(C),certificate_code:m.code,certificate_code_cate:m.type,display:(0,F.Z)((0,F.Z)({},Z),{},{title:{checked:Z.title.checked,settings:JSON.stringify(Z.title.settings)},summary:{checked:Z.summary.checked,settings:JSON.stringify(Z.summary.settings)},common_seal:{checked:Z.common_seal.checked,settings:JSON.stringify(Z.common_seal.settings)},custom_field:{field:Z.custom_field.field,settings:JSON.stringify(Z.custom_field.settings)}})}),ne=o&&!g,ne&&(U.id=o),H.prev=5,V=ne?"edit":"add",H.next=9,(0,Ce.xs)(U,V);case 9:x=H.sent,ve=x.data,q=ve.code,Fe=ve.msg,q?B.default.warning(Fe):B.default.success(o?e.props.t("common.saveSuccess"):e.props.t("common.releaseSuccess")),setTimeout(()=>{r.setSubmitting(!1),q||e.props.history.push("/knowledgeBase/certificateResources/certificate")},1e3),H.next=21;break;case 16:H.prev=16,H.t0=H.catch(5),_e=H.t0.response.data.code,_e==="enterpriseapi.410000"?B.default.error(e.props.t("authentication.submitSummaryTips")):_e==="enterpriseapi.410001"?B.default.error(e.props.t("authentication.submitTitleTips")):_e==="enterpriseapi.410003"?B.default.error(e.props.t("authentication.submitNameTips")):B.default.error(e.props.t("common.releaseFailure")),setTimeout(()=>{r.setSubmitting(!1)},1e3);case 21:case"end":return H.stop()}},s,null,[[5,16]])}));return function(s,n){return a.apply(this,arguments)}}(),this.convert2Boolean=a=>{var s=["true","1",1,!0];return!!s.includes(a)},this.handleCancel=()=>{var a=this.props,s=a.history,n=a.t;ie.Z.confirm({title:n("authentication.returnModalTitle"),icon:t().createElement(pe.Z,null),content:n("authentication.returnModalContent"),okText:n("common.return"),onOk(){s.push("/knowledgeBase/certificateResources/certificate")}})}}componentDidMount(){var e=X.parse(this.props.history.location.search),a=e.id,s=e.layout,n=e.imgId,r=e.imgScr;a?this.getDetailById(a):this.setState(l=>({isLoading:!1,initialParams:(0,F.Z)((0,F.Z)({},l.initialParams),{},{layout_id:s||l.initialParams.layout_id,template_id:n||l.initialParams.template_id,image_url:r||l.initialParams.image_url,display:(0,Ot.UI)("MRJ_WHITE_FLAG")&&s==="verticalMRJ"?Ve:l.initialParams.display})}))}render(){var e=this.props,a=e.prefixCls,s=e.history,n=e.t,r=this.state,l=r.initialParams,o=r.isLoading;if(o)return t().createElement(W.Z,{size:"large"});var g=X.parse(s.location.search),L=g.id,c=g.copy,C=L&&!c,Z=!!c,m="".concat(n(C?"common.edit":"common.add")).concat(n("authentication.certificateDetailTitlle"));return t().createElement("div",{className:a},t().createElement(Tt.Z,{title:n(C?"documentTitle.editCertificate":"documentTitle.addCertificate")}),t().createElement("div",{className:"".concat(a,"__content")},t().createElement(S.J9,{initialValues:l,onSubmit:this.handleSubmit,render:U=>t().createElement(Lt,(0,O.Z)({},U,{title:m,isEdit:C,isCopy:Z,onCancel:this.handleCancel}))})))}}Te.defaultProps={prefixCls:"certificate-detail-page"};var $t=(0,re.$j)(Mt)((0,k.Z)()(Te))},76828:function(ue,Y,i){"use strict";i.d(Y,{ar:function(){return de},eZ:function(){return ie},Xc:function(){return F},el:function(){return _},Nm:function(){return ce},xs:function(){return B}});var O=i(88986),b=i(37055),W=i(10237);function de(T){var I=T.page_number,f=T.page_size,t=T.style,k=T.template_type,re=k===void 0?"":k,X=b.ZP.CertificateDetail.getTplList();return W.WY.get({url:X,params:{style:t,page_number:I,page_size:f,template_type:re}})}function ie(T){var I=T.title,f=T.url,t=T.style,k=b.ZP.CertificateDetail.addTpl();return W.WY.post({url:k,data:{title:I,url:f,style:t}})}function F(T){var I=b.ZP.CertificateDetail.deleteTpl({templateId:T});return W.WY.post({url:I})}function _(){var T=b.ZP.advancedSetting.getSettingStatusByType("user_view");return W.WY.get({url:T})}function ce(T){var I=b.ZP.CertificateDetail.getInfo(T);return W.WY.get({url:I})}function B(T,I){var f=b.ZP.CertificateDetail[I]();return W.WY.post({url:f,data:(0,O.Z)({},T)})}},76243:function(ue,Y,i){"use strict";i.d(Y,{MJ:function(){return O},$1:function(){return b},To:function(){return W}});var O={verticalLeft:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/layout-vertical-left.png",verticalCenter:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/layout-vertical-center.png",verticalMRJ:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/layout-vertical-center.png",horizontalLeft:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/layout-horizontal-left.png",horizontalCenter:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/layout-horizontal-center.png"},b={verticalLeft:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/template-vertical-left.psd",verticalCenter:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/template-vertical-center.psd",verticalMRJ:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/template-vertical-mrj.psd",horizontalLeft:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/template-horizontal-left.psd",horizontalCenter:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/template-horizontal-center.psd"},W={verticalLeft:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/base-v-left.png",verticalCenter:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/base-v-center.png",horizontalLeft:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/base-h-left.png",horizontalCenter:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/base-h-center.png"}}}]);
