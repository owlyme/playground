(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[4252],{67620:function(Le,ve,e){"use strict";var X=e(34792),R=e(48086),ne=e(12924),U=e.n(ne),w=e(19222),K=e.n(w),fe=e(32407),l=e(37055),b=l.ZP.Common.editorUpload(),a="cl_editor_toolbar_default",W="cl_editor_content_default";class E extends ne.Component{constructor(y){super(y);this.initEditor=()=>{this.editor=new(K())(".".concat(this.props.toolbarCls),".".concat(this.props.contentCls)),this.editor.config.zIndex=10,this.editor.config.onfocus=()=>{var u=document.querySelector(".".concat(this.props.contentCls));u&&(u.style.minHeight=this.props.contentHeight,u.style.height="auto")},this.editor.config.onblur=()=>{var u=document.querySelector(".".concat(this.props.contentCls));u&&(u.style.height=this.props.contentHeight)},this.editor.config.menus=this.props.controls,this.editor.config.placeholder=this.props.placeholderContent||fe.Z.t("component.pleaseEnterText"),this.editor.config.onchange=u=>{this.props.onChange&&this.props.onChange(u)},this.editor.config.onchangeTimeout=300,this.editor.config.uploadImgServer=b,this.editor.config.uploadImgMaxLength=5,this.editor.config.uploadImgParams={access_token:window.localStorage.getItem("token")},this.editor.config.uploadFileName="files",this.editor.config.uploadImgHooks={customInsert(u,L){var B=L.data;B.forEach(o=>{u(o)})}},this.editor.config.pasteTextHandle=function(u){return~u.indexOf("<!--[if gte mso 9]><xml>")||~u.indexOf("<spanyes")?"\u7C98\u8D34\u5185\u5BB9\u6709\u4E71\u7801\uFF0C\u8BF7\u4F7F\u7528ctrl+shift+v\u6765\u7C98\u8D34\u5185\u5BB9(mac\u8BF7\u4F7F\u7528command+shift+v)":u},this.editor.config.focus=!1,this.editor.config.uploadImgMaxSize=3*1024*1024,this.editor.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp"],this.editor.config.showLinkImg=!1,this.editor.config.customAlert=function(u,L){switch(L){case"success":R.default.success(u);break;case"info":R.default.info(u);break;case"warning":R.default.warning(u);break;case"error":R.default.error(u);break;default:R.default.info(u);break}},this.editor.create(),this.editor.txt.html("".concat(this.props.placeholder))},this.getHtml=()=>this.editor.txt.html(),this.getText=()=>this.editor.txt.text(),this.setHtml=u=>this.editor.txt.html(u),this.editor=null}componentDidMount(){this.initEditor()}render(){var y=this.props.toolbarCls?"".concat(this.props.toolbarCls," cl_editor_toolbar"):"".concat(a," cl_editor_toolbar"),u=this.props.contentCls?"".concat(this.props.contentCls," cl_editor_content"):"".concat(W," cl_editor_content");return U().createElement(U().Fragment,null,U().createElement("div",{className:y}),U().createElement("div",{className:u,style:{height:this.props.contentHeight,minHeight:this.props.contentHeight}}))}}E.defaultProps={controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],placeholder:"\u5185\u5BB9\u7F16\u8F91\u533A\u57DF",toolbarCls:a,contentCls:W,contentHeight:"300px",placeholderContent:""},ve.Z=E},99891:function(Le,ve,e){"use strict";var X=e(12924),R=e.n(X),ne=e(28216),U=e(91768),w=e(37055),K=e(10237),fe=e(60667);class l extends R().PureComponent{constructor(W){super(W);this.getWaterMarkText=E=>{var F=this.props.userInfo,y=F.jobNumber,u=localStorage.getItem("waterMarkPostName"),L=[],B=E.find(se=>se.type==="content_setting"),o=E.find(se=>se.type==="content_custom");return B.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),o.param.checked==="true"&&o.param.comment[0]!==""&&this.setState({commentText:o.param.comment[0]}),B.param.comment.indexOf("position")!==-1&&u&&u!==""&&L.push("".concat(u)),B.param.comment.indexOf("jobnumber")!==-1&&y&&y!==""&&L.push("".concat(y)),L.join("-")},this.getWaterMarkApplication=E=>{var F=this.props.scenes,y=E.find(u=>u.type==="application_scenario");y.param.comment.indexOf(F)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=E=>{var F=E.find(y=>y.type==="dispersive");this.setState({isDispersive:F.param.checked==="true"})},this.getDynamicSet=()=>{var E=w.ZP.advancedSetting.dynamicWaterMarkNew(),F={access_token:window.localStorage.getItem("token")};K.WY.get({url:E,params:F}).then(y=>{var u=JSON.parse(y.data.actions);this.setState({waterMarkText:this.getWaterMarkText(u),actions:u}),this.getWaterMarkApplication(u),this.getWaterIsDispersive(u)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var W=localStorage.getItem("waterMarkPostName");W===""||W===null?this.getPostName():this.getDynamicSet()}getPostName(){var W=w.ZP.advancedSetting.getPostName();K.WY.get({url:W}).then(E=>{localStorage.setItem("waterMarkPostName",E.data.post_names[0]||""),this.getDynamicSet()})}render(){var W=this.state,E=W.showWaterMark,F=W.waterMarkCount,y=W.isUserName,u=W.isDispersive,L=W.waterMarkText,B=W.actions,o=W.commentText,se=this.props.userInfo,ie=se.name,z=se.unionid,le=se.sourceType;return R().createElement("div",{className:"common-watermark"},E&&new Array(F).fill(0).map((ee,ye)=>R().createElement("div",{key:ye,className:"common-watermark-item ".concat(u?"isDispersive":"")},R().createElement("span",{className:"common-watermark-item-content"},o!==""&&R().createElement("span",{className:"item-part"},o),y&&R().createElement("span",null,o!==""&&R().createElement("span",null,"-"),R().createElement(fe.Z,{dataType:"userName",value:z,name:ie,type:le})),R().createElement("span",{className:"item-part"},(y||o!=="")&&L!==""&&R().createElement("span",null,"-"),L)))))}}var b=a=>({userInfo:a.user});ve.Z=(0,ne.$j)(b)((0,U.Z)()(l))},77219:function(Le,ve,e){"use strict";var X=e(22385),R=e(31097),ne=e(62029),U=e(12924),w=e.n(U),K=e(91768),fe=e(84874),l=W=>{var E=W.t,F=W.hasZip;return w().createElement("div",{className:"cl-uploader__tooltips__text"},w().createElement("p",{className:"title"},E("component.uploadTypeTitle"),":"),w().createElement("p",{className:"text"},E("common.video"),": 3gp\u3001asf\u3001 avi\u3001 dat\u3001 dv\u3001 flv\u3001 f4v\u3001 m2t\u3001 m3u8\u3001 m4v\u3001 mj2\u3001 mjpeg\u3001 mkv\u3001 mov\u3001 mp4\u3001 mpe\u3001 mpg\u3001 mpeg\u3001 mts\u3001 qt\u3001 rm\u3001 rmvb\u3001 swf\u3001 ts\u3001 vob\u3001 wmv\u3001 webm"),w().createElement("p",{className:"text"},E("common.audio"),": aac\u3001 ac3\u3001 acm\u3001 amr\u3001 ape\u3001 caf\u3001 flac\u3001 m4a\u3001 mp3\u3001 ra\u3001 wav\u3001 wma\u3001 ogg"),w().createElement("p",{className:"text"},E("common.doc"),": pdf\u3001doc\u3001docx\u3001xls\u3001xlsx\u3001txt \u3001ppt\u3001pptx"),w().createElement("p",{className:"text"},E("common.image"),": jpg\u3001jpeg\u3001png"),w().createElement("p",{className:"text"},E("common.html"),": zip"),w().createElement("p",{className:"text"},"SCORM: zip"),F&&w().createElement("p",{className:"text"},E("common.zip"),": zip\u3001rar"),w().createElement("br",null),w().createElement("p",{className:"title"},E("component.tipAndDesc"),":"),w().createElement("p",{className:"text"},"1. ",E("component.videoLimitTip"),"\uFF1B",E("component.audioLimitTip"),"\uFF1B",E("component.docLimitTip"),"\uFF1B",E("component.imageLimitTip"),"\uFF1B",E("component.htmlLimitTip"),"\uFF1B",F?"".concat(E("component.zipLimitTip"),"\uFF1B"):""),w().createElement("p",{className:"text"},"2. ",E("component.uploadTipTwo")),w().createElement("p",{className:"text"},"3. ",E("component.uploadTipThree")),w().createElement("p",{className:"text"},"4. ",E("component.htmlTipFour")),w().createElement("p",{className:"text"},"5. ",E("upload.scormTip")))},b={position:"relative",zIndex:3,marginLeft:"5px"},a=W=>w().createElement(R.Z,(0,ne.Z)({overlayClassName:"cl-uploader__tooltips",placement:"top",title:l({t:W.t,hasZip:W.hasZip})},W),w().createElement("span",{style:b},W.children||w().createElement(fe.Z,{iconClass:"iconf-tipe",color:"#D1D2D6",size:"14px"})));ve.Z=(0,K.Z)()(a)},63848:function(Le,ve,e){"use strict";var X=e(36877),R=e(32969),ne=e(12924),U=e.n(ne),w=e(91768),K=e(56130);class fe extends U().PureComponent{constructor(){super(...arguments);this.onChange=(b,a)=>{this.props.onChange(b,a)}}render(){var b=this.props,a=b.value,W=b.classify,E=b.showLabel,F=b.className,y=b.t,u=b.style;return U().createElement("div",{className:"classify-cascader ".concat(F)},E?U().createElement("span",{className:"classify-cascader-label"},y("component.selectClassifyLabel")):null,U().createElement(R.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(F),options:W,onChange:this.onChange,placeholder:y("component.selectClassifyLabel"),value:a,style:u,loadData:this.props.loadData}))}}fe.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},ve.Z=(0,K.Z)((0,w.Z)()(fe))},17829:function(Le,ve,e){"use strict";e.d(ve,{Z:function(){return F}});var X=e(62029),R=e(32157),ne=e(75869),U=e(12924),w=e.n(U),K=e(91768),fe=e(38642),l=e(37055),b=e(10237);function a(y){var u=l.ZP.CoursewareSelector.getTree();return b.WY.get({url:u,params:y})}var W=ne.Z.TreeNode;class E extends w().Component{constructor(u){super(u);this.onSelect=(L,B)=>{var o=this.state.treeData,se=B.node.props,ie=se.title,z=se.eventKey,le=se.dataRef,ee={title:ie,eventKey:z,dataRef:le};this.setState({active:z});var ye=(0,fe.XN)(o,z);this.props.onChangeClassify(ee,ye)},this.getTree=()=>{var L={privatization:this.props.privatization||null};a(L).then(B=>{this.setState({treeData:B.data})})},this.chooseRoot=()=>{var L=this.props.t;this.setState({active:"0"});var B={title:L("common.all"),eventKey:"0",dataRef:{}};this.props.onChangeClassify(B,[L("common.all")])},this.state={treeData:[],active:"0"}}componentDidMount(){this.getTree()}componentDidUpdate(u){var L=this.props.privatization,B=u.privatization;L!==B&&this.getTree()}render(){var u=this.props,L=u.t,B=u.showTotal,o=u.total,se=u.controls,ie=u.noHeader,z=this.state,le=z.treeData,ee=z.active,ye=de=>de.map(Z=>Z.children&&Z.children.length?w().createElement(W,{key:Z.value,title:Z.label,dataRef:Z},ye(Z.children)):w().createElement(W,{key:Z.value,title:Z.label,dataRef:Z}));return w().createElement("div",{className:ie?"courseware__left courseware__left_active":"courseware__left"},w().createElement("div",{className:ee==="0"?"courseware__left__all active":"courseware__left__all",onClick:this.chooseRoot},L("common.all")," ",B?w().createElement(w().Fragment,null,"(",o,")"):null),w().createElement(ne.Z,(0,X.Z)({},se,{defaultExpandAll:!0,onSelect:this.onSelect,className:ee==="0"?"blur":"focus"}),ye(le)))}}E.defaultProps={showTotal:!0,noHeader:!1,total:0,controls:{},onChangeClassify:()=>{},privatization:null};var F=(0,K.Z)("translation",{withRef:!0})(E)},10780:function(Le,ve,e){"use strict";e.d(ve,{Z:function(){return me}});var X=e(62029),R=e(34792),ne=e(48086),U=e(57361),w=e(18106),K=e(88108),fe=e(9754),l=e.n(fe),b=e(12924),a=e.n(b),W=e(91768),E=e(78001),F=e(28216),y=e(18329),u=e(17829),L=e(20228),B=e(11382),o=e(63185),se=e(9676),ie=e(84874),z=e(95664),le=e(87312);class ee extends a().Component{constructor(){super(...arguments);this.onCheckAll=O=>{var V=O.target.checked;this.props.checkAll(V)},this.onChangePage=O=>{this.props.onChangePageNumber(O)},this.checkOne=O=>{var V=O.target.checked,m=O.target.value;this.props.checkOne(m,V)}}render(){var O=this.props,V=O.coursewares,m=V===void 0?[]:V,C=O.paginationData,_=O.isLoading,D=O.onRefresh,x=O.t,te=O.replaceStatus,Q=m.findIndex(ae=>ae.isChecked===!1);return a().createElement("div",{className:"courseware__right__list"},m.length>0?a().createElement("div",{className:"courseware__right__list__box"},a().createElement(se.Z,{className:"courseware__right__list__checkall",onChange:this.onCheckAll,checked:Q===-1,disabled:te},x("component.selectPage")),a().createElement("div",{className:"courseware__right__list__group"},_?a().createElement("div",{className:"courseware__right__loading"},a().createElement(B.Z,null)):null,m.map((ae,he)=>a().createElement(se.Z,{value:ae.id,key:he,onChange:this.checkOne,checked:ae.isChecked},a().createElement("span",{className:"courseware__right__list__icon"},a().createElement(ie.Z,{iconClass:ae.icon})),ae.name))),a().createElement(z.Z,{totalNum:C.total,totalPage:C.pages,current:C.page_num,defaultPageSize:10,onChange:this.onChangePage,onRefresh:D})):a().createElement(le.Z,{tipText:x("course.courseNoDataTip")}))}}ee.defaultProps={coursewares:[],paginationData:{pages:0,total:0},onChangePageNumber:()=>{},checkOne:()=>{},checkAll:()=>{}};var ye=(0,W.Z)()(ee),de=e(49111),Z=e(19650),G=e(88983),ue=e(47933),Ke=e(59250),Be=e(13013),ze=e(57663),He=e(71577),Ue=e(30887),Xe=e(99210),We=e(1164),Te=e(86726),Me=pe=>({userInfo:pe.user});class be extends a().Component{constructor(O){super(O);this.handleMenuClick=V=>{var m=parseInt(V.key,10);m===2&&this.handleAddArticle()},this.handleAddArticle=()=>{var V=this.props.classifyId;We.Z.targetTo({path:"/training/resourceManage/library/articleDetail?classifyId=".concat(V)})},this.handleChooseFiles=V=>{this.props.dispatch({type:"uploader/chooseFiles",payload:{choosedFiles:V.target.files,dispatch:this.props.dispatch}}),V.target.value=null,V.target.files=null},this.renderDropdown=()=>{var V=this.props,m=V.prefixCls,C=V.t,_=this.state,D=_.shouldRenderCreateCourse,x=_.shouldRenderNewArticle,te=a().createElement(Xe.Z,{className:"".concat(m,"__dropdowm__menu"),onClick:this.handleMenuClick},D&&null,x&&a().createElement(Xe.Z.Item,{key:2},C("resourceLibrary.newArticle")));return x?a().createElement(Be.Z,{overlay:te},a().createElement(He.Z,{type:"primary"},C("course.courseDetailAddCourseware"),a().createElement(ie.Z,{iconClass:"iconf-arrow-under",size:"14px"}))):null},this.state={shouldRenderCreateCourse:(0,Te.H3)("createCourse",(0,Te.V9)("course",O.userInfo.modules)),shouldRenderNewArticle:(0,Te.H3)("add_articles",(0,Te.V9)("library",O.userInfo.modules))}}render(){var O=this.props.prefixCls,V=this.state,m=V.shouldRenderCreateCourse,C=V.shouldRenderNewArticle;return!m&&!C?null:a().createElement("div",{className:O},this.renderDropdown())}}be.defaultProps={prefixCls:"courseware__right__filter__new-create-btn"};var je=(0,F.$j)(Me)((0,W.Z)()(be)),Ge=e(48479);class Je extends a().Component{constructor(O){super(O);this.onSearch=V=>{var m=this.props,C=m.contentType,_=m.isSearchOneResource,D={contentType:this.state.contentType,keyword:V};_&&(D.contentType=C),this.props.getQueryData(D),this.setState({keyword:V})},this.changeType=V=>{var m=V.target.value==="all"?"":V.target.value,C={contentType:m,keyword:this.state.keyword};this.props.getQueryData(C),this.setState({contentType:m})},this.state={contentType:"",keyword:""}}componentDidMount(){var O=this.props,V=O.replaceStatus,m=O.setButtonDisabled;if(V){var C={contentType:m,keyword:this.state.keyword};this.props.getQueryData(C),this.setState({contentType:m})}}render(){var O=this.props,V=O.classifyCount,m=O.excludeType,C=O.classifyId,_=O.shouldRenderCreateBtns,D=O.t,x=O.classifyData,te=O.replaceStatus,Q=O.setButtonDisabled,ae=O.showHtml,he=ae===void 0?!0:ae,Ze={all:a().createElement(ue.ZP.Button,{value:"all",key:"all",disabled:te?Q!=="all":!1},D("common.all"),"(",V.all,")"),video:a().createElement(ue.ZP.Button,{value:"video",key:"video",disabled:te?Q!=="video":!1},D("common.video"),"(",V.video,")"),audio:a().createElement(ue.ZP.Button,{value:"audio",key:"audio",disabled:te?Q!=="audio":!1},D("common.audio"),"(",V.audio,")"),application:a().createElement(ue.ZP.Button,{value:"application",key:"application",disabled:te?Q!=="application":!1},D("common.doc"),"(",V.application,")"),h5:a().createElement(ue.ZP.Button,{value:"h5",key:"h5",disabled:te?Q!=="h5":!1},D("h5Article.title"),"(",V.h5,")"),html:a().createElement(ue.ZP.Button,{value:"html",key:"html",disabled:te?Q!=="html":!1},D("common.html"),"(",V.html,")"),picture:a().createElement(ue.ZP.Button,{value:"picture",key:"picture",disabled:te?Q!=="picture":!1},D("common.image"),"(",V.picture,")"),scorm:a().createElement(ue.ZP.Button,{value:"scorm",key:"scorm",disabled:te?Q!=="scorm":!1},"SCORM(",V.scorm,")")},Oe=m.split(",");return!he&&!Oe.includes("html")&&Oe.push("html"),!he&&!Oe.includes("scorm")&&Oe.push("scorm"),a().createElement("div",{className:"courseware__right__filter"},a().createElement("div",{className:"courseware__right__filter__header"},a().createElement("div",{className:"courseware__right__filter__header__title"},x.title||D("common.all")),a().createElement(Ge.Z,{onSearch:this.onSearch,prefixCls:"courseware__right__filter__header__search",placeholder:D("searchInputPlaceholder.courseware")})),a().createElement(ue.ZP.Group,{defaultValue:"all",onChange:this.changeType},a().createElement(Z.Z,{size:0,wrap:!0,style:{flexWrap:"wrap"}},Object.keys(Ze).map(Fe=>{var ke=Oe.includes(Fe)?null:Ze[Fe];return ke}))),_&&a().createElement(je,{classifyId:C}))}}Je.defaultProps={classifyCount:{all:0,video:0,audio:0,application:0,excludeType:"",showHtml:!0},getQueryData:()=>{}};var Re=(0,W.Z)()(Je),Ee=e(10237),ce=e(37055),Pe=K.Z.TabPane,$={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},width:1e3,maskClosable:!1,wrapClassName:"qa-select-courseware-confirm"},H=pe=>({userInfo:pe.user});class J extends a().Component{constructor(O){var V;super(O);V=this,this.getLocalTabs=m=>{var C=this.state.tabs;return Array.isArray(m)&&m.length>0?m.filter(_=>_.storageType==="LOCAL"):[...C]},this.getStorageSetting=(0,U.Z)(l().mark(function m(){var C,_,D,x,te;return l().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return C=V.props.onlyShowStorageTabKey,_=ce.ZP.localStorage.getStorage(),ae.next=4,Ee.WY.get({url:_});case 4:D=ae.sent,x=D.data,x.code===0&&(te=window.OnlyShowLocalStorage?V.getLocalTabs(x.data):V.getTabs(x.data),C&&(te=te.filter(he=>he.id===C)),V.setState({storageTabs:[...te]},()=>{var he=V.state.storageTabs,Ze=he===void 0?[]:he;V.setState({activeTabKey:Ze.length>0?Ze[0].id:"public"})}));case 7:case"end":return ae.stop()}},m)})),this.getTabs=m=>{var C=this.props.showPrivate,_=C===void 0?!0:C,D=this.state.tabs;if(Array.isArray(m)&&m.length>0){var x=m.filter(ae=>ae.isDefault),te=m.findIndex(ae=>ae.isDefault);te>-1&&m.splice(te,1);var Q=[...x,...D,...m];return _!==void 0&&!_&&(Q=Q.filter(ae=>ae.storageType!=="LOCAL")),Q}return[...D]},this.compileData=m=>{var C=this.state.checkedList,_=m.map(D=>{var x=ce.Ss.indexOf(D.contentType)>-1;return x?{name:D.title,id:D.id,status:D.status,type:"mp3",icon:ce.e1.mp3,duration:D.duration,originalType:"mp3",isChecked:C.findIndex(te=>te.id===D.id)!==-1,data:D}:D.contentType==="scorm"?{name:D.title,id:D.id,status:D.status,type:"scorm",icon:ce.e1.scorm,duration:D.duration,originalType:"scorm",isChecked:C.findIndex(te=>te.id===D.id)!==-1,data:D}:{name:D.title,id:D.id,status:D.status,type:D.type,icon:ce.e1[D.type],duration:D.duration,originalType:D.type,isChecked:C.findIndex(te=>te.id===D.id)!==-1,data:D}});return _},this.onCancel=()=>{var m=this.props.onCancel;m&&this.props.onCancel()},this.onOk=()=>{if(this.props.onOk){if(this.props.replaceStatus&&this.state.checkedList.length===0){var m=this.props.t;ne.default.warning(m("study.onlyChooseOne"));return}var C=this.state.checkedList.map(_=>({id:_.id,name:_.name,type:_.type,componentName:"CoursewareSelector",icon:_.icon,duration:_.duration,originalType:_.type,status:_.status,data:_.data}));this.props.onOk(C)}},this.onChangeClassify=m=>{var C=this.state.page;C.resourceClassify=m.eventKey,this.setState({page:C,classifyData:m},()=>{this.props.dispatch({type:"uploader/setUploaderParams",payload:{classifyId:m.eventKey,bizType:0}}),this.getList(),this.getCount()})},this.getQueryData=m=>{var C=this.state.page;C.contentType=m.contentType,C.keyword=m.keyword,C.pageNumber=1,this.setState({page:C},()=>{this.getList(),this.getCount()})},this.handleRefresh=()=>{this.getList(),this.getCount()},this.checkOne=(m,C)=>{var _=this.props,D=_.t,x=_.resourceLocked,te=_.defaultChecked,Q=[...this.state.coursewares],ae=[...this.state.checkedList],he=Q.findIndex(ke=>ke.id===m),Ze=ae.findIndex(ke=>ke.id===m);if(x){var Oe=te.some(ke=>ke.id===m&&ke.resource_lock);if(Oe){ne.default.warning(D("learning.lockedTip"));return}}if(Ze===-1?ae.push(Q[he]):ae.splice(Ze,1),this.props.replaceStatus){var Fe=!1;if(this.props.allChecked.forEach(ke=>{ke.id===m&&(ne.default.warning(D("study.courseworkAlreadyExists")),Fe=!0)}),Fe)return;ae.length>1&&ae.splice(Q[he],1),Q.forEach(ke=>{ke.isChecked=!1})}Q[he].isChecked=C,this.setState({coursewares:Q,checkedList:ae})},this.checkAll=m=>{var C=[...this.state.checkedList],_=this.props,D=_.resourceLocked,x=_.t,te=_.defaultChecked,Q=this.state.coursewares.map(ae=>{ae.isChecked=m;var he=C.findIndex(Oe=>Oe.id===ae.id);if(he===-1&&m)C.push(ae);else if(!m){var Ze=te.some(Oe=>Oe.id===ae.id&&Oe.resource_lock);D&&Ze?(ae.isChecked=!0,ne.default.warning(x("learning.lockedTip"))):C.splice(he,1)}return ae});this.setState({coursewares:Q,checkedList:C})},this.getList=()=>{var m=this.state,C=m.page,_=m.total,D=m.activeTabKey;this.setState({isLoading:!0}),D&&D!=="public"&&(C.privatization=D),Ee.WY.get({url:ce.ZP.CoursewareSelector.getList(),params:C}).then(x=>{x.data.list=this.compileData(x.data.list),this.setState({isLoading:!1,coursewares:x.data.list,coursewaresData:x.data,total:"".concat(C.resourceClassify)==="0"?x.data.total:_})})},this.getCount=m=>{var C=this.state,_=C.activeTabKey,D=C.page,x=ce.ZP.CoursewareSelector.getCount(),te={resourceClassify:this.state.page.resourceClassify,excludeType:this.props.excludeType,privatization:_==="public"?null:_,keyword:m?m.keyword:D.keyword};Ee.WY.get({url:x,params:te}).then(Q=>{this.setState({classifyCount:Q.data.data})})},this.onChangePageNumber=m=>{var C=this.state.page;C.pageNumber=m,this.setState({page:C},()=>{this.getList()})},this.handleTabChange=m=>{var C=this.state.page;C.privatization=m==="public"?null:m,C.resourceClassify="0",this.setState({activeTabKey:m,page:C,classifyData:{}},()=>{this.getList(),this.getCount()})},this.getTabType=()=>{var m=this.state,C=m.storageTabs,_=C===void 0?[]:C,D=m.activeTabKey,x=_.filter(te=>te.id===D);return!(x.length>0&&x[0].storageType&&x[0].storageType!=="PUBLIC_CLOUD")},this.state={classifyData:{},page:{resourceClassify:0,keyword:"",contentType:O.contentType,pageNumber:1,pageSize:10,excludeType:O.excludeType},coursewares:[],coursewaresData:{},total:0,classifyCount:{all:0,video:0,audio:0,application:0},checkedList:[],isLoading:!1,activeTabKey:"public",tabs:[{id:"public",name:O.t("localStorage.commonStorage"),key:"public",storageType:"PUBLIC_CLOUD"}]}}componentDidMount(){this.getStorageSetting()}componentDidUpdate(O){if(O.visible!==this.props.visible&&this.props.visible){var V=[...this.props.defaultChecked],m=this.props.replaceStatus,C=this.state.storageTabs,_=C===void 0?[]:C,D;if(m){var x=V[0].originalType;x==="mp4"?D="video":x==="mp3"?D="audio":ce.Yq.includes(x)?D="application":x==="h5"?D="h5":x==="html"?D="html":x==="scorm"?D="scorm":ce.WB.includes(x)&&(D="picture")}var te=this.props.showPrivate;te!==O.showPrivate&&this.getStorageSetting(),this.setState({checkedList:V,page:{resourceClassify:"0",keyword:"",contentType:this.props.contentType,pageNumber:1,pageSize:10,excludeType:this.props.excludeType===""?"zip,rar":"".concat(this.props.excludeType,",zip,rar")},setButtonDisabled:D,activeTabKey:_.length>0?_[0].id:"public",classifyData:{}},()=>{this.getList(),this.getCount()})}}render(){var O=this.props,V=O.t,m=O.excludeType,C=O.shouldRenderCreateBtns,_=O.replaceStatus,D=O.visible,x=O.title,te=O.onlyShowStorageTabKey,Q=O.isSearchOneResource,ae=O.contentType,he=this.state,Ze=he.classifyData,Oe=he.coursewares,Fe=he.coursewaresData,ke=he.total,nt=he.classifyCount,at=he.checkedList,Qe=he.isLoading,ot=he.page,lt=he.setButtonDisabled,De=he.storageTabs,f=De===void 0?[]:De,r=he.activeTabKey,h=f.length>0?f[0].id:"public",S=this.getTabType();return $.okText="".concat(V("common.ok"),"(").concat(at.length,")"),a().createElement(y.Om,(0,X.Z)({},$,{visible:D,title:x,onCancel:this.onCancel,onOk:this.onOk}),a().createElement("div",{className:"courseware"},a().createElement("div",{className:"courseware_left"},a().createElement("div",{className:"courseware_left__tabs"},a().createElement(K.Z,{defaultActiveKey:h,onChange:this.handleTabChange,size:"small"},f.map(j=>a().createElement(Pe,{tab:j.name,key:j.id})))),a().createElement(u.Z,{privatization:r==="public"?null:r,onChangeClassify:this.onChangeClassify,total:ke})),a().createElement("div",{className:"courseware__right"},a().createElement(Re,{classifyData:Ze,getQueryData:this.getQueryData,getCount:this.getCount,classifyCount:nt,excludeType:m,classifyId:ot.resourceClassify,shouldRenderCreateBtns:C,replaceStatus:te?!1:_,setButtonDisabled:lt,showHtml:S,isSearchOneResource:Q,contentType:ae}),a().createElement(ye,{isLoading:Qe,coursewares:Oe,paginationData:Fe,onChangePageNumber:this.onChangePageNumber,checkOne:this.checkOne,checkAll:this.checkAll,onRefresh:this.handleRefresh,replaceStatus:_}))))}}J.defaultProps={componentName:"ClCoursewareSelector",title:E.Z.t("component.addCourseware"),visible:!1,defaultChecked:[],excludeType:"",shouldRenderCreateBtns:!1,onCancel:()=>{},onOk:()=>{},contentType:"",resourceLocked:!1,onlyShowStorageTabKey:"",isSearchOneResource:!1};var Ce=(0,F.$j)(H)((0,W.Z)()(J));Ce.CoursewareTree=u.Z;var me=Ce},76466:function(Le,ve,e){"use strict";e.d(ve,{Z:function(){return we}});var X=e(20228),R=e(11382),ne=e(57663),U=e(71577),w=e(62029),K=e(57361),fe=e(9754),l=e.n(fe),b=e(12924),a=e.n(b),W=e(91512),E=e(68654),F=e(91768),y=e(4412),u=e.n(y);class L extends a().Component{render(){var n=this.props.t;return a().createElement("div",{className:"net-preview"},a().createElement("div",{className:"net-preview-center"},a().createElement("img",{src:u(),alt:"picture"}),a().createElement("h2",null,n("localStorage.tip")),a().createElement("p",null,n("localStorage.banPreview"))))}}var B=(0,F.Z)()(L),o=e(88986),se=e(34792),ie=e(48086),z=e(28216),le=e(21594),ee=e(41225),ye=e(10237),de=(A,n)=>(0,o.Z)({id:A||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},n),Z=de;class G extends b.Component{constructor(){super(...arguments);this.setupPlayer=n=>{var i=this.props,s=i.onVideoReady,t=s===void 0?()=>{}:s,c=i.playerConfig,p=i.contentType;n&&n==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,o.Z)((0,o.Z)({},c),{},{contentType:p==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:c.source,autoplay:c.autoplay,width:c.width,id:c.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:d=>{d.on("sourceloaded",g=>{var v=g.paramData,N=v.desc,k=v.definition;d.getComponent("VideoQuality")&&d.getComponent("VideoQuality").setCurrentQuality(N,k,c.id)}),d.on("ready",()=>{t()}),this.playerInstance=d,this.setPlayerConfig()}}))}}componentDidUpdate(n){n.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(n){this.player&&this.player.seek(n)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(n){this.player.setSpeed(n)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var n=this.props,i=n.onPlay,s=i===void 0?()=>{}:i,t=n.onTimeUpDate,c=t===void 0?()=>{}:t,p=n.onEnd,d=p===void 0?()=>{}:p,g=n.onPause,v=g===void 0?()=>{}:g,N=n.onError,k=N===void 0?()=>{}:N,M=this.playerInstance;M.on("play",()=>{s()}),M.on("pause",()=>{v()}),M.on("timeupdate",P=>{c(P)}),M.on("ended",()=>{d()}),M.on("error",(0,K.Z)(l().mark(function P(){return l().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:k();case 1:case"end":return re.stop()}},P)})))}render(){var n=this.props.playerConfig;return a().createElement("div",{className:"common-video-player-container"},a().createElement("div",{id:n.id}))}}G.playerInstance=null,G.defaultProps={playerConfig:Z(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var ue=G,Ke=(A,n)=>(0,o.Z)({id:A||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},n),Be=Ke;class ze extends b.Component{constructor(){super(...arguments);this.setupPlayer=n=>{n&&n==="resetPlayer"&&this.player.dispose();var i=this.props,s=i.playerConfig,t=i.onVideoReady,c=t===void 0?()=>{}:t;this.player=new Aliplayer(s,p=>{p.on("sourceloaded",d=>{var g=d.paramData,v=g.desc,N=g.definition;p.getComponent("VideoQuality")&&p.getComponent("VideoQuality").setCurrentQuality(v,N,s.id)})}),this.player.on("ready",()=>{c()})},this.setPlayerConfig=()=>{var n=this.props,i=n.onPlay,s=i===void 0?()=>{}:i,t=n.onTimeUpDate,c=t===void 0?()=>{}:t,p=n.onEnd,d=p===void 0?()=>{}:p,g=n.onPause,v=g===void 0?()=>{}:g,N=n.onError,k=N===void 0?()=>{}:N;this.player.on("play",()=>{s()}),this.player.on("pause",()=>{v()}),this.player.on("timeupdate",M=>{c(M)}),this.player.on("ended",()=>{d()}),this.player.on("error",(0,K.Z)(l().mark(function M(){return l().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:k();case 1:case"end":return T.stop()}},M)})))},this.getPlayerContent=n=>{this.playerContainer=n}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(n){n.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(n){this.player.seek(n)}exitFull(){var n=this.player.fullscreenService;n&&n.isFullScreen&&n.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var n=this.props.playerConfig;return a().createElement("div",{className:"common-video-player-container"},a().createElement("div",{id:n.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}ze.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:Be()};var He=ze;class Ue{constructor(n){this.hasCreated=!1,this.definition="",this.getQuality=n}createEl(n,i){var s=i._options&&i._options.language,t=i._el.id;this.isEn=s&&s==="en-us";var c=(0,le.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),p=(0,le.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),d=document.querySelector("#".concat(t," .prism-controlbar"));d.appendChild(c),n.appendChild(p)}setCurrentQuality(n,i,s){var t=document.querySelector("#".concat(s," .current-quality"));t.innerText=n,t.dataset.def=i,this.definition=i;var c=document.querySelector("#".concat(s," .quality-list")),p=c.querySelector(".current");p&&(p.className="");var d=c.querySelector('li[data-def="'.concat(i,'"]'));d&&(d.className="current")}created(n){this._urls=n._urls;var i=n._el.id,s=document.querySelector("#".concat(i," .current-quality")),t=document.querySelector("#".concat(i," .quality-list")),c=document.querySelector("#".concat(i," .quality-modal")),p=this._urls.map(v=>'<li data-def="'.concat(v.definition,'">').concat(v.desc,"</li>"));if(t.innerHTML=p.join(""),this.hasCreated==!1&&this.definition){var d=t.querySelector('li[data-def="'.concat(this.definition,'"]'));d.className="current"}this.hasCreated=!0;var g=null;s.onclick=()=>{t.style.display="block"},s.onmouseleave=()=>{g=setTimeout(()=>{t.style.display="none"},100)},t.onmouseenter=()=>{clearTimeout(g)},t.onmouseleave=()=>{t.style.display="none"},t.onclick=v=>{var N=v.target,k=N.dataset.def,M=N.innerText;if(k&&N.className!=="current"){var P=this._urls.find(T=>T.definition===k);n.loadByUrl(P.Url,n.getCurrentTime(),!0,!0),this.setCurrentQuality(P.desc,P.definition,i),c.style.display="block",c.querySelector("span.current-quality-tag").innerText=P.desc}this.getQuality(k,M)}}ready(n){var i=n._el.id,s=document.querySelector("#".concat(i," .quality-modal"));s.style.display="none";var t=document.querySelector("#".concat(i," .prism-setting-item.prism-setting-quality"));t&&t.classList.add("player-hidden")}}class Xe{createEl(n,i){var s=i._el.id,t=(0,le.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),c=document.querySelector("#".concat(s," .prism-controlbar"));c.appendChild(t)}ready(n){var i=n._el.id,s=document.querySelector("#".concat(i," .current-rate")),t=document.querySelector("#".concat(i," .rate-list")),c=null,p=document.querySelector("#".concat(i," .prism-setting-item.prism-setting-speed"));p&&p.classList.add("player-hidden"),s.onclick=()=>{t.style.display="block"},s.onmouseleave=()=>{c=setTimeout(()=>{t.style.display="none"},100)},t.onmouseenter=()=>{clearTimeout(c)},t.onmouseleave=()=>{t.style.display="none"},t.onclick=d=>{var g=d.target,v=g.dataset.rate;if(v){if(n.setSpeed(v),g.className!=="current"){var N=t.querySelector(".current");N&&(N.className=""),g.className="current"}t.style.display="none",s.innerText="".concat(v,"x")}}}}var We=e(69164),Te=e(37055);function Me(A){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=Te.ZP.local.getLocalUrl(A);return ye.WY.get({url:i,params:n})}var be=e(91648),je=e(18329),Ge=e(38642),Je=e(9849),Re=e(99891);class Ee extends b.Component{constructor(n){super();this.WaterMarkText=n,this.html=document.getElementsByClassName("common-watermark")}createEl(n){setTimeout(()=>{n.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var ce=Ee,Pe=A=>({userInfo:A.user});class $ extends b.Component{constructor(n){var i;super(n);i=this,this.onVideoReady=s=>{var t=this.props,c=t.resourceInfo,p=t.mode,d=t.autoPlay,g=t.t,v=c.storageType;s==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(s),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(p==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),p==="preview"&&d&&this.play.play()):v==="ALIBABA_PRIVATE"||v==="LOCAL"?this.updateSource("resetPlayer"):(ye.WY.logger({keyword:"video",moduleName:"video-play",msg:g("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var s=this.props,t=s.draggable,c=s.mode,p=s.t,d=s.studyInfo,g=s.needCurrentTime,v=s.onCurrentTime,N=v===void 0?()=>{}:v,k=d.studyType,M=d.studyId,P=d.resourceId,T=this.state,re=T.showPreventHang,ge=T.dragSwitch,Se=T.showRandomAlert,Ie=T.randomAlertDialogVisible,q=this.playingVideo,_e=q.oneTime,Ve=q.popupWindowCount,xe=q.maxPlayTime,st=q.progress,Ye=q.auditionLength,qe=q.auditionType,et=q.duration,tt=q.recentStart,Ae=this.play.getCurrentTime(),Ne=(re==="OPEN"||Se==="OPEN")&&Ve>0;if(g&&N(Ae),Ye>0&&qe===2&&Ae>Ye&&(this.play.seek(Ye),ie.default.warning(p("component.haveALookOverTip")),this.play.pause()),c==="learn"&&Ne){var it=et-_e*Ve;if(Ve>0&&Ae>it)if(this.play.pause(),Se==="OPEN"){if(!Ie){var rt=(0,be.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:rt},()=>{(0,ee.qp)({popupId:rt,planId:M,resourceId:P,type:"popup_start"})}),this.play.exitFull()}}else re==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((t||st===100)&&(Ae>0&&(this.playingVideo.recentStart=Ae),!((k==="enterprise"||k==="studyProject")&&ge==="OPEN")))return!1;Ae>xe?Ae-tt>2?(this.playingVideo.recentStart=xe,this.play.seek(xe),ie.default.warning(p("component.preventFastWatchTip"))):(this.playingVideo.recentStart=Ae,this.playingVideo.maxPlayTime=Ae):Ae>0&&Ae>this.playingVideo.recentStart&&(this.playingVideo.recentStart=Ae)},this.onPlay=()=>{var s=this.props,t=s.mode,c=s.onPlay,p=c===void 0?()=>{}:c;p();var d=this;t==="learn"&&!d.timer&&(d.timer=setTimeout(function g(){d.saveProgress(),clearTimeout(d.timer),d.timer=setTimeout(g,2e4)},2e4))},this.onPause=()=>{var s=this.props,t=s.studyInfo,c=s.mode,p=t.studyType;clearTimeout(this.timer),this.timer=null,c==="learn"&&(p==="platform"||p==="enterprise"||p==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var s=this.props.mode;s==="learn"&&this.saveProgress()},this.onError=s=>{var t=this.props.resourceInfo,c=t.storageType;(c==="ALIBABA_PRIVATE"||c==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var s=this.props.mode;this.initPlayVideo(),s==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var s=this.state,t=s.showPreventHang,c=s.showRandomAlert,p=this.props,d=p.t,g=p.playingVideo,v=p.studyInfo,N=p.autoPlay,k=g.recentStart,M=g.duration,P=g.progress,T=v.studyType,re=(t==="OPEN"||c==="OPEN")&&(T==="studyTask"||T==="enterprise"||T==="studyProject")&&P<100;re?(c==="OPEN"?this.setState({promptMessage:d("component.preventAlertTip"),dialogVisible:!0}):t==="OPEN"&&this.setState({promptMessage:d("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):N&&(this.play.play(),Math.ceil(k)<parseInt(M)&&this.play.seek(k))},this.playerShowPreventHang=()=>{var s=this.playingVideo,t=s.duration,c=s.recentStart,p=0;t>0&&t<180?(p=t/2,this.playingVideo.oneTime=p,c>=p?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):t>=180&&t<600?(p=t/3,this.playingVideo.oneTime=p,c>=2*p?this.playingVideo.popupWindowCount=0:c>=p?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(p=t/4,this.playingVideo.oneTime=p,c>=3*p?this.playingVideo.popupWindowCount=0:c>=2*p?this.playingVideo.popupWindowCount=1:c>=p?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var s=this.props,t=s.playingVideo,c=s.mode;if(c==="learn"){this.playingVideo=(0,o.Z)({},t);var p=t.duration,d=t.progress;this.playingVideo.hasFinished=parseInt(d)===100,this.playingVideo.maxPlayTime=parseInt(p)*parseInt(d)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,K.Z)(l().mark(function s(){var t,c,p,d,g,v,N,k,M,P,T,re,ge,Se,Ie,q,_e,Ve,xe,st,Ye,qe,et,tt;return l().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(t=i.state,c=t.speedSwitch,p=t.dragSwitch,d=t.whiteList,g=i.props,v=g.resourceInfo,N=g.showQuality,k=v.contentType,M=v.storageType,P=v.source,T=v.playId,re=v.playerId,ge=v.showFullScreen,Se=ge===void 0?!0:ge,Ie=Be(re),Ie.components=[],q=typeof P=="object"&&P.hasOwnProperty("FD")&&P.FD.indexOf("m3u8")===-1,N&&q&&k!=="mp3"&&(M&&M==="PUBLIC_CLOUD"||!M)&&Ie.components.push({name:"VideoQuality",type:Ue,args:[()=>{i.play.pause(),i.playingVideo.readyCount=0}]}),c==="OPEN"&&Ie.components.push({name:"VideoRate",type:Xe}),Se&&(_e=Ie.skinLayout.find(it=>it.name==="controlBar"),_e&&_e.children.splice(_e.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),Ie.components.push({name:"VideoWaterMark",type:ce}),Ve=P.FD,xe=P.OD,Ve.indexOf("http://")>-1&&(Ve=Ve.replace("http://","https://")),xe.indexOf("http://")>-1&&(xe=xe.replace("http://","https://")),st=d.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",P.OD=xe&&xe.indexOf(st)>-1&&xe.indexOf(".mp4")>-1?xe:Ve,P.FD=Ve,Ye=typeof P!="string"?JSON.stringify(P):P,Ie.source=Ye,p==="OPEN"&&(Ie.disableSeek=!0),M!=="ALIBABA_PRIVATE"){Ne.next=32;break}return Ne.next=22,(0,ee.BR)(T);case 22:if(qe=Ne.sent,!qe){Ne.next=28;break}Ie.source=qe,Ie.vodRetry=1,Ne.next=30;break;case 28:return i.setState({showPrivateVodError:!0}),Ne.abrupt("return");case 30:Ne.next=38;break;case 32:if(M!=="LOCAL"){Ne.next=38;break}return Ne.next=35,Me(T);case 35:et=Ne.sent,tt=et.data,tt.code===0&&(Ie.source="".concat(P.FD,"?auth_key=").concat(tt.data.auth_key),Ie.vodRetry=1);case 38:i.setState({playerConfig:Ie});case 39:case"end":return Ne.stop()}},s)})),this.updateSource=function(){var s=(0,K.Z)(l().mark(function t(c){var p,d,g,v,N,k,M,P;return l().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(p=i.state.playerConfig,d=i.props.resourceInfo,g=d.storageType,v=d.source,N=d.playId,i.playingVideo.readyCount=0,g!=="ALIBABA_PRIVATE"){re.next=16;break}return re.next=7,(0,ee.BR)(N);case 7:if(k=re.sent,!k){re.next=12;break}Object.assign(p,{source:k,vodRetry:1}),re.next=14;break;case 12:return i.setState({showPrivateVodError:!0}),re.abrupt("return");case 14:re.next=22;break;case 16:if(g!=="LOCAL"){re.next=22;break}return re.next=19,Me(N);case 19:M=re.sent,P=M.data,P.code===0&&Object.assign(p,{source:"".concat(v.FD,"?auth_key=").concat(P.data.auth_key),vodRetry:1});case 22:i.setState({playerConfig:p},()=>{i.play.setupPlayer(c)});case 23:case"end":return re.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),this.saveProgress=()=>{var s=this.props,t=s.studyInfo,c=s.userInfo,p=c.isLogin,d=c.enterpriseId,g=c.id,v=this.playingVideo,N=v.recentStart,k=v.duration,M=v.hasFinished,P=Math.ceil(+N);P>Number(k)&&(P=Number(k));var T=Math.ceil(P/+k*100);if((T>100||M)&&(T=100),p){var re=this.playingVideo,ge=re.auditionType,Se=re.auditionLength;if(Se>0&&ge===2){var Ie=Math.ceil(Se/k*100);Ie<=T&&(T=Ie,P=Se)}(0,ee.sH)({studyInfo:t,progress:T,recent_start:P,enterpriseId:d,userId:g}).then(q=>{q&&q.data&&(0,We.Z)(q.data.integral_info||"")})}},this.getInfoFromSettings=(0,K.Z)(l().mark(function s(){var t,c,p,d,g,v,N,k,M;return l().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return t=i.props.studyInfo,c=t.studyType,p=t.projectId,T.next=4,(0,ee.Gw)();case 4:if(d=T.sent,g=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],v=(0,le.RG)(d,g),c!=="studyProject"){T.next=14;break}return T.next=10,(0,Je.NU)({id:p});case 10:N=T.sent,k=N.status,M=N.data,k===200&&(v.showPreventHang=M.prevent_cut_screen?"OPEN":"CLOSED",v.speedSwitch=M.speed_play?"OPEN":"CLOSED",v.dragSwitch=M.prevent_drag?"OPEN":"CLOSED");case 14:i.setState(v,()=>{i.dealVideoConfig()});case 15:case"end":return T.stop()}},s)})),this.dealAudioPoster=()=>{var s=this.props.resourceInfo.contentType,t=s===void 0?"":s;this.setState({showAudioPoster:t==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var s=this.state.showAudioPoster,t=this.play.playerContainer;s&&t&&(t.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),t.style.backgroundSize="cover")},this.getPlayInstance=s=>{this.play=s},this.handleOk=()=>{this.setState({dialogVisible:!1});var s=this.state.btnType,t=this.playingVideo.recentStart,c=this.props.t;s==="know"?(this.play.play(),this.play.seek(t),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:c("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,K.Z)(l().mark(function s(){var t,c,p,d;return l().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:t=i.props.studyInfo,c=t.studyId,p=t.resourceId,d=i.state.randomAlertUUID,(0,ee.qp)({popupId:d,planId:c,resourceId:p,type:"popup_end"}).then(()=>{i.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),i.playingVideo.popupWindowCount-=1,i.play.play();case 6:case"end":return v.stop()}},s)})),this.renderFooter=()=>{var s=this.state.btnType,t=this.props.t;return a().createElement(U.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(s)},t(s==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var s=this.props.t;return a().createElement(U.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},s("common.ok"))},this.state={playerConfig:Be(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:n.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:n.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:n.t("component.randomAlertTip"),randomAlertModal:{title:n.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,Ge.UI)("CL_VIDEO_BAIYING_COM_CN")}},n.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(n){var i=typeof n.resourceInfo.source!="string"?JSON.stringify(n.resourceInfo.source):n.resourceInfo.source,s=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;i!==s&&s!==""&&this.initInfo()}componentWillUnmount(){var n=this.props.mode;n==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var n=this.state,i=n.playerConfig,s=n.showPrivateVodError,t=n.dialogVisible,c=n.dialogModal,p=n.promptMessage,d=n.randomAlertDialogVisible,g=n.randomAlertModal,v=n.randomAlertTip,N=n.encryptedSwitch,k=this.props,M=k.resourceInfo,P=k.t,T=N==="OPEN"?ue:He;return a().createElement(b.Fragment,null,a().createElement(T,(0,w.Z)({ref:this.getPlayInstance},M,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:i,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),a().createElement(je.ZP,(0,w.Z)({visible:t},c,{footer:this.renderFooter()}),a().createElement("div",{className:"video-business-prompt"},p)),a().createElement(je.ZP,(0,w.Z)({visible:d},g,{footer:this.renderRandomFooter()}),a().createElement("div",{className:"video-player-container__prompt"},v)),s&&a().createElement("div",{className:"video-business-vod-error"},P("privateCloud.docReadError")),a().createElement(Re.Z,{scenes:"video"}))}}var H=(0,z.$j)(Pe,null,null,{forwardRef:!0})((0,F.Z)("translation",{withRef:!0})($)),J=e(94184),Ce=e.n(J),me=e(84874),pe=A=>({userInfo:A.user}),O={getPravateDocUrl:Te.ZP.localStorage.getPravateDocUrl};function V(A){return JSON.stringify(A,(n,i)=>(typeof i=="function"&&(i=i.toString()),i))}function m(A){var n=parseInt(parseInt(A,10)/60,10),i=parseInt(parseInt(A,10)%60,10);return n<10&&(n="0".concat(n)),i<10&&(i="0".concat(i)),"".concat(n,":").concat(i)}class C extends b.Component{constructor(n){var i;super(n);i=this,this.messageFun=s=>{var t=this.props,c=t.docType,p=t.progress,d=t.studyTimeLimit,g=t.studyTime,v=this.state,N=v.jumpPageTag,k=v.totalTime,M=v.timeRemaining,P=this.state.previewDocData,T={};try{T=JSON.parse(s.data)}catch(re){return}switch(T.action){case"preview.ready":this.initDocData();break;case"preview.meta":P.totalPage=T.data.pc||1,P.currentPage=1,this.setState({previewDocData:P},()=>{this.reportStatusInterval()}),d>0?(this.saveProgress(p,g||"1",T.data.pc||1),this.setState({showCountDownContainer:!0})):c==="xlsx"||c==="xls"||P.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(p,g||"1",T.data.pc||1),d>0&&p<100?(this.setState({showCountDown:!0}),c==="xlsx"||c==="xls"?k=d:k=d*T.data.pc,M=parseInt(k*(1-p/100),10),this.setState({timeRemaining:M,totalTime:k},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(N){N=!1,this.setState({jumpPageTag:N});return}P.currentPage=T.data.pageIndex+1,this.setState({previewDocData:P}),d||this.saveProgress(Math.ceil(P.currentPage/P.totalPage*100),P.currentPage,P.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":ie.default.error(T.data.result);break;default:break}},this.initDocData=(0,K.Z)(l().mark(function s(){var t,c,p,d,g,v,N,k,M,P,T,re,ge,Se;return l().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(i.setState({isShowPrivateError:!1}),t=i.props,c=t.docType,p=t.userInfo,d=t.documentWatermarkSettings,g=t.storageType,v=t.privateDocId,N=p.name,k=p.jobNumber,M=p.position,P="",T={},g!=="ALIBABA_PRIVATE"){q.next=18;break}return q.prev=6,re=O.getPravateDocUrl(v),q.next=10,ye.WY.get({url:re});case 10:ge=q.sent,Se=ge.data,Se.code===0?T=Se.data||{}:i.setState({isShowPrivateError:!0}),q.next=18;break;case 15:q.prev=15,q.t0=q.catch(6),i.setState({isShowPrivateError:!0});case 18:if(d.indexOf("name")>-1&&(P="".concat(P+N," ")),d.indexOf("position")>-1&&(P="".concat(P+M," ")),d.indexOf("jobnumber")>-1&&(P+=k),P.length>0?window.sendMessage("preview.init",(0,o.Z)({wmType:1,wmValue:P,wmColor:"rgba(192, 192, 192, 0.4)"},T)):window.sendMessage("preview.init",(0,o.Z)({},T)),c!=="xlsx"&&c!=="ppt"&&c!=="pptx"&&c!=="xls"?i.setState({pageOperateContainerVisible:!0}):i.setState({pageOperateContainerVisible:!1}),!(c==="ppt"||c==="pptx")){q.next=29;break}q.t1=window,q.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},q.t1.sendMessage.call(q.t1,"setConfig",q.t2),q.next=32;break;case 29:q.t3=window,q.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},q.t3.sendMessage.call(q.t3,"setConfig",q.t4);case 32:case"end":return q.stop()}},s,null,[[6,15]])})),this.handleJumpPage=s=>{var t=this.state.previewDocData;t.currentPage=s,this.setState({jumpPageTag:!0,previewDocData:t});var c=s/t.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(c),s,t.totalPage),window.sendMessage("logic.toPage",{pageIndex:s-1})},this.redirectPage=()=>{var s=this.props,t=s.studyTimeLimit,c=s.studyTime,p=0;t===0&&(p=c-1>0?c-1:0),window.sendMessage("logic.toPage",{pageIndex:p})},this.docCountDown=()=>{var s=this.state.timeRemaining,t=this.state,c=t.totalTime,p=t.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{s-=1,this.setState({timeRemaining:s}),s<1&&(this.saveProgress(100,0,p.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var d=(c-s)/c*100;s<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(d),s,p.totalPage)},2e4)},this.saveProgress=(s,t,c)=>{var p=this.props.onSaveProgress;p&&p(s,t,c)},this.reportStatusInterval=()=>{var s=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var t=this.state.previewDocData.currentPage;s&&s({currentPage:t})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=s=>{this.docReader=s},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(n,i)=>{var s=this.docReader.contentWindow;s.postMessage(V({action:n,data:i}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var n=this.props,i=n.t,s=n.storageType,t=n.privateDocId,c=this.props.aliUrl,p=this.state,d=p.previewDocData,g=p.pageOperateContainerVisible,v=p.timeRemaining,N=p.showCountDown,k=p.showCountDownContainer,M=p.showPageOperateContainer,P=p.isShowPrivateError;return s==="ALIBABA_PRIVATE"&&(c="https://preview.imm.aliyuncs.com/index.html?docId=".concat(t)),a().createElement("div",{className:"doc-reader-container"},a().createElement("div",{className:"ali-doc-container",style:{paddingBottom:g?"56px":"0"}},a().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:c,id:"aliyunPreview",ref:this.dealPreviewRef}),k?a().createElement("div",{className:"ali-doc-container__countdown"},N?a().createElement("div",null,a().createElement(me.Z,{iconClass:"iconf-tipe",size:"16px"}),i("component.docStillStudy"),a().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",m(v)," "),i("component.canDone")):a().createElement("div",null,a().createElement(me.Z,{iconClass:"iconf-tipe",size:"16px"}),i("component.docHasFinish"))):null,g?a().createElement("div",{className:"ali-doc__operate"},a().createElement("div",{className:Ce()(["ali-doc__operate__content",M?"":"ali-doc__operate__hide-content"])},a().createElement("div",{className:"ali-doc__operate__pagination"},a().createElement("div",{className:"ali-doc__operate__pagination__pages"},d.currentPage," / ",d.totalPage),a().createElement("div",{className:"ali-doc__operate__pagination__toggle"},a().createElement("div",{className:"ali-doc__operate__pagination__choose"},a().createElement("span",null,i("component.choosePage"),a().createElement(me.Z,{iconClass:"iconf-arrow-under",size:"14px"})),a().createElement("div",{className:"ali-doc__operate__page-list-container"},a().createElement("div",{className:"ali-doc__operate__choose-page"},i("component.fastChoosePage")),a().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:d.totalPage})).map((T,re)=>a().createElement("li",{key:T,onClick:()=>this.handleJumpPage(re+1)},re+1))))),a().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},i("common.collapse"))))),a().createElement("div",{className:Ce()("ali-doc__operate__unfold",M?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},i("common.expand"))):null,P&&a().createElement("div",{className:"ali-doc__error"},i("privateCloud.docReadError"))),a().createElement(Re.Z,{scenes:"document"}))}}C.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var _=(0,z.$j)(pe)((0,F.Z)()(C)),D=A=>({userInfo:A.user}),x="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),te="".concat("https://doc.coolcollege.cn");class Q extends a().Component{constructor(n){var i;super(n);i=this,this.onSaveProgress=(s,t,c)=>{var p=this.props,d=p.mode,g=p.studyInfo,v=p.userInfo,N=v.enterpriseId,k=v.id;d==="learn"&&(0,ee.sH)({studyInfo:g,progress:s,page_count:c,recent_start:t,enterpriseId:N,userId:k}).then(M=>{M&&M.data&&(0,We.Z)(M.data.integral_info||"")})},this.messageFun=function(){var s=(0,K.Z)(l().mark(function t(c){var p,d,g,v,N,k;return l().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(c.data!=="local-resource"){P.next=9;break}if(p=i.props.resourceInfo,d=p.storageType,g=p.playId,!(d&&d==="LOCAL")){P.next=9;break}return P.next=6,Me(g);case 6:v=P.sent,N=v.data,N.code===0&&(k=document.getElementById("local-resource-box"),k.contentWindow.postMessage({msg:"local-auth-key",authKey:N.data.auth_key},"*"));case 9:case"end":return P.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),this.getInfoFromSettings=(0,K.Z)(l().mark(function s(){var t,c,p;return l().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,ee.Gw)();case 2:t=g.sent,c=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],p=(0,le.RG)(t,c),i.setState(p,()=>{i.initDocPage(i.props)});case 6:case"end":return g.stop()}},s)})),this.initDocPage=(0,K.Z)(l().mark(function s(){var t,c,p,d,g,v,N,k,M,P,T,re,ge,Se,Ie,q,_e,Ve,xe,st,Ye,qe,et,tt,Ae,Ne,it,rt,mt,ct,pt,dt,ut,vt,ht=arguments;return l().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(t=ht.length>0&&ht[0]!==void 0?ht[0]:{},c=t.resourceInfo,p=t.mode,d=t.studyInfo,g=t.userInfo,v=i.state.documentPlayerMode,N=c.docType,k=c.docTitle,M=c.url,P=c.studyTimeLimit,T=c.studyTime,re=c.aliUrl,ge=c.progress,Se=c.storageType,Ie=c.playId,q=d.studyType,_e=d.courseId,Ve=d.studyId,xe=d.resourceId,st=g.enterpriseId,Ye=g.id,qe=g.isLogin,et=g.token,tt=v==="compat"&&re.indexOf("preview.imm.aliyun")>-1||Se==="ALIBABA_PRIVATE",!tt){$e.next=11;break}i.setState({showAliReader:!0}),$e.next=31;break;case 11:if(Ae=(0,ee.sH)({enterpriseId:st,userId:Ye,token:et,studyInfo:d},!0),Ne=q==="studyTask"?2:1,it=Te.ZP.SaveProgress.reportStatusInterval(d),rt={isSaveProgress:qe&&p==="learn"&&Ae,isSaveRecord:!1,access_token:et,userId:Ye,hostUrl:x,courseId:_e,resourceId:xe,courseType:1,planId:Ve,studyTimeLimit:P,studyTime:T,saveProgressUrl:Ae,type:"eapp",progress:ge,saveRecordProgressUrl:it,actionType:Ne},!(Se&&Se==="LOCAL")){$e.next=26;break}return $e.next=18,Me(Ie);case 18:if(mt=$e.sent,ct=mt.data,ct.code!==0){$e.next=25;break}rt.auth_key=ct.data.auth_key,rt.url=M,$e.next=26;break;case 25:return $e.abrupt("return");case 26:pt=JSON.stringify(rt),dt="".concat(k,".").concat(N).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),ut="".concat(te,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(pt),"&furl=").concat(M,"?attname=").concat(dt),Se&&Se==="LOCAL"&&(vt="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),ut="".concat(vt,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(pt),"&furl=").concat(M,"?attname=").concat(dt)),i.setState({encodeUrl:ut});case 31:case"end":return $e.stop()}},s)})),this.handleReportStatusInterval=s=>{var t=s.currentPage,c=this.props,p=c.resourceInfo,d=c.mode,g=c.studyInfo,v=c.userInfo,N=p.type,k=g.courseId,M=g.studyId,P=g.resourceId,T=v.enterpriseId,re=v.id,ge=v.isLogin,Se="",Ie="",q=0,_e=!1;switch(N){case"enterprise":q=1,_e=!0;break;case"study":Se=M,q=2,_e=!0;break;case"project":Ie=M,q=1,_e=!0;break;default:break}if(!(!_e||!ge)){var Ve={plan_id:Se,enterprise_id:T,user_id:re,course_id:k,project_course_id:Ie,resource_id:P,current_page:t,action_type:q,send_time:Date.parse(new Date)};d==="learn"&&(0,ee.Xc)(g,Ve)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(n){this.initDocPage(n)}render(){var n=this.props.resourceInfo,i=this.state,s=i.encodeUrl,t=i.documentWatermarkSettings,c=i.showAliReader,p=n.docType,d=n.type,g=n.studyTimeLimit,v=n.studyTime,N=n.aliUrl,k=n.progress,M=n.storageType,P=n.playId;return c?a().createElement(_,{privateDocId:P,storageType:M,aliUrl:N,docType:p,progress:k,studyTime:v,studyTimeLimit:g,documentWatermarkSettings:t,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:d}):a().createElement("div",{className:"doc-reader-container"},a().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:s,frameBorder:"0",allowFullScreen:!0}),a().createElement(Re.Z,{scenes:"document"}))}}var ae=(0,z.$j)(D)(Q),he=e(38979),Ze=e(90706),Oe=e(12968),Fe=e(44208),ke=e(60667),nt=A=>({userInfo:A.user});class at extends a().Component{constructor(){var n;super(...arguments);n=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var i=this.props,s=i.studyInfo,t=i.mode,c=i.userInfo,p=c.enterpriseId,d=c.id;t==="learn"&&(0,le.Gp)({studyInfo:s,enterpriseId:p,userId:d})},this.getInfoFromSettings=(0,K.Z)(l().mark(function i(){var s,t,c;return l().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,ee.Gw)();case 2:s=d.sent,t=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],c=(0,le.RG)(s,t),n.setState(c,()=>{n.renderWatermark()});case 6:case"end":return d.stop()}},i)})),this.renderWatermark=()=>{var i=this.props.userInfo,s=this.state.imageWatermark,t=i.name,c=i.unionid,p=i.sourceType,d=i.jobNumber,g=i.position,v=[];s.indexOf("name")>-1&&v.push(a().createElement(ke.Z,{dataType:"userName",value:c,name:t,type:p})),s.indexOf("position")>-1&&v.push(a().createElement("span",null,g)),s.indexOf("jobnumber")>-1&&v.push(a().createElement("span",null,d)),s.length>0&&this.setState({watermark:v.map((N,k)=>a().createElement("span",{key:k},N))})},this.handleError=i=>{var s=this.props.onError;s&&s(i)},this.getImageUrl=(0,K.Z)(l().mark(function i(){var s,t,c,p,d,g,v,N,k,M;return l().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(s=n.props,t=s.resourceInfo,c=s.t,p=t.playId,d=t.url,g=t.storageType,v=d,!g){T.next=21;break}if(g!=="ALIBABA_PRIVATE"){T.next=15;break}return T.next=7,(0,ee.J7)(p);case 7:if(N=T.sent,!N){T.next=12;break}v=N,T.next=13;break;case 12:return T.abrupt("return",ie.default.info(c("privateCloud.docReadError")));case 13:T.next=21;break;case 15:if(g!=="LOCAL"){T.next=21;break}return T.next=18,Me(p);case 18:k=T.sent,M=k.data,M.code===0&&(v="".concat(d,"?auth_key=").concat(M.data.auth_key));case 21:n.setState({imageUrl:[v]},()=>{var re=n.state.imageUrl,ge="image-business",Se=document.querySelectorAll(".".concat(ge,"-image img"));Se.forEach((Ie,q)=>{Ie.onerror=()=>{n.handleError(re[q])}})});case 22:case"end":return T.stop()}},i)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var n="image-business",i=this.props.resourceInfo,s=i.preview,t=s===void 0?!1:s,c=this.state,p=c.watermark,d=c.imageUrl;return a().createElement("div",{className:n},a().createElement(Re.Z,{scenes:"image"}),a().createElement(Ze.Z,{className:"".concat(n,"-carousel")},d.map((g,v)=>a().createElement("div",{className:"".concat(n,"-image"),key:v.toString()},a().createElement(Fe.Z,{src:g,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:t})))))}}at.defaultProps={prefixCls:"watch-image-page"};var Qe=(0,z.$j)(nt)((0,F.Z)()(at)),ot=A=>({userInfo:A.user});class lt extends a().Component{constructor(){var n;super(...arguments);n=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,K.Z)(l().mark(function i(){var s,t,c;return l().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,ee.Gw)();case 2:s=d.sent,t=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],c=(0,le.RG)(s,t),n.setState(c,()=>{n.renderWatermark()});case 6:case"end":return d.stop()}},i)})),this.renderWatermark=()=>{var i=this.props.userInfo,s=this.state.htmlWatermark,t=i.name,c=i.unionid,p=i.sourceType,d=i.jobNumber,g=i.position,v=[];s.indexOf("name")>-1&&v.push(a().createElement(ke.Z,{dataType:"userName",value:c,name:t,type:p})),s.indexOf("position")>-1&&v.push(a().createElement("span",null,g)),s.indexOf("jobnumber")>-1&&v.push(a().createElement("span",null,d)),s.length>0&&this.setState({watermark:v.map((N,k)=>a().createElement("span",{key:k},N))})},this.saveProgress=()=>{var i=this.props,s=i.studyInfo,t=i.mode,c=i.userInfo,p=c.enterpriseId,d=c.id;t==="learn"&&(0,le.Gp)({studyInfo:s,enterpriseId:p,userId:d})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var n="html-business",i=this.props.resourceInfo,s=i.url,t=this.state.watermark;return a().createElement("div",{className:n},a().createElement("div",{className:"".concat(n,"__html-watermark")},t),a().createElement("iframe",{title:"html",className:"".concat(n,"_iframe"),src:s}))}}var De=(0,z.$j)(ot)((0,F.Z)()(lt)),f=e(57068),r=e(1164),h=A=>({userInfo:A.user});class S extends a().PureComponent{constructor(){super(...arguments);this.getHost=n=>{var i=n.split("//"),s=i[1].split("/");return[i[0],s[0]].join("//")},this.getScormUrl=()=>{var n=this.props,i=n.studyInfo,s=n.mode,t=n.userInfo,c=n.resourceInfo,p=n.from,d=t.enterpriseId,g=t.id,v=c.url,N=this.getHost(v);if(s==="learn"){var k=(0,o.Z)({userId:g,enterpriseId:d,access_token:localStorage.token,from:p,scormUrl:encodeURIComponent(v),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},i);return"".concat(N).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(f.stringify(k))}return"".concat(N,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(v))},this.handleOpenScormLink=n=>{r.Z.targetTo({path:n,isExternalLink:!0})}}render(){var n=this.props.t,i="scorm-business",s=this.getScormUrl(),t=(0,Ge.UI)("SCORM_EXTERNAL_WATCH");return a().createElement("div",{className:i},t?a().createElement("div",{className:"".concat(i,"_scorm")},a().createElement("img",{className:"".concat(i,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),a().createElement("h5",null,n("resourcePlay.scormTip")),a().createElement(U.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(s)},n("resourceLibrary.h5LinkPlayButton"))):a().createElement("iframe",{title:"scorm",className:"".concat(i,"_iframe"),src:s}))}}var j=(0,z.$j)(h)((0,F.Z)()(S));class Y extends a().Component{render(){var n=this.props,i=n.visible,s=n.title,t=n.onCancel,c=n.t,p=a().createElement("span",null,s);return a().createElement(je.ZP,{visible:i,title:p,onCancel:t,footer:null},a().createElement("div",{className:"ban-preview"},a().createElement("div",{className:"ban-preview-center"},a().createElement("img",{src:u(),alt:"picture"}),a().createElement("h2",null,c("localStorage.tip")),a().createElement("p",null,c("localStorage.banPreview"))),a().createElement("hr",null),a().createElement(U.Z,{type:"primary",className:"know",onClick:t},c("localStorage.onKnow"))))}}var I=(0,F.Z)()(Y);class oe extends b.Component{constructor(){var n;super(...arguments);n=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=i=>{var s=this.props.previewInfo,t=s.onCancel;this.onCancel(),t(i)},this.onGetVideoBusiness=i=>{var s=this.props.onRef,t=s===void 0?()=>{}:s;this.videoBusiness=i,t(i)},this.onFullScreen=()=>{var i=this.state.fullScreen;this.setState({fullScreen:!i})},this.handleJudgeNetwork=(0,K.Z)(l().mark(function i(){var s,t,c,p,d,g,v,N,k,M,P,T=arguments;return l().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(s=T.length>0&&T[0]!==void 0?T[0]:null,t=n.props,c=t.resourceInfo,p=t.watchType,d=c.storageType,g=c.playId,v=c.originUrl,N=p==="image"||p==="video"||p==="doc",k=null,s?k=s:v?k=v:k=c.url,!(N&&k&&g&&d&&d==="LOCAL")){ge.next=22;break}return ge.prev=7,ge.next=10,(0,ee.NY)(g);case 10:return M=ge.sent,ge.next=13,(0,ee.Hy)(k,M);case 13:P=ge.sent,P?n.setState({showBan:"no"}):n.setState({showBan:"yes"}),ge.next=20;break;case 17:ge.prev=17,ge.t0=ge.catch(7),n.setState({showBan:"yes"});case 20:ge.next=23;break;case 22:n.setState({showBan:"no"});case 23:case"end":return ge.stop()}},i,null,[[7,17]])})),this.renderOuter=()=>{var i=this.props,s=i.prefixCls,t=i.watchType,c=i.onCurrentTime,p=c===void 0?()=>{}:c;return a().createElement("div",{className:"".concat(s,"-outer")},t==="video"&&a().createElement(H,(0,w.Z)({onCurrentTime:p,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),t==="doc"&&a().createElement(ae,this.props),t==="image"&&a().createElement(Qe,(0,w.Z)({onError:this.handleJudgeNetwork},this.props)),t==="html"&&a().createElement(De,this.props),t==="scorm"&&a().createElement(j,this.props))},this.renderFooter=()=>{var i=this.props,s=i.resourceInfo.storageType,t=i.t,c=this.state.showBan,p=c!==""&&c==="yes";return s&&s!=="PUBLIC_CLOUD"&&p?a().createElement(U.Z,{type:"primary",className:"know",onClick:this.onCancelModel},t("localStorage.onKnow")):null}}componentDidMount(){var n=this.props.mode;n==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(n){n.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var n=this.state,i=n.showBan,s=n.fullScreen,t=this.props,c=t.mode,p=t.previewWay,d=t.previewInfo,g=t.prefixCls,v=t.t,N=t.showEnlarge,k=t.footer,M=k===void 0?null:k,P=d.visible,T=d.destroyOnClose,re=d.title,ge=i!==""&&i==="yes",Se=i!==""&&i==="no";return a().createElement(b.Fragment,null,c==="preview"&&p==="popups"&&a().createElement(je.ZP,{destroyOnClose:T,visible:P,title:re,onCancel:this.onCancelModel,footer:M||this.renderFooter(),wrapClassName:"".concat(g,"-resource ").concat(s?"".concat(g,"-full"):"")},N&&a().createElement("div",{className:"".concat(g,"-resource-out-icon"),onClick:this.onFullScreen},s?a().createElement(W.Z,{className:"".concat(g,"-resource-icon")}):a().createElement(E.Z,{className:"".concat(g,"-resource-icon")})),a().createElement("div",{className:"".concat(g,"-inner")},!P&&a().createElement(R.Z,{size:"large"}),P&&Se&&this.renderOuter(),ge&&a().createElement(B,null))),(c==="learn"||p==="page")&&Se&&this.renderOuter(),(c==="learn"||p==="page")&&a().createElement(I,{visible:ge,title:re||v("questionn.warmHint"),onCancel:this.onCancel}))}}oe.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var we=(0,F.Z)("translation",{withRef:!0})(oe)},41225:function(Le,ve,e){"use strict";e.d(ve,{Hy:function(){return K},NY:function(){return fe},Gw:function(){return l},sH:function(){return W},BR:function(){return b},qp:function(){return E},Xc:function(){return F},J7:function(){return a}});var X=e(57361),R=e(9754),ne=e.n(R),U=e(10237),w=e(37055),K=function(){var y=(0,X.Z)(ne().mark(function u(){var L,B,o,se,ie,z,le,ee=arguments;return ne().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return L=ee.length>0&&ee[0]!==void 0?ee[0]:"",B=ee.length>1&&ee[1]!==void 0?ee[1]:"",o="",L.startsWith("http")?(se=L.split("//")[1].trim(),ie=se.split("/")[0],o="https://".concat(ie,"/cms/ticket")):(z=L.split("/")[0],o="https://".concat(z,"/cms/ticket")),de.prev=4,de.next=7,U.ZQ.get({url:o,params:{ticket:B}});case 7:if(le=de.sent,!(le.status===200||le.status===403)){de.next=10;break}return de.abrupt("return",Promise.resolve(!0));case 10:return de.abrupt("return",Promise.resolve(!1));case 13:return de.prev=13,de.t0=de.catch(4),de.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return de.stop()}},u,null,[[4,13]])}));return function(){return y.apply(this,arguments)}}(),fe=function(){var y=(0,X.Z)(ne().mark(function u(L){var B,o;return ne().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,U.ZQ.get({url:w.ZP.local.getTicket(L)});case 2:if(B=ie.sent,o=B.data,o.code!==0){ie.next=6;break}return ie.abrupt("return",Promise.resolve(o.data.ticket));case 6:return ie.abrupt("return",Promise.resolve(""));case 7:case"end":return ie.stop()}},u)}));return function(L){return y.apply(this,arguments)}}(),l=function(){var y=(0,X.Z)(ne().mark(function u(){var L;return ne().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,U.WY.get({url:w.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return L=o.sent,o.abrupt("return",L.data.list);case 4:case"end":return o.stop()}},u)}));return function(){return y.apply(this,arguments)}}(),b=function(){var y=(0,X.Z)(ne().mark(function u(L){var B,o,se;return ne().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,U.WY.get({url:w.ZP.localStorage.getPravateVideoUrl(L)});case 2:if(B=z.sent,B.data.code!==0){z.next=6;break}return o=B.data.data.videoPlayInfo,se=o===void 0?"":o,z.abrupt("return",se);case 6:return z.abrupt("return","");case 7:case"end":return z.stop()}},u)}));return function(L){return y.apply(this,arguments)}}(),a=function(){var y=(0,X.Z)(ne().mark(function u(L){var B,o,se;return ne().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return B=w.ZP.localStorage.getPravateDocUrl(L),z.prev=1,z.next=4,U.WY.get({url:B});case 4:if(o=z.sent,se=o.data,!(se.code===0&&se.data)){z.next=8;break}return z.abrupt("return",se.data.docResourceDownloadUrl||"");case 8:return z.abrupt("return","");case 11:return z.prev=11,z.t0=z.catch(1),z.abrupt("return","");case 14:case"end":return z.stop()}},u,null,[[1,11]])}));return function(L){return y.apply(this,arguments)}}(),W=function(u){var L=u.studyInfo,B=u.progress,o=u.recent_start,se=u.page_count,ie=u.enterpriseId,z=u.userId,le=u.token,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ye,de=L.studyType;if(de==="studyTask"&&(ye=w.ZP.SaveProgress.studySaveProgress(L)),(de==="course"||de==="enterprise")&&(ye=w.ZP.SaveProgress.enterpriseCourseSaveProgress(L)),de==="studyProject"&&(ye=w.ZP.SaveProgress.projectSaveProgress(L)),de==="platform"&&(ye="".concat(w.ZP.SaveProgress.platformCourseSaveProgress(L))),(ee||de==="platform")&&(ye+="?enterprise_id=".concat(ie,"&user_id=").concat(z)),ee)return ye+="&access_token=".concat(le||localStorage.getItem("token")),ye;var Z={progress:B,recent_start:o,tempTime:Date.parse(new Date)};return se&&(Z.page_count=se),L.evaluationId&&(Z.evaluation_id=L.evaluationId),U.WY.post({url:ye,data:Z})},E=y=>{var u=y.popupId,L=y.planId,B=y.resourceId,o=y.type;return U.WY.post({url:w.ZP.TaskStudyRecord.setRandomPopupRecord(L),data:{course_id:B,terminal_type:"PC",popup_id:u,type:o}})},F=(y,u)=>{var L=w.ZP.SaveProgress.reportStatusInterval(y);return U.WY.post({url:L,data:u})}},21594:function(Le,ve,e){"use strict";e.d(ve,{pu:function(){return w},RG:function(){return K},Gp:function(){return fe},O8:function(){return l}});var X=e(88986),R=e(69164),ne=e(38642),U=e(41225),w=b=>{var a="";switch(b){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":a="studyTask";break;case"enterprise":a="enterprise";break;case"courseProject":a="studyProject";break;case"platform":case"purchased":a="platform";break;default:break}return a},K=(b,a)=>{var W={};return a.forEach(E=>{var F=b.find(o=>o.type===E.type);if(F)if(E.type==="document_duration_limit"){var y=F.action_list,u=y.find(o=>o.type==="random_popup_verification");!(0,ne.UI)("RANDOM_POPUP_VERIFY")||!u?W[E.name]="CLOSE":W[E.name]=u.param.checked==="true"?"OPEN":"CLOSE"}else if(E.type==="document_player"){var L=JSON.parse(F.actions);L.forEach(o=>{o.param.checked==="true"&&(W[E.name]=o.type)})}else if(E.type==="dynamic_watermark"){var B=F.action_list;B.forEach(o=>{o.type===E.resourceType&&o.param.checked==="true"&&(W[E.name]=o.param.comment)})}else W[E.name]=F.switch_status}),W},fe=b=>{(0,U.sH)((0,X.Z)({progress:100,recent_start:1},b)).then(a=>{a&&a.data&&(0,R.Z)(a.data.integral_info||"")})},l=b=>{var a=document.createElement("div");return a.innerHTML=b,a.childNodes[0]}},56130:function(Le,ve,e){"use strict";var X=e(62029),R=e(12924),ne=e.n(R),U=e(28216),w=e(37055),K=e(10237),fe=e(44881),l=a=>{var W=a.studyProject.classify;return{classify:W}},b=a=>{var W=(0,U.$j)(l)(class extends ne().Component{constructor(F){var y;super(F);y=this,this.updateData=u=>{var L=this.props.dispatch,B=u||[...this.state.classify];this.setState({classify:B}),L({type:"studyProject/updateClassify",classify:B})},this.getClassify=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",L=y.props,B=L.unclassified,o=B===void 0?!1:B,se=L.parent_id,ie=se===void 0?0:se,z=L.auth_type,le=z===void 0?"query":z,ee=w.ZP.Classify.getResourceClassify();K.WY.get({url:ee,params:{include_unclassified:o,parent_id:ie,auth_type:le,name:u}}).then(ye=>{!ye.data||y.updateData((0,fe.P)(ye.data.list,le))})},this.loadData=u=>{var L=this.props,B=L.unclassified,o=B===void 0?"":B,se=L.auth_type,ie=se===void 0?"query":se,z=L.filter,le=L.dispatch,ee=L.type,ye=ee===void 0?"":ee;if(console.warn(ie,"auth_type"),Array.isArray(u)){var de=u[u.length-1];de.loading=!0,setTimeout(()=>{var Z=w.ZP.Classify.getResourceClassify(),G=de.id;K.WY.get({url:Z,params:{include_unclassified:o,parent_id:G,auth_type:ie}}).then(ue=>{!ue.data||de.children||(de.loading=!1,de.children=(0,fe.P)(ue.data.list,ie),this.updateData())})},1e3)}else return new Promise(Z=>{var G=u.id;setTimeout(()=>{var ue=w.ZP.Classify.getResourceClassify(),Ke=G;K.WY.get({url:ue,params:{include_unclassified:o,parent_id:Ke,auth_type:ie}}).then(Be=>{if(!Be.data){Z();return}if(z&&Be.data.list.length===0){var ze=this.state.classify.map(Ue=>(z&&G===Ue.id&&(Ue.isLeaf=!0),Ue));this.setState({classify:ze}),le({type:"studyProject/updateClassify",classify:ze});return}var He=(0,fe.P)(Be.data.list,ie);if(ye==="tree"){u.dataRef.children=He,this.setState({classify:[...this.state.classify]}),le({type:"studyProject/updateClassify",classify:[...this.state.classify]});return}this.updateData(this.state.classify.concat(He))}),Z()},300)})},this.state={classify:[]}}componentDidMount(){this.getClassify()}render(){return ne().createElement(a,(0,X.Z)({classify:this.props.classify,refresh:this.getClassify,loadData:this.loadData},this.props))}});return W};ve.Z=b},89284:function(Le,ve,e){"use strict";e.r(ve),e.d(ve,{default:function(){return Re}});var X=e(22385),R=e(31097),ne=e(13062),U=e(71230),w=e(89032),K=e(15746),fe=e(48736),l=e(27049),b=e(88986),a=e(57361),W=e(18106),E=e(88108),F=e(402),y=e(99545),u=e(9754),L=e.n(u),B=e(12924),o=e.n(B),se=e(91768),ie=e(57068),z=e(28216),le=e(17883),ee=e(33565),ye=e(70596),de=e.n(ye),Z=Ee=>{var ce=(0,B.useState)(null),Pe=(0,ee.Z)(ce,2),$=Pe[0],H=Pe[1],J=(0,B.useState)(null),Ce=(0,ee.Z)(J,2),me=Ce[0],pe=Ce[1],O=Ee.title,V=m=>{H(m)};return(0,B.useEffect)(()=>{if($){var m=de().init($);pe(m)}},[$]),(0,B.useEffect)(()=>{var m=Ee.list.map(x=>({name:x.ability_name,max:5})),C=[0,1,3,5],_=Ee.list.map(x=>x.source==="tool"?C[x.ability_level]:x.ability_level),D=()=>{var x="";Ee.list.forEach(Q=>{x+=`
        <div class="tooltipFormatter-item">
          <span class="tooltipFormatter-item-content">`.concat(Q.ability_name,`</span>
          <span>
            `).concat(Q.ability_levels.reduce((ae,he)=>he.default_score===Q.ability_level?ae+he.level_name:ae,""),`
          </span>
        </div>`)});var te={radar:{indicator:m,name:{fontSize:10,lineHeight:11,formatter(Q){return Q.length>7?"".concat(Q.substr(0,7),"..."):Q}},nameGap:18,radius:"45%"},tooltip:{show:!0,trigger:"item",position:"inside",textStyle:{fontSize:10},formatter:()=>`<div class="tooltipFormatter" >
                `.concat(x,`
              </div>`)},series:[{type:"radar",tooltip:{},areaStyle:{color:"rgba(82, 145, 255, 0.25)"},lineStyle:{color:"#5291FF"},itemStyle:{color:"#5291FF",borderColor:"#ffffff",borderWidth:.1},data:[{value:_,label:{fontSize:48}}]}]};me.setOption(te)};me&&D()},[me,Ee.list]),o().createElement("div",{className:"set-learning-plan-chart"},o().createElement("div",null,o().createElement("div",{className:"set-learning-plan-chart-box",ref:V})),o().createElement("div",{className:"chart-info_title"},O))},G=Z,ue=Ee=>{var ce=(0,B.useState)(null),Pe=(0,ee.Z)(ce,2),$=Pe[0],H=Pe[1],J=(0,B.useState)(null),Ce=(0,ee.Z)(J,2),me=Ce[0],pe=Ce[1],O=Ee.title,V=m=>{H(m)};return(0,B.useEffect)(()=>{if($){var m=de().init($);pe(m)}},[$]),(0,B.useEffect)(()=>{var m=Ee.list.map(x=>({name:x.ability_name,max:5})),C=[0,1,3,5],_=Ee.list.map(x=>x.source==="tool"?C[x.ability_level]:x.ability_level),D=()=>{var x="";Ee.list.forEach(Q=>{x+=`
        <div class="tooltipFormatter-item" >
          <span class="tooltipFormatter-item-content" >`.concat(Q.ability_name,`</span>
          <span>
            `).concat(Q.ability_levels.reduce((ae,he)=>he.default_score===Q.ability_level?ae+he.level_name:ae,""),`
          </span>
        </div>`)});var te={radar:{indicator:m,name:{fontSize:12,lineHeight:16,formatter:Q=>Q.length>28?"".concat(Q.substr(0,28),"..."):Q},nameGap:18,radius:"50%"},tooltip:{show:!0,trigger:"item",position:"inside",textStyle:{fontSize:10},formatter:()=>`<div class="tooltipFormatter">
                `.concat(x,`
              </div>`)},series:[{name:"abilityLevel",type:"radar",tooltip:{},areaStyle:{color:"rgba(82, 145, 255, 0.25)"},lineStyle:{color:"#5291FF"},itemStyle:{color:"#5291FF",borderColor:"#ffffff",borderWidth:.1},data:[{value:_,label:{fontSize:48}}]}]};me.setOption(te)};me&&D()},[me,Ee.list]),o().createElement("div",{className:"set-learning-plan-chart-modal"},o().createElement("div",null,o().createElement("div",{className:"set-learning-plan-chart-modal-box",ref:V})),o().createElement("div",{className:"chart-info_title"},O))},Ke=ue,Be=e(18329);function ze(Ee){var ce=Ee.t,Pe=ce("personnelDevelope.detailsofCompetencyRequirements"),$=Ee.visible,H=Ee.showContents,J=H.title,Ce=J===void 0?Pe:J,me=H.content,pe=Ee.closeShowContent,O=()=>{pe()};return o().createElement(Be.ZP,{size:"large",visible:$,title:Ce,onCancel:O,footer:null,destroyOnClose:!0},typeof me!="string"?me:o().createElement("div",{className:"showContent-content",dangerouslySetInnerHTML:{__html:me}}))}var He=(0,se.Z)()(ze),Ue=e(76466),Xe=e(84874),We,Te,Me,be,je=y.Z.Paragraph,Ge=E.Z.TabPane,Je=(We=(0,z.$j)(Ee=>{var ce=Ee.personnelDevelope,Pe=Ee.user;return{postId:ce.postId,isView:ce.isView,enterprise_id:Pe.enterpriseId,postCourseId:ce.postCourseId}}),Te=Reflect.metadata("design:type",Function),Me=Reflect.metadata("design:paramtypes",[void 0]),We(be=Te(be=Me(be=class extends o().Component{constructor(ce){var Pe;super(ce);Pe=this,this.handlePostIntroduce=function(){var $=(0,a.Z)(L().mark(function H(J){var Ce,me,pe,O,V,m,C,_,D,x;return L().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:Ce=J.content,me=Ce.name,pe=Ce.url,O=Pe.state,V=O.previewInfo,m=O.resourceInfo,C=ie.parseUrl(pe),_=C.query,D=_.playId,x=_.storage_type,Pe.setState({previewInfo:(0,b.Z)((0,b.Z)({},V),{},{visible:!0,title:me,onCancel:Pe.cancelPreview}),resourceInfo:(0,b.Z)((0,b.Z)({},m),{},{source:{FD:pe,OD:""},storageType:x,playId:D,originUrl:pe})});case 5:case"end":return Q.stop()}},H)}));return function(H){return $.apply(this,arguments)}}(),this.cancelPreview=()=>{var $=this.state.previewInfo;this.setState({resourceInfo:{resourceInfo:{}},previewInfo:(0,b.Z)((0,b.Z)({},$),{},{visible:!1})})},this.noMore=()=>{var $=this.props.t;return o().createElement("p",{className:"nomore"},$("trainee.noResultContent"))},this.powerInfo=$=>{var H=this.props.t;return o().createElement("div",null,o().createElement(l.Z,{dashed:!0}),o().createElement("div",{className:"related-end-less-title"},H("personnelDevelope.abilityInformation")),o().createElement("div",{className:"related-end-less-title-desc"},H("personnelDevelope.powerInfoDesc")),o().createElement(U.Z,{className:"related-end-less-margin"},$.length>0&&$.map(J=>o().createElement(K.Z,{key:J.id,span:8},o().createElement("div",{onClick:()=>{this.showContentChart(J)}},o().createElement(G,{height:"220px",title:J.name,list:J.post_qualifications_ability.slice(0,10)}))))),$.length===0&&this.noMore())},this.postInfo=$=>{var H=this.props.t;return o().createElement("div",{className:"related-end-info"},o().createElement("div",{className:"related-end-less-title"},H("learning.basicInformation")),o().createElement("div",{className:"related-end-info-content"},$.map(J=>o().createElement("div",{key:J.id,className:"related-end-info-content-item"},o().createElement("span",{className:"related-end-info-content-item-label"},J.label,"\uFF1A"),J.value==="--"?o().createElement("span",null,J.value):o().createElement("div",{className:"related-end-info-content-item-value",onClick:()=>{this.openShowContent({title:J.label,content:J.value,tag:J.tag})}},o().createElement(je,{ellipsis:{rows:1}},J.desc||J.value))))))},this.renderTypeName=$=>{var H=this.props.t,J;switch($){case"task":J={title:H("personnelDevelope.keyTask"),headerTitle:H("exam.taskName"),headerDesc:H("personnelDevelope.taskDescription")};break;case"certList":J={title:H("personnelDevelope.external"),headerTitle:H("authentication.certificateDetailName"),headerDesc:H("personnelDevelope.certificateDesc")};break;case"platCertList":J={title:H("personnelDevelope.platformCertificate"),headerTitle:H("authentication.certificateDetailName"),headerDesc:H("personnelDevelope.certificateDesc")};break;case"contribute":J={title:H("personnelDevelope.organizeContribute"),headerTitle:H("personnelDevelope.contributionName"),headerDesc:H("personnelDevelope.contributionDesc")};break;default:break}return J},this.keyTask=($,H)=>{var J=this.renderTypeName($);return o().createElement("div",{className:"key-task"},o().createElement(l.Z,{dashed:!0}),o().createElement("div",{className:"related-end-less-title"},J.title),H.length>0?o().createElement("div",{className:"key-task_header key-task-item"},o().createElement("div",null,J.headerTitle),o().createElement("div",null,J.headerDesc)):"",H.length>0?H.map(Ce=>o().createElement("div",{key:Ce.id,className:"key-task-item"},o().createElement(R.Z,{title:Ce.name,placement:"top"},o().createElement("div",{className:"key-task-name"},Ce.name)),o().createElement(R.Z,{title:Ce.description,placement:"top"},o().createElement("div",{className:"key-task-description"},Ce.description)))):this.noMore())},this.requiredCertificates=($,H)=>o().createElement("div",null,o().createElement(l.Z,{dashed:!0}),o().createElement("div",{className:"related-end-less-title"},$),o().createElement("div",{className:"cert-list"},H.length>0&&H.map(J=>o().createElement("div",{key:J.id,onClick:()=>{this.openShowContent({title:J.name,content:J.description})},className:"cert-list-item"},o().createElement("div",{className:"cert-list-item-box"},o().createElement("div",{className:"cert-list-item-icon"},o().createElement(Xe.Z,{iconClass:"icon-zigezhengshu",size:"12px"})),o().createElement("div",{className:"cert-list-item-content"},o().createElement("div",{className:"cert-list-item-content-title"},o().createElement(je,{ellipsis:{rows:1}},J.name)),o().createElement("div",{className:"cert-list-item-content-detail"},o().createElement(je,{ellipsis:{rows:3}},J.description))))))),H.length===0&&this.noMore()),this.learnContent=()=>{var $=this.state.learnContentList,H=this.props.t;return o().createElement(o().Fragment,null,o().createElement(l.Z,{dashed:!0}),$&&$.length>0?o().createElement(o().Fragment,null,o().createElement("div",{className:"related-end-less-title"},H("learning.learnUpgrade.studyContent")),$.map((J,Ce)=>o().createElement("div",{key:Ce.toString(),className:"learnContent"},o().createElement("p",{className:"learnContent-title"},J.study_project_name),o().createElement(E.Z,{type:"card"},J.stage.map((me,pe)=>o().createElement(Ge,{tab:me.stage_name,key:pe.toString()},o().createElement("div",{className:"learnContent-list"},o().createElement("div",{className:"learnContent-list-item"},o().createElement("h6",null,me.stage_resource.resource),o().createElement("p",null,H("formItem.stageTaskBtnCourseware"))),o().createElement("div",{className:"learnContent-list-item"},o().createElement("h6",null,me.stage_resource.course_normal),o().createElement("p",null,H("formItem.stageTaskBtnCourse"))),o().createElement("div",{className:"learnContent-list-item"},o().createElement("h6",null,me.stage_resource.course_graphic),o().createElement("p",null,H("course.graphicDetailTitle"))),o().createElement("div",{className:"learnContent-list-item"},o().createElement("h6",null,me.stage_resource.exam),o().createElement("p",null,H("formItem.stageTaskBtnExam"))),o().createElement("div",{className:"learnContent-list-item"},o().createElement("h6",null,me.stage_resource.offline),o().createElement("p",null,H("formItem.stageTaskBtnOnsite"))),o().createElement("div",{className:"learnContent-list-item"},o().createElement("h6",null,me.stage_resource.research),o().createElement("p",null,H("questionn.investigate"))),o().createElement("div",{className:"learnContent-list-item"},o().createElement("h6",null,me.stage_resource.operation),o().createElement("p",null,H("component.practiceExam"))),o().createElement("div",{className:"learnContent-list-item"},o().createElement("h6",null,me.stage_resource.evaluation),o().createElement("p",null,H("questionn.postTalentEvaluation")))))))))):"",!$&&this.noMore())},this.openShowContent=$=>{$.tag==="video"?this.handlePostIntroduce($):this.setState({visible:!0,showContents:$})},this.closeShowContent=()=>{this.setState({visible:!1,showContents:{title:"",content:""}})},this.showContentChart=$=>{var H=o().createElement(Ke,{height:"500px",title:$.name,list:$.post_qualifications_ability});this.openShowContent({title:$.title,content:H})},this.state={infoList:[],classifyList:[],keyTaskList:[],certList:[],qualification_need:"",visible:!1,showContents:{title:"",content:""},learnContentList:[],platCertList:[],contributeList:[],previewInfo:{visible:!1,destroyOnClose:!0},resourceInfo:{}}}componentDidMount(){var ce=this.props.postId;this.getInitList(ce),this.props.getFormRef&&this.props.getFormRef(this)}getInitList(ce){var Pe=this.props,$=Pe.t,H=Pe.isView,J=Pe.projectData,Ce=Pe.isEnterEdit;(0,le.vq)(ce).then(me=>{var pe=me.data.data,O=[{label:$("personnelDevelope.currentPost"),value:pe.post_name||"--"},{label:$("personnelDevelope.promotablePost"),value:pe.superior_post_name.map(m=>m.name).join("\uFF0C")||"--"},{label:$("personnelDevelope.function"),value:pe.function_name||"--"},{label:$("personnelDevelope.jobResponsibilities"),desc:o().createElement("a",{className:"ant-btn-link"},$("study.lookStudyRecord")),value:pe.post_description||"--"},{label:$("personnelDevelope.jobRequirements"),desc:o().createElement("a",{className:"ant-btn-link"},$("study.lookStudyRecord")),value:pe.qualification_description||"--"}];pe.video_introduction&&pe.video_introduction.url?O.push({label:$("personnelDevelope.videoIntroduction"),desc:o().createElement("a",{className:"ant-btn-link"},$("study.lookStudyRecord")),value:pe.video_introduction,tag:"video"}):O.push({label:$("personnelDevelope.videoIntroduction"),desc:"--",value:"--",tag:"--"}),this.setState({infoList:O,qualification_need:pe.qualification_need}),pe.qualification_id&&(0,le.iZ)(pe.qualification_id).then(m=>{var C=m.data.data;this.setState({keyTaskList:C.emphasis_task_list,certList:C.emphasis_certificate_list,classifyList:C.ability_classify_list,platCertList:C.platform_certificate_list.map(_=>(0,b.Z)((0,b.Z)({},_),{},{description:_.summary})),contributeList:C.emphasis_contribute_list})});var V={};H&&Ce&&(V.id=pe.id),!H&&Ce&&(V.type="preview",V.id=J[0].id),(0,le.cw)(V).then(m=>{this.setState({learnContentList:m.data.data})}).catch(()=>{})})}render(){var ce=this.state,Pe=ce.infoList,$=ce.keyTaskList,H=ce.certList,J=ce.classifyList,Ce=ce.qualification_need,me=ce.visible,pe=ce.showContents,O=ce.platCertList,V=ce.contributeList,m=ce.previewInfo,C=ce.resourceInfo,_=this.props.t;return o().createElement("div",{className:"related-end"},o().createElement("div",{className:"related-end-title"},_("personnelDevelope.confirmationInformation")),o().createElement("div",{className:"related-end-container"},this.postInfo(Pe),Ce===1?o().createElement("div",null,this.powerInfo(J),this.keyTask("task",$),this.keyTask("certList",H),this.keyTask("platCertList",O),this.keyTask("contribute",V)):"",this.learnContent()),o().createElement(He,{visible:me,showContents:pe,closeShowContent:this.closeShowContent}),o().createElement(Ue.Z,{previewInfo:m,resourceInfo:C,mode:"preview",watchType:"video"}))}})||be)||be)||be),Re=(0,se.Z)()(Je)},74512:function(Le,ve,e){"use strict";e.r(ve),e.d(ve,{default:function(){return lt}});var X=e(22385),R=e(31097),ne=e(57663),U=e(71577),w=e(34792),K=e(48086),fe=e(12924),l=e.n(fe),b=e(76651),a=e(57068),W=e(28216),E=e(91768),F=e(62029),y=e(88986),u=e(80991),L=e(88311),B=e(43859),o=e(84874),se,ie,z,le,ee=(se=(0,W.$j)(De=>{var f=De.personnelDevelope;return{postId:f.postId}}),ie=Reflect.metadata("design:type",Function),z=Reflect.metadata("design:paramtypes",[void 0]),se(le=ie(le=z(le=class extends l().Component{constructor(f){super(f);this.onChange=r=>{var h=r.target.value;this.props.onChange(h)},this.onOrgDialogCancel=()=>{var r=this.state.orgModalConfig;this.setState({orgModalConfig:(0,y.Z)((0,y.Z)({},r),{},{visible:!1})})},this.onSelectPromotion=()=>{var r=this.state.orgModalConfig;this.setState({orgModalConfig:(0,y.Z)((0,y.Z)({},r),{},{visible:!0})})},this.onOrgDialogOk=r=>{for(var h=!1,S=!1,j=this.state.allPost,Y=r.post,I=this.props,oe=I.postId,we=I.t,A=0;A<Y.length;A++)if(oe===Y[A].id){S=!0;break}if(j.length!==0){for(var n=0;n<j.length;n++)for(var i=0;i<Y.length;i++)if(j[n].id===Y[i].id){h=!0;break}}if(S)return K.default.warning(we("personnelDevelope.validation.postNotSelfTip")),!1;if(h)return K.default.warning(we("personnelDevelope.repetition")),!1;var s=j.concat(...Y);return s.length>5?(K.default.warning(we("personnelDevelope.validation.addPostLimitTip")),!1):(this.setState({allPost:s},()=>{var t=this.state.allPost.map(p=>({id:p.id,name:p.name})),c=t.map(p=>p.id);this.props.formik.setFieldValue("superior_post_name",t),this.props.formik.setFieldValue("superior_post",c.join(",")),this.onOrgDialogCancel()}),!1)},this.onDelPost=r=>{var h=this.state.allPost,S=h;S.splice(r,1),this.setState({allPost:S},()=>{var j=this.state.allPost.map(I=>({id:I.id,name:I.name})),Y=j.map(I=>I.id);this.props.formik.setFieldValue("superior_post_name",j),this.props.formik.setFieldValue("superior_post",Y.join(","))})},this.renderIcon=()=>l().createElement(o.Z,{iconClass:"iconf-add",size:"12px",color:"rgba(7, 7, 7, 0.45)"}),this.state={orgModalConfig:{visible:!1,title:f.t("course.jobs"),onlyDept:!0,onlyChoosePost:!0,onlyPost:!0,displayType:["post",""],onOk:this.onOrgDialogOk,onCancel:this.onOrgDialogCancel},allPost:[]}}componentDidMount(){var f=this.props.value;f&&this.setState({allPost:f})}render(){var f=this.state,r=f.orgModalConfig,h=f.allPost,S=this.props,j=S.isView,Y=S.t;return l().createElement(l().Fragment,null,l().createElement("div",{className:"post-promotion"},h.map((I,oe)=>l().createElement(U.Z,{className:"post-promotion-button",key:I.id},I.name,j?"":l().createElement("a",{onClick:()=>{this.onDelPost(oe)}},l().createElement(o.Z,{iconClass:"icon-guanbi",size:"12px"})))),j?"":l().createElement(U.Z,{type:"dashed",icon:this.renderIcon(),disabled:h.length>=5,onClick:this.onSelectPromotion},Y("personnelDevelope.addPost"))),l().createElement(L.Z,r))}})||le)||le)||le),ye=(0,E.Z)()((0,B.Z)((0,u.$j)(ee))),de=e(99090),Z=e.n(de),G=e(6793),ue=e(10780);class Ke extends l().Component{constructor(f){super(f);this.onCancel=()=>{this.setState({visible:!1})},this.handleChooseVideo=()=>{this.setState({visible:!0})},this.handleOk=r=>{var h=this.props,S=h.formik,j=h.t;if(r.length===0){this.onCancel();return}if(r.length>1){K.default.error(j("personnelDevelope.chooseVideoTip"));return}this.setState({chooseVideo:r[0],isShowVideoName:!0},()=>{var Y=this.state.chooseVideo,I=Y.data;S.setFieldValue("video_introduction",{url:"".concat(I.url,"?storage_type=").concat(I.storage_type,"&playId=").concat(I.videoId),name:Y.name,duration:Y.duration})}),this.onCancel()},this.handleDel=()=>{var r=this.props.formik;this.setState({isShowVideoName:!1},()=>{r.setFieldValue("video_introduction",{})})},this.state={visible:!1,chooseVideo:"",isShowVideoName:!1}}componentDidMount(){var f=this.props.value;f.name&&this.setState({isShowVideoName:!0,chooseVideo:f})}render(){var f=this.state,r=f.visible,h=f.chooseVideo,S=f.isShowVideoName,j=this.props,Y=j.isView,I=j.t;return l().createElement(l().Fragment,null,S?l().createElement(U.Z,null,l().createElement("span",{className:Z()["post-video-name"]},h.name," "),l().createElement("a",{className:Z().duration},(0,G.xj)(h.duration)),l().createElement("a",{className:Z()["post-video-close"],onClick:()=>{this.handleDel()}},l().createElement(o.Z,{iconClass:"icon-guanbi",size:"12px"}))):l().createElement(U.Z,{onClick:this.handleChooseVideo,disabled:Y},I("personnelDevelope.chooseVideo")),l().createElement(ue.Z,{visible:r,onCancel:this.onCancel,onOk:this.handleOk,contentType:"video",excludeType:"all,h5,html,picture,scorm,application,audio",isSearchOneResource:!0}))}}var Be=(0,E.Z)()((0,B.Z)((0,u.$j)(Ke))),ze=e(67620);class He extends l().Component{constructor(){super(...arguments);this.handleChange=f=>{var r=this.props,h=r.formik,S=r.contentCls,j=r.toolbarCls;h.setFieldValue(j||S,f)}}render(){var f=this.props,r=f.toolbarCls,h=f.contentCls,S=f.value,j=f.placeholderContent;return l().createElement(ze.Z,{ref:Y=>{this.editorInstance=Y},onChange:this.handleChange,toolbarCls:r,contentCls:h,controls:["head","bold","fontSize","italic","underline","strikeThrough","image","undo","redo"],placeholder:S,placeholderContent:j})}}var Ue=(0,B.Z)((0,u.$j)(He)),Xe=e(11236),We=e(48206),Te=e(17883),Me=e(73548),be=e(40767),je,Ge,Je,Re,Ee=(je=(0,W.$j)(De=>{var f=De.user,r=De.personnelDevelope;return{isView:r.isView,enterprise_id:f.enterpriseId,currentStep:r.currentStep,maxStep:r.maxStep,superiorPostName:r.superiorPostName,projectList:r.projectList,qualificationDescription:r.qualificationDescription,postDescription:r.postDescription,postCourseId:r.postCourseId,qualificationId:r.qualificationId,superiorPost:r.superiorPost,functionId:r.functionId,postId:r.postId,videoIntroduction:r.videoIntroduction}}),Ge=Reflect.metadata("design:type",Function),Je=Reflect.metadata("design:paramtypes",[void 0]),je(Re=Ge(Re=Je(Re=class extends l().Component{constructor(f){super(f);this.onSubmit=r=>{var h=this.props,S=h.enterprise_id,j=h.postCourseId,Y=h.postId,I=h.addStep,oe=h.changeStep,we=h.itemStepInfo,A=h.setLoading;A(!0);var n=(0,y.Z)((0,y.Z)({},r),{},{post_id:Y,enterprise_id:S});j&&(n.type="put"),(0,Te.e0)(n).then(i=>{this.props.dispatch({type:"personnelDevelope/update",payload:{superiorPostName:r.superior_post_name,functionId:r.function_id,qualificationDescription:r.qualification_description,postDescription:r.post_description,superiorPost:r.superior_post,postCourseId:j||i.data.data,videoIntroduction:r.video_introduction}}),we?oe():I()}).finally(()=>{A(!1)})},this.renderText=()=>{var r=this.props.t;return l().createElement("p",null,r("personnelDevelope.functionTip"))},this.getPostInfo=()=>{var r=this.props,h=r.superiorPostName,S=r.postDescription,j=r.functionId,Y=r.qualificationDescription,I=r.postCourseId,oe=r.superiorPost,we=r.videoIntroduction,A=a.parse(b.m8.location.search),n=A.post_id,i=this.state.initialValues;(0,Te.sy)(n).then(s=>{if(s.data.code===0){var t=s.data.data,c=t.rank_name_list,p=t.post_name,d=t.passage_name_list;this.setState({initialValues:(0,y.Z)((0,y.Z)({},i),{},{postName:p||"---",postChannel:d||"---",positions:c||"---",superior_post_name:h,function_id:j,qualification_description:Y,post_description:S,id:I,superior_post:oe,video_introduction:we}),requested:!0})}})},this.getFunction=()=>{(0,Te.F6)("function").then(r=>{r.data.success==="true"&&this.setState({functionData:r.data.sys_dicts})})},this.renderFunctionName=()=>{var r=this.props.t;return l().createElement("div",{className:"function-label"},l().createElement("span",null,r("personnelDevelope.function")),l().createElement(R.Z,{placement:"top",title:this.renderText},l().createElement("span",null,l().createElement(o.Z,{iconClass:"iconf-help"}))))},this.initRef=l().createRef(),this.state={initialValues:{postName:"",postChannel:"",positions:"",superior_post:"",function_id:"",qualification_description:"",post_description:"",video_introduction:{name:"",url:"",duration:""}},functionData:[],requested:!1}}componentDidMount(){this.props.getFormRef&&this.props.getFormRef(this.initRef),this.getFunction(),this.getPostInfo()}render(){var f=this.state,r=f.initialValues,h=f.functionData,S=f.requested,j=this.props,Y=j.isView,I=j.t;return l().createElement("div",{className:"panel-form panel-first"},S?l().createElement("div",null,l().createElement(u.J9,{ref:this.initRef,initialValues:r,onSubmit:this.onSubmit,render:oe=>l().createElement(u.l0,{className:"post-info-form"},l().createElement("div",{className:"cl-form__sectitle"},I("personnelDevelope.postInformation")),l().createElement(u.gN,(0,F.Z)({name:"postName",label:I("personnelDevelope.postName"),component:Me.z,defaultValue:oe.values.postName,isView:Y},be.c)),l().createElement(u.gN,(0,F.Z)({name:"postChannel",label:I("personnelDevelope.postChanel"),component:Me.z,defaultValue:oe.values.postChannel,isView:Y},be.c)),l().createElement(u.gN,(0,F.Z)({name:"positions",label:I("personnelDevelope.positions"),component:Me.z,defaultValue:oe.values.positions,isView:Y},be.c)),l().createElement(u.gN,(0,F.Z)({name:"superior_post",label:I("personnelDevelope.promotablePosted"),component:ye,value:oe.values.superior_post_name,isView:Y,disabled:Y},be.c)),l().createElement(u.gN,(0,F.Z)({name:"video_introduction",label:I("personnelDevelope.videoIntroduction"),component:Be,value:oe.values.video_introduction,isView:Y},be.c)),l().createElement(u.gN,(0,F.Z)({name:"function_id",label:this.renderFunctionName(),required:!0,component:Xe.Z,defaultValue:oe.values.function_id},be.c,{isView:Y,validate:We.Z.noEmpty,data:h})),l().createElement(u.gN,(0,F.Z)({name:"post_description",label:I("personnelDevelope.jobResponsibilitiess"),component:Ue,disabled:Y,placeholder:I("personnelDevelope.placeholder.jobResponsibilities"),defaultValue:oe.values.post_description,required:!0,toolbarCls:"post_description",maxLength:"2000",placeholderContent:I("component.enterResponsibility"),validate:We.Z.noEmpty},be.c)),l().createElement(u.gN,(0,F.Z)({name:"qualification_description",label:I("personnelDevelope.jobRequirementss"),component:Ue,placeholder:I("personnelDevelope.placeholder.jobRequirements"),required:!0,contentCls:"qualification_description",validate:We.Z.noEmpty,placeholderContent:I("component.enterRequirement"),defaultValue:oe.values.qualification_description},be.c)))})):"")}})||Re)||Re)||Re),ce=(0,E.Z)()(Ee),Pe=e(1624);class $ extends l().Component{constructor(f){super(f);this.onChoose=()=>{var r=this.state.isClickAble;r&&this.props.onSelect()},this.renderButton=()=>{var r=this.state.isClickAble,h=this.props,S=h.name,j=h.text;return l().createElement(U.Z,{type:"primary",onClick:this.onChoose,disabled:!r},l().createElement("span",null,S),l().createElement(R.Z,{placement:"top",title:j},l().createElement("span",null,l().createElement(o.Z,{iconClass:"iconf-help"}))))},this.state={isClickAble:!0}}componentDidMount(){var f=this.props.isClick,r=f!==void 0&&f,h={};f===void 0?h.isClickAble=!0:h.isClickAble=r,this.setState(h)}componentDidUpdate(f){var r=this.props.isClick;if(f.isClick!==r){var h=r!==void 0&&r,S={};r===void 0?S.isClickAble=!0:S.isClickAble=h,this.setState(S)}}render(){var f=this.props,r=f.isView,h=f.title;return l().createElement("div",{className:"cl-form__title"},l().createElement("h1",{className:"title"},h),l().createElement("div",null,this.props.children,r?"":this.renderButton()))}}var H=$,J=e(78657),Ce=e(24881),me=e(63848);class pe extends l().Component{constructor(f){super(f);this.onSearchChange=r=>{var h=this.state.tableConfig;this.setState({keyword:r,tableConfig:(0,y.Z)((0,y.Z)({},h),{},{current:1})},()=>{this.getProjectList()})},this.onClassifyChange=r=>{var h=this.state.tableConfig;this.setState({classify:r,tableConfig:(0,y.Z)((0,y.Z)({},h),{},{current:1})},()=>{this.getProjectList()})},this.onPaginationChange=(r,h)=>{var S=this.state.tableConfig;S.current=r,S.pageSize=h,this.setState({tableConfig:S},()=>{this.getProjectList()})},this.projectListSuccess=r=>{if(r.data){var h=this.state.tableConfig;h.dataSource=r.data.list||[],h.total=r.data.total||0,h.loading=!1,this.setState({tableConfig:h})}},this.getProjectList=()=>{var r=this.state,h=r.tableConfig,S=r.keyword,j=r.classify;h.loading=!0,this.setState({tableConfig:h});var Y={keyword:S,page_size:h.pageSize,page_number:h.current,only_see_me:!1};j.length!==0&&(Y.classify_id=j[j.length-1]),(0,Te.ph)(Y).then(I=>{I.data&&I.data.list&&this.projectListSuccess(I)})},this.state={keyword:"",radioSearchConfig:{placeholder:f.t("searchInputPlaceholder.name"),onSearchChange:this.onSearchChange},tableConfig:{columns:[{title:this.props.t("learning.learningProjectAddTitle"),dataIndex:"name",key:"name",className:"study_project_width",fixed:this.props.appType==="wx_app"?!1:"left",width:220,textWrap:"word-break",ellipsis:!0,render:(r,h)=>l().createElement(R.Z,{placement:"top",title:h.name},l().createElement("div",{className:"post-study-info-name common-ellipsis"},r))},{title:this.props.t("setting.classifyLabel"),dataIndex:"classify_name",key:"classify_name",width:180,textWrap:"word-break",ellipsis:!0,render:(r,h)=>l().createElement(R.Z,{placement:"top",title:h.classify_name},l().createElement("div",{className:"post-study-classify-name common-ellipsis"},r))},{title:this.props.t("personnelDevelope.resourceCount"),dataIndex:"resource_count",key:"resource_count",width:180}],rowSelection:{type:"radio",onChange:f.setSelResourceId,selectedRowKeys:f.defaultChecked},rowKey:"id",dataSource:[],loading:!1,total:0,current:1,onPaginationChange:this.onPaginationChange},classify:[]}}componentDidMount(){this.getProjectList()}UNSAFE_componentWillReceiveProps(f){var r=this.state.tableConfig;r.rowSelection.selectedRowKeys=f.defaultChecked,this.setState({tableConfig:r})}componentDidUpdate(f){var r=this.props,h=r.activeKey,S=r.currentItem;f.activeKey!==h&&h===S.key&&this.getProjectList()}render(){var f=this.state,r=f.radioSearchConfig,h=f.tableConfig,S=f.classify;return l().createElement("div",{className:"study-task-source"},l().createElement("div",{style:{position:"absolute"}},l().createElement(me.Z,{onChange:this.onClassifyChange,showLabel:!1,value:S,queryType:"study_project"})),l().createElement(Ce.Z,{radioSearch:r,resourceType:"studyProject",tableConfig:h}))}}var O=(0,E.Z)()(pe),V=e(36202),m=e(89810),C=e(1164),_=e(77219),D,x,te,Q,ae=(D=(0,W.$j)(De=>{var f=De.user,r=De.personnelDevelope;return{enterprise_id:f.enterpriseId,postCourseId:r.postCourseId,qualificationId:r.qualificationId,projectList:r.projectList,projectData:r.projectData,isView:r.isView,postId:r.postId}}),x=Reflect.metadata("design:type",Function),te=Reflect.metadata("design:paramtypes",[void 0]),D(Q=x(Q=te(Q=class extends l().Component{constructor(f){super(f);this.onSelect=()=>{this.setState({projectVisible:!0})},this.onToProject=()=>{var r=this.state.configModal;this.setState({configModal:(0,y.Z)((0,y.Z)({},r),{},{visible:!0})})},this.onCancel=()=>{var r=this.state.configModal;this.setState({configModal:(0,y.Z)((0,y.Z)({},r),{},{visible:!1})})},this.onConfirm=()=>{var r=this.props.postId,h=a.parse(b.m8.location.search),S=h.postFromPage;C.Z.targetTo({path:"/training/learning/project/add?postSource=postStudyInfo&post_id=".concat(r,"&postFromPage=").concat(S)}),this.onCancel()},this.onOk=r=>{this.setState({data:r.selResourceItem,projectVisible:!1},()=>{r.selResourceItem&&this.setState({isShowVerification:!1}),this.props.getData(this.state.data)})},this.onDeleteItem=()=>{this.setState({data:[]},()=>{this.props.getData(this.state.data)})},this.onSourceCancel=()=>{this.setState({projectVisible:!1})},this.submit=()=>{var r=a.parse(b.m8.location.search),h=r.projectId,S=this.state.data,j=this.props,Y=j.enterprise_id,I=j.postCourseId,oe=j.setLoading,we=j.itemStepInfo,A=j.changeStep;if(S.length===0){this.setState({isShowVerification:!0});return}oe(!0);var n=S.map((s,t)=>({project_id:s.id,sort:t})),i={id:I,project_list:n,enterprise_id:Y,status:0};(0,Te.cb)(i).then(s=>{s.data.code===0&&(h&&localStorage.setItem("postProjectId",n[0].project_id),this.props.dispatch({type:"personnelDevelope/update",payload:{projectList:n,projectData:S}}),we?A():this.props.addStep())}).finally(()=>{oe(!1)})},this.state={projectVisible:!1,configModal:{visible:!1,title:f.t("personnelDevelope.addStudyPlan"),renderType:"text",content:f.t("personnelDevelope.studyPlanTargetInfo")},activeKey:"studyProject",componentsList:[{key:"studyProject",component:O,tab:this.props.t("leftMenuLists.studyProject"),props:{},init:"studyProjectInit"}],data:[],isShowVerification:!1}}componentDidMount(){this.props.getFormRef&&this.props.getFormRef(this);var f=a.parse(b.m8.location.search),r=f.projectId,h=this.props,S=h.postCourseId,j=h.projectData;if(r){(0,Te.TR)(localStorage.getItem("postProjectId")||r).then(Y=>{var I=Y.data;this.setState({data:[{classify_name:I.classify_name,id:I.id,name:I.title,resource_count:I.resource_count}]},()=>{this.props.getData(this.state.data)})});return}localStorage.getItem("postProjectId")&&localStorage.removeItem("postProjectId"),S&&(0,Te.NU)(S).then(Y=>{var I={data:[]};Y.data.code===0&&(j?I.data=j:Y.data.data&&(I.data=Y.data.data)),this.setState(I,()=>{this.props.getData(this.state.data)})})}render(){var f=this.state,r=f.configModal,h=f.projectVisible,S=f.componentsList,j=f.activeKey,Y=f.data,I=f.isShowVerification,oe=this.props,we=oe.isView,A=oe.t,n=[{title:A("learning.learningProjectAddTitled"),dataIndex:"name",key:"name",render:(i,s)=>l().createElement(_.Z,{placement:"top",title:s.name,overlayClassName:"post-learn-project-tooltip"},l().createElement("span",{className:"post-learning-project-title common-ellipsis"},s.name))},{title:A("learning.learningProjectAddCategoryed"),dataIndex:"classify_name",key:"classify_name",render:(i,s)=>l().createElement(_.Z,{overlayClassName:"post-learn-project-tooltip",placement:"top",title:s.classify_name},l().createElement("span",{className:"post-learning-project-category common-ellipsis"},s.classify_name))},{title:A("personnelDevelope.resourceCount"),dataIndex:"resource_count",key:"resource_count"},{title:A("personnelDevelope.operate"),dataIndex:"option",key:"option",render:(i,s)=>we?"":l().createElement("a",{onClick:this.onDeleteItem.bind(this,s)},A("community.deleteQuestion"))}];return l().createElement(l().Fragment,null,l().createElement(H,{title:A("personnelDevelope.learningPlan"),name:A("personnelDevelope.chooseStudyPlan"),onSelect:this.onSelect,isView:we,text:A("personnelDevelope.addStudyPlanInfo")},we?"":l().createElement(U.Z,{ghost:!0,type:"primary",style:{marginRight:"10px"},onClick:this.onToProject},A("personnelDevelope.addStudyPlan"))),l().createElement("div",{style:{padding:"0 32px"}},l().createElement(V.f,{dataSource:Y,columns:n,tableUUID:"4539cf28-efed-467f-bd23-c077e41e24234"})),l().createElement("span",{className:I?"verification active":"verification"},A("personnelDevelope.studyPlanVerify")),r.visible?l().createElement(J.Z,{configModal:r,onCancel:this.onCancel,onConfirm:this.onConfirm}):"",h?l().createElement(m.Z,{visible:!0,componentsList:S,activeKey:j,onOk:this.onOk,onCancel:this.onSourceCancel}):"")}})||Q)||Q)||Q),he=(0,E.Z)()(ae),Ze=e(89284),Oe=e(65202),Fe=e(4408),ke,nt,at,Qe,ot=(ke=(0,W.$j)(De=>{var f=De.personnelDevelope,r=De.user;return{enterprise_id:r.enterpriseId,currentStep:f.currentStep,maxStep:f.maxStep,superiorPostName:f.superiorPostName,projectList:f.projectList,qualificationDescription:f.qualificationDescription,postDescription:f.postDescription,postCourseId:f.postCourseId,functionId:f.functionId,qualificationId:f.qualificationId,postId:f.postId,planStatus:f.planStatus,videoIntroduction:f.videoIntroduction}}),nt=Reflect.metadata("design:type",Function),at=Reflect.metadata("design:paramtypes",[void 0]),ke(Qe=nt(Qe=at(Qe=class extends l().Component{constructor(f){super(f);this.onNextStep=r=>{this.setState({itemStepInfo:r,isTarget:!1},()=>{this.submitFormFn()})},this.onSwitchRightPanel=r=>{var h=this.props.currentStep;r.step!==h&&this.onNextStep(r)},this.onGoBack=()=>{var r=a.parse(b.m8.location.search),h=r.postFromPage;h==="channel"?b.m8.push("/talentedDevelopment/postTrainPlan/postPassage"):b.m8.push("/talentedDevelopment/postTrainPlan/postCollocation")},this.submitFormFn=()=>{var r=this.props.currentStep,h=a.parse(b.m8.location.search),S=h.view;switch(r){case 1:case 2:S?this.changeStep():this.comSubmitPost();break;case 3:S?this.changeStep():this.submitLearnInfo();break;default:break}},this.getPostCourseInfo=()=>{var r=a.parse(b.m8.location.search),h=r.post_id,S=r.view,j=r.postSource;(0,Te.tC)(h).then(Y=>{var I=Y.data.data,oe;I.step===0||S==="true"?oe=4:j?oe=3:I.step===5?oe=1:oe=I.step,this.props.dispatch({type:"personnelDevelope/initSetData",payload:{currentStep:oe,maxStep:I.step===0?4:I.step,superiorPostName:I.superior_post_name,superiorPost:I.superior_post,projectList:I.project_list,qualificationDescription:I.qualification_description,postDescription:I.post_description,functionId:I.function_id===0?"":I.function_id,qualificationId:I.qualification_id,postCourseId:I.id,postId:h,qualification_need:I.qualification_need,planStatus:I.status,isView:S==="true",videoIntroduction:I.video_introduction}}),this.setState({isLoadOneStep:!0})})},this.getFormRef=r=>{this.setState({initRef:r})},this.addStep=()=>{var r=this.props,h=r.currentStep,S=r.maxStep;this.props.dispatch({type:"personnelDevelope/update",payload:{currentStep:h+1,maxStep:S>h?S:h+1}})},this.changeStep=()=>{var r=this.state.itemStepInfo;this.props.dispatch({type:"personnelDevelope/update",payload:{currentStep:r.step}})},this.setLoading=r=>{this.setState({isLoading:r})},this.getData=r=>{this.setState({projectData:r})},this.renderRightPanel=()=>{var r=this.props.currentStep,h=this.state,S=h.isLoadOneStep,j=h.itemStepInfo,Y=h.isTarget,I=h.projectData,oe=h.isEnterEdit;switch(r){case 1:return S?l().createElement(ce,{getFormRef:this.getFormRef,addStep:this.addStep,changeStep:this.changeStep,itemStepInfo:j,setLoading:this.setLoading}):"";case 2:return l().createElement(Pe.default,{getFormRef:this.getFormRef,changeStep:this.changeStep,itemStepInfo:j,addStep:this.addStep,setLoading:this.setLoading});case 3:return l().createElement(he,{getFormRef:this.getFormRef,changeStep:this.changeStep,itemStepInfo:j,addStep:this.addStep,setLoading:this.setLoading,getData:this.getData,isTarget:Y});case 4:return l().createElement(Ze.default,{getFormRef:this.getFormRef,itemStepInfo:j,changeStep:this.changeStep,setLoading:this.setLoading,projectData:I,isTarget:Y,isEnterEdit:oe});default:return null}},this.comSubmitPost=()=>{var r=this.state.initRef;r&&r.current&&r.current.submitForm()},this.reduceStep=()=>{var r=this.props,h=r.currentStep,S=r.maxStep;this.props.dispatch({type:"personnelDevelope/update",payload:{currentStep:h-1,maxStep:S>h?S:h-1}})},this.submitLearnInfo=()=>{var r=this.state.initRef;r.submit()},this.handleIssueCourse=()=>{var r=this.props,h=r.t,S=r.enterprise_id,j=r.postCourseId,Y=this.state.projectData;if(Y.length===0)return K.default.error(h("personnelDevelope.studyPlanVerify")),!1;var I=a.parse(b.m8.location.search),oe=I.postFromPage;this.setState({isLoading:!0});var we={id:j,project_list:[{project_id:Y[0].id,sort:0}],enterprise_id:S,status:1};(0,Te.cb)(we).then(A=>{A.data.code===0&&(K.default.success(h("common.releaseSuccess")),oe==="channel"?b.m8.push("/talentedDevelopment/postTrainPlan/postPassage"):b.m8.push("/talentedDevelopment/postTrainPlan/postCollocation"))}).finally(()=>{this.setState({isLoading:!1})})},this.handleGoBackEdit=()=>{this.reduceStep(),this.setState({isEnterEdit:!1})},this.renderButton=()=>{var r=a.parse(b.m8.location.search),h=r.view,S=this.props,j=S.currentStep,Y=S.planStatus,I=S.t,oe=this.state.isLoading,we="";return h||(j===3?we=l().createElement(U.Z,{loading:oe,type:"primary",onClick:this.handleIssueCourse},I("common.release")):j===4?we=l().createElement(l().Fragment,null,l().createElement(U.Z,{type:"primary",onClick:this.handleGoBackEdit},I("personnelDevelope.backEdit")),l().createElement(U.Z,{loading:oe,type:"primary",onClick:this.handleIssueCourse},I("common.release"))):Y?we=l().createElement(U.Z,{type:"primary",onClick:()=>{this.onNextStep("")},loading:oe},I("learning.learnUpgrade.saveAndNext"),l().createElement(R.Z,{placement:"top",title:I("personnelDevelope.submitButtonInfo")},l().createElement("span",null,l().createElement(o.Z,{iconClass:"iconf-help"})))):we=l().createElement(U.Z,{type:"primary",onClick:()=>{this.onNextStep("")},loading:oe},I("learning.learnUpgrade.saveAndNext"))),we},this.handleReView=()=>{var r=a.parse(b.m8.location.search),h=r.view;this.addStep(),this.props.dispatch({type:"personnelDevelope/update",payload:{projectData:this.state.projectData}});var S;h==="true"?S=!1:S=!0,this.setState({isEnterEdit:S})},this.renderFooter=()=>{var r=this.props,h=r.t,S=r.currentStep;return l().createElement("footer",{className:"cl-form-fixed-footer"},l().createElement("div",{className:"cl-form-fixed-footer__container_btn"},l().createElement(U.Z,{onClick:this.onGoBack},h("common.cancel")),S===3?l().createElement(U.Z,{type:"primary",onClick:this.handleReView},h("component.preview")):"",this.renderButton()))},this.state={stepNum:[{step:1,name:f.t("personnelDevelope.postInformation")},{step:2,name:f.t("personnelDevelope.qualificationName")},{step:3,name:f.t("personnelDevelope.learningPlan")}],initRef:"",isLoading:!1,isLoadOneStep:!1,itemStepInfo:"",isEnterEdit:!1,projectData:[],isTarget:!1}}componentDidMount(){var f=a.parse(b.m8.location.search),r=f.view;r&&this.setState({isEnterEdit:!0}),this.getPostCourseInfo()}render(){var f=this.state,r=f.stepNum,h=f.isEnterEdit,S=this.props,j=S.currentStep,Y=S.maxStep,I=S.planStatus,oe=S.t,we=(0,Oe.p)();return l().createElement("div",{className:"post-set-plan"},l().createElement(Fe.Z,{title:oe("documentTitle.configureLearningPlan")}),l().createElement("div",{className:"plan-content"},l().createElement("div",{className:"post-left-step"},l().createElement("h1",null,oe("personnelDevelope.learningPlan")),l().createElement("div",{className:"step-content"},r.map(A=>(I||A.step<=Y)&&!h?l().createElement("a",{type:"primary",className:j===A.step?"step-item-number step-item-number-active":"step-item-number",key:A.step,onClick:this.onSwitchRightPanel.bind(this,A)},l().createElement("span",{style:{color:j===A.step?"#fff":"#D4D4D4",backgroundColor:j===A.step?we:"transparent"}},A.step),l().createElement("strong",null,A.name)):l().createElement("a",{className:"step-item-number noClick",key:A.step},l().createElement("span",null,A.step),l().createElement("strong",null,A.name))))),l().createElement("div",{className:"post-right-form"},this.renderRightPanel())),this.renderFooter())}})||Qe)||Qe)||Qe),lt=(0,E.Z)()(ot)},40767:function(Le,ve,e){"use strict";e.d(ve,{g:function(){return X},c:function(){return R}});var X={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},R={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:20}}}},9849:function(Le,ve,e){"use strict";e.d(ve,{Ej:function(){return w},kL:function(){return K},T:function(){return fe},NU:function(){return l},FL:function(){return b},fn:function(){return a},bm:function(){return W},jY:function(){return E},Vs:function(){return F},li:function(){return y},Nl:function(){return u},YF:function(){return L},Q6:function(){return B},zW:function(){return o},Zv:function(){return se},Qg:function(){return ie},qc:function(){return z},Ve:function(){return ee},rS:function(){return ye},Rh:function(){return de}});var X=e(10237),R=e(37055),ne=e(38642),U={zaraFlag:(0,ne.UI)("ZARA_H5")};function w(Z,G){var ue=R.ZP.StudyProjectList.startStudy(Z);return X.WY.post({url:ue,data:G})}function K(Z){var G=R.ZP.Common.enroll(Z);return X.WY.post({url:G})}function fe(Z,G){var ue=Z.courseId,Ke=R.ZP.StudyProjectList.studyProject(ue);return X.WY.get({url:Ke,params:G})}function l(Z){var G=Z.id,ue=U.zaraFlag?R.m1.getAssessmentProjectInfo(G):R.m1.getProjectInfo(G);return X.WY.get({url:ue})}function b(Z){var G=Z.courseId,ue=R.ZP.EnterpriseCourse.addScanCount(G);return X.WY.post({url:ue})}function a(){var Z=R.ZP.StudyProjectList.getAccountInfo();return X.WY.get({url:Z})}function W(Z){var G=R.ZP.StudyProjectList.projectCertiUrl(Z);return X.WY.get({url:G})}function E(Z){var G=Z.courseId,ue=R.ZP.Courses.like(G);return X.WY.post({url:ue})}function F(Z){var G=R.ZP.EnterpriseCourse.addCommentAndScore();return X.qg.post({url:G,data:Z})}function y(Z){var G=R.ZP.EnterpriseCourse.getCourseComments();return X.WY.get({url:G,params:Z})}function u(Z){var G=R.ZP.EnterpriseCourse.addCommentAndScore();return X.qg.post({url:G,data:Z})}function L(Z){var G=R.ZP.EnterpriseCourse.deleteComment();return X.qg.post({url:G,data:Z})}function B(Z,G){var ue=R.ZP.StudyProjectList.projectStudyRecord(Z);return X.WY.get({url:ue,params:G})}function o(Z){var G=R.ZP.DingSpaceId.getSpaceId();return X.WY.get({url:G,params:Z})}function se(Z,G){var ue=R.ZP.PlatformCourse.learningUrl(Z);return X.WY.get({url:ue,params:G})}function ie(Z){var G=R.ZP.MyExamTask.examIntro({examId:Z});return X.WY.get({url:G})}function z(Z){var G=R.ZP.MyExamTask.examCheckStatus({examId:Z});return X.WY.get({url:G})}function le(Z,G){var ue=CONFIG.Common.getOperateLog(Z);return formDataRequest.get({url:ue,params:G})}function ee(Z,G){var ue=U.zaraFlag?R.ZP.StudyProjectList.changeCustomStatus(Z):R.ZP.StudyProjectList.changeStatus(Z);return X.WY.post({url:ue,data:G})}function ye(Z){var G=R.ZP.StudyProjectList.getProjectReward(Z);return X.WY.get({url:G})}function de(Z){var G=R.ZP.subsidyGz.subsidyCourseSetting(Z);return X.WY.get({url:G})}},44881:function(Le,ve,e){"use strict";e.d(ve,{P:function(){return X}});var X=function(ne){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"query";return ne.forEach(w=>{w.isLeaf=!w.has_children,w.value=w.id,w.pId=w.parent_id,w.label=w.name,w.key=w.id,w.title=w.name,U==="refer"&&(w.disabled=!w.allow_refer),U==="edit"&&(w.disabled=!w.allow_edit)}),ne}},86726:function(Le,ve,e){"use strict";e.d(ve,{V9:function(){return R},H3:function(){return ne},e:function(){return U},F:function(){return w}});var X=e(93485);function R(K){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=[];function b(a,W){var E=(0,X.Z)(W),F;try{for(E.s();!(F=E.n()).done;){var y=F.value;if(y.key===a){l=y.actions;break}y.children instanceof Array&&y.children.length&&b(K,y.children)}}catch(u){E.e(u)}finally{E.f()}}return b(K,fe),l}function ne(K){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=fe.find(b=>b.key===K)||{};return l.checked||!1}function U(K){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=!1;function b(a,W){var E=(0,X.Z)(W),F;try{for(E.s();!(F=E.n()).done;){var y=F.value;if(y.key===a){l=y.checked;break}y.children instanceof Array&&y.children.length&&b(K,y.children)}}catch(u){E.e(u)}finally{E.f()}}return b(K,fe),l}function w(K){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l="";function b(a,W){var E=(0,X.Z)(W),F;try{for(E.s();!(F=E.n()).done;){var y=F.value;if(y.key===a){l=y.id;break}y.children instanceof Array&&y.children.length&&b(K,y.children)}}catch(u){E.e(u)}finally{E.f()}}return b(K,fe),l}},69164:function(Le,ve,e){"use strict";var X=e(34792),R=e(48086);function ne(U){U&&U.length>0&&R.default.success(U)}ve.Z=ne},4412:function(Le){Le.exports="data:image/png;base64,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"}}]);
