(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[1863],{30389:function(ee,N,e){"use strict";e.d(N,{Z:function(){return L}});var K=e(62029),b=e(20228),F=e(11382),v=e(12924),c=e.n(v),C=e(91768),d=e(80991),h={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},x=e(62615),T=e(52670);class M extends c().Component{render(){var s=this.props,t=s.values,l=s.mode,i=s.onlyChooseDept,a=s.reserveUser,y=s.t,p=s.orgProps,E=s.rangeAuth,P=s.projectId,A=s.onCancel,U=s.onlyCreateUser;return c().createElement(d.l0,{className:"cl-form"},c().createElement(d.gN,(0,K.Z)({component:x.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:y("common.visibleRange"),defaultFieldList:t.employeeRange,validate:T.FI,mode:l,rangeAuth:E,onlyChooseDept:i,onlyCreateUser:U,orgProps:p,reserveUser:a,projectId:P,onCancel:A,qwTicketShow:!0},h)))}}var H=(0,C.Z)()(M),B=e(18329),z=e(34773);class W extends c().Component{constructor(){super(...arguments);this.initRefFormik=s=>{this.refFormik=s},this.handleBeforeCreate=()=>{var s=this.refFormik;s.submitForm(),s.runValidations().then(t=>{if(!Object.keys(t).length){var l=s.state.values.employeeRange,i=(0,z.b)(l.rangeList),a={qyWeChatVo:l.qyWeChatVo,id:this.props.actionId,isAll:l.rangeType,groupIds:l.rangeType===2?i.groupIds.join(","):"",departmentIds:l.rangeType===2?i.deptIds.join(","):"",userIds:l.rangeType===2?i.userIds.join(","):"",postIds:l.rangeType===2?i.postIds.join(","):"",clusterIds:l.rangeType===2?i.clusterIds.join(","):"",qy_we_chat_vo:l.qyWeChatVo};this.props.onCreate(a)}})},this.handleBeforeCancel=()=>{var s=this.props.onCancel;s()}}render(){var s=this.props,t=s.visible,l=s.initialParams,i=s.isLoading,a=s.tipInfo,y=s.mode,p=s.onlyChooseDept,E=s.reserveUser,P=E===void 0?[]:E,A=s.t,U=s.title,f=s.orgProps,R=s.rangeAuth,I=s.projectId,D=s.onCancel,r=s.onlyCreateUser,o=s.size;return i?c().createElement(F.Z,{size:"large"}):c().createElement(B.ZP,{wrapClassName:"cl-employee-selector-modal",visible:t,title:U||A("component.changeUser"),okText:A("common.ok"),cancelText:A("common.cancel"),size:o,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},i?c().createElement(F.Z,{size:"large"}):c().createElement(d.J9,{ref:this.initRefFormik,initialValues:l,render:u=>c().createElement(H,(0,K.Z)({},u,{mode:y,rangeAuth:R,orgProps:f,onlyChooseDept:p,onlyCreateUser:r,reserveUser:P,projectId:I,onCancel:D}))}),a&&c().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},a))}}W.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var L=(0,C.Z)()(W)},63848:function(ee,N,e){"use strict";var K=e(36877),b=e(32969),F=e(12924),v=e.n(F),c=e(91768),C=e(56130);class d extends v().PureComponent{constructor(){super(...arguments);this.onChange=(x,T)=>{this.props.onChange(x,T)}}render(){var x=this.props,T=x.value,M=x.classify,H=x.showLabel,B=x.className,z=x.t,W=x.style;return v().createElement("div",{className:"classify-cascader ".concat(B)},H?v().createElement("span",{className:"classify-cascader-label"},z("component.selectClassifyLabel")):null,v().createElement(b.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(B),options:M,onChange:this.onChange,placeholder:z("component.selectClassifyLabel"),value:T,style:W,loadData:this.props.loadData}))}}d.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},N.Z=(0,C.Z)((0,c.Z)()(d))},51697:function(ee,N,e){"use strict";var K=e(22385),b=e(31097),F=e(33565),v=e(12924),c=e.n(v),C=e(28216),d=e(84874),h=T=>{var M=T.title,H=T.visible,B=T.placement,z=B===void 0?"top":B,W=T.children,L=W===void 0?null:W,V=T.isNewUser,s=V===void 0?"":V,t=T.closeGuide,l=T.guideStatus,i=(0,v.useState)(!1),a=(0,F.Z)(i,2),y=a[0],p=a[1],E=U=>c().createElement("div",{className:"guide-tooltip-title"},U,c().createElement("span",{onClick:P},c().createElement(d.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,v.useEffect)(()=>{p(H)},[H]);var P=U=>{if(U.stopPropagation(),U.preventDefault(),p(!1),t){t();return}s==="true"&&T.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),A()},A=()=>{localStorage.setItem("guideStatus","false"),T.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return c().createElement(b.Z,{title:E(M),placement:z,visible:y&&l==="true"&&M},L)},x=T=>({guideStatus:T.advancedSetting.guideStatus,isNewUser:T.advancedSetting.isNewUser});N.Z=(0,C.$j)(x)(h)},59857:function(ee,N,e){"use strict";var K=e(22385),b=e(31097),F=e(12924),v=e.n(F);class c extends v().Component{render(){var d=this.props,h=d.name,x=d.full_name,T=d.maxWidth;return v().createElement(b.Z,{title:x},v().createElement("span",{className:"component-resource-category",style:{maxWidth:T||"160px"}},h))}}N.Z=c},54792:function(ee,N,e){"use strict";var K=e(62029),b=e(63185),F=e(9676),v=e(47673),c=e(4107),C=e(88986),d=e(12924),h=e.n(d),x=e(91768),T=e(59239),M=e(55446),H=e.n(M),B=e(18329),z=e(2396);class W extends h().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var s=this.props,t=s.form,l=s.id,i=s.onCreate,a=this.state.isChecked;t.validateFields((y,p)=>{if(!y){var E=(0,C.Z)({},p);a||(E.value=0);var P=(0,C.Z)((0,C.Z)({},E),{},{id:l});i(P),setTimeout(()=>{t.resetFields()},100)}})},this.handleBeforeCancel=()=>{var s=this.props,t=s.form,l=s.onCancel;l(),setTimeout(()=>{t.resetFields()},100)},this.checkScore=(s,t,l)=>{var i=this.props.t,a=this.state.isChecked;if(a&&(0,z.kh)(t)){l(i("component.setScoreRuleTip"));return}l()},this.handleCheckChange=s=>{this.setState({isChecked:s.target.checked})},this.renderItem=()=>{var s=this.props,t=s.form,l=s.initialValue,i=s.labelTxt,a=this.state.isChecked,y=t.getFieldDecorator,p={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},E=a?y("value",{initialValue:l,rules:[{validator:this.checkScore}]})(h().createElement(c.Z,{maxLength:30,placeholder:""})):null,P=h().createElement(h().Fragment,null,h().createElement(F.Z,{checked:a,onChange:this.handleCheckChange},i));return h().createElement(T.Z.Item,(0,K.Z)({label:P},p),E)}}componentDidUpdate(s){this.props.visible&&this.props.visible!==s.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var s=this.props,t=s.visible,l=s.title,i=s.prefixCls;return h().createElement(B.ZP,{size:"small",visible:t,title:l,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},h().createElement(T.Z,{className:"".concat(i),layout:"horizontal",colon:!1},this.renderItem(),h().createElement("div",{className:"".concat(i,"__children")},this.props.children)))}}W.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var L=T.Z.create({name:"ClSetupBoxInModal"})(W);N.Z=(0,x.Z)()(L)},11449:function(ee,N,e){"use strict";e.d(N,{Z:function(){return U}});var K=e(88986),b=e(33565),F=e(12924),v=e.n(F),c=e(3115),C=e(49111),d=e(19650),h=e(62029),x=e(57663),T=e(71577),M=e(91768),H=e(28216),B=e(37055),z=e(10237);function W(f){var R=B.ZP.getHelpContentByMenuKey(),I={key:f};return z.WY.get({url:R,params:I})}var L=e(74228),V=e.n(L),s=e(1164),t=e(76466),l=e(38642);class i extends v().Component{constructor(R){var I;super(R);I=this,this.getHelpContentByMenuKey=()=>{var D=this.props.defaultMenuKey;W(D).then(r=>{var o=r.data,u=o.help_url,O=o.video_url;this.setState({videoUrl:O,helpUrl:u})})},this.handleOpenHelpUrl=D=>{if((0,l.ve)()){window.open(D,"_blank");return}s.Z.targetTo({path:D,isExternalLink:!0})},this.handleOpenVideo=function(D){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:I.props.t("helpCenter.video");I.setState(o=>({resourcePlayInfo:(0,K.Z)((0,K.Z)({},o.resourcePlayInfo),{},{resourceInfo:{originUrl:D,source:{FD:D,OD:D},contentType:"mp4"}}),previewInfo:(0,K.Z)((0,K.Z)({},o.previewInfo),{},{title:r,visible:!0,onCancel:I.handleCancelPreview})}))},this.handleCancelPreview=()=>{var D=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,K.Z)((0,K.Z)({},D),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:R.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var R=this.state,I=R.helpUrl,D=R.resourcePlayInfo,r=R.previewInfo,o=R.videoUrl,u=this.props.t;return v().createElement("div",{className:V().helpCenter},o&&v().createElement(T.Z,{type:"link",className:V()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(o)},u("helpCenter.video")),I&&v().createElement(T.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(I)},u("helpCenter.tutorial")),v().createElement(t.Z,(0,h.Z)({},D,{previewInfo:r})))}}var a=f=>({defaultMenuKey:f.currentRoute.menuKey});i.defaultProps={defaultMenuKey:""};var y=(0,H.$j)(a)((0,M.Z)()(i));function p(f){var R=f.extra,I=localStorage.getItem("dingPersonnel"),D=sessionStorage.getItem("dingPersonnel");return v().createElement(d.Z,null,R,I!=="dingPersonnel"&&D!=="dingPersonnel"&&(0,l.eY)("COMMONEXTRA_HELP_CENTER")&&v().createElement(y,null))}var E=p,P=e(4408);function A(f){var R=(0,F.useState)({helpCenter:(0,l.eY)("HEAD_HELP_CENTER_BUT")}),I=(0,b.Z)(R,1),D=I[0],r=f.pageContainerParams,o=r===void 0?{}:r,u=f.noPadding,O=u===void 0?!1:u,$=f.isPersonal,Y=$===void 0?!1:$,G=f.pageTitle,k=f.className,X=k===void 0?"":k,n={extra:D.helpCenter?v().createElement(E,{extra:o.extra}):o.extra},g=(0,K.Z)((0,K.Z)({},o),n);return v().createElement("div",{className:"page-container-content ".concat(O?"page-container-noPadding":""," ").concat(Y?"page-container-content_personal_background":""," ").concat(X)},G&&v().createElement(P.Z,{title:G}),Y?v().createElement(c.Z,null,f.children):v().createElement(c.Z,g,f.children))}var U=A},72456:function(ee,N,e){"use strict";var K=e(49111),b=e(19650),F=e(57663),v=e(71577),c=e(12924),C=e.n(c),d=e(28216),h=e(91768),x=e(84391),T=e(90631),M=e(49101),H=e(76651),B=e(31945),z=e(1164),W=e(51697),L=s=>{var t=s.user,l=s.currentRoute,i=s.advancedSetting;return{currentPath:l.path,allAuthRoutes:l.allAuthRoutes,userLng:t.lng,themeColor:i.themeColor,qyShield:t.qyShield}};class V extends C().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var t=this.props.tabLink;H.m8.push(t)},this.renderActionBtn=()=>{var t=this.props,l=t.prefixCls,i=t.actionText,a=t.t,y=t.tabLink,p=t.showBtn,E=t.renderActionBtn,P=t.newPage,A=t.popOverProps,U=A===void 0?[]:A,f=t.renderGuide,R=f===void 0?!1:f,I=t.showDownloadBtn,D=I===void 0?!1:I,r=t.showImportBtn,o=r===void 0?!1:r,u=t.showCreateBtn,O=u===void 0?!0:u,$=t.rowReverse,Y=$===void 0?!1:$,G="".concat(l,"__action");if(!p&&E&&typeof E=="function")return C().createElement("div",{className:G},E());if(!p||!i)return null;var k=U.length?U[0].contentText:"";return C().createElement("div",{className:"".concat(G," ").concat(Y&&"row-reverse")},C().createElement(b.Z,{size:16},D&&C().createElement(v.Z,{icon:C().createElement(x.Z,null),onClick:this.handleDownload},a("common.exportData")),o&&C().createElement(v.Z,{icon:C().createElement(T.Z,null),onClick:this.handleImport},a("exam.importTemplate")),O&&P&&C().createElement(z.Z,{to:y},C().createElement(W.Z,{visible:k&&R,placement:"topLeft",title:k},C().createElement(v.Z,{type:"primary",id:"create-project-button",icon:C().createElement(M.Z,null)},i))),O&&!P&&C().createElement(v.Z,{type:"primary",id:"create-project-button",icon:C().createElement(M.Z,null),onClick:this.handleCreate},i)))},this.renderQueryRow=()=>{var t=this.props,l=t.queryRowParams,i=t.queryRowList,a=t.queryRowSelectedCourseIds,y=t.queryRowSelectedProjectIds,p=t.queryRowOnForceRender,E=t.queryRowOnClassifyChange,P=t.queryRowOnTypeChange,A=t.queryRowOnCourseTypeChange,U=t.queryRowAllowActions,f=t.showNum,R=f===void 0?1:f;return C().createElement(B.Z,{params:l,list:i,selectedCourseIds:a,selectedProjectIds:y,onForceRender:p,onClassifyChange:E,onTypeChange:P,onCourseTypeChange:A,allowActions:U,showNum:R,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var t=this.props,l=t.t,i=t.extraBtnSelectedRowKeys,a=t.extraBtnHandleMultiVisibleRange;return C().createElement(v.Z,{disabled:i.length===0,onClick:a},l("courseManage.setTheVisibility"))}}render(){var t=this.props,l=t.prefixCls,i=t.wrapCls,a=t.showRenderQueryRow,y=t.showRendeExtraBtn;return C().createElement(C().Fragment,null,C().createElement("div",{className:"render_other"},C().createElement("header",{className:"".concat(l," ").concat(i)},C().createElement("section",{className:"".concat(l,"__radiocol")},this.renderActionBtn(),a&&this.renderQueryRow(),y&&this.rendeExtraBtn()))))}}V.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},N.Z=(0,d.$j)(L)((0,h.Z)()(V))},62117:function(ee,N,e){"use strict";var K=e(63185),b=e(9676),F=e(43358),v=e(34041),c=e(88983),C=e(47933),d=e(12924),h=e.n(d),x=e(28216),T=e(91768),M=e(48479),H=e(2971),B=e(45601),z=e(7249),W=V=>{var s=V.user,t=V.currentRoute,l=V.advancedSetting;return{currentPath:t.path,allAuthRoutes:t.allAuthRoutes,userLng:s.lng,themeColor:l.themeColor,appType:s.appType,appId:s.appId}};class L extends h().Component{constructor(s){super(s);this.setPlaceholder=()=>{var t=this.props,l=t.currentPath,i=t.allAuthRoutes,a=t.userLng,y=this.state.language,p=i[l],E=this.props,P=E.appType,A=E.appId,U=localStorage.getItem("qyWechatBook"),f=P==="wx_app"&&U==="true"&&A==="9005";if(!!p){var R=y[a].searchInputPlaceholder,I="";p.menuKey==="studyTemplate"||p.menuKey==="examTemplate"?I=R.template:p.menuKey==="employee"||p.menuKey==="obligatory"||p.menuKey==="elective"||p.menuKey==="plan"||p.menuKey==="evaluation"||p.menuKey==="myEvaluationPlan"?I=R.task:p.menuKey==="studyProject"?I=f?R.byProjectName:R.byProjectNameOrCreator:p.menuKey==="management"?I=f?R.byTaskName:R.byTaskNameOrCreator:I=R[p.menuKey],this.setState({currentPlaceholder:I})}},this.handleRadiosChange=t=>{this.props.onRadiosChange(t.target.value)},this.handleSelectChange=t=>{this.props.onSelectChange(t)},this.handleSearch=(t,l)=>{this.props.onSearch(t,l)},this.handleChange=t=>{this.props.onCheckboxChange(t.target.checked)},this.renderRadios=()=>{var t=this.props,l=t.prefixCls,i=t.radioList,a=t.defaultRadioValue,y=t.radioValue;if(!i.length)return null;var p=a||i[0].value,E="".concat(l,"__radios");return h().createElement("div",{className:E},typeof y!="undefined"?h().createElement(C.ZP.Group,{defaultValue:p,value:y,onChange:this.handleRadiosChange},i.map(P=>h().createElement(C.ZP.Button,{key:P.value,value:P.value},P.name))):h().createElement(C.ZP.Group,{defaultValue:p,onChange:this.handleRadiosChange},i.map(P=>h().createElement(C.ZP.Button,{key:P.value,value:P.value},P.name))))},this.renderSelect=()=>{var t=this.props,l=t.prefixCls,i=t.selectList,a=t.defaultSelectValue;if(!i.length)return null;var y=a||i[0].value,p="".concat(l,"__select");return h().createElement("div",{className:p},h().createElement(v.Z,{defaultValue:y,onChange:this.handleSelectChange,style:{minWidth:100}},i.map(E=>h().createElement(v.Z.Option,{key:E.value,value:E.value},E.name))))},this.renderOther=()=>{var t=this.props,l=t.prefixCls,i=t.renderOther,a=t.showOther,y="".concat(l,"__other");if(a&&i&&typeof i=="function")return h().createElement("div",{className:y},i())},this.renderCheckbox=()=>{var t=this.props,l=t.prefixCls,i=t.t,a=t.label,y=t.showCheckbox,p=t.renderActionSelect,E="".concat(l,"__checkbox");return!y&&p&&typeof p=="function"?h().createElement("div",{className:E},p()):y?h().createElement("div",{className:E},h().createElement(b.Z,{onChange:this.handleChange},a||i("common.myCreated"))):null},this.renderSearch=()=>{var t=this.props,l=t.prefixCls,i=t.showSearch,a=t.inputPlaceholder,y=t.maxLength,p=y===void 0?400:y,E=t.value,P="".concat(l,"__search");if(!i)return null;var A=this.state.currentPlaceholder;return a?h().createElement("div",{className:P},h().createElement(M.Z,{onSearch:this.handleSearch,placeholder:a,width:272,maxLength:p})):h().createElement("div",{className:P},h().createElement(M.Z,{onSearch:this.handleSearch,placeholder:A,width:272,maxLength:p,value:E}))},this.renderSearchOther=()=>{var t=this.props.renderSearchOther;return t?t():null},this.state={language:{zh_cn:B.Z,en_us:H.Z,zh_hk:z.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(s){s.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var s=this.props,t=s.prefixCls,l=s.wrapCls,i=s.showRenderRadios,a=i===void 0?!0:i,y=s.showRenderSelect;return h().createElement(h().Fragment,null,h().createElement("div",{className:"render_other"},this.renderOther(),h().createElement("header",{className:"".concat(t," ").concat(l)},h().createElement("section",{className:"".concat(t,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),a&&this.renderRadios(),y&&this.renderSelect(),this.renderSearch()))))}}L.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},N.Z=(0,x.$j)(W)((0,T.Z)()(L))},56187:function(ee,N,e){"use strict";e.r(N),e.d(N,{default:function(){return I}});var K=e(71194),b=e(57016),F=e(34792),v=e(48086),c=e(88986),C=e(12924),d=e.n(C),h=e(91768),x=e(28216),T=e(71759),M=e(37055),H=e(11449),B=e(10237),z=e(63848),W=e(72456),L=e(62117),V=e(62350),s=e(75443),t=e(77576),l=e(59314),i=e(36202),a=e(1164),y=e(6793),p=e(59857),E=(0,y.me)();class P extends d().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("exam.releaseType"),dataIndex:"type",key:"type",render:(r,o)=>{var u=o.type;return u==="once"?this.props.t("exam.once"):this.props.t("exam.loop")},width:90},{title:this.props.t("exam.examTaskTemplate"),dataIndex:"title",key:"title",render:(r,o)=>d().createElement(a.Z,{to:"/training/examination/examTemplate/preview?id=".concat(o.id)},d().createElement("span",{className:"exam-table-title cl-hover"},o.title))},{title:this.props.t("learning.learningProjectAddCategoryed"),dataIndex:"classify_name",key:"classify_name",width:90,render:(r,o)=>E==="en_us"&&r==="\u672A\u5F52\u7C7B"?"Uncategorized":d().createElement(p.Z,{name:o.classify_name,full_name:o.classify_path_name})},{title:this.props.t("exam.remindTaskTimes"),dataIndex:"remain_times",key:"remain_times",width:170},{title:this.props.t("common.status"),dataIndex:"status",key:"status",width:90,render:(r,o)=>d().createElement(l.Z,{checkedChildren:this.props.t("common.activatedStr"),unCheckedChildren:this.props.t("common.deactivatedStr"),checked:o.status==="on",onChange:u=>this.handleChange({isChecked:u,record:o})})},{title:this.props.t("common.updater"),dataIndex:"update_user",key:"update_user",width:106,render:r=>E==="en_us"&&r==="\u516C\u53F8"?"Company":r},{title:this.props.t("common.updateTimed"),dataIndex:"update_time",key:"update_time",width:164,render:(r,o)=>{var u=o.update_time;return(0,y.p6)(u)}},{title:this.props.t("common.operate"),width:120,key:"operate",render:r=>this.renderActions({record:r})}],this.handleTableChange=r=>{this.props.onTableChange(r)},this.handleChange=r=>{var o=r.isChecked,u=r.record;this.props.onRowChange({isChecked:o,record:u})},this.handleDelete=r=>{var o=r.record;this.props.onRowDelete({record:o})},this.renderActions=r=>{var o=r.record;return d().createElement("div",{className:"cl-table__cell-action"},d().createElement(a.Z,{to:"/training/examination/examTemplate/detail?id=".concat(o.id)},d().createElement("span",{className:"cl-pointer"},this.props.t("common.edit"))),d().createElement("span",{className:"cl-pointer-divide"}),d().createElement(s.Z,{title:this.props.t("study.deleteStudyTemplateTip"),placement:"topLeft",onConfirm:()=>this.handleDelete({record:o})},d().createElement("span",{className:"cl-pointer"},this.props.t("common.delete"))))}}render(){var r=this.props,o=r.prefixCls,u=r.list,O=u===void 0?[]:u,$=r.loading,Y=r.paginationParams,G=Y===void 0?{}:Y,k=r.headerTitle,X=r.toolBarRender,n=(0,c.Z)((0,c.Z)({},M.XE.INITIAL_PAGINATION),G);return d().createElement("section",{className:o},d().createElement(i.f,{columns:this.columns,rowKey:"id",dataSource:O,pagination:n,loading:$,onChange:this.handleTableChange,headerTitle:k,toolBarRender:X,tableUUID:"6b0b824e-6641-46cc-81ab-f46212a27a6d"}))}}P.defaultProps={prefixCls:"plan-timing-template__content__table"};var A=(0,h.Z)()(P),U=D=>({userInfo:D.user}),f={getTableList:M.ZP.TimingTemplateList.getTableList,deleteTemplate:M.ZP.TimingTemplateList.deleteTemplate,updateTemplateStatus:M.ZP.TimingTemplateList.updateTemplateStatus};class R extends d().Component{constructor(){super(...arguments);this.state={params:{keyword:"",page_number:1,page_size:20,status:"all",only_see_me:!1},radioList:[{name:this.props.t("common.all"),value:"all"},{name:this.props.t("common.activated"),value:"on"},{name:this.props.t("common.deactivated"),value:"off"}],tableLoading:!0,tableList:[],tableTotal:0,switchParams:{visible:!1,record:{}},classify:[]},this.initTableList=()=>{var r=this.state,o=r.params,u=r.classify;this.setState({tableLoading:!0}),B.WY.get({url:f.getTableList(),params:(0,c.Z)({classify_id:u.length?u[u.length-1]:""},o)}).then(O=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:O.data.list,tableTotal:O.data.total})},300)})},this.handleQueryRowRadiosChange=r=>{this.resetPagination().then(()=>{this.setState(o=>({params:(0,c.Z)((0,c.Z)({},o.params),{},{status:r})}),()=>{this.initTableList()})})},this.handleQueryRowSearch=r=>{this.resetPagination().then(()=>{this.setState(o=>({params:(0,c.Z)((0,c.Z)({},o.params),{},{keyword:r})}),()=>{this.initTableList()})})},this.handleChangePagination=r=>{var o=r.current,u=r.pageSize;this.setState(O=>({params:(0,c.Z)((0,c.Z)({},O.params),{},{page_number:o,page_size:u})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(r=>{this.setState(o=>({params:(0,c.Z)((0,c.Z)({},o.params),{},{page_number:1,page_size:20})}),()=>{r()})}),this.handleRowDelete=r=>{var o=r.record;B.qg.post({url:f.deleteTemplate({id:o.id})}).then(()=>{v.default.success(this.props.t("personal.removeSuccess")),this.initTableList()})},this.handleRowChange=r=>{var o=r.isChecked,u=r.record;if(o)this.handleRowChangeToOpen({record:u});else{var O=this,$=this.props.t;b.Z.confirm({title:$("common.tip"),content:$("examing.closeTemplateTip"),onOk(){B.WY.post({url:f.updateTemplateStatus({id:u.id}),data:{type:"off"}}).then(()=>{v.default.success($("study.updateSuccess")),O.initTableList()})}})}},this.handleRowChangeToOpen=r=>{var o=r.record;this.setState({switchParams:{visible:!0,record:o}})},this.handleChangModalCancel=()=>{this.setState({switchParams:{visible:!1,record:{}}})},this.handleChangModalOk=()=>{this.setState({switchParams:{visible:!1,record:{}}},()=>{this.initTableList()})},this.handleChangeOnlySeeMe=r=>{var o=this.state.params,u=r;this.setState({params:(0,c.Z)((0,c.Z)({},o),{},{page_number:1,only_see_me:u})},()=>{this.initTableList()})},this.handleClassifyChange=r=>{var o=this.state.params;this.setState({params:(0,c.Z)((0,c.Z)({},o),{},{page_number:1}),classify:r},()=>{this.initTableList()})},this.renderLeftRow=()=>d().createElement(W.Z,{actionText:this.props.t("exam.newTemplate"),tabLink:"/training/examination/examTemplate/detail"}),this.renderRightRow=()=>{var r=this.state.radioList;return d().createElement(L.Z,{onCheckboxChange:this.handleChangeOnlySeeMe,radioList:r,onRadiosChange:this.handleQueryRowRadiosChange,onSearch:this.handleQueryRowSearch,showCheckbox:!0})}}componentDidMount(){this.initTableList()}render(){var r=this.props,o=r.prefixCls,u=r.t,O=this.state,$=O.tableTotal,Y=O.tableList,G=O.tableLoading,k=O.params,X=O.switchParams,n=O.classify,g={total:$,current:k.page_number,pageSize:k.page_size};return d().createElement(H.Z,{pageContainerParams:{header:{title:u("leftMenuLists.examScheduleTemplate")}},pageTitle:u("exam.examTemplateTaskTitle")},d().createElement("div",{className:"plan-timing-template sticky-table"},d().createElement("div",{className:"plan-timing-template-select-padding"},d().createElement(z.Z,{onChange:this.handleClassifyChange,value:n,unclassified:!0,showLabel:!1,className:"cl-search-normal-width"})),d().createElement("div",{className:"".concat(o,"__content"),ref:m=>{this.tableRef=m}},d().createElement(A,{loading:G,paginationParams:g,list:Y,onTableChange:this.handleChangePagination,onRowDelete:this.handleRowDelete,onRowChange:this.handleRowChange,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow})),d().createElement(T.Z,{visible:X.visible,record:X.record,onCancel:this.handleChangModalCancel,onOk:this.handleChangModalOk,scopeType:"exam"})))}}R.defaultProps={prefixCls:"plan-timing-template"};var I=(0,x.$j)(U)((0,h.Z)()(R))},31945:function(ee,N,e){"use strict";e.d(N,{Z:function(){return k}});var K=e(88983),b=e(47933),F=e(20228),v=e(11382),c=e(62029),C=e(30887),d=e(99210),h=e(59250),x=e(13013),T=e(57663),M=e(71577),H=e(63185),B=e(9676),z=e(71194),W=e(57016),L=e(88986),V=e(34792),s=e(48086),t=e(43358),l=e(34041),i=e(12924),a=e.n(i),y=e(28216),p=e(91768),E=e(57254),P=e(18329);class A extends a().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var n=this.props,g=n.visible,m=n.courseList,Z=n.t;return a().createElement(P.ZP,{visible:g,title:Z("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},a().createElement("div",{className:"referenceWithOtherCourses"},a().createElement("div",{className:"referenceWithOtherCourses__tip"},Z("course.deleteCourseTip")),m.map((_,S)=>a().createElement("div",{className:"referenceWithOtherCourses__item",key:S},m.length>1?"".concat(S+1,"\u3001"):null," ",_))))}}var U=(0,p.Z)()(A),f=e(10237),R=e(63848),I=e(58546),D=e(30389),r=e(54792),o=e(86726),u=e(37055),O=l.Z.Option,$={setClassify:u.ZP.CourseManageList.setClassify,setScore:u.ZP.CourseManageList.setScore,setBatchEmployee:u.ZP.CourseManageList.setBatchEmployee,deleteCourse:u.ZP.CourseManageList.deleteCourse,exportCourseView:u.ZP.CourseManageList.exportCourseView,syncCourse:u.ZP.CourseManageList.syncCourse},Y=X=>({qyShield:X.user.qyShield});class G extends a().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=n=>{this.props.onClassifyChange(n)},this.handleChangeType=n=>{this.props.onTypeChange(n)},this.handleChangeCourseType=n=>{this.props.onCourseTypeChange(n)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=n=>{var g=n.node,m=this.props,Z=m.selectedCourseIds,_=m.selectedProjectIds,S=m.onForceRender,w=m.t,j=g.id;j&&f.qg.post({url:$.setClassify(),data:{course_ids:Z.join(","),project_ids:_.join(","),classify_id:j}}).then(()=>{s.default.success(w("course.setCourseClassifySuccess")),S()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(n=>({scoreProps:(0,L.Z)((0,L.Z)({},n.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(n=>({scoreProps:(0,L.Z)((0,L.Z)({},n.scoreProps),{},{visible:!1})}))},this.handleScoreOk=n=>{var g=n.value;if(g===0){this.handleScoreCancel();return}var m=this.props,Z=m.selectedCourseIds,_=m.selectedProjectIds,S=m.onForceRender,w=m.t;f.qg.post({url:$.setScore(),data:{course_ids:Z.join(","),project_ids:_.join(","),credit:g}}).then(()=>{s.default.success(w("course.setCourseScoreSuccess")),S()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(n=>({employeeProps:(0,L.Z)((0,L.Z)({},n.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=n=>{var g=this.props,m=g.selectedCourseIds,Z=g.selectedProjectIds,_=g.onForceRender,S=g.t,w=n.isAll,j=n.departmentIds,J=n.groupIds,Q=n.postIds,q=n.userIds,te=n.qy_we_chat_vo;f.WY.post({url:$.setBatchEmployee(),data:{course_ids:m.join(","),project_ids:Z.join(","),department_ids:j,group_ids:J,is_all:w,post_ids:Q,user_ids:q,qy_we_chat_vo:te}}).then(()=>{s.default.success(S("personal.batchSetRangeSuccess")),_()}),this.handleEmployeeCancel()},this.showReferenceCourseList=n=>{this.setState(g=>({showReferenceCourseListProps:(0,L.Z)((0,L.Z)({},g.showReferenceCourseListProps),{},{visible:!g.showReferenceCourseListProps.visible,courseList:n||[]})}))},this.actionDelete=()=>{var n=this.props,g=n.selectedCourseIds,m=n.selectedProjectIds,Z=n.list,_=n.onForceRender,S=n.t,w=0,j=0,J=[];if(Z.forEach(Q=>{g.includes(Q.course_id)&&(Q.reference_plan_count>0&&(j+=1),Q.reference_plan_count>0&&J.push(Q.title),Q.can_delete==="true"&&(w+=1))}),j>0)this.showReferenceCourseList(J);else if(w!==g.length)s.default.warning(S("personal.deletePlatformCourseTip"));else{if(m.length>0){s.default.warning(S("personal.deleteProjectCourseTip"));return}W.Z.confirm({title:S("common.tip"),content:S("common.confirmDeleteTitle"),onOk(){f.qg.post({url:$.deleteCourse(),data:{enterpriseId:u.ZP.enterpriseId,ids:g.join(","),project_ids:m.join(",")}}).then(Q=>{var q=Q.data,te=q.code,se=q.msg;s.default["".concat(te===0?"success":"warning")](se),te===0&&_()})}})}},this.actionSyncSetting=()=>{this.setState(n=>({asyncProps:(0,L.Z)((0,L.Z)({},n.asyncProps),{},{visible:!0})}))},this.onAsyncChange=n=>{this.setState(g=>({asyncProps:(0,L.Z)((0,L.Z)({},g.asyncProps),{},{value:n.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var n=this.props,g=n.selectedCourseIds,m=n.selectedProjectIds,Z=n.onForceRender,_=n.t,S=this.state.asyncProps;f.qg.post({url:$.syncCourse(),data:{course_ids:g.join(","),project_ids:m.join(","),syncProgress:S.value}}).then(w=>{var j=w.data,J=j.code,Q=j.msg;J===0?(s.default.success(_("setting.setUpSucceed")),Z()):s.default.warning(Q)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var n=this.props,g=n.selectedCourseIds,m=n.selectedProjectIds,Z=n.onForceRender,_=n.t;if(g.concat(m).length>20){s.default.warning(_("courseManage.exportMoreTip"));return}var S=$.exportCourseView(),w={course_Ids:g.join(","),project_Ids:m.join(",")};f.WY.get({url:S,params:w}).then(j=>{j.data.code===200&&s.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),Z(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var n=u.ZP.downLoadCenter.getDownLoadingCount();f.WY.get({url:n,params:{}}).then(g=>{sessionStorage.setItem("downloadingCount",g.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:g.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=n=>{this.props.onCheckboxChange(n.target.checked)},this.handleSharingQueryRowCheckboxChange=n=>{this.props.onSharingCheckboxChange(n.target.checked)},this.renderCondition=()=>{var n=this.props,g=n.prefixCls,m=n.params,Z=n.qyShield,_=n.t,S=m.classify_id?m.classify_id.split(","):[];return a().createElement("div",{className:"".concat(g,"__condition")},this.props.extraDom&&this.props.extraDom(),a().createElement(R.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:S,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),a().createElement(l.Z,{value:m.type,className:"cl-search-normal-width",onChange:this.handleChangeType},a().createElement(O,{value:""},this.props.t("courseManage.allOrigin")),a().createElement(O,{value:"original"},this.props.t("courseManage.originalCourse")),a().createElement(O,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),a().createElement(O,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:a().createElement(l.Z,{value:m.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},a().createElement(O,{value:"all"},this.props.t("courseManage.allType")),a().createElement(O,{value:"course"},this.props.t("common.courseLabel")),a().createElement(O,{value:"microCourse"},this.props.t("common.microCourse")),a().createElement(O,{value:"project"},this.props.t("leftMenuLists.studyProject"))),a().createElement(B.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},_("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&Z==="false"?a().createElement(B.Z,{onChange:this.handleSharingQueryRowCheckboxChange},_("common.sharing")):null)},this.renderActions=()=>{var n=this.props,g=n.prefixCls,m=n.selectedCourseIds,Z=n.selectedProjectIds,_=n.showNum,S=_===void 0?1:_,w=this.props.allowActions,j=(0,o.H3)("delete",w),J=(0,o.H3)("adjustment_classification",w),Q=(0,o.H3)("set_visible",w),q=(0,o.H3)("export",w),te=(0,o.H3)("set_score",w),se=(0,o.H3)("progressSync",w),le=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:J},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:q},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:te},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:Q},{name:this.props.t("common.delete"),type:"actionDelete",isShow:j},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:se}],ne=le.filter(ae=>ae.isShow),oe=[],re=[];if(ne.length)S?(oe=[...ne.slice(0,S)],re=[...ne.slice(S)]):re=[...ne];else return null;return a().createElement("div",{className:"".concat(g,"__action")},oe.map(ae=>a().createElement(M.Z,{style:{marginRight:"8px"},key:ae.type,disabled:!(m.length+Z.length),onClick:this[ae.type]},ae.name)),re.length?a().createElement(x.Z,{disabled:!(m.length+Z.length),overlay:this.renderMoreButton({buttons:re})},a().createElement(M.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",a().createElement(E.Z,null))):"")}}renderMoreButton(n){var g=n.buttons,m=this.props,Z=m.selectedCourseIds,_=m.selectedProjectIds;return a().createElement(d.Z,{onClick:S=>{var w=S.key;this[w]()}},g.map(S=>S.isShow?a().createElement(d.Z.Item,{key:S.type,disabled:!(Z.length+_.length)},a().createElement("span",{className:"cl-pointer"},S.name)):null))}render(){var n=this.props,g=n.prefixCls,m=n.t,Z=n.showRenderCondition,_=Z===void 0?!0:Z,S=n.showRenderActions,w=S===void 0?!0:S,j=this.state,J=j.classifyProps,Q=j.scoreProps,q=j.employeeProps,te=j.showReferenceCourseListProps,se=j.asyncProps;return a().createElement("div",{className:g},_&&this.renderCondition(),w&&this.renderActions(),a().createElement(I.Z,(0,c.Z)({},J,{title:m("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),a().createElement(r.Z,(0,c.Z)({},Q,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),q.visible&&a().createElement(D.Z,(0,c.Z)({},q,{title:m("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:m("component.chooseVisibleScope")},isLoading:!q.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),se.visible&&a().createElement(P.ZP,{wrapClassName:"cl-async-selector-modal",visible:se.visible,title:m("common.scheduleSyncSetting"),okText:m("common.ok"),cancelText:m("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},se.visible?a().createElement("div",{className:"".concat(g,"__async")},a().createElement("p",null," ",m("common.scheduleSyncSettingTip")),a().createElement(b.ZP.Group,{onChange:this.onAsyncChange,value:se.value},a().createElement(b.ZP,{value:0},m("common.outSync")),a().createElement(b.ZP,{value:1},m("common.synchronization")))):a().createElement(v.Z,{size:"large"})),a().createElement(U,(0,c.Z)({},te,{showReferenceCourseList:this.showReferenceCourseList})))}}G.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var k=(0,p.Z)()((0,y.$j)(Y)(G))}}]);
