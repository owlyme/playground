(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[5255],{30389:function(de,k,e){"use strict";e.d(k,{Z:function(){return x}});var Z=e(62029),T=e(20228),E=e(11382),C=e(12924),g=e.n(C),f=e(91768),b=e(80991),p={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},w=e(62615),c=e(52670);class A extends g().Component{render(){var a=this.props,t=a.values,l=a.mode,d=a.onlyChooseDept,n=a.reserveUser,P=a.t,u=a.orgProps,R=a.rangeAuth,M=a.projectId,_=a.onCancel,$=a.onlyCreateUser;return g().createElement(b.l0,{className:"cl-form"},g().createElement(b.gN,(0,Z.Z)({component:w.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:P("common.visibleRange"),defaultFieldList:t.employeeRange,validate:c.FI,mode:l,rangeAuth:R,onlyChooseDept:d,onlyCreateUser:$,orgProps:u,reserveUser:n,projectId:M,onCancel:_,qwTicketShow:!0},p)))}}var F=(0,f.Z)()(A),W=e(18329),r=e(34773);class N extends g().Component{constructor(){super(...arguments);this.initRefFormik=a=>{this.refFormik=a},this.handleBeforeCreate=()=>{var a=this.refFormik;a.submitForm(),a.runValidations().then(t=>{if(!Object.keys(t).length){var l=a.state.values.employeeRange,d=(0,r.b)(l.rangeList),n={qyWeChatVo:l.qyWeChatVo,id:this.props.actionId,isAll:l.rangeType,groupIds:l.rangeType===2?d.groupIds.join(","):"",departmentIds:l.rangeType===2?d.deptIds.join(","):"",userIds:l.rangeType===2?d.userIds.join(","):"",postIds:l.rangeType===2?d.postIds.join(","):"",clusterIds:l.rangeType===2?d.clusterIds.join(","):"",qy_we_chat_vo:l.qyWeChatVo};this.props.onCreate(n)}})},this.handleBeforeCancel=()=>{var a=this.props.onCancel;a()}}render(){var a=this.props,t=a.visible,l=a.initialParams,d=a.isLoading,n=a.tipInfo,P=a.mode,u=a.onlyChooseDept,R=a.reserveUser,M=R===void 0?[]:R,_=a.t,$=a.title,I=a.orgProps,D=a.rangeAuth,S=a.projectId,V=a.onCancel,Y=a.onlyCreateUser,B=a.size;return d?g().createElement(E.Z,{size:"large"}):g().createElement(W.ZP,{wrapClassName:"cl-employee-selector-modal",visible:t,title:$||_("component.changeUser"),okText:_("common.ok"),cancelText:_("common.cancel"),size:B,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},d?g().createElement(E.Z,{size:"large"}):g().createElement(b.J9,{ref:this.initRefFormik,initialValues:l,render:H=>g().createElement(F,(0,Z.Z)({},H,{mode:P,rangeAuth:D,orgProps:I,onlyChooseDept:u,onlyCreateUser:Y,reserveUser:M,projectId:S,onCancel:V}))}),n&&g().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},n))}}N.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var x=(0,f.Z)()(N)},63848:function(de,k,e){"use strict";var Z=e(36877),T=e(32969),E=e(12924),C=e.n(E),g=e(91768),f=e(56130);class b extends C().PureComponent{constructor(){super(...arguments);this.onChange=(w,c)=>{this.props.onChange(w,c)}}render(){var w=this.props,c=w.value,A=w.classify,F=w.showLabel,W=w.className,r=w.t,N=w.style;return C().createElement("div",{className:"classify-cascader ".concat(W)},F?C().createElement("span",{className:"classify-cascader-label"},r("component.selectClassifyLabel")):null,C().createElement(T.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(W),options:A,onChange:this.onChange,placeholder:r("component.selectClassifyLabel"),value:c,style:N,loadData:this.props.loadData}))}}b.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},k.Z=(0,f.Z)((0,g.Z)()(b))},51697:function(de,k,e){"use strict";var Z=e(22385),T=e(31097),E=e(33565),C=e(12924),g=e.n(C),f=e(28216),b=e(84874),p=c=>{var A=c.title,F=c.visible,W=c.placement,r=W===void 0?"top":W,N=c.children,x=N===void 0?null:N,h=c.isNewUser,a=h===void 0?"":h,t=c.closeGuide,l=c.guideStatus,d=(0,C.useState)(!1),n=(0,E.Z)(d,2),P=n[0],u=n[1],R=$=>g().createElement("div",{className:"guide-tooltip-title"},$,g().createElement("span",{onClick:M},g().createElement(b.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,C.useEffect)(()=>{u(F)},[F]);var M=$=>{if($.stopPropagation(),$.preventDefault(),u(!1),t){t();return}a==="true"&&c.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),_()},_=()=>{localStorage.setItem("guideStatus","false"),c.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return g().createElement(T.Z,{title:R(A),placement:r,visible:P&&l==="true"&&A},x)},w=c=>({guideStatus:c.advancedSetting.guideStatus,isNewUser:c.advancedSetting.isNewUser});k.Z=(0,f.$j)(w)(p)},54792:function(de,k,e){"use strict";var Z=e(62029),T=e(63185),E=e(9676),C=e(47673),g=e(4107),f=e(88986),b=e(12924),p=e.n(b),w=e(91768),c=e(59239),A=e(55446),F=e.n(A),W=e(18329),r=e(2396);class N extends p().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var a=this.props,t=a.form,l=a.id,d=a.onCreate,n=this.state.isChecked;t.validateFields((P,u)=>{if(!P){var R=(0,f.Z)({},u);n||(R.value=0);var M=(0,f.Z)((0,f.Z)({},R),{},{id:l});d(M),setTimeout(()=>{t.resetFields()},100)}})},this.handleBeforeCancel=()=>{var a=this.props,t=a.form,l=a.onCancel;l(),setTimeout(()=>{t.resetFields()},100)},this.checkScore=(a,t,l)=>{var d=this.props.t,n=this.state.isChecked;if(n&&(0,r.kh)(t)){l(d("component.setScoreRuleTip"));return}l()},this.handleCheckChange=a=>{this.setState({isChecked:a.target.checked})},this.renderItem=()=>{var a=this.props,t=a.form,l=a.initialValue,d=a.labelTxt,n=this.state.isChecked,P=t.getFieldDecorator,u={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},R=n?P("value",{initialValue:l,rules:[{validator:this.checkScore}]})(p().createElement(g.Z,{maxLength:30,placeholder:""})):null,M=p().createElement(p().Fragment,null,p().createElement(E.Z,{checked:n,onChange:this.handleCheckChange},d));return p().createElement(c.Z.Item,(0,Z.Z)({label:M},u),R)}}componentDidUpdate(a){this.props.visible&&this.props.visible!==a.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var a=this.props,t=a.visible,l=a.title,d=a.prefixCls;return p().createElement(W.ZP,{size:"small",visible:t,title:l,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},p().createElement(c.Z,{className:"".concat(d),layout:"horizontal",colon:!1},this.renderItem(),p().createElement("div",{className:"".concat(d,"__children")},this.props.children)))}}N.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var x=c.Z.create({name:"ClSetupBoxInModal"})(N);k.Z=(0,w.Z)()(x)},84009:function(de,k,e){"use strict";var Z=e(62029),T=e(12924),E=e.n(T),C=e(11092),g=e.n(C),f=e(6793),b=()=>p=>class extends E().Component{constructor(){super(...arguments);this.state={initTableClassName:""},this.handleTableSticky=()=>{var c=(0,C.findDOMNode)(this.pageRef);this.pageRef.tableRef.offsetTop+46<=c.parentNode.scrollTop?this.pageRef.tableRef.className.indexOf("fixed-table-thead")===-1&&(this.pageRef.tableRef.className="".concat(this.pageRef.tableRef.className," fixed-table-thead"),this.resetThTdWidth()):this.pageRef.tableRef.offsetTop>c.parentNode.scrollTop&&(this.pageRef.tableRef.className=this.state.initTableClassName)},this.resetThTdWidth=()=>{var c=this.pageRef.tableRef.getElementsByTagName("thead")[0];c.style.width="".concat(this.pageRef.tableRef.offsetWidth,"px");var A=c.childNodes[0];c.childNodes[1]&&(c.childNodes[1]="".concat(this.pageRef.tableRef.offsetWidth,"px")),A.style.width="".concat(this.pageRef.tableRef.offsetWidth,"px");var F=this.pageRef.tableRef.getElementsByTagName("tbody")[0].childNodes,W=!1;if(F&&F.length){try{var r=F[0].getAttribute("class");r==="ant-table-placeholder"&&(W=!0)}catch(h){console.log(h)}if(!W){var N=F[0].childNodes;if(N&&N.length){var x=N&&N.length&&Array.prototype.slice.call(N).map(h=>h.offsetWidth);A.childNodes&&A.childNodes.length&&Array.prototype.slice.call(A.childNodes).forEach((h,a)=>{h.style.width="".concat(x[a],"px")}),x.map(h=>h)}}}}}componentDidMount(){var c=(0,C.findDOMNode)(this.pageRef);this.setState({initTableClassName:this.pageRef.tableRef.className}),c.parentNode.addEventListener("scroll",this.handleTableSticky),window.addEventListener("resize",this.resetThTdWidth)}componentDidUpdate(){(0,f.P2)(this.handleTableSticky,500)()}componentWillUnmount(){var c=(0,C.findDOMNode)(this.pageRef);c.parentNode.removeEventListener("scroll",this.handleTableSticky),window.removeEventListener("resize",this.resetThTdWidth)}render(){return E().createElement(p,(0,Z.Z)({ref:c=>this.pageRef=c},this.props))}};k.Z=b},11449:function(de,k,e){"use strict";e.d(k,{Z:function(){return $}});var Z=e(88986),T=e(33565),E=e(12924),C=e.n(E),g=e(3115),f=e(49111),b=e(19650),p=e(62029),w=e(57663),c=e(71577),A=e(91768),F=e(28216),W=e(37055),r=e(10237);function N(I){var D=W.ZP.getHelpContentByMenuKey(),S={key:I};return r.WY.get({url:D,params:S})}var x=e(74228),h=e.n(x),a=e(1164),t=e(76466),l=e(38642);class d extends C().Component{constructor(D){var S;super(D);S=this,this.getHelpContentByMenuKey=()=>{var V=this.props.defaultMenuKey;N(V).then(Y=>{var B=Y.data,H=B.help_url,ee=B.video_url;this.setState({videoUrl:ee,helpUrl:H})})},this.handleOpenHelpUrl=V=>{if((0,l.ve)()){window.open(V,"_blank");return}a.Z.targetTo({path:V,isExternalLink:!0})},this.handleOpenVideo=function(V){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.props.t("helpCenter.video");S.setState(B=>({resourcePlayInfo:(0,Z.Z)((0,Z.Z)({},B.resourcePlayInfo),{},{resourceInfo:{originUrl:V,source:{FD:V,OD:V},contentType:"mp4"}}),previewInfo:(0,Z.Z)((0,Z.Z)({},B.previewInfo),{},{title:Y,visible:!0,onCancel:S.handleCancelPreview})}))},this.handleCancelPreview=()=>{var V=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,Z.Z)((0,Z.Z)({},V),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:D.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var D=this.state,S=D.helpUrl,V=D.resourcePlayInfo,Y=D.previewInfo,B=D.videoUrl,H=this.props.t;return C().createElement("div",{className:h().helpCenter},B&&C().createElement(c.Z,{type:"link",className:h()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(B)},H("helpCenter.video")),S&&C().createElement(c.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(S)},H("helpCenter.tutorial")),C().createElement(t.Z,(0,p.Z)({},V,{previewInfo:Y})))}}var n=I=>({defaultMenuKey:I.currentRoute.menuKey});d.defaultProps={defaultMenuKey:""};var P=(0,F.$j)(n)((0,A.Z)()(d));function u(I){var D=I.extra,S=localStorage.getItem("dingPersonnel"),V=sessionStorage.getItem("dingPersonnel");return C().createElement(b.Z,null,D,S!=="dingPersonnel"&&V!=="dingPersonnel"&&(0,l.eY)("COMMONEXTRA_HELP_CENTER")&&C().createElement(P,null))}var R=u,M=e(4408);function _(I){var D=(0,E.useState)({helpCenter:(0,l.eY)("HEAD_HELP_CENTER_BUT")}),S=(0,T.Z)(D,1),V=S[0],Y=I.pageContainerParams,B=Y===void 0?{}:Y,H=I.noPadding,ee=H===void 0?!1:H,se=I.isPersonal,ue=se===void 0?!1:se,le=I.pageTitle,re=I.className,pe=re===void 0?"":re,i={extra:V.helpCenter?C().createElement(R,{extra:B.extra}):B.extra},y=(0,Z.Z)((0,Z.Z)({},B),i);return C().createElement("div",{className:"page-container-content ".concat(ee?"page-container-noPadding":""," ").concat(ue?"page-container-content_personal_background":""," ").concat(pe)},le&&C().createElement(M.Z,{title:le}),ue?C().createElement(g.Z,null,I.children):C().createElement(g.Z,y,I.children))}var $=_},41694:function(de,k,e){"use strict";e.r(k),e.d(k,{default:function(){return ve}});var Z=e(14781),T=e(53431),E=e(62029),C=e(34792),g=e(48086),f=e(59250),b=e(13013),p=e(30887),w=e(99210),c=e(88986),A=e(77576),F=e(59314),W=e(12924),r=e.n(W),N=e(91768),x=e(28216),h=e(76651),a=e(57254),t=e(56680),l=e(62117),d=e(72456),n=e(63185),P=e(9676),u=e(57119),R=e(57663),M=e(71577),_=e(80991),$=e(6793),I=e(52670),D=e(62615),S=e(18329),V=e(34773),Y=e(70075),B=e(2396),H=e(3407),ee=e(78138),se=(0,$.me)(),ue=H.Z[se].certificateManage,le=ie=>ie?"":ue.validData,re={xs:{span:24},sm:{span:4}};class pe extends r().Component{constructor(te){super(te);this.handleBeforeCreate=()=>{this.formRef.submitForm(),this.formRef.runValidations().then(s=>{if(!Object.keys(s).length){var o=this.formRef.state.values,m=o.employeeRange,O=o.issue_date,G=o.effect_date,X=o.certificate_source,ae=o.certificate_reason,q=(0,V.b)(m.rangeList),ce={groupIds:m.rangeType===2?q.groupIds.join(","):"",departmentIds:m.rangeType===2?q.deptIds.join(","):"",userIds:m.rangeType===2?q.userIds.join(","):"",postIds:m.rangeType===2?q.postIds.join(","):"",issue_date:(0,$.jZ)(new Date(O)),effect_date:(0,$.jZ)(new Date(G)),certificate_reason:ae,certificate_source:X};delete ce.employeeRange,this.props.onCreate(ce)}})},this.initRef=s=>{this.formRef=s},this.handleBeforeCancel=()=>{var s=this.props.onCancel;s()},this.issuanceFooter=()=>{var s=this.props,o=s.prefixCls,m=s.t,O=s.issuanceLoad;return r().createElement("div",{className:"".concat(o,"__content__footer")},r().createElement(M.Z,{key:"back",onClick:this.handleBeforeCancel},m("common.cancel")),r().createElement(M.Z,{key:"submit",type:"primary",loading:O,onClick:this.handleBeforeCreate},m("common.ok")))},this.state={initialParams:{employeeRange:{rangeType:0,rangeList:{dept:[],post:[],group:[],user:[]}},issue_date:0,effect_date:0,certificate_source:"",certificate_reason:""}}}render(){var te=this.props,s=te.prefixCls,o=te.visible,m=te.mode,O=m===void 0?["part"]:m,G=te.reserveUser,X=G===void 0?[]:G,ae=this.state.initialParams;return o?r().createElement(S.ZP,{wrapClassName:s,visible:o,title:this.props.t("authentication.abilityDetailIssue"),onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate,footer:this.issuanceFooter()},r().createElement(_.J9,{ref:this.initRef,initialValues:ae,render:q=>r().createElement(_.l0,{className:"cl-form"},r().createElement(_.gN,(0,E.Z)({component:D.ww,displayType:"Custom",required:!0,showSectitle:!1,name:"employeeRange",label:this.props.t("certificateRankingList.issueToWhom"),defaultFieldList:q.values.employeeRange,validate:I.FI,mode:O,reserveUser:X,onlyUser:!0},re)),r().createElement(_.gN,(0,E.Z)({component:D.Mt,displayType:"Custom",className:"large-datePicker",name:"issue_date",label:this.props.t("certificateRankingList.issuingTime"),required:!0,normalDisplay:!0,defaultFieldList:q.values.issue_date,validate:le},re)),r().createElement(_.gN,(0,E.Z)({component:D.Mt,displayType:"Custom",name:"effect_date",className:"large-datePicker",label:this.props.t("certificateRankingList.effectiveTime"),required:!0,normalDisplay:!0,defaultFieldList:q.values.effect_date,validate:le},re)),r().createElement(_.gN,(0,E.Z)({component:Y.Z,name:"certificate_source",label:this.props.t("certificateManage.certifiedSource"),required:!0,type:"text",defaultValue:q.values.certificate_source,maxLength:30,placeholder:this.props.t("certificateManage.certificateSourceLimitWord"),validate:ce=>(0,B.QK)(ce,this.props.t("certificateManage.certificateSourceLimitWord"))},re)),r().createElement(_.gN,(0,E.Z)({component:Y.Z,name:"certificate_reason",label:this.props.t("certificateManage.reason"),required:!0,type:"text",defaultValue:q.values.certificate_reason,maxLength:30,placeholder:this.props.t("certificateManage.certificateReasonLimitWord"),validate:ce=>(0,B.QK)(ce,this.props.t("certificateManage.certificateReasonLimitWord"))},re)))})):null}}var i=(0,N.Z)()(pe),y=e(65202);class v extends r().Component{constructor(te){super(te);this.onCloseView=()=>{this.setState({certificateImgModal:{visible:!1,record:{}},statusModal:{visible:!1,record:{}},deleteModal:{visible:!1,record:{},isChecked:!1}})},this.openView=s=>{var o=s.record;this.setState({certificateImgModal:{visible:!0,record:o}})},this.handleUpdateStatus=s=>{var o=s.record,m=this.state.statusModal;(0,t.Nf)({id:o?o.id:m.record.id}).then(O=>{this.onCloseView();var G=O.data,X=G.code,ae=G.msg;g.default["".concat(X===0?"success":"warning")](ae),X===0&&this.resetPagination().then(()=>{this.props.initTableList()})})},this.resetPagination=()=>new Promise(s=>{this.setState(o=>({params:(0,c.Z)((0,c.Z)({},o.params),{},{pageNumber:1,pageSize:20})}),()=>{s()})}),this.handleIssuance=s=>{var o=s.record;this.setState({issuanceModal:{issuanceLoad:!1,visible:!0,record:o}})},this.handleDeleteCertificate=()=>{var s=this.state.deleteModal,o=this.props.t;(0,t.vn)(s.record.id,{need_revoke:s.isChecked}).then(m=>{var O=m.data,G=O.code;this.onCloseView(),(G===0||G==="0")&&(g.default.success(o("study.operateSuccess")),this.resetPagination().then(()=>{this.props.initTableList()}))}).catch(()=>{g.default.error(o("study.operateFailedTryAgain"))})},this.handleIssuanceCancel=()=>{this.setState({issuanceModal:{issuanceLoad:!1,visible:!1,record:{}}})},this.handleIssuanceOk=s=>{this.setState({issuanceModal:(0,c.Z)((0,c.Z)({},this.state.issuanceModal),{},{issuanceLoad:!0})}),s.certificate_Id=this.state.issuanceModal.record.id,(0,t.$F)(s).then(o=>{this.setState({issuanceModal:(0,c.Z)((0,c.Z)({},this.state.issuanceModal),{},{issuanceLoad:!1})}),o.status===200&&(o.data.code===0?(this.handleIssuanceCancel(),g.default.success(this.props.t("certificateManage.issuanceSuccess")),this.props.initTableList()):g.default.warning(o.data.msg))})},this.handleEditCertificate=()=>{g.default.success(this.props.t("certificateManage.editSuccess"))},this.handleMenuClick=(s,o)=>{s==="delete"?this.setState({deleteModal:{visible:!0,isChecked:!1,record:o}}):s==="abilityDetailIssue"&&this.handleIssuance({record:o})},this.certificateSingleView=s=>{h.m8.push("/training/authentication/certificate/single?id=".concat(s.id))},this.state={certificateImgModal:{visible:!1,record:{}},statusModal:{visible:!1,record:{}},issuanceModal:{issuanceLoad:!1,visible:!1,record:{}},deleteModal:{visible:!1,record:{},isChecked:!1},editModal:{visible:!1,record:{}}}}componentDidMount(){this.props.onRef(this)}render(){var te=this.props,s=te.prefixCls,o=te.t,m=this.state,O=m.certificateImgModal,G=m.statusModal,X=m.deleteModal,ae=m.issuanceModal,q=m.editModal;return r().createElement("section",null,r().createElement(S.ZP,{visible:O.visible,title:O.record.name,footer:null,destroyOnClose:!0,onCancel:this.onCloseView,className:"".concat(s," ").concat(s,"__view")},O.record.previewUrl!==""&&O.record.previewUrl!=="fail"&&r().createElement("div",{className:"".concat(s,"_img_box")},r().createElement("img",{className:"".concat(s,"_img_box_cell"),src:O.record.previewUrl,alt:""})),(O.record.previewUrl===""||O.record.previewUrl==="fail")&&r().createElement("div",{className:"".concat(s,"_failedImg_box")},r().createElement("img",{className:"".concat(s,"_failedImg_box_cell"),src:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/no-certificate.png",alt:""}),O.record.previewUrl===""&&r().createElement("span",{className:"".concat(s,"_failedImg_box_text"),style:{color:(0,y.p)()}},o("certificateManage.certificateGeneration")),O.record.previewUrl==="fail"&&r().createElement("span",{className:"".concat(s,"_failedImg_box_text"),style:{color:(0,y.p)()}},o("certificateManage.certificateFailed")))),r().createElement(S.ZP,{visible:G.visible,onOk:this.handleUpdateStatus,onCancel:this.onCloseView,title:"",closable:!1,width:500,className:"".concat(s," ").concat(s,"__startAndStop")},r().createElement("div",{className:"modal_title"},r().createElement(u.Z,{className:"".concat(s,"__icon")}),o("certificateManage.certificateStopTitle")),r().createElement("div",{className:"modal_content"},r().createElement("p",null,o("certificateManage.certificateStopContent")))),r().createElement(S.ZP,{visible:q.visible,title:o("certificateManage.certificateEditTitle"),onCancel:this.onCloseView,onOk:this.handleEditCertificate,className:"".concat(s," ").concat(s,"__edit")}),r().createElement(S.ZP,{visible:X.visible,title:"",closable:!1,width:500,onCancel:this.onCloseView,onOk:this.handleDeleteCertificate,className:"".concat(s," ").concat(s,"__delete")},r().createElement("div",{className:"modal_title"},r().createElement(u.Z,{className:"".concat(s,"__icon")}),o("certificateManage.deleteTitle")),r().createElement("div",{className:"modal_content"},r().createElement("p",null,o("certificateManage.deleteContent")),r().createElement(P.Z,{checked:X.isChecked,onChange:ce=>{this.setState({deleteModal:(0,c.Z)((0,c.Z)({},this.state.deleteModal),{},{isChecked:ce.target.checked})})}},o("certificateManage.deleteCheckbox")))),r().createElement(i,(0,E.Z)({visible:ae.visible},ae,{onCancel:this.handleIssuanceCancel,onCreate:this.handleIssuanceOk,prefixCls:"".concat(s)})))}}v.defaultProps={prefixCls:"certificate-list__Modal"};var U=(0,N.Z)()(v),K=e(37055),L=e(97593),j=e(16239),z=e(84009),ne=e(11449),J=e(1164),oe=e(36202),he=e(4408),Q=e(86726),Ce=e(60667),me=ie=>({userInfo:ie.user});class fe extends r().Component{constructor(te){super(te);this.onRef=s=>{this.modalRef=s},this.columns=[{title:this.props.t("component.certificateName"),dataIndex:"name",key:"name",render:(s,o)=>r().createElement("span",{className:"certificate_name cl-hover",onClick:()=>{(0,t.DC)(this.state.params).then(()=>{this.modalRef.openView({record:o})})}},o.name),onCell:()=>({style:{minWidth:200}})},{title:this.props.t("authentication.validityPeriod"),dataIndex:"expireDate",key:"expireDate",width:120,render:(s,o)=>{var m=o.expireDate;return"".concat(m?"".concat(m).concat(this.props.t("authentication.effectiveMonths").substr(0,2)):this.props.t("authentication.permanent"))}},{title:this.props.t("authentication.validCertificatesed"),dataIndex:"userCount",key:"userCount",width:130},{title:this.props.t("authentication.expiredPersonnel"),dataIndex:"overdueUserCount",key:"overdueUserCount",width:110},{title:this.props.t("common.creator"),dataIndex:"createUserName",key:"createUserName",width:164,render:(s,o)=>{var m=o.creator_sync_user_id,O=m===void 0?"":m,G=o.creator_sync_source_type,X=G===void 0?"":G;return r().createElement(Ce.Z,{dataType:"userName",value:O,name:s,type:X})}},{title:this.props.t("common.createTime"),dataIndex:"createTime",key:"createTime",width:164,render:(s,o)=>{var m=o.createTime;return"".concat((0,$.p6)(m))}},{title:this.props.t("common.status"),dataIndex:"status",key:"status",width:110,render:(s,o)=>{var m=(0,Q.H3)("certificate_enable/disabled",(0,Q.V9)("certificate",this.props.userInfo.modules));return r().createElement(F.Z,{disabled:!m,checkedChildren:this.props.t("common.activatedStred"),unCheckedChildren:this.props.t("common.deactivatedStr"),checked:o.status===1,onChange:O=>this.changeStatus(O,{record:o})})}},{title:this.props.t("common.operate"),key:"operate",width:110,fixed:"right",render:s=>this.renderActions({record:s})}],this.initData=()=>{this.initTableList()},this.initTableList=()=>{this.setState({tableLoading:!0}),(0,t.DC)(this.state.params).then(s=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:s.data.list,tableTotal:s.data.total})},300)})},this.handleQueryRowRadiosChange=s=>{this.resetPagination().then(()=>{this.setState(o=>({params:(0,c.Z)((0,c.Z)({},o.params),{},{status:s})}),()=>{this.initTableList()})})},this.handleQueryRowSearch=s=>{this.resetPagination().then(()=>{this.setState(o=>({params:(0,c.Z)((0,c.Z)({},o.params),{},{keyword:s})}),()=>{this.initTableList()})})},this.handleChangePagination=(s,o)=>{this.setState(m=>({params:(0,c.Z)((0,c.Z)({},m.params),{},{pageNumber:s,pageSize:o})}),()=>{this.initTableList()})},this.renderActions=s=>{var o=s.record,m=this.props.t,O=this.state.allowActions,G=(0,Q.H3)("certificate_edit",O),X=(0,Q.H3)("certificate_data",O),ae=(0,Q.H3)("certificate_award",O),q=(0,Q.H3)("certificate_delete",O),ce=(0,Q.H3)("certificate_copy",O),ge=o.status===0||o.status==="0",ye=r().createElement(w.Z,{onClick:Ee=>{var Pe=Ee.key;return this.handleMenuClick(Pe,o)}},ce&&r().createElement(w.Z.Item,{key:"copy"},r().createElement("span",{className:"cl-default-pointer cl-hover"},m("common.copy"))),G&&r().createElement(w.Z.Item,{key:"edit"},r().createElement("span",{className:"cl-default-pointer cl-hover"},m("common.edit"))),ae&&r().createElement(w.Z.Item,{key:"abilityDetailIssue"},r().createElement("span",{className:"cl-default-pointer cl-hover"},m("authentication.abilityDetailIssue"))),q&&r().createElement(w.Z.Item,{key:"delete",disabled:!ge},r().createElement("span",{className:ge?"cl-default-pointer cl-hover":""},m("common.delete"))));return r().createElement("div",{className:"cl-table__cell-action"},X&&r().createElement("span",{className:"cl-pointer",onClick:()=>this.certificateSingleView(o)},m("common.preview")),X&&r().createElement("span",{className:"cl-pointer-divide"}),(G||ae||q||ce)&&r().createElement(b.Z,{overlay:ye},r().createElement("span",{className:"cl-pointer"},this.props.t("common.more"),r().createElement(a.Z,null))))},this.changeStatus=(s,o)=>{var m=o.record;s?this.modalRef.handleUpdateStatus({record:m}):this.modalRef.setState({statusModal:{visible:!0,record:m}})},this.handleIssuance=s=>{var o=s.record,m=s.reason,O=s.userIds,G=s.departmentIds,X=s.postIds,ae=s.groupIds;(0,t.$F)({certificate_Id:o.id,certificate_reason:m,user_ids:O,department_ids:G,post_ids:X,group_ids:ae}).then(q=>{q.data.code===0?(g.default.success(this.props.t("exam.issuingCertificateSuccess")),this.initTableList()):g.default.warning(q.data.msg)})},this.resetPagination=()=>new Promise(s=>{this.setState(o=>({params:(0,c.Z)((0,c.Z)({},o.params),{},{pageNumber:1,pageSize:20})}),()=>{s()})}),this.renderLeftRow=()=>{var s=(0,j.c)(),o=this.state.allowActions;return r().createElement(d.Z,{tabLink:"/training/authentication/certificate/layout",onDownload:this.handleDownload,actionText:this.props.t("certificateManage.addCertificate"),showDownloadBtn:(0,Q.H3)("certificate_export",o),showCreateBtn:(0,Q.H3)("certificate_add",o)&&s!=="huaqi"})},this.handleDownload=()=>{var s=this.state.params,o="";s.keyword?o+="?query_interval_type=2&keyword=".concat(s.keyword,"&status=").concat(s.status):o+="?query_interval_type=2&status=".concat(s.status),(0,L.N)({page:"certificate",props:this.props,query:o})},this.certificateSingleView=s=>{h.m8.push("/training/authentication/certificate/single?id=".concat(s.id))},this.handleMenuClick=(s,o)=>{s==="delete"||s==="abilityDetailIssue"?this.modalRef.handleMenuClick(s,o):s==="copy"?J.Z.targetTo({path:"/training/authentication/certificate/detail?id=".concat(o.id,"&copy=true")}):s==="edit"&&J.Z.targetTo({path:"/training/authentication/certificate/detail?id=".concat(o.id)})},this.renderRightRow=()=>{var s=this.state.radioList;return r().createElement(l.Z,{radioList:s,showCheckbox:!1,onRadiosChange:this.handleQueryRowRadiosChange,onSearch:this.handleQueryRowSearch})},this.state={params:{keyword:"",pageNumber:1,pageSize:20,status:""},radioList:[{name:this.props.t("common.all"),value:""},{name:this.props.t("common.activated"),value:"1"},{name:this.props.t("common.deactivated"),value:"0"}],tableLoading:!0,tableList:[],tableTotal:0,allowActions:(0,Q.V9)("certificate",this.props.userInfo.modules)}}componentDidMount(){this.initData()}render(){var te=this.props.prefixCls,s=this.state,o=s.tableTotal,m=s.params,O=s.tableList,G=s.tableLoading,X=(0,c.Z)((0,c.Z)({},K.XE.INITIAL_PAGINATION),{},{total:o,current:m.pageNumber,pageSize:m.pageSize});return r().createElement(ne.Z,{pageContainerParams:{header:{title:this.props.t("leftMenuLists.certificateManagement")}}},r().createElement(he.Z,{title:this.props.t("leftMenuLists.certificateManagement")}),r().createElement("div",{className:te},r().createElement("div",{className:"".concat(te,"__content"),ref:ae=>{this.tableRef=ae}},r().createElement("section",{className:"certificate-list-page__content__table"},r().createElement("div",{className:"authentication-content-list"},r().createElement(oe.f,{columns:this.columns,rowKey:"id",dataSource:O,pagination:!1,loading:G,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow,tableUUID:"ff915855-825b-4a65-8769-32de629b5731"})),r().createElement("div",{className:"authentication-pagination-wrapper"},r().createElement(T.Z,(0,E.Z)({},X,{onChange:this.handleChangePagination,className:"authentication-pagination"}))),r().createElement(U,{onRef:this.onRef,initTableList:this.initTableList})))))}}fe.defaultProps={prefixCls:"certificate-list-page sticky-table"};var ve=(0,x.$j)(me)((0,N.Z)()((0,z.Z)()(fe)))},56680:function(de,k,e){"use strict";e.d(k,{DC:function(){return C},Nf:function(){return g},vn:function(){return f},u7:function(){return b},lN:function(){return p},dh:function(){return w},OI:function(){return c},OV:function(){return A},rb:function(){return F},$F:function(){return W},QG:function(){return r},oh:function(){return N},ov:function(){return x}});var Z=e(76651),T=e(37055),E=e(10237);function C(h){var a=T.ZP.CertificateListMangement.getTableList(Z.m8.location.query.id);return E.WY.get({url:a,params:h})}function g(h){var a=T.ZP.CertificateListMangement.updateStatus();return E.qg.post({url:a,data:h})}function f(h,a){var t=T.ZP.CertificateListMangement.deleteCertificate(h);return E.qg.post({url:t,data:a})}function b(){var h=T.ZP.CertificateListMangement.certificateDetail(Z.m8.location.query.id);return E.WY.get({url:h})}function p(h){var a=T.ZP.CertificateListMangement.certificateUser(Z.m8.location.query.id);return E.WY.get({url:a,params:h})}function w(h){var a=T.ZP.CertificateListMangement.revokeCertificate({certificateId:Z.m8.location.query.id});return E.WY.post({url:a,data:h})}function c(h){var a=T.ZP.CertificateListMangement.remindCertificate({certificateId:Z.m8.location.query.id});return E.WY.post({url:a,data:h})}function A(h){var a=T.ZP.CertificateListMangement.regenerateCertificate();return E.WY.post({url:a,params:{certificate_id:h}})}function F(h){var a=T.ZP.CertificateListMangement.certificateRelation({certificateId:Z.m8.location.query.id});return E.WY.get({url:a,params:h})}function W(h){var a=T.ZP.CertificateListMangement.issuance();return E.WY.post({url:a,data:h})}function r(h){var a=T.ZP.CertificateListMangement.exportUser({certificateId:Z.m8.location.query.id});return E.WY.get({url:a,params:h})}function N(h){var a=T.ZP.CertificateListMangement.exportUserImg({certificateId:Z.m8.location.query.id});return E.WY.get({url:a,params:h})}function x(h){var a=T.ZP.CertificateListMangement.submitTemplate({certificateId:Z.m8.location.query.id});return E.WY.get({url:a,params:h})}},72456:function(de,k,e){"use strict";var Z=e(49111),T=e(19650),E=e(57663),C=e(71577),g=e(12924),f=e.n(g),b=e(28216),p=e(91768),w=e(84391),c=e(90631),A=e(49101),F=e(76651),W=e(31945),r=e(1164),N=e(51697),x=a=>{var t=a.user,l=a.currentRoute,d=a.advancedSetting;return{currentPath:l.path,allAuthRoutes:l.allAuthRoutes,userLng:t.lng,themeColor:d.themeColor,qyShield:t.qyShield}};class h extends f().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var t=this.props.tabLink;F.m8.push(t)},this.renderActionBtn=()=>{var t=this.props,l=t.prefixCls,d=t.actionText,n=t.t,P=t.tabLink,u=t.showBtn,R=t.renderActionBtn,M=t.newPage,_=t.popOverProps,$=_===void 0?[]:_,I=t.renderGuide,D=I===void 0?!1:I,S=t.showDownloadBtn,V=S===void 0?!1:S,Y=t.showImportBtn,B=Y===void 0?!1:Y,H=t.showCreateBtn,ee=H===void 0?!0:H,se=t.rowReverse,ue=se===void 0?!1:se,le="".concat(l,"__action");if(!u&&R&&typeof R=="function")return f().createElement("div",{className:le},R());if(!u||!d)return null;var re=$.length?$[0].contentText:"";return f().createElement("div",{className:"".concat(le," ").concat(ue&&"row-reverse")},f().createElement(T.Z,{size:16},V&&f().createElement(C.Z,{icon:f().createElement(w.Z,null),onClick:this.handleDownload},n("common.exportData")),B&&f().createElement(C.Z,{icon:f().createElement(c.Z,null),onClick:this.handleImport},n("exam.importTemplate")),ee&&M&&f().createElement(r.Z,{to:P},f().createElement(N.Z,{visible:re&&D,placement:"topLeft",title:re},f().createElement(C.Z,{type:"primary",id:"create-project-button",icon:f().createElement(A.Z,null)},d))),ee&&!M&&f().createElement(C.Z,{type:"primary",id:"create-project-button",icon:f().createElement(A.Z,null),onClick:this.handleCreate},d)))},this.renderQueryRow=()=>{var t=this.props,l=t.queryRowParams,d=t.queryRowList,n=t.queryRowSelectedCourseIds,P=t.queryRowSelectedProjectIds,u=t.queryRowOnForceRender,R=t.queryRowOnClassifyChange,M=t.queryRowOnTypeChange,_=t.queryRowOnCourseTypeChange,$=t.queryRowAllowActions,I=t.showNum,D=I===void 0?1:I;return f().createElement(W.Z,{params:l,list:d,selectedCourseIds:n,selectedProjectIds:P,onForceRender:u,onClassifyChange:R,onTypeChange:M,onCourseTypeChange:_,allowActions:$,showNum:D,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var t=this.props,l=t.t,d=t.extraBtnSelectedRowKeys,n=t.extraBtnHandleMultiVisibleRange;return f().createElement(C.Z,{disabled:d.length===0,onClick:n},l("courseManage.setTheVisibility"))}}render(){var t=this.props,l=t.prefixCls,d=t.wrapCls,n=t.showRenderQueryRow,P=t.showRendeExtraBtn;return f().createElement(f().Fragment,null,f().createElement("div",{className:"render_other"},f().createElement("header",{className:"".concat(l," ").concat(d)},f().createElement("section",{className:"".concat(l,"__radiocol")},this.renderActionBtn(),n&&this.renderQueryRow(),P&&this.rendeExtraBtn()))))}}h.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},k.Z=(0,b.$j)(x)((0,p.Z)()(h))},62117:function(de,k,e){"use strict";var Z=e(63185),T=e(9676),E=e(43358),C=e(34041),g=e(88983),f=e(47933),b=e(12924),p=e.n(b),w=e(28216),c=e(91768),A=e(48479),F=e(2971),W=e(45601),r=e(7249),N=h=>{var a=h.user,t=h.currentRoute,l=h.advancedSetting;return{currentPath:t.path,allAuthRoutes:t.allAuthRoutes,userLng:a.lng,themeColor:l.themeColor,appType:a.appType,appId:a.appId}};class x extends p().Component{constructor(a){super(a);this.setPlaceholder=()=>{var t=this.props,l=t.currentPath,d=t.allAuthRoutes,n=t.userLng,P=this.state.language,u=d[l],R=this.props,M=R.appType,_=R.appId,$=localStorage.getItem("qyWechatBook"),I=M==="wx_app"&&$==="true"&&_==="9005";if(!!u){var D=P[n].searchInputPlaceholder,S="";u.menuKey==="studyTemplate"||u.menuKey==="examTemplate"?S=D.template:u.menuKey==="employee"||u.menuKey==="obligatory"||u.menuKey==="elective"||u.menuKey==="plan"||u.menuKey==="evaluation"||u.menuKey==="myEvaluationPlan"?S=D.task:u.menuKey==="studyProject"?S=I?D.byProjectName:D.byProjectNameOrCreator:u.menuKey==="management"?S=I?D.byTaskName:D.byTaskNameOrCreator:S=D[u.menuKey],this.setState({currentPlaceholder:S})}},this.handleRadiosChange=t=>{this.props.onRadiosChange(t.target.value)},this.handleSelectChange=t=>{this.props.onSelectChange(t)},this.handleSearch=(t,l)=>{this.props.onSearch(t,l)},this.handleChange=t=>{this.props.onCheckboxChange(t.target.checked)},this.renderRadios=()=>{var t=this.props,l=t.prefixCls,d=t.radioList,n=t.defaultRadioValue,P=t.radioValue;if(!d.length)return null;var u=n||d[0].value,R="".concat(l,"__radios");return p().createElement("div",{className:R},typeof P!="undefined"?p().createElement(f.ZP.Group,{defaultValue:u,value:P,onChange:this.handleRadiosChange},d.map(M=>p().createElement(f.ZP.Button,{key:M.value,value:M.value},M.name))):p().createElement(f.ZP.Group,{defaultValue:u,onChange:this.handleRadiosChange},d.map(M=>p().createElement(f.ZP.Button,{key:M.value,value:M.value},M.name))))},this.renderSelect=()=>{var t=this.props,l=t.prefixCls,d=t.selectList,n=t.defaultSelectValue;if(!d.length)return null;var P=n||d[0].value,u="".concat(l,"__select");return p().createElement("div",{className:u},p().createElement(C.Z,{defaultValue:P,onChange:this.handleSelectChange,style:{minWidth:100}},d.map(R=>p().createElement(C.Z.Option,{key:R.value,value:R.value},R.name))))},this.renderOther=()=>{var t=this.props,l=t.prefixCls,d=t.renderOther,n=t.showOther,P="".concat(l,"__other");if(n&&d&&typeof d=="function")return p().createElement("div",{className:P},d())},this.renderCheckbox=()=>{var t=this.props,l=t.prefixCls,d=t.t,n=t.label,P=t.showCheckbox,u=t.renderActionSelect,R="".concat(l,"__checkbox");return!P&&u&&typeof u=="function"?p().createElement("div",{className:R},u()):P?p().createElement("div",{className:R},p().createElement(T.Z,{onChange:this.handleChange},n||d("common.myCreated"))):null},this.renderSearch=()=>{var t=this.props,l=t.prefixCls,d=t.showSearch,n=t.inputPlaceholder,P=t.maxLength,u=P===void 0?400:P,R=t.value,M="".concat(l,"__search");if(!d)return null;var _=this.state.currentPlaceholder;return n?p().createElement("div",{className:M},p().createElement(A.Z,{onSearch:this.handleSearch,placeholder:n,width:272,maxLength:u})):p().createElement("div",{className:M},p().createElement(A.Z,{onSearch:this.handleSearch,placeholder:_,width:272,maxLength:u,value:R}))},this.renderSearchOther=()=>{var t=this.props.renderSearchOther;return t?t():null},this.state={language:{zh_cn:W.Z,en_us:F.Z,zh_hk:r.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(a){a.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var a=this.props,t=a.prefixCls,l=a.wrapCls,d=a.showRenderRadios,n=d===void 0?!0:d,P=a.showRenderSelect;return p().createElement(p().Fragment,null,p().createElement("div",{className:"render_other"},this.renderOther(),p().createElement("header",{className:"".concat(t," ").concat(l)},p().createElement("section",{className:"".concat(t,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),n&&this.renderRadios(),P&&this.renderSelect(),this.renderSearch()))))}}x.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},k.Z=(0,w.$j)(N)((0,c.Z)()(x))},31945:function(de,k,e){"use strict";e.d(k,{Z:function(){return re}});var Z=e(88983),T=e(47933),E=e(20228),C=e(11382),g=e(62029),f=e(30887),b=e(99210),p=e(59250),w=e(13013),c=e(57663),A=e(71577),F=e(63185),W=e(9676),r=e(71194),N=e(57016),x=e(88986),h=e(34792),a=e(48086),t=e(43358),l=e(34041),d=e(12924),n=e.n(d),P=e(28216),u=e(91768),R=e(57254),M=e(18329);class _ extends n().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var i=this.props,y=i.visible,v=i.courseList,U=i.t;return n().createElement(M.ZP,{visible:y,title:U("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},n().createElement("div",{className:"referenceWithOtherCourses"},n().createElement("div",{className:"referenceWithOtherCourses__tip"},U("course.deleteCourseTip")),v.map((K,L)=>n().createElement("div",{className:"referenceWithOtherCourses__item",key:L},v.length>1?"".concat(L+1,"\u3001"):null," ",K))))}}var $=(0,u.Z)()(_),I=e(10237),D=e(63848),S=e(58546),V=e(30389),Y=e(54792),B=e(86726),H=e(37055),ee=l.Z.Option,se={setClassify:H.ZP.CourseManageList.setClassify,setScore:H.ZP.CourseManageList.setScore,setBatchEmployee:H.ZP.CourseManageList.setBatchEmployee,deleteCourse:H.ZP.CourseManageList.deleteCourse,exportCourseView:H.ZP.CourseManageList.exportCourseView,syncCourse:H.ZP.CourseManageList.syncCourse},ue=pe=>({qyShield:pe.user.qyShield});class le extends n().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=i=>{this.props.onClassifyChange(i)},this.handleChangeType=i=>{this.props.onTypeChange(i)},this.handleChangeCourseType=i=>{this.props.onCourseTypeChange(i)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=i=>{var y=i.node,v=this.props,U=v.selectedCourseIds,K=v.selectedProjectIds,L=v.onForceRender,j=v.t,z=y.id;z&&I.qg.post({url:se.setClassify(),data:{course_ids:U.join(","),project_ids:K.join(","),classify_id:z}}).then(()=>{a.default.success(j("course.setCourseClassifySuccess")),L()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(i=>({scoreProps:(0,x.Z)((0,x.Z)({},i.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(i=>({scoreProps:(0,x.Z)((0,x.Z)({},i.scoreProps),{},{visible:!1})}))},this.handleScoreOk=i=>{var y=i.value;if(y===0){this.handleScoreCancel();return}var v=this.props,U=v.selectedCourseIds,K=v.selectedProjectIds,L=v.onForceRender,j=v.t;I.qg.post({url:se.setScore(),data:{course_ids:U.join(","),project_ids:K.join(","),credit:y}}).then(()=>{a.default.success(j("course.setCourseScoreSuccess")),L()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(i=>({employeeProps:(0,x.Z)((0,x.Z)({},i.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=i=>{var y=this.props,v=y.selectedCourseIds,U=y.selectedProjectIds,K=y.onForceRender,L=y.t,j=i.isAll,z=i.departmentIds,ne=i.groupIds,J=i.postIds,oe=i.userIds,he=i.qy_we_chat_vo;I.WY.post({url:se.setBatchEmployee(),data:{course_ids:v.join(","),project_ids:U.join(","),department_ids:z,group_ids:ne,is_all:j,post_ids:J,user_ids:oe,qy_we_chat_vo:he}}).then(()=>{a.default.success(L("personal.batchSetRangeSuccess")),K()}),this.handleEmployeeCancel()},this.showReferenceCourseList=i=>{this.setState(y=>({showReferenceCourseListProps:(0,x.Z)((0,x.Z)({},y.showReferenceCourseListProps),{},{visible:!y.showReferenceCourseListProps.visible,courseList:i||[]})}))},this.actionDelete=()=>{var i=this.props,y=i.selectedCourseIds,v=i.selectedProjectIds,U=i.list,K=i.onForceRender,L=i.t,j=0,z=0,ne=[];if(U.forEach(J=>{y.includes(J.course_id)&&(J.reference_plan_count>0&&(z+=1),J.reference_plan_count>0&&ne.push(J.title),J.can_delete==="true"&&(j+=1))}),z>0)this.showReferenceCourseList(ne);else if(j!==y.length)a.default.warning(L("personal.deletePlatformCourseTip"));else{if(v.length>0){a.default.warning(L("personal.deleteProjectCourseTip"));return}N.Z.confirm({title:L("common.tip"),content:L("common.confirmDeleteTitle"),onOk(){I.qg.post({url:se.deleteCourse(),data:{enterpriseId:H.ZP.enterpriseId,ids:y.join(","),project_ids:v.join(",")}}).then(J=>{var oe=J.data,he=oe.code,Q=oe.msg;a.default["".concat(he===0?"success":"warning")](Q),he===0&&K()})}})}},this.actionSyncSetting=()=>{this.setState(i=>({asyncProps:(0,x.Z)((0,x.Z)({},i.asyncProps),{},{visible:!0})}))},this.onAsyncChange=i=>{this.setState(y=>({asyncProps:(0,x.Z)((0,x.Z)({},y.asyncProps),{},{value:i.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var i=this.props,y=i.selectedCourseIds,v=i.selectedProjectIds,U=i.onForceRender,K=i.t,L=this.state.asyncProps;I.qg.post({url:se.syncCourse(),data:{course_ids:y.join(","),project_ids:v.join(","),syncProgress:L.value}}).then(j=>{var z=j.data,ne=z.code,J=z.msg;ne===0?(a.default.success(K("setting.setUpSucceed")),U()):a.default.warning(J)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var i=this.props,y=i.selectedCourseIds,v=i.selectedProjectIds,U=i.onForceRender,K=i.t;if(y.concat(v).length>20){a.default.warning(K("courseManage.exportMoreTip"));return}var L=se.exportCourseView(),j={course_Ids:y.join(","),project_Ids:v.join(",")};I.WY.get({url:L,params:j}).then(z=>{z.data.code===200&&a.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),U(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var i=H.ZP.downLoadCenter.getDownLoadingCount();I.WY.get({url:i,params:{}}).then(y=>{sessionStorage.setItem("downloadingCount",y.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:y.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=i=>{this.props.onCheckboxChange(i.target.checked)},this.handleSharingQueryRowCheckboxChange=i=>{this.props.onSharingCheckboxChange(i.target.checked)},this.renderCondition=()=>{var i=this.props,y=i.prefixCls,v=i.params,U=i.qyShield,K=i.t,L=v.classify_id?v.classify_id.split(","):[];return n().createElement("div",{className:"".concat(y,"__condition")},this.props.extraDom&&this.props.extraDom(),n().createElement(D.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:L,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),n().createElement(l.Z,{value:v.type,className:"cl-search-normal-width",onChange:this.handleChangeType},n().createElement(ee,{value:""},this.props.t("courseManage.allOrigin")),n().createElement(ee,{value:"original"},this.props.t("courseManage.originalCourse")),n().createElement(ee,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),n().createElement(ee,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:n().createElement(l.Z,{value:v.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},n().createElement(ee,{value:"all"},this.props.t("courseManage.allType")),n().createElement(ee,{value:"course"},this.props.t("common.courseLabel")),n().createElement(ee,{value:"microCourse"},this.props.t("common.microCourse")),n().createElement(ee,{value:"project"},this.props.t("leftMenuLists.studyProject"))),n().createElement(W.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},K("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&U==="false"?n().createElement(W.Z,{onChange:this.handleSharingQueryRowCheckboxChange},K("common.sharing")):null)},this.renderActions=()=>{var i=this.props,y=i.prefixCls,v=i.selectedCourseIds,U=i.selectedProjectIds,K=i.showNum,L=K===void 0?1:K,j=this.props.allowActions,z=(0,B.H3)("delete",j),ne=(0,B.H3)("adjustment_classification",j),J=(0,B.H3)("set_visible",j),oe=(0,B.H3)("export",j),he=(0,B.H3)("set_score",j),Q=(0,B.H3)("progressSync",j),Ce=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:ne},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:oe},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:he},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:J},{name:this.props.t("common.delete"),type:"actionDelete",isShow:z},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:Q}],me=Ce.filter(ie=>ie.isShow),fe=[],ve=[];if(me.length)L?(fe=[...me.slice(0,L)],ve=[...me.slice(L)]):ve=[...me];else return null;return n().createElement("div",{className:"".concat(y,"__action")},fe.map(ie=>n().createElement(A.Z,{style:{marginRight:"8px"},key:ie.type,disabled:!(v.length+U.length),onClick:this[ie.type]},ie.name)),ve.length?n().createElement(w.Z,{disabled:!(v.length+U.length),overlay:this.renderMoreButton({buttons:ve})},n().createElement(A.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",n().createElement(R.Z,null))):"")}}renderMoreButton(i){var y=i.buttons,v=this.props,U=v.selectedCourseIds,K=v.selectedProjectIds;return n().createElement(b.Z,{onClick:L=>{var j=L.key;this[j]()}},y.map(L=>L.isShow?n().createElement(b.Z.Item,{key:L.type,disabled:!(U.length+K.length)},n().createElement("span",{className:"cl-pointer"},L.name)):null))}render(){var i=this.props,y=i.prefixCls,v=i.t,U=i.showRenderCondition,K=U===void 0?!0:U,L=i.showRenderActions,j=L===void 0?!0:L,z=this.state,ne=z.classifyProps,J=z.scoreProps,oe=z.employeeProps,he=z.showReferenceCourseListProps,Q=z.asyncProps;return n().createElement("div",{className:y},K&&this.renderCondition(),j&&this.renderActions(),n().createElement(S.Z,(0,g.Z)({},ne,{title:v("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),n().createElement(Y.Z,(0,g.Z)({},J,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),oe.visible&&n().createElement(V.Z,(0,g.Z)({},oe,{title:v("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:v("component.chooseVisibleScope")},isLoading:!oe.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),Q.visible&&n().createElement(M.ZP,{wrapClassName:"cl-async-selector-modal",visible:Q.visible,title:v("common.scheduleSyncSetting"),okText:v("common.ok"),cancelText:v("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},Q.visible?n().createElement("div",{className:"".concat(y,"__async")},n().createElement("p",null," ",v("common.scheduleSyncSettingTip")),n().createElement(T.ZP.Group,{onChange:this.onAsyncChange,value:Q.value},n().createElement(T.ZP,{value:0},v("common.outSync")),n().createElement(T.ZP,{value:1},v("common.synchronization")))):n().createElement(C.Z,{size:"large"})),n().createElement($,(0,g.Z)({},he,{showReferenceCourseList:this.showReferenceCourseList})))}}le.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var re=(0,u.Z)()((0,P.$j)(ue)(le))}}]);
