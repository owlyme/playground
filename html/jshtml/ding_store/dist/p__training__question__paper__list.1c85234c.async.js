(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8945],{30389:function(q,j,e){"use strict";e.d(j,{Z:function(){return _}});var K=e(62029),z=e(20228),H=e(11382),f=e(12924),L=e.n(f),v=e(91768),x=e(80991),p={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},N=e(62615),n=e(52670);class P extends L().Component{render(){var r=this.props,s=r.values,c=r.mode,i=r.onlyChooseDept,a=r.reserveUser,h=r.t,d=r.orgProps,m=r.rangeAuth,T=r.projectId,R=r.onCancel,w=r.onlyCreateUser;return L().createElement(x.l0,{className:"cl-form"},L().createElement(x.gN,(0,K.Z)({component:N.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:h("common.visibleRange"),defaultFieldList:s.employeeRange,validate:n.FI,mode:c,rangeAuth:m,onlyChooseDept:i,onlyCreateUser:w,orgProps:d,reserveUser:a,projectId:T,onCancel:R,qwTicketShow:!0},p)))}}var $=(0,v.Z)()(P),U=e(18329),V=e(34773);class I extends L().Component{constructor(){super(...arguments);this.initRefFormik=r=>{this.refFormik=r},this.handleBeforeCreate=()=>{var r=this.refFormik;r.submitForm(),r.runValidations().then(s=>{if(!Object.keys(s).length){var c=r.state.values.employeeRange,i=(0,V.b)(c.rangeList),a={qyWeChatVo:c.qyWeChatVo,id:this.props.actionId,isAll:c.rangeType,groupIds:c.rangeType===2?i.groupIds.join(","):"",departmentIds:c.rangeType===2?i.deptIds.join(","):"",userIds:c.rangeType===2?i.userIds.join(","):"",postIds:c.rangeType===2?i.postIds.join(","):"",clusterIds:c.rangeType===2?i.clusterIds.join(","):"",qy_we_chat_vo:c.qyWeChatVo};this.props.onCreate(a)}})},this.handleBeforeCancel=()=>{var r=this.props.onCancel;r()}}render(){var r=this.props,s=r.visible,c=r.initialParams,i=r.isLoading,a=r.tipInfo,h=r.mode,d=r.onlyChooseDept,m=r.reserveUser,T=m===void 0?[]:m,R=r.t,w=r.title,C=r.orgProps,y=r.rangeAuth,O=r.projectId,b=r.onCancel,F=r.onlyCreateUser,A=r.size;return i?L().createElement(H.Z,{size:"large"}):L().createElement(U.ZP,{wrapClassName:"cl-employee-selector-modal",visible:s,title:w||R("component.changeUser"),okText:R("common.ok"),cancelText:R("common.cancel"),size:A,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},i?L().createElement(H.Z,{size:"large"}):L().createElement(x.J9,{ref:this.initRefFormik,initialValues:c,render:B=>L().createElement($,(0,K.Z)({},B,{mode:h,rangeAuth:y,orgProps:C,onlyChooseDept:d,onlyCreateUser:F,reserveUser:T,projectId:O,onCancel:b}))}),a&&L().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},a))}}I.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var _=(0,v.Z)()(I)},63848:function(q,j,e){"use strict";var K=e(36877),z=e(32969),H=e(12924),f=e.n(H),L=e(91768),v=e(56130);class x extends f().PureComponent{constructor(){super(...arguments);this.onChange=(N,n)=>{this.props.onChange(N,n)}}render(){var N=this.props,n=N.value,P=N.classify,$=N.showLabel,U=N.className,V=N.t,I=N.style;return f().createElement("div",{className:"classify-cascader ".concat(U)},$?f().createElement("span",{className:"classify-cascader-label"},V("component.selectClassifyLabel")):null,f().createElement(z.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(U),options:P,onChange:this.onChange,placeholder:V("component.selectClassifyLabel"),value:n,style:I,loadData:this.props.loadData}))}}x.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},j.Z=(0,v.Z)((0,L.Z)()(x))},51697:function(q,j,e){"use strict";var K=e(22385),z=e(31097),H=e(33565),f=e(12924),L=e.n(f),v=e(28216),x=e(84874),p=n=>{var P=n.title,$=n.visible,U=n.placement,V=U===void 0?"top":U,I=n.children,_=I===void 0?null:I,Z=n.isNewUser,r=Z===void 0?"":Z,s=n.closeGuide,c=n.guideStatus,i=(0,f.useState)(!1),a=(0,H.Z)(i,2),h=a[0],d=a[1],m=w=>L().createElement("div",{className:"guide-tooltip-title"},w,L().createElement("span",{onClick:T},L().createElement(x.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,f.useEffect)(()=>{d($)},[$]);var T=w=>{if(w.stopPropagation(),w.preventDefault(),d(!1),s){s();return}r==="true"&&n.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),R()},R=()=>{localStorage.setItem("guideStatus","false"),n.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return L().createElement(z.Z,{title:m(P),placement:V,visible:h&&c==="true"&&P},_)},N=n=>({guideStatus:n.advancedSetting.guideStatus,isNewUser:n.advancedSetting.isNewUser});j.Z=(0,v.$j)(N)(p)},54792:function(q,j,e){"use strict";var K=e(62029),z=e(63185),H=e(9676),f=e(47673),L=e(4107),v=e(88986),x=e(12924),p=e.n(x),N=e(91768),n=e(59239),P=e(55446),$=e.n(P),U=e(18329),V=e(2396);class I extends p().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var r=this.props,s=r.form,c=r.id,i=r.onCreate,a=this.state.isChecked;s.validateFields((h,d)=>{if(!h){var m=(0,v.Z)({},d);a||(m.value=0);var T=(0,v.Z)((0,v.Z)({},m),{},{id:c});i(T),setTimeout(()=>{s.resetFields()},100)}})},this.handleBeforeCancel=()=>{var r=this.props,s=r.form,c=r.onCancel;c(),setTimeout(()=>{s.resetFields()},100)},this.checkScore=(r,s,c)=>{var i=this.props.t,a=this.state.isChecked;if(a&&(0,V.kh)(s)){c(i("component.setScoreRuleTip"));return}c()},this.handleCheckChange=r=>{this.setState({isChecked:r.target.checked})},this.renderItem=()=>{var r=this.props,s=r.form,c=r.initialValue,i=r.labelTxt,a=this.state.isChecked,h=s.getFieldDecorator,d={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},m=a?h("value",{initialValue:c,rules:[{validator:this.checkScore}]})(p().createElement(L.Z,{maxLength:30,placeholder:""})):null,T=p().createElement(p().Fragment,null,p().createElement(H.Z,{checked:a,onChange:this.handleCheckChange},i));return p().createElement(n.Z.Item,(0,K.Z)({label:T},d),m)}}componentDidUpdate(r){this.props.visible&&this.props.visible!==r.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var r=this.props,s=r.visible,c=r.title,i=r.prefixCls;return p().createElement(U.ZP,{size:"small",visible:s,title:c,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},p().createElement(n.Z,{className:"".concat(i),layout:"horizontal",colon:!1},this.renderItem(),p().createElement("div",{className:"".concat(i,"__children")},this.props.children)))}}I.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var _=n.Z.create({name:"ClSetupBoxInModal"})(I);j.Z=(0,N.Z)()(_)},84009:function(q,j,e){"use strict";var K=e(62029),z=e(12924),H=e.n(z),f=e(11092),L=e.n(f),v=e(6793),x=()=>p=>class extends H().Component{constructor(){super(...arguments);this.state={initTableClassName:""},this.handleTableSticky=()=>{var n=(0,f.findDOMNode)(this.pageRef);this.pageRef.tableRef.offsetTop+46<=n.parentNode.scrollTop?this.pageRef.tableRef.className.indexOf("fixed-table-thead")===-1&&(this.pageRef.tableRef.className="".concat(this.pageRef.tableRef.className," fixed-table-thead"),this.resetThTdWidth()):this.pageRef.tableRef.offsetTop>n.parentNode.scrollTop&&(this.pageRef.tableRef.className=this.state.initTableClassName)},this.resetThTdWidth=()=>{var n=this.pageRef.tableRef.getElementsByTagName("thead")[0];n.style.width="".concat(this.pageRef.tableRef.offsetWidth,"px");var P=n.childNodes[0];n.childNodes[1]&&(n.childNodes[1]="".concat(this.pageRef.tableRef.offsetWidth,"px")),P.style.width="".concat(this.pageRef.tableRef.offsetWidth,"px");var $=this.pageRef.tableRef.getElementsByTagName("tbody")[0].childNodes,U=!1;if($&&$.length){try{var V=$[0].getAttribute("class");V==="ant-table-placeholder"&&(U=!0)}catch(Z){console.log(Z)}if(!U){var I=$[0].childNodes;if(I&&I.length){var _=I&&I.length&&Array.prototype.slice.call(I).map(Z=>Z.offsetWidth);P.childNodes&&P.childNodes.length&&Array.prototype.slice.call(P.childNodes).forEach((Z,r)=>{Z.style.width="".concat(_[r],"px")}),_.map(Z=>Z)}}}}}componentDidMount(){var n=(0,f.findDOMNode)(this.pageRef);this.setState({initTableClassName:this.pageRef.tableRef.className}),n.parentNode.addEventListener("scroll",this.handleTableSticky),window.addEventListener("resize",this.resetThTdWidth)}componentDidUpdate(){(0,v.P2)(this.handleTableSticky,500)()}componentWillUnmount(){var n=(0,f.findDOMNode)(this.pageRef);n.parentNode.removeEventListener("scroll",this.handleTableSticky),window.removeEventListener("resize",this.resetThTdWidth)}render(){return H().createElement(p,(0,K.Z)({ref:n=>this.pageRef=n},this.props))}};j.Z=x},11449:function(q,j,e){"use strict";e.d(j,{Z:function(){return w}});var K=e(88986),z=e(33565),H=e(12924),f=e.n(H),L=e(3115),v=e(49111),x=e(19650),p=e(62029),N=e(57663),n=e(71577),P=e(91768),$=e(28216),U=e(37055),V=e(10237);function I(C){var y=U.ZP.getHelpContentByMenuKey(),O={key:C};return V.WY.get({url:y,params:O})}var _=e(74228),Z=e.n(_),r=e(1164),s=e(76466),c=e(38642);class i extends f().Component{constructor(y){var O;super(y);O=this,this.getHelpContentByMenuKey=()=>{var b=this.props.defaultMenuKey;I(b).then(F=>{var A=F.data,B=A.help_url,Y=A.video_url;this.setState({videoUrl:Y,helpUrl:B})})},this.handleOpenHelpUrl=b=>{if((0,c.ve)()){window.open(b,"_blank");return}r.Z.targetTo({path:b,isExternalLink:!0})},this.handleOpenVideo=function(b){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O.props.t("helpCenter.video");O.setState(A=>({resourcePlayInfo:(0,K.Z)((0,K.Z)({},A.resourcePlayInfo),{},{resourceInfo:{originUrl:b,source:{FD:b,OD:b},contentType:"mp4"}}),previewInfo:(0,K.Z)((0,K.Z)({},A.previewInfo),{},{title:F,visible:!0,onCancel:O.handleCancelPreview})}))},this.handleCancelPreview=()=>{var b=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,K.Z)((0,K.Z)({},b),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:y.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var y=this.state,O=y.helpUrl,b=y.resourcePlayInfo,F=y.previewInfo,A=y.videoUrl,B=this.props.t;return f().createElement("div",{className:Z().helpCenter},A&&f().createElement(n.Z,{type:"link",className:Z()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(A)},B("helpCenter.video")),O&&f().createElement(n.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(O)},B("helpCenter.tutorial")),f().createElement(s.Z,(0,p.Z)({},b,{previewInfo:F})))}}var a=C=>({defaultMenuKey:C.currentRoute.menuKey});i.defaultProps={defaultMenuKey:""};var h=(0,$.$j)(a)((0,P.Z)()(i));function d(C){var y=C.extra,O=localStorage.getItem("dingPersonnel"),b=sessionStorage.getItem("dingPersonnel");return f().createElement(x.Z,null,y,O!=="dingPersonnel"&&b!=="dingPersonnel"&&(0,c.eY)("COMMONEXTRA_HELP_CENTER")&&f().createElement(h,null))}var m=d,T=e(4408);function R(C){var y=(0,H.useState)({helpCenter:(0,c.eY)("HEAD_HELP_CENTER_BUT")}),O=(0,z.Z)(y,1),b=O[0],F=C.pageContainerParams,A=F===void 0?{}:F,B=C.noPadding,Y=B===void 0?!1:B,W=C.isPersonal,se=W===void 0?!1:W,ee=C.pageTitle,te=C.className,u=te===void 0?"":te,t={extra:b.helpCenter?f().createElement(m,{extra:A.extra}):A.extra},o=(0,K.Z)((0,K.Z)({},A),t);return f().createElement("div",{className:"page-container-content ".concat(Y?"page-container-noPadding":""," ").concat(se?"page-container-content_personal_background":""," ").concat(u)},ee&&f().createElement(T.Z,{title:ee}),se?f().createElement(L.Z,null,C.children):f().createElement(L.Z,o,C.children))}var w=R},72456:function(q,j,e){"use strict";var K=e(49111),z=e(19650),H=e(57663),f=e(71577),L=e(12924),v=e.n(L),x=e(28216),p=e(91768),N=e(84391),n=e(90631),P=e(49101),$=e(76651),U=e(31945),V=e(1164),I=e(51697),_=r=>{var s=r.user,c=r.currentRoute,i=r.advancedSetting;return{currentPath:c.path,allAuthRoutes:c.allAuthRoutes,userLng:s.lng,themeColor:i.themeColor,qyShield:s.qyShield}};class Z extends v().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var s=this.props.tabLink;$.m8.push(s)},this.renderActionBtn=()=>{var s=this.props,c=s.prefixCls,i=s.actionText,a=s.t,h=s.tabLink,d=s.showBtn,m=s.renderActionBtn,T=s.newPage,R=s.popOverProps,w=R===void 0?[]:R,C=s.renderGuide,y=C===void 0?!1:C,O=s.showDownloadBtn,b=O===void 0?!1:O,F=s.showImportBtn,A=F===void 0?!1:F,B=s.showCreateBtn,Y=B===void 0?!0:B,W=s.rowReverse,se=W===void 0?!1:W,ee="".concat(c,"__action");if(!d&&m&&typeof m=="function")return v().createElement("div",{className:ee},m());if(!d||!i)return null;var te=w.length?w[0].contentText:"";return v().createElement("div",{className:"".concat(ee," ").concat(se&&"row-reverse")},v().createElement(z.Z,{size:16},b&&v().createElement(f.Z,{icon:v().createElement(N.Z,null),onClick:this.handleDownload},a("common.exportData")),A&&v().createElement(f.Z,{icon:v().createElement(n.Z,null),onClick:this.handleImport},a("exam.importTemplate")),Y&&T&&v().createElement(V.Z,{to:h},v().createElement(I.Z,{visible:te&&y,placement:"topLeft",title:te},v().createElement(f.Z,{type:"primary",id:"create-project-button",icon:v().createElement(P.Z,null)},i))),Y&&!T&&v().createElement(f.Z,{type:"primary",id:"create-project-button",icon:v().createElement(P.Z,null),onClick:this.handleCreate},i)))},this.renderQueryRow=()=>{var s=this.props,c=s.queryRowParams,i=s.queryRowList,a=s.queryRowSelectedCourseIds,h=s.queryRowSelectedProjectIds,d=s.queryRowOnForceRender,m=s.queryRowOnClassifyChange,T=s.queryRowOnTypeChange,R=s.queryRowOnCourseTypeChange,w=s.queryRowAllowActions,C=s.showNum,y=C===void 0?1:C;return v().createElement(U.Z,{params:c,list:i,selectedCourseIds:a,selectedProjectIds:h,onForceRender:d,onClassifyChange:m,onTypeChange:T,onCourseTypeChange:R,allowActions:w,showNum:y,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var s=this.props,c=s.t,i=s.extraBtnSelectedRowKeys,a=s.extraBtnHandleMultiVisibleRange;return v().createElement(f.Z,{disabled:i.length===0,onClick:a},c("courseManage.setTheVisibility"))}}render(){var s=this.props,c=s.prefixCls,i=s.wrapCls,a=s.showRenderQueryRow,h=s.showRendeExtraBtn;return v().createElement(v().Fragment,null,v().createElement("div",{className:"render_other"},v().createElement("header",{className:"".concat(c," ").concat(i)},v().createElement("section",{className:"".concat(c,"__radiocol")},this.renderActionBtn(),a&&this.renderQueryRow(),h&&this.rendeExtraBtn()))))}}Z.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},j.Z=(0,x.$j)(_)((0,p.Z)()(Z))},62117:function(q,j,e){"use strict";var K=e(63185),z=e(9676),H=e(43358),f=e(34041),L=e(88983),v=e(47933),x=e(12924),p=e.n(x),N=e(28216),n=e(91768),P=e(48479),$=e(2971),U=e(45601),V=e(7249),I=Z=>{var r=Z.user,s=Z.currentRoute,c=Z.advancedSetting;return{currentPath:s.path,allAuthRoutes:s.allAuthRoutes,userLng:r.lng,themeColor:c.themeColor,appType:r.appType,appId:r.appId}};class _ extends p().Component{constructor(r){super(r);this.setPlaceholder=()=>{var s=this.props,c=s.currentPath,i=s.allAuthRoutes,a=s.userLng,h=this.state.language,d=i[c],m=this.props,T=m.appType,R=m.appId,w=localStorage.getItem("qyWechatBook"),C=T==="wx_app"&&w==="true"&&R==="9005";if(!!d){var y=h[a].searchInputPlaceholder,O="";d.menuKey==="studyTemplate"||d.menuKey==="examTemplate"?O=y.template:d.menuKey==="employee"||d.menuKey==="obligatory"||d.menuKey==="elective"||d.menuKey==="plan"||d.menuKey==="evaluation"||d.menuKey==="myEvaluationPlan"?O=y.task:d.menuKey==="studyProject"?O=C?y.byProjectName:y.byProjectNameOrCreator:d.menuKey==="management"?O=C?y.byTaskName:y.byTaskNameOrCreator:O=y[d.menuKey],this.setState({currentPlaceholder:O})}},this.handleRadiosChange=s=>{this.props.onRadiosChange(s.target.value)},this.handleSelectChange=s=>{this.props.onSelectChange(s)},this.handleSearch=(s,c)=>{this.props.onSearch(s,c)},this.handleChange=s=>{this.props.onCheckboxChange(s.target.checked)},this.renderRadios=()=>{var s=this.props,c=s.prefixCls,i=s.radioList,a=s.defaultRadioValue,h=s.radioValue;if(!i.length)return null;var d=a||i[0].value,m="".concat(c,"__radios");return p().createElement("div",{className:m},typeof h!="undefined"?p().createElement(v.ZP.Group,{defaultValue:d,value:h,onChange:this.handleRadiosChange},i.map(T=>p().createElement(v.ZP.Button,{key:T.value,value:T.value},T.name))):p().createElement(v.ZP.Group,{defaultValue:d,onChange:this.handleRadiosChange},i.map(T=>p().createElement(v.ZP.Button,{key:T.value,value:T.value},T.name))))},this.renderSelect=()=>{var s=this.props,c=s.prefixCls,i=s.selectList,a=s.defaultSelectValue;if(!i.length)return null;var h=a||i[0].value,d="".concat(c,"__select");return p().createElement("div",{className:d},p().createElement(f.Z,{defaultValue:h,onChange:this.handleSelectChange,style:{minWidth:100}},i.map(m=>p().createElement(f.Z.Option,{key:m.value,value:m.value},m.name))))},this.renderOther=()=>{var s=this.props,c=s.prefixCls,i=s.renderOther,a=s.showOther,h="".concat(c,"__other");if(a&&i&&typeof i=="function")return p().createElement("div",{className:h},i())},this.renderCheckbox=()=>{var s=this.props,c=s.prefixCls,i=s.t,a=s.label,h=s.showCheckbox,d=s.renderActionSelect,m="".concat(c,"__checkbox");return!h&&d&&typeof d=="function"?p().createElement("div",{className:m},d()):h?p().createElement("div",{className:m},p().createElement(z.Z,{onChange:this.handleChange},a||i("common.myCreated"))):null},this.renderSearch=()=>{var s=this.props,c=s.prefixCls,i=s.showSearch,a=s.inputPlaceholder,h=s.maxLength,d=h===void 0?400:h,m=s.value,T="".concat(c,"__search");if(!i)return null;var R=this.state.currentPlaceholder;return a?p().createElement("div",{className:T},p().createElement(P.Z,{onSearch:this.handleSearch,placeholder:a,width:272,maxLength:d})):p().createElement("div",{className:T},p().createElement(P.Z,{onSearch:this.handleSearch,placeholder:R,width:272,maxLength:d,value:m}))},this.renderSearchOther=()=>{var s=this.props.renderSearchOther;return s?s():null},this.state={language:{zh_cn:U.Z,en_us:$.Z,zh_hk:V.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(r){r.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var r=this.props,s=r.prefixCls,c=r.wrapCls,i=r.showRenderRadios,a=i===void 0?!0:i,h=r.showRenderSelect;return p().createElement(p().Fragment,null,p().createElement("div",{className:"render_other"},this.renderOther(),p().createElement("header",{className:"".concat(s," ").concat(c)},p().createElement("section",{className:"".concat(s,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),a&&this.renderRadios(),h&&this.renderSelect(),this.renderSearch()))))}}_.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},j.Z=(0,N.$j)(I)((0,n.Z)()(_))},28107:function(q,j,e){"use strict";var K=e(66456),z=e(55313),H=e(22385),f=e(31097),L=e(57663),v=e(71577),x=e(71194),p=e(57016),N=e(88986),n=e(12924),P=e.n(n),$=e(91768),U=e(10237),V=e(37055),I=e(6793),_=e(18329),Z=e(95664);class r extends P().Component{constructor(c){super(c);this.onCancel=()=>{var i=this.props,a=i.handleReferenceList,h=i.onReferenceList;a?a():h&&h()},this.onContinueEdit=()=>{var i=this.props.continueEdit;i&&i()},this.initTableList=(i,a)=>{var h=this.props,d=h.type,m=h.operation,T=h.resourceId,R=h.t,w=this.state.resourceTypes,C=a||m;return this.setState({loading:!0}),U.WY.get({url:V.ZP.deleteResource.check(),params:(0,N.Z)((0,N.Z)({},this.state.params),{},{type:d,id:i||T})}).then(y=>{if(y.data.list&&y.data.list.length===0)return!0;if(y.data.total<2&&y.data.list.length>0){var O=y.data.list[0],b=O.title,F=O.type_name,A=O.create_user_name,B="";return C==="continueEdit"?B=(0,I.ZT)("".concat(R("component.continueEditReminderTip")),w[d],"\u300A".concat(b,"\u300B").concat(F)):C==="forbiddenEdit"?B=(0,I.ZT)("".concat(R("component.forbiddenEditReminderTip")),w[d],"\u300A".concat(b,"\u300B").concat(F)):B=(0,I.ZT)("".concat(R("component.deleteElseReminderTip")),w[d],"\u300A".concat(b,"\u300B(").concat(A?R("common.creator")+":"+A:"",")").concat(F),R(C==="delete"?"common.delete":"course.cancelRelease")),C==="move"?(p.Z.confirm({title:R("common.tip"),content:(0,I.ZT)("".concat(R("component.forbiddenMoveReminderTip")),"\u300A".concat(b,"\u300B").concat(F)),okText:R("common.ok"),onOk:()=>{this.onCancel()},onCancel:()=>{this.onCancel()}}),!1):(C==="continueEdit"?p.Z.confirm({title:R("common.tip"),content:B,okText:R("common.cancel"),cancelText:R("course.continueEdit"),onOk:()=>{this.onCancel()},onCancel:()=>{C==="continueEdit"&&this.props.continueEdit()}}):p.Z.info({title:R("common.tip"),content:B,okText:R("common.ok"),onOk:()=>{this.onCancel()}}),!1)}setTimeout(()=>{this.setState({loading:!1,tableList:y.data.list,tableTotal:y.data.total,tableTotalPages:y.data.pages})},300)})},this.handleTableChange=i=>{var a=this.state.params;a.page_number=i,this.setState({params:a},()=>{this.initTableList()})},this.renderFooter=()=>{var i=this.props,a=i.t,h=i.operation;return P().createElement("div",null,h==="continueEdit"?P().createElement(v.Z,{type:"primary",onClick:this.onContinueEdit},a("course.continueEdit")):null,P().createElement(v.Z,{type:"primary",onClick:this.onCancel},a("common.ok")))},this.state={loading:!0,params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0,resourceTypes:{questionnaire:this.props.t("common.questionnaire"),classify:this.props.t("course.category"),paper:this.props.t("exam.paperAddTitle"),question:this.props.t("learning.questionAddTitle"),course:this.props.t("study.course"),resource:this.props.t("common.courseware"),lecturer:this.props.t("course.lecturer"),evaluationProduct:this.props.t("questionn.evaluationTool")}},this.columns=[{title:this.props.t("common.number"),dataIndex:"userId",width:30,render:(i,a,h)=>h+1},{title:this.props.t("common.name"),dataIndex:"title",width:420,render:i=>P().createElement(f.Z,{title:i},P().createElement("div",{className:"cl-text-ellipsis",style:{width:420}},i))},{title:this.props.t("study.type"),dataIndex:"type_name",width:120},{title:this.props.t("common.creator"),dataIndex:"create_user_name",width:30}]}componentDidMount(){var c=this.props.onRef;c&&c(this)}componentDidUpdate(c){var i=this.props.onRef;i||this.props.visible&&this.props.visible!==c.visible&&this.props.resourceId&&this.setState({params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0},()=>{this.initTableList()})}render(){var c=this.props,i=c.visible,a=c.type,h=c.operation,d=c.t,m=this.state,T=m.loading,R=m.params,w=m.tableList,C=m.tableTotal,y=m.tableTotalPages,O=m.resourceTypes;return P().createElement("div",null,C>1?P().createElement(_.ZP,{visible:i,title:h==="move"?"".concat(d("common.tip")):(0,I.ZT)("".concat(d("component.deleteReminder")),d(h==="delete"?"common.deletion":h==="cancelPublish"?"course.cancelRelease":"common.edit")),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},P().createElement("div",{className:"referenceWithOther"},P().createElement("div",{className:"referenceWithOther__tip"},h==="continueEdit"?"".concat(d("component.this")).concat(O[a]).concat(d("component.continueEditReminderTip2")):h==="forbiddenEdit"?"".concat(d("component.pleaseNote")).concat(O[a]).concat(d("component.forbiddenEditReminderTip2")):h==="move"?"".concat(d("component.forbiddenMoveTip")):(0,I.ZT)("".concat(d("component.deleteReminderTip")),O[a],d(h==="delete"?"common.delete":"course.cancelRelease"))),P().createElement(z.Z,{bordered:!0,size:"middle",columns:this.columns,rowKey:"id",dataSource:w,pagination:!1,loading:T}),P().createElement(Z.Z,{defaultPageSize:10,totalNum:C,totalPage:y,current:R.page_number,showRenderRefresh:!1,onChange:this.handleTableChange}))):null)}}j.Z=(0,$.Z)()(r)},41656:function(q,j,e){"use strict";e.r(j),e.d(j,{default:function(){return ee}});var K=e(62029),z=e(14781),H=e(53431),f=e(63185),L=e(9676),v=e(34792),x=e(48086),p=e(88986),N=e(12924),n=e.n(N),P=e(91768),$=e(72456),U=e(62117),V=e(1164),I=e(36202),_=e(59250),Z=e(13013),r=e(30887),s=e(99210),c=e(71194),i=e(57016),a=e(57119),h=e(57254),d=e(37055),m=e(10237),T=e(28107);class R extends n().PureComponent{constructor(){super(...arguments);this.state={referenceWithOtherConfig:{visible:!1,type:"questionnaire",operation:"cancelPublish",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList}},this.onCancelPublish=()=>{var u=this.props,t=u.record,o=u.t,l=d.ZP.QuestionnairePaper.cancelPublish(t.id);m.WY.post({url:l}).then(()=>{x.default.success(o("personal.cancelPublishSuccess")),this.props.onCancelPublish()}).catch(E=>{(E.response.data.code==="enterpriseapi.4061"||E.response.data.code==="enterpriseapi.517001")&&this.handleReferenceList(t.id)})},this.copy=()=>{var u=this.props,t=u.record,o=u.t,l=d.ZP.QuestionnairePaper.copy(t.id);m.WY.get({url:l}).then(E=>{var S=E.data,g=S.code,D=S.msg;g===0?x.default.success(o("exam.copySucceed")):x.default.info(D),this.props.onPublish()})},this.publish=()=>{var u=this.props,t=u.record,o=u.t,l=d.ZP.QuestionnairePaper.publish(t.id);m.WY.post({url:l}).then(E=>{E.data.code===0&&x.default.success(o("personal.publishSuccess")),this.props.onPublish()})},this.handleReferenceList=u=>{this.setState(t=>({referenceWithOtherConfig:(0,p.Z)((0,p.Z)({},t.referenceWithOtherConfig),{},{visible:!t.referenceWithOtherConfig.visible,resourceId:u||""})}))},this.remove=()=>{var u=this.props,t=u.record,o=u.t,l=d.ZP.QuestionnairePaper.remove(t.id);m.WY.post({url:l}).then(()=>{x.default.success(o("personal.removeSuccess")),this.props.onRemove()})},this.handleMenuClick=u=>{var t=this.props,o=t.t,l=t.record;u==="delete"?i.Z.confirm({icon:n().createElement(a.Z,null),content:"".concat(o("common.confirmDeleteTitle"),"?"),cancelText:o("common.cancel"),okText:o("common.delete"),onOk:()=>{this.remove()}}):u==="release"?this.publish():u==="copy"?this.copy():u==="visibility"&&this.props.setVisibleRange(l)},this.renderDraftOperate=()=>{var u=this.props,t=u.record,o=u.t,l=n().createElement(s.Z,{onClick:E=>{var S=E.key;return this.handleMenuClick(S)}},n().createElement(s.Z.Item,{key:"delete"},n().createElement("span",{className:"cl-pointer"},o("common.delete"))),n().createElement(s.Z.Item,{key:"release"},n().createElement("span",{className:"cl-pointer"},o("common.release"))),n().createElement(s.Z.Item,{key:"copy"},n().createElement("span",{className:"cl-pointer"},o("common.copy"))));return n().createElement(n().Fragment,null,n().createElement(V.Z,{to:"/training/questionn/questionnaire/add?id=".concat(t.id)},n().createElement("div",{className:"cl-pointer",onClick:this.onCheckEdit},this.props.t("common.edit"))),n().createElement("span",{className:"cl-pointer-divide"}),n().createElement(Z.Z,{overlay:l},n().createElement("span",{className:"cl-pointer"},this.props.t("common.more")," ",n().createElement(h.Z,null))))},this.renderReleaseOperate=()=>{var u=this.props.t,t=n().createElement(s.Z,{onClick:o=>{var l=o.key;return this.handleMenuClick(l)}},n().createElement(s.Z.Item,{key:"visibility"},n().createElement("span",{className:"cl-pointer"},u("courseManage.setTheVisibility"))),n().createElement(s.Z.Item,{key:"copy"},n().createElement("span",{className:"cl-pointer"},u("common.copy"))));return n().createElement(n().Fragment,null,n().createElement("a",{className:"cl-pointer",onClick:this.onCancelPublish},this.props.t("courseManage.cancelPublished")),n().createElement("span",{className:"cl-pointer-divide"}),n().createElement(Z.Z,{overlay:t},n().createElement("span",{className:"cl-pointer"},this.props.t("common.more")," ",n().createElement(h.Z,null))))}}render(){var u=this.props.filterStatus,t=this.state.referenceWithOtherConfig;return n().createElement("div",{className:"cl-table__cell-action"},u==="draft"?this.renderDraftOperate():this.renderReleaseOperate(),n().createElement(T.Z,(0,K.Z)({},t,{onReferenceList:this.handleReferenceList})))}}R.defaultProps={record:{},onRemovePaper:()=>{}};var w=(0,P.Z)()(R);class C extends n().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var u=this.props.filterStatus,t=[{title:this.props.t("investigatePageList.questionnaireName"),dataIndex:"title",key:"id",render:(o,l)=>n().createElement(V.Z,{to:"/training/questionn/questionnaire/view?id=".concat(l.id)},n().createElement("span",{className:"paper-table-title cl-hover"},o))},{title:this.props.t("common.visibleRange"),dataIndex:"visible_range",key:"visible_range",width:this.props.lng==="en_us"?120:100,render:o=>o==="all"?this.props.t("common.allCompany"):this.props.t("setting.partlyVisible")},{title:this.props.t("common.creator"),width:106,dataIndex:"create_user_name",key:"create_user_name"},{title:u==="release"?this.props.t("study.releaseTime"):this.props.t("common.createTime"),width:164,dataIndex:"updateTimeLabel",key:"updateTimeLabel"},{title:this.props.t("common.operate"),width:u==="release"?170:120,key:"operate",render:(o,l)=>n().createElement(w,{record:l,filterStatus:u,onCancelPublish:this.props.onCancelPublish,onPublish:this.props.onPublish,onRemove:this.props.onRemove,setVisibleRange:this.props.setVisibleRange})}];return t}}render(){var u=this.props,t=u.isLoading,o=u.paperList,l=u.onSelectChange,E=u.selectedRowKeys,S=u.toolBarRender,g=u.headerTitle,D=this.getTableColumn(),M={selectedRowKeys:E,onChange:l};return n().createElement(I.f,{dataSource:o,columns:D,rowKey:Q=>Q.id,pagination:!1,rowSelection:M,loading:t,toolBarRender:S,headerTitle:g,tableUUID:"f9c54284-59cc-4c91-b166-82f751ded9b9"})}}var y=(0,P.Z)()(C),O=e(4408),b=e(84009),F=e(63848),A=e(30389),B=e(6793),Y=e(11449),W={pageNumber:1,pageSize:20};class se extends n().Component{constructor(u){super(u);this.onCancelPublish=()=>{W.pageNumber=1,this.getPaperList()},this.getPaperList=()=>{var t=d.ZP.QuestionnairePaper.getPaperList(),o=this.props.t,l=this.state,E=l.keyword,S=l.userIds,g=l.onlySeeMe,D=l.classify,M=l.filterStatus,Q=W.pageNumber,G=W.pageSize,X={keyword:E,create_status:g?"own":"all",page_size:G,page_number:Q,course_classify:D.join(","),status:M,userIds:S};this.setState({isLoading:!0}),m.WY.get({url:t,params:X}).then(k=>{k.data.questionnaires.list.forEach(J=>{J.updateTimeLabel=(0,B.p6)(J.update_time,"yyyy-MM-dd hh:mm")}),this.setState({isLoading:!1,paperList:k.data.questionnaires.list,paperTotal:k.data.questionnaires.total,radioList:[{name:"".concat(o("personal.published"),"(").concat(k.data.release_count,")"),value:"release"},{name:"".concat(o("personal.draft"),"(").concat(k.data.draft_count,")"),value:"draft"}]})})},this.search=(t,o)=>{W.pageNumber=1;var l={keyword:o===""?t:"",userIds:o};this.setState(l,()=>{this.getPaperList()})},this.pageChange=t=>{W.pageNumber=t,this.getPaperList()},this.pageSizeChange=(t,o)=>{W.pageSize=o,this.getPaperList()},this.classifyChange=t=>{W.pageNumber=1,this.setState({classify:t},()=>{this.getPaperList()})},this.changeOnlySeeMe=t=>{var o=t.target.checked;W.pageNumber=1,this.setState({onlySeeMe:o},()=>{this.getPaperList()})},this.handleChangeStatus=t=>{W.pageNumber=1,this.setState({filterStatus:t},this.getPaperList)},this.handleTableSelectChange=t=>{this.setState({selectedRowKeys:t})},this.handleMultiVisibleRange=()=>{var t=this.state.selectedRowKeys;this.setState(o=>({employeeProps:(0,p.Z)((0,p.Z)({},o.employeeProps),{},{visible:!0,paperIds:t,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[]}}}})}))},this.handleSingleVisibleRange=t=>{var o=t.visible_range,l=t.scopes,E=t.id;this.setState({employeeProps:{visible:!0,paperIds:[E],initialParams:{employeeRange:{rangeType:o==="all"?1:o==="part"?2:3,rangeList:{dept:l?l.department_list:[],post:l?l.post_list:[],group:l?l.group_list:[],user:l?l.user_list:[]}}}}})},this.handleEmployeeOk=t=>{var o=this.state.employeeProps.paperIds,l=t.isAll,E=t.departmentIds,S=t.groupIds,g=t.postIds,D=t.userIds,M=t.qy_we_chat_vo,Q={ids:o.join(","),visible_range:l===1?"all":l===2?"part":"myself",department_ids:E,group_ids:S,post_ids:g,user_ids:D,qy_we_chat_vo:M};this.withApiSetEmployeeOk(Q)},this.withApiSetEmployeeOk=t=>{var o=this.props.t;m.WY.post({url:d.ZP.QuestionnairePaper.batchUpdateVisible(),data:(0,p.Z)({},t)}).then(l=>{l.data.result&&x.default.success(o("personal.batchSetRangeSuccess")),this.setState({selectedRowKeys:[]}),this.handleEmployeeCancel(),this.getPaperList()})},this.handleEmployeeCancel=()=>{this.setState(t=>({employeeProps:(0,p.Z)((0,p.Z)({},t.employeeProps),{},{visible:!1})}))},this.renderLeftRow=()=>{var t=this.props.t,o=this.state.selectedRowKeys;return n().createElement($.Z,{showBtn:!0,actionText:t("investigatePageList.newQuestionnaire"),tabLink:"/training/questionn/questionnaire/add",showRendeExtraBtn:!0,extraBtnSelectedRowKeys:o,extraBtnHandleMultiVisibleRange:this.handleMultiVisibleRange})},this.renderRightRow=()=>{var t=this.state,o=t.filterStatus,l=t.radioList;return n().createElement(U.Z,{onSearch:this.search,showCheckbox:!1,radioList:l,radioValue:o,onRadiosChange:this.handleChangeStatus})},this.state={keyword:"",onlySeeMe:!1,paperList:[],paperTotal:0,classify:[],isLoading:!1,filterStatus:"release",radioList:[],employeeProps:{visible:!1,paperIds:"",initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[]}}}},selectedRowKeys:[]}}componentDidMount(){this.getPaperList()}render(){var u=this.state,t=u.paperList,o=u.paperTotal,l=u.isLoading,E=u.filterStatus,S=u.classify,g=u.employeeProps,D=u.selectedRowKeys,M=this.props.t,Q=(0,p.Z)((0,p.Z)({},d.XE.INITIAL_PAGINATION),{},{current:W.pageNumber,total:o,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return n().createElement(Y.Z,{pageContainerParams:{header:{title:this.props.t("leftMenuLists.questionnaireManagement")}}},n().createElement(O.Z,{title:M("leftMenuLists.questionnaireManagement")}),n().createElement("div",{className:"questionnaire-paper sticky-table"},n().createElement("div",{className:"questionnaire-paper-container"},n().createElement("div",{className:"questionnaire-paper-filter"},n().createElement(F.Z,{onChange:this.classifyChange,unclassified:!0,value:S,showLabel:!1,className:"cl-search-normal-width",queryType:"questionnaire_manage"}),n().createElement(L.Z,{onChange:this.changeOnlySeeMe,style:{marginLeft:16}},M("common.myCreated"))),n().createElement("div",{className:"questionnaire-paper-list"},n().createElement("div",{className:"questionnaire-paper-list-table",ref:G=>this.tableRef=G},n().createElement(y,{paperList:t,onRemovePaper:this.onRemovePaper,isLoading:l,filterStatus:E,onCancelPublish:this.onCancelPublish,onPublish:this.onCancelPublish,onRemove:this.onCancelPublish,selectedRowKeys:D,onSelectChange:this.handleTableSelectChange,setVisibleRange:this.handleSingleVisibleRange,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow})),o>W.pageSize||!Q.hideOnSinglePage?n().createElement("div",{className:"questionnaire-paper-list-pagination"},n().createElement(H.Z,Q)):null,g.visible&&n().createElement(A.Z,(0,K.Z)({},g,{title:M("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:M("component.chooseVisibleScope")},onlyChooseDept:!0,rangeAuth:!0,isLoading:!g.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk}))))))}componentWillUnmount(){W.pageNumber=1,W.pageSize=20}}var ee=(0,P.Z)()((0,b.Z)()(se))},31945:function(q,j,e){"use strict";e.d(j,{Z:function(){return te}});var K=e(88983),z=e(47933),H=e(20228),f=e(11382),L=e(62029),v=e(30887),x=e(99210),p=e(59250),N=e(13013),n=e(57663),P=e(71577),$=e(63185),U=e(9676),V=e(71194),I=e(57016),_=e(88986),Z=e(34792),r=e(48086),s=e(43358),c=e(34041),i=e(12924),a=e.n(i),h=e(28216),d=e(91768),m=e(57254),T=e(18329);class R extends a().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var t=this.props,o=t.visible,l=t.courseList,E=t.t;return a().createElement(T.ZP,{visible:o,title:E("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},a().createElement("div",{className:"referenceWithOtherCourses"},a().createElement("div",{className:"referenceWithOtherCourses__tip"},E("course.deleteCourseTip")),l.map((S,g)=>a().createElement("div",{className:"referenceWithOtherCourses__item",key:g},l.length>1?"".concat(g+1,"\u3001"):null," ",S))))}}var w=(0,d.Z)()(R),C=e(10237),y=e(63848),O=e(58546),b=e(30389),F=e(54792),A=e(86726),B=e(37055),Y=c.Z.Option,W={setClassify:B.ZP.CourseManageList.setClassify,setScore:B.ZP.CourseManageList.setScore,setBatchEmployee:B.ZP.CourseManageList.setBatchEmployee,deleteCourse:B.ZP.CourseManageList.deleteCourse,exportCourseView:B.ZP.CourseManageList.exportCourseView,syncCourse:B.ZP.CourseManageList.syncCourse},se=u=>({qyShield:u.user.qyShield});class ee extends a().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=t=>{this.props.onClassifyChange(t)},this.handleChangeType=t=>{this.props.onTypeChange(t)},this.handleChangeCourseType=t=>{this.props.onCourseTypeChange(t)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=t=>{var o=t.node,l=this.props,E=l.selectedCourseIds,S=l.selectedProjectIds,g=l.onForceRender,D=l.t,M=o.id;M&&C.qg.post({url:W.setClassify(),data:{course_ids:E.join(","),project_ids:S.join(","),classify_id:M}}).then(()=>{r.default.success(D("course.setCourseClassifySuccess")),g()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(t=>({scoreProps:(0,_.Z)((0,_.Z)({},t.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(t=>({scoreProps:(0,_.Z)((0,_.Z)({},t.scoreProps),{},{visible:!1})}))},this.handleScoreOk=t=>{var o=t.value;if(o===0){this.handleScoreCancel();return}var l=this.props,E=l.selectedCourseIds,S=l.selectedProjectIds,g=l.onForceRender,D=l.t;C.qg.post({url:W.setScore(),data:{course_ids:E.join(","),project_ids:S.join(","),credit:o}}).then(()=>{r.default.success(D("course.setCourseScoreSuccess")),g()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(t=>({employeeProps:(0,_.Z)((0,_.Z)({},t.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=t=>{var o=this.props,l=o.selectedCourseIds,E=o.selectedProjectIds,S=o.onForceRender,g=o.t,D=t.isAll,M=t.departmentIds,Q=t.groupIds,G=t.postIds,X=t.userIds,k=t.qy_we_chat_vo;C.WY.post({url:W.setBatchEmployee(),data:{course_ids:l.join(","),project_ids:E.join(","),department_ids:M,group_ids:Q,is_all:D,post_ids:G,user_ids:X,qy_we_chat_vo:k}}).then(()=>{r.default.success(g("personal.batchSetRangeSuccess")),S()}),this.handleEmployeeCancel()},this.showReferenceCourseList=t=>{this.setState(o=>({showReferenceCourseListProps:(0,_.Z)((0,_.Z)({},o.showReferenceCourseListProps),{},{visible:!o.showReferenceCourseListProps.visible,courseList:t||[]})}))},this.actionDelete=()=>{var t=this.props,o=t.selectedCourseIds,l=t.selectedProjectIds,E=t.list,S=t.onForceRender,g=t.t,D=0,M=0,Q=[];if(E.forEach(G=>{o.includes(G.course_id)&&(G.reference_plan_count>0&&(M+=1),G.reference_plan_count>0&&Q.push(G.title),G.can_delete==="true"&&(D+=1))}),M>0)this.showReferenceCourseList(Q);else if(D!==o.length)r.default.warning(g("personal.deletePlatformCourseTip"));else{if(l.length>0){r.default.warning(g("personal.deleteProjectCourseTip"));return}I.Z.confirm({title:g("common.tip"),content:g("common.confirmDeleteTitle"),onOk(){C.qg.post({url:W.deleteCourse(),data:{enterpriseId:B.ZP.enterpriseId,ids:o.join(","),project_ids:l.join(",")}}).then(G=>{var X=G.data,k=X.code,J=X.msg;r.default["".concat(k===0?"success":"warning")](J),k===0&&S()})}})}},this.actionSyncSetting=()=>{this.setState(t=>({asyncProps:(0,_.Z)((0,_.Z)({},t.asyncProps),{},{visible:!0})}))},this.onAsyncChange=t=>{this.setState(o=>({asyncProps:(0,_.Z)((0,_.Z)({},o.asyncProps),{},{value:t.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var t=this.props,o=t.selectedCourseIds,l=t.selectedProjectIds,E=t.onForceRender,S=t.t,g=this.state.asyncProps;C.qg.post({url:W.syncCourse(),data:{course_ids:o.join(","),project_ids:l.join(","),syncProgress:g.value}}).then(D=>{var M=D.data,Q=M.code,G=M.msg;Q===0?(r.default.success(S("setting.setUpSucceed")),E()):r.default.warning(G)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var t=this.props,o=t.selectedCourseIds,l=t.selectedProjectIds,E=t.onForceRender,S=t.t;if(o.concat(l).length>20){r.default.warning(S("courseManage.exportMoreTip"));return}var g=W.exportCourseView(),D={course_Ids:o.join(","),project_Ids:l.join(",")};C.WY.get({url:g,params:D}).then(M=>{M.data.code===200&&r.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),E(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var t=B.ZP.downLoadCenter.getDownLoadingCount();C.WY.get({url:t,params:{}}).then(o=>{sessionStorage.setItem("downloadingCount",o.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:o.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=t=>{this.props.onCheckboxChange(t.target.checked)},this.handleSharingQueryRowCheckboxChange=t=>{this.props.onSharingCheckboxChange(t.target.checked)},this.renderCondition=()=>{var t=this.props,o=t.prefixCls,l=t.params,E=t.qyShield,S=t.t,g=l.classify_id?l.classify_id.split(","):[];return a().createElement("div",{className:"".concat(o,"__condition")},this.props.extraDom&&this.props.extraDom(),a().createElement(y.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:g,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),a().createElement(c.Z,{value:l.type,className:"cl-search-normal-width",onChange:this.handleChangeType},a().createElement(Y,{value:""},this.props.t("courseManage.allOrigin")),a().createElement(Y,{value:"original"},this.props.t("courseManage.originalCourse")),a().createElement(Y,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),a().createElement(Y,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:a().createElement(c.Z,{value:l.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},a().createElement(Y,{value:"all"},this.props.t("courseManage.allType")),a().createElement(Y,{value:"course"},this.props.t("common.courseLabel")),a().createElement(Y,{value:"microCourse"},this.props.t("common.microCourse")),a().createElement(Y,{value:"project"},this.props.t("leftMenuLists.studyProject"))),a().createElement(U.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},S("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&E==="false"?a().createElement(U.Z,{onChange:this.handleSharingQueryRowCheckboxChange},S("common.sharing")):null)},this.renderActions=()=>{var t=this.props,o=t.prefixCls,l=t.selectedCourseIds,E=t.selectedProjectIds,S=t.showNum,g=S===void 0?1:S,D=this.props.allowActions,M=(0,A.H3)("delete",D),Q=(0,A.H3)("adjustment_classification",D),G=(0,A.H3)("set_visible",D),X=(0,A.H3)("export",D),k=(0,A.H3)("set_score",D),J=(0,A.H3)("progressSync",D),le=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:Q},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:X},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:k},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:G},{name:this.props.t("common.delete"),type:"actionDelete",isShow:M},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:J}],ne=le.filter(ae=>ae.isShow),oe=[],re=[];if(ne.length)g?(oe=[...ne.slice(0,g)],re=[...ne.slice(g)]):re=[...ne];else return null;return a().createElement("div",{className:"".concat(o,"__action")},oe.map(ae=>a().createElement(P.Z,{style:{marginRight:"8px"},key:ae.type,disabled:!(l.length+E.length),onClick:this[ae.type]},ae.name)),re.length?a().createElement(N.Z,{disabled:!(l.length+E.length),overlay:this.renderMoreButton({buttons:re})},a().createElement(P.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",a().createElement(m.Z,null))):"")}}renderMoreButton(t){var o=t.buttons,l=this.props,E=l.selectedCourseIds,S=l.selectedProjectIds;return a().createElement(x.Z,{onClick:g=>{var D=g.key;this[D]()}},o.map(g=>g.isShow?a().createElement(x.Z.Item,{key:g.type,disabled:!(E.length+S.length)},a().createElement("span",{className:"cl-pointer"},g.name)):null))}render(){var t=this.props,o=t.prefixCls,l=t.t,E=t.showRenderCondition,S=E===void 0?!0:E,g=t.showRenderActions,D=g===void 0?!0:g,M=this.state,Q=M.classifyProps,G=M.scoreProps,X=M.employeeProps,k=M.showReferenceCourseListProps,J=M.asyncProps;return a().createElement("div",{className:o},S&&this.renderCondition(),D&&this.renderActions(),a().createElement(O.Z,(0,L.Z)({},Q,{title:l("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),a().createElement(F.Z,(0,L.Z)({},G,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),X.visible&&a().createElement(b.Z,(0,L.Z)({},X,{title:l("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:l("component.chooseVisibleScope")},isLoading:!X.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),J.visible&&a().createElement(T.ZP,{wrapClassName:"cl-async-selector-modal",visible:J.visible,title:l("common.scheduleSyncSetting"),okText:l("common.ok"),cancelText:l("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},J.visible?a().createElement("div",{className:"".concat(o,"__async")},a().createElement("p",null," ",l("common.scheduleSyncSettingTip")),a().createElement(z.ZP.Group,{onChange:this.onAsyncChange,value:J.value},a().createElement(z.ZP,{value:0},l("common.outSync")),a().createElement(z.ZP,{value:1},l("common.synchronization")))):a().createElement(f.Z,{size:"large"})),a().createElement(w,(0,L.Z)({},k,{showReferenceCourseList:this.showReferenceCourseList})))}}ee.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var te=(0,d.Z)()((0,h.$j)(se)(ee))}}]);
