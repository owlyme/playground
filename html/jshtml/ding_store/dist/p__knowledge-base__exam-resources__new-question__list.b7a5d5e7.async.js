(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[5982],{28220:function(je,se,e){"use strict";e.d(se,{Z:function(){return o}});var H=e(62029),ue=e(20228),ce=e(11382),Z=e(12924),z=e.n(Z),oe=e(91768),b=e(80991),A={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},x=e(18329),j=e(34773),w=e(52670),d=e(62615);class n extends z().Component{constructor(){super(...arguments);this.initRefFormik=u=>{this.refFormik=u},this.handleBeforeCreate=()=>{var u=this.refFormik;u.submitForm(),u.runValidations().then(Q=>{if(!Object.keys(Q).length){var t=u.state.values.employeeRange,i=(0,j.N)(t.rangeList),k={qyWeChatVo:t.qyWeChatVo,id:this.props.actionId,isAll:t.rangeType,groupIds:t.rangeType===2?i.groupIds:[],departmentIds:t.rangeType===2?i.deptIds:[],userIds:t.rangeType===2?i.userIds:[],postIds:t.rangeType===2?i.postIds:[],clusterIds:t.rangeType===2?i.clusterIds:[]};this.props.onCreate(k)}})},this.handleBeforeCancel=()=>{var u=this.props.onCancel;u()}}render(){var u=this.props,Q=u.visible,t=u.initialParams,i=u.isLoading,k=u.tipInfo,F=u.mode,q=u.onlyChooseDept,ee=u.reserveUser,R=ee===void 0?[]:ee,$=u.t,te=u.title,le=u.orgProps,de=u.rangeAuth,L=u.projectId,E=u.onCancel,I=u.onlyCreateUser,c=u.size,y=u.okText;return i?z().createElement(ce.Z,{size:"large"}):z().createElement(x.ZP,{wrapClassName:"cl-employee-selector-modal",visible:Q,title:te||$("examination.visibleRange"),okText:$("common.ok"),cancelText:$("common.cancel"),size:c,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},i?z().createElement(ce.Z,{size:"large"}):z().createElement(b.J9,{ref:this.initRefFormik,initialValues:t,render:m=>z().createElement(b.l0,{className:"cl-form"},z().createElement(b.gN,(0,H.Z)({component:d.Wc,displayType:"Custom",showSectitle:!1,name:"employeeRange",title:te||$("examination.visibleRange"),okText:y||$("common.ok"),label:te||$("examination.visibleRange"),defaultFieldList:m.values.employeeRange,validate:w.WW,mode:F,rangeAuth:de,onlyChooseDept:q,onlyCreateUser:I,orgProps:le,reserveUser:R,projectId:L,onCancel:E},A)))}),k&&z().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},k))}}n.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{departments:[],posts:[],groups:[],users:[],roles:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var o=(0,oe.Z)()(n)},89962:function(je,se,e){"use strict";var H=e(20228),ue=e(11382),ce=e(66456),Z=e(55313),z=e(49111),oe=e(19650),b=e(62029),A=e(57663),x=e(71577),j=e(34792),w=e(48086),d=e(88986),n=e(33565),o=e(43358),ie=e(34041),u=e(43185),Q=e(53251),t=e(12924),i=e.n(t),k=e(91768),F=e(84391),q=e(59239),ee=e(90411),R=e.n(ee),$=e(84874),te=e(18329),le=e(51524),de=e(65202),L=e(10237),E=e(5259),I=e(49147),c=q.Z.Item,y=Q.Z.Dragger,m=ie.Z.Option,B=(0,de.p)();function T(h){var g=h.t,U=h.title,G=h.visible,J=h.actionUrl,f=h.size,_e=h.isMultiple,p=_e===void 0?!0:_e,V=h.loading,v=V===void 0?!1:V,K=h.withAddQuestionBank,s=h.renderTip,Y=h.renderDownLoad,Se=h.onOk,Pe=h.onCancel,Ce={labelCol:{xs:{span:2},sm:{span:2}},wrapperCol:{xs:{span:16},sm:{span:16}}},me={size:"large",destroyOnClose:!0,footerType:"custom",bodyStyle:{padding:"0"},maskClosable:!1},Fe={name:"file",accept:".doc, .docx, .xls, .xlsx",customRequest:Xe,showUploadList:!1,data:Re};(0,t.useEffect)(()=>{Ue(K?{access_token:window.localStorage.getItem("token"),question_bank_id:ye}:{access_token:window.localStorage.getItem("token")})},[K,ye]);var Ae=[{title:h.t("component.fileName"),dataIndex:"fileName",key:"fileName"},{title:h.t("component.successLabel"),dataIndex:"rightCount"},{title:h.t("component.failedLabel"),dataIndex:"errorCount"}],De=(0,t.useState)({}),Ee=(0,n.Z)(De,2),Re=Ee[0],Ue=Ee[1],be=(0,t.useState)([]),Ke=(0,n.Z)(be,2),Oe=Ke[0],fe=Ke[1],We=(0,t.useState)([]),pe=(0,n.Z)(We,2),Me=pe[0],Ie=pe[1],xe=(0,t.useState)(void 0),ge=(0,n.Z)(xe,2),ye=ge[0],ve=ge[1],he=(0,t.useState)([]),Ne=(0,n.Z)(he,2),l=Ne[0],O=Ne[1],N=(0,t.useState)(!1),X=(0,n.Z)(N,2),ae=X[0],re=X[1],Ze=(0,t.useState)(!1),S=(0,n.Z)(Ze,2),Te=S[0],Qe=S[1],Ge=(0,t.useState)(!1),He=(0,n.Z)(Ge,2),ze=He[0],Le=He[1],Ye=(0,t.useState)({visible:!1,isEdit:!1,editQuestionBankId:"",onCancel:Je,onOk:qe}),ke=(0,n.Z)(Ye,2),$e=ke[0],Be=ke[1];(0,t.useEffect)(()=>{G&&(fe([]),Ie([]),O([]),ve(void 0),re(!1)),K&&Ve()},[G]);function Je(){Be((0,d.Z)((0,d.Z)({},$e),{},{visible:!1}))}function Xe(a){if(Le(!0),r(a.file)){var _=new FormData;_.append("file",a.file),_.append("access_token",window.localStorage.getItem("token")),p?_.append("is_multiple",!0):_.append("is_multiple",!1);var we=(0,L.NN)({headers:{"Content-Type":"multipart/form-data"}});we.post({url:J,data:_}).then(ne=>{C(ne)}).catch(ne=>{ne.message.indexOf("Network")!==-1&&w.default.error(h.t("upload.uploadFail")),ne.response.data.code&&I.Z[ne.response.data.code]&&I.Z[ne.response.data.code].showErrorMessage&&w.default.error(I.Z[ne.response.data.code].content),fe([])}).finally(()=>{Le(!1)})}}function qe(a){var _=a.id;Be((0,d.Z)((0,d.Z)({},$e),{},{visible:!1})),ve(_),Ve()}function Ve(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(K){var _={page_size:100,page_number:1,keyword:a};(0,E.bB)(_).then(we=>{O(we.data.data.list)})}}function et(){Be((0,d.Z)((0,d.Z)({},$e),{},{visible:!0}))}function tt(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";Ve(a)}function at(a){ve(a),re(!1)}function r(a){if(!f)return!0;var _=a.size/1024/1024<f;return _||w.default.error(g("component.importSize",{size:f})),_}function C(a){if(a.data.code==="200000"){var _={newFileName:a.data.data.new_file_name,fileName:a.data.data.file_name,errorCount:a.data.data.error_count,rightCount:a.data.data.right_count};fe([_]),a.data.data.error_messages?(Ie(JSON.parse(a.data.data.error_messages)),Qe(!0)):(Ie([]),Number(_.rightCount)===0?Qe(!0):Qe(!1))}}function D(){if(K&&!ye){re(!0);return}if(!Oe.length){w.default.error(h.onOkTip||g("component.noImportQuestionTip"));return}Se&&Se({importedList:Oe,selectedLib:ye})}function P(){Qe(!1),Pe&&Pe()}function M(){return K&&i().createElement(i().Fragment,null,i().createElement("div",{className:R()["import-file-lib"]},i().createElement(c,(0,b.Z)({required:!0,label:g("component.choosedQuestionLib"),validateStatus:ae?"error":"",help:ae?g("component.chooseQuestionLibTip"):""},Ce),i().createElement(ie.Z,{placeholder:g("component.pleaseChoose"),showSearch:!0,allowClear:!0,value:ye,onSearch:tt,className:R()["import-file-lib-select"],onChange:at,filterOption:(a,_)=>_.props.children.toLowerCase().indexOf(a.toLowerCase())>=0},l.map(a=>i().createElement(m,{key:a.id,value:a.id},a.title))),i().createElement(x.Z,{className:R()["import-file-lib-add"],onClick:et},i().createElement($.Z,{iconClass:"icon-icon_addx"}),g("component.addQuestionBank")))),i().createElement(le.Z,$e))}var W=()=>i().createElement("div",{className:R()["footer-box"]},i().createElement(oe.Z,{value:8},i().createElement(x.Z,{type:"default",disabled:v,onClick:P},g("common.cancel")),i().createElement(x.Z,{type:"primary",disabled:Te||ze,loading:v,onClick:D},g("common.ok"))));return i().createElement(te.ZP,(0,b.Z)({},me,{title:U||g("exam.importTemplate"),visible:G,renderCustomFooter:W,onCancel:P}),i().createElement(ue.Z,{spinning:ze},i().createElement("div",{className:R()["import-file"]},M(),Y&&i().createElement("div",{className:R()["import-file-btns"]},Y()),i().createElement(y,Fe,i().createElement("div",null,i().createElement(F.Z,{style:{color:B,fontSize:"38px"}}),i().createElement("p",null,g("component.dragUpload")))),s&&i().createElement("div",{className:R()["import-file-tips"]}," ",s()," "),i().createElement("div",{className:R()["import-file-table"]},Oe.length>0&&i().createElement(Z.Z,{dataSource:Oe,columns:Ae,bordered:!0,rowKey:a=>a.newfileName,size:"middle",pagination:!1})),Me.length>0?i().createElement("div",{className:R()["import-file-tip"]},i().createElement("p",null,i().createElement($.Z,{iconClass:"icon-tishi"}),g("component.errorTips"),":"),Me.map((a,_)=>i().createElement("p",{key:_},a))):null)))}se.Z=(0,k.Z)()(T)},11449:function(je,se,e){"use strict";e.d(se,{Z:function(){return de}});var H=e(88986),ue=e(33565),ce=e(12924),Z=e.n(ce),z=e(3115),oe=e(49111),b=e(19650),A=e(62029),x=e(57663),j=e(71577),w=e(91768),d=e(28216),n=e(37055),o=e(10237);function ie(L){var E=n.ZP.getHelpContentByMenuKey(),I={key:L};return o.WY.get({url:E,params:I})}var u=e(74228),Q=e.n(u),t=e(1164),i=e(76466),k=e(38642);class F extends Z().Component{constructor(E){var I;super(E);I=this,this.getHelpContentByMenuKey=()=>{var c=this.props.defaultMenuKey;ie(c).then(y=>{var m=y.data,B=m.help_url,T=m.video_url;this.setState({videoUrl:T,helpUrl:B})})},this.handleOpenHelpUrl=c=>{if((0,k.ve)()){window.open(c,"_blank");return}t.Z.targetTo({path:c,isExternalLink:!0})},this.handleOpenVideo=function(c){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:I.props.t("helpCenter.video");I.setState(m=>({resourcePlayInfo:(0,H.Z)((0,H.Z)({},m.resourcePlayInfo),{},{resourceInfo:{originUrl:c,source:{FD:c,OD:c},contentType:"mp4"}}),previewInfo:(0,H.Z)((0,H.Z)({},m.previewInfo),{},{title:y,visible:!0,onCancel:I.handleCancelPreview})}))},this.handleCancelPreview=()=>{var c=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,H.Z)((0,H.Z)({},c),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:E.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var E=this.state,I=E.helpUrl,c=E.resourcePlayInfo,y=E.previewInfo,m=E.videoUrl,B=this.props.t;return Z().createElement("div",{className:Q().helpCenter},m&&Z().createElement(j.Z,{type:"link",className:Q()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(m)},B("helpCenter.video")),I&&Z().createElement(j.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(I)},B("helpCenter.tutorial")),Z().createElement(i.Z,(0,A.Z)({},c,{previewInfo:y})))}}var q=L=>({defaultMenuKey:L.currentRoute.menuKey});F.defaultProps={defaultMenuKey:""};var ee=(0,d.$j)(q)((0,w.Z)()(F));function R(L){var E=L.extra,I=localStorage.getItem("dingPersonnel"),c=sessionStorage.getItem("dingPersonnel");return Z().createElement(b.Z,null,E,I!=="dingPersonnel"&&c!=="dingPersonnel"&&(0,k.eY)("COMMONEXTRA_HELP_CENTER")&&Z().createElement(ee,null))}var $=R,te=e(4408);function le(L){var E=(0,ce.useState)({helpCenter:(0,k.eY)("HEAD_HELP_CENTER_BUT")}),I=(0,ue.Z)(E,1),c=I[0],y=L.pageContainerParams,m=y===void 0?{}:y,B=L.noPadding,T=B===void 0?!1:B,h=L.isPersonal,g=h===void 0?!1:h,U=L.pageTitle,G=L.className,J=G===void 0?"":G,f={extra:c.helpCenter?Z().createElement($,{extra:m.extra}):m.extra},_e=(0,H.Z)((0,H.Z)({},m),f);return Z().createElement("div",{className:"page-container-content ".concat(T?"page-container-noPadding":""," ").concat(g?"page-container-content_personal_background":""," ").concat(J)},U&&Z().createElement(te.Z,{title:U}),g?Z().createElement(z.Z,null,L.children):Z().createElement(z.Z,_e,L.children))}var de=le},51524:function(je,se,e){"use strict";var H=e(49111),ue=e(19650),ce=e(88983),Z=e(47933),z=e(22385),oe=e(31097),b=e(62029),A=e(57663),x=e(71577),j=e(34792),w=e(48086),d=e(57361),n=e(88986),o=e(33565),ie=e(9754),u=e.n(ie),Q=e(12924),t=e.n(Q),i=e(91768),k=e(59239),F=e(55446),q=e.n(F),ee=e(68628),R=e(49101),$=e(76651),te=e(10237),le=e(37055),de=e(18329),L=e(40572),E=e(85372),I=e(5259),c=e(7584),y=e(61066),m=e(93212),B=e(94076),T=e.n(B),h=g=>{var U=g.isEdit,G=g.visible,J=g.saveAndToAdd,f=g.t,_e=g.editQuestionBankId,p=g.onCancel,V=g.onOk,v=(0,Q.useState)({classify_id:"",classify_name:"",title:"",scope:"all",departments_list:[],users_list:[],posts_list:[],groups_list:[],formError:{},resourceViewRange:!1}),K=(0,o.Z)(v,2),s=K[0],Y=K[1],Se=(0,Q.useState)({visible:!1,scopeList:["department","post","group"]}),Pe=(0,o.Z)(Se,2),Ce=Pe[0],me=Pe[1],Fe=(0,Q.useState)(!1),Ae=(0,o.Z)(Fe,2),De=Ae[0],Ee=Ae[1];(0,Q.useEffect)(()=>{Oe(),ye(),U&&be()},[U,G]);var Re=(l,O)=>{Y(N=>(0,n.Z)((0,n.Z)({},N),{},{classify_id:l,classify_name:O[0],formError:{classify_id:!1}}))},Ue=()=>{Ce.visible||me(l=>(0,n.Z)((0,n.Z)({},l),{},{visible:!0}))},be=function(){var l=(0,d.Z)(u().mark(function O(){var N,X,ae,re;return u().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,I.s4)(_e);case 2:N=S.sent,X=N.data,ae=X.code,re=X.data,ae==="200000"&&Ke(re);case 7:case"end":return S.stop()}},O)}));return function(){return l.apply(this,arguments)}}(),Ke=l=>{var O=l.visible_range_vo;Y(N=>(0,n.Z)((0,n.Z)({},N),{},{classify_id:l.classify_id==="999"?"":l.classify_id,classify_name:l.classify_id==="999"?"":l.classify_name,title:l.title,scope:O.visible_range_type,departments_list:O.departments_list,users_list:O.users_list,posts_list:O.posts_list,groups_list:O.groups_list}))},Oe=()=>{Y({classify_id:"",title:"",scope:"all",departments_list:[],users_list:[],posts_list:[],groups_list:[],formError:{},resourceViewRange:!1})},fe=function(){var l=(0,d.Z)(u().mark(function O(){var N,X,ae,re=arguments;return u().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(N=re.length>0&&re[0]!==void 0?re[0]:!1,!We()){S.next=18;break}if(X={classify_id:s.classify_id,classify_name:s.classify_name,title:s.title,visible_range_vo:{visible_range_type:s.scope,departments_list:(0,m.GU)(s.departments_list),posts_list:(0,m.GU)(s.posts_list),groups_list:s.groups_list.map(Te=>({id:Te.id})),users_list:s.users_list.map(Te=>({id:Te.id}))}},Ee(!0),S.prev=4,!U){S.next=11;break}return S.next=8,(0,I.gB)(_e,X);case 8:ae=S.sent,S.next=14;break;case 11:return S.next=13,(0,I.Z2)(X);case 13:ae=S.sent;case 14:ae.data.code==="200000"&&(w.default.success(f(U?"component.editQuestionBankSuccess":"component.addQuestionBankSuccess")),V({id:ae.data.data}),N&&$.m8.push("/knowledgeBase/examResources/newQuestion/detail?questionBankId=".concat(ae.data.data,"&questionBankName=").concat(s.title)));case 15:return S.prev=15,Ee(!1),S.finish(15);case 18:case"end":return S.stop()}},O,null,[[4,,15,18]])}));return function(){return l.apply(this,arguments)}}(),We=()=>{var l=!0;return s.classify_id.length===0&&(s.formError.classify_id=!0,l=!1),s.title.length===0&&(s.formError.titleError=f("common.input",{name:f("component.questionBankName")}),l=!1),s.scope==="part"&&s.departments_list.length===0&&s.users_list.length===0&&s.groups_list.length===0&&s.posts_list.length===0&&(s.formError.scope=!0,l=!1),Y(O=>(0,n.Z)((0,n.Z)({},O),{},{formError:s.formError})),l},pe=l=>{var O=l.trim(),N=s.formError;O?N.titleError="":N.titleError=f("common.input",{name:f("component.questionBankName")}),Y(X=>(0,n.Z)((0,n.Z)({},X),{},{title:O,formError:N}))},Me=l=>{Y(O=>(0,n.Z)((0,n.Z)({},O),{},{scope:l.target.value,departments_list:[],users_list:[],posts_list:[],groups_list:[],formError:{scope:!1}}))},Ie=()=>{me(l=>(0,n.Z)((0,n.Z)({},l),{},{visible:!1}))},xe=l=>{Y(O=>(0,n.Z)((0,n.Z)({},O),{},{departments_list:l.departments,users_list:l.users,groups_list:l.groups,posts_list:l.posts})),me(O=>(0,n.Z)((0,n.Z)({},O),{},{visible:!1}))},ge=(l,O)=>{Y(N=>(0,n.Z)((0,n.Z)({},N),{},{[O]:l}))},ye=()=>{te.WY.get({url:le.ZP.advancedSetting.getSettingStatusByType("jurisdiction_setting"),params:{}}).then(l=>{Y(O=>(0,n.Z)((0,n.Z)({},O),{},{resourceViewRange:JSON.parse(l.data.actions)[1].param.checked==="true"}))})},ve={okText:f("common.ok"),cancelText:f("common.cancel"),width:600,destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,centered:!0},he={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:19},sm:{span:19}}},Ne=t().createElement("div",null,t().createElement(x.Z,{onClick:()=>fe(!1),loading:De},f("common.ok")),t().createElement(x.Z,{type:"primary",onClick:()=>{fe(J)},loading:De},f("examination.okAndAddQuestion")));return J?ve.footer=Ne:ve.footer&&delete ve.footer,t().createElement(de.ZP,(0,b.Z)({title:f(U?"examination.editQuestionBank":"examination.addQuestionBank")},ve,{visible:G,bodyMask:Ce.visible,onCancel:p,centered:!0,onOk:()=>{fe(J)}}),t().createElement("div",{className:T()["add-question-bank"]},t().createElement(k.Z,{className:T()["add-question-bank-form"]},t().createElement(k.Z.Item,(0,b.Z)({label:f("component.questionBankName"),className:T()["add-question-bank-name"],required:!0,validateStatus:s.formError.titleError?"error":"",help:s.formError.titleError},he),t().createElement(c.t,{placeholder:f("component.pleaseInputBankName"),value:s.title,onInput:l=>{pe(l)},LimitLength:30,char:!0,showCount:!0})),t().createElement(k.Z.Item,(0,b.Z)({label:f("examination.questionBankClassify"),required:!0,validateStatus:s.formError.classify_id?"error":"",help:s.formError.classify_id?f("component.pleaseChooseClassify"):""},he),t().createElement("div",{className:T()["classify-select-container"]},t().createElement(L.X,{value:s.classify_id,onFieldChange:Re,classifyName:s.classify_name,auth_type:"edit",filter:!0}))),t().createElement(k.Z.Item,(0,b.Z)({label:f("examination.visibleRange"),validateStatus:s.formError.scope?"error":"",help:s.formError.scope?f("component.setQuestionBankScopeTip"):""},he),t().createElement(Z.ZP.Group,{onChange:Me,value:s.scope},t().createElement(Z.ZP,{value:"all"},f("common.allCompany"),s.resourceViewRange&&t().createElement(oe.Z,{title:f("setting.selectPeopleTip")},t().createElement("span",null,t().createElement(ee.Z,null)))),t().createElement(Z.ZP,{value:"onlyMe"},f("common.onlySeenOwn")),t().createElement(Z.ZP,{value:"part"},f("common.deptAndStu"))),t().createElement(ue.Z,null,t().createElement(x.Z,{icon:t().createElement(R.Z,null),disabled:!!(s.scope&&s.scope!=="part"),onClick:Ue},f("common.select")))),t().createElement("div",{className:T().selectedTree},t().createElement(y.Z,{store:{users:s.users_list,departments:s.departments_list,groups:s.groups_list,posts:s.posts_list,setGroups:l=>{ge(l,"groups_list")},setUsers:l=>{ge(l,"users_list")},setDepartments:l=>{ge(l,"departments_list")},setPosts:l=>{ge(l,"posts_list")}}}))),t().createElement(E.Z,(0,b.Z)({},Ce,{title:f("examination.visibleRange"),value:{users:s.users_list,departments:s.departments_list,groups:s.groups_list,posts:s.posts_list},onOk:xe,onCancel:Ie}))))};h.defaultProps={visible:!1,isEdit:!1,editQuestionBankId:"",saveAndToAdd:!1,onCancel:()=>{},onOk:()=>{}},se.Z=(0,i.Z)()(h)},56590:function(je,se,e){"use strict";var H=e(59250),ue=e(13013),ce=e(57663),Z=e(71577),z=e(30887),oe=e(99210),b=e(22385),A=e(31097),x=e(88986),j=e(33565),w=e(12924),d=e.n(w),n=e(28216),o=e(91768),ie=e(13270),u=e.n(ie),Q=e(1164),t=e(86726),i=F=>{var q=F.user;return{modules:q.modules}};function k(F){var q=F.type,ee=F.modules,R=F.cb,$=F.configs,te=(0,w.useState)([]),le=(0,j.Z)(te,2),de=le[0],L=le[1];(0,w.useEffect)(()=>{var c=(0,t.V9)(q,ee),y=$.map(m=>{if(m.type==="more")return m.visible=!0,m.more.forEach(T=>{T.visible=T.visible||(0,t.H3)(T.type,c)}),m;var B;return typeof m.visible=="function"?B=m.visible():B=m.visible||(0,t.H3)(m.type,c),(0,x.Z)((0,x.Z)({},m),{},{visible:B})});L(y)},[q,ee,$]);var E=c=>d().createElement(oe.Z,{onClick:y=>{var m=y.key;return I(m)}},c.map(y=>{var m=y.disable,B=m===void 0?!1:m,T=y.visible,h=y.name,g=y.type,U=y.tooltip;if(U&&T){var G=U.placement,J=U.title,f=U.mouseEnterDelay;return d().createElement(oe.Z.Item,{key:g,disabled:B},d().createElement(A.Z,{placement:G,title:J,mouseEnterDelay:f},d().createElement("span",null,h)))}return!U&&T?d().createElement(oe.Z.Item,{key:g}," ",d().createElement("span",null,h)," "):null})),I=c=>{typeof R=="function"&&R(c)};return d().createElement("div",{className:u()["left-search"]},de.map(c=>{var y=c.more,m=c.name,B=c.icon,T=c.type,h=c.visible,g=c.tabLink,U=c.disable,G=U===void 0?!1:U,J=c.style,f=J===void 0?"":J;return f==="dropdown"&&y&&y.length>0&&h?d().createElement(ue.Z,{overlay:()=>E(y)},d().createElement(Z.Z,{className:u()["more-opt"],type:"primary"},B,"  ",m," ")):y&&y.length>0?d().createElement(ue.Z,{overlay:()=>E(y)},d().createElement(Z.Z,{className:u()["more-opt"]},m," ",B)):!y&&h?g?d().createElement(Q.Z,{wrapCls:u()["opt-item"],to:g.to},d().createElement(Z.Z,{type:"primary",disabled:G}," ",B,"  ",m," ")):d().createElement(Z.Z,{key:T,className:u()["opt-item"],type:T==="add"?"primary":"",onClick:()=>I(T),disabled:G},B,"  ",m):null}))}se.Z=(0,n.$j)(i)((0,o.Z)()(k))},51943:function(je,se,e){"use strict";e.r(se),e.d(se,{default:function(){return _e}});var H=e(62029),ue=e(63185),ce=e(9676),Z=e(71194),z=e(57016),oe=e(34792),b=e(48086),A=e(88986),x=e(57361),j=e(33565),w=e(9754),d=e.n(w),n=e(12924),o=e.n(n),ie=e(91768),u=e(56590),Q=e(51524),t=e(54029),i=e(62529),k=e(22385),F=e(31097),q=e(90631),ee=e(76651),R=e(84874),$=e(9925);function te(p){ee.m8.push("/knowledgeBase/examResources/newQuestion/detail?questionBankId=".concat(p.id,"&questionBankName=").concat(p.title))}function le(p,V,v){var K=v.importVisible;return[{type:"add",name:p("examination.addQuestionBank"),icon:o().createElement(R.Z,{iconClass:"icon-icon_addx"})},{type:"import",name:p("exam.importTemplate"),icon:o().createElement(q.Z,null),visible:()=>K},{type:"view",name:p("examination.visibleRange"),disable:V.length===0}]}function de(p,V){return{columns:[{title:p("component.questionBankName"),key:"title",width:180,render:(v,K)=>o().createElement("div",{className:"".concat(V.ellipsis," ").concat(V.title),onClick:()=>te(K),style:{width:"180px"}},o().createElement(F.Z,{placement:"top",title:v},o().createElement(R.Z,{iconClass:"icon-wenjianjia"}),v)),fixed:"left"},{title:p("common.single"),key:"single_count",width:60},{title:p("common.multiple"),key:"multiple_count",width:60},{title:p("common.tof"),key:"true_or_false_count",width:60},{title:p("common.blank"),key:"fill_blank_count",width:60},{title:p("common.describe"),key:"short_answer_count",width:60},{title:p("examination.visibleRange"),key:"visible_range_type",width:80,render:v=>o().createElement("div",null,p(v==="all"?"common.allStaff":"examination.part"))},{title:p("common.status"),key:"status",width:80,render:(v,K)=>o().createElement("div",null,o().createElement(i.Z,{color:K.status==="enable"?"#87d068":"#f50",text:K.status==="enable"?p("common.activatedStr"):p("common.deactivatedStr")})),filters:[{text:p("common.all"),value:"all"},{text:p("common.activatedStr"),value:"enable"},{text:p("common.deactivatedStr"),value:"disable"}],filterMultiple:!1},{title:p("common.creator"),width:130,key:"create_user_name",ellipsis:!0,render:(v,K)=>o().createElement($.Z,{userId:K.create_user,userName:K.create_user_name})},{title:p("common.operate"),key:"operate",width:190,fixed:"right",visibleNum:2,buttons:[{key:"edit",name:p("common.edit"),checkAuth:!0},{key:"view",name:p("examination.visibleRange"),checkAuth:!0},{key:"on_off",name:p("common.activatedStr"),visible:v=>v.status==="disable",checkAuth:!0},{key:"on_off",name:p("common.deactivatedStr"),visible:v=>v.status==="enable",checkAuth:!0},{key:"delete",name:p("common.delete"),checkAuth:!0}]}]}}var L=e(5167),E=e.n(L),I=e(48479),c=e(11449),y=e(66361),m=e(89962),B=e(28220),T=e(99533),h=e(99367),g=e(5259),U=e(5430),G=e(84717),J=e(38642),f=p=>{var V=(0,n.useRef)(),v=p.t,K=(0,n.useState)(!1),s=(0,j.Z)(K,2),Y=s[0],Se=s[1],Pe=(0,n.useState)({classify_id:"",classifyName:v("common.all"),keyword:"",visible_range:"all"}),Ce=(0,j.Z)(Pe,2),me=Ce[0],Fe=Ce[1],Ae=(0,n.useState)([]),De=(0,j.Z)(Ae,2),Ee=De[0],Re=De[1],Ue=(0,n.useState)({visible:!1,isEdit:!1,editQuestionBankId:"",onCancel:()=>{Le(!1)},onOk:()=>{Ye()}}),be=(0,j.Z)(Ue,2),Ke=be[0],Oe=be[1],fe=(0,n.useState)({visible:!1,paperIds:"",initialParams:{employeeRange:{rangeType:1,rangeList:{departments:[],posts:[],groups:[],users:[]}}}}),We=(0,j.Z)(fe,2),pe=We[0],Me=We[1],Ie=(0,n.useState)({visible:!1,title:v("exam.paperImportQus"),size:2,isMultiple:!0,actionUrl:U.OB.question.upload()}),xe=(0,j.Z)(Ie,2),ge=xe[0],ye=xe[1],ve=(0,n.useState)(!1),he=(0,j.Z)(ve,2),Ne=he[0],l=he[1];(0,n.useEffect)(()=>{V.current.load(me)},[me]),(0,n.useEffect)(()=>{O()},[]);var O=function(){var r=(0,x.Z)(d().mark(function C(){var D,P,M,W;return d().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,J.Kb)((0,G.UE)());case 2:D=_.sent,P=(0,j.Z)(D,2),M=P[1],W=M.data,W&&W.code===2e5&&l(!!(W&&W.data&&W.data.isFree==="false"));case 7:case"end":return _.stop()}},C)}));return function(){return r.apply(this,arguments)}}(),N=()=>o().createElement("a",{onClick:ae},v("component.downloadTem")),X=()=>o().createElement("ul",{className:E()["download-tip"]},o().createElement("li",null,v("component.fileImportType")),o().createElement("li",null,v("component.fileImportSize")),o().createElement("li",null,v("component.fileImportTip"))),ae=()=>{window.location.href="".concat(U.OB.question.download(),"?access_token=").concat(window.localStorage.getItem("token"),"&is_multiple=true")},re=r=>(0,g.bB)((0,A.Z)((0,A.Z)({},me),r)),Ze=r=>{var C=r.type,D=r.param;Fe(P=>{var M=(0,A.Z)({},P);return C==="classify_id"?(M.classifyName=D.name,M.classify_id=D.id):M[C]=D,M})},S=r=>{switch(r){case"add":Le(!0,!1,!0);break;case"import":ke(!0);break;case"view":Be(!0);break;default:}},Te=r=>{var C=r.type,D=r.disable,P=r.record;if(!D)switch(C){case T.oc.EDIT:Le(!0,!0,!1,P.id);break;case T.oc.DELETE:Ge(P);break;case"on_off":Qe(P);break;case"view":qe(P);break;default:break}},Qe=function(){var r=(0,x.Z)(d().mark(function C(D){var P,M;return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.mA)(D.id,{status:D.status==="enable"?"disable":"enable"});case 2:P=a.sent,M=P.data.code,M==="200000"&&(b.default.success(v("study.updateSuccess")),V.current.load());case 5:case"end":return a.stop()}},C)}));return function(D){return r.apply(this,arguments)}}(),Ge=r=>{if(r.total_count>0){b.default.warning(v("component.deleteQuestionWarn"));return}z.Z.confirm({title:v("common.tip"),okText:v("common.ok"),cancelText:v("common.cancel"),content:v("examination.deleteQuestionBankTip"),onOk:()=>{He(r.id)},onCancel:()=>{}})},He=function(){var r=(0,x.Z)(d().mark(function C(D){var P,M;return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.Wu)(D);case 2:P=a.sent,M=P.data.code,M==="200000"&&(b.default.success(v("personal.removeSuccess")),V.current.load());case 5:case"end":return a.stop()}},C)}));return function(D){return r.apply(this,arguments)}}(),ze=r=>{Re(r)},Le=function(C){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";Oe(W=>(0,A.Z)((0,A.Z)({},W),{},{visible:C,isEdit:D,saveAndToAdd:P,editQuestionBankId:M}))},Ye=()=>{Le(!1),V.current.load()},ke=r=>{ye(C=>(0,A.Z)((0,A.Z)({},C),{},{visible:r}))},$e=function(){var r=(0,x.Z)(d().mark(function C(D){var P,M,W;return d().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return P=D.importedList,_.next=3,(0,g.BX)({new_file_name:P[0].newFileName});case 3:M=_.sent,W=M.data.code,W==="200000"&&(b.default.success(v("examination.importSuccess")),ke(!1),V.current.load());case 6:case"end":return _.stop()}},C)}));return function(D){return r.apply(this,arguments)}}(),Be=r=>{Me(C=>(0,A.Z)((0,A.Z)({},C),{},{visible:r,paperIds:Ee,initialParams:{employeeRange:{rangeType:1,rangeList:{departments:[],posts:[],groups:[],users:[]}}}}))},Je=r=>{var C=r.isAll,D=r.departmentIds,P=r.userIds,M=r.postIds,W=r.groupIds,a={ids:pe.paperIds,visible_range_vo:{visible_range_type:T.kC[C],departments_list:D||[],posts_list:M,groups_list:W,users_list:P||[]}};Xe(a)},Xe=function(){var r=(0,x.Z)(d().mark(function C(D){var P,M;return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.Ff)((0,A.Z)({},D));case 2:P=a.sent,M=P.data.code,M==="200000"&&(b.default.success(v("examination.batchSetRangeSuccess")),Re([]),Be(!1),V.current.load());case 5:case"end":return a.stop()}},C)}));return function(D){return r.apply(this,arguments)}}(),qe=r=>{Ve(r)},Ve=function(){var r=(0,x.Z)(d().mark(function C(D){var P,M,W,a,_;return d().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,(0,g.s4)(D.id);case 2:P=ne.sent,M=P.data,W=M.code,a=M.data,W==="200000"&&(_=a.visible_range_vo,Me(nt=>(0,A.Z)((0,A.Z)({},nt),{},{visible:!0,paperIds:[a.id],initialParams:{employeeRange:{rangeType:T.xj[_.visible_range_type],rangeList:{departments:_.departments_list||[],posts:_.posts_list||[],groups:_.groups_list||[],users:_.users_list||[]}}}})));case 7:case"end":return ne.stop()}},C)}));return function(D){return r.apply(this,arguments)}}(),et=()=>o().createElement(o().Fragment,null,o().createElement(u.Z,{type:"newQuestion",configs:le(v,Ee,{importVisible:Ne}),cb:S}),o().createElement(ce.Z,{className:"top-operate-checkbox",style:{marginLeft:16},onChange:r=>{Ze({type:"visible_range",param:r.target.checked?"onlyMe":"all"})}},v("common.myCreated"))),tt=()=>{var r=p.t;return o().createElement("div",{className:E()["right-opt"]},o().createElement("div",{className:E().search},o().createElement(I.Z,{onSearch:C=>{Ze({type:"keyword",param:C})},placeholder:r("examination.questionBankPlaceholder"),maxLength:15})))},at=()=>{Se(!Y)};return o().createElement(c.Z,{pageContainerParams:{header:{title:v("examination.questionManagement")}},pageTitle:v("examination.questionManagement")},o().createElement("div",{className:E()["question-bank-list"]},o().createElement("div",{className:Y?E()["left-hide"]:E().left},o().createElement(y.Z,{showSearch:!0,isRoot:!0,selectedKeys:[me.classify_id],stickySearch:!0,placeholder:v("common.searchPlaceholder"),onSelect:r=>{Ze({type:"classify_id",param:r})},type:"tree"})),o().createElement("div",{className:E().right},o().createElement("div",{className:E()["top-operate"]},o().createElement("div",{className:Y?E().collapse:E().expand,onClick:at},o().createElement(R.Z,{iconClass:"icon-icon_sx1"})),o().createElement("div",{className:E().classify},me.classifyName)),o().createElement("div",{className:E().table},o().createElement(h.Z,{ref:V,uniKey:"newQuestion",queryParams:(0,A.Z)((0,A.Z)({},de(v,E())),{},{query:re,operateHandles:Te}),rowSelection:{selectedRowKeys:Ee,onChange:ze},pagination:!0,headerTitle:et(),toolBarRender:tt,uuid:"2421f027-3444-430d-9ef4-3110b7e8c240"}))),o().createElement(Q.Z,Ke),pe.visible&&o().createElement(B.Z,(0,H.Z)({},pe,{mode:["all","part","private"],rangeAuth:!0,isLoading:!pe.visible,onCancel:()=>{Be(!1)},onCreate:Je})),o().createElement(m.Z,(0,H.Z)({},ge,{onCancel:()=>{ke(!1)},onOk:$e,renderDownLoad:N,renderTip:X}))))},_e=(0,ie.Z)()(f)}}]);
