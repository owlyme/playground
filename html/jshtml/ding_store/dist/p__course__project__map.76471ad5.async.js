(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[4455],{9700:function(Pe,T,p){"use strict";p.r(T),p.d(T,{default:function(){return Ne}});var _e=p(20228),J=p(11382),Y=p(12924),a=p.n(Y),j=p(91768),Z=p(76651),O=p(57068),b=p(38642),D=p(37055),V=p(10237),K=p(62029),ye=p(71194),Q=p(57016),$=p(58687),q=p(19212),h=p.n(q),ee=p(18329),L=p(84874),M=p(6793),z=p(53009);class F extends a().Component{constructor(){super(...arguments);this.state={visible:!1},this.handleClose=()=>{this.setState({visible:!1})},this.handleOpenInstruction=()=>{this.setState({visible:!0})},this.handleOpenComments=()=>{var e=this.props,t=e.projectId,s=e.taskId;(0,b.eJ)({url:"/course/project?id=".concat(t,"&taskId=").concat(s,"&tab=2")})},this.handleOpenRecord=()=>{var e=this.props,t=e.projectId,s=e.taskId;(0,b.eJ)({url:"/course/project?id=".concat(t,"&taskId=").concat(s,"&tab=3")})},this.getTotalHour=e=>{var t=this.props.t,s=0,n="--",o=[];return e.stages&&(o=(0,z.$x)((0,z.tT)(e.stages),e.stage_error_list.length>0?e.stage_error_list:[]),o.forEach(l=>{l.list.forEach(m=>{m.duration&&(m.type==="course"||(m.originalType==="mp4"||m.originalType==="mp3")&&m.status===3||m.type==="ex")&&(s+=Number(m.duration))})})),s<60&&s>0?n="".concat(s).concat(t("pk.second")):s>60&&(n="".concat(Math.ceil(s/60)).concat(t("common.minutes"))),n}}render(){var e=this.props,t=e.summary,s=e.prefixCls,n=e.progress,o=e.score,l=e.num,m=e.avatar,i=e.t,g=e.template,E=e.summaryBg,d=e.projectInfo,u=e.showRecord,_=e.showComments,I=this.state.visible,y=m||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png"),f=g==="desert"?"__desert":"";return a().createElement("div",{className:h()["".concat(s,"__wrapper")]},a().createElement("div",{className:h()["".concat(s,"__container")]},a().createElement("section",{className:h()["".concat(s,"__container__personal")]},a().createElement("section",{className:h()["".concat(s,"__container__badge")]},a().createElement("img",{className:h()["".concat(s,"__container__badge__avatar")],src:y}),a().createElement("span",{className:h()["".concat(s,"__container__badge__progress").concat(f)]},n,"%")),a().createElement("section",{className:h()["".concat(s,"__container__info").concat(f)]},a().createElement("p",null,(0,M.ZT)("".concat(i("authentication.hadGotScore")),o)),a().createElement("p",null,(0,M.ZT)("".concat(i("authentication.hadExceed")),l)))),a().createElement("section",{className:h()["".concat(s,"__container__title")],onClick:this.handleOpen},a().createElement("h1",{className:h()[g],title:d.title},d.title)),a().createElement("section",{className:h()["".concat(s,"__container__operate")]},a().createElement("section",{className:h()["".concat(s,"__container__item")],onClick:this.handleOpenInstruction},a().createElement("span",{className:h()["".concat(s,"__container__summary__icon")]},a().createElement("img",{src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/instruction.png")})),a().createElement("span",{title:i("authentication.summary"),className:h()["".concat(s,"__container__summary__text").concat(f)]},i("authentication.summary"))),_?a().createElement("section",{className:h()["".concat(s,"__container__item")],onClick:this.handleOpenComments},a().createElement("span",{className:h()["".concat(s,"__container__summary__icon")]},a().createElement("img",{src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/comments.png")})),a().createElement("span",{title:i("authentication.studentComment"),className:h()["".concat(s,"__container__summary__text").concat(f)]},i("authentication.studentComment"))):null,u?a().createElement("section",{className:h()["".concat(s,"__container__item")],onClick:this.handleOpenRecord},a().createElement("span",{className:h()["".concat(s,"__container__summary__icon__record")]},a().createElement("img",{src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/record.png")})),a().createElement("span",{title:i("authentication.record"),className:h()["".concat(s,"__container__summary__text").concat(f)]},i("authentication.record"))):null),a().createElement(ee.ZP,{visible:I,size:"small",footer:null,closable:!1,wrapClassName:h()["".concat(s,"__modal__wrapper")],className:h()["".concat(s,"__modal")],maskStyle:{backgroundColor:"rgba(0, 0, 0, 0.75)"},modalRender:()=>a().createElement("div",{className:h()["".concat(s,"__modal-content").concat(f)]},a().createElement("img",{className:h()["".concat(s,"__modal-content").concat(f,"__image")],src:E}),a().createElement("div",{className:h()["".concat(s,"__modal-content").concat(f,"__summary")]},t||i("tutorial.noIntroduction"),d.stages&&d.stages.length>0?a().createElement("div",{className:"pass-reward"},i("courseManage.estimatedHours"),"\uFF1A",this.getTotalHour(d)):null,d.progress>0||d.times>0?a().createElement("div",{className:"pass-standard"},i("learning.learningAddSecPassTitle"),"\uFF1A",d.progress>0?"".concat(i("learning.learningProjectStudyProgress")).concat(d.progress,"% "):"",d.times>0?" ".concat(i("learning.learningProjectExamProgress")).concat(d.times).concat(i("common.examUnit")):"",d.operation_times>0?" ".concat(i("learning.learningProjectOperationProgress")).concat(d.operation_times).concat(i("common.examUnit")):"",d.finish_evaluation==="true"?" ".concat(i("learning.learningProjectEvaluationProgress")):""):null,d.study_score&&d.study_score.finish_score?a().createElement("div",{className:"pass-reward"},i("learning.learningAddSecRewardTitle"),"\uFF1A",d.study_score?"".concat(d.study_score.finish_score).concat(i("common.credit")):""):null,d.certificate_name?a().createElement("div",{className:"certificate-name"},i("personal.getCerti"),"\uFF1A",d.certificate_name?a().createElement("span",null,"\u300A",d.certificate_name,"\u300B"):null):null),a().createElement("span",{className:h()["".concat(s,"__modal-content").concat(f,"__close")],onClick:this.handleClose},a().createElement(L.Z,{iconClass:"icon-icon_close",size:"32px",color:"#fff"})))})))}}F.defaultProps={progress:0,score:0,num:0,summary:"",avatar:"",prefixCls:"map-key"};var te=(0,j.Z)()(F),xe=p(34792),B=p(48086),W=p(28216),ae=p(94184),v=p.n(ae),X=p(70131),se=p(77565),r=p.n(se),ne=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s="".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/").concat(e%10!=0?e%10:10,".png");return t&&(s="".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/").concat(e%10!=0?e%10:10,"-lock.png")),s};class oe extends a().Component{constructor(){super(...arguments);this.initRef=e=>{this.outerRef=e},this.handleClick=()=>{var e=this.props,t=e.lock,s=e.t,n=e.onItemClick,o=e.stagePass,l=e.index;t==="lock"&&o?B.default.warning(s("authentication.lockedClick")):n(l)},this.renderAvatar=()=>{var e=this.props,t=e.lock,s=e.avatar,n=e.shouldAnimationDelay;if(t==="lock"||t==="not_qualified")return null;var o;t==="current"&&(o=s),t==="finish"&&(o="".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/astronaut.png"));var l=v()([r()["avatar-container"],t==="finish"?r()["avatar-container-completed"]:"",n?"":r()["avatar-container__rightnow"]]);return a().createElement("div",{className:l},a().createElement("img",{src:o,className:t==="finish"?r().avatar__astronaut:r().avatar}))},this.renderInfos=()=>{var e=this.props.lock;return e==="finish"?this.renderCompletedInfos():e==="lock"?this.renderLockedInfos():this.renderProcessingInfos()},this.renderCompletedInfos=()=>{var e=this.props,t=e.idx,s=e.position,n=e.name,o=e.t,l=v()([r().infos,r()["infos-idx".concat(t%10!=0?t%10:10)],r()["infos-completed"],s==="left"?r()["infos-left"]:r()["infos-right"]]),m=v()([r().indicator__num,r()["indicator__num-".concat(t%10!=0?t%10:10)]]);return a().createElement("div",{className:l},a().createElement("div",{className:r().indicator},a().createElement("span",{className:m},t>=10?t:"0".concat(t))),a().createElement("div",{className:r().name,title:n},n),a().createElement("div",{className:r().progress},a().createElement("span",{className:r().done},a().createElement(L.Z,{iconClass:"icon-icon_donex1",size:"12px",color:"black"})),a().createElement("span",null,o("questionn.completed"))))},this.renderLockedInfos=()=>{var e=this.props,t=e.idx,s=e.position,n=e.name,o=e.score,l=e.unlockAvatars,m=e.unlockNum,i=e.progress,g=e.t,E=e.stagePass,d=e.lock,u=v()([r().infos,r()["infos-idx".concat(t%10!=0?t%10:10)],r()["infos-lock"],s==="left"?r()["infos-left"]:r()["infos-right"]]),_=v()([r().indicator,s==="left"?r()["indicator-left"]:r()["indicator-right"]]),I=v()([r().indicator__num,r()["indicator__num-disabled"]]),y=v()([r().indicator__num,r()["indicator__num-".concat(t%10!=0?t%10:10)]]),f=v()([r().avatars,s==="left"?r()["avatars-left"]:r()["avatars-right"]]),N;d==="lock"&&l.length>0?N=a().createElement("div",{className:r().avatars__wrapper},l.map((x,C)=>a().createElement("span",{className:r().avatars__wrapper__item,key:C},a().createElement("img",{src:x||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png")})))):N=null;var k;return i>0?k=a().createElement("span",{className:r().avatars__num},i,"%"):k=a().createElement("span",{className:r().avatars__num},(0,M.ZT)("".concat(g("authentication.hadUnlocked")),m)),a().createElement("div",{className:u},a().createElement("div",{className:_},E&&a().createElement("span",{className:I},a().createElement(L.Z,{iconClass:"iconf-lock",size:"14px",color:"#fff"})),!E&&a().createElement("span",{className:y},t>=10?t:"0".concat(t)),o?a().createElement("span",{className:r().indicator__score},"+",o,g("common.score")):null),a().createElement("div",{className:r().name,title:n},n),a().createElement("div",{className:f},N,k))},this.renderProcessingInfos=()=>{var e=this.props,t=e.idx,s=e.position,n=e.name,o=e.progress,l=v()([r().infos,r()["infos-idx".concat(t%10!=0?t%10:10)],r()["infos-lock"],s==="left"?r()["infos-left"]:r()["infos-right"]]),m=v()([r().indicator__num,r()["indicator__num-".concat(t%10!=0?t%10:10)]]);return a().createElement("div",{className:l},a().createElement("div",{className:r().indicator},a().createElement("span",{className:m},t>=10?t:"0".concat(t))),a().createElement("div",{className:r().name,title:n},n),a().createElement("div",{className:r().progress},o,"%"))},this.renderImage=()=>{var e=this.props,t=e.idx,s=e.lock,n=e.position,o=e.stagePass,l=v()([r()["mover-wrapper"],"".concat(t%2==0?"move-top":"move-top-reverse")]),m=v()([r()["item-planet-image"],r()["item-planet-image-idx".concat(t%10!=0?t%10:10)],r()["item-planet".concat(t%10!=0?t%10:10)]]);return a().createElement(X.df,{threshold:0},i=>{var g=i.inView,E=i.ref;g&&(this.viewObj[t]+=1);var d=v()([this.viewObj[t]<=1&&g?r().inview:""],[this.viewObj[t]>1?r()["inview-static"]:""],r()["planet-attr-".concat(t%10!=0?t%10:10)],n==="left"?r()["planet-left"]:r()["planet-right"]);return a().createElement("div",{className:d,ref:E},t%3==0&&a().createElement("img",{className:r().random__img,src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/10-lock.png"),alt:""}),a().createElement("div",{className:l},this.renderAvatar(),a().createElement("img",{src:ne(t,s==="lock"&&o),className:m,onClick:this.handleClick})),this.renderInfos())})},this.viewObj=(()=>{for(var e={},t=1;t<100;t++)e[t]=0;return e})(),this.renderPath=()=>{var e=this.props,t=e.lock,s=e.position,n=e.showPath,o=e.stagePass;if(!n)return null;var l=v()([r().path,s==="left"?r()["path-left"]:r()["path-right"]]),m="".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/path.png");return t==="lock"&&o&&(m="".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/path-lock.png")),a().createElement("div",{className:l},a().createElement("img",{src:m}))}}componentDidMount(){setTimeout(()=>{this.props.lock==="current"&&this.outerRef&&this.outerRef.scrollIntoView({block:"center"})},2e3)}render(){var e=this.props.index;return a().createElement("div",{className:r()["planet-row".concat(e===0?"__start":"")],ref:this.initRef},this.renderImage(),this.renderPath())}}var re=(0,W.$j)()((0,j.Z)()(oe)),ce=p(92141),c=p.n(ce),ie=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return t?"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/unlock.png"):"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/pass.png")},le=P=>{var e=P%10!=0?"0".concat(P%10):"00";return"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/desert_").concat(e,".png")};class H extends a().Component{constructor(){super(...arguments);this.initRef=e=>{this.outerRef=e},this.viewObj=(()=>{for(var e={},t=1;t<101;t++)e[t]=0;return e})(),this.handleClick=()=>{var e=this.props,t=e.lock,s=e.t,n=e.stagePass,o=e.index,l=e.onItemClick;t==="lock"&&n?B.default.warning(s("authentication.lockedClick")):l(o)},this.renderAvatar=()=>{var e=this.props,t=e.lock,s=e.avatar,n=e.shouldAnimationDelay;if(t!=="current")return null;var o=s,l=v()([t==="lock"?c()["avatar-container-completed"]:"",n?"":c()["avatar-container__rightnow"]]);return a().createElement("div",{className:l},o&&a().createElement("div",{className:c().avatar_box_wrapper},a().createElement("img",{src:o,className:c().avatar}),a().createElement("div",{className:c().avatar_angle}),a().createElement("div",{className:c().avatar_shadow})))},this.renderInfos=()=>{var e=this.props.lock;return e==="finish"?this.renderCompletedInfos():e==="lock"?this.renderLockedInfos():this.renderProcessingInfos()},this.renderCompletedInfos=()=>{var e=this.props,t=e.idx,s=e.position,n=e.name,o=e.t,l=v()([c().infos,c()["infos-idx".concat(t%10!=0?t%10:10)],c()["infos-completed"],s==="left"?c()["infos-left"]:c()["infos-right"]]);return a().createElement("div",{className:l},a().createElement("div",{className:c().name,title:n},n),a().createElement("div",{className:c().progress},a().createElement("span",{className:c().done},a().createElement(L.Z,{iconClass:"icon-icon_donex1",size:"12px",color:"black"})),a().createElement("span",null,o("questionn.completed"))))},this.renderLockedInfos=()=>{var e=this.props,t=e.idx,s=e.position,n=e.name,o=e.score,l=e.unlockAvatars,m=e.unlockNum,i=e.progress,g=e.t,E=e.stagePass,d=v()([c().infos,c()["infos-idx".concat(t%10!=0?t%10:10)],c()["infos-lock"],s==="left"?c()["infos-left"]:c()["infos-right"]]),u=v()([c().indicator,s==="left"?c()["indicator-left"]:c()["indicator-right"]]),_=v()([c().avatars,s==="left"?c()["avatars-left"]:c()["avatars-right"]]),I=v()([c().indicator__num,c()["indicator__num-disabled"]]),y;i===0&&l.length>0?y=a().createElement("div",{className:c().avatars__wrapper},l.map((N,k)=>a().createElement("span",{className:c().avatars__wrapper__item,key:k},a().createElement("img",{src:N||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png")})))):y=null;var f;return i>0?f=a().createElement("span",{className:c().avatars__num},i,"%"):f=a().createElement("span",{className:c().avatars__num},(0,M.ZT)("".concat(g("authentication.hadUnlocked")),m)),a().createElement("div",{className:d},a().createElement("div",{className:u},E&&a().createElement("span",{className:I},a().createElement(L.Z,{iconClass:"iconf-lock",size:"14px",color:"#fff"})),o?a().createElement("span",{className:c().indicator__score},"+",o,g("common.score")):null),a().createElement("div",{className:c().name,title:n},n),a().createElement("div",{className:_},y,f))},this.renderProcessingInfos=()=>{var e=this.props,t=e.idx,s=e.position,n=e.name,o=e.progress,l=v()([c().infos,c()["infos-idx".concat(t%10!=0?t%10:10)],c()["infos-process"],s==="left"?c()["infos-left"]:c()["infos-right"]]);return a().createElement("div",{className:l},a().createElement("div",{className:c().name,title:n},n),a().createElement("div",{className:c().progress},o,"%"))},this.renderImage=()=>{var e=this.props,t=e.idx,s=e.lock,n=e.position,o=e.stagePass,l=v()([c()["mover-wrapper"],"".concat(t%2==0?"move-top":"move-top-reverse")]),m=v()([c()["item-planet-image"],c()["item-planet-image-idx".concat(t%10!=0?t%10:10)],c()["item-planet".concat(t%10!=0?t%10:10)]]);return a().createElement(X.df,{threshold:0},i=>{var g=i.inView,E=i.ref;g&&(this.viewObj[t]+=1);var d=v()([this.viewObj[t]<=1&&g?c().inview:""],[this.viewObj[t]>1?c()["inview-static"]:""],c()["planet-attr-".concat(t%10!=0?t%10:10)],n==="left"?c()["planet-left"]:c()["planet-right"],c().planet_rows);return a().createElement("div",{className:d,ref:E},t===1&&a().createElement("img",{className:[c()["checkpoint_go".concat(n)],"mask"].join(" "),src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/desert_go.png"),alt:""}),t!==1&&a().createElement("img",{className:[c()["checkpoint_randomImg".concat(n).concat(t%10)],"mask"].join(" "),src:le(t),alt:""}),a().createElement("div",{className:l},this.renderAvatar(),a().createElement("img",{src:ie(t,s==="lock"&&o),className:m,onClick:this.handleClick}),a().createElement("span",{className:c()["step-num"],onClick:this.handleClick},t>=10?t:"0".concat(t))),this.renderInfos())})},this.renderPath=()=>{var e=this.props,t=e.lock,s=e.position,n=e.showPath,o=e.stagePass;if(!n)return null;var l=v()([c().path,s==="left"?c()["path-left"]:c()["path-right"]]),m="".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/path.png");return t==="lock"&&o&&(m="".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/path-lock.png")),a().createElement("div",{className:l},a().createElement("img",{src:m}))}}componentDidMount(){setTimeout(()=>{this.props.lock==="current"&&this.outerRef&&this.outerRef.scrollIntoView({block:"center"})},2e3)}elementInView(e){var t=e.getBoundingClientRect(),s=t.top<window.innerHeight&&t.bottom>0,n=t.left<window.innerWidth&&t.right>0;return s&&n}render(){var e=this.props.position;return a().createElement("div",{className:c().checkpoint_container},a().createElement("div",{className:c().planet_row,ref:this.initRef},a().createElement("img",{className:[c()["checkpoint_mask".concat(e)],"mask"].join(" "),src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/checkPoints_mask.png")}),this.renderImage(),this.renderPath()))}}H.defaultProps={idx:1,lock:"",list:[],position:"left",showPath:!1,avatar:"",name:"",score:0,unlockNum:0,unlockAvatars:[],progress:0};var me=(0,W.$j)()((0,j.Z)()(H)),pe=p(51255),R=p.n(pe),de=p(91361),ue=p.n(de);class he extends a().Component{constructor(){super(...arguments);this.initOuterRef=e=>{this.outerRef=e}}render(){var e=this.props,t=e.src,s=e.prefixCls,n=e.template;return a().createElement("img",{ref:this.initOuterRef,className:ue()["".concat(s,"__").concat(n,"__image")],src:t})}}var U=he;class ve extends a().Component{constructor(e){super(e);this.onMousedown=t=>{this.setState({startPointX:t.pageX,moving:!0}),this.planetList.addEventListener("mousemove",this.onMousemove),this.planetList.addEventListener("mouseup",this.onMouseup),this.planetList.addEventListener("mouseleave",this.onMouseleave)},this.onMousemove=t=>{t.preventDefault();var s=this.state.moving;if(!!s){var n=this.state.startPointX,o=t.pageX-n;o>0&&this.planetList.scrollLeft+document.body.clientWidth===this.planetList.scrollWidth||o<0&&this.planetList.scrollLeft===0||(this.planetList.scrollLeft+=o)}},this.onMouseup=()=>{this.setState({moving:!1}),this.planetList.removeEventListener("mousemove",this.onMousemove),this.planetList.removeEventListener("mouseup",this.onMouseup),this.planetList.removeEventListener("mouseleave",this.onMouseleave)},this.onMouseleave=()=>{this.setState({moving:!1}),this.planetList.removeEventListener("mousemove",this.onMousemove),this.planetList.removeEventListener("mouseup",this.onMouseup),this.planetList.removeEventListener("mouseleave",this.onMouseleave)},this.state={moving:!1,startPointX:0}}render(){var e=this.props,t=e.projectId,s=e.taskId,n=e.avatar,o=e.list,l=e.startSrc,m=e.endSrc,i=e.template,g=e.stagePass,E=e.onItemClick,d=this.state.moving;return a().createElement("div",{className:R()["planet-container".concat(d?"__moving":"")],onMouseDown:this.onMousedown,ref:u=>{this.planetList=u}},a().createElement("div",{className:R()["".concat(i,"__earth")]},a().createElement(U,{src:l,prefixCls:"earth",template:i})),a().createElement("div",{className:R()["planet-container__".concat(i,"__stageList")]},i==="sky"&&o.map((u,_)=>{var I=u.sort,y=u.status,f=u.name,N=u.score,k=u.unlockNum,x=u.photoList,C=u.process,w=I%2==0?"left":"right",S=_!==o.length-1;return a().createElement(re,{key:I,index:_,idx:I,lock:y,position:w,showPath:S,avatar:n||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png"),name:f,score:N,unlockNum:k,unlockAvatars:x.slice(0,3),progress:C,projectId:t,taskId:s,stagePass:g,onItemClick:E})}),i==="desert"&&o.map((u,_)=>{var I=u.sort,y=u.status,f=u.name,N=u.score,k=u.unlockNum,x=u.photoList,C=u.process,w=I%2==0?"left":"right",S=_!==o.length-1;return a().createElement(me,{key:I,index:_,idx:I,lock:y,position:w,showPath:S,avatar:n||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png"),name:f,score:N,unlockNum:k,unlockAvatars:x.slice(0,3),progress:C,projectId:t,taskId:s,stagePass:g,onItemClick:E})})),a().createElement("div",{className:R()["".concat(i,"__sun")]},a().createElement(U,{ref:this.initSunRef,src:m,prefixCls:"sun",template:i})))}}var ge=ve,fe=p(4408);class G extends a().Component{constructor(e){super(e);this.renderStars=()=>{var t=new $.Application({backgroundColor:1842510,resizeTo:window});document.querySelector(".sky-container").appendChild(t.view);for(var s=$.Texture.from("".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/star.png")),n=2e3,o=0,l=20,m=.085,i=0,g=0,E=5,d=.05,u=[],_=0;_<n;_++){var I={sprite:new $.Sprite(s),z:0,x:0,y:0};I.sprite.anchor.x=.5,I.sprite.anchor.y=.7,y(I,!0),t.stage.addChild(I.sprite),u.push(I)}function y(f,N){f.z=N?Math.random()*2e3:o+Math.random()*1e3+2e3;var k=Math.random()*Math.PI*2,x=Math.random()*50+1;f.x=Math.cos(k)*x,f.y=Math.sin(k)*x}t.ticker.add(f=>{i+=(g-i)/20,o+=f*10*(i+m);for(var N=0;N<n;N++){var k=u[N];k.z<o&&y(k);var x=k.z-o;k.sprite.x=k.x*(l/x)*t.renderer.screen.width+t.renderer.screen.width/2,k.sprite.y=k.y*(l/x)*t.renderer.screen.width+t.renderer.screen.height/2;var C=k.sprite.x-t.renderer.screen.width/2,w=k.sprite.y-t.renderer.screen.height/2,S=Math.sqrt(C*C+w+w),A=Math.max(0,(2e3-x)/2e3);k.sprite.scale.x=A*d,k.sprite.scale.y=A*d+A*i*E*S/t.renderer.screen.width,k.sprite.rotation=Math.atan2(w,C)+Math.PI/2}})},this.renderMainContent=()=>{var t=this.state,s=t.projectId,n=t.taskId,o=t.list,l=t.avatar,m=t.template,i=t.startImgSrc,g=t.endImgSrc,E=t.stagePass,d=this.props.onItemClick;return a().createElement("div",{className:"".concat(m,"-content-container")},a().createElement(ge,{list:o,avatar:l,startSrc:i,endSrc:g,template:m,projectId:s,taskId:n,stagePass:E,onItemClick:d}))},this.renderRandomCloud=()=>{for(var t=5,s=this.state.template,n=[],o=1;o<=t;o++)n.push(a().createElement("img",{key:o,className:"".concat(s,"__random_cloud__").concat(o),src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/checkPoints_mask.png")}));return a().createElement("div",{className:"".concat(s,"__random_cloud")},n)},this.state={taskId:e.taskId,projectId:e.projectId,startImgSrc:e.projectInfo.style_type!=="desert"?"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/earth.png"):"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/desert_09.png"),endImgSrc:e.projectInfo.style_type!=="desert"?"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/sun-2.png"):"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/desert_08.png"),summaryBg:e.projectInfo.style_type!=="desert"?"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/summary-modal2.png"):"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/postmap/web/summary-desert.png"),list:e.stepInfo.stageList,avatar:e.stepInfo.avatar,infoProps:{progress:e.stepInfo.process,score:e.stepInfo.score,num:e.stepInfo.num,summary:e.stepInfo.summary,title:e.projectInfo.title,projectId:e.projectId,taskId:e.taskId},projectInfo:e.projectInfo,stagePass:e.projectInfo.stage_pass==="true"||e.projectInfo.style_type!=="normal",template:e.projectInfo.style_type==="desert"?"desert":"sky"}}componentDidMount(){var e=this.props.t,t=this.state.template;if(t==="sky")try{this.renderStars()}catch(s){Q.Z.warning({title:e("common.tip"),content:dd.version?e("common.webGL"):e("common.notDingTalkWebGL")})}}render(){var e=this.state,t=e.infoProps,s=e.avatar,n=e.summaryBg,o=e.template,l=e.projectInfo,m=this.props.t;return a().createElement("div",{className:"".concat(o,"-container")},a().createElement(fe.Z,{title:m("documentTitle.learningProjects")}),a().createElement(te,(0,K.Z)({},t,{avatar:s,summaryBg:n,projectInfo:l,template:o,showRecord:!0,showComments:!0})),o==="desert"&&this.renderRandomCloud(),this.renderMainContent())}}G.defaultProps={projectInfo:{},infoProps:{},taskId:"",projectId:"",onItemClick:()=>{},showRecord:!0,showComments:!0};var ke=(0,j.Z)()(G),Ie=P=>(e,t)=>{var s=e[P],n=t[P];return s-n};class Ee extends a().Component{constructor(e){super(e);this.getProjectProgress=()=>{var t=this.state.taskId;V.WY.get({url:D.ZP.StudyProjectList.getMapStageInfo(t)}).then(s=>{var n=s.data.data;n.stageList.sort(Ie("sort")),this.setState({stepInfo:n})})},this.getProjectDetail=()=>{var t=this.state.taskId;V.WY.get({url:D.ZP.EditStudyProject.getProjectInfo(t)}).then(s=>{this.setState({projectInfo:s.data})})},this.handleClickItem=t=>{var s=this.state,n=s.projectId,o=s.taskId,l=O.parse(Z.m8.location.search),m=l.courseIds,i=l.all_checked,g="";o?g="/training/trainingProject/traineeView?id=".concat(n,"&taskId=").concat(o,"&tab=1&stage=").concat(t,"&courseIds=").concat(m,"&all_checked=").concat(i):g="/training/trainingProject/traineeView?id=".concat(n,"&tab=1&stage=").concat(t,"&courseIds=").concat(m,"&all_checked=").concat(i),(0,b.eJ)({url:g})},this.state={taskId:"",projectId:"",projectInfo:null,stepInfo:null}}componentDidMount(){var e=O.parse(Z.m8.location.search),t=e.id,s=e.taskId;this.setState({projectId:t,taskId:s||""},()=>{this.getProjectProgress(),this.getProjectDetail()})}render(){var e=this.state,t=e.stepInfo,s=e.projectInfo,n=e.projectId,o=e.taskId,l=this.props.t;return!t||!s?a().createElement(J.Z,{size:"large",style:{marginTop:300}}):a().createElement(ke,{stepInfo:t,projectInfo:s,projectId:n,taskId:o,t:l,onItemClick:this.handleClickItem})}}var Ne=(0,j.Z)()(Ee)}}]);
