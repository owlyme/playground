(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[2402],{4408:function(Ve,Ce,t){"use strict";var z=t(12924),Z=t.n(z),oe=t(28216),te=t(17780),$=t(38642),m=T=>({userInfo:T.user}),ae=T=>{var R=T.title;return(0,te.xX)()&&setTimeout(()=>{document.title=R},0),(0,z.useEffect)(()=>{if(R&&document.title!==R&&setTimeout(()=>{document.title=R},0),(0,$.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var g=document.querySelector(".zoom-report");g&&(g.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[R]),Z().createElement(Z().Fragment,null)};ae.defautProps={title:""},Ce.Z=(0,oe.$j)(m)(ae)},1164:function(Ve,Ce,t){"use strict";var z=t(12924),Z=t.n(z),oe=t(76651),te=t(38642),$=t(91302),m=ae=>{var T=navigator.userAgent.toLocaleLowerCase(),R=localStorage.getItem("enterpriseId"),g=(0,te.lz)(R,ae.projectType),M=localStorage.getItem("dingPersonnel"),U=$.bl.includes(M),e=ae.target;function b(N){if(e==="self"&&(N.preventDefault(),oe.m8.push(ae.to)),U){if(ae.projectType==="student"){window.location.href="".concat(g,"/").concat(ae.to);return}oe.m8.push(ae.to);return}if(dd.version){N.preventDefault();var a="";ae.to.includes("?")?a="".concat(g).concat(ae.to,"&ddtab=true"):a="".concat(g).concat(ae.to,"?ddtab=true"),dd.biz.util.openLink({url:a})}else T.indexOf("lark")!==-1&&(window.location.href="".concat(g).concat(ae.to))}return Z().createElement("a",{rel:"noreferrer",href:"".concat(ae.projectType==="student"?"".concat(g).concat(ae.to):"#".concat(ae.to)),className:"".concat(ae.wrapCls," cl-pointer"),target:T.indexOf("lark")!==-1||U?"_self":ae.target||"_blank",onClick:b},ae.children)};m.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},m.targetTo=ae=>{var T=ae.path,R=ae.from,g=ae.isExternalLink,M=g===void 0?!1:g,U=ae.isAsync,e=U===void 0?!1:U,b=ae.openName,N=b===void 0?"_blank":b,a=ae.projectType,j=a===void 0?"manage":a,V=ae.ddTab,pe=V===void 0?!0:V,G,Q=localStorage.getItem("dingPersonnel"),ve=$.bl.includes(Q),X=navigator.userAgent.toLocaleLowerCase(),he=localStorage.getItem("enterpriseId"),re=(0,te.lz)(he,j),ne=localStorage.getItem("appType"),ie=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var _e="";if(G=M?"":re,ve&&!M){if(j==="student"){window.location.href="".concat(re).concat(T);return}oe.m8.push(T);return}T.includes("?")?_e="".concat(G).concat(T,"&ddtab=").concat(pe):_e="".concat(G).concat(T,"?ddtab=").concat(pe),dd.biz.util.openLink({url:_e})}else if(X.indexOf("lark")!==-1)G=M?"":re,window.location.href="".concat(G).concat(T);else if(ne==="wx_app"&&ie&&M&&R==="imgText")G=M?"":j==="student"?"".concat(re):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(G).concat(T)});else if(G=M?"":j==="student"?"".concat(re):"#",e){var Ee=window.open("","_blank");setTimeout(()=>{Ee.location="".concat(G).concat(T)},100)}else window.open("".concat(G).concat(T),N)},Ce.Z=m},87312:function(Ve,Ce,t){"use strict";var z=t(12924),Z=t.n(z),oe=t(91768),te=$=>{var m=$.t;return Z().createElement("div",{className:$.className?"".concat($.className," no-result"):"no-result"},Z().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1789886702513426432.png"),className:"no-data-img",alt:""}),Z().createElement("p",{className:"no-data-tip"},$.tipText||m("common.empty")))};Ce.Z=(0,oe.Z)()(te)},88311:function(Ve,Ce,t){"use strict";t.d(Ce,{Z:function(){return Ie}});var z=t(62029),Z=t(47673),oe=t(4107),te=t(33565),$=t(57361),m=t(34792),ae=t(48086),T=t(88986),R=t(43358),g=t(34041),M=t(18106),U=t(88108),e=t(9754),b=t.n(e),N=t(12924),a=t.n(N),j=t(91768),V=t(77043),pe=t.n(V),G=t(20228),Q=t(11382),ve=t(18721),X=t.n(ve),he=t(51975),re=t(37055),ne={breadNav:[{value:"",label:""}],checkOne:()=>{},checkAll:()=>{},nextLevel:()=>{},changeLevel:()=>{}},ie=a().createContext(ne),_e={searchResult:[],deptList:[],groupList:[],postList:[],deptUser:[],groupUser:[],postUser:[],clusterList:[],classList:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],initTypeList:()=>{},initTypeUser:()=>{},toggleDisplayItem:()=>{},toggleDisplayList:()=>{},checkListOne:()=>{},checkUserOne:()=>{},removeCheckedUser:()=>{},changeLevel:()=>{},hidePosts:!1,initHidePostsStatus:()=>{},clearSelectedAll:()=>{}},Ee=a().createContext(_e),Be=t(36017),Ze=t(35247),Ne=t(60667);class $e extends a().Component{constructor(){super(...arguments);this.changeLevel=(D,C,n,l)=>{D.preventDefault(),this.props.contextData.changeLevel(C,n,l)}}render(){var D=this.props.contextData.breadNav.map((C,n)=>a().createElement(Ze.Z.Item,{key:C.value},a().createElement("span",{className:"bread-nav-item",onClick:l=>this.changeLevel(l,C.value,n,!(X()(C,"authorized")&&C.authorized==="true"))},a().createElement(Ne.Z,{dataType:"departmentName",value:C.value,name:C.label,type:C.sourceType}))));return a().createElement("div",{className:"bread-nav"},a().createElement(Ze.Z,null,D))}}$e.defaultProps={contextData:{breadNav:[]},changeLevel:()=>{}};var je=$e,Je=t(63185),Fe=t(9676),Re=t(88983),Qe=t(47933),qe=t(22385),Ge=t(31097),pt=t(57119),at=t(84874),gt=t(20136),Dt=t(55241),yt=t(13062),Et=t(71230),Zt=t(89032),vt=t(15746),Le=t(28216),Oe=t(80430),We=t(10237);function ta(){var B=CONFIG.Role.getUserManageRange();return request.get({url:B})}function Ft(B){var D=re.ZP.OrgDialog.getDeptInfoUrl({departmentId:B.departmentId});return delete B.departmentId,We.WY.get({url:D,params:B})}function $t(B){var D=re.ZP.OrgDialog.getDeptUsersUrl({departmentId:B.departmentId});return delete B.departmentId,We.WY.get({url:D,params:B})}function Kt(B){var D=re.ZP.OrgDialog.getUserDetailUrl();return We.WY.get({url:D,params:B})}function ot(B){var D=re.ZP.OrgDialog.getScopeUsersAndDeptsUrl({departmentId:B.departmentId});return delete B.departmentId,We.WY.get({url:D,params:B})}function aa(B){var D=re.ZP.OrgDialog.postDeleteCacheUrl({cacheId:B.cacheId});return delete B.cacheId,We.WY.post({url:D,params:B})}var Ct,Ot,Ut=(Ct=(0,Le.$j)(B=>{var D=B.user;return{enterpriseName:D.enterpriseName}}),Ct(Ot=class extends a().Component{constructor(){super(...arguments);this.state={loading:!0,cardInfoFinal:this.props.cardInfo},this.renderTitle=()=>{var D=this.props,C=D.cardInfo,n=D.prefixCls,l=D.enterpriseName,_=C.source_type,f=C.user_id,r=C.name;return a().createElement("div",{className:"".concat(n,"__header")},a().createElement("div",{className:"".concat(n,"__header-name")},a().createElement(Ne.Z,{type:_,value:f,name:r,dataType:"userName"})),a().createElement("div",{className:"".concat(n,"__header-corp")},l||"/"))},this.renderContent=()=>{var D=this.props,C=D.prefixCls,n=D.t,l=this.state.cardInfoFinal,_=l.user_id,f=l.job_number,r=l.post_names,I=r===void 0?[]:r,K=l.department_infos,H=K===void 0?[]:K,de=()=>!(H instanceof Array)||H.length===0?"/":a().createElement(Oe.Z,{list:H,displayAll:!0,isBlock:!0}),J=()=>!(I instanceof Array)||I.length===0?"/":I.map(ge=>a().createElement("div",{key:ge},ge)),fe=[{lable:"ID",value:_},{lable:n("personal.jobNumber"),value:f||"/"},{lable:n("setting.postLabel"),value:J()},{lable:n("learnRecord.department"),value:de()}];return a().createElement("div",{className:"".concat(C,"__body")},fe.map(ge=>a().createElement(Et.Z,{className:"".concat(C,"__body-item"),key:ge.value},a().createElement(vt.Z,{className:"".concat(C,"__body-item-lable")},ge.lable),a().createElement(vt.Z,{className:"".concat(C,"__body-item-value")},ge.value||"/"))))}}render(){var D=this.props,C=D.children,n=D.prefixCls,l=this.state,_=l.loading,f=l.cardInfoFinal;return a().createElement(Dt.Z,{overlayClassName:n,placement:"rightTop",title:this.renderTitle,content:_?a().createElement("div",{className:"".concat(n,"__body")},a().createElement(Q.Z,null)):this.renderContent,onVisibleChange:r=>{r&&(f.detailInfo===!1?Kt({user_id:f.id}).then(I=>{this.setState({loading:!1,cardInfoFinal:(0,T.Z)((0,T.Z)((0,T.Z)({},f),I.data),{},{detailInfo:!0})})}).catch(I=>{console.error(I)}):this.setState({loading:!1}))},mouseEnterDelay:.5},C)}})||Ot);Ut.defaultProps={prefixCls:"user-card-popover",cardInfo:{}};var ut=(0,j.Z)()(Ut),sa=["cluster","class"];class Ae extends a().Component{constructor(){super(...arguments);this.checkOne=D=>{D.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=D=>{D.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var D=this.props,C=D.cardInfo,n=D.type,l=D.t;return C.authorized==="false"&&n==="dept"?a().createElement(Ge.Z,{title:l("orgDialog.scopedAuthorize")},a().createElement(pt.Z,{style:{marginLeft:"4px"}})):null}}render(){var D=this.props,C=D.t,n=D.cardInfo,l=n===void 0?{}:n,_=D.hidePosts,f=D.type,r=D.userCount,I=null;return this.props.hasNext?(I=a().createElement("div",{className:"next-level"},!(_&&f==="post")&&r>-1?a().createElement("span",{className:"next-level-count"},"(",r,")"):null,sa.includes(f)?a().createElement("span",null):a().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},a().createElement(at.Z,{iconClass:"icon-xiaji1"}),C("component.nextLevel"))),this.props.single?a().createElement("div",{className:"org-tree-item"},a().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),I):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&a().createElement("div",{className:"org-tree-item"},a().createElement(Fe.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),I)):a().createElement("div",{className:"org-tree-item"},this.props.single?a().createElement(Qe.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement(ut,{cardInfo:l},this.props.title)):a().createElement(ut,{cardInfo:l},a().createElement(Fe.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title)))}}Ae.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var jt=(0,j.Z)()(Ae),Gt=["cluster","class"];class It extends a().Component{constructor(){super(...arguments);this.checkOne=D=>{D.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=D=>{D.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var D=this.props,C=D.cardInfo,n=D.type,l=D.t;return C.authorized==="false"&&n==="dept"?a().createElement(Ge.Z,{title:l("orgDialog.scopedAuthorize")},a().createElement(pt.Z,{style:{marginLeft:"4px"}})):null}}render(){var D=this.props,C=D.t,n=D.cardInfo,l=n===void 0?{}:n,_=D.hidePosts,f=D.type,r=D.userCount,I=null;return this.props.hasNext?(I=a().createElement("div",{className:"next-level"},a().createElement("span",{className:"next-level-belle"},!(_&&f==="post")&&r>-1?a().createElement("span",{className:"next-level-count"},"(",r,")"):null,Gt.includes(f)?a().createElement("span",null):a().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},a().createElement(at.Z,{iconClass:"icon-xiaji1"}),C("component.nextLevel")))),this.props.single?a().createElement("div",{className:"org-tree-item"},a().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),I):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&a().createElement("div",{className:"org-tree-item"},a().createElement(Fe.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),I)):a().createElement("div",{className:"org-tree-item"},this.props.single?a().createElement(Qe.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement(ut,{cardInfo:l},a().createElement("span",{className:"org-tree-item-title"},this.props.title))):a().createElement(ut,{cardInfo:l},a().createElement(Fe.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title))))}}It.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var xt=(0,j.Z)()(It),wt=t(38642),At=["cluster","class"];class St extends a().Component{constructor(D){super(D);this.checkAll=(C,n)=>{C.preventDefault(),this.props.contextData.checkAll(n)},this.getIsCheckAll=()=>{var C=[].concat(this.context["".concat(this.props.dataTypeKey,"List")],At.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")]);if(C.length===0)return!1;var n=C.findIndex(l=>!l.isChecked);return n===-1},this.renderDeptName=(C,n)=>n==="dept"?a().createElement(Ne.Z,{type:C.source_type,value:C.id,name:C.name,dataType:"departmentName"}):C.name,this.renderName=C=>a().createElement(Ne.Z,{type:C.source_type,value:C.user_id,name:C.name,dataType:"userName"}),this.state={isShowCheckAllEle:!0,whiteList:{belleFlag:(0,wt.UI)("BELLE_CUSTOMER_WHITE")}}}render(){var D=this.state,C=D.isShowCheckAllEle,n=D.whiteList,l=this.props,_=l.t,f=l.dataTypeKey,r=l.disableHidden,I=l.scrollFlag,K=this.context,H=K.maxDeptUserCount,de=K.hidePosts,J=K.onlyPost,fe=K.onlyUser,ge=K.single,ye=[],le=this.context["".concat(this.props.dataTypeKey,"List")].map(ce=>(ye.push(a().createElement("div",{className:"title-item",key:ce.id},this.renderDeptName(ce,f))),n.belleFlag&&I?a().createElement(xt,{type:f,key:ce.id,cardInfo:ce,hasNext:!0,checkable:H&&(ce==null?void 0:ce.userCount)>H?!1:!(J&&ce.post_type==="post_group"||fe),single:ge,userCount:ce.userCount,isChecked:!!ce.isChecked,itemId:ce.id,title:this.renderDeptName(ce,f),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!ce.children,hidePosts:de,disableHidden:r}):a().createElement(jt,{type:f,key:ce.id,cardInfo:ce,hasNext:!0,checkable:H&&(ce==null?void 0:ce.userCount)>H?!1:!(J&&ce.post_type==="post_group"||fe),single:ge,userCount:ce.userCount,isChecked:!!ce.isChecked,itemId:ce.id,title:this.renderDeptName(ce,f),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!ce.children,hidePosts:de,disableHidden:r}))),Se=[],xe=At.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")].map(ce=>(Se.push(a().createElement("div",{className:"title-item",key:ce.id},this.renderName(ce,f))),n.belleFlag&&I?a().createElement(xt,{key:ce.id,hasNext:!1,title:this.renderName(ce),isChecked:!!ce.isChecked,itemId:ce.id,cardInfo:ce,checkable:!(ce.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:r}):a().createElement(jt,{key:ce.id,hasNext:!1,title:this.renderName(ce),isChecked:!!ce.isChecked,itemId:ce.id,cardInfo:ce,checkable:!(ce.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:r}))),rt=this.getIsCheckAll(),nt=a().createElement("div",{className:"org-tree-item"},a().createElement(Fe.Z,{checked:rt,defaultChecked:!0,onClick:ce=>this.checkAll(ce,!rt)},_("common.all")));return a().createElement("div",{className:"".concat(this.context.oneDisplayType?"org-tree more-height":"org-tree"," ").concat(n.belleFlag&&I?"org-tree-belle":"")},!this.context.single&&this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&le.length===0&&xe.length>0&&C||!this.context.single&&!this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&(le.length>0||xe.length>0)&&C?nt:null,n.belleFlag&&I&&a().createElement("div",{className:"belle-title-scroll"},ye,Se),le,xe)}}St.contextType=Ee,St.defaultProps={dataTypeKey:"dept",contextData:{},disableHidden:!1,scrollFlag:!1};var Ht=(0,j.Z)()(St),zt=t(25547),Lt="999",_t=1,Mt=["clusterList","classList"];class kt extends a().Component{constructor(D,C){var n;super(D);n=this,this.getClusterList=()=>{var l=re.ZP.OrgDialog.getClusterList(),_={keyword:""};We.WY.get({url:l,params:_}).then(f=>{this.context.initTypeList("clusterList","checkedCluster",f.data.data.map(r=>({name:r.name,userCount:r.user_count,id:r.id,parentId:[""]})))})},this.getClassList=()=>{this.context.initTypeList("classList","checkedClass",[{name:"\u6D4B\u8BD52",userCount:2,id:"2",parentId:[""]},{name:"\u6D4B\u8BD54",userCount:1,id:"41",parentId:[""]}])},this.flatTreeData=(l,_)=>(l.children.forEach(f=>{f.children&&(_[f.id]=f.children,this.flatTreeData(f,_))}),_),this.getDeptList=function(l){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise((f,r)=>{var I=n.state.cacheId;Ft({departmentId:l,cache_id:I,filter_auth:_&&!n.props.filterAuthOpen}).then(K=>{var H=K.data.children||[];H.forEach(J=>{J.parentId=K.data.id,J.userCount=J.user_count,J.name=J.department_name,J.all_name=a().createElement("span",null,n.state.contextData.breadNav.map(fe=>a().createElement("span",{key:fe.value},fe.label,"/")),J.department_name)});var de=[];n.context.asyncDeptTree?de=H:de=n.flatTreeData(K.data,{[K.data.id]:H}),n.setState({deptList:de}),n.context.initTypeList("deptList","checkedDept",H),f(K.data)}).catch(K=>{console.error(K),r(K)})})},this.getDeptUserList=function(l){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,f=n.state.cacheId;$t({departmentId:l,cache_id:f,filter_auth:_&&!n.props.filterAuthOpen}).then(r=>{r.data&&r.data.forEach(I=>{I.name=I.user_name,I.detailInfo=!1}),n.context.initTypeUser("deptUser",r.data)}).catch(r=>{console.error(r)})},this.getGroupList=()=>{var l=re.ZP.Organization.getGroupList(),_={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};We.WY.get({url:l,params:_}).then(f=>{f.data.groups=f.data.groups||[],f.data.groups.forEach(r=>{r.parentId=this.state.contextData.breadNav.map(I=>I.value),r.userCount=r.user_count,r.name=r.group_name}),this.setState({groupList:f.data.groups}),this.context.initTypeList("groupList","checkedGroup",f.data.groups)})},this.getGroupUserList=l=>{var _=re.ZP.Organization.getGroupUserList({groupId:l}),f={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};We.WY.get({url:_,params:f}).then(r=>{r.data.users&&r.data.users.forEach(I=>{I.name=I.user_name,I.parentId=this.state.contextData.breadNav.map(K=>K.value)}),this.context.initTypeUser("groupUser",r.data.users)})},this.getPostList=l=>{var _=re.ZP.Organization.getPostTree(),f={filter_auth:!this.props.filterAuthOpen,post_id:l,user_type:this.context.userType};We.WY.get({url:_,params:f}).then(r=>{r.data.posts=r.data.posts||[],r.data.posts.forEach(I=>{I.parentId=this.state.contextData.breadNav.map(K=>K.value),I.userCount=I.user_count,I.name=I.post_name}),this.setState({postList:r.data.posts}),this.context.initTypeList("postList","checkedPost",r.data.posts),this.context.initHidePostsStatus(r.data.hide_posts==="true")})},this.getPostUserList=l=>{var _=re.ZP.Organization.getPostUserList({postId:l}),f={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};We.WY.get({url:_,params:f}).then(r=>{r.data.users&&r.data.users.forEach(I=>{I.name=I.user_name,I.parentId=this.state.contextData.breadNav.map(K=>K.value)}),this.context.initTypeUser("postUser",r.data.users)})},this.getUserList=function(l){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n.props.type==="dept"?n.getDeptUserList(l,_):n.props.type==="group"?n.getGroupUserList(l):n.getPostUserList(l)},this.checkOne=(l,_,f)=>{var r=this.state.checkedCount;if(_==="list"){var I=this.context[this.state.listType].find(H=>H.id===l);I.isChecked=f,I.all_name&&typeof I.all_name=="object"&&delete I.all_name,r=f?r+1:r-1,this.context.checkListOne(I,this.state.checkedListType,this.state.listType)}else if(_==="user"){var K=this.context[this.state.checkedUserType].find(H=>H.id===l);K.isChecked=f,r=f?r+1:r-1,this.context.checkUserOne(K,this.state.checkedUserType)}this.updateCheckedCount(r)},this.updateCheckedCount=l=>{this.setState({checkedCount:l})},this.checkAll=function(){var l=(0,$.Z)(b().mark(function _(f){var r,I,K,H,de,J,fe,ge,ye,le,Se,xe,rt,nt,ce;return b().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(r=n.state,I=r.contextData,K=r.cacheId,H=[...I.breadNav].reverse(),de=(0,te.Z)(H,1),J=de[0],fe=J.value,ge=[...n.context[n.state.checkedListType]],ye=J.authorized==="false",le={departments:[],users:[]},!ye){we.next=12;break}return we.next=9,ot({departmentId:fe,cache_id:K});case 9:Se=we.sent,xe=Se.data,le={departments:xe.departments.map(Te=>(Te.isChecked=f,Te.name=Te.department_name,Te.parentId=Te.parent_ids.split("/"),Te.parentAuthorize=!1,Te.userCount=Te.user_count,Te)),users:xe.users.map(Te=>(Te.isChecked=f,Te.name=Te.user_name,Te.parentAuthorize=!1,Te))};case 12:rt=n.context[n.state.listType].map(Te=>{Te.isChecked=f,n.props.type!=="dept"&&ge.forEach(Pt=>{Pt.parentId.indexOf("".concat(Te.id))!==-1&&(Pt.isChecked=!1)});var lt=ge.findIndex(Pt=>Pt.id===Te.id);return lt!==-1?ge[lt].isChecked=f:ge.push(Te),Te}),nt=[],n.context.checkedUser.forEach(Te=>{if(n.props.type!=="dept"){if(typeof Te.parentId!="undefined"&&Te.parentId.indexOf("".concat(fe))!==-1&&Te.parentId[Te.parentId.length-1]!==fe)return}else{var lt=typeof Te.parentId!="undefined"?Te.parentId:Te.department_ids||[];if(lt.indexOf(fe)!==-1)return}nt.push(Te)}),ce=Mt.includes(n.state.listType)?[]:n.context[n.state.checkedUserType].map(Te=>{Te.isChecked=f;var lt=nt.findIndex(Pt=>Pt.id===Te.id);return lt!==-1?nt[lt].isChecked=f:nt.push(Te),Te}),n.context.toggleDisplayList(n.state.checkedListType,pe()(le.departments,ge,"id"),n.state.listType,rt,n.state.checkedUserType,ce,pe()(le.users,nt,"id")),n.setState({checkedCount:f?(Mt.includes(n.state.listType)?0:n.context[n.state.checkedUserType].length)+n.context[n.state.listType].length:0});case 18:case"end":return we.stop()}},_)}));return function(_){return l.apply(this,arguments)}}(),this.nextLevel=(l,_,f)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var r=[...this.state.contextData.breadNav,{value:l.id,label:_,authorized:l.authorized}];this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{breadNav:r})},()=>{this.props.type==="post"?this.nextPostLevel(l.id,f):this.props.type==="dept"?this.nextDeptLevel(l.id,!(X()(l,"authorized")&&l.authorized==="true")):this.context.initTypeList("groupList","checkedGroup",[]),this.getUserList(l.id===Lt?_t:l.id,!(X()(l,"authorized")&&l.authorized==="true"))})},this.nextDeptLevel=(l,_)=>{if(this.context.asyncDeptTree)this.getDeptList(l,_);else{var f=this.state.deptList[l];typeof f!="undefined"&&f.forEach(r=>{r.parentId=this.state.contextData.breadNav.map(I=>I.value),r.userCount=r.user_count,r.name=r.department_name}),this.context.initTypeList("deptList","checkedDept",f||[])}},this.nextPostLevel=(l,_)=>{if(_){var f=(0,zt.lK)(this.state.postList,l),r=f.children.map(I=>(I.name=I.post_name,I.parentId=this.state.contextData.breadNav.concat([l]).map(K=>K.value),I.userCount=I.user_count,I));this.context.initTypeList("postList","checkedPost",r)}},this.changeLevel=(l,_,f)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var r=this.props.type==="group"?[this.state.contextData.breadNav[0]]:this.state.contextData.breadNav.slice(0,_+1);this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{breadNav:r}),isSearch:!1},()=>{this.props.type==="dept"?this.changeDeptLevel(l,f):this.props.type==="group"?this.changeGroupLevel(l):this.props.type==="cluster"?this.getClusterList():this.props.type==="class"?this.getClassList():this.changePostLevel(l)})},this.changeDeptLevel=function(l){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(n.context.asyncDeptTree)n.getDeptList(l,_);else{var f=n.state.deptList[l];f.forEach(r=>{r.parentId=n.state.contextData.breadNav.map(I=>I.value),r.userCount=r.user_count,r.name=r.department_name}),n.context.initTypeList("deptList","checkedDept",f)}n.getDeptUserList(l===Lt?_t:l,_)},this.changePostLevel=l=>{var _=l==="1"?this.state.postList:(0,zt.lK)(this.state.postList,l).children,f=_.map(r=>(r.name=r.post_name,r.parentId=this.state.contextData.breadNav.concat([l]).map(I=>I.value),r.userCount=r.user_count,r));this.context.initTypeList("postList","checkedPost",f),l!=="1"&&this.getPostUserList(l===Lt?_t:l)},this.changeGroupLevel=l=>{l||(this.context.initTypeUser("groupUser",[]),this.context.initTypeList("groupList","checkedGroup",this.state.groupList))},this.state={postList:[],deptList:[],groupList:[],clusterList:[],classList:[],contextData:{breadNav:[this.props.defaultBreadNav],checkOne:this.checkOne,checkAll:this.checkAll,nextLevel:this.nextLevel,changeLevel:this.changeLevel},checkedCount:0,listType:"".concat(this.props.type,"List"),checkedListType:"checked".concat(this.props.type.charAt(0).toUpperCase()).concat(this.props.type.substr(1)),checkedUserType:"".concat(this.props.type,"User"),isSearch:!1,searchResult:[],loadDept:!1,loadUser:!1,cacheId:C.cacheId}}componentDidMount(){this.props.type!=="group"?this.props.type==="dept"?this.getDeptList("1").then(D=>{this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{breadNav:[{value:D.id,label:D.department_name,sourceType:D.source_type,authorized:D.authorized}]})}),this.getDeptUserList("1")}):this.getPostList("1"):this.getGroupList(1),this.props.type==="cluster"&&this.getClusterList(),this.props.type==="class"&&this.getClassList()}render(){return a().createElement(ie.Provider,{value:this.state.contextData},a().createElement("div",{className:"org-display-container org-display-dept"},a().createElement(ra,null),this.props.type==="dept"&&(this.state.loadDept||this.state.loadUser)?a().createElement("div",{className:"dept-loading"},a().createElement(Q.Z,null)):null,a().createElement(Rt,{dataTypeKey:this.props.type,disableHidden:this.props.disableHidden,scrollFlag:this.props.scrollFlag})))}}kt.contextType=Ee;var ra=(0,he.l)(ie,je),Rt=(0,he.l)(ie,Ht);kt.defaultProps={defaultBreadNav:{value:"",label:"\u9177\u6E32\u79D1\u6280"},queryType:1,type:"dept",filterAuthOpen:!1,disableHidden:!1,scrollFlag:!1};var Xe=kt,Yt=t(57663),Jt=t(71577),ke=t(54549);class v extends a().Component{constructor(){super(...arguments);this.removeItem=(D,C,n,l)=>{D.preventDefault(),C.isChecked=!1,l==="user"?this.context.removeCheckedUser(C):this.context.checkListOne(C,n,"".concat(l,"List"))},this.displayName=(D,C)=>{var n={user:"userName",dept:"departmentName"}[D]||"",l={user:C.unionid||C.user_id||C.userId,dept:C.id}[D]||C.id;return a().createElement(Ne.Z,{value:l,name:C.name,type:C.source_type||C.sourceType,dataType:n})},this.displayItem=D=>{var C=this.context,n=C.hidePosts,l=C.showUserCount,_="checked".concat(D.charAt(0).toUpperCase()).concat(D.substr(1)),f=this.context[_].map(r=>r.isChecked&&r.authorized!=="false"?a().createElement(Ge.Z,{key:r.id,placement:"top",title:r.all_name||"",getPopupContainer:()=>document.querySelector(".checked-display-container")},a().createElement("div",{className:"display-item",key:r.id},this.displayName(D,r),D==="user"||n&&D==="post"?"":l&&r.userCount>-1?"(".concat(r.userCount,")"):"",r.reserve?null:a().createElement("span",{className:"display-item-close",onClick:I=>this.removeItem(I,r,_,D)},a().createElement(ke.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))):null);return f},this.handleClearSelected=()=>{this.context.clearSelectedAll()}}render(){var D=this.props.t,C=["dept","group","post","user","cluster","class"].map(n=>this.displayItem(n));return a().createElement("div",{className:"checked-display-container"},a().createElement("div",{className:"checked-display-container-header"},a().createElement("span",null,D("orgDialog.selected"),":"),a().createElement(Jt.Z,{type:"link",onClick:this.handleClearSelected},D("orgDialog.clearAll"))),C)}}v.contextType=Ee;var y=(0,j.Z)()(v),h=t(67222),u=t(6793),E=oe.Z.Search;class k extends a().Component{constructor(D){var C;super(D);C=this,this.onChange=n=>{var l=this.props.appType,_=localStorage.getItem("qyWechatBook");if(n.preventDefault(),this.setState({value:n.target.value}),!(!n.target.value&&!this.props.showCancel)&&!this.props.disableChange){var f=l==="wx_app"&&_==="true";!(0,wt.eY)("ORG_DIALOG_SEARCH")||f||(0,u.Ds)(this.debounceChange,500)()}},this.handleSearch=(n,l)=>{l.preventDefault(),!(!n&&!this.props.showCancel)&&this.extendReturn(n)},this.debounceChange=()=>{this.extendReturn(this.state.value)},this.extendReturn=function(){var n=(0,$.Z)(b().mark(function l(_){var f,r,I,K,H,de,J,fe,ge;return b().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(f=C.props,r=f.appType,I=f.selectType,K=f.appId,H=localStorage.getItem("qyWechatBook"),de="",J=r==="wx_app"&&H==="true"&&K==="9005",!(_&&I==="user"&&J)){le.next=17;break}return le.prev=5,le.next=8,(0,h.F_)(_);case 8:fe=le.sent,ge=fe.data,ge.success&&(de=ge.data),le.next=17;break;case 13:le.prev=13,le.t0=le.catch(5),console.error(le.t0),de="";case 17:C.props.onSearch(_,de);case 18:case"end":return le.stop()}},l,null,[[5,13]])}));return function(l){return n.apply(this,arguments)}}(),this.state={value:""}}render(){var D=this.props,C=D.t,n=D.selectType;return a().createElement("div",{className:"top-search"},a().createElement(E,{placeholder:C(n==="user"?"component.searchStudent":n==="dept"?"component.searchDepartment":n==="post"?"component.searchPost":n==="cluster"?"component.searchCluster":n==="class"?"component.searchClass":"setting.searchGroup"),value:this.state.value,onSearch:this.handleSearch,allowClear:!0,onChange:this.onChange}))}}var w=(0,Le.$j)(B=>({appType:B.user.appType,appId:B.user.appId}))((0,j.Z)()(k)),x=t(87312);class O extends N.Component{constructor(){super(...arguments);this.checkedAll=(D,C)=>{this.props.checkedAll(C)},this.getIsCheckedAll=()=>{var D=this.props.list,C=[].concat(D);if(C.length===0)return!1;var n=C.findIndex(l=>!l.isChecked);return n===-1},this.checkUser=(D,C)=>{C.isChecked=!C.isChecked,this.context.checkUserOne(C,"checkedUser")},this.checkSingleUser=(D,C)=>{C.isChecked=!0,this.context.checkUserOne(C,"checkedUser")},this.checkDept=(D,C)=>{C.isChecked=!C.isChecked,this.context.checkListOne(C,"checkedDept","deptList")},this.checkPost=(D,C)=>{C.isChecked=!C.isChecked,this.context.checkListOne(C,"checkedPost","postList")},this.checkGroup=(D,C)=>{C.isChecked=!C.isChecked,this.context.checkListOne(C,"checkedGroup","groupList")},this.checkedCluster=(D,C)=>{C.isChecked=!C.isChecked,this.context.checkListOne(C,"checkedCluster","clusterList")}}renderList(){var D=this.props,C=D.userListType,n=D.list,l=D.t,_=D.isSingle,f=D.hidePosts;return C==="user"&&!_?n.map(r=>a().createElement("div",{className:"search-result-item",key:r.id,onClick:I=>{this.checkUser(I,r)}},a().createElement(Fe.Z,{checked:r.isChecked},a().createElement(ut,{cardInfo:r},a().createElement("span",{className:"user-names"},a().createElement(Ne.Z,{dataType:"userName",value:r.user_id,name:r.user_name,type:r.source_type}))),r.department_names&&r.department_names.length>0?a().createElement("span",{className:"user-dept"},a().createElement(Oe.Z,{sourceType:r.source_type,list:r.leaf_department_ids,nameList:r.department_names})):null))):C==="user"&&_?n.map(r=>a().createElement("div",{className:"search-result-item",key:r.id,onClick:I=>{this.checkSingleUser(I,r)}},a().createElement("div",{className:"user-name"},a().createElement(ut,{cardInfo:r},a().createElement(Ne.Z,{dataType:"userName",value:r.user_id,name:r.user_name,type:r.source_type}))),r.department_names&&r.department_names.length>0?a().createElement("span",{className:"user-name-dept"},a().createElement(Oe.Z,{sourceType:r.source_type,list:r.leaf_department_ids,nameList:r.department_names})):null)):C==="dept"?n.map(r=>a().createElement("div",{className:"search-result-dept-item",key:r.id,onClick:I=>{this.checkDept(I,r)}},a().createElement(Fe.Z,{checked:r.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},a().createElement(Ne.Z,{dataType:"departmentName",value:r.id,name:r.department_name,type:r.source_type})),r.path&&r.path.length>0?a().createElement(Ge.Z,{title:r.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement(Oe.Z,{list:r.department_infos||[],displayAll:!0}))):null)),a().createElement("div",{className:"department-right"},"(",r.userCount,l("common.userUnit"),")"))):C==="post"?n.map(r=>a().createElement("div",{className:"search-result-dept-item",key:r.id,onClick:I=>{this.checkPost(I,r)}},a().createElement(Fe.Z,{checked:r.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},r.name),r.path&&r.path.length>0?a().createElement(Ge.Z,{title:r.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement("span",null,r.path.join(">")))):null)),!f&&a().createElement("div",{className:"department-right"},"(",r.userCount,l("common.userUnit"),")"))):C==="group"?n.map(r=>a().createElement("div",{className:"search-result-dept-item",key:r.id,onClick:I=>{this.checkGroup(I,r)}},a().createElement(Fe.Z,{checked:r.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},r.name),r.path&&r.path.length>0?a().createElement(Ge.Z,{title:r.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement("span",null,r.path.join(">")))):null)),a().createElement("div",{className:"department-right"},"(",r.userCount,l("common.userUnit"),")"))):C==="cluster"?n.map(r=>a().createElement("div",{className:"search-result-dept-item",key:r.id,onClick:I=>{this.checkedCluster(I,r)}},a().createElement(Fe.Z,{checked:r.isChecked,className:"department-left"},a().createElement("span",{className:"user-name"},r.name)),a().createElement("div",{className:"department-right"},"(",r.userCount,l("common.userUnit"),")"))):null}render(){var D=this.props,C=D.t,n=D.isSingle,l=this.getIsCheckedAll(),_=a().createElement("div",{className:"search-result-all"},a().createElement(Fe.Z,{checked:l,onClick:f=>this.checkedAll(f,!l)},C("common.all")));return a().createElement("div",{className:"search-result-container more-height"},this.props.list.length>0?a().createElement(a().Fragment,null,!n&&_,this.renderList()):a().createElement(x.Z,{tipText:C("component.searchUserEmpty")}))}}O.contextType=Ee,O.defaultProps={list:[]};var q=(0,j.Z)()(O),ee=t(18329),se=t(65202),F=t(91648),Y=U.Z.TabPane,me=g.Z.Option,Pe={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0 20px"},maskClosable:!1};class be extends a().Component{constructor(D){var C;super(D);C=this,this.onCancel=()=>{var n=this.props.onCancel;this.setState({showCancel:!1}),n&&this.props.onCancel()},this.onOk=()=>{var n=this.props.onOk,l=this.state.contextData;this.setState({showCancel:!1});var _=0;if(n){var f=[];l.checkedDept.map(J=>(_+=J.isChecked?J.user_count:0,J.isChecked&&J.authorized!=="false"?f.push((0,T.Z)((0,T.Z)({},J),{},{renderType:"dept"})):null));var r=[];l.checkedPost.map(J=>(_+=J.isChecked?J.user_count:0,J.isChecked?r.push((0,T.Z)((0,T.Z)({},J),{},{renderType:"post"})):null));var I=[];l.checkedGroup.map(J=>(_+=J.isChecked?J.user_count:0,J.isChecked?I.push((0,T.Z)((0,T.Z)({},J),{},{renderType:"group"})):null));var K=[];l.checkedUser.map(J=>{if(!J.reserve)return _+=J.isChecked?1:0,J.isChecked?K.push((0,T.Z)((0,T.Z)({},J),{},{renderType:"user"})):null});var H=[];l.checkedCluster.map(J=>{if(!J.reserve)return _+=J.isChecked?1:0,J.isChecked?H.push((0,T.Z)((0,T.Z)({},J),{},{renderType:"cluster"})):null});var de=[];if(l.checkedClass.map(J=>{if(!J.reserve)return _+=J.isChecked?1:0,J.isChecked?de.push((0,T.Z)((0,T.Z)({},J),{},{renderType:"class"})):null}),_>this.props.maxUserCount){ae.default.warn(this.props.beyondLimitTip);return}n({dept:f,post:r,group:I,user:K,cluster:H,classes:de})}},this.getListParentId=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],I=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];l.forEach(fe=>{fe.isChecked=!0,fe.parentId=[""],fe.userCount=fe.userCount||fe.user_count||0});var K=n.map(fe=>fe.id),H=f.map(fe=>fe.id);if(K||H){var de=re.ZP.OrgDialog.getDeptParent(),J={query_type:1,dept_ids:K,user_ids:H};We.WY.post({url:de,data:(0,T.Z)({},J)}).then(fe=>{var ge=fe.data.data;n.forEach(ye=>{ye.isChecked=!0;var le=ge.find(Se=>Se.id===ye.id)||{path:[]};ye.parentId=le.path[0]?le.path[0].split("/").slice(1):[],ye.userCount=le.user_count||ye.userCount||ye.user_count||0}),_.forEach(ye=>{ye.isChecked=!0;var le=ge.find(Se=>Se.id===ye.id)||{path:[]};ye.parentId=le.path[0]?le.path[0].split("/").slice(1):[],ye.userCount=ye.userCount||ye.user_count||0}),f.forEach(ye=>{ye.isChecked=!0;var le=[];ge.forEach(Se=>{Se.id===ye.id&&Se.path.map(xe=>{le.push(...xe.split("/").slice(1))})}),ye.parentId=Array.from(new Set(le))}),r.forEach(ye=>{ye.isChecked=!0;var le=ge.find(Se=>Se.id===ye.id)||{path:[]};ye.parentId=le.path[0]?le.path[0].split("/").slice(1):[],ye.userCount=ye.userCount||ye.user_count||0}),I.forEach(ye=>{ye.isChecked=!0;var le=ge.find(Se=>Se.id===ye.id)||{path:[]};ye.parentId=le.path[0]?le.path[0].split("/").slice(1):[],ye.userCount=ye.userCount||ye.user_count||0}),C.setState({contextData:(0,T.Z)((0,T.Z)({},C.state.contextData),{},{checkedDept:n,checkedGroup:l,checkedPost:_,checkedUser:f,checkedCluster:r,checkedClass:I})})})}else l.length>0?C.setState({contextData:(0,T.Z)((0,T.Z)({},C.state.contextData),{},{checkedGroup:l})}):C.setState({contextData:(0,T.Z)((0,T.Z)({},C.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[]})})},this.initHidePostsStatus=n=>{var l=this.state.contextData;this.setState({contextData:(0,T.Z)((0,T.Z)({},l),{},{hidePosts:n})})},this.initTypeList=(n,l,_)=>{_.forEach(f=>{var r=this.findItemIndex(f.id,l);r===-1?f.isChecked=!1:f.isChecked=this.state.contextData[l][r].isChecked}),this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{[n]:_})})},this.initTypeUser=(n,l)=>{var _=l||[...this.state.contextData[n]],f=this.props.reserveUser;_.forEach(r=>{var I=this.findItemIndex(r.id,"checkedUser");f.findIndex(K=>K.id===r.id)!==-1&&(r.reserve=!0),I===-1?r.isChecked=!1:r.isChecked=this.state.contextData.checkedUser[I].isChecked}),this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{[n]:_})})},this.toggleDisplayItem=(n,l)=>{var _=this.findItemIndex(n.id,l);return _===-1?l.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[l]:this.checkListParentId(l,n),checkedUser:n.isChecked?this.checkParentId(this.state.contextData.checkedUser,n.id):this.state.contextData.checkedUser}:{[l]:[...this.state.contextData[l],n]}:l.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[l]:this.checkListParentId(l,n),checkedUser:n.isChecked?this.checkParentId(this.state.contextData.checkedUser,n.id):this.state.contextData.checkedUser}:{checkedUser:this.getNewList(n,"checkedUser",!0),[l]:this.getNewList(n,l)}},this.toggleDisplayList=(n,l,_,f,r,I,K)=>{this.deleteAllName(l),this.deleteAllName(f),this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{[n]:l,[_]:f,[r]:I,checkedUser:K})})},this.deleteAllName=n=>{n.map(l=>(l.all_name&&typeof l.all_name=="object"&&delete l.all_name,l))},this.checkUserOne=(n,l)=>{this.props.single?this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{checkedUser:[n],[l]:l==="checkedUser"?[n]:this.getSingleUserList(n,l)})}):this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),this.toggleDisplayItem(n,l))})},this.dealAuthorizedFalseChecked=function(){var n=(0,$.Z)(b().mark(function l(_){var f,r,I,K,H,de,J,fe,ge;return b().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return f=C.state.contextData,r=f.cacheId,I=f.checkedDept,K=f.checkedUser,H={checkedDept:[],checkedUser:[]},le.prev=2,le.next=5,ot({departmentId:_.id,cache_id:r});case 5:de=le.sent,J=de.data,fe=J.departments,ge=J.users,fe.push(_),fe.map(Se=>(Se.isChecked=!0,Se.name=Se.department_name,Se.parentId=Se.parent_ids.split("/"),Se.parentAuthorize=!1,Se.userCount=Se.user_count,Se)),ge.map(Se=>(Se.isChecked=!0,Se.name=Se.user_name,Se.parentAuthorize=!1,C.toggleDisplayItem(Se,"deptUser"),Se)),H=(0,T.Z)((0,T.Z)({},H),{},{checkedUser:pe()(ge,K,"id"),checkedDept:pe()(fe,I,"id")}),le.next=16;break;case 13:le.prev=13,le.t0=le.catch(2),console.error("\u83B7\u53D6\u90E8\u95E8\u7BA1\u8F96\u8303\u56F4\u51FA\u9519",le.t0);case 16:return le.abrupt("return",H);case 17:case"end":return le.stop()}},l,null,[[2,13]])}));return function(l){return n.apply(this,arguments)}}(),this.dealAuthorizedFalseUnChecked=n=>{var l=this.state.contextData,_=l.checkedDept,f=l.checkedUser,r=l.deptUser,I=[],K=_.filter(de=>de.parent_ids.split("/").indexOf(n.id)===-1),H=f.filter(de=>{var J=de.department_ids.indexOf(n.id)===-1;return J||I.push(de.id),J});return{checkedDept:K,checkedUser:H,deptUser:I.length>0?r.map(de=>(I.indexOf(de.id)>-1&&(de.isChecked=!1),de)):r}},this.checkListOne=function(){var n=(0,$.Z)(b().mark(function l(_,f,r){var I;return b().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(I={checkedDept:[],checkedUser:[]},!(_.authorized==="false"&&f==="checkedDept")){H.next=12;break}if(!_.isChecked){H.next=8;break}return H.next=5,C.dealAuthorizedFalseChecked(_);case 5:H.t0=H.sent,H.next=9;break;case 8:H.t0=C.dealAuthorizedFalseUnChecked(_);case 9:I=H.t0,H.next=14;break;case 12:_.parentAuthorize===!1&&_.isChecked===!1&&C.unCheckedParentDept(_,f),I=(0,T.Z)({[r]:C.getNewList(_,r,!1)},C.toggleDisplayItem(_,f));case 14:C.setState({contextData:(0,T.Z)((0,T.Z)({},C.state.contextData),I)});case 15:case"end":return H.stop()}},l)}));return function(l,_,f){return n.apply(this,arguments)}}(),this.removeCheckedUser=n=>{this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{checkedUser:this.getNewList(n,"checkedUser"),deptUser:this.getNewList(n,"deptUser"),postUser:this.getNewList(n,"postUser"),groupUser:this.getNewList(n,"groupUser"),searchResult:this.getNewList(n,"searchResult")})})},this.unCheckedParentDept=(n,l)=>{var _=this.state.contextData.checkedDept,f=_.filter(K=>K.authorized==="false"&&l==="checkedUser"?n.department_ids.indexOf(K.id)>-1:l==="checkedDept"?n.parentId.indexOf(K.id)>-1:!1),r=(0,te.Z)(f,1),I=r[0];I&&(I.isChecked=!1,this.toggleDisplayItem(I,"checkedDept"),this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{checkedDept:f})}))},this.checkListParentId=(n,l)=>{var _=[...this.state.contextData[n]],f=this.findItemIndex(l.id,n);return _.forEach(r=>{r.id!==l.id&&r.parentId.indexOf("".concat(l.id))!==-1?r.isChecked=!1:r.id===l.id&&(r.isChecked=l.isChecked)}),f===-1&&_.push(l),_},this.checkParentId=(n,l)=>{var _=[];return n.forEach(f=>{var r=typeof f.parentId!="undefined"?f.parentId:f.department_ids||[];r.indexOf(l)===-1&&_.push(f)}),_},this.getNewList=(n,l,_)=>{var f=[...this.state.contextData[l]],r=this.findItemIndex(n.id,l);return r===-1?_&&f.push(n):f[r].isChecked=n.isChecked,f},this.getSingleUserList=(n,l)=>{var _=[...this.state.contextData[l]];return _.forEach(f=>{f.id===n.id?f.isChecked=n.isChecked:f.isChecked=!1}),_},this.findItemIndex=(n,l)=>this.state.contextData[l].findIndex(_=>_.id===n),this.clearTabPanelList=(n,l)=>{this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{[n]:[],[l]:[]})})},this.getTabs=()=>{var n=[],l,_,f=this.props,r=f.t,I=f.filterAuthOpen,K=f.disableHidden,H=f.scrollFlag,de=this.state.contextData,J=de.canUseGroups,fe=de.canUseClass;return this.state.displayType.forEach(ge=>{switch(ge){case"dept":n.push({label:r("component.orgDialogDeptLabel"),key:"dept",defaultBreadNav:{value:"",label:"",sourceType:""},queryType:1});break;case"group":n.push({label:r("component.orgDialogGroupLabel"),key:"group",queryType:2,defaultBreadNav:{value:"",label:r("component.userGroup")}});break;case"post":n.push({label:r("component.orgDialogPostLabel"),key:"post",defaultBreadNav:{value:"1",label:r("common.post")},queryType:3});break;case"cluster":J&&n.push({label:r("component.orgDialogClusterLabel"),key:"cluster",defaultBreadNav:{value:"",label:""},queryType:4});break;case"class":fe&&n.push({label:r("component.orgDialogClassLabel"),key:"class",defaultBreadNav:{value:"",label:""},queryType:5});break}}),n.length===1?_=a().createElement(Xe,{defaultBreadNav:n[0].defaultBreadNav,queryType:n[0].queryType,type:n[0].key,filterAuthOpen:I,disableHidden:K,scrollFlag:H}):(l=n.map(ge=>a().createElement(Y,{tab:ge.label,key:ge.key},a().createElement(Xe,{defaultBreadNav:ge.defaultBreadNav,queryType:ge.queryType,type:ge.key,filterAuthOpen:I,disableHidden:K,scrollFlag:H}))),_=a().createElement(U.Z,null,l)),_},this.handleSearch=(n,l)=>{var _=this.state.selectType;_==="user"?this.getUserList(n,l):_==="dept"?this.getDeptList(n):_==="post"?this.getPostList(n):_==="cluster"?this.getClusterResult(n):_==="class"?this.getClassResult(n):this.getGroupList(n)},this.getClusterResult=n=>{var l=re.ZP.OrgDialog.getClusterList(),_={keyword:n};We.WY.get({url:l,params:_}).then(f=>{this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedCluster",f.data.data.map(r=>({name:r.name,userCount:r.user_count,id:r.id,parentId:[""]})))})},this.getUserList=(n,l)=>{var _=re.ZP.OrgDialog.getUserByName(),f={user_name:l===""?n:"",filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType,userIds:l};We.WY.get({url:_,params:f}).then(r=>{r.data.users&&r.data.users.forEach(I=>{I.name=I.user_name}),this.setState({showCancel:!0}),this.initTypeUser("searchResult",r.data.users||[])})},this.getDeptList=n=>{var l=re.ZP.Organization.queryDept(),_={department_name:n,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};We.WY.get({url:l,params:_}).then(f=>{f.data.departments&&f.data.departments.forEach(r=>{r.name=r.department_name,r.parentId=r.parent_ids?r.parent_ids.split("/"):[],r.userCount=r.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedDept",f.data.departments||[])})},this.getPostList=n=>{var l=re.ZP.Organization.addPost(),_={post_name:n,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};We.WY.get({url:l,params:_}).then(f=>{f.data.posts&&f.data.posts.forEach(r=>{r.name=r.post_name,r.parentId=r.parent_id?r.parent_id.split("/"):[],r.userCount=r.user_count}),this.setState({hidePosts:f.data.hide_posts,showCancel:!0}),this.initTypeList("searchResult","checkedPost",f.data.posts||[])})},this.getGroupList=n=>{var l=re.ZP.Organization.getGroupList(),_={group_name:n,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};We.WY.get({url:l,params:_}).then(f=>{f.data.groups&&f.data.groups.forEach(r=>{r.name=r.group_name,r.parentId=r.parent_id?r.parent_id.split("/"):[],r.userCount=r.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedGroup",f.data.groups||[])})},this.checkAllResult=n=>{var l=this.state,_=l.selectType,f=l.contextData,r="checked".concat(_.charAt(0).toUpperCase()).concat(_.substr(1)),I=[...f[r]],K=f.searchResult.map(de=>{de.isChecked=n;var J=I.findIndex(fe=>fe.id===de.id);return J!==-1?I[J].isChecked=n:I.push(de),de}),H=I;this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{[r]:H,searchResult:K})})},this.clearSelectedAll=()=>{var n=this.state.contextData,l=n.checkedDept,_=n.checkedGroup,f=n.checkedPost,r=n.checkedUser,I=n.checkedCluster,K=n.checkedClass,H=n.deptList,de=n.groupList,J=n.postList,fe=n.clusterList,ge=n.classList,ye=n.deptUser,le=n.groupUser,Se=n.postUser,xe=rt=>(rt.forEach(nt=>{nt.isChecked=!1}),rt);this.setState({contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],deptList:l.length>0?xe(H):H,groupList:_.length>0?xe(de):de,postList:f.length>0?xe(J):J,clusterList:I.length>0?xe(fe):fe,classList:K.length>0?xe(ge):ge,deptUser:r.length>0?xe(ye):ye,groupUser:r.length>0?xe(le):le,postUser:r.length>0?xe(Se):Se})})},this.handleCancel=()=>{this.setState({showCancel:!1})},this.handleSelectChange=n=>{this.setState({selectType:n,contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{searchResult:[]})})},this.state={title:D.title||D.t("component.chooseAssignScope"),displayType:D.displayType?D.displayType:["dept"],selectType:"user",showCancel:!1,hidePosts:!1,contextData:{showUserCount:D.showUserCount,deptList:[],groupList:[],postList:[],clusterList:[],classList:[],deptUser:[],groupUser:[],postUser:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[],onlyUser:D.onlyUser,onlyDept:D.onlyDept,onlyPost:D.onlyPost,canUseGroups:D.useGroups,canUseClass:D.useClass,single:D.single,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,userType:this.props.userType,initTypeList:this.initTypeList,initTypeUser:this.initTypeUser,toggleDisplayItem:this.toggleDisplayItem,toggleDisplayList:this.toggleDisplayList,checkListOne:this.checkListOne,checkUserOne:this.checkUserOne,removeCheckedUser:this.removeCheckedUser,clearTabPanelList:this.clearTabPanelList,maxDeptUserCount:D.maxDeptUserCount,hidePosts:!1,initHidePostsStatus:this.initHidePostsStatus,cacheId:(0,F.Z)(),clearSelectedAll:this.clearSelectedAll}}}componentDidUpdate(D){if(D.visible!==this.props.visible&&this.props.visible){var C=this.props.initData,n=C.dept,l=C.group,_=C.post,f=C.user,r=C.cluster,I=C.classes;console.warn(f,"user");var K=this.props,H=K.reserveUser,de=K.t,J=K.onlyDept,fe=K.onlyPost;H.forEach(ge=>{ge.reserve=!0}),this.setState({title:this.props.title||de("component.chooseAssignScope"),displayType:this.props.displayType?this.props.displayType:["dept"],selectType:fe?"post":J?"dept":"user",contextData:(0,T.Z)((0,T.Z)({},this.state.contextData),{},{deptList:[],groupList:[],postList:[],deptUser:[],clusterList:[],classList:[],groupUser:[],postUser:[],searchResult:[],onlyUser:this.props.onlyUser,onlyDept:this.props.onlyDept,canUseGroups:this.props.useGroups,canUseClass:this.props.useClass,onlyPost:this.props.onlyPost,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,cacheId:(0,F.Z)()})},()=>{this.getListParentId(n,l,_,f.concat(H),r,I)})}}componentWillUnmount(){aa({cacheId:this.state.contextData.cacheId}).then(()=>{console.warn("\u6E05\u9664\u7F13\u5B58\u6210\u529F")}).catch(D=>{console.error("\u6E05\u9664\u7F13\u5B58\u5931\u8D25",D)})}render(){var D=this.getTabs(),C=this.props,n=C.t,l=C.onlyUser,_=C.onlyDept,f=C.onlyPost,r=C.displayType,I=C.useGroups,K=C.useClass,H=C.onlyChoosePost,de=(0,se.p)(),J=this.state,fe=J.showCancel,ge=J.selectType,ye=J.hidePosts;return Pe.okText=this.props.okText||n("common.ok"),a().createElement(ee.ZP,(0,z.Z)({},Pe,this.props.modalConfig,{visible:this.props.visible,title:this.state.title,wrapClassName:[this.props.className,"cl-org-modal"],onCancel:this.onCancel,onOk:this.onOk}),a().createElement(Ee.Provider,{value:this.state.contextData},a().createElement("div",{className:"cl-org"},a().createElement("div",{className:"cl-org-left"},this.props.visible?a().createElement("div",{className:"cl-org-left__top"},a().createElement(oe.Z.Group,{compact:!0},a().createElement(g.Z,{className:"cl-org-left__top__select",value:ge,style:{width:80},onChange:this.handleSelectChange},a().createElement(me,{value:"user",disabled:_||f||H},n("authGroup.userLabel")),a().createElement(me,{value:"dept",disabled:l||H},n("setting.deptLabel")),a().createElement(me,{value:"post",disabled:!f&&(_||l)||r.length===1},n("common.post")),a().createElement(me,{value:"group",disabled:_||l||r.length===1||H},n("component.userGroup")),I?a().createElement(me,{value:"cluster"},n("component.useCluster")):null,K?a().createElement(me,{value:"class"},n("component.useClass")):null),a().createElement(w,{selectType:ge,onSearch:this.handleSearch,showCancel:fe,disableChange:this.props.disableChange})),fe?a().createElement("div",{className:"cl-org-left__top__cancel",onClick:this.handleCancel,style:{color:de}},n("common.cancel")):null):null,fe?a().createElement(q,{isSingle:this.props.single,list:this.state.contextData.searchResult,userListType:ge,checkedAll:this.checkAllResult,hidePosts:ye}):D),a().createElement("div",{className:"cl-org-right"},a().createElement(y,null)))))}}be.defaultProps={visible:!0,showUserCount:!0,displayType:["dept","group","post","cluster","class"],initData:{dept:[],post:[],group:[],user:[],cluster:[],classes:[]},reserveUser:[],onlyUser:!1,onlyDept:!1,onlyPost:!1,useGroups:!1,useClass:!1,asyncDeptTree:!0,userType:"active",single:!1,maxUserCount:Infinity,filterAuthOpen:!1,disableHidden:!1,beyondLimitTip:"",onOk:()=>{},modalConfig:{},maxDeptUserCount:0,onlyChoosePost:!1,scrollFlag:!1};var Ie=(0,j.Z)()(be)},99891:function(Ve,Ce,t){"use strict";var z=t(12924),Z=t.n(z),oe=t(28216),te=t(91768),$=t(37055),m=t(10237),ae=t(60667);class T extends Z().PureComponent{constructor(M){super(M);this.getWaterMarkText=U=>{var e=this.props.userInfo,b=e.jobNumber,N=localStorage.getItem("waterMarkPostName"),a=[],j=U.find(pe=>pe.type==="content_setting"),V=U.find(pe=>pe.type==="content_custom");return j.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),V.param.checked==="true"&&V.param.comment[0]!==""&&this.setState({commentText:V.param.comment[0]}),j.param.comment.indexOf("position")!==-1&&N&&N!==""&&a.push("".concat(N)),j.param.comment.indexOf("jobnumber")!==-1&&b&&b!==""&&a.push("".concat(b)),a.join("-")},this.getWaterMarkApplication=U=>{var e=this.props.scenes,b=U.find(N=>N.type==="application_scenario");b.param.comment.indexOf(e)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=U=>{var e=U.find(b=>b.type==="dispersive");this.setState({isDispersive:e.param.checked==="true"})},this.getDynamicSet=()=>{var U=$.ZP.advancedSetting.dynamicWaterMarkNew(),e={access_token:window.localStorage.getItem("token")};m.WY.get({url:U,params:e}).then(b=>{var N=JSON.parse(b.data.actions);this.setState({waterMarkText:this.getWaterMarkText(N),actions:N}),this.getWaterMarkApplication(N),this.getWaterIsDispersive(N)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var M=localStorage.getItem("waterMarkPostName");M===""||M===null?this.getPostName():this.getDynamicSet()}getPostName(){var M=$.ZP.advancedSetting.getPostName();m.WY.get({url:M}).then(U=>{localStorage.setItem("waterMarkPostName",U.data.post_names[0]||""),this.getDynamicSet()})}render(){var M=this.state,U=M.showWaterMark,e=M.waterMarkCount,b=M.isUserName,N=M.isDispersive,a=M.waterMarkText,j=M.actions,V=M.commentText,pe=this.props.userInfo,G=pe.name,Q=pe.unionid,ve=pe.sourceType;return Z().createElement("div",{className:"common-watermark"},U&&new Array(e).fill(0).map((X,he)=>Z().createElement("div",{key:he,className:"common-watermark-item ".concat(N?"isDispersive":"")},Z().createElement("span",{className:"common-watermark-item-content"},V!==""&&Z().createElement("span",{className:"item-part"},V),b&&Z().createElement("span",null,V!==""&&Z().createElement("span",null,"-"),Z().createElement(ae.Z,{dataType:"userName",value:Q,name:G,type:ve})),Z().createElement("span",{className:"item-part"},(b||V!=="")&&a!==""&&Z().createElement("span",null,"-"),a)))))}}var R=g=>({userInfo:g.user});Ce.Z=(0,oe.$j)(R)((0,te.Z)()(T))},80430:function(Ve,Ce,t){"use strict";var z=t(12924),Z=t.n(z),oe=t(60667),te=$=>{var m=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},e=U.department_ids.split("/"),b=U.department_names.split("/"),N=e.map((a,j)=>Z().createElement(oe.Z,{key:a,dataType:"departmentName",value:a,name:b[j],type:U.source_type}));return Z().createElement(Z().Fragment,null,N.map((a,j)=>Z().createElement("span",{key:a},a,j===b.length-1?"":"/")))},ae=M=>Z().createElement(oe.Z,{dataType:"departmentName",value:M.department_id,name:M.department_name,type:M.source_type}),T=()=>{var M=$.list,U=M===void 0?[]:M,e=$.isBlock;if(!U.length)return null;var b=U.map(N=>m(N));return b.length&&b.length>1?Z().createElement(Z().Fragment,null,b.map((N,a)=>e?Z().createElement("div",{key:N},N):Z().createElement("span",{key:N},N,a===b.length-1?"":"\uFF0C"))):Z().createElement(Z().Fragment,null,b[0]||"")},R=()=>{var M=$.list,U=$.nameList,e=$.sourceType,b=$.isBlock,N=M.map((a,j)=>ae({department_id:a,department_name:U[j],source_type:e}));return Z().createElement(Z().Fragment,null,N.map((a,j)=>b?Z().createElement("div",{key:a},a):Z().createElement("span",{key:a},a,j===N.length-1?"":"\uFF0C")))},g=()=>$.displayAll?T():R();return g()};te.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},Ce.Z=te},60667:function(Ve,Ce,t){"use strict";t.d(Ce,{Z:function(){return T}});var z=t(33565),Z=t(12924),oe=t.n(Z),te=t(28216);function $(R){var g=R.type,M=R.openid,U=R.from,e=(0,Z.useRef)(null);return(0,Z.useLayoutEffect)(()=>{U==="vue"?window.parent.WWOpenData.bind(e.current):WWOpenData.bind(e.current)}),oe().createElement("ww-open-data",{ref:e,type:g,openid:M})}var m=R=>{var g=R.wxWorkApiFlag,M=R.appType,U=R.from,e=(0,Z.useState)(!1),b=(0,z.Z)(e,2),N=b[0],a=b[1];(0,Z.useEffect)(()=>{var pe=localStorage.getItem("qyWechatBook");(M!=="wx_app"||g||pe==="false"||U==="vue"||U==="taro")&&a(!0)},[g,M,U]);var j=(0,Z.useCallback)(()=>{var pe=R.type,G=R.value,Q=R.name,ve=Q===void 0?"":Q;switch(console.warn(R,"props"),pe){case"wx_sync":{var X=R.dataType;return G?oe().createElement($,{from:U,type:X,openid:G}):ve}default:return ve}},[R]),V=()=>{var pe=R.name,G=R.dataType,Q=localStorage.getItem("qyWechatBook");if(G===""||Q==="false")return pe;if(U==="vue"||U==="taro")return j();switch(R.appType){case"wx_app":return j();default:return pe}};return N?V():R.name};m.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var ae=R=>({appType:R.user.appType,wxWorkApiFlag:R.user.wxWorkApiFlag}),T=(0,te.$j)(ae)(m)},76466:function(Ve,Ce,t){"use strict";t.d(Ce,{Z:function(){return Jt}});var z=t(20228),Z=t(11382),oe=t(57663),te=t(71577),$=t(62029),m=t(57361),ae=t(9754),T=t.n(ae),R=t(12924),g=t.n(R),M=t(91512),U=t(68654),e=t(91768),b=t(4412),N=t.n(b);class a extends g().Component{render(){var v=this.props.t;return g().createElement("div",{className:"net-preview"},g().createElement("div",{className:"net-preview-center"},g().createElement("img",{src:N(),alt:"picture"}),g().createElement("h2",null,v("localStorage.tip")),g().createElement("p",null,v("localStorage.banPreview"))))}}var j=(0,e.Z)()(a),V=t(88986),pe=t(34792),G=t(48086),Q=t(28216),ve=t(21594),X=t(41225),he=t(10237),re=(ke,v)=>(0,V.Z)({id:ke||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},v),ne=re;class ie extends R.Component{constructor(){super(...arguments);this.setupPlayer=v=>{var y=this.props,h=y.onVideoReady,u=h===void 0?()=>{}:h,E=y.playerConfig,k=y.contentType;v&&v==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,V.Z)((0,V.Z)({},E),{},{contentType:k==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:E.source,autoplay:E.autoplay,width:E.width,id:E.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:w=>{w.on("sourceloaded",x=>{var O=x.paramData,q=O.desc,ee=O.definition;w.getComponent("VideoQuality")&&w.getComponent("VideoQuality").setCurrentQuality(q,ee,E.id)}),w.on("ready",()=>{u()}),this.playerInstance=w,this.setPlayerConfig()}}))}}componentDidUpdate(v){v.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(v){this.player&&this.player.seek(v)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(v){this.player.setSpeed(v)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var v=this.props,y=v.onPlay,h=y===void 0?()=>{}:y,u=v.onTimeUpDate,E=u===void 0?()=>{}:u,k=v.onEnd,w=k===void 0?()=>{}:k,x=v.onPause,O=x===void 0?()=>{}:x,q=v.onError,ee=q===void 0?()=>{}:q,se=this.playerInstance;se.on("play",()=>{h()}),se.on("pause",()=>{O()}),se.on("timeupdate",F=>{E(F)}),se.on("ended",()=>{w()}),se.on("error",(0,m.Z)(T().mark(function F(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:ee();case 1:case"end":return me.stop()}},F)})))}render(){var v=this.props.playerConfig;return g().createElement("div",{className:"common-video-player-container"},g().createElement("div",{id:v.id}))}}ie.playerInstance=null,ie.defaultProps={playerConfig:ne(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var _e=ie,Ee=(ke,v)=>(0,V.Z)({id:ke||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},v),Be=Ee;class Ze extends R.Component{constructor(){super(...arguments);this.setupPlayer=v=>{v&&v==="resetPlayer"&&this.player.dispose();var y=this.props,h=y.playerConfig,u=y.onVideoReady,E=u===void 0?()=>{}:u;this.player=new Aliplayer(h,k=>{k.on("sourceloaded",w=>{var x=w.paramData,O=x.desc,q=x.definition;k.getComponent("VideoQuality")&&k.getComponent("VideoQuality").setCurrentQuality(O,q,h.id)})}),this.player.on("ready",()=>{E()})},this.setPlayerConfig=()=>{var v=this.props,y=v.onPlay,h=y===void 0?()=>{}:y,u=v.onTimeUpDate,E=u===void 0?()=>{}:u,k=v.onEnd,w=k===void 0?()=>{}:k,x=v.onPause,O=x===void 0?()=>{}:x,q=v.onError,ee=q===void 0?()=>{}:q;this.player.on("play",()=>{h()}),this.player.on("pause",()=>{O()}),this.player.on("timeupdate",se=>{E(se)}),this.player.on("ended",()=>{w()}),this.player.on("error",(0,m.Z)(T().mark(function se(){return T().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:ee();case 1:case"end":return Y.stop()}},se)})))},this.getPlayerContent=v=>{this.playerContainer=v}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(v){v.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(v){this.player.seek(v)}exitFull(){var v=this.player.fullscreenService;v&&v.isFullScreen&&v.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var v=this.props.playerConfig;return g().createElement("div",{className:"common-video-player-container"},g().createElement("div",{id:v.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}Ze.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:Be()};var Ne=Ze;class $e{constructor(v){this.hasCreated=!1,this.definition="",this.getQuality=v}createEl(v,y){var h=y._options&&y._options.language,u=y._el.id;this.isEn=h&&h==="en-us";var E=(0,ve.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),k=(0,ve.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),w=document.querySelector("#".concat(u," .prism-controlbar"));w.appendChild(E),v.appendChild(k)}setCurrentQuality(v,y,h){var u=document.querySelector("#".concat(h," .current-quality"));u.innerText=v,u.dataset.def=y,this.definition=y;var E=document.querySelector("#".concat(h," .quality-list")),k=E.querySelector(".current");k&&(k.className="");var w=E.querySelector('li[data-def="'.concat(y,'"]'));w&&(w.className="current")}created(v){this._urls=v._urls;var y=v._el.id,h=document.querySelector("#".concat(y," .current-quality")),u=document.querySelector("#".concat(y," .quality-list")),E=document.querySelector("#".concat(y," .quality-modal")),k=this._urls.map(O=>'<li data-def="'.concat(O.definition,'">').concat(O.desc,"</li>"));if(u.innerHTML=k.join(""),this.hasCreated==!1&&this.definition){var w=u.querySelector('li[data-def="'.concat(this.definition,'"]'));w.className="current"}this.hasCreated=!0;var x=null;h.onclick=()=>{u.style.display="block"},h.onmouseleave=()=>{x=setTimeout(()=>{u.style.display="none"},100)},u.onmouseenter=()=>{clearTimeout(x)},u.onmouseleave=()=>{u.style.display="none"},u.onclick=O=>{var q=O.target,ee=q.dataset.def,se=q.innerText;if(ee&&q.className!=="current"){var F=this._urls.find(Y=>Y.definition===ee);v.loadByUrl(F.Url,v.getCurrentTime(),!0,!0),this.setCurrentQuality(F.desc,F.definition,y),E.style.display="block",E.querySelector("span.current-quality-tag").innerText=F.desc}this.getQuality(ee,se)}}ready(v){var y=v._el.id,h=document.querySelector("#".concat(y," .quality-modal"));h.style.display="none";var u=document.querySelector("#".concat(y," .prism-setting-item.prism-setting-quality"));u&&u.classList.add("player-hidden")}}class je{createEl(v,y){var h=y._el.id,u=(0,ve.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),E=document.querySelector("#".concat(h," .prism-controlbar"));E.appendChild(u)}ready(v){var y=v._el.id,h=document.querySelector("#".concat(y," .current-rate")),u=document.querySelector("#".concat(y," .rate-list")),E=null,k=document.querySelector("#".concat(y," .prism-setting-item.prism-setting-speed"));k&&k.classList.add("player-hidden"),h.onclick=()=>{u.style.display="block"},h.onmouseleave=()=>{E=setTimeout(()=>{u.style.display="none"},100)},u.onmouseenter=()=>{clearTimeout(E)},u.onmouseleave=()=>{u.style.display="none"},u.onclick=w=>{var x=w.target,O=x.dataset.rate;if(O){if(v.setSpeed(O),x.className!=="current"){var q=u.querySelector(".current");q&&(q.className=""),x.className="current"}u.style.display="none",h.innerText="".concat(O,"x")}}}}var Je=t(69164),Fe=t(37055);function Re(ke){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=Fe.ZP.local.getLocalUrl(ke);return he.WY.get({url:y,params:v})}var Qe=t(91648),qe=t(18329),Ge=t(38642),pt=t(9849),at=t(99891);class gt extends R.Component{constructor(v){super();this.WaterMarkText=v,this.html=document.getElementsByClassName("common-watermark")}createEl(v){setTimeout(()=>{v.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var Dt=gt,yt=ke=>({userInfo:ke.user});class Et extends R.Component{constructor(v){var y;super(v);y=this,this.onVideoReady=h=>{var u=this.props,E=u.resourceInfo,k=u.mode,w=u.autoPlay,x=u.t,O=E.storageType;h==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(h),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(k==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),k==="preview"&&w&&this.play.play()):O==="ALIBABA_PRIVATE"||O==="LOCAL"?this.updateSource("resetPlayer"):(he.WY.logger({keyword:"video",moduleName:"video-play",msg:x("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var h=this.props,u=h.draggable,E=h.mode,k=h.t,w=h.studyInfo,x=h.needCurrentTime,O=h.onCurrentTime,q=O===void 0?()=>{}:O,ee=w.studyType,se=w.studyId,F=w.resourceId,Y=this.state,me=Y.showPreventHang,Pe=Y.dragSwitch,be=Y.showRandomAlert,Ie=Y.randomAlertDialogVisible,B=this.playingVideo,D=B.oneTime,C=B.popupWindowCount,n=B.maxPlayTime,l=B.progress,_=B.auditionLength,f=B.auditionType,r=B.duration,I=B.recentStart,K=this.play.getCurrentTime(),H=(me==="OPEN"||be==="OPEN")&&C>0;if(x&&q(K),_>0&&f===2&&K>_&&(this.play.seek(_),G.default.warning(k("component.haveALookOverTip")),this.play.pause()),E==="learn"&&H){var de=r-D*C;if(C>0&&K>de)if(this.play.pause(),be==="OPEN"){if(!Ie){var J=(0,Qe.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:J},()=>{(0,X.qp)({popupId:J,planId:se,resourceId:F,type:"popup_start"})}),this.play.exitFull()}}else me==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((u||l===100)&&(K>0&&(this.playingVideo.recentStart=K),!((ee==="enterprise"||ee==="studyProject")&&Pe==="OPEN")))return!1;K>n?K-I>2?(this.playingVideo.recentStart=n,this.play.seek(n),G.default.warning(k("component.preventFastWatchTip"))):(this.playingVideo.recentStart=K,this.playingVideo.maxPlayTime=K):K>0&&K>this.playingVideo.recentStart&&(this.playingVideo.recentStart=K)},this.onPlay=()=>{var h=this.props,u=h.mode,E=h.onPlay,k=E===void 0?()=>{}:E;k();var w=this;u==="learn"&&!w.timer&&(w.timer=setTimeout(function x(){w.saveProgress(),clearTimeout(w.timer),w.timer=setTimeout(x,2e4)},2e4))},this.onPause=()=>{var h=this.props,u=h.studyInfo,E=h.mode,k=u.studyType;clearTimeout(this.timer),this.timer=null,E==="learn"&&(k==="platform"||k==="enterprise"||k==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var h=this.props.mode;h==="learn"&&this.saveProgress()},this.onError=h=>{var u=this.props.resourceInfo,E=u.storageType;(E==="ALIBABA_PRIVATE"||E==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var h=this.props.mode;this.initPlayVideo(),h==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var h=this.state,u=h.showPreventHang,E=h.showRandomAlert,k=this.props,w=k.t,x=k.playingVideo,O=k.studyInfo,q=k.autoPlay,ee=x.recentStart,se=x.duration,F=x.progress,Y=O.studyType,me=(u==="OPEN"||E==="OPEN")&&(Y==="studyTask"||Y==="enterprise"||Y==="studyProject")&&F<100;me?(E==="OPEN"?this.setState({promptMessage:w("component.preventAlertTip"),dialogVisible:!0}):u==="OPEN"&&this.setState({promptMessage:w("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):q&&(this.play.play(),Math.ceil(ee)<parseInt(se)&&this.play.seek(ee))},this.playerShowPreventHang=()=>{var h=this.playingVideo,u=h.duration,E=h.recentStart,k=0;u>0&&u<180?(k=u/2,this.playingVideo.oneTime=k,E>=k?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):u>=180&&u<600?(k=u/3,this.playingVideo.oneTime=k,E>=2*k?this.playingVideo.popupWindowCount=0:E>=k?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(k=u/4,this.playingVideo.oneTime=k,E>=3*k?this.playingVideo.popupWindowCount=0:E>=2*k?this.playingVideo.popupWindowCount=1:E>=k?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var h=this.props,u=h.playingVideo,E=h.mode;if(E==="learn"){this.playingVideo=(0,V.Z)({},u);var k=u.duration,w=u.progress;this.playingVideo.hasFinished=parseInt(w)===100,this.playingVideo.maxPlayTime=parseInt(k)*parseInt(w)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,m.Z)(T().mark(function h(){var u,E,k,w,x,O,q,ee,se,F,Y,me,Pe,be,Ie,B,D,C,n,l,_,f,r,I;return T().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(u=y.state,E=u.speedSwitch,k=u.dragSwitch,w=u.whiteList,x=y.props,O=x.resourceInfo,q=x.showQuality,ee=O.contentType,se=O.storageType,F=O.source,Y=O.playId,me=O.playerId,Pe=O.showFullScreen,be=Pe===void 0?!0:Pe,Ie=Be(me),Ie.components=[],B=typeof F=="object"&&F.hasOwnProperty("FD")&&F.FD.indexOf("m3u8")===-1,q&&B&&ee!=="mp3"&&(se&&se==="PUBLIC_CLOUD"||!se)&&Ie.components.push({name:"VideoQuality",type:$e,args:[()=>{y.play.pause(),y.playingVideo.readyCount=0}]}),E==="OPEN"&&Ie.components.push({name:"VideoRate",type:je}),be&&(D=Ie.skinLayout.find(de=>de.name==="controlBar"),D&&D.children.splice(D.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),Ie.components.push({name:"VideoWaterMark",type:Dt}),C=F.FD,n=F.OD,C.indexOf("http://")>-1&&(C=C.replace("http://","https://")),n.indexOf("http://")>-1&&(n=n.replace("http://","https://")),l=w.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",F.OD=n&&n.indexOf(l)>-1&&n.indexOf(".mp4")>-1?n:C,F.FD=C,_=typeof F!="string"?JSON.stringify(F):F,Ie.source=_,k==="OPEN"&&(Ie.disableSeek=!0),se!=="ALIBABA_PRIVATE"){H.next=32;break}return H.next=22,(0,X.BR)(Y);case 22:if(f=H.sent,!f){H.next=28;break}Ie.source=f,Ie.vodRetry=1,H.next=30;break;case 28:return y.setState({showPrivateVodError:!0}),H.abrupt("return");case 30:H.next=38;break;case 32:if(se!=="LOCAL"){H.next=38;break}return H.next=35,Re(Y);case 35:r=H.sent,I=r.data,I.code===0&&(Ie.source="".concat(F.FD,"?auth_key=").concat(I.data.auth_key),Ie.vodRetry=1);case 38:y.setState({playerConfig:Ie});case 39:case"end":return H.stop()}},h)})),this.updateSource=function(){var h=(0,m.Z)(T().mark(function u(E){var k,w,x,O,q,ee,se,F;return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(k=y.state.playerConfig,w=y.props.resourceInfo,x=w.storageType,O=w.source,q=w.playId,y.playingVideo.readyCount=0,x!=="ALIBABA_PRIVATE"){me.next=16;break}return me.next=7,(0,X.BR)(q);case 7:if(ee=me.sent,!ee){me.next=12;break}Object.assign(k,{source:ee,vodRetry:1}),me.next=14;break;case 12:return y.setState({showPrivateVodError:!0}),me.abrupt("return");case 14:me.next=22;break;case 16:if(x!=="LOCAL"){me.next=22;break}return me.next=19,Re(q);case 19:se=me.sent,F=se.data,F.code===0&&Object.assign(k,{source:"".concat(O.FD,"?auth_key=").concat(F.data.auth_key),vodRetry:1});case 22:y.setState({playerConfig:k},()=>{y.play.setupPlayer(E)});case 23:case"end":return me.stop()}},u)}));return function(u){return h.apply(this,arguments)}}(),this.saveProgress=()=>{var h=this.props,u=h.studyInfo,E=h.userInfo,k=E.isLogin,w=E.enterpriseId,x=E.id,O=this.playingVideo,q=O.recentStart,ee=O.duration,se=O.hasFinished,F=Math.ceil(+q);F>Number(ee)&&(F=Number(ee));var Y=Math.ceil(F/+ee*100);if((Y>100||se)&&(Y=100),k){var me=this.playingVideo,Pe=me.auditionType,be=me.auditionLength;if(be>0&&Pe===2){var Ie=Math.ceil(be/ee*100);Ie<=Y&&(Y=Ie,F=be)}(0,X.sH)({studyInfo:u,progress:Y,recent_start:F,enterpriseId:w,userId:x}).then(B=>{B&&B.data&&(0,Je.Z)(B.data.integral_info||"")})}},this.getInfoFromSettings=(0,m.Z)(T().mark(function h(){var u,E,k,w,x,O,q,ee,se;return T().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return u=y.props.studyInfo,E=u.studyType,k=u.projectId,Y.next=4,(0,X.Gw)();case 4:if(w=Y.sent,x=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],O=(0,ve.RG)(w,x),E!=="studyProject"){Y.next=14;break}return Y.next=10,(0,pt.NU)({id:k});case 10:q=Y.sent,ee=q.status,se=q.data,ee===200&&(O.showPreventHang=se.prevent_cut_screen?"OPEN":"CLOSED",O.speedSwitch=se.speed_play?"OPEN":"CLOSED",O.dragSwitch=se.prevent_drag?"OPEN":"CLOSED");case 14:y.setState(O,()=>{y.dealVideoConfig()});case 15:case"end":return Y.stop()}},h)})),this.dealAudioPoster=()=>{var h=this.props.resourceInfo.contentType,u=h===void 0?"":h;this.setState({showAudioPoster:u==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var h=this.state.showAudioPoster,u=this.play.playerContainer;h&&u&&(u.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),u.style.backgroundSize="cover")},this.getPlayInstance=h=>{this.play=h},this.handleOk=()=>{this.setState({dialogVisible:!1});var h=this.state.btnType,u=this.playingVideo.recentStart,E=this.props.t;h==="know"?(this.play.play(),this.play.seek(u),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:E("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,m.Z)(T().mark(function h(){var u,E,k,w;return T().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:u=y.props.studyInfo,E=u.studyId,k=u.resourceId,w=y.state.randomAlertUUID,(0,X.qp)({popupId:w,planId:E,resourceId:k,type:"popup_end"}).then(()=>{y.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),y.playingVideo.popupWindowCount-=1,y.play.play();case 6:case"end":return O.stop()}},h)})),this.renderFooter=()=>{var h=this.state.btnType,u=this.props.t;return g().createElement(te.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(h)},u(h==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var h=this.props.t;return g().createElement(te.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},h("common.ok"))},this.state={playerConfig:Be(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:v.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:v.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:v.t("component.randomAlertTip"),randomAlertModal:{title:v.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,Ge.UI)("CL_VIDEO_BAIYING_COM_CN")}},v.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(v){var y=typeof v.resourceInfo.source!="string"?JSON.stringify(v.resourceInfo.source):v.resourceInfo.source,h=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;y!==h&&h!==""&&this.initInfo()}componentWillUnmount(){var v=this.props.mode;v==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var v=this.state,y=v.playerConfig,h=v.showPrivateVodError,u=v.dialogVisible,E=v.dialogModal,k=v.promptMessage,w=v.randomAlertDialogVisible,x=v.randomAlertModal,O=v.randomAlertTip,q=v.encryptedSwitch,ee=this.props,se=ee.resourceInfo,F=ee.t,Y=q==="OPEN"?_e:Ne;return g().createElement(R.Fragment,null,g().createElement(Y,(0,$.Z)({ref:this.getPlayInstance},se,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:y,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),g().createElement(qe.ZP,(0,$.Z)({visible:u},E,{footer:this.renderFooter()}),g().createElement("div",{className:"video-business-prompt"},k)),g().createElement(qe.ZP,(0,$.Z)({visible:w},x,{footer:this.renderRandomFooter()}),g().createElement("div",{className:"video-player-container__prompt"},O)),h&&g().createElement("div",{className:"video-business-vod-error"},F("privateCloud.docReadError")),g().createElement(at.Z,{scenes:"video"}))}}var Zt=(0,Q.$j)(yt,null,null,{forwardRef:!0})((0,e.Z)("translation",{withRef:!0})(Et)),vt=t(94184),Le=t.n(vt),Oe=t(84874),We=ke=>({userInfo:ke.user}),ta={getPravateDocUrl:Fe.ZP.localStorage.getPravateDocUrl};function Ft(ke){return JSON.stringify(ke,(v,y)=>(typeof y=="function"&&(y=y.toString()),y))}function $t(ke){var v=parseInt(parseInt(ke,10)/60,10),y=parseInt(parseInt(ke,10)%60,10);return v<10&&(v="0".concat(v)),y<10&&(y="0".concat(y)),"".concat(v,":").concat(y)}class Kt extends R.Component{constructor(v){var y;super(v);y=this,this.messageFun=h=>{var u=this.props,E=u.docType,k=u.progress,w=u.studyTimeLimit,x=u.studyTime,O=this.state,q=O.jumpPageTag,ee=O.totalTime,se=O.timeRemaining,F=this.state.previewDocData,Y={};try{Y=JSON.parse(h.data)}catch(me){return}switch(Y.action){case"preview.ready":this.initDocData();break;case"preview.meta":F.totalPage=Y.data.pc||1,F.currentPage=1,this.setState({previewDocData:F},()=>{this.reportStatusInterval()}),w>0?(this.saveProgress(k,x||"1",Y.data.pc||1),this.setState({showCountDownContainer:!0})):E==="xlsx"||E==="xls"||F.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(k,x||"1",Y.data.pc||1),w>0&&k<100?(this.setState({showCountDown:!0}),E==="xlsx"||E==="xls"?ee=w:ee=w*Y.data.pc,se=parseInt(ee*(1-k/100),10),this.setState({timeRemaining:se,totalTime:ee},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(q){q=!1,this.setState({jumpPageTag:q});return}F.currentPage=Y.data.pageIndex+1,this.setState({previewDocData:F}),w||this.saveProgress(Math.ceil(F.currentPage/F.totalPage*100),F.currentPage,F.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":G.default.error(Y.data.result);break;default:break}},this.initDocData=(0,m.Z)(T().mark(function h(){var u,E,k,w,x,O,q,ee,se,F,Y,me,Pe,be;return T().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(y.setState({isShowPrivateError:!1}),u=y.props,E=u.docType,k=u.userInfo,w=u.documentWatermarkSettings,x=u.storageType,O=u.privateDocId,q=k.name,ee=k.jobNumber,se=k.position,F="",Y={},x!=="ALIBABA_PRIVATE"){B.next=18;break}return B.prev=6,me=ta.getPravateDocUrl(O),B.next=10,he.WY.get({url:me});case 10:Pe=B.sent,be=Pe.data,be.code===0?Y=be.data||{}:y.setState({isShowPrivateError:!0}),B.next=18;break;case 15:B.prev=15,B.t0=B.catch(6),y.setState({isShowPrivateError:!0});case 18:if(w.indexOf("name")>-1&&(F="".concat(F+q," ")),w.indexOf("position")>-1&&(F="".concat(F+se," ")),w.indexOf("jobnumber")>-1&&(F+=ee),F.length>0?window.sendMessage("preview.init",(0,V.Z)({wmType:1,wmValue:F,wmColor:"rgba(192, 192, 192, 0.4)"},Y)):window.sendMessage("preview.init",(0,V.Z)({},Y)),E!=="xlsx"&&E!=="ppt"&&E!=="pptx"&&E!=="xls"?y.setState({pageOperateContainerVisible:!0}):y.setState({pageOperateContainerVisible:!1}),!(E==="ppt"||E==="pptx")){B.next=29;break}B.t1=window,B.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},B.t1.sendMessage.call(B.t1,"setConfig",B.t2),B.next=32;break;case 29:B.t3=window,B.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},B.t3.sendMessage.call(B.t3,"setConfig",B.t4);case 32:case"end":return B.stop()}},h,null,[[6,15]])})),this.handleJumpPage=h=>{var u=this.state.previewDocData;u.currentPage=h,this.setState({jumpPageTag:!0,previewDocData:u});var E=h/u.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(E),h,u.totalPage),window.sendMessage("logic.toPage",{pageIndex:h-1})},this.redirectPage=()=>{var h=this.props,u=h.studyTimeLimit,E=h.studyTime,k=0;u===0&&(k=E-1>0?E-1:0),window.sendMessage("logic.toPage",{pageIndex:k})},this.docCountDown=()=>{var h=this.state.timeRemaining,u=this.state,E=u.totalTime,k=u.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{h-=1,this.setState({timeRemaining:h}),h<1&&(this.saveProgress(100,0,k.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var w=(E-h)/E*100;h<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(w),h,k.totalPage)},2e4)},this.saveProgress=(h,u,E)=>{var k=this.props.onSaveProgress;k&&k(h,u,E)},this.reportStatusInterval=()=>{var h=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var u=this.state.previewDocData.currentPage;h&&h({currentPage:u})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=h=>{this.docReader=h},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(v,y)=>{var h=this.docReader.contentWindow;h.postMessage(Ft({action:v,data:y}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var v=this.props,y=v.t,h=v.storageType,u=v.privateDocId,E=this.props.aliUrl,k=this.state,w=k.previewDocData,x=k.pageOperateContainerVisible,O=k.timeRemaining,q=k.showCountDown,ee=k.showCountDownContainer,se=k.showPageOperateContainer,F=k.isShowPrivateError;return h==="ALIBABA_PRIVATE"&&(E="https://preview.imm.aliyuncs.com/index.html?docId=".concat(u)),g().createElement("div",{className:"doc-reader-container"},g().createElement("div",{className:"ali-doc-container",style:{paddingBottom:x?"56px":"0"}},g().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:E,id:"aliyunPreview",ref:this.dealPreviewRef}),ee?g().createElement("div",{className:"ali-doc-container__countdown"},q?g().createElement("div",null,g().createElement(Oe.Z,{iconClass:"iconf-tipe",size:"16px"}),y("component.docStillStudy"),g().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",$t(O)," "),y("component.canDone")):g().createElement("div",null,g().createElement(Oe.Z,{iconClass:"iconf-tipe",size:"16px"}),y("component.docHasFinish"))):null,x?g().createElement("div",{className:"ali-doc__operate"},g().createElement("div",{className:Le()(["ali-doc__operate__content",se?"":"ali-doc__operate__hide-content"])},g().createElement("div",{className:"ali-doc__operate__pagination"},g().createElement("div",{className:"ali-doc__operate__pagination__pages"},w.currentPage," / ",w.totalPage),g().createElement("div",{className:"ali-doc__operate__pagination__toggle"},g().createElement("div",{className:"ali-doc__operate__pagination__choose"},g().createElement("span",null,y("component.choosePage"),g().createElement(Oe.Z,{iconClass:"iconf-arrow-under",size:"14px"})),g().createElement("div",{className:"ali-doc__operate__page-list-container"},g().createElement("div",{className:"ali-doc__operate__choose-page"},y("component.fastChoosePage")),g().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:w.totalPage})).map((Y,me)=>g().createElement("li",{key:Y,onClick:()=>this.handleJumpPage(me+1)},me+1))))),g().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},y("common.collapse"))))),g().createElement("div",{className:Le()("ali-doc__operate__unfold",se?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},y("common.expand"))):null,F&&g().createElement("div",{className:"ali-doc__error"},y("privateCloud.docReadError"))),g().createElement(at.Z,{scenes:"document"}))}}Kt.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var ot=(0,Q.$j)(We)((0,e.Z)()(Kt)),aa=ke=>({userInfo:ke.user}),Ct="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),Ot="".concat("https://doc.coolcollege.cn");class Ut extends g().Component{constructor(v){var y;super(v);y=this,this.onSaveProgress=(h,u,E)=>{var k=this.props,w=k.mode,x=k.studyInfo,O=k.userInfo,q=O.enterpriseId,ee=O.id;w==="learn"&&(0,X.sH)({studyInfo:x,progress:h,page_count:E,recent_start:u,enterpriseId:q,userId:ee}).then(se=>{se&&se.data&&(0,Je.Z)(se.data.integral_info||"")})},this.messageFun=function(){var h=(0,m.Z)(T().mark(function u(E){var k,w,x,O,q,ee;return T().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(E.data!=="local-resource"){F.next=9;break}if(k=y.props.resourceInfo,w=k.storageType,x=k.playId,!(w&&w==="LOCAL")){F.next=9;break}return F.next=6,Re(x);case 6:O=F.sent,q=O.data,q.code===0&&(ee=document.getElementById("local-resource-box"),ee.contentWindow.postMessage({msg:"local-auth-key",authKey:q.data.auth_key},"*"));case 9:case"end":return F.stop()}},u)}));return function(u){return h.apply(this,arguments)}}(),this.getInfoFromSettings=(0,m.Z)(T().mark(function h(){var u,E,k;return T().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,X.Gw)();case 2:u=x.sent,E=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],k=(0,ve.RG)(u,E),y.setState(k,()=>{y.initDocPage(y.props)});case 6:case"end":return x.stop()}},h)})),this.initDocPage=(0,m.Z)(T().mark(function h(){var u,E,k,w,x,O,q,ee,se,F,Y,me,Pe,be,Ie,B,D,C,n,l,_,f,r,I,K,H,de,J,fe,ge,ye,le,Se,xe,rt=arguments;return T().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(u=rt.length>0&&rt[0]!==void 0?rt[0]:{},E=u.resourceInfo,k=u.mode,w=u.studyInfo,x=u.userInfo,O=y.state.documentPlayerMode,q=E.docType,ee=E.docTitle,se=E.url,F=E.studyTimeLimit,Y=E.studyTime,me=E.aliUrl,Pe=E.progress,be=E.storageType,Ie=E.playId,B=w.studyType,D=w.courseId,C=w.studyId,n=w.resourceId,l=x.enterpriseId,_=x.id,f=x.isLogin,r=x.token,I=O==="compat"&&me.indexOf("preview.imm.aliyun")>-1||be==="ALIBABA_PRIVATE",!I){ce.next=11;break}y.setState({showAliReader:!0}),ce.next=31;break;case 11:if(K=(0,X.sH)({enterpriseId:l,userId:_,token:r,studyInfo:w},!0),H=B==="studyTask"?2:1,de=Fe.ZP.SaveProgress.reportStatusInterval(w),J={isSaveProgress:f&&k==="learn"&&K,isSaveRecord:!1,access_token:r,userId:_,hostUrl:Ct,courseId:D,resourceId:n,courseType:1,planId:C,studyTimeLimit:F,studyTime:Y,saveProgressUrl:K,type:"eapp",progress:Pe,saveRecordProgressUrl:de,actionType:H},!(be&&be==="LOCAL")){ce.next=26;break}return ce.next=18,Re(Ie);case 18:if(fe=ce.sent,ge=fe.data,ge.code!==0){ce.next=25;break}J.auth_key=ge.data.auth_key,J.url=se,ce.next=26;break;case 25:return ce.abrupt("return");case 26:ye=JSON.stringify(J),le="".concat(ee,".").concat(q).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),Se="".concat(Ot,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(ye),"&furl=").concat(se,"?attname=").concat(le),be&&be==="LOCAL"&&(xe="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),Se="".concat(xe,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(ye),"&furl=").concat(se,"?attname=").concat(le)),y.setState({encodeUrl:Se});case 31:case"end":return ce.stop()}},h)})),this.handleReportStatusInterval=h=>{var u=h.currentPage,E=this.props,k=E.resourceInfo,w=E.mode,x=E.studyInfo,O=E.userInfo,q=k.type,ee=x.courseId,se=x.studyId,F=x.resourceId,Y=O.enterpriseId,me=O.id,Pe=O.isLogin,be="",Ie="",B=0,D=!1;switch(q){case"enterprise":B=1,D=!0;break;case"study":be=se,B=2,D=!0;break;case"project":Ie=se,B=1,D=!0;break;default:break}if(!(!D||!Pe)){var C={plan_id:be,enterprise_id:Y,user_id:me,course_id:ee,project_course_id:Ie,resource_id:F,current_page:u,action_type:B,send_time:Date.parse(new Date)};w==="learn"&&(0,X.Xc)(x,C)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(v){this.initDocPage(v)}render(){var v=this.props.resourceInfo,y=this.state,h=y.encodeUrl,u=y.documentWatermarkSettings,E=y.showAliReader,k=v.docType,w=v.type,x=v.studyTimeLimit,O=v.studyTime,q=v.aliUrl,ee=v.progress,se=v.storageType,F=v.playId;return E?g().createElement(ot,{privateDocId:F,storageType:se,aliUrl:q,docType:k,progress:ee,studyTime:O,studyTimeLimit:x,documentWatermarkSettings:u,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:w}):g().createElement("div",{className:"doc-reader-container"},g().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:h,frameBorder:"0",allowFullScreen:!0}),g().createElement(at.Z,{scenes:"document"}))}}var ut=(0,Q.$j)(aa)(Ut),sa=t(38979),Ae=t(90706),jt=t(12968),Gt=t(44208),It=t(60667),xt=ke=>({userInfo:ke.user});class wt extends g().Component{constructor(){var v;super(...arguments);v=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var y=this.props,h=y.studyInfo,u=y.mode,E=y.userInfo,k=E.enterpriseId,w=E.id;u==="learn"&&(0,ve.Gp)({studyInfo:h,enterpriseId:k,userId:w})},this.getInfoFromSettings=(0,m.Z)(T().mark(function y(){var h,u,E;return T().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,X.Gw)();case 2:h=w.sent,u=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],E=(0,ve.RG)(h,u),v.setState(E,()=>{v.renderWatermark()});case 6:case"end":return w.stop()}},y)})),this.renderWatermark=()=>{var y=this.props.userInfo,h=this.state.imageWatermark,u=y.name,E=y.unionid,k=y.sourceType,w=y.jobNumber,x=y.position,O=[];h.indexOf("name")>-1&&O.push(g().createElement(It.Z,{dataType:"userName",value:E,name:u,type:k})),h.indexOf("position")>-1&&O.push(g().createElement("span",null,x)),h.indexOf("jobnumber")>-1&&O.push(g().createElement("span",null,w)),h.length>0&&this.setState({watermark:O.map((q,ee)=>g().createElement("span",{key:ee},q))})},this.handleError=y=>{var h=this.props.onError;h&&h(y)},this.getImageUrl=(0,m.Z)(T().mark(function y(){var h,u,E,k,w,x,O,q,ee,se;return T().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(h=v.props,u=h.resourceInfo,E=h.t,k=u.playId,w=u.url,x=u.storageType,O=w,!x){Y.next=21;break}if(x!=="ALIBABA_PRIVATE"){Y.next=15;break}return Y.next=7,(0,X.J7)(k);case 7:if(q=Y.sent,!q){Y.next=12;break}O=q,Y.next=13;break;case 12:return Y.abrupt("return",G.default.info(E("privateCloud.docReadError")));case 13:Y.next=21;break;case 15:if(x!=="LOCAL"){Y.next=21;break}return Y.next=18,Re(k);case 18:ee=Y.sent,se=ee.data,se.code===0&&(O="".concat(w,"?auth_key=").concat(se.data.auth_key));case 21:v.setState({imageUrl:[O]},()=>{var me=v.state.imageUrl,Pe="image-business",be=document.querySelectorAll(".".concat(Pe,"-image img"));be.forEach((Ie,B)=>{Ie.onerror=()=>{v.handleError(me[B])}})});case 22:case"end":return Y.stop()}},y)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var v="image-business",y=this.props.resourceInfo,h=y.preview,u=h===void 0?!1:h,E=this.state,k=E.watermark,w=E.imageUrl;return g().createElement("div",{className:v},g().createElement(at.Z,{scenes:"image"}),g().createElement(Ae.Z,{className:"".concat(v,"-carousel")},w.map((x,O)=>g().createElement("div",{className:"".concat(v,"-image"),key:O.toString()},g().createElement(Gt.Z,{src:x,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:u})))))}}wt.defaultProps={prefixCls:"watch-image-page"};var At=(0,Q.$j)(xt)((0,e.Z)()(wt)),St=ke=>({userInfo:ke.user});class Ht extends g().Component{constructor(){var v;super(...arguments);v=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,m.Z)(T().mark(function y(){var h,u,E;return T().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,X.Gw)();case 2:h=w.sent,u=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],E=(0,ve.RG)(h,u),v.setState(E,()=>{v.renderWatermark()});case 6:case"end":return w.stop()}},y)})),this.renderWatermark=()=>{var y=this.props.userInfo,h=this.state.htmlWatermark,u=y.name,E=y.unionid,k=y.sourceType,w=y.jobNumber,x=y.position,O=[];h.indexOf("name")>-1&&O.push(g().createElement(It.Z,{dataType:"userName",value:E,name:u,type:k})),h.indexOf("position")>-1&&O.push(g().createElement("span",null,x)),h.indexOf("jobnumber")>-1&&O.push(g().createElement("span",null,w)),h.length>0&&this.setState({watermark:O.map((q,ee)=>g().createElement("span",{key:ee},q))})},this.saveProgress=()=>{var y=this.props,h=y.studyInfo,u=y.mode,E=y.userInfo,k=E.enterpriseId,w=E.id;u==="learn"&&(0,ve.Gp)({studyInfo:h,enterpriseId:k,userId:w})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var v="html-business",y=this.props.resourceInfo,h=y.url,u=this.state.watermark;return g().createElement("div",{className:v},g().createElement("div",{className:"".concat(v,"__html-watermark")},u),g().createElement("iframe",{title:"html",className:"".concat(v,"_iframe"),src:h}))}}var zt=(0,Q.$j)(St)((0,e.Z)()(Ht)),Lt=t(57068),_t=t(1164),Mt=ke=>({userInfo:ke.user});class kt extends g().PureComponent{constructor(){super(...arguments);this.getHost=v=>{var y=v.split("//"),h=y[1].split("/");return[y[0],h[0]].join("//")},this.getScormUrl=()=>{var v=this.props,y=v.studyInfo,h=v.mode,u=v.userInfo,E=v.resourceInfo,k=v.from,w=u.enterpriseId,x=u.id,O=E.url,q=this.getHost(O);if(h==="learn"){var ee=(0,V.Z)({userId:x,enterpriseId:w,access_token:localStorage.token,from:k,scormUrl:encodeURIComponent(O),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},y);return"".concat(q).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(Lt.stringify(ee))}return"".concat(q,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(O))},this.handleOpenScormLink=v=>{_t.Z.targetTo({path:v,isExternalLink:!0})}}render(){var v=this.props.t,y="scorm-business",h=this.getScormUrl(),u=(0,Ge.UI)("SCORM_EXTERNAL_WATCH");return g().createElement("div",{className:y},u?g().createElement("div",{className:"".concat(y,"_scorm")},g().createElement("img",{className:"".concat(y,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),g().createElement("h5",null,v("resourcePlay.scormTip")),g().createElement(te.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(h)},v("resourceLibrary.h5LinkPlayButton"))):g().createElement("iframe",{title:"scorm",className:"".concat(y,"_iframe"),src:h}))}}var ra=(0,Q.$j)(Mt)((0,e.Z)()(kt));class Rt extends g().Component{render(){var v=this.props,y=v.visible,h=v.title,u=v.onCancel,E=v.t,k=g().createElement("span",null,h);return g().createElement(qe.ZP,{visible:y,title:k,onCancel:u,footer:null},g().createElement("div",{className:"ban-preview"},g().createElement("div",{className:"ban-preview-center"},g().createElement("img",{src:N(),alt:"picture"}),g().createElement("h2",null,E("localStorage.tip")),g().createElement("p",null,E("localStorage.banPreview"))),g().createElement("hr",null),g().createElement(te.Z,{type:"primary",className:"know",onClick:u},E("localStorage.onKnow"))))}}var Xe=(0,e.Z)()(Rt);class Yt extends R.Component{constructor(){var v;super(...arguments);v=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=y=>{var h=this.props.previewInfo,u=h.onCancel;this.onCancel(),u(y)},this.onGetVideoBusiness=y=>{var h=this.props.onRef,u=h===void 0?()=>{}:h;this.videoBusiness=y,u(y)},this.onFullScreen=()=>{var y=this.state.fullScreen;this.setState({fullScreen:!y})},this.handleJudgeNetwork=(0,m.Z)(T().mark(function y(){var h,u,E,k,w,x,O,q,ee,se,F,Y=arguments;return T().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(h=Y.length>0&&Y[0]!==void 0?Y[0]:null,u=v.props,E=u.resourceInfo,k=u.watchType,w=E.storageType,x=E.playId,O=E.originUrl,q=k==="image"||k==="video"||k==="doc",ee=null,h?ee=h:O?ee=O:ee=E.url,!(q&&ee&&x&&w&&w==="LOCAL")){Pe.next=22;break}return Pe.prev=7,Pe.next=10,(0,X.NY)(x);case 10:return se=Pe.sent,Pe.next=13,(0,X.Hy)(ee,se);case 13:F=Pe.sent,F?v.setState({showBan:"no"}):v.setState({showBan:"yes"}),Pe.next=20;break;case 17:Pe.prev=17,Pe.t0=Pe.catch(7),v.setState({showBan:"yes"});case 20:Pe.next=23;break;case 22:v.setState({showBan:"no"});case 23:case"end":return Pe.stop()}},y,null,[[7,17]])})),this.renderOuter=()=>{var y=this.props,h=y.prefixCls,u=y.watchType,E=y.onCurrentTime,k=E===void 0?()=>{}:E;return g().createElement("div",{className:"".concat(h,"-outer")},u==="video"&&g().createElement(Zt,(0,$.Z)({onCurrentTime:k,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),u==="doc"&&g().createElement(ut,this.props),u==="image"&&g().createElement(At,(0,$.Z)({onError:this.handleJudgeNetwork},this.props)),u==="html"&&g().createElement(zt,this.props),u==="scorm"&&g().createElement(ra,this.props))},this.renderFooter=()=>{var y=this.props,h=y.resourceInfo.storageType,u=y.t,E=this.state.showBan,k=E!==""&&E==="yes";return h&&h!=="PUBLIC_CLOUD"&&k?g().createElement(te.Z,{type:"primary",className:"know",onClick:this.onCancelModel},u("localStorage.onKnow")):null}}componentDidMount(){var v=this.props.mode;v==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(v){v.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var v=this.state,y=v.showBan,h=v.fullScreen,u=this.props,E=u.mode,k=u.previewWay,w=u.previewInfo,x=u.prefixCls,O=u.t,q=u.showEnlarge,ee=u.footer,se=ee===void 0?null:ee,F=w.visible,Y=w.destroyOnClose,me=w.title,Pe=y!==""&&y==="yes",be=y!==""&&y==="no";return g().createElement(R.Fragment,null,E==="preview"&&k==="popups"&&g().createElement(qe.ZP,{destroyOnClose:Y,visible:F,title:me,onCancel:this.onCancelModel,footer:se||this.renderFooter(),wrapClassName:"".concat(x,"-resource ").concat(h?"".concat(x,"-full"):"")},q&&g().createElement("div",{className:"".concat(x,"-resource-out-icon"),onClick:this.onFullScreen},h?g().createElement(M.Z,{className:"".concat(x,"-resource-icon")}):g().createElement(U.Z,{className:"".concat(x,"-resource-icon")})),g().createElement("div",{className:"".concat(x,"-inner")},!F&&g().createElement(Z.Z,{size:"large"}),F&&be&&this.renderOuter(),Pe&&g().createElement(j,null))),(E==="learn"||k==="page")&&be&&this.renderOuter(),(E==="learn"||k==="page")&&g().createElement(Xe,{visible:Pe,title:me||O("questionn.warmHint"),onCancel:this.onCancel}))}}Yt.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var Jt=(0,e.Z)("translation",{withRef:!0})(Yt)},41225:function(Ve,Ce,t){"use strict";t.d(Ce,{Hy:function(){return m},NY:function(){return ae},Gw:function(){return T},sH:function(){return M},BR:function(){return R},qp:function(){return U},Xc:function(){return e},J7:function(){return g}});var z=t(57361),Z=t(9754),oe=t.n(Z),te=t(10237),$=t(37055),m=function(){var b=(0,z.Z)(oe().mark(function N(){var a,j,V,pe,G,Q,ve,X=arguments;return oe().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return a=X.length>0&&X[0]!==void 0?X[0]:"",j=X.length>1&&X[1]!==void 0?X[1]:"",V="",a.startsWith("http")?(pe=a.split("//")[1].trim(),G=pe.split("/")[0],V="https://".concat(G,"/cms/ticket")):(Q=a.split("/")[0],V="https://".concat(Q,"/cms/ticket")),re.prev=4,re.next=7,te.ZQ.get({url:V,params:{ticket:j}});case 7:if(ve=re.sent,!(ve.status===200||ve.status===403)){re.next=10;break}return re.abrupt("return",Promise.resolve(!0));case 10:return re.abrupt("return",Promise.resolve(!1));case 13:return re.prev=13,re.t0=re.catch(4),re.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return re.stop()}},N,null,[[4,13]])}));return function(){return b.apply(this,arguments)}}(),ae=function(){var b=(0,z.Z)(oe().mark(function N(a){var j,V;return oe().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,te.ZQ.get({url:$.ZP.local.getTicket(a)});case 2:if(j=G.sent,V=j.data,V.code!==0){G.next=6;break}return G.abrupt("return",Promise.resolve(V.data.ticket));case 6:return G.abrupt("return",Promise.resolve(""));case 7:case"end":return G.stop()}},N)}));return function(a){return b.apply(this,arguments)}}(),T=function(){var b=(0,z.Z)(oe().mark(function N(){var a;return oe().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,te.WY.get({url:$.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return a=V.sent,V.abrupt("return",a.data.list);case 4:case"end":return V.stop()}},N)}));return function(){return b.apply(this,arguments)}}(),R=function(){var b=(0,z.Z)(oe().mark(function N(a){var j,V,pe;return oe().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,te.WY.get({url:$.ZP.localStorage.getPravateVideoUrl(a)});case 2:if(j=Q.sent,j.data.code!==0){Q.next=6;break}return V=j.data.data.videoPlayInfo,pe=V===void 0?"":V,Q.abrupt("return",pe);case 6:return Q.abrupt("return","");case 7:case"end":return Q.stop()}},N)}));return function(a){return b.apply(this,arguments)}}(),g=function(){var b=(0,z.Z)(oe().mark(function N(a){var j,V,pe;return oe().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return j=$.ZP.localStorage.getPravateDocUrl(a),Q.prev=1,Q.next=4,te.WY.get({url:j});case 4:if(V=Q.sent,pe=V.data,!(pe.code===0&&pe.data)){Q.next=8;break}return Q.abrupt("return",pe.data.docResourceDownloadUrl||"");case 8:return Q.abrupt("return","");case 11:return Q.prev=11,Q.t0=Q.catch(1),Q.abrupt("return","");case 14:case"end":return Q.stop()}},N,null,[[1,11]])}));return function(a){return b.apply(this,arguments)}}(),M=function(N){var a=N.studyInfo,j=N.progress,V=N.recent_start,pe=N.page_count,G=N.enterpriseId,Q=N.userId,ve=N.token,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,he,re=a.studyType;if(re==="studyTask"&&(he=$.ZP.SaveProgress.studySaveProgress(a)),(re==="course"||re==="enterprise")&&(he=$.ZP.SaveProgress.enterpriseCourseSaveProgress(a)),re==="studyProject"&&(he=$.ZP.SaveProgress.projectSaveProgress(a)),re==="platform"&&(he="".concat($.ZP.SaveProgress.platformCourseSaveProgress(a))),(X||re==="platform")&&(he+="?enterprise_id=".concat(G,"&user_id=").concat(Q)),X)return he+="&access_token=".concat(ve||localStorage.getItem("token")),he;var ne={progress:j,recent_start:V,tempTime:Date.parse(new Date)};return pe&&(ne.page_count=pe),a.evaluationId&&(ne.evaluation_id=a.evaluationId),te.WY.post({url:he,data:ne})},U=b=>{var N=b.popupId,a=b.planId,j=b.resourceId,V=b.type;return te.WY.post({url:$.ZP.TaskStudyRecord.setRandomPopupRecord(a),data:{course_id:j,terminal_type:"PC",popup_id:N,type:V}})},e=(b,N)=>{var a=$.ZP.SaveProgress.reportStatusInterval(b);return te.WY.post({url:a,data:N})}},21594:function(Ve,Ce,t){"use strict";t.d(Ce,{pu:function(){return $},RG:function(){return m},Gp:function(){return ae},O8:function(){return T}});var z=t(88986),Z=t(69164),oe=t(38642),te=t(41225),$=R=>{var g="";switch(R){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":g="studyTask";break;case"enterprise":g="enterprise";break;case"courseProject":g="studyProject";break;case"platform":case"purchased":g="platform";break;default:break}return g},m=(R,g)=>{var M={};return g.forEach(U=>{var e=R.find(V=>V.type===U.type);if(e)if(U.type==="document_duration_limit"){var b=e.action_list,N=b.find(V=>V.type==="random_popup_verification");!(0,oe.UI)("RANDOM_POPUP_VERIFY")||!N?M[U.name]="CLOSE":M[U.name]=N.param.checked==="true"?"OPEN":"CLOSE"}else if(U.type==="document_player"){var a=JSON.parse(e.actions);a.forEach(V=>{V.param.checked==="true"&&(M[U.name]=V.type)})}else if(U.type==="dynamic_watermark"){var j=e.action_list;j.forEach(V=>{V.type===U.resourceType&&V.param.checked==="true"&&(M[U.name]=V.param.comment)})}else M[U.name]=e.switch_status}),M},ae=R=>{(0,te.sH)((0,z.Z)({progress:100,recent_start:1},R)).then(g=>{g&&g.data&&(0,Z.Z)(g.data.integral_info||"")})},T=R=>{var g=document.createElement("div");return g.innerHTML=R,g.childNodes[0]}},51975:function(Ve,Ce,t){"use strict";t.d(Ce,{l:function(){return te}});var z=t(62029),Z=t(12924),oe=t.n(Z),te=($,m)=>function(T){return oe().createElement($.Consumer,null,R=>oe().createElement(m,(0,z.Z)({},T,{contextData:R})))}},11449:function(Ve,Ce,t){"use strict";t.d(Ce,{Z:function(){return _e}});var z=t(88986),Z=t(33565),oe=t(12924),te=t.n(oe),$=t(3115),m=t(49111),ae=t(19650),T=t(62029),R=t(57663),g=t(71577),M=t(91768),U=t(28216),e=t(37055),b=t(10237);function N(Ee){var Be=e.ZP.getHelpContentByMenuKey(),Ze={key:Ee};return b.WY.get({url:Be,params:Ze})}var a=t(74228),j=t.n(a),V=t(1164),pe=t(76466),G=t(38642);class Q extends te().Component{constructor(Be){var Ze;super(Be);Ze=this,this.getHelpContentByMenuKey=()=>{var Ne=this.props.defaultMenuKey;N(Ne).then($e=>{var je=$e.data,Je=je.help_url,Fe=je.video_url;this.setState({videoUrl:Fe,helpUrl:Je})})},this.handleOpenHelpUrl=Ne=>{if((0,G.ve)()){window.open(Ne,"_blank");return}V.Z.targetTo({path:Ne,isExternalLink:!0})},this.handleOpenVideo=function(Ne){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ze.props.t("helpCenter.video");Ze.setState(je=>({resourcePlayInfo:(0,z.Z)((0,z.Z)({},je.resourcePlayInfo),{},{resourceInfo:{originUrl:Ne,source:{FD:Ne,OD:Ne},contentType:"mp4"}}),previewInfo:(0,z.Z)((0,z.Z)({},je.previewInfo),{},{title:$e,visible:!0,onCancel:Ze.handleCancelPreview})}))},this.handleCancelPreview=()=>{var Ne=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,z.Z)((0,z.Z)({},Ne),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:Be.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var Be=this.state,Ze=Be.helpUrl,Ne=Be.resourcePlayInfo,$e=Be.previewInfo,je=Be.videoUrl,Je=this.props.t;return te().createElement("div",{className:j().helpCenter},je&&te().createElement(g.Z,{type:"link",className:j()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(je)},Je("helpCenter.video")),Ze&&te().createElement(g.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(Ze)},Je("helpCenter.tutorial")),te().createElement(pe.Z,(0,T.Z)({},Ne,{previewInfo:$e})))}}var ve=Ee=>({defaultMenuKey:Ee.currentRoute.menuKey});Q.defaultProps={defaultMenuKey:""};var X=(0,U.$j)(ve)((0,M.Z)()(Q));function he(Ee){var Be=Ee.extra,Ze=localStorage.getItem("dingPersonnel"),Ne=sessionStorage.getItem("dingPersonnel");return te().createElement(ae.Z,null,Be,Ze!=="dingPersonnel"&&Ne!=="dingPersonnel"&&(0,G.eY)("COMMONEXTRA_HELP_CENTER")&&te().createElement(X,null))}var re=he,ne=t(4408);function ie(Ee){var Be=(0,oe.useState)({helpCenter:(0,G.eY)("HEAD_HELP_CENTER_BUT")}),Ze=(0,Z.Z)(Be,1),Ne=Ze[0],$e=Ee.pageContainerParams,je=$e===void 0?{}:$e,Je=Ee.noPadding,Fe=Je===void 0?!1:Je,Re=Ee.isPersonal,Qe=Re===void 0?!1:Re,qe=Ee.pageTitle,Ge=Ee.className,pt=Ge===void 0?"":Ge,at={extra:Ne.helpCenter?te().createElement(re,{extra:je.extra}):je.extra},gt=(0,z.Z)((0,z.Z)({},je),at);return te().createElement("div",{className:"page-container-content ".concat(Fe?"page-container-noPadding":""," ").concat(Qe?"page-container-content_personal_background":""," ").concat(pt)},qe&&te().createElement(ne.Z,{title:qe}),Qe?te().createElement($.Z,null,Ee.children):te().createElement($.Z,gt,Ee.children))}var _e=ie},5105:function(Ve,Ce,t){"use strict";t.d(Ce,{zk:function(){return oe},HO:function(){return te},r4:function(){return $},XS:function(){return m},Xu:function(){return ae},BE:function(){return T},uw:function(){return R},A8:function(){return g},sB:function(){return M},UE:function(){return U},f9:function(){return e},m1:function(){return b},Az:function(){return N}});var z=t(37055),Z=t(10237);function oe(){return Z.WY.get({url:z.ZP.approval.getTypeList()})}function te(){return Z.WY.get({url:z.ZP.approval.getCustomTypeList(),params:{status:"enable",type:"hands_on_approval"}})}function $(a){return Z.WY.get({url:z.ZP.approval.getTemplatePage(),params:a})}function m(a){return Z.WY.post({url:z.ZP.approval.deleteTemplateById(a)})}function ae(a){return Z.WY.post({url:z.ZP.approval.saveTemplate(),data:a})}function T(a){return Z.WY.get({url:z.ZP.approval.getTemplateInfo(a)})}function R(a){return Z.WY.post({url:z.ZP.approval.settingStatus(a)})}function g(a){var j=z.ZP.approval.getTemplateList();return Z.WY.get({url:j,params:{biz_type:a}})}function M(a){var j=a.templateId,V=a.version,pe=a.dept_id,G=z.ZP.approval.previewTemplates({templateId:j,version:V});return Z.WY.get({url:G,params:{dept_id:pe}})}function U(a){var j=a.templateId,V=a.version,pe=a.title,G=a.assignNodeList,Q=a.dataId,ve=a.content,X=a.dept_id,he=z.ZP.approval.submitWorkflow();return Z.WY.post({url:he,data:{dept_id:X,template_id:j,template_version:V,title:pe,assign_node_list:G,data_id:Q,content:ve}})}function e(a){var j=z.ZP.approval.submitWorkflowBatch();return Z.WY.post({url:j,data:a})}function b(a){var j=a.templateId,V=a.version,pe=a.nodeNo,G=z.ZP.approval.getNodeUsers({templateId:j,version:V});return Z.WY.post({url:G,params:{node_no:pe}})}function N(a){var j=z.ZP.CourseManagement.templateIsNeed(a);return Z.WY.get({url:j})}},25307:function(Ve,Ce,t){"use strict";t.r(Ce),t.d(Ce,{default:function(){return Pt}});var z=t(20228),Z=t(11382),oe=t(93485),te=t(34792),$=t(48086),m=t(88986),ae=t(57361),T=t(18106),R=t(88108),g=t(9754),M=t.n(g),U=t(12924),e=t.n(U),b=t(28216),N=t(91768),a=t(17780),j=t(37055),V=t(10237);function pe(){var De=j.ZP.advancedSetting.getSettingInfo();return V.WY.get({url:De})}function G(De){var S=j.ZP.advancedSetting.getSettingUpdate();return V.WY.post({url:S,data:De})}function Q(De){var S=CONFIG.advancedSetting.getSyncSetting(De);return request.get({url:S})}var ve=t(77576),X=t(59314);class he extends U.Component{constructor(S){super(S);this.handleSwitch=(s,i)=>{var c=this.props,d=c.t,o=c.handleAdministerScope,P=c.onAdministerScope,p=(0,m.Z)({},this.state.setting);p.action_list.forEach(W=>{W.type===s&&(W.param.checked=!W.param.checked)}),this.setState({setting:p});var L=d(i?"setting.activated":"setting.deactivated"),A=(0,m.Z)((0,m.Z)({},p),{},{actions:JSON.stringify(p.action_list),successMsg:"".concat(p.title).concat(L)});o?o(A):P&&P(A)},this.state={setting:{}}}componentDidMount(){var S=this.props.setting;S.action_list.forEach(s=>{s.param.checked=s.param.checked==="true"}),this.setState({setting:S})}render(){var S=this.state.setting,s=S.title,i=S.action_list,c=this.props.t;return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__either__header advancedsetting__margin__twenty-eight"},s),i&&i.map(d=>e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either__border",key:d.type},e().createElement("div",{className:"advancedsetting__either__header-sub"},d.dynamic_name),d.type==="employee_archives"?e().createElement("p",null,c("setting.administerScope")):"",d.type==="resource_view_range"?e().createElement("p",null,c("setting.resourceViewRange")):"",e().createElement(X.Z,{checkedChildren:c("setting.activated"),unCheckedChildren:c("setting.deactivated"),checked:d.param.checked,onClick:o=>this.handleSwitch(d.type,o)}))))}}var re=(0,N.Z)()(he),ne=t(22385),ie=t(31097),_e=t(43358),Ee=t(34041),Be=t(94184),Ze=t.n(Be),Ne=t(50361),$e=t.n(Ne),je=t(76651),Je=t(18329),Fe=t(86726),Re=t(84874),Qe=t(88311),qe=t(60667),Ge=t(26885),pt=t(5105),at=Ee.Z.Option;class gt extends e().Component{constructor(S){super(S);this.getTemplates=()=>{(0,pt.A8)("course_task").then(s=>{var i=s.data,c=i.data||[];if(this.setState({approvalList:c}),c.length===0){$.default.warning(this.props.t("course.templateSetTips")),this.setState({setting:(0,m.Z)((0,m.Z)({},this.state.setting),{},{status:!1}),template:{},templateName:""}),this.handleOnAddUser({status:!1,noMessage:!0,action:{},userList:[]});return}this.setState({template:{template_id:c[0].template_id,template_version:c[0].version,template_name:c[0].name},templateVisible:c.length>0})}).catch(()=>{$.default.warning(this.props.t("course.getTemplateFail")),this.setState({setting:(0,m.Z)((0,m.Z)({},this.state.setting),{},{status:!1}),template:{},templateName:""}),this.handleOnAddUser({status:!1,noMessage:!0,action:{},userList:[]})})},this.handleSwitch=s=>{var i=(0,m.Z)({},this.state.setting),c=(0,m.Z)({},this.state.org),d=localStorage.getItem("authorityType"),o=this.props.user,P=o.appType,p=o.loginMode,L=this.props.origin;if(L==="courseNewApproval"){this.setState({setting:(0,m.Z)((0,m.Z)({},this.state.setting),{},{status:s}),template:{},templateName:""}),s?this.getTemplates():this.handleOnAddUser({status:!1,action:{},userList:[]});return}if(s)P==="wx_app"&&p==="WE_COM"&&d==="1"?this.handleSelectWx():c.visible=!0;else{c={visible:!1,initList:{user:[]}};var A=this.props.onClose,W=this.state.setting,ue=W.switch_id,Ue=W.type,Me=W.title;A&&A({switch_id:ue,status:s,type:Ue,title:Me,approvers:[]})}this.setState({setting:(0,m.Z)((0,m.Z)({},i),{},{status:s}),org:(0,m.Z)({},c)})},this.handleAddUser=()=>{var s=localStorage.getItem("authorityType"),i=this.props.user,c=i.appType,d=i.loginMode;c==="wx_app"&&d==="WE_COM"&&s==="1"?this.handleSelectWx():this.setOrgModalVisibility(!0)},this.handleSelectWx=()=>{var s=this.props.user,i=this.state.org.initList,c=i.user.map(d=>d.unionid);(0,Ge.Sk)({userIds:c,deptIds:[]}).then(d=>{(0,Ge.$f)({result:d,user:s}).then(o=>{var P=o.qyWeChatVo,p=o.rangeList,L=$e()(i);L.user=p.user,this.setState({qyWeChatVo:P,org:{initList:L,visible:!1}},()=>{var A=(0,m.Z)({},this.state.setting);this.handleOnAddUser({status:A.status,userList:p.user,action:"add"})})})}).catch(()=>{})},this.handleSaveUser=s=>{var i=(0,m.Z)({},this.state.setting);s.user.length||(i.status=!1),this.setState({setting:i,org:{initList:{user:s.user},visible:!1}}),this.handleOnAddUser({status:i.status,userList:s.user,action:"add"})},this.handleCacncelUser=()=>{var s=this.state.org.initList.user;if(!s.length){var i=(0,m.Z)({},this.state.setting);this.setState({setting:(0,m.Z)((0,m.Z)({},i),{},{status:!1})})}this.setOrgModalVisibility(!1)},this.setOrgModalVisibility=s=>{var i=(0,m.Z)({},this.state.org);this.setState({org:(0,m.Z)((0,m.Z)({},i),{},{visible:s})})},this.handleDeleteUser=s=>{var i=(0,m.Z)({},this.state.org);i.initList.user.splice(s,1);var c=(0,m.Z)({},this.state.setting);i.initList.user.length||(c.status=!1),this.setState({setting:c,org:(0,m.Z)({},i)}),this.handleOnAddUser({status:c.status,userList:i.initList.user,action:"delete"})},this.handleOnAddUser=s=>{var i=s.status,c=s.userList,d=s.action,o=s.noMessage,P=this.props,p=P.onAddUser,L=P.origin,A=this.state.setting,W=A.switch_id,ue=A.type,Ue=A.title;p&&p({status:i,userList:c,action:d,switch_id:W,type:ue,title:Ue,origin:L,qyWeChatVo:this.state.qyWeChatVo,noMessage:o})},this.handleToApproval=()=>{je.m8.push("/enterprise/trainingSettings/approvalManage")},this.onUpdateTemplate=()=>{this.getTemplates()},this.onChangeTemplate=(s,i)=>{this.setState({template:{template_id:s,template_version:i.version,template_name:i.name}})},this.onCancelTemplate=()=>{var s=this.props.setting,i=s.actions,c=s.status;this.setState({templateVisible:!1,template:i?JSON.parse(i):{},setting:(0,m.Z)((0,m.Z)({},this.state.setting),{},{status:i?c:!1})}),!i&&this.handleOnAddUser({status:!1,action:{},userList:[]})},this.onSubmitTemplate=()=>{if(!this.state.template.template_id){$.default.warning(this.props.t("approval.selectTemplate"));return}this.setState({templateVisible:!1,setting:(0,m.Z)((0,m.Z)({},this.state.setting),{},{status:!0}),templateName:this.state.template.template_name}),this.handleOnAddUser({status:!0,action:JSON.stringify(this.state.template),userList:[]})},this.renderPersonItem=(s,i)=>e().createElement("li",{className:"person-list__item",key:s.userId},e().createElement(qe.Z,{dataType:"userName",value:s.user_id||s.userId,name:s.name,type:s.source_type||s.sourceType}),e().createElement("span",{className:"person-list__item__delete",onClick:()=>this.handleDeleteUser(i)},e().createElement(Re.Z,{iconClass:"icon-guanbi"}))),this.state={setting:S.setting,org:{visible:!1,initList:{user:S.enterpriseUsers||[]}},template:{},templateName:"",qyWeChatVo:null,approvalList:[],templateVisible:!1}}componentDidMount(){this.props.origin==="courseNewApproval"&&this.setState({template:this.props.setting.actions?JSON.parse(this.props.setting.actions):{}},()=>{this.setState({templateName:this.state.template.template_name||""})})}render(){var S=(0,Fe.e)("approvalManage",this.props.user.modules),s=this.state,i=s.setting,c=s.org,d=s.approvalList,o=s.templateVisible,P=s.template,p=s.templateName,L=this.props,A=L.t,W=L.origin,ue=W===void 0?"":W,Ue=i.title,Me=i.description,ze=i.status,Ye=Ze()(["course-approval__content",ze?"":"course-approval__content-closed"]),Ke=localStorage.getItem("themeColor")||"#516AE6";return e().createElement("div",{className:"advancedsetting__either advancedsetting__padding advancedsetting__either-border advancedsetting-padding-bottom"},e().createElement("div",{className:"advancedsetting__either__header-sub"},Ue),e().createElement("div",{className:"advancedsetting__either__body course-approval"},e().createElement("p",null,Me),e().createElement(ie.Z,{title:A("course.templateSetTips")},e().createElement(X.Z,{checkedChildren:A("setting.activated"),unCheckedChildren:A("setting.deactivated"),checked:ze,onClick:this.handleSwitch})),ue==="courseNewApproval"&&S&&e().createElement("span",{className:"advancedsetting__either-btn",onClick:this.handleToApproval,style:{color:Ke}},A("course.approvalEnter"),e().createElement(Re.Z,{iconClass:"icon-right"})),ue==="courseNewApproval"&&ze&&p&&e().createElement("div",{className:"advancedsetting__either-template"},e().createElement("span",{className:"advancedsetting__either-template-name"},p),e().createElement("span",{className:"advancedsetting__either-template-name-btn",style:{color:Ke,borderColor:Ke},onClick:this.onUpdateTemplate},e().createElement(Re.Z,{iconClass:"icon-icon_addx"}),A("course.changeTemplate"))),ue!=="courseNewApproval"&&e().createElement("div",{className:"".concat(Ye," personal-padding")},e().createElement("ul",{className:"person-list cl-clearfix"},c.initList.user.map((He,ct)=>this.renderPersonItem(He,ct)),e().createElement("li",{className:"person-list__item person-list__item-add",style:{color:Ke,borderColor:Ke},onClick:this.handleAddUser},e().createElement(Re.Z,{iconClass:"icon-icon_addx"}),A("setting.reviewUser"))))),e().createElement(Qe.Z,{title:A("component.chooseReviewUser"),visible:c.visible,onlyUser:!0,initData:c.initList,onOk:this.handleSaveUser,onCancel:this.handleCacncelUser}),e().createElement(Je.ZP,{visible:o,title:A("approval.approval"),onCancel:this.onCancelTemplate,onOk:this.onSubmitTemplate},d.length>0&&e().createElement(Ee.Z,{showSearch:!0,optionFilterProp:"children",style:{width:"100%",margin:"16px 0"},placeholder:A("approval.templatePlaceholder"),onChange:this.onChangeTemplate,value:P.template_id||""},d.map(He=>e().createElement(at,{key:He.template_id,name:He.name,version:He.version,value:He.template_id},He.name)))))}}var Dt=De=>({user:De.user}),yt=(0,b.$j)(Dt)((0,N.Z)()(gt)),Et=()=>({});class Zt extends e().Component{constructor(S){super(S);this.commonSwitch=(s,i)=>{var c=(0,m.Z)({},this.state.setting),d=JSON.parse(c.actions),o=d.find(L=>L.type===i);o.param.checked=s?"true":"false";var P=(0,m.Z)((0,m.Z)({},c),{},{actions:JSON.stringify(d)});this.setState({setting:P});var p=this.props.onDingSelect;p&&p(P)},this.renderDesc=s=>{var i=this.props.t,c={operation:[{[i("setting.createPracOper")]:i("setting.createPracOperDesc")},{[i("setting.updatePracOper")]:i("setting.updatePracOperDesc")}],study_project:[{[i("setting.studyProjectTips")]:i("setting.studyProjectDesc")}],approval_manage:[{[i("setting.courseApproval")]:i("setting.courseApprovalDesc")},{[i("setting.pracOperApproval")]:i("setting.pracOperApprovalDesc")}]};return c[s].map(d=>e().createElement(e().Fragment,null,e().createElement("h4",null,Object.keys(d)[0]),e().createElement("p",null,Object.values(d)[0])))},this.state={setting:S.setting}}render(){var S=this.state.setting,s=S.title,i=S.actions,c=JSON.parse(i),d=this.props.t;return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__either__header advancedsetting__margin__twenty-eight"},s),c.map((o,P)=>e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either__border",key:P},e().createElement("div",{className:"advancedsetting__either__header-sub advancedsettingTitle"},e().createElement("span",null,o.dynamic_name),e().createElement(X.Z,{className:"advancedsetting__either__switch",checkedChildren:d("setting.activated"),unCheckedChildren:d("setting.deactivated"),checked:o.param.checked==="true",onClick:p=>this.commonSwitch(p,o.type)})),this.renderDesc(o.type))))}}var vt=(0,b.$j)(Et)((0,N.Z)()(Zt)),Le=t(88983),Oe=t(47933),We=t(38642),ta=Oe.ZP.Group;class Ft extends e().Component{constructor(S){super(S);this.handleChange=s=>{var i=(0,m.Z)({},this.state.setting),c=JSON.parse(i.actions);this.setState({defaultValue:s.target.value}),c.forEach(P=>{P.type===s.target.value?P.param.checked="true":P.param.checked="false"});var d=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(c)}),o=this.props.onChooseDocMode;o&&o(d)},this.state={setting:S.setting,defaultValue:"",blackList:{projectionModeTipFlag:(0,We.eY)("DOCREADER_PROJECTION_MODE_TIP")},whiteList:{elementTypeCompatFlag:(0,We.UI)("DOCREADER_ELEMENT_TYPE_COMPAT")}}}componentDidMount(){var S=this.props.t,s=this.state.blackList,i=this.state.setting.action_list;i.length>0&&(i[0].desc=S("setting.compatibilityModeTip"),s.projectionModeTipFlag&&(i[1].desc=S("setting.projectionModeTip"))),i.forEach(c=>{c.param.checked==="true"&&this.setState({defaultValue:c.type})})}render(){var S=this.state.setting,s=S.title,i=S.action_list,c=this.state.whiteList;return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__either__header-sub advancedsetting__either__margin advancedsetting__either-margin-bottom"},s),e().createElement("div",{className:"advancedsetting__watermark__body"},e().createElement("div",null,e().createElement(ta,{onChange:this.handleChange,value:this.state.defaultValue},c.elementTypeCompatFlag?i.map(d=>d.type==="compat"?e().createElement("div",{className:"watermark_item",key:d.type},e().createElement(Oe.ZP,{value:d.type},e().createElement("div",{className:"watermark_item-column"},e().createElement("span",{className:"label"},d.dynamic_name),e().createElement("span",{className:"docmode_desc"},d.desc)))):null):i.map(d=>e().createElement("div",{className:"watermark_item",key:d.type},e().createElement(Oe.ZP,{value:d.type},e().createElement("div",{className:"watermark_item-column"},e().createElement("span",{className:"label"},d.dynamic_name),e().createElement("span",{className:"docmode_desc"},d.desc)))))))))}}var $t=(0,N.Z)()(Ft),Kt=t(57663),ot=t(71577),aa=t(77883),Ct=t(21888),Ot=()=>({});class Ut extends e().Component{constructor(S){super(S);this.handleSwitch=s=>{var i=(0,m.Z)({},this.state.setting),c=i.action_list;c=c.map(L=>(L.type==="default_duration_limit"&&(L.param.checked=s?"true":"false"),L));var d=(0,m.Z)((0,m.Z)({},i),{},{status:s,actions:JSON.stringify(c)});this.setState({setting:d});var o=this.props.onDocumentSetLimit;o&&o(d);var P=this.state.setting.action_list,p=s?P[0].value:0;this.updateDocumentLimit(p)},this.updateSwitch=s=>{var i=(0,m.Z)({},this.state.setting),c=i.action_list,d=c.find(P=>P.type==="period_conversion");d.param.checked=s?"true":"false",s&&this.setState({classHourChecked:s});var o=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(c)});return this.setState({setting:o}),o},this.handleSwitchPeriod=s=>{var i=(0,m.Z)({},this.state.setting);i=s||i;var c=this.props.onDocumentSetLimit;c&&c(i)},this.handleInput=s=>{var i=(0,m.Z)({},this.state.setting),c=i.action_list;c=c.map(o=>(o.type==="default_duration_limit"&&(o.value=s),o));var d=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(c)});this.setState({setting:d})},this.handlePeriodInput=s=>{var i=(0,m.Z)({},this.state.setting),c=i.action_list;c=c.map(o=>(o.type==="period_conversion"&&(o.value=s),o));var d=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(c)});this.setState({setting:d})},this.submit=()=>{var s=this.props.onDocumentSetLimit;s&&s(this.state.setting);var i=this.state.setting.action_list;this.updateDocumentLimit(i[0].value)},this.savePeriod=()=>{var s=this.props.t,i=(0,m.Z)({},this.state.setting),c=i.action_list,d=c.find(o=>o.type==="period_conversion");if(d.value===null||d.value===void 0||d.value===0){$.default.error(s("setting.inputErrorTips"));return}this.handleSwitchPeriod(),this.setState({classHourChecked:d.param.checked==="true"})},this.updateDocumentLimit=s=>{localStorage.setItem("documentStudyLimit",s),this.props.dispatch({type:"advancedSetting/updateDefaultDocumentLimit",payload:{documentStudyLimit:s}})},this.state={setting:S.setting,classHourChecked:!1}}componentDidMount(){var S=this.state.setting.action_list,s=S.find(i=>i.type==="period_conversion");this.setState({classHourChecked:s.param.checked==="true"})}render(){var S=this.state.classHourChecked,s=this.state.setting,i=s.title,c=s.status,d=s.description,o=s.action_list,P=this.props.t,p=o.find(A=>A.type==="default_duration_limit"),L=o.find(A=>A.type==="period_conversion");return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__either__header advancedsetting__either__margin advancedsetting__either-font"},i),e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either__border"},e().createElement("div",{className:"documentDuration"},e().createElement("span",null,p.dynamic_name,e().createElement(Ct.Z,{value:p.value,disabled:p.param.checked!=="true",onChange:this.handleInput,className:"study-time-limit-number",min:1,max:9999,precision:0}),P("course.secByPage")),e().createElement(ot.Z,{type:"primary",onClick:this.submit,disabled:p.param.checked!=="true"},P("common.save"))),e().createElement("p",null,d),e().createElement(X.Z,{checkedChildren:P("setting.activated"),unCheckedChildren:P("setting.deactivated"),checked:c,onClick:this.handleSwitch})),e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either__border"},e().createElement("div",{className:"documentDuration"},e().createElement("span",null,L.dynamic_name,e().createElement(Ct.Z,{placeholder:P("setting.inputLearningTime"),value:L.value,disabled:L.param.checked!=="true",onChange:this.handlePeriodInput,className:"study-time-limit-number",min:0,max:9999,precision:0}),P("common.minutes"),",  ",P("setting.equalTo"),"1",P("common.periodCount")),e().createElement(ot.Z,{type:"primary",onClick:this.savePeriod,disabled:!S},P("common.save"))),e().createElement("p",null,P("setting.studyDurationDesc")),e().createElement(X.Z,{checkedChildren:P("setting.activated"),unCheckedChildren:P("setting.deactivated"),checked:L.param.checked==="true",onClick:this.updateSwitch})))}}var ut=(0,b.$j)(Ot)((0,N.Z)()(Ut));class sa extends e().Component{constructor(S){super(S);this.handleSwitch=s=>{var i=(0,m.Z)({},this.state.setting),c=(0,m.Z)((0,m.Z)({},i),{},{status:s});this.setState({setting:c});var d=this.props.onSwitch;d&&d(c)},this.state={setting:S.setting}}componentDidMount(){this.props.onRef&&this.props.onRef(this)}render(){var S=this.state.setting,s=S.title,i=S.status,c=S.description,d=this.props.t;return e().createElement("div",{className:"advancedsetting__either advancedsetting__either-border"},e().createElement("div",{className:"advancedsetting__either__header-sub"},s),e().createElement("div",{className:"advancedsetting__either__body"},e().createElement("p",null,c),e().createElement("div",null,e().createElement("span",null,e().createElement(X.Z,{checkedChildren:d("setting.activated"),unCheckedChildren:d("setting.deactivated"),checked:i,onClick:this.handleSwitch})))))}}var Ae=(0,N.Z)()(sa);class jt extends e().Component{constructor(S){super(S);this.getEnterpriseInfo=()=>{var i=j.ZP.Organization.getEnterpriseInfo();V.WY.get({url:i}).then(c=>{this.setState({isVip:c.data.isVip})})},this.handleSwitch=i=>{var c=(0,m.Z)({},this.state.setting),d=(0,m.Z)({},this.state.org),o=localStorage.getItem("authorityType"),P=this.props.user,p=P.appType,L=P.loginMode;if(i)p==="wx_app"&&L==="WE_COM"&&o==="1"?this.handleSelectWx():d.visible=!0,this.setState({setting:(0,m.Z)((0,m.Z)({},c),{},{quota_status:"on"})}),this.props.onClose("on",!1);else{d={visible:!1,initList:{user:[]}};var A=this.props.onClose;A&&A("off",!0)}this.setState({setting:(0,m.Z)((0,m.Z)({},c),{},{quota_status:i?"on":"off"}),org:(0,m.Z)({},d)})},this.handleAddUser=()=>{var i=localStorage.getItem("authorityType"),c=this.props.user,d=c.appType,o=c.loginMode;d==="wx_app"&&o==="WE_COM"&&i==="1"?this.handleSelectWx():this.setOrgModalVisibility(!0)},this.handleSaveUser=i=>{var c=(0,m.Z)({},this.state.setting);i.user.length||(c.quota_status="off"),this.setState({setting:c,org:{initList:{user:i.user},visible:!1}}),this.handleOnAddUser(i.user)},this.handleCacncelUser=()=>{var i=this.state.org.initList.user;if(!i.length){var c=(0,m.Z)({},this.state.setting);this.setState({setting:(0,m.Z)((0,m.Z)({},c),{},{quota_status:"off"})});var d=this.props.onClose;d&&d("off",!1)}this.setOrgModalVisibility(!1)},this.setOrgModalVisibility=i=>{var c=(0,m.Z)({},this.state.org);this.setState({org:(0,m.Z)((0,m.Z)({},c),{},{visible:i})})},this.handleDeleteUser=i=>{var c=(0,m.Z)({},this.state.org);c.initList.user.splice(i,1);var d=(0,m.Z)({},this.state.setting);if(!c.initList.user.length){d.quota_status="off";var o=this.props.onClose;o&&o("off",!1)}this.setState({setting:d,org:(0,m.Z)({},c)}),this.handleOnAddUser(c.initList.user)},this.handleOnAddUser=i=>{var c=this.props.onAddUser;c&&c(i)},this.handleSelectWx=()=>{var i=this.props.user,c=this.state.org.initList,d=c.user.map(o=>o.unionid);(0,Ge.Sk)({userIds:d,deptIds:[]}).then(o=>{(0,Ge.$f)({result:o,user:i}).then(P=>{var p=P.qyWeChatVo,L=P.rangeList,A=$e()(c);A.user=L.user,this.setState({qyWeChatVo:p,org:{initList:A,visible:!1}},()=>{var W=(0,m.Z)({},this.state.setting);this.handleOnAddUser({status:W.status,userList:L.user,action:"add"})})})}).catch(()=>{})},this.renderPersonItem=(i,c)=>e().createElement("li",{className:"person-list__item",key:i.id},e().createElement(qe.Z,{dataType:"userName",value:i.user_id,name:i.name,type:i.source_type}),e().createElement("span",{className:"person-list__item__delete",onClick:()=>this.handleDeleteUser(c)},e().createElement(Re.Z,{iconClass:"icon-guanbi"})));var s=[];S.setting.receivers&&(s=S.setting.receivers.map(i=>(i.isChecked=!0,i.id=i.user_id,i.user_id=i.sync_user_id,i))),this.state={setting:S.setting,org:{visible:!1,initList:{user:s}},isVip:0,appType:localStorage.appType,qyWeChatVo:null}}componentDidMount(){this.getEnterpriseInfo()}render(){var S=this.props.t,s=this.state,i=s.setting,c=s.org,d=s.isVip,o=s.appType,P=s.qyWeChatVo,p=i.title,L=i.quota_status;if(d!==2&&d!==5&&d!==6)return null;var A=Ze()(["course-approval__content",L==="on"?"":"course-approval__content-closed"]),W=localStorage.getItem("themeColor")||"#516AE6",ue=P?JSON.parse(P):null;return e().createElement("div",{className:"advancedsetting__either advancedsetting__either__border advancedsetting__either-padding-bottom-none"},e().createElement("div",{className:"advancedsetting__either__header-sub"},p),e().createElement("p",{className:"advancedsetting__either-tip"},S(o==="wx_app"?"setting.studentQyWxTip":o==="fs_app"?"setting.studentNumberFsTip":"setting.studentNumberTip")),e().createElement("p",{className:"advancedsetting__either-tip"},S(L==="on"?"setting.offReceiverTip":"setting.onReceiverTip")),e().createElement("div",{className:"advancedsetting__either__body course-approval"},e().createElement("div",{style:{marginBottom:16}},e().createElement(X.Z,{checkedChildren:S("setting.activated"),unCheckedChildren:S("setting.deactivated"),checked:L==="on",onClick:this.handleSwitch})),e().createElement("div",{className:A},e().createElement("ul",{className:"person-list cl-clearfix"},c.initList.user.map((Ue,Me)=>this.renderPersonItem(Ue,Me)),e().createElement("li",{className:"person-list__item person-list__item-add",style:{color:W,borderColor:W},onClick:this.handleAddUser},e().createElement(Re.Z,{iconClass:"icon-icon_addx"}),S("setting.messageReceiver"))))),c.visible?e().createElement(Qe.Z,{visible:c.visible,title:S("setting.chooseMessageReceiver"),onlyUser:!0,initData:c.initList,onOk:this.handleSaveUser,onCancel:this.handleCacncelUser}):null)}}var Gt=De=>({user:De.user}),It=(0,b.$j)(Gt)((0,N.Z)()(jt)),xt=()=>({});class wt extends e().Component{constructor(S){super(S);this.popWindowSwitch=s=>{var i=(0,m.Z)({},this.state.setting),c=i.action_list,d=c.find(p=>p.type==="random_popup_verification");d.param.checked=s?"true":"false";var o=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(c)});this.setState({setting:o});var P=this.props.onDocumentSetLimit;P&&P(o)},this.state={setting:S.setting,classHourChecked:!1,showRandom:!1}}componentDidMount(){}render(){var S=this.state.setting.action_list,s=this.props.t,i=S.find(c=>c.type==="random_popup_verification");return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either__border"},e().createElement("div",{className:"advancedsetting__margin__eight advancedsetting__sub__title"},i.dynamic_name),e().createElement("p",{className:"advancedsetting__margin__twelve"},s("setting.randomPopDesc")," "),e().createElement(X.Z,{checkedChildren:s("setting.activated"),unCheckedChildren:s("setting.deactivated"),checked:i.param.checked==="true",onClick:this.popWindowSwitch})))}}var At=(0,b.$j)(xt)((0,N.Z)()(wt));class St extends e().Component{constructor(){super(...arguments);this.handleChange=(S,s)=>{var i=s==="selectSetting"?this.props.setting[0]:this.props.setting[1],c=(0,m.Z)((0,m.Z)({},i),{},{status:S.target.value==="OPEN",successMsg:this.props.t("setting.setUpSucceed")}),d=this.props.onRefresh;d&&d(c)}}render(){var S=this.props,s=S.setting,i=S.t,c=S.prefixCls,d=s[0],o=s[1],P=JSON.parse(d.description),p=JSON.parse(o.description);return e().createElement("div",{className:"".concat(c," ").concat(c,"__either tagAdvancedSetting")},e().createElement("div",{className:"".concat(c,"__either__body")},e().createElement("span",{className:"".concat(c,"__either__body__label")},d.title,":"),e().createElement(Oe.ZP.Group,{defaultValue:d.switch_status,buttonStyle:"solid",onChange:L=>this.handleChange(L,"selectSetting")},e().createElement(Oe.ZP.Button,{value:"OPEN"},i("learning.questionnaireAddToolSingle")),e().createElement(Oe.ZP.Button,{value:"CLOSED"},i("learning.questionnaireAddToolMul"))),e().createElement("p",null,d.switch_status==="OPEN"?P.single_choice:P.multiple_choice),e().createElement("span",{className:"".concat(c,"__either__body__label")},o.title,":"),e().createElement(Oe.ZP.Group,{defaultValue:o.switch_status,buttonStyle:"solid",onChange:L=>this.handleChange(L,"creatSetting")},e().createElement(Oe.ZP.Button,{value:"OPEN"},i("course.courseDetailDownloadAllow")),e().createElement(Oe.ZP.Button,{value:"CLOSED"},i("course.courseDetailDownloadForbidden"))),e().createElement("p",null,o.switch_status==="OPEN"?p.able_create:p.disable_create)))}}St.defaultProps={prefixCls:"advancedsetting",setting:{}};var Ht=(0,N.Z)()(St),zt=t(66456),Lt=t(55313),_t=t(68628);class Mt extends e().Component{constructor(){var S;super(...arguments);S=this,this.getColumns=()=>{var s=this.props.t,i=[{title:s("studentInformation.fieldName"),key:"name",align:"left",width:140,render:(c,d)=>e().createElement("div",null,d.name)},{title:s("studentInformation.fieldType"),align:"left",width:140,render:(c,d)=>e().createElement("div",null,d.column_type_name)},{title:()=>e().createElement("div",null,this.props.t("studentInformation.permitModify"),"\xA0",e().createElement(ie.Z,{title:()=>e().createElement("p",null,this.props.t("studentInformation.permitModifyMessageTip"))},e().createElement(_t.Z,{style:{cursor:"pointer",color:"",color:"rgba(0, 0, 0, 0.45)"}}))),align:"left",width:140,render:(c,d)=>e().createElement("div",{className:""},d&&d.allow&&d.has_allow?e().createElement(X.Z,{checked:d.allow.param.checked==="true",onChange:()=>this.toggleStatus(d.allow)}):"\u2014")},{title:()=>e().createElement("div",null,this.props.t("studentInformation.requiredWrite"),"\xA0",e().createElement(ie.Z,{title:()=>e().createElement("p",null,this.props.t("studentInformation.requiredModifyMessageTip"))},e().createElement(_t.Z,{style:{cursor:"pointer",color:"rgba(0, 0, 0, 0.45)"}}))),align:"left",width:140,render:(c,d)=>e().createElement("div",{className:""},d&&d.force&&d.has_force?e().createElement(X.Z,{checked:d.force.param.checked==="true",onChange:()=>this.toggleStatus(d.force)}):"\u2014")}];return i},this.toggleStatus=function(){var s=(0,ae.Z)(M().mark(function i(c){var d,o,P,p;return M().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return d=S.props.t,o={type:c.type,checked:c.param.checked==="true"?"false":"true"},A.next=4,G(o);case 4:P=A.sent,p=P.data,p.code==="200000"?($.default.success(d("studentInformation.statusSucceeded")),S.props.initTable()):$.default.error(d("studentInformation.statusFailed"));case 7:case"end":return A.stop()}},i)}));return function(i){return s.apply(this,arguments)}}()}render(){var S=this.props,s=S.dataSource,i=S.loading;return e().createElement(Lt.Z,{rowKey:"id",columns:this.getColumns(),dataSource:s,pagination:!1,loading:i})}}var kt=(0,N.Z)()(Mt),ra=t(63185),Rt=t(9676),Xe=t(16239),Yt=Oe.ZP.Group,Jt=Ee.Z.Option;class ke extends e().Component{constructor(S){super(S);this.handleCheck=s=>{var i=s.target.checked;this.handleTaskReminder("timed_reminder",this.props.t("setting.everydayReminder"),i)},this.handleTaskReminder=(s,i,c)=>{var d=this.props.t,o=(0,m.Z)({},this.state.setting),P=JSON.parse(o.actions);P.forEach(W=>{W.type===s&&(W.param.checked=c?"true":"false")});var p=d(c?"setting.activated":"setting.deactivated"),L=(0,m.Z)((0,m.Z)({},o),{},{actions:JSON.stringify(P),successMsg:"".concat(i).concat(p)});this.setState({setting:L});var A=this.props.handleTaskReminder;A&&A(L)},this.handleChangeTimingReminder=s=>{var i=s.target.value;this.setState({radioGroupDefaultValue:i});var c=this.props,d=c.t,o=c.handleTaskReminder,P=(0,m.Z)({},this.state.setting),p=JSON.parse(P.actions);p.forEach(W=>{(W.type==="no_timed_reminder"||W.type==="timed_reminder"||W.type==="week_timed_reminder")&&(W.type===i?W.param.checked="true":W.param.checked="false")});var L="".concat(d("setting.everydayReminder")).concat(d("setting.settingLabel")).concat(d("component.successLabel")),A=(0,m.Z)((0,m.Z)({},P),{},{actions:JSON.stringify(p),successMsg:L});this.setState({setting:A}),o&&o(A)},this.handleChangeSelect=s=>{var i=this.props,c=i.t,d=i.handleTaskReminder,o=(0,m.Z)({},this.state.setting),P=JSON.parse(o.actions),p=P.find(W=>W.type==="week_timed_reminder");if(p.param.checked!=="false"){P.forEach(W=>{W.type==="week_timed_reminder"&&(W.param.comment=[s])});var L="".concat(c("setting.everydayReminder")).concat(c("setting.settingLabel")).concat(c("component.successLabel")),A=(0,m.Z)((0,m.Z)({},o),{},{actions:JSON.stringify(P),successMsg:L});d&&d(A)}},this.renderTimingReminderList=()=>{var s=this.props.t,i=this.state,c=i.optionList,d=i.setting,o=i.radioGroupDefaultValue,P=JSON.parse(d.actions),p=[];P.forEach(W=>{switch(W.type){case"no_timed_reminder":case"timed_reminder":case"week_timed_reminder":p.push(W);break;default:break}});var L=p.find(W=>W.type==="week_timed_reminder"),A=L.param.comment[0];return e().createElement("div",{className:"timing-reminder"},e().createElement("div",{className:"advancedsetting__either__header-sub"},s("setting.everydayReminder")),e().createElement("p",{className:"timing-reminder__desc"},Xe.Z[(0,Xe.c)()].showCl?s("setting.dingdingReminderTip"):"APP\u6D88\u606F\u63D0\u9192"),e().createElement("div",{className:"timing-reminder__list"},e().createElement(Yt,{onChange:this.handleChangeTimingReminder,value:o},p.map(W=>W.type==="week_timed_reminder"?e().createElement("div",{className:"timing-reminder__item",key:W.type},e().createElement(Oe.ZP,{value:W.type}),e().createElement("div",{className:"timing-reminder__item__date"},s("setting.each"),e().createElement(Ee.Z,{defaultValue:A,style:{width:160},onChange:this.handleChangeSelect},c.map(ue=>e().createElement(Jt,{key:ue.value,value:ue.value},ue.lable))),s("setting.remind"))):e().createElement("div",{className:"timing-reminder__item",key:W.type},e().createElement(Oe.ZP,{value:W.type},e().createElement("span",{className:"label"},W.dynamic_name)))))))},this.state={setting:S.setting,optionList:[{lable:S.t("common.monday"),value:"1"},{lable:S.t("common.tuesday"),value:"2"},{lable:S.t("common.wednesday"),value:"3"},{lable:S.t("common.thursday"),value:"4"},{lable:S.t("common.friday"),value:"5"},{lable:S.t("common.saturday"),value:"6"},{lable:S.t("common.sunday"),value:"7"}],radioGroupDefaultValue:S.radioGroupDefaultValue}}render(){var S=this.props,s=S.t,i=S.appType,c=this.state.setting.actions,d=JSON.parse(c);d.map(L=>{L.param.checked=L.param.checked==="true"});var o=d.find(L=>L.type==="task_assign_message"),P=d.find(L=>L.type==="task_ding_workflow"),p=P.param.checked;return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__either__header-sub"},s("advancedSetting.systemToRemind")),e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either__border"},e().createElement("h5",null,Xe.Z[(0,Xe.c)()].showCl?s("setting.dingdingReminderTip"):"APP\u6D88\u606F\u63D0\u9192"),e().createElement("div",{className:"taskReminder"},e().createElement(Rt.Z,{disabled:!0,checked:o.param.checked},o.dynamic_name)),this.renderTimingReminderList()),i!=="wx_app"&&i!=="fs_app"&&Xe.Z[(0,Xe.c)()].showCl&&!(0,a.xX)()?e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either__border"},e().createElement("div",{className:"advancedsetting__either__header-sub"},s("setting.dingdingTodo")),e().createElement("p",null,s("setting.dingdingTodoTip")),e().createElement(X.Z,{checked:p,checkedChildren:s("setting.activated"),unCheckedChildren:s("setting.deactivated"),onClick:L=>this.handleTaskReminder("task_ding_workflow",s("setting.dingdingTodo"),L)})):null)}}var v=(0,b.$j)(De=>({appType:De.user.appType}))((0,N.Z)()(ke)),y=t(62350),h=t(75443),u=t(54549),E=t(49101),k=t(62029),w=t(47673),x=t(4107),O=t(6793);class q extends e().Component{constructor(S){super(S);this.cancelAddUserField=()=>{this.props.onAddCbk("cancel")},this.saveAddUserField=()=>{var i=this.state,c=i.type,d=i.value,o=this.props.t,P=/^[\u4e00-\u9fa5a-zA-Z ]+$/;if(c===3&&(0,O.fy)(d)===""){this.setState({showMessageTip:!0,errorMessageTip:o("setting.inputFieldName")});return}if(c===3&&!d.match(P)){this.setState({showMessageTip:!0,errorMessageTip:o("setting.onlyIncludeChinese")});return}if(c===""){$.default.warning(o("setting.selectFieldType"));return}var p=j.ZP.advancedSetting.addUserField();c==="identityNumber"&&(d=o("setting.identityNumber")),c==="phone"&&(d=o("setting.phoneNumber"));var L={columnValue:d||""};V.WY.post({url:p,data:L}).then(A=>{A.data.code===0&&($.default.success(o("setting.addSucceed")),this.props.onAddCbk("ok"))})},this.onChangeType=(i,c)=>{this.setState({type:i.target.checked?c:""})},this.handleInput=i=>{this.setState({value:i.target.value})};var s=e().createElement(ot.Z,{key:"submit",type:"primary",onClick:this.saveAddUserField},S.t("common.ok"));this.state={addUserFieldModal:{mask:!0,size:"small",footer:s,onCancel:this.cancelAddUserField},type:"",value:"",errorMessageTip:""}}componentDidUpdate(S){S.visible!==this.props.visible&&this.setState({type:"",value:"",errorMessageTip:""})}render(){var S=this.props,s=S.t,i=S.userIdChecked,c=i===void 0?!1:i,d=S.userPhoneChecked,o=d===void 0?!1:d,P=this.state,p=P.type,L=P.value,A=P.showMessageTip,W=P.errorMessageTip,ue={display:"block",height:"30px",lineHeight:"30px"};return e().createElement(Je.ZP,(0,k.Z)({},this.state.addUserFieldModal,{visible:this.props.visible,title:s("setting.addUserFieldTitle")}),e().createElement("div",{className:"add-user-field"},e().createElement(Oe.ZP,{style:ue,checked:p==="identityNumber"||c,disabled:c,onChange:Ue=>this.onChangeType(Ue,"identityNumber")},e().createElement(ie.Z,{placement:"right",title:s("authentication.idcardDataFieldTips")},s("setting.identityNumber"),e().createElement(Re.Z,{iconClass:"iconf-tipe",color:"#D1D2D6",size:"14px"}))),Xe.Z[(0,Xe.c)()].showCl?e().createElement(Oe.ZP,{style:ue,checked:p==="phone"||o,disabled:o,onChange:Ue=>this.onChangeType(Ue,"phone")},s("setting.phoneLabel")):null,e().createElement(Oe.ZP,{style:ue,value:3,checked:p===3,onChange:Ue=>this.onChangeType(Ue,3)},s("setting.selfDefineField"),e().createElement(x.Z,{onInput:this.handleInput,disabled:p!==3,placeholder:s("setting.inputFieldName"),value:L,style:{width:200,marginLeft:10},minLength:1,maxLength:60}),A&&e().createElement("p",{className:"add-user-field-tip"},W))))}}q.defaultProps={visible:!1,onAddCbk:()=>{}};var ee=(0,N.Z)()(q),se=t(2871);class F extends e().Component{constructor(S){var s;super(S);s=this,this.removeItem=function(){var i=(0,ae.Z)(M().mark(function c(d,o,P){var p,L;return M().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,se.$)(d.toUpperCase(),"",s.props.t("setting.selfDefineField")+P);case 2:if(p=W.sent,!p){W.next=5;break}return W.abrupt("return");case 5:L=j.ZP.advancedSetting.removeUserField(d),V.WY.get({url:L}).then(ue=>{ue.data.code===0&&s.props.onRefresh()});case 7:case"end":return W.stop()}},c)}));return function(c,d,o){return i.apply(this,arguments)}}(),this.showAdd=()=>{this.setState({showAdd:!0})},this.hiddenAdd=i=>{this.setState({showAdd:!1}),i==="ok"&&this.props.onRefresh()},this.state={showAdd:!1,isSubsidy:""}}componentDidMount(){this.setState({isSubsidy:localStorage.isSubsidyEnterprise})}render(){var S=this.state,s=S.showAdd,i=S.isSubsidy,c=this.props.setting,d=c.title,o=c.action_list,P=o[0].param,p=P.keyValue,L=P.commentOrgin,A=this.props.t,W=p.findIndex(Me=>Me.columnValue==="\u624B\u673A\u53F7")!==-1,ue=p.findIndex(Me=>Me.columnValue==="\u8EAB\u4EFD\u8BC1\u53F7")!==-1,Ue=localStorage.getItem("themeColor")||"#516AE6";return e().createElement("div",{className:"advancedsetting__either advancedsetting__padding advancedsetting__either__border advancedsetting__either-padding-bottom-none"},e().createElement("div",{className:"advancedsetting__either__header-sub",style:{marginBottom:16}},d),e().createElement("div",{className:"advancedsetting__either__body",style:{maxWidth:840}},L.map((Me,ze)=>e().createElement("div",{className:"field-item",key:ze},Me)),p.map((Me,ze)=>e().createElement("div",{className:"field-item",key:ze},Me.columnValue,e().createElement(h.Z,{placement:"topLeft",title:A("setting.removeFieldTip"),onConfirm:()=>this.removeItem(Me.columnKey,ze,Me.columnValue),okText:A("common.ok"),cancelText:A("common.cancel")},Me.columnValue==="\u8EAB\u4EFD\u8BC1\u53F7"&&i==="true"?"":e().createElement("span",{className:"field-item-close"},e().createElement(u.Z,null))))),p.length>=5?e().createElement(ie.Z,{title:A("setting.addFieldLimit")},e().createElement("div",{className:"field-item add disable"},e().createElement("span",{className:"field-item-add"},e().createElement(E.Z,null)),A("setting.addUserField"))):e().createElement("div",{className:"field-item add",style:{color:Ue,borderColor:Ue},onClick:this.showAdd},e().createElement("span",{className:"field-item-add"},e().createElement(E.Z,null)),A("setting.addUserField"))),e().createElement(ee,{visible:s,onAddCbk:this.hiddenAdd,userPhoneChecked:W,userIdChecked:ue}))}}var Y=(0,N.Z)()(F),me=t(49111),Pe=t(19650),be=t(9715),Ie=t(86585),B=t(33565),D=t(59465),C=De=>{var S=De.t,s=Ie.Z.useForm(),i=(0,B.Z)(s,1),c=i[0],d=(0,U.useState)({}),o=(0,B.Z)(d,2),P=o[0],p=o[1],L=(0,U.useState)([]),A=(0,B.Z)(L,2),W=A[0],ue=A[1],Ue=(0,U.useState)([]),Me=(0,B.Z)(Ue,2),ze=Me[0],Ye=Me[1],Ke=(0,U.useState)({}),He=(0,B.Z)(Ke,2),ct=He[0],Wt=He[1],Vt=(0,U.useState)(!0),Nt=(0,B.Z)(Vt,2),Qt=Nt[0],et=Nt[1];(0,U.useEffect)(()=>(ht(),()=>{ue([]),Ye([])}),[]);var ht=function(){var dt=(0,ae.Z)(M().mark(function ft(){var bt,st,mt,tt,Xt,qt,Bt,ea,na;return M().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.prev=0,bt=j.ZP.selfBuild.getUserExtraField(),it.next=4,V.WY.post({url:bt,data:{}});case 4:st=it.sent,mt=st.data,et(!1),mt.success==="true"&&(p(mt.data),tt=mt.data,Xt=tt.kuUserExtendFieldList,qt=tt.thirdExtendFieldList,Bt=tt.userExtendMappingList,ea=[...Xt].map(ia=>ia.extendFieldName),na=[...qt].map(ia=>ia.extendFieldName),ue([...ea]),Ye([...na]),Bt.length>0?Wt({userExtendMappingList:Bt}):Wt({userExtendMappingList:[{}]})),it.next=15;break;case 10:it.prev=10,it.t0=it.catch(0),et(!1),ue([]),Ye([]);case 15:case"end":return it.stop()}},ft,null,[[0,10]])}));return function(){return dt.apply(this,arguments)}}(),la=function(){var dt=(0,ae.Z)(M().mark(function ft(bt){var st,mt,tt,Xt,qt,Bt,ea;return M().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:if(st=bt.userExtendMappingList,mt=[],tt=[],st.forEach(it=>{mt.push(it.thirdUserFieldName),tt.push(it.userFieldName)}),!(Array.from(new Set(mt)).length!==st.length||Array.from(new Set(tt)).length!==st.length)){Tt.next=7;break}return $.default.error(S("selfBuild.saveErrorTip")),Tt.abrupt("return");case 7:return Xt=(0,m.Z)((0,m.Z)({},P),{},{userExtendMappingList:st}),qt=j.ZP.selfBuild.saveExtraFieldInfo(),Tt.next=11,V.WY.post({url:qt,data:Xt});case 11:Bt=Tt.sent,ea=Bt.data,ea.success==="true"&&$.default.success(S("selfBuild.saveSuccessTip"));case 14:case"end":return Tt.stop()}},ft)}));return function(bt){return dt.apply(this,arguments)}}(),ca=dt=>{c.setFieldsValue({thirdUserFieldName:dt})},da=dt=>{c.setFieldsValue({userFieldName:dt})},pa=(dt,ft)=>{dt(ft)};return!ct.userExtendMappingList&&!Qt?null:e().createElement("div",{className:"field-setting-body"},Qt?e().createElement("div",{className:"field-setting-loading"},e().createElement(Z.Z,null)):e().createElement(e().Fragment,null,e().createElement("div",null,e().createElement("div",{className:"advanced__title-set"},S("selfBuild.fieldMangeSet")),e().createElement("div",{className:"advanced__tip"},S("selfBuild.fieldMangeDesc"))),e().createElement("div",{className:"field-setting-box"},e().createElement("div",{className:"field-setting-list"},e().createElement(Ie.Z,{form:c,name:"form_field",onFinish:la,autoComplete:"off",initialValues:ct},e().createElement(Ie.Z.List,{name:"userExtendMappingList"},(dt,ft)=>{var bt=ft.remove;return e().createElement(e().Fragment,null,dt.map((st,mt)=>e().createElement("div",{key:st.key},e().createElement(Pe.Z,{align:"baseline"},e().createElement(Ie.Z.Item,(0,k.Z)({},st,{label:"",name:[st.name,"thirdUserFieldName"],style:{width:"280px"},rules:[{required:!0,message:S("selfBuild.selectConnectField")}]}),e().createElement(Ee.Z,{onChange:ca,placeholder:S("selfBuild.selectQwField")},ze.map(tt=>e().createElement(Ee.Z.Option,{value:tt,key:tt},tt)))),S("selfBuild.connect"),e().createElement(Ie.Z.Item,(0,k.Z)({},st,{label:"",name:[st.name,"userFieldName"],style:{width:"280px"},rules:[{required:!0,message:S("selfBuild.selectConnectField")}]}),e().createElement(Ee.Z,{onChange:da,placeholder:S("selfBuild.selectKuField")},W.map(tt=>e().createElement(Ee.Z.Option,{value:tt,key:tt},tt)))),mt>0&&e().createElement(D.Z,{onClick:()=>pa(bt,st.name)})))))}),e().createElement(Ie.Z.Item,null,e().createElement(ot.Z,{type:"primary",htmlType:"submit",style:{padding:"0 40px"}},S("selfBuild.save"))))))))},n=(0,N.Z)()(C),l=t(65202),_=Rt.Z.Group;class f extends e().Component{constructor(S){super(S);this.handleCustomChange=s=>{this.setState({customVal:s.target.value})},this.handleChange=(s,i)=>{var c=(0,m.Z)({},this.state.setting),d=JSON.parse(c.actions);d.forEach(o=>{o.type===i&&(o.param.comment=s)}),this.waterMarkSubmit(d)},this.handleCustomSave=(s,i)=>{var c=(0,m.Z)({},this.state.setting),d=JSON.parse(c.actions);i?d.forEach(o=>{o.type===i&&(o.param.checked=s[0]==="customize"?"true":"false")}):d.forEach(o=>{o.type==="content_custom"&&(o.param.comment=[].concat(this.state.customVal))}),this.waterMarkSubmit(d)},this.handleChangeRadio=s=>{var i=(0,m.Z)({},this.state.setting),c=JSON.parse(i.actions);c.forEach(d=>{(d.type==="intensive"||d.type==="dispersive")&&(d.param.checked="false")}),c.forEach(d=>{d.type===s.target.value&&(d.param.checked="true")}),this.waterMarkSubmit(c)},this.waterMarkSubmit=s=>{var i=(0,m.Z)({},this.state.setting),c=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(s)});this.setState({setting:c});var d=this.props.onChooseCheckbox;d&&d(c)},this.renderWatermark=(s,i)=>{var c=JSON.parse(this.state.setting.actions),d=c.filter(o=>o.type===s);return e().createElement("div",null,d.map(o=>e().createElement("div",{className:"watermark_item",key:o.key},e().createElement("div",{className:"watermark_item_title label"},o.dynamic_name),e().createElement(_,{className:"normal_check",options:i,defaultValue:o.param.comment,onChange:P=>this.handleChange(P,o.type)}),s==="content_setting"&&this.renderCustom("content_custom"))))},this.renderCustom=s=>{var i=this.props.t,c=this.state,d=c.customOptions,o=c.customVal,P=JSON.parse(this.state.setting.actions),p=P.filter(A=>A.type===s),L=p[0].param.checked;return e().createElement(e().Fragment,null,e().createElement(_,{options:d,defaultValue:L==="true"?["customize"]:[],onChange:A=>this.handleCustomSave(A,"content_custom")}),e().createElement(x.Z.Group,{compact:!0,className:"customInput"},e().createElement(x.Z,{style:{width:"300px"},value:o,maxLength:10,onChange:this.handleCustomChange,placeholder:i("setting.waterMarkCustomize")}),e().createElement(ot.Z,{style:{color:(0,l.p)()},onClick:this.handleCustomSave},i("common.save")),e().createElement("span",{className:"limitTip"},"(",i("setting.waterMarkCustomizeLimit"),")")),e().createElement("div",{className:"contentTip"},i("setting.waterMarkCustomTip")))},this.renderWatermarkRadio=()=>{var s=this.props.t,i=this.state.setting.actions,c=JSON.parse(i).filter(o=>o.type==="intensive"||o.type==="dispersive"),d=c.find(o=>o.param.checked==="true");return e().createElement("div",{className:"watermark_item"},e().createElement("div",{className:"watermark_item_title label"},s("advancedSetting.waterStyle")),e().createElement(Oe.ZP.Group,{onChange:this.handleChangeRadio,value:d.type},c.map(o=>e().createElement(Oe.ZP,{value:o.type,key:o.type},o.dynamic_name,e().createElement("img",{className:"radioImg",src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/theme/water-").concat(o.type,".png")})))))},this.getOptions=s=>{var i=[];return s.forEach(c=>{i.push({label:c.dynamic_name,value:c.param.comment[0]})}),i},this.state={setting:S.setting,customVal:"",sceneOptions:[{label:this.props.t("common.exam"),value:"exam"},{label:this.props.t("common.video"),value:"video"},{label:this.props.t("common.doc"),value:"document"},{label:this.props.t("common.image"),value:"image"},{label:this.props.t("common.notice"),value:"notice"},{label:this.props.t("common.community"),value:"community"}],contentOptions:[{label:this.props.t("setting.watermarkName"),value:"name"},{label:this.props.t("setting.watermarkPosition"),value:"position"},{label:this.props.t("setting.watermarkJobNumber"),value:"jobnumber"}],customOptions:[{label:this.props.t("setting.customColor"),value:"customize"}]}}componentDidMount(){var S=JSON.parse(this.state.setting.actions),s=S.filter(i=>i.type==="content_custom");this.setState({customVal:s[0].param.comment})}render(){var S=this.props.t,s=this.state,i=s.sceneOptions,c=s.contentOptions;return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__either__header"},e().createElement("span",{className:"advanced__title"},S("advancedSetting.dynamicWatermark"))),e().createElement("div",{className:"advancedsetting__watermark__body advancedsetting__watermark-margin-top"},e().createElement("div",null,this.renderWatermark("content_setting",c),this.renderWatermark("application_scenario",i),this.renderWatermarkRadio())))}}var r=(0,N.Z)()(f);class I extends e().Component{constructor(S){super(S);this.handleSwitch=s=>{var i=(0,m.Z)({},this.state.setting),c=i.action_list;c=c.map(L=>(L.type===this.props.actionKey&&(L.param.checked=s?"true":"false"),L));var d=(0,m.Z)((0,m.Z)({},i),{},{status:s,actions:JSON.stringify(c)});this.setState({setting:d});var o=this.props.onSubmit;o&&o(d);var P=this.state.setting.action_list,p=s?P[0].value:0;this.updateInputValue(p)},this.handleInput=s=>{var i=(0,m.Z)({},this.state.setting),c=i.action_list;c=c.map(o=>(o.type===this.props.actionKey&&(o.value=s),o));var d=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(c)});this.setState({setting:d})},this.submit=()=>{var s=this.props.onSubmit;s&&s(this.state.setting);var i=this.state.setting.action_list;this.updateInputValue(i[0].value)},this.updateInputValue=s=>{localStorage.setItem(this.props.inputKey,s),this.props.dispatch({type:"advancedSetting/".concat(this.props.updateInputKey),payload:{[this.props.inputKey]:s}})},this.state={setting:S.setting}}componentDidMount(){this.props.onRef&&this.props.onRef(this)}render(){var S=this.state.setting,s=S.title,i=S.status,c=S.description,d=S.action_list,o=this.props.t,P=d.find(p=>p.type===this.props.actionKey)||{};return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__either__header advancedsetting__either__margin advancedsetting__either-font"},s),e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either__border"},e().createElement("div",{className:"documentDuration"},e().createElement("span",null,P.dynamic_name,e().createElement(Ct.Z,{value:P.value,disabled:P.param.checked!=="true",onChange:this.handleInput,className:"study-time-limit-number",min:1,max:240,precision:0}),o("common.minutes")),e().createElement(ot.Z,{type:"primary",onClick:this.submit,disabled:P.param.checked!=="true"},o("common.save"))),e().createElement("p",null,c),e().createElement(X.Z,{checkedChildren:o("setting.activated"),unCheckedChildren:o("setting.deactivated"),checked:i,onClick:this.handleSwitch})))}}I.defaultProps={actionKey:"oss_aging_expire",inputKey:"resourceTimeliness",updateInputKey:"updateResourceTimeliness",onSubmit:()=>{}};var K=()=>({}),H=(0,b.$j)(K)((0,N.Z)()(I)),de=Oe.ZP.Group;class J extends e().Component{constructor(S){super(S);this.handleChange=s=>{var i=(0,m.Z)({},this.state.setting),c=$e()(this.state.action_list);this.setState({defaultValue:s.target.value}),c.forEach(P=>{P.type===s.target.value?P.param.checked="true":P.param.checked="false"});var d=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(c)}),o=this.props.onChooseVodMode;o&&o(d)},this.state={setting:S.setting,action_list:[],defaultValue:""}}componentDidMount(){var S=this.state.setting.actions,s=JSON.parse(S);s.forEach(i=>{i.param.checked==="true"&&this.setState({defaultValue:i.type})}),this.setState({action_list:s})}render(){var S=this.state.setting,s=S.description,i=S.title,c=this.state.action_list;return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__padding"},e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either-border advancedsetting-padding-bottom"},e().createElement("div",{className:"advancedsetting__either__header-sub"},i),e().createElement("div",{className:"timing-reminder__list"},e().createElement(de,{onChange:this.handleChange,value:this.state.defaultValue},c.map(d=>e().createElement("div",{className:"timing-reminder__item",key:d.type},e().createElement(Oe.ZP,{value:d.type},d.dynamic_name))))),e().createElement("p",{className:"timing-reminder__desc",style:{marginTop:14,marginBottom:0}},s))))}}var fe=J,ge=Oe.ZP.Group;class ye extends e().Component{constructor(S){super(S);this.handleChange=s=>{var i=(0,m.Z)({},this.state.setting),c=$e()(this.state.action_list);this.setState({defaultValue:s.target.value}),c.forEach(P=>{P.type===s.target.value?P.param.checked="true":P.param.checked="false"});var d=(0,m.Z)((0,m.Z)({},i),{},{actions:JSON.stringify(c)}),o=this.props.onChooseVodMode;o&&o(d)},this.state={setting:S.setting,action_list:[],defaultValue:""}}componentDidMount(){var S=this.state.setting.actions,s=JSON.parse(S);s.forEach(i=>{i.param.checked==="true"&&this.setState({defaultValue:i.type})}),this.setState({action_list:s})}render(){var S=this.state.setting.title,s=this.state.action_list;return e().createElement("div",{className:"advancedsetting__either"},e().createElement("div",{className:"advancedsetting__padding"},e().createElement("div",{className:"advancedsetting__either__body advancedsetting__either-border advancedsetting-padding-bottom"},e().createElement("div",{className:"advancedsetting__either__header-sub"},S),e().createElement("div",{className:"advancedsetting__watermark__body",style:{marginTop:0}},e().createElement(ge,{onChange:this.handleChange,value:this.state.defaultValue},s.map(i=>e().createElement("div",{className:"transcoding_item",key:i.type},e().createElement(Oe.ZP,{value:i.type},e().createElement("div",{className:"transcoding_item-column"},e().createElement("span",{className:"label"},i.type),e().createElement("span",{className:"docmode_desc"},i.dynamic_name))))))))))}}var le=ye,Se=t(82602),xe=t.n(Se);function rt(De){var S=De.t,s=De.setting,i=De.onChange,c=(0,U.useState)(!1),d=(0,B.Z)(c,2),o=d[0],P=d[1];(0,U.useEffect)(()=>{p(s,"dept_leader_sync")},[s]);var p=(A,W)=>{var ue=A[W];!ue||P(ue.switch_status==="OPEN")},L=(A,W)=>{P(A);var ue=s[W];i({status:A,switch_id:ue.switch_id,type:"dept_leader_sync",actions:ue.actions,successMsg:S("setting.setUpSucceed")})};return e().createElement("div",{className:xe()["data-sync"]},e().createElement("div",{className:xe().container},e().createElement("div",{className:xe().title},S("leftMenuLists.dataSync")),s.dept_leader_sync&&e().createElement("div",{className:xe()["set-action"]},e().createElement("div",{className:xe()["set-title"]},S("leftMenuLists.deptHeadsSync")),e().createElement("div",{className:xe()["set-tip"]},S("leftMenuLists.deptHeadsSyncTip")),e().createElement("div",{className:xe().control},e().createElement(X.Z,{checkedChildren:S("common.open"),unCheckedChildren:S("common.close"),checked:o,onClick:A=>L(A,"dept_leader_sync")})))))}var nt=(0,N.Z)()(rt),ce=t(11449),oa=t(31916),we=R.Z.TabPane,Te={getSetting:j.ZP.advancedSetting.getSetting,editSetting:j.ZP.advancedSetting.editSetting};class lt extends e().Component{constructor(){var S,s,i,c,d;super(...arguments);d=this,this.state={isShowCreateTab:!1,isShowSyncTab:!1,TabType:"",dataInfoDing:[],dataInfoCustom:[],activeKey:((S=this.props.location)===null||S===void 0||(s=S.state)===null||s===void 0?void 0:s.activeKey)||"1",displaySetupSubActiveKey:((i=this.props.location)===null||i===void 0||(c=i.state)===null||c===void 0?void 0:c.displaySetupSubActiveKey)||"1",advancedSettingsData:{},whiteList:{showRandom:(0,We.UI)("RANDOM_POPUP_VERIFY")},isVip:0,loading:!0,isLoading:!0,blackList:{dingDiskSelectFlag:(0,We.eY)("ADVANCED_DING_DISK_SELECT"),courseShareFlag:(0,We.eY)("ADVANCED_COURSE_SHARE"),mobileLeaderBoardFlag:(0,We.eY)("ADVANCED_MOBILE_LEADER_BOARD"),isOldExam:!0}},this.onRefreshSetting=()=>{this.getSetting()},this.initTable=(0,ae.Z)(M().mark(function o(){var P,p,L,A,W,ue,Ue,Me;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return d.setState({isLoading:!0}),Ye.next=3,pe();case 3:P=Ye.sent,p=P.data,p.code==="200000"&&(L=p.data,A=L.list_sync,W=L.list_create,ue=L.has_create,Ue=L.has_sync,Me=L.app_type,d.setState({dataInfoDing:A.map((Ke,He)=>(0,m.Z)((0,m.Z)({},Ke),{},{id:He})),dataInfoCustom:W.map((Ke,He)=>(0,m.Z)((0,m.Z)({},Ke),{},{id:He})),isLoading:!1,isShowCreateTab:ue==="true",isShowSyncTab:Ue==="true",TabType:Me}));case 6:case"end":return Ye.stop()}},o)})),this.getTabType=o=>{var P=this.props.t;switch(o){case"micro_app":return P("registerLogin.microApp");case"e_app":return P("registerLogin.dingTalk");case"wx_app":return P("registerLogin.EnWeChat");case"seeyon_app":return P("registerLogin.zhiyuanOa");case"third_oa_app":return P("registerLogin.thirdOa");case"fs_app":return P("registerLogin.feishu");case"lenovo_app":return P("registerLogin.baiyingTalk");default:return""}},this.getEnterpriseExamType=(0,ae.Z)(M().mark(function o(){var P;return M().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,oa.uH)();case 2:P=L.sent,d.setState({isOldExam:P==="old"});case 4:case"end":return L.stop()}},o)})),this.getEnterpriseInfo=()=>{var o=j.ZP.Organization.getEnterpriseInfo();V.WY.get({url:o}).then(P=>{this.setState({isVip:P.data.isVip})})},this.handleChangeTab=o=>{this.setState({activeKey:o},()=>{this.state.activeKey==="6"&&this.initTable()})},this.handleSaveSetting=o=>{var P=o.switch_id,p=o.status,L=o.type,A=o.qyWeChatVo,W=A===void 0?"":A,ue=o.title,Ue=o.approvers,Me=Ue===void 0?[]:Ue,ze=o.successMsg,Ye=ze===void 0?"":ze,Ke=o.actions,He=Ke===void 0?"":Ke,ct=o.noMessage,Wt=ct===void 0?!1:ct,Vt=this.props.t;V.WY.post({url:Te.editSetting(P),data:{type:L,switch_status:p?"OPEN":"CLOSED",approvers:Me,actions:He,qy_we_chat_vo:W}}).then(Nt=>{L==="prevent_cut_screen"&&(sessionStorage.showPreventHang=p?"OPEN":"CLOSED"),Wt||(Ye?$.default.success(Ye):Nt.data.setting==="true"&&p?$.default.success("".concat(ue).concat(Vt("common.activated"))):$.default.success("".concat(ue).concat(Vt("common.deactivated")))),this.getSetting(),L==="oss_aging_switch"&&p&&this.encryptedSettingRef&&this.encryptedSettingRef.handleSwitch(!1),L==="vod_encrypted_switch"&&p&&this.ossAgingRef&&this.ossAgingRef.handleSwitch(!1)})},this.handleChooseCheckbox=o=>{var P=this.props.t,p=o.status,L=o.switch_id,A=o.type,W=o.title,ue=o.actions;this.handleSaveSetting({status:p,switch_id:L,type:A,title:W,actions:ue,successMsg:P("setting.setUpSucceed")})},this.getSetting=()=>{V.WY.get({url:Te.getSetting(),params:{page_size:9999,page_number:1}}).then(o=>{o.data.list.forEach(W=>{if(W.status=W.switch_status==="OPEN",!Xe.Z[(0,Xe.c)()].showCl&&W.type==="user_view"){var ue=[...W.action_list[0].param.commentOrgin];ue.splice(1,0,"\u624B\u673A\u53F7"),W.action_list[0].param.commentOrgin=ue}});var P={},p=(0,oe.Z)(o.data.list),L;try{for(p.s();!(L=p.n()).done;){var A=L.value;P[A.type]=A}}catch(W){p.e(W)}finally{p.f()}this.setState({advancedSettingsData:P,loading:!1})})},this.handleChooseDocMode=o=>{var P=this.props.t,p=o.status,L=o.switch_id,A=o.type,W=o.title,ue=o.actions;this.handleSaveSetting({status:p,switch_id:L,type:A,title:W,actions:ue,successMsg:P("setting.setUpSucceed")})},this.handleChooseVodMode=o=>{var P=this.props.t,p=o.status,L=o.switch_id,A=o.type,W=o.actions;this.handleSaveSetting({status:p,switch_id:L,type:A,actions:W,successMsg:P("setting.setUpSucceed")})},this.handleDingSelect=o=>{var P=this.props.t,p=o.status,L=o.switch_id,A=o.type,W=o.title,ue=o.actions;this.handleSaveSetting({status:p,switch_id:L,type:A,title:W,actions:ue,successMsg:P("setting.setUpSucceed")})},this.handleCourseClose=o=>{this.handleSaveSetting(o)},this.handleDocumentSetLimit=o=>{var P=this.props.t,p=o.status,L=o.switch_id,A=o.type,W=o.title,ue=o.actions;this.handleSaveSetting({status:p,switch_id:L,type:A,title:W,actions:ue,successMsg:P("setting.setUpSucceed")})},this.handleAdministerScope=o=>{var P=o.status,p=o.switch_id,L=o.type,A=o.title,W=o.actions,ue=o.successMsg;this.handleSaveSetting({status:P,switch_id:p,type:L,title:A,actions:W,successMsg:ue})},this.handleQuotaReceiverClose=(o,P)=>{var p=this.props.t,L=j.ZP.advancedSetting.toggleMessageReceiver(),A={status:o};V.WY.post({url:L,data:A}).then(()=>{P&&$.default.success(p("study.updateSuccess"))}).catch(()=>{$.default.error(p("study.operateFailed"))})},this.handleAddQuotaReceiver=o=>{var P=this.props.t,p=j.ZP.advancedSetting.addMessageReceiver(),L={user_ids:o.map(A=>A.id)};V.WY.post({url:p,data:L}).then(()=>{$.default.success(P("study.operateSuccess"))}).catch(()=>{$.default.error(P("study.operateFailed"))})},this.handleCourseAddUser=o=>{var P=o.status,p=o.userList,L=o.action,A=o.switch_id,W=o.type,ue=o.title,Ue=o.qyWeChatVo,Me=o.origin,ze=o.noMessage,Ye=[],Ke=this.props.t;p.forEach(ct=>{Ye.push(ct.id)});var He=Ke(P?"setting.setUpSucceed":"common.disabledSuccessful");this.handleSaveSetting({status:P,switch_id:A,type:W,title:ue,approvers:Ye,successMsg:Me==="courseNewApproval"?He:Ke("course.operateUserSuccess",{operate:Ke(L==="delete"?"common.delete":"common.addSome")}),qyWeChatVo:Ue,actions:L,noMessage:ze})},this.handleCreateCourse=o=>{var P=this.props.t,p=o.status,L=o.switch_id,A=o.type,W=o.title,ue=o.actions;this.handleSaveSetting({status:p,switch_id:L,type:A,title:W,actions:ue,successMsg:P("setting.setUpSucceed")})},this.renderDingSelect=()=>{var o=this.props,P=o.t,p=o.appType,L=this.state.advancedSettingsData;return p==="e_app"&&L.mobile_ding_disk_choose&&L.mobile_ding_disk_choose.actions&&JSON.parse(L.mobile_ding_disk_choose.actions).length>0?e().createElement(we,{tab:P("advancedSetting.dingNetworkDiskSelect"),key:"4"},e().createElement(vt,{setting:L.mobile_ding_disk_choose,onDingSelect:this.handleDingSelect})):null},this.handleDisplaySetupSubTabChange=o=>{this.setState({displaySetupSubActiveKey:o})}}componentDidMount(){this.getSetting(),this.getEnterpriseInfo(),this.initTable(),this.getEnterpriseExamType()}render(){var S=this.props,s=S.t,i=S.appType,c=S.qyShield,d=this.state,o=d.activeKey,P=d.displaySetupSubActiveKey,p=d.advancedSettingsData,L=d.isVip,A=d.loading,W=d.isLoading,ue=d.whiteList,Ue=d.blackList,Me=d.isShowCreateTab,ze=d.isShowSyncTab,Ye=d.dataInfoDing,Ke=d.dataInfoCustom,He=d.TabType,ct=d.isOldExam,Wt=ue.showRandom,Vt=L!==2&&L!==5&&L!==6,Nt=[],Qt="";p.task_reminder&&(p.task_reminder.action_list.forEach(ht=>{switch(ht.type){case"no_timed_reminder":case"timed_reminder":case"week_timed_reminder":Nt.push(ht);break;default:break}}),Qt=Nt.find(ht=>ht.param.checked==="true").type);var et={course_sharing:!0,quota_receiver:!0,task_reminder:!0,resource_sharing:!0,email_message:!0,onlineCustomerService:c==="false"};return Xe.Z[(0,Xe.c)()].showCl?(i==="wx_app"||i==="fs_app")&&(et.course_sharing=!1,et.resource_sharing=!1):(et.course_sharing=!1,et.quota_receiver=!1,et.resource_sharing=!1),e().createElement(ce.Z,{noPadding:!0,pageContainerParams:{header:{title:s("documentTitle.commonSetting")}},pageTitle:s("documentTitle.commonSetting")},e().createElement("div",{className:"advanced"},A?e().createElement("div",{className:"spin-container"},e().createElement(Z.Z,{size:"large"})):e().createElement(R.Z,{activeKey:o,onChange:this.handleChangeTab},e().createElement(we,{tab:s("learning.learnUpgrade.learningSetting"),key:"1"},e().createElement("div",{className:"tab-container"},e().createElement(R.Z,{tabPosition:"left",defaultActiveKey:"1"},e().createElement(we,{tab:s("advancedSetting.dynamicWatermark"),key:"1"},p.dynamic_watermark&&e().createElement(r,{setting:p.dynamic_watermark_new,onChooseCheckbox:this.handleChooseCheckbox})),e().createElement(we,{tab:s("advancedSetting.audioAndVideoSettings"),key:"2"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.audioAndVideoSettings")),p.prevent_cut_screen&&e().createElement(Ae,{setting:p.prevent_cut_screen,onSwitch:this.handleSaveSetting}),p.audio_video_drag&&e().createElement(Ae,{setting:p.audio_video_drag,onSwitch:this.handleSaveSetting}),p.speed_play_switch&&e().createElement(Ae,{setting:p.speed_play_switch,onSwitch:this.handleSaveSetting})),e().createElement(we,{tab:s("advancedSetting.documentSet"),key:"3"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.documentSet")),p.document_player&&e().createElement($t,{setting:p.document_player,onChooseDocMode:this.handleChooseDocMode}),p.document_duration_limit&&e().createElement(ut,{setting:p.document_duration_limit,onDocumentSetLimit:this.handleDocumentSetLimit})),e().createElement(we,{tab:s("advancedSetting.interactiveVideoSet"),key:"4"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.interactiveVideoSet")),p.interactive_video_progress&&e().createElement(Ae,{setting:p.interactive_video_progress,onSwitch:this.handleSaveSetting})),Wt&&p.document_duration_limit&&e().createElement(we,{tab:s("advancedSetting.checkSettings"),key:"4"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.checkSettings")),e().createElement(At,{setting:p.document_duration_limit,onDocumentSetLimit:this.handleDocumentSetLimit})),e().createElement(we,{tab:s("advancedSetting.securitySettings"),key:"5"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.securitySettings")),p.oss_aging_switch&&e().createElement(H,{setting:p.oss_aging_switch,onSubmit:this.handleDocumentSetLimit,onRef:ht=>this.ossAgingRef=ht}),p.vod_encrypted_switch&&e().createElement(Ae,{setting:p.vod_encrypted_switch,onSwitch:this.handleSaveSetting,onRef:ht=>this.encryptedSettingRef=ht}))))),e().createElement(we,{tab:s("advancedSetting.displaySetup"),key:"2"},e().createElement("div",{className:"tab-container"},e().createElement(R.Z,{tabPosition:"left",activeKey:P,onChange:this.handleDisplaySetupSubTabChange},Ue.mobileLeaderBoardFlag&&e().createElement(we,{tab:s("advancedSetting.mobileLeaderBoard"),key:"1"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.mobileLeaderBoard")),ct&&p.mobile_exam_ranking&&e().createElement(Ae,{setting:p.mobile_exam_ranking,onSwitch:this.handleSaveSetting}),p.mobile_credit_ranking&&e().createElement(Ae,{setting:p.mobile_credit_ranking,onSwitch:this.handleSaveSetting}),p.mobile_integral_ranking&&e().createElement(Ae,{setting:p.mobile_integral_ranking,onSwitch:this.handleSaveSetting}),p.mobile_dept_classhour_ranking&&e().createElement(Ae,{setting:p.mobile_dept_classhour_ranking,onSwitch:this.handleSaveSetting}),p.mobile_trainee_classhour_ranking&&e().createElement(Ae,{setting:p.mobile_trainee_classhour_ranking,onSwitch:this.handleSaveSetting})),e().createElement(we,{tab:s("advancedSetting.popupWindowSettings"),key:"3"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.popupWindowSetting")),p.signs_pop&&e().createElement(Ae,{setting:p.signs_pop,onSwitch:this.handleSaveSetting})),Ue.dingDiskSelectFlag&&this.renderDingSelect(),Ue.courseShareFlag&&et.course_sharing&&e().createElement(we,{tab:s("advancedSetting.courseShare"),key:"5"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.displayCourseDetail")),p.visitor_course_detail&&e().createElement(Ae,{setting:p.visitor_course_detail,onSwitch:this.handleSaveSetting})),(p.resource_sharing||p.resource_download)&&e().createElement(we,{tab:s("advancedSetting.resourceSettings"),key:"6"},!(0,a.xX)()&&e().createElement(e().Fragment,null,e().createElement("span",{className:"advanced__title"},s("advancedSetting.resourceSettings")),et.resource_sharing&&p.resource_sharing&&e().createElement(Ae,{setting:p.resource_sharing,onSwitch:this.handleSaveSetting})),p.resource_download&&e().createElement(Ae,{setting:p.resource_download,onSwitch:this.handleSaveSetting})),e().createElement(we,{tab:s("setting.permissionScopeSetting"),key:"7"},e().createElement(re,{setting:p.jurisdiction_setting,onAdministerScope:this.handleAdministerScope})),e().createElement(we,{tab:s("advancedSetting.printerSettings"),key:"9"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.printing")),p.print_paper&&e().createElement(Ae,{setting:p.print_paper,onSwitch:this.handleSaveSetting})),et.onlineCustomerService&&!(0,a.xX)()&&e().createElement(we,{tab:s("advancedSetting.onlineCustomers"),key:"10"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.onlineCustomer")),p.online_customer_service_switch&&e().createElement(Ae,{setting:p.online_customer_service_switch,onSwitch:this.handleSaveSetting})),(p.course_comment_online_switch||p.course_comment_live_switch||p.course_comment_micro_switch)&&e().createElement(we,{tab:s("advancedSetting.courseCommentSettings"),key:"11"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.courseCommentSettings")),p.course_comment_online_switch&&e().createElement(Ae,{setting:p.course_comment_online_switch,onSwitch:this.handleSaveSetting}),p.course_comment_live_switch&&e().createElement(Ae,{setting:p.course_comment_live_switch,onSwitch:this.handleSaveSetting}),p.course_comment_micro_switch&&e().createElement(Ae,{setting:p.course_comment_micro_switch,onSwitch:this.handleSaveSetting}))))),e().createElement(we,{tab:s("component.practiceAudit"),key:"3"},e().createElement("div",{className:"tab-container tab-container-height-min"},p.course_approval&&e().createElement(e().Fragment,null,e().createElement("span",{className:"advanced__title",style:{marginLeft:32}},s("component.practiceAudit")),e().createElement(yt,{origin:"courseNewApproval",setting:p.course_approval,enterpriseUsers:p.course_approval.enterpriseUsers,onClose:this.handleCourseClose,onAddUser:this.handleCourseAddUser})),p.create_course&&e().createElement("div",{className:"tab-container__padding"},e().createElement(Ae,{setting:p.create_course,onSwitch:this.handleSaveSetting})),i==="e_app"&&p.conversation_course_publish&&e().createElement("div",{className:"tab-container__padding"},e().createElement(Ae,{setting:p.conversation_course_publish,onSwitch:this.handleSaveSetting})),p.video_resource_create&&c==="false"&&e().createElement("div",{className:"tab-container__padding"},e().createElement(Ae,{setting:p.video_resource_create,onSwitch:this.handleSaveSetting})),p.submit_report&&!(0,a.xX)()&&e().createElement(yt,{setting:p.submit_report,enterpriseUsers:p.submit_report.enterpriseUsers,onClose:this.handleCourseClose,onAddUser:this.handleCourseAddUser}))),e().createElement(we,{tab:s("advancedSetting.messageSet"),key:"4"},e().createElement("div",{className:"tab-container"},e().createElement(R.Z,{tabPosition:"left",defaultActiveKey:"1"},et.task_reminder&&e().createElement(we,{tab:s("advancedSetting.taskManager"),key:"1"},e().createElement("span",{className:"advanced__title"},s("advancedSetting.taskManager")),p.task_reminder&&e().createElement(v,{radioGroupDefaultValue:Qt,setting:p.task_reminder,handleTaskReminder:this.handleSaveSetting})),et.quota_receiver&&p.quota_receiver&&!(0,a.xX)()&&!Vt?e().createElement(we,{tab:s("setting.messageReceiver"),key:"2"},e().createElement("span",{className:"advanced__title"},s("setting.messageReceiver")),e().createElement(It,{setting:p.quota_receiver,onClose:this.handleQuotaReceiverClose,onAddUser:this.handleAddQuotaReceiver})):null,et.email_message&&e().createElement(we,{tab:s("setting.messagePushSetting"),key:"3"},e().createElement("span",{className:"advanced__title"},s("setting.messagePushSetting")),p.email_message&&e().createElement(Ae,{setting:p.email_message,onSwitch:this.handleSaveSetting}))))),e().createElement(we,{tab:s("advancedSetting.tagsSet"),key:"tag"},e().createElement("div",{className:"tab-container tab-container-height-min"},e().createElement("span",{className:"advanced__title",style:{marginLeft:32}},s("advancedSetting.tagsSet")),(p.create_new_label||p.tag_select_mode)&&e().createElement(Ht,{setting:[p.tag_select_mode,p.create_new_label],onRefresh:this.handleSaveSetting}))),e().createElement(we,{tab:s("advancedSetting.videoSettings"),key:"transcoding"},e().createElement("div",{className:"tab-container tab-container-height-min"},e().createElement("span",{className:"advanced__title",style:{marginLeft:32}},s("advancedSetting.videoSettings")),p.transcoding_resolution&&e().createElement(fe,{setting:p.transcoding_resolution,onChooseVodMode:this.handleChooseVodMode}),p.transcoding_format&&e().createElement(le,{setting:p.transcoding_format,onChooseVodMode:this.handleChooseVodMode}))),e().createElement(we,{tab:s("leftMenuLists.other"),key:"5"},e().createElement("div",{className:"tab-container tab-container-height-min"},e().createElement("span",{className:"advanced__title",style:{marginLeft:32}},s("advancedSetting.otherSetting")),p.user_view&&e().createElement(Y,{setting:p.user_view,onRefresh:this.onRefreshSetting}),localStorage.getItem("authorityType")!=="1"&&i==="wx_app"&&e().createElement(n,null))),e().createElement(we,{tab:s("studentInformation.memberMessageSet"),key:"6"},e().createElement("div",{className:"tab-container"},e().createElement(R.Z,{tabPosition:"left",defaultActiveKey:"1"},ze&&e().createElement(we,{tab:this.getTabType(He),key:"1"},e().createElement(kt,{dataSource:Ye,loading:W,initTable:this.initTable})),Me&&e().createElement(we,{tab:s("integralMall.selfDefined"),key:"2"},e().createElement(kt,{dataSource:Ke,loading:W,initTable:this.initTable}))))),ze&&e().createElement(we,{tab:s("leftMenuLists.dataSync"),key:"7"},e().createElement(nt,{onChange:this.handleSaveSetting,setting:p})))))}}lt.encryptedSettingRef=null,lt.ossAgingRef=null;var Pt=(0,b.$j)(De=>({appType:De.user.appType,qyShield:De.user.qyShield}))((0,N.Z)()(lt))},9849:function(Ve,Ce,t){"use strict";t.d(Ce,{Ej:function(){return $},kL:function(){return m},T:function(){return ae},NU:function(){return T},FL:function(){return R},fn:function(){return g},bm:function(){return M},jY:function(){return U},Vs:function(){return e},li:function(){return b},Nl:function(){return N},YF:function(){return a},Q6:function(){return j},zW:function(){return V},Zv:function(){return pe},Qg:function(){return G},qc:function(){return Q},Ve:function(){return X},rS:function(){return he},Rh:function(){return re}});var z=t(10237),Z=t(37055),oe=t(38642),te={zaraFlag:(0,oe.UI)("ZARA_H5")};function $(ne,ie){var _e=Z.ZP.StudyProjectList.startStudy(ne);return z.WY.post({url:_e,data:ie})}function m(ne){var ie=Z.ZP.Common.enroll(ne);return z.WY.post({url:ie})}function ae(ne,ie){var _e=ne.courseId,Ee=Z.ZP.StudyProjectList.studyProject(_e);return z.WY.get({url:Ee,params:ie})}function T(ne){var ie=ne.id,_e=te.zaraFlag?Z.m1.getAssessmentProjectInfo(ie):Z.m1.getProjectInfo(ie);return z.WY.get({url:_e})}function R(ne){var ie=ne.courseId,_e=Z.ZP.EnterpriseCourse.addScanCount(ie);return z.WY.post({url:_e})}function g(){var ne=Z.ZP.StudyProjectList.getAccountInfo();return z.WY.get({url:ne})}function M(ne){var ie=Z.ZP.StudyProjectList.projectCertiUrl(ne);return z.WY.get({url:ie})}function U(ne){var ie=ne.courseId,_e=Z.ZP.Courses.like(ie);return z.WY.post({url:_e})}function e(ne){var ie=Z.ZP.EnterpriseCourse.addCommentAndScore();return z.qg.post({url:ie,data:ne})}function b(ne){var ie=Z.ZP.EnterpriseCourse.getCourseComments();return z.WY.get({url:ie,params:ne})}function N(ne){var ie=Z.ZP.EnterpriseCourse.addCommentAndScore();return z.qg.post({url:ie,data:ne})}function a(ne){var ie=Z.ZP.EnterpriseCourse.deleteComment();return z.qg.post({url:ie,data:ne})}function j(ne,ie){var _e=Z.ZP.StudyProjectList.projectStudyRecord(ne);return z.WY.get({url:_e,params:ie})}function V(ne){var ie=Z.ZP.DingSpaceId.getSpaceId();return z.WY.get({url:ie,params:ne})}function pe(ne,ie){var _e=Z.ZP.PlatformCourse.learningUrl(ne);return z.WY.get({url:_e,params:ie})}function G(ne){var ie=Z.ZP.MyExamTask.examIntro({examId:ne});return z.WY.get({url:ie})}function Q(ne){var ie=Z.ZP.MyExamTask.examCheckStatus({examId:ne});return z.WY.get({url:ie})}function ve(ne,ie){var _e=CONFIG.Common.getOperateLog(ne);return formDataRequest.get({url:_e,params:ie})}function X(ne,ie){var _e=te.zaraFlag?Z.ZP.StudyProjectList.changeCustomStatus(ne):Z.ZP.StudyProjectList.changeStatus(ne);return z.WY.post({url:_e,data:ie})}function he(ne){var ie=Z.ZP.StudyProjectList.getProjectReward(ne);return z.WY.get({url:ie})}function re(ne){var ie=Z.ZP.subsidyGz.subsidyCourseSetting(ne);return z.WY.get({url:ie})}},2871:function(Ve,Ce,t){"use strict";t.d(Ce,{$:function(){return R}});var z=t(71194),Z=t(57016),oe=t(57361),te=t(9754),$=t.n(te),m=t(78001),ae=t(37055),T=t(10237),R=function(){var g=(0,oe.Z)($().mark(function M(U,e){var b,N,a,j,V,pe,G,Q=arguments;return $().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return b=Q.length>2&&Q[2]!==void 0?Q[2]:"",N=ae.ZP.autoAssigned.getRuleQuote(),a={org_type:U,org_value:e},X.next=5,T.WY.get({url:N,params:a});case 5:if(j=X.sent,V=j.data,pe=V.success,G=V.data,pe==="true"){X.next=10;break}return X.abrupt("return",!0);case 10:if(!G.list.length){X.next=13;break}return Z.Z.warning({title:m.Z.t("autoAssign.notice"),content:m.Z.t("autoAssign.deleteDesc",{name:b.toLowerCase()}),okText:m.Z.t("common.close")}),X.abrupt("return",G.list);case 13:return X.abrupt("return",!1);case 14:case"end":return X.stop()}},M)}));return function(U,e){return g.apply(this,arguments)}}()},91648:function(Ve,Ce,t){"use strict";t.d(Ce,{Z:function(){return z}});function z(Z,oe){var te,$,m,ae,te;if($="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),te=[],m=void 0,oe=oe||$.length,Z)for(m=0;m<Z;)te[m]=$[0|Math.random()*oe],m++;else for(ae=void 0,te[8]=te[13]=te[18]=te[23]="-",te[14]="4",m=0;m<36;)te[m]||(ae=0|Math.random()*16,te[m]=$[m===19?ae&3|8:ae]),m++;return te.join("")}},86726:function(Ve,Ce,t){"use strict";t.d(Ce,{V9:function(){return Z},H3:function(){return oe},e:function(){return te},F:function(){return $}});var z=t(93485);function Z(m){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],T=[];function R(g,M){var U=(0,z.Z)(M),e;try{for(U.s();!(e=U.n()).done;){var b=e.value;if(b.key===g){T=b.actions;break}b.children instanceof Array&&b.children.length&&R(m,b.children)}}catch(N){U.e(N)}finally{U.f()}}return R(m,ae),T}function oe(m){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],T=ae.find(R=>R.key===m)||{};return T.checked||!1}function te(m){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],T=!1;function R(g,M){var U=(0,z.Z)(M),e;try{for(U.s();!(e=U.n()).done;){var b=e.value;if(b.key===g){T=b.checked;break}b.children instanceof Array&&b.children.length&&R(m,b.children)}}catch(N){U.e(N)}finally{U.f()}}return R(m,ae),T}function $(m){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],T="";function R(g,M){var U=(0,z.Z)(M),e;try{for(U.s();!(e=U.n()).done;){var b=e.value;if(b.key===g){T=b.id;break}b.children instanceof Array&&b.children.length&&R(m,b.children)}}catch(N){U.e(N)}finally{U.f()}}return R(m,ae),T}},69164:function(Ve,Ce,t){"use strict";var z=t(34792),Z=t(48086);function oe(te){te&&te.length>0&&Z.default.success(te)}Ce.Z=oe},65202:function(Ve,Ce,t){"use strict";t.d(Ce,{p:function(){return z}});function z(){return localStorage.getItem("themeColor")||"#516AE6"}},25547:function(Ve,Ce,t){"use strict";t.d(Ce,{Yd:function(){return oe},VX:function(){return $},lK:function(){return m},NP:function(){return ae}});var z=t(88986),Z=t(93485);function oe(T,R,g){var M=0;function U(e,b){for(var N=0;N<e.length;N++){var a=e[N];if(a[T]===R){M=b;break}else a.children instanceof Array&&a.children.length&&U(a.children,b+1)}}return U(g,1),M}function te(T){var R=1;function g(M,U){M.forEach(e=>{U>R&&(R=U),e.children&&e.children.length>0&&g(e.children,U+1)})}return g(T,1),R}function $(T,R,g){T.forEach((M,U,e)=>{if(M.id===R)return g(M,U,e);if(M.children)return $(M.children,R,g)})}function m(T,R){var g;function M(U){var e=(0,Z.Z)(U),b;try{for(e.s();!(b=e.n()).done;){var N=b.value;if(N.id==R){g={id:N.id,name:N.name,children:N.children,parentId:N.parentId};break}N.children&&N.children instanceof Array&&N.children.length>0&&M(N.children)}}catch(a){e.e(a)}finally{e.f()}}return M(T),g?(0,z.Z)((0,z.Z)({},g),{},{children:g.children instanceof Array?g.children:[]}):{children:[],id:"",name:""}}var ae=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",U=[...R];function e(b){Object.keys(g).forEach(N=>{var a=N,j=g[N];b[j]=b[a],b[M]=b[M]&&b[M]instanceof Array?[...b[M]]:[],b[M].length?b[M].forEach(V=>{e(V)}):delete b[M]})}return U.forEach(b=>e(b)),U}},26885:function(Ve,Ce,t){"use strict";t.d(Ce,{mw:function(){return b},kr:function(){return N},w8:function(){return a},Sk:function(){return V},$f:function(){return pe}});var z=t(34792),Z=t(48086),oe=t(88986),te=t(57361),$=t(9754),m=t.n($),ae=t(76651),T=t(78001),R=t(37055),g=t(10237),M=localStorage.getItem("corpId"),U=(G,Q)=>{wx.config({beta:!0,debug:!1,appId:G.corpId||localStorage.getItem("corpId"),timestamp:G.timeStamp,nonceStr:G.nonceStr,signature:G.signature,jsApiList:["openDefaultBrowser","innerSaveWebPerformance"]}),wx.ready(()=>{Q&&N()}),wx.error(ve=>{console.log("error",ve)})},e=(G,Q)=>{wx.agentConfig({corpid:G.corpId,agentid:G.agentId,timestamp:G.timeStamp,nonceStr:G.nonceStr,signature:G.signature,jsApiList:["openDefaultBrowser","selectExternalContact","selectEnterpriseContact","selectPrivilegedContact","createChatWithMsg","openEnterpriseChat","openExistedChatWithMsg"],success:()=>{Q("success"),(0,ae.Qm)()._store.dispatch({type:"user/setWxWorkApiFlag",payload:{wxWorkApiFlag:(0,ae.Qm)()._store.getState().user.wxWorkApiFlag+=1}})},fail:ve=>{ve.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},b=(G,Q,ve)=>{window.wx.openEnterpriseChat({userIds:G.join(";"),groupName:Q.title,chatId:"",success:function(he){var re=he.chatId;window.wx.invoke("openExistedChatWithMsg",{chatId:re,msg:{msgtype:"link",link:{title:Q.title,desc:Q.desc,url:Q.url,imgUrl:Q.imgUrl}}},function(ne){ne.err_msg=="openExistedChatWithMsg:ok"&&ve&&ve(re)})},fail:function(he){he.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},N=function(){var G=(0,te.Z)(m().mark(function Q(ve){var X,he,re,ne,ie,_e,Ee=arguments;return m().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return X=Ee.length>1&&Ee[1]!==void 0?Ee[1]:()=>{},he=R.ZP.util.getAppSignature(),re=window.location.href.split("#")[0],ne=ve||R.ZP.enterpriseId,Ze.next=6,g.WY.get({url:he,params:{enterprise_id:ne,url:re,batch_id:""}});case 6:ie=Ze.sent,_e=ie.data,e(_e,X);case 9:case"end":return Ze.stop()}},Q)}));return function(ve){return G.apply(this,arguments)}}(),a=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(navigator.userAgent.toLowerCase().indexOf("wxwork")>-1){var X=R.ZP.util.getCorpSignature(),he=window.location.href.split("#")[0];g.WY.get({url:X,params:{enterprise_id:R.ZP.enterpriseId,url:he,batch_id:ve}}).then(re=>{var ne=re.data;U(ne,Q)})}else Q&&N()},j=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=CONFIG.util.getSignature(),X=window.location.href;request.get({url:ve,params:{corpId:M,url:X,uuid:""}}).then(he=>{var re=he.data;U(re,Q)})},V=G=>{var Q=G.userIds,ve=Q===void 0?[]:Q,X=G.deptIds,he=X===void 0?[]:X,re=G.mode,ne=re===void 0?"multi":re;return new Promise((ie,_e)=>{window.wx.invoke("selectPrivilegedContact",{fromDepartmentId:0,mode:ne,selectedContextContact:0,selectedOpenUserIds:ve||[],selectedTickets:he||[]},Ee=>{Ee.err_msg==="selectPrivilegedContact:ok"?(typeof Ee.result=="string"&&(Ee.result=JSON.parse(Ee.result)),ie(Ee.result)):Ee.err_msg==="selectPrivilegedContact:cancel"&&_e("cancel")})})},pe=G=>{var Q=G.type,ve=Q===void 0?"employeeRange":Q,X=G.result,he=X===void 0?{}:X,re=G.user,ne=re===void 0?{}:re,ie=G.reserveUser,_e=ie===void 0?[]:ie,Ee=G.rangeType,Be=Ee===void 0?"all":Ee,Ze=G.hasDefault,Ne=Ze===void 0?!0:Ze;return new Promise($e=>{var je=he.userList,Je=je===void 0?[]:je,Fe=he.selectedUserCount,Re=Je||[];if(ve==="employeeRange"){var Qe=ne.unionid,qe="";!Je.length&&Fe?(Ne&&(Re.push({id:Qe,unionid:Qe,openUserId:Qe}),he.userList=[{id:Qe,unionid:Qe,openUserId:Qe}],he.selectedUserCount+=1),qe=!0):qe=!1;var Ge={dept:[],post:[],group:[],user:Re.map(Le=>(0,oe.Z)((0,oe.Z)({},Le),{},{unionid:Le.openUserId,id:Le.openUserId,user_id:Le.openUserId,source_type:"wx_sync"})),classes:[],cluster:[]};Be==="onlyDeptUser"&&(Ge={dept:[],user:Re.map(Le=>(0,oe.Z)((0,oe.Z)({},Le),{},{unionid:Le.openUserId,id:Le.openUserId,user_id:Le.openUserId,source_type:"wx_sync"}))});var pt={isShowType:qe,qyWeChatVo:JSON.stringify(he),rangeList:Ge},at=he.selectedUserCount-Ge.user.length;at>0&&(qe&&Ne?Z.default.warning(T.Z.t("component.selectedErrorTips",{count:at})):Z.default.warning(T.Z.t("component.selectedErrorTips2",{count:at}))),$e(pt)}if(ve==="supervision"){Je&&(Re.find(Le=>Le.openUserId===(_e[0].unionid||_e[0].user_id||_e[0].name))&&(he.selectedUserCount-=1),Re=Re.filter(Le=>Le.openUserId!==_e[0].unionid&&Le.openUserId!==_e[0].user_id&&Le.openUserId!==_e[0].name).map(Le=>Le));var gt=Re.map(Le=>(0,oe.Z)((0,oe.Z)({},Le),{},{unionid:Le.openUserId,id:Le.openUserId,user_id:Le.openUserId,source_type:"wx_sync"})),Dt={qyWeChatVo:JSON.stringify(he),user:gt},yt=he.selectedUserCount-gt.length;yt>0&&Z.default.warning(T.Z.t("component.selectedErrorTips2",{count:yt})),$e(Dt)}if(ve==="normal"){var Et=Re.map(Le=>(0,oe.Z)((0,oe.Z)({},Le),{},{unionid:Le.openUserId,id:Le.openUserId,user_id:Le.openUserId,source_type:"wx_sync",qyWeChatVo:JSON.stringify(he)})),Zt={qyWeChatVo:JSON.stringify(he),user:Et},vt=he.selectedUserCount-Et.length;vt>0&&Z.default.warning(T.Z.t("component.selectedErrorTips2",{count:vt})),$e(Zt)}})}},4412:function(Ve){Ve.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAACPCAYAAAD0gYXiAAAW/ElEQVR4Xu2dCZAcV3mA/9fHaGZ2V9qVdlejvbQ7O7NaWdqNTbgxlmVbxkeME3AcHJwqKhCC44AJV0zZjg8ScwRDqLIMwUnsJEAKF4aCGEIigyVjAthQMTLWbcnyCmmtY6/Znav7vT/190yvenp7prtHM5Lm6NLUaHve1f/X//W6+zWD5lazEmA1O/LmwKEJr4ZPgia8JrwalkAND72peU14NSyBGh56U/N8wkNE6ZVXXrlIUZQrEPG5vr6+H/tsomLFm/A8iHJ6enowlUptYYxdwTm/HABWIaJZ89uqqn4sEokc8tBURYs04TmIc2ZmpiOTyVwmhLiCgAkhYlTMBObwnQaALwaDwfu7u7vnK0qoRGNNeDkogZmZmTdrmmZoFyL+rhBCLgbMCs8G8igAfHJgYODfGWOLqlktmA0JDxHZ9PT0GCJuAQCC9VZEbHGCYgJ00rpimggAzwohbhsaGvp5tcBRuw0Hb3p6+osAcBMiribhu0FxBJRKA2Q1wOWtBfVtZUnzvp7JZG5ft27db6sBsaHgzc7OXiuEeKIYtKJmUteBvTwBbM8BkPYeBPbKEQBZBn3zm0G77GJAVTHYOIFmjJEP/AwiPjA0NES+sWJbw8BDRHV2dvY3iDhSwmflANDn2KsAew4YwNj+l4Fls45CxxXLIft7l4N+0RggnHZzDifIywDw8Wg0+q1K0WsYeHNzcx/lnH++aNQ4MwewZz/A7gM5aHMJXzIWg32Quf4q4P1rSkWlwBjbAQC3RaPRX/vqwKFwQ8BLJBLdnPN9ALCiQOt+OwnwzLMAu/fnNK0Cm/a634Hs1ZeBaGtZYkpNbWSMcUT8J0S8Kx6Pnyi324aANzc391VE/LMCU6ZzwPu+ADB5vFzZFa2HywKQvfxiyL719QCKAkKIxbI2k70tHo9fWe4A6h7e9PT0RbIsP2fmbabZFD/6CcA3v1eu3DzVEys7IHPdFaBtGClmSlOyLK8sN5Cpe3hzc3M7EPGSAl+XmAdx52cBkilPEM60kB4bhPR1W4BHupZAFEJsGRkZebKcPuoaXjKZ/ENd1x+zBynia48D7vhZOfIquw5KDFI3vxOyF8QLTCgifjYej99eTsN1C29iYiLU0dGxWwixtgDexFHgn/oCgKj67NUSHtqFGyB50/WG9lkmtn8Vi8Ve24RnkcDCwsJdQoj77Ikz//yXAfccKEdWZ1xHtLZA4s4PLWaD+bGJYDDY3dfXd8pvB3Wpeclksg8R9wghjHjdBCh+tRP4Q4/6lVFFy89/+H2gR7rsacQfxeNxw7z72eoV3teEEO+2mCbArAbanZ8BODnlRz4VL5u+9nLIXPIGu+l8OBaLvd9vZ3UHT9O0N2Wz2Z/SlQOryeTffxLEt3/gVz4VL6+NRCH53nfZ4b0ci8WG/HZWV/AIWCqV+gUivq4gGZ6ZBe2TnwbIZPzKpyLlWVsLKBvXgzq2HpT1cTiSSoKQcqK3WId4LBbz5YzrCl4qlXoPIj5ii+ZAe/jrIP73uYqA8NSIqoIyGgN1/AIDmDzYD0ySFqtO7t4DyWWBgpSBMXbL8PDwVzy1ny9UN/BOnDjR1trauhcR11i1Thw8DNqn6BJeFTfGDEAmLALHAqfh2HuenZyEqVSqwHQyxh4fHh6+wc8o6wZeJpMZFULstqcG2fu/BGLfQT8y8VRW6u4EZWx9DtjGUZDaWkvWo3HxiaOgvbAb0ocnYObqSxfNZn7M08PDw52MsdMToS4jqRt4dJypVGoCEftMX0JCyX5uKyBdNTjDjbWEQdk4etoURrpdW+RT06C/sBu0nbsNaDgzmwPGGCT+5q9AhJYV+D1Jkt4QjUafdW243swmHU8mk3mEc/4eKzz+xJOgP/6EV3mcLqcqoKyLGT7L8FvRtQV+y6lBkUqDvmsvaDt3GbDEkWNF+03e/A7QxkYLTKckSXdEo9H7vQ623jSPcruvmfDom3xeli79uG0MQF7bn4sIyRSOxoFZggqn6sg56PsPgfbCLtB37gb9wEEA7s3qZd/4Gkj9wVX2iertsVhss9tQzd/rCh7dVJROp49RyrAIUAhIf/AOgIXkEpmwzpWgjl0A6vh6UDeuB2lFm7vf+u0k6C/sypnCXXsB6GakMjaxqgMSn7hl0Wzm/V4mHA6v7OnpWTpYhz7qCh4dXzqd/rUQYtxqOrWtj4L45fPAwqGc38oHGvKa1a5iF5QjGj4rZwpxasa1jtcCidtvBd6+vMDvAcDVsVjsh17aqEd4DyDiRwqumu89AIHWVlCGB139FqYzoO3al4O1czeIiarctQeiYwXMf+zPARWlwHQyxu4eHh6+r1HhXY2IPyhIGRLzEF7tHB0afuullw2fZfguSis49yK7MyqTooBlfL3d5yWDweBob2/vhJfG607zEDGcyWSmhBBGHG5qYFDTQW5fYciEH51cjAj1F/cCnqUr6iYQPToAyQ/8id3f0d/3Dg8P3+MFHJWpO3h0UKlU6ilENLJgUwPZ7n3An33eMIV46txdWaAcL3nbe4H35PytxUJMhEKhUa/BSj3DuwMA/tbq9/hzz4O29RGvJ3XVymlveA2kb7hmidYxxv54aGjoP/x0XJeal81mX885p6sLp4U0vwAZShlOP1fnR04VKYvBZZC8/VYQLWG71v00Go1e7LeTuoSHiHI6nT6BiB1W05S59wHAQ6/4lVHFymffvgWyl7zRrnVCkqTXr1279ld+O6pLeCSEdDr9OCK+w6p92reeAP7ENr8yqkh50bUKUh//AGD+0pDlOt6/DA4OvrecTuoZ3i2I+JDV74ld+4yJ6nOxpd93E/D1udv+LGOaC4VCI6tXry7rXvt6hhdDxP0F+Z6uQ/bL/wp0I9LZ3PhoDDLvf/eSG24B4K/Xrl37uXLHUrfw8qbzkBBi0BaSg9i9H/RvfAfwCD2FXN2NzGTmE7eA6O60wzswMDCwgTHm/OyYh2HVO7yHEfF99tsijL85B77jZ8C/818A8wseRFVeEX3TG0H7/dzVA+vdbLIsX9/b23tGD0vUO7y3AcB3rbMtNp8DuJAE/t3/BvHjZwAsT/OUh6qwFraEIXPHhwBDQeMH82khSZK29fX1lf10kNlLXcPLm86YEIIu6F1XMFltyQENwR6dBPHN7wH+Zs8ZccOOdhDrhkGsiwKPRwFaw3at04UQF65du/bFM+qoXqfHnISSTqe3cM7/AQAuWKJ9FpMmdu4yIMKrHp95DAVBjEQB1w0DrouB6Fppjyjtvu7B/v7+D54pOKpf95pnFRIiKqlUilKIv0fEZQUzMFZN5BzEj54BpJzQfrFVlgGjA4CjMYDRGIj+XgCJlXyU2RIwnaJn4vv7+ysyudpQ8EiIx48fv0SW5e2yLDNZNtbJKb6cBz3H950fAhw6DEA52mgMMD4EEAgUmELHgMg6NZf/P2PsL3t7eyuWaDYUPFr07dSpU78EgIsMs8MYKIoCkiQVXU/Ffithqb+dfmOMzQohtgPAtp6enq/Q8+iVMJkNZzZPnTpFz6V/1S48gkdaSDCLmVIf0DTG2M+FEE/SZ9++fc9u3rxZrxQwazvnjeY99dRTfYFAYGtbW9vbq3KgjEF3d7cBqUhAA5xzWL58+aImegFGVhcAdiGiAUuSpO1na/G48wLe9u3b3wQAtPRhpq2tzXiStdLbihf2Qks4DPCW1wFYnhswfd7x48cNeAS3vb0dWlpaigYhuq6nZVmmxXC2EbSurq7qT9U4COScw3v66affwzknX7BMVdXD1YCnpDLQ/eCjwNIZwN41ADdeBzASXRTH/Pw8zM3NFYgnEAhAR0cH0Dcl15lMBpLJ5MmTJ092ptNpMrGU/N+8efPms7ZEo53fOYP32GOPyd3d3TQp+xFzUNWC1/nDHbDsucIFh/CijQDvvAZ4+wqKQAumrqxCUlUVNE0zdmWz2cPz8/OLloEx9gIAXL9p06azvlDqOQtY7rnnHunSSy/9PgBcZRNUxTUveGIKVv3j152voCsKzNz2p7AQzk1fuW12ePnyJxljV27atOn/3OpX+vdzonkvvvhia3d3t7G4l3Wylv4UQhSMyWuobrZla48azIEz/hUu7GbUsUSY1vEUCfux4G7s/Pg553eOjY39XaXhuLV3TuAdP368VZKkxBJB2+Ybi4ErCsqlvh2O3/6LwW0oeKR5kUhkEZ5ViE55lpPQvOyjtszczX4ieKlvnvlOE9rW+rquN47m0ZrOU1NTxgPi9qklN9NlN7VeoLhpsFubbvUbFl4pWE5w/cAqVd/LSeK1PgB8eHR09EtuPqrSv58Tn0eaNz09nbGbSyfzWUkhu2mQV1Nqb4cxduu6deseqjQct/bOKTwnc1XM/7kJ1ouWlmrbS/1iJ1LDwvNiNq1lstksLCwsFCxAav5OZ+JKkEDqWuV40lLd2dn8c+GWO6cpqKFpMZpNcfN/Rfx0Y2nezMyMY8BSyqfpug4nT54sak2W/2YftP3nNsDNbwG45jKA4Onkm9qluuZsiVMjy5YtA5pR8QrQUq4x4fnxaclkcskcpAlB1nRYvfXfgCXyU41trYDXvw3gTa81rnRT3ZmZ0k+1kvaFw7l7TooBdNI8MpvxeLxxfN7s7OxiwOLVF5HZm5pyvoNg5Y5fQOjpXyxVqIFeEDdeB6+2BJeYWnth0rpgXluLBVNOY21IeG5BiFN0SLP/pEXWLTCXgE7SOt35InXihmtgbr3xLqeiG12QJa2zX1UvNkarBjYcvLm5uSWa5zWHo0s0dO3NFKCcWAApf+OsPemn5YG17s4lZtBuFgmaFxNeJJ1pLLNphVeOBpYRVJT0ZX5SFIeyjQfPtGHFkmcvmlhKW5yCCy9tepk8sJVpwiulgaUEWi5AL2ay1Alg+a2x4CUSicU8z4vw3cykn6kvN2iUtDu9haRYPURsLHjz8/OuAUu5c51e8jQ3gMVOliLW4dbh4eHGyfOs8Lxqnt2EeQkySmlsBes3FryFhQVD87wI0EmT/GhOJTW4SL+NCc+rLzuLkaNjvudysjQePK/5nR9z6SdiLbd/ez0KWBrK55HZdMvzKqVtXn2qnxzQaoqFEI0FL5lMlp0q+PGT5YLz0ofZNs1tDg4ONk60WQyeqY1+8iy73/RjZksFQ141seHgpVKponmek7n0E12WW9/Bl5nnkmMQY9HOxtI8Kzy/gUO5vrAUHC9a5lQ/f19oY8FLp9OeZ1is/qccDfSajpQDkNomszkwMFB/Pm9qaoqWIvwLXdcv0TSti3N+Qtf1n65Zs+bGcoVVqXnMUhrs5SSxBix1BY9WXkgmk1/inN+iaRqjm4esn56eHs/JcKWEXO5Mi1vECgD1pXnpdHor55w0rgCa+Xdvb6/r8hdO5s5LCF8Kkpf6fhP9uoKnadrFiPi0k8ZZ4fkVkh8zWyVIxj0u5rgpnaEPIj7POf/nVCr16IYNG87ak7JVuWOac/4NXddvKqZ1tJ80z9zcoJQC4TVSPVM/SbcF0scEZn7TvTQWiK/quv6h0dFR3+9/LchJPP5RFXhCiCOapvUWg0cH7GQ2ywVRbfNKa7XQx7zxqRRAIQQ9IHrH+vXrP+2RQdnFqgKPc57RdT1QSvP6+ow3pS2aIDftc9PSatUnaOaiAh7hEWQC+K4NGzZUVQOrAs9N8whqf3+/r4DFiw/zUsZPCkBlzTuoi4FzMp/5sq8yxmLV9IFVgefm88hsmprnxxd50S4v/tErZLvWlQBV4AstfvCD4+PjD5ZtF10qVgWel2hzYGDAVfO8gPCrSV7AmWVCoZDxWLSLjzNuALaXyWvfk+Pj41tqCh4N1i3Pc4JXbsBSLcjmKkhWMHZQJcAR0KPj4+Onw+oKU6yK5uUhlJxhIXhOAYsJ0OtsSLHyXudDS/XX2tq6RKtcYC1qIJVDxOzY2FjuxbBV2KoCj9Yq2bdvX08mkxlub2+/MhAI0HrKcSFEq6Zp85qm7R8cHHwNvXnkfNM26wllDVa8+jurliLiSVVVLxwZGTnKGDu9CEyFQFYU3sGDB1enUil68wMt8VTyjIvFYh+VJMlYMtgKsJQmeAluvPjAUoGPtT49bGn3eU6aV2wfALzIGKP1remugcOhUGh/NBot6wUYTrzPGN7+/fuXCSGGhBAxWZZLv3TVMoKWlpb+SCRyFyK2Wk2c3yvopcB7CU6c6pv7rMl5Mc1zSiFMmIyxR1VV/R+b4OcQ8SVJkg7F4/HF+3jKUcay4U1OTraQliHigBAiN+HnsplrXZqPZ7W2tna2t7dfyxgjB7jYhk+YdAwsv6xU7jt3hVSi/yO1i8AQkPYtlhUCpdw+WmcbGa23Y5RHkauX39/W1tZOV0j85nmIOK0oyq2SJKVMsViPX5IkwRh7hbQxEomU9WIH3/Bo6an5+flhxljkfFhgXJIkhTGmIKKa+5ZUxoTxjUjfqJLwcx+mInIFABWdiwCC8bsiBCpC5yrtFwiK4JoqBCgCudrR3t4XiUQu5JwzH34PJUn6dCAQ+InbCZ1bRwgnU6nUS34Tes/w6CCPHDkyiIg9jM7sEhvNoFg3Mj/Wrdjv9v3FurC2xzmXA4EAaYZKH0lSjf9LElOE0FXOCV4OKM+DBAEqMlS4pqkCqB6oIHiuDRSK4Ej7FeRC5ZyrkcjqkY6OjnUmwFLpApEAgIdVVf2GOX4vx0/HTqlFNBo9xBjztKyxJ3iTk5PdmUymPxAIOK/x63J6eYVlP0gPZy1ZSNIIVQimShKqTFEMCKRxBkSU6NvQQAOeAZOrKDFF17QAlWGkfQRRz50A9OEoVBBC4VxQGaW9fUV/Z+eqDRSIFcv7EPEUY+yBcDj8o3JO1vzkty7L8pFIJHLc7fhLwiNtm5yc7GOMeQ5E3Dqsxu9kOjmXVEniqiQRLPpwVbAcPGOSPA/UMKOcq8hIM3mA/i8AjH2L4AwN5CqBQ2qHG54zoUhysre3p0VRlI1CiGFd1+nlitOc85cA4KlgMEjvBvL0gno3OSBiIhKJHCmlhUXhHT16NBwOh1dns9lCm+fW6zn4nbEgkySNTFyAS5IqcQNeAFGoTJVU1ISqaVqAwOqY00oqC3mQBBck0JBDGplIyoxRADGvBINzKmNz4XD4rF1gtYovEAjoyWTy1WIvAXaER6+rnpqaoveqeDKr54DXki51XVYJoCzLAdJCxpgqRCaQ00IyfVyWJJkjIhdCaEJkNQA1raqBZCgkJ4U1RzkfDig/hlAohKFQaIoxtkSjl8BBxJZkMrmc6iaTSUd44XDYcbbALF/sd1MmfsvZZenUfjqdljVNUyUpJMOy/EmXAQyQYeRcDwaDi0FANfq3yqsax9/Z2TnLchZhcSuAMzExEWpvb28rBo0maq0brQHmZzPrF6tnHnSzf2el6e7unmOMLeaNi/DIDyQSiRV+YDTLnn0JtLW1kQYay80b8PKzE8tnZ2cdZ0oSiYSj+Wxrayswn2Y5r/vNQzfzxnyOtEQizf5Py7+lpYV3dHSQBhrTRXDo0KHgihUrqnbp4uyfn/XdI63bNjQ0lDbg0ZRXV1eX5yM+caLwxYBe65Zbzz6wctspt9752D+9r4gmY5Vjx47lVgm1bWvWrCkwi8eOHTNgF9vvmb7Hgs3+S8pfI3i0Oqjh6w4cOOBJrLFY4Qp6Zj37fk+NWQo1+/clf2Fonl8hN8ufHxIgeNK9995bMJq77777rI6u2X958q+Z6a+zejbVSGdNeDUCymmYTXhNeDUsgRoeelPzmvBqWAI1PPSm5jXh1bAEanjoTc1rwqthCdTw0Jua14RXwxKo4aE3Na8Jr4YlUMNDb2peE14NS6CGh97UvCa8GpZADQ+9qXlNeDUsgRoeelPzmvBqWAI1PPSm5jXh1bAEanjo/w+0S4IKs9Wq0AAAAABJRU5ErkJggg=="}}]);
