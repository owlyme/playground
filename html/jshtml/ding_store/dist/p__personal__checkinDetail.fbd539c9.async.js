(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[7830],{30311:function(Ee,Q,e){"use strict";var M=e(22385),l=e(31097),O=e(12924),g=e.n(O),u=e(8812),I=e(28216),$=p=>{var b=(0,I.v9)(P=>{var E=P.advancedSetting;return{themeColor:E.themeColor}}),S=b.themeColor;return g().createElement(l.Z,{placement:"top",title:p.name},g().createElement("span",{className:"cl-table__cell-arrow",onClick:p.onClick},g().createElement("span",{style:{color:S}},p.name),g().createElement("span",{className:"cl-table__cell-arrow-icon"},g().createElement(u.Z,null))))};Q.Z=$},30389:function(Ee,Q,e){"use strict";e.d(Q,{Z:function(){return K}});var M=e(62029),l=e(20228),O=e(11382),g=e(12924),u=e.n(g),I=e(91768),$=e(80991),p={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},b=e(62615),S=e(52670);class P extends u().Component{render(){var r=this.props,t=r.values,c=r.mode,d=r.onlyChooseDept,n=r.reserveUser,a=r.t,i=r.orgProps,s=r.rangeAuth,o=r.projectId,h=r.onCancel,f=r.onlyCreateUser;return u().createElement($.l0,{className:"cl-form"},u().createElement($.gN,(0,M.Z)({component:b.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:a("common.visibleRange"),defaultFieldList:t.employeeRange,validate:S.FI,mode:c,rangeAuth:s,onlyChooseDept:d,onlyCreateUser:f,orgProps:i,reserveUser:n,projectId:o,onCancel:h,qwTicketShow:!0},p)))}}var E=(0,I.Z)()(P),_=e(18329),m=e(34773);class N extends u().Component{constructor(){super(...arguments);this.initRefFormik=r=>{this.refFormik=r},this.handleBeforeCreate=()=>{var r=this.refFormik;r.submitForm(),r.runValidations().then(t=>{if(!Object.keys(t).length){var c=r.state.values.employeeRange,d=(0,m.b)(c.rangeList),n={qyWeChatVo:c.qyWeChatVo,id:this.props.actionId,isAll:c.rangeType,groupIds:c.rangeType===2?d.groupIds.join(","):"",departmentIds:c.rangeType===2?d.deptIds.join(","):"",userIds:c.rangeType===2?d.userIds.join(","):"",postIds:c.rangeType===2?d.postIds.join(","):"",clusterIds:c.rangeType===2?d.clusterIds.join(","):"",qy_we_chat_vo:c.qyWeChatVo};this.props.onCreate(n)}})},this.handleBeforeCancel=()=>{var r=this.props.onCancel;r()}}render(){var r=this.props,t=r.visible,c=r.initialParams,d=r.isLoading,n=r.tipInfo,a=r.mode,i=r.onlyChooseDept,s=r.reserveUser,o=s===void 0?[]:s,h=r.t,f=r.title,y=r.orgProps,R=r.rangeAuth,H=r.projectId,A=r.onCancel,G=r.onlyCreateUser,x=r.size;return d?u().createElement(O.Z,{size:"large"}):u().createElement(_.ZP,{wrapClassName:"cl-employee-selector-modal",visible:t,title:f||h("component.changeUser"),okText:h("common.ok"),cancelText:h("common.cancel"),size:x,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},d?u().createElement(O.Z,{size:"large"}):u().createElement($.J9,{ref:this.initRefFormik,initialValues:c,render:D=>u().createElement(E,(0,M.Z)({},D,{mode:a,rangeAuth:R,orgProps:y,onlyChooseDept:i,onlyCreateUser:G,reserveUser:o,projectId:H,onCancel:A}))}),n&&u().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},n))}}N.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var K=(0,I.Z)()(N)},74525:function(Ee,Q,e){"use strict";var M=e(57361),l=e(34792),O=e(48086),g=e(9754),u=e.n(g),I=e(12924),$=e.n(I),p=e(91768),b=e(28216),S=e(92592),P=e(5430),E=e(10237),_=e(84874),m=e(16239),N=e(38642),K=e(28963);class C extends $().Component{constructor(t){var c;super(t);c=this,this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.initCode=()=>{var d=this.props,n=d.type,a=d.isProjectShare,i=d.isCommodityExchange,s=d.userInfo;["wx","weixin"].includes(n)?n==="weixin"&&s.appId==="9005"?this.initOtherCode():this.initWXCode():a&&n==="ding"?this.getProjectShareUrl():i&&n==="ding"?this.getCommodityExchangeUrl():n==="fullWebLink"?this.initOtherCode(this.props.option.scene):this.initOtherCode()},this.getCommodityExchangeUrl=()=>{var d=this.props,n=d.t,a=d.appType,i=d.orderId,s=this.props.option.scene,o=localStorage.getItem("uid");if(!m.Z[(0,m.c)()].showCl||a!=="e_app"){var h={deliverUserId:o,orderId:i,flag:"exchange"};S.toDataURL(JSON.stringify(h),{width:500}).then(H=>{this.setState({img:H})}).catch(()=>{O.default.error(n("integralMall.qrCodeFailed"))})}else{var f="/pages/messageRedirect/messageRedirect?".concat(s),y=encodeURIComponent(f),R="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/appId=".concat(this.appId,"&pVersion=1&miniAppId=").concat(this.miniAppId,"&packageType=1&page=").concat(y,"&corpId=").concat(this.props.userInfo.corpId);this.getShortLink(R).then(H=>{S.toDataURL(H.data.short_link,{width:500}).then(A=>{this.setState({img:A})}).catch(()=>{O.default.error(n("integralMall.qrCodeFailed"))})})}},this.getProjectShareUrl=()=>{var d=this.props.option.scene,n=encodeURIComponent("/pages/messageRedirect/messageRedirect?".concat(d)),a="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(n);this.getShortLink(a).then(i=>{this.initOtherCode(i.data.short_link)})},this.getShortLink=d=>E.WY.post({url:P.ZP.Common.getQrUrl(),data:{link:d}}),this.initWXCode=(0,M.Z)(u().mark(function d(){var n,a,i,s;return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return n=c.props.option,a=n.scene,i=n.flag,h.next=3,E.WY.post({url:P.ZP.createWxCode(),data:{flag:i,scene:"".concat(a,"&enterpriseId=").concat(P.ZP.enterpriseId),enterprise_id:P.ZP.enterpriseId}});case 3:s=h.sent,c.setState({img:s.data.wx_code,linkUrl:"data:image/png;base64,".concat(s.data.wx_code)});case 5:case"end":return h.stop()}},d)})),this.initOtherCode=function(){var d=(0,M.Z)(u().mark(function n(a){var i,s,o,h;return u().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(i=c.props,s=i.type,o=i.fsUrl,y.t0=a,y.t0){y.next=6;break}return y.next=5,c.handleScanCode();case 5:y.t0=y.sent;case 6:h=y.t0,s==="fs"&&o&&(h=o),c.setState({linkUrl:h}),S.toDataURL(h,{width:500}).then(R=>{c.setState({img:R})}).catch(()=>{O.default.error(c.props.t("personal.failedGenerateCode"))});case 10:case"end":return y.stop()}},n)}));return function(n){return d.apply(this,arguments)}}(),this.handleScanCode=(0,M.Z)(u().mark(function d(){var n,a,i,s,o,h,f,y,R,H,A,G,x,D,F,j,ae,ge;return u().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(n=c.props,a=n.type,i=n.userInfo,s=n.universalFn,o=c.state.wxH5Url,h=c.props.option,f=h.scene,y=h.pc_url,R=y===void 0?"":y,H=h.mobile_url,A=H===void 0?"":H,G=h.pc_type,x=G===void 0?"":G,D=h.mobile_type,F=D===void 0?"":D,j=encodeURIComponent("/pages/messageRedirect/messageRedirect?"),ae=encodeURIComponent(f),!s){Z.next=12;break}return Z.next=8,c.getShortLink((0,N.jr)({pc_url:R,mobile_url:A,pc_type:x,mobile_type:F}));case 8:return ge=Z.sent,Z.abrupt("return",(0,K.fZ)(ge.data.short_link));case 12:Z.t0=a,Z.next=Z.t0==="app"?15:Z.t0==="ding"?16:Z.t0==="fs"?17:Z.t0==="weixin"?18:19;break;case 15:return Z.abrupt("return","".concat(f,"&fromApp=true"));case 16:return Z.abrupt("return","dingtalk://dingtalkclient/action/open_micro_app?corpId=".concat(i.corpId,"&appId=").concat(c.appId,"&miniAppId=").concat(c.miniAppId,"&packageType=1&pVersion=1&page=").concat(j+ae));case 17:return Z.abrupt("return","https://applink.feishu.cn/client/web_app/open?appId=".concat("cli_a0aa5e0fe5f8500d","&path=").concat(encodeURIComponent("/index.html"),"&").concat(f,"&appType=lark"));case 18:return Z.abrupt("return","".concat(o,"/#/pages/login/login-we-com/index?appType=weCom&corp=").concat(i.corpId,"&").concat(f));case 19:return Z.abrupt("return","");case 20:case"end":return Z.stop()}},d)})),this.saveQrcode=()=>{var d=this.state.img,n=this.props,a=n.type,i=n.t,s=n.userInfo,o=document.createElement("a");o.download=i("setting.Qrcode")+new Date().getTime(),o.href=a==="wx"||a==="weixin"&&s.appId!=="9005"?"data:image/png;base64,".concat(d):d,document.body.appendChild(o),o.click(),document.body.removeChild(o)},this.generatePoster=d=>{var n=d.linkUrl,a=d.type,i=d.activeKey,s=d.option,o=this.props.universalFn;typeof o=="function"&&o({linkUrl:n,type:a,activeKey:i,option:s})},this.state={img:"",linkUrl:"",wxH5Url:"https://mobile.coolcollege.cn"}}componentDidMount(){this.initCode()}componentDidUpdate(t){t.option.scene!==this.props.option.scene&&this.initCode()}render(){var t=this.props,c=t.type,d=t.tip,n=t.extraTip,a=t.t,i=t.canSave,s=t.refreshQrCode,o=t.label,h=t.saveText,f=h===void 0?"":h,y=t.downloadAsBtn,R=t.userInfo,H=t.universalFn,A=t.activeKey,G=t.option,x=this.state,D=x.img,F=x.linkUrl,j=localStorage.getItem("themeColor")||"#465dcd";return D?$().createElement("div",{className:"qr-code-content"},o?$().createElement("div",{className:"label-text"},o,":"):null,$().createElement("div",{className:"qr-code-div ".concat(o?"left":"")},c==="wx"||c==="weixin"&&R.appId!=="9005"?$().createElement("img",{src:"data:image/png;base64,".concat(D),alt:""}):$().createElement("img",{src:D,alt:""}),d?$().createElement("div",{className:"tip-text"},d):null,n?$().createElement("div",{className:"tip-text"},n):null,i?$().createElement("div",{className:"save_qrcode ".concat(y?"save-btn":""),style:{color:j},onClick:()=>this.saveQrcode()},y?null:$().createElement(_.Z,{iconClass:"icon-f-download",size:"14px"}),f||a("personal.saveCode")):null,H&&!s?$().createElement("div",{className:"save_qrcode",style:{color:j},onClick:()=>this.generatePoster({linkUrl:F,type:c,activeKey:A,option:G})},a("personal.saveCodePoster")):null,s?$().createElement("div",{className:"save_qrcode",style:{color:j},onClick:()=>s()},$().createElement(_.Z,{iconClass:"iconf-switch",size:"14px"}),a("personal.refreshCodeTip")):null)):$().createElement("div",{className:"qr-code-placeholder"})}}Q.Z=(0,b.$j)(r=>{var t=r.user;return{userInfo:t,appType:t.appType,corpId:t.corpId}})((0,p.Z)()(C))},63848:function(Ee,Q,e){"use strict";var M=e(36877),l=e(32969),O=e(12924),g=e.n(O),u=e(91768),I=e(56130);class $ extends g().PureComponent{constructor(){super(...arguments);this.onChange=(b,S)=>{this.props.onChange(b,S)}}render(){var b=this.props,S=b.value,P=b.classify,E=b.showLabel,_=b.className,m=b.t,N=b.style;return g().createElement("div",{className:"classify-cascader ".concat(_)},E?g().createElement("span",{className:"classify-cascader-label"},m("component.selectClassifyLabel")):null,g().createElement(l.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(_),options:P,onChange:this.onChange,placeholder:m("component.selectClassifyLabel"),value:S,style:N,loadData:this.props.loadData}))}}$.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},Q.Z=(0,I.Z)((0,u.Z)()($))},51697:function(Ee,Q,e){"use strict";var M=e(22385),l=e(31097),O=e(33565),g=e(12924),u=e.n(g),I=e(28216),$=e(84874),p=S=>{var P=S.title,E=S.visible,_=S.placement,m=_===void 0?"top":_,N=S.children,K=N===void 0?null:N,C=S.isNewUser,r=C===void 0?"":C,t=S.closeGuide,c=S.guideStatus,d=(0,g.useState)(!1),n=(0,O.Z)(d,2),a=n[0],i=n[1],s=f=>u().createElement("div",{className:"guide-tooltip-title"},f,u().createElement("span",{onClick:o},u().createElement($.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,g.useEffect)(()=>{i(E)},[E]);var o=f=>{if(f.stopPropagation(),f.preventDefault(),i(!1),t){t();return}r==="true"&&S.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),h()},h=()=>{localStorage.setItem("guideStatus","false"),S.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return u().createElement(l.Z,{title:s(P),placement:m,visible:a&&c==="true"&&P},K)},b=S=>({guideStatus:S.advancedSetting.guideStatus,isNewUser:S.advancedSetting.isNewUser});Q.Z=(0,I.$j)(b)(p)},64630:function(Ee,Q,e){"use strict";var M=e(62029),l=e(62999),O=e(85733),g=e(12924),u=e.n(g),I=e(91768),$=e(10237),p=e(37055),b=e(25547),S=O.Z.TreeNode;class P extends u().Component{constructor(_){super(_);this.getPostTree=()=>{var m=p.ZP.OrgTree.getPostTree();$.WY.get({url:m}).then(N=>{var K=(0,b.NP)(N.data.posts,{id:"value",post_name:"postName"});this.setState({treeData:K})})},this.handleChange=(m,N,K)=>{this.props.onChange(typeof m=="undefined"?"":m,N,K)},this.renderTreeNodes=m=>m.map(N=>{var K=!0;return this.props.noChildSelect&&(K=N.post_type==="post"),N.children?u().createElement(S,{selectable:!this.props.noChildSelect,title:N.postName,key:N.id,value:N.id,isLeaf:!1,dataRef:N},this.renderTreeNodes(N.children)):u().createElement(S,{selectable:K,title:N.postName,dataRef:N,value:N.id,key:N.id,isLeaf:!0})}),this.renderTreeSelect=()=>{var m=this.props,N=m.t,K=m.defaultValue,C=K===void 0?[]:K,r=m.multiple,t=r===void 0?!1:r,c=m.width,d=c===void 0?180:c,n={showSearch:!1,style:{width:d},defaultValue:C,multiple:t,dropdownStyle:{maxHeight:300,overflow:"auto"},placeholder:N("component.choosePostTip"),allowClear:!0,disabled:this.props.disabled};return this.state.treeData.length>0?u().createElement(O.Z,(0,M.Z)({},n,{onChange:this.handleChange,className:this.props.className}),this.renderTreeNodes(this.state.treeData)):u().createElement("div",{style:{textAlign:"center"}})},this.state={treeData:[]}}componentDidMount(){this.getPostTree()}render(){return u().createElement("div",{className:"org-tree-container ".concat(this.props.className)},this.renderTreeSelect())}}P.defaultProps={disabled:!1,onChange:()=>{}},Q.Z=(0,I.Z)()(P)},54792:function(Ee,Q,e){"use strict";var M=e(62029),l=e(63185),O=e(9676),g=e(47673),u=e(4107),I=e(88986),$=e(12924),p=e.n($),b=e(91768),S=e(59239),P=e(55446),E=e.n(P),_=e(18329),m=e(2396);class N extends p().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var r=this.props,t=r.form,c=r.id,d=r.onCreate,n=this.state.isChecked;t.validateFields((a,i)=>{if(!a){var s=(0,I.Z)({},i);n||(s.value=0);var o=(0,I.Z)((0,I.Z)({},s),{},{id:c});d(o),setTimeout(()=>{t.resetFields()},100)}})},this.handleBeforeCancel=()=>{var r=this.props,t=r.form,c=r.onCancel;c(),setTimeout(()=>{t.resetFields()},100)},this.checkScore=(r,t,c)=>{var d=this.props.t,n=this.state.isChecked;if(n&&(0,m.kh)(t)){c(d("component.setScoreRuleTip"));return}c()},this.handleCheckChange=r=>{this.setState({isChecked:r.target.checked})},this.renderItem=()=>{var r=this.props,t=r.form,c=r.initialValue,d=r.labelTxt,n=this.state.isChecked,a=t.getFieldDecorator,i={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},s=n?a("value",{initialValue:c,rules:[{validator:this.checkScore}]})(p().createElement(u.Z,{maxLength:30,placeholder:""})):null,o=p().createElement(p().Fragment,null,p().createElement(O.Z,{checked:n,onChange:this.handleCheckChange},d));return p().createElement(S.Z.Item,(0,M.Z)({label:o},i),s)}}componentDidUpdate(r){this.props.visible&&this.props.visible!==r.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var r=this.props,t=r.visible,c=r.title,d=r.prefixCls;return p().createElement(_.ZP,{size:"small",visible:t,title:c,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},p().createElement(S.Z,{className:"".concat(d),layout:"horizontal",colon:!1},this.renderItem(),p().createElement("div",{className:"".concat(d,"__children")},this.props.children)))}}N.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var K=S.Z.create({name:"ClSetupBoxInModal"})(N);Q.Z=(0,b.Z)()(K)},11693:function(Ee,Q,e){"use strict";e.d(Q,{Z:function(){return c}});var M=e(18106),l=e(88108),O=e(12924),g=e.n(O),u=e(91768),I=e(71153),$=e(60331),p=e(76651),b=e(87312),S=e(6793);class P extends g().Component{constructor(){super(...arguments);this.renderStatus=(n,a,i)=>{var s=p.m8.location.query.showSignStatus,o=this.props,h=o.fromType,f=o.t;if(h==="lineClass"||!s||!a)return null;var y="",R="#87d068";switch(n){case"missing":y=f(i==="in"?"lineClassStudy.noIn":"lineClassStudy.noOut"),R="#7F849A";break;case"abnormal":y=f(i==="in"?"lineClassStudy.late":"lineClassStudy.leaveEarly"),R="#f50";break;case"leaved":y=f("lineClass.leave"),R="#faad14";break;case"normal":y=f("marketing.normal");break;default:}return y?g().createElement($.Z,{style:{"margin-left":"10px"},color:R},y):null},this.renderItem=(n,a)=>{var i=this.props,s=i.prefixCls,o=i.t,h=i.type,f="".concat(s,"__item"),y=h==="course";return g().createElement("div",{className:f,key:a},g().createElement("div",{className:"".concat(f,"__title")},y?n.course_name:n.attendance_name),y?g().createElement("div",{className:"".concat(f,"__time")},o("learning.aiTrainTime"),"\uFF1A",g().createElement("span",{className:"".concat(f,"__time_data")},"".concat((0,S.p6)(n.begin_time,"yyyy-MM-dd hh:mm")," ~ ").concat((0,S.p6)(n.end_time,"yyyy-MM-dd hh:mm")))):null,y?null:g().createElement("div",{className:"".concat(f,"__time")},n.sign_in_begin_time?g().createElement("span",{style:{paddingRight:"48px"}},o("personal.checkInLabel"),"\uFF1A",g().createElement("span",{className:"".concat(f,"__time_data")},"".concat((0,S.p6)(n.sign_in_begin_time,"yyyy-MM-dd hh:mm")," ~ ").concat((0,S.p6)(n.sign_in_end_time,"yyyy-MM-dd hh:mm"))),this.renderStatus(n.sign_in_status,n.user_in_course,"in")):null,n.sign_out_begin_time?g().createElement("span",null,o("lineClassStudy.signOut"),"\uFF1A",g().createElement("span",{className:"".concat(f,"__time_data")},"".concat((0,S.p6)(n.sign_out_begin_time,"yyyy-MM-dd hh:mm")," ~ ").concat((0,S.p6)(n.sign_out_end_time,"yyyy-MM-dd hh:mm"))),this.renderStatus(n.sign_out_status,n.user_in_course,"out")):null))}}render(){var n=this.props,a=n.prefixCls,i=n.courseInfo,s=n.type,o=n.t,h=s==="course",f=[];return h?f=i.arrangement?i.arrangement.course_schedules:null:f=i.arrangement?i.arrangement.attendance_schedule:null,g().createElement("div",{className:a},f?this.renderItem(f):g().createElement(b.Z,{tipText:o("lineClassStudy.noResult")}))}}P.defaultProps={prefixCls:"course-arrange",type:"",fromType:""};var E=(0,u.Z)()(P),_=e(17762);class m extends g().Component{render(){var n=this.props,a=n.prefixCls,i=n.courseInfo.id;return g().createElement("div",{className:a},g().createElement(_.Z,{isCard:!0,isComponent:!0,fileId:i}))}}m.defaultProps={prefixCls:"line-class-train-file"};var N=(0,u.Z)()(m);class K extends g().Component{render(){var n=this.props,a=n.courseInfo.introduction,i=n.t;return g().createElement(g().Fragment,null,a?g().createElement("div",null,a||i("myExamTask.noResult")):g().createElement(b.Z,{tipText:i("lineClassStudy.noResult")}))}}var C=(0,u.Z)()(K),r=l.Z.TabPane;class t extends g().Component{constructor(n){super(n);this.state={defaultKey:"1"}}render(){var n=this.props,a=n.prefixCls,i=n.t,s=n.courseInfo,o=n.fromType,h=n.tabPosition,f=this.state.defaultKey;return g().createElement("div",{className:a},g().createElement(l.Z,{tabPosition:h,defaultActiveKey:"1",activeKey:f,className:"arrange-tab",onChange:y=>this.setState({defaultKey:y})},g().createElement(r,{tab:i("lineClassStudy.attendanceArrangement"),key:"1",className:"arrange-tab-left"},g().createElement(E,{fromType:o,type:"attendance",courseInfo:s})),g().createElement(r,{tab:i("study.TrainDetails"),key:"2",className:"arrange-tab-left"},g().createElement(C,{courseInfo:s})),g().createElement(r,{tab:i("lineClass.trainingAttachment"),key:"3",className:"arrange-tab-left"},g().createElement(N,{courseInfo:s}))))}}t.defaultProps={prefixCls:"train-arrange",tabPosition:"top"};var c=(0,u.Z)()(t)},84714:function(Ee,Q,e){"use strict";e.r(Q),e.d(Q,{default:function(){return R}});var M=e(57361),l=e(9754),O=e.n(l),g=e(12924),u=e.n(g),I=e(57068),$=e(76651),p=e(91768),b=e(78138),S=e.n(b),P=e(17381),E=e(22385),_=e(31097),m=e(88986),N=e(28216),K=e(36202),C=e(48479),r=e(10237),t=e(37055),c=e(64262),d=e(64630);class n extends u().Component{constructor(A){var G;super(A);G=this,this.onBack=()=>{this.props.onBack()},this.getExtraData=(0,M.Z)(O().mark(function x(){var D,F,j,ae;return O().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return D=t.ZP.getUserInfoColumnConfig(),ne.next=3,r.WY.get({url:D});case 3:F=ne.sent,j=F.data,j&&j.length>0&&(ae=j.filter(Z=>Object.keys(Z)[0].startsWith("column")),G.setState({extraList:ae}));case 6:case"end":return ne.stop()}},x)})),this.getAttendanceDetail=(0,M.Z)(O().mark(function x(){var D,F,j,ae,ge,ne,Z,v,w,B;return O().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return D=G.props,F=D.type,j=D.taskId,ae=G.state,ge=ae.post_id,ne=ae.department_id,Z=ae.keyword,X.next=4,r.WY.get({url:t.ZP.lineClass.getAttendanceDetail(j),params:{course_id:"",type:F,post_id:ge,department_id:ne,keyword:Z}});case 4:v=X.sent,w=v.data,w.code==="200000"&&(B=w.data.list.map(V=>{var te={};return V.sign_details&&V.sign_details.length&&V.sign_details.length>0&&(te=(0,m.Z)({},V.sign_details[0])),(0,m.Z)((0,m.Z)({},V.user_info),te)}),G.setState({list:B,params:(0,m.Z)((0,m.Z)({},G.state.params),{},{total:w.data.total})}));case 7:case"end":return X.stop()}},x)})),this.pageChange=(x,D)=>{this.setState({params:(0,m.Z)((0,m.Z)({},this.state.params),{},{page_number:x,page_size:D})},()=>{this.getAttendanceDetail()})},this.handleTreeSelectChange=x=>{this.setState({department_id:x},()=>{this.getAttendanceDetail()})},this.handlePostSelectChange=x=>{this.setState({post_id:x},()=>{this.getAttendanceDetail()})},this.getTableColumn=()=>{var x=this.state.extraList,D=this.props,F=D.signInConfig,j=D.signOutConfig,ae=[{title:this.props.t("practiceOperation.username"),dataIndex:"name",key:"name",width:120,fixed:"left"},{title:this.props.t("practiceOperation.department"),dataIndex:"dept_name",key:"dept_name",width:120,render:(ne,Z)=>{var v=Z.dept_name;return v?u().createElement(_.Z,{title:v},u().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},v)):"--"}},{title:this.props.t("practiceOperation.post"),width:120,dataIndex:"post_name",key:"post_name"},{title:this.props.t("practiceOperation.jobNumber"),width:120,dataIndex:"jobnumber",key:"jobnumber"},{title:this.props.t("practiceOperation.loginEmail"),width:120,dataIndex:"login_email",key:"login_email"},{title:this.props.t("practiceOperation.joinTime"),width:120,dataIndex:"join_time",key:"join_time",render:(ne,Z)=>{var v=Z.join_time;return v?u().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},S()(v).format("YYYY-MM-DD HH:mm")):"--"}},{title:this.props.t("setting.loginPhoneNumber"),width:120,dataIndex:"login_mobile",key:"login_mobile"}];if(x.length>0){var ge=x.map(ne=>({title:ne[Object.keys(ne)[0]],width:120,key:Object.keys(ne)[0],render:(Z,v)=>{var w=v.extend_list,B=w&&w.length>0?w.filter(Y=>Y.column_key===Object.keys(ne)[0]):{};return u().createElement("div",null,B.extend_value||"--")}}));ae.push(...ge)}return F&&ae.push({title:this.props.t("lineClass.signInTime"),width:240,key:"sign_in_time",render:(ne,Z)=>Z.sign_status==="leaved"?u().createElement("div",null,"\u8BF7\u5047"):Z.sign_in_status==="missing"?u().createElement("div",null,"--(\u7F3A\u5361)"):Z.sign_in_status==="leave"?u().createElement("div",null,"--(\u8BF7\u5047)"):Z.sign_in_status==="abnormal"?u().createElement("div",null,S()(Z.sign_in_time).format("YYYY-MM-DD HH:mm"),"(\u5F02\u5E38)"):Z.sign_in_status==="normal"?u().createElement("div",null,S()(Z.sign_in_time).format("YYYY-MM-DD HH:mm"),"(\u6B63\u5E38)"):u().createElement("div",null,"--")}),j&&ae.push({title:this.props.t("lineClass.signOutTime"),width:240,key:"sign_out_time",render:(ne,Z)=>Z.sign_status==="leaved"?u().createElement("div",null,"\u8BF7\u5047"):Z.sign_out_status==="missing"?u().createElement("div",null,"--(\u7F3A\u5361)"):Z.sign_out_status==="leaved"?u().createElement("div",null,"\u8BF7\u5047"):Z.sign_out_status==="abnormal"?u().createElement("div",null,S()(Z.sign_out_time).format("YYYY-MM-DD HH:mm"),"(\u5F02\u5E38)"):Z.sign_out_status==="normal"?u().createElement("div",null,S()(Z.sign_out_time).format("YYYY-MM-DD HH:mm"),"(\u6B63\u5E38)"):u().createElement("div",null,"--")}),ae},this.handleSearch=x=>{this.setState({keyword:x},()=>{this.getAttendanceDetail()})},this.toolBarRender=()=>{var x=this.props,D=x.prefixCls,F=x.t;return u().createElement("div",{className:"".concat(D,"__header")},u().createElement("div",{className:"".concat(D,"__header__search")},u().createElement(C.Z,{onSearch:this.handleSearch,placeholder:F("validation.pleaseEnterSearchName")})))},this.state={isLoading:!1,list:[],extraList:[],post_id:"",department_id:"",keyword:"",params:{page_number:1,page_size:10,total:0}}}componentDidMount(){this.getAttendanceDetail(),this.getExtraData()}render(){var A=this.state,G=A.isLoading,x=A.list,D=A.params,F=this.getTableColumn(),j=(0,m.Z)((0,m.Z)({},t.XE.INITIAL_PAGINATION),{},{total:Number(D.total),current:D.page_number,onChange:this.pageChange});return u().createElement("div",{className:"offline-detail"},u().createElement("div",{className:"offline-detail-container"},u().createElement("div",{className:"offline-detail-list"},u().createElement("div",{className:"offline-detail-filter"},u().createElement("div",{className:"offline-detail-filter-left"},u().createElement(c.Z,{className:"offline-detail-filter-dept",parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,width:224,handleTreeSelectChange:this.handleTreeSelectChange}),u().createElement(d.Z,{className:"offline-detail-filter-dept",width:224,onChange:this.handlePostSelectChange}))),u().createElement("section",{className:"offline-detail-list-table"},u().createElement(K.f,{scroll:{y:"100%",x:"max-content"},loading:G,dataSource:x,columns:F,rowKey:ae=>ae.id,pagination:j,toolBarRender:this.toolBarRender,tableUUID:"ea45645b-4814-4bfa-a36c-b750ef32ecat"})))))}}var a=(0,N.$j)()((0,p.Z)()(n)),i=e(6793),s=e(4408),o=e(20294),h=e(11693),f=e(60667);class y extends u().Component{constructor(A){var G;super(A);G=this,this.getAttendanceDetail=function(){var x=(0,M.Z)(O().mark(function D(F){var j,ae;return O().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,(0,P.gm)(F);case 2:j=ne.sent,ae=j.data,ae.code==="200000"&&G.setState({attendanceInfo:ae.data});case 5:case"end":return ne.stop()}},D)}));return function(D){return x.apply(this,arguments)}}(),this.funGetDetail=function(){var x=(0,M.Z)(O().mark(function D(F){var j;return O().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,(0,P.$k)(F);case 2:j=ge.sent,j&&j.data.code==="200000"&&G.setState({courseInfo:j.data.data});case 4:case"end":return ge.stop()}},D)}));return function(D){return x.apply(this,arguments)}}(),this.renderAttendanceBasic=()=>{var x=this.state.attendanceInfo,D=x===void 0?{}:x,F="YYYY-MM-DD HH:mm";return u().createElement("div",{className:"checkin-detail-info offline-info"},u().createElement("div",{className:"offline-info-title"},D.name||"--"),u().createElement("div",{className:"offline-info-sub"},u().createElement("div",{className:"offline-info-sub-item"},D.exist_sign_in_config&&u().createElement("div",{className:"attendance-info-item"},"\u7B7E\u5230\u65F6\u95F4\uFF1A",S()(D.sign_in_begin_time).format(F),"~ ",S()(Number(D.sign_in_end_time)).format(F)),u().createElement("div",null),D.exist_sign_out_config&&u().createElement("div",{className:"attendance-info-item"},"\u7B7E\u9000\u65F6\u95F4\uFF1A",S()(D.sign_out_begin_time).format(F),"~ ",S()(D.sign_out_end_time).format(F)),u().createElement("div",null))))},this.renderBasic=()=>{var x=this.props.t,D=this.state.courseInfo,F=D.lecturer,j=F===void 0?{}:F;return u().createElement("div",{className:"checkin-detail-info offline-info"},u().createElement("div",{className:"offline-info-title"},D.title||"--"),u().createElement("div",{className:"offline-info-sub"},u().createElement("div",{className:"offline-info-sub-item"},x("component.lecturer"),"\uFF1A",u().createElement("span",null,j.type==="inside"?u().createElement(f.Z,{dataType:"userName",value:j.teacher_sync_user_id,name:j.lecturer_name,type:j.teacher_sync_source_type}):j.lecturer_name||"--")),u().createElement("div",{className:"offline-info-sub-item"},x("scoreRankingList.time"),"\uFF1A",(0,i.p6)(D.begin_time,"yyyy-MM-dd hh:mm")," ","~ ",(0,i.p6)(D.end_time,"yyyy-MM-dd hh:mm")),u().createElement("div",{className:"offline-info-sub-item"},x("help.address"),"\uFF1A",D.address||"--")))},this.state={courseInfo:{},attendanceInfo:{}}}componentWillMount(){var A=I.parse($.m8.location.search),G=A.courseId,x=A.type;x==="attendance"?this.getAttendanceDetail(G):this.funGetDetail(G)}render(){var A=this.props.t,G=this.state,x=G.courseInfo,D=G.attendanceInfo,F=I.parse($.m8.location.search),j=F.type,ae=F.courseId;return u().createElement("div",{className:"checkin-detail"},u().createElement(s.Z,{title:A("documentTitle.responsibleCheck")}),u().createElement("div",{className:"checkin-detail-container"},j==="attendance"?this.renderAttendanceBasic():this.renderBasic(),j!=="attendance"&&u().createElement("div",{className:"checkin-detail-arrage"},u().createElement(h.Z,{courseInfo:x,fromType:"lineClass"})),j==="attendance"?u().createElement(a,{taskId:ae,type:j,signInConfig:D.exist_sign_in_config,signOutConfig:D.exist_sign_out_config}):u().createElement("div",{className:"checkin-detail-list"},x.id&&u().createElement(o.Z,{type:"student",signId:x.arrangement&&x.arrangement.attendance_schedule?x.arrangement.attendance_schedule.sign_id:"",sourceType:x.source_type}))))}}var R=(0,p.Z)()(y)},17762:function(Ee,Q,e){"use strict";var M=e(66456),l=e(55313),O=e(62029),g=e(88986),u=e(34792),I=e(48086),$=e(12924),p=e.n($),b=e(91768),S=e(28216),P=e(37055),E=e(10237),_=e(18329),m=e(87312),N=e(84874),K=e(1164),C=e(76466),r=e(54531),t=e(6793);class c extends p().Component{constructor(n){super(n);this.onCancel=()=>{this.props.onCancel()},this.dealWatchType=a=>{var i=a.contentType||a.content_type,s=P.Yq.findIndex(G=>a.type.toLowerCase().includes(G))>-1,o=i.indexOf("video")>-1,h=P.Ss.indexOf(i)>-1,f=i.indexOf("image")>-1||a.type.indexOf("image")>-1||i.indexOf("picture")>-1||a.type.indexOf("picture")>-1,y=i.indexOf("html")>-1,R=i.indexOf("scorm")>-1,H=i.indexOf("h5")>-1,A="";return H?A="article":s?A="doc":o||h?A="video":f?A="image":y?A="html":R&&(A="scorm"),A},this.handlePreviewSystemFile=a=>{var i=this.state.previewInfo,s=a.status===1||a.status===2;if(s){I.default.warning(this.props.t("resourceLibrary.transcodingPlayerTip"));return}var o=a.contentType||a.content_type,h=this.dealWatchType(a),f=P.Ss.indexOf(o)>-1;if(h==="article"){var y=a.contentType,R=a.url,H=y==="h5/link";H?K.Z.targetTo({path:R,isExternalLink:!0}):K.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(a.id)});return}if(h==="scorm"){var A=a.url.split("//"),G=A[1].split("/"),x=[A[0],G[0]].join("//"),D="".concat(x,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(a.url));K.Z.targetTo({path:D,isExternalLink:!0});return}var F={mode:"preview",watchType:h};h==="doc"?Object.assign(F,{resourceInfo:{type:"",docType:a.type,aliUrl:a.path,url:a.url,docTitle:a.name,playId:a.videoId||a.video_id,storageType:a.storage_type}}):h==="image"?Object.assign(F,{resourceInfo:{url:a.url,playId:a.videoId||a.video_id,storageType:a.storage_type}}):h==="html"?Object.assign(F,{resourceInfo:{url:a.url}}):Object.assign(F,{resourceInfo:{source:{FD:a.url,OD:a.path},originUrl:a.url,contentType:f?"mp3":a.type,playId:a.videoId||a.video_id,storageType:a.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:F,previewInfo:(0,g.Z)((0,g.Z)({},i),{},{title:a.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var a=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,g.Z)((0,g.Z)({},a),{},{visible:!1})})},this.funGetList=()=>{var a=this.props,i=a.fileId,s=a.fileList;i?E.WY.get({url:P.ZP.lineClassStudy.getResource(),params:{id:i}}).then(o=>{this.setState({files:o.data})}):this.setState({files:s||[]})},this.handlePreview=a=>{var i=this.props,s=i.appType,o=i.t,h=a.biz_type||a.bizType;if(s==="wx_app"&&h===3){I.default.info(o("lineClassStudy.ddFileNoSee"));return}if(s==="app"){this.handlePreviewSystemFile(a);return}if(!((a.type==="zip"||a.type==="rar")&&a.storage_type!=="DING_PAN")){if(!dd.version&&h===3){I.default.info(o("practiceOperation.dingFileTip"));return}if(h!==3){this.handlePreviewSystemFile(a);return}var f=P.ZP.DingSpaceId.getSpaceId(),y={corpId:this.props.corpId,userId:this.props.account,fileids:a.url,timeStamp:Date.parse(new Date)};E.WY.get({url:f,params:y}).then(R=>{R.data.code===0?this.ddSpacePreview(a):I.default.info(R.data.msg)}).catch(R=>{I.default.error(R.data)})}},this.ddSpacePreview=a=>{var i={spaceId:a.path,fileId:a.url,fileName:a.name,fileSize:a.size,fileType:a.type};(0,r.DR)(i)},this.getIconType=a=>{var i=P.e1[a.type];return i||"iconf-matter-picture"},this.renderModalPreview=()=>{var a=this.state,i=a.resourcePlayInfo,s=a.previewInfo;return p().createElement(C.Z,(0,O.Z)({},i,{previewInfo:s}))},this.renderCard=a=>{var i=this.props,s=i.prefixCls,o=i.t,h="".concat(s,"__file"),f=a.type;return f.indexOf("image")!==-1&&(f="png"),p().createElement(p().Fragment,null,p().createElement("div",{key:a.id,className:h},p().createElement("span",{className:"".concat(h,"__item")},p().createElement("span",{style:{"vertical-align":"middle"}},p().createElement(N.Z,{iconClass:P.e1[f],size:"16px"}))," ",p().createElement("span",{className:"".concat(h,"__name")},a.name),p().createElement("span",{className:"cl-pointer",style:{marginLeft:"15px","vertical-align":"middle"},onClick:()=>this.handlePreview(a)},o("common.preview")))))},this.renderTable=()=>{var a=this.props,i=a.t,s=a.useLocalList,o=a.fileList,h=this.state.files,f=s?o:h,y=[{title:i("common.number"),dataIndex:"id",width:80,key:"id",render:(R,H,A)=>p().createElement("span",null,A+1)},{title:i("practiceOperation.annex"),dataIndex:"name",key:"name",ellipsis:!0,render:(R,H)=>p().createElement("div",null,p().createElement(N.Z,{iconClass:this.getIconType(H),size:"16px"}),p().createElement("span",{style:{marginLeft:"8px"}},R))},{title:i("common.operate"),width:130,fixed:"right",render:(R,H)=>p().createElement("div",null,p().createElement("span",{className:"cl-pointer",onClick:()=>this.handlePreview(H)},i("common.preview")))}];return p().createElement(l.Z,{style:{minHeight:"400px"},columns:y,dataSource:f,pagination:!1})},this.renderFileList=()=>{var a=this.props,i=a.t,s=a.isComponent,o=a.isCard,h=a.fileList,f=a.useLocalList,y=a.prefixCls,R=a.title,H=this.state.files,A=f?h:H;if(s&&!o)return this.renderTable();if(o)return p().createElement(p().Fragment,null,A.length?p().createElement("div",{className:"file-list-item-card"},A.map(D=>this.renderCard(D))):p().createElement(m.Z,{tipText:i("lineClassStudy.noResult")}));var G=p().createElement("div",null,H.length>0?p().createElement("div",{className:"".concat(y,"_page")},p().createElement("div",{className:"".concat(y,"_page_num")},(0,t.ZT)(i("lineClassStudy.pageTotal"),H.length))):null),x={okText:i("common.ok"),cancelText:i("common.cancel"),size:"medium",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,footer:G};return p().createElement(_.ZP,(0,O.Z)({title:R||i("practiceOperation.annex")},x,{visible:this.props.visible,onCancel:this.onCancel}),p().createElement("div",{className:y},this.renderTable()))},this.state={files:[],resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}}}componentDidMount(){this.funGetList()}componentDidUpdate(n){n.fileId!==this.props.fileId&&this.props.fileId&&this.funGetList()}render(){var n=this.state,a=n.resourcePlayInfo,i=n.previewInfo;return p().createElement("div",null,this.renderFileList(),p().createElement(C.Z,(0,O.Z)({},a,{previewInfo:i})))}}c.defaultProps={prefixCls:"file-list-line-class",title:"",fileId:"",isComponent:!1,fileList:[],useLocalList:!1,isCard:""},Q.Z=(0,S.$j)(d=>({corpId:d.user.corpId,account:d.user.account}))((0,b.Z)()(c))},72358:function(Ee,Q,e){"use strict";e.d(Q,{g3:function(){return O},hR:function(){return g},ZQ:function(){return u},HM:function(){return I},RZ:function(){return $},K5:function(){return p},az:function(){return b},_C:function(){return S},p_:function(){return P}});var M=e(37055),l=e(10237);function O(E){return l.WY.get({url:M.ZP.lineClassStudy.getMyEvaluate(),params:E})}function g(E,_){return l.WY.post({url:M.ZP.lineClassStudy.evaluateSubmit(E),data:_})}function u(E,_){return l.WY.post({url:M.ZP.lineClassStudy.scoreSubmit(E),data:_})}function I(E,_){return l.WY.post({url:M.ZP.lineClassStudy.approvalSubmit(E),data:_})}function $(E,_){return l.WY.get({url:M.ZP.lineClassStudy.getEvaluateMyInfo(E),params:_})}function p(E,_){return l.WY.get({url:M.ZP.lineClassStudy.getMyEvaluateInfo(E),params:_})}function b(E,_){return l.WY.get({url:M.ZP.lineClassStudy.getMyEvaluateInfoManage(E),params:_})}function S(E,_){return l.WY.get({url:M.ZP.lineClassStudy.userEvaluateLecturerList(E),params:_})}function P(E){return l.WY.get({url:M.ZP.lineClassStudy.getEvaluateCount(),params:E})}},17676:function(Ee,Q,e){"use strict";e.d(Q,{E6:function(){return g},h$:function(){return u},_v:function(){return I},R9:function(){return $},wq:function(){return b},BV:function(){return S},Np:function(){return P},af:function(){return m},RX:function(){return N},WF:function(){return K},gm:function(){return C}});var M=e(88986),l=e(37055),O=e(10237);function g(r){return O.WY.get({url:l.ZP.lineClassStudy.signCourses(),params:r})}function u(r){return O.WY.get({url:l.ZP.lineClassStudy.signCoursesCount(),params:r})}function I(r){return O.WY.get({url:l.ZP.lineClassStudy.teachingsList(),params:r})}function $(r){return O.WY.get({url:l.ZP.lineClassStudy.teachingCoursesCount(),params:r})}function p(r){return request.get({url:CONFIG.lineClass.getOfflineCourseSignAnalysis(r)})}function b(r,t){return O.WY.post({url:l.ZP.lineClass.updateOfflineCourseSetting(),data:(0,M.Z)({courseId:r,enterpriseId:localStorage.getItem("enterpriseId")},t)})}function S(r){return O.WY.get({url:l.ZP.lineClass.getOfflineCourseSetting(),params:{courseId:r,enterpriseId:localStorage.getItem("enterpriseId")}})}function P(r){return O.WY.post({url:l.ZP.lineClassStudy.lecturerRefuse(r)})}function E(r){return request.get({url:CONFIG.lineClassStudy.approvalsList(),params:r})}function _(){return request.get({url:CONFIG.lineClassStudy.approvalCoursesCount()})}function m(r){return O.WY.post({url:l.ZP.lineClassStudy.resouceAdd(),data:r})}function N(r){return O.WY.get({url:l.ZP.lineClassStudy.getResource(),params:r})}function K(r){return O.WY.get({url:l.ZP.lineClassStudy.getLineCourse(),params:r})}function C(r){return O.WY.get({url:l.ZP.lineClassStudy.getStuAttendanceInfo(r),params:{}})}},17381:function(Ee,Q,e){"use strict";e.d(Q,{Xs:function(){return g},fV:function(){return u},_w:function(){return I},G5:function(){return $},g2:function(){return p},uy:function(){return b},il:function(){return S},y2:function(){return P},$k:function(){return _},gm:function(){return N},C:function(){return K},Wl:function(){return C},ZS:function(){return r},XZ:function(){return t},LI:function(){return c},fR:function(){return n},Pt:function(){return a}});var M=e(37055),l=e(10237),O=e(5430);function g(s){var o=s.login_mobile,h=s.verification_code,f=s.password,y=s.encrypt,R=M.ZP.Login.clResetPassword();return l.WY.post({url:R,data:{login_mobile:o,verification_code:h,password:f,encrypt:y}})}function u(){var s=M.ZP.points.getPointsCategory();return l.WY.get({url:s})}function I(s){var o=s.login_mobile,h=s.verification_code,f=s.password,y=s.encrypt,R=M.ZP.Login.bindUserAccount();return l.WY.post({url:R,data:{login_mobile:o,verification_code:h,password:f,encrypt:y}})}function $(s){var o=s.action_type,h=s.login_mobile,f=M.ZP.Login.bindSendVerification();return l.WY.post({url:f,data:{action_type:o,login_mobile:h}})}function p(s){var o=s.action_type,h=s.login_mobile,f=s.enterpriseId,y=M.ZP.Login.clSendVerification();return l.WY.post({url:y,data:{action_type:o,login_mobile:h,enterprise_id:f}})}function b(s){var o=M.ZP.advancedSetting.identityQuery();return l.WY.get({url:o,params:s})}function S(s){var o=M.ZP.advancedSetting.saveIdentity();return l.WY.post({url:o,data:s})}function P(s){var o=M.ZP.advancedSetting.isShowAuth();return l.WY.get({url:o,data:s})}function E(s){return request.get({url:CONFIG.lineClass.getOfflineCourseBasicById(s)})}function _(s){return l.WY.get({url:M.ZP.lineClassStudy.coursesInfo(s)})}function m(s,o){return request.get({url:CONFIG.lineClassStudy.getAttendanceInfo(s),params:{type:o}})}function N(s){return l.WY.get({url:M.ZP.lineClassStudy.getStuAttendanceInfo(s),params:{}})}function K(s){var o=M.ZP.learn.getShowLearnStatus(s);return l.WY.get({url:o})}function C(s){var o=s.examId,h=s.taskId,f=O.OB.examData.examTaskInfo(o);return l.WY.get({url:f,params:{task_id:h}})}function r(s){var o=O.OB.examData.getExamsTaskList();return l.WY.get({url:o,params:s})}function t(s,o){var h=O.OB.examData.checkStatus(s);return l.WY.get({url:h,params:{task_id:o}})}function c(){var s=M.ZP.lineClass.whetherLecture();return l.WY.get({url:s})}function d(){var s=TRAINING_PROJECT_LIST.personal.list();return request.get({url:s})}function n(s){var o=s.startTime,h=s.endTime,f=s.excludeSelf,y=f===void 0?!1:f,R=s.pageNumber,H=s.pageSize,A=M.ZP.Personal.exportMyScore();return l.WY.get({url:A,params:{startTime:o,endTime:h,excludeSelf:y,pageNumber:R,pageSize:H}})}function a(s,o){var h=o.begin_time,f=o.end_time,y=o.page_number,R=o.page_size,H=o.integral_type,A=M.ZP.points.getUserPointsDetail(s);return l.WY.get({url:A,params:{begin_time:h,end_time:f,page_number:y,page_size:R,integral_type:H}})}function i(s){var o=s.integral_type,h=s.update_reason,f=s.begin_time,y=s.end_time,R=CONFIG.points.exportPointsDetail();return request.post({url:R,params:{integral_type:o,update_reason:h,begin_time:f,end_time:y}})}},72456:function(Ee,Q,e){"use strict";var M=e(49111),l=e(19650),O=e(57663),g=e(71577),u=e(12924),I=e.n(u),$=e(28216),p=e(91768),b=e(84391),S=e(90631),P=e(49101),E=e(76651),_=e(31945),m=e(1164),N=e(51697),K=r=>{var t=r.user,c=r.currentRoute,d=r.advancedSetting;return{currentPath:c.path,allAuthRoutes:c.allAuthRoutes,userLng:t.lng,themeColor:d.themeColor,qyShield:t.qyShield}};class C extends I().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var t=this.props.tabLink;E.m8.push(t)},this.renderActionBtn=()=>{var t=this.props,c=t.prefixCls,d=t.actionText,n=t.t,a=t.tabLink,i=t.showBtn,s=t.renderActionBtn,o=t.newPage,h=t.popOverProps,f=h===void 0?[]:h,y=t.renderGuide,R=y===void 0?!1:y,H=t.showDownloadBtn,A=H===void 0?!1:H,G=t.showImportBtn,x=G===void 0?!1:G,D=t.showCreateBtn,F=D===void 0?!0:D,j=t.rowReverse,ae=j===void 0?!1:j,ge="".concat(c,"__action");if(!i&&s&&typeof s=="function")return I().createElement("div",{className:ge},s());if(!i||!d)return null;var ne=f.length?f[0].contentText:"";return I().createElement("div",{className:"".concat(ge," ").concat(ae&&"row-reverse")},I().createElement(l.Z,{size:16},A&&I().createElement(g.Z,{icon:I().createElement(b.Z,null),onClick:this.handleDownload},n("common.exportData")),x&&I().createElement(g.Z,{icon:I().createElement(S.Z,null),onClick:this.handleImport},n("exam.importTemplate")),F&&o&&I().createElement(m.Z,{to:a},I().createElement(N.Z,{visible:ne&&R,placement:"topLeft",title:ne},I().createElement(g.Z,{type:"primary",id:"create-project-button",icon:I().createElement(P.Z,null)},d))),F&&!o&&I().createElement(g.Z,{type:"primary",id:"create-project-button",icon:I().createElement(P.Z,null),onClick:this.handleCreate},d)))},this.renderQueryRow=()=>{var t=this.props,c=t.queryRowParams,d=t.queryRowList,n=t.queryRowSelectedCourseIds,a=t.queryRowSelectedProjectIds,i=t.queryRowOnForceRender,s=t.queryRowOnClassifyChange,o=t.queryRowOnTypeChange,h=t.queryRowOnCourseTypeChange,f=t.queryRowAllowActions,y=t.showNum,R=y===void 0?1:y;return I().createElement(_.Z,{params:c,list:d,selectedCourseIds:n,selectedProjectIds:a,onForceRender:i,onClassifyChange:s,onTypeChange:o,onCourseTypeChange:h,allowActions:f,showNum:R,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var t=this.props,c=t.t,d=t.extraBtnSelectedRowKeys,n=t.extraBtnHandleMultiVisibleRange;return I().createElement(g.Z,{disabled:d.length===0,onClick:n},c("courseManage.setTheVisibility"))}}render(){var t=this.props,c=t.prefixCls,d=t.wrapCls,n=t.showRenderQueryRow,a=t.showRendeExtraBtn;return I().createElement(I().Fragment,null,I().createElement("div",{className:"render_other"},I().createElement("header",{className:"".concat(c," ").concat(d)},I().createElement("section",{className:"".concat(c,"__radiocol")},this.renderActionBtn(),n&&this.renderQueryRow(),a&&this.rendeExtraBtn()))))}}C.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},Q.Z=(0,$.$j)(K)((0,p.Z)()(C))},62117:function(Ee,Q,e){"use strict";var M=e(63185),l=e(9676),O=e(43358),g=e(34041),u=e(88983),I=e(47933),$=e(12924),p=e.n($),b=e(28216),S=e(91768),P=e(48479),E=e(2971),_=e(45601),m=e(7249),N=C=>{var r=C.user,t=C.currentRoute,c=C.advancedSetting;return{currentPath:t.path,allAuthRoutes:t.allAuthRoutes,userLng:r.lng,themeColor:c.themeColor,appType:r.appType,appId:r.appId}};class K extends p().Component{constructor(r){super(r);this.setPlaceholder=()=>{var t=this.props,c=t.currentPath,d=t.allAuthRoutes,n=t.userLng,a=this.state.language,i=d[c],s=this.props,o=s.appType,h=s.appId,f=localStorage.getItem("qyWechatBook"),y=o==="wx_app"&&f==="true"&&h==="9005";if(!!i){var R=a[n].searchInputPlaceholder,H="";i.menuKey==="studyTemplate"||i.menuKey==="examTemplate"?H=R.template:i.menuKey==="employee"||i.menuKey==="obligatory"||i.menuKey==="elective"||i.menuKey==="plan"||i.menuKey==="evaluation"||i.menuKey==="myEvaluationPlan"?H=R.task:i.menuKey==="studyProject"?H=y?R.byProjectName:R.byProjectNameOrCreator:i.menuKey==="management"?H=y?R.byTaskName:R.byTaskNameOrCreator:H=R[i.menuKey],this.setState({currentPlaceholder:H})}},this.handleRadiosChange=t=>{this.props.onRadiosChange(t.target.value)},this.handleSelectChange=t=>{this.props.onSelectChange(t)},this.handleSearch=(t,c)=>{this.props.onSearch(t,c)},this.handleChange=t=>{this.props.onCheckboxChange(t.target.checked)},this.renderRadios=()=>{var t=this.props,c=t.prefixCls,d=t.radioList,n=t.defaultRadioValue,a=t.radioValue;if(!d.length)return null;var i=n||d[0].value,s="".concat(c,"__radios");return p().createElement("div",{className:s},typeof a!="undefined"?p().createElement(I.ZP.Group,{defaultValue:i,value:a,onChange:this.handleRadiosChange},d.map(o=>p().createElement(I.ZP.Button,{key:o.value,value:o.value},o.name))):p().createElement(I.ZP.Group,{defaultValue:i,onChange:this.handleRadiosChange},d.map(o=>p().createElement(I.ZP.Button,{key:o.value,value:o.value},o.name))))},this.renderSelect=()=>{var t=this.props,c=t.prefixCls,d=t.selectList,n=t.defaultSelectValue;if(!d.length)return null;var a=n||d[0].value,i="".concat(c,"__select");return p().createElement("div",{className:i},p().createElement(g.Z,{defaultValue:a,onChange:this.handleSelectChange,style:{minWidth:100}},d.map(s=>p().createElement(g.Z.Option,{key:s.value,value:s.value},s.name))))},this.renderOther=()=>{var t=this.props,c=t.prefixCls,d=t.renderOther,n=t.showOther,a="".concat(c,"__other");if(n&&d&&typeof d=="function")return p().createElement("div",{className:a},d())},this.renderCheckbox=()=>{var t=this.props,c=t.prefixCls,d=t.t,n=t.label,a=t.showCheckbox,i=t.renderActionSelect,s="".concat(c,"__checkbox");return!a&&i&&typeof i=="function"?p().createElement("div",{className:s},i()):a?p().createElement("div",{className:s},p().createElement(l.Z,{onChange:this.handleChange},n||d("common.myCreated"))):null},this.renderSearch=()=>{var t=this.props,c=t.prefixCls,d=t.showSearch,n=t.inputPlaceholder,a=t.maxLength,i=a===void 0?400:a,s=t.value,o="".concat(c,"__search");if(!d)return null;var h=this.state.currentPlaceholder;return n?p().createElement("div",{className:o},p().createElement(P.Z,{onSearch:this.handleSearch,placeholder:n,width:272,maxLength:i})):p().createElement("div",{className:o},p().createElement(P.Z,{onSearch:this.handleSearch,placeholder:h,width:272,maxLength:i,value:s}))},this.renderSearchOther=()=>{var t=this.props.renderSearchOther;return t?t():null},this.state={language:{zh_cn:_.Z,en_us:E.Z,zh_hk:m.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(r){r.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var r=this.props,t=r.prefixCls,c=r.wrapCls,d=r.showRenderRadios,n=d===void 0?!0:d,a=r.showRenderSelect;return p().createElement(p().Fragment,null,p().createElement("div",{className:"render_other"},this.renderOther(),p().createElement("header",{className:"".concat(t," ").concat(c)},p().createElement("section",{className:"".concat(t,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),n&&this.renderRadios(),a&&this.renderSelect(),this.renderSearch()))))}}K.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},Q.Z=(0,b.$j)(N)((0,S.Z)()(K))},20294:function(Ee,Q,e){"use strict";e.d(Q,{Z:function(){return _e}});var M=e(12924),l=e.n(M),O=e(28216),g=e(91768),u=e(62029),I=e(14781),$=e(53431),p=e(34792),b=e(48086),S=e(57663),P=e(71577),E=e(57361),_=e(93485),m=e(33565),N=e(34669),K=e(82833),C=e(22385),r=e(31097),t=e(88986),c=e(9754),d=e.n(c),n=e(84391),a=e(76651),i=e(78138),s=e.n(i),o=e(57068),h=e(27326),f=e.n(h),y=e(61120),R=e.n(y),H=e(38642),A=e(37055),G=e(18329),x=e(44970),D=e(72456),F=e(62117),j=e(30311),ae=e(97593),ge=e(55285),ne=e(17676),Z=e(90734),v=e(17762),w=e(83655),B=e(59169),Y=e(65202),X=e(72358),V=e(60667);class te extends l().Component{constructor(oe){var he;super(oe);he=this,this.getLineClassList=()=>{var L=this.state.listParam,T=this.props,U=T.type,se=T.sourceType,me=T.signId,ie=o.parse(a.m8.location.search),re=ie.taskId,z=ie.courseId;(0,Z.MI)((0,t.Z)((0,t.Z)({},L),{},{planId:re,courseId:z,signId:me,type:se,score:U||"management"})).then(J=>{J.data.code==="200000"&&this.setState({taskList:J.data.data.list,listParam:(0,t.Z)((0,t.Z)({},L),{},{total:J.data.data.total})})})},this.resetRequestList=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=he.state.listParam;he.setState({listParam:(0,t.Z)((0,t.Z)({},T),{},{pageNumber:1},L)},()=>he.getLineClassList())},this.getBasicData=()=>{var L=o.parse(a.m8.location.search),T=L.courseId;(0,Z.Tq)(T).then(U=>{U.data.code==="200000"&&this.setState({lecturerId:U.data.data.lecturer_user_id})})},this.getTableColumns=()=>{var L=(0,Y.p)(),T=this.props,U=T.t,se=T.type,me=this.state,ie=me.taskList,re=me.signStatus,z=me.showAddress,J=[];ie[0]&&(J=ie[0].sign_details.map((de,k)=>{var q={title:U("component.checkInTime"),width:200,dataIndex:["sign_details",k],render:ee=>ee.sign_status==="leaved"?"\u8BF7\u5047":ee.sign_in_time?l().createElement("span",null,s()(ee.sign_in_time).format("YYYY-MM-DD HH:mm"),"(",re[ee.sign_in_status],")"):"-- (".concat(re[ee.sign_in_status],")")},ue={title:U("component.checkInAddress"),width:200,dataIndex:["sign_details",k],render:ee=>l().createElement(r.Z,{title:ee.sign_in_address||"--"},l().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},ee.sign_in_address||"--"))},fe={title:U("lineClass.signBack"),width:200,dataIndex:["sign_details",k],render:ee=>ee.sign_status==="leaved"?"\u8BF7\u5047":ee.sign_out_time?l().createElement("span",null,s()(ee.sign_out_time).format("YYYY-MM-DD HH:mm"),"(",re[ee.sign_out_status],")"):"-- (".concat(re[ee.sign_out_status],")")},Se={title:U("lineClass.signAddress"),width:200,dataIndex:["sign_details",k],render:ee=>l().createElement(r.Z,{title:ee.sign_out_address||"--"},l().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},ee.sign_out_address||"--"))},Ie=[];return de.is_set_sign_in&&(Ie.push(q),z&&Ie.push(ue)),de.is_set_sign_out&&(Ie.push(fe),z&&Ie.push(Se)),{title:de.sign_name,children:Ie}}));var Ce=[{title:U("lineClass.totalProgressTraining"),dataIndex:"progress",key:"progress",width:200,render:de=>l().createElement(K.Z,{strokeColor:L,percent:de,format:k=>"".concat(k,"%")})},{title:U("lineClass.offlineTrainingDuration"),dataIndex:"study_duration_str",key:"study_duration_str",width:150,render:de=>de||"--"},{title:U("lineClass.assesResult"),dataIndex:"score",key:"score",width:150,render:(de,k)=>l().createElement(l().Fragment,null,k.assessment_user_name?de:"--")},{title:U("examing.comments"),dataIndex:"remark",key:"remark",width:150,render:de=>l().createElement(r.Z,{title:de||"--"},l().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},de||"--"))},{title:U("lineClass.gradeAttachment"),dataIndex:"attachment_count",key:"attachment_count",width:150,render:(de,k)=>de?l().createElement(j.Z,{name:de,onClick:()=>this.showAttachmentList(de,k.attachment_id)}):"--"},{title:U("lineClass.recordPersonnel"),dataIndex:"assessment_user_name",key:"assessment_user_name",width:150,render:(de,k)=>{var q=k.assessment_sync_user_id,ue=k.assessment_sync_source_type;return l().createElement(V.Z,{dataType:"userName",value:q,name:de,type:ue})}}];if(se!=="student"&&Ce.push({title:U("lineClass.studentsScore"),dataIndex:"evaluate_message",key:"evaluate_message",width:150,render:(de,k)=>k.evaluate_message?k.evaluate_message.evaluate_type==="questionnaire"?l().createElement(j.Z,{name:k.evaluate_message.evaluate_name,onClick:()=>this.viewQuestion(k.evaluate_message,k)}):k.evaluate_message.evaluate_name:"--"}),J.length>0){var ce=(0,_.Z)(J.entries()),De;try{for(ce.s();!(De=ce.n()).done;){var Me=De.value,Le=(0,m.Z)(Me,2),Ze=Le[0],Re=Le[1];Ce.splice(1+Ze,0,Re)}}catch(de){ce.e(de)}finally{ce.f()}}return Ce},this.viewQuestion=function(){var L=(0,E.Z)(d().mark(function T(U,se){var me,ie,re,z,J;return d().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return me=U.evaluate_id,ie=se.user_id,re=o.parse(a.m8.location.search),z=re.courseId,ce.next=5,(0,X.az)({courseId:z,lecturer_user_id:he.state.lecturerId},{evaluate_id:me,is_evaluated:!0,evaluate_object_id:ie});case 5:J=ce.sent,J.data.code==="200000"&&J.data.data.questionnaire_result_vo&&he.setState({question:{visible:!0,info:J.data.data.questionnaire_result_vo}});case 7:case"end":return ce.stop()}},T)}));return function(T,U){return L.apply(this,arguments)}}(),this.showAttachmentList=(L,T)=>{!L||this.setState({fileList:{visible:!0,id:T}})},this.handleSingleCollection=()=>{var L=o.parse(a.m8.location.search),T=L.taskId,U=L.courseId;a.m8.push("/knowledgeBase/learningResources/lineClass/additionalRecording?fromType=task&courseId=".concat(U,"&taskId=").concat(T))},this.renderExportBtn=()=>{var L=(0,H.UI)("PRINT_SIGNATURE"),T=this.props.t;return l().createElement("div",{className:"btn-group"},l().createElement(P.Z,{icon:l().createElement(n.Z,null),type:"primary",onClick:this.handleDownload},T("common.exportData")),L&&l().createElement(P.Z,{style:{marginLeft:10},onClick:this.handleShowPrintSignature},T("common.printSignature")))},this.handleDownload=()=>{var L=this.state.listParam,T=this.props,U=T.type,se=T.sourceType,me=T.signId,ie=o.parse(a.m8.location.search),re=ie.taskId,z=ie.courseId,J={plan_id:re,department_id:L.departmentId,post_id:L.postId,keyword:L.keyword,source:U||"management"},Ce="?".concat(o.stringify(J),"&type=").concat(se,"&course_id=").concat(z);(0,ae.N)({page:"monitorUserExport",props:this.props,query:Ce,rest:me})},this.headerTitle=()=>{var L=this.props.type;return L==="student"?null:l().createElement(D.Z,{showBtn:!1,renderActionBtn:this.renderExportBtn})},this.handleSearch=(L,T)=>{var U=this.state.listParam,se=(0,t.Z)((0,t.Z)({},U),{},{pageNumber:1,keyword:T===""?L:"",userIds:T});this.setState({listParam:se},()=>this.getLineClassList())},this.handleShowPrintSignature=()=>{this.setState({showPrint:!0})},this.handleHidePrintSignature=()=>{this.setState({showPrint:!1,printConfig:null})},this.handlePreview=(0,E.Z)(d().mark(function L(){var T,U,se,me;return d().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!he.printRef){re.next=11;break}if(T=he.printRef.current,U=T.getErrorMsg(),!U){re.next=6;break}return b.default.error(U),re.abrupt("return");case 6:return se=he.state.signatureId,me=(0,t.Z)((0,t.Z)({},T.printOptions),{},{userIds:T.selectStudents&&T.selectStudents.map(z=>z.id).join(",")}),re.next=10,(0,ne.wq)(se,me);case 10:he.setState({printConfig:(0,t.Z)((0,t.Z)({},T.printOptions),{},{selectStudents:T.selectStudents,backContent:T.backContent})});case 11:case"end":return re.stop()}},L)})),this.handlePrintf=()=>{this.setState({signatureId:null});var L=this.props.t,T=this.state.printConfig.selectStudents,U=navigator.appVersion,se="DingTalk";if(U.indexOf(se.toLowerCase())>-1){b.default.warn(L("printingIsNotSupported.printingIsNotSupported"));return}try{if(T){var me=document.createElement("div"),ie=document.body.innerHTML,re=document.getElementById("printContainer");T.forEach(z=>{var J=this.generateHtml(re,me,z);me.appendChild(J)}),document.body.innerHTML=me.innerHTML,document.body.style.paddingTop="150px",window.print(),document.body.innerHTML=ie,window.location.reload()}}catch(z){console.error(z)}},this.generateHtml=(L,T,U)=>{var se=L.cloneNode(!0);se.id=U.id,se["data-html2canvas-ignore"]=!0;var me=this.findDomByCls(se,"studentName"),ie=this.findDomByCls(se,"deptName"),re=this.findDomByCls(se,"postName");return me.forEach(z=>{z.innerHTML=U.name}),ie.forEach(z=>{z.innerHTML=U.dept_name}),re.forEach(z=>{z.innerHTML=U.post_name}),T.appendChild(se),se.style.width="100%",se},this.handleDownloadSignature=()=>{var L=this.state.printConfig.selectStudents,T=new(f())("p","mm","a4");if(L){var U=document.createElement("div"),se=document.getElementById("printContainer"),me=L.map((ie,re)=>{var z=this.generateHtml(se,U,ie);document.body.appendChild(U),U.style.width="1120px";var J=new Promise(Ce=>{R()(z,{allowTaint:!0,scale:1}).then(ce=>{var De=ce.getContext("2d"),Me=190,Le=277,Ze=Math.floor(Le*ce.width/Me),Re=0,de=document.createElement("canvas");de.width=ce.width,de.height=Math.min(Ze,ce.height-Re);var k=Me*ce.height/ce.width,q=(Le-k)/2;de.getContext("2d").putImageData(De.getImageData(0,Re,ce.width,Math.min(Ze,ce.height-Re)),0,0),T.addImage(de.toDataURL("image/jpeg",1),"JPEG",10,q,Me,k),L.length-1!==re&&T.addPage(),Ce(!0)})});return J});Promise.all(me).then(()=>{T.save("".concat(this.props.title,".pdf")),document.body.removeChild(U)})}},this.findDomByCls=function(L,T){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return L.className&&L.className.indexOf(T)>-1&&U.push(L),L.childNodes.forEach(se=>{he.findDomByCls(se,T,U)}),U},this.toolBarRender=()=>{var L=this.props.t;return l().createElement(F.Z,{showCheckbox:!1,onSearch:this.handleSearch,inputPlaceholder:L("searchInputPlaceholder.name")})},this.pageChange=(L,T)=>{var U=this.state.listParam;this.setState({listParam:(0,t.Z)((0,t.Z)({},U),{},{pageNumber:L,pageSize:T})},()=>this.getLineClassList())};var ye=oe.t;this.state={isLoading:!1,taskList:[],listParam:{pageNumber:1,pageSize:20,total:0},signStatus:{missing:ye("lineClass.missing"),normal:ye("marketing.normal"),abnormal:ye("lineClass.abnormal"),leaved:ye("lineClass.leave")},fileList:{visible:!1,id:""},showAddress:!1,question:{visible:!1,info:{}},lecturerId:""},this.printRef=l().createRef()}componentDidMount(){this.getBasicData(),this.getLineClassList()}render(){var oe=this.props,he=oe.prefixCls,ye=oe.t,L=oe.sourceType,T=oe.signId,U=this.state,se=U.taskList,me=U.isLoading,ie=U.listParam,re=U.fileList,z=U.question,J=U.printConfig,Ce=U.showPrint,ce=this.getTableColumns(),De=(0,t.Z)((0,t.Z)({},A.XE.INITIAL_PAGINATION),{},{current:ie.pageNumber,total:Number(ie.total),onChange:this.pageChange}),Me=o.parse(a.m8.location.search),Le=Me.taskId,Ze=Me.courseId,Re={okText:ye("common.ok"),cancelText:ye("common.cancel"),size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,footer:null};return l().createElement("div",{className:"".concat(he)},l().createElement(ge.Z,{loading:me,dataSource:se,columns:ce,rowKey:de=>de.id,pagination:!1,headerTitle:this.headerTitle(),toolBarRender:this.toolBarRender,tableUUID:"804e66cd-7156-4e14-bad8-388da74fa3f1"}),ie.total>ie.pageSize||!De.hideOnSinglePage?l().createElement("div",{className:"".concat(he,"-pagination")},l().createElement($.Z,De)):null,l().createElement(v.Z,{title:ye("lineClass.trainingAttachment"),visible:re.visible,fileId:re.id,onCancel:()=>{this.setState({fileList:(0,t.Z)((0,t.Z)({},re),{},{visible:!1})})}}),l().createElement(G.ZP,{visible:Ce,title:"\u6253\u5370\u5EA7\u7B7E",width:"60%",onCancel:this.handleHidePrintSignature,footer:l().createElement("div",{className:"align-center"},J?l().createElement(l().Fragment,null,l().createElement(P.Z,{onClick:()=>{this.setState({printConfig:null})}},"\u53D6\u6D88"),l().createElement(P.Z,{type:"primary",onClick:this.handlePrintf},"\u6253\u5370\u5168\u90E8"),l().createElement(P.Z,{type:"primary",onClick:this.handleDownloadSignature},"\u4E0B\u8F7D\u5168\u90E8")):l().createElement(l().Fragment,null,l().createElement(P.Z,{onClick:this.handleHidePrintSignature},"\u53D6\u6D88"),l().createElement(P.Z,{type:"primary",onClick:this.handlePreview},"\u6253\u5370\u9884\u89C8")))},J?l().createElement(B.Z,{printConfig:J}):l().createElement(w.Z,{sourceType:L,signId:T,t:ye,ref:this.printRef,courseId:Ze,taskId:Le})),l().createElement(G.ZP,(0,u.Z)({title:ye("common.questionnaire")},Re,{visible:z.visible,onCancel:()=>{this.setState({question:(0,t.Z)((0,t.Z)({},z),{},{visible:!1})})}}),l().createElement("div",{className:"".concat(he,"-question")},l().createElement(x.Z,{questionnaireInfo:z.info,isPreview:!0,setQuestionValue:()=>{}}))))}}te.defaultProps={prefixCls:"line-class-monitor-user-list",title:""};var le=(0,O.$j)(pe=>({appType:pe.user.appType,themeColor:pe.advancedSetting.themeColor,qyShield:pe.user.qyShield}),()=>{},null,{forwardRef:!0})((0,g.Z)("translation",{withRef:!0})(te)),W=e(64630),ve=e(64262);class Pe extends l().Component{constructor(){super(...arguments);this.handleTreeSelectChange=oe=>{this.tableRef&&this.tableRef.resetRequestList({departmentId:oe})},this.handlePostSelectChange=oe=>{this.tableRef&&this.tableRef.resetRequestList({postId:oe})},this.getTableRef=oe=>{this.tableRef=oe}}render(){var oe=this.props,he=oe.prefixCls,ye=oe.type,L=oe.sourceType,T=oe.signId,U=oe.title;return l().createElement("div",{className:"".concat(he," line-class-monitor-container-border")},l().createElement("div",{className:"".concat(he,"-header")},l().createElement(ve.Z,{className:"".concat(he,"-header-select"),parentId:"",width:245,checkable:!1,asyncLoad:!0,treeSelect:!0,handleTreeSelectChange:this.handleTreeSelectChange}),l().createElement(W.Z,{disabled:!1,className:"user-panel-monitor-filter-dept choose-by-select cl-search-normal-width",onChange:this.handlePostSelectChange})),l().createElement(le,{ref:this.getTableRef,type:ye,sourceType:L,signId:T,title:U}))}}Pe.defaultProps={prefixCls:"line-class-monitor-user",title:""};var _e=(0,O.$j)()((0,g.Z)()(Pe))},90734:function(Ee,Q,e){"use strict";e.d(Q,{Tq:function(){return O},MI:function(){return g},bp:function(){return p},DD:function(){return b},hM:function(){return S},HE:function(){return P},yt:function(){return m},yy:function(){return N},$W:function(){return K}});var M=e(37055),l=e(10237);function O(C){return l.WY.get({url:M.ZP.lineClass.getOfflineCourseBasicById(C)})}function g(C){var r=C.type,t=C.planId,c=C.departmentId,d=c===void 0?"":c,n=C.postId,a=n===void 0?"":n,i=C.keyword,s=i===void 0?"":i,o=C.courseId,h=C.pageNumber,f=C.pageSize,y=C.signId,R=y===void 0?"":y,H=C.source,A=C.userIds;return l.WY.get({url:M.ZP.lineClass.getMonitorUserList(R),params:{plan_id:t,course_id:o,department_id:d,post_id:a,keyword:s,page_number:h,page_size:f,sign_id:R,source:H,type:r,userIds:A}})}function u(C){return request.get({url:CONFIG.lineClass.getOfflineCourseSignAnalysis(C)})}function I(C){return request.get({url:CONFIG.lineClass.getOfflineSignSetting(C)})}function $(C){var r=C.courseId,t=C.signId,c=C.userId;return request.post({url:CONFIG.lineClass.offlineMarkLeave(r,t),params:{user_id:c}})}function p(){return l.WY.get({url:M.ZP.Common.getServerTime()})}function b(C){var r=C.integral,t=C.courseId,c=C.subsidy,d=C.is_lecturer_subsidy,n=C.lectureId;return l.WY.post({url:M.ZP.lineClass.commitCourseStatement(t),data:{integral:r,subsidy:c,is_lecturer_subsidy:d,lecture_id:n}})}function S(C){var r=C.courseId,t=C.actual_cost,c=C.summary,d=C.summary_attachment_id_list;return l.WY.post({url:M.ZP.lineClass.commitOfflineCourseSummary(r),data:{actual_cost:t,summary:c,summary_attachment_id_list:d}})}function P(C){var r=C.courseId,t=C.lecturer_id;return l.WY.get({url:M.ZP.lineClass.getOfflineCourseSummary(r),param:{lecturer_id:t}})}function E(C){return request.get({url:CONFIG.lineClass.getOfflineDetail(C)})}function _(C){return request.get({url:CONFIG.lineClass.getEvaluateDataByOffline(C)})}function m(C){var r=C.courseId,t=C.type,c=C.evaluate_id,d=C.evaluate_type,n=C.lecturer_id,a=C.post_id,i=C.department_id,s=C.keyword,o=C.page_number,h=C.page_size,f=C.userIds;return l.WY.get({url:M.ZP.lineClass.getEvaluateDetailDataList(r),params:{type:t,evaluate_id:c,evaluate_type:d,lecturer_id:n,post_id:a,department_id:i,keyword:s,page_number:o,page_size:h,userIds:f}})}function N(){return l.WY.post({url:M.ZP.lineClass.studyProjectsImportConfirm()})}function K(C,r,t){return l.WY.post({url:M.ZP.lineClass.attendanceConform(C,r,t)})}},83655:function(Ee,Q,e){"use strict";e.d(Q,{Z:function(){return ne}});var M=e(13062),l=e(71230),O=e(89032),g=e(15746),u=e(43185),I=e(53251),$=e(57663),p=e(71577),b=e(47673),S=e(4107),P=e(63185),E=e(9676),_=e(88986),m=e(57361),N=e(33565),K=e(9754),C=e.n(K),r=e(12924),t=e.n(r),c=e(96486),d=e(49101),n=e(22385),a=e(31097),i=e(43358),s=e(34041),o=e(48736),h=e(27049),f=(Z,v)=>{var w=Z.students,B=Z.defaultValue,Y=B===void 0?0:B,X=Z.onChange,V=Z.t,te=(0,r.useState)(w),le=(0,N.Z)(te,2),W=le[0],ve=le[1],Pe=(0,r.useState)([]),_e=(0,N.Z)(Pe,2),pe=_e[0],oe=_e[1],he=(0,r.useState)(!1),ye=(0,N.Z)(he,2),L=ye[0],T=ye[1];(0,r.useImperativeHandle)(v,()=>({setOpen:T})),(0,r.useEffect)(()=>{if(w){var z=w.map(J=>({value:J.id,key:J.id,title:J.name}));ve(z),parseInt(Y)===0?oe(z.map(J=>J.value)):oe(Y)}},[w,Y]);var U=z=>()=>{if(T(!0),pe.find(ce=>ce===z)){var J=pe.filter(ce=>ce!==z);oe(J),X(J)}else{var Ce=(pe||[]).concat(z);oe(Ce),X(Ce)}},se=z=>{if(z.target.checked){var J=W.map(Ce=>Ce.value);oe(J),X(J)}else oe([]),X([])},me=!(pe.length&&pe.length===W.length),ie=()=>pe&&pe.map(z=>{var J=w.find(Ce=>Ce.id===z);return(0,c.get)(J,"name")}).join(","),re=t().createElement(s.Z,{value:[],style:{width:300},placeholder:ie(),open:L,onClick:()=>{T(!0)}},t().createElement(s.Z.Option,{onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1)},t().createElement("div",null,t().createElement(E.Z,{indeterminate:me,checked:!me,onChange:se},V("lineClassStudy.whole")),t().createElement(h.Z,{style:{margin:"2px 0px"}}))),W.map(z=>{var J=z.title,Ce=z.value,ce=z.key;return t().createElement(s.Z.Option,{onChange:U(Ce),key:ce,value:Ce,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1)},t().createElement(E.Z,{checked:pe.find(De=>De===Ce)},J))}));return t().createElement(t().Fragment,null,t().createElement(a.Z,{title:ie()},re),t().createElement("span",{onMouseEnter:()=>T(!1),style:{marginLeft:10}}," ",V("lineClassStudy.selected")," ",pe.length," ",V("lineClassStudy.people")," "))};f.defaultProps={students:[],onChange:()=>{}};var y=(0,r.forwardRef)(f),R=e(83581),H=e(430),A=e.n(H),G=e(74525),x=Z=>{var v=Z.defaultUrl,w=Z.codeType,B=Z.detail,Y=(0,r.useState)(""),X=(0,N.Z)(Y,2),V=X[0],te=X[1],le=(0,r.useState)(),W=(0,N.Z)(le,2),ve=W[0],Pe=W[1];switch((0,r.useEffect)(()=>{if(w!=="custom"&&B.id){var _e="";te({flag:"offline",scene:"flag=offline&clockTimeId=".concat(B.id,"&qcTime=").concat(_e,"&signStyle=").concat(w)})}},[w,B.id]),(0,r.useEffect)(()=>{v&&(0,R.y)(v).then(_e=>{Pe(_e)})},[v]),w){case"sign_in":return V&&t().createElement(G.Z,{option:V,type:"weixin",canSave:!1});case"sign_out":return V&&t().createElement(G.Z,{option:V,type:"weixin",canSave:!1});case"custom":return t().createElement("img",{src:ve,style:{width:200}});default:return null}};x.defaultProps={defaultUrl:"",codeType:"",detail:{}};var D=x,F=e(17676),j=e(10237),ae=e(37055),ge=(Z,v)=>{var w=Z.signId,B=Z.courseId,Y=Z.t,X=Z.sourceType,V=Z.taskId,te=(0,r.useState)({}),le=(0,N.Z)(te,2),W=le[0],ve=le[1],Pe=(0,r.useState)([]),_e=(0,N.Z)(Pe,2),pe=_e[0],oe=_e[1],he=(0,r.useState)({}),ye=(0,N.Z)(he,2),L=ye[0],T=ye[1],U=(0,r.useRef)(null),se=k=>{var q;return k===void 0||W.userIds==="0"?pe:((q=W.userIds)===null||q===void 0?void 0:q.map)&&W.userIds.map(ue=>pe.find(fe=>fe.id===ue)).filter(ue=>ue)||[]},me=function(){var k=(0,m.Z)(C().mark(function q(ue){var fe,Se,Ie,ee,Te,Ae,Ne,xe;return C().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.prev=0,Oe.next=3,(0,F.BV)(ue);case 3:return Se=Oe.sent,Oe.next=6,j.WY.get({url:ae.ZP.StudyTaskMonitor.getAttendanceData(V),params:{source_type:X}});case 6:Ie=Oe.sent,ee=Se.data.data,Te=Ie.data.data,Ae=Te.find(we=>we.course_id===ue)||{},Ne=(0,_.Z)((0,_.Z)({},ee),{},{signInQrCode:{isShowSignIn:ee.isShowSignIn,id:Ae.id},userIds:ee.userIds==0?ee.userIds:(fe=ee.userIds)===null||fe===void 0?void 0:fe.split(","),isShowCustom:!!ee.qrCodePicture}),xe=(0,c.cloneDeep)(Ne),(Ae.qrcode_type==="dynamic"||!Ae.qrcode_type)&&(xe.isSameAsReverse=!0),Te.length===1&&(xe.signInQrCode.id=Te[0].id),T(Ae),ve(xe),Oe.next=21;break;case 18:Oe.prev=18,Oe.t0=Oe.catch(0),console.error(Oe.t0);case 21:case"end":return Oe.stop()}},q,null,[[0,18]])}));return function(ue){return k.apply(this,arguments)}}();(0,r.useImperativeHandle)(v,()=>{var k,q,ue,fe=se(W.userIds),Se=ee=>ee===void 0?!1:ee,Ie=["isShowLogo","isShowDepartment","isShowPosition","isSameAsReverse","isShowSignOut"];return{getErrorMsg:()=>{if(!fe.length)return Y("lineClassStudy.selectAtLeastOneStudent")},printOptions:(0,_.Z)((0,_.Z)({},Ie.reduce((ee,Te)=>(ee[Te]=Se(W[Te]),ee),{})),{},{isShowSignIn:((k=W.signInQrCode)===null||k===void 0?void 0:k.isShowSignIn)||!1,signId:(q=W.signInQrCode)===null||q===void 0?void 0:q.id,qrCodePicture:W.isShowCustom?W.qrCodePicture:"",qrCodeName:W.isShowCustom?W.qrCodeName:""}),backContent:{signId:(ue=W.signInQrCode)===null||ue===void 0?void 0:ue.id,content:document.getElementById("backContent")},selectStudents:fe,getSetting:me}}),(0,r.useEffect)(()=>{try{if(w){var k=ae.ZP.lineClass.getMonitorUserList(w);j.WY.get({url:k,params:{course_id:B,page_number:1,page_size:100,source:"management",type:X}}).then(q=>{var ue=q.data,fe=ue.data,Se=ue.code;if(Se==="200000"){var Ie=fe.list&&fe.list.map(ee=>{var Te=ee.user_info;return Te});oe(Ie)}})}}catch(q){console.error(q)}},[w,B,X]),(0,r.useEffect)(()=>{me(B)},[B]);var ie=k=>q=>{var ue,fe,Se,Ie,ee=((ue=q.target)===null||ue===void 0?void 0:ue.checked)!==void 0||((fe=q.target)===null||fe===void 0?void 0:fe.value)!==void 0,Te=ee?((Se=q.target)===null||Se===void 0?void 0:Se.checked)||((Ie=q.target)===null||Ie===void 0?void 0:Ie.value):q;(0,c.set)(W,k,Te),ve((0,_.Z)({},W))},re=k=>{var q;((q=k.file.response)===null||q===void 0?void 0:q.msg.toLowerCase())==="ok"&&ve((0,_.Z)((0,_.Z)({},W),{},{qrCodePicture:k.file.response.data.path}))},z=k=>{ve((0,_.Z)((0,_.Z)({},W),{},{userIds:k}))},J=localStorage.getItem("enterpriseLogo"),Ce=()=>{var k,q=L.qrcode_type==="statics";if(!L)return null;if((k=W.signInQrCode)!==null&&k!==void 0&&k.isShowSignIn||W.isShowSignOut||W.qrCodePicture&&W.isShowCustom){var ue,fe,Se,Ie=(0,c.get)(L,"exist_sign_out_config"),ee=(0,c.get)(L,"exist_sign_in_config");return t().createElement(t().Fragment,null,t().createElement("div",{className:A().pictureContainer},((ue=W.signInQrCode)===null||ue===void 0?void 0:ue.isShowSignIn)&&((fe=W.signInQrCode)===null||fe===void 0?void 0:fe.id)&&ee&&q&&t().createElement("div",null,t().createElement(D,{codeType:"sign_in",detail:L,canSave:!1}),t().createElement("div",{className:"".concat(A().alignCenter," ").concat(A().signIn)},Y("lineClassStudy.signIn"))),W.isShowSignOut&&((Se=W.signInQrCode)===null||Se===void 0?void 0:Se.id)&&Ie&&q&&t().createElement("div",null,t().createElement(D,{codeType:"sign_out",detail:L,canSave:!1}),t().createElement("div",{className:"".concat(A().alignCenter," ").concat(A().signOut)},Y("lineClassStudy.signOut"))),W.qrCodePicture&&W.isShowCustom&&t().createElement("div",null,t().createElement(D,{codeType:"custom",defaultUrl:W.qrCodePicture}),t().createElement("div",{className:"".concat(A().alignCenter," ").concat(A().custom)},W.qrCodeName))))}},ce=()=>(0,c.get)(L,"qrcode_type")==="dynamic",De=()=>{var k=ce();if(k||!L.qrcode_type)return null;var q=(0,c.get)(L,"exist_sign_in_config");if(!q)return null;var ue=(0,c.get)(W,"signInQrCode.isShowSignIn"),fe=t().createElement(E.Z,{checked:ue,onChange:ie("signInQrCode.isShowSignIn")},Y("lineClassStudy.signInQrCode"));return fe},Me=()=>t().createElement(t().Fragment,null,t().createElement(E.Z,{checked:W.isShowCustom,onChange:ie("isShowCustom")},Y("lineClassStudy.custom")),W.isShowCustom&&t().createElement("div",{style:{marginTop:10}},t().createElement(S.Z,{style:{marginBottom:10,width:250,marginRight:10},maxLength:16,placeholder:Y("lineClassStudy.pleaseEnterANameWithAMaximumOf16Characters"),onChange:k=>{ve((0,_.Z)((0,_.Z)({},W),{},{qrCodeName:k.target.value}))}}),t().createElement(I.Z,{accept:".jpeg,.png,jpg",onChange:re,data:{access_token:localStorage.token},action:ae.ZP.PostAbility.operateAttachmentUpload(),showUploadList:!1},t().createElement(p.Z,{icon:t().createElement(d.Z,null)},Y("lineClassStudy.selectPicture"))))),Le=()=>{var k=(0,c.get)(L,"exist_sign_out_config"),q=ce();if(q||!L.qrcode_type)return null;if(k)return t().createElement(t().Fragment,null,t().createElement(E.Z,{checked:W.isShowSignOut,onChange:ie("isShowSignOut")},Y("lineClassStudy.signOutQrCode")))},Ze=()=>{U.current.setOpen(!1)},Re=()=>{var k=[{label:Y("lineClassStudy.companyLogo"),name:"isShowLogo"},{label:Y("lineClassStudy.department"),name:"isShowDepartment"},{label:Y("lineClassStudy.postName"),name:"isShowPosition"}];return t().createElement(t().Fragment,null,t().createElement(g.Z,{span:24,className:A().leftContainer},t().createElement("div",{className:A().title},Y("lineClassStudy.frontOfSeatSign")),k.map(q=>{var ue=q.label,fe=q.name;return t().createElement(t().Fragment,null,t().createElement(E.Z,{checked:W[fe],onChange:ie(fe)},ue))})),t().createElement(g.Z,{span:24,className:A().rightContainer},t().createElement(R.Z,{formState:W,logo:J})))},de=()=>t().createElement(t().Fragment,null,t().createElement(g.Z,{span:24,className:A().marginTop},t().createElement("h3",null,Y("lineClassStudy.backOfSeatTag")),t().createElement(t().Fragment,null,t().createElement(E.Z,{checked:W.isSameAsReverse,onChange:ie("isSameAsReverse")},Y("lineClassStudy.sameAsFront"))),W.isSameAsReverse?"":t().createElement(t().Fragment,null,De(),Le(),t().createElement("br",null),Me())),t().createElement(g.Z,{span:24,className:"".concat(A().marginTop," ").concat(A().rightContainer),id:"backContent"},W.isSameAsReverse?t().createElement(R.Z,{logo:J,formState:W}):Ce()));return t().createElement("div",null,t().createElement("h3",{className:A().marginTop,onMouseEnter:Ze},Y("lineClassStudy.selectStudents")),t().createElement(y,{t:Y,ref:U,onChange:z,students:pe,defaultValue:W.userIds}),t().createElement(l.Z,{className:A().signatureContainer,onClick:Ze},Re(),de()))};ge.defaultProps={taskId:"",courseId:"",signId:"",sourceType:""};var ne=(0,r.forwardRef)(ge)},83581:function(Ee,Q,e){"use strict";e.d(Q,{y:function(){return $}});var M=e(33565),l=e(12924),O=e.n(l),g=e(91768),u=e(430),I=e.n(u),$=b=>new Promise((S,P)=>{var E=new Image;E.onload=function(){var _=document.createElement("canvas");_.width=this.naturalWidth,_.height=this.naturalHeight,_.getContext("2d").drawImage(E,0,0);var m=_.toDataURL("image/png");S(m)},E.setAttribute("crossOrigin","Anonymous"),E.src=b,E.onerror=()=>{P(new Error("urlToBase64 error"))}}),p=b=>{var S=b.formState,P=b.logo,E=b.data,_=E===void 0?{}:E,m=b.t,N=_.name!==void 0?_.name:m("lineClassStudy.studentName"),K=_.dept_name!==void 0?_.dept_name:m("lineClassStudy.department"),C=_.post_name!==void 0?_.post_name:m("lineClassStudy.postName"),r=(0,l.useState)(""),t=(0,M.Z)(r,2),c=t[0],d=t[1];return(0,l.useEffect)(()=>{P&&$(P).then(n=>{d(n)})},[P]),O().createElement("div",null,S.isShowLogo&&O().createElement("div",{className:I().logo},O().createElement("img",{src:c})," "),O().createElement("div",{className:"".concat(I().content," ").concat(I().studentName)},N),O().createElement("div",{className:I().footer},S.isShowDepartment&&O().createElement("div",{className:I().deptName},K),S.isShowPosition&&O().createElement("div",{className:I().postName},C)))};Q.Z=(0,g.Z)()(p)},59169:function(Ee,Q,e){"use strict";var M=e(12924),l=e.n(M),O=e(96486),g=e.n(O),u=e(91768),I=e(83581),$=e(430),p=e.n($);class b extends l().Component{constructor(P){super(P);this.generateHtml=()=>{var E=(0,O.get)(this.props,"printConfig.backContent.content"),_=document.getElementById("backContentContainer");E.style.border=0;var m=E.cloneNode(!0);m.style.border=0,_.appendChild(E),_.style.transform="rotate(180deg)"}}componentDidMount(){var P=this.props.printConfig.isSameAsReverse;P||this.generateHtml()}componentDidUpdate(P){var E=(0,O.get)(this.props,"printConfig.backContent.signId"),_=(0,O.get)(P,"printConfig.backContent.signId");E!==_&&content&&this.generateHtml()}renderFront(){var P=this.props.printConfig.selectStudents,E=(0,O.get)(P,"0",{});return l().createElement("div",{className:p().rightContainer},l().createElement(I.Z,{data:E,formState:this.props.printConfig,logo:localStorage.getItem("enterpriseLogo")}))}renderPreviewContent(){var P=this.props,E=P.printConfig.isSameAsReverse,_=P.t;return l().createElement("div",{className:p().signatureContainer},E?l().createElement("div",{className:p().backContentContainer},this.renderFront()):l().createElement("div",{className:p().backContentContainer,id:"backContentContainer"}),l().createElement("div",{className:"frontContentContainer"},this.renderFront()))}render(){var P=this.props,E=P.printConfig.selectStudents,_=P.t;return l().createElement("div",null,l().createElement("div",{id:"printContainer"},l().createElement("div",{className:p().printContainer},this.renderPreviewContent())),l().createElement("div",{className:p().alignRight},"\u6BCF\u9875\u663E\u793A\u4E00\u6761\uFF0C\u5171",E&&E.length,"\u9875"),l().createElement("div",{className:p().alignCenter},_("lineClassStudy.warmTip")))}}b.defaultProps={printConfig:{}},Q.Z=(0,u.Z)("translation",{withRef:!0})(b)},44970:function(Ee,Q,e){"use strict";var M=e(49111),l=e(19650),O=e(96433),g=e(33304),u=e(22385),I=e(31097),$=e(88983),p=e(47933),b=e(63185),S=e(9676),P=e(47673),E=e(4107),_=e(12924),m=e.n(_),N=e(91768),K=E.Z.TextArea;class C extends m().Component{constructor(){super(...arguments);this.setQuestionValue=(t,c)=>{this.props.setQuestionValue(t,c)},this.renderQuestionItem=(t,c)=>{var d=!1,n=this.props,a=n.isPreview,i=n.t;return(t.type==="single"||t.type==="multiple")&&(d=t.options.find(s=>s.is_other==="true")),m().createElement("div",{key:c,className:"questionnaire-view-question"},m().createElement("div",{className:"questionnaire-view-question-title"},t.is_must==="true"?m().createElement("span",{className:"question-must-icon"},"*"):null,t.type==="single"?"\u3010".concat(i("learning.questionnaireAddToolSingle"),"\u3011"):t.type==="multiple"?"\u3010".concat(i("learning.questionnaireAddToolMul"),"\u3011"):null,t.title),t.type==="multiple"?m().createElement("div",{className:"questionnaire-view-question-option"},t.options.map((s,o)=>s.is_other==="true"?null:a?m().createElement(S.Z,{checked:t.answer.normal.indexOf(s.id)!==-1,disabled:a,key:o,className:"option-item"},m().createElement("span",{style:{whiteSpace:"normal",wordBreak:"break-all"}},s.title)):m().createElement(S.Z,{key:o,className:"option-item"},m().createElement("span",{style:{whiteSpace:"normal",wordBreak:"break-all"}},s.title))),d?a?m().createElement(S.Z,{disabled:a,checked:!!t.answer.other,className:"option-item"},i("learning.questionnaireAddQusOptionOther"),t.answer.other?m().createElement(E.Z,{value:t.answer.other,disabled:a,className:"other-input"}):m().createElement(E.Z,{disabled:a,className:"other-input"})):m().createElement(S.Z,{className:"option-item"},i("learning.questionnaireAddQusOptionOther"),m().createElement(E.Z,{className:"other-input"})):null):null,t.type==="single"?m().createElement("div",{className:"questionnaire-view-question-option"},t.options.map((s,o)=>s.is_other==="true"?null:a?m().createElement(p.ZP,{disabled:a,key:o,checked:t.answer.normal.indexOf(s.id)!==-1,className:"option-item"},m().createElement("span",{style:{whiteSpace:"normal",wordBreak:"break-all"}},s.title)):m().createElement(p.ZP,{key:o,checked:o===t.value,onClick:()=>this.setQuestionValue(c,o),className:"option-item"},m().createElement("span",{style:{whiteSpace:"normal",wordBreak:"break-all"}},s.title))),d?a?m().createElement(p.ZP,{disabled:a,checked:!!t.answer.other,className:"option-item"},i("learning.questionnaireAddQusOptionOther"),t.answer.other?m().createElement(E.Z,{value:t.answer.other,disabled:a,className:"other-input"}):m().createElement(E.Z,{disabled:a,className:"other-input"})):m().createElement(p.ZP,{checked:t.value===-1,onClick:()=>this.setQuestionValue(c,-1),className:"option-item"},i("learning.questionnaireAddQusOptionOther"),m().createElement(E.Z,{className:"other-input"})):null):null,t.type==="score"?m().createElement("div",{className:"questionnaire-view-question-score"},a?m().createElement(l.Z,{direction:"vertical"},m().createElement("div",{className:"questionnaire-view-question-score-box"},m().createElement(I.Z,{title:t.options[0].title},m().createElement("div",{className:"questionnaire-view-question-score-title"},t.options[0].title)),m().createElement("div",{className:"questionnaire-view-question-score-rate"},m().createElement(g.Z,{disabled:!0,value:t.answer.normal[0],tooltips:t.options.map((s,o)=>m().createElement("div",{className:"questionnaire-view-question-score-rate-tip",key:o.toString},m().createElement("div",{className:"ellipsis"},s.title),m().createElement("div",null,i("learning.score"),"\uFF1A",s.score))),count:t.options.length})),m().createElement(I.Z,{title:t.options[t.options.length-1].title},m().createElement("div",{className:"questionnaire-view-question-score-title"},t.options[t.options.length-1].title))),t.instruction==!0&&m().createElement(K,{disabled:!0,value:t.answer.instructionContent?t.answer.instructionContent:t.answer.instruction_content,className:"questionnaire-view-question-score-textarea",rows:4,placeholder:"".concat(i("learning.scoringExplanation")).concat(t.must&&t.instruction_must?"\uFF08".concat(i("learning.required"),"\uFF09"):""),maxLength:300})):m().createElement(l.Z,{direction:"vertical"},m().createElement("div",{className:"questionnaire-view-question-score-box"},m().createElement(I.Z,{title:t.options[0].title},m().createElement("div",{className:"questionnaire-view-question-score-title"},t.options[0].title)),m().createElement("div",{className:"questionnaire-view-question-score-rate"},m().createElement(g.Z,{tooltips:t.options.map((s,o)=>m().createElement("div",{className:"questionnaire-view-question-score-rate-tip",key:o.toString},m().createElement("div",null,s.title),m().createElement("div",null,i("learning.score"),"\uFF1A",s.score))),count:t.options.length})),m().createElement(I.Z,{title:t.options[t.options.length-1].title},m().createElement("div",{className:"questionnaire-view-question-score-title"},t.options[t.options.length-1].title))),t.instruction==!0&&m().createElement(K,{className:"questionnaire-view-question-score-textarea",rows:4,placeholder:"".concat(i("learning.scoringExplanation")).concat(t.instruction_must?"\uFF08".concat(i("learning.required"),"\uFF09"):""),maxLength:300}))):null,t.type==="input"?m().createElement("div",{className:"questionnaire-view-question-input"},t.is_multiple_rows==="1"||t.is_multiple_rows==="true"?m().createElement(K,{rows:3,value:a?t.answer.normal[0]:"",disabled:a}):m().createElement(E.Z,{value:a?t.answer.normal[0]:"",disabled:a})):null)}}render(){var t=this.props.questionnaireInfo;return m().createElement("div",null,m().createElement("div",{className:"questionnaire-view-title"},t.title),m().createElement("div",{className:"questionnaire-view-desc"},t.description),m().createElement("div",{className:"questionnaire-view-list"},t.questions.map((c,d)=>this.renderQuestionItem(c,d))))}}Q.Z=(0,N.Z)()(C)},31945:function(Ee,Q,e){"use strict";e.d(Q,{Z:function(){return ne}});var M=e(88983),l=e(47933),O=e(20228),g=e(11382),u=e(62029),I=e(30887),$=e(99210),p=e(59250),b=e(13013),S=e(57663),P=e(71577),E=e(63185),_=e(9676),m=e(71194),N=e(57016),K=e(88986),C=e(34792),r=e(48086),t=e(43358),c=e(34041),d=e(12924),n=e.n(d),a=e(28216),i=e(91768),s=e(57254),o=e(18329);class h extends n().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var v=this.props,w=v.visible,B=v.courseList,Y=v.t;return n().createElement(o.ZP,{visible:w,title:Y("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},n().createElement("div",{className:"referenceWithOtherCourses"},n().createElement("div",{className:"referenceWithOtherCourses__tip"},Y("course.deleteCourseTip")),B.map((X,V)=>n().createElement("div",{className:"referenceWithOtherCourses__item",key:V},B.length>1?"".concat(V+1,"\u3001"):null," ",X))))}}var f=(0,i.Z)()(h),y=e(10237),R=e(63848),H=e(58546),A=e(30389),G=e(54792),x=e(86726),D=e(37055),F=c.Z.Option,j={setClassify:D.ZP.CourseManageList.setClassify,setScore:D.ZP.CourseManageList.setScore,setBatchEmployee:D.ZP.CourseManageList.setBatchEmployee,deleteCourse:D.ZP.CourseManageList.deleteCourse,exportCourseView:D.ZP.CourseManageList.exportCourseView,syncCourse:D.ZP.CourseManageList.syncCourse},ae=Z=>({qyShield:Z.user.qyShield});class ge extends n().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=v=>{this.props.onClassifyChange(v)},this.handleChangeType=v=>{this.props.onTypeChange(v)},this.handleChangeCourseType=v=>{this.props.onCourseTypeChange(v)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=v=>{var w=v.node,B=this.props,Y=B.selectedCourseIds,X=B.selectedProjectIds,V=B.onForceRender,te=B.t,le=w.id;le&&y.qg.post({url:j.setClassify(),data:{course_ids:Y.join(","),project_ids:X.join(","),classify_id:le}}).then(()=>{r.default.success(te("course.setCourseClassifySuccess")),V()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(v=>({scoreProps:(0,K.Z)((0,K.Z)({},v.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(v=>({scoreProps:(0,K.Z)((0,K.Z)({},v.scoreProps),{},{visible:!1})}))},this.handleScoreOk=v=>{var w=v.value;if(w===0){this.handleScoreCancel();return}var B=this.props,Y=B.selectedCourseIds,X=B.selectedProjectIds,V=B.onForceRender,te=B.t;y.qg.post({url:j.setScore(),data:{course_ids:Y.join(","),project_ids:X.join(","),credit:w}}).then(()=>{r.default.success(te("course.setCourseScoreSuccess")),V()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(v=>({employeeProps:(0,K.Z)((0,K.Z)({},v.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=v=>{var w=this.props,B=w.selectedCourseIds,Y=w.selectedProjectIds,X=w.onForceRender,V=w.t,te=v.isAll,le=v.departmentIds,W=v.groupIds,ve=v.postIds,Pe=v.userIds,_e=v.qy_we_chat_vo;y.WY.post({url:j.setBatchEmployee(),data:{course_ids:B.join(","),project_ids:Y.join(","),department_ids:le,group_ids:W,is_all:te,post_ids:ve,user_ids:Pe,qy_we_chat_vo:_e}}).then(()=>{r.default.success(V("personal.batchSetRangeSuccess")),X()}),this.handleEmployeeCancel()},this.showReferenceCourseList=v=>{this.setState(w=>({showReferenceCourseListProps:(0,K.Z)((0,K.Z)({},w.showReferenceCourseListProps),{},{visible:!w.showReferenceCourseListProps.visible,courseList:v||[]})}))},this.actionDelete=()=>{var v=this.props,w=v.selectedCourseIds,B=v.selectedProjectIds,Y=v.list,X=v.onForceRender,V=v.t,te=0,le=0,W=[];if(Y.forEach(ve=>{w.includes(ve.course_id)&&(ve.reference_plan_count>0&&(le+=1),ve.reference_plan_count>0&&W.push(ve.title),ve.can_delete==="true"&&(te+=1))}),le>0)this.showReferenceCourseList(W);else if(te!==w.length)r.default.warning(V("personal.deletePlatformCourseTip"));else{if(B.length>0){r.default.warning(V("personal.deleteProjectCourseTip"));return}N.Z.confirm({title:V("common.tip"),content:V("common.confirmDeleteTitle"),onOk(){y.qg.post({url:j.deleteCourse(),data:{enterpriseId:D.ZP.enterpriseId,ids:w.join(","),project_ids:B.join(",")}}).then(ve=>{var Pe=ve.data,_e=Pe.code,pe=Pe.msg;r.default["".concat(_e===0?"success":"warning")](pe),_e===0&&X()})}})}},this.actionSyncSetting=()=>{this.setState(v=>({asyncProps:(0,K.Z)((0,K.Z)({},v.asyncProps),{},{visible:!0})}))},this.onAsyncChange=v=>{this.setState(w=>({asyncProps:(0,K.Z)((0,K.Z)({},w.asyncProps),{},{value:v.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var v=this.props,w=v.selectedCourseIds,B=v.selectedProjectIds,Y=v.onForceRender,X=v.t,V=this.state.asyncProps;y.qg.post({url:j.syncCourse(),data:{course_ids:w.join(","),project_ids:B.join(","),syncProgress:V.value}}).then(te=>{var le=te.data,W=le.code,ve=le.msg;W===0?(r.default.success(X("setting.setUpSucceed")),Y()):r.default.warning(ve)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var v=this.props,w=v.selectedCourseIds,B=v.selectedProjectIds,Y=v.onForceRender,X=v.t;if(w.concat(B).length>20){r.default.warning(X("courseManage.exportMoreTip"));return}var V=j.exportCourseView(),te={course_Ids:w.join(","),project_Ids:B.join(",")};y.WY.get({url:V,params:te}).then(le=>{le.data.code===200&&r.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),Y(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var v=D.ZP.downLoadCenter.getDownLoadingCount();y.WY.get({url:v,params:{}}).then(w=>{sessionStorage.setItem("downloadingCount",w.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:w.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=v=>{this.props.onCheckboxChange(v.target.checked)},this.handleSharingQueryRowCheckboxChange=v=>{this.props.onSharingCheckboxChange(v.target.checked)},this.renderCondition=()=>{var v=this.props,w=v.prefixCls,B=v.params,Y=v.qyShield,X=v.t,V=B.classify_id?B.classify_id.split(","):[];return n().createElement("div",{className:"".concat(w,"__condition")},this.props.extraDom&&this.props.extraDom(),n().createElement(R.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:V,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),n().createElement(c.Z,{value:B.type,className:"cl-search-normal-width",onChange:this.handleChangeType},n().createElement(F,{value:""},this.props.t("courseManage.allOrigin")),n().createElement(F,{value:"original"},this.props.t("courseManage.originalCourse")),n().createElement(F,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),n().createElement(F,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:n().createElement(c.Z,{value:B.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},n().createElement(F,{value:"all"},this.props.t("courseManage.allType")),n().createElement(F,{value:"course"},this.props.t("common.courseLabel")),n().createElement(F,{value:"microCourse"},this.props.t("common.microCourse")),n().createElement(F,{value:"project"},this.props.t("leftMenuLists.studyProject"))),n().createElement(_.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},X("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&Y==="false"?n().createElement(_.Z,{onChange:this.handleSharingQueryRowCheckboxChange},X("common.sharing")):null)},this.renderActions=()=>{var v=this.props,w=v.prefixCls,B=v.selectedCourseIds,Y=v.selectedProjectIds,X=v.showNum,V=X===void 0?1:X,te=this.props.allowActions,le=(0,x.H3)("delete",te),W=(0,x.H3)("adjustment_classification",te),ve=(0,x.H3)("set_visible",te),Pe=(0,x.H3)("export",te),_e=(0,x.H3)("set_score",te),pe=(0,x.H3)("progressSync",te),oe=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:W},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:Pe},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:_e},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:ve},{name:this.props.t("common.delete"),type:"actionDelete",isShow:le},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:pe}],he=oe.filter(T=>T.isShow),ye=[],L=[];if(he.length)V?(ye=[...he.slice(0,V)],L=[...he.slice(V)]):L=[...he];else return null;return n().createElement("div",{className:"".concat(w,"__action")},ye.map(T=>n().createElement(P.Z,{style:{marginRight:"8px"},key:T.type,disabled:!(B.length+Y.length),onClick:this[T.type]},T.name)),L.length?n().createElement(b.Z,{disabled:!(B.length+Y.length),overlay:this.renderMoreButton({buttons:L})},n().createElement(P.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",n().createElement(s.Z,null))):"")}}renderMoreButton(v){var w=v.buttons,B=this.props,Y=B.selectedCourseIds,X=B.selectedProjectIds;return n().createElement($.Z,{onClick:V=>{var te=V.key;this[te]()}},w.map(V=>V.isShow?n().createElement($.Z.Item,{key:V.type,disabled:!(Y.length+X.length)},n().createElement("span",{className:"cl-pointer"},V.name)):null))}render(){var v=this.props,w=v.prefixCls,B=v.t,Y=v.showRenderCondition,X=Y===void 0?!0:Y,V=v.showRenderActions,te=V===void 0?!0:V,le=this.state,W=le.classifyProps,ve=le.scoreProps,Pe=le.employeeProps,_e=le.showReferenceCourseListProps,pe=le.asyncProps;return n().createElement("div",{className:w},X&&this.renderCondition(),te&&this.renderActions(),n().createElement(H.Z,(0,u.Z)({},W,{title:B("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),n().createElement(G.Z,(0,u.Z)({},ve,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),Pe.visible&&n().createElement(A.Z,(0,u.Z)({},Pe,{title:B("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:B("component.chooseVisibleScope")},isLoading:!Pe.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),pe.visible&&n().createElement(o.ZP,{wrapClassName:"cl-async-selector-modal",visible:pe.visible,title:B("common.scheduleSyncSetting"),okText:B("common.ok"),cancelText:B("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},pe.visible?n().createElement("div",{className:"".concat(w,"__async")},n().createElement("p",null," ",B("common.scheduleSyncSettingTip")),n().createElement(l.ZP.Group,{onChange:this.onAsyncChange,value:pe.value},n().createElement(l.ZP,{value:0},B("common.outSync")),n().createElement(l.ZP,{value:1},B("common.synchronization")))):n().createElement(g.Z,{size:"large"})),n().createElement(f,(0,u.Z)({},_e,{showReferenceCourseList:this.showReferenceCourseList})))}}ge.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var ne=(0,i.Z)()((0,a.$j)(ae)(ge))}}]);
