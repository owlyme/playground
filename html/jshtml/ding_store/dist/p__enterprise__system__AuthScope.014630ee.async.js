(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8958],{4408:function(We,me,s){"use strict";var H=s(12924),D=s.n(H),Q=s(28216),R=s(17780),F=s(38642),J=g=>({userInfo:g.user}),z=g=>{var L=g.title;return(0,R.xX)()&&setTimeout(()=>{document.title=L},0),(0,H.useEffect)(()=>{if(L&&document.title!==L&&setTimeout(()=>{document.title=L},0),(0,F.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var d=document.querySelector(".zoom-report");d&&(d.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[L]),D().createElement(D().Fragment,null)};z.defautProps={title:""},me.Z=(0,Q.$j)(J)(z)},1164:function(We,me,s){"use strict";var H=s(12924),D=s.n(H),Q=s(76651),R=s(38642),F=s(91302),J=z=>{var g=navigator.userAgent.toLocaleLowerCase(),L=localStorage.getItem("enterpriseId"),d=(0,R.lz)(L,z.projectType),U=localStorage.getItem("dingPersonnel"),A=F.bl.includes(U),N=z.target;function C(I){if(N==="self"&&(I.preventDefault(),Q.m8.push(z.to)),A){if(z.projectType==="student"){window.location.href="".concat(d,"/").concat(z.to);return}Q.m8.push(z.to);return}if(dd.version){I.preventDefault();var e="";z.to.includes("?")?e="".concat(d).concat(z.to,"&ddtab=true"):e="".concat(d).concat(z.to,"?ddtab=true"),dd.biz.util.openLink({url:e})}else g.indexOf("lark")!==-1&&(window.location.href="".concat(d).concat(z.to))}return D().createElement("a",{rel:"noreferrer",href:"".concat(z.projectType==="student"?"".concat(d).concat(z.to):"#".concat(z.to)),className:"".concat(z.wrapCls," cl-pointer"),target:g.indexOf("lark")!==-1||A?"_self":z.target||"_blank",onClick:C},z.children)};J.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},J.targetTo=z=>{var g=z.path,L=z.from,d=z.isExternalLink,U=d===void 0?!1:d,A=z.isAsync,N=A===void 0?!1:A,C=z.openName,I=C===void 0?"_blank":C,e=z.projectType,G=e===void 0?"manage":e,W=z.ddTab,de=W===void 0?!0:W,b,x=localStorage.getItem("dingPersonnel"),ne=F.bl.includes(x),ee=navigator.userAgent.toLocaleLowerCase(),se=localStorage.getItem("enterpriseId"),K=(0,R.lz)(se,G),j=localStorage.getItem("appType"),$=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var ue="";if(b=U?"":K,ne&&!U){if(G==="student"){window.location.href="".concat(K).concat(g);return}Q.m8.push(g);return}g.includes("?")?ue="".concat(b).concat(g,"&ddtab=").concat(de):ue="".concat(b).concat(g,"?ddtab=").concat(de),dd.biz.util.openLink({url:ue})}else if(ee.indexOf("lark")!==-1)b=U?"":K,window.location.href="".concat(b).concat(g);else if(j==="wx_app"&&$&&U&&L==="imgText")b=U?"":G==="student"?"".concat(K):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(b).concat(g)});else if(b=U?"":G==="student"?"".concat(K):"#",N){var le=window.open("","_blank");setTimeout(()=>{le.location="".concat(b).concat(g)},100)}else window.open("".concat(b).concat(g),I)},me.Z=J},87312:function(We,me,s){"use strict";var H=s(12924),D=s.n(H),Q=s(91768),R=F=>{var J=F.t;return D().createElement("div",{className:F.className?"".concat(F.className," no-result"):"no-result"},D().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1789886702513426432.png"),className:"no-data-img",alt:""}),D().createElement("p",{className:"no-data-tip"},F.tipText||J("common.empty")))};me.Z=(0,Q.Z)()(R)},88311:function(We,me,s){"use strict";s.d(me,{Z:function(){return ke}});var H=s(62029),D=s(47673),Q=s(4107),R=s(33565),F=s(57361),J=s(34792),z=s(48086),g=s(88986),L=s(43358),d=s(34041),U=s(18106),A=s(88108),N=s(9754),C=s.n(N),I=s(12924),e=s.n(I),G=s(91768),W=s(77043),de=s.n(W),b=s(20228),x=s(11382),ne=s(18721),ee=s.n(ne),se=s(51975),K=s(37055),j={breadNav:[{value:"",label:""}],checkOne:()=>{},checkAll:()=>{},nextLevel:()=>{},changeLevel:()=>{}},$=e().createContext(j),ue={searchResult:[],deptList:[],groupList:[],postList:[],deptUser:[],groupUser:[],postUser:[],clusterList:[],classList:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],initTypeList:()=>{},initTypeUser:()=>{},toggleDisplayItem:()=>{},toggleDisplayList:()=>{},checkListOne:()=>{},checkUserOne:()=>{},removeCheckedUser:()=>{},changeLevel:()=>{},hidePosts:!1,initHidePostsStatus:()=>{},clearSelectedAll:()=>{}},le=e().createContext(ue),we=s(36017),Ce=s(35247),fe=s(60667);class Re extends e().Component{constructor(){super(...arguments);this.changeLevel=(v,u,a,r)=>{v.preventDefault(),this.props.contextData.changeLevel(u,a,r)}}render(){var v=this.props.contextData.breadNav.map((u,a)=>e().createElement(Ce.Z.Item,{key:u.value},e().createElement("span",{className:"bread-nav-item",onClick:r=>this.changeLevel(r,u.value,a,!(ee()(u,"authorized")&&u.authorized==="true"))},e().createElement(fe.Z,{dataType:"departmentName",value:u.value,name:u.label,type:u.sourceType}))));return e().createElement("div",{className:"bread-nav"},e().createElement(Ce.Z,null,v))}}Re.defaultProps={contextData:{breadNav:[]},changeLevel:()=>{}};var Ne=Re,Ve=s(63185),Ue=s(9676),Ze=s(88983),Le=s(47933),Y=s(22385),B=s(31097),Ee=s(57119),ce=s(84874),Oe=s(20136),_e=s(55241),Ae=s(13062),Be=s(71230),be=s(89032),Se=s(15746),pe=s(28216),Pe=s(80430),Ie=s(10237);function Fe(){var _=CONFIG.Role.getUserManageRange();return request.get({url:_})}function ze(_){var v=K.ZP.OrgDialog.getDeptInfoUrl({departmentId:_.departmentId});return delete _.departmentId,Ie.WY.get({url:v,params:_})}function Te(_){var v=K.ZP.OrgDialog.getDeptUsersUrl({departmentId:_.departmentId});return delete _.departmentId,Ie.WY.get({url:v,params:_})}function xe(_){var v=K.ZP.OrgDialog.getUserDetailUrl();return Ie.WY.get({url:v,params:_})}function Ye(_){var v=K.ZP.OrgDialog.getScopeUsersAndDeptsUrl({departmentId:_.departmentId});return delete _.departmentId,Ie.WY.get({url:v,params:_})}function Qe(_){var v=K.ZP.OrgDialog.postDeleteCacheUrl({cacheId:_.cacheId});return delete _.cacheId,Ie.WY.post({url:v,params:_})}var Ke,Xe,qe=(Ke=(0,pe.$j)(_=>{var v=_.user;return{enterpriseName:v.enterpriseName}}),Ke(Xe=class extends e().Component{constructor(){super(...arguments);this.state={loading:!0,cardInfoFinal:this.props.cardInfo},this.renderTitle=()=>{var v=this.props,u=v.cardInfo,a=v.prefixCls,r=v.enterpriseName,h=u.source_type,l=u.user_id,t=u.name;return e().createElement("div",{className:"".concat(a,"__header")},e().createElement("div",{className:"".concat(a,"__header-name")},e().createElement(fe.Z,{type:h,value:l,name:t,dataType:"userName"})),e().createElement("div",{className:"".concat(a,"__header-corp")},r||"/"))},this.renderContent=()=>{var v=this.props,u=v.prefixCls,a=v.t,r=this.state.cardInfoFinal,h=r.user_id,l=r.job_number,t=r.post_names,f=t===void 0?[]:t,k=r.department_infos,S=k===void 0?[]:k,te=()=>!(S instanceof Array)||S.length===0?"/":e().createElement(Pe.Z,{list:S,displayAll:!0,isBlock:!0}),w=()=>!(f instanceof Array)||f.length===0?"/":f.map(re=>e().createElement("div",{key:re},re)),ie=[{lable:"ID",value:h},{lable:a("personal.jobNumber"),value:l||"/"},{lable:a("setting.postLabel"),value:w()},{lable:a("learnRecord.department"),value:te()}];return e().createElement("div",{className:"".concat(u,"__body")},ie.map(re=>e().createElement(Be.Z,{className:"".concat(u,"__body-item"),key:re.value},e().createElement(Se.Z,{className:"".concat(u,"__body-item-lable")},re.lable),e().createElement(Se.Z,{className:"".concat(u,"__body-item-value")},re.value||"/"))))}}render(){var v=this.props,u=v.children,a=v.prefixCls,r=this.state,h=r.loading,l=r.cardInfoFinal;return e().createElement(_e.Z,{overlayClassName:a,placement:"rightTop",title:this.renderTitle,content:h?e().createElement("div",{className:"".concat(a,"__body")},e().createElement(x.Z,null)):this.renderContent,onVisibleChange:t=>{t&&(l.detailInfo===!1?xe({user_id:l.id}).then(f=>{this.setState({loading:!1,cardInfoFinal:(0,g.Z)((0,g.Z)((0,g.Z)({},l),f.data),{},{detailInfo:!0})})}).catch(f=>{console.error(f)}):this.setState({loading:!1}))},mouseEnterDelay:.5},u)}})||Xe);qe.defaultProps={prefixCls:"user-card-popover",cardInfo:{}};var je=(0,G.Z)()(qe),et=["cluster","class"];class Ge extends e().Component{constructor(){super(...arguments);this.checkOne=v=>{v.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=v=>{v.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var v=this.props,u=v.cardInfo,a=v.type,r=v.t;return u.authorized==="false"&&a==="dept"?e().createElement(B.Z,{title:r("orgDialog.scopedAuthorize")},e().createElement(Ee.Z,{style:{marginLeft:"4px"}})):null}}render(){var v=this.props,u=v.t,a=v.cardInfo,r=a===void 0?{}:a,h=v.hidePosts,l=v.type,t=v.userCount,f=null;return this.props.hasNext?(f=e().createElement("div",{className:"next-level"},!(h&&l==="post")&&t>-1?e().createElement("span",{className:"next-level-count"},"(",t,")"):null,et.includes(l)?e().createElement("span",null):e().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},e().createElement(ce.Z,{iconClass:"icon-xiaji1"}),u("component.nextLevel"))),this.props.single?e().createElement("div",{className:"org-tree-item"},e().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),f):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&e().createElement("div",{className:"org-tree-item"},e().createElement(Ue.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),f)):e().createElement("div",{className:"org-tree-item"},this.props.single?e().createElement(Le.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},e().createElement(je,{cardInfo:r},this.props.title)):e().createElement(je,{cardInfo:r},e().createElement(Ue.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title)))}}Ge.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var mt=(0,G.Z)()(Ge),vt=["cluster","class"];class st extends e().Component{constructor(){super(...arguments);this.checkOne=v=>{v.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=v=>{v.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var v=this.props,u=v.cardInfo,a=v.type,r=v.t;return u.authorized==="false"&&a==="dept"?e().createElement(B.Z,{title:r("orgDialog.scopedAuthorize")},e().createElement(Ee.Z,{style:{marginLeft:"4px"}})):null}}render(){var v=this.props,u=v.t,a=v.cardInfo,r=a===void 0?{}:a,h=v.hidePosts,l=v.type,t=v.userCount,f=null;return this.props.hasNext?(f=e().createElement("div",{className:"next-level"},e().createElement("span",{className:"next-level-belle"},!(h&&l==="post")&&t>-1?e().createElement("span",{className:"next-level-count"},"(",t,")"):null,vt.includes(l)?e().createElement("span",null):e().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},e().createElement(ce.Z,{iconClass:"icon-xiaji1"}),u("component.nextLevel")))),this.props.single?e().createElement("div",{className:"org-tree-item"},e().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},e().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),f):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&e().createElement("div",{className:"org-tree-item"},e().createElement(Ue.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},e().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),f)):e().createElement("div",{className:"org-tree-item"},this.props.single?e().createElement(Le.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},e().createElement(je,{cardInfo:r},e().createElement("span",{className:"org-tree-item-title"},this.props.title))):e().createElement(je,{cardInfo:r},e().createElement(Ue.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},e().createElement("span",{className:"org-tree-item-title"},this.props.title))))}}st.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var ct=(0,G.Z)()(st),rt=s(38642),dt=["cluster","class"];class nt extends e().Component{constructor(v){super(v);this.checkAll=(u,a)=>{u.preventDefault(),this.props.contextData.checkAll(a)},this.getIsCheckAll=()=>{var u=[].concat(this.context["".concat(this.props.dataTypeKey,"List")],dt.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")]);if(u.length===0)return!1;var a=u.findIndex(r=>!r.isChecked);return a===-1},this.renderDeptName=(u,a)=>a==="dept"?e().createElement(fe.Z,{type:u.source_type,value:u.id,name:u.name,dataType:"departmentName"}):u.name,this.renderName=u=>e().createElement(fe.Z,{type:u.source_type,value:u.user_id,name:u.name,dataType:"userName"}),this.state={isShowCheckAllEle:!0,whiteList:{belleFlag:(0,rt.UI)("BELLE_CUSTOMER_WHITE")}}}render(){var v=this.state,u=v.isShowCheckAllEle,a=v.whiteList,r=this.props,h=r.t,l=r.dataTypeKey,t=r.disableHidden,f=r.scrollFlag,k=this.context,S=k.maxDeptUserCount,te=k.hidePosts,w=k.onlyPost,ie=k.onlyUser,re=k.single,oe=[],X=this.context["".concat(this.props.dataTypeKey,"List")].map(q=>(oe.push(e().createElement("div",{className:"title-item",key:q.id},this.renderDeptName(q,l))),a.belleFlag&&f?e().createElement(ct,{type:l,key:q.id,cardInfo:q,hasNext:!0,checkable:S&&(q==null?void 0:q.userCount)>S?!1:!(w&&q.post_type==="post_group"||ie),single:re,userCount:q.userCount,isChecked:!!q.isChecked,itemId:q.id,title:this.renderDeptName(q,l),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!q.children,hidePosts:te,disableHidden:t}):e().createElement(mt,{type:l,key:q.id,cardInfo:q,hasNext:!0,checkable:S&&(q==null?void 0:q.userCount)>S?!1:!(w&&q.post_type==="post_group"||ie),single:re,userCount:q.userCount,isChecked:!!q.isChecked,itemId:q.id,title:this.renderDeptName(q,l),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!q.children,hidePosts:te,disableHidden:t}))),he=[],Me=dt.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")].map(q=>(he.push(e().createElement("div",{className:"title-item",key:q.id},this.renderName(q,l))),a.belleFlag&&f?e().createElement(ct,{key:q.id,hasNext:!1,title:this.renderName(q),isChecked:!!q.isChecked,itemId:q.id,cardInfo:q,checkable:!(q.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:t}):e().createElement(mt,{key:q.id,hasNext:!1,title:this.renderName(q),isChecked:!!q.isChecked,itemId:q.id,cardInfo:q,checkable:!(q.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:t}))),He=this.getIsCheckAll(),$e=e().createElement("div",{className:"org-tree-item"},e().createElement(Ue.Z,{checked:He,defaultChecked:!0,onClick:q=>this.checkAll(q,!He)},h("common.all")));return e().createElement("div",{className:"".concat(this.context.oneDisplayType?"org-tree more-height":"org-tree"," ").concat(a.belleFlag&&f?"org-tree-belle":"")},!this.context.single&&this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&X.length===0&&Me.length>0&&u||!this.context.single&&!this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&(X.length>0||Me.length>0)&&u?$e:null,a.belleFlag&&f&&e().createElement("div",{className:"belle-title-scroll"},oe,he),X,Me)}}nt.contextType=le,nt.defaultProps={dataTypeKey:"dept",contextData:{},disableHidden:!1,scrollFlag:!1};var gt=(0,G.Z)()(nt),pt=s(25547),it="999",ot=1,ut=["clusterList","classList"];class lt extends e().Component{constructor(v,u){var a;super(v);a=this,this.getClusterList=()=>{var r=K.ZP.OrgDialog.getClusterList(),h={keyword:""};Ie.WY.get({url:r,params:h}).then(l=>{this.context.initTypeList("clusterList","checkedCluster",l.data.data.map(t=>({name:t.name,userCount:t.user_count,id:t.id,parentId:[""]})))})},this.getClassList=()=>{this.context.initTypeList("classList","checkedClass",[{name:"\u6D4B\u8BD52",userCount:2,id:"2",parentId:[""]},{name:"\u6D4B\u8BD54",userCount:1,id:"41",parentId:[""]}])},this.flatTreeData=(r,h)=>(r.children.forEach(l=>{l.children&&(h[l.id]=l.children,this.flatTreeData(l,h))}),h),this.getDeptList=function(r){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise((l,t)=>{var f=a.state.cacheId;ze({departmentId:r,cache_id:f,filter_auth:h&&!a.props.filterAuthOpen}).then(k=>{var S=k.data.children||[];S.forEach(w=>{w.parentId=k.data.id,w.userCount=w.user_count,w.name=w.department_name,w.all_name=e().createElement("span",null,a.state.contextData.breadNav.map(ie=>e().createElement("span",{key:ie.value},ie.label,"/")),w.department_name)});var te=[];a.context.asyncDeptTree?te=S:te=a.flatTreeData(k.data,{[k.data.id]:S}),a.setState({deptList:te}),a.context.initTypeList("deptList","checkedDept",S),l(k.data)}).catch(k=>{console.error(k),t(k)})})},this.getDeptUserList=function(r){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,l=a.state.cacheId;Te({departmentId:r,cache_id:l,filter_auth:h&&!a.props.filterAuthOpen}).then(t=>{t.data&&t.data.forEach(f=>{f.name=f.user_name,f.detailInfo=!1}),a.context.initTypeUser("deptUser",t.data)}).catch(t=>{console.error(t)})},this.getGroupList=()=>{var r=K.ZP.Organization.getGroupList(),h={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ie.WY.get({url:r,params:h}).then(l=>{l.data.groups=l.data.groups||[],l.data.groups.forEach(t=>{t.parentId=this.state.contextData.breadNav.map(f=>f.value),t.userCount=t.user_count,t.name=t.group_name}),this.setState({groupList:l.data.groups}),this.context.initTypeList("groupList","checkedGroup",l.data.groups)})},this.getGroupUserList=r=>{var h=K.ZP.Organization.getGroupUserList({groupId:r}),l={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ie.WY.get({url:h,params:l}).then(t=>{t.data.users&&t.data.users.forEach(f=>{f.name=f.user_name,f.parentId=this.state.contextData.breadNav.map(k=>k.value)}),this.context.initTypeUser("groupUser",t.data.users)})},this.getPostList=r=>{var h=K.ZP.Organization.getPostTree(),l={filter_auth:!this.props.filterAuthOpen,post_id:r,user_type:this.context.userType};Ie.WY.get({url:h,params:l}).then(t=>{t.data.posts=t.data.posts||[],t.data.posts.forEach(f=>{f.parentId=this.state.contextData.breadNav.map(k=>k.value),f.userCount=f.user_count,f.name=f.post_name}),this.setState({postList:t.data.posts}),this.context.initTypeList("postList","checkedPost",t.data.posts),this.context.initHidePostsStatus(t.data.hide_posts==="true")})},this.getPostUserList=r=>{var h=K.ZP.Organization.getPostUserList({postId:r}),l={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ie.WY.get({url:h,params:l}).then(t=>{t.data.users&&t.data.users.forEach(f=>{f.name=f.user_name,f.parentId=this.state.contextData.breadNav.map(k=>k.value)}),this.context.initTypeUser("postUser",t.data.users)})},this.getUserList=function(r){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;a.props.type==="dept"?a.getDeptUserList(r,h):a.props.type==="group"?a.getGroupUserList(r):a.getPostUserList(r)},this.checkOne=(r,h,l)=>{var t=this.state.checkedCount;if(h==="list"){var f=this.context[this.state.listType].find(S=>S.id===r);f.isChecked=l,f.all_name&&typeof f.all_name=="object"&&delete f.all_name,t=l?t+1:t-1,this.context.checkListOne(f,this.state.checkedListType,this.state.listType)}else if(h==="user"){var k=this.context[this.state.checkedUserType].find(S=>S.id===r);k.isChecked=l,t=l?t+1:t-1,this.context.checkUserOne(k,this.state.checkedUserType)}this.updateCheckedCount(t)},this.updateCheckedCount=r=>{this.setState({checkedCount:r})},this.checkAll=function(){var r=(0,F.Z)(C().mark(function h(l){var t,f,k,S,te,w,ie,re,oe,X,he,Me,He,$e,q;return C().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(t=a.state,f=t.contextData,k=t.cacheId,S=[...f.breadNav].reverse(),te=(0,R.Z)(S,1),w=te[0],ie=w.value,re=[...a.context[a.state.checkedListType]],oe=w.authorized==="false",X={departments:[],users:[]},!oe){tt.next=12;break}return tt.next=9,Ye({departmentId:ie,cache_id:k});case 9:he=tt.sent,Me=he.data,X={departments:Me.departments.map(ye=>(ye.isChecked=l,ye.name=ye.department_name,ye.parentId=ye.parent_ids.split("/"),ye.parentAuthorize=!1,ye.userCount=ye.user_count,ye)),users:Me.users.map(ye=>(ye.isChecked=l,ye.name=ye.user_name,ye.parentAuthorize=!1,ye))};case 12:He=a.context[a.state.listType].map(ye=>{ye.isChecked=l,a.props.type!=="dept"&&re.forEach(at=>{at.parentId.indexOf("".concat(ye.id))!==-1&&(at.isChecked=!1)});var Je=re.findIndex(at=>at.id===ye.id);return Je!==-1?re[Je].isChecked=l:re.push(ye),ye}),$e=[],a.context.checkedUser.forEach(ye=>{if(a.props.type!=="dept"){if(typeof ye.parentId!="undefined"&&ye.parentId.indexOf("".concat(ie))!==-1&&ye.parentId[ye.parentId.length-1]!==ie)return}else{var Je=typeof ye.parentId!="undefined"?ye.parentId:ye.department_ids||[];if(Je.indexOf(ie)!==-1)return}$e.push(ye)}),q=ut.includes(a.state.listType)?[]:a.context[a.state.checkedUserType].map(ye=>{ye.isChecked=l;var Je=$e.findIndex(at=>at.id===ye.id);return Je!==-1?$e[Je].isChecked=l:$e.push(ye),ye}),a.context.toggleDisplayList(a.state.checkedListType,de()(X.departments,re,"id"),a.state.listType,He,a.state.checkedUserType,q,de()(X.users,$e,"id")),a.setState({checkedCount:l?(ut.includes(a.state.listType)?0:a.context[a.state.checkedUserType].length)+a.context[a.state.listType].length:0});case 18:case"end":return tt.stop()}},h)}));return function(h){return r.apply(this,arguments)}}(),this.nextLevel=(r,h,l)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var t=[...this.state.contextData.breadNav,{value:r.id,label:h,authorized:r.authorized}];this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{breadNav:t})},()=>{this.props.type==="post"?this.nextPostLevel(r.id,l):this.props.type==="dept"?this.nextDeptLevel(r.id,!(ee()(r,"authorized")&&r.authorized==="true")):this.context.initTypeList("groupList","checkedGroup",[]),this.getUserList(r.id===it?ot:r.id,!(ee()(r,"authorized")&&r.authorized==="true"))})},this.nextDeptLevel=(r,h)=>{if(this.context.asyncDeptTree)this.getDeptList(r,h);else{var l=this.state.deptList[r];typeof l!="undefined"&&l.forEach(t=>{t.parentId=this.state.contextData.breadNav.map(f=>f.value),t.userCount=t.user_count,t.name=t.department_name}),this.context.initTypeList("deptList","checkedDept",l||[])}},this.nextPostLevel=(r,h)=>{if(h){var l=(0,pt.lK)(this.state.postList,r),t=l.children.map(f=>(f.name=f.post_name,f.parentId=this.state.contextData.breadNav.concat([r]).map(k=>k.value),f.userCount=f.user_count,f));this.context.initTypeList("postList","checkedPost",t)}},this.changeLevel=(r,h,l)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var t=this.props.type==="group"?[this.state.contextData.breadNav[0]]:this.state.contextData.breadNav.slice(0,h+1);this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{breadNav:t}),isSearch:!1},()=>{this.props.type==="dept"?this.changeDeptLevel(r,l):this.props.type==="group"?this.changeGroupLevel(r):this.props.type==="cluster"?this.getClusterList():this.props.type==="class"?this.getClassList():this.changePostLevel(r)})},this.changeDeptLevel=function(r){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(a.context.asyncDeptTree)a.getDeptList(r,h);else{var l=a.state.deptList[r];l.forEach(t=>{t.parentId=a.state.contextData.breadNav.map(f=>f.value),t.userCount=t.user_count,t.name=t.department_name}),a.context.initTypeList("deptList","checkedDept",l)}a.getDeptUserList(r===it?ot:r,h)},this.changePostLevel=r=>{var h=r==="1"?this.state.postList:(0,pt.lK)(this.state.postList,r).children,l=h.map(t=>(t.name=t.post_name,t.parentId=this.state.contextData.breadNav.concat([r]).map(f=>f.value),t.userCount=t.user_count,t));this.context.initTypeList("postList","checkedPost",l),r!=="1"&&this.getPostUserList(r===it?ot:r)},this.changeGroupLevel=r=>{r||(this.context.initTypeUser("groupUser",[]),this.context.initTypeList("groupList","checkedGroup",this.state.groupList))},this.state={postList:[],deptList:[],groupList:[],clusterList:[],classList:[],contextData:{breadNav:[this.props.defaultBreadNav],checkOne:this.checkOne,checkAll:this.checkAll,nextLevel:this.nextLevel,changeLevel:this.changeLevel},checkedCount:0,listType:"".concat(this.props.type,"List"),checkedListType:"checked".concat(this.props.type.charAt(0).toUpperCase()).concat(this.props.type.substr(1)),checkedUserType:"".concat(this.props.type,"User"),isSearch:!1,searchResult:[],loadDept:!1,loadUser:!1,cacheId:u.cacheId}}componentDidMount(){this.props.type!=="group"?this.props.type==="dept"?this.getDeptList("1").then(v=>{this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{breadNav:[{value:v.id,label:v.department_name,sourceType:v.source_type,authorized:v.authorized}]})}),this.getDeptUserList("1")}):this.getPostList("1"):this.getGroupList(1),this.props.type==="cluster"&&this.getClusterList(),this.props.type==="class"&&this.getClassList()}render(){return e().createElement($.Provider,{value:this.state.contextData},e().createElement("div",{className:"org-display-container org-display-dept"},e().createElement(ft,null),this.props.type==="dept"&&(this.state.loadDept||this.state.loadUser)?e().createElement("div",{className:"dept-loading"},e().createElement(x.Z,null)):null,e().createElement(yt,{dataTypeKey:this.props.type,disableHidden:this.props.disableHidden,scrollFlag:this.props.scrollFlag})))}}lt.contextType=le;var ft=(0,se.l)($,Ne),yt=(0,se.l)($,gt);lt.defaultProps={defaultBreadNav:{value:"",label:"\u9177\u6E32\u79D1\u6280"},queryType:1,type:"dept",filterAuthOpen:!1,disableHidden:!1,scrollFlag:!1};var ht=lt,Ct=s(57663),Et=s(71577),ve=s(54549);class o extends e().Component{constructor(){super(...arguments);this.removeItem=(v,u,a,r)=>{v.preventDefault(),u.isChecked=!1,r==="user"?this.context.removeCheckedUser(u):this.context.checkListOne(u,a,"".concat(r,"List"))},this.displayName=(v,u)=>{var a={user:"userName",dept:"departmentName"}[v]||"",r={user:u.unionid||u.user_id||u.userId,dept:u.id}[v]||u.id;return e().createElement(fe.Z,{value:r,name:u.name,type:u.source_type||u.sourceType,dataType:a})},this.displayItem=v=>{var u=this.context,a=u.hidePosts,r=u.showUserCount,h="checked".concat(v.charAt(0).toUpperCase()).concat(v.substr(1)),l=this.context[h].map(t=>t.isChecked&&t.authorized!=="false"?e().createElement(B.Z,{key:t.id,placement:"top",title:t.all_name||"",getPopupContainer:()=>document.querySelector(".checked-display-container")},e().createElement("div",{className:"display-item",key:t.id},this.displayName(v,t),v==="user"||a&&v==="post"?"":r&&t.userCount>-1?"(".concat(t.userCount,")"):"",t.reserve?null:e().createElement("span",{className:"display-item-close",onClick:f=>this.removeItem(f,t,h,v)},e().createElement(ve.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))):null);return l},this.handleClearSelected=()=>{this.context.clearSelectedAll()}}render(){var v=this.props.t,u=["dept","group","post","user","cluster","class"].map(a=>this.displayItem(a));return e().createElement("div",{className:"checked-display-container"},e().createElement("div",{className:"checked-display-container-header"},e().createElement("span",null,v("orgDialog.selected"),":"),e().createElement(Et.Z,{type:"link",onClick:this.handleClearSelected},v("orgDialog.clearAll"))),u)}}o.contextType=le;var c=(0,G.Z)()(o),i=s(67222),n=s(6793),p=Q.Z.Search;class m extends e().Component{constructor(v){var u;super(v);u=this,this.onChange=a=>{var r=this.props.appType,h=localStorage.getItem("qyWechatBook");if(a.preventDefault(),this.setState({value:a.target.value}),!(!a.target.value&&!this.props.showCancel)&&!this.props.disableChange){var l=r==="wx_app"&&h==="true";!(0,rt.eY)("ORG_DIALOG_SEARCH")||l||(0,n.Ds)(this.debounceChange,500)()}},this.handleSearch=(a,r)=>{r.preventDefault(),!(!a&&!this.props.showCancel)&&this.extendReturn(a)},this.debounceChange=()=>{this.extendReturn(this.state.value)},this.extendReturn=function(){var a=(0,F.Z)(C().mark(function r(h){var l,t,f,k,S,te,w,ie,re;return C().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(l=u.props,t=l.appType,f=l.selectType,k=l.appId,S=localStorage.getItem("qyWechatBook"),te="",w=t==="wx_app"&&S==="true"&&k==="9005",!(h&&f==="user"&&w)){X.next=17;break}return X.prev=5,X.next=8,(0,i.F_)(h);case 8:ie=X.sent,re=ie.data,re.success&&(te=re.data),X.next=17;break;case 13:X.prev=13,X.t0=X.catch(5),console.error(X.t0),te="";case 17:u.props.onSearch(h,te);case 18:case"end":return X.stop()}},r,null,[[5,13]])}));return function(r){return a.apply(this,arguments)}}(),this.state={value:""}}render(){var v=this.props,u=v.t,a=v.selectType;return e().createElement("div",{className:"top-search"},e().createElement(p,{placeholder:u(a==="user"?"component.searchStudent":a==="dept"?"component.searchDepartment":a==="post"?"component.searchPost":a==="cluster"?"component.searchCluster":a==="class"?"component.searchClass":"setting.searchGroup"),value:this.state.value,onSearch:this.handleSearch,allowClear:!0,onChange:this.onChange}))}}var y=(0,pe.$j)(_=>({appType:_.user.appType,appId:_.user.appId}))((0,G.Z)()(m)),P=s(87312);class E extends I.Component{constructor(){super(...arguments);this.checkedAll=(v,u)=>{this.props.checkedAll(u)},this.getIsCheckedAll=()=>{var v=this.props.list,u=[].concat(v);if(u.length===0)return!1;var a=u.findIndex(r=>!r.isChecked);return a===-1},this.checkUser=(v,u)=>{u.isChecked=!u.isChecked,this.context.checkUserOne(u,"checkedUser")},this.checkSingleUser=(v,u)=>{u.isChecked=!0,this.context.checkUserOne(u,"checkedUser")},this.checkDept=(v,u)=>{u.isChecked=!u.isChecked,this.context.checkListOne(u,"checkedDept","deptList")},this.checkPost=(v,u)=>{u.isChecked=!u.isChecked,this.context.checkListOne(u,"checkedPost","postList")},this.checkGroup=(v,u)=>{u.isChecked=!u.isChecked,this.context.checkListOne(u,"checkedGroup","groupList")},this.checkedCluster=(v,u)=>{u.isChecked=!u.isChecked,this.context.checkListOne(u,"checkedCluster","clusterList")}}renderList(){var v=this.props,u=v.userListType,a=v.list,r=v.t,h=v.isSingle,l=v.hidePosts;return u==="user"&&!h?a.map(t=>e().createElement("div",{className:"search-result-item",key:t.id,onClick:f=>{this.checkUser(f,t)}},e().createElement(Ue.Z,{checked:t.isChecked},e().createElement(je,{cardInfo:t},e().createElement("span",{className:"user-names"},e().createElement(fe.Z,{dataType:"userName",value:t.user_id,name:t.user_name,type:t.source_type}))),t.department_names&&t.department_names.length>0?e().createElement("span",{className:"user-dept"},e().createElement(Pe.Z,{sourceType:t.source_type,list:t.leaf_department_ids,nameList:t.department_names})):null))):u==="user"&&h?a.map(t=>e().createElement("div",{className:"search-result-item",key:t.id,onClick:f=>{this.checkSingleUser(f,t)}},e().createElement("div",{className:"user-name"},e().createElement(je,{cardInfo:t},e().createElement(fe.Z,{dataType:"userName",value:t.user_id,name:t.user_name,type:t.source_type}))),t.department_names&&t.department_names.length>0?e().createElement("span",{className:"user-name-dept"},e().createElement(Pe.Z,{sourceType:t.source_type,list:t.leaf_department_ids,nameList:t.department_names})):null)):u==="dept"?a.map(t=>e().createElement("div",{className:"search-result-dept-item",key:t.id,onClick:f=>{this.checkDept(f,t)}},e().createElement(Ue.Z,{checked:t.isChecked,className:"department-left"},e().createElement("div",{className:"department-left-department"},e().createElement("div",{className:"user-name"},e().createElement(fe.Z,{dataType:"departmentName",value:t.id,name:t.department_name,type:t.source_type})),t.path&&t.path.length>0?e().createElement(B.Z,{title:t.path.join(">"),mouseEnterDelay:.8},e().createElement("span",{className:"user-name-dept"},e().createElement(Pe.Z,{list:t.department_infos||[],displayAll:!0}))):null)),e().createElement("div",{className:"department-right"},"(",t.userCount,r("common.userUnit"),")"))):u==="post"?a.map(t=>e().createElement("div",{className:"search-result-dept-item",key:t.id,onClick:f=>{this.checkPost(f,t)}},e().createElement(Ue.Z,{checked:t.isChecked,className:"department-left"},e().createElement("div",{className:"department-left-department"},e().createElement("div",{className:"user-name"},t.name),t.path&&t.path.length>0?e().createElement(B.Z,{title:t.path.join(">"),mouseEnterDelay:.8},e().createElement("span",{className:"user-name-dept"},e().createElement("span",null,t.path.join(">")))):null)),!l&&e().createElement("div",{className:"department-right"},"(",t.userCount,r("common.userUnit"),")"))):u==="group"?a.map(t=>e().createElement("div",{className:"search-result-dept-item",key:t.id,onClick:f=>{this.checkGroup(f,t)}},e().createElement(Ue.Z,{checked:t.isChecked,className:"department-left"},e().createElement("div",{className:"department-left-department"},e().createElement("div",{className:"user-name"},t.name),t.path&&t.path.length>0?e().createElement(B.Z,{title:t.path.join(">"),mouseEnterDelay:.8},e().createElement("span",{className:"user-name-dept"},e().createElement("span",null,t.path.join(">")))):null)),e().createElement("div",{className:"department-right"},"(",t.userCount,r("common.userUnit"),")"))):u==="cluster"?a.map(t=>e().createElement("div",{className:"search-result-dept-item",key:t.id,onClick:f=>{this.checkedCluster(f,t)}},e().createElement(Ue.Z,{checked:t.isChecked,className:"department-left"},e().createElement("span",{className:"user-name"},t.name)),e().createElement("div",{className:"department-right"},"(",t.userCount,r("common.userUnit"),")"))):null}render(){var v=this.props,u=v.t,a=v.isSingle,r=this.getIsCheckedAll(),h=e().createElement("div",{className:"search-result-all"},e().createElement(Ue.Z,{checked:r,onClick:l=>this.checkedAll(l,!r)},u("common.all")));return e().createElement("div",{className:"search-result-container more-height"},this.props.list.length>0?e().createElement(e().Fragment,null,!a&&h,this.renderList()):e().createElement(P.Z,{tipText:u("component.searchUserEmpty")}))}}E.contextType=le,E.defaultProps={list:[]};var M=(0,G.Z)()(E),Z=s(18329),V=s(65202),T=s(91648),O=A.Z.TabPane,ae=d.Z.Option,ge={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0 20px"},maskClosable:!1};class De extends e().Component{constructor(v){var u;super(v);u=this,this.onCancel=()=>{var a=this.props.onCancel;this.setState({showCancel:!1}),a&&this.props.onCancel()},this.onOk=()=>{var a=this.props.onOk,r=this.state.contextData;this.setState({showCancel:!1});var h=0;if(a){var l=[];r.checkedDept.map(w=>(h+=w.isChecked?w.user_count:0,w.isChecked&&w.authorized!=="false"?l.push((0,g.Z)((0,g.Z)({},w),{},{renderType:"dept"})):null));var t=[];r.checkedPost.map(w=>(h+=w.isChecked?w.user_count:0,w.isChecked?t.push((0,g.Z)((0,g.Z)({},w),{},{renderType:"post"})):null));var f=[];r.checkedGroup.map(w=>(h+=w.isChecked?w.user_count:0,w.isChecked?f.push((0,g.Z)((0,g.Z)({},w),{},{renderType:"group"})):null));var k=[];r.checkedUser.map(w=>{if(!w.reserve)return h+=w.isChecked?1:0,w.isChecked?k.push((0,g.Z)((0,g.Z)({},w),{},{renderType:"user"})):null});var S=[];r.checkedCluster.map(w=>{if(!w.reserve)return h+=w.isChecked?1:0,w.isChecked?S.push((0,g.Z)((0,g.Z)({},w),{},{renderType:"cluster"})):null});var te=[];if(r.checkedClass.map(w=>{if(!w.reserve)return h+=w.isChecked?1:0,w.isChecked?te.push((0,g.Z)((0,g.Z)({},w),{},{renderType:"class"})):null}),h>this.props.maxUserCount){z.default.warn(this.props.beyondLimitTip);return}a({dept:l,post:t,group:f,user:k,cluster:S,classes:te})}},this.getListParentId=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];r.forEach(ie=>{ie.isChecked=!0,ie.parentId=[""],ie.userCount=ie.userCount||ie.user_count||0});var k=a.map(ie=>ie.id),S=l.map(ie=>ie.id);if(k||S){var te=K.ZP.OrgDialog.getDeptParent(),w={query_type:1,dept_ids:k,user_ids:S};Ie.WY.post({url:te,data:(0,g.Z)({},w)}).then(ie=>{var re=ie.data.data;a.forEach(oe=>{oe.isChecked=!0;var X=re.find(he=>he.id===oe.id)||{path:[]};oe.parentId=X.path[0]?X.path[0].split("/").slice(1):[],oe.userCount=X.user_count||oe.userCount||oe.user_count||0}),h.forEach(oe=>{oe.isChecked=!0;var X=re.find(he=>he.id===oe.id)||{path:[]};oe.parentId=X.path[0]?X.path[0].split("/").slice(1):[],oe.userCount=oe.userCount||oe.user_count||0}),l.forEach(oe=>{oe.isChecked=!0;var X=[];re.forEach(he=>{he.id===oe.id&&he.path.map(Me=>{X.push(...Me.split("/").slice(1))})}),oe.parentId=Array.from(new Set(X))}),t.forEach(oe=>{oe.isChecked=!0;var X=re.find(he=>he.id===oe.id)||{path:[]};oe.parentId=X.path[0]?X.path[0].split("/").slice(1):[],oe.userCount=oe.userCount||oe.user_count||0}),f.forEach(oe=>{oe.isChecked=!0;var X=re.find(he=>he.id===oe.id)||{path:[]};oe.parentId=X.path[0]?X.path[0].split("/").slice(1):[],oe.userCount=oe.userCount||oe.user_count||0}),u.setState({contextData:(0,g.Z)((0,g.Z)({},u.state.contextData),{},{checkedDept:a,checkedGroup:r,checkedPost:h,checkedUser:l,checkedCluster:t,checkedClass:f})})})}else r.length>0?u.setState({contextData:(0,g.Z)((0,g.Z)({},u.state.contextData),{},{checkedGroup:r})}):u.setState({contextData:(0,g.Z)((0,g.Z)({},u.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[]})})},this.initHidePostsStatus=a=>{var r=this.state.contextData;this.setState({contextData:(0,g.Z)((0,g.Z)({},r),{},{hidePosts:a})})},this.initTypeList=(a,r,h)=>{h.forEach(l=>{var t=this.findItemIndex(l.id,r);t===-1?l.isChecked=!1:l.isChecked=this.state.contextData[r][t].isChecked}),this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{[a]:h})})},this.initTypeUser=(a,r)=>{var h=r||[...this.state.contextData[a]],l=this.props.reserveUser;h.forEach(t=>{var f=this.findItemIndex(t.id,"checkedUser");l.findIndex(k=>k.id===t.id)!==-1&&(t.reserve=!0),f===-1?t.isChecked=!1:t.isChecked=this.state.contextData.checkedUser[f].isChecked}),this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{[a]:h})})},this.toggleDisplayItem=(a,r)=>{var h=this.findItemIndex(a.id,r);return h===-1?r.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[r]:this.checkListParentId(r,a),checkedUser:a.isChecked?this.checkParentId(this.state.contextData.checkedUser,a.id):this.state.contextData.checkedUser}:{[r]:[...this.state.contextData[r],a]}:r.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[r]:this.checkListParentId(r,a),checkedUser:a.isChecked?this.checkParentId(this.state.contextData.checkedUser,a.id):this.state.contextData.checkedUser}:{checkedUser:this.getNewList(a,"checkedUser",!0),[r]:this.getNewList(a,r)}},this.toggleDisplayList=(a,r,h,l,t,f,k)=>{this.deleteAllName(r),this.deleteAllName(l),this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{[a]:r,[h]:l,[t]:f,checkedUser:k})})},this.deleteAllName=a=>{a.map(r=>(r.all_name&&typeof r.all_name=="object"&&delete r.all_name,r))},this.checkUserOne=(a,r)=>{this.props.single?this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{checkedUser:[a],[r]:r==="checkedUser"?[a]:this.getSingleUserList(a,r)})}):this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),this.toggleDisplayItem(a,r))})},this.dealAuthorizedFalseChecked=function(){var a=(0,F.Z)(C().mark(function r(h){var l,t,f,k,S,te,w,ie,re;return C().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return l=u.state.contextData,t=l.cacheId,f=l.checkedDept,k=l.checkedUser,S={checkedDept:[],checkedUser:[]},X.prev=2,X.next=5,Ye({departmentId:h.id,cache_id:t});case 5:te=X.sent,w=te.data,ie=w.departments,re=w.users,ie.push(h),ie.map(he=>(he.isChecked=!0,he.name=he.department_name,he.parentId=he.parent_ids.split("/"),he.parentAuthorize=!1,he.userCount=he.user_count,he)),re.map(he=>(he.isChecked=!0,he.name=he.user_name,he.parentAuthorize=!1,u.toggleDisplayItem(he,"deptUser"),he)),S=(0,g.Z)((0,g.Z)({},S),{},{checkedUser:de()(re,k,"id"),checkedDept:de()(ie,f,"id")}),X.next=16;break;case 13:X.prev=13,X.t0=X.catch(2),console.error("\u83B7\u53D6\u90E8\u95E8\u7BA1\u8F96\u8303\u56F4\u51FA\u9519",X.t0);case 16:return X.abrupt("return",S);case 17:case"end":return X.stop()}},r,null,[[2,13]])}));return function(r){return a.apply(this,arguments)}}(),this.dealAuthorizedFalseUnChecked=a=>{var r=this.state.contextData,h=r.checkedDept,l=r.checkedUser,t=r.deptUser,f=[],k=h.filter(te=>te.parent_ids.split("/").indexOf(a.id)===-1),S=l.filter(te=>{var w=te.department_ids.indexOf(a.id)===-1;return w||f.push(te.id),w});return{checkedDept:k,checkedUser:S,deptUser:f.length>0?t.map(te=>(f.indexOf(te.id)>-1&&(te.isChecked=!1),te)):t}},this.checkListOne=function(){var a=(0,F.Z)(C().mark(function r(h,l,t){var f;return C().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(f={checkedDept:[],checkedUser:[]},!(h.authorized==="false"&&l==="checkedDept")){S.next=12;break}if(!h.isChecked){S.next=8;break}return S.next=5,u.dealAuthorizedFalseChecked(h);case 5:S.t0=S.sent,S.next=9;break;case 8:S.t0=u.dealAuthorizedFalseUnChecked(h);case 9:f=S.t0,S.next=14;break;case 12:h.parentAuthorize===!1&&h.isChecked===!1&&u.unCheckedParentDept(h,l),f=(0,g.Z)({[t]:u.getNewList(h,t,!1)},u.toggleDisplayItem(h,l));case 14:u.setState({contextData:(0,g.Z)((0,g.Z)({},u.state.contextData),f)});case 15:case"end":return S.stop()}},r)}));return function(r,h,l){return a.apply(this,arguments)}}(),this.removeCheckedUser=a=>{this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{checkedUser:this.getNewList(a,"checkedUser"),deptUser:this.getNewList(a,"deptUser"),postUser:this.getNewList(a,"postUser"),groupUser:this.getNewList(a,"groupUser"),searchResult:this.getNewList(a,"searchResult")})})},this.unCheckedParentDept=(a,r)=>{var h=this.state.contextData.checkedDept,l=h.filter(k=>k.authorized==="false"&&r==="checkedUser"?a.department_ids.indexOf(k.id)>-1:r==="checkedDept"?a.parentId.indexOf(k.id)>-1:!1),t=(0,R.Z)(l,1),f=t[0];f&&(f.isChecked=!1,this.toggleDisplayItem(f,"checkedDept"),this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{checkedDept:l})}))},this.checkListParentId=(a,r)=>{var h=[...this.state.contextData[a]],l=this.findItemIndex(r.id,a);return h.forEach(t=>{t.id!==r.id&&t.parentId.indexOf("".concat(r.id))!==-1?t.isChecked=!1:t.id===r.id&&(t.isChecked=r.isChecked)}),l===-1&&h.push(r),h},this.checkParentId=(a,r)=>{var h=[];return a.forEach(l=>{var t=typeof l.parentId!="undefined"?l.parentId:l.department_ids||[];t.indexOf(r)===-1&&h.push(l)}),h},this.getNewList=(a,r,h)=>{var l=[...this.state.contextData[r]],t=this.findItemIndex(a.id,r);return t===-1?h&&l.push(a):l[t].isChecked=a.isChecked,l},this.getSingleUserList=(a,r)=>{var h=[...this.state.contextData[r]];return h.forEach(l=>{l.id===a.id?l.isChecked=a.isChecked:l.isChecked=!1}),h},this.findItemIndex=(a,r)=>this.state.contextData[r].findIndex(h=>h.id===a),this.clearTabPanelList=(a,r)=>{this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{[a]:[],[r]:[]})})},this.getTabs=()=>{var a=[],r,h,l=this.props,t=l.t,f=l.filterAuthOpen,k=l.disableHidden,S=l.scrollFlag,te=this.state.contextData,w=te.canUseGroups,ie=te.canUseClass;return this.state.displayType.forEach(re=>{switch(re){case"dept":a.push({label:t("component.orgDialogDeptLabel"),key:"dept",defaultBreadNav:{value:"",label:"",sourceType:""},queryType:1});break;case"group":a.push({label:t("component.orgDialogGroupLabel"),key:"group",queryType:2,defaultBreadNav:{value:"",label:t("component.userGroup")}});break;case"post":a.push({label:t("component.orgDialogPostLabel"),key:"post",defaultBreadNav:{value:"1",label:t("common.post")},queryType:3});break;case"cluster":w&&a.push({label:t("component.orgDialogClusterLabel"),key:"cluster",defaultBreadNav:{value:"",label:""},queryType:4});break;case"class":ie&&a.push({label:t("component.orgDialogClassLabel"),key:"class",defaultBreadNav:{value:"",label:""},queryType:5});break}}),a.length===1?h=e().createElement(ht,{defaultBreadNav:a[0].defaultBreadNav,queryType:a[0].queryType,type:a[0].key,filterAuthOpen:f,disableHidden:k,scrollFlag:S}):(r=a.map(re=>e().createElement(O,{tab:re.label,key:re.key},e().createElement(ht,{defaultBreadNav:re.defaultBreadNav,queryType:re.queryType,type:re.key,filterAuthOpen:f,disableHidden:k,scrollFlag:S}))),h=e().createElement(A.Z,null,r)),h},this.handleSearch=(a,r)=>{var h=this.state.selectType;h==="user"?this.getUserList(a,r):h==="dept"?this.getDeptList(a):h==="post"?this.getPostList(a):h==="cluster"?this.getClusterResult(a):h==="class"?this.getClassResult(a):this.getGroupList(a)},this.getClusterResult=a=>{var r=K.ZP.OrgDialog.getClusterList(),h={keyword:a};Ie.WY.get({url:r,params:h}).then(l=>{this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedCluster",l.data.data.map(t=>({name:t.name,userCount:t.user_count,id:t.id,parentId:[""]})))})},this.getUserList=(a,r)=>{var h=K.ZP.OrgDialog.getUserByName(),l={user_name:r===""?a:"",filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType,userIds:r};Ie.WY.get({url:h,params:l}).then(t=>{t.data.users&&t.data.users.forEach(f=>{f.name=f.user_name}),this.setState({showCancel:!0}),this.initTypeUser("searchResult",t.data.users||[])})},this.getDeptList=a=>{var r=K.ZP.Organization.queryDept(),h={department_name:a,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ie.WY.get({url:r,params:h}).then(l=>{l.data.departments&&l.data.departments.forEach(t=>{t.name=t.department_name,t.parentId=t.parent_ids?t.parent_ids.split("/"):[],t.userCount=t.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedDept",l.data.departments||[])})},this.getPostList=a=>{var r=K.ZP.Organization.addPost(),h={post_name:a,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ie.WY.get({url:r,params:h}).then(l=>{l.data.posts&&l.data.posts.forEach(t=>{t.name=t.post_name,t.parentId=t.parent_id?t.parent_id.split("/"):[],t.userCount=t.user_count}),this.setState({hidePosts:l.data.hide_posts,showCancel:!0}),this.initTypeList("searchResult","checkedPost",l.data.posts||[])})},this.getGroupList=a=>{var r=K.ZP.Organization.getGroupList(),h={group_name:a,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ie.WY.get({url:r,params:h}).then(l=>{l.data.groups&&l.data.groups.forEach(t=>{t.name=t.group_name,t.parentId=t.parent_id?t.parent_id.split("/"):[],t.userCount=t.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedGroup",l.data.groups||[])})},this.checkAllResult=a=>{var r=this.state,h=r.selectType,l=r.contextData,t="checked".concat(h.charAt(0).toUpperCase()).concat(h.substr(1)),f=[...l[t]],k=l.searchResult.map(te=>{te.isChecked=a;var w=f.findIndex(ie=>ie.id===te.id);return w!==-1?f[w].isChecked=a:f.push(te),te}),S=f;this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{[t]:S,searchResult:k})})},this.clearSelectedAll=()=>{var a=this.state.contextData,r=a.checkedDept,h=a.checkedGroup,l=a.checkedPost,t=a.checkedUser,f=a.checkedCluster,k=a.checkedClass,S=a.deptList,te=a.groupList,w=a.postList,ie=a.clusterList,re=a.classList,oe=a.deptUser,X=a.groupUser,he=a.postUser,Me=He=>(He.forEach($e=>{$e.isChecked=!1}),He);this.setState({contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],deptList:r.length>0?Me(S):S,groupList:h.length>0?Me(te):te,postList:l.length>0?Me(w):w,clusterList:f.length>0?Me(ie):ie,classList:k.length>0?Me(re):re,deptUser:t.length>0?Me(oe):oe,groupUser:t.length>0?Me(X):X,postUser:t.length>0?Me(he):he})})},this.handleCancel=()=>{this.setState({showCancel:!1})},this.handleSelectChange=a=>{this.setState({selectType:a,contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{searchResult:[]})})},this.state={title:v.title||v.t("component.chooseAssignScope"),displayType:v.displayType?v.displayType:["dept"],selectType:"user",showCancel:!1,hidePosts:!1,contextData:{showUserCount:v.showUserCount,deptList:[],groupList:[],postList:[],clusterList:[],classList:[],deptUser:[],groupUser:[],postUser:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[],onlyUser:v.onlyUser,onlyDept:v.onlyDept,onlyPost:v.onlyPost,canUseGroups:v.useGroups,canUseClass:v.useClass,single:v.single,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,userType:this.props.userType,initTypeList:this.initTypeList,initTypeUser:this.initTypeUser,toggleDisplayItem:this.toggleDisplayItem,toggleDisplayList:this.toggleDisplayList,checkListOne:this.checkListOne,checkUserOne:this.checkUserOne,removeCheckedUser:this.removeCheckedUser,clearTabPanelList:this.clearTabPanelList,maxDeptUserCount:v.maxDeptUserCount,hidePosts:!1,initHidePostsStatus:this.initHidePostsStatus,cacheId:(0,T.Z)(),clearSelectedAll:this.clearSelectedAll}}}componentDidUpdate(v){if(v.visible!==this.props.visible&&this.props.visible){var u=this.props.initData,a=u.dept,r=u.group,h=u.post,l=u.user,t=u.cluster,f=u.classes;console.warn(l,"user");var k=this.props,S=k.reserveUser,te=k.t,w=k.onlyDept,ie=k.onlyPost;S.forEach(re=>{re.reserve=!0}),this.setState({title:this.props.title||te("component.chooseAssignScope"),displayType:this.props.displayType?this.props.displayType:["dept"],selectType:ie?"post":w?"dept":"user",contextData:(0,g.Z)((0,g.Z)({},this.state.contextData),{},{deptList:[],groupList:[],postList:[],deptUser:[],clusterList:[],classList:[],groupUser:[],postUser:[],searchResult:[],onlyUser:this.props.onlyUser,onlyDept:this.props.onlyDept,canUseGroups:this.props.useGroups,canUseClass:this.props.useClass,onlyPost:this.props.onlyPost,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,cacheId:(0,T.Z)()})},()=>{this.getListParentId(a,r,h,l.concat(S),t,f)})}}componentWillUnmount(){Qe({cacheId:this.state.contextData.cacheId}).then(()=>{console.warn("\u6E05\u9664\u7F13\u5B58\u6210\u529F")}).catch(v=>{console.error("\u6E05\u9664\u7F13\u5B58\u5931\u8D25",v)})}render(){var v=this.getTabs(),u=this.props,a=u.t,r=u.onlyUser,h=u.onlyDept,l=u.onlyPost,t=u.displayType,f=u.useGroups,k=u.useClass,S=u.onlyChoosePost,te=(0,V.p)(),w=this.state,ie=w.showCancel,re=w.selectType,oe=w.hidePosts;return ge.okText=this.props.okText||a("common.ok"),e().createElement(Z.ZP,(0,H.Z)({},ge,this.props.modalConfig,{visible:this.props.visible,title:this.state.title,wrapClassName:[this.props.className,"cl-org-modal"],onCancel:this.onCancel,onOk:this.onOk}),e().createElement(le.Provider,{value:this.state.contextData},e().createElement("div",{className:"cl-org"},e().createElement("div",{className:"cl-org-left"},this.props.visible?e().createElement("div",{className:"cl-org-left__top"},e().createElement(Q.Z.Group,{compact:!0},e().createElement(d.Z,{className:"cl-org-left__top__select",value:re,style:{width:80},onChange:this.handleSelectChange},e().createElement(ae,{value:"user",disabled:h||l||S},a("authGroup.userLabel")),e().createElement(ae,{value:"dept",disabled:r||S},a("setting.deptLabel")),e().createElement(ae,{value:"post",disabled:!l&&(h||r)||t.length===1},a("common.post")),e().createElement(ae,{value:"group",disabled:h||r||t.length===1||S},a("component.userGroup")),f?e().createElement(ae,{value:"cluster"},a("component.useCluster")):null,k?e().createElement(ae,{value:"class"},a("component.useClass")):null),e().createElement(y,{selectType:re,onSearch:this.handleSearch,showCancel:ie,disableChange:this.props.disableChange})),ie?e().createElement("div",{className:"cl-org-left__top__cancel",onClick:this.handleCancel,style:{color:te}},a("common.cancel")):null):null,ie?e().createElement(M,{isSingle:this.props.single,list:this.state.contextData.searchResult,userListType:re,checkedAll:this.checkAllResult,hidePosts:oe}):v),e().createElement("div",{className:"cl-org-right"},e().createElement(c,null)))))}}De.defaultProps={visible:!0,showUserCount:!0,displayType:["dept","group","post","cluster","class"],initData:{dept:[],post:[],group:[],user:[],cluster:[],classes:[]},reserveUser:[],onlyUser:!1,onlyDept:!1,onlyPost:!1,useGroups:!1,useClass:!1,asyncDeptTree:!0,userType:"active",single:!1,maxUserCount:Infinity,filterAuthOpen:!1,disableHidden:!1,beyondLimitTip:"",onOk:()=>{},modalConfig:{},maxDeptUserCount:0,onlyChoosePost:!1,scrollFlag:!1};var ke=(0,G.Z)()(De)},99891:function(We,me,s){"use strict";var H=s(12924),D=s.n(H),Q=s(28216),R=s(91768),F=s(37055),J=s(10237),z=s(60667);class g extends D().PureComponent{constructor(U){super(U);this.getWaterMarkText=A=>{var N=this.props.userInfo,C=N.jobNumber,I=localStorage.getItem("waterMarkPostName"),e=[],G=A.find(de=>de.type==="content_setting"),W=A.find(de=>de.type==="content_custom");return G.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),W.param.checked==="true"&&W.param.comment[0]!==""&&this.setState({commentText:W.param.comment[0]}),G.param.comment.indexOf("position")!==-1&&I&&I!==""&&e.push("".concat(I)),G.param.comment.indexOf("jobnumber")!==-1&&C&&C!==""&&e.push("".concat(C)),e.join("-")},this.getWaterMarkApplication=A=>{var N=this.props.scenes,C=A.find(I=>I.type==="application_scenario");C.param.comment.indexOf(N)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=A=>{var N=A.find(C=>C.type==="dispersive");this.setState({isDispersive:N.param.checked==="true"})},this.getDynamicSet=()=>{var A=F.ZP.advancedSetting.dynamicWaterMarkNew(),N={access_token:window.localStorage.getItem("token")};J.WY.get({url:A,params:N}).then(C=>{var I=JSON.parse(C.data.actions);this.setState({waterMarkText:this.getWaterMarkText(I),actions:I}),this.getWaterMarkApplication(I),this.getWaterIsDispersive(I)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var U=localStorage.getItem("waterMarkPostName");U===""||U===null?this.getPostName():this.getDynamicSet()}getPostName(){var U=F.ZP.advancedSetting.getPostName();J.WY.get({url:U}).then(A=>{localStorage.setItem("waterMarkPostName",A.data.post_names[0]||""),this.getDynamicSet()})}render(){var U=this.state,A=U.showWaterMark,N=U.waterMarkCount,C=U.isUserName,I=U.isDispersive,e=U.waterMarkText,G=U.actions,W=U.commentText,de=this.props.userInfo,b=de.name,x=de.unionid,ne=de.sourceType;return D().createElement("div",{className:"common-watermark"},A&&new Array(N).fill(0).map((ee,se)=>D().createElement("div",{key:se,className:"common-watermark-item ".concat(I?"isDispersive":"")},D().createElement("span",{className:"common-watermark-item-content"},W!==""&&D().createElement("span",{className:"item-part"},W),C&&D().createElement("span",null,W!==""&&D().createElement("span",null,"-"),D().createElement(z.Z,{dataType:"userName",value:x,name:b,type:ne})),D().createElement("span",{className:"item-part"},(C||W!=="")&&e!==""&&D().createElement("span",null,"-"),e)))))}}var L=d=>({userInfo:d.user});me.Z=(0,Q.$j)(L)((0,R.Z)()(g))},80430:function(We,me,s){"use strict";var H=s(12924),D=s.n(H),Q=s(60667),R=F=>{var J=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},N=A.department_ids.split("/"),C=A.department_names.split("/"),I=N.map((e,G)=>D().createElement(Q.Z,{key:e,dataType:"departmentName",value:e,name:C[G],type:A.source_type}));return D().createElement(D().Fragment,null,I.map((e,G)=>D().createElement("span",{key:e},e,G===C.length-1?"":"/")))},z=U=>D().createElement(Q.Z,{dataType:"departmentName",value:U.department_id,name:U.department_name,type:U.source_type}),g=()=>{var U=F.list,A=U===void 0?[]:U,N=F.isBlock;if(!A.length)return null;var C=A.map(I=>J(I));return C.length&&C.length>1?D().createElement(D().Fragment,null,C.map((I,e)=>N?D().createElement("div",{key:I},I):D().createElement("span",{key:I},I,e===C.length-1?"":"\uFF0C"))):D().createElement(D().Fragment,null,C[0]||"")},L=()=>{var U=F.list,A=F.nameList,N=F.sourceType,C=F.isBlock,I=U.map((e,G)=>z({department_id:e,department_name:A[G],source_type:N}));return D().createElement(D().Fragment,null,I.map((e,G)=>C?D().createElement("div",{key:e},e):D().createElement("span",{key:e},e,G===I.length-1?"":"\uFF0C")))},d=()=>F.displayAll?g():L();return d()};R.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},me.Z=R},60667:function(We,me,s){"use strict";s.d(me,{Z:function(){return g}});var H=s(33565),D=s(12924),Q=s.n(D),R=s(28216);function F(L){var d=L.type,U=L.openid,A=L.from,N=(0,D.useRef)(null);return(0,D.useLayoutEffect)(()=>{A==="vue"?window.parent.WWOpenData.bind(N.current):WWOpenData.bind(N.current)}),Q().createElement("ww-open-data",{ref:N,type:d,openid:U})}var J=L=>{var d=L.wxWorkApiFlag,U=L.appType,A=L.from,N=(0,D.useState)(!1),C=(0,H.Z)(N,2),I=C[0],e=C[1];(0,D.useEffect)(()=>{var de=localStorage.getItem("qyWechatBook");(U!=="wx_app"||d||de==="false"||A==="vue"||A==="taro")&&e(!0)},[d,U,A]);var G=(0,D.useCallback)(()=>{var de=L.type,b=L.value,x=L.name,ne=x===void 0?"":x;switch(console.warn(L,"props"),de){case"wx_sync":{var ee=L.dataType;return b?Q().createElement(F,{from:A,type:ee,openid:b}):ne}default:return ne}},[L]),W=()=>{var de=L.name,b=L.dataType,x=localStorage.getItem("qyWechatBook");if(b===""||x==="false")return de;if(A==="vue"||A==="taro")return G();switch(L.appType){case"wx_app":return G();default:return de}};return I?W():L.name};J.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var z=L=>({appType:L.user.appType,wxWorkApiFlag:L.user.wxWorkApiFlag}),g=(0,R.$j)(z)(J)},76466:function(We,me,s){"use strict";s.d(me,{Z:function(){return Et}});var H=s(20228),D=s(11382),Q=s(57663),R=s(71577),F=s(62029),J=s(57361),z=s(9754),g=s.n(z),L=s(12924),d=s.n(L),U=s(91512),A=s(68654),N=s(91768),C=s(4412),I=s.n(C);class e extends d().Component{render(){var o=this.props.t;return d().createElement("div",{className:"net-preview"},d().createElement("div",{className:"net-preview-center"},d().createElement("img",{src:I(),alt:"picture"}),d().createElement("h2",null,o("localStorage.tip")),d().createElement("p",null,o("localStorage.banPreview"))))}}var G=(0,N.Z)()(e),W=s(88986),de=s(34792),b=s(48086),x=s(28216),ne=s(21594),ee=s(41225),se=s(10237),K=(ve,o)=>(0,W.Z)({id:ve||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},o),j=K;class $ extends L.Component{constructor(){super(...arguments);this.setupPlayer=o=>{var c=this.props,i=c.onVideoReady,n=i===void 0?()=>{}:i,p=c.playerConfig,m=c.contentType;o&&o==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,W.Z)((0,W.Z)({},p),{},{contentType:m==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:p.source,autoplay:p.autoplay,width:p.width,id:p.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:y=>{y.on("sourceloaded",P=>{var E=P.paramData,M=E.desc,Z=E.definition;y.getComponent("VideoQuality")&&y.getComponent("VideoQuality").setCurrentQuality(M,Z,p.id)}),y.on("ready",()=>{n()}),this.playerInstance=y,this.setPlayerConfig()}}))}}componentDidUpdate(o){o.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(o){this.player&&this.player.seek(o)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(o){this.player.setSpeed(o)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var o=this.props,c=o.onPlay,i=c===void 0?()=>{}:c,n=o.onTimeUpDate,p=n===void 0?()=>{}:n,m=o.onEnd,y=m===void 0?()=>{}:m,P=o.onPause,E=P===void 0?()=>{}:P,M=o.onError,Z=M===void 0?()=>{}:M,V=this.playerInstance;V.on("play",()=>{i()}),V.on("pause",()=>{E()}),V.on("timeupdate",T=>{p(T)}),V.on("ended",()=>{y()}),V.on("error",(0,J.Z)(g().mark(function T(){return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:Z();case 1:case"end":return ae.stop()}},T)})))}render(){var o=this.props.playerConfig;return d().createElement("div",{className:"common-video-player-container"},d().createElement("div",{id:o.id}))}}$.playerInstance=null,$.defaultProps={playerConfig:j(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var ue=$,le=(ve,o)=>(0,W.Z)({id:ve||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},o),we=le;class Ce extends L.Component{constructor(){super(...arguments);this.setupPlayer=o=>{o&&o==="resetPlayer"&&this.player.dispose();var c=this.props,i=c.playerConfig,n=c.onVideoReady,p=n===void 0?()=>{}:n;this.player=new Aliplayer(i,m=>{m.on("sourceloaded",y=>{var P=y.paramData,E=P.desc,M=P.definition;m.getComponent("VideoQuality")&&m.getComponent("VideoQuality").setCurrentQuality(E,M,i.id)})}),this.player.on("ready",()=>{p()})},this.setPlayerConfig=()=>{var o=this.props,c=o.onPlay,i=c===void 0?()=>{}:c,n=o.onTimeUpDate,p=n===void 0?()=>{}:n,m=o.onEnd,y=m===void 0?()=>{}:m,P=o.onPause,E=P===void 0?()=>{}:P,M=o.onError,Z=M===void 0?()=>{}:M;this.player.on("play",()=>{i()}),this.player.on("pause",()=>{E()}),this.player.on("timeupdate",V=>{p(V)}),this.player.on("ended",()=>{y()}),this.player.on("error",(0,J.Z)(g().mark(function V(){return g().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:Z();case 1:case"end":return O.stop()}},V)})))},this.getPlayerContent=o=>{this.playerContainer=o}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(o){o.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(o){this.player.seek(o)}exitFull(){var o=this.player.fullscreenService;o&&o.isFullScreen&&o.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var o=this.props.playerConfig;return d().createElement("div",{className:"common-video-player-container"},d().createElement("div",{id:o.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}Ce.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:we()};var fe=Ce;class Re{constructor(o){this.hasCreated=!1,this.definition="",this.getQuality=o}createEl(o,c){var i=c._options&&c._options.language,n=c._el.id;this.isEn=i&&i==="en-us";var p=(0,ne.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),m=(0,ne.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),y=document.querySelector("#".concat(n," .prism-controlbar"));y.appendChild(p),o.appendChild(m)}setCurrentQuality(o,c,i){var n=document.querySelector("#".concat(i," .current-quality"));n.innerText=o,n.dataset.def=c,this.definition=c;var p=document.querySelector("#".concat(i," .quality-list")),m=p.querySelector(".current");m&&(m.className="");var y=p.querySelector('li[data-def="'.concat(c,'"]'));y&&(y.className="current")}created(o){this._urls=o._urls;var c=o._el.id,i=document.querySelector("#".concat(c," .current-quality")),n=document.querySelector("#".concat(c," .quality-list")),p=document.querySelector("#".concat(c," .quality-modal")),m=this._urls.map(E=>'<li data-def="'.concat(E.definition,'">').concat(E.desc,"</li>"));if(n.innerHTML=m.join(""),this.hasCreated==!1&&this.definition){var y=n.querySelector('li[data-def="'.concat(this.definition,'"]'));y.className="current"}this.hasCreated=!0;var P=null;i.onclick=()=>{n.style.display="block"},i.onmouseleave=()=>{P=setTimeout(()=>{n.style.display="none"},100)},n.onmouseenter=()=>{clearTimeout(P)},n.onmouseleave=()=>{n.style.display="none"},n.onclick=E=>{var M=E.target,Z=M.dataset.def,V=M.innerText;if(Z&&M.className!=="current"){var T=this._urls.find(O=>O.definition===Z);o.loadByUrl(T.Url,o.getCurrentTime(),!0,!0),this.setCurrentQuality(T.desc,T.definition,c),p.style.display="block",p.querySelector("span.current-quality-tag").innerText=T.desc}this.getQuality(Z,V)}}ready(o){var c=o._el.id,i=document.querySelector("#".concat(c," .quality-modal"));i.style.display="none";var n=document.querySelector("#".concat(c," .prism-setting-item.prism-setting-quality"));n&&n.classList.add("player-hidden")}}class Ne{createEl(o,c){var i=c._el.id,n=(0,ne.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),p=document.querySelector("#".concat(i," .prism-controlbar"));p.appendChild(n)}ready(o){var c=o._el.id,i=document.querySelector("#".concat(c," .current-rate")),n=document.querySelector("#".concat(c," .rate-list")),p=null,m=document.querySelector("#".concat(c," .prism-setting-item.prism-setting-speed"));m&&m.classList.add("player-hidden"),i.onclick=()=>{n.style.display="block"},i.onmouseleave=()=>{p=setTimeout(()=>{n.style.display="none"},100)},n.onmouseenter=()=>{clearTimeout(p)},n.onmouseleave=()=>{n.style.display="none"},n.onclick=y=>{var P=y.target,E=P.dataset.rate;if(E){if(o.setSpeed(E),P.className!=="current"){var M=n.querySelector(".current");M&&(M.className=""),P.className="current"}n.style.display="none",i.innerText="".concat(E,"x")}}}}var Ve=s(69164),Ue=s(37055);function Ze(ve){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=Ue.ZP.local.getLocalUrl(ve);return se.WY.get({url:c,params:o})}var Le=s(91648),Y=s(18329),B=s(38642),Ee=s(9849),ce=s(99891);class Oe extends L.Component{constructor(o){super();this.WaterMarkText=o,this.html=document.getElementsByClassName("common-watermark")}createEl(o){setTimeout(()=>{o.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var _e=Oe,Ae=ve=>({userInfo:ve.user});class Be extends L.Component{constructor(o){var c;super(o);c=this,this.onVideoReady=i=>{var n=this.props,p=n.resourceInfo,m=n.mode,y=n.autoPlay,P=n.t,E=p.storageType;i==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(i),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(m==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),m==="preview"&&y&&this.play.play()):E==="ALIBABA_PRIVATE"||E==="LOCAL"?this.updateSource("resetPlayer"):(se.WY.logger({keyword:"video",moduleName:"video-play",msg:P("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var i=this.props,n=i.draggable,p=i.mode,m=i.t,y=i.studyInfo,P=i.needCurrentTime,E=i.onCurrentTime,M=E===void 0?()=>{}:E,Z=y.studyType,V=y.studyId,T=y.resourceId,O=this.state,ae=O.showPreventHang,ge=O.dragSwitch,De=O.showRandomAlert,ke=O.randomAlertDialogVisible,_=this.playingVideo,v=_.oneTime,u=_.popupWindowCount,a=_.maxPlayTime,r=_.progress,h=_.auditionLength,l=_.auditionType,t=_.duration,f=_.recentStart,k=this.play.getCurrentTime(),S=(ae==="OPEN"||De==="OPEN")&&u>0;if(P&&M(k),h>0&&l===2&&k>h&&(this.play.seek(h),b.default.warning(m("component.haveALookOverTip")),this.play.pause()),p==="learn"&&S){var te=t-v*u;if(u>0&&k>te)if(this.play.pause(),De==="OPEN"){if(!ke){var w=(0,Le.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:w},()=>{(0,ee.qp)({popupId:w,planId:V,resourceId:T,type:"popup_start"})}),this.play.exitFull()}}else ae==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((n||r===100)&&(k>0&&(this.playingVideo.recentStart=k),!((Z==="enterprise"||Z==="studyProject")&&ge==="OPEN")))return!1;k>a?k-f>2?(this.playingVideo.recentStart=a,this.play.seek(a),b.default.warning(m("component.preventFastWatchTip"))):(this.playingVideo.recentStart=k,this.playingVideo.maxPlayTime=k):k>0&&k>this.playingVideo.recentStart&&(this.playingVideo.recentStart=k)},this.onPlay=()=>{var i=this.props,n=i.mode,p=i.onPlay,m=p===void 0?()=>{}:p;m();var y=this;n==="learn"&&!y.timer&&(y.timer=setTimeout(function P(){y.saveProgress(),clearTimeout(y.timer),y.timer=setTimeout(P,2e4)},2e4))},this.onPause=()=>{var i=this.props,n=i.studyInfo,p=i.mode,m=n.studyType;clearTimeout(this.timer),this.timer=null,p==="learn"&&(m==="platform"||m==="enterprise"||m==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var i=this.props.mode;i==="learn"&&this.saveProgress()},this.onError=i=>{var n=this.props.resourceInfo,p=n.storageType;(p==="ALIBABA_PRIVATE"||p==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var i=this.props.mode;this.initPlayVideo(),i==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var i=this.state,n=i.showPreventHang,p=i.showRandomAlert,m=this.props,y=m.t,P=m.playingVideo,E=m.studyInfo,M=m.autoPlay,Z=P.recentStart,V=P.duration,T=P.progress,O=E.studyType,ae=(n==="OPEN"||p==="OPEN")&&(O==="studyTask"||O==="enterprise"||O==="studyProject")&&T<100;ae?(p==="OPEN"?this.setState({promptMessage:y("component.preventAlertTip"),dialogVisible:!0}):n==="OPEN"&&this.setState({promptMessage:y("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):M&&(this.play.play(),Math.ceil(Z)<parseInt(V)&&this.play.seek(Z))},this.playerShowPreventHang=()=>{var i=this.playingVideo,n=i.duration,p=i.recentStart,m=0;n>0&&n<180?(m=n/2,this.playingVideo.oneTime=m,p>=m?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):n>=180&&n<600?(m=n/3,this.playingVideo.oneTime=m,p>=2*m?this.playingVideo.popupWindowCount=0:p>=m?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(m=n/4,this.playingVideo.oneTime=m,p>=3*m?this.playingVideo.popupWindowCount=0:p>=2*m?this.playingVideo.popupWindowCount=1:p>=m?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var i=this.props,n=i.playingVideo,p=i.mode;if(p==="learn"){this.playingVideo=(0,W.Z)({},n);var m=n.duration,y=n.progress;this.playingVideo.hasFinished=parseInt(y)===100,this.playingVideo.maxPlayTime=parseInt(m)*parseInt(y)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,J.Z)(g().mark(function i(){var n,p,m,y,P,E,M,Z,V,T,O,ae,ge,De,ke,_,v,u,a,r,h,l,t,f;return g().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(n=c.state,p=n.speedSwitch,m=n.dragSwitch,y=n.whiteList,P=c.props,E=P.resourceInfo,M=P.showQuality,Z=E.contentType,V=E.storageType,T=E.source,O=E.playId,ae=E.playerId,ge=E.showFullScreen,De=ge===void 0?!0:ge,ke=we(ae),ke.components=[],_=typeof T=="object"&&T.hasOwnProperty("FD")&&T.FD.indexOf("m3u8")===-1,M&&_&&Z!=="mp3"&&(V&&V==="PUBLIC_CLOUD"||!V)&&ke.components.push({name:"VideoQuality",type:Re,args:[()=>{c.play.pause(),c.playingVideo.readyCount=0}]}),p==="OPEN"&&ke.components.push({name:"VideoRate",type:Ne}),De&&(v=ke.skinLayout.find(te=>te.name==="controlBar"),v&&v.children.splice(v.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),ke.components.push({name:"VideoWaterMark",type:_e}),u=T.FD,a=T.OD,u.indexOf("http://")>-1&&(u=u.replace("http://","https://")),a.indexOf("http://")>-1&&(a=a.replace("http://","https://")),r=y.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",T.OD=a&&a.indexOf(r)>-1&&a.indexOf(".mp4")>-1?a:u,T.FD=u,h=typeof T!="string"?JSON.stringify(T):T,ke.source=h,m==="OPEN"&&(ke.disableSeek=!0),V!=="ALIBABA_PRIVATE"){S.next=32;break}return S.next=22,(0,ee.BR)(O);case 22:if(l=S.sent,!l){S.next=28;break}ke.source=l,ke.vodRetry=1,S.next=30;break;case 28:return c.setState({showPrivateVodError:!0}),S.abrupt("return");case 30:S.next=38;break;case 32:if(V!=="LOCAL"){S.next=38;break}return S.next=35,Ze(O);case 35:t=S.sent,f=t.data,f.code===0&&(ke.source="".concat(T.FD,"?auth_key=").concat(f.data.auth_key),ke.vodRetry=1);case 38:c.setState({playerConfig:ke});case 39:case"end":return S.stop()}},i)})),this.updateSource=function(){var i=(0,J.Z)(g().mark(function n(p){var m,y,P,E,M,Z,V,T;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(m=c.state.playerConfig,y=c.props.resourceInfo,P=y.storageType,E=y.source,M=y.playId,c.playingVideo.readyCount=0,P!=="ALIBABA_PRIVATE"){ae.next=16;break}return ae.next=7,(0,ee.BR)(M);case 7:if(Z=ae.sent,!Z){ae.next=12;break}Object.assign(m,{source:Z,vodRetry:1}),ae.next=14;break;case 12:return c.setState({showPrivateVodError:!0}),ae.abrupt("return");case 14:ae.next=22;break;case 16:if(P!=="LOCAL"){ae.next=22;break}return ae.next=19,Ze(M);case 19:V=ae.sent,T=V.data,T.code===0&&Object.assign(m,{source:"".concat(E.FD,"?auth_key=").concat(T.data.auth_key),vodRetry:1});case 22:c.setState({playerConfig:m},()=>{c.play.setupPlayer(p)});case 23:case"end":return ae.stop()}},n)}));return function(n){return i.apply(this,arguments)}}(),this.saveProgress=()=>{var i=this.props,n=i.studyInfo,p=i.userInfo,m=p.isLogin,y=p.enterpriseId,P=p.id,E=this.playingVideo,M=E.recentStart,Z=E.duration,V=E.hasFinished,T=Math.ceil(+M);T>Number(Z)&&(T=Number(Z));var O=Math.ceil(T/+Z*100);if((O>100||V)&&(O=100),m){var ae=this.playingVideo,ge=ae.auditionType,De=ae.auditionLength;if(De>0&&ge===2){var ke=Math.ceil(De/Z*100);ke<=O&&(O=ke,T=De)}(0,ee.sH)({studyInfo:n,progress:O,recent_start:T,enterpriseId:y,userId:P}).then(_=>{_&&_.data&&(0,Ve.Z)(_.data.integral_info||"")})}},this.getInfoFromSettings=(0,J.Z)(g().mark(function i(){var n,p,m,y,P,E,M,Z,V;return g().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return n=c.props.studyInfo,p=n.studyType,m=n.projectId,O.next=4,(0,ee.Gw)();case 4:if(y=O.sent,P=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],E=(0,ne.RG)(y,P),p!=="studyProject"){O.next=14;break}return O.next=10,(0,Ee.NU)({id:m});case 10:M=O.sent,Z=M.status,V=M.data,Z===200&&(E.showPreventHang=V.prevent_cut_screen?"OPEN":"CLOSED",E.speedSwitch=V.speed_play?"OPEN":"CLOSED",E.dragSwitch=V.prevent_drag?"OPEN":"CLOSED");case 14:c.setState(E,()=>{c.dealVideoConfig()});case 15:case"end":return O.stop()}},i)})),this.dealAudioPoster=()=>{var i=this.props.resourceInfo.contentType,n=i===void 0?"":i;this.setState({showAudioPoster:n==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var i=this.state.showAudioPoster,n=this.play.playerContainer;i&&n&&(n.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),n.style.backgroundSize="cover")},this.getPlayInstance=i=>{this.play=i},this.handleOk=()=>{this.setState({dialogVisible:!1});var i=this.state.btnType,n=this.playingVideo.recentStart,p=this.props.t;i==="know"?(this.play.play(),this.play.seek(n),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:p("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,J.Z)(g().mark(function i(){var n,p,m,y;return g().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:n=c.props.studyInfo,p=n.studyId,m=n.resourceId,y=c.state.randomAlertUUID,(0,ee.qp)({popupId:y,planId:p,resourceId:m,type:"popup_end"}).then(()=>{c.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),c.playingVideo.popupWindowCount-=1,c.play.play();case 6:case"end":return E.stop()}},i)})),this.renderFooter=()=>{var i=this.state.btnType,n=this.props.t;return d().createElement(R.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(i)},n(i==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var i=this.props.t;return d().createElement(R.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},i("common.ok"))},this.state={playerConfig:we(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:o.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:o.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:o.t("component.randomAlertTip"),randomAlertModal:{title:o.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,B.UI)("CL_VIDEO_BAIYING_COM_CN")}},o.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(o){var c=typeof o.resourceInfo.source!="string"?JSON.stringify(o.resourceInfo.source):o.resourceInfo.source,i=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;c!==i&&i!==""&&this.initInfo()}componentWillUnmount(){var o=this.props.mode;o==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var o=this.state,c=o.playerConfig,i=o.showPrivateVodError,n=o.dialogVisible,p=o.dialogModal,m=o.promptMessage,y=o.randomAlertDialogVisible,P=o.randomAlertModal,E=o.randomAlertTip,M=o.encryptedSwitch,Z=this.props,V=Z.resourceInfo,T=Z.t,O=M==="OPEN"?ue:fe;return d().createElement(L.Fragment,null,d().createElement(O,(0,F.Z)({ref:this.getPlayInstance},V,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:c,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),d().createElement(Y.ZP,(0,F.Z)({visible:n},p,{footer:this.renderFooter()}),d().createElement("div",{className:"video-business-prompt"},m)),d().createElement(Y.ZP,(0,F.Z)({visible:y},P,{footer:this.renderRandomFooter()}),d().createElement("div",{className:"video-player-container__prompt"},E)),i&&d().createElement("div",{className:"video-business-vod-error"},T("privateCloud.docReadError")),d().createElement(ce.Z,{scenes:"video"}))}}var be=(0,x.$j)(Ae,null,null,{forwardRef:!0})((0,N.Z)("translation",{withRef:!0})(Be)),Se=s(94184),pe=s.n(Se),Pe=s(84874),Ie=ve=>({userInfo:ve.user}),Fe={getPravateDocUrl:Ue.ZP.localStorage.getPravateDocUrl};function ze(ve){return JSON.stringify(ve,(o,c)=>(typeof c=="function"&&(c=c.toString()),c))}function Te(ve){var o=parseInt(parseInt(ve,10)/60,10),c=parseInt(parseInt(ve,10)%60,10);return o<10&&(o="0".concat(o)),c<10&&(c="0".concat(c)),"".concat(o,":").concat(c)}class xe extends L.Component{constructor(o){var c;super(o);c=this,this.messageFun=i=>{var n=this.props,p=n.docType,m=n.progress,y=n.studyTimeLimit,P=n.studyTime,E=this.state,M=E.jumpPageTag,Z=E.totalTime,V=E.timeRemaining,T=this.state.previewDocData,O={};try{O=JSON.parse(i.data)}catch(ae){return}switch(O.action){case"preview.ready":this.initDocData();break;case"preview.meta":T.totalPage=O.data.pc||1,T.currentPage=1,this.setState({previewDocData:T},()=>{this.reportStatusInterval()}),y>0?(this.saveProgress(m,P||"1",O.data.pc||1),this.setState({showCountDownContainer:!0})):p==="xlsx"||p==="xls"||T.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(m,P||"1",O.data.pc||1),y>0&&m<100?(this.setState({showCountDown:!0}),p==="xlsx"||p==="xls"?Z=y:Z=y*O.data.pc,V=parseInt(Z*(1-m/100),10),this.setState({timeRemaining:V,totalTime:Z},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(M){M=!1,this.setState({jumpPageTag:M});return}T.currentPage=O.data.pageIndex+1,this.setState({previewDocData:T}),y||this.saveProgress(Math.ceil(T.currentPage/T.totalPage*100),T.currentPage,T.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":b.default.error(O.data.result);break;default:break}},this.initDocData=(0,J.Z)(g().mark(function i(){var n,p,m,y,P,E,M,Z,V,T,O,ae,ge,De;return g().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(c.setState({isShowPrivateError:!1}),n=c.props,p=n.docType,m=n.userInfo,y=n.documentWatermarkSettings,P=n.storageType,E=n.privateDocId,M=m.name,Z=m.jobNumber,V=m.position,T="",O={},P!=="ALIBABA_PRIVATE"){_.next=18;break}return _.prev=6,ae=Fe.getPravateDocUrl(E),_.next=10,se.WY.get({url:ae});case 10:ge=_.sent,De=ge.data,De.code===0?O=De.data||{}:c.setState({isShowPrivateError:!0}),_.next=18;break;case 15:_.prev=15,_.t0=_.catch(6),c.setState({isShowPrivateError:!0});case 18:if(y.indexOf("name")>-1&&(T="".concat(T+M," ")),y.indexOf("position")>-1&&(T="".concat(T+V," ")),y.indexOf("jobnumber")>-1&&(T+=Z),T.length>0?window.sendMessage("preview.init",(0,W.Z)({wmType:1,wmValue:T,wmColor:"rgba(192, 192, 192, 0.4)"},O)):window.sendMessage("preview.init",(0,W.Z)({},O)),p!=="xlsx"&&p!=="ppt"&&p!=="pptx"&&p!=="xls"?c.setState({pageOperateContainerVisible:!0}):c.setState({pageOperateContainerVisible:!1}),!(p==="ppt"||p==="pptx")){_.next=29;break}_.t1=window,_.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},_.t1.sendMessage.call(_.t1,"setConfig",_.t2),_.next=32;break;case 29:_.t3=window,_.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},_.t3.sendMessage.call(_.t3,"setConfig",_.t4);case 32:case"end":return _.stop()}},i,null,[[6,15]])})),this.handleJumpPage=i=>{var n=this.state.previewDocData;n.currentPage=i,this.setState({jumpPageTag:!0,previewDocData:n});var p=i/n.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(p),i,n.totalPage),window.sendMessage("logic.toPage",{pageIndex:i-1})},this.redirectPage=()=>{var i=this.props,n=i.studyTimeLimit,p=i.studyTime,m=0;n===0&&(m=p-1>0?p-1:0),window.sendMessage("logic.toPage",{pageIndex:m})},this.docCountDown=()=>{var i=this.state.timeRemaining,n=this.state,p=n.totalTime,m=n.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{i-=1,this.setState({timeRemaining:i}),i<1&&(this.saveProgress(100,0,m.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var y=(p-i)/p*100;i<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(y),i,m.totalPage)},2e4)},this.saveProgress=(i,n,p)=>{var m=this.props.onSaveProgress;m&&m(i,n,p)},this.reportStatusInterval=()=>{var i=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var n=this.state.previewDocData.currentPage;i&&i({currentPage:n})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=i=>{this.docReader=i},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(o,c)=>{var i=this.docReader.contentWindow;i.postMessage(ze({action:o,data:c}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var o=this.props,c=o.t,i=o.storageType,n=o.privateDocId,p=this.props.aliUrl,m=this.state,y=m.previewDocData,P=m.pageOperateContainerVisible,E=m.timeRemaining,M=m.showCountDown,Z=m.showCountDownContainer,V=m.showPageOperateContainer,T=m.isShowPrivateError;return i==="ALIBABA_PRIVATE"&&(p="https://preview.imm.aliyuncs.com/index.html?docId=".concat(n)),d().createElement("div",{className:"doc-reader-container"},d().createElement("div",{className:"ali-doc-container",style:{paddingBottom:P?"56px":"0"}},d().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:p,id:"aliyunPreview",ref:this.dealPreviewRef}),Z?d().createElement("div",{className:"ali-doc-container__countdown"},M?d().createElement("div",null,d().createElement(Pe.Z,{iconClass:"iconf-tipe",size:"16px"}),c("component.docStillStudy"),d().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",Te(E)," "),c("component.canDone")):d().createElement("div",null,d().createElement(Pe.Z,{iconClass:"iconf-tipe",size:"16px"}),c("component.docHasFinish"))):null,P?d().createElement("div",{className:"ali-doc__operate"},d().createElement("div",{className:pe()(["ali-doc__operate__content",V?"":"ali-doc__operate__hide-content"])},d().createElement("div",{className:"ali-doc__operate__pagination"},d().createElement("div",{className:"ali-doc__operate__pagination__pages"},y.currentPage," / ",y.totalPage),d().createElement("div",{className:"ali-doc__operate__pagination__toggle"},d().createElement("div",{className:"ali-doc__operate__pagination__choose"},d().createElement("span",null,c("component.choosePage"),d().createElement(Pe.Z,{iconClass:"iconf-arrow-under",size:"14px"})),d().createElement("div",{className:"ali-doc__operate__page-list-container"},d().createElement("div",{className:"ali-doc__operate__choose-page"},c("component.fastChoosePage")),d().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:y.totalPage})).map((O,ae)=>d().createElement("li",{key:O,onClick:()=>this.handleJumpPage(ae+1)},ae+1))))),d().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},c("common.collapse"))))),d().createElement("div",{className:pe()("ali-doc__operate__unfold",V?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},c("common.expand"))):null,T&&d().createElement("div",{className:"ali-doc__error"},c("privateCloud.docReadError"))),d().createElement(ce.Z,{scenes:"document"}))}}xe.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var Ye=(0,x.$j)(Ie)((0,N.Z)()(xe)),Qe=ve=>({userInfo:ve.user}),Ke="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),Xe="".concat("https://doc.coolcollege.cn");class qe extends d().Component{constructor(o){var c;super(o);c=this,this.onSaveProgress=(i,n,p)=>{var m=this.props,y=m.mode,P=m.studyInfo,E=m.userInfo,M=E.enterpriseId,Z=E.id;y==="learn"&&(0,ee.sH)({studyInfo:P,progress:i,page_count:p,recent_start:n,enterpriseId:M,userId:Z}).then(V=>{V&&V.data&&(0,Ve.Z)(V.data.integral_info||"")})},this.messageFun=function(){var i=(0,J.Z)(g().mark(function n(p){var m,y,P,E,M,Z;return g().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(p.data!=="local-resource"){T.next=9;break}if(m=c.props.resourceInfo,y=m.storageType,P=m.playId,!(y&&y==="LOCAL")){T.next=9;break}return T.next=6,Ze(P);case 6:E=T.sent,M=E.data,M.code===0&&(Z=document.getElementById("local-resource-box"),Z.contentWindow.postMessage({msg:"local-auth-key",authKey:M.data.auth_key},"*"));case 9:case"end":return T.stop()}},n)}));return function(n){return i.apply(this,arguments)}}(),this.getInfoFromSettings=(0,J.Z)(g().mark(function i(){var n,p,m;return g().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,ee.Gw)();case 2:n=P.sent,p=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],m=(0,ne.RG)(n,p),c.setState(m,()=>{c.initDocPage(c.props)});case 6:case"end":return P.stop()}},i)})),this.initDocPage=(0,J.Z)(g().mark(function i(){var n,p,m,y,P,E,M,Z,V,T,O,ae,ge,De,ke,_,v,u,a,r,h,l,t,f,k,S,te,w,ie,re,oe,X,he,Me,He=arguments;return g().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(n=He.length>0&&He[0]!==void 0?He[0]:{},p=n.resourceInfo,m=n.mode,y=n.studyInfo,P=n.userInfo,E=c.state.documentPlayerMode,M=p.docType,Z=p.docTitle,V=p.url,T=p.studyTimeLimit,O=p.studyTime,ae=p.aliUrl,ge=p.progress,De=p.storageType,ke=p.playId,_=y.studyType,v=y.courseId,u=y.studyId,a=y.resourceId,r=P.enterpriseId,h=P.id,l=P.isLogin,t=P.token,f=E==="compat"&&ae.indexOf("preview.imm.aliyun")>-1||De==="ALIBABA_PRIVATE",!f){q.next=11;break}c.setState({showAliReader:!0}),q.next=31;break;case 11:if(k=(0,ee.sH)({enterpriseId:r,userId:h,token:t,studyInfo:y},!0),S=_==="studyTask"?2:1,te=Ue.ZP.SaveProgress.reportStatusInterval(y),w={isSaveProgress:l&&m==="learn"&&k,isSaveRecord:!1,access_token:t,userId:h,hostUrl:Ke,courseId:v,resourceId:a,courseType:1,planId:u,studyTimeLimit:T,studyTime:O,saveProgressUrl:k,type:"eapp",progress:ge,saveRecordProgressUrl:te,actionType:S},!(De&&De==="LOCAL")){q.next=26;break}return q.next=18,Ze(ke);case 18:if(ie=q.sent,re=ie.data,re.code!==0){q.next=25;break}w.auth_key=re.data.auth_key,w.url=V,q.next=26;break;case 25:return q.abrupt("return");case 26:oe=JSON.stringify(w),X="".concat(Z,".").concat(M).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),he="".concat(Xe,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(oe),"&furl=").concat(V,"?attname=").concat(X),De&&De==="LOCAL"&&(Me="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),he="".concat(Me,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(oe),"&furl=").concat(V,"?attname=").concat(X)),c.setState({encodeUrl:he});case 31:case"end":return q.stop()}},i)})),this.handleReportStatusInterval=i=>{var n=i.currentPage,p=this.props,m=p.resourceInfo,y=p.mode,P=p.studyInfo,E=p.userInfo,M=m.type,Z=P.courseId,V=P.studyId,T=P.resourceId,O=E.enterpriseId,ae=E.id,ge=E.isLogin,De="",ke="",_=0,v=!1;switch(M){case"enterprise":_=1,v=!0;break;case"study":De=V,_=2,v=!0;break;case"project":ke=V,_=1,v=!0;break;default:break}if(!(!v||!ge)){var u={plan_id:De,enterprise_id:O,user_id:ae,course_id:Z,project_course_id:ke,resource_id:T,current_page:n,action_type:_,send_time:Date.parse(new Date)};y==="learn"&&(0,ee.Xc)(P,u)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(o){this.initDocPage(o)}render(){var o=this.props.resourceInfo,c=this.state,i=c.encodeUrl,n=c.documentWatermarkSettings,p=c.showAliReader,m=o.docType,y=o.type,P=o.studyTimeLimit,E=o.studyTime,M=o.aliUrl,Z=o.progress,V=o.storageType,T=o.playId;return p?d().createElement(Ye,{privateDocId:T,storageType:V,aliUrl:M,docType:m,progress:Z,studyTime:E,studyTimeLimit:P,documentWatermarkSettings:n,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:y}):d().createElement("div",{className:"doc-reader-container"},d().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:i,frameBorder:"0",allowFullScreen:!0}),d().createElement(ce.Z,{scenes:"document"}))}}var je=(0,x.$j)(Qe)(qe),et=s(38979),Ge=s(90706),mt=s(12968),vt=s(44208),st=s(60667),ct=ve=>({userInfo:ve.user});class rt extends d().Component{constructor(){var o;super(...arguments);o=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var c=this.props,i=c.studyInfo,n=c.mode,p=c.userInfo,m=p.enterpriseId,y=p.id;n==="learn"&&(0,ne.Gp)({studyInfo:i,enterpriseId:m,userId:y})},this.getInfoFromSettings=(0,J.Z)(g().mark(function c(){var i,n,p;return g().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ee.Gw)();case 2:i=y.sent,n=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],p=(0,ne.RG)(i,n),o.setState(p,()=>{o.renderWatermark()});case 6:case"end":return y.stop()}},c)})),this.renderWatermark=()=>{var c=this.props.userInfo,i=this.state.imageWatermark,n=c.name,p=c.unionid,m=c.sourceType,y=c.jobNumber,P=c.position,E=[];i.indexOf("name")>-1&&E.push(d().createElement(st.Z,{dataType:"userName",value:p,name:n,type:m})),i.indexOf("position")>-1&&E.push(d().createElement("span",null,P)),i.indexOf("jobnumber")>-1&&E.push(d().createElement("span",null,y)),i.length>0&&this.setState({watermark:E.map((M,Z)=>d().createElement("span",{key:Z},M))})},this.handleError=c=>{var i=this.props.onError;i&&i(c)},this.getImageUrl=(0,J.Z)(g().mark(function c(){var i,n,p,m,y,P,E,M,Z,V;return g().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(i=o.props,n=i.resourceInfo,p=i.t,m=n.playId,y=n.url,P=n.storageType,E=y,!P){O.next=21;break}if(P!=="ALIBABA_PRIVATE"){O.next=15;break}return O.next=7,(0,ee.J7)(m);case 7:if(M=O.sent,!M){O.next=12;break}E=M,O.next=13;break;case 12:return O.abrupt("return",b.default.info(p("privateCloud.docReadError")));case 13:O.next=21;break;case 15:if(P!=="LOCAL"){O.next=21;break}return O.next=18,Ze(m);case 18:Z=O.sent,V=Z.data,V.code===0&&(E="".concat(y,"?auth_key=").concat(V.data.auth_key));case 21:o.setState({imageUrl:[E]},()=>{var ae=o.state.imageUrl,ge="image-business",De=document.querySelectorAll(".".concat(ge,"-image img"));De.forEach((ke,_)=>{ke.onerror=()=>{o.handleError(ae[_])}})});case 22:case"end":return O.stop()}},c)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var o="image-business",c=this.props.resourceInfo,i=c.preview,n=i===void 0?!1:i,p=this.state,m=p.watermark,y=p.imageUrl;return d().createElement("div",{className:o},d().createElement(ce.Z,{scenes:"image"}),d().createElement(Ge.Z,{className:"".concat(o,"-carousel")},y.map((P,E)=>d().createElement("div",{className:"".concat(o,"-image"),key:E.toString()},d().createElement(vt.Z,{src:P,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:n})))))}}rt.defaultProps={prefixCls:"watch-image-page"};var dt=(0,x.$j)(ct)((0,N.Z)()(rt)),nt=ve=>({userInfo:ve.user});class gt extends d().Component{constructor(){var o;super(...arguments);o=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,J.Z)(g().mark(function c(){var i,n,p;return g().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ee.Gw)();case 2:i=y.sent,n=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],p=(0,ne.RG)(i,n),o.setState(p,()=>{o.renderWatermark()});case 6:case"end":return y.stop()}},c)})),this.renderWatermark=()=>{var c=this.props.userInfo,i=this.state.htmlWatermark,n=c.name,p=c.unionid,m=c.sourceType,y=c.jobNumber,P=c.position,E=[];i.indexOf("name")>-1&&E.push(d().createElement(st.Z,{dataType:"userName",value:p,name:n,type:m})),i.indexOf("position")>-1&&E.push(d().createElement("span",null,P)),i.indexOf("jobnumber")>-1&&E.push(d().createElement("span",null,y)),i.length>0&&this.setState({watermark:E.map((M,Z)=>d().createElement("span",{key:Z},M))})},this.saveProgress=()=>{var c=this.props,i=c.studyInfo,n=c.mode,p=c.userInfo,m=p.enterpriseId,y=p.id;n==="learn"&&(0,ne.Gp)({studyInfo:i,enterpriseId:m,userId:y})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var o="html-business",c=this.props.resourceInfo,i=c.url,n=this.state.watermark;return d().createElement("div",{className:o},d().createElement("div",{className:"".concat(o,"__html-watermark")},n),d().createElement("iframe",{title:"html",className:"".concat(o,"_iframe"),src:i}))}}var pt=(0,x.$j)(nt)((0,N.Z)()(gt)),it=s(57068),ot=s(1164),ut=ve=>({userInfo:ve.user});class lt extends d().PureComponent{constructor(){super(...arguments);this.getHost=o=>{var c=o.split("//"),i=c[1].split("/");return[c[0],i[0]].join("//")},this.getScormUrl=()=>{var o=this.props,c=o.studyInfo,i=o.mode,n=o.userInfo,p=o.resourceInfo,m=o.from,y=n.enterpriseId,P=n.id,E=p.url,M=this.getHost(E);if(i==="learn"){var Z=(0,W.Z)({userId:P,enterpriseId:y,access_token:localStorage.token,from:m,scormUrl:encodeURIComponent(E),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},c);return"".concat(M).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(it.stringify(Z))}return"".concat(M,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(E))},this.handleOpenScormLink=o=>{ot.Z.targetTo({path:o,isExternalLink:!0})}}render(){var o=this.props.t,c="scorm-business",i=this.getScormUrl(),n=(0,B.UI)("SCORM_EXTERNAL_WATCH");return d().createElement("div",{className:c},n?d().createElement("div",{className:"".concat(c,"_scorm")},d().createElement("img",{className:"".concat(c,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),d().createElement("h5",null,o("resourcePlay.scormTip")),d().createElement(R.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(i)},o("resourceLibrary.h5LinkPlayButton"))):d().createElement("iframe",{title:"scorm",className:"".concat(c,"_iframe"),src:i}))}}var ft=(0,x.$j)(ut)((0,N.Z)()(lt));class yt extends d().Component{render(){var o=this.props,c=o.visible,i=o.title,n=o.onCancel,p=o.t,m=d().createElement("span",null,i);return d().createElement(Y.ZP,{visible:c,title:m,onCancel:n,footer:null},d().createElement("div",{className:"ban-preview"},d().createElement("div",{className:"ban-preview-center"},d().createElement("img",{src:I(),alt:"picture"}),d().createElement("h2",null,p("localStorage.tip")),d().createElement("p",null,p("localStorage.banPreview"))),d().createElement("hr",null),d().createElement(R.Z,{type:"primary",className:"know",onClick:n},p("localStorage.onKnow"))))}}var ht=(0,N.Z)()(yt);class Ct extends L.Component{constructor(){var o;super(...arguments);o=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=c=>{var i=this.props.previewInfo,n=i.onCancel;this.onCancel(),n(c)},this.onGetVideoBusiness=c=>{var i=this.props.onRef,n=i===void 0?()=>{}:i;this.videoBusiness=c,n(c)},this.onFullScreen=()=>{var c=this.state.fullScreen;this.setState({fullScreen:!c})},this.handleJudgeNetwork=(0,J.Z)(g().mark(function c(){var i,n,p,m,y,P,E,M,Z,V,T,O=arguments;return g().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(i=O.length>0&&O[0]!==void 0?O[0]:null,n=o.props,p=n.resourceInfo,m=n.watchType,y=p.storageType,P=p.playId,E=p.originUrl,M=m==="image"||m==="video"||m==="doc",Z=null,i?Z=i:E?Z=E:Z=p.url,!(M&&Z&&P&&y&&y==="LOCAL")){ge.next=22;break}return ge.prev=7,ge.next=10,(0,ee.NY)(P);case 10:return V=ge.sent,ge.next=13,(0,ee.Hy)(Z,V);case 13:T=ge.sent,T?o.setState({showBan:"no"}):o.setState({showBan:"yes"}),ge.next=20;break;case 17:ge.prev=17,ge.t0=ge.catch(7),o.setState({showBan:"yes"});case 20:ge.next=23;break;case 22:o.setState({showBan:"no"});case 23:case"end":return ge.stop()}},c,null,[[7,17]])})),this.renderOuter=()=>{var c=this.props,i=c.prefixCls,n=c.watchType,p=c.onCurrentTime,m=p===void 0?()=>{}:p;return d().createElement("div",{className:"".concat(i,"-outer")},n==="video"&&d().createElement(be,(0,F.Z)({onCurrentTime:m,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),n==="doc"&&d().createElement(je,this.props),n==="image"&&d().createElement(dt,(0,F.Z)({onError:this.handleJudgeNetwork},this.props)),n==="html"&&d().createElement(pt,this.props),n==="scorm"&&d().createElement(ft,this.props))},this.renderFooter=()=>{var c=this.props,i=c.resourceInfo.storageType,n=c.t,p=this.state.showBan,m=p!==""&&p==="yes";return i&&i!=="PUBLIC_CLOUD"&&m?d().createElement(R.Z,{type:"primary",className:"know",onClick:this.onCancelModel},n("localStorage.onKnow")):null}}componentDidMount(){var o=this.props.mode;o==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(o){o.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var o=this.state,c=o.showBan,i=o.fullScreen,n=this.props,p=n.mode,m=n.previewWay,y=n.previewInfo,P=n.prefixCls,E=n.t,M=n.showEnlarge,Z=n.footer,V=Z===void 0?null:Z,T=y.visible,O=y.destroyOnClose,ae=y.title,ge=c!==""&&c==="yes",De=c!==""&&c==="no";return d().createElement(L.Fragment,null,p==="preview"&&m==="popups"&&d().createElement(Y.ZP,{destroyOnClose:O,visible:T,title:ae,onCancel:this.onCancelModel,footer:V||this.renderFooter(),wrapClassName:"".concat(P,"-resource ").concat(i?"".concat(P,"-full"):"")},M&&d().createElement("div",{className:"".concat(P,"-resource-out-icon"),onClick:this.onFullScreen},i?d().createElement(U.Z,{className:"".concat(P,"-resource-icon")}):d().createElement(A.Z,{className:"".concat(P,"-resource-icon")})),d().createElement("div",{className:"".concat(P,"-inner")},!T&&d().createElement(D.Z,{size:"large"}),T&&De&&this.renderOuter(),ge&&d().createElement(G,null))),(p==="learn"||m==="page")&&De&&this.renderOuter(),(p==="learn"||m==="page")&&d().createElement(ht,{visible:ge,title:ae||E("questionn.warmHint"),onCancel:this.onCancel}))}}Ct.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var Et=(0,N.Z)("translation",{withRef:!0})(Ct)},41225:function(We,me,s){"use strict";s.d(me,{Hy:function(){return J},NY:function(){return z},Gw:function(){return g},sH:function(){return U},BR:function(){return L},qp:function(){return A},Xc:function(){return N},J7:function(){return d}});var H=s(57361),D=s(9754),Q=s.n(D),R=s(10237),F=s(37055),J=function(){var C=(0,H.Z)(Q().mark(function I(){var e,G,W,de,b,x,ne,ee=arguments;return Q().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return e=ee.length>0&&ee[0]!==void 0?ee[0]:"",G=ee.length>1&&ee[1]!==void 0?ee[1]:"",W="",e.startsWith("http")?(de=e.split("//")[1].trim(),b=de.split("/")[0],W="https://".concat(b,"/cms/ticket")):(x=e.split("/")[0],W="https://".concat(x,"/cms/ticket")),K.prev=4,K.next=7,R.ZQ.get({url:W,params:{ticket:G}});case 7:if(ne=K.sent,!(ne.status===200||ne.status===403)){K.next=10;break}return K.abrupt("return",Promise.resolve(!0));case 10:return K.abrupt("return",Promise.resolve(!1));case 13:return K.prev=13,K.t0=K.catch(4),K.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return K.stop()}},I,null,[[4,13]])}));return function(){return C.apply(this,arguments)}}(),z=function(){var C=(0,H.Z)(Q().mark(function I(e){var G,W;return Q().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,R.ZQ.get({url:F.ZP.local.getTicket(e)});case 2:if(G=b.sent,W=G.data,W.code!==0){b.next=6;break}return b.abrupt("return",Promise.resolve(W.data.ticket));case 6:return b.abrupt("return",Promise.resolve(""));case 7:case"end":return b.stop()}},I)}));return function(e){return C.apply(this,arguments)}}(),g=function(){var C=(0,H.Z)(Q().mark(function I(){var e;return Q().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,R.WY.get({url:F.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return e=W.sent,W.abrupt("return",e.data.list);case 4:case"end":return W.stop()}},I)}));return function(){return C.apply(this,arguments)}}(),L=function(){var C=(0,H.Z)(Q().mark(function I(e){var G,W,de;return Q().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,R.WY.get({url:F.ZP.localStorage.getPravateVideoUrl(e)});case 2:if(G=x.sent,G.data.code!==0){x.next=6;break}return W=G.data.data.videoPlayInfo,de=W===void 0?"":W,x.abrupt("return",de);case 6:return x.abrupt("return","");case 7:case"end":return x.stop()}},I)}));return function(e){return C.apply(this,arguments)}}(),d=function(){var C=(0,H.Z)(Q().mark(function I(e){var G,W,de;return Q().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return G=F.ZP.localStorage.getPravateDocUrl(e),x.prev=1,x.next=4,R.WY.get({url:G});case 4:if(W=x.sent,de=W.data,!(de.code===0&&de.data)){x.next=8;break}return x.abrupt("return",de.data.docResourceDownloadUrl||"");case 8:return x.abrupt("return","");case 11:return x.prev=11,x.t0=x.catch(1),x.abrupt("return","");case 14:case"end":return x.stop()}},I,null,[[1,11]])}));return function(e){return C.apply(this,arguments)}}(),U=function(I){var e=I.studyInfo,G=I.progress,W=I.recent_start,de=I.page_count,b=I.enterpriseId,x=I.userId,ne=I.token,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,se,K=e.studyType;if(K==="studyTask"&&(se=F.ZP.SaveProgress.studySaveProgress(e)),(K==="course"||K==="enterprise")&&(se=F.ZP.SaveProgress.enterpriseCourseSaveProgress(e)),K==="studyProject"&&(se=F.ZP.SaveProgress.projectSaveProgress(e)),K==="platform"&&(se="".concat(F.ZP.SaveProgress.platformCourseSaveProgress(e))),(ee||K==="platform")&&(se+="?enterprise_id=".concat(b,"&user_id=").concat(x)),ee)return se+="&access_token=".concat(ne||localStorage.getItem("token")),se;var j={progress:G,recent_start:W,tempTime:Date.parse(new Date)};return de&&(j.page_count=de),e.evaluationId&&(j.evaluation_id=e.evaluationId),R.WY.post({url:se,data:j})},A=C=>{var I=C.popupId,e=C.planId,G=C.resourceId,W=C.type;return R.WY.post({url:F.ZP.TaskStudyRecord.setRandomPopupRecord(e),data:{course_id:G,terminal_type:"PC",popup_id:I,type:W}})},N=(C,I)=>{var e=F.ZP.SaveProgress.reportStatusInterval(C);return R.WY.post({url:e,data:I})}},21594:function(We,me,s){"use strict";s.d(me,{pu:function(){return F},RG:function(){return J},Gp:function(){return z},O8:function(){return g}});var H=s(88986),D=s(69164),Q=s(38642),R=s(41225),F=L=>{var d="";switch(L){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":d="studyTask";break;case"enterprise":d="enterprise";break;case"courseProject":d="studyProject";break;case"platform":case"purchased":d="platform";break;default:break}return d},J=(L,d)=>{var U={};return d.forEach(A=>{var N=L.find(W=>W.type===A.type);if(N)if(A.type==="document_duration_limit"){var C=N.action_list,I=C.find(W=>W.type==="random_popup_verification");!(0,Q.UI)("RANDOM_POPUP_VERIFY")||!I?U[A.name]="CLOSE":U[A.name]=I.param.checked==="true"?"OPEN":"CLOSE"}else if(A.type==="document_player"){var e=JSON.parse(N.actions);e.forEach(W=>{W.param.checked==="true"&&(U[A.name]=W.type)})}else if(A.type==="dynamic_watermark"){var G=N.action_list;G.forEach(W=>{W.type===A.resourceType&&W.param.checked==="true"&&(U[A.name]=W.param.comment)})}else U[A.name]=N.switch_status}),U},z=L=>{(0,R.sH)((0,H.Z)({progress:100,recent_start:1},L)).then(d=>{d&&d.data&&(0,D.Z)(d.data.integral_info||"")})},g=L=>{var d=document.createElement("div");return d.innerHTML=L,d.childNodes[0]}},51975:function(We,me,s){"use strict";s.d(me,{l:function(){return R}});var H=s(62029),D=s(12924),Q=s.n(D),R=(F,J)=>function(g){return Q().createElement(F.Consumer,null,L=>Q().createElement(J,(0,H.Z)({},g,{contextData:L})))}},11449:function(We,me,s){"use strict";s.d(me,{Z:function(){return ue}});var H=s(88986),D=s(33565),Q=s(12924),R=s.n(Q),F=s(3115),J=s(49111),z=s(19650),g=s(62029),L=s(57663),d=s(71577),U=s(91768),A=s(28216),N=s(37055),C=s(10237);function I(le){var we=N.ZP.getHelpContentByMenuKey(),Ce={key:le};return C.WY.get({url:we,params:Ce})}var e=s(74228),G=s.n(e),W=s(1164),de=s(76466),b=s(38642);class x extends R().Component{constructor(we){var Ce;super(we);Ce=this,this.getHelpContentByMenuKey=()=>{var fe=this.props.defaultMenuKey;I(fe).then(Re=>{var Ne=Re.data,Ve=Ne.help_url,Ue=Ne.video_url;this.setState({videoUrl:Ue,helpUrl:Ve})})},this.handleOpenHelpUrl=fe=>{if((0,b.ve)()){window.open(fe,"_blank");return}W.Z.targetTo({path:fe,isExternalLink:!0})},this.handleOpenVideo=function(fe){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.props.t("helpCenter.video");Ce.setState(Ne=>({resourcePlayInfo:(0,H.Z)((0,H.Z)({},Ne.resourcePlayInfo),{},{resourceInfo:{originUrl:fe,source:{FD:fe,OD:fe},contentType:"mp4"}}),previewInfo:(0,H.Z)((0,H.Z)({},Ne.previewInfo),{},{title:Re,visible:!0,onCancel:Ce.handleCancelPreview})}))},this.handleCancelPreview=()=>{var fe=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,H.Z)((0,H.Z)({},fe),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:we.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var we=this.state,Ce=we.helpUrl,fe=we.resourcePlayInfo,Re=we.previewInfo,Ne=we.videoUrl,Ve=this.props.t;return R().createElement("div",{className:G().helpCenter},Ne&&R().createElement(d.Z,{type:"link",className:G()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(Ne)},Ve("helpCenter.video")),Ce&&R().createElement(d.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(Ce)},Ve("helpCenter.tutorial")),R().createElement(de.Z,(0,g.Z)({},fe,{previewInfo:Re})))}}var ne=le=>({defaultMenuKey:le.currentRoute.menuKey});x.defaultProps={defaultMenuKey:""};var ee=(0,A.$j)(ne)((0,U.Z)()(x));function se(le){var we=le.extra,Ce=localStorage.getItem("dingPersonnel"),fe=sessionStorage.getItem("dingPersonnel");return R().createElement(z.Z,null,we,Ce!=="dingPersonnel"&&fe!=="dingPersonnel"&&(0,b.eY)("COMMONEXTRA_HELP_CENTER")&&R().createElement(ee,null))}var K=se,j=s(4408);function $(le){var we=(0,Q.useState)({helpCenter:(0,b.eY)("HEAD_HELP_CENTER_BUT")}),Ce=(0,D.Z)(we,1),fe=Ce[0],Re=le.pageContainerParams,Ne=Re===void 0?{}:Re,Ve=le.noPadding,Ue=Ve===void 0?!1:Ve,Ze=le.isPersonal,Le=Ze===void 0?!1:Ze,Y=le.pageTitle,B=le.className,Ee=B===void 0?"":B,ce={extra:fe.helpCenter?R().createElement(K,{extra:Ne.extra}):Ne.extra},Oe=(0,H.Z)((0,H.Z)({},Ne),ce);return R().createElement("div",{className:"page-container-content ".concat(Ue?"page-container-noPadding":""," ").concat(Le?"page-container-content_personal_background":""," ").concat(Ee)},Y&&R().createElement(j.Z,{title:Y}),Le?R().createElement(F.Z,null,le.children):R().createElement(F.Z,Oe,le.children))}var ue=$},34175:function(We,me,s){"use strict";s.r(me);var H=s(62029),D=s(20136),Q=s(55241),R=s(57663),F=s(71577),J=s(88983),z=s(47933),g=s(22385),L=s(31097),d=s(71194),U=s(57016),A=s(34792),N=s(48086),C=s(88986),I=s(12924),e=s.n(I),G=s(76651),W=s(91768),de=s(57119),b=s(49101),x=s(57068),ne=s(28216),ee=s(50361),se=s.n(ee),K=s(4408),j=s(1164),$=s(11449),ue=s(88311),le=s(84874),we=s(60667),Ce=s(37055),fe=s(10237),Re=s(26885),Ne=s(38642);class Ve extends e().Component{constructor(){var Le;super(...arguments);Le=this,this.state={userIds:[],type:0,roleId:"",org:{title:this.props.t("authScope.chooseUser"),visible:!1,initData:{dept:[],group:[],post:[],user:[]},scrollFlag:!1},projectViewRange:"self",qyWeChatVo:null,whiteList:{belleFlag:(0,Ne.UI)("BELLE_CUSTOMER_WHITE")},selOrgType:"replace",typeList:[{name:this.props.t("setting.quoteMerge"),type:"merge",describe:this.props.t("setting.quoteMergeMessage"),imageUrl:"".concat("https://oss.coolcollege.cn","/1826648414402777088.png"),linkUrl:"",show:!0},{name:this.props.t("setting.quoteRplace"),type:"replace",describe:this.props.t("setting.quoteRplaceMessage"),imageUrl:"".concat("https://oss.coolcollege.cn","/1885432207707869184.png"),linkUrl:"",show:!0}],popoverOpen:!1},this.getUserAuthScope=()=>{var Y=Ce.ZP.Role.getUserAuthScope(),B={user_id:this.state.userIds[0]};fe.WY.get({url:Y,params:B}).then(Ee=>{var ce=Ee.data,Oe=ce.custom_range_info,_e=Oe===void 0?{}:Oe,Ae=ce.range_type,Be=ce.project_view_range,be=this.state.org;if(Ae==="custom"){var Se=_e.user_infos,pe=_e.user_group_infos,Pe=_e.position_infos,Ie=_e.department_infos;be.initData={dept:Ie.map(Fe=>(0,C.Z)((0,C.Z)({},Fe),{},{source_type:Fe.dept_sync_source_type})),user:Se.map(Fe=>(0,C.Z)((0,C.Z)({},Fe),{},{user_id:Fe.sync_user_id,source_type:Fe.sync_source_type})),post:Pe,group:pe}}this.setState({type:Ae,org:be,projectViewRange:Be})})},this.onTypeChange=Y=>{this.setState({type:Y.target.value})},this.handleSelectWx=()=>{var Y=this.props.user,B=this.state.org.initData,Ee=B.user.map(ce=>ce.unionid);(0,Re.Sk)({userIds:Ee,deptIds:[]}).then(ce=>{(0,Re.$f)({result:ce,user:Y,hasDefault:!1}).then(Oe=>{var _e=Oe.qyWeChatVo,Ae=Oe.rangeList,Be=se()(B);Be.user=Ae.user,this.setState({qyWeChatVo:_e,org:{initData:Be,visible:!1}},()=>{this.handleAddUsersOk(Ae)})})}).catch(()=>{})},this.showOrg=Y=>{var B=localStorage.getItem("authorityType"),Ee=this.props.user,ce=Ee.appType,Oe=Ee.loginMode,_e=this.state.whiteList;if(ce==="wx_app"&&Oe==="WE_COM"&&B==="1")this.handleSelectWx();else{if(Y==="radioClick"&&_e.belleFlag)return;var Ae=this.state.org;this.setState({selOrgType:"",popoverOpen:!1,org:(0,C.Z)((0,C.Z)({},Ae),{},{visible:!0,onlyUser:!1,scrollFlag:!0,single:!1})})}},this.handleAddUsersCancel=()=>{var Y=this.state.org;this.setState({org:(0,C.Z)((0,C.Z)({},Y),{},{visible:!1})})},this.orgQuoteCalculate=Y=>{var B=this.state,Ee=B.selOrgType,ce=B.org,Oe=B.userIds,_e=Y.user,Ae=this.props.t,Be=Ce.ZP.Role.authorityRangesReplace()+"?user_id=".concat(_e.length&&_e[0].id||""),be={user_id:_e.length&&_e[0].id||""};if(Ee==="merge"){Be=Ce.ZP.Role.authorityRangesMerge();var Se=_e.length?_e.map(Pe=>Pe.id).concat(Oe):[];be={user_ids:Se};var pe=30;if(Se.length>pe){N.default.warning(Ae("approval.limitTips",{maxUsers:pe}));return}}fe.WY.post({url:Be,data:be}).then(Pe=>{var Ie=Pe==null?void 0:Pe.data;if(String(Ie==null?void 0:Ie.code)==="200000"){var Fe=Ie==null?void 0:Ie.data,ze=Fe.range_type,Te=ze===void 0?"":ze,xe=Fe.custom_range_info,Ye=Fe.project_view_range;if(Te==="custom"){var Qe=xe.user_infos,Ke=xe.user_group_infos,Xe=xe.position_infos,qe=xe.department_infos;ce.initData={dept:qe.map(Ge=>(0,C.Z)((0,C.Z)({},Ge),{},{source_type:Ge.dept_sync_source_type})),user:Qe.map(Ge=>(0,C.Z)((0,C.Z)({},Ge),{},{user_id:Ge.sync_user_id,source_type:Ge.sync_source_type})),post:Xe,group:Ke}}this.setState({type:Te||ce.type,org:(0,C.Z)((0,C.Z)({},ce),{},{visible:!1,projectViewRange:Ye})})}else{var je,et;N.default.info((Pe==null?void 0:Pe.message)||(Pe==null||(je=Pe.data)===null||je===void 0?void 0:je.msg)||(Pe==null||(et=Pe.data)===null||et===void 0?void 0:et.message)||"")}}).catch(Pe=>{N.default.error(Pe.data||"")})},this.handleAddUsersOk=Y=>{var B=this.state,Ee=B.whiteList,ce=B.selOrgType;if(Ee.belleFlag&&ce){this.orgQuoteCalculate(Y);return}var Oe=this.state.org,_e=Y.dept,Ae=Y.group,Be=Y.post,be=Y.user;this.setState({org:(0,C.Z)((0,C.Z)({},Oe),{},{initData:{dept:_e,group:Ae,post:Be,user:be},visible:!1})})},this.removeOrgItem=(Y,B)=>{var Ee=this.state.org,ce=Ee.initData[B];ce.splice(Y,1),this.setState({org:(0,C.Z)((0,C.Z)({},Ee),{},{initData:(0,C.Z)((0,C.Z)({},Ee.initData),{},{[B]:ce})})})},this.handleSave=()=>{var Y=this.state,B=Y.type,Ee=Y.org,ce=Y.userIds,Oe=Y.roleId,_e=Y.projectViewRange,Ae=Y.qyWeChatVo,Be=Y.selOrgType,be=Y.whiteList,Se=this.props.t,pe=Ee.initData,Pe=pe.dept,Ie=pe.user,Fe=pe.post,ze=pe.group,Te=[...Pe,...Ie,...Fe,...ze];if(B==="custom"&&Te.length===0){N.default.warning(Se("authScope.addUserTip"));return}var xe=ce.length,Ye=Ce.ZP.Role.userAuthScope(),Qe={user_ids:ce,range_type:B,custom_range:{user_ids:Ae?[]:Ie.map(Ke=>Ke.id),department_ids:Pe.map(Ke=>Ke.id),position_ids:Fe.map(Ke=>Ke.id),user_group_ids:ze.map(Ke=>Ke.id)},project_view_ranges:Array(xe).fill(_e),authority_tasks:Array(xe).fill("false"),qy_we_chat_vo:Ae};if(be.belleFlag&&["replace","merge"].includes(Be)){U.Z.confirm({title:Se("setting.remind"),content:Se("authScope.addUserReplaceTip"),okText:Se("common.continue"),cancelText:Se("common.cancel"),centered:!0,onOk(){fe.WY.post({url:Ye,data:Qe}).then(Ke=>{Ke.data.success&&N.default.success(Se("authScope.setAuthSuccess")),G.m8.push("/enterprise/systemSetup/permissionSettings/role?appointRoleId=".concat(Oe))}).catch(()=>{N.default.error(Se("authScope.setAuthError"))})}});return}fe.WY.post({url:Ye,data:Qe}).then(Ke=>{Ke.data.success&&N.default.success(Se("authScope.setAuthSuccess")),G.m8.push("/enterprise/systemSetup/permissionSettings/role?appointRoleId=".concat(Oe))}).catch(()=>{N.default.error(Se("authScope.setAuthError"))})},this.handleCancel=()=>{var Y=this.state.roleId;G.m8.push("/enterprise/systemSetup/permissionSettings/role?appointRoleId=".concat(Y))},this.operatingGuide=()=>{j.Z.targetTo({path:"https://www.yuque.com/books/share/4dc0b2ad-3bda-4631-8584-e5f94b48b861/tx6t5a#cOuwb",isExternalLink:!0})},this.onChangeViewRange=Y=>{this.setState({projectViewRange:Y.target.value})},this.onOpenOrgClick=Y=>{var B=this.state.org;B.initData={dept:[],group:[],post:[],user:[]},this.setState({selOrgType:Y,popoverOpen:!1,org:(0,C.Z)((0,C.Z)({},B),{},{onlyUser:!0,visible:!0,single:Y==="replace"})})},this.getAddContent=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=Le.props.prefixCls,Ee=Le.state.typeList;return e().createElement("div",{className:"".concat(B,"__detail"),style:Y},Ee.map(ce=>ce.show&&e().createElement("div",{key:ce.type,className:"".concat(B,"__addBox__item"),onClick:()=>Le.onOpenOrgClick(ce.type)},e().createElement("div",{className:"".concat(B,"__addBox__item__left"),style:{backgroundImage:"url(".concat(ce.imageUrl,")")}}," "),e().createElement("div",{className:"".concat(B,"__addBox__item__right")},e().createElement("div",{className:"".concat(B,"__addBox__item__right__title")},ce.name,e().createElement(le.Z,{iconClass:"icon-Line_right",size:"8px"})),e().createElement("div",{className:"".concat(B,"__addBox__item__right__describe")},ce.describe)))))}}componentDidMount(){var Le=x.parse(G.m8.location.search),Y=Le.userIds,B=Le.roleId;this.setState({userIds:Y.split(","),roleId:B},()=>{this.getUserAuthScope()})}render(){var Le=this.props,Y=Le.prefixCls,B=Le.t,Ee=this.state,ce=Ee.type,Oe=Ee.org,_e=Ee.projectViewRange,Ae=Ee.whiteList,Be=Ee.popoverOpen,be={display:"block",height:"30px",lineHeight:"30px"},Se=Oe.initData,pe=Se.dept,Pe=Se.post,Ie=Se.group,Fe=Se.user,ze=!0;return e().createElement($.Z,{pageContainerParams:{header:{title:this.props.t("setting.rolePermission")}}},e().createElement(K.Z,{title:B("documentTitle.jurisdictionSetting")}),e().createElement("div",{className:Y},e().createElement("div",{className:"".concat(Y,"__content")},e().createElement("div",{className:"".concat(Y,"__main")},e().createElement("div",{className:"".concat(Y,"__main__scroll")},e().createElement("div",{className:"".concat(Y,"__main__tip")},e().createElement("div",{className:"section-title"},B("authScope.authDescTitle")),e().createElement("div",{className:"tip-content"},e().createElement("p",{className:"tip-item"},"1. ",B("authScope.authDescTip2")),e().createElement("p",{className:"tip-item"},"2. ",B("authScope.authDescTip3")),e().createElement("p",{className:"tip-item"},"3. ",B("authScope.authDescTip4")),e().createElement("p",{className:"tip-item"},"4. ",B("authScope.authDescTip5")))),e().createElement("div",{className:"".concat(Y,"__main__set"),style:ce==="custom"?{paddingBottom:"8px"}:{}},e().createElement("div",{className:"section-title margin-top"},B("setting.permissionScope")),e().createElement("div",{className:"scope-list"},e().createElement(z.ZP.Group,{onChange:this.onTypeChange,value:ce},e().createElement(z.ZP,{style:be,value:"only_me"},B("authScope.onlyMe"),e().createElement(L.Z,{placement:"right",title:B("authScope.onlyMeTip")},e().createElement("span",{className:"tip-icon"},e().createElement(de.Z,null)))),e().createElement(z.ZP,{style:be,value:"all"},B("common.allCompany")),e().createElement(z.ZP,{style:be,value:"dept_with_sub_ids"},B("authScope.deptAndChild")),e().createElement(z.ZP,{style:be,value:"custom"},e().createElement("span",{onClick:()=>{this.showOrg("radioClick")}},B("authScope.selfDefine"))))),ce==="custom"&&e().createElement("div",{className:"scope-define"},e().createElement("div",{className:"scope-define-title"},B("authScope.choosedUser")),e().createElement("div",{className:"scope-define-list"},pe.map((Te,xe)=>e().createElement(L.Z,{placement:"top",title:Te.all_name||"",key:Te.id},e().createElement("div",{className:"scope-define-item",key:Te.id},e().createElement(we.Z,{dataType:"departmentName",value:Te.id,name:Te.name,type:Te.source_type}),e().createElement("span",{onClick:()=>this.removeOrgItem(xe,"dept")},e().createElement(le.Z,{iconClass:"iconf-close",size:"12px",color:"#AFB5D2"}))))),Pe.map((Te,xe)=>e().createElement(L.Z,{placement:"top",title:Te.all_name||"",key:xe.toString()},e().createElement("div",{className:"scope-define-item"},Te.name,e().createElement("span",{onClick:()=>this.removeOrgItem(xe,"post")},e().createElement(le.Z,{iconClass:"iconf-close",size:"12px",color:"#AFB5D2"}))))),Ie.map((Te,xe)=>e().createElement(L.Z,{placement:"top",title:Te.all_name||"",key:xe.toString()},e().createElement("div",{className:"scope-define-item"},Te.name,e().createElement("span",{onClick:()=>this.removeOrgItem(xe,"group")},e().createElement(le.Z,{iconClass:"iconf-close",size:"12px",color:"#AFB5D2"}))))),Fe.map((Te,xe)=>e().createElement(L.Z,{placement:"top",title:Te.all_name||"",key:"index"},e().createElement("div",{className:"scope-define-item",key:xe},e().createElement(we.Z,{dataType:"userName",value:Te.sync_user_id||Te.user_id,name:Te.user_name||Te.name,type:Te.sync_source_type||Te.source_type}),e().createElement("span",{onClick:()=>this.removeOrgItem(xe,"user")},e().createElement(le.Z,{iconClass:"iconf-close",size:"12px",color:"#AFB5D2"}))))),e().createElement("div",{className:"scope-define-item add",onClick:this.showOrg},e().createElement(le.Z,{iconClass:"iconf-add",size:"12px",color:"#516AE6"}),B("setting.addUser")),Ae.belleFlag&&e().createElement(Q.Z,{title:null,placement:"bottomLeft",content:this.getAddContent,visible:Be},e().createElement(F.Z,{type:"primary",icon:e().createElement(b.Z,null),style:{marginRight:10},onClick:()=>{this.setState({popoverOpen:!0})}},B("setting.permissionScope")+B("setting.quote")))))),e().createElement("div",{className:"".concat(Y,"__main__range")},e().createElement("div",{className:"section-title margin-top"},B("setting.projectViewRange")),e().createElement("div",null,e().createElement(z.ZP.Group,{onChange:this.onChangeViewRange,value:_e},e().createElement(z.ZP,{value:"self",style:be},B("setting.projectViewRangeRadio1")),e().createElement(z.ZP,{value:"authority",style:be},B(ce!=="all"?"setting.projectViewRangeRadio2":"setting.projectViewRangeRadio3"))))),e().createElement("div",{className:"".concat(Y,"__footer")},e().createElement(F.Z,{type:"primary",onClick:this.handleSave},B("common.save")),e().createElement(F.Z,{onClick:this.handleCancel},B("common.cancel")))))),e().createElement(ue.Z,(0,H.Z)({},Oe,{onOk:this.handleAddUsersOk,disableChange:ze,onCancel:this.handleAddUsersCancel}))))}}Ve.defaultProps={prefixCls:"auth-scope"};var Ue=Ze=>{var Le=Ze.user;return{user:Le,appType:Le.appType}};me.default=(0,ne.$j)(Ue)((0,W.Z)()(Ve))},9849:function(We,me,s){"use strict";s.d(me,{Ej:function(){return F},kL:function(){return J},T:function(){return z},NU:function(){return g},FL:function(){return L},fn:function(){return d},bm:function(){return U},jY:function(){return A},Vs:function(){return N},li:function(){return C},Nl:function(){return I},YF:function(){return e},Q6:function(){return G},zW:function(){return W},Zv:function(){return de},Qg:function(){return b},qc:function(){return x},Ve:function(){return ee},rS:function(){return se},Rh:function(){return K}});var H=s(10237),D=s(37055),Q=s(38642),R={zaraFlag:(0,Q.UI)("ZARA_H5")};function F(j,$){var ue=D.ZP.StudyProjectList.startStudy(j);return H.WY.post({url:ue,data:$})}function J(j){var $=D.ZP.Common.enroll(j);return H.WY.post({url:$})}function z(j,$){var ue=j.courseId,le=D.ZP.StudyProjectList.studyProject(ue);return H.WY.get({url:le,params:$})}function g(j){var $=j.id,ue=R.zaraFlag?D.m1.getAssessmentProjectInfo($):D.m1.getProjectInfo($);return H.WY.get({url:ue})}function L(j){var $=j.courseId,ue=D.ZP.EnterpriseCourse.addScanCount($);return H.WY.post({url:ue})}function d(){var j=D.ZP.StudyProjectList.getAccountInfo();return H.WY.get({url:j})}function U(j){var $=D.ZP.StudyProjectList.projectCertiUrl(j);return H.WY.get({url:$})}function A(j){var $=j.courseId,ue=D.ZP.Courses.like($);return H.WY.post({url:ue})}function N(j){var $=D.ZP.EnterpriseCourse.addCommentAndScore();return H.qg.post({url:$,data:j})}function C(j){var $=D.ZP.EnterpriseCourse.getCourseComments();return H.WY.get({url:$,params:j})}function I(j){var $=D.ZP.EnterpriseCourse.addCommentAndScore();return H.qg.post({url:$,data:j})}function e(j){var $=D.ZP.EnterpriseCourse.deleteComment();return H.qg.post({url:$,data:j})}function G(j,$){var ue=D.ZP.StudyProjectList.projectStudyRecord(j);return H.WY.get({url:ue,params:$})}function W(j){var $=D.ZP.DingSpaceId.getSpaceId();return H.WY.get({url:$,params:j})}function de(j,$){var ue=D.ZP.PlatformCourse.learningUrl(j);return H.WY.get({url:ue,params:$})}function b(j){var $=D.ZP.MyExamTask.examIntro({examId:j});return H.WY.get({url:$})}function x(j){var $=D.ZP.MyExamTask.examCheckStatus({examId:j});return H.WY.get({url:$})}function ne(j,$){var ue=CONFIG.Common.getOperateLog(j);return formDataRequest.get({url:ue,params:$})}function ee(j,$){var ue=R.zaraFlag?D.ZP.StudyProjectList.changeCustomStatus(j):D.ZP.StudyProjectList.changeStatus(j);return H.WY.post({url:ue,data:$})}function se(j){var $=D.ZP.StudyProjectList.getProjectReward(j);return H.WY.get({url:$})}function K(j){var $=D.ZP.subsidyGz.subsidyCourseSetting(j);return H.WY.get({url:$})}},91648:function(We,me,s){"use strict";s.d(me,{Z:function(){return H}});function H(D,Q){var R,F,J,z,R;if(F="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),R=[],J=void 0,Q=Q||F.length,D)for(J=0;J<D;)R[J]=F[0|Math.random()*Q],J++;else for(z=void 0,R[8]=R[13]=R[18]=R[23]="-",R[14]="4",J=0;J<36;)R[J]||(z=0|Math.random()*16,R[J]=F[J===19?z&3|8:z]),J++;return R.join("")}},69164:function(We,me,s){"use strict";var H=s(34792),D=s(48086);function Q(R){R&&R.length>0&&D.default.success(R)}me.Z=Q},65202:function(We,me,s){"use strict";s.d(me,{p:function(){return H}});function H(){return localStorage.getItem("themeColor")||"#516AE6"}},25547:function(We,me,s){"use strict";s.d(me,{Yd:function(){return Q},VX:function(){return F},lK:function(){return J},NP:function(){return z}});var H=s(88986),D=s(93485);function Q(g,L,d){var U=0;function A(N,C){for(var I=0;I<N.length;I++){var e=N[I];if(e[g]===L){U=C;break}else e.children instanceof Array&&e.children.length&&A(e.children,C+1)}}return A(d,1),U}function R(g){var L=1;function d(U,A){U.forEach(N=>{A>L&&(L=A),N.children&&N.children.length>0&&d(N.children,A+1)})}return d(g,1),L}function F(g,L,d){g.forEach((U,A,N)=>{if(U.id===L)return d(U,A,N);if(U.children)return F(U.children,L,d)})}function J(g,L){var d;function U(A){var N=(0,D.Z)(A),C;try{for(N.s();!(C=N.n()).done;){var I=C.value;if(I.id==L){d={id:I.id,name:I.name,children:I.children,parentId:I.parentId};break}I.children&&I.children instanceof Array&&I.children.length>0&&U(I.children)}}catch(e){N.e(e)}finally{N.f()}}return U(g),d?(0,H.Z)((0,H.Z)({},d),{},{children:d.children instanceof Array?d.children:[]}):{children:[],id:"",name:""}}var z=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",A=[...L];function N(C){Object.keys(d).forEach(I=>{var e=I,G=d[I];C[G]=C[e],C[U]=C[U]&&C[U]instanceof Array?[...C[U]]:[],C[U].length?C[U].forEach(W=>{N(W)}):delete C[U]})}return A.forEach(C=>N(C)),A}},26885:function(We,me,s){"use strict";s.d(me,{mw:function(){return C},kr:function(){return I},w8:function(){return e},Sk:function(){return W},$f:function(){return de}});var H=s(34792),D=s(48086),Q=s(88986),R=s(57361),F=s(9754),J=s.n(F),z=s(76651),g=s(78001),L=s(37055),d=s(10237),U=localStorage.getItem("corpId"),A=(b,x)=>{wx.config({beta:!0,debug:!1,appId:b.corpId||localStorage.getItem("corpId"),timestamp:b.timeStamp,nonceStr:b.nonceStr,signature:b.signature,jsApiList:["openDefaultBrowser","innerSaveWebPerformance"]}),wx.ready(()=>{x&&I()}),wx.error(ne=>{console.log("error",ne)})},N=(b,x)=>{wx.agentConfig({corpid:b.corpId,agentid:b.agentId,timestamp:b.timeStamp,nonceStr:b.nonceStr,signature:b.signature,jsApiList:["openDefaultBrowser","selectExternalContact","selectEnterpriseContact","selectPrivilegedContact","createChatWithMsg","openEnterpriseChat","openExistedChatWithMsg"],success:()=>{x("success"),(0,z.Qm)()._store.dispatch({type:"user/setWxWorkApiFlag",payload:{wxWorkApiFlag:(0,z.Qm)()._store.getState().user.wxWorkApiFlag+=1}})},fail:ne=>{ne.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},C=(b,x,ne)=>{window.wx.openEnterpriseChat({userIds:b.join(";"),groupName:x.title,chatId:"",success:function(se){var K=se.chatId;window.wx.invoke("openExistedChatWithMsg",{chatId:K,msg:{msgtype:"link",link:{title:x.title,desc:x.desc,url:x.url,imgUrl:x.imgUrl}}},function(j){j.err_msg=="openExistedChatWithMsg:ok"&&ne&&ne(K)})},fail:function(se){se.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},I=function(){var b=(0,R.Z)(J().mark(function x(ne){var ee,se,K,j,$,ue,le=arguments;return J().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return ee=le.length>1&&le[1]!==void 0?le[1]:()=>{},se=L.ZP.util.getAppSignature(),K=window.location.href.split("#")[0],j=ne||L.ZP.enterpriseId,Ce.next=6,d.WY.get({url:se,params:{enterprise_id:j,url:K,batch_id:""}});case 6:$=Ce.sent,ue=$.data,N(ue,ee);case 9:case"end":return Ce.stop()}},x)}));return function(ne){return b.apply(this,arguments)}}(),e=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(navigator.userAgent.toLowerCase().indexOf("wxwork")>-1){var ee=L.ZP.util.getCorpSignature(),se=window.location.href.split("#")[0];d.WY.get({url:ee,params:{enterprise_id:L.ZP.enterpriseId,url:se,batch_id:ne}}).then(K=>{var j=K.data;A(j,x)})}else x&&I()},G=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ne=CONFIG.util.getSignature(),ee=window.location.href;request.get({url:ne,params:{corpId:U,url:ee,uuid:""}}).then(se=>{var K=se.data;A(K,x)})},W=b=>{var x=b.userIds,ne=x===void 0?[]:x,ee=b.deptIds,se=ee===void 0?[]:ee,K=b.mode,j=K===void 0?"multi":K;return new Promise(($,ue)=>{window.wx.invoke("selectPrivilegedContact",{fromDepartmentId:0,mode:j,selectedContextContact:0,selectedOpenUserIds:ne||[],selectedTickets:se||[]},le=>{le.err_msg==="selectPrivilegedContact:ok"?(typeof le.result=="string"&&(le.result=JSON.parse(le.result)),$(le.result)):le.err_msg==="selectPrivilegedContact:cancel"&&ue("cancel")})})},de=b=>{var x=b.type,ne=x===void 0?"employeeRange":x,ee=b.result,se=ee===void 0?{}:ee,K=b.user,j=K===void 0?{}:K,$=b.reserveUser,ue=$===void 0?[]:$,le=b.rangeType,we=le===void 0?"all":le,Ce=b.hasDefault,fe=Ce===void 0?!0:Ce;return new Promise(Re=>{var Ne=se.userList,Ve=Ne===void 0?[]:Ne,Ue=se.selectedUserCount,Ze=Ve||[];if(ne==="employeeRange"){var Le=j.unionid,Y="";!Ve.length&&Ue?(fe&&(Ze.push({id:Le,unionid:Le,openUserId:Le}),se.userList=[{id:Le,unionid:Le,openUserId:Le}],se.selectedUserCount+=1),Y=!0):Y=!1;var B={dept:[],post:[],group:[],user:Ze.map(pe=>(0,Q.Z)((0,Q.Z)({},pe),{},{unionid:pe.openUserId,id:pe.openUserId,user_id:pe.openUserId,source_type:"wx_sync"})),classes:[],cluster:[]};we==="onlyDeptUser"&&(B={dept:[],user:Ze.map(pe=>(0,Q.Z)((0,Q.Z)({},pe),{},{unionid:pe.openUserId,id:pe.openUserId,user_id:pe.openUserId,source_type:"wx_sync"}))});var Ee={isShowType:Y,qyWeChatVo:JSON.stringify(se),rangeList:B},ce=se.selectedUserCount-B.user.length;ce>0&&(Y&&fe?D.default.warning(g.Z.t("component.selectedErrorTips",{count:ce})):D.default.warning(g.Z.t("component.selectedErrorTips2",{count:ce}))),Re(Ee)}if(ne==="supervision"){Ve&&(Ze.find(pe=>pe.openUserId===(ue[0].unionid||ue[0].user_id||ue[0].name))&&(se.selectedUserCount-=1),Ze=Ze.filter(pe=>pe.openUserId!==ue[0].unionid&&pe.openUserId!==ue[0].user_id&&pe.openUserId!==ue[0].name).map(pe=>pe));var Oe=Ze.map(pe=>(0,Q.Z)((0,Q.Z)({},pe),{},{unionid:pe.openUserId,id:pe.openUserId,user_id:pe.openUserId,source_type:"wx_sync"})),_e={qyWeChatVo:JSON.stringify(se),user:Oe},Ae=se.selectedUserCount-Oe.length;Ae>0&&D.default.warning(g.Z.t("component.selectedErrorTips2",{count:Ae})),Re(_e)}if(ne==="normal"){var Be=Ze.map(pe=>(0,Q.Z)((0,Q.Z)({},pe),{},{unionid:pe.openUserId,id:pe.openUserId,user_id:pe.openUserId,source_type:"wx_sync",qyWeChatVo:JSON.stringify(se)})),be={qyWeChatVo:JSON.stringify(se),user:Be},Se=se.selectedUserCount-Be.length;Se>0&&D.default.warning(g.Z.t("component.selectedErrorTips2",{count:Se})),Re(be)}})}},4412:function(We){We.exports="data:image/png;base64,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"}}]);
