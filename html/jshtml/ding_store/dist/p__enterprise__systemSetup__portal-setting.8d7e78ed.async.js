(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[122],{74021:function(G,W,r){"use strict";r.d(W,{Z:function(){return se}});var P=r(20136),Z=r(55241),e=r(33565),N=r(12924),I=r.n(N),V=r(91768),R=r(95357),j=r(88573),X=r.n(j),p=r(84874),re=r(92592),y=r(87763),_=r.n(y),ae=r(1164);function U(F){var B=F.t,J=F.linkUrl,Y=F.from,q=Y===void 0?"":Y,K=F.ddTab,d=K===void 0?!0:K,v=F.type,T=v===void 0?["pc","mobile"]:v,f=F.theme,b=(0,N.useState)(""),C=(0,e.Z)(b,2),M=C[0],k=C[1],L=()=>{var z=navigator.userAgent.toLocaleLowerCase();if(z.indexOf("lark")!==-1){window.open(J);return}ae.Z.targetTo({path:J,isExternalLink:!0,from:q,ddTab:d})},O="".concat("https://mobile.coolcollege.cn","/assets-external-link-preview.html?type=enternalLink&linkUrl=").concat(encodeURIComponent(J));return re.toDataURL(O,{width:146}).then(z=>{k(z)}).catch(()=>{}),I().createElement("div",{className:"".concat(_()["enternal-link-wrap"]," ").concat(f=="dark"?"".concat(_()["dark-back"]):"")},T.indexOf("pc")>-1?I().createElement(I().Fragment,null,I().createElement("div",{className:"".concat(_().label," ").concat(f==="dark"?"".concat(_()["label-dark"]):"")},B("externalLink.pcLabel"),":"),I().createElement("div",{className:_()["pc-preview-btn"],onClick:L},B("externalLink.pcPreviewBtn"))):null,T.indexOf("mobile")>-1?I().createElement(I().Fragment,null,I().createElement("div",{className:"".concat(_().label," ").concat(f==="dark"?"".concat(_()["label-dark"]):"")},B("externalLink.mobileLabel"),":"),I().createElement("div",{className:"".concat(_()["code-wrap"]," ").concat(f=="dark"?"".concat(_()["code-wrap-dark"]):"")},I().createElement("div",{className:_()["code-img"]},M&&I().createElement("img",{className:_().img,src:M})),I().createElement("div",{className:"".concat(_()["mobile-preview-btn"]," ").concat(f=="dark"?"".concat(_()["mobile-preview-btn-dark"]):"")},B("externalLink.mobilePreviewBtn"))),I().createElement("div",{className:"".concat(_().tip," ").concat(f=="dark"?"".concat(_()["label-dark"]):"")},B("externalLink.wramTips"))):null)}var le=(0,V.Z)()(U);function te(F){var B=F.t,J=F.linkUrl,Y=F.from,q=Y===void 0?"":Y,K=F.type,d=K===void 0?["pc","mobile"]:K,v=F.theme,T=v===void 0?"white":v,f=F.ddTab,b=f===void 0?!0:f,C=(0,N.useState)(!1),M=(0,e.Z)(C,2),k=M[0],L=M[1];(0,N.useEffect)(()=>{J||L(!1)},[J]);var O=()=>I().createElement("div",{className:"".concat(X()["title-top"]," ").concat(T==="dark"?"".concat(X()["white-color"]):"")},I().createElement("span",null,B("component.preview")),I().createElement("span",{onClick:()=>L(!1)},I().createElement(p.Z,{iconClass:"icon-f-close",size:"12px"}))),z=()=>{var fe=navigator.userAgent.toLocaleLowerCase();if(fe.indexOf("lark")!==-1){window.open(J);return}ae.Z.targetTo({path:J,isExternalLink:!0,from:q,ddTab:b})},ne=()=>{if(!!J){if(d.length===1&&d[0]==="pc"){z();return}L(!0)}};return I().createElement(Z.Z,{overlayClassName:T==="white"?"":"popover-customize",content:I().createElement(le,{theme:T,type:d,linkUrl:J,from:q,ddTab:b}),title:O,trigger:"click",visible:!!J&&k},I().createElement("span",{className:X()["preview-btn-icon"],onClick:ne},I().createElement(R.Z,{style:{fontSize:"20px",color:J?T==="white"?"#000":"#fff":"#D9D9D9"}})))}var se=(0,V.Z)()(te)},51697:function(G,W,r){"use strict";var P=r(22385),Z=r(31097),e=r(33565),N=r(12924),I=r.n(N),V=r(28216),R=r(84874),j=p=>{var re=p.title,y=p.visible,_=p.placement,ae=_===void 0?"top":_,U=p.children,le=U===void 0?null:U,te=p.isNewUser,se=te===void 0?"":te,F=p.closeGuide,B=p.guideStatus,J=(0,N.useState)(!1),Y=(0,e.Z)(J,2),q=Y[0],K=Y[1],d=f=>I().createElement("div",{className:"guide-tooltip-title"},f,I().createElement("span",{onClick:v},I().createElement(R.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,N.useEffect)(()=>{K(y)},[y]);var v=f=>{if(f.stopPropagation(),f.preventDefault(),K(!1),F){F();return}se==="true"&&p.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),T()},T=()=>{localStorage.setItem("guideStatus","false"),p.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return I().createElement(Z.Z,{title:d(re),placement:ae,visible:q&&B==="true"&&re},le)},X=p=>({guideStatus:p.advancedSetting.guideStatus,isNewUser:p.advancedSetting.isNewUser});W.Z=(0,V.$j)(X)(j)},11449:function(G,W,r){"use strict";r.d(W,{Z:function(){return f}});var P=r(88986),Z=r(33565),e=r(12924),N=r.n(e),I=r(3115),V=r(49111),R=r(19650),j=r(62029),X=r(57663),p=r(71577),re=r(91768),y=r(28216),_=r(37055),ae=r(10237);function U(b){var C=_.ZP.getHelpContentByMenuKey(),M={key:b};return ae.WY.get({url:C,params:M})}var le=r(74228),te=r.n(le),se=r(1164),F=r(76466),B=r(38642);class J extends N().Component{constructor(C){var M;super(C);M=this,this.getHelpContentByMenuKey=()=>{var k=this.props.defaultMenuKey;U(k).then(L=>{var O=L.data,z=O.help_url,ne=O.video_url;this.setState({videoUrl:ne,helpUrl:z})})},this.handleOpenHelpUrl=k=>{if((0,B.ve)()){window.open(k,"_blank");return}se.Z.targetTo({path:k,isExternalLink:!0})},this.handleOpenVideo=function(k){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M.props.t("helpCenter.video");M.setState(O=>({resourcePlayInfo:(0,P.Z)((0,P.Z)({},O.resourcePlayInfo),{},{resourceInfo:{originUrl:k,source:{FD:k,OD:k},contentType:"mp4"}}),previewInfo:(0,P.Z)((0,P.Z)({},O.previewInfo),{},{title:L,visible:!0,onCancel:M.handleCancelPreview})}))},this.handleCancelPreview=()=>{var k=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,P.Z)((0,P.Z)({},k),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:C.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var C=this.state,M=C.helpUrl,k=C.resourcePlayInfo,L=C.previewInfo,O=C.videoUrl,z=this.props.t;return N().createElement("div",{className:te().helpCenter},O&&N().createElement(p.Z,{type:"link",className:te()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(O)},z("helpCenter.video")),M&&N().createElement(p.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(M)},z("helpCenter.tutorial")),N().createElement(F.Z,(0,j.Z)({},k,{previewInfo:L})))}}var Y=b=>({defaultMenuKey:b.currentRoute.menuKey});J.defaultProps={defaultMenuKey:""};var q=(0,y.$j)(Y)((0,re.Z)()(J));function K(b){var C=b.extra,M=localStorage.getItem("dingPersonnel"),k=sessionStorage.getItem("dingPersonnel");return N().createElement(R.Z,null,C,M!=="dingPersonnel"&&k!=="dingPersonnel"&&(0,B.eY)("COMMONEXTRA_HELP_CENTER")&&N().createElement(q,null))}var d=K,v=r(4408);function T(b){var C=(0,e.useState)({helpCenter:(0,B.eY)("HEAD_HELP_CENTER_BUT")}),M=(0,Z.Z)(C,1),k=M[0],L=b.pageContainerParams,O=L===void 0?{}:L,z=b.noPadding,ne=z===void 0?!1:z,fe=b.isPersonal,Ee=fe===void 0?!1:fe,Ce=b.pageTitle,de=b.className,Ie=de===void 0?"":de,we={extra:k.helpCenter?N().createElement(d,{extra:O.extra}):O.extra},De=(0,P.Z)((0,P.Z)({},O),we);return N().createElement("div",{className:"page-container-content ".concat(ne?"page-container-noPadding":""," ").concat(Ee?"page-container-content_personal_background":""," ").concat(Ie)},Ce&&N().createElement(v.Z,{title:Ce}),Ee?N().createElement(I.Z,null,b.children):N().createElement(I.Z,De,b.children))}var f=T},58992:function(G,W,r){"use strict";r.d(W,{GI:function(){return e},Uq:function(){return N},ws:function(){return I},q9:function(){return V}});var P=r(10237),Z=r(5430);function e(R){var j=Z.ZP.navigatorSetting.getNavigatorSettingUrl(R);return delete R.templateId,P.WY.get({url:j,params:R})}function N(R){var j=Z.ZP.navigatorSetting.saveNavigatorSettingUrl(R);return delete R.templateId,P.WY.post({url:j,data:R})}function I(R){var j=Z.ZP.Common.upload();return P.WY.post({url:j,data:R})}function V(){var R=Z.ZP.navigatorSetting.getDefaultNavigatorUrl();return P.WY.get({url:R})}},62681:function(G,W,r){"use strict";r.r(W),r.d(W,{default:function(){return ca}});var P=r(28216),Z=r(12924),e=r.n(Z),N=r(91768),I=r(20228),V=r(11382),R=r(43185),j=r(53251),X=r(62029),p=r(88986),re=r(34792),y=r(48086),_=r(57361),ae=r(9754),U=r.n(ae),le=r(38394),te=r.n(le),se=r(94184),F=r.n(se),B=r(6503),J=r(5430),Y=r(76343);class q extends e().Component{constructor(s){var t;super(s);t=this,this.funGetBannerList=(0,_.Z)(U().mark(function l(){var c,n,o,i;return U().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t.setState({loading:!0}),c=t.props,n=c.onChangeDefaultBanner,o=c.t,m.next=4,(0,B.dS)();case 4:i=m.sent,te()(i,"data.data")&&i.data.code===200&&i.data.data.length?(i.data.data.forEach(g=>{switch(g.size||(g.size="normal"),g.type){case"image":g.size="normal",g.title=o("setting.imageBannerTitle"),g.tips=o("setting.imageBannerTips");break;case"image_small":g.size="small",g.title=o("setting.imageBannerTitle"),g.tips=o("setting.imageBannerTips");break;case"study":g.size="normal",g.title=o("setting.studyBannerTitle"),g.tips=o("setting.studyBannerTips");break;case"study_small":g.size="small",g.title=o("setting.studyBannerTitle"),g.tips=o("setting.studyBannerTips");break;case"announcement":g.size="normal",g.title=o("setting.announcementBannerTitle"),g.tips=o("setting.announcementBannerTips");break;case"announcement_small":g.size="small",g.title=o("setting.announcementBannerTitle"),g.tips=o("setting.announcementBannerTips");break;case"link":g.size="normal",g.title=o("setting.linkBannerTitle"),g.tips=o("setting.linkBannerTips");break;case"link_small":g.size="small",g.title=o("setting.linkBannerTitle"),g.tips=o("setting.linkBannerTips");break;default:g.title=o("setting.imageBannerTitle"),g.tips=o("setting.imageBannerTips")}}),t.setState({bannerList:i.data.data}),n&&n(i.data.data)):t.setState({bannerList:t.state.localBannerList}),t.setState({loading:!1});case 7:case"end":return m.stop()}},l)})),this.beforeUpload=l=>{var c=["jpeg","jpg","png"],n=l.type.split("/").pop(),o=c.indexOf(n.toLocaleLowerCase())>-1,i=this.props.t;o||y.default.error(i("component.imgTypeError"));var u=l.size/1024<800;return u||y.default.error("".concat(i("component.imgUploadLimit"),"800kb!")),o&&u},this.customRequest=(l,c)=>{var n=l.file;this.setState({imgCropFile:n,imageSize:c},()=>{this.handleShowImgCrop()})},this.handleShowImgCrop=()=>{this.setState({imgCropModalVisible:!0})},this.handleCloseImgCropModal=()=>{this.setState({imgCropModalVisible:!1,selectBanner:null,imageSize:"normal"})},this.changeBanner=l=>{this.setState({selectBanner:l})},this.handleSuccessUpload=l=>{var c=l.imgUrl,n=this.state.selectBanner;n&&this.handleResetBanner((0,p.Z)((0,p.Z)({},n),{},{default_banner_url:c})),this.handleCloseImgCropModal()},this.handleResetBanner=function(){var l=(0,_.Z)(U().mark(function c(n){var o,i;return U().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,B.aE)({enterprise_id:J.ZP.enterpriseId,type:n.type,url:n.default_banner_url,access_token:localStorage.token,id:n.id});case 2:if(o=m.sent,o.data.code!==200){m.next=6;break}return t.funGetBannerList(),m.abrupt("return");case 6:i=t.props.t,y.default.error(i("setting.failLabel"));case 8:case"end":return m.stop()}},c)}));return function(c){return l.apply(this,arguments)}}(),this.renderBannerList=l=>{var c=this.state.bannerList;return e().createElement("div",{className:"default-banner-container"},c.filter(n=>n.size===l).map((n,o)=>this.renderItem(n,o,l)))},this.renderItem=(l,c,n)=>{var o=this.props,i=o.prefixCls,u=o.t,m=this.state.uploadProps;return e().createElement("div",{className:"default-banner-item-one",key:c},e().createElement("div",{className:F()("".concat(i,"-banner-box"),n==="small"?"".concat(i,"-banner-box-sm"):"")},e().createElement("img",{src:l.url||l.default_banner_url,alt:""})),e().createElement("div",{className:"".concat(i,"-operate-banner")},e().createElement("div",{className:"".concat(i,"-operate-banner-upload"),onClick:()=>this.changeBanner(l)},e().createElement(j.Z,(0,X.Z)({},m,{customRequest:g=>this.customRequest(g,n)}),e().createElement("span",{className:"".concat(i,"-operate-banner-upload-text")},u("setting.change")))),e().createElement("div",{className:"".concat(i,"-operate-banner-reset"),onClick:()=>this.handleResetBanner(l)},u("setting.reset"))),e().createElement("div",{className:"banner-type-title"},l.title),e().createElement("div",{className:"banner-type-tip"},l.tips))},this.renderBannerBox=l=>{var c=this.props,n=c.prefixCls,o=c.t;return e().createElement("div",{className:"".concat(n,"-box")},e().createElement("div",{className:"".concat(n,"-box-title")},o(l==="normal"?"setting.bigBannerTitle":"setting.smallBannerTitle")),e().createElement("span",{className:"img-explian"},o(l==="normal"?"setting.bannerSizeTips":"setting.bannerSizeSmallTips")),this.renderBannerList(l))};var a=s.t;this.state={localBannerList:[{default_banner_url:"".concat("https://oss.coolcollege.cn","/1794930993715613696.png"),id:"",type:"image",url:"".concat("https://oss.coolcollege.cn","/1794930993715613696.png"),title:a("setting.imageBannerTitle"),tips:a("setting.imageBannerTips"),size:"normal"},{default_banner_url:"".concat("https://oss.coolcollege.cn","/1794930993900163072.png"),id:"",type:"announcement",url:"".concat("https://oss.coolcollege.cn","/1794930993900163072.png"),title:a("setting.announcementBannerTitle"),tips:a("setting.announcementBannerTips"),size:"normal"},{default_banner_url:"".concat("https://oss.coolcollege.cn","/1794930994248290304.png"),id:"",type:"study",url:"".concat("https://oss.coolcollege.cn","/1794930994248290304.png"),title:a("setting.studyBannerTitle"),tips:a("setting.studyBannerTips"),size:"normal"},{default_banner_url:"".concat("https://oss.coolcollege.cn","/1794930993799499776.png"),id:"",type:"link",url:"".concat("https://oss.coolcollege.cn","/1794930993799499776.png"),title:a("setting.linkBannerTitle"),tips:a("setting.linkBannerTips"),size:"normal"},{default_banner_url:"".concat("https://oss.coolcollege.cn","/1848581345438208000.png"),id:"",type:"image_small",url:"".concat("https://oss.coolcollege.cn","/1848581345438208000.png"),title:a("setting.imageBannerTitle"),tips:a("setting.imageBannerTips"),size:"normal"},{default_banner_url:"".concat("https://oss.coolcollege.cn","/1848587690564521984.png"),id:"",type:"announcement_small",url:"".concat("https://oss.coolcollege.cn","/1848587690564521984.png"),title:a("setting.announcementBannerTitle"),tips:a("setting.announcementBannerTips"),size:"normal"},{default_banner_url:"".concat("https://oss.coolcollege.cn","/1848837343302258688.png"),id:"",type:"study_small",url:"".concat("https://oss.coolcollege.cn","/1848837343302258688.png"),title:a("setting.studyBannerTitle"),tips:a("setting.studyBannerTips"),size:"normal"},{default_banner_url:"".concat("https://oss.coolcollege.cn","/1848837267272110080.png"),id:"",type:"link_small",url:"".concat("https://oss.coolcollege.cn","/1848837267272110080.png"),title:a("setting.linkBannerTitle"),tips:a("setting.linkBannerTips"),size:"normal"}],bannerList:[],selectBanner:null,uploadProps:{name:"file",showUploadList:!1,beforeUpload:this.beforeUpload,accept:".png, .jpg, .jpeg",customRequest:this.customRequest},imgCropFile:{},loading:!0,imgCropModalVisible:!1,imageSize:"normal"}}componentDidMount(){this.funGetBannerList()}render(){var s=this.props.prefixCls,t=this.state,a=t.imgCropModalVisible,l=t.imgCropFile,c=t.loading,n=t.imageSize;return e().createElement("div",{className:s},e().createElement(V.Z,{spinning:c,size:"large"},this.renderBannerBox("normal"),this.renderBannerBox("small")),a&&e().createElement(Y.Z,{visible:a,file:l,widthScale:686,heightScale:n==="small"?92:272,sizeLimit:800,sizeLimitUnit:"kb",onCancel:this.handleCloseImgCropModal,onOk:this.handleSuccessUpload}))}}q.defaultProps={prefixCls:"default-banner"};var K=(0,N.Z)()(q),d=r(14781),v=r(53431),T=r(77576),f=r(59314),b=r(57663),C=r(71577),M=r(22385),k=r(31097),L=r(49111),O=r(19650),z=r(88983),ne=r(47933),fe=r(71194),Ee=r(57016),Ce=r(17673),de=r(76651),Ie=r(57068),we=r(57338),De=r(83107),ma=r(18106),ke=r(88108),_e=r(39098),Q=r(6793),Se=r(84874),pt=E=>({userInfo:E.user,corpId:E.user.corpId});class xe extends Z.Component{constructor(){var s;super(...arguments);s=this,this.state={displayColorPicker:!1,primaryColor:"#465DCD",isDefaultColor:!0,defaultColor:[{label:this.props.t("setting.officialColor"),value:"#465DCD",url:"https://oss.coolcollege.cn/1789887872111874048.png"},{label:this.props.t("setting.greenColor"),value:"#55B09E",url:"https://oss.coolcollege.cn/1789887872116068352.png"},{label:this.props.t("setting.redColor"),value:"#BF3227",url:"https://oss.coolcollege.cn/1789887872229314560.png"},{label:this.props.t("setting.orangeColor"),value:"#FF8132",url:"https://oss.coolcollege.cn/1789887872132845568.png"}]},this.componentDidMount=()=>{this.props.onRef&&this.props.onRef(this),this.getThemeColor()},this.onCancel=()=>{var t=this.props.onCancel;t&&t()},this.onSave=()=>{var t=this.props,a=t.t,l=t.template_id,c=t.onCancel,n=this.state,o=n.primaryColor,i=n.isDefaultColor,u={colour:o,default_check:i?1:0,template_id:l};(0,B.W9)(u).then(m=>{var g=m.data.setting;g==="true"?(y.default.success((0,Q.ZT)(a("setting.saveSuccessTips"),a("pcCustomize.themeColorSeting"))),c&&c()):y.default.error((0,Q.ZT)(a("setting.saveErrorTips"),a("pcCustomize.themeColorSeting")))}).catch(()=>{y.default.error((0,Q.ZT)(a("setting.saveErrorTips"),a("pcCustomize.themeColorSeting")))})},this.getThemeColor=function(){var t=(0,_.Z)(U().mark(function a(l){var c,n,o,i;return U().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,c=s.props,n=c.corpId,o=c.template_id,m.next=4,(0,B.kA)({corp_id:n,template_id:l||o});case 4:i=m.sent,s.setState({primaryColor:i.data.colour||"#465DCD",isDefaultColor:i.data.default_check===1}),m.next=11;break;case 8:m.prev=8,m.t0=m.catch(0),console.log(m.t0);case 11:case"end":return m.stop()}},a,null,[[0,8]])}));return function(a){return t.apply(this,arguments)}}(),this.judgeIsEdit=()=>{var t=this.props.template_id;(0,B.MU)(t).then(a=>{var l=a.data.operation;l==="true"?this.props.onShowHomeDrawer():y.default.error(a.data.message)})},this.handleDefaultColorChange=t=>{this.setState({primaryColor:t,isDefaultColor:!0})},this.showSelectColorContainer=()=>{var t=this.props.prefixCls,a=this.state.primaryColor;return e().createElement("div",{className:"".concat(t,"__select-color-container")},e().createElement("div",{className:"".concat(t,"__select-color-masker"),onClick:this.hideSelectColorContainer}),e().createElement(_e.xS,{color:a,onChange:this.handleCustomColorChange}))},this.hideSelectColorContainer=()=>{this.setState({displayColorPicker:!1})},this.handleToggleColorPicker=()=>{this.setState({displayColorPicker:!0})},this.handleCustomColorChange=t=>{t.hex&&this.setState({primaryColor:t.hex,isDefaultColor:!1})}}render(){var s=this.props,t=s.t,a=s.prefixCls,l=this.state,c=l.defaultColor,n=l.primaryColor,o=l.isDefaultColor,i=l.displayColorPicker,u=localStorage.getItem("themeColor")||"#465dcd";return e().createElement("div",{className:"".concat(a)},e().createElement("div",{className:"".concat(a,"__example")},e().createElement("div",{className:"".concat(a,"__example__navigation")},e().createElement("div",{className:"".concat(a,"__example__title")},e().createElement("div",{className:"line",style:{backgroundColor:u}}),t("setting.themeColors")),e().createElement("div",{className:"".concat(a,"__example__navigation__color")},c.map(m=>e().createElement("div",{key:m.value,className:"".concat(a,"__example__navigation__color__box"),onClick:()=>this.handleDefaultColorChange(m.value)},e().createElement("img",{alt:"",src:m.url}),e().createElement("span",null,m.label),n===m.value?e().createElement(Se.Z,{iconClass:"icon-f-ok1",color:"#fff",size:"15px"}):null)),e().createElement("div",{className:"".concat(a,"__example__navigation__color__box"),onClick:this.handleToggleColorPicker},e().createElement("img",{alt:"",src:"https://oss.coolcollege.cn/1789887871910547456.png"}),e().createElement("span",null,t("setting.customColor")),o?null:e().createElement(Se.Z,{iconClass:"icon-f-ok1",color:"#fff",size:"15px"})),i?this.showSelectColorContainer():null))),e().createElement("div",{className:"".concat(a,"__preview")},e().createElement("div",{className:"".concat(a,"__preview__container")},e().createElement("div",{className:"title"},t("pcCustomize.pcEffect")),e().createElement("div",{className:"".concat(a,"__preview__container__pc")},e().createElement("div",{className:"pcImg",style:{backgroundColor:n,width:500}},e().createElement("img",{src:"https://sdn.coolcollege.cn/assets/kuxueyuan/theme/pctop.png",style:{width:"100%"}}),e().createElement("img",{src:"https://sdn.coolcollege.cn/assets/kuxueyuan/theme/pcbottom.png",style:{width:"100%"}})))),e().createElement("div",{className:"".concat(a,"__preview__container")},e().createElement("div",{className:"title"},t("pcCustomize.mobileEffect")),e().createElement("div",{className:"".concat(a,"__preview__mobile")},e().createElement("div",{className:"".concat(a,"__preview__mobile__inner")},e().createElement("div",{className:"".concat(a,"__preview__mobile__inner__scale")},e().createElement("div",{className:"mobile-img",style:{backgroundColor:n}},e().createElement("img",{src:"https://sdn.coolcollege.cn/assets/kuxueyuan/theme/mobileMain.png",style:{width:"100%"}})),e().createElement("div",{className:"mobile-img-nav",style:{backgroundColor:n}},e().createElement("img",{src:"https://sdn.coolcollege.cn/assets/kuxueyuan/theme/mobileImgNav.png",style:{width:"100%"}})),e().createElement("div",{className:"mobile-img-notice",style:{backgroundColor:n}},e().createElement("img",{src:"https://sdn.coolcollege.cn/assets/kuxueyuan/theme/mobileNotice.png",style:{width:"100%"}}))))))),e().createElement("div",{className:"fixed-footer"},e().createElement(C.Z,{onClick:this.onCancel},t("upload.cancel")),e().createElement(C.Z,{type:"primary",className:"commit-btn",onClick:this.onSave},t("domainSettings.saveSet"))))}}xe.defaultProps={prefixCls:"home-color-show-set"};var ut=(0,P.$j)(pt,null,null,{forwardRef:!0})((0,N.Z)("translation",{withRef:!0})(xe)),Pe=r(80991),gt=r(3407),ht=(0,Q.me)(),vt=gt.Z[ht].setting,ft={title:E=>(0,Q.fy)(E)?null:vt.portalNameValidate1},Et=r(52670),Be=r(62615),Ct=r(7584),Le,Oe,Ue,pe,yt={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:12},sm:{span:12}}},St=(Le=(0,P.$j)(E=>({themeColor:E.advancedSetting.themeColor})),Oe=Reflect.metadata("design:type",Function),Ue=Reflect.metadata("design:paramtypes",[void 0]),Le(pe=Oe(pe=Ue(pe=class extends e().Component{constructor(s){var t;super(s);t=this,this.onCancel=()=>{var a=this.props.onCancel;a&&a()},this.editPost=function(){var a=(0,_.Z)(U().mark(function l(c){var n,o,i,u,m,g;return U().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return n=t.props,o=n.t,i=n.onCancel,u=o("common.edit"),S.prev=2,S.next=5,(0,B.cG)(c);case 5:m=S.sent,g=m.data,g.code===200?(y.default.success((0,Q.ZT)(o("setting.handlePortaSuccessTip"),u)),i(!0)):g.code===400?y.default.error(o("setting.portalNameRepeat")):y.default.error((0,Q.ZT)(o("setting.handlePortaErrorTip"),u)),S.next=13;break;case 10:S.prev=10,S.t0=S.catch(2),y.default.error((0,Q.ZT)(o("setting.handlePortaErrorTip"),u));case 13:case"end":return S.stop()}},l,null,[[2,10]])}));return function(l){return a.apply(this,arguments)}}(),this.handleCommitSave=()=>{var a=this.props.editPortalData;this.formikRef.submitForm(),this.formikRef.runValidations().then(l=>{if(!Object.keys(l).length){var c=this.formikRef.state.values,n=c.employeeRange,o=c.title,i={},u=function(S){Object.hasOwnProperty.call(n.rangeList,S)&&(i[S]=n.rangeList[S].map(w=>{var x={name:w.name,id:w.id,source_type:w.source_type||""};return x.user_id=S==="user"?w.user_id||w.userId:"",x}))};for(var m in n.rangeList)u(m);n.rangeList=i;var g={title:o,qy_we_chat_vo:n.qyWeChatVo,visible_json:JSON.stringify(n)};g.template_id=a.id,this.editPost(g)}})},this.drawFormFieldLayout={labelCol:{xs:{span:2},sm:{span:2}},wrapperCol:{xs:{span:12},sm:{span:12}}}}componentDidMount(){var s=this.props.onMounted;s&&s(this.formikRef)}render(){var s=this.props,t=s.t,a=s.editPortalData,l=s.drawer,c=l?this.drawFormFieldLayout:yt;return e().createElement("div",{className:"add-folder-modal ".concat(l?"":"add-folder-modal-padding")},e().createElement(Pe.J9,{ref:n=>{this.formikRef=n},initialValues:a,render:n=>e().createElement(Pe.l0,{className:"cl-form portal-form"},e().createElement(Pe.gN,(0,X.Z)({name:"title",label:t("setting.portalName"),required:!0,displayType:"Custom",defaultValue:n.values.title,validate:ft.title,LimitLength:50,char:!0,placeholder:t("setting.portalNameValidate2"),component:Ct.Z},c)),e().createElement(Pe.gN,{component:Be.ww,displayType:"Custom",name:"employeeRange",defaultFieldList:n.values.employeeRange,secTitle:t("setting.effectiveRange"),validate:Et.FI,mode:["all","part"],orgProps:{title:t("setting.effectiveRange")},qwTicketShow:!0}),e().createElement(Be.I,null))}),l?e().createElement("div",{className:"fixed-footer"},e().createElement(C.Z,{onClick:this.onCancel},t("upload.cancel")),e().createElement(C.Z,{type:"primary",className:"commit-btn",onClick:this.handleCommitSave},t("domainSettings.saveSet"))):null)}})||pe)||pe)||pe),je=(0,P.$j)()((0,N.Z)()(St)),Re=r(93485),ie=r(33565),A=r(78001),Pt=r(36546),Tt=r(44289),Te=r(58992),Fe=r(86458),da=r(9715),ce=r(86585),pa=r(47673),me=r(4107),ua=r(43358),ue=r(34041),At=r(74021),Zt=r(84291),Je=ue.Z.Option,Nt=[{title:A.Z.t("navigatorSetting.preset"),value:"false",id:1},{title:A.Z.t("navigatorSetting.link"),value:"true",id:2}],bt=E=>{var s=E.data,t=E.onChange,a=E.index,l=E.pagesOptions,c=E.onDelete,n=c===void 0?()=>{}:c,o=(0,Z.useState)(!1),i=(0,ie.Z)(o,2),u=i[0],m=i[1],g=(0,Z.useState)(null),h=(0,ie.Z)(g,2),S=h[0],w=h[1];(0,Z.useEffect)(()=>{w(s.jump_title),ve(s.jump_title)},[s.jump_title]);var x=D=>{t((0,p.Z)((0,p.Z)({},s),{},{custom_jump:D,jump_title:D==="false"?l[0].value:s.jump_title}))},ee=D=>{t((0,p.Z)((0,p.Z)({},s),{},{jump_title:D}))},$=D=>{w(D.target.value),ve(D.target.value),t((0,p.Z)((0,p.Z)({},s),{},{jump_title:D.target.value}))},ve=D=>{(0,Zt.G)(D)?m(!0):m(!1)},Me=D=>{t((0,p.Z)((0,p.Z)({},s),{},{custom_name:D.target.value}))};return e().createElement("div",{className:"component-pc-tab-item-setting"},e().createElement(ce.Z,{formLayout:{labelCol:{span:4},wrapperCol:{span:14}}},e().createElement(ce.Z.Item,{label:A.Z.t("navigatorSetting.title"),name:"title"},e().createElement(me.Z,{defaultValue:s.custom_name,value:s.custom_name,onChange:Me,maxLength:12,allowClear:!0,placeholder:A.Z.t("common.inputMax",{name:A.Z.t("navigatorSetting.title"),max:12})})),e().createElement(ce.Z.Item,{label:A.Z.t("navigatorSetting.type")},e().createElement(me.Z.Group,{compact:!0},e().createElement(ue.Z,{disabled:a===0,defaultValue:s.custom_jump,onChange:x,style:{width:"30%"},allowClear:!0,placeholder:A.Z.t("common.selectP",{name:A.Z.t("navigatorSetting.type")})},Nt.map(D=>e().createElement(Je,{value:D.value,key:D.id},D.title))),s.custom_jump==="false"?e().createElement(ue.Z,{disabled:a===0,value:s.jump_title,onChange:ee,style:{width:"70%"},allowClear:!0,placeholder:A.Z.t("common.selectP",{name:A.Z.t("navigatorSetting.page")})},l.map(D=>e().createElement(Je,{value:D.value,key:D.id},D.title))):null,s.custom_jump!=="false"?e().createElement(e().Fragment,null,e().createElement(me.Z,{className:"component-pc-tab-item-setting-addon",onChange:$,value:S,style:{width:"60%",height:"32px",verticalAlign:"text-top"},allowClear:!0,placeholder:A.Z.t("externalLink.httpsTips")}),e().createElement(At.Z,{linkUrl:S,type:["pc"]}),u&&e().createElement("div",{className:"error-https"},A.Z.t("externalLink.wrongFormat"),", ",A.Z.t("externalLink.httpsTips")),e().createElement("div",{className:"tips-https isBlock"},A.Z.t("externalLink.errorHttpsTips"))):null))),a===0?e().createElement("div",{className:"component-pc-tab-item-setting-operator"}):e().createElement("div",{className:"component-pc-tab-item-setting-operator"},e().createElement(Se.Z,{iconClass:"icon-drag",size:"18",color:"#B4B4B4"})),a!==0?e().createElement("div",{className:"component-pc-tab-item-setting-close",onClick:()=>{n(a)}},"X"):null)},ze=bt,It=E=>{var s=E.data,t=E.onChange,a=E.pagesOptions,l=(c,n)=>{var o=[...s],i=o[c];o.splice(c,1),o.splice(n,0,i),t([...o])};return e().createElement("div",{className:"component-pc-setting"},e().createElement("div",{className:"component-pc-setting-title"},A.Z.t("navigatorSetting.pcNavigatorTitle")),e().createElement("div",{className:"component-pc-setting-preview"},e().createElement("div",{className:"component-pc-setting-preview-content"},s.map((c,n)=>e().createElement("div",{className:"component-pc-setting-preview-content-item",key:"".concat(n)},c.custom_name))),e().createElement("div",{className:"component-pc-setting-preview-desc"},A.Z.t("navigatorSetting.pcDesc",{size:s.length}))),e().createElement("div",{className:"component-pc-setting-operation",id:"pc-setting"},e().createElement(C.Z,{onClick:()=>{if(s.length<10){var c={checked:"true",custom_jump:"true",custom_name:"",i18n_key:"",id:0,image:"",image_shadow:"",jump_id:"",jump_title:null,jump_type:"",key:null,module_id:"",name:"",order:Math.max(...s.map(o=>o.order))+1,parent_module_id:"0"},n=[...s];n.splice(1,0,c),t(n)}else y.default.info(A.Z.t("navigatorSetting.pcDescMax"))},block:!0},A.Z.t("navigatorSetting.add")),s.map((c,n)=>n===0?e().createElement(ze,{pcItem:!0,key:c.order,index:n,data:c,pagesOptions:a,onChange:o=>{var i=[...s];i.splice(n,1,o),t(i)}}):e().createElement(Fe.Z,{id:c.order,key:"".concat(c.order),index:n,onDND:l},e().createElement(ze,{pcItem:!0,key:c.order,index:n,data:c,pagesOptions:a,onChange:o=>{var i=[...s];i.splice(n,1,o),t(i)},onDelete:o=>{var i=[],u=(0,Re.Z)(s.entries()),m;try{for(u.s();!(m=u.n()).done;){var g=m.value,h=(0,ie.Z)(g,2),S=h[0],w=h[1];o!==S&&i.push(w)}}catch(x){u.e(x)}finally{u.f()}t(i)}})))))},Dt=It,ga=r(402),He=r(99545),Ge=ue.Z.Option,We=[{title:A.Z.t("leftMenuLists.home"),value:"homePage",id:1},{title:A.Z.t("documentTitle.knowledgeBase"),value:"course",id:2},{title:A.Z.t("study.discover"),value:"discover",id:3},{title:A.Z.t("study.mine"),value:"me",id:4}],Mt=E=>{var s=E.data,t=E.onChange,a=i=>{t((0,p.Z)((0,p.Z)({},s),{},{jump_title:i}))},l=i=>{t((0,p.Z)((0,p.Z)({},s),{},{custom_name:i.target.value}))},c=i=>{t((0,p.Z)((0,p.Z)({},s),{},{checked:String(i)}))},n=(i,u)=>{var m=i.file;if(!["image/jpeg","image/png","image/jpg"].includes(m.type)){y.default.info(A.Z.t("homeHeader.imageTypeError"));return}if(m.size>40*1024){y.default.info(A.Z.t("common.imageSizeError",{size:"40kb"}));return}var g=new FormData;g.append("file",m),(0,Te.ws)(g).then(h=>{var S=h.data,w=S.data,x=S.code;if(x===0){var ee="".concat(w.server,"/").concat(w.fileNewName);t(u==="image"?(0,p.Z)((0,p.Z)({},s),{},{image:ee}):(0,p.Z)((0,p.Z)({},s),{},{image_shadow:ee}))}else console.error(h)}).catch(h=>{console.error(h)})},o=()=>{t((0,p.Z)((0,p.Z)({},s.mobile_def),{},{mobile_def:s.mobile_def,order:s.order}))};return e().createElement("div",{className:"component-mobile-tab-item-setting"},e().createElement(j.Z,{className:"component-mobile-logo",showUploadList:!1,customRequest:i=>{n(i,"image")},accept:".jpeg,.jpg,.png"},e().createElement("div",{className:"component-mobile-logo-upload"},e().createElement("img",{src:s.image}),e().createElement("div",{className:"component-mobile-logo-upload-desc"},A.Z.t("navigatorSetting.change"))),e().createElement("div",{className:"component-mobile-logo-desc"},A.Z.t("navigatorSetting.normalMode"))),e().createElement(j.Z,{className:"component-mobile-logo component-mobile-logo-selected",showUploadList:!1,customRequest:i=>{n(i,"imageShadow")},accept:".jpeg,.jpg,.png"},e().createElement("div",{className:"component-mobile-logo-upload"},e().createElement("img",{src:s.image_shadow}),e().createElement("div",{className:"component-mobile-logo-upload-desc"},A.Z.t("navigatorSetting.change"))),e().createElement("div",{className:"component-mobile-logo-desc"},A.Z.t("navigatorSetting.selectMode"))),e().createElement(ce.Z,{formLayout:{labelCol:{span:4},wrapperCol:{span:14}}},e().createElement(ce.Z.Item,{label:A.Z.t("navigatorSetting.name")},e().createElement(me.Z,{value:s.custom_name,onChange:l,maxLength:15})),e().createElement(ce.Z.Item,{label:A.Z.t("navigatorSetting.association")},s.must_enable==="true"?e().createElement(O.Z,null,e().createElement(me.Z.Group,{compact:!0},e().createElement(ue.Z,{defaultValue:s.key,disabled:!0,style:{width:"100%"},onChange:a,allowClear:!0},We.map(i=>e().createElement(Ge,{value:i.value,key:i.id},i.title)))),e().createElement(He.Z.Link,{onClick:o,style:{fontSize:"10px"}},A.Z.t("navigatorSetting.reset"))):e().createElement(me.Z.Group,{compact:!0},e().createElement(ue.Z,{defaultValue:s.key,disabled:!0,style:{width:"100%"},onChange:a,allowClear:!0},We.map(i=>e().createElement(Ge,{value:i.value,key:i.id},i.title))))),s.must_enable==="true"?null:e().createElement(ce.Z.Item,{label:A.Z.t("common.activatedStred")},e().createElement(O.Z,null,e().createElement(f.Z,{defaultChecked:s.checked==="true",onChange:c}),e().createElement(He.Z.Link,{onClick:o,style:{fontSize:"10px"}},A.Z.t("navigatorSetting.reset"))))),e().createElement("div",{className:"component-mobile-tab-item-setting-operator"},e().createElement(Se.Z,{iconClass:"icon-drag",size:"18",color:"#B4B4B4"})))},wt=Mt,kt=E=>{var s=E.data,t=E.onChange,a=(l,c)=>{var n=[...s],o=n[l];n.splice(l,1),n.splice(c,0,o),t([...n])};return e().createElement("div",{className:"component-mobile-setting"},e().createElement("div",{className:"component-mobile-setting-title"},A.Z.t("navigatorSetting.mobileNavigatorTitle")),e().createElement("div",{className:"component-mobile-setting-preview"},e().createElement("div",{className:"component-mobile-setting-preview-content"},s.map(l=>e().createElement("div",{className:"component-mobile-setting-preview-content-item",key:l.order},e().createElement("img",{className:"component-mobile-setting-preview-content-item-logo",src:l.image}),e().createElement("div",{className:"component-mobile-setting-preview-content-item-title"},l.custom_name)))),e().createElement("div",{className:"component-mobile-setting-preview-content"},s.map(l=>e().createElement("div",{className:"component-mobile-setting-preview-content-item",key:l.order},e().createElement("img",{className:"component-mobile-setting-preview-content-item-logo",src:l.image_shadow}),e().createElement("div",{className:"component-mobile-setting-preview-content-item-title component-mobile-setting-preview-content-item-selected"},l.custom_name)))),e().createElement("div",{className:"component-mobile-setting-preview-desc"},A.Z.t("navigatorSetting.mobileDesc"))),e().createElement("div",{className:"component-mobile-setting-operation"},s.map((l,c)=>e().createElement(Fe.Z,{id:l.order,key:l.order,index:c,onDND:a},e().createElement(wt,{key:l.order,data:l,onChange:n=>{var o=[...s];o.splice(c,1,n),t(o)}})))))},_t=kt,xt=r(2396),Bt=E=>{var s=E.templateId,t=E.onCancel,a=(0,Z.useState)([]),l=(0,ie.Z)(a,2),c=l[0],n=l[1],o=(0,Z.useState)([]),i=(0,ie.Z)(o,2),u=i[0],m=i[1],g=(0,Z.useState)([]),h=(0,ie.Z)(g,2),S=h[0],w=h[1],x=(0,Z.useState)({}),ee=(0,ie.Z)(x,2),$=ee[0],ve=ee[1],Me=()=>{for(var D=0;D<u.length;D++){var oe=u[D];if(oe.custom_jump==="true"&&!xt.fA.httpsUrl.test(oe.jump_title)){y.default.warning(A.Z.t("externalLink.nullCheckTips",{order:oe.order}));return}}(0,Te.Uq)({templateId:s,pc_navigation:u.map(H=>(0,p.Z)((0,p.Z)({},H),{},{module_id:H.custom_jump==="false"&&H.jump_title?$[H.jump_title]:H.module_id})),mobile_navigation:c}).then(H=>{H.data.code===200?(y.default.success(A.Z.t("common.saveSuccess")),t()):y.default.error(H.data.message)}).catch(H=>{y.default.error(A.Z.t("common.operationError")),console.error(H)})};return(0,Z.useEffect)(()=>((0,Te.GI)({templateId:s}).then(D=>{if(D.data.code===200){var oe=D.data.data;n(oe.mobile_navigation),m(oe.pc_navigation.map(H=>(0,p.Z)((0,p.Z)({},H),{},{jump_title:H.custom_jump==="false"?H.jump_title||H.key:H.jump_title})))}else y.default.error(D.data.message)}),(0,Te.q9)().then(D=>{var oe=D.data.data,H={},be=(0,Re.Z)(oe.pc_navigation),mt;try{for(be.s();!(mt=be.n()).done;){var dt=mt.value;H[dt.key]=dt.module_id}}catch(ye){be.e(ye)}finally{be.f()}ve(H),w(oe.pc_navigation.map(ye=>({title:ye.name,value:ye.key,id:ye.order})))}).catch(D=>{console.error(D)}),()=>{}),[s]),e().createElement("div",{className:"component-navigator-setting content-body"},e().createElement(Dt,{data:u,pagesOptions:S,onChange:D=>m(D)}),e().createElement(_t,{data:c,onChange:D=>n(D)}),e().createElement("div",{className:"fixed-footer"},e().createElement(C.Z,{onClick:t},A.Z.t("upload.cancel")),e().createElement(C.Z,{type:"primary",className:"commit-btn",onClick:Me},A.Z.t("domainSettings.saveSet"))))},Lt=(0,Pt.Z5)(Tt.ZP)(Bt),Ae=ke.Z.TabPane,Ot=E=>({lng:E.user.lng,userInfo:E.user});class Xe extends Z.Component{constructor(s){super(s);this.renderFooter=()=>null,this.changeTabs=t=>{if(t==="4"){this.handleDrawer();return}this.setState({tabKey:t})},this.handleDrawer=()=>{var t=this.props,a=t.userInfo,l=t.editPortalData,c=l.id,n=c===void 0?"1":c,o={id:"homePage",pageId:n,access_token:a.token,userId:a.id,corpId:a.corpId,scopeId:a.enterpriseId,scopeName:a.enterpriseName};de.m8.push("/decorate/pageRender?".concat((0,Ce.stringify)(o)))},this.state={tabKey:"1"}}UNSAFE_componentWillReceiveProps(s){s.visible!==this.props.visible&&s.visible&&this.setState({tabKey:"1"})}render(){var s=this.props,t=s.prefixCls,a=s.t,l=s.drawerWidth,c=s.visible,n=s.editPortalData,o=s.onCancel,i=s.userInfo,u=this.state.tabKey,m=l;return e().createElement(De.Z,{title:a("setting.editPortal"),className:"portal-drawer",width:m,onClose:()=>o(),visible:c,destroyOnClose:!0,footer:this.renderFooter(),maskClosable:!1},e().createElement("div",{className:t},e().createElement(ke.Z,{activeKey:u,onChange:this.changeTabs},e().createElement(Ae,{tab:a("customFields.resultPortal"),key:"1"},u==="1"&&e().createElement(je,{editPortalData:n,drawer:!0,onCancel:o})),e().createElement(Ae,{tab:a("customFields.portalNavigation"),key:"2"},u==="2"&&e().createElement(Lt,{templateId:n.id,onCancel:o})),e().createElement(Ae,{tab:a("setting.themeColors"),key:"3"},u==="3"&&e().createElement(ut,{template_id:n.id,onCancel:o,scopeId:i.enterpriseId})),e().createElement(Ae,{tab:a("customFields.portalDecorate"),key:"4"}))))}}Xe.defaultProps={prefixCls:"portals-drawer",onCancel:()=>{},editPortalData:{employeeRange:{rangeList:{dept:[],post:[],group:[],user:[]},rangeType:1},title:""}};var Ut=(0,P.$j)(Ot)((0,N.Z)()(Xe)),jt=r(18329),Ve,Ke,Qe,ge,Ye=(Ve=(0,P.$j)(E=>({themeColor:E.advancedSetting.themeColor})),Ke=Reflect.metadata("design:type",Function),Qe=Reflect.metadata("design:paramtypes",[void 0]),Ve(ge=Ke(ge=Qe(ge=class extends e().Component{constructor(s){super(s);this.handleDrawer=t=>{var a=this.state.homeConfig;this.setState({homeConfig:(0,p.Z)((0,p.Z)({},a),{},{visible:t})})},this.handleCancel=()=>{var t=this.props.onCancel;this.formikRef.resetForm(),t&&t()},this.handleBeforeCreate=()=>{var t=this.props,a=t.type,l=t.editPortalData;this.formikRef.submitForm(),this.formikRef.runValidations().then(c=>{if(!Object.keys(c).length){var n=this.formikRef.state.values,o=n.employeeRange,i=n.title,u={},m=function(w){Object.hasOwnProperty.call(o.rangeList,w)&&(u[w]=o.rangeList[w].map(x=>{var ee={name:x.name,id:x.id,source_type:x.source_type||""};return ee.user_id=w==="user"?x.user_id||x.userId:"",ee}))};for(var g in o.rangeList)m(g);o.rangeList=u;var h={title:i,qy_we_chat_vo:o.qyWeChatVo,visible_json:JSON.stringify(o)};a==="EDIT"&&(h.template_id=l.id),this.props.onCreate(h,a)}})},this.state={}}componentDidMount(){}render(){var s=this.props,t=s.t,a=s.visible,l=s.editPortalData,c=s.type;return e().createElement(jt.ZP,{visible:a,destroyOnClose:!0,title:t(c==="ADD"?"setting.addPortal":"setting.editPortal"),onCancel:this.handleCancel,onOk:this.handleBeforeCreate},a?e().createElement(je,{editPortalData:l,onMounted:n=>this.formikRef=n}):null)}})||ge)||ge)||ge);Ye.defaultProps={prefixCls:"portal-modal",visible:!1,editPortalData:{employeeRange:{rangeList:{dept:[],post:[],group:[],user:[]},rangeType:1},title:""},type:"ADD"};var Rt=(0,P.$j)()((0,N.Z)()(Ye)),Ft=r(48479),$e=r(60667),Jt=r(51697),zt=r(32407),qe,et,tt,he,at=(qe=(0,P.$j)(E=>({themeColor:E.advancedSetting.themeColor,userInfo:E.user})),et=Reflect.metadata("design:type",Function),tt=Reflect.metadata("design:paramtypes",[void 0]),qe(he=et(he=tt(he=class extends e().Component{constructor(s){var t;super(s);t=this,this.onChangePage=(a,l)=>{this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{page_num:a,page_size:l})},()=>{this.getPortalList()})},this.onRef=a=>{this.drawerRef=a},this.onCancelPortalDrawer=a=>{a&&this.getPortalList(),this.setState({showDrawer:!1})},this.getPortalList=(0,_.Z)(U().mark(function a(){var l,c,n,o,i,u,m,g,h,S;return U().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return t.setState({loading:!0}),l=t.props.t,x.prev=2,c=t.state.params,x.next=6,(0,B.MK)(c);case 6:n=x.sent,o=n.data,o.code===200?(i=0,u=[],o.data&&(m=o.data,g=m.total,h=m.list,S=h===void 0?[]:h,i=g,u=S),t.setState({total:i,portals:u})):y.default.error(l("setting.getPortaListError")),x.next=14;break;case 11:x.prev=11,x.t0=x.catch(2),y.default.error(l("setting.getPortaListError"));case 14:t.setState({loading:!1});case 15:case"end":return x.stop()}},a,null,[[2,11]])})),this.handleDrawer=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=a.id,c=l===void 0?"1":l,n=t.props.userInfo,o={id:"homePage",pageId:c,access_token:n.token,userId:n.id,scopeId:n.enterpriseId,scopeName:n.enterpriseName,corpId:n.corpId,pageName:a.title};de.m8.push("/decorate/pageRender?".concat((0,Ce.stringify)(o)))},this.handleEditPortal=function(){var a=(0,_.Z)(U().mark(function l(c,n){var o,i,u,m;return U().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=t.props.t,i=o(n==="ADD"?"common.add":"common.edit"),h.prev=2,h.next=5,(0,B.cG)(c);case 5:u=h.sent,m=u.data,m.code===200?(y.default.success((0,Q.ZT)(o("setting.handlePortaSuccessTip"),i)),t.handlePortalModal(!1),t.getPortalList(),n==="ADD"&&t.handleDrawer(m.data),t.setState({showDrawer:!1})):m.code===400?y.default.error(o("setting.portalNameRepeat")):y.default.error((0,Q.ZT)(o("setting.handlePortaErrorTip"),i)),h.next=13;break;case 10:h.prev=10,h.t0=h.catch(2),y.default.error((0,Q.ZT)(o("setting.handlePortaErrorTip"),i));case 13:case"end":return h.stop()}},l,null,[[2,10]])}));return function(l,c){return a.apply(this,arguments)}}(),this.handlePortalModal=(a,l)=>{this.setState({showEditModal:a,editPortalData:{employeeRange:{rangeList:{dept:[],post:[],group:[],user:[]},rangeType:1},title:""}},()=>{if(l){var c=l.visible_json,n=c===void 0?"":c,o=JSON.parse(n)||{},i=o.rangeType,u=o.rangeList;this.setState({editPortalData:(0,p.Z)((0,p.Z)({},l),{},{employeeRange:{rangeType:i,rangeList:(0,p.Z)({dept:[],post:[],group:[],user:[]},u)}})})}})},this.showModal=a=>{var l=this.props.t;a.is_new_version==="false"?Ee.Z.confirm({closable:!0,title:l("coolDesgin.tipTitle"),content:e().createElement(e().Fragment,null,e().createElement("p",null,l("coolDesgin.tipContent")),e().createElement("p",null,l("coolDesgin.tipContent2"))),okText:l("coolDesgin.openNewFunction"),onOk:()=>this.handleShowDrawer(a),cancelText:l("historicRecords.cancel")}):this.handleShowDrawer(a)},this.handleShowDrawer=a=>{var l=a.visible_json,c=l===void 0?"":l,n=JSON.parse(c)||{},o=n.rangeType,i=n.rangeList;this.setState({showDrawer:!0,editPortalData:(0,p.Z)((0,p.Z)({},a),{},{employeeRange:{rangeType:o,rangeList:(0,p.Z)({dept:[],post:[],group:[],user:[]},i)}})})},this.formatRangeJson=a=>{try{var l=function(){var c=JSON.parse(a),n=c.rangeList,o=c.rangeType;if(o===1)return{v:zt.Z.t("common.allCompany")};var i=[],u=function(S){Object.hasOwnProperty.call(n,S)&&n[S].forEach(w=>{S==="dept"?i.push(e().createElement($e.Z,{dataType:"departmentName",value:w.id,name:w.name,type:w.source_type})):S==="user"?i.push(e().createElement($e.Z,{dataType:"userName",value:w.user_id,name:w.name,type:w.source_type})):i.push(w.name)})};for(var m in n)u(m);var g=i.slice(0,10);return{v:e().createElement("span",null,g.map((h,S)=>{var w=S<9&&S!==g.length-1;return e().createElement("span",{key:S},h,w?"\u3001":"")}))}}();if(typeof l=="object")return l.v}catch(c){return""}},this.handleDelete=a=>{var l=this.props.t;Ee.Z.confirm({content:l("setting.deleteConfirmTip"),cancelText:l("upload.cancel"),okText:l("upload.ok"),onOk:()=>{this.handlePortalStatus(a,"deleted")},onCancel:()=>{}})},this.handlePortalStatus=function(){var a=(0,_.Z)(U().mark(function l(c,n){var o,i,u,m;return U().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=t.props.t,i=o(n==="deleted"?"common.delete":n==="normal"?"common.open":"common.close"),h.prev=2,h.next=5,(0,B.WF)(c,n);case 5:u=h.sent,m=u.data,m.code===200?y.default.success((0,Q.ZT)(o("setting.handlePortaSuccessTip"),i)):y.default.error((0,Q.ZT)(o("setting.handlePortaErrorTip"),i)),h.next=13;break;case 10:h.prev=10,h.t0=h.catch(2),y.default.error((0,Q.ZT)(o("setting.handlePortaErrorTip"),i));case 13:t.getPortalList();case 14:case"end":return h.stop()}},l,null,[[2,10]])}));return function(l,c){return a.apply(this,arguments)}}(),this.handleRadioChange=a=>{var l=a.target.value;this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{page_num:1,filter_type:l})},()=>{this.getPortalList()})},this.handleSearch=a=>{this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{page_num:1,key_word:a})},()=>{this.getPortalList()})},this.state={portals:[],params:{page_num:1,page_size:20,key_word:"",filter_type:"all"},showDrawer:!1,total:1e3,loading:!0,editPortalData:{employeeRange:{rangeList:{dept:[],post:[],group:[],user:[]},rangeType:1},title:""},radioOptions:[{label:s.t("common.all"),value:"all"},{label:s.t("userCenter.myCreate"),value:"me"},{label:s.t("setting.jurisdictionAndSubordinate"),value:"under"}]}}componentDidMount(){this.getPortalList()}render(){var s=this.props,t=s.t,a=s.prefixCls,l=s.themeColor,c=Ie.parse(de.m8.location.search),n=c.renderGuide,o=n===void 0?!1:n,i=this.state,u=i.portals,m=i.showEditModal,g=i.total,h=i.loading,S=i.editPortalData,w=i.params,x=i.showDrawer,ee=i.radioOptions;return e().createElement(V.Z,{spinning:h,size:"large"},e().createElement("div",{className:"".concat(a)},e().createElement("div",{className:"".concat(a,"-header")},e().createElement(O.Z,{size:100},e().createElement(Ft.Z,{onSearch:this.handleSearch,width:300,placeholder:t("setting.searchPortalTip")}),e().createElement(ne.ZP.Group,{options:ee,onChange:this.handleRadioChange,value:w.filter_type}))),!h&&e().createElement("div",{className:"".concat(a,"-list")},w.page_num===1?e().createElement(Jt.Z,{visible:o,title:this.props.t("newUserGuidance.fastCreateHome"),placement:"topLeft"},e().createElement("div",{className:"".concat(a,"-list-add"),onClick:()=>this.handlePortalModal(!0),style:{borderColor:l,color:l}},"+ ",t("setting.addPortal"))):null,u.length>0&&u.map($=>e().createElement("div",{className:"".concat(a,"-list-item"),key:$.id},e().createElement("div",{className:"".concat(a,"-list-item-profile")},e().createElement(k.Z,{title:$.title,placement:"topLeft",overlayClassName:"tooltipBox"},e().createElement("div",{className:"name"},$.title)),e().createElement("div",{className:"range"},e().createElement("span",null,t("setting.effectiveRange"),"\uFF1A"),this.formatRangeJson($.visible_json))),e().createElement("div",{className:"".concat(a,"-list-item-controls")},e().createElement(O.Z,null,e().createElement(C.Z,{type:"link",disabled:$.status==="normal",onClick:()=>this.handleDelete($.id)},t("common.delete")),e().createElement(C.Z,{type:"link",onClick:()=>{this.showModal($)}},t("setting.editPortal")),e().createElement(f.Z,{defaultChecked:$.status==="normal",checkedChildren:t("common.open"),unCheckedChildren:t("common.close"),onChange:ve=>this.handlePortalStatus($.id,ve?"normal":"disabled")})))))),!h&&e().createElement("div",{className:"".concat(a,"-bottom")},e().createElement(v.Z,{total:g*1||1,current:w.page_num,onChange:this.onChangePage,defaultPageSize:20,showSizeChanger:!1}))),e().createElement(Rt,{visible:m,onCancel:()=>this.handlePortalModal(!1),onCreate:this.handleEditPortal,editPortalData:S,type:S&&S.id?"EDIT":"ADD"}),e().createElement(Ut,{visible:x,drawerWidth:1200,editPortalData:S,onCancel:this.onCancelPortalDrawer}))}})||he)||he)||he);at.defaultProps={prefixCls:"portal-manage-container"};var Ht=(0,P.$j)()((0,N.Z)()(at)),nt=r(37055),Gt=r(40135),Wt=r.n(Gt),Xt=r(29023),Vt=r.n(Xt),Kt=r(10424),rt=r.n(Kt),Qt=r(96583),lt=r.n(Qt),Yt=E=>{var s=E.user;return{corpId:s.corpId}},$t={upload:nt.ZP.Common.upload};class ot extends e().PureComponent{constructor(s){super(s);this.beforeUpload=t=>{var a=this.props.t,l=["jpeg","jpg","png","gif"],c=t.type.split("/").pop(),n=l.indexOf(c.toLocaleLowerCase())>-1;n||y.default.error(a("setting.uploadImgTipGif"));var o=t.size/1024<500;return o||y.default.error("".concat(a("component.imgUploadLimit"),"500kb!")),n&&o},this.handleChangeImg=t=>{var a=this.props,l=a.t,c=a.handleSuccessChange;if(t.file.status==="done"){y.default.success("".concat(t.file.name," ").concat(l("setting.uploadSuccess")));var n=t.file.response.data,o=n.fileNewName,i=n.server;c({url:"".concat(i,"/").concat(o)})}else t.file.status==="error"&&y.default.error("".concat(t.file.name," ").concat(l("setting.uploadFail")))},this.handleToggleColorPicker=()=>{this.setState({displayColorPicker:!0})},this.handleColorChange=t=>{if(t.hex){var a=this.props.handleSuccessChange;a({colour:t.hex})}},this.handleChangeInput=t=>{if(t.target.value){var a=this.props.handleSuccessChange;a({colour:t.target.value})}},this.showSelectColorContainer=()=>{var t=this.props,a=t.prefixCls,l=t.navigationBarColor;return e().createElement("div",{className:"".concat(a,"__select-color-container")},e().createElement("div",{className:"".concat(a,"__select-color-masker"),onClick:this.hideSelectColorContainer}),e().createElement(_e.xS,{color:l,onChange:this.handleColorChange}))},this.hideSelectColorContainer=()=>{this.setState({displayColorPicker:!1})},this.handleDownloadSketch=()=>{window.location.href="".concat("https://oss.coolcollege.cn","/startup.sketch")},this.handleDownloadPhotoshop=()=>{window.location.href="".concat("https://oss.coolcollege.cn","/startup.psd")},this.state={displayColorPicker:!1,uploadProps:{name:"file",action:$t.upload,showUploadList:!1,data:{access_token:localStorage.token},beforeUpload:this.beforeUpload,accept:".png, .jpg, .jpeg, .gif",onChange:this.handleChangeImg}}}render(){var s=this.props,t=s.prefixCls,a=s.t,l=s.pageUrl,c=s.navigationBarColor,n=s.handleReset,o=s.handleSaveStartupPageInfo,i=this.state,u=i.uploadProps,m=i.displayColorPicker,g=localStorage.getItem("themeColor")||"#516AE6";return e().createElement(Z.Fragment,null,e().createElement("div",{className:"".concat(t,"__content")},e().createElement("div",{className:"".concat(t,"__content__mobile")},e().createElement("div",{className:"".concat(t,"__content__mobile__container")},e().createElement("div",{className:"".concat(t,"__content__mobile__navigationBar"),style:{background:c}},e().createElement("img",{src:Wt()})),e().createElement("div",{className:"".concat(t,"__content__mobile__page")},e().createElement("img",{src:l}),e().createElement("div",{className:"".concat(t,"__content__mobile__buttons")},e().createElement("div",{className:"".concat(t,"__content__mobile__buttons__item")},e().createElement(j.Z,u,e().createElement("span",{className:"".concat(t,"__content__mobile__buttons__item__span")},a("setting.change")))),e().createElement("div",{className:"".concat(t,"__content__mobile__buttons__line")}),e().createElement("div",{className:"".concat(t,"__content__mobile__buttons__item"),onClick:n},a("setting.reset")))))),e().createElement("div",{className:"".concat(t,"__content__example")},e().createElement("div",{className:"".concat(t,"__content__example__navigation")},e().createElement("div",{className:"".concat(t,"__content__example__title")},a("setting.navigationColor")),e().createElement("div",{className:"".concat(t,"__content__example__navigation__color")},e().createElement("div",{className:"".concat(t,"__content__example__navigation__color__box"),style:{background:c},onClick:this.handleToggleColorPicker}),m?this.showSelectColorContainer():null,e().createElement(me.Z,{style:{width:200},value:c,onChange:this.handleChangeInput,maxLength:7}))),e().createElement("div",{className:"".concat(t,"__content__example__page")},e().createElement("div",{className:"".concat(t,"__content__example__title")},a("setting.startupPageSpecification")),e().createElement("div",{className:"".concat(t,"__content__example__content")},e().createElement("img",{className:"".concat(t,"__content__example__content__img"),src:Vt()}),e().createElement("div",{className:"".concat(t,"__content__example__content__footer")},e().createElement("span",null,a("component.downloadTem"),"\uFF1A"),e().createElement("div",{className:"".concat(t,"__content__example__content__footer__download"),onClick:this.handleDownloadSketch},e().createElement("img",{src:rt()}),e().createElement("span",{style:{color:g}},"Sketch")),e().createElement("div",{className:"".concat(t,"__content__example__content__footer__download"),onClick:this.handleDownloadPhotoshop},e().createElement("img",{src:lt()}),e().createElement("span",{style:{color:g}},"Photoshop"))))))),e().createElement("div",{className:"".concat(t,"__footer")},e().createElement(C.Z,{className:"".concat(t,"__footer__save"),type:"primary",onClick:()=>o("ding")},a("common.save"))))}}ot.defaultProps={prefixCls:"mobile-startup-page-define-container-in"};var qt=(0,P.$j)(Yt)((0,N.Z)()(ot)),ea=r(8429),ta=r.n(ea),aa=E=>{var s=E.user;return{corpId:s.corpId}},na={upload:nt.ZP.Common.upload};class st extends e().PureComponent{constructor(s){super(s);this.beforeUpload=t=>{var a=this.props.t,l=["jpeg","jpg","png"],c=t.type.split("/").pop(),n=l.indexOf(c.toLocaleLowerCase())>-1;n||y.default.error(a("setting.uploadImgTip"));var o=t.size/1024<500;return o||y.default.error("".concat(a("component.imgUploadLimit"),"500kb!")),n&&o},this.handleChangeImg=t=>{var a=this.props,l=a.t,c=a.handleSuccessChange;if(t.file.status==="done"){y.default.success("".concat(t.file.name," ").concat(l("setting.uploadSuccess")));var n=t.file.response.data,o=n.fileNewName,i=n.server;c({other_url:"".concat(i,"/").concat(o)})}else t.file.status==="error"&&y.default.error("".concat(t.file.name," ").concat(l("setting.uploadFail")))},this.handleDownloadSketch=()=>{window.location.href="".concat("https://oss.coolcollege.cn","/other_sketch.sketch")},this.handleDownloadPhotoshop=()=>{window.location.href="".concat("https://oss.coolcollege.cn","/other_psd.psd")},this.state={uploadProps:{name:"file",action:na.upload,showUploadList:!1,data:{access_token:localStorage.token},beforeUpload:this.beforeUpload,accept:".png, .jpg, .jpeg",onChange:this.handleChangeImg}}}render(){var s=this.props,t=s.prefixCls,a=s.t,l=s.handleReset,c=s.pageUrl,n=s.handleSaveStartupPageInfo,o=this.state.uploadProps,i=localStorage.getItem("themeColor")||"#516AE6";return e().createElement(Z.Fragment,null,e().createElement("div",{className:"".concat(t,"__content")},e().createElement("div",{className:"".concat(t,"__content__mobile")},e().createElement("div",{className:"".concat(t,"__content__mobile__container")},e().createElement("div",{className:"".concat(t,"__content__mobile__page ").concat(t,"__content__mobile__news")},e().createElement("img",{src:c,alt:"some"}),e().createElement("div",{className:"".concat(t,"__content__mobile__buttons")},e().createElement("div",{className:"".concat(t,"__content__mobile__buttons__item")},e().createElement(j.Z,o,e().createElement("span",{className:"".concat(t,"__content__mobile__buttons__item__span")},a("setting.change")))),e().createElement("div",{className:"".concat(t,"__content__mobile__buttons__line")}),e().createElement("div",{className:"".concat(t,"__content__mobile__buttons__item"),onClick:l},a("setting.reset")))))),e().createElement("div",{className:"".concat(t,"__content__example")},e().createElement("div",{className:"".concat(t,"__content__example__page")},e().createElement("div",{className:"".concat(t,"__content__example__title")},a("setting.startupPageSpecification")),e().createElement("div",{className:"".concat(t,"__content__example__content")},e().createElement("img",{className:"".concat(t,"__content__example__content__img"),src:ta(),alt:"Example"}),e().createElement("div",{className:"".concat(t,"__content__example__content__footer")},e().createElement("span",null,a("component.downloadTem"),"\uFF1A"),e().createElement("div",{className:"".concat(t,"__content__example__content__footer__download"),onClick:this.handleDownloadSketch},e().createElement("img",{src:rt(),alt:"Sketch"}),e().createElement("span",{style:{color:i}},"Sketch")),e().createElement("div",{className:"".concat(t,"__content__example__content__footer__download"),onClick:this.handleDownloadPhotoshop},e().createElement("img",{src:lt(),alt:"Photoshop"}),e().createElement("span",{style:{color:i}},"Photoshop"))))))),e().createElement("div",{className:"".concat(t,"__footer")},e().createElement(C.Z,{className:"".concat(t,"__footer__save"),type:"primary",onClick:()=>n("otherEnd")},a("common.save"))))}}st.defaultProps={prefixCls:"mobile-startup-page-define-container-in"};var ra=(0,P.$j)(aa)((0,N.Z)()(st)),la=E=>{var s=E.user;return{corpId:s.corpId}},Ze="".concat("https://oss.coolcollege.cn","/1789888737669419008.png"),Ne="".concat("https://oss.coolcollege.cn","/1797342696113836032.png");class it extends e().PureComponent{constructor(s){super(s);this.handleSuccessChange=t=>{this.setState({formData:(0,p.Z)((0,p.Z)({},this.state.formData),t)})},this.handleSuccessSwitchChange=t=>{var a=this.state.select;this.setState({formData:(0,p.Z)((0,p.Z)({},this.state.formData),t)},()=>{this.handleSaveStartupPageInfo(a)})},this.handleAppletsReset=()=>{this.setState({formData:(0,p.Z)((0,p.Z)({},this.state.formData),{},{url:Ze,colour:"#FFFFFF"})})},this.handleOtherReset=()=>{this.setState({formData:(0,p.Z)((0,p.Z)({},this.state.formData),{},{other_url:Ne})})},this.getStartupPageInfo=()=>{var t=this.props,a=t.corpId,l=t.template_id;(0,B.K$)({corp_id:a,template_id:l}).then(c=>{var n=c.data,o=n.url,i=n.colour,u=n.other_url,m=n.startSwitch;this.setState({formData:{url:o||Ze,colour:i||"#FFFFFF",other_url:u||Ne,startSwitch:m}})})},this.handleSaveStartupPageInfo=t=>{var a=this.props,l=a.t,c=a.template_id,n=this.state.formData,o=n.url,i=n.other_url,u=n.colour,m=n.startSwitch;(0,B.xr)({pageUrl:t==="ding"?o:i,navigationBarColor:u,startSwitch:m,template_id:c,type:t}).then(()=>{y.default.success(l("common.saveSuccess")),this.getStartupPageInfo()})},this.getConfigInfo=()=>{this.setState({loading:!0}),(0,B.oe)().then(t=>{this.setState({multiSwitch:t.data.switch_status},()=>{this.setState({loading:!1})})})},this.changeGroup=t=>{this.setState({select:t.target.value})},this.state={multiSwitch:"false",select:"ding",loading:!0,formData:{startSwitch:!0,url:Ze,colour:"#FFFFFF",other_url:Ne}}}componentDidMount(){this.getConfigInfo(),this.getStartupPageInfo()}render(){var s=this.props,t=s.prefixCls,a=s.t,l=this.state,c=l.multiSwitch,n=l.select,o=l.loading,i=l.formData,u=i.startSwitch,m=i.url,g=i.colour,h=i.other_url;return e().createElement("div",{className:t},e().createElement(V.Z,{spinning:o,size:"large"},e().createElement("div",{className:"".concat(t,"__switch")},e().createElement("span",{className:"".concat(t,"__switch__tip")},a("setting.homeOperation.launchScreenSwitchTip")),e().createElement(f.Z,{defaultChecked:!0,checked:u,onChange:S=>this.handleSuccessSwitchChange({startSwitch:S}),checkedChildren:a("common.activatedStr"),unCheckedChildren:a("common.deactivated")})),e().createElement("div",{className:"".concat(t,"__desc")},e().createElement("div",{className:"".concat(t,"__desc__explain")},a("common.explain"),":"),e().createElement("div",{className:"".concat(t,"__desc__text")},a("setting.startupPageTips1"),e().createElement("br",null),n==="ding"?a("setting.homeOperation.startupTips2"):e().createElement("span",null,a("setting.homeOperation.startupTips3"),e().createElement("br",null),a("setting.homeOperation.startupTips4")))),c==="true"&&e().createElement(ne.ZP.Group,{value:n,onChange:this.changeGroup,buttonStyle:"solid"},e().createElement(ne.ZP.Button,{value:"ding"},a("setting.homeOperation.applets")),e().createElement(ne.ZP.Button,{value:"otherEnd"},a("setting.homeOperation.otherEnd"))),n==="ding"&&e().createElement(qt,{pageUrl:m||Ze,navigationBarColor:g,handleSuccessChange:this.handleSuccessChange,handleReset:this.handleAppletsReset,getStartupPageInfo:this.getStartupPageInfo,handleSaveStartupPageInfo:this.handleSaveStartupPageInfo}),n==="otherEnd"&&e().createElement(ra,{pageUrl:h||Ne,handleSuccessChange:this.handleSuccessChange,handleReset:this.handleOtherReset,getStartupPageInfo:this.getStartupPageInfo,handleSaveStartupPageInfo:this.handleSaveStartupPageInfo})))}}it.defaultProps={prefixCls:"mobile-startup-page-define-container-in"};var oa=(0,P.$j)(la)((0,N.Z)()(it)),sa=r(11449),ia=r(4408);class ct extends e().Component{constructor(s){super(s);this.getCommunityPermissions=()=>{this.props.dispatch({type:"publicVariable/getHasMenusPermissions",payload:{flag:"Community"}})},this.handleChangeTab=t=>{this.setState({activeTab:t})},this.state={activeTab:"portal"}}componentDidMount(){this.getCommunityPermissions()}render(){var s=this.props,t=s.t,a=s.prefixCls,l=this.state.activeTab;return e().createElement(sa.Z,{pageContainerParams:{onTabChange:c=>{this.handleChangeTab(c)},header:{title:t("documentTitle.portalSetting1")},tabList:[{tab:t("documentTitle.portalSetting1"),key:"portal"},{tab:t("setting.startupPageConfiged"),key:"startup"},{tab:t("setting.bannerDefaultSetTab"),key:"banner"}]}},e().createElement(ia.Z,{title:t("documentTitle.portalSetting")}),e().createElement("div",{className:"".concat(a)},e().createElement("div",{className:"".concat(a,"-container")},l==="portal"&&e().createElement(Ht,null),l==="startup"&&e().createElement(oa,null),l==="banner"&&e().createElement(K,null))))}}ct.defaultProps={prefixCls:"portal-setting-page"};var ca=(0,P.$j)()((0,N.Z)()(ct))},6503:function(G,W,r){"use strict";r.d(W,{cG:function(){return e},MK:function(){return N},WF:function(){return I},kA:function(){return re},W9:function(){return y},MU:function(){return ae},oe:function(){return U},K$:function(){return le},xr:function(){return te},dS:function(){return J},aE:function(){return K}});var P=r(37055),Z=r(10237);function e(d){var v=d.title,T=d.qy_we_chat_vo,f=d.visible_json,b=d.template_id,C=P.ZP.MobileSetting.addPortal(),M={title:v,qy_we_chat_vo:T,visible_json:f,template_id:b};return Z.WY.post({url:C,data:M})}function N(d){var v=d.page_num,T=d.page_size,f=d.key_word,b=d.filter_type,C=P.ZP.MobileSetting.getPortalList(),M={page_num:v,page_size:T,key_word:f,filter_type:b};return Z.WY.get({url:C,params:M})}function I(d,v){var T=P.ZP.MobileSetting.changePortalStatus(d),f={status:v};return Z.WY.get({url:T,params:f})}function V(d){var v=d.type,T=d.template_id,f={type:v,template_id:T};return request.get({url:CONFIG.MobileSetting.getNewModuleSetting(),params:f}).then(b=>{for(var C=_objectSpread({},b.data.menus),M=0;M<C.length;M++)if(C[M].key==="home"){for(var k=C[M].children,L=0;L<k.length;L++)if(k[L].key==="homeData")for(var O=k[L].children,z=0;z<O.length;z++)O[z].order=z}return b})}function R(d){var v=CONFIG.Courses.getCardList();return request.get({url:v,params:d})}function j(d){var v=d.type,T=d.key,f=d.template_id,b=d.menus,C={type:v,key:T,menus:b},M=CONFIG.MobileSetting.savePortalTemplate(f);return request.post({url:M,data:C})}function X(d){var v={key:"banner",template_id:d};return request.get({url:CONFIG.MobileSetting.getNewModuleSetting(),params:v})}function p(d){var v=d.template_id,T=d.type,f=d.key,b={template_id:v,type:T,key:f};return request.post({url:CONFIG.MobileSetting.resetPortalTemplate(v),params:b})}function re(d){var v=d.template_id,T=d.corp_id,f={template_id:v,corp_id:T};return Z.WY.get({url:P.ZP.MobileSetting.getPortalColor(),params:f})}function y(d){var v=d.template_id,T=d.corp_id,f=d.default_check,b=d.colour,C={template_id:v,corp_id:T,default_check:f,colour:b};return Z.WY.post({url:P.ZP.MobileSetting.savePortalColor(),data:C})}function _(d){var v=d.menus,T=d.template_id,f=d.type,b=f===void 0?"mobile":f,C=d.operation_type,M=C===void 0?"update":C,k=CONFIG.MobileSetting.saveHomeModuleSetting(),L={operation_type:M,type:b};return v&&(L.menus=v),T&&(L.template_id=T),request.post({url:k,data:L})}function ae(d){return Z.WY.post({url:P.ZP.MobileSetting.checkEditHome(),data:{template_id:d}})}function U(){var d=P.ZP.multiTerminalLogin.getMultiTerminalLoginInfo();return Z.WY.get({url:d})}function le(d){var v=d.corp_id,T=d.template_id,f={corp_id:v,template_id:T};return Z.WY.get({url:P.ZP.MobileSetting.getStartupPageInfo(),params:f})}function te(d){var v=d.navigationBarColor,T=d.pageUrl,f=d.startSwitch,b=d.type,C=b===void 0?"ding":b,M=d.template_id,k={template_id:M,startSwitch:f};return v&&(k.colour=v),C==="ding"&&(k.url=T),C==="otherEnd"&&(k.other_url=T),Z.WY.post({url:P.ZP.MobileSetting.saveStartupPageInfo(),data:k})}function se(d){var v=d.corp_id,T=d.template_id,f={corp_id:v,template_id:T};return request.get({url:CONFIG.MobileSetting.getThemeColor(),params:f})}function F(d){var v=d.colour,T=d.default_check,f=d.template_id;return request.post({url:CONFIG.MobileSetting.saveThemeColor(),data:{colour:v,default_check:T,template_id:f}})}function B(){var d=CONFIG.pcCustomize.queryBackGround();return request.get({url:d})}function J(){return Z.WY.get({url:P.ZP.MobileSetting.getDefaultBannerList()})}function Y(d){var v=CONFIG.pcCustomize.setBackGround();return request.post({url:v,data:d})}function q(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"1",T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",f=CONFIG.MobileSetting.resetHomeModuleSetting(v);return request.post({url:"".concat(f,"?type=").concat(d,"&key=").concat(T),data:{}})}function K(d){var v=P.ZP.MobileSetting.updateDefaultBanner();return Z.WY.post({url:v,data:d})}},84291:function(G,W,r){"use strict";r.d(W,{w:function(){return V},G:function(){return R}});var P=r(6793),Z=r(2396),e=r(3407),N=(0,P.me)(),I=e.Z[N].h5Article.validation,V=j=>{var X;return Z.fA.url.test(j)||(X=I.urlIllegal),X},R=j=>{var X;return Z.fA.httpsUrl.test(j)||(X=I.httpsUrlIllegal),X}},96583:function(G){G.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAP1BMVEVHcEwpyO0K1vwhe5YSUWQX2P0IO04BJjACJTQBIS0s4P8YX3cs1vwZzfMkjakFMD8Zcosnu90hp8Upr80qnLs5sby5AAAAAXRSTlMAQObYZgAAAU9JREFUOMutlFuigyAMRMsjQOQpuv+13kBsb0X0q+FH5ZgMZuLr9cOQCwXAMg+ADkFSD5Fkh4LGh9AMgUZr3U18Q3Rr53GCxs3jwSkTPWUNXJmZdnGC0NBJkvIZXcvbOTdmQr8E+iiwfYpPIYh7qhHWjL0SV7tAwqArAB5dk4Z2likQhG6FhFanWlWel6NMblsS8UBL4wg52iEIjZCFsu2+7MaOmhoktNGV8pkIrZ1X4Q2SQlAVhXmF1dv+rS4QyBDE5untEgD2JnACRa+N61X8CrAaeyO8N5G2soqgzqezh3DDQlwm2TWkGUTn6v1AsylfBJQZtAjTe4smLCHIbdDUe6lTyuyQXPatKhY42NchHr23zVI4NphdwZa0zM1N9z8wby/xzeMgDNMSbkfqq8ENelcbmNNwNmMcY20/C7/nLnjzEJ4hslEUtxHlL39zfwMOHbGTLGJMAAAAAElFTkSuQmCC"},10424:function(G){G.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAk1BMVEVHcEz9znL9ykXsdAr70YT+0nT+uSD+35f+zij//776sin/8bfxkTP/56jtfBXznkb+uR32rlz+rwbrbQLuhCH92Fb92mH+ySH/4of2oCr/3p3vhib7vEb+zjX+zzf+7rf9rQDqbAD9zB79yBX+4pj6siv9wwr9zTv4piv9wzDseAn912n9sQr9tBbvhhb+66n91E9DIHadAAAAH3RSTlMAaqHxS2H7MP4J/RG5GeGe14D2+9ORg9by9yfLwrq6cuAVxgAAAV5JREFUOMu1lNuSgjAMhjkXRkBRx/NuA6yIIur7P902qWhbcL1x/xuY9puPkElrWZ/PiHn2wvlerlbLL2dhe2zUQ/ywKMqyqqqG80Y8yrIoQl9nWHCHBEMUQQFTmWhyRKiqbpxyExRCk0iBHDiS6MB5R6EqAEcpCCT0YDg/IHQEeJTFpgAHAYWc65SApqwrCBDSGc5DguBelgMEFVcdutLnQJblg4QMBimCsCwsCKEeIygJibJ2e0rzM5BG7u0s5uaYCwzkQluu+EFvRq/7PrOnjZmHlduvVFJky0ZlwyopyrqWjwdVJBo/hyAeUJEoVsZgNBcLp7PKnE9iaa5NZ5KaKhSliTGarq5CkcvMIcd21U+o7hpkHAVVhSJ/6ExliqpWGqRHtKuVTKs2yEjcqeo8fnmIo61Utfk2en3Uk5RUtdkgPRtXqFp38/e1wdYAa/bucvGCwHt/Bdm29X/5BV7vVM1+ejbGAAAAAElFTkSuQmCC"},29023:function(G,W,r){G.exports=r.p+"static/startup-page-example.897d9b48.png"},8429:function(G,W,r){G.exports=r.p+"static/startup-page-example2.82b2ae7e.png"},40135:function(G){G.exports="data:image/png;base64,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JWV7Ib0ZeAvNRzehLZsDcjLE7IC0cC8t3klLRxhzwte6m/5p0X5w6G/8PlGr+9Wj1pp8xPEQdXYsqteRMUX9cJkJmIAJtBUBnmsv8eA9ivZ+jb4cFJufQ+YsYl6IjnpPGYu+HHtS6Of4KvurM+oXoqOo35vxvptXj7J5xOhozDCk37F/Li/WfhMwgdoJcE9NpVZDpZrELSZmGPdjH9IRaFP0T/zTSXON8uuo8ysC9KZbx2b0izP6bs8S0kKjno6xPIp07CbTaEfH6WpeyFJvEe0/S92haO8gvUEhW9em40VVbZIUjaLiP3hRZZeZgAmYQFcjwOTQkzFrwtBOlc5lzkWazGo+qkI9mwmYgAmYQCsI8CzegWqDkX6hRs/l7qge7SM6pTdPTzNP5G521GPH3ScTMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETMAETWBcI/B/WmNrYU8FtygAAAABJRU5ErkJggg=="}}]);
