(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[5922],{30311:function(Te,te,e){"use strict";var q=e(22385),D=e(31097),O=e(12924),M=e.n(O),Z=e(8812),C=e(28216),Q=a=>{var E=(0,C.v9)(r=>{var _=r.advancedSetting;return{themeColor:_.themeColor}}),w=E.themeColor;return M().createElement(D.Z,{placement:"top",title:a.name},M().createElement("span",{className:"cl-table__cell-arrow",onClick:a.onClick},M().createElement("span",{style:{color:w}},a.name),M().createElement("span",{className:"cl-table__cell-arrow-icon"},M().createElement(Z.Z,null))))};te.Z=Q},30389:function(Te,te,e){"use strict";e.d(te,{Z:function(){return A}});var q=e(62029),D=e(20228),O=e(11382),M=e(12924),Z=e.n(M),C=e(91768),Q=e(80991),a={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},E=e(62615),w=e(52670);class r extends Z().Component{render(){var l=this.props,t=l.values,v=l.mode,n=l.onlyChooseDept,s=l.reserveUser,y=l.t,m=l.orgProps,P=l.rangeAuth,R=l.projectId,G=l.onCancel,V=l.onlyCreateUser;return Z().createElement(Q.l0,{className:"cl-form"},Z().createElement(Q.gN,(0,q.Z)({component:E.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:y("common.visibleRange"),defaultFieldList:t.employeeRange,validate:w.FI,mode:v,rangeAuth:P,onlyChooseDept:n,onlyCreateUser:V,orgProps:m,reserveUser:s,projectId:R,onCancel:G,qwTicketShow:!0},a)))}}var _=(0,C.Z)()(r),u=e(18329),Y=e(34773);class $ extends Z().Component{constructor(){super(...arguments);this.initRefFormik=l=>{this.refFormik=l},this.handleBeforeCreate=()=>{var l=this.refFormik;l.submitForm(),l.runValidations().then(t=>{if(!Object.keys(t).length){var v=l.state.values.employeeRange,n=(0,Y.b)(v.rangeList),s={qyWeChatVo:v.qyWeChatVo,id:this.props.actionId,isAll:v.rangeType,groupIds:v.rangeType===2?n.groupIds.join(","):"",departmentIds:v.rangeType===2?n.deptIds.join(","):"",userIds:v.rangeType===2?n.userIds.join(","):"",postIds:v.rangeType===2?n.postIds.join(","):"",clusterIds:v.rangeType===2?n.clusterIds.join(","):"",qy_we_chat_vo:v.qyWeChatVo};this.props.onCreate(s)}})},this.handleBeforeCancel=()=>{var l=this.props.onCancel;l()}}render(){var l=this.props,t=l.visible,v=l.initialParams,n=l.isLoading,s=l.tipInfo,y=l.mode,m=l.onlyChooseDept,P=l.reserveUser,R=P===void 0?[]:P,G=l.t,V=l.title,h=l.orgProps,x=l.rangeAuth,N=l.projectId,k=l.onCancel,H=l.onlyCreateUser,j=l.size;return n?Z().createElement(O.Z,{size:"large"}):Z().createElement(u.ZP,{wrapClassName:"cl-employee-selector-modal",visible:t,title:V||G("component.changeUser"),okText:G("common.ok"),cancelText:G("common.cancel"),size:j,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},n?Z().createElement(O.Z,{size:"large"}):Z().createElement(Q.J9,{ref:this.initRefFormik,initialValues:v,render:K=>Z().createElement(_,(0,q.Z)({},K,{mode:y,rangeAuth:x,orgProps:h,onlyChooseDept:m,onlyCreateUser:H,reserveUser:R,projectId:N,onCancel:k}))}),s&&Z().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},s))}}$.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var A=(0,C.Z)()($)},98417:function(Te,te,e){"use strict";var q=e(62029),D=e(57663),O=e(71577),M=e(34792),Z=e(48086),C=e(34669),Q=e(82833),a=e(22385),E=e(31097),w=e(12924),r=e.n(w),_=e(91768),u=e(90631),Y=e(28216),$=e(27361),A=e.n($),X=e(78138),l=e.n(X),t=e(27326),v=e.n(t),n=e(61120),s=e.n(n),y=e(18329),m=e(38642),P=e(31457),R=e(6793),G=e(37055),V=e(5430),h=e(10237),x=e(84874),N=j=>{var K=j.user;return{enterpriseId:K.enterpriseId}},k={size:"medium",destroyOnClose:!0,bodyStyle:{overflowY:"auto",padding:0},maskClosable:!1};class H extends r().Component{constructor(K){super(K);this.getTaskInfo=()=>{var o=this.props,f=o.userId,I=o.taskId,T=o.studyType,de=T===void 0?"":T,F=this.state.whiteList,d=F.zaraFlag?G.ZP.TaskStudyRecord.getCustomTaskInfo(I):G.ZP.TaskStudyRecord.getTaskInfo(I),S=F.zaraFlag?G.ZP.StudyProjectList.studyCustomRecord(I):G.ZP.StudyProjectList.studyRecord(I),g=de==="project"?S:d,ae={user_id:f};h.WY.get({url:g,params:ae}).then(se=>{this.setState({taskInfo:de==="project"?this.compileData(se.data):se.data.data})})},this.compileData=o=>{var f=this.props.from,I=f===void 0?"":f;return o.map(T=>{var de=T.resources.map(F=>I==="self_study"&&F.type===14?{}:{type:this.getResourceType(F),iconType:this.getResourceIcon(F),title:String(F.type)!=="14"&&String(F.courseType)!=="14"?F.resource_name:F.evaluate.name,courseType:F.courseType,studyProgress:F.study_progress,biz_type:F.biz_type||"",updateTime:F.update_time,resource_quiz_vo:{},live_lesson:F.type===16?F.live_lesson:{},offLineCourseSingVo:F.type===7||F.type===13?F.offLineCourseSingVo:{},courseInfo:F.type===1&&F.biz_type!=="micro_course"?F.resources.map(d=>({type:this.getResourceType(d),iconType:this.getResourceIcon(F),title:d.resource_name,studyProgress:d.study_progress,resource_quiz_vo:d.resource_quiz_vo||{}})):[]});return{stageName:T.stage_name,courseInfo:de.filter(F=>Object.keys(F).length>0)}})},this.getResourceIcon=o=>{var f=o.type;switch(f){case 1:return"icon-kecheng2";case 2:case 3:return"icon-sucai";case 6:return"icon-kaoshi2";case 7:return"icon-xianxiake1";case 9:return"icon-tiaoyan";case 10:return"icon-shicaozuoye";case 11:return"icon-gangweiceping1";case 12:return"icon-fudao";case 13:return"icon-kaoqin";case 14:return"icon-tuiguang";case 15:return"icon-kaoshi2";case 16:return"icon-zhiboke";case 17:return"icon-lianxi1";default:return"icon-kecheng2"}},this.getResourceType=o=>{var f=o.type,I=o.content_type,T=o.biz_type;switch(f){case 1:return T==="micro_course"?"wei":"crs";case 2:return I;case 3:return I;case 6:return"ex";case 7:return"xx";case 9:return"questionnaire";case 13:return"attendance";case 15:return"ex";case 16:return"liveClass";case 17:return"practice";default:return I}},this.handleCancel=()=>{var o=this.props.onCancel;o&&this.props.onCancel()},this.renderTutorStatus=o=>{var f=this.props.t;return o.tutorialsStatus==="no_tutor"?f("tutorial.noSelectTutor"):o.tutorialsStatus==="to_be_submitted"?f("tutorial.waitSubmitTutor"):o.tutorialsStatus==="to_be_evaluated"?f("tutorial.waitEvaluate"):o.tutorialsStatus==="evaluated"?"".concat(f("tutorial.haveEvaluation")," ").concat(o.score).concat(f("common.examScoreUnit")):""},this.renderTitle=o=>o.type==="tutor"?o.courseName:o.type==="xx"?A()(o.offLineCourseSingVo,"title",""):o.title,this.renderResourceItem=(o,f)=>{var I=this.props.t;return o.type==="practice"?null:r().createElement("div",{className:"stage-item-resource",key:f},r().createElement("span",{className:"stage-item-resource-icon"},r().createElement(x.Z,{iconClass:o.iconType,size:"16px"})),r().createElement("span",{className:"stage-item-resource-title"},r().createElement("span",{className:"stage-item-resource-title-name"},r().createElement(E.Z,{title:this.renderTitle(o)},this.renderTitle(o))),o.studyProgress>0?r().createElement("span",{className:"stage-item-resource-time"},"(",(0,R.p6)(o.updateTime,"yyyy.MM.dd hh:mm"),I("component.update"),")"):null),r().createElement("span",{className:"stage-item-resource-progress"},o.type==="tutor"?this.renderTutorStatus(o):r().createElement(Q.Z,{percent:+o.studyProgress,size:"small",status:o.studyProgress>=100?"success":"normal",strokeColor:o.studyProgress>=100?"#58D28B":""})),o.courseInfo&&o.courseInfo.length>0?r().createElement("div",{className:"stage-item-resource-course course-resource"},o.courseInfo.map((T,de)=>r().createElement("div",{className:"course-resource-item",key:de},r().createElement("span",{className:"course-resource-item-icon"}),r().createElement("span",{className:"course-resource-item-title"},T.title),r().createElement("span",{className:"course-resource-item-progress"},r().createElement(Q.Z,{percent:+T.studyProgress,size:"small",status:T.studyProgress>=100?"success":"normal",strokeColor:T.studyProgress>=100?"#58D28B":""})),T.resource_quiz_vo.question_count>0?r().createElement("div",{className:"course-resource-item-test"},I("component.InClassTest"),r().createElement("span",null,T.resource_quiz_vo.answer_record_count>0?I("component.tookPart"):I("component.NotAttending"))):null))):null,o.courseType===7?r().createElement("div",{className:"stage-item-resource-offline"},r().createElement("div",{className:"offline-info-item"},I("component.offlineAddress"),"\uFF1A",A()(o.offLineCourseSingVo,"address","")||I("component.noLabel")),A()(o.offLineCourseSingVo,"signRecordDetailList",[]).map((T,de)=>r().createElement("div",{className:"offline-record-info-item-row",key:de},r().createElement("div",null,r().createElement("span",null,I("lineClass.attendanceName"),"\uFF1A"),r().createElement("span",null,T.signName)),T.signInConfigExist?r().createElement("div",null,r().createElement("span",null,I("personal.checkInTime"),"\uFF1A"),r().createElement("span",null,"".concat(T.signInTime?l()(T.signInTime).format("YYYY-MM-DD HH:mm"):"--"," ").concat(T.signInStatusDesc||""))):null,T.signOutConfigExist?r().createElement("div",null,r().createElement("span",null,I("lineClass.signBack"),"\uFF1A"),r().createElement("span",null,"".concat(T.signOutTime?l()(T.signOutTime).format("YYYY-MM-DD HH:mm"):"--"," ").concat(T.signOutStatusDesc||""))):r().createElement("div",null)))):null,o.courseType===13?r().createElement("div",{className:"stage-item-resource-offline"},A()(o.offLineCourseSingVo,"signRecordDetailList",[]).map((T,de)=>r().createElement("div",{className:"offline-record-info-item-row",key:de},r().createElement("div",null,r().createElement("span",null,I("lineClass.attendanceName"),"\uFF1A"),r().createElement("span",null,T.signName)),T.signInConfigExist?r().createElement("div",null,r().createElement("span",null,I("personal.checkInTime"),"\uFF1A"),r().createElement("span",null,"".concat(T.signInTime?l()(T.signInTime).format("YYYY-MM-DD HH:mm"):"--"," ").concat(T.signInStatusDesc||""))):null,T.signOutConfigExist?r().createElement("div",null,r().createElement("span",null,I("lineClass.signBack"),"\uFF1A"),r().createElement("span",null,"".concat(T.signOutTime?l()(T.signOutTime).format("YYYY-MM-DD HH:mm"):"--"," ").concat(T.signOutStatusDesc||""))):r().createElement("div",null)))):null,o.courseType===16?r().createElement("div",{className:"stage-item-resource-offline"},r().createElement("div",{className:"liveClass-record-info-item-row",key:f},r().createElement("div",null,r().createElement("span",null,I("component.lecturer"),"\uFF1A"),r().createElement("span",null,o.live_lesson.teacher_name)),o.live_lesson.live_start_time?r().createElement("div",null,r().createElement("span",null,I("live.liveTime"),"\uFF1A"),r().createElement("span",null,o.live_lesson.live_start_time&&o.live_lesson.live_end_time===0?l()(o.live_lesson.live_start_time*1).format("YYYY-MM-DD HH:mm"):""),r().createElement("span",null,o.live_lesson.live_start_time&&o.live_lesson.live_end_time!==0?(0,m.yM)(o.live_lesson.live_start_time,o.live_lesson.live_end_time):"")):"--")):null)},this.changeProgressSvg=o=>{o.length>0&&o.forEach(f=>{var I=f.getElementsByTagName("svg")[0];I&&(I.parentNode.display="none",I.parentNode.innerHTML='<span class="item-right-complete">100%</span>')})},this.changeStyle=(o,f,I)=>{o&&o.length!==0&&o.forEach(T=>{T.style[f]=I})},this.exportFile=()=>{var o=this.props,f=o.taskId,I=o.userId,T=o.studyType,de=G.ZP.StudyProjectList.getExportRecord(f),F=V.lk.getExportRecord(f),d=T==="project"?F:de;this.setState({download:!0});var S={user_id:I};h.WY.get({url:d,params:S}).then(g=>{this.setState({download:!1}),g.data.code===200&&((0,P.Pp)(this.props),Z.default.success(this.props.t("study.compoundSucceed")))}).catch(()=>{this.setState({download:!1})})},this.getFirstElementChild=o=>{if(o.firstElementChild!==void 0)return o.firstElementChild;for(var f=o.firstChild;f&&f.nodeType!==1;)f=f.nextSibling;return f},this.getLastElementChild=o=>{if(o.lastElementChild!==void 0)return o.lastElementChild;for(var f=o.lastChild;f&&f.nodeType!==1;)f=f.previousSibling;return f},this.exportPdf=o=>{var f=this.props,I=f.mainTaskInfo,T=f.studyType;this.setState({downloadPdf:!0}),Z.default.warn(this.props.t("common.pdfDowning"));var de=(0,R.p6)(new Date,"yyyy-MM-dd hh:mm:ss"),F=document.getElementsByClassName("ant-modal-content")[0];F.style.overflowX="hidden";var d=document.createElement("div");d.className="taskstudy-record extra-record",d.scrollTop=0;var S=document.getElementsByClassName("taskstudy-record")[0],g;S?(g=S.cloneNode(!0),g.className="extra-no-style"):(g=document.createElement("div"),g.className="extra-no-style");var ae=g.getElementsByClassName("taskstudy-record-item");this.changeStyle(ae,"borderTop",0);var se=g.getElementsByClassName("stage-item-title");this.changeStyle(se,"fontSize","13px");var J=g.getElementsByClassName("stage-item-resource-icon"),re=g.getElementsByClassName("course-resource-item-icon");this.changeStyle(J,"marginRight","0"),this.changeStyle(re,"marginRight","0");var he=g.getElementsByClassName("stage-item-resource-title"),Pe=g.getElementsByClassName("course-resource-item-title");this.changeStyle(he,"fontSize","13px"),this.changeStyle(Pe,"fontSize","13px");var b=g.getElementsByClassName("stage-item-resource");this.changeStyle(b,"padding","20px 0"),this.changeStyle(b,"borderBottom","0.5px solid #8C8C8C");var L=g.getElementsByClassName("stage-item-resource-offline");this.changeStyle(L,"paddingTop","10px");var ie=this.getLastElementChild(this.getLastElementChild(g));ie.style.paddingBottom="90px";var ue=this.getFirstElementChild(g),pe=document.createElement("h1");pe.innerHTML=window.localStorage.getItem("enterpriseName"),g.insertBefore(pe,ue);var Ee=document.createElement("table");Ee.className="stage-item-table",Ee.innerHTML=`<tbody>
      <tr>
        <td>\u59D3\u540D</td>
        <td colspan="3">`.concat(o.userName||"",`</td>
      </tr>
      <tr>
        <td>\u6240\u5C5E\u90E8\u95E8</td>
        <td> `).concat(o.departName.replace(/,/g," | ")||"",`</td>
        <td>\u6240\u5C5E\u5C97\u4F4D</td>
        <td>`).concat(o.postNameList?o.postNameList.join(" | "):"",`</td>
      </tr>
    </tbody>`),g.insertBefore(Ee,ue);var ve=document.createElement("div");ve.className="stage-item-bottom",ve.innerHTML=`<div class="item-bottom-left">
        \u64CD\u4F5C\u4EBA\uFF1A`.concat(window.localStorage.getItem("name"),`
    </div>
    <div class="item-bottom-right">
      <span>
          \u5BFC\u51FA\u9879\u76EE\uFF1A\u5B66\u4E60\u8BB0\u5F55
      </span>
      <span>
          \u5BFC\u51FA\u65F6\u95F4\uFF1A`).concat(de,`
      </span>
    </div>`),g.appendChild(ve);var Ce=g.getElementsByClassName("stage-item-resource-progress"),Ie=g.getElementsByClassName("course-resource-item-progress"),fe=g.getElementsByClassName("ant-progress-inner"),i=g.getElementsByClassName("ant-progress-text");this.changeStyle(Ce,"width","230px"),this.changeStyle(Ie,"width","230px"),this.changeStyle(fe,"background","#ebebeb"),this.changeStyle(i,"color","#000000"),this.changeProgressSvg(Ce),this.changeProgressSvg(Ie);var c=g.querySelectorAll("svg");c.length>0&&c.forEach(p=>{p.style.display="none"}),d.appendChild(g),F.appendChild(d),s()(g,{allowTaint:!0,scale:3}).then(p=>{for(var B=new(v())("p","mm","a4"),W=p.getContext("2d"),U=190,ee=277,me=Math.floor(ee*p.width/U),le=0;le<p.height;){var ne=document.createElement("canvas");ne.width=p.width,ne.height=Math.min(me,p.height-le),ne.getContext("2d").putImageData(W.getImageData(0,le,p.width,Math.min(me,p.height-le)),0,0),B.addImage(ne.toDataURL("image/jpeg",1),"JPEG",10,10,U,Math.min(ee,U*ne.height/ne.width)),le+=me,le<p.height&&B.addPage()}B.save("".concat(o.userName||"\u59D3\u540D","_").concat(T==="project"?I.title:I.trainName||"\u540D\u79F0","_\u5B66\u4E60\u8BB0\u5F55.pdf")),F.removeChild(d),this.setState({downloadPdf:!1})})},this.compileRecord=o=>({userName:o.user_name,departName:o.department_name,postNameList:[]}),this.generateButton=()=>{var o=this.props,f=o.t,I=o.record,T=o.studyType,de=this.state.whiteList,F=de.generatePdf,d=T==="project"?this.compileRecord(I):I;return F?r().createElement(w.Fragment,null,r().createElement(O.Z,{type:"primary",loading:this.state.downloadPdf,icon:r().createElement(u.Z,null),onClick:()=>this.exportPdf(d)},f("common.generatePdf")),T!=="project"&&r().createElement(O.Z,{type:"primary",loading:this.state.download,icon:r().createElement(u.Z,null),onClick:()=>this.exportFile()},f("exam.exportQuestion"),"EXCEL")):r().createElement(O.Z,{type:"primary",loading:this.state.download,icon:r().createElement(u.Z,null),onClick:()=>this.exportFile()},f("exam.exportQuestion"),"EXCEL")},this.footerButton=()=>r().createElement(O.Z,{onClick:()=>this.handleCancel()},this.props.t("common.unactivated")),this.state={taskInfo:[],download:!1,whiteList:{generatePdf:(0,m.UI)("GENERATE_PDF"),zaraFlag:(0,m.UI)("ZARA_H5")}}}componentDidUpdate(K){K.visible!==this.props.visible&&this.props.visible&&this.getTaskInfo()}render(){var K=this.state.taskInfo,o=this.props,f=o.t,I=o.generatePdf;return r().createElement(y.ZP,(0,q.Z)({},k,{footer:I?this.generateButton():this.footerButton(),visible:this.props.visible,title:f("common.studyRecord"),onCancel:this.handleCancel}),r().createElement("div",{className:"taskstudy-record"},K.map((T,de)=>!T.courseInfo||T.courseInfo.length===0?null:r().createElement("div",{key:de,className:"taskstudy-record-item stage-item"},r().createElement("div",{className:"stage-item-title"},T.stageName),T.courseInfo.map((F,d)=>this.renderResourceItem(F,d))))))}}H.defaultProps={visible:!1,userId:"",taskId:"",studyType:"",onCancel:()=>{}},te.Z=(0,Y.$j)(N)((0,_.Z)()(H))},63848:function(Te,te,e){"use strict";var q=e(36877),D=e(32969),O=e(12924),M=e.n(O),Z=e(91768),C=e(56130);class Q extends M().PureComponent{constructor(){super(...arguments);this.onChange=(E,w)=>{this.props.onChange(E,w)}}render(){var E=this.props,w=E.value,r=E.classify,_=E.showLabel,u=E.className,Y=E.t,$=E.style;return M().createElement("div",{className:"classify-cascader ".concat(u)},_?M().createElement("span",{className:"classify-cascader-label"},Y("component.selectClassifyLabel")):null,M().createElement(D.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(u),options:r,onChange:this.onChange,placeholder:Y("component.selectClassifyLabel"),value:w,style:$,loadData:this.props.loadData}))}}Q.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},te.Z=(0,C.Z)((0,Z.Z)()(Q))},51697:function(Te,te,e){"use strict";var q=e(22385),D=e(31097),O=e(33565),M=e(12924),Z=e.n(M),C=e(28216),Q=e(84874),a=w=>{var r=w.title,_=w.visible,u=w.placement,Y=u===void 0?"top":u,$=w.children,A=$===void 0?null:$,X=w.isNewUser,l=X===void 0?"":X,t=w.closeGuide,v=w.guideStatus,n=(0,M.useState)(!1),s=(0,O.Z)(n,2),y=s[0],m=s[1],P=V=>Z().createElement("div",{className:"guide-tooltip-title"},V,Z().createElement("span",{onClick:R},Z().createElement(Q.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,M.useEffect)(()=>{m(_)},[_]);var R=V=>{if(V.stopPropagation(),V.preventDefault(),m(!1),t){t();return}l==="true"&&w.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),G()},G=()=>{localStorage.setItem("guideStatus","false"),w.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return Z().createElement(D.Z,{title:P(r),placement:Y,visible:y&&v==="true"&&r},A)},E=w=>({guideStatus:w.advancedSetting.guideStatus,isNewUser:w.advancedSetting.isNewUser});te.Z=(0,C.$j)(E)(a)},54792:function(Te,te,e){"use strict";var q=e(62029),D=e(63185),O=e(9676),M=e(47673),Z=e(4107),C=e(88986),Q=e(12924),a=e.n(Q),E=e(91768),w=e(59239),r=e(55446),_=e.n(r),u=e(18329),Y=e(2396);class $ extends a().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var l=this.props,t=l.form,v=l.id,n=l.onCreate,s=this.state.isChecked;t.validateFields((y,m)=>{if(!y){var P=(0,C.Z)({},m);s||(P.value=0);var R=(0,C.Z)((0,C.Z)({},P),{},{id:v});n(R),setTimeout(()=>{t.resetFields()},100)}})},this.handleBeforeCancel=()=>{var l=this.props,t=l.form,v=l.onCancel;v(),setTimeout(()=>{t.resetFields()},100)},this.checkScore=(l,t,v)=>{var n=this.props.t,s=this.state.isChecked;if(s&&(0,Y.kh)(t)){v(n("component.setScoreRuleTip"));return}v()},this.handleCheckChange=l=>{this.setState({isChecked:l.target.checked})},this.renderItem=()=>{var l=this.props,t=l.form,v=l.initialValue,n=l.labelTxt,s=this.state.isChecked,y=t.getFieldDecorator,m={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},P=s?y("value",{initialValue:v,rules:[{validator:this.checkScore}]})(a().createElement(Z.Z,{maxLength:30,placeholder:""})):null,R=a().createElement(a().Fragment,null,a().createElement(O.Z,{checked:s,onChange:this.handleCheckChange},n));return a().createElement(w.Z.Item,(0,q.Z)({label:R},m),P)}}componentDidUpdate(l){this.props.visible&&this.props.visible!==l.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var l=this.props,t=l.visible,v=l.title,n=l.prefixCls;return a().createElement(u.ZP,{size:"small",visible:t,title:v,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},a().createElement(w.Z,{className:"".concat(n),layout:"horizontal",colon:!1},this.renderItem(),a().createElement("div",{className:"".concat(n,"__children")},this.props.children)))}}$.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var A=w.Z.create({name:"ClSetupBoxInModal"})($);te.Z=(0,E.Z)()(A)},11449:function(Te,te,e){"use strict";e.d(te,{Z:function(){return V}});var q=e(88986),D=e(33565),O=e(12924),M=e.n(O),Z=e(3115),C=e(49111),Q=e(19650),a=e(62029),E=e(57663),w=e(71577),r=e(91768),_=e(28216),u=e(37055),Y=e(10237);function $(h){var x=u.ZP.getHelpContentByMenuKey(),N={key:h};return Y.WY.get({url:x,params:N})}var A=e(74228),X=e.n(A),l=e(1164),t=e(76466),v=e(38642);class n extends M().Component{constructor(x){var N;super(x);N=this,this.getHelpContentByMenuKey=()=>{var k=this.props.defaultMenuKey;$(k).then(H=>{var j=H.data,K=j.help_url,o=j.video_url;this.setState({videoUrl:o,helpUrl:K})})},this.handleOpenHelpUrl=k=>{if((0,v.ve)()){window.open(k,"_blank");return}l.Z.targetTo({path:k,isExternalLink:!0})},this.handleOpenVideo=function(k){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N.props.t("helpCenter.video");N.setState(j=>({resourcePlayInfo:(0,q.Z)((0,q.Z)({},j.resourcePlayInfo),{},{resourceInfo:{originUrl:k,source:{FD:k,OD:k},contentType:"mp4"}}),previewInfo:(0,q.Z)((0,q.Z)({},j.previewInfo),{},{title:H,visible:!0,onCancel:N.handleCancelPreview})}))},this.handleCancelPreview=()=>{var k=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,q.Z)((0,q.Z)({},k),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:x.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var x=this.state,N=x.helpUrl,k=x.resourcePlayInfo,H=x.previewInfo,j=x.videoUrl,K=this.props.t;return M().createElement("div",{className:X().helpCenter},j&&M().createElement(w.Z,{type:"link",className:X()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(j)},K("helpCenter.video")),N&&M().createElement(w.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(N)},K("helpCenter.tutorial")),M().createElement(t.Z,(0,a.Z)({},k,{previewInfo:H})))}}var s=h=>({defaultMenuKey:h.currentRoute.menuKey});n.defaultProps={defaultMenuKey:""};var y=(0,_.$j)(s)((0,r.Z)()(n));function m(h){var x=h.extra,N=localStorage.getItem("dingPersonnel"),k=sessionStorage.getItem("dingPersonnel");return M().createElement(Q.Z,null,x,N!=="dingPersonnel"&&k!=="dingPersonnel"&&(0,v.eY)("COMMONEXTRA_HELP_CENTER")&&M().createElement(y,null))}var P=m,R=e(4408);function G(h){var x=(0,O.useState)({helpCenter:(0,v.eY)("HEAD_HELP_CENTER_BUT")}),N=(0,D.Z)(x,1),k=N[0],H=h.pageContainerParams,j=H===void 0?{}:H,K=h.noPadding,o=K===void 0?!1:K,f=h.isPersonal,I=f===void 0?!1:f,T=h.pageTitle,de=h.className,F=de===void 0?"":de,d={extra:k.helpCenter?M().createElement(P,{extra:j.extra}):j.extra},S=(0,q.Z)((0,q.Z)({},j),d);return M().createElement("div",{className:"page-container-content ".concat(o?"page-container-noPadding":""," ").concat(I?"page-container-content_personal_background":""," ").concat(F)},T&&M().createElement(R.Z,{title:T}),I?M().createElement(Z.Z,null,h.children):M().createElement(Z.Z,S,h.children))}var V=G},37279:function(Te,te,e){"use strict";e.r(te),e.d(te,{default:function(){return Ie}});var q=e(62029),D=e(57663),O=e(71577),M=e(71194),Z=e(57016),C=e(88986),Q=e(12924),a=e.n(Q),E=e(28216),w=e(91768),r=e(84391),_=e(76651),u=e(57068),Y=e(72456),$=e(62117),A=e(14781),X=e(53431),l=e(34669),t=e(82833),v=e(47745),n=e(59250),s=e(13013),y=e(48736),m=e(27049),P=e(30887),R=e(99210),G=e(57254),V=e(67479),h=e(1164);class x extends a().PureComponent{constructor(i){super(i);this.showStudyRecord=()=>{var c=this.props.record;c.study_count<=0||this.props.showStudyRecord(c.user_id)},this.linkToExam=()=>{var c=this.props.record;if(c.exam_count>0&&c.exam_join_count>0){var p=!1;if(c.stage_list&&c.stage_list.length&&c.stage_list.forEach(B=>{B.course_infos.forEach(W=>{W.course_type===15&&(W.status===2||W.status===3)&&(p=!0)})}),p){h.Z.targetTo({path:V.W.parse({user_id:c.user_id,projectId:c.qualification_id,scene:"manage",from:"auth_task"})});return}this.props.linkToExamRecord(c)}},this.linkToWorkAnalysis=()=>{var c=this.props.record;h.Z.targetTo({path:"/training/operation/info?&taskId=".concat(c.qualification_id,"&userId=").concat(c.user_id,"&taskType=qualification&renderList=true&page=monitor&customViewFlag=true")})},this.handleMenuClick=c=>{c==="examRecord"?this.linkToExam():c==="operationRecord"&&this.linkToWorkAnalysis()},this.state={}}render(){var i=this.props,c=i.record,p=i.t,B=c.exam_count>0&&c.exam_join_count>0&&c.exam_get_score_count>0,W=a().createElement(R.Z,{onClick:U=>{var ee=U.key;return this.handleMenuClick(ee)}},a().createElement(R.Z.Item,{key:"examRecord",disabled:!B},a().createElement("span",{className:B?"cl-pointer":"cl-disabled"},p("common.examRecord"))),a().createElement(R.Z.Item,{key:"operationRecord",disabled:c.operation_count<=0},a().createElement("span",{className:c.operation_count<=0?"cl-disabled":"cl-pointer"},p("leftMenuLists.operationRecord"))));return a().createElement("div",{className:"cl-table__cell-action"},a().createElement("a",{className:"cl-pointer ".concat(c.study_count>0?"":"cl-disabled"),onClick:this.showStudyRecord},p("common.studyRecord")),a().createElement(m.Z,{type:"vertical"}),a().createElement(s.Z,{overlay:W},a().createElement("span",{className:"cl-pointer"},this.props.t("common.more")," ",a().createElement(G.Z,null))))}}x.defaultProps={record:{},showStudyRecord:()=>{},linkToExamRecord:()=>{}};var N=(0,w.Z)()(x),k=e(410),H=e(18329),j=e(55285),K=e(37055),o=e(30311);class f extends a().Component{constructor(){super(...arguments);this.state={autoWidth:"auto",getExamAllGradesProps:{visible:!1,planId:"",userId:"",planTitle:""},recordInfo:{visible:!1,taskId:"",examId:"",userId:""}},this.showEveryExamGrade=i=>{var c=i.course_id,p=i.user_id,B=i.title,W=i.course_type,U=i.exam_task_id;if(W===15){this.setState({recordInfo:{visible:!0,taskId:U,examId:c,userId:p}});return}this.setState(ee=>({getExamAllGradesProps:(0,C.Z)((0,C.Z)({},ee.getExamAllGradesProps),{},{visible:!0,planId:c,userId:p,planTitle:B})}))},this.hideEveryExamGrade=()=>{this.setState(i=>({getExamAllGradesProps:(0,C.Z)((0,C.Z)({},i.getExamAllGradesProps),{},{visible:!1,planId:"",userId:"",planTitle:""})}))},this.cancelEveryExamGrade=()=>{this.setState({recordInfo:{visible:!1,taskId:"",examId:"",userId:""}})},this.getTableColumn=i=>{var c=this.props.list,p=c===void 0?[]:c,B=[];p[0]&&(B=p[0].stage_list.map((U,ee)=>{var me=[{title:this.props.t("study.stageProgress"),width:210,dataIndex:["stage_list",ee,"stage_progress"],key:"stageProgress",render:le=>"".concat(le,"%")}];return{title:U.stage_name,children:me.concat(U.course_infos.map((le,ne)=>({title:le.title,dataIndex:["stage_list",ee,"course_infos",ne],key:"courseArr",width:200,render:z=>{if(z.course_type===6||z.course_type===15){var ye=this.props.t,ge=z.status;if(ge===1)return ye("common.ongoing");if(ge===5)return ye("study.absent");if(ge===0)return ye("myExamTask.absent");if(ge===4)return ye("myExamTask.marking");if(ge===2||ge===3){var Re=ye(ge===2?"myExamTask.qualified":"myExamTask.unqualified"),xe="".concat(z.score," ").concat(ye("common.minute"),"(").concat(Re,")");return z.makeup_count>1?a().createElement(o.Z,{name:xe,onClick:()=>this.showEveryExamGrade(z)}):xe}}else if(z.course_type===8){var De=z.operation_status===1?this.props.t("common.pending"):z.operation_status===2?this.props.t("common.reject"):z.operation_status===3?this.props.t("common.completed"):this.props.t("common.ongoing");return De}else return a().createElement("span",null,z.study_progress,"%")}})))}}));var W=[{title:this.props.t("authentication.certificationProgress"),dataIndex:"progress",key:"progress",width:300,render:U=>a().createElement("span",null,a().createElement(t.Z,{percent:U}))},{title:this.props.t("common.studyDuration"),dataIndex:"study_duration_str",key:"study_duration_str",width:110,render:U=>U||"--"},{title:this.props.t("common.examDuration"),dataIndex:"exam_duration_str",key:"exam_duration_str",width:80,render:U=>U||"--"}];return W.splice(6,0,...B),W.push({title:this.props.t("common.operate"),width:this.props.lng==="en_us"?180:140,key:"operate",fixed:"right",render:U=>a().createElement(N,{record:U,showStudyRecord:this.props.showStudyRecord,linkToExamRecord:this.props.linkToExamRecord})}),W},this.handleTableChange=(i,c)=>{this.props.onTableChange({current:i,pageSize:c})}}componentDidUpdate(){var i=document.querySelector(".ant-table"),c=document.querySelector(".ant-table-tbody"),p=i.getBoundingClientRect().width,B=c.getBoundingClientRect().width;this.hasComputed||B-p>10&&(this.hasComputed=!0,this.setState({autoWidth:300}))}render(){var i=this.props,c=i.prefixCls,p=i.list,B=p===void 0?[]:p,W=i.loading,U=i.paginationParams,ee=U===void 0?{}:U,me=i.headerTitle,le=i.toolBarRender,ne=i.t,z=(0,C.Z)((0,C.Z)({},K.XE.INITIAL_PAGINATION),ee),ye=this.getTableColumn(this.state.autoWidth),ge=this.state,Re=ge.getExamAllGradesProps,xe=ge.recordInfo;return a().createElement("section",{className:c},a().createElement("div",{className:"ability-monitor-content-list"},a().createElement(j.Z,{columns:ye,rowKey:"user_id",dataSource:B,pagination:!1,loading:W,headerTitle:me,toolBarRender:le,tableUUID:"6acd2c7f-52bd-47e0-9748-fed2947c232e"})),a().createElement("div",{className:"ability-monitor-pagination-wrapper"},a().createElement(X.Z,(0,q.Z)({},z,{onChange:this.handleTableChange,className:"ability-monitor-pagination"}))),a().createElement(v.Z,(0,q.Z)({},Re,{hideEveryExamGrade:this.hideEveryExamGrade})),xe.visible&&a().createElement(H.ZP,{width:860,footer:null,closable:!1,visible:xe.visible,bodyStyle:{padding:"0 16px 16px 16px"},onOk:this.cancelEveryExamGrade},a().createElement(k.Z,{onCancel:this.cancelEveryExamGrade,from:"manage",taskType:"normal",taskId:xe.taskId,examId:xe.examId,userId:xe.userId})))}}f.defaultProps={prefixCls:"auth-monitor__content__table"};var I=(0,w.Z)()(f),T=e(35925),de=e(22385),F=e(31097),d=e(36202),S=e(6793);class g extends a().PureComponent{constructor(i){super(i);this.linkToDetail=()=>{var c=this.props,p=c.record,B=c.taskId;p.investigate_count<=0||_.m8.push("/training/authentication/powerMonitor/questionnairePaper?id=".concat(p.id,"&from=abilityMonitor&planId=").concat(B,"type=certification"))},this.state={}}render(){var i=this.props.record;return a().createElement("div",{className:"cl-table__cell-action"},a().createElement("a",{onClick:this.linkToDetail,className:"cl-pointer ".concat(i.investigate_count>0?"":"disabled")},this.props.t("study.viewStatistics")))}}g.defaultProps={record:{}};var ae=(0,w.Z)()(g);class se extends a().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var i=[{title:this.props.t("study.surveyName"),dataIndex:"title",key:"id",ellipsis:"true",render:(c,p)=>{var B=p.title;return a().createElement(F.Z,{placement:"topLeft",title:B},a().createElement("div",{className:"cl-text-ellipsis"},B))}},{title:this.props.t("study.collectingResearch"),dataIndex:"investigate_count",key:"investigate_count",width:215,render:(c,p)=>p.investigate_count>0?a().createElement(o.Z,{name:p.investigate_count,onClick:()=>this.linkToDetail(p)}):p.investigate_count},{title:this.props.t("common.creator"),width:106,dataIndex:"create_user",key:"create_user"},{title:this.props.t("study.releaseTime"),width:164,dataIndex:"update_time",key:"update_time",render:(c,p)=>{var B=p.update_time;return(0,S.p6)(B,"yyyy-MM-dd hh:mm")}},{title:this.props.t("common.operate"),width:100,key:"operate",render:(c,p)=>a().createElement(ae,{record:p,taskId:this.props.taskId})}];return i},this.linkToDetail=i=>{this.props.linkToDetail(i.id)}}render(){var i=this.props,c=i.isLoading,p=i.list,B=this.getTableColumn();return a().createElement(d.f,{style:{height:"100%",overflow:"hidden"},loading:c,dataSource:p,columns:B,rowKey:W=>W.id,pagination:!1,tableUUID:"c09edddf-a7e2-49b9-9bc7-894d94a7985a"})}}var J=(0,w.Z)()(se);class re extends a().Component{constructor(i){super(i);this.linkToDetail=c=>{var p=this.props.taskId;_.m8.push({pathname:"/training/authentication/powerMonitor/questionnaire",search:u.stringify({taskId:p,questionnaireId:c,from:"ability"})})},this.state={}}render(){var i=this.props,c=i.questionnaireInfo,p=i.pageSize,B=i.pageNumber,W=i.isLoading,U=i.taskId,ee=(0,C.Z)((0,C.Z)({},K.XE.INITIAL_PAGINATION),{},{defaultPageSize:p,current:B,total:c.total,onChange:this.props.pageChange,onShowSizeChange:this.props.pageSizeChange});return a().createElement("div",{className:"questionnaire-panel-tab"},a().createElement("div",{className:"questionnaire-panel-tab-list"},a().createElement("div",{className:"questionnaire-panel-tab-list-table"},a().createElement(J,{isLoading:W,list:c.list,linkToDetail:this.linkToDetail,taskId:U})),c.total>p||!ee.hideOnSinglePage?a().createElement("div",{className:"questionnaire-panel-tab-list-pagination"},a().createElement(X.Z,ee)):null))}}var he=re,Pe=e(97593),b=e(10237),L=e(11449),ie=e(64262),ue=e(98417),pe=e(4408),Ee=e(60667),ve=fe=>({userLng:fe.user,qyShield:fe.user.qyShield});class Ce extends a().Component{constructor(){super(...arguments);this.state={activeKey:"1",params:{department_id:"",post_id:"",group_id:"",keyword:"",pass_type:0,page_number:1,page_size:20},radioList:[],tableLoading:!0,tableList:[],tableTotal:0,qualificationData:{},taskStudyRecordConfig:{visible:!1,userId:""},workInfo:{},loadingWork:!1,authId:"",loadingQuestionnaire:!1,questionnaireInfo:{},questionnairePageConfig:{pageSize:20,pageNumber:1}},this.initTableList=()=>{var i=u.parse(this.props.location.search),c=i.id,p=this.state.params,B=p.keyword,W=p.userIds;this.setState({tableLoading:!0}),b.WY.get({url:K.ZP.PostAbility.getMonitorList(c),params:(0,C.Z)((0,C.Z)({},this.state.params),{},{keyword:W===""?B:"",userIds:W})}).then(U=>{var ee=U.data.data,me=ee.total_count,le=ee.ongoing_count,ne=ee.on_check_count,z=ee.pass_count;setTimeout(()=>{this.setState({tableLoading:!1,tableList:U.data.data.vo_list.list,tableTotal:Number(U.data.data.vo_list.total),qualificationData:U.data.data.qualification_data,radioList:[{name:"".concat(this.props.t("common.all"),"(").concat(me,")"),value:"0"},{name:"".concat(this.props.t("common.ongoing"),"(").concat(le,")"),value:"2"},{name:"".concat(this.props.t("common.pending"),"(").concat(ne,")"),value:"3"},{name:"".concat(this.props.t("common.completed"),"(").concat(z,")"),value:"1"}]})},300)})},this.handleQueryRowSearch=(i,c)=>{this.resetPagination().then(()=>{this.setState(p=>({params:(0,C.Z)((0,C.Z)({},p.params),{},{keyword:i,userIds:c})}),()=>{this.initTableList()})})},this.handleTreeSelectChange=i=>{this.resetPagination().then(()=>{this.setState(c=>({params:(0,C.Z)((0,C.Z)({},c.params),{},{department_id:i})}),()=>{this.initTableList()})})},this.handleQueryRowRadiosChange=i=>{this.resetPagination().then(()=>{this.setState(c=>({params:(0,C.Z)((0,C.Z)({},c.params),{},{pass_type:i})}),()=>{this.initTableList()})})},this.handleChangPagination=i=>{var c=i.current,p=i.pageSize;this.setState(B=>({params:(0,C.Z)((0,C.Z)({},B.params),{},{page_number:c,page_size:p})}),()=>{this.initTableList()})},this.showStudyRecord=i=>{var c=this.state.taskStudyRecordConfig;c.visible=!0,c.userId=i,this.setState({taskStudyRecordConfig:c})},this.hiddenTaskStudyRecord=()=>{var i=this.state.taskStudyRecordConfig;i.visible=!1,this.setState({taskStudyRecordConfig:i})},this.linkToExamRecord=i=>{_.m8.push({pathname:"/training/examination/result",search:u.stringify({pageFrom:"examMonitor",userId:i.user_id,planId:u.parse(this.props.location.search).id,repeatMarking:!0})})},this.resetPagination=()=>new Promise(i=>{this.setState(c=>({params:(0,C.Z)((0,C.Z)({},c.params),{},{page_number:1,page_size:20})}),()=>{i()})}),this.handleExport=()=>{var i=this.props.t,c=u.parse(this.props.location.search),p=c.id,B="",W=this.state.params;Z.Z.confirm({title:i("common.tip"),content:i("study.confirmToExport"),onOk:()=>{B="access_token=".concat(window.localStorage.getItem("token"),"&department_id=").concat(W.department_id,"&post_id=").concat(W.post_id,`
        &group_id=`).concat(W.group_id,"&keyword=").concat(W.keyword,"&pass_type=").concat(W.pass_type);var U="?".concat(B);(0,Pe.N)({page:"exportPowerMonitor",props:this.props,query:U,rest:{abilityId:p}})}})},this.renderExport=()=>a().createElement("div",null,a().createElement(O.Z,{type:"primary",onClick:this.handleExport},a().createElement(r.Z,null),this.props.t("common.exportData"))),this.renderActionSelect=()=>a().createElement("div",null,a().createElement(ie.Z,{className:"cl-search-normal-width",parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,handleTreeSelectChange:this.handleTreeSelectChange})),this.getWorkAnalysis=()=>{var i=this.state.authId,c=K.ZP.StudyTaskMonitor.getWorksData(),p={entity_type:"qualification",entity_id:i};this.setState({loadingWork:!0}),b.WY.post({url:c,data:p}).then(B=>{this.setState({loadingWork:!1,workInfo:{list:B.data.operations}})})},this.handleChangeTab=i=>{this.setState({activeKey:i});var c=this.state,p=c.workInfo,B=c.questionnaireInfo;switch(i){case"2":p.list||this.getWorkAnalysis();break;case"3":B.list||this.getQuestionnaireData();break;default:break}},this.renderLeftRow=()=>a().createElement(Y.Z,{showBtn:!1,renderActionBtn:this.renderExport}),this.renderRightRow=()=>{var i=this.state.radioList,c=this.props.t;return a().createElement($.Z,{radioList:i,onRadiosChange:this.handleQueryRowRadiosChange,onSearch:this.handleQueryRowSearch,showCheckbox:!1,inputPlaceholder:c("searchInputPlaceholder.userName")})},this.getQuestionnaireData=()=>{var i=this.state,c=i.authId,p=i.questionnairePageConfig,B=p.pageNumber,W=p.pageSize,U=K.ZP.StudyTaskMonitor.getQuestionnaireData(c),ee={page_number:B,page_size:W};this.setState({loadingQuestionnaire:!0}),b.WY.get({url:U,params:ee}).then(me=>{this.setState({loadingQuestionnaire:!1,questionnaireInfo:{total:me.data.total,list:me.data.list}})})},this.questionnairePageChange=i=>{var c=this.state.questionnairePageConfig;c.pageNumber=i,this.setState({questionnairePageConfig:c},()=>{this.getQuestionnaireData()})},this.questionnairePageSizeChange=(i,c)=>{var p=this.state.questionnairePageConfig;p.pageSize=c,this.setState({questionnairePageConfig:p},()=>{this.getQuestionnaireData()})},this.getTabList=()=>{var i=this.props,c=i.t,p=i.qyShield;return[{key:"1",tab:c("study.monitoring"),show:!0},{key:"2",tab:c("study.workAnalysis"),show:!0},{key:"3",tab:c("study.survey"),show:p==="false"}]}}componentDidMount(){var i=u.parse(this.props.location.search),c=i.id;this.setState({authId:c}),this.initTableList()}render(){var i=this.state,c=i.tableTotal,p=i.tableList,B=i.tableLoading,W=i.params,U=i.taskStudyRecordConfig,ee=i.qualificationData,me=i.activeKey,le=i.loadingWork,ne=i.workInfo,z=i.authId,ye=i.loadingQuestionnaire,ge=i.questionnaireInfo,Re=i.questionnairePageConfig,xe={total:c,current:W.page_number,pageSize:W.page_size},De=this.props,Me=De.userLng,Se=De.t;return a().createElement(L.Z,{pageContainerParams:{header:{title:ee.title},tabList:this.getTabList().filter(Le=>Le.show),onTabChange:Le=>{this.handleChangeTab(Le)},content:a().createElement("div",{className:"auth-monitor-info task-info"},a().createElement("div",{className:"task-info-sub"},a().createElement("span",{className:"task-info-sub-item",style:{marginRight:"32px"}},Se("common.updateTime"),"\uFF1A",(0,S.p6)(ee.update_time)),a().createElement("span",{className:"task-info-sub-item"},Se("common.creator"),"\uFF1A",a().createElement(Ee.Z,{dataType:"userName",value:ee.sync_user_id,name:ee.create_name,type:ee.sync_source_type}))),a().createElement("div",{className:"task-info-summary"},Se("authentication.abilityDetailSummary"),"\uFF1A",ee.summary))}},a().createElement(pe.Z,{title:Se("documentTitle.postMonitoring")}),a().createElement("div",{className:"auth-monitor"},a().createElement("div",{className:"auth-monitor__content"},me==="1"&&a().createElement(a().Fragment,null,this.renderActionSelect(),a().createElement(I,{lng:Me.lng,loading:B,paginationParams:xe,list:p,onTableChange:this.handleChangPagination,showStudyRecord:this.showStudyRecord,linkToExamRecord:this.linkToExamRecord,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow}),a().createElement(ue.Z,(0,q.Z)({},U,{onCancel:this.hiddenTaskStudyRecord,taskId:u.parse(this.props.location.search).id}))),me==="2"&&a().createElement(T.Z,{taskId:z,taskType:"qualification",isLoading:le,workInfo:ne}),me==="3"&&a().createElement(he,{taskId:z,isLoading:ye,questionnaireInfo:ge,pageNumber:Re.pageNumber,pageSize:Re.pageSize,pageChange:this.questionnairePageChange,pageSizeChange:this.questionnairePageSizeChange}))))}}var Ie=(0,E.$j)(ve)((0,w.Z)()(Ce))},47745:function(Te,te,e){"use strict";e.d(te,{Z:function(){return R}});var q=e(34792),D=e(48086),O=e(88986),M=e(57663),Z=e(71577),C=e(71153),Q=e(60331),a=e(12924),E=e.n(a),w=e(91768),r=e(76651),_=e(87722);class u extends E().Component{constructor(){super(...arguments);this.handleTimeRange=V=>{var h=V.startTime,x=V.endTime,N=V.dateStrings;if(!N.filter(H=>H).length){this.props.handleChangeDataRange({startTime:"",endTime:""});return}var k={startTime:h,endTime:x};this.props.handleChangeDataRange(k)}}render(){return E().createElement("div",{className:"exam-grades__query"},E().createElement(_.Z,{timestamp:!0,showTime:!0,format:"YYYY-MM-DD HH:mm",onCustomChange:this.handleTimeRange}))}}var Y=(0,w.Z)()(u),$=e(84391),A=G=>{var V=G.t,h=G.shouldRenderExport;return E().createElement("div",{className:"exam-grades__query"},h&&E().createElement(Z.Z,{type:"primary",onClick:G.handleExport},E().createElement($.Z,null),V("common.exportData")))},X=(0,w.Z)()(A),l=e(38642),t=e(10237),v=e(37055),n=e(6793),s=e(18329),y=e(95664),m=e(36202);class P extends E().Component{constructor(V){super(V);this.getTableColumns=()=>{var h=[{title:this.props.t("personal.submitTime"),dataIndex:"planId",key:"planId",width:160,render:(H,j)=>E().createElement("span",{className:"exam-grades__table__cell"},(0,n.p6)(j.commit_time,"yyyy-MM-dd hh:mm:ss"),j.score_rule===1?E().createElement(Q.Z,{color:"#CF3C3C"},this.props.t("myExamTask.highest")):null,j.score_rule===2?E().createElement(Q.Z,{color:"#FFA000"},this.props.t("myExamTask.newest")):null)},{title:this.props.t("examing.examTotalScore"),dataIndex:"total_score",key:"total_score",width:100},{title:this.props.t("myExamTask.score"),dataIndex:"score",key:"score",width:100,render:(H,j)=>j.status===5?"--":H},{title:this.props.t("exam.examTime"),dataIndex:"duration",key:"duration",width:100,render:H=>(0,n.xj)(H)},{title:this.props.t("exam.examResult"),dataIndex:"result",key:"result",width:120},{title:this.props.t("common.operate"),width:100,key:"operate",render:H=>this.props.type==="user"?this.userOperation(H):this.adminOperation(H)}],x={title:this.props.t("exam.marker"),width:100,dataIndex:"marker_name",key:"marker_name"},N=this.props.type,k=N===void 0?"admin":N;return k==="admin"&&h.splice(4,0,x),h},this.userOperation=h=>E().createElement(a.Fragment,null,h.view_rule===0&&E().createElement(Z.Z,{type:"link",size:"small",disabled:!0},this.props.t("common.viewDetails")),h.view_rule===1&&E().createElement(Z.Z,{type:"link",size:"small",onClick:()=>this.viewDetails(h)},this.props.t("myExamTask.answerAnalytics")),h.view_rule===2&&E().createElement(Z.Z,{type:"link",size:"small",onClick:()=>this.viewDetails(h)},this.props.t("exam.viewRightAndWrong"))),this.adminOperation=h=>E().createElement(a.Fragment,null,h.status===5?E().createElement("div",{className:"cl-table__cell-action"},E().createElement("span",{className:"cl-pointer cl-disabled"}," ",this.props.t("common.viewDetails"))):E().createElement("div",{className:"cl-table__cell-action",onClick:()=>this.viewDetails(h)},E().createElement("span",{className:"cl-pointer"}," ",this.props.t("common.viewDetails")))),this.viewDetails=h=>{var x=h.user_id,N=h.plan_id,k=h.makeup_count,H=this.props,j=H.pageFrom,K=H.taskId,o=H.type,f=o===void 0?"admin":o,I="";f==="admin"?I="/training/examination/result?pageFrom=examMonitor&id=".concat(N,"&userId=").concat(x,"&makeupCount=").concat(k):j==="myObligatoryTask"?I="/training/examination/result/personal?fromPage=myObligatoryTask&id=".concat(N,"&userId=").concat(x,"&taskId=").concat(K,"&makeupCount=").concat(k):j==="myExamTask"?I="/training/examination/result/personal?pageFrom=myExamTask&id=".concat(N,"&userId=").concat(x,"&makeupCount=").concat(k):I="/training/examination/result/personal?id=".concat(N,"&userId=").concat(x,"&makeupCount=").concat(k),f==="admin"?r.m8.push(I):(0,l.eJ)({url:I})},this.initTableList=()=>{var h=this.props.planId;t.WY.get({url:v.ZP.ExaminationPlanMonitor.getExamAllGrades(h),params:(0,O.Z)({},this.state.params)}).then(x=>{setTimeout(()=>{this.setState({showList:!0,loading:!1,tableList:x.data.list,tableTotal:Number(x.data.total),tableTotalPages:x.data.pages})},300)}).catch(()=>{this.setState({showList:!1,loading:!1}),this.props.hideEveryExamGrade()})},this.handleTableChange=h=>{var x=this.state.params;x.page_number=h,this.setState({params:x},()=>{this.initTableList()})},this.handleChangeDataRange=h=>{this.setState(x=>({params:(0,O.Z)((0,O.Z)({},x.params),{},{commit_time_start:h.startTime,commit_time_end:h.endTime})}),()=>{this.initTableList()})},this.handleExport=()=>{var h=this.props,x=h.t,N=h.planId,k=v.ZP.ExaminationPlanMonitor.exportExamAllGrades(N),H=this.state.params,j=H.commit_time_start,K=H.commit_time_end,o=H.user_id;k+="?access_token=".concat(window.localStorage.getItem("token"),"&commit_time_start=").concat(j,"&commit_time_end=").concat(K)+"&user_id=".concat(o),window.location.href=k,D.default.success(x("study.exportSucceed"))},this.onCancel=()=>{this.props.hideEveryExamGrade()},this.renderFooter=()=>{var h=this.props.t;return E().createElement(Z.Z,{type:"primary",onClick:this.onCancel},h("common.cancel"))},this.renderLeftRow=()=>E().createElement(Y,{handleChangeDataRange:this.handleChangeDataRange}),this.renderRightRow=()=>{var h=this.props.type,x=h===void 0?"admin":h;return E().createElement(X,{shouldRenderExport:x==="admin",handleExport:this.handleExport})},this.state={loading:!0,params:{commit_time_start:"",commit_time_end:"",user_id:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0,showList:!1}}componentDidUpdate(V){this.props.visible&&this.props.visible!==V.visible&&this.props.userId&&this.setState({params:{commit_time_start:"",commit_time_end:"",user_id:this.props.userId,page_number:1,page_size:10,task_id:this.props.taskId},tableList:[],tableTotal:0,tableTotalPages:0},()=>{this.initTableList()})}render(){var V=this.props,h=V.visible,x=V.t,N=V.planTitle,k=this.state,H=k.showList,j=k.loading,K=k.params,o=k.tableList,f=k.tableTotal,I=k.tableTotalPages;return E().createElement("div",null,h&&H?E().createElement(s.ZP,{size:"large",visible:h,title:x("exam.examDetails"),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},E().createElement("div",{className:"exam-grades"},E().createElement("div",{className:"exam-grades__title"},N),E().createElement(m.f,{bordered:!0,columns:this.getTableColumns(),rowKey:"makeup_count",dataSource:o,pagination:!1,loading:j,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow,tableUUID:"a7d5cb8a-163d-4795-953e-ae47d83ee50d"}),E().createElement(y.Z,{defaultPageSize:10,totalNum:f,totalPage:I,current:K.page_number,showRenderRefresh:!1,onChange:this.handleTableChange}))):null)}}var R=(0,w.Z)()(P)},72456:function(Te,te,e){"use strict";var q=e(49111),D=e(19650),O=e(57663),M=e(71577),Z=e(12924),C=e.n(Z),Q=e(28216),a=e(91768),E=e(84391),w=e(90631),r=e(49101),_=e(76651),u=e(31945),Y=e(1164),$=e(51697),A=l=>{var t=l.user,v=l.currentRoute,n=l.advancedSetting;return{currentPath:v.path,allAuthRoutes:v.allAuthRoutes,userLng:t.lng,themeColor:n.themeColor,qyShield:t.qyShield}};class X extends C().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var t=this.props.tabLink;_.m8.push(t)},this.renderActionBtn=()=>{var t=this.props,v=t.prefixCls,n=t.actionText,s=t.t,y=t.tabLink,m=t.showBtn,P=t.renderActionBtn,R=t.newPage,G=t.popOverProps,V=G===void 0?[]:G,h=t.renderGuide,x=h===void 0?!1:h,N=t.showDownloadBtn,k=N===void 0?!1:N,H=t.showImportBtn,j=H===void 0?!1:H,K=t.showCreateBtn,o=K===void 0?!0:K,f=t.rowReverse,I=f===void 0?!1:f,T="".concat(v,"__action");if(!m&&P&&typeof P=="function")return C().createElement("div",{className:T},P());if(!m||!n)return null;var de=V.length?V[0].contentText:"";return C().createElement("div",{className:"".concat(T," ").concat(I&&"row-reverse")},C().createElement(D.Z,{size:16},k&&C().createElement(M.Z,{icon:C().createElement(E.Z,null),onClick:this.handleDownload},s("common.exportData")),j&&C().createElement(M.Z,{icon:C().createElement(w.Z,null),onClick:this.handleImport},s("exam.importTemplate")),o&&R&&C().createElement(Y.Z,{to:y},C().createElement($.Z,{visible:de&&x,placement:"topLeft",title:de},C().createElement(M.Z,{type:"primary",id:"create-project-button",icon:C().createElement(r.Z,null)},n))),o&&!R&&C().createElement(M.Z,{type:"primary",id:"create-project-button",icon:C().createElement(r.Z,null),onClick:this.handleCreate},n)))},this.renderQueryRow=()=>{var t=this.props,v=t.queryRowParams,n=t.queryRowList,s=t.queryRowSelectedCourseIds,y=t.queryRowSelectedProjectIds,m=t.queryRowOnForceRender,P=t.queryRowOnClassifyChange,R=t.queryRowOnTypeChange,G=t.queryRowOnCourseTypeChange,V=t.queryRowAllowActions,h=t.showNum,x=h===void 0?1:h;return C().createElement(u.Z,{params:v,list:n,selectedCourseIds:s,selectedProjectIds:y,onForceRender:m,onClassifyChange:P,onTypeChange:R,onCourseTypeChange:G,allowActions:V,showNum:x,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var t=this.props,v=t.t,n=t.extraBtnSelectedRowKeys,s=t.extraBtnHandleMultiVisibleRange;return C().createElement(M.Z,{disabled:n.length===0,onClick:s},v("courseManage.setTheVisibility"))}}render(){var t=this.props,v=t.prefixCls,n=t.wrapCls,s=t.showRenderQueryRow,y=t.showRendeExtraBtn;return C().createElement(C().Fragment,null,C().createElement("div",{className:"render_other"},C().createElement("header",{className:"".concat(v," ").concat(n)},C().createElement("section",{className:"".concat(v,"__radiocol")},this.renderActionBtn(),s&&this.renderQueryRow(),y&&this.rendeExtraBtn()))))}}X.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},te.Z=(0,Q.$j)(A)((0,a.Z)()(X))},62117:function(Te,te,e){"use strict";var q=e(63185),D=e(9676),O=e(43358),M=e(34041),Z=e(88983),C=e(47933),Q=e(12924),a=e.n(Q),E=e(28216),w=e(91768),r=e(48479),_=e(2971),u=e(45601),Y=e(7249),$=X=>{var l=X.user,t=X.currentRoute,v=X.advancedSetting;return{currentPath:t.path,allAuthRoutes:t.allAuthRoutes,userLng:l.lng,themeColor:v.themeColor,appType:l.appType,appId:l.appId}};class A extends a().Component{constructor(l){super(l);this.setPlaceholder=()=>{var t=this.props,v=t.currentPath,n=t.allAuthRoutes,s=t.userLng,y=this.state.language,m=n[v],P=this.props,R=P.appType,G=P.appId,V=localStorage.getItem("qyWechatBook"),h=R==="wx_app"&&V==="true"&&G==="9005";if(!!m){var x=y[s].searchInputPlaceholder,N="";m.menuKey==="studyTemplate"||m.menuKey==="examTemplate"?N=x.template:m.menuKey==="employee"||m.menuKey==="obligatory"||m.menuKey==="elective"||m.menuKey==="plan"||m.menuKey==="evaluation"||m.menuKey==="myEvaluationPlan"?N=x.task:m.menuKey==="studyProject"?N=h?x.byProjectName:x.byProjectNameOrCreator:m.menuKey==="management"?N=h?x.byTaskName:x.byTaskNameOrCreator:N=x[m.menuKey],this.setState({currentPlaceholder:N})}},this.handleRadiosChange=t=>{this.props.onRadiosChange(t.target.value)},this.handleSelectChange=t=>{this.props.onSelectChange(t)},this.handleSearch=(t,v)=>{this.props.onSearch(t,v)},this.handleChange=t=>{this.props.onCheckboxChange(t.target.checked)},this.renderRadios=()=>{var t=this.props,v=t.prefixCls,n=t.radioList,s=t.defaultRadioValue,y=t.radioValue;if(!n.length)return null;var m=s||n[0].value,P="".concat(v,"__radios");return a().createElement("div",{className:P},typeof y!="undefined"?a().createElement(C.ZP.Group,{defaultValue:m,value:y,onChange:this.handleRadiosChange},n.map(R=>a().createElement(C.ZP.Button,{key:R.value,value:R.value},R.name))):a().createElement(C.ZP.Group,{defaultValue:m,onChange:this.handleRadiosChange},n.map(R=>a().createElement(C.ZP.Button,{key:R.value,value:R.value},R.name))))},this.renderSelect=()=>{var t=this.props,v=t.prefixCls,n=t.selectList,s=t.defaultSelectValue;if(!n.length)return null;var y=s||n[0].value,m="".concat(v,"__select");return a().createElement("div",{className:m},a().createElement(M.Z,{defaultValue:y,onChange:this.handleSelectChange,style:{minWidth:100}},n.map(P=>a().createElement(M.Z.Option,{key:P.value,value:P.value},P.name))))},this.renderOther=()=>{var t=this.props,v=t.prefixCls,n=t.renderOther,s=t.showOther,y="".concat(v,"__other");if(s&&n&&typeof n=="function")return a().createElement("div",{className:y},n())},this.renderCheckbox=()=>{var t=this.props,v=t.prefixCls,n=t.t,s=t.label,y=t.showCheckbox,m=t.renderActionSelect,P="".concat(v,"__checkbox");return!y&&m&&typeof m=="function"?a().createElement("div",{className:P},m()):y?a().createElement("div",{className:P},a().createElement(D.Z,{onChange:this.handleChange},s||n("common.myCreated"))):null},this.renderSearch=()=>{var t=this.props,v=t.prefixCls,n=t.showSearch,s=t.inputPlaceholder,y=t.maxLength,m=y===void 0?400:y,P=t.value,R="".concat(v,"__search");if(!n)return null;var G=this.state.currentPlaceholder;return s?a().createElement("div",{className:R},a().createElement(r.Z,{onSearch:this.handleSearch,placeholder:s,width:272,maxLength:m})):a().createElement("div",{className:R},a().createElement(r.Z,{onSearch:this.handleSearch,placeholder:G,width:272,maxLength:m,value:P}))},this.renderSearchOther=()=>{var t=this.props.renderSearchOther;return t?t():null},this.state={language:{zh_cn:u.Z,en_us:_.Z,zh_hk:Y.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(l){l.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var l=this.props,t=l.prefixCls,v=l.wrapCls,n=l.showRenderRadios,s=n===void 0?!0:n,y=l.showRenderSelect;return a().createElement(a().Fragment,null,a().createElement("div",{className:"render_other"},this.renderOther(),a().createElement("header",{className:"".concat(t," ").concat(v)},a().createElement("section",{className:"".concat(t,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),s&&this.renderRadios(),y&&this.renderSelect(),this.renderSearch()))))}}A.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},te.Z=(0,E.$j)($)((0,w.Z)()(A))},410:function(Te,te,e){"use strict";e.d(te,{Z:function(){return Pe}});var q=e(62029),D=e(22385),O=e(31097),M=e(54029),Z=e(62529),C=e(57663),Q=e(71577),a=e(88986),E=e(33565),w=e(18106),r=e(88108),_=e(12924),u=e.n(_),Y=e(91768),$=e(54549),A=e(78138),X=e.n(A),l=e(28216),t=e(57068),v=e(70018),n=e(20228),s=e(11382),y=e(76586),m=e.n(y),P=e(6793),R=window.Plots.Line,G=b=>{var L=b.params,ie=b.height,ue=b.t,pe=(0,_.useRef)(),Ee=(0,_.useState)(null),ve=(0,E.Z)(Ee,2),Ce=ve[0],Ie=ve[1],fe=(0,_.useState)(!0),i=(0,E.Z)(fe,2),c=i[0],p=i[1];(0,_.useEffect)(()=>{(0,v.yZ)((0,a.Z)((0,a.Z)({},L),{},{page_number:1,page_size:30})).then(W=>{if(W.data.code&&W.data.code==="200000"){var U=(W.data.data.list||[]).reverse(),ee=U.map(le=>{var ne=le.total_score;return ne}),me={height:220,data:U,xField:"submit_time",yField:"score",point:{size:4,shape:"circle",color:"#516AE6"},yAxis:{tickCount:5,min:0,max:Math.max(...ee)},xAxis:{tickCount:U.length<=7?U.length:7,label:{formatter:le=>(0,P.p6)(+le,new Date(+le).getFullYear()===new Date().getFullYear()?"MM/dd":"yyyy/MM/dd")}},tooltip:{customContent:(le,ne)=>{var z=ne.length>0&&"<div class=".concat(m()["custom-content-container"],`>
                  <div class=`).concat(m().top,`>
                    <span class=`).concat(m().score,">").concat(ne[0].data.score," ").concat(ue("common.examScoreUnit"),`</span>
                    `).concat(ne[0].data.score_record_type==="latest"||ne[0].data.score_record_type==="highest"?"<span class=".concat(m()["custom-content-flag"],">").concat(ne[0].data.score_record_type==="latest"?ue("myExamTask.newest"):ue("myExamTask.highest"),"</span>"):"",`
                  </div>
                  <div class=`).concat(m().bottom,">").concat((0,P.p6)(+ne[0].data.submit_time,new Date(+ne[0].data.submit_time).getFullYear()===new Date().getFullYear()?"MM/dd hh:mm":"yyyy/MM/dd hh:mm"),`</div>
                </div>`);return z}},smooth:!0};Ie(me)}}).finally(()=>{p(!1)})},[L,ue]);var B=()=>{var W=pe.current.chart.filteredData,U=W.find(ne=>{var z=ne.score_record_type;if(z==="latest"||z==="highest")return ne});if(U){var ee=pe.current.chart.getXY(U),me=ee.x,le=ee.y;pe.current.chart.showTooltip({x:me,y:le})}};return u().createElement(s.Z,{spinning:c},u().createElement("div",{className:m()["record-chart-container"],style:{maxHeight:"".concat(ie,"px")}},Ce&&!c&&u().createElement(R,(0,q.Z)({},Ce,{height:ie-32,onReady:W=>{pe.current=W,B(),W.on("mouseout",()=>{B()})}}))))},V=(0,Y.Z)()(G),h=e(9121),x=e.n(h),N=e(99367),k=e(38642),H=e(67479),j=e(1164),K=e(97593),o=e(57338),f=e(83107),I=e(8965),T=e.n(I),de=e(12968),F=e(44208),d=e(44963),S=e.n(d);function g(b){var L=b.t,ie=b.examId,ue=b.submitId,pe=b.userId,Ee=(0,_.useRef)(),ve=(0,l.I0)(),Ce=(0,_.useState)({status:"",examId:ie,userId:pe,submitId:ue}),Ie=(0,E.Z)(Ce,1),fe=Ie[0],i=(0,_.useState)({total_count:0,success_count:0,fail_count:0}),c=(0,E.Z)(i,2),p=c[0],B=c[1];(0,_.useEffect)(()=>{(0,v.wg)({examId:ie,submitId:ue,userId:pe}).then(z=>{var ye=z.data,ge=ye.code,Re=ye.data;if(ge==="200000"){var xe=Re.fail_count,De=xe===void 0?0:xe,Me=Re.success_count,Se=Me===void 0?0:Me,Le=Re.total_count,we=Le===void 0?0:Le;B({total_count:we,success_count:Se,fail_count:De})}})},[ie,ue,pe]);function W(z){var ye=(0,a.Z)({},z);return(0,v.G2)(ye)}var U=()=>u().createElement(Q.Z,{type:"primary",onClick:me},L("common.exportData")),ee=()=>{var z=b.t,ye=[{key:"total",name:z("examination.faceRecognitionInExam.verifyCount"),num:p.total_count,color:"rgb(0, 0, 0, 0.45)",backgroundColor:"#F8F9FB"},{key:"passed",name:z("examination.faceRecognitionInExam.verifySuccess"),num:p.success_count,color:"rgb(139, 191, 100)",backgroundColor:"rgb(139, 191, 100,0.2)"},{key:"failed",name:z("examination.faceRecognitionInExam.verifyFailed"),num:p.fail_count,color:"rgb(207, 60, 60)",backgroundColor:"rgb(207, 60, 60,0.2)"}];return ye.map(ge=>{var Re=ge.name,xe=ge.num,De=ge.color,Me=ge.backgroundColor,Se=ge.key;return u().createElement("span",{className:S()["type-item"],style:{backgroundColor:Me,color:De},key:Se},"".concat(Re," : ").concat(xe))})};function me(){(0,K.N)({page:"exportFaceRecognitionRecord",props:{dispatch:ve,t:L},rest:{userId:pe,examId:ie,submitId:ue},query:"?".concat(t.stringify(fe)),sendType:"get"})}var le=(0,_.useMemo)(()=>({success:{text:L("examination.faceRecognitionInExam.verifySuccess"),color:"#52C41A"},failed:{text:L("examination.faceRecognitionInExam.verifyFailed"),color:"#F5222D"}}),[L]),ne=[{title:L("examination.faceRecognitionInExam.verifyTime"),key:"check_time",render:z=>(0,P.p6)(+z,"yyyy-MM-dd hh:mm")},{title:L("examination.faceRecognitionInExam.verifyImg"),key:"snapshot_url",render:z=>u().createElement(F.Z,{className:S()["snapshot-container"],width:28,height:28,src:z})},{title:L("examination.faceRecognitionInExam.verifyResult"),key:"result",render:z=>u().createElement("div",{className:S()["status-container"]},u().createElement("span",{className:S().status,style:{backgroundColor:le[z].color}}),le[z].text)}];return u().createElement("div",{className:S()["face-recognition-record-container"],style:b.style},u().createElement(N.Z,{ref:Ee,uuid:"22A4178B-6803-9BC5-DFDB-F6CD6A90C4C8",queryParams:{columns:ne,query:W},queryParam:fe,pagination:!0,options:!1,scroll:{x:"max-content",y:"calc(100vh - 300px)"},tableAlertRender:()=>!1,headerTitle:ee(),toolBarRender:U}))}var ae=(0,Y.Z)()(g);function se(b){var L=b.t,ie=b.drawerTitle,ue=b.onCloseDrawer,pe=b.examId,Ee=b.submitId,ve=b.userId,Ce=()=>u().createElement("div",{className:T()["footer-container"]},u().createElement(Q.Z,{type:"primary",onClick:ue},L("common.close")));return u().createElement(f.Z,(0,q.Z)({title:ie,placement:"right",width:716,bodyStyle:{padding:"0 24px 16px 24px"},onClose:ue,footer:Ce()},b),u().createElement("div",null,b.visible&&u().createElement(ae,{examId:pe,submitId:Ee,userId:ve})))}var J=(0,Y.Z)()(se),re=r.Z.TabPane;function he(b){var L=b.t,ie=b.examId,ue=b.taskId,pe=b.userId,Ee=b.from,ve=Ee===void 0?"user":Ee,Ce=b.taskType,Ie=Ce===void 0?"all":Ce,fe=b.renderExamRecordTabBarExtraContent,i=b.examRecordTabTitle,c=b.onCancel,p=localStorage.getItem("themeColor")||"#465dcd",B=(0,_.useRef)(),W=(0,l.I0)(),U=(0,_.useState)({task_type:Ie,scene:ve,examId:ie,task_id:ue,userId:pe}),ee=(0,E.Z)(U,1),me=ee[0],le=(0,_.useState)("examRecord"),ne=(0,E.Z)(le,2),z=ne[0],ye=ne[1],ge=(0,_.useState)(0),Re=(0,E.Z)(ge,2),xe=Re[0],De=Re[1],Me=(0,_.useState)({examId:ie,userId:pe,submitId:"",visible:!1}),Se=(0,E.Z)(Me,2),Le=Se[0],we=Se[1],Fe=(0,_.useState)(!1),ke=(0,E.Z)(Fe,2),Ae=ke[0],Ke=ke[1];(0,_.useEffect)(()=>{(0,v.et)({examId:ie}).then(ce=>{var oe=ce.data,Oe=oe.data,_e=oe.code;_e==="200000"&&Ke(Oe==="true")})},[ie]);var We={pending:{text:L("myExamTask.marking"),color:"#FFB56F"},passed:{text:L("myExamTask.qualified"),color:"#52C41A"},failed:{text:L("myExamTask.unqualified"),color:"#F5222D"},full:{text:L("examination.resultStatus.full"),color:"#417DC2"}};function $e(ce){var oe=(0,a.Z)({},ce);return(0,v.yZ)(oe)}var je=()=>u().createElement(Q.Z,{type:"primary",onClick:ze},L("common.exportData"));function ze(){(0,K.N)({page:"exportSubmitList",props:{dispatch:W,t:L},rest:{planId:ie,userId:pe},query:"?".concat(t.stringify(me)),sendType:"get"})}function Ye(ce){var oe=ce.exam_result,Oe=ce.show_record,_e=ce.task_id,Ze=ce.submit_id;Oe==="true"&&oe!=="pending"&&j.Z.targetTo({path:H.W.parse({exam_id:ie,user_id:ve==="manage"?pe:"",task_id:_e,submit_id:Ze,scene:"manage"}),projectType:"student"})}var Ge={size:"small",showSizeChanger:!1,showTotal:ce=>L("examination.allTotal",{total:ce})},Be=[{title:L("examing.handoverTime"),width:"240px",key:"submit_time",render:(ce,oe)=>u().createElement(u().Fragment,null,u().createElement("span",null,X()(ce*1).format(L("examination.dateFormate"))),(oe.score_record_type==="latest"||oe.score_record_type==="highest")&&u().createElement("span",{className:x()["latest-flag"]},oe.score_record_type==="latest"?L("myExamTask.newest"):L("myExamTask.highest")))},{title:L("exam.examTime"),width:"100px",key:"answer_duration",render:ce=>u().createElement("span",null,ce?(0,k.xj)(ce):"")},{title:L("examination.scoreAll"),width:"100px",key:"total_score",render:(ce,oe)=>u().createElement("span",null,oe.total_score,"/",oe.score)},{title:L("examination.scoringRate"),key:"score_rate",width:"80px",render:(ce,oe)=>u().createElement("span",null,oe.score_rate)},{title:L("exam.examResult"),key:"exam_result",width:"100px",render:(ce,oe)=>{var Oe=ce;return oe.total_score===oe.score&&(Oe="full"),u().createElement("div",null,u().createElement(Z.Z,{color:We[Oe].color,text:We[Oe].text}))}}];ve==="manage"&&Be.splice(4,0,{title:L("common.marker"),width:"100px",key:"mark_name",render:ce=>{var oe=ce;return ce==="\u7CFB\u7EDF"&&(oe=L("personal.system")),u().createElement(O.Z,{title:oe},u().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},oe||"--"))}}),Be.push({title:L("common.operate"),width:80,fixed:"right",key:"submit_id",render:(ce,oe)=>{var Oe=[{style:{color:oe.show_record==="true"&&oe.exam_result!=="pending"?p:"#ccc",cursor:oe.show_record==="true"&&oe.exam_result!=="pending"?"pointer":"not-allowed"},visible:!0,label:L("examination.viewAnswerDetail"),onClick:_e=>{Ye(_e)}},{label:L("examination.face_recognition"),style:{color:Ae?p:"#c0c4cc",cursor:Ae?"pointer":"not-allowed"},visible:!0,onClick:(_e,Ze)=>{var Ne=_e.submit_id;Ze||we(be=>(0,a.Z)((0,a.Z)({},be),{},{submitId:Ne,visible:!0}))},disabled:!Ae,disabledTip:L("examination.recordCharts.notFaceRecognitionTip")}];return u().createElement("div",{className:x()["exam-record-operate"]},Oe.map(_e=>{var Ze=_e.visible,Ne=_e.label,be=_e.style,qe=_e.disabledTip,Ue=_e.disabled,et=_e.onClick;if(Ze)return u().createElement(O.Z,{title:Ue?qe:""},u().createElement("span",{className:"".concat(be.btns),style:be,onClick:()=>{et(oe,Ue)}},Ne))}))}});var He=()=>{we(ce=>(0,a.Z)((0,a.Z)({},ce),{},{visible:!1}))},Ve=ce=>{var oe=ce.data.total*1;De(oe)},Qe=(0,_.useMemo)(()=>u().createElement(V,{className:x()["record-chart-container"],params:me,height:450}),[me]),Xe=ce=>{ye(ce)},Je=()=>{if(ve!=="manage"&&z==="examRecord")return fe&&fe();if(ve==="manage")return u().createElement("span",{onClick:c,style:{cursor:"pointer"}},u().createElement($.Z,null))};return u().createElement("div",null,u().createElement(r.Z,{onChange:Xe,activeKey:z,tabBarExtraContent:Je()},u().createElement(re,{tab:i||L("common.examRecord"),key:"examRecord"},z==="examRecord"&&u().createElement("div",{className:x()["exam-record-wrap"]},u().createElement(N.Z,{ref:B,uuid:"0bbb3a01-9767-491d-8948-f9befe6f81ce",queryParams:{columns:Be,query:$e},queryParam:me,pagination:Ge,options:!1,tableAlertRender:()=>!1,scroll:{x:"max-content",y:"330px"},loadComplete:Ve,toolBarRender:ve==="manage"?je:null}))),xe>=3&&u().createElement(re,{tab:L("examination.recordCharts.title"),key:"recordChart"},z==="recordChart"&&Qe)),u().createElement(J,(0,q.Z)({drawerTitle:L("exam.faceKnow")},Le,{onCloseDrawer:He})))}var Pe=(0,Y.Z)()(he)},70018:function(Te,te,e){"use strict";e.d(te,{TM:function(){return M},Ty:function(){return Z},me:function(){return C},vU:function(){return Q},NZ:function(){return a},C0:function(){return E},r7:function(){return w},lc:function(){return r},lq:function(){return _},P8:function(){return u},yZ:function(){return Y},rh:function(){return $},li:function(){return A},i3:function(){return X},G2:function(){return l},wg:function(){return t},et:function(){return v}});var q=e(81211),D=e(10237),O=e(5430);function M(n,s){var y=O.OB.examing.load(n,s);return D.WY.post({url:y})}function Z(n,s){var y=O.OB.examing.save(n);return D.WY.post({url:y,data:s})}function C(n,s){var y=O.OB.examing.submit(n);return D.WY.post({url:y,data:s})}function Q(n,s){var y=O.OB.examing.saveCut(n);return D.WY.post({url:y,data:s})}function a(n,s){var y=n.examId,m=n.submitId,P=n.userId,R=O.OB.parse.list({examId:y,submitId:m,userId:P});return D.WY.get({url:R,params:s})}function E(n,s){var y=n.examId,m=n.userId,P=O.OB.parse.info({examId:y,userId:m},s);return D.WY.get({url:P,params:s})}function w(n){var s=n.key,y=s===void 0?"":s,m=n.msg,P=m===void 0?"":m,R=n.data,G=R===void 0?{}:R;D.WY.logger({keyword:y,moduleName:"".concat(y,"-examing"),msg:P,data:G})}function r(n){var s=n.examId,y=n.page_size,m=n.page_number,P=n.type,R=O.OB.examData.rankingList(s);return D.WY.get({url:R,params:{page_size:y,page_number:m,type:P}})}function _(n){var s=n.examId,y=n.task_id,m=n.submit_id,P=m===void 0?"":m,R=O.OB.examData.examsResult(s);return D.WY.get({url:R,params:{task_id:y,submit_id:P}})}function u(n){var s=O.OB.examData.certificateImage(n);return D.WY.get({url:s})}function Y(n){var s=n.task_type,y=n.task_id,m=n.page_number,P=n.page_size,R=n.examId,G=n.userId,V=n.scene,h=O.OB.examData.getRecordInfo(R,G);return D.WY.get({url:h,params:{task_type:s,task_id:y,page_number:m,page_size:P,scene:V}})}function $(n){var s=n.status,y=n.scene,m=n.page_number,P=n.page_size,R=n.examId,G=O.OB.examMarking.getMarkUser(R);return D.WY.get({url:G,params:{status:s,scene:y,page_number:m,page_size:P}})}function A(n,s){var y=O.OB.examMarking.submitMarking(n);return D.WY.post({url:y,data:s})}function X(n,s,y){var m=O.lk.getExamFromProject(n,s);return D.WY.get({url:m,params:y})}function l(n){var s=n.examId,y=n.submitId,m=n.userId,P=(0,q.Z)(n,["examId","submitId","userId"]),R=O.OB.examData.faceRecognitionRecord({examId:s,submitId:y,userId:m});return D.WY.get({url:R,params:P})}function t(n){var s=n.examId,y=n.submitId,m=n.userId,P=O.OB.examData.faceRecognitionRecordStatistics({examId:s,submitId:y,userId:m});return D.WY.get({url:P})}function v(n){var s=n.examId,y=O.OB.examData.hasFaceSnapshot({examId:s});return D.WY.get({url:y})}},35925:function(Te,te,e){"use strict";e.d(te,{Z:function(){return E}});var q=e(12924),D=e.n(q),O=e(91768),M=e(1164),Z=e(36202);class C extends D().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var r=[{title:this.props.t("practiceOperation.workTitle"),dataIndex:"title",key:"title"},{title:this.props.t("practiceOperation.shouldSubmit"),dataIndex:"total_count",key:"total_count",width:90},{title:this.props.t("practiceOperation.unsubmitted"),width:90,dataIndex:"not_submit_count",key:"not_submit_count"},{title:this.props.t("practiceOperation.submitted"),width:90,dataIndex:"already_submit_count",key:"already_submit_count"},{title:this.props.t("common.approved"),width:90,dataIndex:"pass_count",key:"pass_count"},{title:this.props.t("practiceOperation.fail"),width:90,dataIndex:"reject_count",key:"reject_count"},{title:this.props.t("personal.underReview"),width:90,dataIndex:"waiting_count",key:"waiting_count"},{title:this.props.t("common.operate"),width:120,fixed:"right",key:"operate",render:(_,u)=>this.renderActions({record:u})}];return r},this.renderActions=r=>{var _=r.record,u=this.props,Y=u.t,$=u.taskId,A=u.taskType,X=u.id;return D().createElement("div",{className:"cl-table__cell-action"},D().createElement(M.Z,{to:"/training/learning/management/monitor/work?id=".concat(X,"&taskId=").concat($,"&taskType=").concat(A,"&operationId=").concat(_.id,"&title=").concat(_.title)},D().createElement("span",{className:"cl-pointer"},Y("common.viewDetails"))))}}render(){var r=this.props,_=r.isLoading,u=r.list,Y=r.prefixCls,$=this.getTableColumn();return D().createElement("section",{className:Y},D().createElement(Z.f,{loading:_,dataSource:u,columns:$,rowKey:A=>A.id,pagination:!1,tableUUID:"ea45645b-4814-4bfa-a36c-b750ef32ecac"}))}}C.defaultProps={prefixCls:"offline-panel__table"};var Q=(0,O.Z)()(C);class a extends D().Component{constructor(r){super(r);this.state={}}render(){var r=this.props,_=r.workInfo,u=r.isLoading,Y=r.taskId,$=r.taskType,A=r.id,X=A===void 0?"":A;return D().createElement("div",{className:"offline-panel-tab"},D().createElement("div",{className:"offline-panel-tab-list"},D().createElement("div",{className:"offline-panel-tab-list-table"},D().createElement(Q,{isLoading:u,list:_.list,id:X,taskId:Y,taskType:$}))))}}var E=a},31945:function(Te,te,e){"use strict";e.d(te,{Z:function(){return de}});var q=e(88983),D=e(47933),O=e(20228),M=e(11382),Z=e(62029),C=e(30887),Q=e(99210),a=e(59250),E=e(13013),w=e(57663),r=e(71577),_=e(63185),u=e(9676),Y=e(71194),$=e(57016),A=e(88986),X=e(34792),l=e(48086),t=e(43358),v=e(34041),n=e(12924),s=e.n(n),y=e(28216),m=e(91768),P=e(57254),R=e(18329);class G extends s().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var d=this.props,S=d.visible,g=d.courseList,ae=d.t;return s().createElement(R.ZP,{visible:S,title:ae("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},s().createElement("div",{className:"referenceWithOtherCourses"},s().createElement("div",{className:"referenceWithOtherCourses__tip"},ae("course.deleteCourseTip")),g.map((se,J)=>s().createElement("div",{className:"referenceWithOtherCourses__item",key:J},g.length>1?"".concat(J+1,"\u3001"):null," ",se))))}}var V=(0,m.Z)()(G),h=e(10237),x=e(63848),N=e(58546),k=e(30389),H=e(54792),j=e(86726),K=e(37055),o=v.Z.Option,f={setClassify:K.ZP.CourseManageList.setClassify,setScore:K.ZP.CourseManageList.setScore,setBatchEmployee:K.ZP.CourseManageList.setBatchEmployee,deleteCourse:K.ZP.CourseManageList.deleteCourse,exportCourseView:K.ZP.CourseManageList.exportCourseView,syncCourse:K.ZP.CourseManageList.syncCourse},I=F=>({qyShield:F.user.qyShield});class T extends s().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=d=>{this.props.onClassifyChange(d)},this.handleChangeType=d=>{this.props.onTypeChange(d)},this.handleChangeCourseType=d=>{this.props.onCourseTypeChange(d)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=d=>{var S=d.node,g=this.props,ae=g.selectedCourseIds,se=g.selectedProjectIds,J=g.onForceRender,re=g.t,he=S.id;he&&h.qg.post({url:f.setClassify(),data:{course_ids:ae.join(","),project_ids:se.join(","),classify_id:he}}).then(()=>{l.default.success(re("course.setCourseClassifySuccess")),J()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(d=>({scoreProps:(0,A.Z)((0,A.Z)({},d.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(d=>({scoreProps:(0,A.Z)((0,A.Z)({},d.scoreProps),{},{visible:!1})}))},this.handleScoreOk=d=>{var S=d.value;if(S===0){this.handleScoreCancel();return}var g=this.props,ae=g.selectedCourseIds,se=g.selectedProjectIds,J=g.onForceRender,re=g.t;h.qg.post({url:f.setScore(),data:{course_ids:ae.join(","),project_ids:se.join(","),credit:S}}).then(()=>{l.default.success(re("course.setCourseScoreSuccess")),J()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(d=>({employeeProps:(0,A.Z)((0,A.Z)({},d.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=d=>{var S=this.props,g=S.selectedCourseIds,ae=S.selectedProjectIds,se=S.onForceRender,J=S.t,re=d.isAll,he=d.departmentIds,Pe=d.groupIds,b=d.postIds,L=d.userIds,ie=d.qy_we_chat_vo;h.WY.post({url:f.setBatchEmployee(),data:{course_ids:g.join(","),project_ids:ae.join(","),department_ids:he,group_ids:Pe,is_all:re,post_ids:b,user_ids:L,qy_we_chat_vo:ie}}).then(()=>{l.default.success(J("personal.batchSetRangeSuccess")),se()}),this.handleEmployeeCancel()},this.showReferenceCourseList=d=>{this.setState(S=>({showReferenceCourseListProps:(0,A.Z)((0,A.Z)({},S.showReferenceCourseListProps),{},{visible:!S.showReferenceCourseListProps.visible,courseList:d||[]})}))},this.actionDelete=()=>{var d=this.props,S=d.selectedCourseIds,g=d.selectedProjectIds,ae=d.list,se=d.onForceRender,J=d.t,re=0,he=0,Pe=[];if(ae.forEach(b=>{S.includes(b.course_id)&&(b.reference_plan_count>0&&(he+=1),b.reference_plan_count>0&&Pe.push(b.title),b.can_delete==="true"&&(re+=1))}),he>0)this.showReferenceCourseList(Pe);else if(re!==S.length)l.default.warning(J("personal.deletePlatformCourseTip"));else{if(g.length>0){l.default.warning(J("personal.deleteProjectCourseTip"));return}$.Z.confirm({title:J("common.tip"),content:J("common.confirmDeleteTitle"),onOk(){h.qg.post({url:f.deleteCourse(),data:{enterpriseId:K.ZP.enterpriseId,ids:S.join(","),project_ids:g.join(",")}}).then(b=>{var L=b.data,ie=L.code,ue=L.msg;l.default["".concat(ie===0?"success":"warning")](ue),ie===0&&se()})}})}},this.actionSyncSetting=()=>{this.setState(d=>({asyncProps:(0,A.Z)((0,A.Z)({},d.asyncProps),{},{visible:!0})}))},this.onAsyncChange=d=>{this.setState(S=>({asyncProps:(0,A.Z)((0,A.Z)({},S.asyncProps),{},{value:d.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var d=this.props,S=d.selectedCourseIds,g=d.selectedProjectIds,ae=d.onForceRender,se=d.t,J=this.state.asyncProps;h.qg.post({url:f.syncCourse(),data:{course_ids:S.join(","),project_ids:g.join(","),syncProgress:J.value}}).then(re=>{var he=re.data,Pe=he.code,b=he.msg;Pe===0?(l.default.success(se("setting.setUpSucceed")),ae()):l.default.warning(b)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var d=this.props,S=d.selectedCourseIds,g=d.selectedProjectIds,ae=d.onForceRender,se=d.t;if(S.concat(g).length>20){l.default.warning(se("courseManage.exportMoreTip"));return}var J=f.exportCourseView(),re={course_Ids:S.join(","),project_Ids:g.join(",")};h.WY.get({url:J,params:re}).then(he=>{he.data.code===200&&l.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),ae(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var d=K.ZP.downLoadCenter.getDownLoadingCount();h.WY.get({url:d,params:{}}).then(S=>{sessionStorage.setItem("downloadingCount",S.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:S.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=d=>{this.props.onCheckboxChange(d.target.checked)},this.handleSharingQueryRowCheckboxChange=d=>{this.props.onSharingCheckboxChange(d.target.checked)},this.renderCondition=()=>{var d=this.props,S=d.prefixCls,g=d.params,ae=d.qyShield,se=d.t,J=g.classify_id?g.classify_id.split(","):[];return s().createElement("div",{className:"".concat(S,"__condition")},this.props.extraDom&&this.props.extraDom(),s().createElement(x.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:J,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),s().createElement(v.Z,{value:g.type,className:"cl-search-normal-width",onChange:this.handleChangeType},s().createElement(o,{value:""},this.props.t("courseManage.allOrigin")),s().createElement(o,{value:"original"},this.props.t("courseManage.originalCourse")),s().createElement(o,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),s().createElement(o,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:s().createElement(v.Z,{value:g.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},s().createElement(o,{value:"all"},this.props.t("courseManage.allType")),s().createElement(o,{value:"course"},this.props.t("common.courseLabel")),s().createElement(o,{value:"microCourse"},this.props.t("common.microCourse")),s().createElement(o,{value:"project"},this.props.t("leftMenuLists.studyProject"))),s().createElement(u.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},se("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&ae==="false"?s().createElement(u.Z,{onChange:this.handleSharingQueryRowCheckboxChange},se("common.sharing")):null)},this.renderActions=()=>{var d=this.props,S=d.prefixCls,g=d.selectedCourseIds,ae=d.selectedProjectIds,se=d.showNum,J=se===void 0?1:se,re=this.props.allowActions,he=(0,j.H3)("delete",re),Pe=(0,j.H3)("adjustment_classification",re),b=(0,j.H3)("set_visible",re),L=(0,j.H3)("export",re),ie=(0,j.H3)("set_score",re),ue=(0,j.H3)("progressSync",re),pe=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:Pe},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:L},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:ie},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:b},{name:this.props.t("common.delete"),type:"actionDelete",isShow:he},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:ue}],Ee=pe.filter(Ie=>Ie.isShow),ve=[],Ce=[];if(Ee.length)J?(ve=[...Ee.slice(0,J)],Ce=[...Ee.slice(J)]):Ce=[...Ee];else return null;return s().createElement("div",{className:"".concat(S,"__action")},ve.map(Ie=>s().createElement(r.Z,{style:{marginRight:"8px"},key:Ie.type,disabled:!(g.length+ae.length),onClick:this[Ie.type]},Ie.name)),Ce.length?s().createElement(E.Z,{disabled:!(g.length+ae.length),overlay:this.renderMoreButton({buttons:Ce})},s().createElement(r.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",s().createElement(P.Z,null))):"")}}renderMoreButton(d){var S=d.buttons,g=this.props,ae=g.selectedCourseIds,se=g.selectedProjectIds;return s().createElement(Q.Z,{onClick:J=>{var re=J.key;this[re]()}},S.map(J=>J.isShow?s().createElement(Q.Z.Item,{key:J.type,disabled:!(ae.length+se.length)},s().createElement("span",{className:"cl-pointer"},J.name)):null))}render(){var d=this.props,S=d.prefixCls,g=d.t,ae=d.showRenderCondition,se=ae===void 0?!0:ae,J=d.showRenderActions,re=J===void 0?!0:J,he=this.state,Pe=he.classifyProps,b=he.scoreProps,L=he.employeeProps,ie=he.showReferenceCourseListProps,ue=he.asyncProps;return s().createElement("div",{className:S},se&&this.renderCondition(),re&&this.renderActions(),s().createElement(N.Z,(0,Z.Z)({},Pe,{title:g("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),s().createElement(H.Z,(0,Z.Z)({},b,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),L.visible&&s().createElement(k.Z,(0,Z.Z)({},L,{title:g("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:g("component.chooseVisibleScope")},isLoading:!L.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),ue.visible&&s().createElement(R.ZP,{wrapClassName:"cl-async-selector-modal",visible:ue.visible,title:g("common.scheduleSyncSetting"),okText:g("common.ok"),cancelText:g("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},ue.visible?s().createElement("div",{className:"".concat(S,"__async")},s().createElement("p",null," ",g("common.scheduleSyncSettingTip")),s().createElement(D.ZP.Group,{onChange:this.onAsyncChange,value:ue.value},s().createElement(D.ZP,{value:0},g("common.outSync")),s().createElement(D.ZP,{value:1},g("common.synchronization")))):s().createElement(M.Z,{size:"large"})),s().createElement(V,(0,Z.Z)({},ie,{showReferenceCourseList:this.showReferenceCourseList})))}}T.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var de=(0,m.Z)()((0,y.$j)(I)(T))},67479:function(Te,te,e){"use strict";e.d(te,{D:function(){return a},W:function(){return w}});var q=e(57361),D=e(9754),O=e.n(D),M=e(57068),Z=e(31916),C=e(38642),Q=e(5430);function a(r){return E.apply(this,arguments)}function E(){return E=(0,q.Z)(O().mark(function r(_){var u,Y,$,A,X;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Z.uH)();case 3:if(u=t.sent,u!=="old"){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,(0,Z.fP)(_);case 8:if(Y=t.sent,$=Y.data,A=$.code,X=$.data,A!=="200000"){t.next=14;break}return t.abrupt("return",X.exam_type==="new");case 14:t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",t.t0),t.abrupt("return",!1);case 20:case"end":return t.stop()}},r,null,[[0,16]])})),E.apply(this,arguments)}var w={examing:function(){var r=(0,q.Z)(O().mark(function u(Y){var $,A,X;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return $="",A=Y.pageFrom==="ding_myExamTask"?(0,C.lz)(Q.ZP.enterpriseId,"student"):"",t.next=4,a(Y.exam_id);case 4:return X=t.sent,X?$="".concat(A,"/training/examination/new-exam/examing?").concat(M.stringify(Y)):$="".concat(A,"/training/examination/exam/personal?").concat(M.stringify(Y)),t.abrupt("return",$);case 7:case"end":return t.stop()}},u)}));function _(u){return r.apply(this,arguments)}return _}(),parse:r=>"/training/examination/new-exam/parse?".concat(M.stringify(r)),examData:r=>"/training/examination/exam-data?exam_id=".concat(r.exam_id,"&task_id=").concat(r.task_id),marking:r=>"/training/examination/new-exam/marking?".concat(M.stringify(r))}}}]);
