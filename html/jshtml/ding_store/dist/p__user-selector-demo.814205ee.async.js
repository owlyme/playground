(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3837],{36202:function(yt,me,e){"use strict";e.d(me,{f:function(){return j}});var pe=e(62029),S=e(57361),s=e(33565),F=e(9754),C=e.n(F),p=e(12924),x=e.n(p),te=e(28175),t=e(41647),n=e(93485);function c(P){var T={};if(P.length===0)return T;var w=(0,n.Z)(P),M;try{for(w.s();!(M=w.n()).done;){var ce=M.value,ae=ce,X=ae.field,Le=ae.fixed,Ie=ae.order,be=ae.show;be?be==="true"||be===!0?T[X]={fixed:Le,order:Ie,show:!0}:T[X]={fixed:Le,order:Ie,show:!1}:T[X]={fixed:Le,order:Ie,show:!0}}}catch(Te){w.e(Te)}finally{w.f()}return T}function m(P){var T=[],w=Object.entries(P);if(w.length===0)return T;for(var M=0,ce=w;M<ce.length;M++){var ae=ce[M],X=(0,s.Z)(ae,2),Le=X[0],Ie=X[1],be=Ie.fixed,Te=Ie.order,ke=Ie.show;T.push({field:Le,show:ke,fixed:be,order:Te})}return T}var i=e(38642),o=(P,T)=>{var w=(0,p.useState)(P),M=(0,s.Z)(w,2),ce=M[0],ae=M[1];return(0,p.useEffect)(()=>{var X=setTimeout(()=>{ae(P)},T);return()=>{clearTimeout(X)}},[P,T]),ce},a=o;function B(P,T){var w=useRef(T);useEffect(()=>{w.current=T},[T]),useEffect(()=>{var M=ce=>{var ae,X;console.warn(P.current,"node.current",ce.target),!((ae=(X=P.current)===null||X===void 0?void 0:X.contains(ce.target))!==null&&ae!==void 0?ae:!1)&&w.current&&w.current()};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[P])}var g=!1;function j(P){var T=(0,p.useState)({}),w=(0,s.Z)(T,2),M=w[0],ce=w[1],ae=P.prefixCls,X=P.rowKey,Le=P.columnEmptyText,Ie=P.pagination,be=P.headerTitle,Te=P.toolBarRender,ke=P.size,we=P.loading,ut=we===void 0?!1:we,Qe=P.tableUUID;Qe||console.error("tableUUID is required!!!"),(0,p.useEffect)(()=>{function St(Zt){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,S.Z)(C().mark(function Zt(tt){var H,Ae,ve,it,se,Xe,he,at;return C().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,(0,i.Kb)((0,t.U)(tt));case 2:if(H=ye.sent,Ae=(0,s.Z)(H,2),ve=Ae[0],it=Ae[1],!ve){ye.next=8;break}return ye.abrupt("return");case 8:se=it.data,Xe=se.data,he=Xe.fields,at=c(he)||{},at&&(g=!1,ce(at));case 13:case"end":return ye.stop()}},Zt)})),Fe.apply(this,arguments)}return Qe&&St(Qe),()=>{g=!1}},[Qe]);var Ce=a(M,1e3);(0,p.useEffect)(()=>{!g||(0,t.I)(Qe,m(M))},[Ce]);function ot(St){g=!0,ce(St)}return x().createElement("div",{className:"SampleProTable_container ".concat(P.className)},x().createElement(te.ZP,(0,pe.Z)({size:ke||"middle",rowKey:X||"id",columnEmptyText:Le||!1,pagination:Ie||!1,options:{density:!1,fullScreen:!1,reload:!1,setting:!0},search:!1,loading:ut,headerTitle:be||"",toolBarRender:Te||null,columnsStateMap:M,onColumnsStateChange:ot},P,{className:"".concat(ae,"-table")})))}},41647:function(yt,me,e){"use strict";e.d(me,{I:function(){return s},U:function(){return F}});var pe=e(37055),S=e(10237);function s(C){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=pe.ZP.tableHeader.save(),te={fields:p,key:C};return S.WY.post({url:x,data:te})}function F(C){var p=pe.ZP.tableHeader.get(C);return S.WY.get({url:p})}},17215:function(yt,me,e){"use strict";e.d(me,{h:function(){return s}});var pe=e(37055),S=e(10237);function s(){var F=pe.ZP.getUserInfoColumnConfig();return S.WY.get({url:F})}},80430:function(yt,me,e){"use strict";var pe=e(12924),S=e.n(pe),s=e(60667),F=C=>{var p=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},i=m.department_ids.split("/"),o=m.department_names.split("/"),a=i.map((B,g)=>S().createElement(s.Z,{key:B,dataType:"departmentName",value:B,name:o[g],type:m.source_type}));return S().createElement(S().Fragment,null,a.map((B,g)=>S().createElement("span",{key:B},B,g===o.length-1?"":"/")))},x=c=>S().createElement(s.Z,{dataType:"departmentName",value:c.department_id,name:c.department_name,type:c.source_type}),te=()=>{var c=C.list,m=c===void 0?[]:c,i=C.isBlock;if(!m.length)return null;var o=m.map(a=>p(a));return o.length&&o.length>1?S().createElement(S().Fragment,null,o.map((a,B)=>i?S().createElement("div",{key:a},a):S().createElement("span",{key:a},a,B===o.length-1?"":"\uFF0C"))):S().createElement(S().Fragment,null,o[0]||"")},t=()=>{var c=C.list,m=C.nameList,i=C.sourceType,o=C.isBlock,a=c.map((B,g)=>x({department_id:B,department_name:m[g],source_type:i}));return S().createElement(S().Fragment,null,a.map((B,g)=>o?S().createElement("div",{key:B},B):S().createElement("span",{key:B},B,g===a.length-1?"":"\uFF0C")))},n=()=>C.displayAll?te():t();return n()};F.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},me.Z=F},60667:function(yt,me,e){"use strict";e.d(me,{Z:function(){return te}});var pe=e(33565),S=e(12924),s=e.n(S),F=e(28216);function C(t){var n=t.type,c=t.openid,m=t.from,i=(0,S.useRef)(null);return(0,S.useLayoutEffect)(()=>{m==="vue"?window.parent.WWOpenData.bind(i.current):WWOpenData.bind(i.current)}),s().createElement("ww-open-data",{ref:i,type:n,openid:c})}var p=t=>{var n=t.wxWorkApiFlag,c=t.appType,m=t.from,i=(0,S.useState)(!1),o=(0,pe.Z)(i,2),a=o[0],B=o[1];(0,S.useEffect)(()=>{var P=localStorage.getItem("qyWechatBook");(c!=="wx_app"||n||P==="false"||m==="vue"||m==="taro")&&B(!0)},[n,c,m]);var g=(0,S.useCallback)(()=>{var P=t.type,T=t.value,w=t.name,M=w===void 0?"":w;switch(console.warn(t,"props"),P){case"wx_sync":{var ce=t.dataType;return T?s().createElement(C,{from:m,type:ce,openid:T}):M}default:return M}},[t]),j=()=>{var P=t.name,T=t.dataType,w=localStorage.getItem("qyWechatBook");if(T===""||w==="false")return P;if(m==="vue"||m==="taro")return g();switch(t.appType){case"wx_app":return g();default:return P}};return a?j():t.name};p.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var x=t=>({appType:t.user.appType,wxWorkApiFlag:t.user.wxWorkApiFlag}),te=(0,F.$j)(x)(p)},48479:function(yt,me,e){"use strict";var pe=e(62029),S=e(57361),s=e(47673),F=e(4107),C=e(9754),p=e.n(C),x=e(12924),te=e.n(x),t=e(91768),n=e(94184),c=e.n(n),m=e(28216),i=e(84874),o=e(67222),a=e(2396),B=F.Z.Search;class g extends te().Component{constructor(P){var T;super(P);T=this,this.clear=()=>{this.setState({searchValue:""})},this.renderEnterButton=()=>te().createElement(i.Z,{iconClass:"icon-icon_serarchx1"}),this.handleSearch=function(){var w=(0,S.Z)(p().mark(function M(ce){var ae,X,Le,Ie,be,Te,ke,we,ut;return p().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(ae=T.props,X=ae.appType,Le=ae.exChange,Ie=ae.appId,be=localStorage.getItem("qyWechatBook"),Te="",ke=X==="wx_app"&&be==="true"&&Le&&Ie==="9005",!(ce&&ke)){Ce.next=17;break}return Ce.prev=5,Ce.next=8,(0,o.F_)(ce);case 8:we=Ce.sent,ut=we.data,ut.success?Te=ut.data:Te="",Ce.next=17;break;case 13:Ce.prev=13,Ce.t0=Ce.catch(5),console.error(Ce.t0),Te="";case 17:T.props.onSearch(ce,Te);case 18:case"end":return Ce.stop()}},M,null,[[5,13]])}));return function(M){return w.apply(this,arguments)}}(),this.handleChange=w=>{var M=w.target.value,ce=w.type,ae=M;this.props.LimitLength&&(0,a.$s)(M)>this.props.LimitLength&&(ae=M.substring(0,(0,a.rw)(M,this.props.LimitLength))),this.setState({searchValue:ae});var X=!1;this.props.onSearch&&(ce==="click"&&(X=!0),this.props.immediate&&ce==="change"&&(X=!0)),X&&this.handleSearch(M)},this.state={searchValue:""}}componentDidMount(){this.props.onRef&&this.props.onRef(this)}componentWillReceiveProps(P){P.onRef&&P.onRef(this)}render(){var P=this.state.searchValue,T=this.props,w=T.prefixCls,M=T.placeholder,ce=T.width,ae=T.maxLength,X=ae===void 0?400:ae,Le=T.height,Ie=T.immediate,be=T.value,Te=c()(["".concat(w)]),ke={width:ce,height:Le},we={};return be&&(we.value=be),te().createElement(B,(0,pe.Z)({className:Te,style:ke,value:P,placeholder:M,onSearch:this.handleSearch,onChange:this.handleChange,maxLength:X,allowClear:!0,defaultValue:be,immediate:Ie.toString()},we))}}g.defaultProps={prefixCls:"cl-search-input",placeholder:"Search",value:null,onSearch:()=>{},onChange:()=>{},immediate:!1,onRef:()=>{}},me.Z=(0,m.$j)(j=>({appType:j.user.appType,appId:j.user.appId}))((0,t.Z)()(g))},85372:function(yt,me,e){"use strict";e.d(me,{Z:function(){return ya}});var pe=e(62029),S=e(49111),s=e(19650),F=e(57663),C=e(71577),p=e(34792),x=e(48086),te=e(88986),t=e(71194),n=e(57016),c=e(57338),m=e(83107),i=e(33565),o=e(12924),a=e.n(o),B=e(7145),g=e.n(B),j=e(45578),P=e.n(j),T=e(91768),w=e(28216),M=e(18106),ce=e(88108),ae=ce.Z.TabPane,X=r=>{var k=r.t,q=r.tabList,Q=r.activeTab,y=r.setActiveTab,h=r.type,E={immediate:k("component.immediateSelectUser"),import:k("component.importUser"),department:k("component.chooseDepartment"),post:k("component.choosePost"),group:k("component.chooseGroup"),cluster:k("component.chooseCluster"),role:k("component.chooseRoles"),user:k("component.choosePerson"),scope:k("component.chooseScope")};return a().createElement(ce.Z,{activeKey:Q,onChange:I=>y(I),type:h},q.map(I=>a().createElement(ae,{tab:E[I],key:I})))};X.defaultProps={t:()=>{},tabList:[],activeTab:"",setActiveTab:()=>{},type:"line"};var Le=X,Ie=e(54549),be=e(61066),Te=(0,o.createContext)({}),ke=()=>(0,o.useContext)(Te),we=()=>{var r=ke(),k=(0,o.useState)(!1),q=(0,i.Z)(k,2),Q=q[0],y=q[1];return(0,o.useEffect)(()=>{y(r.active==="scope")},[r.active]),a().createElement("div",{className:"selected-users"},a().createElement("div",{className:"selected-header"},a().createElement("div",{className:"selected"},a().createElement("span",{className:"selected-label"},r.t("component.selected"),":")),a().createElement("span",{className:"selected-clear",onClick:()=>r.clearData()},r.t("component.clearAllData"))),Q&&a().createElement("div",{className:"selected-scope-tips"},a().createElement("span",null,r.t("component.selectedScopeTips1"),"\uFF1A"),a().createElement("span",null,"1.",r.t("component.selectedScopeTips2")),a().createElement("span",null,"2.",r.t("component.selectedScopeTips3")),a().createElement("span",null,"3.",r.t("component.selectedScopeTips4")),a().createElement("span",{className:"scope-tips-close"},a().createElement(Ie.Z,{onClick:()=>y(!1)}))),a().createElement(be.Z,{store:r,showTips:Q,showToolTip:!0}))},ut=we,Qe=e(57361),Ce=e(9754),ot=e.n(Ce),St=e(25325),Fe=e.n(St),Zt=e(50361),tt=e.n(Zt),H=e(93212),Ae=e(22385),ve=e(31097),it=e(26726),se=e.n(it),Xe=e(45697),he=e.n(Xe),at=e(36202),Me=e(91648),ye=(0,Me.Z)(),l=r=>{var k=(E,I)=>{r.pagination.onShowSizeChange(E,I)},q=(E,I)=>{var b=document.querySelector(".".concat(r.className," .ant-table-body"));b.scrollTop=0,r.pagination.onChange(E,I)},Q={showSizeChanger:!0,showTotal:E=>"".concat(r.t("historicRecords.altogether")).concat(E).concat(r.t("historicRecords.strip")),pageSizeOptions:[20,30,40,50],total:r.pagination.total,onChange:q,current:r.pagination.current,pageSize:r.pagination.pageSize,size:"middle",onShowSizeChange:k},y=()=>a().createElement("div",{onClick:()=>r.cancelSelect(),style:{color:r.themeColor,cursor:"pointer"}},r.t("component.cancelSelect")),h=E=>({onClick:I=>{I.currentTarget.getElementsByClassName("ant-checkbox-wrapper")[0].click()}});return a().createElement("div",{className:"table-template"},a().createElement(at.f,{dataSource:r.dataSource,columns:r.columns,loading:r.loading,rowKey:r.rowKey||"id",className:"table-template-pro ".concat(r.className),rowSelection:r.rowSelection,scroll:{x:"max-content",y:"calc(100% - 47px)"},toolBarRender:()=>r.toolBarRender,tableAlertOptionRender:!1,tableAlertRender:!1,onRow:h,tableUUID:ye,pagination:Q}))};l.defaultProps={toolBarRender:a().createElement(a().Fragment,null),columns:[],dataSource:[],pagination:{},loading:!1,rowSelection:{selectedRowKeys:[],type:"checkbox"},className:"custom-table",rowKey:"",cancelSelect:()=>{},scroll:{y:"100%"}},l.PropTypes={cancelSelect:he().func,pagination:he().object,columns:he().array,dataSource:he().array,loading:he().bool,rowSelection:he().object,rowKey:he().func||he().string,className:he().string,scroll:he().object,toolBarRender:he().element};var Z=r=>{var k=r.advancedSetting;return{themeColor:k.themeColor}},f=(0,w.$j)(Z)((0,T.Z)()(l)),z=e(6793),N=e(48479),A=e(37055),W=e(10237),_={userGroup:A.ZP.choose.userGroup,userCluster:A.ZP.choose.userCluster,userRoles:A.ZP.choose.userRoles},J={keyword:"",page_number:1,page_size:20},G=r=>{var k=ke(),q=k.groups,Q=k.setGroups,y=k.clusters,h=k.setClusters,E=k.roles,I=k.setRoles,b=k.t,le=k.checkable,xe=(0,o.useState)(tt()(J)),re=(0,i.Z)(xe,2),Ze=re[0],V=re[1],De=(0,o.useState)(0),Re=(0,i.Z)(De,2),$e=Re[0],Ye=Re[1],Ke=(0,o.useState)([]),fe=(0,i.Z)(Ke,2),lt=fe[0],Be=fe[1],dt=(0,o.useState)(!1),ct=(0,i.Z)(dt,2),vt=ct[0],ht=ct[1],Ee=null,U={cluster:{columns:[{title:b("component.clusterName"),dataIndex:"name",key:"name",fixed:"left",width:120,render:v=>a().createElement(ve.Z,{title:v},a().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},v||"--"))},{title:b("common.creator"),dataIndex:"create_user",key:"create_user",width:120,render:v=>a().createElement(ve.Z,{title:v},a().createElement("div",{className:"cl-text-ellipsis",style:{width:120}},v||"--"))},{title:b("common.createTime"),dataIndex:"create_time",key:"create_time",width:120}],setData:h,data:y,url:_.userCluster(),searchPlaceholder:b("component.clusterSearch"),handleList:v=>{var u=tt()(v);return u.map(d=>({name:d.name,create_user:d.create_user,create_time:d.create_time?(0,z.p6)(d.create_time,"yyyy-MM-dd  hh:mm:ss"):"",key:d.id,id:d.id,path:d.path}))}},group:{columns:[{title:b("component.groupName"),dataIndex:"name",key:"name",fixed:"left",width:120,render:v=>a().createElement(ve.Z,{title:v},a().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},v||"--"))},{title:b("common.creator"),dataIndex:"create_user",key:"create_user",width:120,render:v=>a().createElement(ve.Z,{title:v},a().createElement("div",{className:"cl-text-ellipsis",style:{width:120}},v||"--"))},{title:b("common.updateTime"),dataIndex:"update_time",key:"update_time",width:120}],setData:Q,data:q,searchPlaceholder:b("component.groupSearch"),url:_.userGroup(),handleList:v=>{var u=tt()(v);return u.map(d=>({name:d.name,create_user:d.create_user,update_time:d.update_time?(0,z.p6)(d.update_time,"yyyy-MM-dd  hh:mm:ss"):"",id:d.id,path:d.path}))}},role:{columns:[{title:b("setting.roleName"),dataIndex:"role_name",key:"role_name"}],data:E,setData:I,searchPlaceholder:b("component.roleSearch"),url:_.userRoles(),handleList:v=>{var u=tt()(v);return u.map(d=>({role_name:d.role_name,id:d.id,name:d.role_name}))}}},ne=r.show?r.type:"group",ee=U[ne],ge=ee.columns,He=ee.data,Oe=ee.setData,Se=ee.handleList,gt=ee.url,xt=ee.searchPlaceholder;(0,o.useEffect)(()=>{V(v=>g()(v,{$set:J})),Be(v=>g()(v,{$set:[]})),Ye(v=>g()(v,{$set:0})),r.show&&(Ee&&Ee.clear(),et(J))},[r.type]);var et=function(){var v=(0,Qe.Z)(ot().mark(function u(d){var R,L,rt,nt,je,Et,Ut,Wt;return ot().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return R=d.page_number,L=d.page_size,rt=d.keyword,Lt.prev=1,ht(!0),Lt.next=5,W.WY.get({url:gt,params:{page_number:R,page_size:L,keyword:rt}});case 5:nt=Lt.sent,ht(!1),je=nt.data.data,Et=je.total_size,Ut=je.list,Wt=Array.isArray(Ut)?Se(Ut):[],Be(Wt),Ye(Et),Lt.next=16;break;case 13:Lt.prev=13,Lt.t0=Lt.catch(1),ht(!1);case 16:case"end":return Lt.stop()}},u,null,[[1,13]])}));return function(d){return v.apply(this,arguments)}}(),Tt=v=>{V(u=>g()(u,{keyword:{$set:v},page_number:{$set:1}})),et({keyword:v,page_number:1,page_size:Ze.page_size})},kt=(v,u,d)=>{var R=He.map(L=>L.id);v?d.forEach(L=>{R.includes(L.id)||Oe(rt=>g()(rt,{$push:[Ct(L)]}))}):Oe(L=>g()(L,{$set:se()(d,L,"id")}))},Ct=v=>({id:v.id,name:v.name}),D=(v,u)=>{if(!le){Oe(R=>g()(R,{$set:[Ct(v)]}));return}if(u)Oe(R=>g()(R,{$push:[Ct(v)]}));else{var d=He.findIndex(R=>R.id===v.id);Oe(R=>g()(R,{$splice:[[d,1]]}))}},Y=()=>a().createElement(N.Z,{placeholder:xt,onSearch:Tt,width:"220px",onRef:v=>Ee=v});return a().createElement(f,{toolBarRender:Y(),dataSource:lt,columns:ge,rowSelection:{type:le?"checkbox":"radio",selectedRowKeys:He.map(v=>v.id),onSelect:D,onSelectAll:kt},className:r.type,cancelSelect:()=>Oe([]),loading:vt,pagination:{total:$e,pageSize:Ze.page_size,current:Ze.page_number,onShowSizeChange:(v,u)=>{V(d=>g()(d,{page_size:{$set:u}}))},onChange:(v,u)=>{var d=Ze.page_size===u?v:1;V(R=>g()(R,{page_number:{$set:d}})),et({page_number:d,page_size:u,keyword:Ze.keyword})}}})};G.defaultProps={type:"group",show:!0};var O=G,ie=e(59676),de={chooseDepartment:A.ZP.choose.chooseDepartment,choosePost:A.ZP.choose.choosePost},$=()=>{var r=ke(),k=r.scopeList,q=r.filterAuth,Q=r.departments,y=r.posts,h=r.setDepartments,E=r.setPosts,I=r.isOnlyPost,b=r.showScopeTabs,le=r.active,xe=r.t,re=(0,o.useState)(k[0]),Ze=(0,i.Z)(re,2),V=Ze[0],De=Ze[1],Re={department:{data:Q,setData:h,url:de.chooseDepartment(),id:"dept_id"},post:{data:y,setData:E,url:de.choosePost(),id:"post_id"}},$e=function(){var Ee=(0,Qe.Z)(ot().mark(function U(ne,ee,ge,He){var Oe,Se,gt,xt,et,Tt,kt;return ot().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(Oe=Re[He],Se=tt()(Oe.data),gt=ne.findIndex(Y=>Y.id===ee),!ge){D.next=15;break}if(!(gt>-1&&ne[gt].have_auth==="true")){D.next=8;break}Se=[...Se,ne[gt]],D.next=13;break;case 8:return D.next=10,W.WY.get({url:Oe.url,params:{[Oe.id]:ee}});case 10:xt=D.sent,et=xt.data,Tt=et.code,kt=et.data,Tt==="200000"&&(Se=[...Se,kt]);case 13:D.next=16;break;case 15:Se=(0,H.XB)(Se,ee);case 16:Oe.setData(Se);case 17:case"end":return D.stop()}},U)}));return function(ne,ee,ge,He){return Ee.apply(this,arguments)}}(),Ye={department:{treeData:(0,H.z8)(Q),handleTreeData:(Ee,U,ne)=>$e(Ee,U,ne,"department")},post:{treeData:(0,H.z8)(y),handleTreeData:(Ee,U,ne)=>$e(Ee,U,ne,"post")}},Ke=["group","cluster","role"],fe=["department","post"],lt=Fe()(k,fe).length,Be=Fe()(k,Ke).length,dt=Ke.includes(V),ct=fe.includes(V),vt=()=>{if(!lt)return null;var Ee=ct?Ye[V]:{},U=Ee.treeData,ne=U===void 0?[]:U,ee=Ee.handleTreeData,ge=ee===void 0?()=>{}:ee;return a().createElement("div",{className:"scope-selector-depart-post",style:{display:ct?"block":"none"}},a().createElement(ie.Z,{businessType:V,filterAuth:q,haveAuth:!1,isOnlyPost:I,hasCheckList:ne,searchWidth:220,onCheck:ge,onSelect:ge,active:le}))};(0,o.useEffect)(()=>{De(k[0])},[le,k]);var ht=()=>Be?a().createElement("div",{style:{display:dt?"block":"none"},className:"rgc-selector"},a().createElement(O,{type:V,show:dt})):null;return a().createElement("div",{className:"scope-selector"},b&&a().createElement("div",{className:"scope-selector-panel"},a().createElement(Le,{t:xe,tabList:k,activeTab:V,setActiveTab:De})),a().createElement("div",{className:"scope-selector-body ".concat(b?"scope-selector-body-have":"")},vt(),ht()))},K=$,Ue=e(78138),ue=e.n(Ue),ze=e(20136),oe=e(55241),We=e(71153),mt=e(60331),At=e(13062),Rt=e(71230),wt=e(59250),Dt=e(13013),Je=e(89032),Ge=e(15746),ft=e(63185),Ve=e(9676),bt=e(47673),Pt=e(4107),pt=e(9715),Pe=e(86585),qe=e(14965),_e=e(11448),Ne=e(43358),st=e(34041),It=e(58491),Mt=e(57254),_t=e(60667),Gt=st.Z.Option,aa=_e.Z.RangePicker,$t=r=>{var k=r.onSearch,q=r.initialValues,Q=r.customFields,y=ke(),h=y.t,E=y.filterAuth,I=y.isOnlyPost,b=(0,o.useState)(!1),le=(0,i.Z)(b,2),xe=le[0],re=le[1],Ze=(0,o.useState)([]),V=(0,i.Z)(Ze,2),De=V[0],Re=V[1],$e=(0,o.useState)([]),Ye=(0,i.Z)($e,2),Ke=Ye[0],fe=Ye[1],lt=(0,o.useState)(!0),Be=(0,i.Z)(lt,2),dt=Be[0],ct=Be[1],vt=Pe.Z.useForm(),ht=(0,i.Z)(vt,1),Ee=ht[0],U=[{label:h("common.departmentLabel"),key:"department_ids",type:"department",dataIndex:"departmentId",placeholder:"".concat(h("common.all")).concat(h("common.departmentLabel")),isChecked:!0,span:8},{label:h("common.postLabel"),key:"post_ids",type:"post",dataIndex:"postId",placeholder:"".concat(h("common.all")).concat(h("common.postLabel")),isChecked:!0,span:8},{label:h("searchInputPlaceholder.userNameOp"),key:"user_name",type:"input",dataIndex:"username",isChecked:!0,inputProps:{maxLength:50},span:8},{label:h("searchInputPlaceholder.jobNumberOp"),key:"job_number",type:"input",dataIndex:"jobNumber",isChecked:!0,inputProps:{maxLength:50},span:8}],ne=(0,o.useState)(U),ee=(0,i.Z)(ne,2),ge=ee[0],He=ee[1],Oe=u=>{var d=tt()(u);d.join_time&&(d.start_time=d.join_time.length>0?ue()(d.join_time[0]).valueOf():"",d.end_time=d.join_time.length>0?ue()(d.join_time[1]).valueOf():"");var R=[];Object.keys(d).forEach(L=>{L.indexOf("column")>-1&&d[L]&&R.push({column_key:L,column_value:d[L]})}),d.department_ids=De.map(L=>L.id).join(","),d.post_ids=Ke.map(L=>L.id).join(","),d.extend_column_vos=R,delete d.join_time,k(d)},Se=(u,d)=>{d==="post"?fe(u):d==="department"&&Re(u)},gt=(u,d)=>{if(u==="department"){var R=De.findIndex(rt=>rt.id===d);Re(rt=>g()(rt,{$splice:[[R,1]]}))}else if(u==="post"){var L=Ke.findIndex(rt=>rt.id===d);fe(rt=>g()(rt,{$splice:[[L,1]]}))}},xt=u=>{Ee.setFieldsValue({join_time:u||[]})},et=(u,d)=>{Ee.setFieldsValue({[d]:u.target.value.trim()})},Tt=u=>{ct(u)},kt=u=>{if(u.type==="input")return a().createElement(Pt.Z,(0,pe.Z)({placeholder:"".concat(h("common.input"))},u.inputProps,{allowClear:!0,onChange:R=>et(R,u.key)}));if(u.type==="select")return a().createElement(st.Z,{placeholder:"".concat(h("common.select")),disabled:u.disabled},u.dataSource.map(R=>a().createElement(Gt,{value:R.value,key:R.value},R.label)));if(u.type==="rangePicker")return a().createElement(aa,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:xt,style:{width:"100%"}});if(u.type==="department"||u.type==="post"){var d={department:De,post:Ke}[u.type]||[];return a().createElement("div",{className:"form-select"},a().createElement("div",{className:"select-wrapper",style:{display:d.length?"flex":"none"}},a().createElement(Vt,{onClose:gt,hasCheckList:d,type:u.type})),a().createElement(st.Z,{dropdownStyle:{width:"400px",padding:"20px"},dropdownMatchSelectWidth:!1,placeholder:d.length?"":u.placeholder,showArrow:!0,autoFocus:!1,showSearch:!1,onDropdownVisibleChange:Tt,mode:"multiple",maxTagCount:"responsive",dropdownRender:()=>a().createElement(ie.Z,{businessStyle:{height:400},searchWidth:320,filterAuth:E,haveAuth:!1,checkable:!0,isOnlyPost:I,showSearch:dt,businessType:u.type,hasCheckList:d,onCheck:R=>Se(R,u.type),onSelect:R=>Se(R,u.type)})}))}return null},Ct=()=>{Ee.resetFields(),Re([]),fe([]),k({},"reset")};(0,o.useEffect)(()=>{if(Array.isArray(Q)){var u=Q.map(R=>({label:R.value,key:R.label,type:"input",dataIndex:R.label,isChecked:!1,inputProps:{maxLength:50},span:8})),d=[...tt()(U),{label:h("searchInputPlaceholder.loginNumber"),key:"login_mobile",type:"input",inputProps:{maxLength:50},dataIndex:"loginMobile",isChecked:!1,span:8},{label:h("marketing.loginEmail"),key:"login_email",type:"input",dataIndex:"loginEmail",isChecked:!1,inputProps:{maxLength:50},span:8},...u,{label:h("setting.joinTime"),key:"join_time",type:"rangePicker",dataIndex:"joinTime",isChecked:!1,span:16}];He(d)}},[Q]);var D=u=>{var d=tt()(ge);d.forEach((R,L)=>{L>3&&(R.isChecked=u.includes(R.key))}),He(d)},Y=a().createElement("div",null,a().createElement(Ve.Z.Group,{style:{width:"100%"},onChange:D},ge.slice(4,ge.length).map((u,d)=>a().createElement(Ve.Z,{value:u.key,key:d.toString()},u.label)))),v=()=>{var u=ge.reduce((R,L)=>R+(L.isChecked?L.span:0),0),d=ge.filter(R=>R.isChecked&&R.span===16);return d.length&&u%24==8?8:24-u%24};return a().createElement(Pe.Z,{form:Ee,name:"basic",initialValues:q,className:"search-form",onFinish:Oe,autoComplete:"off"},a().createElement(Rt.Z,{gutter:24},ge.map((u,d)=>d>3&&!u.isChecked?null:a().createElement(Ge.Z,{span:u.span,key:d.toString()},a().createElement(Pe.Z.Item,{label:u.label,name:u.key},kt(u)))),a().createElement(Ge.Z,{span:v(),style:{textAlign:"right"}},a().createElement(Dt.Z,{overlay:Y,trigger:["click"],overlayClassName:"dropdown-more"},a().createElement(C.Z,{onClick:()=>{re(!xe)}},h("common.more")," ",xe?a().createElement(It.Z,null):a().createElement(Mt.Z,null))),a().createElement(C.Z,{htmlType:"submit",style:{margin:"0 12px"},type:"primary"},h("setting.searchLabel")),a().createElement("a",{onClick:Ct},h("common.reset")))))};function Vt(r){var k=r.type,q=r.hasCheckList,Q=r.onClose,y=E=>{E.preventDefault(),E.stopPropagation()};if(!q.length)return null;var h=()=>q.map((E,I)=>a().createElement("span",{key:E.id},a().createElement(_t.Z,{type:E.source_type,name:E.name,value:E.id,dataType:"departmentName"}),I!==q.length-1?"\uFF1B":""));return a().createElement(oe.Z,{title:"",content:h(),getPopupContainer:()=>document.querySelector(".search-form"),overlayClassName:"select-tooltip",placement:"topLeft",arrowPointAtCenter:!0},a().createElement("div",null,q.slice(0,2).map(E=>a().createElement(mt.Z,{onMouseDown:y,key:E.id,closable:!0,onClose:()=>Q(k,E.id),style:{marginRight:3}},a().createElement("div",{className:"label-span"},a().createElement(_t.Z,{type:E.source_type,name:E.name,value:E.id,dataType:"departmentName"})))),q.length>2&&a().createElement("span",{className:"tag-more"},"...")))}$t.defaultProps={onSearch:()=>{},initialValues:{user_type:""},customFields:[]};var Kt=$t,sa=e(17215),Yt=e(38642),ra=e(80430),Bt={getUsers:A.ZP.choose.users},na={ding:"sync",third_oa_app:"third_oa_sync",weixin:"wx_sync",app:"create",fs:"fs_sync ",lenovo_sync:""},Ht={e_app:"sync",third_oa_app:"third_oa_sync",wx_app:"wx_sync",app:"create",fs_app:"fs_sync",seeyon_app:""},oa=r=>{var k=ke(),q=k.users,Q=k.setUsers,y=k.filterAuth,h=k.checkable,E=k.userType,I=k.appType,b=k.t,le=r.organizationType,xe={page_number:1,page_size:20,user_name:"",filter_auth:y,user_type:E,department_ids:"",post_ids:"",job_number:"",login_mobile:"",login_email:"",start_time:"",end_time:"",source_type:le?na[le]:Ht[I]||""},re=(0,o.useState)(tt()(xe)),Ze=(0,i.Z)(re,2),V=Ze[0],De=Ze[1],Re=(0,o.useState)(0),$e=(0,i.Z)(Re,2),Ye=$e[0],Ke=$e[1],fe=(0,o.useState)([]),lt=(0,i.Z)(fe,2),Be=lt[0],dt=lt[1],ct=(0,o.useState)(!1),vt=(0,i.Z)(ct,2),ht=vt[0],Ee=vt[1],U=(0,o.useState)([]),ne=(0,i.Z)(U,2),ee=ne[0],ge=ne[1],He=(0,o.useState)([{title:b("common.userName"),dataIndex:"user_name",key:"user_name",fixed:"left",width:150,render:(D,Y)=>{var v=()=>a().createElement(_t.Z,{type:Y.source_type,name:Y.user_name,value:Y.user_id,dataType:"userName"});return a().createElement(ve.Z,{title:v()},a().createElement("div",{className:"cl-text-ellipsis",style:{width:140}},v()))}},{title:"ID",dataIndex:"id",key:"id",width:100},{title:b("authentication.job_number"),dataIndex:"job_number",key:"job_number",width:150,render:D=>a().createElement("span",null,D||"--")},{title:b("common.departmentLabel"),dataIndex:"department_infos",key:"department_infos",width:210,render:D=>{var Y=()=>a().createElement(ra.Z,{list:D,displayAll:!0});return a().createElement(ve.Z,{title:Y()},a().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},Y()))}},{title:b("authentication.position"),dataIndex:"post_names",width:150,key:"post_names",render:D=>{var Y=Array.isArray(D)?D.join("\uFF0C"):"";return a().createElement(ve.Z,{title:Y},a().createElement("div",{className:"cl-text-ellipsis",style:{width:140}},Y||"--"))}},{title:b("marketing.loginEmail"),dataIndex:"login_email",key:"login_email",width:150,render:D=>a().createElement("span",null,D||"--")},{title:b("searchInputPlaceholder.loginNumber"),dataIndex:"login_mobile",key:"login_mobile",width:150,render:D=>a().createElement("span",null,D||"--")},{title:b("setting.joinTime"),dataIndex:"create_time",key:"create_time",width:150,render:D=>a().createElement("span",null,D?ue()(Number(D)).format("YYYY-MM-DD HH:mm"):"--")}]),Oe=(0,i.Z)(He,2),Se=Oe[0],gt=Oe[1];(0,o.useEffect)(()=>{xt()},[V]);var xt=function(){var D=(0,Qe.Z)(ot().mark(function Y(){var v,u,d,R,L;return ot().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.prev=0,Ee(!0),nt.next=4,W.WY.post({url:Bt.getUsers(),data:V});case 4:v=nt.sent,Ee(!1),u=v.data.data,d=u.total_size,R=u.list,L=R.map(je=>(Array.isArray(je.extend_list)&&je.extend_list.forEach(Et=>{je[Et.column_key]=Et.extend_value}),je.path=je.department_infos,(0,te.Z)((0,te.Z)({},je),{},{user_name:je.user_name,job_number:je.job_number,login_mobile:je.login_mobile,login_email:je.login_email,department_names:je.department_names,post_names:je.post_names,user_id:je.user_id,name:je.user_name,path:je.path}))),dt(L),Ke(d),nt.next=15;break;case 12:nt.prev=12,nt.t0=nt.catch(0),Ee(!1);case 15:case"end":return nt.stop()}},Y,null,[[0,12]])}));return function(){return D.apply(this,arguments)}}(),et=D=>({id:D.id,name:D.name,path:D.path,source_type:D.source_type,user_id:D.user_id}),Tt=(D,Y,v)=>{if(D){var u=q.map(d=>d.id);v.forEach(d=>{u.includes(d.id)||Q(R=>g()(R,{$push:[et(d)]}))})}else Q(d=>g()(d,{$set:se()(v,d,"id")}))},kt=(D,Y)=>{if(h)if(Y)Q(u=>g()(u,{$push:[et(D)]}));else{var v=q.findIndex(u=>u.id===D.id);Q(u=>g()(u,{$splice:[[v,1]]}))}else Q(u=>g()(u,{$set:[et(D)]}))},Ct=(D,Y)=>{De(Y==="reset"?v=>g()(v,{$set:xe}):v=>g()(v,{$set:(0,te.Z)((0,te.Z)({},v),{},{page_number:1},D)}))};return(0,o.useEffect)(()=>{(function(){var D=(0,Qe.Z)(ot().mark(function v(){var u,d,R,L,rt,nt;return ot().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Et.next=2,(0,Yt.Kb)((0,sa.h)());case 2:if(u=Et.sent,d=(0,i.Z)(u,2),R=d[0],L=d[1],!R){Et.next=8;break}return Et.abrupt("return");case 8:rt=L.data,nt=[],Array.isArray(rt)&&rt.forEach(Ut=>{Object.keys(Ut).forEach(Wt=>{Wt.indexOf("column")>-1&&nt.push({label:Wt,value:Ut[Wt]})})}),ge(nt);case 12:case"end":return Et.stop()}},v)}));function Y(){return D.apply(this,arguments)}return Y})()()},[]),(0,o.useEffect)(()=>{var D=ee.map(Y=>({title:Y.value,dataIndex:Y.label,key:Y.label,render:v=>a().createElement(ve.Z,{title:v},a().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},v||"--"))}));gt([...Se,...D])},[ee]),a().createElement("div",{className:"direct-select-user"},a().createElement("div",{className:"direct-header"},a().createElement(Kt,{onSearch:Ct,initialValues:{user_type:E},customFields:ee})),a().createElement("div",{className:"direct-body"},a().createElement(f,{hasSearch:!1,dataSource:Be,columns:Se,rowSelection:{type:h?"checkbox":"radio",selectedRowKeys:q.map(D=>D.id),onSelect:kt,onSelectAll:Tt},cancelSelect:()=>Q([]),loading:ht,pagination:{total:Ye,pageSize:V.page_size,current:V.page_number,onShowSizeChange:(D,Y)=>{De(v=>g()(v,{$set:(0,te.Z)((0,te.Z)({},v),{},{page_size:Y})}))},onChange:D=>{De(Y=>g()(Y,{$set:(0,te.Z)((0,te.Z)({},Y),{},{page_number:D})}))}}})))},Qt=()=>({}),la=(0,w.$j)(Qt)((0,T.Z)()(oa)),ca=e(66456),ia=e(55313),pa=e(43185),da=e(53251),ua=e(30887),Ot=e(99210),Nt=e(8812),ma=e(49101),jt=e(90631),Xt=e(97593),Ft=e(18329),Jt={size:"middle",destroyOnClose:!0,bodyStyle:{padding:"0 32px"},maskClosable:!1},qt={downloadTemplate:A.ZP.Organization.downloadTemplate,uploadUsers:A.ZP.Organization.importUserTemplate},va=r=>{var k=(0,o.useState)(!1),q=(0,i.Z)(k,2),Q=q[0],y=q[1],h=(0,o.useState)([]),E=(0,i.Z)(h,2),I=E[0],b=E[1],le=(0,o.useState)(""),xe=(0,i.Z)(le,2),re=xe[0],Ze=xe[1],V=ke(),De=V.users,Re=V.setUsers,$e=V.fileList,Ye=V.setFileList,Ke=[{key:"userId",label:r.t("component.importByUserId")},{key:"mobile",label:r.t("component.importByMobile")},{key:"jobNumber",label:r.t("component.importByJobNum")}],fe=a().createElement(Ot.Z,null,Ke.map(U=>a().createElement(Ot.Z.Item,{onClick:()=>dt(U.key),key:U.key},U.label))),lt=[{title:r.t("component.fileName"),dataIndex:"file_name",key:"file_name",width:200,textWrap:"word-break",ellipsis:!0},{title:r.t("component.successLabel"),dataIndex:"success_count"},{title:r.t("component.failedLabel"),dataIndex:"failed_count",render:(U,ne)=>a().createElement("div",null,U," ",U>0&&a().createElement(C.Z,{type:"link",size:"small",onClick:()=>Be(!0,ne.error_msg_list),icon:a().createElement(Nt.Z,null)}))},{title:r.t("common.operate"),dataIndex:"operate",render:(U,ne)=>a().createElement(C.Z,{type:"link",onClick:()=>ct(ne)},r.t("component.importUser"))}],Be=(U,ne)=>{b(ne),y(U)},dt=U=>{Ze(U)},ct=U=>{var ne=U.success_list,ee=De.map(ge=>ge.id);ne.forEach(ge=>{ee.includes(ge.id)||Re(He=>g()(He,{$push:[ge]}))})},vt=U=>{x.default.config({maxCount:5});var ne=U.file,ee=ne===void 0?{}:ne,ge=ee.response,He=ge===void 0?{}:ge,Oe=He.code,Se=He.data,gt=He.message;if(ee.status==="error")Oe==="4000001"?x.default.error("".concat(ee.name," ").concat(r.t("component.dataManyTip",{count:3e3})),3):x.default.error(gt||"".concat(ee.name," ").concat(r.t("setting.uploadFail")),3);else if(ee.status==="done")if(Oe==="200000"){var xt={key:ee.uid,file_name:ee.name,success_count:Se.success_count,success_list:Se.success_list,failed_count:Se.failed_count,error_msg_list:Se.error_msg_list||[]};Ye(et=>g()(et,{$set:[...et,xt]})),x.default.success("".concat(ee.name," ").concat(r.t("setting.uploadSuccess")),1)}else x.default.error("".concat(ee.name," ").concat(r.t("component.checkFileError")),3)},ht=U=>{var ne={page:"selectUserTemplate",query:"?download_type=".concat(U),props:r};(0,Xt.N)(ne)},Ee={name:"file",multiple:!0,action:"".concat(qt.uploadUsers(),"?access_token=").concat(window.localStorage.getItem("token"),"&type=").concat(re),showUploadList:!1,headers:{authorization:"authorization-text","Enterprise-Id":window.localStorage.getItem("enterpriseId")},accept:".xlsx",onChange:vt};return a().createElement("div",{className:"import-user"},a().createElement("div",{className:"import-user-header"},a().createElement("div",{className:"import-user-tips"},a().createElement("div",{className:"import-user-tip"},r.t("component.importTipTitle"),"\uFF1A"),a().createElement("div",{className:"import-user-tip"},r.t("component.importUserTips1")),a().createElement("div",{className:"import-user-tip"},r.t("component.importUserTips2")),a().createElement("div",{className:"import-user-tip"},r.t("component.importUserTips3"))),a().createElement(s.Z,null,a().createElement(da.Z,Ee,a().createElement(Dt.Z,{overlay:fe},a().createElement(C.Z,{onClick:U=>{U.stopPropagation()},icon:a().createElement(ma.Z,null),type:"primary",ghost:!0},r.t("component.selectFile")))),a().createElement(C.Z,{icon:a().createElement(jt.Z,null),onClick:()=>ht("group"),type:"primary",ghost:!0},r.t("component.downLoadTemplate")),a().createElement(C.Z,{icon:a().createElement(jt.Z,null),onClick:()=>ht("empty_template"),type:"primary",ghost:!0},r.t("component.downloadEmptyTemplate")))),a().createElement("div",{className:"import-user-body"},a().createElement(ia.Z,{dataSource:$e,columns:lt,rowKey:U=>U.key,pagination:!1,scroll:{y:"calc(100% - 55px)"}})),a().createElement(Ft.Om,(0,pe.Z)({className:"err-view-dialog"},Jt,{title:r.t("component.importErrorTip"),visible:Q,onCancel:()=>Be(!1,[]),onOk:()=>Be(!1,[])}),I.map(U=>a().createElement("div",{className:"err-view-item",key:U},U))))},ea=(0,w.$j)()((0,T.Z)()(va)),ta=r=>{var k=ke(),q=k.chooseUserList,Q=k.showChooseTabs,y=k.active,h=k.t,E=(0,o.useState)(q[0]),I=(0,i.Z)(E,2),b=I[0],le=I[1];return(0,o.useEffect)(()=>{le(q[0])},[y,q]),a().createElement("div",{className:"direct-selector"},Q&&a().createElement("div",{className:"direct-selector-panel"},a().createElement(Le,{t:h,tabList:q,activeTab:b,setActiveTab:le})),a().createElement("div",{className:"direct-selector-body ".concat(Q?"direct-selector-body-have":"")},b==="immediate"&&a().createElement(la,{organizationType:r.organizationType}),b==="import"&&a().createElement(ea,null)))},ha=ta,zt=r=>{var k=(0,o.useState)(r.tabs[0]),q=(0,i.Z)(k,2),Q=q[0],y=q[1],h=(0,o.useState)([]),E=(0,i.Z)(h,2),I=E[0],b=E[1],le=(0,o.useState)([]),xe=(0,i.Z)(le,2),re=xe[0],Ze=xe[1],V=(0,o.useState)([]),De=(0,i.Z)(V,2),Re=De[0],$e=De[1],Ye=(0,o.useState)([]),Ke=(0,i.Z)(Ye,2),fe=Ke[0],lt=Ke[1],Be=(0,o.useState)([]),dt=(0,i.Z)(Be,2),ct=dt[0],vt=dt[1],ht=(0,o.useState)([]),Ee=(0,i.Z)(ht,2),U=Ee[0],ne=Ee[1],ee=(0,o.useState)([]),ge=(0,i.Z)(ee,2),He=ge[0],Oe=ge[1],Se=r.tabs.length>1,gt=r.scopeList.length>1,xt=r.chooseUserList.length>1,et=(0,o.useState)(!1),Tt=(0,i.Z)(et,2),kt=Tt[0],Ct=Tt[1],D={wrapper:r.showType==="drawer"?m.Z:n.Z,height:r.showType==="drawer"?"100%":"642px",config:r.showType==="drawer"?{className:"".concat(r.className," cl-user-selector")}:{wrapClassName:"".concat(r.className," cl-user-selector")}},Y=()=>{b([]),Ze([]),lt([]),$e([]),ne([]),vt([])},v=(0,te.Z)({users:I,setUsers:b,departments:re,setDepartments:Ze,posts:Re,setPosts:$e,groups:fe,setGroups:lt,clusters:ct,setClusters:vt,roles:U,setRoles:ne,clearData:Y,active:Q,showTabs:Se,showScopeTabs:gt,showChooseTabs:xt,fileList:He,setFileList:Oe,appType:r.appType,tableHeight:D.height},r),u=()=>{if(r.maxUserConfig.limitCount&&I.length>r.maxUserConfig.limitCount){x.default.warn(r.maxUserConfig.limitTip);return}var L={};r.tabs.includes("user")&&(L.users=P()(I,"id")),r.tabs.includes("scope")&&(r.scopeList.includes("department")&&(L.departments=re),r.scopeList.includes("post")&&(L.posts=Re),r.scopeList.includes("group")&&(L.groups=P()(fe,"id")),r.scopeList.includes("cluster")&&(L.clusters=P()(ct,"id")),r.scopeList.includes("role")&&(L.roles=P()(U,"id"))),r.onOk((0,te.Z)({},L))};(0,o.useEffect)(()=>(r.tabs.includes("user")&&b(L=>g()(L,{$set:r.value.users||[]})),r.scopeList.includes("department")&&Ze(L=>g()(L,{$set:r.value.departments||[]})),r.scopeList.includes("post")&&$e(L=>g()(L,{$set:r.value.posts||[]})),r.scopeList.includes("group")&&lt(L=>g()(L,{$set:r.value.groups||[]})),r.scopeList.includes("cluster")&&vt(L=>g()(L,{$set:r.value.clusters||[]})),r.scopeList.includes("role")&&ne(L=>g()(L,{$set:r.value.roles||[]})),()=>{y(r.tabs[0])}),[r.value,r.tabs,r.scopeList]);var d=()=>{Y(),r.onCancel()};(0,o.useEffect)(()=>{var L=I.length||re.length||Re.length||fe.length||ct.length||U.length;Ct(!L)},[I,re,Re,fe,ct,U]);var R=()=>a().createElement(s.Z,null,a().createElement(C.Z,{onClick:d},r.cancelText||r.t("common.cancel")),a().createElement(C.Z,{type:"primary",onClick:u,disabled:kt},r.okText||r.t("common.ok")));return a().createElement(D.wrapper,(0,pe.Z)({},r.wrapperConfig,{visible:r.visible,title:r.title||r.t("component.chooseObject")},D.config,{onClose:d,onCancel:d,footer:R()}),a().createElement(Te.Provider,{value:v},a().createElement("div",{className:"user-selector-wrapper"},a().createElement("div",{className:"wrapper-layout",style:{height:D.height}},a().createElement("div",{className:"layout-left"},Se&&a().createElement("div",{className:"selector-panel"},a().createElement(Le,{activeTab:Q,t:r.t,tabList:r.tabs,setActiveTab:y,type:"card"})),r.tabs.includes("user")&&a().createElement("div",{className:"layout-left-content ".concat(Se?"layout-left-content-have":""),style:{display:Q==="user"?"block":"none"}},a().createElement(ha,{organizationType:r.organizationType})),r.tabs.includes("scope")&&a().createElement("div",{className:"layout-left-content ".concat(Se?"layout-left-content-have":""),style:{display:Q==="scope"?"block":"none"}},a().createElement(K,null))),a().createElement("div",{className:"layout-right"},a().createElement(ut,null))))))};zt.defaultProps={visible:!1,value:{users:[],departments:[],posts:[],clusters:[],groups:[],roles:[]},title:"",businessId:"",tabs:["user","scope"],chooseUserList:["immediate","import"],scopeList:["department","post","group","cluster","role"],checkable:!0,filterAuth:!0,userType:"active",maxUserConfig:{limitCount:0,limitTip:""},isOnlyPost:!1,wrapperConfig:{width:"1200px",destroyOnClose:!0,bodyStyle:{padding:0},maskClosable:!1,size:"medium"},showType:"modal",okText:"",onOk:()=>{},onCancel:()=>{}};var ga=r=>({appType:r.user.appType}),ya=(0,w.$j)(ga)((0,T.Z)()(zt))},61066:function(yt,me,e){"use strict";e.d(me,{Z:function(){return tt}});var pe=e(62029),S=e(33565),s=e(7359),F=e(2829),C=e(12924),p=e.n(C),x=e(7145),te=e.n(x),t=e(50361),n=e.n(t),c=e(18095),m=e(18267),i=e(91768),o=e(93212),a=e(54549),B=e(28216),g=e(60667),j=e(84874),P=H=>{var Ae=H.data,ve=H.type,it=H.appType,se=H.store,Xe=H.isShowRemove,he=Xe===void 0?!0:Xe,at=(Me,ye)=>{var l=se[ye].findIndex(W=>W.id===Me.id),Z={groups:se.setGroups,users:se.setUsers,clusters:se.setClusters,roles:se.setRoles};if(Object.keys(Z).forEach(W=>{if(ye===W){var _=n()(se[ye]);Array.isArray(_)&&(_.splice(l,1),Z[W](_))}}),ye==="departments"){var f=n()(se.departments),z=(0,o.XB)(f,Me.id,Me);se.setDepartments(z)}if(ye==="posts"){var N=n()(se.posts),A=(0,o.XB)(N,Me.id,Me);se.setPosts(A)}};return p().createElement("div",{className:"render-item"},p().createElement("div",{className:"render-item-name"},p().createElement("span",{className:"item-name-icon"},ve==="users"?p().createElement(j.Z,{className:"iconfont",color:"#C0C3CD",iconClass:"icon-danren1"}):p().createElement(j.Z,{className:"iconfont",color:"#C0C3CD",iconClass:"icon-duoren1"})),["users","departments"].includes(ve)?p().createElement(g.Z,{type:Ae.source_type,name:Ae.name,value:it==="wx_app"&&ve==="users"?Ae.user_id:Ae.id,dataType:ve==="users"?"userName":"departmentName"}):Ae.name),he?p().createElement("span",{className:"render-item-close",onClick:()=>at(Ae,ve)},p().createElement(a.Z,{style:{fontSize:"12px",color:"#AFB5D2"}})):"")},T=H=>({appType:H.user.appType}),w=(0,B.$j)(T)(P),M=e(22385),ce=e(31097),ae=e(88986),X=e(57361),Le=e(20228),Ie=e(11382),be=e(9754),Te=e.n(be),ke=e(10237),we=e(37055),ut=H=>ke.WY.get({url:we.ZP.choose.chooseDepartmentPath({departmentId:H})}),Qe=H=>ke.WY.get({url:we.ZP.choose.choosePostPath({postId:H})}),Ce=e(80430),ot=H=>{var Ae=H.showToolTip,ve=Ae===void 0?!1:Ae,it=H.data,se=H.type,Xe=H.store,he=H.isShowRemove,at=he===void 0?!0:he,Me=(0,C.useState)(!0),ye=(0,S.Z)(Me,2),l=ye[0],Z=ye[1],f=(0,C.useState)(it),z=(0,S.Z)(f,2),N=z[0],A=z[1],W=(_,J)=>{var G=Array.isArray(N.path)&&N.path.length,O=G&&N.path.every(de=>Boolean(de.post_names)),ie=G&&N.path.every(de=>Boolean(de.department_names));if(J==="posts"&&O)return _.path[0].post_names;if(ie)return p().createElement(Ce.Z,{list:_.path,displayAll:!0})};return["users","departments","posts"].includes(se)&&ve?p().createElement(ce.Z,{placement:"top",title:l?p().createElement(Ie.Z,{size:"small",className:"cl-user-selector-selected-body-tooltip"}):W(N,se),mouseEnterDelay:.5,trigger:["hover","focus","click"],onVisibleChange:function(){var _=(0,X.Z)(Te().mark(function J(G){var O,ie;return Te().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!(G&&["departments","posts"].includes(se))){$.next=22;break}if($.prev=1,se!=="departments"){$.next=8;break}return $.next=5,ut(N.id);case 5:$.t0=$.sent,$.next=11;break;case 8:return $.next=10,Qe(N.id);case 10:$.t0=$.sent;case 11:O=$.t0,ie=O.data.data.path,A((0,o.sg)([(0,ae.Z)((0,ae.Z)({},N),{},{path:ie})],se==="departments"?"department":"post")[0]),Z(!1),$.next=20;break;case 17:$.prev=17,$.t1=$.catch(1),console.error("\u83B7\u53D6path\u5931\u8D25",$.t1);case 20:$.next=23;break;case 22:G&&["users"].includes(se)&&Z(!1);case 23:case"end":return $.stop()}},J,null,[[1,17]])}));return function(J){return _.apply(this,arguments)}}()},p().createElement("span",null,p().createElement(w,{store:Xe,data:N,type:se,isShowRemove:at}))):p().createElement(w,{store:Xe,data:N,type:se,isShowRemove:at})},St=ot,Fe=F.Z.Panel,Zt=H=>{var Ae=H.showTips,ve=Ae===void 0?!1:Ae,it=H.showToolTip,se=it===void 0?!1:it,Xe=H.isCollapseTree,he=Xe===void 0?!1:Xe,at=H.isShowRemove,Me=at===void 0?!0:at,ye=H.collapseProps,l=ye===void 0?{showExpandArrow:!0,expandIconPosition:"right",ghost:!0}:ye,Z=H.store,f=Z===void 0?{departments:[],posts:[],users:[],groups:[],clusters:[],roles:[],setGroups:()=>{},setUsers:()=>{},setClusters:()=>{},setRoles:()=>{},setDepartments:()=>{},setPosts:()=>{}}:Z,z=H.t,N=(0,C.useState)({departments:[],posts:[]}),A=(0,S.Z)(N,2),W=A[0],_=A[1];(0,C.useEffect)(()=>{_(O=>te()(O,{departments:{$set:(0,o.sg)(f.departments,"department")}}))},[f.departments]),(0,C.useEffect)(()=>{_(O=>te()(O,{posts:{$set:(0,o.sg)(f.posts,"post")}}))},[f.posts]);var J=O=>{var ie=O.key,de=O.data,$={fontSize:"16px",marginRight:"8px",cursor:"pointer",color:"#C0C3CD"};return p().createElement("div",{className:"render-department-post"},de.map(K=>p().createElement("div",{key:K.id,className:"department-post-wrapper ".concat(K.have_auth==="true"?"inline":"")},K.have_auth==="true"?p().createElement(St,{store:f,data:K,type:ie,showToolTip:se,isShowRemove:Me}):p().createElement("div",{className:"render-parent"},K.isExpand?p().createElement(c.Z,{style:$,onClick:()=>G(K,ie)}):p().createElement(m.Z,{style:$,onClick:()=>G(K,ie)}),ie==="departments"?p().createElement(g.Z,{type:K.source_type,name:K.name,value:K.id,dataType:"departmentName"}):K.name),Array.isArray(K.sub_list)&&K.sub_list.length&&K.isExpand?p().createElement("div",{className:"render-child"},K.sub_list.map(Ue=>p().createElement(St,{store:f,data:Ue,key:Ue.id,type:ie,showToolTip:se,isShowRemove:Me}))):null)))},G=(O,ie)=>{if(ie==="departments"){var de=n()(f.departments).map(K=>(K.id===O.id&&(K.isExpand=!K.isExpand),K));f.setDepartments(de)}else if(ie==="posts"){var $=n()(f.posts).map(K=>(K.id===O.id&&(K.isExpand=!K.isExpand),K));f.setPosts($)}};return p().createElement("div",{className:"cl-user-selector-selected-body ".concat(ve?"cl-user-selector-selected-body-tips":"")},p().createElement(F.Z,(0,pe.Z)({defaultActiveKey:he?[]:["1","2","3","4","5","6"]},l),Array.isArray(f.users)&&f.users.length?p().createElement(Fe,{header:z("personal.user"),key:"1",showArrow:l.showExpandArrow},f.users.map(O=>p().createElement(St,{store:f,data:O,key:O.id,type:"users",showToolTip:se,isShowRemove:Me}))):null,Array.isArray(f.departments)&&f.departments.length?p().createElement(Fe,{header:z("common.departmentLabel"),key:"2",showArrow:l.showExpandArrow,collapsible:!0},J({key:"departments",data:W.departments})):null,Array.isArray(f.posts)&&f.posts.length?p().createElement(Fe,{header:z("authentication.position"),key:"3",showArrow:l.showExpandArrow,collapsible:!0},J({key:"posts",data:W.posts})):null,Array.isArray(f.groups)&&f.groups.length?p().createElement(Fe,{header:z("component.userGroup"),key:"4",showArrow:l.showExpandArrow,collapsible:!0},f.groups.map(O=>p().createElement(w,{store:f,type:"groups",data:O,key:O.id,isShowRemove:Me}))):null,Array.isArray(f.clusters)&&f.clusters.length?p().createElement(Fe,{header:z("component.useCluster"),key:"5",showArrow:l.showExpandArrow},f.clusters.map(O=>p().createElement(w,{store:f,type:"clusters",data:O,key:O.id,isShowRemove:Me}))):null,Array.isArray(f.roles)&&f.roles.length?p().createElement(Fe,{header:z("searchInputPlaceholder.roles"),key:"6",showArrow:l.showExpandArrow},f.roles.map(O=>p().createElement(w,{store:f,type:"roles",data:O,key:O.id,isShowRemove:Me}))):null))};Zt.defaultProps={store:{users:[],departments:[],posts:[],clusters:[],groups:[],roles:[],setGroups:()=>{},setUsers:()=>{},setClusters:()=>{},setRoles:()=>{},setDepartments:()=>{},setPosts:()=>{}},showTips:!1,showToolTip:!1,isExpand:!1,isCollapseTree:!1,isShowRemove:!0};var tt=(0,i.Z)()(Zt)},93212:function(yt,me,e){"use strict";e.d(me,{XB:function(){return s},GU:function(){return C},sg:function(){return p},z8:function(){return x}});var pe=e(50361),S=e.n(pe),s=(t,n,c)=>{var m={key:c?c.level:n,name:c?"level":"id"},i=F(t),o=(g,j)=>{g.forEach((P,T)=>{P[m.name]===j&&g.splice(T,1),P.sub_list&&P.sub_list.length&&o(P.sub_list,j)})},a=g=>{var j=S()(g);return j.forEach((P,T)=>{P.have_auth==="false"&&P.sub_list&&P.sub_list.length===0&&j.splice(T,1)}),j};o(i,m.key);var B=a(i);return B},F=t=>{var n=S()(t);return n.forEach(c=>{c.level=[c.id].join("&"),Array.isArray(c.sub_list)&&c.sub_list.length&&c.sub_list.forEach(m=>{m.level=[c.id,m.id].join("&")})}),n},C=t=>{var n=S()(t),c=[];return n.forEach(m=>{c.push({id:m.id,sub_list:m.sub_list&&m.sub_list.map(i=>({id:i.id}))})}),c},p=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0,m=S()(n)||[],i=o=>{var a=[];if(Array.isArray(o.path)&&o.path.length){var B=[],g=o.path.map(j=>j.id||j.key);g.includes(o.id||o.key)?B=o.path:B=[...o.path,o],c==="department"?a=[{department_ids:B.map(j=>j.id||j.key).join("/"),department_names:B.map(j=>j.name||j.title).join("/"),source_type:o.source_type}]:c==="post"&&(a=[{post_ids:B.map(j=>j.id||j.key).join("/"),post_names:B.map(j=>j.name||j.title).join("/")}])}return a};return m.forEach(o=>{o.level=[o.id].join("&"),o.path=i(o),Array.isArray(o.sub_list)&&o.sub_list.length&&o.sub_list.forEach(a=>{a.level=[o.id,a.id].join("&"),a.path=i(a)})}),m},x=t=>{var n=[],c=m=>{m.forEach(i=>{n.push(i),Array.isArray(i.sub_list)&&i.sub_list.length&&c(i.sub_list)})};return c(t),n},te=t=>{var n=[cloneDeep(t)],c=m=>{m.forEach(i=>{i.path=[...i.path,{id:i.id,name:i.name,source_type:i.source_type}],Array.isArray(i.sub_list)&&i.sub_list.length&&c(i.sub_list)})};return c(n),n}},59676:function(yt,me,e){"use strict";e.d(me,{Z:function(){return ye}});var pe=e(57361),S=e(88986),s=e(33565),F=e(9754),C=e.n(F),p=e(12924),x=e.n(p),te=e(50361),t=e.n(te),n=e(45578),c=e.n(n),m=e(91768),i=e(7145),o=e.n(i),a=e(28216),B=e(37055),g=e(10237),j=function(Z,f){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,N="";return Z==="department"?N=z?"https://55ce2acf-537b-41f2-922f-d8388e98d090.mock.pstmn.io/department":B.ZP.choose.department():Z==="post"&&(N=z?"https://55ce2acf-537b-41f2-922f-d8388e98d090.mock.pstmn.io/post":B.ZP.choose.post()),g.WY.get({url:N,params:f})},P=l=>{var Z=l.originData,f=l.mapData,z=l.businessType,N=[];return Z.length===0?[]:(Z.forEach(A=>{var W={path:A.path?A.path[0]:[],position:A.position};z==="department"&&(W.source_type=A.source_type);for(var _ in f)f.hasOwnProperty(_)&&(W[_]=A[f[_]]);N.push(W)}),N)},T=l=>{var Z=l.originData,f=l.mapData,z=l.businessType,N=[];return Z.length===0?[]:(Z.forEach(A=>{var W={path:A.path,position:A.position,have_auth:A.have_auth};z==="department"&&(W.source_type=A.source_type);for(var _ in f)f.hasOwnProperty(_)&&(W[f[_]]=A[_]);N.push(W)}),N)},w=l=>{var Z=l.originData,f=l.mapData,z=l.businessType,N=l.isFirst,A=N===void 0?!1:N,W=l.haveAuth,_=W===void 0?!1:W,J=l.isOnlyPost,G=J===void 0?!1:J,O=l.checkList,ie=O===void 0?[]:O,de=l.checkedKey,$=de===void 0?"":de,K=[];if(Z.length===0)return[];Z.forEach(ue=>{var ze={isLeaf:ue.have_sub_node==="false"||!1,disabled:_?ue.have_auth==="false":!1,path:ue.path||[],have_sub_node:ue.have_sub_node,have_auth:ue.have_auth};z==="post"&&G&&(ze.disabled=ue.source_type==="post_group"),z==="department"&&(ze.source_type=ue.source_type);for(var oe in f)f.hasOwnProperty(oe)&&(ze[oe]=ue[f[oe]]);K.push(ze)}),K.forEach(ue=>{ue.position=ue.key,ue.parentId=0,A&&(ue.path=[(0,S.Z)({},ue)])});var Ue=M({treeData:K,checkList:ie,checkedKey:$});return Ue},M=l=>{var Z=l.treeData,f=Z===void 0?[]:Z,z=l.checkList,N=z===void 0?[]:z,A=t()(f);if(A.length===0)return f;var W=N.map(J=>J.key),_=J=>{J.forEach(G=>{Array.isArray(W)&&W.length?G.isLeaf=W.includes(G.key)||G.have_sub_node==="false":G.isLeaf=G.have_sub_node==="false"||!1,Array.isArray(G.children)&&G.children.length&&_(G.children)})};return _(A),A},ce=e(13254),ae=e(14277),X=e(62029),Le=e(81211),Ie=e(48479),be=e(11520),Te=e(32157),ke=e(75869),we=e(60667),ut=l=>{var Z=l.checkedList,f=l.selectedKeys,z=l.onExpand,N=l.expandedKeys,A=l.businessType,W=l.multiple,_=l.searching,J=l.onSelect,G=l.onCheck,O=l.loadData,ie=l.treeData,de=l.prefixCls,$=l.checkable,K=l.selectable,Ue=l.showLine,ue=l.titleWrap,ze=(0,Le.Z)(l,["checkedList","selectedKeys","onExpand","expandedKeys","businessType","multiple","searching","onSelect","onCheck","loadData","treeData","prefixCls","checkable","selectable","showLine","titleWrap"]),oe=We=>x().createElement("div",{className:"".concat(de,"_title ").concat(ue?"":"".concat(de,"_wrap"))},A==="department"?x().createElement(we.Z,{type:We.source_type,name:We.title,value:We.key,dataType:"departmentName"}):We.title);return x().createElement("div",{className:"".concat(de," ").concat(_?"".concat(de,"_display_none"):"")},x().createElement(ke.Z,(0,X.Z)({showLine:Ue,checkedKeys:Z,selectedKeys:f,checkable:$,selectable:!$||K,loadData:O,treeData:ie,multiple:W,titleRender:oe,onCheck:G,onSelect:J,checkStrictly:!0,onExpand:z,expandedKeys:N},ze)))};ut.defaultProps={prefixCls:"select-tree-data",checkable:!0,selectable:!1,multiple:!1,showLine:!0,checkedList:[],titleWrap:!1,searching:!1,businessType:"department",loadData:()=>{},onCheck:()=>{},onSelect:()=>{}};var Qe=(0,m.Z)()(ut),Ce=e(20228),ot=e(11382),St=e(88983),Fe=e(47933),Zt=e(63185),tt=e(9676),H=e(246),Ae=e.n(H),ve=l=>{var Z=l.checkedList,f=l.titleWrap,z=l.businessType,N=l.onSelect,A=l.loadMore,W=l.searchHasMore,_=l.searchLoading,J=l.multiple,G=l.searchData,O=l.prefixCls,ie=l.searching,de=l.checkable,$=l.selectedKeys,K=l.onRadioSelect,Ue=oe=>x().createElement("div",{className:"".concat(O,"_title ").concat(f?"":"".concat(O,"_wrap"))},z==="department"?x().createElement(we.Z,{type:oe.source_type,name:oe.title,value:oe.key,dataType:"departmentName"}):oe.title),ue=(oe,We)=>{N(oe,We)},ze=oe=>{K(oe)};return x().createElement("div",{className:"".concat(O," ").concat(ie?"":"".concat(O,"_display_none"))},x().createElement(Ae(),{initialLoad:!1,pageStart:0,loadMore:A,hasMore:!_&&W,useWindow:!1,threshold:100},(de||J)&&G.map((oe,We)=>x().createElement("div",{className:"".concat(O,"_checkbox"),key:We.toString()},x().createElement(tt.Z,{onChange:mt=>ue(mt,oe),disabled:oe.disabled,checked:Z.findIndex(mt=>mt.key===oe.key)>-1},Ue(oe)))),!de&&!J&&x().createElement(Fe.ZP.Group,{onChange:ze,value:$[0]},G.map((oe,We)=>x().createElement("div",{className:"".concat(O,"_checkbox"),key:We.toString()},x().createElement(Fe.ZP,{value:oe.key,disabled:oe.disabled,data:oe},Ue(oe))))),_&&W&&x().createElement("div",{className:"".concat(O,"_loading")},x().createElement(ot.Z,null))))};ve.defaultProps={prefixCls:"search-tree-data",checkedList:[],searching:!1,searchHasMore:!1,searchLoading:!1,titleWrap:!1,checkable:!0,multiple:!1,selectedKeys:[],businessType:"department",onSelect:()=>{},onRadioSelect:()=>{},loadMore:()=>{}};var it=(0,m.Z)()(ve),se=l=>{var Z=l.onChecked,f=l.onSearchMore,z=l.onSearch,N=l.onExpand,A=l.expandedKeys,W=l.checkList,_=l.businessType,J=l.selectedKeys,G=l.multiple,O=l.searching,ie=l.treeData,de=l.hasSearch,$=l.loading,K=l.searchData,Ue=l.searchHasMore,ue=l.searchLoading,ze=l.onSelectNodes,oe=l.loadData,We=l.searchWidth,mt=l.searchPlaceholder,At=l.style,Rt=l.active,wt=l.showSearch,Dt=l.t,Je=(0,Le.Z)(l,["onChecked","onSearchMore","onSearch","onExpand","expandedKeys","checkList","businessType","selectedKeys","multiple","searching","treeData","hasSearch","loading","searchData","searchHasMore","searchLoading","onSelectNodes","loadData","searchWidth","searchPlaceholder","style","active","showSearch","t"]),Ge=null,ft=(Pe,qe)=>{var _e=qe.node.key,Ne=[...W,...qe.checkedNodes];if(!qe.checked){var st=Ne.findIndex(It=>It.key===_e);Ne.splice(st,1)}Z(c()(Ne,"key"),_e,qe.checked)},Ve=(Pe,qe)=>{var _e=Pe.target.checked,Ne=t()(W),st=Ne.findIndex(It=>It.key===qe.key);_e?st===-1&&Ne.push(qe):st>-1&&Ne.splice(st,1),Z(Ne,qe.key,_e)},bt=Pe=>{var qe=Pe.target.data,_e=[{key:qe.key,title:qe.title}];ze(_e)},Pt=()=>{f()},pt=(Pe,qe)=>{var _e=qe.selected,Ne=qe.node,st=t()(J);if(G){var It=st.findIndex(Mt=>Mt.key===Ne.key);_e?It===-1&&st.push((0,S.Z)({},Ne)):It>-1&&st.splice(It,1)}else st=[(0,S.Z)({},Ne)];ze(st)};return(0,p.useEffect)(()=>{(_==="department"||_==="post")&&Ge&&Ge.clear()},[_,Rt,wt]),x().createElement("div",{className:"all-select-out",style:At},de&&x().createElement("div",{className:"all-select-out_input"},x().createElement(Ie.Z,{width:We?"".concat(We,"px"):"100%",placeholder:mt,onSearch:z,onRef:Pe=>Ge=Pe})),x().createElement("div",{className:"all-select-out_tree ".concat(de?"all-select-out_has_search":"")},$&&x().createElement(be.Z,{fullScreen:!1}),ie.length>0&&x().createElement(Qe,(0,X.Z)({searching:O,treeData:ie,multiple:G,businessType:_,selectedKeys:J.map(Pe=>Pe.key),checkedList:W.map(Pe=>Pe.key),onExpand:N,expandedKeys:A,loadData:oe,onCheck:ft,onSelect:pt},Je)),x().createElement(it,(0,X.Z)({searching:O,searchData:K,checkedList:W,multiple:G,selectedKeys:J.map(Pe=>Pe.key),searchHasMore:Ue,searchLoading:ue,businessType:_,onSelect:Ve,onRadioSelect:bt,loadMore:Pt},Je)),!$&&(!O&&ie.length===0||O&&K.length===0)&&x().createElement("div",{className:"all-select-out_tree_no_data"},x().createElement(ae.Z,{description:Dt("lineClassStudy.noResult")}))))};se.defaultProps={style:{},checkable:!0,selectable:!1,showLine:!0,multiple:!1,hasSearch:!0,searchPlaceholder:"Search",searchWidth:200,searchConfig:{},titleWrap:!1,treeData:[],checkList:[],selectedKeys:[],searchData:[],searchHasMore:!1,searchLoading:!1,loading:!1,showSearch:!1,businessType:"department",active:"",onSearch:()=>{},onChecked:()=>{},onSearchMore:()=>{},onSelectNodes:()=>{},loadData:()=>{}};var Xe=(0,m.Z)()(se),he=l=>{var Z=l.businessType,f=l.filterAuth,z=l.receiveFields,N=l.hasCheckList,A=l.returnFields,W=l.showSearch,_=l.onCheck,J=l.onSelect,G=l.checkable,O=l.titleWrap,ie=l.searchWidth,de=l.style,$=l.businessStyle,K=l.isOnlyPost,Ue=l.haveAuth,ue=l.multiple,ze=l.active,oe=l.appType,We=l.t,mt={page_number:1,page_size:1e4,filter_auth:f,source_type:oe==="wx_app"?"wx_sync":""},At=(0,p.useState)(!0),Rt=(0,s.Z)(At,2),wt=Rt[0],Dt=Rt[1],Je=(0,p.useState)([]),Ge=(0,s.Z)(Je,2),ft=Ge[0],Ve=Ge[1],bt=(0,p.useState)([]),Pt=(0,s.Z)(bt,2),pt=Pt[0],Pe=Pt[1],qe=(0,p.useState)(""),_e=(0,s.Z)(qe,2),Ne=_e[0],st=_e[1],It=(0,p.useState)([]),Mt=(0,s.Z)(It,2),_t=Mt[0],Gt=Mt[1],aa=(0,p.useState)([]),$t=(0,s.Z)(aa,2),Vt=$t[0],Kt=$t[1],sa=(0,p.useState)(!1),Yt=(0,s.Z)(sa,2),ra=Yt[0],Bt=Yt[1],na=(0,p.useState)(!1),Ht=(0,s.Z)(na,2),oa=Ht[0],Qt=Ht[1],la=(0,p.useState)(!1),ca=(0,s.Z)(la,2),ia=ca[0],pa=ca[1],da=(0,p.useState)(t()((0,S.Z)((0,S.Z)({},mt),{},{page_size:50}))),ua=(0,s.Z)(da,2),Ot=ua[0],Nt=ua[1],ma=(0,p.useState)([]),jt=(0,s.Z)(ma,2),Xt=jt[0],Ft=jt[1];(0,p.useEffect)(()=>{var y=qt(N,A,Z);Gt(h=>o()(h,{$set:y})),Pe(h=>o()(h,{$set:y}))},[N,A,Z]),(0,p.useEffect)(()=>{Ve([]),Jt(),(Z==="department"||Z==="post")&&va()},[Z,ze]);var Jt=()=>{Bt(!1),Qt(!1),Nt(t()((0,S.Z)((0,S.Z)({},mt),{},{page_size:50}))),Kt([]),Ft([])};(0,p.useEffect)(()=>{W&&Jt()},[W]);var qt=(y,h,E)=>{var I=P({originData:y||[],mapData:h,businessType:E});return I},va=function(){var y=(0,pe.Z)(C().mark(function h(){var E,I,b,le,xe,re;return C().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return E=qt(N,A,Z),Dt(!0),V.next=4,ea();case 4:I=V.sent,Dt(!1),b=I.dept_page,le=I.post_page,xe=Z==="post"?le:b,re=w({originData:xe.list,mapData:z,businessType:Z,isFirst:!0,haveAuth:Ue,isOnlyPost:K,checkList:E,checkedKey:Ne}),Ve(re);case 10:case"end":return V.stop()}},h)}));return function(){return y.apply(this,arguments)}}(),ea=function(){var y=(0,pe.Z)(C().mark(function h(E){var I,b,le;return C().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return I=t()(mt),E&&(Z==="department"&&(I.department_id=E),Z==="post"&&(I.post_id=E)),re.next=4,j(Z,I,!1);case 4:if(b=re.sent,b.data.code!=="200000"){re.next=8;break}return le=b.data.data,re.abrupt("return",le);case 8:return re.abrupt("return",[]);case 9:case"end":return re.stop()}},h)}));return function(E){return y.apply(this,arguments)}}(),ta=(y,h,E)=>y.map(I=>I.key===h?(0,S.Z)((0,S.Z)({},I),{},{children:E}):I.children?(0,S.Z)((0,S.Z)({},I),{},{children:ta(I.children,h,E)}):I),ha=y=>{var h=y.key,E=y.children,I=y.path,b=y.disabled;return new Promise(le=>{if(E){le();return}var xe=pt.map(V=>V.key),re=xe.includes(h),Ze=t()(pt);ea(h).then(V=>{var De=V.post_page,Re=V.dept_page,$e=Z==="post"?De:Re,Ye=t()($e.list),Ke=w({originData:Ye,mapData:z,businessType:Z,haveAuth:Ue,isOnlyPost:K,checkList:pt,checkedKey:Ne});Ke.forEach(Be=>{var dt=[(0,S.Z)({},Be)];Be.parentId=h,Be.path=[...I,...dt],re&&b&&(Be.disabled=!0)}),G&&re&&b&&Pe(c()([...Ze,...Ke],"key"));var fe=t()(ft),lt=ta(fe,h,Ke);Ve(lt),le()})})},zt=function(){var y=(0,pe.Z)(C().mark(function h(E){var I,b,le,xe,re,Ze,V,De,Re,$e,Ye=arguments;return C().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return I=Ye.length>1&&Ye[1]!==void 0?Ye[1]:!1,b=t()(E),le=I?[]:t()(Vt),fe.next=5,j(Z,b,!1);case 5:xe=fe.sent,xe.data.code==="200000"&&(re=xe.data.data,Ze=re.post_page,V=re.dept_page,De=Z==="post"?Ze:V,Dt(!1),Qt(De.has_next_page==="true"),pa(!1),Re=De.list,$e=w({originData:Re,mapData:z,businessType:Z,haveAuth:Ue}),Kt([...le,...$e]));case 7:case"end":return fe.stop()}},h)}));return function(E){return y.apply(this,arguments)}}(),ga=y=>{if(Bt(y!==""),Kt([]),y!==""){Dt(!0);var h=t()(Ot);h.page_number=1,h.keyword=y,Nt(h),zt(h,!0)}else{var E=t()(Ot);E.keyword="",E.page_number=1,Nt(E),Bt(!1)}},ya=(y,h,E)=>{Pe(y),st(h);var I=T({originData:y,mapData:A,businessType:Z}),b=t()(Xt);E&&(b=b.filter(le=>le!==h)),Ft(b),_(I,h,E)},r=()=>{pa(!0);var y=t()(Ot);y.page_number+=1,Nt(y),zt(y)},k=y=>{Gt(y);var h=T({originData:y,mapData:A,businessType:Z});J(c()(h,A.key))},q=()=>{var y="search";return Z==="department"&&(y=We("component.departSearch")),Z==="post"&&(y=We("component.postSearch")),y},Q=y=>{Ft(y)};return(0,p.useEffect)(()=>{var y=M({treeData:ft,checkList:pt,checkedKey:Ne});Ve(y)},[pt,$]),x().createElement("div",{className:"tree-business",style:$},x().createElement(Xe,{style:de,searchConfig:Ot,loading:wt,checkable:G,selectable:!G,treeData:ft,searchPlaceholder:q(),checkList:pt,selectedKeys:_t,searchData:Vt,searching:ra,multiple:ue,showSearch:W,active:ze,searchWidth:ie,searchHasMore:oa,searchLoading:ia,titleWrap:O,businessType:Z,onExpand:Q,expandedKeys:Xt,onSearch:ga,loadData:ha,onChecked:ya,onSearchMore:r,onSelectNodes:k}))};he.defaultProps={style:{},businessStyle:{},businessType:"department",filterAuth:!0,haveAuth:!1,isOnlyPost:!1,receiveFields:{title:"name",key:"id"},returnFields:{title:"name",key:"id"},checkable:!0,multiple:!1,titleWrap:!1,active:"",showSearch:!1,searchWidth:200,hasCheckList:[],onCheck:()=>{},onSelect:()=>{}};var at=l=>({appType:l.user.appType}),Me=(0,a.$j)(at)((0,m.Z)()(he)),ye=Me},37824:function(yt,me,e){"use strict";e.r(me);var pe=e(49111),S=e(19650),s=e(57663),F=e(71577),C=e(88983),p=e(47933),x=e(57361),te=e(34792),t=e(48086),n=e(33565),c=e(9754),m=e.n(c),i=e(12924),o=e.n(i),a=e(7145),B=e.n(a),g=e(85372),j=e(61066),P=e(93212),T=e(37055),w=e(10237),M={chooseResult:T.ZP.choose.chooseResult},ce=()=>{var ae=(0,i.useState)("modal"),X=(0,n.Z)(ae,2),Le=X[0],Ie=X[1],be=(0,i.useState)(!1),Te=(0,n.Z)(be,2),ke=Te[0],we=Te[1],ut=(0,i.useState)(1),Qe=(0,n.Z)(ut,2),Ce=Qe[0],ot=Qe[1],St=(0,i.useState)(["user","scope"]),Fe=(0,n.Z)(St,2),Zt=Fe[0],tt=Fe[1],H=(0,i.useState)(["department","post","group","cluster","role"]),Ae=(0,n.Z)(H,2),ve=Ae[0],it=Ae[1],se=(0,i.useState)(["immediate","import"]),Xe=(0,n.Z)(se,2),he=Xe[0],at=Xe[1],Me=(0,i.useState)([]),ye=(0,n.Z)(Me,2),l=ye[0],Z=ye[1],f=(0,i.useState)([]),z=(0,n.Z)(f,2),N=z[0],A=z[1],W=(0,i.useState)([]),_=(0,n.Z)(W,2),J=_[0],G=_[1],O=(0,i.useState)([]),ie=(0,n.Z)(O,2),de=ie[0],$=ie[1],K=(0,i.useState)([]),Ue=(0,n.Z)(K,2),ue=Ue[0],ze=Ue[1],oe=(0,i.useState)([]),We=(0,n.Z)(oe,2),mt=We[0],At=We[1],Rt=()=>{(Array.isArray(N)&&N.length||Array.isArray(J)&&J.length)&&w.WY.post({url:M.chooseResult(),data:{plan_id:"100",dept_list:(0,P.GU)(N),post_list:(0,P.GU)(J)}}).then(Je=>{var Ge=Je.data.code;Ge==="200000"&&t.default.success("\u90E8\u95E8\u5C97\u4F4D\u6570\u636E\u63D0\u4EA4\u6210\u529F")})},wt=function(){var Je=(0,x.Z)(m().mark(function Ge(){var ft,Ve,bt,Pt,pt,Pe;return m().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,w.WY.get({url:M.chooseResult(),params:{plan_id:"100"}});case 2:ft=_e.sent,Ve=ft.data,bt=Ve.code,Pt=Ve.data,bt==="200000"&&(pt=Pt.dept_node_infos,Pe=Pt.post_node_infos,pt&&A(Ne=>B()(Ne,{$set:pt})),Pe&&G(Ne=>B()(Ne,{$set:Pe})));case 5:case"end":return _e.stop()}},Ge)}));return function(){return Je.apply(this,arguments)}}(),Dt=Je=>{var Ge=Je.target.value;ot(Ge);var ft={1:{tabs:["user","scope"],scopeList:["department","post","group","cluster","role"],chooseUserList:["immediate","import"]},2:{tabs:["scope"],scopeList:["department","post"],chooseUserList:[]},3:{tabs:["user"],scopeList:[],chooseUserList:["immediate","import"]},4:{tabs:["user"],scopeList:[],chooseUserList:["immediate"]},5:{tabs:["user","scope"],scopeList:["department"],chooseUserList:["immediate","import"]},6:{tabs:["scope"],scopeList:["post"],chooseUserList:[]},7:{tabs:["scope"],scopeList:["group"],chooseUserList:[]}},Ve=ft[Ge];it(Ve.scopeList),tt(Ve.tabs),at(Ve.chooseUserList)};return(0,i.useEffect)(()=>{Z([]),A([]),$([]),G([]),At([]),ze([])},[ve,Zt,he]),(0,i.useEffect)(()=>{wt()},[]),o().createElement("div",{className:"user-selector-demo",style:{padding:"20px",width:"1200px"}},o().createElement(p.ZP.Group,{onChange:Dt,value:Ce},o().createElement(p.ZP,{value:1},"\u9009\u62E9\u4EBA\u5458\u3001\u5C97\u4F4D\u3001\u90E8\u95E8\u3001\u7FA4\u7EC4\u3001\u7528\u6237\u7EC4\u3001\u89D2\u8272"),o().createElement(p.ZP,{value:2},"\u9009\u62E9\u90E8\u95E8\u3001\u5C97\u4F4D"),o().createElement(p.ZP,{value:3},"\u9009\u62E9\u4EBA\u5458(\u5355\u9009)"),o().createElement(p.ZP,{value:4},"\u53EA\u9009\u62E9\u4EBA\u5458"),o().createElement(p.ZP,{value:5},"\u9009\u62E9\u4EBA\u5458\u3001\u90E8\u95E8"),o().createElement(p.ZP,{value:6},"\u53EA\u9009\u5C97\u4F4D\u4E0D\u9009\u5C97\u4F4D\u7EC4"),o().createElement(p.ZP,{value:7},"\u53EA\u9009\u7528\u6237\u7EC4")),o().createElement("div",{style:{margin:"10px 0"}},o().createElement(S.Z,null,o().createElement(F.Z,{type:"primary",onClick:()=>{we(!0),Ie("modal")}},"\u6253\u5F00\u5F39\u6846\u9009\u4EBA\u63A7\u4EF6"),o().createElement(F.Z,{type:"primary",onClick:()=>{we(!0),Ie("drawer")}},"\u6253\u5F00\u4FA7\u62C9\u9009\u4EBA\u63A7\u4EF6")),o().createElement(j.Z,{showToolTip:!0,store:{departments:N,posts:J,users:l,groups:de,clusters:ue,roles:mt,setGroups:$,setUsers:Z,setClusters:ze,setRoles:At,setDepartments:A,setPosts:G}})),o().createElement(g.Z,{showType:Le,visible:ke,onCancel:()=>we(!1),value:{departments:N,posts:J,users:l,groups:de,clusters:ue,roles:mt},tabs:Zt,scopeList:ve,chooseUserList:he,isOnlyPost:Ce===6,checkable:Ce!==3,onOk:Je=>{var Ge=Je.users,ft=Je.departments,Ve=Je.posts,bt=Je.groups,Pt=Je.clusters,pt=Je.roles;Z(Ge),A(ft),$(bt),G(Ve),At(pt),ze(Pt),we(!1)}}),o().createElement(F.Z,{type:"primary",style:{margin:"20px 0"},onClick:Rt},"\u63D0\u4EA4\u90E8\u95E8\u5C97\u4F4D\u6570\u636E"))};me.default=ce},97593:function(yt,me,e){"use strict";e.d(me,{N:function(){return te}});var pe=e(34792),S=e(48086),s=e(37055),F={examinationPlan:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(s.ZP.enterpriseId,"/plan_exam_export"),pkReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(s.ZP.enterpriseId,"/competition/report/list_export"),pkReportDetails:t=>{var n=t.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(s.ZP.enterpriseId,"/competition/user/").concat(n,"/report/list_report")},pkReportDetailsDetails:t=>{var n=t.competitionId,c=t.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(s.ZP.enterpriseId,"/competition/user/").concat(c,"/pk/").concat(n,"/list_export")},opearationReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/tutor-manager-api/v2/").concat(s.ZP.enterpriseId,"/tutor_report_data/export"),courseDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v3/").concat(s.ZP.enterpriseId,"/courses/all/export"),taskReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/report/trainArchives/exportUserTrainArchivesList"),taskReportDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(s.ZP.enterpriseId,"/user_plans_archives_detail_export"),taskReportInfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/report/trainArchives/exportUserTrainArchivesDetailList/back-end"),personalTaskReportInfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/report/trainArchives/exportUserTrainArchivesDetailListToStudent"),selfReportedReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(s.ZP.enterpriseId,"/course_archives_export"),selfReportedReportTotalDetail:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(s.ZP.enterpriseId,"/course_archives_detail_export"),exportTrainingMonthlyReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/").concat(s.ZP.enterpriseId,"/excel/exportReport"),selfReportedinfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(s.ZP.enterpriseId,"/user_course_archives_export"),authenticationReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(s.ZP.enterpriseId,"/qualification_archives_export"),authenticationReportDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(s.ZP.enterpriseId,"/qualification_archives_detail_export"),authenticationReportDetailsDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(s.ZP.enterpriseId,"/user_qualification_archives_export"),studentFilesListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/student_archives/list_export"),studentFilesDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/student_archives/detailed_export"),staffTrainingSummaryExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(s.ZP.enterpriseId,"/getStaffData"),studentExclusiveDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/student_archives/youjia_list_export"),authInfo:t=>{var n=t.enterpriseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(n,"/dazheng/exportForm")},exportStudentRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/platform_overview/learn_duration/student_export"),exportDepartmentRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/platform_overview/learn_duration/department_export"),creditRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/score/exportScoreRank"),creditRankingDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/score/exportScoreRecord"),integralRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(s.ZP.enterpriseId,"/integral/rank_export"),integralRankingDetails:t=>{var n=t.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(s.ZP.enterpriseId,"/user/").concat(n,"/integral_export")},teacherImportPoints:t=>{var n=t.lecturerId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/teacher-manage-api/v2/").concat(s.ZP.enterpriseId,"/lecture/").concat(n,"/integral_list_export")},certificateRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(s.ZP.enterpriseId,"/certificate_ranks_export"),certificateRankingDetials:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(s.ZP.enterpriseId,"/certificate_details_export"),signRecord:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/sign/export"),operationLog:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-manage-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/log/export"),zaraOperationLog:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/").concat(s.ZP.enterpriseId,"/zara/exportReport"),loginStatistic:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/userLoginIp/").concat(s.ZP.enterpriseId,"/user-detail/export"),studyProject:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/study_projects_export"),signAnalysisExport:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(s.ZP.enterpriseId,"/offline-courses/").concat(t,"/sign-analysis-export"),signAnalysisDetailExport:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(s.ZP.enterpriseId,"/offline-courses/").concat(t.id,"/sign-detail-export"),studyProjectMonitorExport:t=>{var n=t.courseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/study_projects/").concat(n,"/user_monitors_export")},studyProjectPaymentList:t=>{var n=t.projectId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/study_project/").concat(n,"/study_project_transaction_export")},study_project_transaction_export:t=>{var n=t.projectId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/study_project/").concat(n,"/study_project_transaction_export")},courseManageSend:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(s.ZP.enterpriseId,"/courses/export"),whCourseManageSend:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(s.ZP.enterpriseId,"/courses/exportV2"),liveDetail:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v1/").concat(s.ZP.enterpriseId,"/course/live/watchInfo/export"),liveDetailProject:t=>{var n=t.projectId,c=t.courseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v1/").concat(s.ZP.enterpriseId,"/study_project/").concat(n,"/course/").concat(c,"/live_monitors/export")},graphicLessonStudentData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/course/imageText/export"),graphicLessonClientData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/course/imageText/client/export"),graphicLessonTaskList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(s.ZP.enterpriseId,"/plan_exam_export"),certificate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(s.ZP.enterpriseId,"/certificates_export"),certificatePeople:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(s.ZP.enterpriseId,"/certificates/").concat(t.certificateId,"/users/export?type=").concat(t.typeStatus,"&access_token=").concat(localStorage.token),learningTaskManagement:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/plan_study_export"),learningMonitor:t=>{var n=t.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/plans/").concat(n,"/monitors_export")},learningOffline:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/plan/employeeTrain/exportLatojaMonitorDetailList"),learningQuestionnairePaper:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/investigates/").concat(t.investigateId,"/statistics_export?access_token=").concat(localStorage.token),learningRateUser:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(s.ZP.enterpriseId,"/rate_user_export"),learningWorkUserData:t=>{var n=t.operationId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/operations/").concat(n,"/user_monitors_export")},huaLaiShiWorkUserData:t=>{var n=t.operationId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/operations/").concat(n,"/user_monitors_export")},learningFaceMonitor:t=>{var n=t.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(s.ZP.enterpriseId,"/user-recognition/course/").concat(n,"/export")},learningDetailMonitor:t=>{var n=t.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(s.ZP.enterpriseId,"/user-recognition/v2/course/").concat(n,"/export")},classLearningMonitor:t=>{var n=t.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(s.ZP.enterpriseId,"/study-record/plan/").concat(n,"/export")},employeeResult:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/plan/employeeTrain/exportTrainMonitor"),employeeQuestionnairePaper:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/investigates/").concat(t.investigateId,"/statistics_export?access_token=").concat(localStorage.token),exportExamResult:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/plan/exam/exportExamResult?access_token=").concat(localStorage.token),exportAnswerList:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(s.ZP.enterpriseId,"/exams/").concat(t.examId,"/export_detail?access_token=").concat(localStorage.token),exportAnswerDetails:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(s.ZP.enterpriseId,"/exams/").concat(t.examId,"/answer_detail_export?access_token=").concat(localStorage.token),exportQuestionAnalysis:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/plan/exam/exportQuestionAnalysis?access_token=").concat(localStorage.token),exportMakeupExamMonitors:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(s.ZP.enterpriseId,"/exams/").concat(t.examId,"/makeupExam_monitors_export?access_token=").concat(localStorage.token),submitReportManagement:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v1/").concat(s.ZP.enterpriseId,"/submit/export"),exportPracticeMonitors:t=>{var n=t.practiceId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/practices/").concat(n,"/monitors/export")},exportPk_game:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(s.ZP.enterpriseId,"/competition/user/").concat(s.ZP.userId,"/list/export"),exportPkMonitor:t=>{var n=t.competitionId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(s.ZP.enterpriseId,"/competition/").concat(n,"/user/list/export")},exportPostMap:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/post_maps/").concat(t.mapId,"/users_export"),exportPowerMonitor:t=>{var n=t.abilityId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/qualifications/").concat(n,"/monitors_export")},exportQuestionnaire:t=>{var n=t.taskId,c=t.questionnaireId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/studies/").concat(n,"/investigates/").concat(c,"/statistics_export")},exportGoodsExchangeDetail:t=>{var n=t.goodsId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(s.ZP.enterpriseId,"/integral_mall/goods/").concat(n,"/export_orders")},teacherExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/teacher-manage-api/v2/").concat(s.ZP.enterpriseId,"/lecture/export"),teacherLatojaImport:t=>{var n=t.lecturerId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(s.ZP.enterpriseId,"/lecturer/").concat(n,"/latojas/export")},clueStatis:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v1/clue/clueListExport"),postTalentAssessment:t=>{var n=t.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/evaluation-api/v2/").concat(s.ZP.enterpriseId,"/export/plan/").concat(n,"/model")},offlineCrouseCheckIn:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(s.ZP.enterpriseId,"/offline-courses/").concat(t,"/sign-analysis-export"),monitorUserExport:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(s.ZP.enterpriseId,"/offline-courses/").concat(t,"/monitors-export"),evaluateAnalyzeExport:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/").concat(s.ZP.enterpriseId,"/course/").concat(t,"/evaluate-analysis/export-evaluate-info-list"),learnAbilityRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/study-power/export_learn_ability"),learnShareRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/study-power/export_share_ability"),coachAnalysisDetail:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/tutor-manager-api/v2/").concat(s.ZP.enterpriseId,"/plan/").concat(t.planId,"/tutorials/").concat(t.tutorialsId,"/evaluation_export"),offlineCourseListExport:t=>{var n=t.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(s.ZP.enterpriseId,"/plans/").concat(n,"/offline-course/list/export")},abilityModelListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/talentability/v1/").concat(s.ZP.enterpriseId,"/post/ability_model/project/export"),selectUserTemplate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/user-center-api/v2/").concat(s.ZP.enterpriseId,"/users/").concat(s.ZP.userId,"/export_address_book"),resourceSettings:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(s.ZP.enterpriseId,"/resource_classifications/export"),evaluationResultExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/talentability/v1/").concat(s.ZP.enterpriseId,"/post/download"),learningTaskCourseExport:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/plans/").concat(t,"/courses-export"),studyProjectCourseExport:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/study_projects/").concat(t,"/courses-export"),studyProjectPracticeExport:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/study_projects/").concat(t,"/practice-export"),trainingTandardsDetail:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/train-objective/v2/").concat(s.ZP.enterpriseId,"/objective/").concat(t,"/export"),trainingDemandExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(s.ZP.enterpriseId,"/training-demands/export"),exportPlan:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(s.ZP.enterpriseId,"/plans/export"),exportAnnualPlan:t=>{var n=t.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(s.ZP.enterpriseId,"/annual-plans/").concat(n,"/export")},courseDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/course_details/export"),loginDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/platform_overview/login_detail_export"),ExamDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/exam_details/export"),medalDetailsExportData:t=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(s.ZP.enterpriseId,"/medal/group/").concat(t,"/user/detail/export"),trainDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(s.ZP.enterpriseId,"/").concat(s.ZP.userId,"/train_details/export"),exportExamList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/exam-plan/export_exam_list"),exportNewExamResult:t=>{var n=t.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/exam-plan/").concat(n,"/export-user-task")},exportNewExamAnswerList:t=>{var n=t.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/exam-plan/").concat(n,"/export_student_detail")},exportNewExamAnswerListPDF:t=>{var n=t.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-export-service/v2/enterprises/").concat(s.ZP.enterpriseId,"/exams/").concat(n,"/download")},exportQuestionAnswerDetails:t=>{var n=t.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/exam-plan/").concat(n,"/export_question_answer")},exportAnswerDataList:t=>{var n=t.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/exam-plan/").concat(n,"/export-question-analysis")},exportSubmitList:t=>{var n=t.planId,c=t.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/exam-plan/").concat(n,"/user-id/").concat(c,"/export_user_submit")},exportFaceRecognitionRecord:t=>{var n=t.userId,c=t.examId,m=t.submitId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/users/").concat(n,"/exams/").concat(c,"/submit-id/").concat(m,"/export_face-info")},exportQuestionDetails:t=>{var n=t.planId,c=t.questionId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(s.ZP.enterpriseId,"/exam-plan/").concat(n,"/export-question-user-result/").concat(c)},exportPointsDetail:t=>{var n=t.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(s.ZP.enterpriseId,"/user/").concat(n,"/integral_export")},exportPointsList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(s.ZP.enterpriseId,"/integral/rank_export"),downloadPointsTemplate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(s.ZP.enterpriseId,"/integral/import/download_template"),employeeTrainReportExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/plan/employeeTrain/authority/exportTrainMonitor"),exchangeRecordListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(s.ZP.enterpriseId,"/integral_mall/goods/export_orders"),exchangeGoodRecordListExport:t=>{var n=t.goodId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(s.ZP.enterpriseId,"/integral_mall/goods/").concat(n,"/export_orders")},exportLotteryOverview:t=>{var n=t.lotteryId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(s.ZP.enterpriseId,"/lottery/").concat(n,"/prizeOverview/export")},exportLotteryDetailList:t=>{var n=t.lotteryId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(s.ZP.enterpriseId,"/lottery/").concat(n,"/prizeDetail/list/export")},taskDownLoadImport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/evaluation-api/v1/").concat(s.ZP.enterpriseId,"/evaluation/relation/download"),pointCourseDetailsExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/ydt/records/export"),exportBelleGroupUsers:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/user-center-api/v2/").concat(s.ZP.enterpriseId,"/users/").concat(s.ZP.userId,"/group/export_address_book")},C=F,p=e(10237),x=e(31457),te=t=>{var n=t.page,c=t.props,m=t.query,i=m===void 0?"":m,o=t.rest,a=t.sendType,B=a===void 0?"get":a,g=t.success,j=t.fail,P=j===void 0?"":j,T=C[n](o)+(B==="get"?i:""),w=p.WY[B];w.call(p.WY,B==="get"?{url:T}:{url:T,data:i}).then(M=>{if(T.includes("/v3/")&&M.success==="true"||M.data.code===0||M.data.code===200||M.data.code===2e5||M.data.code==="200000"||M.data.resultCode==="200"||M.data.result_code==="200")(0,x.Pp)(c),S.default.success(c.t("study.compoundSucceed")),g&&g({code:200});else{if(P){P(M);return}S.default.error(c.t("community.isError"))}})}},91648:function(yt,me,e){"use strict";e.d(me,{Z:function(){return pe}});function pe(S,s){var F,C,p,x,F;if(C="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),F=[],p=void 0,s=s||C.length,S)for(p=0;p<S;)F[p]=C[0|Math.random()*s],p++;else for(x=void 0,F[8]=F[13]=F[18]=F[23]="-",F[14]="4",p=0;p<36;)F[p]||(x=0|Math.random()*16,F[p]=C[p===19?x&3|8:x]),p++;return F.join("")}},2396:function(yt,me,e){"use strict";e.d(me,{fA:function(){return s},kh:function(){return F},kR:function(){return C},rw:function(){return x},$s:function(){return te},q_:function(){return t},QK:function(){return n}});var pe=e(6793),S={limitWords(c,m){return{rules:[{max:c,message:"\u6700\u591A\u8F93\u5165".concat(c,"\u4E2A\u5B57")},{required:!0,message:m||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},limitTagsLength(c){return{rules:[{max:c,message:"\u6700\u591A\u8F93\u5165".concat(c,"\u4E2A\u6807\u7B7E")}]}},required(c){return{rules:[{required:!0,message:c||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},requiredWithValidator(c,m){return{rules:[{required:!0,message:c||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0,validator:m}]}}},s={score:/^\+?[0-9]*$/,positiveInteger:/^[1-9]\d*$/,examScore:/^[0-9]+([.]\d{1})?$/,url:/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/,httpsUrl:/(^https):\/\/([\w.]+\/?)\S*/,tagName:/^[\s]|[ ]$/gi},F=c=>isNaN(c)||!c||!(c>=0&&c<1e3)||!s.score.test(c),C=c=>isNaN(c)||!c||!(c>-1e3&&c<1e3),p=c=>isNaN(c)||!c||!(c>=0&&c<1e3)||!s.examScore.test(c),x=(c,m)=>{for(var i=0,o=0;o<c.length;o++){var a=c.charAt(o);if(a.match(/[^\x00-\xff]/ig)!=null?i+=1:i+=.5,i>m)return o}return 0},te=c=>{for(var m=0,i=0;i<c.length;i++){var o=c.charAt(i);o.match(/[^\x00-\xff]/ig)!=null?m+=1:m+=.5}return m},t=(c,m)=>{var i=c.target.value,o=c.target.dataset.originLength;if(c.target.dataset.originLength||(o=m,c.target.dataset.originLength=o),!!o){var a=te(i);a*1<m*1?c.target.setAttribute("maxLength",m*2):c.target.setAttribute("maxLength",m)}},n=(c,m)=>{var i="";return(!c||!(0,pe.fy)(c))&&(i=m),i}}}]);
