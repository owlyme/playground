(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[5790],{4408:function(Me,pe,e){"use strict";var K=e(12924),L=e.n(K),R=e(28216),Q=e(17780),ee=e(38642),Z=y=>({userInfo:y.user}),j=y=>{var E=y.title;return(0,Q.xX)()&&setTimeout(()=>{document.title=E},0),(0,K.useEffect)(()=>{if(E&&document.title!==E&&setTimeout(()=>{document.title=E},0),(0,ee.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var c=document.querySelector(".zoom-report");c&&(c.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[E]),L().createElement(L().Fragment,null)};j.defautProps={title:""},pe.Z=(0,R.$j)(Z)(j)},67620:function(Me,pe,e){"use strict";var K=e(34792),L=e(48086),R=e(12924),Q=e.n(R),ee=e(19222),Z=e.n(ee),j=e(32407),y=e(37055),E=y.ZP.Common.editorUpload(),c="cl_editor_toolbar_default",P="cl_editor_content_default";class n extends R.Component{constructor(N){super(N);this.initEditor=()=>{this.editor=new(Z())(".".concat(this.props.toolbarCls),".".concat(this.props.contentCls)),this.editor.config.zIndex=10,this.editor.config.onfocus=()=>{var _=document.querySelector(".".concat(this.props.contentCls));_&&(_.style.minHeight=this.props.contentHeight,_.style.height="auto")},this.editor.config.onblur=()=>{var _=document.querySelector(".".concat(this.props.contentCls));_&&(_.style.height=this.props.contentHeight)},this.editor.config.menus=this.props.controls,this.editor.config.placeholder=this.props.placeholderContent||j.Z.t("component.pleaseEnterText"),this.editor.config.onchange=_=>{this.props.onChange&&this.props.onChange(_)},this.editor.config.onchangeTimeout=300,this.editor.config.uploadImgServer=E,this.editor.config.uploadImgMaxLength=5,this.editor.config.uploadImgParams={access_token:window.localStorage.getItem("token")},this.editor.config.uploadFileName="files",this.editor.config.uploadImgHooks={customInsert(_,s){var ie=s.data;ie.forEach(z=>{_(z)})}},this.editor.config.pasteTextHandle=function(_){return~_.indexOf("<!--[if gte mso 9]><xml>")||~_.indexOf("<spanyes")?"\u7C98\u8D34\u5185\u5BB9\u6709\u4E71\u7801\uFF0C\u8BF7\u4F7F\u7528ctrl+shift+v\u6765\u7C98\u8D34\u5185\u5BB9(mac\u8BF7\u4F7F\u7528command+shift+v)":_},this.editor.config.focus=!1,this.editor.config.uploadImgMaxSize=3*1024*1024,this.editor.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp"],this.editor.config.showLinkImg=!1,this.editor.config.customAlert=function(_,s){switch(s){case"success":L.default.success(_);break;case"info":L.default.info(_);break;case"warning":L.default.warning(_);break;case"error":L.default.error(_);break;default:L.default.info(_);break}},this.editor.create(),this.editor.txt.html("".concat(this.props.placeholder))},this.getHtml=()=>this.editor.txt.html(),this.getText=()=>this.editor.txt.text(),this.setHtml=_=>this.editor.txt.html(_),this.editor=null}componentDidMount(){this.initEditor()}render(){var N=this.props.toolbarCls?"".concat(this.props.toolbarCls," cl_editor_toolbar"):"".concat(c," cl_editor_toolbar"),_=this.props.contentCls?"".concat(this.props.contentCls," cl_editor_content"):"".concat(P," cl_editor_content");return Q().createElement(Q().Fragment,null,Q().createElement("div",{className:N}),Q().createElement("div",{className:_,style:{height:this.props.contentHeight,minHeight:this.props.contentHeight}}))}}n.defaultProps={controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],placeholder:"\u5185\u5BB9\u7F16\u8F91\u533A\u57DF",toolbarCls:c,contentCls:P,contentHeight:"300px",placeholderContent:""},pe.Z=n},76343:function(Me,pe,e){"use strict";var K=e(71194),L=e(57016),R=e(57361),Q=e(88986),ee=e(57663),Z=e(71577),j=e(34792),y=e(48086),E=e(9754),c=e.n(E),P=e(12924),n=e.n(P),F=e(91768),N=e(96120),_=e.n(N),s=e(24144);class ie extends P.PureComponent{constructor(){super(...arguments);this.state={src:null,crop:{unit:"%",width:80,height:80,x:10,y:10,aspect:16/9},imgBold:{},fileName:"",imgType:"image/jpg"},this.onSelectFile=W=>{if(W.target.files&&W.target.files.length>0){var U=new FileReader,b=W.target.files[0];U.addEventListener("load",()=>{this.setState({src:U.result,fileName:b.name,imgType:b.type})}),U.readAsDataURL(b)}},this.onImageLoaded=W=>{this.imageRef=W},this.onCropComplete=W=>{this.makeClientCrop(W)},this.onCropChange=W=>{this.setState({crop:W})},this.onOk=()=>{var W=this.state,U=W.imgBold,b=W.imgType,ae=new File([U],U.name,{type:b}),H=new FormData;H.append("file",ae),H.append("access_token",localStorage.getItem("token")),(0,s.ws)(H).then($=>{$.data.code===0&&(this.props.isShowMsg&&y.default.success("".concat(this.props.t("course.courseDetailCoverSuccess"))),this.handleSuccessUpload($.data))}).catch($=>{var M=this.props.onUploadFailed;M&&M({error:$,data:{fileList:[{fileName:ae.name}]}})})},this.handleSuccessUpload=W=>{var U=this.props.onOk,b=W.data,ae=b.fileNewName,H=b.server,$=b.fileName,M="".concat(H,"/").concat(ae);U({fileName:$,imgUrl:M,fileNewName:ae})},this.renderFooter=()=>{var W=this.props,U=W.prefixCls,b=W.t,ae=W.accept,H="".concat(U,"__upload");return n().createElement("div",{className:"".concat(U,"__footer")},n().createElement(Z.Z,{type:"default",className:H},b("component.reUpload"),n().createElement("input",{type:"file",multiple:!1,accept:ae,onChange:this.onSelectFile})),n().createElement(Z.Z,{type:"primary",onClick:this.onOk},b("common.ok")))}}componentDidMount(){var W=this.props,U=W.file,b=W.widthScale,ae=W.heightScale,H=this.state.crop,$=new FileReader;$.readAsDataURL(U),$.addEventListener("load",()=>{this.setState({src:$.result,crop:(0,Q.Z)((0,Q.Z)({},H),{},{aspect:b/ae}),fileName:U.name,imgType:U.type})})}getCroppedImg(W,U,b){var ae=this.state.imgType,H=this.props.quality,$=document.createElement("canvas"),M=W.naturalWidth/W.width,A=W.naturalHeight/W.height;H?($.width=U.width*M,$.height=U.height*M):($.width=U.width,$.height=U.height);var oe=$.getContext("2d");return oe.drawImage(W,U.x*M,U.y*A,U.width*M,U.height*A,0,0,$.width,$.height),new Promise((me,Te)=>{$.toBlob(he=>{if(!he){Te(new Error("Canvas is empty"));return}he.name=b,window.URL.revokeObjectURL(this.fileUrl),this.fileUrl=window.URL.createObjectURL(he),this.setState({imgBold:he}),me(this.fileUrl)},ae,H)})}makeClientCrop(W){var U=this;return(0,R.Z)(c().mark(function b(){return c().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!(U.imageRef&&W.width&&W.height)){H.next=3;break}return H.next=3,U.getCroppedImg(U.imageRef,W,U.state.fileName);case 3:case"end":return H.stop()}},b)}))()}render(){var W=this.state,U=W.crop,b=W.src,ae=this.props,H=ae.visible,$=ae.prefixCls,M=ae.onCancel;return n().createElement(L.Z,{className:$,title:"\u8C03\u6574\u5C3A\u5BF8",visible:H,footer:this.renderFooter(),width:623,onCancel:M},n().createElement("div",{className:"".concat($,"__container")},n().createElement("div",{className:"".concat($,"__container__crop")},b&&n().createElement(_(),{className:"".concat($,"__crop"),src:b,crop:U,ruleOfThirds:!0,keepSelection:!0,imageStyle:{width:"100%"},onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}))))}}ie.defaultProps={prefixCls:"img-corp-modal",visible:!1,widthScale:16,heightScale:9,sizeLimit:1,sizeLimitUnit:"MB",accept:"image/jpg,image/jpeg,image/png",isShowMsg:!1,onCancel:()=>{},onOk:()=>{}},pe.Z=(0,F.Z)()(ie)},1164:function(Me,pe,e){"use strict";var K=e(12924),L=e.n(K),R=e(76651),Q=e(38642),ee=e(91302),Z=j=>{var y=navigator.userAgent.toLocaleLowerCase(),E=localStorage.getItem("enterpriseId"),c=(0,Q.lz)(E,j.projectType),P=localStorage.getItem("dingPersonnel"),n=ee.bl.includes(P),F=j.target;function N(_){if(F==="self"&&(_.preventDefault(),R.m8.push(j.to)),n){if(j.projectType==="student"){window.location.href="".concat(c,"/").concat(j.to);return}R.m8.push(j.to);return}if(dd.version){_.preventDefault();var s="";j.to.includes("?")?s="".concat(c).concat(j.to,"&ddtab=true"):s="".concat(c).concat(j.to,"?ddtab=true"),dd.biz.util.openLink({url:s})}else y.indexOf("lark")!==-1&&(window.location.href="".concat(c).concat(j.to))}return L().createElement("a",{rel:"noreferrer",href:"".concat(j.projectType==="student"?"".concat(c).concat(j.to):"#".concat(j.to)),className:"".concat(j.wrapCls," cl-pointer"),target:y.indexOf("lark")!==-1||n?"_self":j.target||"_blank",onClick:N},j.children)};Z.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},Z.targetTo=j=>{var y=j.path,E=j.from,c=j.isExternalLink,P=c===void 0?!1:c,n=j.isAsync,F=n===void 0?!1:n,N=j.openName,_=N===void 0?"_blank":N,s=j.projectType,ie=s===void 0?"manage":s,z=j.ddTab,W=z===void 0?!0:z,U,b=localStorage.getItem("dingPersonnel"),ae=ee.bl.includes(b),H=navigator.userAgent.toLocaleLowerCase(),$=localStorage.getItem("enterpriseId"),M=(0,Q.lz)($,ie),A=localStorage.getItem("appType"),oe=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var me="";if(U=P?"":M,ae&&!P){if(ie==="student"){window.location.href="".concat(M).concat(y);return}R.m8.push(y);return}y.includes("?")?me="".concat(U).concat(y,"&ddtab=").concat(W):me="".concat(U).concat(y,"?ddtab=").concat(W),dd.biz.util.openLink({url:me})}else if(H.indexOf("lark")!==-1)U=P?"":M,window.location.href="".concat(U).concat(y);else if(A==="wx_app"&&oe&&P&&E==="imgText")U=P?"":ie==="student"?"".concat(M):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(U).concat(y)});else if(U=P?"":ie==="student"?"".concat(M):"#",F){var Te=window.open("","_blank");setTimeout(()=>{Te.location="".concat(U).concat(y)},100)}else window.open("".concat(U).concat(y),_)},pe.Z=Z},87312:function(Me,pe,e){"use strict";var K=e(12924),L=e.n(K),R=e(91768),Q=ee=>{var Z=ee.t;return L().createElement("div",{className:ee.className?"".concat(ee.className," no-result"):"no-result"},L().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1789886702513426432.png"),className:"no-data-img",alt:""}),L().createElement("p",{className:"no-data-tip"},ee.tipText||Z("common.empty")))};pe.Z=(0,R.Z)()(Q)},88311:function(Me,pe,e){"use strict";e.d(pe,{Z:function(){return ve}});var K=e(62029),L=e(47673),R=e(4107),Q=e(33565),ee=e(57361),Z=e(34792),j=e(48086),y=e(88986),E=e(43358),c=e(34041),P=e(18106),n=e(88108),F=e(9754),N=e.n(F),_=e(12924),s=e.n(_),ie=e(91768),z=e(77043),W=e.n(z),U=e(20228),b=e(11382),ae=e(18721),H=e.n(ae),$=e(51975),M=e(37055),A={breadNav:[{value:"",label:""}],checkOne:()=>{},checkAll:()=>{},nextLevel:()=>{},changeLevel:()=>{}},oe=s().createContext(A),me={searchResult:[],deptList:[],groupList:[],postList:[],deptUser:[],groupUser:[],postUser:[],clusterList:[],classList:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],initTypeList:()=>{},initTypeUser:()=>{},toggleDisplayItem:()=>{},toggleDisplayList:()=>{},checkListOne:()=>{},checkUserOne:()=>{},removeCheckedUser:()=>{},changeLevel:()=>{},hidePosts:!1,initHidePostsStatus:()=>{},clearSelectedAll:()=>{}},Te=s().createContext(me),he=e(36017),Ze=e(35247),Ve=e(60667);class Fe extends s().Component{constructor(){super(...arguments);this.changeLevel=(S,C,t,i)=>{S.preventDefault(),this.props.contextData.changeLevel(C,t,i)}}render(){var S=this.props.contextData.breadNav.map((C,t)=>s().createElement(Ze.Z.Item,{key:C.value},s().createElement("span",{className:"bread-nav-item",onClick:i=>this.changeLevel(i,C.value,t,!(H()(C,"authorized")&&C.authorized==="true"))},s().createElement(Ve.Z,{dataType:"departmentName",value:C.value,name:C.label,type:C.sourceType}))));return s().createElement("div",{className:"bread-nav"},s().createElement(Ze.Z,null,S))}}Fe.defaultProps={contextData:{breadNav:[]},changeLevel:()=>{}};var G=Fe,de=e(63185),ye=e(9676),Ie=e(88983),Oe=e(47933),be=e(22385),ze=e(31097),He=e(57119),je=e(84874),it=e(20136),ht=e(55241),mt=e(13062),lt=e(71230),ct=e(89032),at=e(15746),Le=e(28216),ot=e(80430),Be=e(10237);function It(){var V=CONFIG.Role.getUserManageRange();return request.get({url:V})}function nt(V){var S=M.ZP.OrgDialog.getDeptInfoUrl({departmentId:V.departmentId});return delete V.departmentId,Be.WY.get({url:S,params:V})}function De(V){var S=M.ZP.OrgDialog.getDeptUsersUrl({departmentId:V.departmentId});return delete V.departmentId,Be.WY.get({url:S,params:V})}function yt(V){var S=M.ZP.OrgDialog.getUserDetailUrl();return Be.WY.get({url:S,params:V})}function $e(V){var S=M.ZP.OrgDialog.getScopeUsersAndDeptsUrl({departmentId:V.departmentId});return delete V.departmentId,Be.WY.get({url:S,params:V})}function Ct(V){var S=M.ZP.OrgDialog.postDeleteCacheUrl({cacheId:V.cacheId});return delete V.cacheId,Be.WY.post({url:S,params:V})}var rt,vt,gt=(rt=(0,Le.$j)(V=>{var S=V.user;return{enterpriseName:S.enterpriseName}}),rt(vt=class extends s().Component{constructor(){super(...arguments);this.state={loading:!0,cardInfoFinal:this.props.cardInfo},this.renderTitle=()=>{var S=this.props,C=S.cardInfo,t=S.prefixCls,i=S.enterpriseName,v=C.source_type,h=C.user_id,a=C.name;return s().createElement("div",{className:"".concat(t,"__header")},s().createElement("div",{className:"".concat(t,"__header-name")},s().createElement(Ve.Z,{type:v,value:h,name:a,dataType:"userName"})),s().createElement("div",{className:"".concat(t,"__header-corp")},i||"/"))},this.renderContent=()=>{var S=this.props,C=S.prefixCls,t=S.t,i=this.state.cardInfoFinal,v=i.user_id,h=i.job_number,a=i.post_names,k=a===void 0?[]:a,Y=i.department_infos,J=Y===void 0?[]:Y,ue=()=>!(J instanceof Array)||J.length===0?"/":s().createElement(ot.Z,{list:J,displayAll:!0,isBlock:!0}),q=()=>!(k instanceof Array)||k.length===0?"/":k.map(X=>s().createElement("div",{key:X},X)),fe=[{lable:"ID",value:v},{lable:t("personal.jobNumber"),value:h||"/"},{lable:t("setting.postLabel"),value:q()},{lable:t("learnRecord.department"),value:ue()}];return s().createElement("div",{className:"".concat(C,"__body")},fe.map(X=>s().createElement(lt.Z,{className:"".concat(C,"__body-item"),key:X.value},s().createElement(at.Z,{className:"".concat(C,"__body-item-lable")},X.lable),s().createElement(at.Z,{className:"".concat(C,"__body-item-value")},X.value||"/"))))}}render(){var S=this.props,C=S.children,t=S.prefixCls,i=this.state,v=i.loading,h=i.cardInfoFinal;return s().createElement(ht.Z,{overlayClassName:t,placement:"rightTop",title:this.renderTitle,content:v?s().createElement("div",{className:"".concat(t,"__body")},s().createElement(b.Z,null)):this.renderContent,onVisibleChange:a=>{a&&(h.detailInfo===!1?yt({user_id:h.id}).then(k=>{this.setState({loading:!1,cardInfoFinal:(0,y.Z)((0,y.Z)((0,y.Z)({},h),k.data),{},{detailInfo:!0})})}).catch(k=>{console.error(k)}):this.setState({loading:!1}))},mouseEnterDelay:.5},C)}})||vt);gt.defaultProps={prefixCls:"user-card-popover",cardInfo:{}};var x=(0,ie.Z)()(gt),le=["cluster","class"];class Se extends s().Component{constructor(){super(...arguments);this.checkOne=S=>{S.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=S=>{S.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var S=this.props,C=S.cardInfo,t=S.type,i=S.t;return C.authorized==="false"&&t==="dept"?s().createElement(ze.Z,{title:i("orgDialog.scopedAuthorize")},s().createElement(He.Z,{style:{marginLeft:"4px"}})):null}}render(){var S=this.props,C=S.t,t=S.cardInfo,i=t===void 0?{}:t,v=S.hidePosts,h=S.type,a=S.userCount,k=null;return this.props.hasNext?(k=s().createElement("div",{className:"next-level"},!(v&&h==="post")&&a>-1?s().createElement("span",{className:"next-level-count"},"(",a,")"):null,le.includes(h)?s().createElement("span",null):s().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},s().createElement(je.Z,{iconClass:"icon-xiaji1"}),C("component.nextLevel"))),this.props.single?s().createElement("div",{className:"org-tree-item"},s().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),k):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&s().createElement("div",{className:"org-tree-item"},s().createElement(ye.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),k)):s().createElement("div",{className:"org-tree-item"},this.props.single?s().createElement(Oe.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},s().createElement(x,{cardInfo:i},this.props.title)):s().createElement(x,{cardInfo:i},s().createElement(ye.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title)))}}Se.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var Ee=(0,ie.Z)()(Se),xe=["cluster","class"];class Ue extends s().Component{constructor(){super(...arguments);this.checkOne=S=>{S.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=S=>{S.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var S=this.props,C=S.cardInfo,t=S.type,i=S.t;return C.authorized==="false"&&t==="dept"?s().createElement(ze.Z,{title:i("orgDialog.scopedAuthorize")},s().createElement(He.Z,{style:{marginLeft:"4px"}})):null}}render(){var S=this.props,C=S.t,t=S.cardInfo,i=t===void 0?{}:t,v=S.hidePosts,h=S.type,a=S.userCount,k=null;return this.props.hasNext?(k=s().createElement("div",{className:"next-level"},s().createElement("span",{className:"next-level-belle"},!(v&&h==="post")&&a>-1?s().createElement("span",{className:"next-level-count"},"(",a,")"):null,xe.includes(h)?s().createElement("span",null):s().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},s().createElement(je.Z,{iconClass:"icon-xiaji1"}),C("component.nextLevel")))),this.props.single?s().createElement("div",{className:"org-tree-item"},s().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},s().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),k):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&s().createElement("div",{className:"org-tree-item"},s().createElement(ye.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},s().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),k)):s().createElement("div",{className:"org-tree-item"},this.props.single?s().createElement(Oe.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},s().createElement(x,{cardInfo:i},s().createElement("span",{className:"org-tree-item-title"},this.props.title))):s().createElement(x,{cardInfo:i},s().createElement(ye.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},s().createElement("span",{className:"org-tree-item-title"},this.props.title))))}}Ue.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var Ge=(0,ie.Z)()(Ue),We=e(38642),we=["cluster","class"];class ke extends s().Component{constructor(S){super(S);this.checkAll=(C,t)=>{C.preventDefault(),this.props.contextData.checkAll(t)},this.getIsCheckAll=()=>{var C=[].concat(this.context["".concat(this.props.dataTypeKey,"List")],we.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")]);if(C.length===0)return!1;var t=C.findIndex(i=>!i.isChecked);return t===-1},this.renderDeptName=(C,t)=>t==="dept"?s().createElement(Ve.Z,{type:C.source_type,value:C.id,name:C.name,dataType:"departmentName"}):C.name,this.renderName=C=>s().createElement(Ve.Z,{type:C.source_type,value:C.user_id,name:C.name,dataType:"userName"}),this.state={isShowCheckAllEle:!0,whiteList:{belleFlag:(0,We.UI)("BELLE_CUSTOMER_WHITE")}}}render(){var S=this.state,C=S.isShowCheckAllEle,t=S.whiteList,i=this.props,v=i.t,h=i.dataTypeKey,a=i.disableHidden,k=i.scrollFlag,Y=this.context,J=Y.maxDeptUserCount,ue=Y.hidePosts,q=Y.onlyPost,fe=Y.onlyUser,X=Y.single,te=[],ne=this.context["".concat(this.props.dataTypeKey,"List")].map(ce=>(te.push(s().createElement("div",{className:"title-item",key:ce.id},this.renderDeptName(ce,h))),t.belleFlag&&k?s().createElement(Ge,{type:h,key:ce.id,cardInfo:ce,hasNext:!0,checkable:J&&(ce==null?void 0:ce.userCount)>J?!1:!(q&&ce.post_type==="post_group"||fe),single:X,userCount:ce.userCount,isChecked:!!ce.isChecked,itemId:ce.id,title:this.renderDeptName(ce,h),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!ce.children,hidePosts:ue,disableHidden:a}):s().createElement(Ee,{type:h,key:ce.id,cardInfo:ce,hasNext:!0,checkable:J&&(ce==null?void 0:ce.userCount)>J?!1:!(q&&ce.post_type==="post_group"||fe),single:X,userCount:ce.userCount,isChecked:!!ce.isChecked,itemId:ce.id,title:this.renderDeptName(ce,h),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!ce.children,hidePosts:ue,disableHidden:a}))),ge=[],Ne=we.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")].map(ce=>(ge.push(s().createElement("div",{className:"title-item",key:ce.id},this.renderName(ce,h))),t.belleFlag&&k?s().createElement(Ge,{key:ce.id,hasNext:!1,title:this.renderName(ce),isChecked:!!ce.isChecked,itemId:ce.id,cardInfo:ce,checkable:!(ce.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:a}):s().createElement(Ee,{key:ce.id,hasNext:!1,title:this.renderName(ce),isChecked:!!ce.isChecked,itemId:ce.id,cardInfo:ce,checkable:!(ce.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:a}))),Ke=this.getIsCheckAll(),Ye=s().createElement("div",{className:"org-tree-item"},s().createElement(ye.Z,{checked:Ke,defaultChecked:!0,onClick:ce=>this.checkAll(ce,!Ke)},v("common.all")));return s().createElement("div",{className:"".concat(this.context.oneDisplayType?"org-tree more-height":"org-tree"," ").concat(t.belleFlag&&k?"org-tree-belle":"")},!this.context.single&&this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&ne.length===0&&Ne.length>0&&C||!this.context.single&&!this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&(ne.length>0||Ne.length>0)&&C?Ye:null,t.belleFlag&&k&&s().createElement("div",{className:"belle-title-scroll"},te,ge),ne,Ne)}}ke.contextType=Te,ke.defaultProps={dataTypeKey:"dept",contextData:{},disableHidden:!1,scrollFlag:!1};var Pe=(0,ie.Z)()(ke),Ae=e(25547),Re="999",Je=1,et=["clusterList","classList"];class Xe extends s().Component{constructor(S,C){var t;super(S);t=this,this.getClusterList=()=>{var i=M.ZP.OrgDialog.getClusterList(),v={keyword:""};Be.WY.get({url:i,params:v}).then(h=>{this.context.initTypeList("clusterList","checkedCluster",h.data.data.map(a=>({name:a.name,userCount:a.user_count,id:a.id,parentId:[""]})))})},this.getClassList=()=>{this.context.initTypeList("classList","checkedClass",[{name:"\u6D4B\u8BD52",userCount:2,id:"2",parentId:[""]},{name:"\u6D4B\u8BD54",userCount:1,id:"41",parentId:[""]}])},this.flatTreeData=(i,v)=>(i.children.forEach(h=>{h.children&&(v[h.id]=h.children,this.flatTreeData(h,v))}),v),this.getDeptList=function(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise((h,a)=>{var k=t.state.cacheId;nt({departmentId:i,cache_id:k,filter_auth:v&&!t.props.filterAuthOpen}).then(Y=>{var J=Y.data.children||[];J.forEach(q=>{q.parentId=Y.data.id,q.userCount=q.user_count,q.name=q.department_name,q.all_name=s().createElement("span",null,t.state.contextData.breadNav.map(fe=>s().createElement("span",{key:fe.value},fe.label,"/")),q.department_name)});var ue=[];t.context.asyncDeptTree?ue=J:ue=t.flatTreeData(Y.data,{[Y.data.id]:J}),t.setState({deptList:ue}),t.context.initTypeList("deptList","checkedDept",J),h(Y.data)}).catch(Y=>{console.error(Y),a(Y)})})},this.getDeptUserList=function(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,h=t.state.cacheId;De({departmentId:i,cache_id:h,filter_auth:v&&!t.props.filterAuthOpen}).then(a=>{a.data&&a.data.forEach(k=>{k.name=k.user_name,k.detailInfo=!1}),t.context.initTypeUser("deptUser",a.data)}).catch(a=>{console.error(a)})},this.getGroupList=()=>{var i=M.ZP.Organization.getGroupList(),v={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Be.WY.get({url:i,params:v}).then(h=>{h.data.groups=h.data.groups||[],h.data.groups.forEach(a=>{a.parentId=this.state.contextData.breadNav.map(k=>k.value),a.userCount=a.user_count,a.name=a.group_name}),this.setState({groupList:h.data.groups}),this.context.initTypeList("groupList","checkedGroup",h.data.groups)})},this.getGroupUserList=i=>{var v=M.ZP.Organization.getGroupUserList({groupId:i}),h={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Be.WY.get({url:v,params:h}).then(a=>{a.data.users&&a.data.users.forEach(k=>{k.name=k.user_name,k.parentId=this.state.contextData.breadNav.map(Y=>Y.value)}),this.context.initTypeUser("groupUser",a.data.users)})},this.getPostList=i=>{var v=M.ZP.Organization.getPostTree(),h={filter_auth:!this.props.filterAuthOpen,post_id:i,user_type:this.context.userType};Be.WY.get({url:v,params:h}).then(a=>{a.data.posts=a.data.posts||[],a.data.posts.forEach(k=>{k.parentId=this.state.contextData.breadNav.map(Y=>Y.value),k.userCount=k.user_count,k.name=k.post_name}),this.setState({postList:a.data.posts}),this.context.initTypeList("postList","checkedPost",a.data.posts),this.context.initHidePostsStatus(a.data.hide_posts==="true")})},this.getPostUserList=i=>{var v=M.ZP.Organization.getPostUserList({postId:i}),h={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Be.WY.get({url:v,params:h}).then(a=>{a.data.users&&a.data.users.forEach(k=>{k.name=k.user_name,k.parentId=this.state.contextData.breadNav.map(Y=>Y.value)}),this.context.initTypeUser("postUser",a.data.users)})},this.getUserList=function(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;t.props.type==="dept"?t.getDeptUserList(i,v):t.props.type==="group"?t.getGroupUserList(i):t.getPostUserList(i)},this.checkOne=(i,v,h)=>{var a=this.state.checkedCount;if(v==="list"){var k=this.context[this.state.listType].find(J=>J.id===i);k.isChecked=h,k.all_name&&typeof k.all_name=="object"&&delete k.all_name,a=h?a+1:a-1,this.context.checkListOne(k,this.state.checkedListType,this.state.listType)}else if(v==="user"){var Y=this.context[this.state.checkedUserType].find(J=>J.id===i);Y.isChecked=h,a=h?a+1:a-1,this.context.checkUserOne(Y,this.state.checkedUserType)}this.updateCheckedCount(a)},this.updateCheckedCount=i=>{this.setState({checkedCount:i})},this.checkAll=function(){var i=(0,ee.Z)(N().mark(function v(h){var a,k,Y,J,ue,q,fe,X,te,ne,ge,Ne,Ke,Ye,ce;return N().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(a=t.state,k=a.contextData,Y=a.cacheId,J=[...k.breadNav].reverse(),ue=(0,Q.Z)(J,1),q=ue[0],fe=q.value,X=[...t.context[t.state.checkedListType]],te=q.authorized==="false",ne={departments:[],users:[]},!te){pt.next=12;break}return pt.next=9,$e({departmentId:fe,cache_id:Y});case 9:ge=pt.sent,Ne=ge.data,ne={departments:Ne.departments.map(_e=>(_e.isChecked=h,_e.name=_e.department_name,_e.parentId=_e.parent_ids.split("/"),_e.parentAuthorize=!1,_e.userCount=_e.user_count,_e)),users:Ne.users.map(_e=>(_e.isChecked=h,_e.name=_e.user_name,_e.parentAuthorize=!1,_e))};case 12:Ke=t.context[t.state.listType].map(_e=>{_e.isChecked=h,t.props.type!=="dept"&&X.forEach(Et=>{Et.parentId.indexOf("".concat(_e.id))!==-1&&(Et.isChecked=!1)});var Qe=X.findIndex(Et=>Et.id===_e.id);return Qe!==-1?X[Qe].isChecked=h:X.push(_e),_e}),Ye=[],t.context.checkedUser.forEach(_e=>{if(t.props.type!=="dept"){if(typeof _e.parentId!="undefined"&&_e.parentId.indexOf("".concat(fe))!==-1&&_e.parentId[_e.parentId.length-1]!==fe)return}else{var Qe=typeof _e.parentId!="undefined"?_e.parentId:_e.department_ids||[];if(Qe.indexOf(fe)!==-1)return}Ye.push(_e)}),ce=et.includes(t.state.listType)?[]:t.context[t.state.checkedUserType].map(_e=>{_e.isChecked=h;var Qe=Ye.findIndex(Et=>Et.id===_e.id);return Qe!==-1?Ye[Qe].isChecked=h:Ye.push(_e),_e}),t.context.toggleDisplayList(t.state.checkedListType,W()(ne.departments,X,"id"),t.state.listType,Ke,t.state.checkedUserType,ce,W()(ne.users,Ye,"id")),t.setState({checkedCount:h?(et.includes(t.state.listType)?0:t.context[t.state.checkedUserType].length)+t.context[t.state.listType].length:0});case 18:case"end":return pt.stop()}},v)}));return function(v){return i.apply(this,arguments)}}(),this.nextLevel=(i,v,h)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var a=[...this.state.contextData.breadNav,{value:i.id,label:v,authorized:i.authorized}];this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:a})},()=>{this.props.type==="post"?this.nextPostLevel(i.id,h):this.props.type==="dept"?this.nextDeptLevel(i.id,!(H()(i,"authorized")&&i.authorized==="true")):this.context.initTypeList("groupList","checkedGroup",[]),this.getUserList(i.id===Re?Je:i.id,!(H()(i,"authorized")&&i.authorized==="true"))})},this.nextDeptLevel=(i,v)=>{if(this.context.asyncDeptTree)this.getDeptList(i,v);else{var h=this.state.deptList[i];typeof h!="undefined"&&h.forEach(a=>{a.parentId=this.state.contextData.breadNav.map(k=>k.value),a.userCount=a.user_count,a.name=a.department_name}),this.context.initTypeList("deptList","checkedDept",h||[])}},this.nextPostLevel=(i,v)=>{if(v){var h=(0,Ae.lK)(this.state.postList,i),a=h.children.map(k=>(k.name=k.post_name,k.parentId=this.state.contextData.breadNav.concat([i]).map(Y=>Y.value),k.userCount=k.user_count,k));this.context.initTypeList("postList","checkedPost",a)}},this.changeLevel=(i,v,h)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var a=this.props.type==="group"?[this.state.contextData.breadNav[0]]:this.state.contextData.breadNav.slice(0,v+1);this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:a}),isSearch:!1},()=>{this.props.type==="dept"?this.changeDeptLevel(i,h):this.props.type==="group"?this.changeGroupLevel(i):this.props.type==="cluster"?this.getClusterList():this.props.type==="class"?this.getClassList():this.changePostLevel(i)})},this.changeDeptLevel=function(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.context.asyncDeptTree)t.getDeptList(i,v);else{var h=t.state.deptList[i];h.forEach(a=>{a.parentId=t.state.contextData.breadNav.map(k=>k.value),a.userCount=a.user_count,a.name=a.department_name}),t.context.initTypeList("deptList","checkedDept",h)}t.getDeptUserList(i===Re?Je:i,v)},this.changePostLevel=i=>{var v=i==="1"?this.state.postList:(0,Ae.lK)(this.state.postList,i).children,h=v.map(a=>(a.name=a.post_name,a.parentId=this.state.contextData.breadNav.concat([i]).map(k=>k.value),a.userCount=a.user_count,a));this.context.initTypeList("postList","checkedPost",h),i!=="1"&&this.getPostUserList(i===Re?Je:i)},this.changeGroupLevel=i=>{i||(this.context.initTypeUser("groupUser",[]),this.context.initTypeList("groupList","checkedGroup",this.state.groupList))},this.state={postList:[],deptList:[],groupList:[],clusterList:[],classList:[],contextData:{breadNav:[this.props.defaultBreadNav],checkOne:this.checkOne,checkAll:this.checkAll,nextLevel:this.nextLevel,changeLevel:this.changeLevel},checkedCount:0,listType:"".concat(this.props.type,"List"),checkedListType:"checked".concat(this.props.type.charAt(0).toUpperCase()).concat(this.props.type.substr(1)),checkedUserType:"".concat(this.props.type,"User"),isSearch:!1,searchResult:[],loadDept:!1,loadUser:!1,cacheId:C.cacheId}}componentDidMount(){this.props.type!=="group"?this.props.type==="dept"?this.getDeptList("1").then(S=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:[{value:S.id,label:S.department_name,sourceType:S.source_type,authorized:S.authorized}]})}),this.getDeptUserList("1")}):this.getPostList("1"):this.getGroupList(1),this.props.type==="cluster"&&this.getClusterList(),this.props.type==="class"&&this.getClassList()}render(){return s().createElement(oe.Provider,{value:this.state.contextData},s().createElement("div",{className:"org-display-container org-display-dept"},s().createElement(st,null),this.props.type==="dept"&&(this.state.loadDept||this.state.loadUser)?s().createElement("div",{className:"dept-loading"},s().createElement(b.Z,null)):null,s().createElement(tt,{dataTypeKey:this.props.type,disableHidden:this.props.disableHidden,scrollFlag:this.props.scrollFlag})))}}Xe.contextType=Te;var st=(0,$.l)(oe,G),tt=(0,$.l)(oe,Pe);Xe.defaultProps={defaultBreadNav:{value:"",label:"\u9177\u6E32\u79D1\u6280"},queryType:1,type:"dept",filterAuthOpen:!1,disableHidden:!1,scrollFlag:!1};var qe=Xe,dt=e(57663),ft=e(71577),Ce=e(54549);class m extends s().Component{constructor(){super(...arguments);this.removeItem=(S,C,t,i)=>{S.preventDefault(),C.isChecked=!1,i==="user"?this.context.removeCheckedUser(C):this.context.checkListOne(C,t,"".concat(i,"List"))},this.displayName=(S,C)=>{var t={user:"userName",dept:"departmentName"}[S]||"",i={user:C.unionid||C.user_id||C.userId,dept:C.id}[S]||C.id;return s().createElement(Ve.Z,{value:i,name:C.name,type:C.source_type||C.sourceType,dataType:t})},this.displayItem=S=>{var C=this.context,t=C.hidePosts,i=C.showUserCount,v="checked".concat(S.charAt(0).toUpperCase()).concat(S.substr(1)),h=this.context[v].map(a=>a.isChecked&&a.authorized!=="false"?s().createElement(ze.Z,{key:a.id,placement:"top",title:a.all_name||"",getPopupContainer:()=>document.querySelector(".checked-display-container")},s().createElement("div",{className:"display-item",key:a.id},this.displayName(S,a),S==="user"||t&&S==="post"?"":i&&a.userCount>-1?"(".concat(a.userCount,")"):"",a.reserve?null:s().createElement("span",{className:"display-item-close",onClick:k=>this.removeItem(k,a,v,S)},s().createElement(Ce.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))):null);return h},this.handleClearSelected=()=>{this.context.clearSelectedAll()}}render(){var S=this.props.t,C=["dept","group","post","user","cluster","class"].map(t=>this.displayItem(t));return s().createElement("div",{className:"checked-display-container"},s().createElement("div",{className:"checked-display-container-header"},s().createElement("span",null,S("orgDialog.selected"),":"),s().createElement(ft.Z,{type:"link",onClick:this.handleClearSelected},S("orgDialog.clearAll"))),C)}}m.contextType=Te;var g=(0,ie.Z)()(m),u=e(67222),d=e(6793),f=R.Z.Search;class I extends s().Component{constructor(S){var C;super(S);C=this,this.onChange=t=>{var i=this.props.appType,v=localStorage.getItem("qyWechatBook");if(t.preventDefault(),this.setState({value:t.target.value}),!(!t.target.value&&!this.props.showCancel)&&!this.props.disableChange){var h=i==="wx_app"&&v==="true";!(0,We.eY)("ORG_DIALOG_SEARCH")||h||(0,d.Ds)(this.debounceChange,500)()}},this.handleSearch=(t,i)=>{i.preventDefault(),!(!t&&!this.props.showCancel)&&this.extendReturn(t)},this.debounceChange=()=>{this.extendReturn(this.state.value)},this.extendReturn=function(){var t=(0,ee.Z)(N().mark(function i(v){var h,a,k,Y,J,ue,q,fe,X;return N().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(h=C.props,a=h.appType,k=h.selectType,Y=h.appId,J=localStorage.getItem("qyWechatBook"),ue="",q=a==="wx_app"&&J==="true"&&Y==="9005",!(v&&k==="user"&&q)){ne.next=17;break}return ne.prev=5,ne.next=8,(0,u.F_)(v);case 8:fe=ne.sent,X=fe.data,X.success&&(ue=X.data),ne.next=17;break;case 13:ne.prev=13,ne.t0=ne.catch(5),console.error(ne.t0),ue="";case 17:C.props.onSearch(v,ue);case 18:case"end":return ne.stop()}},i,null,[[5,13]])}));return function(i){return t.apply(this,arguments)}}(),this.state={value:""}}render(){var S=this.props,C=S.t,t=S.selectType;return s().createElement("div",{className:"top-search"},s().createElement(f,{placeholder:C(t==="user"?"component.searchStudent":t==="dept"?"component.searchDepartment":t==="post"?"component.searchPost":t==="cluster"?"component.searchCluster":t==="class"?"component.searchClass":"setting.searchGroup"),value:this.state.value,onSearch:this.handleSearch,allowClear:!0,onChange:this.onChange}))}}var D=(0,Le.$j)(V=>({appType:V.user.appType,appId:V.user.appId}))((0,ie.Z)()(I)),l=e(87312);class o extends _.Component{constructor(){super(...arguments);this.checkedAll=(S,C)=>{this.props.checkedAll(C)},this.getIsCheckedAll=()=>{var S=this.props.list,C=[].concat(S);if(C.length===0)return!1;var t=C.findIndex(i=>!i.isChecked);return t===-1},this.checkUser=(S,C)=>{C.isChecked=!C.isChecked,this.context.checkUserOne(C,"checkedUser")},this.checkSingleUser=(S,C)=>{C.isChecked=!0,this.context.checkUserOne(C,"checkedUser")},this.checkDept=(S,C)=>{C.isChecked=!C.isChecked,this.context.checkListOne(C,"checkedDept","deptList")},this.checkPost=(S,C)=>{C.isChecked=!C.isChecked,this.context.checkListOne(C,"checkedPost","postList")},this.checkGroup=(S,C)=>{C.isChecked=!C.isChecked,this.context.checkListOne(C,"checkedGroup","groupList")},this.checkedCluster=(S,C)=>{C.isChecked=!C.isChecked,this.context.checkListOne(C,"checkedCluster","clusterList")}}renderList(){var S=this.props,C=S.userListType,t=S.list,i=S.t,v=S.isSingle,h=S.hidePosts;return C==="user"&&!v?t.map(a=>s().createElement("div",{className:"search-result-item",key:a.id,onClick:k=>{this.checkUser(k,a)}},s().createElement(ye.Z,{checked:a.isChecked},s().createElement(x,{cardInfo:a},s().createElement("span",{className:"user-names"},s().createElement(Ve.Z,{dataType:"userName",value:a.user_id,name:a.user_name,type:a.source_type}))),a.department_names&&a.department_names.length>0?s().createElement("span",{className:"user-dept"},s().createElement(ot.Z,{sourceType:a.source_type,list:a.leaf_department_ids,nameList:a.department_names})):null))):C==="user"&&v?t.map(a=>s().createElement("div",{className:"search-result-item",key:a.id,onClick:k=>{this.checkSingleUser(k,a)}},s().createElement("div",{className:"user-name"},s().createElement(x,{cardInfo:a},s().createElement(Ve.Z,{dataType:"userName",value:a.user_id,name:a.user_name,type:a.source_type}))),a.department_names&&a.department_names.length>0?s().createElement("span",{className:"user-name-dept"},s().createElement(ot.Z,{sourceType:a.source_type,list:a.leaf_department_ids,nameList:a.department_names})):null)):C==="dept"?t.map(a=>s().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:k=>{this.checkDept(k,a)}},s().createElement(ye.Z,{checked:a.isChecked,className:"department-left"},s().createElement("div",{className:"department-left-department"},s().createElement("div",{className:"user-name"},s().createElement(Ve.Z,{dataType:"departmentName",value:a.id,name:a.department_name,type:a.source_type})),a.path&&a.path.length>0?s().createElement(ze.Z,{title:a.path.join(">"),mouseEnterDelay:.8},s().createElement("span",{className:"user-name-dept"},s().createElement(ot.Z,{list:a.department_infos||[],displayAll:!0}))):null)),s().createElement("div",{className:"department-right"},"(",a.userCount,i("common.userUnit"),")"))):C==="post"?t.map(a=>s().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:k=>{this.checkPost(k,a)}},s().createElement(ye.Z,{checked:a.isChecked,className:"department-left"},s().createElement("div",{className:"department-left-department"},s().createElement("div",{className:"user-name"},a.name),a.path&&a.path.length>0?s().createElement(ze.Z,{title:a.path.join(">"),mouseEnterDelay:.8},s().createElement("span",{className:"user-name-dept"},s().createElement("span",null,a.path.join(">")))):null)),!h&&s().createElement("div",{className:"department-right"},"(",a.userCount,i("common.userUnit"),")"))):C==="group"?t.map(a=>s().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:k=>{this.checkGroup(k,a)}},s().createElement(ye.Z,{checked:a.isChecked,className:"department-left"},s().createElement("div",{className:"department-left-department"},s().createElement("div",{className:"user-name"},a.name),a.path&&a.path.length>0?s().createElement(ze.Z,{title:a.path.join(">"),mouseEnterDelay:.8},s().createElement("span",{className:"user-name-dept"},s().createElement("span",null,a.path.join(">")))):null)),s().createElement("div",{className:"department-right"},"(",a.userCount,i("common.userUnit"),")"))):C==="cluster"?t.map(a=>s().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:k=>{this.checkedCluster(k,a)}},s().createElement(ye.Z,{checked:a.isChecked,className:"department-left"},s().createElement("span",{className:"user-name"},a.name)),s().createElement("div",{className:"department-right"},"(",a.userCount,i("common.userUnit"),")"))):null}render(){var S=this.props,C=S.t,t=S.isSingle,i=this.getIsCheckedAll(),v=s().createElement("div",{className:"search-result-all"},s().createElement(ye.Z,{checked:i,onClick:h=>this.checkedAll(h,!i)},C("common.all")));return s().createElement("div",{className:"search-result-container more-height"},this.props.list.length>0?s().createElement(s().Fragment,null,!t&&v,this.renderList()):s().createElement(l.Z,{tipText:C("component.searchUserEmpty")}))}}o.contextType=Te,o.defaultProps={list:[]};var r=(0,ie.Z)()(o),p=e(18329),O=e(65202),T=e(91648),w=n.Z.TabPane,B=c.Z.Option,re={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0 20px"},maskClosable:!1};class se extends s().Component{constructor(S){var C;super(S);C=this,this.onCancel=()=>{var t=this.props.onCancel;this.setState({showCancel:!1}),t&&this.props.onCancel()},this.onOk=()=>{var t=this.props.onOk,i=this.state.contextData;this.setState({showCancel:!1});var v=0;if(t){var h=[];i.checkedDept.map(q=>(v+=q.isChecked?q.user_count:0,q.isChecked&&q.authorized!=="false"?h.push((0,y.Z)((0,y.Z)({},q),{},{renderType:"dept"})):null));var a=[];i.checkedPost.map(q=>(v+=q.isChecked?q.user_count:0,q.isChecked?a.push((0,y.Z)((0,y.Z)({},q),{},{renderType:"post"})):null));var k=[];i.checkedGroup.map(q=>(v+=q.isChecked?q.user_count:0,q.isChecked?k.push((0,y.Z)((0,y.Z)({},q),{},{renderType:"group"})):null));var Y=[];i.checkedUser.map(q=>{if(!q.reserve)return v+=q.isChecked?1:0,q.isChecked?Y.push((0,y.Z)((0,y.Z)({},q),{},{renderType:"user"})):null});var J=[];i.checkedCluster.map(q=>{if(!q.reserve)return v+=q.isChecked?1:0,q.isChecked?J.push((0,y.Z)((0,y.Z)({},q),{},{renderType:"cluster"})):null});var ue=[];if(i.checkedClass.map(q=>{if(!q.reserve)return v+=q.isChecked?1:0,q.isChecked?ue.push((0,y.Z)((0,y.Z)({},q),{},{renderType:"class"})):null}),v>this.props.maxUserCount){j.default.warn(this.props.beyondLimitTip);return}t({dept:h,post:a,group:k,user:Y,cluster:J,classes:ue})}},this.getListParentId=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];i.forEach(fe=>{fe.isChecked=!0,fe.parentId=[""],fe.userCount=fe.userCount||fe.user_count||0});var Y=t.map(fe=>fe.id),J=h.map(fe=>fe.id);if(Y||J){var ue=M.ZP.OrgDialog.getDeptParent(),q={query_type:1,dept_ids:Y,user_ids:J};Be.WY.post({url:ue,data:(0,y.Z)({},q)}).then(fe=>{var X=fe.data.data;t.forEach(te=>{te.isChecked=!0;var ne=X.find(ge=>ge.id===te.id)||{path:[]};te.parentId=ne.path[0]?ne.path[0].split("/").slice(1):[],te.userCount=ne.user_count||te.userCount||te.user_count||0}),v.forEach(te=>{te.isChecked=!0;var ne=X.find(ge=>ge.id===te.id)||{path:[]};te.parentId=ne.path[0]?ne.path[0].split("/").slice(1):[],te.userCount=te.userCount||te.user_count||0}),h.forEach(te=>{te.isChecked=!0;var ne=[];X.forEach(ge=>{ge.id===te.id&&ge.path.map(Ne=>{ne.push(...Ne.split("/").slice(1))})}),te.parentId=Array.from(new Set(ne))}),a.forEach(te=>{te.isChecked=!0;var ne=X.find(ge=>ge.id===te.id)||{path:[]};te.parentId=ne.path[0]?ne.path[0].split("/").slice(1):[],te.userCount=te.userCount||te.user_count||0}),k.forEach(te=>{te.isChecked=!0;var ne=X.find(ge=>ge.id===te.id)||{path:[]};te.parentId=ne.path[0]?ne.path[0].split("/").slice(1):[],te.userCount=te.userCount||te.user_count||0}),C.setState({contextData:(0,y.Z)((0,y.Z)({},C.state.contextData),{},{checkedDept:t,checkedGroup:i,checkedPost:v,checkedUser:h,checkedCluster:a,checkedClass:k})})})}else i.length>0?C.setState({contextData:(0,y.Z)((0,y.Z)({},C.state.contextData),{},{checkedGroup:i})}):C.setState({contextData:(0,y.Z)((0,y.Z)({},C.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[]})})},this.initHidePostsStatus=t=>{var i=this.state.contextData;this.setState({contextData:(0,y.Z)((0,y.Z)({},i),{},{hidePosts:t})})},this.initTypeList=(t,i,v)=>{v.forEach(h=>{var a=this.findItemIndex(h.id,i);a===-1?h.isChecked=!1:h.isChecked=this.state.contextData[i][a].isChecked}),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[t]:v})})},this.initTypeUser=(t,i)=>{var v=i||[...this.state.contextData[t]],h=this.props.reserveUser;v.forEach(a=>{var k=this.findItemIndex(a.id,"checkedUser");h.findIndex(Y=>Y.id===a.id)!==-1&&(a.reserve=!0),k===-1?a.isChecked=!1:a.isChecked=this.state.contextData.checkedUser[k].isChecked}),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[t]:v})})},this.toggleDisplayItem=(t,i)=>{var v=this.findItemIndex(t.id,i);return v===-1?i.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[i]:this.checkListParentId(i,t),checkedUser:t.isChecked?this.checkParentId(this.state.contextData.checkedUser,t.id):this.state.contextData.checkedUser}:{[i]:[...this.state.contextData[i],t]}:i.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[i]:this.checkListParentId(i,t),checkedUser:t.isChecked?this.checkParentId(this.state.contextData.checkedUser,t.id):this.state.contextData.checkedUser}:{checkedUser:this.getNewList(t,"checkedUser",!0),[i]:this.getNewList(t,i)}},this.toggleDisplayList=(t,i,v,h,a,k,Y)=>{this.deleteAllName(i),this.deleteAllName(h),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[t]:i,[v]:h,[a]:k,checkedUser:Y})})},this.deleteAllName=t=>{t.map(i=>(i.all_name&&typeof i.all_name=="object"&&delete i.all_name,i))},this.checkUserOne=(t,i)=>{this.props.single?this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedUser:[t],[i]:i==="checkedUser"?[t]:this.getSingleUserList(t,i)})}):this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),this.toggleDisplayItem(t,i))})},this.dealAuthorizedFalseChecked=function(){var t=(0,ee.Z)(N().mark(function i(v){var h,a,k,Y,J,ue,q,fe,X;return N().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return h=C.state.contextData,a=h.cacheId,k=h.checkedDept,Y=h.checkedUser,J={checkedDept:[],checkedUser:[]},ne.prev=2,ne.next=5,$e({departmentId:v.id,cache_id:a});case 5:ue=ne.sent,q=ue.data,fe=q.departments,X=q.users,fe.push(v),fe.map(ge=>(ge.isChecked=!0,ge.name=ge.department_name,ge.parentId=ge.parent_ids.split("/"),ge.parentAuthorize=!1,ge.userCount=ge.user_count,ge)),X.map(ge=>(ge.isChecked=!0,ge.name=ge.user_name,ge.parentAuthorize=!1,C.toggleDisplayItem(ge,"deptUser"),ge)),J=(0,y.Z)((0,y.Z)({},J),{},{checkedUser:W()(X,Y,"id"),checkedDept:W()(fe,k,"id")}),ne.next=16;break;case 13:ne.prev=13,ne.t0=ne.catch(2),console.error("\u83B7\u53D6\u90E8\u95E8\u7BA1\u8F96\u8303\u56F4\u51FA\u9519",ne.t0);case 16:return ne.abrupt("return",J);case 17:case"end":return ne.stop()}},i,null,[[2,13]])}));return function(i){return t.apply(this,arguments)}}(),this.dealAuthorizedFalseUnChecked=t=>{var i=this.state.contextData,v=i.checkedDept,h=i.checkedUser,a=i.deptUser,k=[],Y=v.filter(ue=>ue.parent_ids.split("/").indexOf(t.id)===-1),J=h.filter(ue=>{var q=ue.department_ids.indexOf(t.id)===-1;return q||k.push(ue.id),q});return{checkedDept:Y,checkedUser:J,deptUser:k.length>0?a.map(ue=>(k.indexOf(ue.id)>-1&&(ue.isChecked=!1),ue)):a}},this.checkListOne=function(){var t=(0,ee.Z)(N().mark(function i(v,h,a){var k;return N().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(k={checkedDept:[],checkedUser:[]},!(v.authorized==="false"&&h==="checkedDept")){J.next=12;break}if(!v.isChecked){J.next=8;break}return J.next=5,C.dealAuthorizedFalseChecked(v);case 5:J.t0=J.sent,J.next=9;break;case 8:J.t0=C.dealAuthorizedFalseUnChecked(v);case 9:k=J.t0,J.next=14;break;case 12:v.parentAuthorize===!1&&v.isChecked===!1&&C.unCheckedParentDept(v,h),k=(0,y.Z)({[a]:C.getNewList(v,a,!1)},C.toggleDisplayItem(v,h));case 14:C.setState({contextData:(0,y.Z)((0,y.Z)({},C.state.contextData),k)});case 15:case"end":return J.stop()}},i)}));return function(i,v,h){return t.apply(this,arguments)}}(),this.removeCheckedUser=t=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedUser:this.getNewList(t,"checkedUser"),deptUser:this.getNewList(t,"deptUser"),postUser:this.getNewList(t,"postUser"),groupUser:this.getNewList(t,"groupUser"),searchResult:this.getNewList(t,"searchResult")})})},this.unCheckedParentDept=(t,i)=>{var v=this.state.contextData.checkedDept,h=v.filter(Y=>Y.authorized==="false"&&i==="checkedUser"?t.department_ids.indexOf(Y.id)>-1:i==="checkedDept"?t.parentId.indexOf(Y.id)>-1:!1),a=(0,Q.Z)(h,1),k=a[0];k&&(k.isChecked=!1,this.toggleDisplayItem(k,"checkedDept"),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedDept:h})}))},this.checkListParentId=(t,i)=>{var v=[...this.state.contextData[t]],h=this.findItemIndex(i.id,t);return v.forEach(a=>{a.id!==i.id&&a.parentId.indexOf("".concat(i.id))!==-1?a.isChecked=!1:a.id===i.id&&(a.isChecked=i.isChecked)}),h===-1&&v.push(i),v},this.checkParentId=(t,i)=>{var v=[];return t.forEach(h=>{var a=typeof h.parentId!="undefined"?h.parentId:h.department_ids||[];a.indexOf(i)===-1&&v.push(h)}),v},this.getNewList=(t,i,v)=>{var h=[...this.state.contextData[i]],a=this.findItemIndex(t.id,i);return a===-1?v&&h.push(t):h[a].isChecked=t.isChecked,h},this.getSingleUserList=(t,i)=>{var v=[...this.state.contextData[i]];return v.forEach(h=>{h.id===t.id?h.isChecked=t.isChecked:h.isChecked=!1}),v},this.findItemIndex=(t,i)=>this.state.contextData[i].findIndex(v=>v.id===t),this.clearTabPanelList=(t,i)=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[t]:[],[i]:[]})})},this.getTabs=()=>{var t=[],i,v,h=this.props,a=h.t,k=h.filterAuthOpen,Y=h.disableHidden,J=h.scrollFlag,ue=this.state.contextData,q=ue.canUseGroups,fe=ue.canUseClass;return this.state.displayType.forEach(X=>{switch(X){case"dept":t.push({label:a("component.orgDialogDeptLabel"),key:"dept",defaultBreadNav:{value:"",label:"",sourceType:""},queryType:1});break;case"group":t.push({label:a("component.orgDialogGroupLabel"),key:"group",queryType:2,defaultBreadNav:{value:"",label:a("component.userGroup")}});break;case"post":t.push({label:a("component.orgDialogPostLabel"),key:"post",defaultBreadNav:{value:"1",label:a("common.post")},queryType:3});break;case"cluster":q&&t.push({label:a("component.orgDialogClusterLabel"),key:"cluster",defaultBreadNav:{value:"",label:""},queryType:4});break;case"class":fe&&t.push({label:a("component.orgDialogClassLabel"),key:"class",defaultBreadNav:{value:"",label:""},queryType:5});break}}),t.length===1?v=s().createElement(qe,{defaultBreadNav:t[0].defaultBreadNav,queryType:t[0].queryType,type:t[0].key,filterAuthOpen:k,disableHidden:Y,scrollFlag:J}):(i=t.map(X=>s().createElement(w,{tab:X.label,key:X.key},s().createElement(qe,{defaultBreadNav:X.defaultBreadNav,queryType:X.queryType,type:X.key,filterAuthOpen:k,disableHidden:Y,scrollFlag:J}))),v=s().createElement(n.Z,null,i)),v},this.handleSearch=(t,i)=>{var v=this.state.selectType;v==="user"?this.getUserList(t,i):v==="dept"?this.getDeptList(t):v==="post"?this.getPostList(t):v==="cluster"?this.getClusterResult(t):v==="class"?this.getClassResult(t):this.getGroupList(t)},this.getClusterResult=t=>{var i=M.ZP.OrgDialog.getClusterList(),v={keyword:t};Be.WY.get({url:i,params:v}).then(h=>{this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedCluster",h.data.data.map(a=>({name:a.name,userCount:a.user_count,id:a.id,parentId:[""]})))})},this.getUserList=(t,i)=>{var v=M.ZP.OrgDialog.getUserByName(),h={user_name:i===""?t:"",filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType,userIds:i};Be.WY.get({url:v,params:h}).then(a=>{a.data.users&&a.data.users.forEach(k=>{k.name=k.user_name}),this.setState({showCancel:!0}),this.initTypeUser("searchResult",a.data.users||[])})},this.getDeptList=t=>{var i=M.ZP.Organization.queryDept(),v={department_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Be.WY.get({url:i,params:v}).then(h=>{h.data.departments&&h.data.departments.forEach(a=>{a.name=a.department_name,a.parentId=a.parent_ids?a.parent_ids.split("/"):[],a.userCount=a.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedDept",h.data.departments||[])})},this.getPostList=t=>{var i=M.ZP.Organization.addPost(),v={post_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Be.WY.get({url:i,params:v}).then(h=>{h.data.posts&&h.data.posts.forEach(a=>{a.name=a.post_name,a.parentId=a.parent_id?a.parent_id.split("/"):[],a.userCount=a.user_count}),this.setState({hidePosts:h.data.hide_posts,showCancel:!0}),this.initTypeList("searchResult","checkedPost",h.data.posts||[])})},this.getGroupList=t=>{var i=M.ZP.Organization.getGroupList(),v={group_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Be.WY.get({url:i,params:v}).then(h=>{h.data.groups&&h.data.groups.forEach(a=>{a.name=a.group_name,a.parentId=a.parent_id?a.parent_id.split("/"):[],a.userCount=a.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedGroup",h.data.groups||[])})},this.checkAllResult=t=>{var i=this.state,v=i.selectType,h=i.contextData,a="checked".concat(v.charAt(0).toUpperCase()).concat(v.substr(1)),k=[...h[a]],Y=h.searchResult.map(ue=>{ue.isChecked=t;var q=k.findIndex(fe=>fe.id===ue.id);return q!==-1?k[q].isChecked=t:k.push(ue),ue}),J=k;this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[a]:J,searchResult:Y})})},this.clearSelectedAll=()=>{var t=this.state.contextData,i=t.checkedDept,v=t.checkedGroup,h=t.checkedPost,a=t.checkedUser,k=t.checkedCluster,Y=t.checkedClass,J=t.deptList,ue=t.groupList,q=t.postList,fe=t.clusterList,X=t.classList,te=t.deptUser,ne=t.groupUser,ge=t.postUser,Ne=Ke=>(Ke.forEach(Ye=>{Ye.isChecked=!1}),Ke);this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],deptList:i.length>0?Ne(J):J,groupList:v.length>0?Ne(ue):ue,postList:h.length>0?Ne(q):q,clusterList:k.length>0?Ne(fe):fe,classList:Y.length>0?Ne(X):X,deptUser:a.length>0?Ne(te):te,groupUser:a.length>0?Ne(ne):ne,postUser:a.length>0?Ne(ge):ge})})},this.handleCancel=()=>{this.setState({showCancel:!1})},this.handleSelectChange=t=>{this.setState({selectType:t,contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{searchResult:[]})})},this.state={title:S.title||S.t("component.chooseAssignScope"),displayType:S.displayType?S.displayType:["dept"],selectType:"user",showCancel:!1,hidePosts:!1,contextData:{showUserCount:S.showUserCount,deptList:[],groupList:[],postList:[],clusterList:[],classList:[],deptUser:[],groupUser:[],postUser:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[],onlyUser:S.onlyUser,onlyDept:S.onlyDept,onlyPost:S.onlyPost,canUseGroups:S.useGroups,canUseClass:S.useClass,single:S.single,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,userType:this.props.userType,initTypeList:this.initTypeList,initTypeUser:this.initTypeUser,toggleDisplayItem:this.toggleDisplayItem,toggleDisplayList:this.toggleDisplayList,checkListOne:this.checkListOne,checkUserOne:this.checkUserOne,removeCheckedUser:this.removeCheckedUser,clearTabPanelList:this.clearTabPanelList,maxDeptUserCount:S.maxDeptUserCount,hidePosts:!1,initHidePostsStatus:this.initHidePostsStatus,cacheId:(0,T.Z)(),clearSelectedAll:this.clearSelectedAll}}}componentDidUpdate(S){if(S.visible!==this.props.visible&&this.props.visible){var C=this.props.initData,t=C.dept,i=C.group,v=C.post,h=C.user,a=C.cluster,k=C.classes;console.warn(h,"user");var Y=this.props,J=Y.reserveUser,ue=Y.t,q=Y.onlyDept,fe=Y.onlyPost;J.forEach(X=>{X.reserve=!0}),this.setState({title:this.props.title||ue("component.chooseAssignScope"),displayType:this.props.displayType?this.props.displayType:["dept"],selectType:fe?"post":q?"dept":"user",contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{deptList:[],groupList:[],postList:[],deptUser:[],clusterList:[],classList:[],groupUser:[],postUser:[],searchResult:[],onlyUser:this.props.onlyUser,onlyDept:this.props.onlyDept,canUseGroups:this.props.useGroups,canUseClass:this.props.useClass,onlyPost:this.props.onlyPost,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,cacheId:(0,T.Z)()})},()=>{this.getListParentId(t,i,v,h.concat(J),a,k)})}}componentWillUnmount(){Ct({cacheId:this.state.contextData.cacheId}).then(()=>{console.warn("\u6E05\u9664\u7F13\u5B58\u6210\u529F")}).catch(S=>{console.error("\u6E05\u9664\u7F13\u5B58\u5931\u8D25",S)})}render(){var S=this.getTabs(),C=this.props,t=C.t,i=C.onlyUser,v=C.onlyDept,h=C.onlyPost,a=C.displayType,k=C.useGroups,Y=C.useClass,J=C.onlyChoosePost,ue=(0,O.p)(),q=this.state,fe=q.showCancel,X=q.selectType,te=q.hidePosts;return re.okText=this.props.okText||t("common.ok"),s().createElement(p.ZP,(0,K.Z)({},re,this.props.modalConfig,{visible:this.props.visible,title:this.state.title,wrapClassName:[this.props.className,"cl-org-modal"],onCancel:this.onCancel,onOk:this.onOk}),s().createElement(Te.Provider,{value:this.state.contextData},s().createElement("div",{className:"cl-org"},s().createElement("div",{className:"cl-org-left"},this.props.visible?s().createElement("div",{className:"cl-org-left__top"},s().createElement(R.Z.Group,{compact:!0},s().createElement(c.Z,{className:"cl-org-left__top__select",value:X,style:{width:80},onChange:this.handleSelectChange},s().createElement(B,{value:"user",disabled:v||h||J},t("authGroup.userLabel")),s().createElement(B,{value:"dept",disabled:i||J},t("setting.deptLabel")),s().createElement(B,{value:"post",disabled:!h&&(v||i)||a.length===1},t("common.post")),s().createElement(B,{value:"group",disabled:v||i||a.length===1||J},t("component.userGroup")),k?s().createElement(B,{value:"cluster"},t("component.useCluster")):null,Y?s().createElement(B,{value:"class"},t("component.useClass")):null),s().createElement(D,{selectType:X,onSearch:this.handleSearch,showCancel:fe,disableChange:this.props.disableChange})),fe?s().createElement("div",{className:"cl-org-left__top__cancel",onClick:this.handleCancel,style:{color:ue}},t("common.cancel")):null):null,fe?s().createElement(r,{isSingle:this.props.single,list:this.state.contextData.searchResult,userListType:X,checkedAll:this.checkAllResult,hidePosts:te}):S),s().createElement("div",{className:"cl-org-right"},s().createElement(g,null)))))}}se.defaultProps={visible:!0,showUserCount:!0,displayType:["dept","group","post","cluster","class"],initData:{dept:[],post:[],group:[],user:[],cluster:[],classes:[]},reserveUser:[],onlyUser:!1,onlyDept:!1,onlyPost:!1,useGroups:!1,useClass:!1,asyncDeptTree:!0,userType:"active",single:!1,maxUserCount:Infinity,filterAuthOpen:!1,disableHidden:!1,beyondLimitTip:"",onOk:()=>{},modalConfig:{},maxDeptUserCount:0,onlyChoosePost:!1,scrollFlag:!1};var ve=(0,ie.Z)()(se)},72387:function(Me,pe,e){"use strict";var K=e(12924),L=e.n(K),R=e(84874);class Q extends L().PureComponent{constructor(Z){super(Z);this.onPrev=()=>{var j=this.state.activeIndex;this.setState({activeIndex:j<=0?0:j-1})},this.onNext=()=>{var j=this.props.imgList,y=this.state.activeIndex;this.setState({activeIndex:j.length<=y+1?y:y+1})},this.state={activeIndex:Z.defaultActive}}componentDidUpdate(Z){Z.visible!==this.props.visible&&this.props.visible&&this.setState({activeIndex:this.props.defaultActive})}render(){var Z=this.props,j=Z.visible,y=Z.imgList,E=this.state.activeIndex;return L().createElement("div",{className:"preview-img-mask",style:{display:j?"block":"none"}},L().createElement("div",{className:"preview-img-bg"},L().createElement("div",{className:"preview-img"},L().createElement("img",{src:y[E]}),L().createElement("span",{className:"preview-img-close",onClick:this.props.onClose},L().createElement(R.Z,{iconClass:"iconf-close"})))),E>=1?L().createElement("span",{className:"preview-img-left",onClick:this.onPrev},L().createElement(R.Z,{iconClass:"iconf-arrow-left",size:"20px"})):null,E<=y.length-2?L().createElement("span",{className:"preview-img-right",onClick:this.onNext},L().createElement(R.Z,{iconClass:"iconf-arrow-right",size:"20px"})):null)}}Q.defaultProps={visible:!1,imgList:[],defaultActive:0,onClose:()=>{}},pe.Z=Q},99891:function(Me,pe,e){"use strict";var K=e(12924),L=e.n(K),R=e(28216),Q=e(91768),ee=e(37055),Z=e(10237),j=e(60667);class y extends L().PureComponent{constructor(P){super(P);this.getWaterMarkText=n=>{var F=this.props.userInfo,N=F.jobNumber,_=localStorage.getItem("waterMarkPostName"),s=[],ie=n.find(W=>W.type==="content_setting"),z=n.find(W=>W.type==="content_custom");return ie.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),z.param.checked==="true"&&z.param.comment[0]!==""&&this.setState({commentText:z.param.comment[0]}),ie.param.comment.indexOf("position")!==-1&&_&&_!==""&&s.push("".concat(_)),ie.param.comment.indexOf("jobnumber")!==-1&&N&&N!==""&&s.push("".concat(N)),s.join("-")},this.getWaterMarkApplication=n=>{var F=this.props.scenes,N=n.find(_=>_.type==="application_scenario");N.param.comment.indexOf(F)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=n=>{var F=n.find(N=>N.type==="dispersive");this.setState({isDispersive:F.param.checked==="true"})},this.getDynamicSet=()=>{var n=ee.ZP.advancedSetting.dynamicWaterMarkNew(),F={access_token:window.localStorage.getItem("token")};Z.WY.get({url:n,params:F}).then(N=>{var _=JSON.parse(N.data.actions);this.setState({waterMarkText:this.getWaterMarkText(_),actions:_}),this.getWaterMarkApplication(_),this.getWaterIsDispersive(_)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var P=localStorage.getItem("waterMarkPostName");P===""||P===null?this.getPostName():this.getDynamicSet()}getPostName(){var P=ee.ZP.advancedSetting.getPostName();Z.WY.get({url:P}).then(n=>{localStorage.setItem("waterMarkPostName",n.data.post_names[0]||""),this.getDynamicSet()})}render(){var P=this.state,n=P.showWaterMark,F=P.waterMarkCount,N=P.isUserName,_=P.isDispersive,s=P.waterMarkText,ie=P.actions,z=P.commentText,W=this.props.userInfo,U=W.name,b=W.unionid,ae=W.sourceType;return L().createElement("div",{className:"common-watermark"},n&&new Array(F).fill(0).map((H,$)=>L().createElement("div",{key:$,className:"common-watermark-item ".concat(_?"isDispersive":"")},L().createElement("span",{className:"common-watermark-item-content"},z!==""&&L().createElement("span",{className:"item-part"},z),N&&L().createElement("span",null,z!==""&&L().createElement("span",null,"-"),L().createElement(j.Z,{dataType:"userName",value:b,name:U,type:ae})),L().createElement("span",{className:"item-part"},(N||z!=="")&&s!==""&&L().createElement("span",null,"-"),s)))))}}var E=c=>({userInfo:c.user});pe.Z=(0,R.$j)(E)((0,Q.Z)()(y))},40646:function(Me,pe,e){"use strict";e.d(pe,{l:function(){return _},t:function(){return W}});var K=e(62029),L=e(12924),R=e.n(L),Q=e(22385),ee=e(31097),Z=e(63185),j=e(9676),y=e(28216),E=e(17780),c=e(13875),P=e.n(c),n=(U,b)=>{var ae=(0,y.v9)(he=>{var Ze=he.advancedSetting;return{themeColor:Ze.themeColor}}),H=ae.themeColor,$=U.options,M=U.onChange,A=U.values,oe=A===void 0?[]:A,me=U.labelClassName,Te=oe.slice();return R().createElement("div",{className:P()["cl-checkbox-group"],ref:b},$.map(he=>{var Ze=Te.includes(he.value);return he.disabled&&he.disabledTip?R().createElement(ee.Z,{title:he.disabledTip,overlayClassName:P()["tooltip-overlay"]},R().createElement("span",{key:"".concat(he.value).concat(Ze),className:P()["check-box-content"]},R().createElement(j.Z,{id:"".concat(he.value),key:"".concat(he.value).concat(Ze),value:he.value,checked:Te.includes(he.value),disabled:he.disabled,onChange:M,className:"".concat(P().checkbox_button," ").concat(me)},R().createElement("span",{style:{color:"".concat(Ze?(he.disabled,H):"")},className:P()["check-title"]},he.label)))):he.toolTip?R().createElement(ee.Z,{title:he.toolTip,overlayClassName:P()["tooltip-overlay"]},R().createElement("span",{key:"".concat(he.value).concat(Ze),className:P()["check-box-content"]},R().createElement(j.Z,{id:"".concat(he.value),key:"".concat(he.value).concat(Ze),value:he.value,checked:Te.includes(he.value),disabled:he.disabled,onChange:M,className:"".concat(P().checkbox_button," ").concat(me)},R().createElement("span",{style:{color:"".concat(Ze?(he.disabled,H):"")},className:P()["check-title"]},he.label)))):R().createElement("span",{key:"".concat(he.value).concat(Ze),className:(0,E.xX)()?P()["check-box-micro-content"]:P()["check-box-content"]},R().createElement(j.Z,{id:"".concat(he.value),value:he.value,checked:Te.includes(he.value),disabled:he.disabled,onChange:M,className:"".concat(P()["checkbox-button-box"]," ").concat(me)},R().createElement("span",{style:{color:"".concat(Ze?(he.disabled,H):"")},className:P()["check-title"]},he.label)))}))};n.defaultProps={options:[],values:[],labelClassName:"",disabled:!1,disabledTip:""};var F=(0,L.forwardRef)(n);function N(U,b){var ae=H=>{var $=H.target,M=$.checked,A=$.value;U.onChange&&U.onChange({checked:M,value:A})};return R().createElement(F,(0,K.Z)({},U,{onChange:ae,ref:b}))}N.defaultValue={value:[]};var _=(0,L.forwardRef)(N),s=e(33565),ie=e(81211);function z(U){var b=U.defaultValue,ae=U.onChange,H=(0,ie.Z)(U,["defaultValue","onChange"]),$=(0,L.useState)(b),M=(0,s.Z)($,2),A=M[0],oe=M[1];(0,L.useEffect)(()=>{ae&&ae(A)},[A]);var me=Te=>{var he=Te.target,Ze=he.checked,Ve=he.value;Ze&&oe(Fe=>[...Fe,Ve]),Ze||oe(Fe=>Fe.filter(G=>G!==Ve))};return R().createElement(F,(0,K.Z)({},H,{values:A,onChange:me}))}z.defaultValue={defaultValue:[]};var W=z},80430:function(Me,pe,e){"use strict";var K=e(12924),L=e.n(K),R=e(60667),Q=ee=>{var Z=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},F=n.department_ids.split("/"),N=n.department_names.split("/"),_=F.map((s,ie)=>L().createElement(R.Z,{key:s,dataType:"departmentName",value:s,name:N[ie],type:n.source_type}));return L().createElement(L().Fragment,null,_.map((s,ie)=>L().createElement("span",{key:s},s,ie===N.length-1?"":"/")))},j=P=>L().createElement(R.Z,{dataType:"departmentName",value:P.department_id,name:P.department_name,type:P.source_type}),y=()=>{var P=ee.list,n=P===void 0?[]:P,F=ee.isBlock;if(!n.length)return null;var N=n.map(_=>Z(_));return N.length&&N.length>1?L().createElement(L().Fragment,null,N.map((_,s)=>F?L().createElement("div",{key:_},_):L().createElement("span",{key:_},_,s===N.length-1?"":"\uFF0C"))):L().createElement(L().Fragment,null,N[0]||"")},E=()=>{var P=ee.list,n=ee.nameList,F=ee.sourceType,N=ee.isBlock,_=P.map((s,ie)=>j({department_id:s,department_name:n[ie],source_type:F}));return L().createElement(L().Fragment,null,_.map((s,ie)=>N?L().createElement("div",{key:s},s):L().createElement("span",{key:s},s,ie===_.length-1?"":"\uFF0C")))},c=()=>ee.displayAll?y():E();return c()};Q.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},pe.Z=Q},60667:function(Me,pe,e){"use strict";e.d(pe,{Z:function(){return y}});var K=e(33565),L=e(12924),R=e.n(L),Q=e(28216);function ee(E){var c=E.type,P=E.openid,n=E.from,F=(0,L.useRef)(null);return(0,L.useLayoutEffect)(()=>{n==="vue"?window.parent.WWOpenData.bind(F.current):WWOpenData.bind(F.current)}),R().createElement("ww-open-data",{ref:F,type:c,openid:P})}var Z=E=>{var c=E.wxWorkApiFlag,P=E.appType,n=E.from,F=(0,L.useState)(!1),N=(0,K.Z)(F,2),_=N[0],s=N[1];(0,L.useEffect)(()=>{var W=localStorage.getItem("qyWechatBook");(P!=="wx_app"||c||W==="false"||n==="vue"||n==="taro")&&s(!0)},[c,P,n]);var ie=(0,L.useCallback)(()=>{var W=E.type,U=E.value,b=E.name,ae=b===void 0?"":b;switch(console.warn(E,"props"),W){case"wx_sync":{var H=E.dataType;return U?R().createElement(ee,{from:n,type:H,openid:U}):ae}default:return ae}},[E]),z=()=>{var W=E.name,U=E.dataType,b=localStorage.getItem("qyWechatBook");if(U===""||b==="false")return W;if(n==="vue"||n==="taro")return ie();switch(E.appType){case"wx_app":return ie();default:return W}};return _?z():E.name};Z.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var j=E=>({appType:E.user.appType,wxWorkApiFlag:E.user.wxWorkApiFlag}),y=(0,Q.$j)(j)(Z)},76466:function(Me,pe,e){"use strict";e.d(pe,{Z:function(){return ft}});var K=e(20228),L=e(11382),R=e(57663),Q=e(71577),ee=e(62029),Z=e(57361),j=e(9754),y=e.n(j),E=e(12924),c=e.n(E),P=e(91512),n=e(68654),F=e(91768),N=e(4412),_=e.n(N);class s extends c().Component{render(){var m=this.props.t;return c().createElement("div",{className:"net-preview"},c().createElement("div",{className:"net-preview-center"},c().createElement("img",{src:_(),alt:"picture"}),c().createElement("h2",null,m("localStorage.tip")),c().createElement("p",null,m("localStorage.banPreview"))))}}var ie=(0,F.Z)()(s),z=e(88986),W=e(34792),U=e(48086),b=e(28216),ae=e(21594),H=e(41225),$=e(10237),M=(Ce,m)=>(0,z.Z)({id:Ce||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},m),A=M;class oe extends E.Component{constructor(){super(...arguments);this.setupPlayer=m=>{var g=this.props,u=g.onVideoReady,d=u===void 0?()=>{}:u,f=g.playerConfig,I=g.contentType;m&&m==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,z.Z)((0,z.Z)({},f),{},{contentType:I==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:f.source,autoplay:f.autoplay,width:f.width,id:f.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:D=>{D.on("sourceloaded",l=>{var o=l.paramData,r=o.desc,p=o.definition;D.getComponent("VideoQuality")&&D.getComponent("VideoQuality").setCurrentQuality(r,p,f.id)}),D.on("ready",()=>{d()}),this.playerInstance=D,this.setPlayerConfig()}}))}}componentDidUpdate(m){m.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(m){this.player&&this.player.seek(m)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(m){this.player.setSpeed(m)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var m=this.props,g=m.onPlay,u=g===void 0?()=>{}:g,d=m.onTimeUpDate,f=d===void 0?()=>{}:d,I=m.onEnd,D=I===void 0?()=>{}:I,l=m.onPause,o=l===void 0?()=>{}:l,r=m.onError,p=r===void 0?()=>{}:r,O=this.playerInstance;O.on("play",()=>{u()}),O.on("pause",()=>{o()}),O.on("timeupdate",T=>{f(T)}),O.on("ended",()=>{D()}),O.on("error",(0,Z.Z)(y().mark(function T(){return y().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:p();case 1:case"end":return B.stop()}},T)})))}render(){var m=this.props.playerConfig;return c().createElement("div",{className:"common-video-player-container"},c().createElement("div",{id:m.id}))}}oe.playerInstance=null,oe.defaultProps={playerConfig:A(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var me=oe,Te=(Ce,m)=>(0,z.Z)({id:Ce||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},m),he=Te;class Ze extends E.Component{constructor(){super(...arguments);this.setupPlayer=m=>{m&&m==="resetPlayer"&&this.player.dispose();var g=this.props,u=g.playerConfig,d=g.onVideoReady,f=d===void 0?()=>{}:d;this.player=new Aliplayer(u,I=>{I.on("sourceloaded",D=>{var l=D.paramData,o=l.desc,r=l.definition;I.getComponent("VideoQuality")&&I.getComponent("VideoQuality").setCurrentQuality(o,r,u.id)})}),this.player.on("ready",()=>{f()})},this.setPlayerConfig=()=>{var m=this.props,g=m.onPlay,u=g===void 0?()=>{}:g,d=m.onTimeUpDate,f=d===void 0?()=>{}:d,I=m.onEnd,D=I===void 0?()=>{}:I,l=m.onPause,o=l===void 0?()=>{}:l,r=m.onError,p=r===void 0?()=>{}:r;this.player.on("play",()=>{u()}),this.player.on("pause",()=>{o()}),this.player.on("timeupdate",O=>{f(O)}),this.player.on("ended",()=>{D()}),this.player.on("error",(0,Z.Z)(y().mark(function O(){return y().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:p();case 1:case"end":return w.stop()}},O)})))},this.getPlayerContent=m=>{this.playerContainer=m}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(m){m.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(m){this.player.seek(m)}exitFull(){var m=this.player.fullscreenService;m&&m.isFullScreen&&m.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var m=this.props.playerConfig;return c().createElement("div",{className:"common-video-player-container"},c().createElement("div",{id:m.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}Ze.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:he()};var Ve=Ze;class Fe{constructor(m){this.hasCreated=!1,this.definition="",this.getQuality=m}createEl(m,g){var u=g._options&&g._options.language,d=g._el.id;this.isEn=u&&u==="en-us";var f=(0,ae.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),I=(0,ae.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),D=document.querySelector("#".concat(d," .prism-controlbar"));D.appendChild(f),m.appendChild(I)}setCurrentQuality(m,g,u){var d=document.querySelector("#".concat(u," .current-quality"));d.innerText=m,d.dataset.def=g,this.definition=g;var f=document.querySelector("#".concat(u," .quality-list")),I=f.querySelector(".current");I&&(I.className="");var D=f.querySelector('li[data-def="'.concat(g,'"]'));D&&(D.className="current")}created(m){this._urls=m._urls;var g=m._el.id,u=document.querySelector("#".concat(g," .current-quality")),d=document.querySelector("#".concat(g," .quality-list")),f=document.querySelector("#".concat(g," .quality-modal")),I=this._urls.map(o=>'<li data-def="'.concat(o.definition,'">').concat(o.desc,"</li>"));if(d.innerHTML=I.join(""),this.hasCreated==!1&&this.definition){var D=d.querySelector('li[data-def="'.concat(this.definition,'"]'));D.className="current"}this.hasCreated=!0;var l=null;u.onclick=()=>{d.style.display="block"},u.onmouseleave=()=>{l=setTimeout(()=>{d.style.display="none"},100)},d.onmouseenter=()=>{clearTimeout(l)},d.onmouseleave=()=>{d.style.display="none"},d.onclick=o=>{var r=o.target,p=r.dataset.def,O=r.innerText;if(p&&r.className!=="current"){var T=this._urls.find(w=>w.definition===p);m.loadByUrl(T.Url,m.getCurrentTime(),!0,!0),this.setCurrentQuality(T.desc,T.definition,g),f.style.display="block",f.querySelector("span.current-quality-tag").innerText=T.desc}this.getQuality(p,O)}}ready(m){var g=m._el.id,u=document.querySelector("#".concat(g," .quality-modal"));u.style.display="none";var d=document.querySelector("#".concat(g," .prism-setting-item.prism-setting-quality"));d&&d.classList.add("player-hidden")}}class G{createEl(m,g){var u=g._el.id,d=(0,ae.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),f=document.querySelector("#".concat(u," .prism-controlbar"));f.appendChild(d)}ready(m){var g=m._el.id,u=document.querySelector("#".concat(g," .current-rate")),d=document.querySelector("#".concat(g," .rate-list")),f=null,I=document.querySelector("#".concat(g," .prism-setting-item.prism-setting-speed"));I&&I.classList.add("player-hidden"),u.onclick=()=>{d.style.display="block"},u.onmouseleave=()=>{f=setTimeout(()=>{d.style.display="none"},100)},d.onmouseenter=()=>{clearTimeout(f)},d.onmouseleave=()=>{d.style.display="none"},d.onclick=D=>{var l=D.target,o=l.dataset.rate;if(o){if(m.setSpeed(o),l.className!=="current"){var r=d.querySelector(".current");r&&(r.className=""),l.className="current"}d.style.display="none",u.innerText="".concat(o,"x")}}}}var de=e(69164),ye=e(37055);function Ie(Ce){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=ye.ZP.local.getLocalUrl(Ce);return $.WY.get({url:g,params:m})}var Oe=e(91648),be=e(18329),ze=e(38642),He=e(9849),je=e(99891);class it extends E.Component{constructor(m){super();this.WaterMarkText=m,this.html=document.getElementsByClassName("common-watermark")}createEl(m){setTimeout(()=>{m.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var ht=it,mt=Ce=>({userInfo:Ce.user});class lt extends E.Component{constructor(m){var g;super(m);g=this,this.onVideoReady=u=>{var d=this.props,f=d.resourceInfo,I=d.mode,D=d.autoPlay,l=d.t,o=f.storageType;u==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(u),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(I==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),I==="preview"&&D&&this.play.play()):o==="ALIBABA_PRIVATE"||o==="LOCAL"?this.updateSource("resetPlayer"):($.WY.logger({keyword:"video",moduleName:"video-play",msg:l("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var u=this.props,d=u.draggable,f=u.mode,I=u.t,D=u.studyInfo,l=u.needCurrentTime,o=u.onCurrentTime,r=o===void 0?()=>{}:o,p=D.studyType,O=D.studyId,T=D.resourceId,w=this.state,B=w.showPreventHang,re=w.dragSwitch,se=w.showRandomAlert,ve=w.randomAlertDialogVisible,V=this.playingVideo,S=V.oneTime,C=V.popupWindowCount,t=V.maxPlayTime,i=V.progress,v=V.auditionLength,h=V.auditionType,a=V.duration,k=V.recentStart,Y=this.play.getCurrentTime(),J=(B==="OPEN"||se==="OPEN")&&C>0;if(l&&r(Y),v>0&&h===2&&Y>v&&(this.play.seek(v),U.default.warning(I("component.haveALookOverTip")),this.play.pause()),f==="learn"&&J){var ue=a-S*C;if(C>0&&Y>ue)if(this.play.pause(),se==="OPEN"){if(!ve){var q=(0,Oe.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:q},()=>{(0,H.qp)({popupId:q,planId:O,resourceId:T,type:"popup_start"})}),this.play.exitFull()}}else B==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((d||i===100)&&(Y>0&&(this.playingVideo.recentStart=Y),!((p==="enterprise"||p==="studyProject")&&re==="OPEN")))return!1;Y>t?Y-k>2?(this.playingVideo.recentStart=t,this.play.seek(t),U.default.warning(I("component.preventFastWatchTip"))):(this.playingVideo.recentStart=Y,this.playingVideo.maxPlayTime=Y):Y>0&&Y>this.playingVideo.recentStart&&(this.playingVideo.recentStart=Y)},this.onPlay=()=>{var u=this.props,d=u.mode,f=u.onPlay,I=f===void 0?()=>{}:f;I();var D=this;d==="learn"&&!D.timer&&(D.timer=setTimeout(function l(){D.saveProgress(),clearTimeout(D.timer),D.timer=setTimeout(l,2e4)},2e4))},this.onPause=()=>{var u=this.props,d=u.studyInfo,f=u.mode,I=d.studyType;clearTimeout(this.timer),this.timer=null,f==="learn"&&(I==="platform"||I==="enterprise"||I==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var u=this.props.mode;u==="learn"&&this.saveProgress()},this.onError=u=>{var d=this.props.resourceInfo,f=d.storageType;(f==="ALIBABA_PRIVATE"||f==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var u=this.props.mode;this.initPlayVideo(),u==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var u=this.state,d=u.showPreventHang,f=u.showRandomAlert,I=this.props,D=I.t,l=I.playingVideo,o=I.studyInfo,r=I.autoPlay,p=l.recentStart,O=l.duration,T=l.progress,w=o.studyType,B=(d==="OPEN"||f==="OPEN")&&(w==="studyTask"||w==="enterprise"||w==="studyProject")&&T<100;B?(f==="OPEN"?this.setState({promptMessage:D("component.preventAlertTip"),dialogVisible:!0}):d==="OPEN"&&this.setState({promptMessage:D("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):r&&(this.play.play(),Math.ceil(p)<parseInt(O)&&this.play.seek(p))},this.playerShowPreventHang=()=>{var u=this.playingVideo,d=u.duration,f=u.recentStart,I=0;d>0&&d<180?(I=d/2,this.playingVideo.oneTime=I,f>=I?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):d>=180&&d<600?(I=d/3,this.playingVideo.oneTime=I,f>=2*I?this.playingVideo.popupWindowCount=0:f>=I?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(I=d/4,this.playingVideo.oneTime=I,f>=3*I?this.playingVideo.popupWindowCount=0:f>=2*I?this.playingVideo.popupWindowCount=1:f>=I?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var u=this.props,d=u.playingVideo,f=u.mode;if(f==="learn"){this.playingVideo=(0,z.Z)({},d);var I=d.duration,D=d.progress;this.playingVideo.hasFinished=parseInt(D)===100,this.playingVideo.maxPlayTime=parseInt(I)*parseInt(D)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,Z.Z)(y().mark(function u(){var d,f,I,D,l,o,r,p,O,T,w,B,re,se,ve,V,S,C,t,i,v,h,a,k;return y().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(d=g.state,f=d.speedSwitch,I=d.dragSwitch,D=d.whiteList,l=g.props,o=l.resourceInfo,r=l.showQuality,p=o.contentType,O=o.storageType,T=o.source,w=o.playId,B=o.playerId,re=o.showFullScreen,se=re===void 0?!0:re,ve=he(B),ve.components=[],V=typeof T=="object"&&T.hasOwnProperty("FD")&&T.FD.indexOf("m3u8")===-1,r&&V&&p!=="mp3"&&(O&&O==="PUBLIC_CLOUD"||!O)&&ve.components.push({name:"VideoQuality",type:Fe,args:[()=>{g.play.pause(),g.playingVideo.readyCount=0}]}),f==="OPEN"&&ve.components.push({name:"VideoRate",type:G}),se&&(S=ve.skinLayout.find(ue=>ue.name==="controlBar"),S&&S.children.splice(S.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),ve.components.push({name:"VideoWaterMark",type:ht}),C=T.FD,t=T.OD,C.indexOf("http://")>-1&&(C=C.replace("http://","https://")),t.indexOf("http://")>-1&&(t=t.replace("http://","https://")),i=D.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",T.OD=t&&t.indexOf(i)>-1&&t.indexOf(".mp4")>-1?t:C,T.FD=C,v=typeof T!="string"?JSON.stringify(T):T,ve.source=v,I==="OPEN"&&(ve.disableSeek=!0),O!=="ALIBABA_PRIVATE"){J.next=32;break}return J.next=22,(0,H.BR)(w);case 22:if(h=J.sent,!h){J.next=28;break}ve.source=h,ve.vodRetry=1,J.next=30;break;case 28:return g.setState({showPrivateVodError:!0}),J.abrupt("return");case 30:J.next=38;break;case 32:if(O!=="LOCAL"){J.next=38;break}return J.next=35,Ie(w);case 35:a=J.sent,k=a.data,k.code===0&&(ve.source="".concat(T.FD,"?auth_key=").concat(k.data.auth_key),ve.vodRetry=1);case 38:g.setState({playerConfig:ve});case 39:case"end":return J.stop()}},u)})),this.updateSource=function(){var u=(0,Z.Z)(y().mark(function d(f){var I,D,l,o,r,p,O,T;return y().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(I=g.state.playerConfig,D=g.props.resourceInfo,l=D.storageType,o=D.source,r=D.playId,g.playingVideo.readyCount=0,l!=="ALIBABA_PRIVATE"){B.next=16;break}return B.next=7,(0,H.BR)(r);case 7:if(p=B.sent,!p){B.next=12;break}Object.assign(I,{source:p,vodRetry:1}),B.next=14;break;case 12:return g.setState({showPrivateVodError:!0}),B.abrupt("return");case 14:B.next=22;break;case 16:if(l!=="LOCAL"){B.next=22;break}return B.next=19,Ie(r);case 19:O=B.sent,T=O.data,T.code===0&&Object.assign(I,{source:"".concat(o.FD,"?auth_key=").concat(T.data.auth_key),vodRetry:1});case 22:g.setState({playerConfig:I},()=>{g.play.setupPlayer(f)});case 23:case"end":return B.stop()}},d)}));return function(d){return u.apply(this,arguments)}}(),this.saveProgress=()=>{var u=this.props,d=u.studyInfo,f=u.userInfo,I=f.isLogin,D=f.enterpriseId,l=f.id,o=this.playingVideo,r=o.recentStart,p=o.duration,O=o.hasFinished,T=Math.ceil(+r);T>Number(p)&&(T=Number(p));var w=Math.ceil(T/+p*100);if((w>100||O)&&(w=100),I){var B=this.playingVideo,re=B.auditionType,se=B.auditionLength;if(se>0&&re===2){var ve=Math.ceil(se/p*100);ve<=w&&(w=ve,T=se)}(0,H.sH)({studyInfo:d,progress:w,recent_start:T,enterpriseId:D,userId:l}).then(V=>{V&&V.data&&(0,de.Z)(V.data.integral_info||"")})}},this.getInfoFromSettings=(0,Z.Z)(y().mark(function u(){var d,f,I,D,l,o,r,p,O;return y().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return d=g.props.studyInfo,f=d.studyType,I=d.projectId,w.next=4,(0,H.Gw)();case 4:if(D=w.sent,l=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],o=(0,ae.RG)(D,l),f!=="studyProject"){w.next=14;break}return w.next=10,(0,He.NU)({id:I});case 10:r=w.sent,p=r.status,O=r.data,p===200&&(o.showPreventHang=O.prevent_cut_screen?"OPEN":"CLOSED",o.speedSwitch=O.speed_play?"OPEN":"CLOSED",o.dragSwitch=O.prevent_drag?"OPEN":"CLOSED");case 14:g.setState(o,()=>{g.dealVideoConfig()});case 15:case"end":return w.stop()}},u)})),this.dealAudioPoster=()=>{var u=this.props.resourceInfo.contentType,d=u===void 0?"":u;this.setState({showAudioPoster:d==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var u=this.state.showAudioPoster,d=this.play.playerContainer;u&&d&&(d.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),d.style.backgroundSize="cover")},this.getPlayInstance=u=>{this.play=u},this.handleOk=()=>{this.setState({dialogVisible:!1});var u=this.state.btnType,d=this.playingVideo.recentStart,f=this.props.t;u==="know"?(this.play.play(),this.play.seek(d),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:f("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,Z.Z)(y().mark(function u(){var d,f,I,D;return y().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:d=g.props.studyInfo,f=d.studyId,I=d.resourceId,D=g.state.randomAlertUUID,(0,H.qp)({popupId:D,planId:f,resourceId:I,type:"popup_end"}).then(()=>{g.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),g.playingVideo.popupWindowCount-=1,g.play.play();case 6:case"end":return o.stop()}},u)})),this.renderFooter=()=>{var u=this.state.btnType,d=this.props.t;return c().createElement(Q.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(u)},d(u==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var u=this.props.t;return c().createElement(Q.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},u("common.ok"))},this.state={playerConfig:he(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:m.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:m.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:m.t("component.randomAlertTip"),randomAlertModal:{title:m.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,ze.UI)("CL_VIDEO_BAIYING_COM_CN")}},m.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(m){var g=typeof m.resourceInfo.source!="string"?JSON.stringify(m.resourceInfo.source):m.resourceInfo.source,u=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;g!==u&&u!==""&&this.initInfo()}componentWillUnmount(){var m=this.props.mode;m==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var m=this.state,g=m.playerConfig,u=m.showPrivateVodError,d=m.dialogVisible,f=m.dialogModal,I=m.promptMessage,D=m.randomAlertDialogVisible,l=m.randomAlertModal,o=m.randomAlertTip,r=m.encryptedSwitch,p=this.props,O=p.resourceInfo,T=p.t,w=r==="OPEN"?me:Ve;return c().createElement(E.Fragment,null,c().createElement(w,(0,ee.Z)({ref:this.getPlayInstance},O,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:g,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),c().createElement(be.ZP,(0,ee.Z)({visible:d},f,{footer:this.renderFooter()}),c().createElement("div",{className:"video-business-prompt"},I)),c().createElement(be.ZP,(0,ee.Z)({visible:D},l,{footer:this.renderRandomFooter()}),c().createElement("div",{className:"video-player-container__prompt"},o)),u&&c().createElement("div",{className:"video-business-vod-error"},T("privateCloud.docReadError")),c().createElement(je.Z,{scenes:"video"}))}}var ct=(0,b.$j)(mt,null,null,{forwardRef:!0})((0,F.Z)("translation",{withRef:!0})(lt)),at=e(94184),Le=e.n(at),ot=e(84874),Be=Ce=>({userInfo:Ce.user}),It={getPravateDocUrl:ye.ZP.localStorage.getPravateDocUrl};function nt(Ce){return JSON.stringify(Ce,(m,g)=>(typeof g=="function"&&(g=g.toString()),g))}function De(Ce){var m=parseInt(parseInt(Ce,10)/60,10),g=parseInt(parseInt(Ce,10)%60,10);return m<10&&(m="0".concat(m)),g<10&&(g="0".concat(g)),"".concat(m,":").concat(g)}class yt extends E.Component{constructor(m){var g;super(m);g=this,this.messageFun=u=>{var d=this.props,f=d.docType,I=d.progress,D=d.studyTimeLimit,l=d.studyTime,o=this.state,r=o.jumpPageTag,p=o.totalTime,O=o.timeRemaining,T=this.state.previewDocData,w={};try{w=JSON.parse(u.data)}catch(B){return}switch(w.action){case"preview.ready":this.initDocData();break;case"preview.meta":T.totalPage=w.data.pc||1,T.currentPage=1,this.setState({previewDocData:T},()=>{this.reportStatusInterval()}),D>0?(this.saveProgress(I,l||"1",w.data.pc||1),this.setState({showCountDownContainer:!0})):f==="xlsx"||f==="xls"||T.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(I,l||"1",w.data.pc||1),D>0&&I<100?(this.setState({showCountDown:!0}),f==="xlsx"||f==="xls"?p=D:p=D*w.data.pc,O=parseInt(p*(1-I/100),10),this.setState({timeRemaining:O,totalTime:p},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(r){r=!1,this.setState({jumpPageTag:r});return}T.currentPage=w.data.pageIndex+1,this.setState({previewDocData:T}),D||this.saveProgress(Math.ceil(T.currentPage/T.totalPage*100),T.currentPage,T.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":U.default.error(w.data.result);break;default:break}},this.initDocData=(0,Z.Z)(y().mark(function u(){var d,f,I,D,l,o,r,p,O,T,w,B,re,se;return y().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(g.setState({isShowPrivateError:!1}),d=g.props,f=d.docType,I=d.userInfo,D=d.documentWatermarkSettings,l=d.storageType,o=d.privateDocId,r=I.name,p=I.jobNumber,O=I.position,T="",w={},l!=="ALIBABA_PRIVATE"){V.next=18;break}return V.prev=6,B=It.getPravateDocUrl(o),V.next=10,$.WY.get({url:B});case 10:re=V.sent,se=re.data,se.code===0?w=se.data||{}:g.setState({isShowPrivateError:!0}),V.next=18;break;case 15:V.prev=15,V.t0=V.catch(6),g.setState({isShowPrivateError:!0});case 18:if(D.indexOf("name")>-1&&(T="".concat(T+r," ")),D.indexOf("position")>-1&&(T="".concat(T+O," ")),D.indexOf("jobnumber")>-1&&(T+=p),T.length>0?window.sendMessage("preview.init",(0,z.Z)({wmType:1,wmValue:T,wmColor:"rgba(192, 192, 192, 0.4)"},w)):window.sendMessage("preview.init",(0,z.Z)({},w)),f!=="xlsx"&&f!=="ppt"&&f!=="pptx"&&f!=="xls"?g.setState({pageOperateContainerVisible:!0}):g.setState({pageOperateContainerVisible:!1}),!(f==="ppt"||f==="pptx")){V.next=29;break}V.t1=window,V.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},V.t1.sendMessage.call(V.t1,"setConfig",V.t2),V.next=32;break;case 29:V.t3=window,V.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},V.t3.sendMessage.call(V.t3,"setConfig",V.t4);case 32:case"end":return V.stop()}},u,null,[[6,15]])})),this.handleJumpPage=u=>{var d=this.state.previewDocData;d.currentPage=u,this.setState({jumpPageTag:!0,previewDocData:d});var f=u/d.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(f),u,d.totalPage),window.sendMessage("logic.toPage",{pageIndex:u-1})},this.redirectPage=()=>{var u=this.props,d=u.studyTimeLimit,f=u.studyTime,I=0;d===0&&(I=f-1>0?f-1:0),window.sendMessage("logic.toPage",{pageIndex:I})},this.docCountDown=()=>{var u=this.state.timeRemaining,d=this.state,f=d.totalTime,I=d.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{u-=1,this.setState({timeRemaining:u}),u<1&&(this.saveProgress(100,0,I.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var D=(f-u)/f*100;u<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(D),u,I.totalPage)},2e4)},this.saveProgress=(u,d,f)=>{var I=this.props.onSaveProgress;I&&I(u,d,f)},this.reportStatusInterval=()=>{var u=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var d=this.state.previewDocData.currentPage;u&&u({currentPage:d})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=u=>{this.docReader=u},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(m,g)=>{var u=this.docReader.contentWindow;u.postMessage(nt({action:m,data:g}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var m=this.props,g=m.t,u=m.storageType,d=m.privateDocId,f=this.props.aliUrl,I=this.state,D=I.previewDocData,l=I.pageOperateContainerVisible,o=I.timeRemaining,r=I.showCountDown,p=I.showCountDownContainer,O=I.showPageOperateContainer,T=I.isShowPrivateError;return u==="ALIBABA_PRIVATE"&&(f="https://preview.imm.aliyuncs.com/index.html?docId=".concat(d)),c().createElement("div",{className:"doc-reader-container"},c().createElement("div",{className:"ali-doc-container",style:{paddingBottom:l?"56px":"0"}},c().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:f,id:"aliyunPreview",ref:this.dealPreviewRef}),p?c().createElement("div",{className:"ali-doc-container__countdown"},r?c().createElement("div",null,c().createElement(ot.Z,{iconClass:"iconf-tipe",size:"16px"}),g("component.docStillStudy"),c().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",De(o)," "),g("component.canDone")):c().createElement("div",null,c().createElement(ot.Z,{iconClass:"iconf-tipe",size:"16px"}),g("component.docHasFinish"))):null,l?c().createElement("div",{className:"ali-doc__operate"},c().createElement("div",{className:Le()(["ali-doc__operate__content",O?"":"ali-doc__operate__hide-content"])},c().createElement("div",{className:"ali-doc__operate__pagination"},c().createElement("div",{className:"ali-doc__operate__pagination__pages"},D.currentPage," / ",D.totalPage),c().createElement("div",{className:"ali-doc__operate__pagination__toggle"},c().createElement("div",{className:"ali-doc__operate__pagination__choose"},c().createElement("span",null,g("component.choosePage"),c().createElement(ot.Z,{iconClass:"iconf-arrow-under",size:"14px"})),c().createElement("div",{className:"ali-doc__operate__page-list-container"},c().createElement("div",{className:"ali-doc__operate__choose-page"},g("component.fastChoosePage")),c().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:D.totalPage})).map((w,B)=>c().createElement("li",{key:w,onClick:()=>this.handleJumpPage(B+1)},B+1))))),c().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},g("common.collapse"))))),c().createElement("div",{className:Le()("ali-doc__operate__unfold",O?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},g("common.expand"))):null,T&&c().createElement("div",{className:"ali-doc__error"},g("privateCloud.docReadError"))),c().createElement(je.Z,{scenes:"document"}))}}yt.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var $e=(0,b.$j)(Be)((0,F.Z)()(yt)),Ct=Ce=>({userInfo:Ce.user}),rt="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),vt="".concat("https://doc.coolcollege.cn");class gt extends c().Component{constructor(m){var g;super(m);g=this,this.onSaveProgress=(u,d,f)=>{var I=this.props,D=I.mode,l=I.studyInfo,o=I.userInfo,r=o.enterpriseId,p=o.id;D==="learn"&&(0,H.sH)({studyInfo:l,progress:u,page_count:f,recent_start:d,enterpriseId:r,userId:p}).then(O=>{O&&O.data&&(0,de.Z)(O.data.integral_info||"")})},this.messageFun=function(){var u=(0,Z.Z)(y().mark(function d(f){var I,D,l,o,r,p;return y().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(f.data!=="local-resource"){T.next=9;break}if(I=g.props.resourceInfo,D=I.storageType,l=I.playId,!(D&&D==="LOCAL")){T.next=9;break}return T.next=6,Ie(l);case 6:o=T.sent,r=o.data,r.code===0&&(p=document.getElementById("local-resource-box"),p.contentWindow.postMessage({msg:"local-auth-key",authKey:r.data.auth_key},"*"));case 9:case"end":return T.stop()}},d)}));return function(d){return u.apply(this,arguments)}}(),this.getInfoFromSettings=(0,Z.Z)(y().mark(function u(){var d,f,I;return y().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,H.Gw)();case 2:d=l.sent,f=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],I=(0,ae.RG)(d,f),g.setState(I,()=>{g.initDocPage(g.props)});case 6:case"end":return l.stop()}},u)})),this.initDocPage=(0,Z.Z)(y().mark(function u(){var d,f,I,D,l,o,r,p,O,T,w,B,re,se,ve,V,S,C,t,i,v,h,a,k,Y,J,ue,q,fe,X,te,ne,ge,Ne,Ke=arguments;return y().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(d=Ke.length>0&&Ke[0]!==void 0?Ke[0]:{},f=d.resourceInfo,I=d.mode,D=d.studyInfo,l=d.userInfo,o=g.state.documentPlayerMode,r=f.docType,p=f.docTitle,O=f.url,T=f.studyTimeLimit,w=f.studyTime,B=f.aliUrl,re=f.progress,se=f.storageType,ve=f.playId,V=D.studyType,S=D.courseId,C=D.studyId,t=D.resourceId,i=l.enterpriseId,v=l.id,h=l.isLogin,a=l.token,k=o==="compat"&&B.indexOf("preview.imm.aliyun")>-1||se==="ALIBABA_PRIVATE",!k){ce.next=11;break}g.setState({showAliReader:!0}),ce.next=31;break;case 11:if(Y=(0,H.sH)({enterpriseId:i,userId:v,token:a,studyInfo:D},!0),J=V==="studyTask"?2:1,ue=ye.ZP.SaveProgress.reportStatusInterval(D),q={isSaveProgress:h&&I==="learn"&&Y,isSaveRecord:!1,access_token:a,userId:v,hostUrl:rt,courseId:S,resourceId:t,courseType:1,planId:C,studyTimeLimit:T,studyTime:w,saveProgressUrl:Y,type:"eapp",progress:re,saveRecordProgressUrl:ue,actionType:J},!(se&&se==="LOCAL")){ce.next=26;break}return ce.next=18,Ie(ve);case 18:if(fe=ce.sent,X=fe.data,X.code!==0){ce.next=25;break}q.auth_key=X.data.auth_key,q.url=O,ce.next=26;break;case 25:return ce.abrupt("return");case 26:te=JSON.stringify(q),ne="".concat(p,".").concat(r).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),ge="".concat(vt,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(te),"&furl=").concat(O,"?attname=").concat(ne),se&&se==="LOCAL"&&(Ne="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),ge="".concat(Ne,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(te),"&furl=").concat(O,"?attname=").concat(ne)),g.setState({encodeUrl:ge});case 31:case"end":return ce.stop()}},u)})),this.handleReportStatusInterval=u=>{var d=u.currentPage,f=this.props,I=f.resourceInfo,D=f.mode,l=f.studyInfo,o=f.userInfo,r=I.type,p=l.courseId,O=l.studyId,T=l.resourceId,w=o.enterpriseId,B=o.id,re=o.isLogin,se="",ve="",V=0,S=!1;switch(r){case"enterprise":V=1,S=!0;break;case"study":se=O,V=2,S=!0;break;case"project":ve=O,V=1,S=!0;break;default:break}if(!(!S||!re)){var C={plan_id:se,enterprise_id:w,user_id:B,course_id:p,project_course_id:ve,resource_id:T,current_page:d,action_type:V,send_time:Date.parse(new Date)};D==="learn"&&(0,H.Xc)(l,C)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(m){this.initDocPage(m)}render(){var m=this.props.resourceInfo,g=this.state,u=g.encodeUrl,d=g.documentWatermarkSettings,f=g.showAliReader,I=m.docType,D=m.type,l=m.studyTimeLimit,o=m.studyTime,r=m.aliUrl,p=m.progress,O=m.storageType,T=m.playId;return f?c().createElement($e,{privateDocId:T,storageType:O,aliUrl:r,docType:I,progress:p,studyTime:o,studyTimeLimit:l,documentWatermarkSettings:d,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:D}):c().createElement("div",{className:"doc-reader-container"},c().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:u,frameBorder:"0",allowFullScreen:!0}),c().createElement(je.Z,{scenes:"document"}))}}var x=(0,b.$j)(Ct)(gt),le=e(38979),Se=e(90706),Ee=e(12968),xe=e(44208),Ue=e(60667),Ge=Ce=>({userInfo:Ce.user});class We extends c().Component{constructor(){var m;super(...arguments);m=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var g=this.props,u=g.studyInfo,d=g.mode,f=g.userInfo,I=f.enterpriseId,D=f.id;d==="learn"&&(0,ae.Gp)({studyInfo:u,enterpriseId:I,userId:D})},this.getInfoFromSettings=(0,Z.Z)(y().mark(function g(){var u,d,f;return y().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,H.Gw)();case 2:u=D.sent,d=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],f=(0,ae.RG)(u,d),m.setState(f,()=>{m.renderWatermark()});case 6:case"end":return D.stop()}},g)})),this.renderWatermark=()=>{var g=this.props.userInfo,u=this.state.imageWatermark,d=g.name,f=g.unionid,I=g.sourceType,D=g.jobNumber,l=g.position,o=[];u.indexOf("name")>-1&&o.push(c().createElement(Ue.Z,{dataType:"userName",value:f,name:d,type:I})),u.indexOf("position")>-1&&o.push(c().createElement("span",null,l)),u.indexOf("jobnumber")>-1&&o.push(c().createElement("span",null,D)),u.length>0&&this.setState({watermark:o.map((r,p)=>c().createElement("span",{key:p},r))})},this.handleError=g=>{var u=this.props.onError;u&&u(g)},this.getImageUrl=(0,Z.Z)(y().mark(function g(){var u,d,f,I,D,l,o,r,p,O;return y().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(u=m.props,d=u.resourceInfo,f=u.t,I=d.playId,D=d.url,l=d.storageType,o=D,!l){w.next=21;break}if(l!=="ALIBABA_PRIVATE"){w.next=15;break}return w.next=7,(0,H.J7)(I);case 7:if(r=w.sent,!r){w.next=12;break}o=r,w.next=13;break;case 12:return w.abrupt("return",U.default.info(f("privateCloud.docReadError")));case 13:w.next=21;break;case 15:if(l!=="LOCAL"){w.next=21;break}return w.next=18,Ie(I);case 18:p=w.sent,O=p.data,O.code===0&&(o="".concat(D,"?auth_key=").concat(O.data.auth_key));case 21:m.setState({imageUrl:[o]},()=>{var B=m.state.imageUrl,re="image-business",se=document.querySelectorAll(".".concat(re,"-image img"));se.forEach((ve,V)=>{ve.onerror=()=>{m.handleError(B[V])}})});case 22:case"end":return w.stop()}},g)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var m="image-business",g=this.props.resourceInfo,u=g.preview,d=u===void 0?!1:u,f=this.state,I=f.watermark,D=f.imageUrl;return c().createElement("div",{className:m},c().createElement(je.Z,{scenes:"image"}),c().createElement(Se.Z,{className:"".concat(m,"-carousel")},D.map((l,o)=>c().createElement("div",{className:"".concat(m,"-image"),key:o.toString()},c().createElement(xe.Z,{src:l,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:d})))))}}We.defaultProps={prefixCls:"watch-image-page"};var we=(0,b.$j)(Ge)((0,F.Z)()(We)),ke=Ce=>({userInfo:Ce.user});class Pe extends c().Component{constructor(){var m;super(...arguments);m=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,Z.Z)(y().mark(function g(){var u,d,f;return y().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,H.Gw)();case 2:u=D.sent,d=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],f=(0,ae.RG)(u,d),m.setState(f,()=>{m.renderWatermark()});case 6:case"end":return D.stop()}},g)})),this.renderWatermark=()=>{var g=this.props.userInfo,u=this.state.htmlWatermark,d=g.name,f=g.unionid,I=g.sourceType,D=g.jobNumber,l=g.position,o=[];u.indexOf("name")>-1&&o.push(c().createElement(Ue.Z,{dataType:"userName",value:f,name:d,type:I})),u.indexOf("position")>-1&&o.push(c().createElement("span",null,l)),u.indexOf("jobnumber")>-1&&o.push(c().createElement("span",null,D)),u.length>0&&this.setState({watermark:o.map((r,p)=>c().createElement("span",{key:p},r))})},this.saveProgress=()=>{var g=this.props,u=g.studyInfo,d=g.mode,f=g.userInfo,I=f.enterpriseId,D=f.id;d==="learn"&&(0,ae.Gp)({studyInfo:u,enterpriseId:I,userId:D})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var m="html-business",g=this.props.resourceInfo,u=g.url,d=this.state.watermark;return c().createElement("div",{className:m},c().createElement("div",{className:"".concat(m,"__html-watermark")},d),c().createElement("iframe",{title:"html",className:"".concat(m,"_iframe"),src:u}))}}var Ae=(0,b.$j)(ke)((0,F.Z)()(Pe)),Re=e(57068),Je=e(1164),et=Ce=>({userInfo:Ce.user});class Xe extends c().PureComponent{constructor(){super(...arguments);this.getHost=m=>{var g=m.split("//"),u=g[1].split("/");return[g[0],u[0]].join("//")},this.getScormUrl=()=>{var m=this.props,g=m.studyInfo,u=m.mode,d=m.userInfo,f=m.resourceInfo,I=m.from,D=d.enterpriseId,l=d.id,o=f.url,r=this.getHost(o);if(u==="learn"){var p=(0,z.Z)({userId:l,enterpriseId:D,access_token:localStorage.token,from:I,scormUrl:encodeURIComponent(o),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},g);return"".concat(r).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(Re.stringify(p))}return"".concat(r,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(o))},this.handleOpenScormLink=m=>{Je.Z.targetTo({path:m,isExternalLink:!0})}}render(){var m=this.props.t,g="scorm-business",u=this.getScormUrl(),d=(0,ze.UI)("SCORM_EXTERNAL_WATCH");return c().createElement("div",{className:g},d?c().createElement("div",{className:"".concat(g,"_scorm")},c().createElement("img",{className:"".concat(g,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),c().createElement("h5",null,m("resourcePlay.scormTip")),c().createElement(Q.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(u)},m("resourceLibrary.h5LinkPlayButton"))):c().createElement("iframe",{title:"scorm",className:"".concat(g,"_iframe"),src:u}))}}var st=(0,b.$j)(et)((0,F.Z)()(Xe));class tt extends c().Component{render(){var m=this.props,g=m.visible,u=m.title,d=m.onCancel,f=m.t,I=c().createElement("span",null,u);return c().createElement(be.ZP,{visible:g,title:I,onCancel:d,footer:null},c().createElement("div",{className:"ban-preview"},c().createElement("div",{className:"ban-preview-center"},c().createElement("img",{src:_(),alt:"picture"}),c().createElement("h2",null,f("localStorage.tip")),c().createElement("p",null,f("localStorage.banPreview"))),c().createElement("hr",null),c().createElement(Q.Z,{type:"primary",className:"know",onClick:d},f("localStorage.onKnow"))))}}var qe=(0,F.Z)()(tt);class dt extends E.Component{constructor(){var m;super(...arguments);m=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=g=>{var u=this.props.previewInfo,d=u.onCancel;this.onCancel(),d(g)},this.onGetVideoBusiness=g=>{var u=this.props.onRef,d=u===void 0?()=>{}:u;this.videoBusiness=g,d(g)},this.onFullScreen=()=>{var g=this.state.fullScreen;this.setState({fullScreen:!g})},this.handleJudgeNetwork=(0,Z.Z)(y().mark(function g(){var u,d,f,I,D,l,o,r,p,O,T,w=arguments;return y().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(u=w.length>0&&w[0]!==void 0?w[0]:null,d=m.props,f=d.resourceInfo,I=d.watchType,D=f.storageType,l=f.playId,o=f.originUrl,r=I==="image"||I==="video"||I==="doc",p=null,u?p=u:o?p=o:p=f.url,!(r&&p&&l&&D&&D==="LOCAL")){re.next=22;break}return re.prev=7,re.next=10,(0,H.NY)(l);case 10:return O=re.sent,re.next=13,(0,H.Hy)(p,O);case 13:T=re.sent,T?m.setState({showBan:"no"}):m.setState({showBan:"yes"}),re.next=20;break;case 17:re.prev=17,re.t0=re.catch(7),m.setState({showBan:"yes"});case 20:re.next=23;break;case 22:m.setState({showBan:"no"});case 23:case"end":return re.stop()}},g,null,[[7,17]])})),this.renderOuter=()=>{var g=this.props,u=g.prefixCls,d=g.watchType,f=g.onCurrentTime,I=f===void 0?()=>{}:f;return c().createElement("div",{className:"".concat(u,"-outer")},d==="video"&&c().createElement(ct,(0,ee.Z)({onCurrentTime:I,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),d==="doc"&&c().createElement(x,this.props),d==="image"&&c().createElement(we,(0,ee.Z)({onError:this.handleJudgeNetwork},this.props)),d==="html"&&c().createElement(Ae,this.props),d==="scorm"&&c().createElement(st,this.props))},this.renderFooter=()=>{var g=this.props,u=g.resourceInfo.storageType,d=g.t,f=this.state.showBan,I=f!==""&&f==="yes";return u&&u!=="PUBLIC_CLOUD"&&I?c().createElement(Q.Z,{type:"primary",className:"know",onClick:this.onCancelModel},d("localStorage.onKnow")):null}}componentDidMount(){var m=this.props.mode;m==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(m){m.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var m=this.state,g=m.showBan,u=m.fullScreen,d=this.props,f=d.mode,I=d.previewWay,D=d.previewInfo,l=d.prefixCls,o=d.t,r=d.showEnlarge,p=d.footer,O=p===void 0?null:p,T=D.visible,w=D.destroyOnClose,B=D.title,re=g!==""&&g==="yes",se=g!==""&&g==="no";return c().createElement(E.Fragment,null,f==="preview"&&I==="popups"&&c().createElement(be.ZP,{destroyOnClose:w,visible:T,title:B,onCancel:this.onCancelModel,footer:O||this.renderFooter(),wrapClassName:"".concat(l,"-resource ").concat(u?"".concat(l,"-full"):"")},r&&c().createElement("div",{className:"".concat(l,"-resource-out-icon"),onClick:this.onFullScreen},u?c().createElement(P.Z,{className:"".concat(l,"-resource-icon")}):c().createElement(n.Z,{className:"".concat(l,"-resource-icon")})),c().createElement("div",{className:"".concat(l,"-inner")},!T&&c().createElement(L.Z,{size:"large"}),T&&se&&this.renderOuter(),re&&c().createElement(ie,null))),(f==="learn"||I==="page")&&se&&this.renderOuter(),(f==="learn"||I==="page")&&c().createElement(qe,{visible:re,title:B||o("questionn.warmHint"),onCancel:this.onCancel}))}}dt.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var ft=(0,F.Z)("translation",{withRef:!0})(dt)},41225:function(Me,pe,e){"use strict";e.d(pe,{Hy:function(){return Z},NY:function(){return j},Gw:function(){return y},sH:function(){return P},BR:function(){return E},qp:function(){return n},Xc:function(){return F},J7:function(){return c}});var K=e(57361),L=e(9754),R=e.n(L),Q=e(10237),ee=e(37055),Z=function(){var N=(0,K.Z)(R().mark(function _(){var s,ie,z,W,U,b,ae,H=arguments;return R().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return s=H.length>0&&H[0]!==void 0?H[0]:"",ie=H.length>1&&H[1]!==void 0?H[1]:"",z="",s.startsWith("http")?(W=s.split("//")[1].trim(),U=W.split("/")[0],z="https://".concat(U,"/cms/ticket")):(b=s.split("/")[0],z="https://".concat(b,"/cms/ticket")),M.prev=4,M.next=7,Q.ZQ.get({url:z,params:{ticket:ie}});case 7:if(ae=M.sent,!(ae.status===200||ae.status===403)){M.next=10;break}return M.abrupt("return",Promise.resolve(!0));case 10:return M.abrupt("return",Promise.resolve(!1));case 13:return M.prev=13,M.t0=M.catch(4),M.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return M.stop()}},_,null,[[4,13]])}));return function(){return N.apply(this,arguments)}}(),j=function(){var N=(0,K.Z)(R().mark(function _(s){var ie,z;return R().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,Q.ZQ.get({url:ee.ZP.local.getTicket(s)});case 2:if(ie=U.sent,z=ie.data,z.code!==0){U.next=6;break}return U.abrupt("return",Promise.resolve(z.data.ticket));case 6:return U.abrupt("return",Promise.resolve(""));case 7:case"end":return U.stop()}},_)}));return function(s){return N.apply(this,arguments)}}(),y=function(){var N=(0,K.Z)(R().mark(function _(){var s;return R().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Q.WY.get({url:ee.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return s=z.sent,z.abrupt("return",s.data.list);case 4:case"end":return z.stop()}},_)}));return function(){return N.apply(this,arguments)}}(),E=function(){var N=(0,K.Z)(R().mark(function _(s){var ie,z,W;return R().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Q.WY.get({url:ee.ZP.localStorage.getPravateVideoUrl(s)});case 2:if(ie=b.sent,ie.data.code!==0){b.next=6;break}return z=ie.data.data.videoPlayInfo,W=z===void 0?"":z,b.abrupt("return",W);case 6:return b.abrupt("return","");case 7:case"end":return b.stop()}},_)}));return function(s){return N.apply(this,arguments)}}(),c=function(){var N=(0,K.Z)(R().mark(function _(s){var ie,z,W;return R().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return ie=ee.ZP.localStorage.getPravateDocUrl(s),b.prev=1,b.next=4,Q.WY.get({url:ie});case 4:if(z=b.sent,W=z.data,!(W.code===0&&W.data)){b.next=8;break}return b.abrupt("return",W.data.docResourceDownloadUrl||"");case 8:return b.abrupt("return","");case 11:return b.prev=11,b.t0=b.catch(1),b.abrupt("return","");case 14:case"end":return b.stop()}},_,null,[[1,11]])}));return function(s){return N.apply(this,arguments)}}(),P=function(_){var s=_.studyInfo,ie=_.progress,z=_.recent_start,W=_.page_count,U=_.enterpriseId,b=_.userId,ae=_.token,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,$,M=s.studyType;if(M==="studyTask"&&($=ee.ZP.SaveProgress.studySaveProgress(s)),(M==="course"||M==="enterprise")&&($=ee.ZP.SaveProgress.enterpriseCourseSaveProgress(s)),M==="studyProject"&&($=ee.ZP.SaveProgress.projectSaveProgress(s)),M==="platform"&&($="".concat(ee.ZP.SaveProgress.platformCourseSaveProgress(s))),(H||M==="platform")&&($+="?enterprise_id=".concat(U,"&user_id=").concat(b)),H)return $+="&access_token=".concat(ae||localStorage.getItem("token")),$;var A={progress:ie,recent_start:z,tempTime:Date.parse(new Date)};return W&&(A.page_count=W),s.evaluationId&&(A.evaluation_id=s.evaluationId),Q.WY.post({url:$,data:A})},n=N=>{var _=N.popupId,s=N.planId,ie=N.resourceId,z=N.type;return Q.WY.post({url:ee.ZP.TaskStudyRecord.setRandomPopupRecord(s),data:{course_id:ie,terminal_type:"PC",popup_id:_,type:z}})},F=(N,_)=>{var s=ee.ZP.SaveProgress.reportStatusInterval(N);return Q.WY.post({url:s,data:_})}},21594:function(Me,pe,e){"use strict";e.d(pe,{pu:function(){return ee},RG:function(){return Z},Gp:function(){return j},O8:function(){return y}});var K=e(88986),L=e(69164),R=e(38642),Q=e(41225),ee=E=>{var c="";switch(E){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":c="studyTask";break;case"enterprise":c="enterprise";break;case"courseProject":c="studyProject";break;case"platform":case"purchased":c="platform";break;default:break}return c},Z=(E,c)=>{var P={};return c.forEach(n=>{var F=E.find(z=>z.type===n.type);if(F)if(n.type==="document_duration_limit"){var N=F.action_list,_=N.find(z=>z.type==="random_popup_verification");!(0,R.UI)("RANDOM_POPUP_VERIFY")||!_?P[n.name]="CLOSE":P[n.name]=_.param.checked==="true"?"OPEN":"CLOSE"}else if(n.type==="document_player"){var s=JSON.parse(F.actions);s.forEach(z=>{z.param.checked==="true"&&(P[n.name]=z.type)})}else if(n.type==="dynamic_watermark"){var ie=F.action_list;ie.forEach(z=>{z.type===n.resourceType&&z.param.checked==="true"&&(P[n.name]=z.param.comment)})}else P[n.name]=F.switch_status}),P},j=E=>{(0,Q.sH)((0,K.Z)({progress:100,recent_start:1},E)).then(c=>{c&&c.data&&(0,L.Z)(c.data.integral_info||"")})},y=E=>{var c=document.createElement("div");return c.innerHTML=E,c.childNodes[0]}},24144:function(Me,pe,e){"use strict";e.d(pe,{G2:function(){return he},Sc:function(){return M},Ur:function(){return Le},VI:function(){return rt},Lh:function(){return gt},DZ:function(){return W},ZM:function(){return b},tX:function(){return A},VQ:function(){return s},_D:function(){return de},iM:function(){return ye},vx:function(){return Ie},$Y:function(){return _},ws:function(){return F},Pd:function(){return N}});var K=e(43185),L=e(53251),R=e(62029),Q=e(34792),ee=e(48086),Z=e(88986),j=e(33565),y=e(12924),E=e.n(y),c=e(91768),P=e(10237),n=e(37055);function F(x){var le=n.ZP.Common.upload();return P.WY.post({url:le,data:x})}function N(x){var le=n.ZP.CourseManageList.uploadAiImage();return P.WY.post({url:le,data:x})}function _(x){var le=n.ZP.CourseManageList.saveAiImage();return P.WY.post({url:le,data:x})}function s(x){var le=x.idList,Se=n.ZP.CourseManageList.deleteAiImage();return P.WY.put({url:Se,data:{id_list:le}})}var ie=e(72387),z=e(76343),W={IMAGE:"image"},U=x=>{var le=x.uploadConfig,Se=x.uploadType,Ee=x.clip,xe=x.size,Ue=x.quality,Ge=x.t,We=Array.isArray(x.fileList)?x.fileList:[],we=(0,y.useState)(!1),ke=(0,j.Z)(we,2),Pe=ke[0],Ae=ke[1],Re=(0,y.useState)(!1),Je=(0,j.Z)(Re,2),et=Je[0],Xe=Je[1],st=(0,y.useState)(0),tt=(0,j.Z)(st,2),qe=tt[0],dt=tt[1],ft=(0,y.useState)(!1),Ce=(0,j.Z)(ft,2),m=Ce[0],g=Ce[1],u=(0,y.useState)({}),d=(0,j.Z)(u,2),f=d[0],I=d[1],D=t=>{var i=t.file;Ee?l({file:i},Ee):o({file:i})},l=(t,i)=>{var v=t.file;i==="crop"&&(I(v),T())},o=t=>{var i=t.file;Ae(!0);var v=new FormData;v.append("file",i),S(v,Se).then(h=>{var a="".concat(h.data.data.server,"/").concat(h.data.data.fileNewName),k=h.data.data.fileNewName,Y=[(0,Z.Z)({url:a,uid:k,name:k,thumbUrl:a,status:"done",response:"Server Error 500"},h.data.data)];p({newImgList:Y})}).catch(h=>{O({error:h,data:{fileList:[{fileName:i.name}]}})}).finally(()=>{Ae(!1)})},r=t=>{x.onUploadedListChange&&x.onUploadedListChange(t)},p=t=>{var i=t.newImgList,v=le.maxCount;x.onUploadSuccess&&x.onUploadSuccess({fileList:[...i]});var h=[...We,...i],a=[];typeof v=="number"&&v===1?a=i:typeof v=="number"&&h.length>v?a=h.slice(0,v+1):a=h,r({fileList:a})},O=t=>{var i=t.error,v=t.data;x.onUploadFailed&&x.onUploadFailed({error:i,data:v})},T=()=>{g(!0)},w=()=>{g(!1)},B=t=>{if(x.onBeforeUpload)return x.onBeforeUpload(t);var i=le.accept;if(i&&i.indexOf(t.name.split(".").pop().toLowerCase())<0)return ee.default.error(Ge("component.imgTypeError")),!1;if(xe&&xe.value&&xe.unit){var v=xe.value,h=xe.unit,a=h.toLowerCase()==="kb"?t.size/1024<v:t.size/1024/1024<v;if(!a)return ee.default.error("".concat(Ge("component.imgUploadLimit")).concat(v).concat(h,"!")),!1}return!0},re=t=>{var i=[...We],v=i.findIndex(h=>h.uid===t.uid);i.splice(v,1),r({fileList:i})},se=t=>{var i=We.findIndex(v=>v.uid===t.uid);dt(i),Xe(!0)},ve=()=>{Xe(!1)},V=t=>{var i=t.fileName,v=t.imgUrl,h=t.fileNewName,a={url:v,uid:h,fileName:i,name:h,thumbUrl:v,status:"done"};p({newImgList:[a]}),g(!1)},S=(t,i)=>i===W.IMAGE?F(t):null,C={listType:"picture-card",accept:"*",fileList:[],beforeUpload:B,customRequest:D,onPreview:se,onRemove:re};return E().createElement(E().Fragment,null,E().createElement(L.Z,(0,R.Z)({},C,le,x,{className:"upload_container_19fb1b0b-5573-42cb-b6a2-b39518df62cd ".concat(x.className)}),x.render((0,Z.Z)((0,Z.Z)({},x),{},{loading:Pe}))),E().createElement(ie.Z,{visible:et,imgList:We.map(t=>t.url),defaultActive:qe,onClose:ve}),m&&E().createElement(z.Z,(0,R.Z)({visible:m,file:f,widthScale:16,heightScale:9,sizeLimit:xe.value,sizeLimitUnit:xe.unit,accept:le.accept,onCancel:w,onOk:V,onUploadFailed:O,quality:Ue},x.imgCropConfig)))};U.defaultProps={fileList:[],uploadType:"image",size:{},clip:"",quality:void 0};var b=(0,c.Z)()(U);function ae(x){return(0,Z.Z)((0,Z.Z)({},x),{},{lastModified:x.lastModified,lastModifiedDate:x.lastModifiedDate,name:x.name,size:x.size,type:x.type,uid:x.uid,percent:0,originFileObj:x})}var H={IMAGE:"image",VIDEO:"video",AUDIO:"audio"},$=x=>{var le=(0,y.useRef)({fileList:[],file:{}}),Se=x.uploadConfig,Ee=x.size,xe=x.t;(0,y.useEffect)(()=>{le.current.fileList=x.fileList?x.fileList:[]},[x.fileList]);function Ue(ke){var Pe=!0;if(Ee&&Ee.value&&Ee.unit){var Ae=Ee.value,Re=Ee.unit,Je=Re.toLowerCase()==="kb"?ke.size/1024<Ae:ke.size/1024/1024<Ae;Je||(ee.default.error("".concat(xe("component.imgUploadLimit")).concat(Ae).concat(Re,"!")),Pe=!1)}return Pe&&(le.current.fileList=[...le.current.fileList,ae(ke)]),Pe}function Ge(ke){var Pe=ke.file,Ae=ke.onError,Re=ke.onProgress,Je=ke.onSuccess,et=new FormData;return et.append("file",Pe),F(et,{onUploadProgress:Xe=>{var st=Xe.total,tt=Xe.loaded;Re({percent:Math.round(tt/st*100).toFixed(2)},Pe)}}).then(Xe=>{var st=Xe.data;Je(st,Pe)}).catch(Ae),{abort(){console.log("upload progress is aborted.")}}}var We={listType:"text",accept:"*",beforeUpload:Ue,customRequest:Ge,onStart(ke){le.current.file=ke,le.current.fileList=le.current.fileList.map(Pe=>Pe.uid===ke.uid?(0,Z.Z)((0,Z.Z)({},Pe),{},{status:"uploading"}):Pe),x.onChange&&x.onChange(A({file:le.current.file,fileList:le.current.fileList}))},onSuccess(ke,Pe){le.current.file=Pe,le.current.fileList=le.current.fileList.map(Ae=>Ae.uid===Pe.uid?(0,Z.Z)((0,Z.Z)({},Ae),{},{response:ke,status:"done"}):Ae),x.onChange&&x.onChange(A({file:le.current.file,fileList:le.current.fileList}))},onError(ke,Pe){x.onChange(A({file:le.current.file,fileList:le.current.fileList.map(Ae=>Ae.url?Ae:(0,Z.Z)((0,Z.Z)({},Ae),{},{status:"error"}))}))},onProgress(ke,Pe){var Ae=ke.percent;le.current.file=Pe,le.current.fileList=le.current.fileList.map(Re=>Re.uid===Pe.uid?(0,Z.Z)((0,Z.Z)({},Re),{},{percent:Ae}):Re),x.onChange&&x.onChange(A({file:le.current.file,fileList:le.current.fileList}))}},we=(0,Z.Z)((0,Z.Z)({},We),Se);return E().createElement(E().Fragment,null,E().createElement(L.Z,we,x.render((0,Z.Z)({},x))))},M=(0,c.Z)()($);function A(x){var le=x.file,Se=x.fileList;return{file:(0,Z.Z)({},le),fileList:Se.map(Ee=>{var xe=Ee.response,Ue=Ee.name,Ge=Ee.type,We=Ee.size,we=Ee.status,ke=Ee.percent,Pe=Ee.uid,Ae=Ee.url;if(xe){var Re=xe.data,Je=xe.error;return Je?(0,Z.Z)((0,Z.Z)((0,Z.Z)({},Ee),Re),{},{status:"error"}):(0,Z.Z)((0,Z.Z)((0,Z.Z)({},Ee),Re),{},{url:"".concat(Re.server,"/").concat(Re.fileNewName)})}return{name:Ue,size:We,type:Ge,percent:ke,status:we,url:Ae,uid:Pe}})}}function oe(x){var le=x.name,Se=le.match(/\.([0-9a-z]+)(?:[\?#]|$)/i),Ee=(0,j.Z)(Se,1),xe=Ee[0];switch(xe.toLowerCase()){case".mp3":return W.AUDIO;case".mp4":return W.VIDEO;case".webp":case".svg":case".png":case".gif":case".jpg":case".jpeg":case".jfif":case".bmp":case".dpg":case".ico":return W.IMAGE;default:return""}}function me(x){var le=x.split("/"),Se=le[le.length-1],Ee=Se.split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(Ee)||[""])[0]}var Te=x=>E().createElement(b,(0,R.Z)({},x,{uploadConfig:(0,Z.Z)((0,Z.Z)({},x.uploadConfig),{},{showUploadList:!1,maxCount:1,fileList:x.fileList}),className:"sample_upload_image_container",render:le=>de(le)}));Te.defaultProps={uploadConfig:{listType:"picture-card",maxCount:1},addTitle:"",size:{value:2,unit:"MB"},fileList:[]};var he=(0,c.Z)()(Te),Ze=e(20228),Ve=e(11382),Fe=e(7085),G=e(49101),de=x=>{var le=x.uploadConfig,Se=x.loading,Ee=x.fileList,xe=x.addTitle,Ue=x.changeTip,Ge=Ue===void 0?"":Ue,We=x.imageContainerClassName,we=le.maxCount;return Se?E().createElement(Fe.Z,null):Ee.length>0&&Ee.length<=we?E().createElement("div",{className:"avatar_list_container ".concat(We)},E().createElement("img",{className:"avatar",src:Ee[0].url,alt:"img"}),Ge&&E().createElement("div",{className:"change_btn"},Ge)):E().createElement("div",{className:"avatar_select_container"},E().createElement(G.Z,null),E().createElement("div",{className:"avatar_select_tip"},xe))},ye=x=>{var le=x.uploadConfig,Se=x.loading,Ee=x.fileList,xe=x.selectTip,Ue=le.maxCount;return Se?E().createElement(Fe.Z,null):Ee.length>=Ue?null:E().createElement("div",{className:"picture_select"},E().createElement(G.Z,null),xe&&E().createElement("div",{className:"picture_select_tip"},xe))},Ie=x=>{var le=x.loading,Se=x.fileList,Ee=x.changeTip,xe=x.addTitle,Ue=x.renderClassName,Ge=(0,j.Z)(Se,1),We=Ge[0];return le?E().createElement(Ve.Z,{spinning:le,indicator:E().createElement(Fe.Z,{spin:!0})},E().createElement("div",{className:"class_6f5ad7a8_6cee_4858_99d0_b3dd950f662b ".concat(Ue)})):We?E().createElement("div",{className:"class_6f5ad7a8_6cee_4858_99d0_b3dd950f662b ".concat(Ue)},E().createElement("img",{src:We,alt:"image"}),E().createElement("div",{className:"change_btn"},Ee)):E().createElement("div",{className:"upload_btn_container ".concat(Ue)},E().createElement("div",{className:"upload_btn"},E().createElement(G.Z,null),xe&&E().createElement("div",{className:"avatar_select_tip"},xe)))},Oe=x=>{var le=x.loading,Se=x.fileList,Ee=x.changeTip,xe=x.reset,Ue=x.renderClassName,Ge=_slicedToArray(Se,1),We=Ge[0],we=ke=>{ke.stopPropagation(),xe.resetEvent&&xe.resetEvent(ke)};return le?React.createElement(_Spin,{spinning:le,indicator:React.createElement(LoadingOutlined,{spin:!0})},React.createElement("div",{className:"class_bf5f55ec_25c6_45b1_b5a4_f5b467257caa ".concat(Ue)})):React.createElement("div",{className:"class_bf5f55ec_25c6_45b1_b5a4_f5b467257caa ".concat(Ue)},React.createElement("img",{src:We,alt:"image"}),React.createElement("div",{className:"change_btns"},React.createElement("span",{className:"operate_item operate_change"},Ee),React.createElement("span",{onClick:ke=>{we(ke)},className:"operate_item operate_reset"},xe.tip)))},be=e(84874),ze=x=>{var le=Se=>{x.onChange&&x.onChange(Se)};return E().createElement(M,(0,R.Z)({onChange:le,uploadType:W.VIDEO},x,{uploadConfig:(0,Z.Z)({accept:"video/*",showUploadList:!1},x.uploadConfig),render:()=>E().createElement("span",{className:"icon"},E().createElement(be.Z,{iconClass:"icon-shipinfujian",color:x.iconColor,size:"16px"}))}))};ze.defaultProps={uploadConfig:{listType:"text"},addTitle:""};var He=(0,c.Z)()(ze),je=x=>{var le=Se=>{x.onChange&&x.onChange(Se)};return E().createElement(M,(0,R.Z)({onChange:le,uploadType:W.AUDIO},x,{uploadConfig:(0,Z.Z)({accept:"audio/*",showUploadList:!1},x.uploadConfig),render:()=>E().createElement("span",{className:"icon"},E().createElement(be.Z,{iconClass:"icon-yinpinfujian",size:"16px",color:x.iconColor}))}))};je.defaultProps={uploadConfig:{listType:"text"},addTitle:""};var it=(0,c.Z)()(je),ht=e(22385),mt=e(31097),lt=e(86506),ct=e.n(lt),at=x=>{var le=Se=>{x.onChange&&x.onChange(Se)};return E().createElement(M,(0,R.Z)({onChange:le,uploadType:W.IMAGE},x,{uploadConfig:(0,Z.Z)({accept:"image/*",showUploadList:!1},x.uploadConfig),render:()=>E().createElement(E().Fragment,null,x.uploadImageIcon?x.uploadImageIcon((0,Z.Z)({},x.uploadConfig)):E().createElement(mt.Z,{title:x.t("examination.uploadImgTip"),overlayStyle:{fontSize:"12px"}},E().createElement("span",{className:ct()["icon-container"]},E().createElement(be.Z,{iconClass:"icon-tupianfujian",color:"#979797",size:"16px"}))))}))};at.defaultProps={uploadConfig:{listType:"text"},addTitle:""};var Le=(0,c.Z)()(at),ot=e(34669),Be=e(82833),It=e(12968),nt=e(44208),De=e(54549),yt=e(56653),$e=e.n(yt),Ct=e(76466),rt={OPEN:"open",CLOSE:"close",CUSTOM:"custom"},vt=x=>{var le=x.t,Se=x.preview,Ee=x.previewSize,xe=x.remove,Ue=x.status,Ge=x.name,We=x.extension,we=!Ue||Ue==="done",ke=Ue&&Ue==="error",Pe=x.resourceType||oe({name:Ge,extension:We}),Ae=(0,y.useState)({mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0}),Re=(0,j.Z)(Ae,2),Je=Re[0],et=Re[1],Xe=(0,y.useState)({visible:!1,destroyOnClose:!0,title:le("common.resourcePreview"),onCancel:g}),st=(0,j.Z)(Xe,2),tt=st[0],qe=st[1];function dt(u){var d=u||window.event;d.stopPropagation(),d.cancelBubble=!0,x.onDeleteItem&&x.onDeleteItem()}function ft(u){var d=u.percent,f=u.url;if(we)switch(Pe){case W.IMAGE:return E().createElement("div",{className:$e().cover},E().createElement(nt.Z,{width:Ee,height:Ee,alt:"img",className:$e()["ant-image-container"],src:f}));case W.VIDEO:return E().createElement("div",{className:$e().cover},E().createElement("img",{className:"",src:"https://oss.coolcollege.cn/1815010117263953920.png",alt:"video"}));case W.AUDIO:return E().createElement("div",{className:$e().cover},E().createElement("img",{className:"",src:"https://oss.coolcollege.cn/1815010117280731136.png",alt:"audio"}));default:return null}if(ke)return E().createElement("div",{className:"".concat($e().cover," ").concat($e()["error-cover"])},le("component.uploadFailed"));var I=Math.floor(d);return E().createElement("div",{className:$e().cover},E().createElement("div",{className:$e()["cover-content"]},E().createElement(Be.Z,{showInfo:!1,strokeWidth:4,percent:Math.floor(I)}),E().createElement("span",{className:$e()["progress-tip"]},I>0?"\u4E0A\u4F20\u4E2D...":"\u7B49\u5F85\u4E2D")))}function Ce(){switch(Pe){case W.IMAGE:return E().createElement(be.Z,{iconClass:"icon-FView",size:"16px",color:"#fff"});case W.VIDEO:case W.AUDIO:return E().createElement(be.Z,{iconClass:"icon-bofang",size:"22px",color:"#fff"});default:return null}}function m(u,d){var f=d.type,I=d.url,D=d.resourceList,l=d.resourceType,o=d.index,r=u||window.event;if(r.stopPropagation(),r.cancelBubble=!0,Se!==rt.CLOSE){if(Se===rt.CUSTOM&&x.onPreview){x.onPreview({resourceList:D,resourceType:l,index:o,e:u});return}if(l.includes(W.VIDEO)||f.includes(W.AUDIO)){var p=x.extension==="mp3";et((0,Z.Z)((0,Z.Z)({},Je),{},{watchType:"video",resourceInfo:{source:{FD:I,OD:I},originUrl:I,contentType:p?"audio/mp3":l},autoPlay:!0,draggable:!0})),qe((0,Z.Z)((0,Z.Z)({},tt),{},{visible:!0}))}}}function g(u){var d=u||window.event;d.stopPropagation(),d.cancelBubble=!0,et({mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0}),qe((0,Z.Z)((0,Z.Z)({},tt),{},{visible:!1}))}return E().createElement(E().Fragment,null,E().createElement("div",{className:$e()["resource-item-container"],style:{width:"".concat(Ee,"px"),height:"".concat(Ee,"px")}},ft(x),(!Ue||Ue==="done"||Ue==="error")&&E().createElement("div",null,Se!==rt.CLOSE&&Ue!=="error"&&Pe!==W.IMAGE&&E().createElement("div",{className:$e().mask,onClick:u=>{m(u,x)}},Ce(x)),xe&&E().createElement("div",{className:$e().delete,onClick:dt},E().createElement(De.Z,{className:$e()["delete-icon"]})))),Se===rt.OPEN&&Pe!==W.IMAGE&&E().createElement(Ct.Z,(0,R.Z)({},Je,{previewInfo:tt})))};vt.defaultProps={preview:rt.OPEN,previewSize:72,remove:!0,resourceType:""};var gt=(0,c.Z)()(vt)},51975:function(Me,pe,e){"use strict";e.d(pe,{l:function(){return Q}});var K=e(62029),L=e(12924),R=e.n(L),Q=(ee,Z)=>function(y){return R().createElement(ee.Consumer,null,E=>R().createElement(Z,(0,K.Z)({},y,{contextData:E})))}},4671:function(Me,pe,e){"use strict";e.d(pe,{Z:function(){return ze}});var K=e(57338),L=e(83107),R=e(20228),Q=e(11382),ee=e(66456),Z=e(55313),j=e(88983),y=e(47933),E=e(88986),c=e(93485),P=e(49111),n=e(19650),F=e(57663),N=e(71577),_=e(34792),s=e(48086),ie=e(57361),z=e(33565),W=e(47673),U=e(4107),b=e(18106),ae=e(88108),H=e(9754),$=e.n(H),M=e(12924),A=e.n(M),oe=e(96486),me=e.n(oe),Te=e(76651),he=e(88487),Ze=e(99574),Ve=e.n(Ze),Fe=e(6793),G=e(57497),de=e(60667),ye=e(67222),Ie=ae.Z.TabPane,Oe=U.Z.Search,be=[];function ze(He){var je=He.visible,it=je===void 0?!1:je,ht=He.onOk,mt=ht===void 0?()=>{}:ht,lt=He.onCancel,ct=lt===void 0?()=>{}:lt,at=He.checkedList,Le=at===void 0?be:at,ot=He.maxLength,Be=ot===void 0?100:ot,It=He.fromMicro,nt=It===void 0?!1:It,De=He.t,yt=He.pageName,$e=He.qyShield,Ct=$e===void 0?"false":$e,rt=He.hasTask,vt=rt===void 0?!1:rt,gt=He.required,x=gt===void 0?!1:gt,le=window.screen.height,Se=nt?420:460,Ee=Ct==="false",xe=(0,M.useState)(!1),Ue=(0,z.Z)(xe,2),Ge=Ue[0],We=Ue[1],we=(0,M.useState)([]),ke=(0,z.Z)(we,2),Pe=ke[0],Ae=ke[1],Re=(0,M.useState)(""),Je=(0,z.Z)(Re,2),et=Je[0],Xe=Je[1],st=(0,M.useState)(nt?"micro_course":"course"),tt=(0,z.Z)(st,2),qe=tt[0],dt=tt[1],ft=(0,M.useState)("type"),Ce=(0,z.Z)(ft,2),m=Ce[0],g=Ce[1],u=(0,M.useState)(0),d=(0,z.Z)(u,2),f=d[0],I=d[1],D=(0,M.useState)(le-Se),l=(0,z.Z)(D,1),o=l[0],r=(0,M.useState)(""),p=(0,z.Z)(r,2),O=p[0],T=p[1],w=(0,M.useState)({current:1,pageSize:20}),B=(0,z.Z)(w,2),re=B[0],se=B[1],ve=(0,M.useState)([]),V=(0,z.Z)(ve,2),S=V[0],C=V[1];(0,M.useEffect)(()=>{it&&t()},[it,re,m,qe]);var t=function(){var X=(0,ie.Z)($().mark(function te(){var ne,ge,Ne,Ke,Ye;return $().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return We(!0),ut.next=3,(0,he.tS)({pageNumber:re.current,pageSize:re.pageSize,classifyId:"",queryType:"",title:et,statusType:"all",sortType:"all",classifyType:m==="type"?qe:m,image_text:m==="type"&&qe==="imageText"?!0:"",liveCourseStatus:m==="type"&&qe==="live_course"?Ee:!1,auth_type:"refer",userIds:O});case 3:ne=ut.sent,We(!1),ge=ne.data,Ne=ge.list,Ke=Ne===void 0?[]:Ne,Ye=ge.total,C(Ke),I(Ye);case 8:case"end":return ut.stop()}},te)}));return function(){return X.apply(this,arguments)}}(),i=()=>{if(x&&!Pe.length){s.default.warning(De("customFields.selectAtLeastOneContent"));return}mt(Pe)};(0,M.useEffect)(()=>{Ae(Le)},[Le]);var v=A().createElement(A().Fragment,null,A().createElement("div",{style:{float:"left"}},De("customFields.selected"),Pe.length,De("component.itemUnit")),A().createElement(n.Z,{style:{float:"right"}},A().createElement(N.Z,{onClick:ct},De("common.cancel")),A().createElement(N.Z,{onClick:i,type:"primary"},De("common.ok")))),h=[{dataIndex:"title",key:"title",title:De("learnRecord.courseName"),ellipsis:{showTitle:!0},width:200},{dataIndex:"classifyName",key:"classifyName",width:120,title:De("setting.classifyLabel"),ellipsis:{showTitle:!0}},{dataIndex:"isAll",key:"isAll",title:De("course.courseCreatePanelFTRange"),width:120,render:X=>De(X===1?"common.allCompany":"setting.partlyVisible")},{title:De("course.courseOrigin"),dataIndex:"coverType",key:"coverType",width:120,render:(X,te)=>te.scope===2?te.original?De("course.original"):De("course.courseDetailOriginalFalse"):De("course.purchased")},{title:De("component.lecturer"),dataIndex:"teacherName",key:"teacherName",width:120,render:(X,te)=>A().createElement(de.Z,{dataType:"userName",value:te.teacher_sync_user_id,name:te.teacherName,type:te.teacher_source_type})||"--"},{title:De("common.creator"),dataIndex:"createUserName",key:"createUserName",width:120,render:(X,te)=>A().createElement(de.Z,{dataType:"userName",value:te.creator_sync_user_id,name:te.createUserName,type:te.creator_source_type})||"--"}],a=[{dataIndex:"title",key:"title",title:De("learnRecord.courseName"),ellipsis:{showTitle:!0},width:200},{dataIndex:"classifyName",key:"classifyName",width:120,title:De("setting.classifyLabel"),ellipsis:{showTitle:!0}},{title:De("common.status"),dataIndex:"status",key:"status",width:90,render:X=>{switch(X){case 2:return De("common.ended");case 3:return De("common.notStarted");default:return De("common.ongoing")}}},{title:De("common.creator"),dataIndex:"creatorName",key:"creatorName",width:90,render:(X,te)=>A().createElement(de.Z,{dataType:"userName",value:te.creator_sync_user_id,name:X,type:te.creator_source_type})},{title:De("common.createTime"),dataIndex:"createTime",key:"createTime",width:145,render:(X,te)=>{var ne=te.createTime;return(0,Fe.p6)(ne,"yyyy-MM-dd hh:mm")},onCell:()=>({style:{minWidth:100}})},{title:De("study.duration"),dataIndex:"beginTime",key:"beginTime",width:270,render:(X,te)=>te.taskType===6?"--":"".concat((0,Fe.p6)(te.beginTime,"yyyy-MM-dd hh:mm")," ~ ").concat((0,Fe.p6)(te.endTime,"yyyy-MM-dd hh:mm")),onCell:()=>({style:{minWidth:120,maxWidth:270}})}],k=(X,te)=>{if(te){if(Pe.length+1>Be){s.default.warning((0,Fe.ZT)("".concat(De("customFields.courseLimit")),Be));return}var ne=me().cloneDeep(Pe);ne.push(X),Ae(ne)}else{var ge=[],Ne=(0,c.Z)(Pe),Ke;try{for(Ne.s();!(Ke=Ne.n()).done;){var Ye=Ke.value;X.id!==Ye.id&&ge.push(Ye)}}catch(ce){Ne.e(ce)}finally{Ne.f()}Ae(ge)}},Y=(X,te,ne)=>{if(X){if(Pe.length+ne.length>Be){s.default.warning((0,Fe.ZT)("".concat(De("customFields.courseLimit")),Be));return}var ge=Pe.map(Dt=>Dt.id),Ne=me().cloneDeep(Pe),Ke=(0,c.Z)(ne),Ye;try{for(Ke.s();!(Ye=Ke.n()).done;){var ce=Ye.value;ge.includes(ce.id)||Ne.push(ce)}}catch(Dt){Ke.e(Dt)}finally{Ke.f()}Ae(Ne)}else{var ut=[],pt=ne.map(Dt=>Dt.id),_e=(0,c.Z)(Pe),Qe;try{for(_e.s();!(Qe=_e.n()).done;){var Et=Qe.value;pt.includes(Et.id)||ut.push(Et)}}catch(Dt){_e.e(Dt)}finally{_e.f()}Ae(ut)}},J=function(){var X=(0,ie.Z)($().mark(function te(ne){var ge,Ne,Ke,Ye,ce,ut,pt;return $().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(ge=(0,Te.Qm)()._store,Ne=ge.getState(),Ke=Ne.user.appType,Ye=localStorage.getItem("qyWechatBook"),ce=Ke==="wx_app"&&Ye==="true",!(ne&&ce)){Qe.next=17;break}return Qe.prev=5,Qe.next=8,(0,ye.F_)(ne);case 8:ut=Qe.sent,pt=ut.data,pt.success?T(pt.data):T(""),Qe.next=17;break;case 13:Qe.prev=13,Qe.t0=Qe.catch(5),console.error(Qe.t0),T("");case 17:se((0,E.Z)((0,E.Z)({},re),{},{current:1})),Xe(ne);case 19:case"end":return Qe.stop()}},te,null,[[5,13]])}));return function(ne){return X.apply(this,arguments)}}(),ue=X=>{dt(X.target.value),se((0,E.Z)((0,E.Z)({},re),{},{current:1}))},q=X=>{g(X),Xe(""),T(""),se({current:1,pageSize:20}),X==="type"&&dt("course")},fe=()=>(0,G.D)()?"".concat(De("live.live"),"/").concat(De("live.conference")):De("live.live");return A().createElement(L.Z,{title:De("setting.selectCourseBtn"),visible:it,onClose:ct,className:"choose-course-class-drawer",width:window.innerWidth*.7,footer:v},A().createElement(Q.Z,{spinning:Ge},nt?null:A().createElement(ae.Z,{onChange:q,value:m},A().createElement(Ie,{tab:De("common.courseLabel"),key:"type"}),A().createElement(Ie,{tab:De("learning.learningProjectAddTitle"),key:"study_project"}),vt&&A().createElement(Ie,{tab:De("learning.learningElectiveAddTitle"),key:"study_plan"})),A().createElement("div",{className:"".concat(Ve().header," ").concat(nt?Ve()["margin-header"]:"")},m==="type"&&!nt&&yt!=="visitor"?A().createElement(y.ZP.Group,{onChange:ue,value:qe},A().createElement(y.ZP,{value:"course"},De("common.courseLabel")),A().createElement(y.ZP,{value:"imageText"},De("leftMenuLists.graphicManagement")),Ee&&A().createElement(y.ZP,{value:"live_course"},fe())):A().createElement("div",null),A().createElement(Oe,{placeholder:De("searchInputPlaceholder.course"),style:{width:"300px"},value:et,onChange:X=>Xe(X.target.value),onSearch:J,className:Ve()["input-style"],allowClear:!0})),A().createElement(Z.Z,{dataSource:S,columns:m==="study_plan"?a:h,scroll:{y:"".concat(o,"px")},rowKey:"id",rowSelection:{selectedRowKeys:Pe.map(X=>X.id),onSelect:k,onSelectAll:Y},pagination:{total:f,pageSize:re.pageSize,current:re.current,onChange:(X,te)=>se((0,E.Z)((0,E.Z)({},re),{},{current:X,pageSize:te})),showTotal:X=>"".concat((0,Fe.ZT)(De("lineClassStudy.pageTotal"),X))}})))}},88487:function(Me,pe,e){"use strict";e.d(pe,{Y:function(){return ee},JM:function(){return j},cG:function(){return n},D1:function(){return F},XL:function(){return _},WF:function(){return s},fV:function(){return ie},Tw:function(){return z},ZS:function(){return W},xm:function(){return U},tS:function(){return ae},Ad:function(){return $},O$:function(){return M},ws:function(){return A},wM:function(){return oe},PU:function(){return me},yH:function(){return Te},Bw:function(){return he},zQ:function(){return Ze},zB:function(){return Ve},HH:function(){return Fe}});var K=e(10237),L=e(37055),R=e(5430),Q=()=>{var G=CONFIG.Personal.getMyScoreSummary();return request.get({url:G})},ee=(G,de)=>{var ye=L.ZP.points.myIntegral(G);return K.WY.get({url:ye,params:{type:de}})},Z=G=>{var de=G.pageNumber,ye=de===void 0?1:de,Ie=G.pageSize,Oe=Ie===void 0?1:Ie,be="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/user_class_hour_ranking");return request.get({url:be,params:{page_size:Oe,page_number:ye}})},j=()=>{var G="".concat("https://app123492.eapps.dingtalkcloud.com","/platform-api/biz/course/getHomeCourselist");return K.WY.get({url:G,params:{}})},y=()=>{var G="".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/home_page/my_integralV2");return request.get({url:G,params:{}})},E=()=>{var G="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/user/").concat(CONFIG.userId,"/my_integral");return request.get({url:G,params:{enterprise_id:CONFIG.enterpriseId,user_id:CONFIG.userId}})},c=G=>{var de=G.pageNumber,ye=de===void 0?1:de,Ie=G.pageSize,Oe=Ie===void 0?3:Ie,be="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/integral/integral_listV2");return request.get({url:be,params:{page_size:Oe,page_number:ye,department_id:"",begin_time:"",end_time:"",name:""}})},P=G=>{var de=G.pageNumber,ye=de===void 0?1:de,Ie=G.pageSize,Oe=Ie===void 0?3:Ie,be="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/scores");return request.get({url:be,params:{page_size:Oe,page_number:ye}})},n=G=>{var de=G.template_id,ye="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(L.ZP.enterpriseId,"/query_index_score_rank_new");return K.WY.get({url:ye,params:{user_id:L.ZP.userId,template_id:de}})},F=G=>{var de=G.template_id,ye=G.page_num,Ie=ye===void 0?3:ye,Oe="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(L.ZP.enterpriseId,"/integral/home/rank");return K.WY.get({url:Oe,params:{template_id:de,page_num:Ie}})},N=()=>{var G="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/users/").concat(CONFIG.userId,"/base_score");return request.get({url:G,params:{dept_id:1}})},_=G=>{var de=G.status,ye=de===void 0?1:de,Ie=G.type,Oe=Ie===void 0?"":Ie,be=G.lecturer_ids,ze=be===void 0?[]:be,He=G.pageNumber,je=G.pageSize,it="".concat("https://app123492.eapps.dingtalkcloud.com","/teacher-manage-api/v2/").concat(L.ZP.enterpriseId,"/home_lecturers");return K.WY.get({url:it,params:{status:ye,type:Oe,lecturer_ids:ze,page_size:je,page_number:He}})},s=()=>{var G="".concat("https://app123492.eapps.dingtalkcloud.com","/cmdb-api/v2/").concat(L.ZP.enterpriseId,"/home_page/default_banner/query");return K.WY.get({url:G,params:{}})};function ie(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{page:0,size:3,t:"SPACE",text:"",enable:!0},de=L.ZP.community.manageSearch();return K.WY.get({url:de,params:G})}function z(G){var de=L.ZP.community.getSpaceByIds();return K.WY.post({url:de,data:{space_ids:G}})}function W(G){var de=G.page_number,ye=de===void 0?1:de,Ie=G.page_size,Oe=Ie===void 0?3:Ie,be=L.ZP.home.tasks();return K.WY.get({url:be,params:{page_number:ye,page_size:Oe}})}function U(){var G=L.ZP.Notice.getNoticeList();return K.WY.get({url:G,params:{page_size:"5",page_number:"1",is_manage:!1}})}function b(G){var de=G.courseId,ye=G.appId,Ie=ye===void 0?"cool":ye,Oe=CONFIG.DdLive.getLiveDetail();return request.get({url:Oe,params:{courseId:de,appId:Ie}})}function ae(G){var de=L.ZP.Courses.getCourseList();return K.WY.get({url:de,params:G})}function H(G){var de=G.ids,ye=G.page_number,Ie=ye===void 0?1:ye,Oe=G.page_size,be=Oe===void 0?3:Oe,ze=CONFIG.CourseManagement.batchQueryByCustom();return request.post({url:ze,params:{page_number:Ie,page_size:be},data:{condition_ids:de}})}function $(){var G=R.ZP.homeMobileConfig.getPorcelainArea();return K.WY.get({url:G,params:{}})}function M(){var G=R.ZP.PlatformCourse.getRecommendCourses();return K.WY.get({url:G,params:{page_size:"8",page_number:"1",position:"course_mall"}})}function A(G){var de=R.ZP.Common.upload();return K.WY.post({url:de,data:G})}function oe(G){var de=R.ZP.Courses.getComponentCourseByIds();return K.WY.post({url:de,data:G,params:{pageNumber:G.pageNumber,pageSize:G.pageSize}})}function me(G){var de=G.resource_id,ye=G.type,Ie={8:"course",3:"project",2:"course",6:"image_text",0:"course"},Oe=R.ZP.MobileSetting.checkBannerVisible();return K.WY.get({url:Oe,params:{resource_id:de,type:Ie[ye]}})}function Te(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],de=L.ZP.points.getDailyTask();return K.WY.post({url:de,data:{event_codes:G}})}function he(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],de=L.ZP.points.getTaskRulesConfig();return K.WY.post({url:de,data:{event_codes:G}})}function Ze(){var G=L.ZP.DailySignIn.signShow();return K.WY.get({url:G})}function Ve(){var G=L.ZP.DailySignIn.signIn();return K.WY.post({url:G})}function Fe(G){var de=L.ZP.points.pickPoints();return K.WY.get({url:de,params:{eventCode:G}})}},22929:function(Me,pe,e){"use strict";e.d(pe,{Z:function(){return I}});var K=e(57663),L=e(71577),R=e(13062),Q=e(71230),ee=e(89032),Z=e(15746),j=e(62029),y=e(47673),E=e(4107),c=e(88986),P=e(12924),n=e.n(P),F=e(28216),N=e(91768),_=e(59239),s=e(55446),ie=e(77576),z=e(59314),W=e(24144);class U extends n().Component{constructor(l){super(l);this.onUploadChange=o=>{var r=o.fileList,p=r.length>0?r[0].url:"";this.setState({imageUrl:p},()=>{this.triggerChange({imageUrl:p})})},this.triggerChange=o=>{var r=this.props.onChange;r&&r((0,c.Z)((0,c.Z)({},this.state),o))},this.handleSwitch=o=>{o?this.setState({type:""}):this.setState({type:"crop"})},this.state={imageUrl:l.value.imageUrl,type:"crop"}}render(){var l=this.props,o=l.prefixCls,r=l.t,p=this.state,O=p.imageUrl,T=p.type;return n().createElement("section",{className:"".concat(o)},n().createElement("div",null,n().createElement(z.Z,{defaultChecked:!1,onChange:this.handleSwitch}),n().createElement("span",{className:"item-margin"},r("resourceLibrary.originUpload"))),n().createElement("div",{className:"img_upload_line"},n().createElement("div",{className:"AvatarUpload_container"},n().createElement(W.G2,{addTitle:r("integralMall.uploadImgLabel"),imageContainerClassName:"upload_avatar_container",fileList:O?[{url:O}]:[],uploadConfig:{accept:"jpeg, jpg, png"},onUploadedListChange:this.onUploadChange,size:{value:3,unit:"MB"},clip:T,imgCropConfig:{widthScale:1,heightScale:1}})),n().createElement("div",{className:"upload__tips"},r("integralMall.uploadImgTip"))))}}U.defaultProps={prefixCls:"goods-cover"};var b=(0,N.Z)()(U),ae=e(67620);class H extends n().Component{constructor(l){super(l);this.handleChange=o=>{var r=o,p=this.getText().replace(/&nbsp;/g,"");"value"in this.props||this.setState({description:r}),!(!r&&r===this.props.value.description)&&this.triggerChange({description:r,text:p})},this.triggerChange=o=>{var r=this.props.onChange;r&&r((0,c.Z)((0,c.Z)({},this.state),o))},this.getHtml=()=>{var o=this.editorInstance.getHtml();return o},this.getText=()=>{var o,r=(o=this.editorInstance)===null||o===void 0?void 0:o.getText();return r},this.state={description:l.value.description}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){var l=this.props.prefixCls,o="".concat(l);return n().createElement("div",{className:o},n().createElement(ae.Z,{ref:r=>this.editorInstance=r,placeholder:this.state.description,onChange:this.handleChange,controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","image","undo","redo"]}))}}H.defaultProps={prefixCls:"goods-editor"};var $=H,M=e(77883),A=e(21888);class oe extends P.Component{constructor(l){super(l);this.handleChange=o=>{var r=o;"value"in this.props||this.setState({score:r}),this.triggerChange({score:r})},this.triggerChange=o=>{var r=this.props.onChange;r&&r(Object.assign({},this.state,o))},this.state={score:l.value.score}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){var l=this.state.score;return n().createElement("div",{className:"score-container"},n().createElement(A.Z,{max:99999,min:1,style:{width:"88px"},value:l,onChange:this.handleChange}),n().createElement("span",{className:"score-unit"},"\u5206"))}}var me=(0,N.Z)()(oe);class Te extends P.Component{constructor(l){super(l);this.handleChange=o=>{var r=o;"value"in this.props||this.setState({inventory:r}),this.triggerChange({inventory:r})},this.triggerChange=o=>{var r=this.props.onChange;r&&r(Object.assign({},this.state,o))},this.state={inventory:l.value.inventory}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){var l=this.state.inventory;return n().createElement(n().Fragment,null,n().createElement(A.Z,{max:99999,min:1,style:{width:"88px"},value:l,onChange:this.handleChange}),n().createElement("span",{style:{marginLeft:"10px"}},"\u4EF6"))}}var he=Te;class Ze extends P.Component{constructor(l){super(l);this.handleChange=o=>{var r=o;"value"in this.props||this.setState({convert:r}),this.triggerChange({convert:r})},this.triggerChange=o=>{var r=this.props.onChange;r&&r(Object.assign({},this.state,o))},this.state={convert:l.value.convert}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){var l=this.state.convert,o=this.props.t;return n().createElement("div",null,n().createElement(z.Z,{checked:l,checkedChildren:o("customFields.open"),unCheckedChildren:o("customFields.close"),onChange:this.handleChange}))}}var Ve=(0,N.Z)()(Ze),Fe=e(14965),G=e(11448),de=e(88983),ye=e(47933),Ie=e(78138),Oe=e.n(Ie),be="YYYY-MM-DD HH:mm";class ze extends n().Component{constructor(l){super(l);this.handleChange=o=>{var r=o.target.value;"value"in this.props||this.setState({deadlineType:r}),this.triggerChange({deadlineType:r})},this.triggerChange=o=>{var r=this.props.onChange;r&&r(Object.assign({},this.state,o))},this.disabledDate=o=>o&&o<Oe()().endOf("hour").subtract(1,"days"),this.handlePickerChange=(o,r)=>{var p="";r&&(p=Oe()(r).format("YYYY-MM-DD HH:mm:ss")),"value"in this.props||this.setState({deadline:p}),this.triggerChange({deadline:p})},this.state={deadlineType:l.value.is_time_limited,deadline:l.value.expire_time}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){var l=this.props.t,o=this.state,r=o.deadlineType,p=o.deadline;return n().createElement("div",null,n().createElement(ye.ZP.Group,{name:"deadlineGroup",value:r,onChange:this.handleChange,buttonStyle:"solid"},n().createElement(ye.ZP,{value:!1},l("integralMall.notLimitLabel")),n().createElement(ye.ZP,{value:!0},l("integralMall.selfDefined"))),n().createElement(G.Z,{defaultValue:p>0?Oe()(p):null,format:be,disabledDate:this.disabledDate,disabled:!r,showTime:{defaultValue:Oe()()},onChange:this.handlePickerChange,style:{marginLeft:"10px"}}))}}var He=(0,N.Z)()(ze),je=e(54549),it=e(50361),ht=e.n(it),mt=e(88311),lt=e(84874),ct=e(60667),at=e(26885);class Le extends P.Component{constructor(l){var o;super(l);o=this,this.removeUser=r=>{var p=this.state.org,O=p.initData,T=O.dept,w=O.group,B=O.post,re=O.user;re.splice(r,1);var se={dept:T,group:w,post:B,user:re};this.setState({org:(0,c.Z)((0,c.Z)({},p),{},{initData:se})}),this.triggerChange({rangeList:se})},this.removeDept=(r,p)=>{var O=this.state.org,T=O.initData,w=T.dept,B=T.group,re=T.post,se=T.user;switch(r){case"dept":w.splice(p,1);break;case"group":B.splice(p,1);break;case"post":re.splice(p,1);break;default:break}var ve={dept:w,group:B,post:re,user:se};this.setState({org:(0,c.Z)((0,c.Z)({},O),{},{initData:ve})}),this.triggerChange({rangeList:ve})},this.handleAdd=()=>{var r=this.state.org,p=localStorage.getItem("authorityType"),O=this.props.user,T=O.appType,w=O.loginMode;if(T==="wx_app"&&w==="WE_COM"&&p==="1"){this.handleSelectWx();return}this.setState({org:(0,c.Z)((0,c.Z)({},r),{},{visible:!0})})},this.handleSelectWx=()=>{var r=this.props.user,p=this.state.org.initData,O=p.user.map(T=>T.unionid||T.user_id);(0,at.Sk)({userIds:O,deptIds:[]}).then(T=>{(0,at.$f)({result:T,user:r}).then(w=>{var B=w.qyWeChatVo,re=w.rangeList,se=ht()(p);se.user=re.user.map((ve,V)=>(0,c.Z)((0,c.Z)({},ve),{},{id:V+1})),this.setState({qyWeChatVo:B,org:{initData:se,visible:!1}},()=>{this.triggerChange({rangeList:this.state.org.initData})})})}).catch(()=>{})},this.handleAddUsersOk=r=>{var p=this.state.org,O=r.dept,T=r.group,w=r.post,B=r.user,re={dept:O,group:T,post:w,user:B};this.setState({org:(0,c.Z)((0,c.Z)({},p),{},{visible:!1,initData:re})}),this.triggerChange({rangeList:re})},this.triggerChange=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=o.props,O=p.onChange,T=p.setFieldsValue;O&&O((0,c.Z)({},r)),T&&T({qyWeChatVo:o.state.qyWeChatVo})},this.handleAddUsersCancel=()=>{var r=this.state.org;this.setState({org:(0,c.Z)((0,c.Z)({},r),{},{visible:!1})})},this.state={org:{visible:!1,initData:l.value.rangeList||{}},qyWeChatVo:""}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){var l=this.state.org,o=this.props.t,r=l.initData,p=r.dept,O=r.group,T=r.post,w=r.user;return n().createElement("div",null,n().createElement("div",{className:"choose"},n().createElement(L.Z,{type:"primary",ghost:!0,onClick:this.handleAdd},n().createElement(lt.Z,{iconClass:"icon-icon_addx"}),o("common.deptAndStu"))),n().createElement("div",{className:"goods__selected"},n().createElement("div",{className:"goods__selected__list"},w.map((B,re)=>n().createElement("div",{className:"goods__selected__list__item",key:B.id},n().createElement(ct.Z,{dataType:"userName",value:B.unionid||B.user_id,name:B.name,type:B.source_type||B.sourceType}),n().createElement("span",{className:"goods__selected__list__item__close",onClick:()=>this.removeUser(re)},n().createElement(je.Z,{style:{fontSize:"8px",color:"#afb5d2"}}))))),n().createElement("div",{className:"goods__selected__list"},p.map((B,re)=>n().createElement("div",{className:"goods__selected__list__item",key:B.id},n().createElement(ct.Z,{dataType:"departmentName",value:B.id,name:B.name,type:B.source_type||B.sourceType}),n().createElement("span",{className:"goods__selected__list__item__close",onClick:()=>this.removeDept("dept",re)},n().createElement(je.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))),O.map((B,re)=>n().createElement("div",{className:"goods__selected__list__item",key:B.id},B.name,n().createElement("span",{className:"goods__selected__list__item__close",onClick:()=>this.removeDept("group",re)},n().createElement(je.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))),T.map((B,re)=>n().createElement("div",{className:"goods__selected__list__item",key:B.id},B.name,n().createElement("span",{className:"goods__selected__list__item__close",onClick:()=>this.removeDept("post",re)},n().createElement(je.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))))),l.visible?n().createElement(mt.Z,(0,j.Z)({},l,{title:o("integralMall.chooseExchangeObject"),onOk:this.handleAddUsersOk,onCancel:this.handleAddUsersCancel})):null)}}var ot=D=>({user:D.user}),Be=(0,F.$j)(ot)((0,N.Z)()(Le)),It=e(22385),nt=e(31097),De=e(68628),yt=e(56734),$e=e.n(yt),Ct=e(40646);class rt extends n().Component{constructor(l){super(l);this.onChange=r=>{var p=this.props,O=p.onChange,T=p.value,w;T.includes(r.value)?w=r.checked?T:T.filter(B=>B!==r.value):w=r.checked?[...T,r.value]:T,O(w)},this.getTitle=()=>{var r=this.props.t;return n().createElement("div",null,n().createElement("div",null,r("integralMall.selectZitiTips")),n().createElement("div",null,r("integralMall.selectMallTips")))};var o=l.t;this.state={options:[{label:o("integralMall.afhalen"),value:0},{label:o("integralMall.mail"),value:1}]}}render(){var l=this.state.options,o=this.props.value;return n().createElement("div",{className:$e().checkBox},n().createElement(Ct.l,{values:o,options:l,onChange:this.onChange}),n().createElement(nt.Z,{title:this.getTitle()},n().createElement("span",{className:$e().icon},n().createElement(De.Z,null))))}}var vt=()=>({}),gt=(0,N.Z)()((0,F.$j)(vt)(rt));class x extends n().Component{constructor(l){super(l);this.handleChange=o=>{var r=o.target.value;"value"in this.props||this.setState({deliverUser:r}),this.triggerChange({deliverUser:r})},this.triggerChange=o=>{var r=this.props.onChange;r&&r(Object.assign({},this.state,o))},this.state={deliverUser:l.value.deliverUser}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){return n().createElement(E.Z,{type:"text",style:{width:"490px"},maxLength:30,value:this.state.deliverUser,onChange:this.handleChange})}}var le=x;class Se extends n().Component{constructor(l){super(l);this.handleChange=o=>{var r=o.target.value;"value"in this.props||this.setState({contact:r}),this.triggerChange({contact:r})},this.triggerChange=o=>{var r=this.props.onChange;r&&r(Object.assign({},this.state,o))},this.state={contact:l.value.contact}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){return n().createElement(E.Z,{type:"text",style:{width:"490px"},maxLength:15,value:this.state.contact,onChange:this.handleChange})}}var Ee=Se;class xe extends n().Component{constructor(l){super(l);this.handleChange=o=>{var r=o.target.value;"value"in this.props||this.setState({address:r}),this.triggerChange({address:r})},this.triggerChange=o=>{var r=this.props.onChange;r&&r(Object.assign({},this.state,o))},this.state={address:l.value.address}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){return n().createElement(E.Z,{type:"text",style:{width:"490px"},maxLength:100,value:this.state.address,onChange:this.handleChange})}}var Ue=xe,Ge=e(49101),We=e(40118),we=e.n(We),ke=e(66456),Pe=e(55313),Ae=e(49111),Re=e(19650),Je=D=>{var l=D.listData,o=l===void 0?[]:l,r=D.t,p=D.onDelete,O=se=>{switch(se){case"course":return"".concat("https://oss.coolcollege.cn","/1826458120071811072.png");case"study_project":return"".concat("https://oss.coolcollege.cn","/1826458120243777536.png");case"study_plan":return"".concat("https://oss.coolcollege.cn","/1826458120235388928.png");default:return"".concat("https://oss.coolcollege.cn","/1826458120071811072.png")}},T=se=>{switch(se){case"course":return"common.courseLabel";case"study_project":return"learning.learningProjectAddTitle";case"study_plan":return"learning.learningElectiveAddTitle";default:return"common.courseLabel"}},w=(se,ve)=>{switch(se){case 4:return n().createElement(n().Fragment,null,n().createElement("span",{className:we().unNormal},r(T(ve))),n().createElement("span",{className:we().unNormal_status},r("courseManage.unPublished")));case 3:return n().createElement(n().Fragment,null,n().createElement("span",{className:we().unNormal},r(T(ve))),n().createElement("span",{className:we().unNormal_status},r("common.notStarted")));case 2:return n().createElement(n().Fragment,null,n().createElement("span",{className:we().unNormal},r(T(ve))),n().createElement("span",{className:we().unNormal_status},r("common.ended")));case 1:return n().createElement("span",null,r(T(ve)));case-1:return n().createElement(n().Fragment,null,n().createElement("span",{className:we().unNormal},r(T(ve))),n().createElement("span",{className:we().unNormal_status},r("common.deleted")));default:return n().createElement("span",null,r(T(ve)))}},B=[{title:r("common.name"),dataIndex:"title",width:350,render:(se,ve)=>{var V=ve.con_type;return n().createElement("div",{className:we().title},n().createElement("img",{src:O(V),alt:"",className:we().icon}),n().createElement(nt.Z,{title:se},n().createElement("span",{className:we().text},se)))}},{title:r("integralMall.type"),dataIndex:"con_type",render:(se,ve)=>{var V=ve.con_status;return n().createElement("div",{className:we().type},w(V,se))}},{title:r("common.operate"),key:"operate",width:90,render:(se,ve)=>{var V=ve.id;return n().createElement(Re.Z,null,n().createElement(nt.Z,{title:o.length===1?r("integralMall.onlyOneTip"):null},n().createElement("span",{className:we().operateBtn,disabled:o.length===1,onClick:()=>re(V)},r("common.delete"))))}}],re=se=>{o.length!==1&&p&&p(se)};return n().createElement("div",{className:we().conditionTable},n().createElement(Pe.Z,{rowKey:"id",columns:B,dataSource:o,size:"small",pagination:!1,scroll:{y:300}}))},et=(0,N.Z)()(Je),Xe=e(4671);class st extends n().Component{constructor(l){super(l);this.handleChange=o=>{var r=this.state.conditions,p=this.props.value.conditionsType,O;p.includes(o.value)?O=o.checked?p:p.filter(w=>w!==o.value):O=o.checked?[...p,o.value]:p;var T={conditionsType:O};T.conditions=O.includes(o.value)?r:[],"value"in this.props||this.setState(T),O.includes(o.value)&&this.setState({selectCourseVisible:!0}),this.triggerChange(T)},this.triggerChange=o=>{var r=this.props.onChange,p=this.state,O=p.conditionsType,T=p.conditions;r&&r((0,c.Z)({conditionsType:O,conditions:T},o))},this.handleCancel=()=>{var o=this.state,r=o.conditions,p=o.conditionsType;this.setState({selectCourseVisible:!1}),this.triggerChange({conditionsType:r.length?p:p.filter(O=>O!=="learn_assigned")})},this.getConType=o=>{switch(o){case 0:case 6:case 8:return"course";case 3:return"study_project";default:return"study_plan"}},this.handleOkChooseCourse=o=>{o.map(p=>{p.con_status||(p.con_status=p.status||1),p.con_type||(p.con_type=this.getConType(p.bizType))});var r={conditions:o};o.length||(r.conditionsType=this.state.conditionsType.filter(p=>p!=="learn_assigned")),"value"in this.props||this.setState((0,c.Z)({},r)),this.setState({selectCourseVisible:!1}),this.triggerChange(r)},this.handleDelete=o=>{var r=this.state.conditions.filter(p=>p.id!==o);this.handleOkChooseCourse(r)},this.handleSelect=()=>{this.setState({selectCourseVisible:!0})},this.state={conditionsType:l.value.conditionsType||[],conditions:l.value.conditions||[],selectCourseVisible:!1}}static getDerivedStateFromProps(l){return"value"in l?(0,c.Z)({},l.value||{}):null}render(){var l=this.props.t,o=this.state,r=o.conditionsType,p=o.conditions,O=o.selectCourseVisible;return n().createElement("div",{className:we().exchangeConditions},n().createElement("div",{className:we().selectRow},n().createElement(Ct.l,{values:r,options:[{label:l("integralMall.learnAssigned"),value:"learn_assigned"}],onChange:this.handleChange}),r.includes("learn_assigned")&&n().createElement(L.Z,{onClick:this.handleSelect,icon:n().createElement(Ge.Z,null)},l("integralMall.select"))),r.includes("learn_assigned")&&n().createElement(et,{listData:p,onDelete:this.handleDelete}),O&&n().createElement(Xe.Z,{t:l,checkedList:p,onCancel:this.handleCancel,onOk:this.handleOkChooseCourse,visible:O,maxLength:100,hasTask:!0,required:!0}))}}var tt=(0,N.Z)()(st),qe=e(6793),dt=e(37055),ft=e(10237),Ce=e(2396),m={labelAlign:"right",labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:18}}},g={labelAlign:"right",labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:18}}},u={checkGoodsName:dt.ZP.integralMall.checkGoodsName},d=D=>({user:D.user});class f extends P.Component{constructor(){super(...arguments);this.state={initialParams:{name:"",image:"",description:"",score:"",inventory:"",convert:!1,expire_time:"",is_time_limited:!1,deliver_user:this.props.user.appType!=="wx_app"?this.props.user.name:"",deliver_user_contact:"",receive_address:"",rangeList:{dept:[],post:[],group:[],user:[]},deliver_method:[0,1],exchange_demand:[],ids:[]},qyWeChatVo:""},this.checkTitle=(l,o,r)=>{var p=this.props.t,O={operation:this.props.goodsId?"edit":"add",good_name:o,id:this.props.goodsId?this.props.goodsId:""};(0,qe.fy)(o).length&&(0,qe.fy)(o).length<=60?ft.WY.get({url:u.checkGoodsName(),params:O}).then(()=>{r()}).catch(T=>{T.response.data.code==="enterpriseapi.560003"&&r(p("integralMall.productNameDuplicate"))}):(0,qe.fy)(o).length>60?r(p("validation.limitedSixty")):r(p("integralMall.inputProductName"))},this.setFieldsValue=l=>{var o=l.qyWeChatVo;this.setState({qyWeChatVo:o})},this.checkDescription=(l,o,r)=>{var p=o.description,O=o.text,T=this.props.t;(0,qe.fy)(p)?O&&O.length>1500?r(T("integralMall.productDescLimit")):r():r(T("integralMall.productDescTip"))},this.checkScore=(l,o,r)=>{var p=this.props.t;if(o.score){var O=Number(o.score),T=isNaN(O)||!O||!(O>0&&O<1e6)||!Ce.fA.score.test(O);T?r(p("integralMall.setScoreRuleTip")):r()}else r(p("integralMall.pleaseInputCredit"))},this.checkInventory=(l,o,r)=>{var p=this.props.t;if(o.inventory){var O=Number(o.inventory),T=isNaN(O)||!O||!(O>0&&O<1e6)||!Ce.fA.score.test(O);T?r(p("integralMall.surplusLimit")):r()}else r(p("integralMall.pleaseInputSurplus"))},this.checkDeadline=(l,o,r)=>{var p=this.props.t;o.deadlineType?o.deadline?r():r(p("integralMall.pleaseInputDate")):r()},this.checkRangeList=(l,o,r)=>{var p=this.props.t,O=o.rangeList,T=O.dept,w=O.group,B=O.post,re=O.user,se=[...T,...w,...B,...re];se.length?r():r(p("integralMall.pleaseSelectUser"))},this.checkDeliver=(l,o,r)=>{o.length===0?r("\u8BF7\u9009\u62E9\u9886\u53D6\u65B9\u5F0F"):r()},this.handleChangeGroupStatus=l=>{var o=this.props.initialParams;o?this.props.onChangeChecked(l):this.setState(()=>({initialParams:(0,c.Z)((0,c.Z)({},this.state.initialParams),{},{deliver_method:l})}))},this.checkDeliverUser=(l,o,r)=>{var p=this.props.t;if(o.deliverUser){r();return}r(p("integralMall.pleaseInputIssuer"))},this.checkAddress=(l,o,r)=>{var p=this.props.t;if(o.address){r();return}r(p("integralMall.pleaseInputAddress"))},this.handleSubmit=l=>{var o=this.props.onSubmit;l.preventDefault(),this.props.form.validateFieldsAndScroll((r,p)=>{if(!r){var O=p.address,T=p.contact,w=p.endTime,B=p.deliver,re=p.description,se=p.image,ve=p.inventory,V=p.convert,S=p.name,C=p.score,t=p.rangeList,i=p.deliver_method,v=p.exchangeConditions,h=this.translateScopes(t.rangeList),a={name:S,image:se.imageUrl,description:re.description,score:C.score,repeat_exchange:V.convert,inventory:ve.inventory,expire_time:w.deadlineType?w.deadline:"",is_time_limited_str:w.deadlineType?"true":"false",deliver_user_name:B==null?void 0:B.deliverUser,deliver_user_contact:T==null?void 0:T.contact,receive_address:O==null?void 0:O.address,qy_we_chat_vo:this.state.qyWeChatVo,scopes:h,deliver_method:this.handleDeliverMethod(i),exchange_demand:v.conditionsType.join(","),ids:v.conditions.map(k=>k.id)};o&&o(a)}})},this.handleDeliverMethod=l=>Array.isArray(l)?l.length===1?l[0]:2:l.deliver_method.length===1?l.deliver_method[0]:2,this.handleCancel=()=>{var l=this.props.onCancel;l&&l()}}translateScopes(l){var o=l.dept,r=l.group,p=l.post,O=l.user,T=[],w=[],B=[],re=[];return o.forEach(se=>{T.push({id:se.id,name:se.name})}),r.forEach(se=>{w.push({id:se.id,name:se.name})}),p.forEach(se=>{B.push({id:se.id,name:se.name})}),O.forEach(se=>{re.push((0,c.Z)({id:se.id,name:se.name},se))}),{department_list:T,user_list:re,group_list:w,post_list:B}}render(){var l=this.props.form.getFieldDecorator,o=this.props,r=o.initialParams,p=o.t;return r||(r=this.state.initialParams),n().createElement("div",{className:"add-edit-container goods"},n().createElement("section",null,n().createElement(_.Z,(0,j.Z)({className:"goods__form"},m,{scrollToFirstError:!0}),n().createElement("div",{className:"goods__form__item"},n().createElement("div",{className:"goods__title"},p("exam.basicInformation2")),n().createElement(_.Z.Item,{label:p("integralMall.productName"),required:!0},l("name",{initialValue:r.name,rules:[{validator:this.checkTitle}]})(n().createElement(E.Z,{type:"text",maxLength:60,style:{width:"640px"},placeholder:p("integralMall.productNamePlaceholder")}))),n().createElement(_.Z.Item,{label:p("integralMall.productDesc"),required:!0},l("description",{initialValue:{description:r.description},rules:[{validator:this.checkDescription}]})(n().createElement($,{introduction:r.description}))),n().createElement(_.Z.Item,{label:p("integralMall.consumeCredits"),required:!0},l("score",{initialValue:{score:r.score},rules:[{validator:this.checkScore}]})(n().createElement(me,null))),n().createElement(_.Z.Item,{label:p("integralMall.surplus"),required:!0},l("inventory",{initialValue:{inventory:r.inventory},rules:[{validator:this.checkInventory}]})(n().createElement(he,null))),n().createElement(_.Z.Item,{label:p("integralMall.productImg")},l("image",{initialValue:{imageUrl:r.image}})(n().createElement(b,{imageUrl:r.image})))),n().createElement("div",{className:"separated-line"}),n().createElement("div",{className:"goods__form__item"},n().createElement("div",{className:"goods__title"},p("integralMall.receiveSet")),n().createElement("div",{className:"goods__form__item"},n().createElement(_.Z.Item,{label:p("integralMall.receiveMode"),required:!0},l("deliver_method",{initialValue:r.deliver_method||[],rules:[{validator:this.checkDeliver}]})(n().createElement(gt,{onChange:this.handleChangeGroupStatus}))),(r.deliver_method.includes(0)||r.deliver_method.length===0)&&n().createElement(Q.Z,null,n().createElement(Z.Z,{offset:3},n().createElement(_.Z.Item,(0,j.Z)({label:p("integralMall.issuer")},g,{required:!0}),l("deliver",{initialValue:{deliverUser:r.deliver_user},rules:[{validator:this.checkDeliverUser}]})(n().createElement(le,null))),n().createElement(_.Z.Item,(0,j.Z)({label:p("integralMall.contact")},g),l("contact",{initialValue:{contact:r.deliver_user_contact}})(n().createElement(Ee,null))),n().createElement(_.Z.Item,(0,j.Z)({label:p("integralMall.receiveAddress")},g,{required:!0}),l("address",{initialValue:{address:r.receive_address},rules:[{validator:this.checkAddress}]})(n().createElement(Ue,null))))))),n().createElement("div",{className:"separated-line"}),n().createElement("div",{className:"goods__form__item"},n().createElement(_.Z.Item,{label:p("integralMall.visibleObject"),required:!0},l("rangeList",{initialValue:{rangeList:r.rangeList},rules:[{validator:this.checkRangeList}]})(n().createElement(Be,{setFieldsValue:this.setFieldsValue})))),n().createElement("div",{className:"separated-line"}),n().createElement("div",{className:"goods__form__item"},n().createElement("div",{className:"goods__title"},p("integralMall.exchangeSettings")),n().createElement(_.Z.Item,{label:p("integralMall.repeatConvert")},l("convert",{initialValue:{convert:r.convert}})(n().createElement(Ve,null))),n().createElement(_.Z.Item,{label:p("integralMall.deadline")},l("endTime",{initialValue:{deadlineType:r.is_time_limited,deadline:r.expire_time},rules:[{validator:this.checkDeadline}],validateTrigger:"onSubmit"})(n().createElement(He,null))),n().createElement(_.Z.Item,{label:p("integralMall.exchangeConditions")},l("exchangeConditions",{initialValue:{conditionsType:r.exchange_demand,conditions:r.ids||[]},validateTrigger:"onSubmit"})(n().createElement(tt,null)))))),n().createElement("footer",{className:"goods__footer"},n().createElement(L.Z,{className:"goods__footer__cancel",type:"default",onClick:this.handleCancel},p("common.cancel")),n().createElement(L.Z,{type:"primary",onClick:this.handleSubmit},p("common.release"))))}}var I=(0,N.Z)()((0,F.$j)(d)(_.Z.create({name:"goods"})(f)))},47699:function(Me,pe,e){"use strict";var K=e(36017),L=e(35247),R=e(12924),Q=e.n(R),ee=e(91768),Z=e(76651),j=e(4189),y=e.n(j),E=e(84874),c=P=>{var n=P.list,F=n===void 0?[]:n,N=()=>{Z.m8.go(-1)},_=s=>{!s.route||(s.goBack?Z.m8.go(-1):Z.m8.push(s.route))};return Q().createElement("div",{className:y()["breadcrumb-router-box"]},Q().createElement(L.Z,null,Q().createElement("span",{className:y()["back-router"],onClick:N},Q().createElement(E.Z,{iconClass:"icon-left",size:"14px"})),F.map((s,ie)=>Q().createElement(L.Z.Item,{key:ie},Q().createElement("span",{className:s.route?y()["cl-pointer-menu"]:null,onClick:()=>_(s)},s.name)))))};pe.Z=(0,ee.Z)()(c)},57497:function(Me,pe,e){"use strict";e.d(pe,{D:function(){return R}});var K=e(38642),L=()=>{var Q=localStorage.getItem("corpId");return Q.slice(0,4)==="ding"},R=()=>(0,K.UI)("DINGTALK_LIVE")&&L()},9849:function(Me,pe,e){"use strict";e.d(pe,{Ej:function(){return ee},kL:function(){return Z},T:function(){return j},NU:function(){return y},FL:function(){return E},fn:function(){return c},bm:function(){return P},jY:function(){return n},Vs:function(){return F},li:function(){return N},Nl:function(){return _},YF:function(){return s},Q6:function(){return ie},zW:function(){return z},Zv:function(){return W},Qg:function(){return U},qc:function(){return b},Ve:function(){return H},rS:function(){return $},Rh:function(){return M}});var K=e(10237),L=e(37055),R=e(38642),Q={zaraFlag:(0,R.UI)("ZARA_H5")};function ee(A,oe){var me=L.ZP.StudyProjectList.startStudy(A);return K.WY.post({url:me,data:oe})}function Z(A){var oe=L.ZP.Common.enroll(A);return K.WY.post({url:oe})}function j(A,oe){var me=A.courseId,Te=L.ZP.StudyProjectList.studyProject(me);return K.WY.get({url:Te,params:oe})}function y(A){var oe=A.id,me=Q.zaraFlag?L.m1.getAssessmentProjectInfo(oe):L.m1.getProjectInfo(oe);return K.WY.get({url:me})}function E(A){var oe=A.courseId,me=L.ZP.EnterpriseCourse.addScanCount(oe);return K.WY.post({url:me})}function c(){var A=L.ZP.StudyProjectList.getAccountInfo();return K.WY.get({url:A})}function P(A){var oe=L.ZP.StudyProjectList.projectCertiUrl(A);return K.WY.get({url:oe})}function n(A){var oe=A.courseId,me=L.ZP.Courses.like(oe);return K.WY.post({url:me})}function F(A){var oe=L.ZP.EnterpriseCourse.addCommentAndScore();return K.qg.post({url:oe,data:A})}function N(A){var oe=L.ZP.EnterpriseCourse.getCourseComments();return K.WY.get({url:oe,params:A})}function _(A){var oe=L.ZP.EnterpriseCourse.addCommentAndScore();return K.qg.post({url:oe,data:A})}function s(A){var oe=L.ZP.EnterpriseCourse.deleteComment();return K.qg.post({url:oe,data:A})}function ie(A,oe){var me=L.ZP.StudyProjectList.projectStudyRecord(A);return K.WY.get({url:me,params:oe})}function z(A){var oe=L.ZP.DingSpaceId.getSpaceId();return K.WY.get({url:oe,params:A})}function W(A,oe){var me=L.ZP.PlatformCourse.learningUrl(A);return K.WY.get({url:me,params:oe})}function U(A){var oe=L.ZP.MyExamTask.examIntro({examId:A});return K.WY.get({url:oe})}function b(A){var oe=L.ZP.MyExamTask.examCheckStatus({examId:A});return K.WY.get({url:oe})}function ae(A,oe){var me=CONFIG.Common.getOperateLog(A);return formDataRequest.get({url:me,params:oe})}function H(A,oe){var me=Q.zaraFlag?L.ZP.StudyProjectList.changeCustomStatus(A):L.ZP.StudyProjectList.changeStatus(A);return K.WY.post({url:me,data:oe})}function $(A){var oe=L.ZP.StudyProjectList.getProjectReward(A);return K.WY.get({url:oe})}function M(A){var oe=L.ZP.subsidyGz.subsidyCourseSetting(A);return K.WY.get({url:oe})}},91648:function(Me,pe,e){"use strict";e.d(pe,{Z:function(){return K}});function K(L,R){var Q,ee,Z,j,Q;if(ee="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Q=[],Z=void 0,R=R||ee.length,L)for(Z=0;Z<L;)Q[Z]=ee[0|Math.random()*R],Z++;else for(j=void 0,Q[8]=Q[13]=Q[18]=Q[23]="-",Q[14]="4",Z=0;Z<36;)Q[Z]||(j=0|Math.random()*16,Q[Z]=ee[Z===19?j&3|8:j]),Z++;return Q.join("")}},69164:function(Me,pe,e){"use strict";var K=e(34792),L=e(48086);function R(Q){Q&&Q.length>0&&L.default.success(Q)}pe.Z=R},65202:function(Me,pe,e){"use strict";e.d(pe,{p:function(){return K}});function K(){return localStorage.getItem("themeColor")||"#516AE6"}},25547:function(Me,pe,e){"use strict";e.d(pe,{Yd:function(){return R},VX:function(){return ee},lK:function(){return Z},NP:function(){return j}});var K=e(88986),L=e(93485);function R(y,E,c){var P=0;function n(F,N){for(var _=0;_<F.length;_++){var s=F[_];if(s[y]===E){P=N;break}else s.children instanceof Array&&s.children.length&&n(s.children,N+1)}}return n(c,1),P}function Q(y){var E=1;function c(P,n){P.forEach(F=>{n>E&&(E=n),F.children&&F.children.length>0&&c(F.children,n+1)})}return c(y,1),E}function ee(y,E,c){y.forEach((P,n,F)=>{if(P.id===E)return c(P,n,F);if(P.children)return ee(P.children,E,c)})}function Z(y,E){var c;function P(n){var F=(0,L.Z)(n),N;try{for(F.s();!(N=F.n()).done;){var _=N.value;if(_.id==E){c={id:_.id,name:_.name,children:_.children,parentId:_.parentId};break}_.children&&_.children instanceof Array&&_.children.length>0&&P(_.children)}}catch(s){F.e(s)}finally{F.f()}}return P(y),c?(0,K.Z)((0,K.Z)({},c),{},{children:c.children instanceof Array?c.children:[]}):{children:[],id:"",name:""}}var j=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",n=[...E];function F(N){Object.keys(c).forEach(_=>{var s=_,ie=c[_];N[ie]=N[s],N[P]=N[P]&&N[P]instanceof Array?[...N[P]]:[],N[P].length?N[P].forEach(z=>{F(z)}):delete N[P]})}return n.forEach(N=>F(N)),n}},2396:function(Me,pe,e){"use strict";e.d(pe,{fA:function(){return R},kh:function(){return Q},kR:function(){return ee},rw:function(){return j},$s:function(){return y},q_:function(){return E},QK:function(){return c}});var K=e(6793),L={limitWords(P,n){return{rules:[{max:P,message:"\u6700\u591A\u8F93\u5165".concat(P,"\u4E2A\u5B57")},{required:!0,message:n||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},limitTagsLength(P){return{rules:[{max:P,message:"\u6700\u591A\u8F93\u5165".concat(P,"\u4E2A\u6807\u7B7E")}]}},required(P){return{rules:[{required:!0,message:P||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},requiredWithValidator(P,n){return{rules:[{required:!0,message:P||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0,validator:n}]}}},R={score:/^\+?[0-9]*$/,positiveInteger:/^[1-9]\d*$/,examScore:/^[0-9]+([.]\d{1})?$/,url:/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/,httpsUrl:/(^https):\/\/([\w.]+\/?)\S*/,tagName:/^[\s]|[ ]$/gi},Q=P=>isNaN(P)||!P||!(P>=0&&P<1e3)||!R.score.test(P),ee=P=>isNaN(P)||!P||!(P>-1e3&&P<1e3),Z=P=>isNaN(P)||!P||!(P>=0&&P<1e3)||!R.examScore.test(P),j=(P,n)=>{for(var F=0,N=0;N<P.length;N++){var _=P.charAt(N);if(_.match(/[^\x00-\xff]/ig)!=null?F+=1:F+=.5,F>n)return N}return 0},y=P=>{for(var n=0,F=0;F<P.length;F++){var N=P.charAt(F);N.match(/[^\x00-\xff]/ig)!=null?n+=1:n+=.5}return n},E=(P,n)=>{var F=P.target.value,N=P.target.dataset.originLength;if(P.target.dataset.originLength||(N=n,P.target.dataset.originLength=N),!!N){var _=y(F);_*1<n*1?P.target.setAttribute("maxLength",n*2):P.target.setAttribute("maxLength",n)}},c=(P,n)=>{var F="";return(!P||!(0,K.fy)(P))&&(F=n),F}},26885:function(Me,pe,e){"use strict";e.d(pe,{mw:function(){return N},kr:function(){return _},w8:function(){return s},Sk:function(){return z},$f:function(){return W}});var K=e(34792),L=e(48086),R=e(88986),Q=e(57361),ee=e(9754),Z=e.n(ee),j=e(76651),y=e(78001),E=e(37055),c=e(10237),P=localStorage.getItem("corpId"),n=(U,b)=>{wx.config({beta:!0,debug:!1,appId:U.corpId||localStorage.getItem("corpId"),timestamp:U.timeStamp,nonceStr:U.nonceStr,signature:U.signature,jsApiList:["openDefaultBrowser","innerSaveWebPerformance"]}),wx.ready(()=>{b&&_()}),wx.error(ae=>{console.log("error",ae)})},F=(U,b)=>{wx.agentConfig({corpid:U.corpId,agentid:U.agentId,timestamp:U.timeStamp,nonceStr:U.nonceStr,signature:U.signature,jsApiList:["openDefaultBrowser","selectExternalContact","selectEnterpriseContact","selectPrivilegedContact","createChatWithMsg","openEnterpriseChat","openExistedChatWithMsg"],success:()=>{b("success"),(0,j.Qm)()._store.dispatch({type:"user/setWxWorkApiFlag",payload:{wxWorkApiFlag:(0,j.Qm)()._store.getState().user.wxWorkApiFlag+=1}})},fail:ae=>{ae.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},N=(U,b,ae)=>{window.wx.openEnterpriseChat({userIds:U.join(";"),groupName:b.title,chatId:"",success:function($){var M=$.chatId;window.wx.invoke("openExistedChatWithMsg",{chatId:M,msg:{msgtype:"link",link:{title:b.title,desc:b.desc,url:b.url,imgUrl:b.imgUrl}}},function(A){A.err_msg=="openExistedChatWithMsg:ok"&&ae&&ae(M)})},fail:function($){$.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},_=function(){var U=(0,Q.Z)(Z().mark(function b(ae){var H,$,M,A,oe,me,Te=arguments;return Z().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return H=Te.length>1&&Te[1]!==void 0?Te[1]:()=>{},$=E.ZP.util.getAppSignature(),M=window.location.href.split("#")[0],A=ae||E.ZP.enterpriseId,Ze.next=6,c.WY.get({url:$,params:{enterprise_id:A,url:M,batch_id:""}});case 6:oe=Ze.sent,me=oe.data,F(me,H);case 9:case"end":return Ze.stop()}},b)}));return function(ae){return U.apply(this,arguments)}}(),s=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(navigator.userAgent.toLowerCase().indexOf("wxwork")>-1){var H=E.ZP.util.getCorpSignature(),$=window.location.href.split("#")[0];c.WY.get({url:H,params:{enterprise_id:E.ZP.enterpriseId,url:$,batch_id:ae}}).then(M=>{var A=M.data;n(A,b)})}else b&&_()},ie=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ae=CONFIG.util.getSignature(),H=window.location.href;request.get({url:ae,params:{corpId:P,url:H,uuid:""}}).then($=>{var M=$.data;n(M,b)})},z=U=>{var b=U.userIds,ae=b===void 0?[]:b,H=U.deptIds,$=H===void 0?[]:H,M=U.mode,A=M===void 0?"multi":M;return new Promise((oe,me)=>{window.wx.invoke("selectPrivilegedContact",{fromDepartmentId:0,mode:A,selectedContextContact:0,selectedOpenUserIds:ae||[],selectedTickets:$||[]},Te=>{Te.err_msg==="selectPrivilegedContact:ok"?(typeof Te.result=="string"&&(Te.result=JSON.parse(Te.result)),oe(Te.result)):Te.err_msg==="selectPrivilegedContact:cancel"&&me("cancel")})})},W=U=>{var b=U.type,ae=b===void 0?"employeeRange":b,H=U.result,$=H===void 0?{}:H,M=U.user,A=M===void 0?{}:M,oe=U.reserveUser,me=oe===void 0?[]:oe,Te=U.rangeType,he=Te===void 0?"all":Te,Ze=U.hasDefault,Ve=Ze===void 0?!0:Ze;return new Promise(Fe=>{var G=$.userList,de=G===void 0?[]:G,ye=$.selectedUserCount,Ie=de||[];if(ae==="employeeRange"){var Oe=A.unionid,be="";!de.length&&ye?(Ve&&(Ie.push({id:Oe,unionid:Oe,openUserId:Oe}),$.userList=[{id:Oe,unionid:Oe,openUserId:Oe}],$.selectedUserCount+=1),be=!0):be=!1;var ze={dept:[],post:[],group:[],user:Ie.map(Le=>(0,R.Z)((0,R.Z)({},Le),{},{unionid:Le.openUserId,id:Le.openUserId,user_id:Le.openUserId,source_type:"wx_sync"})),classes:[],cluster:[]};he==="onlyDeptUser"&&(ze={dept:[],user:Ie.map(Le=>(0,R.Z)((0,R.Z)({},Le),{},{unionid:Le.openUserId,id:Le.openUserId,user_id:Le.openUserId,source_type:"wx_sync"}))});var He={isShowType:be,qyWeChatVo:JSON.stringify($),rangeList:ze},je=$.selectedUserCount-ze.user.length;je>0&&(be&&Ve?L.default.warning(y.Z.t("component.selectedErrorTips",{count:je})):L.default.warning(y.Z.t("component.selectedErrorTips2",{count:je}))),Fe(He)}if(ae==="supervision"){de&&(Ie.find(Le=>Le.openUserId===(me[0].unionid||me[0].user_id||me[0].name))&&($.selectedUserCount-=1),Ie=Ie.filter(Le=>Le.openUserId!==me[0].unionid&&Le.openUserId!==me[0].user_id&&Le.openUserId!==me[0].name).map(Le=>Le));var it=Ie.map(Le=>(0,R.Z)((0,R.Z)({},Le),{},{unionid:Le.openUserId,id:Le.openUserId,user_id:Le.openUserId,source_type:"wx_sync"})),ht={qyWeChatVo:JSON.stringify($),user:it},mt=$.selectedUserCount-it.length;mt>0&&L.default.warning(y.Z.t("component.selectedErrorTips2",{count:mt})),Fe(ht)}if(ae==="normal"){var lt=Ie.map(Le=>(0,R.Z)((0,R.Z)({},Le),{},{unionid:Le.openUserId,id:Le.openUserId,user_id:Le.openUserId,source_type:"wx_sync",qyWeChatVo:JSON.stringify($)})),ct={qyWeChatVo:JSON.stringify($),user:lt},at=$.selectedUserCount-lt.length;at>0&&L.default.warning(y.Z.t("component.selectedErrorTips2",{count:at})),Fe(ct)}})}},4412:function(Me){Me.exports="data:image/png;base64,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"}}]);
