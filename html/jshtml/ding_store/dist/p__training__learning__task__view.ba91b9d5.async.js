(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8232],{53009:function(ve,X,a){"use strict";a.d(X,{TD:function(){return h},$S:function(){return O},aI:function(){return se},Bg:function(){return b},tT:function(){return ee},XN:function(){return P},YK:function(){return N},$x:function(){return Z}});var K=a(81211),v=a(88986),x=a(78138),C=a.n(x),Q=a(78001),S=a(76651),J=a(38642),I=a(6793),n=a(37055),u=a(75205);function r(o){return o.map(m=>({name:m.name,id:m.id,proportion:0,disabled:m.totalCount===0||m.total_count===0}))}function E(o,m){return m.map((L,p)=>(0,v.Z)((0,v.Z)({},o[p]),{},{disabled:L.total_count===0}))}var M=o=>{var m=0,L=o.checkedValue,p=o.fillBlank,y=o.shortAnswer;return L===2?p.checked&&!y.checked?m=3:!p.checked&&y.checked?m=4:m=2:m=1,m},A=o=>{for(var m in o)o[(0,J.FI)(m)]=o[m];return o},h=(o,m,L,p,y,i)=>{var e=o.map((t,R)=>{var U=t.list.map((d,s)=>{var c,l=d.data,z={};switch(d.componentName){case"CoursewareSelector":z={courseId:d.id,courseSort:s,courseType:3,flag:1,mappingId:d.mappingId?d.mappingId:""};break;case"CourseSelector":z={courseId:d.id,courseSort:s,courseType:1,flag:1,mappingId:d.mappingId?d.mappingId:""};break;case"AddExam":z={courseSort:s,title:l.title,type:"ex",cheatFlag:l.cheatFlag.isChecked?1:0,faceRecognition:l.cheatFlag.faceRecognition,examDuration:l.examDuration,summary:l.summary,flag:2,mappingId:d.mappingId?d.mappingId:"",courseId:d.id,markType:M(l.markType),paperId:l.questionsMode===1?l.fixedQuestion.id:"",paperTitle:l.questionsMode===1?l.fixedQuestion.name:"",passLine:l.passLine,questionBankList:l.questionsMode===1?"":l.randomQuestion.bankQuesitonVoList.map(H=>H.id).join(","),questionMode:l.questionsMode,showKnowledge:l.knowledgePoints===1?"show":"hide",repeatExam:l.reExam.isChecked,multipleCount:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.multipleCount,multipleUnitScore:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.multipleScore,fillBlankCount:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.fillBlankCount,fillBlankUnitScore:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.fillBlankScore,fillBlankType:l.questionsMode===1?1:l.randomQuestion.bankQuesitonInfo.fillBlankType,shortAnswerCount:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.shortAnswerCount,shortAnswerUnitScore:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.shortAnswerScore,shortAnswerType:l.questionsMode===1?1:l.randomQuestion.bankQuesitonInfo.shortAnswerType,singleCount:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.singleCount,singleUnitScore:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.singleScore,trueOrFalseCount:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.trueOrFalseCount,trueOrFalseUnitScore:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multipleMissedScore:l.questionsMode===1?"":l.randomQuestion.bankQuesitonInfo.multipleMissedScore,totalScore:l.questionsMode===1?l.fixedQuestion.tableList.totalScore:"",answerParsing:l.reExam.isChecked?l.reExam.allowed.end:l.reExam.notAllowed.end,passingScore:l.questionsMode===1?Number(l.fixedQuestion.tableList.totalScore*l.passLine/100).toFixed(1):60,cutScreenCount:l.cheatFlag.switchNum!==null?l.cheatFlag.switchNum:-1,reExamRule:l.reExam.allowed.reRule,reExamNumber:l.reExam.allowed.reRule===2?l.reExam.allowed.reNum:0,scoreRule:l.reExam.allowed.record,viewRule:l.reExam.allowed.viewRule,proportional:l.questionsMode===2&&l.isOpenDrawQuestions?l.proportional:[],anonymousMarking:"".concat(l.markType.anonymousMarking),show_result:l.reExam.show_result};break;case"AddNewExam":var ie=d.data,ae=ie.paperInfo,Y=ie.exam_times,Ee=ie.cut_screen_times,pe=ie.random_order,ge=ie.mark_setting,ke=ie.result_visible,fe=ie.face_recognition,we=(0,K.Z)(ie,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);z={courseSort:s,flag:15,courseType:15,type:"ex",courseId:d.id,mappingId:d.mappingId?d.mappingId:"",new_exam:(0,v.Z)((0,v.Z)((0,v.Z)({},we),(0,u.jJ)(fe)),{},{paper_id:ae.id,answer_rule:Y.answer_rule,exam_count:Y.exam_count||1,cut_screen_rule:Ee.cut_screen_rule,cut_screen_count:Ee.cut_screen_count||1,cut_screen_interval:Ee.cut_screen_interval||0,random_question:pe.random_question,random_options:pe.random_options,mark_type:ge.mark_type,mark_question_type:{fill_blank:ge.mark_type===u.lt.MANUAL?ge.fill_blank:!1,short_answer:ge.mark_type===u.lt.MANUAL?ge.short_answer:!1},anonymous_marking:ge.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...ge.marker_list.map(H=>typeof H=="string"?H:H.id)],result_view_rule:ke.result_view_rule,answer_parsing:ke.answer_parsing,ranking_list_view_rule:ke.ranking_list_view_rule,show_result:ke.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};break;case"OfflineTrain":z={courseSort:s,flag:3,id:m&&!y?d.id:"",type:"xx",mappingId:d.mappingId?d.mappingId:"",title:l.title,begin_time:C()(l.dateRange.startTime).valueOf(),end_time:C()(l.dateRange.endTime).valueOf(),attachment:l.attachment.map(H=>H.id),course_duration:l.course_duration||"",lecturer_id:l.teacher.id,is_lecturer_confirm:!!l.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!l.teacher.is_lecturer_subsidy,address:l.address,introduction:l.introduction,is_open_offline_assessment:l.assess.is_open_offline_assessment,is_open_upload:l.other.is_open_upload,is_open_schedule:!1,remind_type:l.remind.remind_type,advance_minute:l.remind.advance_minute?Number(l.remind.advance_minute):0,is_lecturer_remind:l.remind.is_lecturer_remind,is_student_remind:l.remind.is_student_remind,is_lecturer_student_evaluate:l.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:l.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:l.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:l.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:l.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:l.evaluate.student_course_evaluate_content,assessment_total_score:l.assess.assessment_total_score,assessment_pass_score:l.assess.assessment_pass_score};break;case"AddInvestigate":L==="study"?z={courseSort:s,courseType:9,flag:4,id:d.id,questionnaireId:d.questionnaire.id,title:d.name,type:"questionnaire",mappingId:d.mappingId?d.mappingId:""}:z={courseId:d.id,courseType:9,flag:9,courseSort:s,investigate:{id:d.id,title:d.name,questionnaire_id:d.questionnaire.id}};break;case"AddPracticeTest":z={courseType:10,courseSort:s,flag:L==="study"?5:4,type:"sc",id:d.id,title:d.data.title,content:d.data.content||d.data.address,resources:d.data.attachment.map(H=>({resourceId:H.id})),scoreSetting:{scoreSwitch:d.data.mark.isFull?"on":"off",score:d.data.mark.value},workflowJson:d.data.workFlowTemplateId?{}:W(d.data.supervisor),mappingId:d.mappingId?d.mappingId:"",job_type:d.data.job_type,workFlowTemplateId:d.data.workFlowTemplateId};break;case"AddJobEvaluation":z={courseSort:s,flag:6,title:d.data.title,productId:d.data.evaluationTools.product_id,modelId:d.data.evaluationTools.model_id,id:d.id||"",mappingId:d.mappingId?d.mappingId:""};break;case"Attendance":z={courseSort:s,flag:13,id:m&&!y?d.id:"",type:"attendance",mappingId:d.mappingId?d.mappingId:"",title:l.title,directors:l.directors.map(H=>typeof H=="object"&&(H.id||H.user_id)?H.id||H.user_id:H),name:l.name,qrcode_type:l.qrcode_type||"statics",sign_in_begin_time:l.sign_in_begin_time?C()(l.sign_in_begin_time).valueOf():"",sign_in_end_time:l.sign_in_end_time?C()(l.sign_in_end_time).valueOf():"",sign_out_begin_time:l.sign_out_begin_time?C()(l.sign_out_begin_time).valueOf():"",sign_out_end_time:l.sign_out_end_time?C()(l.sign_out_end_time).valueOf():"",relate_course:l.relate_course,relate_course_list:((c=l.relate_course_list)===null||c===void 0?void 0:c.length)>0?l.relate_course_list:[],remind_directors:l.remind_directors,advance_minute:l.advance_minute||0,qy_we_chat_vo:l.qy_we_chat_vo,address:l.address,longitude:l.longitude,latitude:l.latitude,address_detail:l.address_detail,sign_range:l.sign_range};break;case"AddAssessment":z=(0,v.Z)((0,v.Z)({},A(d.data)),{},{tutorId:i,courseSort:s,courseType:14,flag:14});break;default:break}return p==="unlock_mode"&&l.unlockingTime&&(z.unlockingTime=C()(l.unlockingTime).valueOf()),z.resource_lock=d.resource_lock||!1,z});return{content:t.desc,stageName:t.name,isOrder:t.inOrder,stageSort:R+1,stageId:m?t.stageId:"",startTime:p==="unlock_mode"&&t.studyTime?C()(t.studyTime[0]).valueOf():null,endTime:p==="unlock_mode"&&t.studyTime?C()(t.studyTime[1]).valueOf():null,course:U}});return e},O=o=>{var m=o.map((L,p)=>({content:L.desc,stage_name:L.name,is_order:L.inOrder,stage_sort:p+1,stage_id:L.stageId,resources:L.list.map((y,i)=>{var e=y.data;switch(y.componentName){case"CoursewareSelector":return{course_id:y.id,course_sort:i,course_type:3,flag:1,mappingId:y.mappingId};case"AddMentorCoaching":return{course_id:y.id,tutorials:{id:y.id,title:e.title,content:e.content,model:e.model,tutor_model:e.tutor_model,evaluation_type:e.evaluation_type,user_id:e.user_id||"",user_name:e.user_name||""},course_sort:i,course_type:12,flag:7,mappingId:y.mappingId};case"CourseSelector":return{course_id:y.id,course_sort:i,course_type:1,flag:1,mappingId:y.mappingId};case"AddExam":return{exam:{id:y.id,title:e.title,cheat_flag:e.cheatFlag.isChecked?1:0,exam_duration:e.examDuration,face_recognition:e.cheatFlag.faceRecognition,summary:e.summary,mark_type:M(e.markType),paper_id:e.questionsMode===1?e.fixedQuestion.id:"",paper_name:e.questionsMode===1?e.fixedQuestion.name:"",pass_line:e.passLine,question_banks:e.questionsMode===1?"":e.randomQuestion.bankQuesitonVoList.map(ae=>ae.id),question_mode:e.questionsMode,show_knowledge:e.knowledgePoints===1?"show":"hide",repeat_exam:e.reExam.isChecked,multiple_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.shortAnswerType,short_answer_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerScore,single_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleScore,multiple_missed_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleMissedScore,true_or_false_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseScore,total_score:e.questionsMode===1?e.fixedQuestion.tableList.totalScore:"",answer_parsing:e.reExam.isChecked?e.reExam.allowed.end:e.reExam.notAllowed.end,passing_score:e.questionsMode===1?Number(e.fixedQuestion.tableList.totalScore*e.passLine/100).toFixed(1):60,cut_screen_count:e.cheatFlag.switchNum!==null?e.cheatFlag.switchNum:-1,re_exam_rule:e.reExam.allowed.reRule,re_exam_number:e.reExam.allowed.reRule===2?e.reExam.allowed.reNum:0,score_rule:e.reExam.allowed.record,view_rule:e.reExam.allowed.viewRule,proportional:e.questionsMode===2&&e.isOpenDrawQuestions?e.proportional:[],anonymous_marking:"".concat(e.markType.anonymousMarking),show_result:e.reExam.show_result},flag:2,course_sort:i,course_id:y.id,course_type:6,mappingId:y.mappingId};case"AddNewExam":var t=y.data,R=t.paperInfo,U=t.exam_times,d=t.cut_screen_times,s=t.random_order,c=t.mark_setting,l=t.result_visible,z=t.face_recognition,ie=(0,K.Z)(t,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_sort:i,flag:15,type:"ex",course_id:y.id,course_type:15,mappingId:y.mappingId?y.mappingId:"",new_exam:(0,v.Z)((0,v.Z)((0,v.Z)({},ie),(0,u.jJ)(z)),{},{paper_id:R.id,answer_rule:U.answer_rule,exam_count:U.exam_count||1,cut_screen_rule:d.cut_screen_rule,cut_screen_count:d.cut_screen_count||1,cut_screen_interval:d.cut_screen_interval||0,random_question:s.random_question,random_options:s.random_options,mark_type:c.mark_type,mark_question_type:{fill_blank:c.mark_type===u.lt.MANUAL?c.fill_blank:!1,short_answer:c.mark_type===u.lt.MANUAL?c.short_answer:!1},anonymous_marking:c.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...c.marker_list.map(ae=>typeof ae=="string"?ae:ae.id)],result_view_rule:l.result_view_rule,answer_parsing:l.answer_parsing,ranking_list_view_rule:l.ranking_list_view_rule,show_result:l.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddPracticeTest":return{operation:{id:y.id,title:y.data.title,content:y.data.content||y.data.address,type:"sc",resources:y.data.attachment.map(ae=>({resourceId:ae.id})),score_setting:{scoreSwitch:y.data.mark.isFull?"on":"off",score:y.data.mark.value},workflow_json:W(y.data.supervisor),sort:i,job_type:y.data.job_type},course_type:10,course_sort:i,flag:5,mappingId:y.mappingId};case"AddInvestigate":return{course_id:y.id,course_type:9,flag:4,course_sort:i,investigate:{id:y.id,title:y.name,questionnaire_id:y.questionnaire.id}};default:return null}})}));return m};function W(o){var m=[];if(o.type==="multilevel"){var L=o.multilevel;L.forEach(p=>{var y=[];p.forEach(i=>{y.push(i.id)}),m.push(y.join(","))})}else o.type==="or"?(o.or.forEach(p=>{m.push(p.id)}),m=[m.join(",")]):m=[];return{type:o.type,userIds:m}}var se=o=>{function m(i){if(i.questionMode===1){if(i.paperVo.fillBlankCount>0||i.paperVo.shortAnswerCount>0)return!0}else if(i.fillBlankCount>0||i.shortAnswerCount>0)return!0;return!1}function L(i){if(i.questionMode===1){if(i.paperVo.fillBlankCount>0)return!0}else if(i.fillBlankCount>0)return!0;return!1}function p(i){if(i.questionMode===1){if(i.paperVo.shortAnswerCount>0)return!0}else if(i.shortAnswerCount>0)return!0;return!1}var y=o.map((i,e)=>({key:"".concat(new Date().getTime()).concat(e),desc:i.content,name:i.stageName,inOrder:i.isOrder,stageId:i.id,studyTime:i.startTime?[C()(i.startTime),C()(i.endTime)]:["",""],list:i.courseMappingList.map(t=>{var R,U,d=t.planExamVos,s={},c,l;switch(t.flag){case 1:t.contentType==="audio/mp3"||t.contentType==="audio/mpeg"||t.contentType==="audio"?(l="mp3",c="mp3"):(l=t.type,c=t.type==="imageText"?"h5":t.type),s={id:t.courseId,name:t.name,type:t.courseType===1?"course":"courseware",icon:n.e1[c],originalType:l,componentName:t.courseType===1?"CourseSelector":"CoursewareSelector",status:t.courseType===1?"0":t.status,duration:t.duration,data:t,mappingId:t.mappingId};break;case 2:s={id:t.id,name:t.name,type:"ex",icon:n.e1.ex,componentName:"AddExam",duration:d.examDuration*60,data:{title:d.title,examDuration:d.examDuration,summary:d.summary,isOpenDrawQuestions:d.proportionalExamVos&&d.proportionalExamVos.length>0,proportional:d.proportionalExamVos&&(d.proportionalExamVos.length>0?E(d.proportionalExamVos,d.bankQuesitonVoList):d.questionMode===2?r(d.bankQuesitonVoList):[])||[],cheatFlag:{isChecked:!!d.cheatFlag,switchNum:d.cutScreenCount===-1?null:d.cutScreenCount,faceRecognition:d.faceRecognition},reExam:{show_result:d.show_result,isChecked:d.repeatExam,userJoin:d.user_join==="true",notAllowed:{end:d.answerParsing},allowed:{reRule:d.reExamRule,record:d.scoreRule,end:d.answerParsing,reNum:d.reExamRule===2?d.reExamNumber:1,viewRule:d.viewRule}},markType:{checkedValue:d.markType===1?1:2,artificialDisabled:d.markType===1&&!m(d),fillBlank:{checked:(d.markType===2||d.markType===3)&&L(d),disabled:!L(d)},shortAnswer:{checked:(d.markType===2||d.markType===4)&&p(d),disabled:!p(d)},anonymousMarking:d.anonymous_marking==="true"},questionsMode:d.questionMode,knowledgePoints:d.showKnowledge==="show"?1:2,passLine:d.passLine,fixedQuestion:d.questionMode===1?{id:d.paperVo.id,name:d.paperVo.title,tableList:{fillBlankCount:d.paperVo.fillBlankCount,fillBlankScore:d.paperVo.fillBlankScore,multipleCount:d.paperVo.multipleCount,multipleScore:d.paperVo.multipleScore,shortAnswerCount:d.paperVo.shortAnswerCount,shortAnswerScore:d.paperVo.shortAnswerScore,singleCount:d.paperVo.singleCount,singleScore:d.paperVo.singleScore,totalCount:d.paperVo.totalCount,totalScore:d.paperVo.totalScore,trueOrFalseCount:d.paperVo.trueOrFalseCount,trueOrFalseScore:d.paperVo.trueOrFalseScore}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:d.questionMode===2?{bankQuesitonVoList:d.bankQuesitonVoList.map(ge=>({id:ge.id,name:ge.name,data:ge})),bankQuesitonInfo:{fillBlankCount:d.fillBlankCount,fillBlankScore:d.fillBlankUnitScore,fillBlankType:+d.fillBlankType||1,multipleCount:d.multipleCount,multipleScore:d.multipleUnitScore,shortAnswerCount:d.shortAnswerCount,shortAnswerScore:d.shortAnswerUnitScore,shortAnswerType:+d.shortAnswerType||1,singleCount:d.singleCount,singleScore:d.singleUnitScore,trueOrFalseCount:d.trueOrFalseCount,trueOrFalseScore:d.trueOrFalseUnitScore,multipleMissedScore:d.multipleMissedScore}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},mappingId:t.mappingId,isExamEdit:t.isExamEdit};break;case 3:var z=t.offline_course_vo;s={id:t.id,name:t.name,type:"xx",componentName:"OfflineTrain",icon:n.e1.xx,data:(0,v.Z)({},G(z)),mappingId:t.mappingId};break;case 4:case 5:if(t.type==="sc"||t.type==="operation"){s={id:t.id,name:t.title,type:"sc",icon:n.e1.sc,componentName:"AddPracticeTest",data:(0,J.UI)("PRIVACY_HLS_APPROVAL_MANAGE")?te(t):B(t),mappingId:t.mappingId};break}s={id:t.courseId,name:t.title||t.name,type:"investigate",icon:n.e1.questionnaire,componentName:"AddInvestigate",data:t,mappingId:t.mappingId,questionnaire:{id:t.questionnaireId,name:t.name}};break;case 6:s={id:t.evaluation.id,name:t.evaluation.title,productId:t.evaluation.product_id,modelId:t.evaluation.model_id,type:"jobEvaluation",icon:n.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:t.evaluation.title,evaluationTools:{product_id:t.evaluation.product_id,model_id:t.evaluation.model_id}},mappingId:t.mappingId};break;case 7:s={id:t.id,name:t.tutorials.title,type:"tutor",icon:n.e1.tutor,componentName:"AddMentorCoaching",data:(0,v.Z)((0,v.Z)({},t.tutorials),{},{tutor_model:t.tutorials.tutorModel,evaluation_type:t.tutorials.evaluationType,user_id:t.tutorials.userId,user_name:t.tutorials.userName}),mappingId:t.mappingId};break;case 9:s={id:t.courseId,name:t.title,type:"investigate",icon:n.e1.questionnaire,componentName:"AddInvestigate",data:t,questionnaire:{id:t.questionnaireId,name:t.name}};break;case 13:var ie=t.course_sign_vo;s={id:t.id,name:t.name,type:"attendance",componentName:"Attendance",icon:n.e1.attendance,data:(0,v.Z)({},ue(ie)),mappingId:t.mappingId};break;case 14:s={id:(t==null||(R=t.evaluate)===null||R===void 0?void 0:R.id)||"",name:(t==null||(U=t.evaluate)===null||U===void 0?void 0:U.name)||"",type:"assess",componentName:"AddAssessment",icon:n.e1.assess,data:(0,v.Z)({},Ce(t.evaluate)),resource_lock:t.resource_lock};break;case 15:{var ae=(0,S.Qm)()._store,Y=ae.getState(),Ee=Y.user,pe=(0,u.AC)({data:t.exam_plan_detail_v1,user:{id:Ee.id,name:Ee.name,creator:!0}});s={id:t.exam_plan_detail_v1.id,name:t.exam_plan_detail_v1.title,type:"ex",icon:n.e1.ex,componentName:"AddNewExam",duration:t.exam_plan_detail_v1.exam_duration*60,data:pe,mappingId:t.mappingId,isExamEdit:t.isExamEdit}}default:break}return s.data&&(s.data.unlockingTime=t.unlockingTime?C()(t.unlockingTime):""),s.resource_lock=t.resource_lock,s})}));return y};function te(o){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources";return o.supervisor={lead:"",multilevel:[],or:[],type:"or"},o.mark={isFull:o.scoreSetting.score_switch==="on",value:o.scoreSetting.score_switch==="on"?o.scoreSetting.score:100},o.attachment=o[m],o}function B(o){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources",L=[],p=[];return o.workflowJson.type==="or"?o.workflowJson.nodeList[0].forEach(y=>{L.push({type:2,id:y.id,name:y.name,show:!0,unionid:y.unionid,user_id:y.sync_user_id,source_type:y.source_type||y.sourceType})}):o.workflowJson.type==="multilevel"&&o.workflowJson.nodeList.forEach(y=>{y.forEach(i=>{i.user_id=i.sync_user_id}),p.push(y)}),o.supervisor={or:L,multilevel:p,lead:"",type:o.workflowJson.type},o.mark={isFull:o.scoreSetting.score_switch==="on",value:o.scoreSetting.score_switch==="on"?o.scoreSetting.score:100},o.attachment=o[m],o}var b=(o,m)=>{var L=o.map((p,y)=>({id:p.id?p.id:"",content:p.desc,stage_name:p.name,is_order:m==="free_mode"?!1:p.inOrder,sort:y+1,progress:p.Standard.progressCheck?p.Standard.progress:"",exam_times:p.Standard.examCheck?p.Standard.examNum:"",practice_times:p.Standard.bankCheck?p.Standard.bankNum:"",operation_times:p.Standard.practiceCheck?p.Standard.practiceNum:"",finish_evaluation:p.Standard.jobEvaluationCheck?"true":"false",is_get_score:p.reward.getScoreChecked?p.reward.getScore:"",certificate_id:p.reward.certificateChecked?p.reward.certificateId:"",resources:p.list.map((i,e)=>{var t=i.data;switch(i.componentName){case"CoursewareSelector":return{course_id:i.id,replaced_old_id:i.replaced_old_id===i.id?"":i.replaced_old_id,sort:e,type:3,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"ClNewUpload":case"CourseSelector":return{course_id:i.id,replaced_old_id:i.replaced_old_id||"",sort:e,type:1,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"LiveClass":return{course_id:i.id,replaced_old_id:i.replaced_old_id||"",sort:e,type:16,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"AddExam":return{type:6,sort:e,course_id:i.id,exam:{title:t.title,cheat_flag:t.cheatFlag.isChecked?1:0,exam_duration:t.examDuration,face_recognition:t.cheatFlag.faceRecognition,summary:t.summary,mark_type:M(t.markType),paper_id:t.questionsMode===1?t.fixedQuestion.id:"",pass_line:t.passLine,question_banks:t.questionsMode===1?[]:t.randomQuestion.bankQuesitonVoList.map(Y=>Y.id),question_mode:t.questionsMode,show_knowledge:t.knowledgePoints===1?"show":"hide",repeat_exam:t.reExam.isChecked,multiple_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:t.questionsMode===1?t.fixedQuestion.tableList.totalScore:"",answer_parsing:t.reExam.isChecked?t.reExam.allowed.end:t.reExam.notAllowed.end,passing_score:t.questionsMode===1?Number(t.fixedQuestion.tableList.totalScore*t.passLine/100).toFixed(1):60,cut_screen_count:t.cheatFlag.switchNum!==null?t.cheatFlag.switchNum:-1,re_exam_rule:t.reExam.allowed.reRule,re_exam_number:t.reExam.allowed.reRule===2?t.reExam.allowed.reNum:0,score_rule:t.reExam.allowed.record,view_rule:t.reExam.allowed.viewRule,proportional:t.questionsMode===2&&t.isOpenDrawQuestions?t.proportional:[],anonymous_marking:"".concat(t.markType.anonymousMarking),show_result:t.reExam.show_result},resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"AddNewExam":var R=i.data,U=R.paperInfo,d=R.exam_times,s=R.cut_screen_times,c=R.random_order,l=R.mark_setting,z=R.result_visible,ie=R.face_recognition,ae=(0,K.Z)(R,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{type:15,sort:e,course_id:i.id,new_exam:(0,v.Z)((0,v.Z)((0,v.Z)({},ae),(0,u.jJ)(ie)),{},{paper_id:U.id,answer_rule:d.answer_rule,exam_count:d.exam_count||1,cut_screen_rule:s.cut_screen_rule,cut_screen_count:s.cut_screen_count||1,cut_screen_interval:s.cut_screen_interval||0,random_question:c.random_question,random_options:c.random_options,mark_type:l.mark_type,mark_question_type:{fill_blank:l.mark_type===u.lt.MANUAL?l.fill_blank:!1,short_answer:l.mark_type===u.lt.MANUAL?l.short_answer:!1},anonymous_marking:l.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...l.marker_list.map(Y=>typeof Y=="string"?Y:Y.id)],result_view_rule:z.result_view_rule,answer_parsing:z.answer_parsing,ranking_list_view_rule:z.ranking_list_view_rule,show_result:z.show_result,reward_rule:null,authority_range:null,supervisor_mark:null}),resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"OfflineTrain":return{sort:e,type:7,course_id:i.id,offline_course:{id:t.id,title:t.title,begin_time:C()(t.dateRange.startTime).valueOf(),end_time:C()(t.dateRange.endTime).valueOf(),attachment:t.attachment.map(Y=>Y.id),course_duration:t.course_duration||"",lecturer_id:t.teacher.id,is_lecturer_confirm:!!t.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!t.teacher.is_lecturer_subsidy,address:t.address,introduction:t.introduction,is_open_offline_assessment:t.assess.is_open_offline_assessment,is_open_upload:t.other.is_open_upload,is_open_schedule:!1,remind_type:t.remind.remind_type,advance_minute:t.remind.advance_minute?Number(t.remind.advance_minute):0,is_lecturer_remind:t.remind.is_lecturer_remind,is_student_remind:t.remind.is_student_remind,is_director_remind:t.remind.is_director_remind,is_lecturer_student_evaluate:t.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:t.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:t.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:t.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:t.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:t.evaluate.student_course_evaluate_content,assessment_total_score:t.assess.assessment_total_score,assessment_pass_score:t.assess.assessment_pass_score},resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"AddInvestigate":return{sort:e,type:9,course_id:i.id||"",questionnaire_id:i.questionnaire.id,resource_lock:i.resource_lock||!1,title:i.name,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"AddPracticeTest":return{type:10,courseSort:e,sort:e,flag:4,course_id:i.id,title:i.data.title,content:i.data.content||i.data.address,resources:i.data.attachment.map(Y=>({resourceId:Y.id})),scoreSetting:{scoreSwitch:i.data.mark.isFull?"on":"off",score:i.data.mark.value},workflowJson:W(i.data.supervisor),job_type:i.data.job_type,resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"AddJobEvaluation":return{sort:e,flag:6,type:11,evaluation:{id:i.id||"",title:i.data.title,product_id:i.data.evaluationTools.product_id,model_id:i.data.evaluationTools.model_id},resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"Attendance":return{sort:e,type:13,course_id:i.id,sign:{id:t.id,type:13,title:t.title,directors:t.directors.map(Y=>typeof Y=="object"&&(Y.id||Y.user_id)?Y.id||Y.user_id:Y),name:t.name||"--",qrcode_type:t.qrcode_type,sign_in_begin_time:t.sign_in_begin_time,sign_in_end_time:t.sign_in_end_time,sign_out_begin_time:t.sign_out_begin_time,sign_out_end_time:t.sign_out_end_time,relate_course:t.relate_course,relate_course_list:t.relate_course_list,remind_directors:t.remind_directors,advance_minute:t.advance_minute,qy_we_chat_vo:t.qy_we_chat_vo,address:t.address,longitude:t.longitude,latitude:t.latitude,address_detail:t.address_detail,sign_range:t.sign_range},resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf()};case"AddAssessment":return{sort:e,type:14,course_id:i.id,resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf(),evaluateVo:{id:t.id,name:t.name,requirement:t.requirement,resource_id:t.resource_id,is_lock:t.is_lock,begin_time_unlock:t.begin_time_unlock,end_time_unlock:t.end_time_unlock,is_self_evaluate:t.is_self_evaluate,questionnaire_id:t.questionnaire_id,evaluate_form_title:t.evaluate_form_title,before_start_day:t.before_start_day,before_start_repeat:t.before_start_repeat,before_start_un_remind:t.before_start_un_remind,before_end_day:t.before_end_day,before_end_repeat:t.before_end_repeat,before_end_un_remind:t.before_end_un_remind,after_end_day:t.after_end_day,after_end_repeat:t.after_end_repeat,after_end_un_remind:t.after_end_un_remind,is_passed_standards:t.is_passed_standards,is_passed_option_three:t.is_passed_option_three,pass_standard_conditions:t.pass_standard_conditions,pass_standards_number:t.pass_standards_number,creator_user:t.creator_user}};case"AddPracticeBank":return{sort:e,type:17,course_id:i.id,resource_name:i.title,resource_lock:i.resource_lock||!1,unlocking_time:m==="unlock_mode"?null:C()(i.unlocking_time).valueOf(),practice:{title:i.data.title,question_bank_list:i.data.randomQuestion.bankQuesitonVoList.map(Y=>Y.id),pass_line:Number(i.data.stand)}};default:return null}})}));return L},ee=function(m,L){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;function y(e){return e.fill_blank_count>0||e.short_answer_count>0}var i=m.map((e,t)=>{var R=e.resources.filter(s=>s.type==6||s.type==15).length,U=e.resources.filter(s=>s.type==17).length,d=e.resources.filter(s=>s.type==10).length;return{id:e.id,key:"".concat(new Date().getTime()).concat(t),desc:e.content,name:e.stage_name,inOrder:e.is_order,Standard:{progressCheck:e.progress>0,progress:e.progress||100,examCheck:e.exam_times>0,examNum:e.exam_times||R,bankCheck:e.practice_times>0,bankNum:e.practice_times||U,practiceCheck:e.operation_times>0,practiceNum:e.operation_times||d,jobEvaluationCheck:e.finish_evaluation==="true"},reward:{getScore:e.is_get_score?e.is_get_score:"",getScoreChecked:e.is_get_score>0,certificateId:e.certificate_id||"",certificateChecked:e.certificate_id!==0,certificateName:e.certificate_name,certificateImage:e.preview_url},hourClassId:e.id,hourClassStartTime:e.start_time,hourClassEndTime:e.end_time,list:e.resources.map(s=>{var c=s.exam;switch(s.type){case 1:return{id:s.course_id,name:s.resource_name,type:p&&s.biz_type==="imageText"?"twCourse":"course",icon:s.biz_type==="imageText"?n.e1.h5:n.e1.crs,componentName:"CourseSelector",duration:s.duration,data:s,unlocking_time:s.unlocking_time,lab_resource_id:s.lab_resource_id,lab_resource_name:s.lab_resource_name,lab_selected_id:s.lab_resource_id,resource_lock:s.resource_lock};case 3:{var l;return s.content_type==="article"||s.content_type==="link"?l=n.e1.h5:l=n.e1[s.contentType]||n.e1[s.content_type],{id:s.course_id,name:s.resource_name,type:"courseware",icon:l,componentName:"CoursewareSelector",duration:s.duration,status:s.resource_status,originalType:s.content_type==="article"||s.content_type==="link"?"h5":s.content_type||s.contentType,data:s,unlocking_time:s.unlocking_time,lab_resource_id:s.lab_resource_id,lab_resource_name:s.lab_resource_name,lab_selected_id:s.lab_resource_id,resource_lock:s.resource_lock}}case 6:return{id:s.course_id,name:c.title,type:"ex",icon:n.e1.ex,componentName:"AddExam",duration:c.exam_duration*60,data:{id:c.id,title:c.title,examDuration:c.exam_duration,summary:c.summary,isOpenDrawQuestions:c.proportionalExamVos&&c.proportionalExamVos.length>0,proportional:c.proportionalExamVos&&(c.proportionalExamVos.length>0?E(c.proportionalExamVos,c.question_bank_vos):c.question_mode===2?r(c.question_bank_vos):[])||[],cheatFlag:{isChecked:!!c.cheat_flag,switchNum:c.cut_screen_count===-1?null:c.cut_screen_count,faceRecognition:c.face_recognition},reExam:{show_result:c.show_result,isChecked:c.repeat_exam,userJoin:L?!1:c.user_join==="true",notAllowed:{end:c.answer_parsing},allowed:{reRule:c.re_exam_rule,record:c.score_rule,end:c.answer_parsing,reNum:c.re_exam_rule===2?c.re_exam_number:1,viewRule:c.view_rule}},markType:{checkedValue:c.mark_type===1?1:2,artificialDisabled:c.mark_type===1&&!y(c),fillBlank:{checked:(c.mark_type===2||c.mark_type===3)&&c.fill_blank_count,disabled:!c.fill_blank_count},shortAnswer:{checked:(c.mark_type===2||c.mark_type===4)&&c.short_answer_count,disabled:!c.short_answer_count},anonymousMarking:c.anonymous_marking==="true"},questionsMode:c.question_mode,knowledgePoints:c.show_knowledge==="show"?1:2,passLine:c.pass_line,fixedQuestion:c.question_mode===1?{id:c.paper_id,name:c.paper_name,tableList:{fillBlankCount:c.fill_blank_count,fillBlankScore:c.fill_blank_unit_score,multipleCount:c.multiple_count,multipleScore:c.multiple_unit_score,shortAnswerCount:c.short_answer_count,shortAnswerScore:c.short_answer_unit_score,singleCount:c.single_count,singleScore:c.single_unit_score,totalCount:c.total_count,totalScore:c.total_score,trueOrFalseCount:c.true_or_false_count,trueOrFalseScore:c.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:c.question_mode===2?{bankQuesitonVoList:c.question_bank_vos.map(pe=>{var ge=pe.fill_blank_count,ke=pe.multiple_count,fe=pe.short_answer_count,we=pe.single_count,H=pe.total_count,Me=pe.true_or_false_count,je={fillBlankCount:ge,shortAnswerCount:fe,multipleCount:ke,singleCount:we,totalCount:H,trueOrFalseCount:Me};return{id:pe.id,name:pe.name,data:Object.assign(pe,je),fillBlankCount:ge,shortAnswerCount:fe,multipleCount:ke,singleCount:we,totalCount:H,trueOrFalseCount:Me}}),bankQuesitonInfo:{fillBlankCount:c.fill_blank_count,fillBlankScore:c.fill_blank_unit_score,fillBlankType:+c.fillBlankType,multipleCount:c.multiple_count,multipleScore:c.multiple_unit_score,shortAnswerCount:c.short_answer_count,shortAnswerScore:c.short_answer_unit_score,shortAnswerType:+c.shortAnswerType,singleCount:c.single_count,singleScore:c.single_unit_score,trueOrFalseCount:c.true_or_false_count,trueOrFalseScore:c.true_or_false_unit_score,multipleMissedScore:c.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},unlocking_time:s.unlocking_time,resource_lock:s.resource_lock};case 7:return{id:L?"":s.offlineCourseEditVo.id,name:s.offlineCourseEditVo.title,key:s.offlineCourseEditVo.id,type:"xx",componentName:"OfflineTrain",icon:n.e1.xx,data:(0,v.Z)({},G(s.offlineCourseEditVo,L)),unlocking_time:s.unlocking_time,resource_lock:s.resource_lock};case 9:return{id:s.course_id,name:s.title||s.resource_name,type:"investigate",icon:n.e1.questionnaire,componentName:"AddInvestigate",data:s,questionnaire:{id:s.questionnaire_id,name:s.resource_name},unlocking_time:s.unlocking_time,resource_lock:s.resource_lock};case 10:return{id:s.course_id,name:s.title,type:"sc",icon:n.e1.sc,componentName:"AddPracticeTest",data:B(s,"operationResources"),unlocking_time:s.unlocking_time,resource_lock:s.resource_lock};case 11:return{id:s.evaluation.id,name:s.evaluation.title,productId:s.evaluation.product_id,modelId:s.evaluation.model_id,type:"jobEvaluation",icon:n.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:s.evaluation.title,evaluationTools:{product_id:s.evaluation.product_id,model_id:s.evaluation.model_id}},unlocking_time:s.unlocking_time,resource_lock:s.resource_lock};case 13:return{id:s.course_sign_vo.id,name:s.course_sign_vo.name,type:"attendance",componentName:"Attendance",icon:n.e1.attendance,data:(0,v.Z)({},ue(s.course_sign_vo,L)),unlocking_time:s.unlocking_time,resource_lock:s.resource_lock};case 14:return{id:s.evaluate?s.evaluate.id:"",name:s.evaluate?s.evaluate.name:"",type:"assess",componentName:"AddAssessment",icon:n.e1.assess,data:(0,v.Z)({},Ce(s.evaluate)),resource_lock:s.resource_lock,unlocking_time:s.unlocking_time};case 15:{var z=(0,S.Qm)()._store,ie=z.getState(),ae=ie.user,Y=(0,u.AC)({data:s.exam_plan_detail_v1,user:{id:ae.id,name:ae.name,creator:!0}});return{id:s.exam_plan_detail_v1.id,name:s.exam_plan_detail_v1.title,type:"ex",icon:n.e1.ex,componentName:"AddNewExam",unlocking_time:s.unlocking_time,resource_lock:s.resource_lock,duration:s.exam_plan_detail_v1.exam_duration*60,data:Y}}case 16:return{id:L?"":s.course_id,name:s.title,key:s.course_id,type:"liveClass",componentName:"LiveClass",icon:n.e1.liveClass,data:(0,v.Z)({},be(s)),unlocking_time:s.unlocking_time,resource_lock:s.resource_lock};case 17:var Ee=(0,u.S8)(s.practice);return{id:s.course_id,name:s.resource_name,type:"practice",componentName:"AddPracticeBank",unlocking_time:s.unlocking_time,resource_lock:s.resource_lock,data:Ee};default:return null}})}});return i},P=o=>{var m=o.map((L,p)=>({content:L.desc,stage_name:L.name,order:"".concat(L.inOrder),sort:p+1,course:L.list.map((y,i)=>{var e=y.data;switch(y.componentName){case"CoursewareSelector":return{course_id:y.id,course_sort:i,course_type:3,flag:1};case"CourseSelector":return{course_id:y.id,course_sort:i,course_type:1,flag:1};case"AddExam":return{flag:2,type:"ex",course_sort:i,course_id:y.id,title:e.title,cheat_flag:e.cheatFlag.isChecked?1:0,exam_duration:e.examDuration,face_recognition:e.cheatFlag.faceRecognition,summary:e.summary,mark_type:M(e.markType),paper_id:e.questionsMode===1?e.fixedQuestion.id:"",paper_title:e.questionsMode===1?e.fixedQuestion.name:"",pass_line:e.passLine,question_bank_list:e.questionsMode===1?"":e.randomQuestion.bankQuesitonVoList.map(ae=>ae.id).join(","),question_mode:e.questionsMode,show_knowledge:e.knowledgePoints===1?"show":"hide",s_repeat_exam:"".concat(e.reExam.isChecked),multiple_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:e.questionsMode===1?e.fixedQuestion.tableList.totalScore:"",answer_parsing:e.reExam.isChecked?e.reExam.allowed.end:e.reExam.notAllowed.end,passing_score:e.questionsMode===1?Number(e.fixedQuestion.tableList.totalScore*e.passLine/100).toFixed(1):60,cut_screen_count:e.cheatFlag.switchNum!==null?e.cheatFlag.switchNum:-1,re_exam_rule:e.reExam.allowed.reRule,re_exam_number:e.reExam.allowed.reRule===2?e.reExam.allowed.reNum:0,score_rule:e.reExam.allowed.record,view_rule:e.reExam.allowed.viewRule,proportional:e.questionsMode===2&&e.isOpenDrawQuestions?e.proportional:[],anonymous_marking:"".concat(e.markType.anonymousMarking),show_result:e.reExam.show_result};case"AddNewExam":var t=y.data,R=t.paperInfo,U=t.exam_times,d=t.cut_screen_times,s=t.random_order,c=t.mark_setting,l=t.result_visible,z=t.face_recognition,ie=(0,K.Z)(t,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_type:15,flag:15,type:"ex",course_sort:i,course_id:y.id,new_exam:(0,v.Z)((0,v.Z)((0,v.Z)({},ie),(0,u.jJ)(z)),{},{paper_id:R.id,answer_rule:U.answer_rule,exam_count:U.exam_count||1,cut_screen_rule:d.cut_screen_rule,cut_screen_count:d.cut_screen_count||1,cut_screen_interval:d.cut_screen_interval||0,random_question:s.random_question,random_options:s.random_options,mark_type:c.mark_type,mark_question_type:{fill_blank:c.mark_type===u.lt.MANUAL?c.fill_blank:!1,short_answer:c.mark_type===u.lt.MANUAL?c.short_answer:!1},anonymous_marking:c.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...c.marker_list.map(ae=>typeof ae=="string"?ae:ae.id)],result_view_rule:l.result_view_rule,answer_parsing:l.answer_parsing,ranking_list_view_rule:l.ranking_list_view_rule,show_result:l.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddInvestigate":return{course_id:y.id,course_type:9,flag:9,course_sort:i,investigate:{id:y.id,title:y.name,questionnaire_id:y.questionnaire.id}};default:return null}})}));return m},N=o=>{function m(p){return p.fill_blank_count>0||p.short_answer_count>0}var L=o.map((p,y)=>({key:"".concat(new Date().getTime()).concat(y),desc:p.content,name:p.stage_name,inOrder:p.is_order,list:p.course_mapping_list.map(i=>{var e=i;switch(i.flag){case 1:return{id:i.course_id,name:i.name,type:i.course_type===1?"course":"courseware",icon:n.e1[i.type==="imageText"?"h5":i.contentType==="audio/mp3"?"mp3":i.type],originalType:i.type,componentName:i.course_type===1?"CourseSelector":"CoursewareSelector",status:i.course_type===1?"":i.status,duration:i.duration,data:i};case 2:return{id:i.course_id,name:e.title,type:"ex",icon:n.e1.ex,componentName:"AddExam",duration:e.exam_duration*60,data:{title:e.title,examDuration:e.exam_duration,summary:e.summary,isOpenDrawQuestions:e.proportionalExamVos&&e.proportionalExamVos.length>0,proportional:e.proportionalExamVos&&(e.proportionalExamVos.length>0?E(e.proportionalExamVos,e.bank_quesiton_list):e.question_mode===2?r(e.bank_quesiton_list):[])||[],cheatFlag:{isChecked:!!e.cheat_flag,switchNum:e.cut_screen_count===-1?null:e.cut_screen_count,faceRecognition:e.face_recognition},reExam:{show_result:e.show_result,isChecked:e.s_repeat_exam==="true",notAllowed:{end:e.answer_parsing},allowed:{reRule:e.re_exam_rule,record:e.score_rule,end:e.answer_parsing,reNum:e.re_exam_rule===2?e.re_exam_number:1,viewRule:e.view_rule}},markType:{checkedValue:e.mark_type===1?1:2,artificialDisabled:e.mark_type===1&&!m(e),fillBlank:{checked:(e.mark_type===2||e.mark_type===3)&&e.fill_blank_count,disabled:!e.fill_blank_count},shortAnswer:{checked:(e.mark_type===2||e.mark_type===4)&&e.short_answer_count,disabled:!e.short_answer_count},anonymousMarking:e.anonymous_marking==="true"},questionsMode:e.question_mode,knowledgePoints:e.show_knowledge==="show"?1:2,passLine:e.pass_line,fixedQuestion:e.question_mode===1?{id:e.paper_id,name:e.paper_title,tableList:{fillBlankCount:e.fill_blank_count,fillBlankScore:e.fill_blank_unit_score,multipleCount:e.multiple_count,multipleScore:e.multiple_unit_score,shortAnswerCount:e.short_answer_count,shortAnswerScore:e.short_answer_unit_score,singleCount:e.single_count,singleScore:e.single_unit_score,totalCount:e.paper_question_numbers,totalScore:e.total_score,trueOrFalseCount:e.true_or_false_count,trueOrFalseScore:e.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:e.question_mode===2?{bankQuesitonVoList:e.bank_quesiton_list.map(s=>{var c=s.fill_blank_count,l=s.multiple_count,z=s.short_answer_count,ie=s.single_count,ae=s.total_count,Y=s.true_or_false_count,Ee={fillBlankCount:c,shortAnswerCount:z,multipleCount:l,singleCount:ie,totalCount:ae,trueOrFalseCount:Y};return{id:s.id,name:s.name,data:Object.assign(s,Ee),fillBlankCount:c,shortAnswerCount:z,multipleCount:l,singleCount:ie,totalCount:ae,trueOrFalseCount:Y}}),bankQuesitonInfo:{fillBlankCount:e.fill_blank_count,fillBlankScore:e.fill_blank_unit_score,fillBlankType:+e.fill_blank_type||1,multipleCount:e.multiple_count,multipleScore:e.multiple_unit_score,shortAnswerCount:e.short_answer_count,shortAnswerScore:e.short_answer_unit_score,shortAnswerType:+e.short_answer_type||1,singleCount:e.single_count,singleScore:e.single_unit_score,trueOrFalseCount:e.true_or_false_count,trueOrFalseScore:e.true_or_false_unit_score,multipleMissedScore:e.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}}};case 9:return{id:i.course_id,name:i.title,type:"investigate",icon:n.e1.questionnaire,componentName:"AddInvestigate",data:i,questionnaire:{id:i.questionnaire_id,name:i.name}};case 15:{var t=(0,S.Qm)()._store,R=t.getState(),U=R.user,d=(0,u.AC)({data:i.exam_plan_detail_v1,user:{id:U.id,name:U.name,creator:!0}});return{id:i.exam_plan_detail_v1.id,name:i.exam_plan_detail_v1.title,type:"ex",icon:n.e1.ex,componentName:"AddNewExam",duration:i.exam_plan_detail_v1.exam_duration*60,data:d}}default:return null}})}));return L},Z=function(m){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return m.map((p,y)=>{var i=L.find(e=>e.stage_index-1===y);return p.list.map((e,t)=>{var R;i&&(R=i.resource_error_vos.find(d=>d.resource_index===t));var U=e.type;if(e.resource_type)switch(e.resource_type){case 1:U="course";break;case 2:case 3:U="courseware";break;case 6:case 15:U="ex";break;case 7:U="xx";break;case 9:U="questionnaire";break;case 13:U="attendance";break;case 14:U="assess";break;default:break}if(e.componentName)switch(e.componentName){case"CourseSelector":U="course";break;case"CoursewareSelector":U="courseware";break;case"AddNewExam":case"AddExam":U="ex";break;case"OfflineTrain":U="xx";break;case"Attendance":U="attendance";break;case"QuestionnaireSelector":case"AddInvestigate":U="questionnaire";break;case"AddPracticeTest":U="practicalIndustry";break;case"AddAssessment":U="assess";break;default:break}switch(U){case"course":e.resourceErrTip=R?R.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u88AB\u5220\u9664":R.resource_status==="un_released"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u300A".concat(R.resource_name,"\u300B\u672A\u53D1\u5E03\uFF0C\u8BF7\u542F\u7528\u540E\u518D\u7F16\u8F91"):"":"";break;case"courseware":e.resourceErrTip=R&&R.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u4EF6\u88AB\u5220\u9664":"";break;case"ex":e.resourceErrTip=R?R.resource_status==="bank_deleted"?"\u5F15\u7528\u7684\u9898\u5E93\u88AB\u5220\u9664":R.resource_status==="paper_deleted"?"\u5F15\u7528\u7684\u8BD5\u5377\u88AB\u5220\u9664":R.resource_status==="bank_missing"?"\u5F15\u7528\u7684\u9898\u5E93\u8BD5\u9898\u4E0D\u8DB3":"":"";break;case"xx":e.resourceErrTip=R&&R.resource_status==="time_expired"?"\u7EBF\u4E0B\u8BFE\u5DF2\u8FC7\u671F":"";break;case"questionnaire":e.resourceErrTip=R?R.resource_status==="deleted"?"\u5F15\u7528\u7684\u95EE\u5377\u88AB\u5220\u9664":R.resource_status==="un_released"?"\u5F15\u7528\u7684\u95EE\u5377\u672A\u53D1\u5E03":"":"";break;case"practicalIndustry":e.resourceErrTip=R&&R.resource_status==="operation_resource_deleted"?Q.Z.t("component.practicalDeleteTip"):"";break;default:break}return null}),null}),m},G=(o,m)=>({id:m?"":o.id,title:o.title,edit_status:o.edit_status,status:o.status,department_id:o.department_id||"",dateRange:{startTime:o.begin_time,endTime:o.end_time},address:o.address,course_duration:o.course_duration,has_lecturer_student_data:m?!1:o.has_lecturer_student_data,has_student_lecturer_data:m?!1:o.has_student_lecturer_data,has_student_course_data:m?!1:o.has_student_course_data,has_lecturer_assess_student_data:m?!1:o.has_lecturer_assess_student_data,teacher:{id:o.lecturer_id,name:o.lecturer_name,is_lecturer_confirm:o.is_lecturer_confirm,is_lecturer_subsidy:o.is_lecturer_subsidy,teacher_sync_user_id:o.teacher_sync_user_id,lecturer_name:o.lecturer_name,teacher_sync_source_type:o.teacher_sync_source_type,type:o.teacher_sync_type,teacher_sync_type:o.teacher_sync_type},introduction:o.introduction,attachment:o.attachment||[],other:{is_open_schedule:o.is_open_schedule,is_open_upload:o.is_open_upload},remind:{remind_type:o.remind_type||"offline_course",advance_minute:o.advance_minute,is_lecturer_remind:o.is_lecturer_remind,is_student_remind:o.is_student_remind,is_director_remind:o.is_director_remind},evaluate:{is_lecturer_student_evaluate:o.is_lecturer_student_evaluate,is_student_lecturer_evaluate:o.is_student_lecturer_evaluate,is_student_course_evaluate:o.is_student_course_evaluate,lecturer_student_evaluate_content:o.lecturer_student_evaluate_content?(0,v.Z)((0,v.Z)({},o.lecturer_student_evaluate_content),{},{passing_score:Number(o.lecturer_student_evaluate_content.passing_score),total_score:Number(o.lecturer_student_evaluate_content.total_score)}):{evaluate_type:"score",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_lecturer_evaluate_content:o.student_lecturer_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_course_evaluate_content:o.student_course_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""}},assess:{is_open_offline_assessment:o.is_open_offline_assessment,assessment_total_score:o.assessment_total_score,assessment_pass_score:o.assessment_pass_score},user_has_attendanted:m?!1:o.user_has_attendanted}),ue=(o,m)=>{var L=[];return m?o.attendance_course_vo.forEach(p=>{L.push((0,v.Z)((0,v.Z)({},p),{},{course_id:"",course_key:p.course_id}))}):L=o.attendance_course_vo,{courseId:o.courseId,directors:o.director?o.director.map(p=>p):o.directors,id:m?"":o.id,name:o.name,qrcode_type:o.qrcode_type,relate_course_list:L,sign_in_begin_time:o.sign_in_begin_time?(0,I.p6)(o.sign_in_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_in_end_time:o.sign_in_end_time?(0,I.p6)(o.sign_in_end_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_begin_time:o.sign_out_begin_time?(0,I.p6)(o.sign_out_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_end_time:o.sign_out_end_time?(0,I.p6)(o.sign_out_end_time,"yyyy-MM-dd hh:mm:ss"):"",source_type:o.source_type,remind_directors:o.remind_directors,advance_minute:o.advance_minute,user_has_attendanted:m?!1:o.user_has_attendanted,relate_course:o.relate_course,address:o.address,longitude:o.longitude,latitude:o.latitude,address_detail:o.address_detail,sign_range:o.sign_range}};function ne(o){return Object.prototype.toString.call(o)==="[object Object]"}function he(o){return o.replace(/[A-Z]/g,m=>"_".concat(m.toLowerCase()))}function oe(o){if(!ne(o))return o;for(var m={},L=Object.keys(o),p=0,y=L;p<y.length;p++){var i=y[p],e=o[i];i=he(i),m[i]=ne(e)?oe(e):e}return m}var Ce=o=>{var m=oe(o),L=m.id,p=m.name,y=m.requirement,i=m.resource_id,e=m.is_self_evaluate,t=m.is_lock,R=m.begin_time_unlock,U=m.end_time_unlock,d=m.questionnaire_id,s=m.evaluate_form_title,c=m.before_start_day,l=m.before_start_repeat,z=m.before_start_un_remind,ie=m.before_end_day,ae=m.before_end_repeat,Y=m.before_end_un_remind,Ee=m.after_end_day,pe=m.after_end_repeat,ge=m.after_end_un_remind,ke=m.is_passed_standards,fe=m.is_passed_option_three,we=m.pass_standard_conditions,H=m.pass_standards_number,Me=m.creator_user;return{id:L,name:p,requirement:y,resource_id:i,is_lock:t,begin_time_unlock:R,end_time_unlock:U,is_self_evaluate:e,questionnaire_id:d,evaluate_form_title:s,before_start_day:c,before_start_repeat:l,before_start_un_remind:z,before_end_day:ie,before_end_repeat:ae,before_end_un_remind:Y,after_end_day:Ee,after_end_repeat:pe,after_end_un_remind:ge,is_passed_standards:ke,is_passed_option_three:fe,pass_standard_conditions:we,pass_standards_number:H,creator_user:Me}},be=o=>({courseId:o.course_id,duration:o.duration,teacherName:o.live_lesson.teacher_name,startTime:o.live_lesson.live_start_time,endTime:o.live_lesson.live_end_time})},52536:function(ve,X,a){"use strict";var K=a(57361),v=a(9754),x=a.n(v),C=a(12924),Q=a.n(C),S=a(91768),J=a(80991),I=a(52544),n=a.n(I),u=a(60667),r=a(57482),E=a(64262),M=a(43859),A=a(84874),h=a(56130);class O extends Q().PureComponent{constructor(te){var B;super(te);B=this,this.onFocus=()=>{this.setState({open:!this.state.open})},this.onBlurChange=()=>{setTimeout(()=>{this.setState({open:!1})},100)},this.handleTreeSelectChange=(b,ee)=>{this.queryDepartmentName(b),this.setState({open:!this.state.open}),this.props.onFieldChange(b)},this.queryDepartmentName=function(){var b=(0,K.Z)(x().mark(function ee(P){var N;return x().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,r.Yy)(P);case 2:N=G.sent,N.data.code===0&&B.setState({deptName:N.data.data});case 4:case"end":return G.stop()}},ee)}));return function(ee){return b.apply(this,arguments)}}(),this.hideDropDown=b=>{b.stopPropagation();var ee=document.getElementsByClassName("edit-org")[0],P=document.getElementsByClassName("org-edit-select")[0],N=b.clientX,Z=b.clientY;if(!(!P||P.offsetLeft<=0)){var G=P.offsetLeft,ue=P.offsetTop-ee.offsetHeight,ne=P.offsetLeft+P.offsetWidth,he=P.offsetTop+P.offsetHeight;(N<G||N>ne||Z<ue||Z>he)&&this.onBlurChange()}},this.clearContent=b=>{b.stopPropagation(),this.setState({deptName:null}),this.props.onFieldChange("")},this.state={open:!1,deptName:null}}componentDidMount(){document.addEventListener("click",this.hideDropDown),this.props.value&&this.queryDepartmentName(this.props.value)}componentWillUnmount(){document.removeEventListener("click",this.hideDropDown)}render(){var te=this.props,B=te.value,b=te.selectWidth,ee=b===void 0?308:b,P=te.disabled,N=te.asyncLoad,Z=N===void 0?!0:N,G=te.placeholder,ue=te.t,ne=this.state,he=ne.open,oe=ne.deptName;return Q().createElement("div",{className:"".concat(n()["org-tree-select"]," edit-org")},Q().createElement("div",{className:n()["input-wrap"],onClick:this.onFocus,style:{width:"".concat(ee,"px")}},Q().createElement("span",{className:n()["input-wrap-name"]},oe?Q().createElement(u.Z,{type:oe.source_type,value:oe.id,name:oe.name,dataType:"departmentName"}):Q().createElement("span",{className:n()["placeholder-tips"]},G||ue("component.chooseDeptTip"))),Q().createElement("span",{className:n()["arrow-up-down"]},Q().createElement(A.Z,{iconClass:"".concat(he?"iconf-arrow-up":"iconf-arrow-under")})),oe&&Q().createElement("span",{className:n()["input-close-icon"],onClick:this.clearContent},Q().createElement(A.Z,{iconClass:"icon-icon_close",color:"rgba(0,0,0,.25)",size:"12px"}))),Q().createElement(E.Z,{className:"offline-input-width",width:ee,parentId:"",checkable:!1,asyncLoad:Z,disabled:P,defaultValue:B,treeSelect:!0,open:he,handleTreeSelectChange:this.handleTreeSelectChange,dropdownClassName:"org-edit-select"}))}}O.defaultProps={defaultValue:"",refreshData:!1};var W=(0,h.Z)((0,S.Z)()(O));X.Z=(0,M.Z)((0,J.$j)((0,h.Z)((0,S.Z)()(O))))},82416:function(ve,X,a){"use strict";a.d(X,{fn:function(){return x},Iw:function(){return C},dw:function(){return Q},aF:function(){return S},Pe:function(){return J},v7:function(){return I},dt:function(){return n},gx:function(){return u}});var K=a(37055),v=a(10237);function x(){var r=K.ZP.AccountSetting.getAccountInfo();return v.WY.get({url:r})}function C(r){var E=K.ZP.AccountSetting.bindAccount();return v.WY.post({url:E,data:r})}function Q(r){var E=K.ZP.AccountSetting.goodsOrder();return v.WY.get({url:E,params:r})}function S(r){var E=K.ZP.AccountSetting.getGoodsOrderExport();return v.WY.get({url:E,params:r})}function J(){var r=K.ZP.AccountSetting.getWxAccountInfo();return v.WY.get({url:r})}function I(r){var E=K.ZP.AccountSetting.getWxAccountInfo();return v.WY.post({url:E,data:r})}function n(){var r=K.ZP.StudyProjectList.getAccountInfo();return v.WY.get({url:r})}function u(r){var E=K.ZP.StudyProjectList.verifyAccountInformation();return v.WY.post({url:E,data:r})}},3652:function(ve,X,a){"use strict";var K=a(22385),v=a(31097),x=a(88983),C=a(47933),Q=a(12924),S=a.n(Q),J=a(43859),I=a(80991),n=a(91768),u=a(68628),r=a(3407),E=a(6793);class M extends S().Component{constructor(){super(...arguments);this.onChange=h=>{this.props.onChange(h.target.value)}}render(){var h=this.props,O=h.value,W=h.t,se=(0,E.me)();return S().createElement(C.ZP.Group,{onChange:this.onChange,value:O},S().createElement(C.ZP,{value:"free_mode"},r.Z[se].assgin.freeSchema),S().createElement(C.ZP,{value:"unlock_mode"},r.Z[se].assgin.UnlockPattern,S().createElement(v.Z,{title:W("assgin.noSupport")},S().createElement(u.Z,{style:{marginLeft:10}}))),S().createElement("span",{style:{color:"#AFB5D2"}},W("assgin.tipOfflineTraining")))}}X.Z=(0,J.Z)((0,I.$j)((0,n.Z)()(M)))},16084:function(ve,X,a){"use strict";var K=a(77883),v=a(21888),x=a(63185),C=a(9676),Q=a(12924),S=a.n(Q),J=a(91768),I=a(28216),n=a(80991),u=a(38642),r=a(43859);class E extends S().Component{constructor(){super(...arguments);this.state={blackList:{JobEvaluationBut:(0,u.eY)("MANAGEMENT_JOBEVALUATION_BUT")}},this.checkProgress=h=>{var O=h.target.checked,W=this.props.value;W.progress.isChecked=O,this.props.onFieldChange(W)},this.inputProgress=h=>{var O=this.props.value;O.progress.progress=h,this.props.onFieldChange(O)},this.checkExam=h=>{var O=h.target.checked,W=this.props.value;W.exam.isChecked=O,this.props.onFieldChange(W)},this.inputTimes=h=>{var O=this.props.value;O.exam.times=h,this.props.onFieldChange(O)},this.checkOperation=h=>{var O=h.target.checked,W=this.props.value;W.operation.isChecked=O,this.props.onFieldChange(W)},this.inputOperationTimes=h=>{var O=this.props.value;O.operation.times=h,this.props.onFieldChange(O)},this.checkJobEvaluation=h=>{var O=h.target.checked,W=this.props.value;W.jobEvaluation.isChecked=O,this.props.onFieldChange(W)}}UNSAFE_componentWillReceiveProps(h){if(this.props.jobEvaluationCount!==h.jobEvaluationCount&&h.jobEvaluationCount>0){var O=h.value;O.jobEvaluation.isChecked=!0,h.onFieldChange(O)}}render(){var h=this.props,O=h.value,W=h.examCount,se=h.courseCount,te=h.operationCount,B=h.isPreview,b=h.t,ee=h.shouldRenderedOperationCount,P=h.jobEvaluationCount,N=h.completeJobEvaluation,Z=h.qyShield,G=O.progress,ue=O.exam,ne=O.operation,he=O.jobEvaluation,oe=this.state.blackList;return S().createElement("div",{className:"qualified-standard"},S().createElement("div",{className:"qualified-standard-title"},b("learning.learningAddSecPassTitle"),S().createElement("span",{className:"qualified-standard-sub"},b("learning.learningAddSecPassTitleTip"))),S().createElement("div",{className:"qualified-standard-item"},S().createElement(C.Z,{disabled:se<1||B,className:"qualified-standard-checkbox",checked:se<1?!1:G.isChecked,onChange:this.checkProgress},b("learning.learningAddProgressRequire")),S().createElement(v.Z,{value:G.progress,disabled:!G.isChecked||se<1||B,onChange:this.inputProgress,className:"qualified-standard-number",min:1,max:100,precision:0}),S().createElement("span",{className:"qualified-standard-tip"},b("learning.learningAddProgressRequireTip"))),S().createElement("div",{className:"qualified-standard-item"},S().createElement(C.Z,{className:"qualified-standard-checkbox",disabled:W<1||B,checked:W<1?!1:ue.isChecked,onChange:this.checkExam},b("learning.learningAddPassRequire")),S().createElement(v.Z,{value:ue.times,disabled:!ue.isChecked||W<1||B,className:"qualified-standard-number",onChange:this.inputTimes,min:1,max:W>0?W:999,precision:0}),S().createElement("span",{className:"qualified-standard-tip"},b("learning.learningAddPassRequireTip"))),ee&&S().createElement("div",{className:"qualified-standard-item"},S().createElement(C.Z,{className:"qualified-standard-checkbox",disabled:te<1||B,checked:te<1?!1:ne.isChecked,onChange:this.checkOperation},b("learning.learningAddOperationRequire")),S().createElement(v.Z,{value:ne.times,disabled:!ne.isChecked||te<1||B,className:"qualified-standard-number",onChange:this.inputOperationTimes,min:1,max:te>0?te:999,precision:0}),S().createElement("span",{className:"qualified-standard-tip"},b("learning.learningAddOperationRequireTip"))),oe.JobEvaluationBut&&N&&Z==="false"&&S().createElement("div",{className:"qualified-standard-item"},S().createElement(C.Z,{className:"qualified-standard-checkbox",disabled:P<1||B,checked:P>0?he.isChecked:!1,onChange:this.checkJobEvaluation},b("learning.completeJobEvaluation"))))}}var M=A=>{var h=A.user;return{user:h,qyShield:h.qyShield}};X.Z=(0,I.$j)(M)((0,r.Z)((0,n.$j)((0,J.Z)()(E))))},69069:function(ve,X,a){"use strict";var K=a(77883),v=a(21888),x=a(57663),C=a(71577),Q=a(47673),S=a(4107),J=a(63185),I=a(9676),n=a(12924),u=a.n(n),r=a(91768),E=a(28216),M=a(80991),A=a(49101),h=a(43859),O=a(93117),W=a(10237),se=a(37055),te=b=>({qyShield:b.user.qyShield});class B extends u().Component{constructor(ee){super(ee);this.getScoreRule=()=>{var P=se.ZP.EditStudyTask.getScoreRule(),N=this.props.value;W.WY.get({url:P}).then(Z=>{if(Z.data.data.hasRule){var G=Z.data.data.studyScore,ue=G[0],ne=ue.finishScore,he=ue.unFinishScore;N.score.reward=ne,N.score.deduction=he,this.props.onFieldChange(N)}})},this.handleSelectCertificate=()=>{var P=this.state.certificateConfig,N=this.props.value;P.visible=!0,P.defaultChecked=[{id:N.certificate.id,name:N.certificate.name}],this.setState({certificateConfig:P})},this.cancelSelectCertificate=()=>{var P=this.state.certificateConfig;P.visible=!1,this.setState({certificateConfig:P})},this.sureSelectCertificate=P=>{this.cancelSelectCertificate();var N=this.props.value;N.certificate.id=P[0].id,N.certificate.name=P[0].name,this.props.onFieldChange(N)},this.checkScoreReward=P=>{var N=P.target.checked,Z=this.props.value;Z.score.isCheckedReward=N,this.props.onFieldChange(Z)},this.checkScoreDeduction=P=>{var N=P.target.checked,Z=this.props.value;Z.score.isCheckedDeduction=N,this.props.onFieldChange(Z)},this.checkCerti=P=>{var N=P.target.checked,Z=this.props.value;Z.certificate.isChecked=N,this.props.onFieldChange(Z)},this.inputReward=P=>{var N=this.props.value;N.score.reward=P,this.props.onFieldChange(N)},this.inputDeduction=P=>{var N=this.props.value;N.score.deduction=P,this.props.onFieldChange(N)},this.state={certificateConfig:{visible:!1,defaultChecked:[],onCancel:this.cancelSelectCertificate,onOk:this.sureSelectCertificate}}}componentDidMount(){var ee=this.props.value;!ee.score.isCheckedReward&&!ee.score.isCheckedDeduction&&this.getScoreRule()}render(){var ee=this.state.certificateConfig,P=this.props,N=P.value,Z=P.isPreview,G=P.tipType,ue=G===void 0?"":G,ne=P.t,he=P.formik,oe=he.errors,Ce=he.touched,be=N.certificate,o=N.score;return u().createElement("div",{className:"study-reward task"},u().createElement("div",{className:"study-reward-title"},ne("learning.learningAddSecRewardTitle"),u().createElement("span",{className:"study-reward-sub"},ne("learning.learningAddSecRewardTitleTip"))),u().createElement("div",{className:"study-reward-item"},u().createElement(I.Z,{className:"study-reward-checkbox",disabled:Z,checked:be.isChecked,onChange:this.checkCerti},ne("learning.learningAddRewardCert")),u().createElement(S.Z,{value:be.name,disabled:!0,className:Ce.reward&&oe.reward&&oe.reward.certificateChecked?"status-error study-reward-number":"study-reward-number"}),u().createElement(C.Z,{type:"link",icon:u().createElement(A.Z,null),disabled:!be.isChecked||Z,onClick:this.handleSelectCertificate},ne("learning.learningAddRewardCertSelect"))),u().createElement("div",{className:"study-reward-item"},u().createElement(I.Z,{className:"study-reward-checkbox",checked:o.isCheckedReward,disabled:Z,onChange:this.checkScoreReward},ne("learning.learningAddRewardPassScore")),u().createElement(v.Z,{value:o.reward,disabled:!o.isCheckedReward||Z,onChange:this.inputReward,min:0,max:999,precision:0,className:Ce.reward&&oe.reward&&oe.reward.scoreRewardChecked?"status-error":""}),u().createElement("span",{className:"study-reward-tip"},ne(ue==="project"?"learning.learningAddRewardPassScoreProjectTip":"learning.learningAddRewardPassScoreTip"))),u().createElement("div",{className:"study-reward-item"},u().createElement(I.Z,{className:"study-reward-checkbox",disabled:Z,checked:o.isCheckedDeduction,onChange:this.checkScoreDeduction},ne("learning.learningAddRewardunPassScore")),u().createElement(v.Z,{value:o.deduction,disabled:!o.isCheckedDeduction||Z,onChange:this.inputDeduction,min:0,max:999,precision:0,className:Ce.reward&&oe.reward&&oe.reward.scoreDeductionChecked?"status-error":""}),u().createElement("span",{className:"study-reward-tip"},ne(ue==="project"?"learning.learningAddRewardunPassScoreProjectTip":"learning.learningAddRewardunPassScoreTip"))),Ce.reward&&oe.reward&&u().createElement("span",{style:{paddingLeft:"16px"},className:"tip_error_msg"},oe.reward.msg),u().createElement(O.Z,ee))}}X.Z=(0,h.Z)((0,M.$j)((0,E.$j)(te)((0,r.Z)()(B))))},44659:function(ve,X,a){"use strict";var K=a(77576),v=a(59314),x=a(22385),C=a(31097),Q=a(77883),S=a(21888),J=a(63185),I=a(9676),n=a(12924),u=a.n(n),r=a(28216),E=a(91768),M=a(17780),A=a(43859),h=a(16239),O=a(84874),W=a(38642);class se extends u().Component{constructor(){super(...arguments);this.state={blackList:{jobEvaluationSwitch:(0,W.eY)("STUDYTIME_JOBEVALUATION_SWITCH"),faceKnowTipFlag:(0,W.eY)("STUDYTIMELIMT_EXAM_FACE_KNOW")},whiteList:{faceVideoSourceFlag:(0,W.UI)("STUDYTIMELIMT_VIDEO_FACE_KNOW")}},this.renderText=()=>{var B=this.props.t;return u().createElement("div",null,u().createElement("p",{className:"title"},B("course.documentStudyLimitTip1")),u().createElement("p",{className:"title"},B("course.documentStudyLimitTip2")))},this.handleCheck=B=>{var b=B.target.checked,ee=this.props.value;ee.isChecked=b,this.props.onFieldChange(ee)},this.handleInput=B=>{var b=this.props.value;b.limit=B,this.props.onFieldChange(b)},this.handleSwitch=B=>{var b=this.props.value;b.faceRecognition=B,this.props.onFieldChange(b)},this.handleMediaSwitch=B=>{var b=this.props.value;b.videoFaceRecognition=B,this.props.onFieldChange(b)},this.handleJobSwitch=B=>{var b=this.props.value;b.jobEvaluationResults=B,this.props.onFieldChange(b)}}render(){var B=this.props,b=B.value,ee=B.isPreview,P=B.t,N=B.appType,Z=B.isShowJobInput,G=B.jobEvaluationCount,ue=B.componentType,ne=B.isEdit,he=B.qyShield,oe=this.state,Ce=oe.blackList,be=oe.whiteList;return u().createElement("div",{className:"study-time-limit"},u().createElement("div",{className:"study-time-limit-title"},P("learning.learningAddSecSetTitle"),u().createElement("span",{className:"study-time-limit-sub"},P("learning.learningAddSecSetTitleTip"))),u().createElement("div",{className:"study-time-limit-input"},u().createElement(I.Z,{checked:b.isChecked,onChange:this.handleCheck,disabled:ee||ne,className:b.isChecked?"study-time-limit-checked":""},P("learning.learningAddSecSetTitleInfo")),u().createElement(S.Z,{size:"middle",value:b.limit,disabled:!b.isChecked||ee,onChange:this.handleInput,className:"study-time-limit-number",min:1,max:9999,precision:0}),u().createElement("span",{className:"study-time-limit-standard"}),P("course.secByPage"),u().createElement(C.Z,{placement:"top",title:this.renderText},u().createElement("span",null,u().createElement(O.Z,{iconClass:"icon-f-tipe"}))),b.isChecked?null:u().createElement("span",{className:"study-time-limit-tip"},P("course.documentStudyLimitTip"))),Ce.jobEvaluationSwitch&&Z&&he==="false"&&u().createElement("div",{className:"study-time-limit-jobInput"},G<1?u().createElement(v.Z,{defaultChecked:!1,checked:!1,disabled:!0,id:1}):u().createElement(v.Z,{checked:b.jobEvaluationResults,onChange:this.handleJobSwitch,disabled:ee,id:2}),u().createElement("span",{className:"item-margin"}," ",P("learning.openJobEvaluationResults")," "),u().createElement("span",{className:"study-time-limit-tip"},P("learning.jobEvaluationResultsTip"))),(0,M.xX)()||N==="wx_app"||N==="fs_app"||!h.Z[(0,h.c)()].showCl||ue==="authentication"||!Ce.faceKnowTipFlag?null:u().createElement("div",{className:"study-time-limit-input"},u().createElement(v.Z,{defaultChecked:b.faceRecognition,onChange:this.handleSwitch,disabled:ee}),u().createElement("span",{className:"item-margin"}," ",P("exam.faceKnow")," "),u().createElement("span",{className:"study-time-limit-tip"},P("exam.faceKnowTip"))),be.faceVideoSourceFlag?u().createElement("div",{className:"study-time-limit-input"},u().createElement(v.Z,{defaultChecked:b.videoFaceRecognition,onChange:this.handleMediaSwitch,disabled:ee}),u().createElement("span",{className:"item-margin"}," ",P("exam.faceVideoSource")," "),u().createElement("span",{className:"study-time-limit-tip"},P("exam.faceVideoSourceTip"))):null)}}X.Z=(0,r.$j)(te=>({appType:te.user.appType,themeColor:te.advancedSetting.themeColor,qyShield:te.user.qyShield}))((0,A.Z)((0,E.Z)()(se)))},6998:function(ve,X,a){"use strict";var K=a(47673),v=a(4107),x=a(12924),C=a.n(x),Q=a(43859),S=a(80991),J=a(10237),I=a(37055);class n extends C().Component{constructor(){var r;super(...arguments);r=this,this.handleChange=E=>{var M=E.target.value;this.props.onChange(M)},this.handleBlur=()=>{var E=this.props.formType;switch(E){case"task":this.checkTaskName();break;case"project":this.checkProjectName();break;case"employee":this.checkTaskName(2);break;default:break}},this.checkTaskName=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,M=I.ZP.EditStudyTask.checkTaskTitle(),A=r.props,h=A.value,O=A.formik,W=A.t,se={edit:E,trainName:h};J.WY.get({url:M,params:se}).then(te=>{te.data.code!==0&&(O.setFieldError("title",W("learning.learningAddTitleRepeatTip")),O.setFieldTouched("title",!0,!1))})},this.checkProjectName=()=>{var E=I.ZP.EditStudyProject.checkProjectName(),M=this.props,A=M.value,h=M.formik,O=M.t,W={title:A};J.WY.post({url:E,data:W}).then(se=>{se.data.checked!=="true"&&(h.setFieldError("title",O("learning.learningAddTitleRepeatTip")),h.setFieldTouched("title",!0,!1))}).catch(se=>{se.response.data.code==="enterpriseapi.542001"&&(h.setFieldError("title",O("learning.learningAddTitleRepeatTip")),h.setFieldTouched("title",!0,!1))})}}render(){var r=this.props,E=r.value,M=r.isPreview,A=r.placeholder;return C().createElement(v.Z,{style:{width:"350px"},value:E,disabled:M,placeholder:A,onChange:this.handleChange})}}X.Z=(0,Q.Z)((0,S.$j)(n))},25501:function(ve,X,a){"use strict";var K=a(12924),v=a.n(K),x=a(91768),C=a(24144),Q=a(84874),S=a(43859);class J extends v().Component{constructor(){super(...arguments);this.onChange=n=>{var u=n.fileList;this.props.onChange(u)}}render(){var n=this.props,u=n.value,r=n.isPreview,E=n.t;return v().createElement("div",{className:"ding_QR_code_upload_image_field"},v().createElement("div",{className:"ding_QR_code_upload_container"},v().createElement(C.ZM,{fileList:u,uploadConfig:{maxCount:1,fileList:u,disabled:r},size:{value:2,unit:"MB"},onUploadedListChange:this.onChange,render:M=>(0,C.iM)(M)})),v().createElement("div",{className:"ding_QR_code_upload_image_field_tip"},v().createElement(Q.Z,{iconClass:"icon-icon_attentionx1",size:"14px"}),E("learning.learningAddACTip")))}}X.Z=(0,S.Z)((0,x.Z)()(J))},40767:function(ve,X,a){"use strict";a.d(X,{g:function(){return K},c:function(){return v}});var K={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},v={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:20}}}},89135:function(ve,X,a){"use strict";var K=a(88986),v=a(78138),x=a.n(v),C=a(6793),Q=a(2396),S=a(3407),J=(0,C.me)(),I=S.Z[J].learning.validation;X.Z={multiText:n=>{var u;return(0,Q.$s)((0,C.fy)(n))>256&&(u=I.multiTextTip),u},title:n=>((0,C.fy)(n)?"":I.learningAddItemTitleNull)||((0,C.fy)(n).length>60?I.learningAddItemTitleLimit:""),dateRange:(n,u,r)=>{var E;if((!n.startTime||!n.endTime)&&(E=I.learningAddItemDateRangeNull),!r){var M="YYYY-MM-DD HH:mm";u.forEach(A=>{(x()(x()(A.data.dateRange.startTime).format(M)).valueOf()<(0,C.jZ)(x()(n.startTime).format(M))||x()(x()(A.data.dateRange.startTime).format("YYYY-MM-DD HH:mm")).valueOf()>(0,C.jZ)(x()(n.endTime).format(M))||x()(x()(A.data.dateRange.endTime).format(M)).valueOf()<=(0,C.jZ)(x()(n.startTime).format(M))||x()(x()(A.data.dateRange.endTime).format(M)).valueOf()>(0,C.jZ)(x()(n.endTime).format(M)))&&(E=I.learningAddItemDateRangeOnsite)})}return E},qualifiedStandardExceptWork:(n,u,r)=>{var E;return n&&(r===0&&u===0||!n.progress.isChecked&&!n.exam.isChecked||r===0&&!n.exam.isChecked)&&(E=I.learningAddItemPass),E},qualifiedStandardInOperation:(n,u,r,E,M)=>{var A;return n&&(r===0&&u===0&&E===0&&M===0||!n.progress.isChecked&&!n.exam.isChecked&&!n.operation.isChecked&&n.jobEvaluation&&!n.jobEvaluation.isChecked)&&(A=I.learningAddItemPass),A},checkStandardInOperation:(n,u,r,E)=>{var M;return n&&(r===0&&u===0&&E===0||!n.progress.isChecked&&!n.exam.isChecked&&!n.operation.isChecked||n.progress.isChecked&&!n.progress.progress||u!==0&&n.exam.isChecked&&!n.exam.times||E!==0&&n.operation.isChecked&&!n.operation.times)&&(M=I.learningAddItemPass),M},qualifiedStandard:(n,u,r,E,M)=>{var A;return n&&(r===0&&u===0&&E===0&&M===0||!n.progress.isChecked&&!n.exam.isChecked&&!n.operation.isChecked&&!n.jobEvaluation.isChecked||n.progress.isChecked&&!n.progress.progress||u!==0&&!n.exam.isChecked||u!==0&&n.exam.isChecked&&!n.exam.times||E!==0&&!n.operation.isChecked||E!==0&&n.operation.isChecked&&!n.operation.times)&&(A=I.learningAddItemPass),A},reward:n=>{var u={};return(!n||n.certificate.isChecked&&!n.certificate.id)&&(u=(0,K.Z)((0,K.Z)({},u),{},{certificateChecked:!0,msg:I.learningAddItemRewardCert})),n.score.isCheckedDeduction&&!n.score.deduction&&(u=(0,K.Z)((0,K.Z)({},u),{},{scoreDeductionChecked:!0,msg:I.learningAddItemRewardunPass})),n.score.isCheckedReward&&!n.score.reward&&(u=(0,K.Z)((0,K.Z)({},u),{},{scoreRewardChecked:!0,msg:I.learningAddItemRewardPass})),Object.keys(u).length?u:""},checkTerm:n=>{var u=n.number,r;return(!Q.fA.positiveInteger.test(u)||u<1||u>100)&&(r=I.learningAddItemTerm),r},studyLimit:n=>{var u;return n.isChecked&&!n.limit?u=I.learningTimeTip:n.limit>9999&&(u=I.learningTimeBeyondTip),u},originPrice:n=>{var u;return parseFloat(n)===0?u=I.originalPriceTip:parseFloat(n)>99999&&(u=I.maxOriginPriceTip),u},discountPrice:(n,u)=>{var r;return n===""||parseFloat(n)===0?r=I.discountPriceTip:parseFloat(n)>99999?r=I.maxDiscountPriceTip:parseFloat(u)<=parseFloat(n)&&(r=I.diffPriceTip),r},registerRange:n=>{var u;return(!n.startTime||!n.endTime)&&(u=I.learningAddItemDateRangeNull),(0,C.jZ)(n.startTime)>=(0,C.jZ)(n.endTime)&&(u=I.learningAddItemDateRangeLimit),u},dateValidateCourse:(n,u)=>{var r;return(!n.startTime||!n.endTime)&&(r=I.learningAddItemDateRangeNull),(0,C.jZ)(n.startTime)>=(0,C.jZ)(n.endTime)&&(r=I.learningAddItemDateRangeLimit),(0,C.jZ)(n.startTime)<(0,C.jZ)(u.endTime)&&(r=I.learningCourseTime),r},inputValidateNumber:(n,u)=>{var r="";return(0,C.fy)(n)?(u&&Number(n)>=Number(u)&&(r=S.Z[J].learning.validation.priceLimit),Number(n)>99999&&(r=S.Z[J].validation.maxNum99999),Number(n)<.01&&(r=S.Z[J].validation.minNum),r):(r=S.Z[J].validation.pleaseEnter,r)},applyTip:n=>{var u;return n.isNeedApply==="need"&&n.enrollAudit==="automatic_audit"&&n.enrollLimit&&n.limitCount===""&&(u=I.applyPeopleTip),u},taskPrice:n=>{var u=n.price,r=n.isPaid,E;return r&&(u===""||parseFloat(u)===0?E=I.taskPriceTip:parseFloat(u)>99999&&(E=I.maxPriceTip)),E}}},31970:function(ve,X,a){"use strict";var K=a(47673),v=a(4107),x=a(62029),C=a(81211),Q=a(12924),S=a.n(Q),J=a(91768),I=a(80991),n=a(43859);class u extends S().Component{constructor(){super(...arguments);this.handleChange=E=>{var M=this.clearNoNum(E.target.value);this.props.onChange(M)},this.clearNoNum=E=>(E=E.replace(/[^\d]/g,""),E.indexOf(".")<0&&E!==""&&(E=parseFloat(E)),E)}render(){var E=this.props,M=E.value,A=E.disabled,h=E.t,O=E.maxLength,W=E.placeholder,se=E.renderAssist,te=(0,C.Z)(E,["value","disabled","t","maxLength","placeholder","renderAssist"]);return S().createElement(Q.Fragment,null,S().createElement(v.Z,(0,x.Z)({},te,{size:"middle",value:M,disabled:A,onChange:this.handleChange,onBlur:this.handleBlur,maxLength:O,className:"payment-inner-inputNumber",placeholder:W||h("learning.learnUpgrade.pleaseEnter")})),se&&se())}}X.Z=(0,n.Z)((0,J.Z)()((0,I.$j)(u)))},5677:function(ve,X,a){"use strict";a.d(X,{Z:function(){return vt}});var K=a(20136),v=a(55241),x=a(62029),C=a(34792),Q=a(48086),S=a(57361),J=a(88986),I=a(9754),n=a.n(I),u=a(12924),r=a.n(u),E=a(28216),M=a(91768),A=a(76651),h=a(80991),O=a(57068),W=a(78138),se=a.n(W),te=a(40847),B=a(16084),b=a(69069),ee=a(44659),P=a(6998),N=a(25501),Z=a(40767),G=a(89135),ue=a(3652),ne=a(47673),he=a(4107),oe=a(77576),Ce=a(59314),be=a(43859),o=a(82416);class m extends r().Component{constructor(){var $;super(...arguments);$=this,this.state={paidStatus:!0},this.getUserAliPayStatus=(0,S.Z)(n().mark(function F(){var g,k;return n().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,o.dt)();case 2:g=D.sent,k=g.data.data,(k.wxpay==="true"||k.alipay==="true")&&$.setState({paidStatus:!1});case 5:case"end":return D.stop()}},F)})),this.handleChange=F=>{var g=this.props.value,k=this.clearNoNum(F.target.value);g.price=k,this.props.onFieldChange(g)},this.handleBlur=F=>{var g=this.props.value,k=F.target.value===""?"":parseFloat(F.target.value).toFixed(2);g.price=k,this.props.onFieldChange(g)},this.handleSwitch=F=>{var g=this.props.value;g.isPaid=F,this.props.onFieldChange(g)},this.clearNoNum=F=>{var g=F;return g=g.replace(/[^\d.]/g,""),g=g.replace(/\.{2,}/g,"."),g=g.replace(".","$#$").replace(/\./g,"").replace("$#$","."),g=g.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),g.indexOf(".")<0&&g!==""&&(g=parseFloat(g)),g}}componentDidMount(){this.getUserAliPayStatus()}render(){var $=this.props,F=$.value,g=$.isPreview,k=$.t,T=this.state.paidStatus,D=F.isPaid,_=F.price;return r().createElement("div",{className:"paid-learning"},r().createElement("div",{className:"paid-learning__title"},k("learning.payLearning")),r().createElement("div",{className:"paid-learning__content"},r().createElement("div",{className:"paid-learning__content__switch"},r().createElement(Ce.Z,{checked:D,onChange:this.handleSwitch,disabled:g||T}),k("learning.whetherToPay")),r().createElement("div",{className:"paid-learning__content__tip"},k("learning.whetherToPayTips"))),r().createElement("div",{className:"paid-learning__price"},r().createElement(he.Z,{className:"paid-learning__price__input",value:_,disabled:!D||g,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:k("learning.learnUpgrade.pleaseEnter")}),k("payment.moneyUnit")))}}var L=(0,be.Z)((0,M.Z)()((0,h.$j)(m))),p=a(41222),y=a(57663),i=a(71577),e=q=>{var $=q.t,F=q.isPreview,g=q.saveDraft,k=q.cancelEdit,T=q.studyProjectFlag;return r().createElement("div",{className:"cl-form-fixed-footer"},r().createElement("div",{className:"cl-form-fixed-footer__container"},r().createElement(i.Z,{className:"form-page-container-bottom-btn",onClick:k},$("common.cancel")),!F&&!T?r().createElement(i.Z,{className:"form-page-container-bottom-btn",loading:q.isSubmitting,onClick:g},$("common.draft")):null,F?null:r().createElement(i.Z,{className:"form-page-container-bottom-btn",loading:q.isSubmitting,onClick:q.submitForm,type:"primary"},$("common.release"))))},t=e,R=a(27361),U=a.n(R),d=a(57482),s=a(38642),c=a(58697),l=q=>{var $=q.t,F=q.isPreview,g=q.saveDraft,k=q.cancelEdit,T=q.plan_id,D=q.from,_=function(){var f=(0,S.Z)(n().mark(function _e(){var me,re,Se;return n().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,g(!1);case 2:if(me=le.sent,re=U()(me,"data.data"),le.prev=4,!re){le.next=9;break}return le.next=8,(0,d.Wg)({task_id:re,plan_id:T});case 8:D==="personal"?(0,s.eJ)({url:"/personal/training/plan/trainPlan/detail?".concat(O.stringify({bizType:c.B.EXEC,businessId:T,from:D}))}):D==="detail"?A.m8.goBack():A.m8.push({pathname:"/training/trainingPlan/trainPlan/detail",search:O.stringify({bizType:c.B.EXEC,businessId:T,from:D})});case 9:le.next=15;break;case 11:le.prev=11,le.t0=le.catch(4),Se=U()(le.t0,"response.data.message"),Q.default.error(Se);case 15:case"end":return le.stop()}},_e,null,[[4,11]])}));return function(){return f.apply(this,arguments)}}();return r().createElement("div",{className:"cl-form-fixed-footer"},r().createElement("div",{className:"cl-form-fixed-footer__container"},F?null:r().createElement(i.Z,{className:"form-page-container-bottom-btn",loading:q.isSubmitting,onClick:_,type:"primary"},$("common.save")),r().createElement(i.Z,{className:"form-page-container-bottom-btn",onClick:k},$("common.cancel"))))},z=l,ie=q=>{var $=q.t,F=q.isPreview,g=q.saveDraft,k=q.plan_id,T=q.from,D=function(){var f=(0,S.Z)(n().mark(function _e(){return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,g(!1);case 2:T==="personal"?A.m8.goBack():A.m8.push({pathname:"/training/trainingPlan/trainPlan/detail",search:O.stringify({bizType:c.B.EXEC,businessId:k,from:T})});case 3:case"end":return re.stop()}},_e)}));return function(){return f.apply(this,arguments)}}(),_=()=>{T==="personal"?A.m8.goBack():A.m8.push({pathname:"/training/trainingPlan/trainPlan/detail",search:O.stringify({bizType:c.B.EXEC,businessId:k,from:T})})};return r().createElement("div",{className:"cl-form-fixed-footer"},r().createElement("div",{className:"cl-form-fixed-footer__container"},F?null:r().createElement(i.Z,{className:"form-page-container-bottom-btn",loading:q.isSubmitting,onClick:D,type:"primary"},$("common.save")),r().createElement(i.Z,{className:"form-page-container-bottom-btn",onClick:_},$("common.cancel"))))},ae=ie,Y=q=>{var $=q.type;switch($){case"relation_plan":return r().createElement(z,q);case"relation_plan_edit":return r().createElement(ae,q);default:return r().createElement(t,q)}},Ee=Y,pe=a(31459),ge=a(7584),ke=a(10237),fe=a(37055),we=a(28531),H=a(62615),Me=a(52670),je=a(52536),Ze=a(53009),ze=a(6793),ct=a(17994),_t=a(70075),Ke=a(86726),mt=a(4408),pt=a(31970),gt=a(74927),ht=a(84717),ft=q=>({user:q.user,documentStudyLimit:q.advancedSetting.documentStudyLimit,isOpen:q.user.JobEvaluationOpen,isOpenTrainingCamp:q.publicVariable.isOpenTrainingCamp,qyShield:q.user.qyShield});class Je extends r().Component{constructor($){var F;super($);F=this,this.stageTaskLock=()=>{var g=this.initialValues.stages,k=this.state,T=k.canEditFields,D=k.isTutorShow,_=k.editTaskId,f=k.studyProjectId;D&&g.length&&(f||_)&&(g.map(_e=>{var me=_e.list;return me.length&&me.map(re=>{re.resource_lock=!0}),_e}),this.setState({canEditFields:T.filter(_e=>_e!=="stages")})),this.props.dispatch({type:"publicVariable/getHasMenusPermissions",payload:{flag:"TrainingCamp"}})},this.isAssessTutorShow=()=>{var g=!1,k=this.initialValues.stages;if(k)for(var T=0;T<k.length;T++){var D=k[T].list;if(g=D.some(_=>{var f=_.type;return f&&f.toLowerCase()==="assess"}),g)break}this.setState({isTutorShow:g},()=>{this.stageTaskLock()})},this.zaraStateDual=()=>{var g=this.state,k=g.whiteList,T=g.studyProjectId,D=g.editTaskId;k.zaraFlag&&(T||D)&&this.isAssessTutorShow()},this.handleStageChange=g=>{var k=(0,p.z2)(g),T=(0,p.Qz)(g),D=(0,p.GM)(g),_=(0,p.S1)(g),f=this.formRef.state.values.qualifiedStandard;k<1&&(f.exam.isChecked=!1),T<1&&(f.progress.isChecked=!1),D<1&&(f.operation.isChecked=!1),_<1&&(f.jobEvaluation.isChecked=!1),this.formRef.setFieldValue("qualifiedStandard",f)},this.initialValues={title:"",dateRange:{startTime:null,endTime:null},summary:"",classify:"",deptIds:"",trainObject:"",budget:0,syncProgress:"false",createUserId:"",qrcode:[],stages:[{key:"".concat(new Date().getTime()),name:"".concat(this.props.t("formItem.stageTaskPanelTitle"),"1"),desc:"",list:[],inOrder:!1}],scheduleSetting:"free_mode",employeeRange:{rangeType:"",qyWeChatVo:"",rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}},lecturer_name:"",studyLimit:{isChecked:this.props.documentStudyLimit!==0,limit:this.props.documentStudyLimit,faceRecognition:!!this.props.faceRecognition,videoFaceRecognition:!!this.props.videoFaceRecognition,jobEvaluationResults:!!this.props.jobEvaluationResults},qualifiedStandard:{progress:{isChecked:!0,progress:100},exam:{isChecked:!1,times:1},operation:{isChecked:!1,times:1},jobEvaluation:{isChecked:!1}},reward:{certificate:{isChecked:!1,id:"",name:""},score:{isCheckedReward:!1,isCheckedDeduction:!1,reward:0,deduction:0}},supervisor:{supervisorUserList:[],qyWeChatVo:"",isChecked:!0,visibleAuthScope:!0,authScopeIsChecked:!1},stagePass:!1,payInfo:{isPaid:!1,price:""},open_transfer_student:!1},this.initRef=g=>{this.formRef=g},this.getStudyProject=()=>{var g=this.state,k=g.studyProjectId,T=g.whiteList,D=T.zaraFlag?fe.ZP.StudyProjectWithAssessment.getProjectInfo(k):fe.ZP.EditStudyProject.getProjectInfo(k);ke.WY.get({url:D}).then(_=>{var f=_.data;this.initialValues={title:f.title+se()().format("MMDD"),scheduleSetting:"free_mode",dateRange:{startTime:null,endTime:null},summary:f.summary,createUserId:f.create_user,classify:f.classify,classifyName:f.classify_name,deptIds:f.dept_ids,trainObject:f.train_object,budget:f.budget,syncProgress:f.sync_progress,qrcode:f.ding_img_url?[{uid:"erer",url:f.ding_img_url,name:"",status:"done"}]:[],stages:(0,Ze.$x)((0,Ze.tT)(f.stages,!0),f.stage_error_list.length>0?f.stage_error_list:[]),employeeRange:{rangeType:"",qyWeChatVo:"",rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}},lecturer_name:f.tutorName,user_id:f.tutorId,studyLimit:{isChecked:f.study_time_limit!==0,limit:f.study_time_limit!==0?f.study_time_limit:0,faceRecognition:f.face_recognition==="on",videoFaceRecognition:f.video_face_recognition==="on",jobEvaluationResults:f.open_evaluation_result==="true"},qualifiedStandard:{progress:{isChecked:f.progress!==0,progress:f.progress!==0?f.progress:100},exam:{isChecked:f.times!==0,times:f.times!==0?f.times:1},operation:{isChecked:f.operation_times!==0,times:f.operation_times!==0?f.operation_times:1},jobEvaluation:{isChecked:f.finish_evaluation==="true"}},reward:{certificate:{isChecked:f.certificate_id!==0&&f.certificate_id!=="0",id:f.certificate_id!==0&&f.certificate_id!=="0"?f.certificate_id:"",name:f.certificate_id!==0&&f.certificate_id!=="0"?f.certificate_name:""},score:{isCheckedReward:!!(f.study_score&&f.study_score.finish_score),reward:f.study_score&&f.study_score.finish_score?f.study_score.finish_score:0,isCheckedDeduction:!!(f.study_score&&f.study_score.unfinish_score),deduction:f.study_score&&f.study_score.unfinish_score?f.study_score.unfinish_score:0}},supervisor:{supervisorUserList:[],qyWeChatVo:"",isChecked:!0,visibleAuthScope:!0,authScopeIsChecked:!1},stagePass:f.stage_pass==="true",payInfo:{isPaid:!1,price:""},open_transfer_student:!1},this.setState({requested:!0}),this.zaraStateDual()})},this.computedCanEditFields=(g,k)=>{var T=new Date().getTime(),D=[],_="";return g>T?(D=["title","dateRange","qrcode","stages","employeeRange","studyLimit","qualifiedStandard","reward","supervisor","stagePass"],_="unstarted"):g<=T&&T<=k?(D=["title","dateRange-end","qrcode","stages","employeeRange","studyLimit","qualifiedStandard","reward","supervisor","stagePass"],_="unfinished"):(D=["title","dateRange-end","qrcode","stages","employeeRange","studyLimit","qualifiedStandard","reward","supervisor","stagePass"],_="finished"),D.push("payInfo"),{canEditFields:D,taskStatus:_}},this.getTaskInfo=()=>{var g=this.state.whiteList,k=g.zaraFlag?fe.ZP.EditStudyTask.getCustomTaskInfo():fe.ZP.EditStudyTask.getTaskInfo(),T=g.zaraFlag?{plan_id:this.state.editTaskId}:{planId:this.state.editTaskId};ke.WY.get({url:k,params:T}).then(D=>{var _=D.data,f=_.supervisorId.split(","),_e=this.props.user.loginMode;if(_e==="WE_COM")f=_.supervisor_list.map(ye=>(0,J.Z)((0,J.Z)({},ye),{},{type:2,show:!0}));else{var me=_.supervisorUserName.split(",");f=f.map((ye,le)=>({type:2,id:ye,name:me[le],show:!0}))}this.initialValues={title:_.bizPlanVo.title,scheduleSetting:_.bizPlanVo.scheduleSetting,dateRange:{startTime:new Date(_.bizPlanVo.beginTime),endTime:new Date(_.bizPlanVo.endTime)},summary:_.bizPlanVo.summary,createUserId:_.createUser,classify:_.classify_id,classifyName:_.classify_name,deptIds:_.dept_ids,trainObject:_.train_object,budget:_.budget,syncProgress:_.syncProgress,qrcode:_.bizPlanVo.dingImgUrl?[{uid:"erer",url:_.bizPlanVo.dingImgUrl,name:"",status:"done"}]:[],stages:(0,Ze.aI)(_.stageList),employeeRange:{rangeType:_.bizPlanVo.isNoticeAll?1:2,rangeList:{dept:_.departmentList||[],post:_.postList||[],group:_.groupList||[],user:_.userList||[],cluster:_.dingGroupList||[]}},lecturer_name:_.tutorName,user_id:_.tutorId,studyLimit:{isChecked:_.studyTimeLimit!==0,limit:_.studyTimeLimit!==0?_.studyTimeLimit:0,faceRecognition:_.bizPlanVo.faceRecognition==="on",videoFaceRecognition:_.bizPlanVo.videoFaceRecognition==="on",jobEvaluationResults:_.bizPlanVo.openEvaluationResult==="true"},qualifiedStandard:{progress:{isChecked:_.progress!==0,progress:_.progress!==0?_.progress:100},exam:{isChecked:_.times!==0,times:_.times!==0?_.times:1},operation:{isChecked:_.operationTimes!==0,times:_.operationTimes!==0?_.operationTimes:1},jobEvaluation:{isChecked:_.finishEvaluation==="true"}},reward:{certificate:{isChecked:_.certificateId!==0&&_.certificateId!=="0",id:_.certificateId!==0&&_.certificateId!=="0"?_.certificateId:"",name:_.certificateId!==0&&_.certificateId!=="0"?_.certificateName:""},score:{isCheckedReward:!!(_.planStudyScore&&_.planStudyScore.finishScore),reward:_.planStudyScore&&_.planStudyScore.finishScore?_.planStudyScore.finishScore:0,isCheckedDeduction:!!(_.planStudyScore&&_.planStudyScore.unFinishScore),deduction:_.planStudyScore&&_.planStudyScore.unFinishScore?_.planStudyScore.unFinishScore:0}},supervisor:{supervisorUserList:f,qyWeChatVo:"",isChecked:_.supervisorPaper,visibleAuthScope:!0,authScopeIsChecked:_.bizPlanVo.authorityRange==="true"},stagePass:_.stagePass,payInfo:{isPaid:!_.bizPlanVo.free||!1,price:_.bizPlanVo.official_price_str==="0.00"?"":_.bizPlanVo.official_price_str},open_transfer_student:_.bizPlanVo.open_transfer_student};var re=this.computedCanEditFields(_.bizPlanVo.beginTime,_.bizPlanVo.endTime),Se=re.canEditFields;this.setState({requested:!0,canEditFields:Se}),this.zaraStateDual()})},this.handleSaveDraft=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,k=F.formRef.state.values,T=F.formRef;return F.formRef.setSubmitting(!0),F.formRef.validateForm().then(D=>{if(Object.keys(D).length===0)return F.handleSubmit(k,T,"draft",g);F.dealNormalError(D),F.formRef.setSubmitting(!1)})},this.dealNormalError=g=>{for(var k in g)g[k]&&this.formRef.setFieldTouched(k,!0)},this.handleSubmit=function(){var g=(0,S.Z)(n().mark(function k(T,D){var _,f,_e,me,re,Se,ye,le,de,j,Ae,Le,Re,Oe,Pe,De,Ue,Te,Ie,w,ce,Ye,$e,Ge,He,Xe,qe,Qe,et,tt,at,We,nt,Ve,it,Be,st,rt,ot,lt,Fe,Ne=arguments;return n().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(_=Ne.length>2&&Ne[2]!==void 0?Ne[2]:"",f=Ne.length>3&&Ne[3]!==void 0?Ne[3]:!0,_e=F.props.t,me=F.state,re=me.editTaskId,Se=me.studyProjectId,ye=me.whiteList,le=re?fe.ZP.EditStudyTask.editTask():fe.ZP.EditStudyTask.addTask(),de=T.title,j=T.dateRange,Ae=T.summary,Le=T.qrcode,Re=T.tagGroup,Oe=T.stages,Pe=T.employeeRange,De=T.user_id,Ue=T.lecturer_name,Te=T.studyLimit,Ie=T.qualifiedStandard,w=T.reward,ce=T.supervisor,Ye=T.stagePass,$e=T.classify,Ge=T.deptIds,He=T.trainObject,Xe=T.budget,qe=T.scheduleSetting,Qe=T.payInfo,et=T.syncProgress,tt=T.open_transfer_student,at=(0,p.Qz)(Oe),We="",nt="",Ve=localStorage.getItem("authorityType"),it=F.props.user.loginMode,it==="WE_COM"&&!ce.qyWeChatVo&&(Ve==="0"?We=JSON.stringify({userList:ce.supervisorUserList.map(V=>(0,J.Z)((0,J.Z)({},V),{},{unionid:V.user_id||V.unionid||V.name,openUserid:V.user_id||V.unionid||V.name})),departmentList:[]}):Ve==="1"&&(We=JSON.stringify({userList:ce.supervisorUserList.map(V=>(0,J.Z)((0,J.Z)({},V),{},{unionid:V.user_id||V.unionid||V.name,openUserid:V.user_id||V.unionid||V.name})),selectedUserCount:1,selectedTicket:"0"}))),Be={title:de,beginTime:(0,ze.jZ)(j.startTime),endTime:(0,ze.jZ)(j.endTime),projectId:Se,summary:Ae,sync_progress:et,classify_id:$e,dept_ids:Ge,train_object:He,budget:Xe,dingImgUrl:Le[0]?Le[0].url:"",departmentIds:Pe.rangeList.dept.map(V=>V.id).join(","),supervisor_department_ids:[],qy_we_chat_vo:Pe.qyWeChatVo||nt,groupIds:Pe.rangeList.group.map(V=>V.id).join(","),isGetScore:!0,isNoticeAll:Pe.rangeType===2?0:1,planCertificateId:w.certificate.isChecked?w.certificate.id:"",postIds:Pe.rangeList.post.map(V=>V.id).join(","),tutor:Ue,tutorId:De,progress:at>0&&Ie.progress.isChecked?Ie.progress.progress:0,studyScore:{finishScore:w.score.isCheckedReward?w.score.reward:0,unFinishScore:w.score.isCheckedDeduction?w.score.deduction:0},scheduleSetting:qe,studyTimeLimit:Te.isChecked?Te.limit:0,faceRecognition:Te.faceRecognition===!0?"on":"off",videoFaceRecognition:Te.videoFaceRecognition===!0?"on":"off",supervisorId:ce.supervisorUserList.map(V=>V.id).join(","),supervisorPaper:ce.isChecked,qy_we_supe_vo:ce.qyWeChatVo||We,authorityRange:ce.authScopeIsChecked,times:Ie.exam.isChecked?Ie.exam.times:"",operationTimes:Ie.operation.isChecked?Ie.operation.times:"",userIds:Pe.rangeList.user.map(V=>V.id).join(","),dingGroupIds:Pe.rangeList.cluster.map(V=>V.id).join(","),stageJson:(0,Ze.TD)(Oe,!!re,"study",qe,!!Se,De),stagePass:Ye,finishEvaluation:(0,p.S1)(Oe)>0?Ie.jobEvaluation.isChecked:!1,openEvaluationResult:(0,p.S1)(Oe)>0?Te.jobEvaluationResults:!1,action:_==="draft"?"unpublished":"published",free:!Qe.isPaid,official_price_str:Qe.isPaid?Qe.price:"",open_transfer_student:tt},!re){xe.next=21;break}return st=j.startTime,rt=j.endTime,xe.next=17,F.computedCanEditFields(new Date(st),new Date(rt));case 17:ot=xe.sent,lt=ot.taskStatus,Be.id=re,Be.planStatus=lt;case 21:return Fe=Re?Re.tagsNameList===null?[]:Re.tagsNameList:[],ye.zaraFlag&&(le=re?fe.ZP.EditStudyTask.editCustomTask():fe.ZP.EditStudyTask.addCustomTask(),Be.planOption=re?"edit":"add"),xe.abrupt("return",ke.WY.post({url:le,data:Be}).then(V=>{if(V.data.code===0){if(Q.default.success(_e(_==="draft"?"common.saveSuccess":"common.releaseSuccess")),re){var Et={tags:Fe,resourceId:re,resourceType:"studyTask"};(0,we.tB)(Et)}else if(Fe&&Fe.length){var yt={tags:Fe,resourceId:V.data.data,resourceType:"studyTask"};(0,we.tB)(yt)}return D.setSubmitting(!1),f&&F.linkToList(),V}if(V.data.code===111){var kt=V.data.data.stageError,dt=kt[0],ut=dt.stageIndex,Ct=dt.resourceIndexs;(0,ct.R)({name:"stages",errMsg:"".concat(F.props.t("formItem.stageTaskPanelTitle")).concat(ut,": ").concat(Oe[ut-1].list[Ct[0]].name," ").concat(F.props.t("common.rsNonExistent")),actions:D})}else if(V.data.code===2){var Tt=V.data.data.courseList,St=Tt.map(Pt=>Pt.summary);Q.default.error("".concat(St.join(",")," ").concat(_e("learning.batchAddErrorTip"))),D.setSubmitting(!1)}else D.setSubmitting(!1)}).catch(()=>{D.setSubmitting(!1)}));case 24:case"end":return xe.stop()}},k)}));return function(k,T){return g.apply(this,arguments)}}(),this.handleCancelEdit=()=>{this.linkToList()},this.linkToList=()=>{var g=O.parse(A.m8.location.search),k=g.from;k==="personal"?(0,gt.E)():k==="detail"?A.m8.goBack(-1):A.m8.push("/training/learning/task/management")},this.getTotalHour=g=>{var k=0,T="--";return g&&g.forEach(D=>{D.list.forEach(_=>{_.duration&&(_.type==="course"||(_.originalType==="mp4"||_.originalType==="mp3")&&_.status===3||_.type==="ex")&&(k+=Number(_.duration))})}),k<60&&k>0?T="".concat(k).concat(this.props.t("pk.sec")):k>60&&(T="".concat(Math.ceil(k/60)).concat(this.props.t("pk.min"))),T},this.tip=()=>r().createElement("div",null,r().createElement("p",null,this.props.t("courseManage.estimatedStandard")),r().createElement("p",null,this.props.t("courseManage.estimatedStandard1")),r().createElement("p",null,this.props.t("courseManage.estimatedStandard2")),r().createElement("p",null,this.props.t("courseManage.estimatedStandard3")),r().createElement("p",null,this.props.t("courseManage.estimatedStandard4"))),this.getVersionStatus=(0,S.Z)(n().mark(function g(){return n().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:(0,ht.UE)().then(D=>{D.data.code===2e5?F.setState({isFree:D.data.data.isFree==="true"},()=>{F.initData()}):F.initData()}).catch(()=>{F.initData()});case 1:case"end":return T.stop()}},g)})),this.initData=()=>{var g=O.parse(A.m8.location.search),k=g.id,T=g.projectId;T?this.setState({studyProjectId:T},this.getStudyProject):k?this.setState({editTaskId:k},this.getTaskInfo):this.setState({requested:!0})},this.state={allowActions:(0,Ke.V9)("classify",JSON.parse(localStorage.getItem("modules"))),editTaskId:"",requested:!1,taskStatusEdit:-1,studyProjectId:"",canEditFields:["title","dateRange","qrcode","stages","employeeRange","studyLimit","qualifiedStandard","reward","supervisor","stagePass","payInfo","open_transfer_student"],appType:localStorage.appType,taskFromBlackList:{taskFormAddAc:(0,s.eY)("TASKFORM_LEARNING_ADD_AC")},whiteList:{qualifiedstandard:(0,s.UI)("TASKFORM_QUALIFIEDSTANDARD"),zaraFlag:(0,s.UI)("ZARA_H5"),showDuringDate:(0,s.UI)("TASKFORM_SHOWDURINGDATE")},isFree:!0}}componentDidMount(){this.getVersionStatus()}render(){var $=this.state,F=$.requested,g=$.editTaskId,k=$.canEditFields,T=$.taskStatusEdit,D=$.appType,_=$.allowActions,f=$.studyProjectId,_e=$.taskFromBlackList,me=$.whiteList,re=$.isFree,Se=$.isTutorShow,ye=this.props,le=ye.prefixCls,de=ye.isPreview,j=ye.t,Ae=ye.isOpen,Le=ye.isOpenTrainingCamp,Re=ye.qyShield,Oe=de?"".concat(j("common.preview")).concat(j("learning.learningAddTitle")):g?"".concat(j("common.edit")).concat(j("learning.learningAddTitle")):"".concat(j("common.add")).concat(j("learning.learningAddTitle"));f&&(Oe=j("assgin.assginSetting"));var Pe=new Set(["imageTextCourse","offline","investigate","practice","jobEvaluation"]),De=Ae?["courseware","course","imageTextCourse","exam","offline","investigate","practice","jobEvaluation","attendance"]:["courseware","course","imageTextCourse","exam","offline","investigate","practice","attendance"];re&&(De=De.filter(w=>!Pe.has(w)));var Ue={resourceType:"studyTask",resourceId:g},Te="";de?Te=j("documentTitle.viewTasks"):g?Te=j("documentTitle.editTasks"):f?Te=j("assgin.assginSetting"):Te=j("documentTitle.addTasks");var Ie=(0,Ke.e)("evaluationTool",this.props.user.modules);return r().createElement("div",{className:le},r().createElement(mt.Z,{title:Te}),r().createElement("div",{className:"".concat(le,"__content")},F?r().createElement(h.J9,{ref:this.initRef,initialValues:this.initialValues,onSubmit:this.handleSubmit,render:w=>r().createElement(h.l0,{className:"cl-form"},r().createElement("h1",{className:"cl-form-htitle"},Oe),r().createElement("div",{className:"cl-form__sectitle"},j("learning.basicInformation")),r().createElement(h.gN,(0,x.Z)({name:"title",label:j("learning.learningAddName"),required:!0,style:{width:"350px"},defaultValue:w.values.title,validate:ce=>G.Z.title(ce),component:P.Z,isPreview:de||k.indexOf("title")===-1,formType:"task",placeholder:j("learning.learningAddItemTitlePlaceholder")},Z.g)),r().createElement(h.gN,(0,x.Z)({component:H.E2,displayType:"Custom",name:"dateRange",label:j("learning.learningAddValidity"),required:!0,style:{width:"350px"},disabled:de||k.indexOf("dateRange")===-1,onlyChangeEndTime:!de&&k.indexOf("dateRange-end")!==-1,defaultFieldList:w.values.dateRange,dateRangeLimit:w.values.dateRangeLimit,validate:ce=>G.Z.dateRange(ce,(0,p.VB)(w.values.stages),w.values.scheduleSetting==="unlock_mode")},Z.g,{showDuringDate:me.showDuringDate})),r().createElement(h.gN,(0,x.Z)({name:"classify",label:j("learning.learningProjectAddCategoryer"),classifyName:w.values.classifyName,displayType:"Custom",defaultValue:w.values.classify,component:H.O,unclassified:!0,style:{width:"350px"},showAdd:(0,Ke.H3)("add",_)},Z.g)),r().createElement(h.gN,(0,x.Z)({name:"deptIds",label:j("lineClass.organizationDepartment"),displayType:"Custom",style:{width:"350px"},defaultValue:w.values.deptIds,component:je.Z},Z.g)),r().createElement(h.gN,(0,x.Z)({name:"trainObject",label:j("lineClass.trainee"),type:"text",style:{width:"450px"},defaultValue:w.values.trainObject,placeholder:j("lineClass.trainObj"),component:ge.Z,className:"offline-input-width",char:!0,LimitLength:64},Z.g)),r().createElement(h.gN,(0,x.Z)({name:"summary",label:j("learning.taskSummaryed"),component:_t.Z,rows:5,LimitLength:1e3,char:!0,type:"text",placeholder:j("learning.validation.contentLimitTip"),style:{width:"596px"}},Z.g)),_e.taskFormAddAc&&D==="e_app"?r().createElement(h.gN,(0,x.Z)({name:"qrcode",label:j("learning.learningAddAC"),component:N.Z},Z.g,{isPreview:de||k.indexOf("qrcode")===-1})):null,r().createElement(h.gN,(0,x.Z)({component:H.QS,displayType:"Custom",name:"tagGroup",label:j("common.detailTag"),defaultFieldList:Ue},Z.g)),r().createElement(h.gN,(0,x.Z)({name:"budget",label:j("lineClass.budgetExpenditure"),component:pt.Z,maxLength:9,style:{width:"100px"},placeholder:j("learning.validation.freeTip"),renderAssist:()=>r().createElement("span",null,j("payment.moneyUnit"))},Z.g)),r().createElement("p",{className:"cl-form__divide padding"}),!me.zaraFlag&&r().createElement("span",null,r().createElement("div",{className:"cl-form__sectitle"},j("assgin.selectMode")),r().createElement(h.gN,(0,x.Z)({},Z.g,{required:!1,name:"scheduleSetting",label:"",component:ue.Z,defaultFieldList:w.values.dateRange}))),r().createElement("div",{className:"cl-form__sectitle"},j("learning.learningAddSecStage")),r().createElement(h.gN,{component:H.Vi,displayType:"Custom",name:"stages",required:!0,customError:!0,useCustomValidate:!0,scheduleSetting:w.values.scheduleSetting,validate:ce=>(0,Me.NW)(ce,w.values,de||k.indexOf("stages")===-1),taskStatusEdit:T,isPreview:de||k.indexOf("stages")===-1,defaultFieldList:w.values.stages,createUserId:w.values.createUserId,resourceType:De,jobEvaluationCount:(0,p.S1)(w.values.stages),showChangeBtn:!0,isHasTutor:!0,deleteModal:!!g,jobEvaluationEdit:!!g,onStageChange:this.handleStageChange,isHasToolEva:Ie,editable:me.zaraFlag&&(g||f)?!1:!de,anonymousMarking:!0,multipleMissedScore:!0,resourceLocked:!0,isResourceLock:!0,isResourceLockNotCheck:!0,taskType:"1"}),w.values.scheduleSetting==="unlock_mode"?null:r().createElement(h.gN,{component:H._e,name:"stagePass",isPreview:de||k.indexOf("stagePass")===-1}),r().createElement(h.gN,{component:H.Pk,name:"syncProgress",isPreview:de}),r().createElement("div",{className:"estimated-hour"},this.props.t("courseManage.estimatedHours"),"\uFF1A",this.getTotalHour(w.values.stages),r().createElement(v.Z,{placement:"top",content:()=>this.tip()},r().createElement(te.Z,{className:"estimated-icon"}))),r().createElement("p",{className:"cl-form__divide padding"}),r().createElement(h.gN,{component:H.ww,displayType:"Custom",name:"employeeRange",mode:["part"],transferVisible:!0,orgProps:{useGroups:Le},qwTicketShow:!0,defaultFieldList:w.values.employeeRange,validate:Me.FI,disabled:de||k.indexOf("employeeRange")===-1}),r().createElement("p",{className:"cl-form__divide padding"}),me.zaraFlag&&Se&&r().createElement("span",null,r().createElement("div",{className:"cl-form__sectitle"},j("learning.learningAddTutorManage")),f?r().createElement(h.gN,{name:"lecturer_name",required:!0,label:j("learning.learningSelectedTutor"),defaultValue:w.values.lecturer_name,lecturerName:w.values.lecturer_name,lectureInfo:{default_avatar:"".concat("https://oss.coolcollege.cn","/1790708689137700864.png"),lectureSyncUserId:"",lectureSourceType:""},validate:Me.t3,component:pe.Z}):r().createElement("div",{style:{lineHeight:"40px"}},r().createElement("span",{className:"select_tutor"},j("learning.learningSelectedTutor")),r().createElement("div",{className:"select_lecturer"},r().createElement("span",{className:"addLecturerName"},w.values.lecturer_name))),r().createElement("p",{className:"cl-form__divide padding"})),r().createElement("div",{className:"cl-form__sectitle"},j("learning.learningAddSecSetting")),r().createElement(h.gN,{component:ee.Z,displayType:"Custom",name:"studyLimit",isPreview:de||k.indexOf("studyLimit")===-1,validate:ce=>G.Z.studyLimit(ce),jobEvaluationCount:(0,p.S1)(w.values.stages),isShowJobInput:Ae&&w.values.scheduleSetting!=="unlock_mode",isEdit:g}),me.qualifiedStandard?r().createElement(h.gN,{component:B.Z,displayType:"Custom",examCount:(0,p.z2)(w.values.stages),courseCount:(0,p.Qz)(w.values.stages),jobEvaluationCount:(0,p.S1)(w.values.stages),completeJobEvaluation:Ae&&w.values.scheduleSetting!=="unlock_mode",name:"qualifiedStandard",isPreview:de||k.indexOf("qualifiedStandard")===-1,validate:ce=>G.Z.qualifiedStandardInOperation(ce,(0,p.z2)(w.values.stages),(0,p.Qz)(w.values.stages),(0,p.S1)(w.values.stages))}):r().createElement(h.gN,{component:B.Z,displayType:"Custom",examCount:(0,p.z2)(w.values.stages),courseCount:(0,p.Qz)(w.values.stages),operationCount:(0,p.GM)(w.values.stages),jobEvaluationCount:(0,p.S1)(w.values.stages),completeJobEvaluation:Ae&&w.values.scheduleSetting!=="unlock_mode",name:"qualifiedStandard",shouldRenderedOperationCount:!0,isPreview:de||k.indexOf("qualifiedStandard")===-1,validate:ce=>G.Z.qualifiedStandardInOperation(ce,(0,p.z2)(w.values.stages),(0,p.Qz)(w.values.stages),(0,p.GM)(w.values.stages),(0,p.S1)(w.values.stages))}),r().createElement(h.gN,{component:b.Z,displayType:"Custom",name:"reward",validate:G.Z.reward,isPreview:de||k.indexOf("reward")===-1,customError:!0}),(0,s.eY)("DINGTALK_ENTERPRISE_LOCK")&&Le&&Re==="false"&&r().createElement(h.gN,{component:L,displayType:"Custom",name:"payInfo",isPreview:de||k.indexOf("payInfo")===-1,validate:G.Z.taskPrice}),r().createElement(h.gN,{component:H.i0,displayType:"Custom",name:"supervisor",qwTicketShow:!0,disabled:de||k.indexOf("supervisor")===-1,defaultFieldList:w.values.supervisor,createUserId:w.values.createUserId}),r().createElement(H.I,null),r().createElement(Ee,(0,x.Z)({},w,{studyProjectFlag:(!!f||!!g)&&Se,isPreview:de,cancelEdit:this.handleCancelEdit,saveDraft:this.handleSaveDraft,t:this.props.t,type:A.m8.location.query.type,plan_id:A.m8.location.query.plan_id,from:A.m8.location.query.from})))}):null))}}Je.defaultProps={prefixCls:"studytask-edit",isPreview:!1};var vt=(0,E.$j)(ft)((0,M.Z)()(Je))},32065:function(ve,X,a){"use strict";a.r(X);var K=a(12924),v=a.n(K),x=a(91768),C=a(4408),Q=a(5677);class S extends v().Component{render(){return v().createElement(v().Fragment,null,v().createElement(C.Z,{title:this.props.t("personal.studyTaskDetail")}),v().createElement(Q.Z,{isPreview:!0}))}}X.default=(0,x.Z)()(S)},17994:function(ve,X,a){"use strict";a.d(X,{R:function(){return v}});var K=a(62615),v=x=>{var C=x.name,Q=x.errMsg,S=x.actions;S.setFieldError(C,Q),S.setSubmitting(!1),K.I.scrollTo(C)}}}]);
