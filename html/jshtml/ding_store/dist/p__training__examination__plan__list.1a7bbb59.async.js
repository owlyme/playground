(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[7424],{26096:function(le,z,e){"use strict";var X=e(30887),O=e(99210),C=e(62029),f=e(22385),w=e(31097),i=e(12924),s=e.n(i),v=e(71967),M=e.n(v),m=e(1164),W=y=>y.type==="more"?y.disabled?s().createElement(O.Z.Item,(0,C.Z)({},y,{key:y.key,disabled:!0}),y.tooltip?s().createElement(w.Z,{title:y.tooltip},s().createElement("p",{className:"cl-dropdown-menuitem"},y.title)):s().createElement("p",{className:"cl-dropdown-menuitem"},y.title)):y.link?s().createElement(O.Z.Item,(0,C.Z)({},y,{key:y.key}),s().createElement(m.Z,{to:y.link},s().createElement("p",{className:"cl-dropdown-menuitem"},y.title))):s().createElement(O.Z.Item,(0,C.Z)({},y,{key:y.key}),s().createElement("p",{className:"cl-dropdown-menuitem",onClick:y.click},y.title)):y.disabled?y.tooltip?s().createElement(s().Fragment,{key:y.key},s().createElement(w.Z,{title:y.tooltip},s().createElement("span",{className:"".concat(M().pointer," ").concat(M().disabled)},y.title))):s().createElement(s().Fragment,{key:y.key},s().createElement("span",{className:"".concat(M().pointer," ").concat(M().disabled)},y.title)):y.link?s().createElement(s().Fragment,{key:y.key},s().createElement(m.Z,{to:y.link},s().createElement("span",{className:"cl-pointer ".concat(M().pointer)},y.title))):s().createElement(s().Fragment,{key:y.key},s().createElement("span",{className:"cl-pointer ".concat(M().pointer),onClick:y.click},y.title));z.Z=W},30311:function(le,z,e){"use strict";var X=e(22385),O=e(31097),C=e(12924),f=e.n(C),w=e(8812),i=e(28216),s=v=>{var M=(0,i.v9)(W=>{var y=W.advancedSetting;return{themeColor:y.themeColor}}),m=M.themeColor;return f().createElement(O.Z,{placement:"top",title:v.name},f().createElement("span",{className:"cl-table__cell-arrow",onClick:v.onClick},f().createElement("span",{style:{color:m}},v.name),f().createElement("span",{className:"cl-table__cell-arrow-icon"},f().createElement(w.Z,null))))};z.Z=s},30389:function(le,z,e){"use strict";e.d(z,{Z:function(){return N}});var X=e(62029),O=e(20228),C=e(11382),f=e(12924),w=e.n(f),i=e(91768),s=e(80991),v={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},M=e(62615),m=e(52670);class W extends w().Component{render(){var c=this.props,o=c.values,p=c.mode,h=c.onlyChooseDept,d=c.reserveUser,D=c.t,E=c.orgProps,P=c.rangeAuth,l=c.projectId,T=c.onCancel,x=c.onlyCreateUser;return w().createElement(s.l0,{className:"cl-form"},w().createElement(s.gN,(0,X.Z)({component:M.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:D("common.visibleRange"),defaultFieldList:o.employeeRange,validate:m.FI,mode:p,rangeAuth:P,onlyChooseDept:h,onlyCreateUser:x,orgProps:E,reserveUser:d,projectId:l,onCancel:T,qwTicketShow:!0},v)))}}var y=(0,i.Z)()(W),j=e(18329),Q=e(34773);class B extends w().Component{constructor(){super(...arguments);this.initRefFormik=c=>{this.refFormik=c},this.handleBeforeCreate=()=>{var c=this.refFormik;c.submitForm(),c.runValidations().then(o=>{if(!Object.keys(o).length){var p=c.state.values.employeeRange,h=(0,Q.b)(p.rangeList),d={qyWeChatVo:p.qyWeChatVo,id:this.props.actionId,isAll:p.rangeType,groupIds:p.rangeType===2?h.groupIds.join(","):"",departmentIds:p.rangeType===2?h.deptIds.join(","):"",userIds:p.rangeType===2?h.userIds.join(","):"",postIds:p.rangeType===2?h.postIds.join(","):"",clusterIds:p.rangeType===2?h.clusterIds.join(","):"",qy_we_chat_vo:p.qyWeChatVo};this.props.onCreate(d)}})},this.handleBeforeCancel=()=>{var c=this.props.onCancel;c()}}render(){var c=this.props,o=c.visible,p=c.initialParams,h=c.isLoading,d=c.tipInfo,D=c.mode,E=c.onlyChooseDept,P=c.reserveUser,l=P===void 0?[]:P,T=c.t,x=c.title,g=c.orgProps,S=c.rangeAuth,_=c.projectId,I=c.onCancel,b=c.onlyCreateUser,k=c.size;return h?w().createElement(C.Z,{size:"large"}):w().createElement(j.ZP,{wrapClassName:"cl-employee-selector-modal",visible:o,title:x||T("component.changeUser"),okText:T("common.ok"),cancelText:T("common.cancel"),size:k,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},h?w().createElement(C.Z,{size:"large"}):w().createElement(s.J9,{ref:this.initRefFormik,initialValues:p,render:V=>w().createElement(y,(0,X.Z)({},V,{mode:D,rangeAuth:S,orgProps:g,onlyChooseDept:E,onlyCreateUser:b,reserveUser:l,projectId:_,onCancel:I}))}),d&&w().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},d))}}B.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var N=(0,i.Z)()(B)},64549:function(le,z,e){"use strict";var X=e(12924),O=e.n(X),C=e(28216),f=e(84874),w=s=>({guideStatus:s.advancedSetting.guideStatus,isNewUser:s.advancedSetting.isNewUser});class i extends O().Component{constructor(){super(...arguments);this.state={guideIndex:0,showGuide:this.props.renderGuide},this.onNextStep=()=>{var v=this.state.guideIndex,M=this.props.guidePageProps;if(v>=M.length-1){this.onCloseGuide();return}this.setState({guideIndex:v+1})},this.onCloseGuide=()=>{this.setState({showGuide:!1},()=>{this.props.closeGuide&&this.props.closeGuide()}),this.props.isNewUser==="true"&&this.props.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),this.updateAllStatus()},this.updateAllStatus=()=>{localStorage.setItem("guideStatus","false"),this.props.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})},this.renderRightItem=v=>O().createElement(O().Fragment,null,O().createElement("div",{className:"clguide-popover__content"},O().createElement("span",{onClick:this.onCloseGuide},O().createElement(f.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})),O().createElement("div",{className:"clguide-popover__content__text"},v.contentText),O().createElement("div",{className:"clguide-popover__content__button",onClick:this.onNextStep},v.buttonText)),O().createElement("div",{className:"clguide-popover__righttriangle"}),v.typeText&&O().createElement("div",{className:" clguide-popover__circle"},v.typeText)),this.renderLeftItem=v=>O().createElement(O().Fragment,null,O().createElement("div",{className:" clguide-popover__circle"},v.typeText),O().createElement("div",{className:"clguide-popover__lefttriangle"}),O().createElement("div",{className:"clguide-popover__content"},O().createElement("span",{onClick:this.onCloseGuide},O().createElement(f.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})),O().createElement("div",{className:"clguide-popover__content__text"},v.contentText),O().createElement("div",{className:"clguide-popover__content__button",onClick:this.onNextStep},v.buttonText)))}render(){var v=this.state,M=v.guideIndex,m=v.showGuide,W=this.props,y=W.className,j=W.guideStatus,Q=W.guidePageProps,B=Q===void 0?[]:Q,N=W.direction,A=N===void 0?"right":N,c=W.showDownloadBtn;return!m&&!j?null:O().createElement("div",{className:"clguide-popover-container"},m&&j==="true"&&O().createElement("div",{className:"clguide-popover-mask"}),m&&j==="true"&&M===0&&B.length?O().createElement("div",{className:"".concat(y,"_next clguide-popover ").concat(c?"":"right")},A==="left"?this.renderLeftItem(B[0]):this.renderRightItem(B[0])):null,m&&j==="true"&&M===1&&B.length?O().createElement("div",{className:"".concat(y,"_know clguide-popover")},A==="left"?this.renderLeftItem(B[1]):this.renderRightItem(B[1])):null)}}z.Z=(0,C.$j)(w)(i)},74525:function(le,z,e){"use strict";var X=e(57361),O=e(34792),C=e(48086),f=e(9754),w=e.n(f),i=e(12924),s=e.n(i),v=e(91768),M=e(28216),m=e(92592),W=e(5430),y=e(10237),j=e(84874),Q=e(16239),B=e(38642),N=e(28963);class A extends s().Component{constructor(o){var p;super(o);p=this,this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.initCode=()=>{var h=this.props,d=h.type,D=h.isProjectShare,E=h.isCommodityExchange,P=h.userInfo;["wx","weixin"].includes(d)?d==="weixin"&&P.appId==="9005"?this.initOtherCode():this.initWXCode():D&&d==="ding"?this.getProjectShareUrl():E&&d==="ding"?this.getCommodityExchangeUrl():d==="fullWebLink"?this.initOtherCode(this.props.option.scene):this.initOtherCode()},this.getCommodityExchangeUrl=()=>{var h=this.props,d=h.t,D=h.appType,E=h.orderId,P=this.props.option.scene,l=localStorage.getItem("uid");if(!Q.Z[(0,Q.c)()].showCl||D!=="e_app"){var T={deliverUserId:l,orderId:E,flag:"exchange"};m.toDataURL(JSON.stringify(T),{width:500}).then(_=>{this.setState({img:_})}).catch(()=>{C.default.error(d("integralMall.qrCodeFailed"))})}else{var x="/pages/messageRedirect/messageRedirect?".concat(P),g=encodeURIComponent(x),S="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/appId=".concat(this.appId,"&pVersion=1&miniAppId=").concat(this.miniAppId,"&packageType=1&page=").concat(g,"&corpId=").concat(this.props.userInfo.corpId);this.getShortLink(S).then(_=>{m.toDataURL(_.data.short_link,{width:500}).then(I=>{this.setState({img:I})}).catch(()=>{C.default.error(d("integralMall.qrCodeFailed"))})})}},this.getProjectShareUrl=()=>{var h=this.props.option.scene,d=encodeURIComponent("/pages/messageRedirect/messageRedirect?".concat(h)),D="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(d);this.getShortLink(D).then(E=>{this.initOtherCode(E.data.short_link)})},this.getShortLink=h=>y.WY.post({url:W.ZP.Common.getQrUrl(),data:{link:h}}),this.initWXCode=(0,X.Z)(w().mark(function h(){var d,D,E,P;return w().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return d=p.props.option,D=d.scene,E=d.flag,T.next=3,y.WY.post({url:W.ZP.createWxCode(),data:{flag:E,scene:"".concat(D,"&enterpriseId=").concat(W.ZP.enterpriseId),enterprise_id:W.ZP.enterpriseId}});case 3:P=T.sent,p.setState({img:P.data.wx_code,linkUrl:"data:image/png;base64,".concat(P.data.wx_code)});case 5:case"end":return T.stop()}},h)})),this.initOtherCode=function(){var h=(0,X.Z)(w().mark(function d(D){var E,P,l,T;return w().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(E=p.props,P=E.type,l=E.fsUrl,g.t0=D,g.t0){g.next=6;break}return g.next=5,p.handleScanCode();case 5:g.t0=g.sent;case 6:T=g.t0,P==="fs"&&l&&(T=l),p.setState({linkUrl:T}),m.toDataURL(T,{width:500}).then(S=>{p.setState({img:S})}).catch(()=>{C.default.error(p.props.t("personal.failedGenerateCode"))});case 10:case"end":return g.stop()}},d)}));return function(d){return h.apply(this,arguments)}}(),this.handleScanCode=(0,X.Z)(w().mark(function h(){var d,D,E,P,l,T,x,g,S,_,I,b,k,V,H,ae,J,oe;return w().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(d=p.props,D=d.type,E=d.userInfo,P=d.universalFn,l=p.state.wxH5Url,T=p.props.option,x=T.scene,g=T.pc_url,S=g===void 0?"":g,_=T.mobile_url,I=_===void 0?"":_,b=T.pc_type,k=b===void 0?"":b,V=T.mobile_type,H=V===void 0?"":V,ae=encodeURIComponent("/pages/messageRedirect/messageRedirect?"),J=encodeURIComponent(x),!P){te.next=12;break}return te.next=8,p.getShortLink((0,B.jr)({pc_url:S,mobile_url:I,pc_type:k,mobile_type:H}));case 8:return oe=te.sent,te.abrupt("return",(0,N.fZ)(oe.data.short_link));case 12:te.t0=D,te.next=te.t0==="app"?15:te.t0==="ding"?16:te.t0==="fs"?17:te.t0==="weixin"?18:19;break;case 15:return te.abrupt("return","".concat(x,"&fromApp=true"));case 16:return te.abrupt("return","dingtalk://dingtalkclient/action/open_micro_app?corpId=".concat(E.corpId,"&appId=").concat(p.appId,"&miniAppId=").concat(p.miniAppId,"&packageType=1&pVersion=1&page=").concat(ae+J));case 17:return te.abrupt("return","https://applink.feishu.cn/client/web_app/open?appId=".concat("cli_a0aa5e0fe5f8500d","&path=").concat(encodeURIComponent("/index.html"),"&").concat(x,"&appType=lark"));case 18:return te.abrupt("return","".concat(l,"/#/pages/login/login-we-com/index?appType=weCom&corp=").concat(E.corpId,"&").concat(x));case 19:return te.abrupt("return","");case 20:case"end":return te.stop()}},h)})),this.saveQrcode=()=>{var h=this.state.img,d=this.props,D=d.type,E=d.t,P=d.userInfo,l=document.createElement("a");l.download=E("setting.Qrcode")+new Date().getTime(),l.href=D==="wx"||D==="weixin"&&P.appId!=="9005"?"data:image/png;base64,".concat(h):h,document.body.appendChild(l),l.click(),document.body.removeChild(l)},this.generatePoster=h=>{var d=h.linkUrl,D=h.type,E=h.activeKey,P=h.option,l=this.props.universalFn;typeof l=="function"&&l({linkUrl:d,type:D,activeKey:E,option:P})},this.state={img:"",linkUrl:"",wxH5Url:"https://mobile.coolcollege.cn"}}componentDidMount(){this.initCode()}componentDidUpdate(o){o.option.scene!==this.props.option.scene&&this.initCode()}render(){var o=this.props,p=o.type,h=o.tip,d=o.extraTip,D=o.t,E=o.canSave,P=o.refreshQrCode,l=o.label,T=o.saveText,x=T===void 0?"":T,g=o.downloadAsBtn,S=o.userInfo,_=o.universalFn,I=o.activeKey,b=o.option,k=this.state,V=k.img,H=k.linkUrl,ae=localStorage.getItem("themeColor")||"#465dcd";return V?s().createElement("div",{className:"qr-code-content"},l?s().createElement("div",{className:"label-text"},l,":"):null,s().createElement("div",{className:"qr-code-div ".concat(l?"left":"")},p==="wx"||p==="weixin"&&S.appId!=="9005"?s().createElement("img",{src:"data:image/png;base64,".concat(V),alt:""}):s().createElement("img",{src:V,alt:""}),h?s().createElement("div",{className:"tip-text"},h):null,d?s().createElement("div",{className:"tip-text"},d):null,E?s().createElement("div",{className:"save_qrcode ".concat(g?"save-btn":""),style:{color:ae},onClick:()=>this.saveQrcode()},g?null:s().createElement(j.Z,{iconClass:"icon-f-download",size:"14px"}),x||D("personal.saveCode")):null,_&&!P?s().createElement("div",{className:"save_qrcode",style:{color:ae},onClick:()=>this.generatePoster({linkUrl:H,type:p,activeKey:I,option:b})},D("personal.saveCodePoster")):null,P?s().createElement("div",{className:"save_qrcode",style:{color:ae},onClick:()=>P()},s().createElement(j.Z,{iconClass:"iconf-switch",size:"14px"}),D("personal.refreshCodeTip")):null)):s().createElement("div",{className:"qr-code-placeholder"})}}z.Z=(0,M.$j)(c=>{var o=c.user;return{userInfo:o,appType:o.appType,corpId:o.corpId}})((0,v.Z)()(A))},66708:function(le,z,e){"use strict";var X=e(93485),O=e(33565),C=e(57361),f=e(18106),w=e(88108),i=e(9754),s=e.n(i),v=e(12924),M=e.n(v),m=e(91768),W=e(28216),y=e(89366),j=e(48194),Q=e(74525),B=e(77779),N=e.n(B),A=e(6793),c=w.Z.TabPane;class o extends M().Component{constructor(d){var D;super(d);D=this,this.initAppTypeScan=(0,C.Z)(s().mark(function P(){var l,T,x,g,S,_,I,b,k,V,H;return s().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,Promise.all([(0,j.q)(),(0,j.$)()]);case 2:l=J.sent,T=(0,O.Z)(l,2),x=T[0],g=T[1],S=x.data.sync_organizes,_=g.data.list,I=!1,b=(0,X.Z)(_),J.prev=10,b.s();case 12:if((k=b.n()).done){J.next=19;break}if(V=k.value,V.type!=="wechat_applet_setting"){J.next=17;break}return I=V.switch_status==="OPEN",J.abrupt("break",19);case 17:J.next=12;break;case 19:J.next=24;break;case 21:J.prev=21,J.t0=J.catch(10),b.e(J.t0);case 24:return J.prev=24,b.f(),J.finish(24);case 27:H=D.props.universalFn?D.filterOrganizes(S):D.filterCode(S),I&&H.push("wx"),D.setState({scanTypes:H});case 30:case"end":return J.stop()}},P,null,[[10,21,24,27]])})),this.filterCode=P=>{var l=[...P],T=this.props.option;return l=l.map(x=>["third_oa_app","seeyon_app"].includes(x)?"ding":x),T&&T.flag==="exam_task"?[...new Set([...l])].filter(x=>x==="fs"):[...new Set([...l,"app"])]},this.filterOrganizes=P=>{var l=[...P],T=this.props.option;l=l.map(g=>["third_oa_app","seeyon_app"].includes(g)?"ding":g);var x=new Set([...l]);return x.size===1&&x.has("app")?T&&T.flag==="exam_task"?[...x].filter(g=>g==="fs"):[...x]:(x.delete("app"),T&&T.flag==="exam_task"?[...x].filter(g=>g==="fs"):[...x])};var E=d.t;this.state={scanTypes:[],commonTitle:{ding:E("common.sanCodeCommon"),fs:E("common.sanCodeCommon"),weixin:E("common.sanCodeCommon"),app:E("common.sanCodeCommon"),wx:E("common.weChatApplets")},tabTitle:{ding:E("common.dingDingSanCode"),fs:E("common.fsScanCode"),weixin:E("common.WeComSanCode"),app:E("common.appScanCode"),wx:E("common.wxScanCode")}}}componentDidMount(){this.initAppTypeScan()}UNSAFE_componentWillReceiveProps(){this.initAppTypeScan()}render(){var d=this.state,D=d.tabTitle,E=d.commonTitle,P=d.scanTypes,l=this.props,T=l.option,x=l.tip,g=l.t,S=l.extraTip,_=l.canSave,I=l.refreshQrCode,b=l.isCommodityExchange,k=l.type,V=l.center,H=V===void 0?!0:V,ae=l.label,J=ae===void 0?"":ae,oe=l.saveText,re=l.downloadAsBtn,te=re===void 0?!1:re,R=l.transfer,F=R===void 0?!1:R,U=l.source_type,q=l.universalFn,ee=l.activeKey;return M().createElement("div",{className:"".concat(N()["scan-code-box"]," ").concat(k==="card"?N()["card-tabs"]:"")},P.length===1?M().createElement(Q.Z,{universalFn:q,activeKey:ee,type:P[0],option:T,tip:(0,A.ZT)(g(x),q?E[P[0]]:D[P[0]]),extraTip:S,canSave:_,fsUrl:T.fsUrl,refreshQrCode:I,isCommodityExchange:b,label:J,saveText:oe,downloadAsBtn:te}):M().createElement(w.Z,{defaultActiveKey:"1",centered:H,type:k},P.map((Y,se)=>{var ne=se+1;return M().createElement(c,{tab:q?E[Y]:D[Y],key:ne},F&&M().createElement("div",{className:N()["scan-code-transfer"]},M().createElement(y.Z,null),M().createElement("span",null,g("course.onlyScope",{source_type:g(U==="study_project"?"lineClass.project":"lineClass.task")}))),M().createElement(Q.Z,{universalFn:q,activeKey:ee,type:Y,option:T,tip:(0,A.ZT)(g(x),q?E[Y]:D[Y]),extraTip:S,canSave:_,fsUrl:T.fsUrl,refreshQrCode:I,isCommodityExchange:b,label:J,saveText:oe,downloadAsBtn:te}))})))}}o.defaultProps={option:{flag:"",scene:""},tip:"",extraTip:"",canSave:!0,refreshQrCode:null};var p=h=>({appType:h.user.appType});z.Z=(0,W.$j)(p)((0,m.Z)()(o))},63848:function(le,z,e){"use strict";var X=e(36877),O=e(32969),C=e(12924),f=e.n(C),w=e(91768),i=e(56130);class s extends f().PureComponent{constructor(){super(...arguments);this.onChange=(M,m)=>{this.props.onChange(M,m)}}render(){var M=this.props,m=M.value,W=M.classify,y=M.showLabel,j=M.className,Q=M.t,B=M.style;return f().createElement("div",{className:"classify-cascader ".concat(j)},y?f().createElement("span",{className:"classify-cascader-label"},Q("component.selectClassifyLabel")):null,f().createElement(O.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(j),options:W,onChange:this.onChange,placeholder:Q("component.selectClassifyLabel"),value:m,style:B,loadData:this.props.loadData}))}}s.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},z.Z=(0,i.Z)((0,w.Z)()(s))},51697:function(le,z,e){"use strict";var X=e(22385),O=e(31097),C=e(33565),f=e(12924),w=e.n(f),i=e(28216),s=e(84874),v=m=>{var W=m.title,y=m.visible,j=m.placement,Q=j===void 0?"top":j,B=m.children,N=B===void 0?null:B,A=m.isNewUser,c=A===void 0?"":A,o=m.closeGuide,p=m.guideStatus,h=(0,f.useState)(!1),d=(0,C.Z)(h,2),D=d[0],E=d[1],P=x=>w().createElement("div",{className:"guide-tooltip-title"},x,w().createElement("span",{onClick:l},w().createElement(s.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,f.useEffect)(()=>{E(y)},[y]);var l=x=>{if(x.stopPropagation(),x.preventDefault(),E(!1),o){o();return}c==="true"&&m.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),T()},T=()=>{localStorage.setItem("guideStatus","false"),m.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return w().createElement(O.Z,{title:P(W),placement:Q,visible:D&&p==="true"&&W},N)},M=m=>({guideStatus:m.advancedSetting.guideStatus,isNewUser:m.advancedSetting.isNewUser});z.Z=(0,i.$j)(M)(v)},59857:function(le,z,e){"use strict";var X=e(22385),O=e(31097),C=e(12924),f=e.n(C);class w extends f().Component{render(){var s=this.props,v=s.name,M=s.full_name,m=s.maxWidth;return f().createElement(O.Z,{title:M},f().createElement("span",{className:"component-resource-category",style:{maxWidth:m||"160px"}},v))}}z.Z=w},54792:function(le,z,e){"use strict";var X=e(62029),O=e(63185),C=e(9676),f=e(47673),w=e(4107),i=e(88986),s=e(12924),v=e.n(s),M=e(91768),m=e(59239),W=e(55446),y=e.n(W),j=e(18329),Q=e(2396);class B extends v().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var c=this.props,o=c.form,p=c.id,h=c.onCreate,d=this.state.isChecked;o.validateFields((D,E)=>{if(!D){var P=(0,i.Z)({},E);d||(P.value=0);var l=(0,i.Z)((0,i.Z)({},P),{},{id:p});h(l),setTimeout(()=>{o.resetFields()},100)}})},this.handleBeforeCancel=()=>{var c=this.props,o=c.form,p=c.onCancel;p(),setTimeout(()=>{o.resetFields()},100)},this.checkScore=(c,o,p)=>{var h=this.props.t,d=this.state.isChecked;if(d&&(0,Q.kh)(o)){p(h("component.setScoreRuleTip"));return}p()},this.handleCheckChange=c=>{this.setState({isChecked:c.target.checked})},this.renderItem=()=>{var c=this.props,o=c.form,p=c.initialValue,h=c.labelTxt,d=this.state.isChecked,D=o.getFieldDecorator,E={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},P=d?D("value",{initialValue:p,rules:[{validator:this.checkScore}]})(v().createElement(w.Z,{maxLength:30,placeholder:""})):null,l=v().createElement(v().Fragment,null,v().createElement(C.Z,{checked:d,onChange:this.handleCheckChange},h));return v().createElement(m.Z.Item,(0,X.Z)({label:l},E),P)}}componentDidUpdate(c){this.props.visible&&this.props.visible!==c.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var c=this.props,o=c.visible,p=c.title,h=c.prefixCls;return v().createElement(j.ZP,{size:"small",visible:o,title:p,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},v().createElement(m.Z,{className:"".concat(h),layout:"horizontal",colon:!1},this.renderItem(),v().createElement("div",{className:"".concat(h,"__children")},this.props.children)))}}B.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var N=m.Z.create({name:"ClSetupBoxInModal"})(B);z.Z=(0,M.Z)()(N)},18884:function(le,z,e){"use strict";var X=e(57338),O=e(83107),C=e(57663),f=e(71577),w=e(47673),i=e(4107),s=e(62029),v=e(81211),M=e(34792),m=e(48086),W=e(57361),y=e(18106),j=e(88108),Q=e(9754),B=e.n(Q),N=e(12924),A=e.n(N),c=e(91768),o=e(40847),p=e(99946),h=e(70548),d=e.n(h),D=e(79),E=e(66708),P=e(38642),l=j.Z.TabPane;class T extends A().Component{constructor(g){var S;super(g);S=this,this.onFormMounted=_=>{this.AddFormInstance=_},this.handleCancelShare=()=>{var _=this.props.onCancel;_&&_()},this.getVisitorConfig=(0,W.Z)(B().mark(function _(){var I,b,k;return B().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,(0,D.L)(localStorage.getItem("enterpriseId"));case 2:I=H.sent,b=I.data,k=I.status,k===200&&(b.open_visitor_page==="true"?S.setState({visitorIsOpen:!0,pcDomain:b.pc_domain||""}):S.setState({visitorIsOpen:!1}));case 6:case"end":return H.stop()}},_)})),this.handleCopy=()=>{var _=document.getElementById("share-link");_.select(),document.execCommand("Copy"),m.default.success(this.props.t("live.copySuccess"))},this.renderContent=()=>{var _=this.props,I=_.t,b=_.tabsTitle,k=_.isProjectShare,V=(0,v.Z)(_,["t","tabsTitle","isProjectShare"]),H=this.state,ae=H.active,J=H.visitorIsOpen,oe=H.pcDomain,re=H.shareUrl;return J?A().createElement(j.Z,{defaultActiveKey:ae,onChange:this.handleTabs},A().createElement(l,{tab:b[0]||I("tutorial.student"),key:"0"},A().createElement("p",{className:d()["share-tip"]},A().createElement(o.Z,{className:d()["info-icon"]}),I("common.traineeShareTip")),A().createElement(E.Z,(0,s.Z)({type:"card",center:!1,label:I("setting.Qrcode"),saveText:I("shareInfo.downloadCode"),downloadAsBtn:!0},V)),re&&!k&&A().createElement("div",{className:d()["url-share"]},A().createElement("label",null,I("common.urlAddress"),":"),A().createElement("div",{className:d()["right-content"]},A().createElement(i.Z,{className:d()["share-url-input"],readOnly:!0,value:re,id:"share-link"}),A().createElement(f.Z,{type:"primary",className:d()["copy-btn"],onClick:this.handleCopy},I("registerLogin.copyLink")),A().createElement("span",{className:d()["share-tip"]},I("common.shareTip"))))),V.option&&V.option.flag==="exam_task"?null:A().createElement(l,{tab:b[1]||I("common.tourist"),key:"1"},A().createElement(p.Z,(0,s.Z)({onFormMounted:this.onFormMounted,handleVisitorTabs:this.visitorTabs,pcDomain:oe},V)))):A().createElement(N.Fragment,null,A().createElement("p",{className:d()["share-tip"]},A().createElement(o.Z,{className:d()["info-icon"]}),I("common.traineeShareTip")),A().createElement(E.Z,(0,s.Z)({type:"card",center:!1,label:I("setting.Qrcode"),saveText:I("shareInfo.downloadCode"),downloadAsBtn:!0},V)),re&&!k&&A().createElement("div",{className:d()["url-share"]},A().createElement("label",null,I("common.urlAddress"),":"),A().createElement("div",{className:d()["right-content"]},A().createElement(i.Z,{className:d()["share-url-input"],readOnly:!0,value:re,id:"share-link"}),A().createElement(f.Z,{type:"primary",className:d()["copy-btn"],onClick:this.handleCopy},I("registerLogin.copyLink")),A().createElement("span",{className:d()["share-tip"]},I("common.shareTip")))))},this.state={active:0,visitorIsOpen:!1,pcDomain:"",shareUrl:""}}componentDidMount(){this.getVisitorConfig()}componentDidUpdate(g){var S=this.props.option;if(g.option.flag!==S.flag&&S.flag==="share_course_enterprise"){var _=(0,P.dU)(),I=localStorage.getItem("enterpriseId");this.setState({shareUrl:"".concat("https://mobile.coolcollege.cn","/assets-share-link.html?env=").concat(_,"&eid=").concat(I,"&").concat(S.scene,"&msgSource=shareLink")})}}render(){var g=this.props,S=g.title,_=g.visible;return A().createElement(O.Z,{title:S,className:d()["share-modal"],width:560,onClose:this.handleCancelShare,visible:_,destroyOnClose:!0,footerStyle:{textAlign:"right"},bodyStyle:{paddingTop:10,paddingLeft:30,paddingRight:30}},this.renderContent())}}T.defaultProps={visible:!0,title:"",onCancel:()=>{},tip:"",record:{},option:{flag:"",scene:""},tabsTitle:["",""]},z.Z=(0,c.Z)()(T)},41194:function(le,z,e){"use strict";var X=e(47673),O=e(4107),C=e(57663),f=e(71577),w=e(34792),i=e(48086),s=e(12924),v=e.n(s),M=e(91768),m=e(92592),W=e(87797),y=e.n(W);class j extends v().Component{constructor(B){super(B);this.handleDownload=()=>{var N=document.getElementById("code_canvas"),A=this.state.codeUrl,c=new Image;c.crossOrigin="anonymous",c.src=A,c.onload=()=>{var o=N.getContext("2d");o.textAlign="center",o.fillStyle="#fff",o.fillRect(0,0,750,886),o.drawImage(c,185,217,381,381),o.font="42px bold serif",o.fillStyle="#4F4F4F";var p=N.toDataURL("image/jpeg"),h=document.createElement("a");h.setAttribute("href",p),h.setAttribute("download","".concat(this.props.t("setting.Qrcode"),".jpg")),document.body.insertAdjacentElement("beforeend",h),h.click(),h.remove()}},this.handleCopy=()=>{var N=this.props.id,A=document.getElementById(N||"visitor-link");A.select(),document.execCommand("Copy"),i.default.success(this.props.t("live.copySuccess"))},this.state={codeUrl:""}}componentDidMount(){this.props.shareUrl&&m.toDataURL(this.props.shareUrl,{width:500}).then(B=>{this.setState({codeUrl:B})}).catch(()=>{i.default.error(this.props.t("integralMall.qrCodeFailed"))})}componentDidUpdate(B){B.shareUrl!==this.props.shareUrl&&this.props.shareUrl&&m.toDataURL(this.props.shareUrl,{width:500}).then(N=>{this.setState({codeUrl:N})}).catch(()=>{i.default.error(this.props.t("integralMall.qrCodeFailed"))})}render(){var B=this.props,N=B.shareUrl,A=B.t,c=B.notShowQrCode,o=B.urlLabel,p=B.id,h=this.state.codeUrl;return v().createElement(s.Fragment,null,c?null:v().createElement("div",{className:y()["visitor-qrCode-share"]},v().createElement("label",null,A("setting.Qrcode"),":"),v().createElement("div",{className:y()["qrCode-section"]},v().createElement("img",{className:y()["qrCode-img"],src:h,alt:""}),v().createElement("canvas",{className:y()["code-canvas"],id:"code_canvas",width:750,height:886}),v().createElement(f.Z,{type:"primary",className:y()["download-btn"],onClick:this.handleDownload},A("shareInfo.downloadCode")))),v().createElement("div",{className:y()["visitor-url-share"]},v().createElement("label",null,o||A("common.urlAddress"),":"),v().createElement("div",{className:y()["right-content"]},v().createElement(O.Z,{className:y()["share-url-input"],readOnly:!0,value:N,id:p||"visitor-link"}),v().createElement(f.Z,{type:"primary",className:y()["copy-btn"],onClick:this.handleCopy},A("registerLogin.copyLink")),v().createElement("span",{className:y()["share-tip"]},A("common.shareTip")))))}}j.defaultProps={shareUrl:"",notShowQrCode:!1,urlLabel:"",id:"visitor-link"},z.Z=(0,M.Z)()(j)},79:function(le,z,e){"use strict";e.d(z,{L:function(){return C}});var X=e(5430),O=e(10237);function C(f){var w=X.ZP.visitors.getVisitorSetting(f);return O.WY.get({url:w})}},99946:function(le,z,e){"use strict";var X=e(12924),O=e.n(X),C=e(91768),f=e(40847),w=e(41194),i=e(51431),s=e.n(i);class v extends O().Component{constructor(m){super(m);this.handleVisitorTabs=W=>{var y=this.props.handleVisitorTabs;y&&y(W)},this.state={shareUrl:"",excludeDomains:["localhost","127.0.0.1"]}}componentDidMount(){var m=this.state.excludeDomains,W=this.props,y=W.option,j=W.pcDomain,Q=j||window.location.hostname||document.domain||"",B=window.location.port,N=localStorage.getItem("enterpriseId");Q&&m.indexOf(Q)<0?this.setState({shareUrl:"https://".concat(Q,"/#/visitor?").concat(y.scene,"&enterpriseId=").concat(N)}):this.setState({shareUrl:"http://".concat(Q,":").concat(B,"/#/visitor?").concat(y.scene,"&enterpriseId=").concat(N)})}render(){var m=this.props,W=m.t,y=m.tip,j=m.onlyUrl,Q=m.urlLabel,B=m.id,N=this.state.shareUrl;return O().createElement("div",{className:s()["visitor-share-content"]},O().createElement("p",{className:s()["share-tip"]},O().createElement(f.Z,{className:s()["info-icon"]}),y||W("common.visitorShareTip")),O().createElement(w.Z,{id:B,shareUrl:j||N,urlLabel:Q}))}}v.defaultProps={record:{},shareUrl:"",tip:"",urlLabel:"",id:""},z.Z=(0,C.Z)()(v)},11449:function(le,z,e){"use strict";e.d(z,{Z:function(){return x}});var X=e(88986),O=e(33565),C=e(12924),f=e.n(C),w=e(3115),i=e(49111),s=e(19650),v=e(62029),M=e(57663),m=e(71577),W=e(91768),y=e(28216),j=e(37055),Q=e(10237);function B(g){var S=j.ZP.getHelpContentByMenuKey(),_={key:g};return Q.WY.get({url:S,params:_})}var N=e(74228),A=e.n(N),c=e(1164),o=e(76466),p=e(38642);class h extends f().Component{constructor(S){var _;super(S);_=this,this.getHelpContentByMenuKey=()=>{var I=this.props.defaultMenuKey;B(I).then(b=>{var k=b.data,V=k.help_url,H=k.video_url;this.setState({videoUrl:H,helpUrl:V})})},this.handleOpenHelpUrl=I=>{if((0,p.ve)()){window.open(I,"_blank");return}c.Z.targetTo({path:I,isExternalLink:!0})},this.handleOpenVideo=function(I){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_.props.t("helpCenter.video");_.setState(k=>({resourcePlayInfo:(0,X.Z)((0,X.Z)({},k.resourcePlayInfo),{},{resourceInfo:{originUrl:I,source:{FD:I,OD:I},contentType:"mp4"}}),previewInfo:(0,X.Z)((0,X.Z)({},k.previewInfo),{},{title:b,visible:!0,onCancel:_.handleCancelPreview})}))},this.handleCancelPreview=()=>{var I=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,X.Z)((0,X.Z)({},I),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:S.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var S=this.state,_=S.helpUrl,I=S.resourcePlayInfo,b=S.previewInfo,k=S.videoUrl,V=this.props.t;return f().createElement("div",{className:A().helpCenter},k&&f().createElement(m.Z,{type:"link",className:A()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(k)},V("helpCenter.video")),_&&f().createElement(m.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(_)},V("helpCenter.tutorial")),f().createElement(o.Z,(0,v.Z)({},I,{previewInfo:b})))}}var d=g=>({defaultMenuKey:g.currentRoute.menuKey});h.defaultProps={defaultMenuKey:""};var D=(0,y.$j)(d)((0,W.Z)()(h));function E(g){var S=g.extra,_=localStorage.getItem("dingPersonnel"),I=sessionStorage.getItem("dingPersonnel");return f().createElement(s.Z,null,S,_!=="dingPersonnel"&&I!=="dingPersonnel"&&(0,p.eY)("COMMONEXTRA_HELP_CENTER")&&f().createElement(D,null))}var P=E,l=e(4408);function T(g){var S=(0,C.useState)({helpCenter:(0,p.eY)("HEAD_HELP_CENTER_BUT")}),_=(0,O.Z)(S,1),I=_[0],b=g.pageContainerParams,k=b===void 0?{}:b,V=g.noPadding,H=V===void 0?!1:V,ae=g.isPersonal,J=ae===void 0?!1:ae,oe=g.pageTitle,re=g.className,te=re===void 0?"":re,R={extra:I.helpCenter?f().createElement(P,{extra:k.extra}):k.extra},F=(0,X.Z)((0,X.Z)({},k),R);return f().createElement("div",{className:"page-container-content ".concat(H?"page-container-noPadding":""," ").concat(J?"page-container-content_personal_background":""," ").concat(te)},oe&&f().createElement(l.Z,{title:oe}),J?f().createElement(w.Z,null,g.children):f().createElement(w.Z,F,g.children))}var x=T},72456:function(le,z,e){"use strict";var X=e(49111),O=e(19650),C=e(57663),f=e(71577),w=e(12924),i=e.n(w),s=e(28216),v=e(91768),M=e(84391),m=e(90631),W=e(49101),y=e(76651),j=e(31945),Q=e(1164),B=e(51697),N=c=>{var o=c.user,p=c.currentRoute,h=c.advancedSetting;return{currentPath:p.path,allAuthRoutes:p.allAuthRoutes,userLng:o.lng,themeColor:h.themeColor,qyShield:o.qyShield}};class A extends i().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var o=this.props.tabLink;y.m8.push(o)},this.renderActionBtn=()=>{var o=this.props,p=o.prefixCls,h=o.actionText,d=o.t,D=o.tabLink,E=o.showBtn,P=o.renderActionBtn,l=o.newPage,T=o.popOverProps,x=T===void 0?[]:T,g=o.renderGuide,S=g===void 0?!1:g,_=o.showDownloadBtn,I=_===void 0?!1:_,b=o.showImportBtn,k=b===void 0?!1:b,V=o.showCreateBtn,H=V===void 0?!0:V,ae=o.rowReverse,J=ae===void 0?!1:ae,oe="".concat(p,"__action");if(!E&&P&&typeof P=="function")return i().createElement("div",{className:oe},P());if(!E||!h)return null;var re=x.length?x[0].contentText:"";return i().createElement("div",{className:"".concat(oe," ").concat(J&&"row-reverse")},i().createElement(O.Z,{size:16},I&&i().createElement(f.Z,{icon:i().createElement(M.Z,null),onClick:this.handleDownload},d("common.exportData")),k&&i().createElement(f.Z,{icon:i().createElement(m.Z,null),onClick:this.handleImport},d("exam.importTemplate")),H&&l&&i().createElement(Q.Z,{to:D},i().createElement(B.Z,{visible:re&&S,placement:"topLeft",title:re},i().createElement(f.Z,{type:"primary",id:"create-project-button",icon:i().createElement(W.Z,null)},h))),H&&!l&&i().createElement(f.Z,{type:"primary",id:"create-project-button",icon:i().createElement(W.Z,null),onClick:this.handleCreate},h)))},this.renderQueryRow=()=>{var o=this.props,p=o.queryRowParams,h=o.queryRowList,d=o.queryRowSelectedCourseIds,D=o.queryRowSelectedProjectIds,E=o.queryRowOnForceRender,P=o.queryRowOnClassifyChange,l=o.queryRowOnTypeChange,T=o.queryRowOnCourseTypeChange,x=o.queryRowAllowActions,g=o.showNum,S=g===void 0?1:g;return i().createElement(j.Z,{params:p,list:h,selectedCourseIds:d,selectedProjectIds:D,onForceRender:E,onClassifyChange:P,onTypeChange:l,onCourseTypeChange:T,allowActions:x,showNum:S,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var o=this.props,p=o.t,h=o.extraBtnSelectedRowKeys,d=o.extraBtnHandleMultiVisibleRange;return i().createElement(f.Z,{disabled:h.length===0,onClick:d},p("courseManage.setTheVisibility"))}}render(){var o=this.props,p=o.prefixCls,h=o.wrapCls,d=o.showRenderQueryRow,D=o.showRendeExtraBtn;return i().createElement(i().Fragment,null,i().createElement("div",{className:"render_other"},i().createElement("header",{className:"".concat(p," ").concat(h)},i().createElement("section",{className:"".concat(p,"__radiocol")},this.renderActionBtn(),d&&this.renderQueryRow(),D&&this.rendeExtraBtn()))))}}A.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},z.Z=(0,s.$j)(N)((0,v.Z)()(A))},62117:function(le,z,e){"use strict";var X=e(63185),O=e(9676),C=e(43358),f=e(34041),w=e(88983),i=e(47933),s=e(12924),v=e.n(s),M=e(28216),m=e(91768),W=e(48479),y=e(2971),j=e(45601),Q=e(7249),B=A=>{var c=A.user,o=A.currentRoute,p=A.advancedSetting;return{currentPath:o.path,allAuthRoutes:o.allAuthRoutes,userLng:c.lng,themeColor:p.themeColor,appType:c.appType,appId:c.appId}};class N extends v().Component{constructor(c){super(c);this.setPlaceholder=()=>{var o=this.props,p=o.currentPath,h=o.allAuthRoutes,d=o.userLng,D=this.state.language,E=h[p],P=this.props,l=P.appType,T=P.appId,x=localStorage.getItem("qyWechatBook"),g=l==="wx_app"&&x==="true"&&T==="9005";if(!!E){var S=D[d].searchInputPlaceholder,_="";E.menuKey==="studyTemplate"||E.menuKey==="examTemplate"?_=S.template:E.menuKey==="employee"||E.menuKey==="obligatory"||E.menuKey==="elective"||E.menuKey==="plan"||E.menuKey==="evaluation"||E.menuKey==="myEvaluationPlan"?_=S.task:E.menuKey==="studyProject"?_=g?S.byProjectName:S.byProjectNameOrCreator:E.menuKey==="management"?_=g?S.byTaskName:S.byTaskNameOrCreator:_=S[E.menuKey],this.setState({currentPlaceholder:_})}},this.handleRadiosChange=o=>{this.props.onRadiosChange(o.target.value)},this.handleSelectChange=o=>{this.props.onSelectChange(o)},this.handleSearch=(o,p)=>{this.props.onSearch(o,p)},this.handleChange=o=>{this.props.onCheckboxChange(o.target.checked)},this.renderRadios=()=>{var o=this.props,p=o.prefixCls,h=o.radioList,d=o.defaultRadioValue,D=o.radioValue;if(!h.length)return null;var E=d||h[0].value,P="".concat(p,"__radios");return v().createElement("div",{className:P},typeof D!="undefined"?v().createElement(i.ZP.Group,{defaultValue:E,value:D,onChange:this.handleRadiosChange},h.map(l=>v().createElement(i.ZP.Button,{key:l.value,value:l.value},l.name))):v().createElement(i.ZP.Group,{defaultValue:E,onChange:this.handleRadiosChange},h.map(l=>v().createElement(i.ZP.Button,{key:l.value,value:l.value},l.name))))},this.renderSelect=()=>{var o=this.props,p=o.prefixCls,h=o.selectList,d=o.defaultSelectValue;if(!h.length)return null;var D=d||h[0].value,E="".concat(p,"__select");return v().createElement("div",{className:E},v().createElement(f.Z,{defaultValue:D,onChange:this.handleSelectChange,style:{minWidth:100}},h.map(P=>v().createElement(f.Z.Option,{key:P.value,value:P.value},P.name))))},this.renderOther=()=>{var o=this.props,p=o.prefixCls,h=o.renderOther,d=o.showOther,D="".concat(p,"__other");if(d&&h&&typeof h=="function")return v().createElement("div",{className:D},h())},this.renderCheckbox=()=>{var o=this.props,p=o.prefixCls,h=o.t,d=o.label,D=o.showCheckbox,E=o.renderActionSelect,P="".concat(p,"__checkbox");return!D&&E&&typeof E=="function"?v().createElement("div",{className:P},E()):D?v().createElement("div",{className:P},v().createElement(O.Z,{onChange:this.handleChange},d||h("common.myCreated"))):null},this.renderSearch=()=>{var o=this.props,p=o.prefixCls,h=o.showSearch,d=o.inputPlaceholder,D=o.maxLength,E=D===void 0?400:D,P=o.value,l="".concat(p,"__search");if(!h)return null;var T=this.state.currentPlaceholder;return d?v().createElement("div",{className:l},v().createElement(W.Z,{onSearch:this.handleSearch,placeholder:d,width:272,maxLength:E})):v().createElement("div",{className:l},v().createElement(W.Z,{onSearch:this.handleSearch,placeholder:T,width:272,maxLength:E,value:P}))},this.renderSearchOther=()=>{var o=this.props.renderSearchOther;return o?o():null},this.state={language:{zh_cn:j.Z,en_us:y.Z,zh_hk:Q.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(c){c.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var c=this.props,o=c.prefixCls,p=c.wrapCls,h=c.showRenderRadios,d=h===void 0?!0:h,D=c.showRenderSelect;return v().createElement(v().Fragment,null,v().createElement("div",{className:"render_other"},this.renderOther(),v().createElement("header",{className:"".concat(o," ").concat(p)},v().createElement("section",{className:"".concat(o,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),d&&this.renderRadios(),D&&this.renderSelect(),this.renderSearch()))))}}N.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},z.Z=(0,M.$j)(B)((0,m.Z)()(N))},27550:function(le,z,e){"use strict";var X=e(57663),O=e(71577),C=e(63185),f=e(9676),w=e(43358),i=e(34041),s=e(88983),v=e(47933),M=e(12924),m=e.n(M),W=e(28216),y=e(91768),j=e(49101),Q=e(84391),B=e(1164),N=e(48479),A=e(2971),c=e(45601),o=e(7249),p=e(64549),h=e(31945),d=E=>{var P=E.user,l=E.currentRoute,T=E.advancedSetting;return{currentPath:l.path,allAuthRoutes:l.allAuthRoutes,userLng:P.lng,themeColor:T.themeColor}};class D extends m().Component{constructor(P){super(P);this.setPlaceholder=()=>{var l=this.props,T=l.currentPath,x=l.allAuthRoutes,g=l.userLng,S=this.state.language,_=x[T];if(!!_){var I=S[g].searchInputPlaceholder,b="";_.menuKey==="studyTemplate"||_.menuKey==="examTemplate"?b=I.template:_.menuKey==="management"||_.menuKey==="employee"||_.menuKey==="obligatory"||_.menuKey==="elective"||_.menuKey==="plan"||_.menuKey==="evaluation"||_.menuKey==="myEvaluationPlan"?b=I.task:b=I[_.menuKey],this.setState({currentPlaceholder:b})}},this.handleRadiosChange=l=>{this.props.onRadiosChange(l.target.value)},this.handleSelectChange=l=>{this.props.onSelectChange(l)},this.handleSearch=l=>{this.props.onSearch(l)},this.handleChange=l=>{this.props.onCheckboxChange(l.target.checked)},this.handleDownload=()=>{this.props.onDownload()},this.renderRadios=()=>{var l=this.props,T=l.prefixCls,x=l.radioList,g=l.defaultRadioValue,S=l.radioValue;if(!x.length)return null;var _=g||x[0].value,I="".concat(T,"__radios");return m().createElement("div",{className:I},typeof S!="undefined"?m().createElement(v.ZP.Group,{defaultValue:_,value:S,onChange:this.handleRadiosChange},x.map(b=>m().createElement(v.ZP.Button,{key:b.value,value:b.value},b.name))):m().createElement(v.ZP.Group,{defaultValue:_,onChange:this.handleRadiosChange},x.map(b=>m().createElement(v.ZP.Button,{key:b.value,value:b.value},b.name))))},this.renderSelect=()=>{var l=this.props,T=l.prefixCls,x=l.selectList,g=l.defaultSelectValue;if(!x.length)return null;var S=g||x[0].value,_="".concat(T,"__select");return m().createElement("div",{className:_},m().createElement(i.Z,{defaultValue:S,onChange:this.handleSelectChange,getPopupContainer:()=>document.getElementsByClassName("cl-listQueryRow__select")[0],style:{minWidth:100}},x.map(I=>m().createElement(i.Z.Option,{key:I.value,value:I.value},I.name))))},this.renderOther=()=>{var l=this.props,T=l.prefixCls,x=l.renderOther,g=l.showOther,S="".concat(T,"__other");if(g&&x&&typeof x=="function")return m().createElement("div",{className:S},x())},this.renderCheckbox=()=>{var l=this.props,T=l.prefixCls,x=l.t,g=l.label,S=l.showCheckbox,_=l.renderActionSelect,I="".concat(T,"__checkbox");return!S&&_&&typeof _=="function"?m().createElement("div",{className:I},_()):S?m().createElement("div",{className:I},m().createElement(f.Z,{onChange:this.handleChange},g||x("common.myCreated"))):null},this.renderSearch=()=>{var l=this.props,T=l.prefixCls,x=l.showSearch,g=l.inputPlaceholder,S=l.maxLength,_=S===void 0?400:S,I="".concat(T,"__search");if(!x)return null;var b=this.state.currentPlaceholder;return g?m().createElement("div",{className:I},m().createElement(N.Z,{onSearch:this.handleSearch,placeholder:g,width:272,maxLength:_})):m().createElement("div",{className:I},m().createElement(N.Z,{onSearch:this.handleSearch,placeholder:b,width:272,maxLength:_}))},this.renderActionBtn=()=>{var l=this.props,T=l.prefixCls,x=l.actionText,g=l.t,S=l.tabLink,_=l.showBtn,I=l.renderActionBtn,b=l.popOverProps,k=b===void 0?[]:b,V=l.renderGuide,H=V===void 0?!1:V,ae=l.showDownloadBtn,J=ae===void 0?!1:ae,oe=l.guideClassName,re=oe===void 0?"guide-popover":oe,te=l.themeColor,R="".concat(T,"__action");return!_&&I&&typeof I=="function"?m().createElement("div",{className:R},I()):!_||!x?null:m().createElement("div",{className:R},m().createElement(B.Z,{to:S},m().createElement(O.Z,{type:"primary",icon:m().createElement(j.Z,null)},x)),m().createElement(p.Z,{className:re,renderGuide:H,guidePageProps:k,direction:"left",showDownloadBtn:J}),J&&m().createElement(O.Z,{style:{marginLeft:"8px",color:te,border:"1px solid ".concat(te)},icon:m().createElement(Q.Z,null),onClick:this.handleDownload},g("common.exportData")))},this.renderQueryRow=()=>{var l=this.props,T=l.queryRowParams,x=l.queryRowList,g=l.queryRowSelectedCourseIds,S=l.queryRowSelectedProjectIds,_=l.queryRowOnForceRender,I=l.queryRowOnClassifyChange,b=l.queryRowOnTypeChange,k=l.queryRowOnCourseTypeChange,V=l.queryRowAllowActions;return m().createElement(h.Z,{params:T,list:x,selectedCourseIds:g,selectedProjectIds:S,onForceRender:_,onClassifyChange:I,onTypeChange:b,onCourseTypeChange:k,allowActions:V,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var l=this.props,T=l.t,x=l.extraBtnSelectedRowKeys,g=l.extraBtnHandleMultiVisibleRange;return m().createElement(O.Z,{disabled:x.length===0,onClick:g},T("courseManage.setTheVisibility"))},this.state={language:{zh_cn:c.Z,en_us:A.Z,zh_hk:o.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(P){P.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var P=this.props,l=P.prefixCls,T=P.wrapCls,x=P.showRenderRadios,g=x===void 0?!0:x,S=P.showRenderQueryRow,_=P.showRendeExtraBtn,I=P.showRenderSelect;return m().createElement(m().Fragment,null,m().createElement("div",{className:"render_other"},this.renderOther(),m().createElement("header",{className:"".concat(l," ").concat(T)},m().createElement("section",{className:"".concat(l,"__radiocol")},this.renderActionBtn(),S&&this.renderQueryRow(),_&&this.rendeExtraBtn()),m().createElement("section",{className:"".concat(l,"__searchcol")},this.renderCheckbox(),g&&this.renderRadios(),I&&this.renderSelect(),this.renderSearch()))))}}D.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showRadioList:!0,showCheckbox:!0,showSearch:!0,showBtn:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{}},z.Z=(0,W.$j)(d)((0,y.Z)()(D))},83431:function(le,z,e){"use strict";var X=e(30887),O=e(99210),C=e(22385),f=e(31097),w=e(12924),i=e.n(w),s=e(91768),v=e(57119),M=e(28216),m=y=>{var j=y.user;return{loginMode:j.loginMode}};function W(y){var j=y.onUrge,Q=y.onDing,B=y.t,N=localStorage,A=N.appType,c=B(A==="wx_app"?"component.ordinaryUrgingWxTips":A==="fs_app"?"component.ordinaryUrgingFsTips":"component.ordinaryUrgingTips");return i().createElement(O.Z,null,i().createElement(O.Z.Item,{key:"1"},i().createElement(f.Z,{title:c},i().createElement("div",{className:"urge-menu-item",onClick:j},i().createElement("span",{className:"urge-menu-item__text"},B("component.ordinaryUrging")),i().createElement(v.Z,null)))),A==="e_app"?i().createElement(O.Z.Item,{key:"2"},i().createElement(f.Z,{title:B("component.dingStudentsTips")},dd.version?i().createElement("div",{className:"urge-menu-item",onClick:Q},i().createElement("span",{className:"urge-menu-item__text"},B("component.dingStudents")),i().createElement(v.Z,null)):i().createElement("div",{className:"urge-menu-item__forbidden"},i().createElement("span",{className:"urge-menu-item__text"},B("component.dingStudents")),i().createElement(v.Z,null)))):null)}z.Z=(0,M.$j)(m)((0,s.Z)()(W))},11565:function(le,z,e){"use strict";e.r(z),e.d(z,{default:function(){return Qe}});var X=e(34792),O=e(48086),C=e(88986),f=e(43358),w=e(34041),i=e(12924),s=e.n(i),v=e(28216),M=e(91768),m=e(76651),W=e(57068),y=e(72456),j=e(62117),Q=e(62029),B=e(71194),N=e(57016),A=e(30887),c=e(99210),o=e(59250),p=e(13013),h=e(57361),d=e(9754),D=e.n(d),E=e(57254),P=e(57119),l=e(18681),T=e(50997),x=e(55285),g=e(95664);class S extends s().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("exam.thNumber"),dataIndex:"userId",key:"userId",width:50,fixed:"left",render:(n,t,a)=>a+1}],this.columnsWithScore=[{title:this.props.t("exam.thExamTimes"),width:100,dataIndex:"makeUpCount",key:"makeUpCount"},{title:this.props.t("exam.thExamScore"),width:100,dataIndex:"score",key:"score"}],this.handleTableChange=n=>{this.props.onTableChange(n)}}render(){var n=this.props,t=n.prefixCls,a=n.showScoreColumns,r=a===void 0?!1:a,u=n.list,L=u===void 0?[]:u,Z=n.loading,$=n.paginationParams,K=$===void 0?{}:$,G=n.headerTitle,ie=n.toolBarRender,ce=K.total,ve=K.totalPage,ue=K.current;return s().createElement("section",{className:t},s().createElement(x.Z,{withLoginPhoneNumber:!0,headExtra:this.columns,columns:r?this.columnsWithScore:[],rowKey:"userId",dataSource:L,pagination:!1,loading:Z,headerTitle:G,toolBarRender:ie,tableUUID:"3cf3fb44-0287-4c42-9b46-8d9dd991b575"}),s().createElement(g.Z,{totalNum:ce,totalPage:ve,current:ue,defaultPageSize:5,showRenderRefresh:!1,onChange:this.handleTableChange}))}}S.defaultProps={prefixCls:"plan-list-page____table"};var _=(0,M.Z)()(S),I=e(48479);class b extends s().Component{constructor(){super(...arguments);this.handleSearch=(n,t)=>{this.props.onSearch(n,t)},this.renderSearch=()=>{var n=this.props,t=n.prefixCls,a=n.t,r="".concat(t,"__search");return s().createElement("div",{className:r},s().createElement(I.Z,{onSearch:this.handleSearch,width:"200px",placeholder:a("searchInputPlaceholder.userName")}))}}render(){var n=this.props.prefixCls;return s().createElement("header",{className:n},this.renderSearch())}}b.defaultProps={prefixCls:"plan-list-page__content__examinfo__query"};var k=(0,M.Z)()(b),V=e(22385),H=e(31097),ae=e(57663),J=e(71577),oe=e(83431);class re extends s().Component{constructor(){super(...arguments);this.urgeButton=()=>{var n=this.props,t=n.t,a=n.onUrge,r=n.onDing,u=n.isUnPublish;return u?s().createElement(H.Z,{title:t("study.cantPushMsg")},s().createElement(J.Z,{type:"primary",disabled:!0},this.props.t("exam.urge")," ",s().createElement(E.Z,null))):s().createElement(p.Z,{overlay:s().createElement(oe.Z,{onUrge:a,onDing:r})},s().createElement(J.Z,{type:"primary"},this.props.t("exam.urge")," ",s().createElement(E.Z,null)))},this.renderActionBtn=()=>{var n=this.props,t=n.prefixCls,a=n.shouldRenderSupplement,r=a===void 0?!1:a,u=n.shouldRenderUrge,L=u===void 0?!1:u,Z=n.onSupplement,$=n.isUnPublish,K=n.t,G="".concat(t,"__action");return s().createElement("div",{className:G},r?s().createElement(H.Z,{title:K($?"study.cantPushMsg":"exam.supplementTip")},s().createElement(J.Z,{type:"primary",onClick:Z,disabled:$},this.props.t("exam.supplement"),s().createElement(P.Z,null))):null,L?this.urgeButton():null)}}render(){var n=this.props.prefixCls;return s().createElement("header",{className:n},this.renderActionBtn())}}re.defaultProps={prefixCls:"plan-list-page__content__examinfo__query"};var te=(0,M.Z)()(re),R=e(18329),F=e(10237),U=e(37055),q=e(54531),ee=e(6793),Y={getPlanExamInfoByPlanId:U.ZP.ExaminationPlanList.getPlanExamInfoByPlanId,urgeExam:U.ZP.ExaminationPlanList.urgeExam,supplementExam:U.ZP.ExaminationPlanList.supplementExam},se={params:{keyword:"",planId:"",type:"",pageNumber:1,pageSize:5,userIds:""},tableLoading:!0,tableList:[],tableTotal:0,tableTotalPages:0,repeatExam:!1,examStatus:"",resShowExamRemind:!1,resExaminationType:0,supplementProps:{visible:!1,actionId:"",cellType:"unqualifiedNum"},planExam:{},dingUserIds:[],authScope:{visible:!1}};class ne extends s().Component{constructor(){super(...arguments);this.state=(0,C.Z)({},se),this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.initTableList=()=>{this.setState({tableLoading:!0}),F.WY.get({url:Y.getPlanExamInfoByPlanId(),params:(0,C.Z)((0,C.Z)({},this.state.params),{},{type:this.props.typeValue,planId:this.props.actionId,keyword:this.state.params.userIds?"":this.state.params.keyword})}).then(n=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:n.data.data.pageInfo.list,tableTotal:n.data.data.pageInfo.total,tableTotalPages:n.data.data.pageInfo.pages,examStatus:n.data.data.status,resShowExamRemind:n.data.data.showExamRemind,planExam:n.data.data.planExam,dingUserIds:n.data.data.dingUserIds||[],authScope:{visible:n.data.data.planExam.authorityRange==="true"}})},300)})},this.handleChangePagination=n=>{this.setState(t=>({params:(0,C.Z)((0,C.Z)({},t.params),{},{pageNumber:n})}),()=>{this.initTableList()})},this.handleQueryRowSearch=(n,t)=>{this.resetPagination().then(()=>{this.setState(a=>({params:(0,C.Z)((0,C.Z)({},a.params),{},{keyword:n,userIds:t})}),()=>{this.initTableList()})})},this.resetPagination=()=>new Promise(n=>{this.setState(t=>({params:(0,C.Z)((0,C.Z)({},t.params),{},{pageNumber:1,pageSize:5})}),()=>{n()})}),this.handleSupplement=()=>{this.setState(n=>({supplementProps:(0,C.Z)((0,C.Z)({},n.supplementProps),{},{visible:!0,actionId:this.props.actionId,cellType:this.props.type})}))},this.handleSupplementOk=n=>{var t=n.id,a=n.type,r=n.dateRange,u=n.makeupUserIds;F.qg.post({url:Y.supplementExam(),data:{examPlanId:t,startTime:r.startTime,endTime:r.endTime,type:a,makeupUserIds:u}}).then(L=>{var Z=L.data,$=Z.code,K=Z.msg;O.default[$===0?"success":"warning"](K),$===0&&(this.handleSupplementCancel(),this.props.onOk())})},this.handleSupplementCancel=()=>{this.setState(n=>({supplementProps:(0,C.Z)((0,C.Z)({},n.supplementProps),{},{visible:!1,actionId:""})}))},this.handleUrge=()=>{var n=this,t=this.props,a=t.actionId,r=t.type,u=t.t,L=a,Z=r==="unExamNum"?2:1;N.Z.confirm({title:"\u50AC\u4FC3\u8003\u8BD5",content:u("exam.urgeTip"),zIndex:99999,onOk(){F.qg.get({url:Y.urgeExam(),params:{planId:L,noticeType:Z}}).then($=>{var K=$.data,G=K.code,ie=K.msg;G!==1&&O.default["".concat(G===0?"success":"warning")](ie),n.handleSupplementCancel(),n.props.onOk()})}})},this.handleDing=()=>{var n=this.state,t=n.planExam,a=n.dingUserIds,r=t.title,u=encodeURIComponent("/pages/messageRedirect/messageRedirect?flag=exam&planId=".concat(this.props.actionId)),L="dingtalk://dingtalkclient/action/open_micro_app?&appId=".concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(u,"&corpId=$CORPID$"),Z={users:a,attachmentTitle:r,text:(0,ee.ZT)(this.props.t("exam.dingTips"),r),mobileUrl:L};(0,q.nb)(Z)},this.renderLeftRow=()=>s().createElement(k,{onSearch:this.handleQueryRowSearch}),this.renderRightRow=()=>{var n=this.props,t=n.type,a=n.record,r=a===void 0?{}:a,u=this.state,L=u.examStatus,Z=u.resShowExamRemind,$=L==="on_going"&&t!=="qualifiedNum"||L==="end"&&t==="unExamNum"&&Z,K=L==="end"&&(t==="unqualifiedNum"||t==="unExamNum"),G=r.publishStatus==="unpublished";return s().createElement(te,{shouldRenderSupplement:K,shouldRenderUrge:$,onUrge:this.handleUrge,onDing:this.handleDing,onSupplement:this.handleSupplement,isUnPublish:G})}}componentDidUpdate(n){var t=this.props,a=t.visible,r=t.actionId;a&&a!==n.visible&&r&&this.setState((0,C.Z)({},se),()=>{this.initTableList(),(0,q.TN)()})}render(){var n=this.props,t=n.prefixCls,a=n.visible,r=n.title,u=n.onCancel,L=n.onOk,Z=n.type,$=n.t,K=this.state,G=K.tableTotal,ie=K.tableTotalPages,ce=K.tableList,ve=K.tableLoading,ue=K.supplementProps,Ee=K.params,Ge=K.authScope,ze={total:G,totalPage:ie,current:Ee.pageNumber},He=s().createElement("div",null,r,Ge.visible&&s().createElement("span",{className:"exam-info-title-auth"},$("common.authScopeTip")));return s().createElement(s().Fragment,null,s().createElement(R.ZP,{visible:a,title:He,onCancel:u,onOk:L,bodyMask:ue.visible},s().createElement("div",{className:t},a?s().createElement(s().Fragment,null,s().createElement(_,{loading:ve,paginationParams:ze,list:ce,onTableChange:this.handleChangePagination,showScoreColumns:Z!=="unExamNum",headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow})):null)),s().createElement(T.Z,(0,Q.Z)({},ue,{isLoading:!ue.visible,onCancel:this.handleSupplementCancel,onCreate:this.handleSupplementOk})))}}ne.defaultProps={prefixCls:"plan-list-page__content__examinfo"};var pe=(0,M.Z)()(ne),de=e(14965),he=e(11448),me=e(59239),ge=e(55446),Se={delayExam:U.ZP.ExaminationPlanList.delayExam};class _e extends s().Component{constructor(){super(...arguments);this.handleBeforeCreate=()=>{var n=this.props,t=n.form,a=n.actionId,r=n.onCreate;t.validateFields((u,L)=>{if(!u){var Z=L.endTime.format(U.XE.INITIAL_DATE_FMT.PARAMS);F.qg.post({url:Se.delayExam(),data:{endTime:Z,id:a}}).then($=>{var K=$.data,G=K.code,ie=K.msg;G!==1&&(O.default["".concat(G===0?"success":"warning")](ie),G===0&&(r(),setTimeout(()=>{t.resetFields()},100)))})}})},this.handleBeforeCancel=()=>{var n=this.props,t=n.form,a=n.onCancel;a(),setTimeout(()=>{t.resetFields()},100)},this.checkEndTime=(n,t,a)=>{var r=t.valueOf();if(r<=this.props.record.beginTime){a(this.props.t("exam.postponevaliditionTip"));return}a()}}render(){var n=this.props,t=n.visible,a=n.prefixCls,r=n.form,u=n.record,L=n.t,Z=r.getFieldDecorator;return s().createElement(R.ZP,{width:"400",visible:t,title:L("common.postpone"),onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},s().createElement(me.Z,{className:"".concat(a),layout:"vertical"},s().createElement(me.Z.Item,{label:L("common.beginTime")},Z("beginTime",{initialValue:(0,ee.k7)(u.beginTime),rules:[{required:!0}]})(s().createElement(he.Z,{style:{width:352},disabled:!0,showTime:!0,format:U.XE.INITIAL_DATE_FMT.VIEW}))),s().createElement(me.Z.Item,{label:L("common.endTime")},Z("endTime",{rules:[{type:"object",required:!0,message:L("exam.postponeInputEndTimeTip")},{validator:this.checkEndTime}]})(s().createElement(he.Z,{style:{width:352},showTime:!0,format:U.XE.INITIAL_DATE_FMT.VIEW,disabledDate:ee.Kq})))))}}_e.defaultProps={prefixCls:"",record:{},visible:!1};var Oe=me.Z.create({name:"DelayInModal"})(_e),ye=(0,M.Z)()(Oe),fe=e(30389),xe={getExamInfo:U.ZP.ExaminationPlanList.getExamInfo};class Ae extends s().Component{constructor(){super(...arguments);this.state={initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[]}}},isLoading:!0},this.initParams=()=>{this.setState({isLoading:!0}),F.WY.get({url:xe.getExamInfo({examId:this.props.actionId})}).then(n=>{var t=n.data;this.setState({initialParams:{employeeRange:{rangeType:t.is_all_in==="true"?1:2,rangeList:{dept:t.department_list||[],post:t.post_list||[],group:t.group_list||[],user:t.user_list||[]}}},isLoading:!1})})}}componentDidUpdate(n){this.props.visible&&this.props.visible!==n.visible&&this.initParams()}render(){var n=this.state,t=n.initialParams,a=n.isLoading;return a?null:s().createElement(fe.Z,(0,Q.Z)({initialParams:t,isLoading:a,orgProps:{title:this.props.t("component.chooseVisibleScope")}},this.props,{tipInfo:this.props.t("study.changeUserRangeTip")}))}}var Ue=(0,M.Z)()(Ae),be=e(60667),De=e(36202),Be=e(1164),Pe=e(26096),Te=e(30311),Ne=e(59857),We=e(38642),Ke=e(18884);class Le extends s().Component{constructor(){var n;super(...arguments);n=this,this.state={examInfoProps:{actionId:"",visible:!1,title:"",type:"",typeValue:"",radioValue:0,record:{}},delayProps:{actionId:"",visible:!1,record:{}},changeProps:{actionId:"",visible:!1,record:{}},whiteList:{examShareFlag:(0,We.UI)("EXAM_TASK_SHARE_BUT")},qrCodeConfig:{visible:!1,title:this.props.t("common.share"),isProjectShare:!1,tip:""},qrCodeOption:{scene:"",flag:"exam_task"}},this.onHandleQrShare=t=>{var a=t.record,r=this.state,u=r.qrCodeConfig,L=r.qrCodeOption;u.visible=!0,this.setState({qrCodeOption:(0,C.Z)((0,C.Z)({},L),{},{scene:"&flag=exam&planId=".concat(a.id)}),qrCodeConfig:u})},this.handleHiddenQrCode=()=>{var t=this.state.qrCodeConfig;t.visible=!1,this.setState({qrCodeConfig:t})},this.columns=[{title:this.props.t("exam.testName"),dataIndex:"title",key:"title",fixed:"left",width:200,render:(t,a)=>{var r=this.props.shouldRenderView;return r?s().createElement(Be.Z,{to:"/training/examination/plan/preview?id=".concat(a.id)},s().createElement("span",{className:"exam-table-title cl-hover"},t)):t},onCell:()=>({style:{minWidth:210}})},{title:this.props.t("learning.learningProjectAddCategoryed"),dataIndex:"classifyName",key:"classifyName",width:80,render:(t,a)=>s().createElement(Ne.Z,{name:a.classifyName,full_name:a.classify_path_name})},{title:this.props.t("exam.examinee"),dataIndex:"examNum",key:"examNum",width:this.props.lng==="en_us"?90:76,render:(t,a)=>a.isAllIn?this.props.t("common.allStaff"):t,onCell:()=>({style:{minWidth:65}})},{title:this.props.t("exam.passed"),dataIndex:"qualifiedNum",key:"qualifiedNum",width:76,render:(t,a)=>t>0?s().createElement(Te.Z,{name:t,onClick:()=>this.showRowInfo({record:a,type:"qualifiedNum",typeValue:0})}):0,onCell:()=>({style:{minWidth:65}})},{title:this.props.t("exam.failed"),dataIndex:"unqualifiedNum",key:"unqualifiedNum",width:76,render:(t,a)=>t>0?s().createElement(Te.Z,{name:t,onClick:()=>this.showRowInfo({record:a,type:"unqualifiedNum",typeValue:1})}):0,onCell:()=>({style:{minWidth:65}})},{title:this.props.t("exam.absent"),dataIndex:"unExamNum",key:"unExamNum",width:100,render:(t,a)=>t>0?s().createElement(Te.Z,{name:t,onClick:()=>this.showRowInfo({record:a,type:"unExamNum",typeValue:2})}):0,onCell:()=>({style:{minWidth:90}})},{title:this.props.t("common.examPassRate"),dataIndex:"qualifiedRate",key:"qualifiedRate",width:90,render:t=>t?"".concat(t,"%"):"--"},{title:this.props.t("common.joinRate"),dataIndex:"joinRate",key:"joinRate",width:90,render:t=>t?"".concat(t,"%"):"--"},{title:this.props.t("common.missRate"),dataIndex:"unExamRate",key:"unExamRate",width:90,render:t=>t?"".concat(t,"%"):"--"},{title:this.props.t("exam.toBeGraded"),dataIndex:"pendingCount",key:"pendingCount",width:this.props.lng==="en_us"?138:76,render:(t,a)=>t>0&&a.readingOperation==="has_operation"?s().createElement(Te.Z,{name:t,onClick:()=>this.linkToMarkPaper(a)}):t,onCell:()=>({style:{minWidth:65}})},{title:this.props.t("exam.creator"),dataIndex:"creatorName",key:"creatorName",width:76,onCell:()=>({style:{minWidth:65}}),render:(t,a)=>s().createElement(be.Z,{dataType:"userName",value:a.creator_sync_user_id,name:t,type:a.creator_source_type})},{title:this.props.t("exam.createTime"),dataIndex:"createTime",key:"createTime",width:132,render:t=>"".concat((0,ee.p6)(t)),onCell:()=>({style:{minWidth:132}})},{title:this.props.t("exam.duration"),dataIndex:"beginTime",key:"beginTime",width:220,render:(t,a)=>{var r=a.beginTime,u=a.endTime;return"".concat((0,ee.p6)(r)," ~ ").concat((0,ee.p6)(u))},onCell:()=>({style:{minWidth:220}})},{title:this.props.t("exam.operate"),width:120,key:"operate",fixed:"right",render:t=>this.renderActions({record:t}),onCell:()=>({style:{minWidth:120}})}],this.handleTableChange=t=>{this.props.onTableChange(t)},this.showRowInfo=t=>{var a=t.record,r=t.type,u=t.typeValue,L={qualifiedNum:this.props.t("exam.passed"),unqualifiedNum:this.props.t("exam.failed"),unExamNum:this.props.t("exam.absent")};this.setState(Z=>({examInfoProps:(0,C.Z)((0,C.Z)({},Z.examInfoProps),{},{visible:!0,actionId:a.id,title:L[r],type:r,typeValue:u,radioValue:this.props.radioValue,record:a})}))},this.handleExamInfoCancel=()=>{this.setState(t=>({examInfoProps:(0,C.Z)((0,C.Z)({},t.examInfoProps),{},{visible:!1})}))},this.handleDelete=t=>{var a=t.record;this.props.onRowDelete(a.id)},this.handleClickPopItem=t=>{var a=t.record,r=t.type;switch(r){case"delay":this.handleDelayRow({record:a});break;case"change":this.handleChangeRow({record:a});break;default:break}},this.hasExamInProgress=t=>{var a=t.id;return(0,l.T)({examId:a}).then(r=>{var u=r.data.data;if(u){var L=u.start_time,Z=u.end_time,$=Date.now();return window.parseInt(L,10)<=$&&$<=window.parseInt(Z,10)}return!1}).catch(()=>!1)},this.handleDelayRow=function(){var t=(0,h.Z)(D().mark(function a(r){var u,L,Z;return D().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return u=r.record,K.next=3,n.hasExamInProgress(u);case 3:if(L=K.sent,!L){K.next=8;break}return Z=n.props.t,O.default.warn("".concat(Z("myExamTask.postponeTip"))),K.abrupt("return");case 8:n.setState(G=>({delayProps:(0,C.Z)((0,C.Z)({},G.delayProps),{},{actionId:u.id,visible:!0,record:u})}));case 9:case"end":return K.stop()}},a)}));return function(a){return t.apply(this,arguments)}}(),this.handleDelayOk=()=>{this.props.onForceRender(),this.handleDelayCancel()},this.handleDelayCancel=()=>{this.setState(t=>({delayProps:(0,C.Z)((0,C.Z)({},t.delayProps),{},{actionId:"",visible:!1,record:{}})}))},this.handleChangeRow=t=>{var a=t.record;this.setState(r=>({changeProps:(0,C.Z)((0,C.Z)({},r.changeProps),{},{actionId:a.id,visible:!0,record:a})}))},this.handleChangeOk=t=>{this.setState(a=>({changeProps:(0,C.Z)((0,C.Z)({},a.changeProps),{},{visible:!1})}),()=>{this.props.onRowChange(t)})},this.handleChangeCancel=()=>{this.setState(t=>({changeProps:(0,C.Z)((0,C.Z)({},t.changeProps),{},{actionId:"",visible:!1,record:{}})}))},this.linkToMarkPaper=t=>{t.pendingCount!==0&&m.m8.push("/training/examination/plan/testPaper?id=".concat(t.id))},this.renderActions=t=>{var a=t.record,r=a.planOperation==="has_operation",u=this.props,L=u.shouldRenderEdit,Z=u.shouldRenderDelete,$=u.shouldRenderMonitor,K=this.state.whiteList,G=a.publishStatus==="published",ie=[{type:"monitor",visible:$},{type:"edit",visible:L&&r},{type:"postpone",visible:r&&G},{type:"change",visible:r&&G},{type:"delete",visible:Z&&r},{type:"release",visible:!0},{type:"share",visible:K.examShareFlag}],ce=ie.filter(Ee=>Ee.visible),ve=[],ue=[];if(ce.length>1)ue=[ce[0]],ve=[...ce.slice(1)];else if(ce.length===1)ue=[ce[0]];else return"/";return s().createElement("div",{className:"cl-table__cell-action"},ue.some(Ee=>Ee.visible)?this.renderOperateBtn(ue,{record:a}):this.renderOperateBtn(ve,{record:a}),ue.some(Ee=>Ee.visible)&&ve.some(Ee=>Ee.visible)?s().createElement(s().Fragment,null,s().createElement("span",{className:"cl-pointer-divide"}),s().createElement(p.Z,{overlay:this.renderOperateBtn(ve,{record:a},"more")},s().createElement("span",{className:"cl-pointer"},this.props.t("common.more")," ",s().createElement(E.Z,null)))):null)},this.renderOperateBtn=(t,a,r)=>{var u=a.record,L=this.props.t,Z=t.map($=>{switch($.type){case"monitor":return s().createElement(Pe.Z,{type:r,key:"monitor",link:"/training/examination/plan/monitor?id=".concat(u.id,"&taskType=exam"),title:this.props.t("common.monitor")});case"edit":return s().createElement(Pe.Z,{type:r,key:"edit",disabled:u.publishStatus==="published",tooltip:u.publishStatus==="published"?L("common.operationTips"):"",link:"/training/examination/plan/detail?id=".concat(u.id),title:this.props.t("common.edit")});case"postpone":return s().createElement(Pe.Z,{type:r,key:"postpone",click:()=>this.handleClickPopItem({record:u,type:"delay"}),title:this.props.t("common.postpone")});case"change":return s().createElement(Pe.Z,{type:r,key:"change",click:()=>this.handleClickPopItem({record:u,type:"change"}),title:this.props.t("common.change")});case"delete":return s().createElement(Pe.Z,{type:r,key:"delete",click:()=>this.toHandleDelete({record:u}),title:this.props.t("common.delete")});case"release":return s().createElement(Pe.Z,{type:r,key:"release",click:()=>this.toHandlePublish({record:u}),title:u.publishStatus==="published"?this.props.t("course.cancelRelease"):this.props.t("common.release")});case"share":return s().createElement(Pe.Z,{type:r,key:"share",click:()=>this.onHandleQrShare({record:u}),title:this.props.t("common.share")});default:return null}});return r==="more"?s().createElement(c.Z,null,Z):Z},this.toHandlePublish=t=>{var a=t.record,r=this.props.t;N.Z.confirm({title:r("common.tip"),icon:s().createElement(P.Z,null),content:a.publishStatus==="published"?r("study.afterTheReleaseTaskNotBeVisible"):r("personal.okPublish"),onOk:()=>{F.WY.post({url:U.ZP.ExaminationPlanList.changePublish(),params:{examId:a.id,publishStatus:a.publishStatus==="published"?"unpublished":"published"}}).then(u=>{u.data.code===0&&(a.publishStatus==="published"?O.default.success(r("study.cancelSuccessful")):O.default.success(r("personal.publishSuccess")),this.props.onForceRender())})}})},this.toHandleDelete=t=>{var a=t.record;N.Z.confirm({title:this.props.t("common.tip"),icon:s().createElement(P.Z,null),content:this.props.t("exam.deleteConfirm"),onOk:()=>{this.handleDelete({record:a})}})}}render(){var n=this.props,t=n.prefixCls,a=n.list,r=a===void 0?[]:a,u=n.loading,L=n.paginationParams,Z=L===void 0?{}:L,$=n.headerTitle,K=n.toolBarRender,G=this.state,ie=G.examInfoProps,ce=G.delayProps,ve=G.changeProps,ue=G.qrCodeConfig,Ee=G.qrCodeOption,Ge=G.whiteList,ze=(0,C.Z)((0,C.Z)({},U.XE.INITIAL_PAGINATION),Z);return s().createElement("section",{className:t},s().createElement(De.f,{columns:this.columns,rowKey:"id",dataSource:r,scroll:{y:"100%",x:1400},pagination:ze,loading:u,onChange:this.handleTableChange,headerTitle:$,toolBarRender:K,tableUUID:"4a8a9a39-9885-4ddf-9619-83a029259b0c"}),s().createElement(pe,(0,Q.Z)({},ie,{onCancel:this.handleExamInfoCancel,onOk:this.handleExamInfoCancel})),s().createElement(ye,(0,Q.Z)({},ce,{onCancel:this.handleDelayCancel,onCreate:this.handleDelayOk})),s().createElement(Ue,(0,Q.Z)({},ve,{onCancel:this.handleChangeCancel,onCreate:this.handleChangeOk})),Ge.examShareFlag?s().createElement(Ke.Z,(0,Q.Z)({onCancel:this.handleHiddenQrCode,option:Ee},ue)):null)}}Le.defaultProps={prefixCls:"plan-list-page__content__table"};var $e=(0,M.Z)()(Le),Fe=e(87722),je=e(11449),Ie=e(86726),Me=e(63848),ke=e(97593),Ze=w.Z.Option,Ve=Ce=>({userInfo:Ce.user}),Re={getRadiosNum:U.ZP.ExaminationPlanList.getRadiosNum,getTableList:U.ZP.ExaminationPlanList.getTableList,exportTaskList:U.ZP.ExaminationPlanList.exportTaskList,deleteExam:U.ZP.ExaminationPlanList.deleteExam,changeExamUsers:U.ZP.ExaminationPlanList.changeExamUsers};class we extends s().Component{constructor(){super(...arguments);this.state={allowActions:(0,Ie.V9)("plan",this.props.userInfo.modules),params:{scope:"all",keyword:"",pageNumber:1,pageSize:20,sortName:"createTime",sortOrder:"desc",queryIntervalType:0,timestamp:Date.parse(new Date),beginTime:"",endTime:"",publishStatus:"",timeType:"createTime"},radioList:[],tableLoading:!0,tableList:[],tableTotal:0,selectList:[],classify:[]},this.initData=()=>{this.initRadioList(),this.initTableList()},this.initRadioList=()=>{var n=this.props.t,t=this.state.params;F.WY.get({url:Re.getRadiosNum(),params:{beginTime:t.beginTime,endTime:t.endTime,keyword:t.keyword,timeType:t.timeType,scope:t.scope}}).then(a=>{var r=a.data,u=r.endCount,L=r.notStartCount,Z=r.onGoingCount,$=r.totalCount,K=r.publishedCount,G=r.unpublishedCount;this.setState({radioList:[{name:"".concat(n("common.all"),"(").concat($,")"),value:""},{name:"".concat(n("courseManage.published"),"(").concat(K,")"),value:"published"},{name:"".concat(n("courseManage.unPublished"),"(").concat(G,")"),value:"unpublished"}],selectList:[{name:"".concat(n("common.all"),"(").concat($,")"),value:0},{name:"".concat(n("common.notStarted"),"(").concat(L,")"),value:1},{name:"".concat(n("common.ongoing"),"(").concat(Z,")"),value:2},{name:"".concat(n("common.ended"),"(").concat(u,")"),value:3}]})})},this.initTableList=()=>{var n=this.state,t=n.classify,a=n.params;this.setState({tableLoading:!0}),F.WY.get({url:Re.getTableList(),params:(0,C.Z)({classify_id:t.length?t[t.length-1]:""},a)}).then(r=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:r.data.list,tableTotal:r.data.total})},300)})},this.handleForceRender=()=>{this.initData()},this.handleChangeTimeType=n=>{this.resetPagination().then(()=>{this.setState(t=>({params:(0,C.Z)((0,C.Z)({},t.params),{},{timeType:n})}),()=>{this.initTableList(),this.initRadioList()})})},this.handleChangeDateRange=n=>{var t=n.dateStrings;this.resetPagination().then(()=>{this.setState(a=>({params:(0,C.Z)((0,C.Z)({},a.params),{},{beginTime:t[0],endTime:t[1]})}),()=>{this.initTableList(),this.initRadioList()})})},this.handleQueryRowRadiosChange=n=>{this.resetPagination().then(()=>{this.setState(t=>({params:(0,C.Z)((0,C.Z)({},t.params),{},{queryIntervalType:n})}),()=>{this.initTableList()})})},this.handleChangePublishStatus=n=>{this.resetPagination().then(()=>{this.setState(t=>({params:(0,C.Z)((0,C.Z)({},t.params),{},{publishStatus:n})}),()=>{this.initTableList()})})},this.handleQueryRowSearch=n=>{this.resetPagination().then(()=>{this.setState(t=>({params:(0,C.Z)((0,C.Z)({},t.params),{},{keyword:n})}),()=>{this.initTableList(),this.initRadioList()})})},this.handleChangePagination=n=>{var t=n.current,a=n.pageSize;this.setState(r=>({params:(0,C.Z)((0,C.Z)({},r.params),{},{pageNumber:t,pageSize:a})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(n=>{this.setState(t=>({params:(0,C.Z)((0,C.Z)({},t.params),{},{pageNumber:1,pageSize:20})}),()=>{n()})}),this.handleRowDelete=n=>{F.qg.post({url:Re.deleteExam(),data:{id:n}}).then(t=>{var a=t.data,r=a.code,u=a.msg;r===0?O.default.success(this.props.t("personal.removeSuccess")):O.default.warning(u),this.initData()})},this.handleRowChange=n=>{var t=n.id,a=n.isAll,r=n.groupIds,u=n.departmentIds,L=n.userIds,Z=n.postIds,$=n.qy_we_chat_vo;F.qg.post({url:Re.changeExamUsers(),data:{id:t,isNoticeAll:a===1?1:0,isAllIn:a===1?1:0,groupIds:r,userIds:L,departmentIds:u,postIds:Z,qy_we_chat_vo:$}}).then(K=>{var G=K.data,ie=G.code,ce=G.msg;ie!==1&&(O.default["".concat(ie===0?"success":"warning")](ce),this.initData())})},this.handleDownload=()=>{var n=this.state.params,t=n.keyword,a=n.queryIntervalType,r=n.beginTime,u=n.endTime,L=n.publishStatus,Z=n.timeType,$=n.scope,K=this.state.classify,G=K.length?K[K.length-1]:"",ie="?access_token=".concat(window.localStorage.getItem("token"),"&keyword=").concat(t)+"&begin_time=".concat(r,"&end_time=").concat(u,"&query_interval_type=").concat(a,"&scope=").concat($,"&sort_name=createTime&sort_order=desc&publish_status=").concat(L,"&classify_id=").concat(G,"&time_type=").concat(Z);(0,ke.N)({page:"examinationPlan",props:this.props,query:ie})},this.handleClassifyChange=n=>{var t=this.state.params;this.setState({params:(0,C.Z)((0,C.Z)({},t),{},{pageNumber:1}),classify:n},()=>{this.initTableList(),this.initRadioList()})},this.renderLeftRow=()=>{var n=this.props.t,t=this.state.allowActions;return s().createElement(y.Z,{showBtn:(0,Ie.H3)("add",t),actionText:n("exam.newTest"),tabLink:"/training/examination/plan/detail",onDownload:this.handleDownload,showDownloadBtn:!0})},this.renderRightRow=()=>{var n=this.props.t,t=this.state,a=t.radioList,r=t.selectList;return s().createElement(j.Z,{label:n("common.myCreated"),radioList:a,showCheckbox:!1,defaultRadioValue:"",onRadiosChange:this.handleChangePublishStatus,onSearch:this.handleQueryRowSearch,showRenderSelect:!0,selectList:r,defaultSelectValue:0,onSelectChange:this.handleQueryRowRadiosChange})},this.renderTimeType=()=>{var n=this.props.t,t=[{label:n("common.createTime"),value:"createTime"},{label:n("common.beginTime"),value:"beginTime"},{label:n("common.endTime"),value:"endTime"}];return s().createElement(w.Z,{style:{width:120},defaultValue:t[0].value,onChange:this.handleChangeTimeType},t.map(a=>s().createElement(Ze,{value:a.value,key:a.value},a.label)))},this.renderSelect=()=>{var n=this.props.t,t=this.state.params,a=[{name:n("common.all"),value:"all"},{name:n("workbench.myCreation"),value:"my"},{name:n("workbench.myCharge"),value:"responsible_by_me"}];return s().createElement(w.Z,{value:t.scope,style:{width:245,marginLeft:16},onChange:this.handleType},a.map(r=>s().createElement(Ze,{key:r.value,value:r.value},r.name)))},this.handleType=n=>{this.resetPagination().then(()=>{this.setState(t=>({params:(0,C.Z)((0,C.Z)({},t.params),{},{scope:n})}),()=>{this.initTableList(),this.initRadioList()})})}}componentDidMount(){var n=W.parse(m.m8.location.search),t=n.fromWorkScope;t?this.setState(a=>({params:(0,C.Z)((0,C.Z)({},a.params),{},{scope:t})}),()=>{this.initData()}):this.initData()}render(){var n=this.props,t=n.prefixCls,a=n.t,r=n.userInfo,u=this.state,L=u.tableTotal,Z=u.tableList,$=u.tableLoading,K=u.params,G=u.allowActions,ie=u.classify,ce={total:L,current:K.pageNumber,pageSize:K.pageSize};return s().createElement(je.Z,{pageContainerParams:{header:{title:a("leftMenuLists.examinationTask")}},pageTitle:a("common.examTask")},s().createElement("div",{className:"plan-list-page sticky-table"},s().createElement("div",{className:"".concat(t,"__range")},this.renderTimeType(),s().createElement(Fe.Z,{format:"YYYY-MM-DD",onCustomChange:this.handleChangeDateRange,showTime:!1,className:"cl-search-normal-width"}),s().createElement("div",{className:"plan-task-select-padding"},s().createElement(Me.Z,{onChange:this.handleClassifyChange,value:ie,unclassified:!0,showLabel:!1,className:"cl-search-normal-width"})),this.renderSelect()),s().createElement("div",{className:"".concat(t,"__content"),ref:ve=>{this.tableRef=ve}},s().createElement($e,{lng:r.lng,loading:$,paginationParams:ce,list:Z,onTableChange:this.handleChangePagination,onRowDelete:this.handleRowDelete,onRowChange:this.handleRowChange,shouldRenderEdit:(0,Ie.H3)("edit",G),shouldRenderMonitor:(0,Ie.H3)("monitor",G),shouldRenderDelete:(0,Ie.H3)("delete",G),shouldRenderView:(0,Ie.H3)("view",G),radioValue:K.queryIntervalType,onForceRender:this.handleForceRender,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow}))))}}we.defaultProps={prefixCls:"plan-list-page"};var Qe=(0,v.$j)(Ve)((0,M.Z)()(we))},50997:function(le,z,e){"use strict";e.d(z,{Z:function(){return Ce}});var X=e(81211),O=e(57663),C=e(71577),f=e(88986),w=e(12924),i=e.n(w),s=e(91768),v=e(18329),M=e(51975),m="WORKFLOW_STATUS_CHOOSE",W="WORKFLOW_STATUS_ORIGINAL",y="WORKFLOW_STATUS_CUSTOM",j="WORKFLOW_STATUS_CUSTOM_CONFIRM",Q="ACTION_TYPE_ORIGINAL",B="ACTION_TYPE _CUSTOM",N="CUSTOM_QUERY_FLUNK",A="CUSTOM_QUERY_MISS",c={footer:null,workflowStatus:m,actionType:Q,refOriginal:null,refCustom:null,customSelectedRows:[],customDateRange:{startTime:"",endTime:""},changeworkflowStatus:()=>{},changeActionType:()=>{},initRefOriginal:()=>{},initRefCustom:()=>{},changeSelectedRows:()=>{},changeCustomDateRange:()=>{}},o=i().createContext(c),p=e(80991),h=e(62029),d=e(88983),D=e(47933),E=e(43859);class P extends i().Component{constructor(){super(...arguments);this.handleChange=t=>{var a=t.target.value;this.context.changeActionType(a),this.props.formik.setFieldValue("actionType",a)}}render(){var t=this.props,a=t.defaultFieldList,r=t.t;return i().createElement(D.ZP.Group,{value:a,onChange:this.handleChange},i().createElement(D.ZP,{value:Q},r("exam.supplementActionOriginal")),i().createElement(D.ZP,{value:B},r("exam.supplementActionCustom")))}}P.contextType=o;var l=(0,M.l)(o,P),T=(0,s.Z)()((0,E.Z)((0,p.$j)(l))),x={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}};class g extends i().Component{render(){var t=this.props,a=t.values,r=t.t;return i().createElement(p.l0,{className:"cl-form"},i().createElement(p.gN,(0,h.Z)({component:T,displayType:"Custom",name:"actionType",label:r("exam.makeupUsers"),required:!0,defaultFieldList:a.actionType},x)))}}var S=(0,s.Z)()(g);class _ extends i().Component{constructor(t){super(t);this.state={initialParams:{actionType:t.contextData.actionType}}}render(){var t=this.props.prefixCls,a=this.context.initChooseFormik,r=this.state.initialParams;return i().createElement("div",{className:t},i().createElement(p.J9,{ref:a,initialValues:r,render:u=>i().createElement(S,u)}))}}_.contextType=o,_.defaultProps={prefixCls:"cl-supplement-workflow__choose"};var I=(0,s.Z)()(_),b=e(62615),k=e(52670),V=e(63185),H=e(9676);class ae extends i().Component{constructor(){super(...arguments);this.handleChange=t=>{this.props.formik.setFieldValue("person",t)}}render(){var t=this.props.t,a=[{label:t("exam.unqualified"),value:1},{label:t("exam.missTest"),value:2}];return i().createElement(H.Z.Group,{options:a,defaultValue:this.props.defaultFieldList,onChange:this.handleChange})}}var J=(0,s.Z)()((0,E.Z)((0,p.$j)(ae))),oe=e(3407),re=e(6793),te=(0,re.me)(),R=oe.Z[te].exam.validation,F=n=>{var t;return n.length||(t=R.checkSupplementPerson),t},U={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}};class q extends i().Component{render(){var t=this.props,a=t.values,r=t.t;return i().createElement(p.l0,{className:"cl-form"},i().createElement(p.gN,(0,h.Z)({component:J,displayType:"Custom",name:"person",label:r("exam.makeupUsers"),required:!0,defaultFieldList:a.person,validate:F},U)),i().createElement(p.gN,(0,h.Z)({component:b.C0,displayType:"Custom",name:"dateRange",label:r("exam.makeupTime"),required:!0,defaultFieldList:a.dateRange,validate:k.V5},U)))}}var ee=(0,s.Z)()(q),Y={person:[1],dateRange:{startTime:"",endTime:""}};class se extends i().Component{constructor(){super(...arguments);this.initRefFormik=t=>{this.context.initRefOriginal(t)}}render(){var t=this.props.cellType,a=t===void 0?"unqualifiedNum":t,r=(0,f.Z)((0,f.Z)({},Y),{},{person:a==="unqualifiedNum"?[1]:[2]});return i().createElement(p.J9,{ref:this.initRefFormik,initialValues:r,render:u=>i().createElement(ee,u)})}}se.contextType=o;var ne=(0,s.Z)()(se),pe=e(10237),de=e(37055),he=e(27550),me=e(66456),ge=e(55313),Se=e(22385),_e=e(31097),Oe=e(95664),ye=e(60667),fe=e(80430);class xe extends i().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("exam.thNumber"),dataIndex:"userId",width:30,render:(t,a,r)=>r+1},{title:this.props.t("exam.thUserName"),dataIndex:"name",className:"".concat(this.props.prefixCls,"__namecell"),style:{whiteSpace:"normal"},render:(t,a)=>i().createElement(ye.Z,{dataType:"userName",value:a.user_info.userId||a.user_info.user_id,name:t,type:a.user_info.sourceType||a.user_info.source_type})},{title:this.props.t("exam.thSubordinate"),dataIndex:"departmentName",width:this.props.showScoreColumns?300:500,render:(t,a)=>{var r=this.props.showScoreColumns,u=r?"314px":"480px";return i().createElement(_e.Z,{title:i().createElement(fe.Z,{list:a.user_info.department_info,displayAll:!0})},i().createElement("div",{className:"cl-text-ellipsis",style:{width:u}},i().createElement(fe.Z,{list:a.user_info.department_info,displayAll:!0})))}}],this.columnsWithScore=[{title:this.props.t("exam.thExamTimes"),width:60,dataIndex:"makeUpCount"},{title:this.props.t("exam.thExamScore"),dataIndex:"score"}],this.handleTableChange=t=>{this.props.onTableChange(t)},this.handleSelectChange=(t,a)=>{var r=this.context,u=r.customSelectedRows,L=r.changeSelectedRows,Z=[...u];a?Z.push(t):Z.splice(Z.findIndex($=>$.userId===t.userId),1),L(Z)},this.handleSelectAllChange=(t,a)=>{var r=this.context,u=r.customSelectedRows,L=r.changeSelectedRows,Z=[...u],$=[];if(t)$=[...(0,re.Cj)(Z.concat(a),"userId")];else{var K=a.map(G=>G.userId);Z.forEach(G=>{K.includes(G.userId)&&$.push(G)})}L($)}}render(){var t=this.props,a=t.prefixCls,r=t.list,u=r===void 0?[]:r,L=t.loading,Z=t.paginationParams,$=Z===void 0?{}:Z,K=t.showScoreColumns,G=this.context.customSelectedRows,ie={selectedRowKeys:G.map(ce=>ce.userId),onSelect:this.handleSelectChange,onSelectAll:this.handleSelectAllChange};return i().createElement("section",{className:a},i().createElement(ge.Z,{bordered:!0,size:"middle",columns:K?this.columns.concat(this.columnsWithScore):this.columns,rowKey:"userId",rowSelection:ie,dataSource:u,pagination:!1,loading:L}),i().createElement(Oe.Z,{showRenderRefresh:!1,totalNum:$.total,totalPage:$.totalPage,current:$.current,defaultPageSize:$.pageSize,onChange:this.handleTableChange}))}}xe.defaultProps={prefixCls:"cl-supplement-workflow__customtable__content__table"},xe.contextType=o;var Ae=(0,M.l)(o,xe),Ue=(0,s.Z)()(Ae),be={getTableList:de.ZP.ExaminationPlanList.getPlanExamInfoByPlanId};class De extends i().Component{constructor(t){super(t);this.initTableList=()=>{this.setState({tableLoading:!0}),pe.WY.get({url:be.getTableList(),params:this.state.params}).then(a=>{var r=a.data.data.pageInfo;setTimeout(()=>{this.setState({tableLoading:!1,tableList:r.list,tableTotal:r.total,tablePageTotal:r.pages})},300)})},this.handleQueryRowRadiosChange=a=>{this.resetPagination().then(()=>{this.setState(r=>({params:(0,f.Z)((0,f.Z)({},r.params),{},{type:a})}),()=>{this.initTableList()})})},this.handleQueryRowSearch=a=>{this.resetPagination().then(()=>{this.setState(r=>({params:(0,f.Z)((0,f.Z)({},r.params),{},{keyword:a})}),()=>{this.initTableList()})})},this.handleChangePagination=a=>{this.setState(r=>({params:(0,f.Z)((0,f.Z)({},r.params),{},{pageNumber:a})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(a=>{this.setState(r=>({params:(0,f.Z)((0,f.Z)({},r.params),{},{pageNumber:1,pageSize:5})}),()=>{a()})}),this.state={params:{planId:this.props.actionId,keyword:"",type:1,pageNumber:1,pageSize:5},radioList:[{name:this.props.t("exam.failed"),value:1},{name:this.props.t("exam.absent"),value:2}],tableLoading:!0,tableList:[],tableTotal:0,tablePageTotal:0}}componentDidMount(){this.initTableList()}render(){var t=this.props.prefixCls,a=this.state,r=a.radioList,u=a.tableTotal,L=a.tablePageTotal,Z=a.tableList,$=a.tableLoading,K=a.params,G={total:u,totalPage:L,current:K.pageNumber,pageSize:K.pageSize};return i().createElement("div",{className:t},i().createElement(he.Z,{showCheckbox:!1,showBtn:!1,radioList:r,defaultRadioValue:0,searchStylesProps:{width:238},onRadiosChange:this.handleQueryRowRadiosChange,onSearch:this.handleQueryRowSearch}),i().createElement("div",{className:"".concat(t,"__content")},i().createElement(Ue,{showScoreColumns:K.type===1,loading:$,paginationParams:G,list:Z,onTableChange:this.handleChangePagination})))}}De.contextType=o,De.defaultProps={prefixCls:"cl-supplement-workflow__customtable"};var Be=(0,s.Z)()(De),Pe=e(84874);class Te extends i().Component{constructor(){var t;super(...arguments);t=this,this.handleChange=a=>{this.props.formik.setFieldValue("person",a)},this.renderFlunkPerson=()=>{var a=this.props.defaultFieldList.filter(r=>r.type===1);return this.renderPersonWrapper(a)},this.renderMissPerson=()=>{var a=this.props.defaultFieldList.filter(r=>r.type===2);return this.renderPersonWrapper(a,"miss")},this.renderPersonWrapper=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flunk";if(!a.length)return null;var u=t.props,L=u.prefixCls,Z=u.t,$="".concat(L,"__person");return i().createElement("section",{className:$},i().createElement("header",{className:"".concat($,"__header")},Z(r==="flunk"?"exam.unqualified":"exam.missTest")),t.renderPersonList(a))},this.renderPersonList=a=>{var r=this.props.prefixCls,u="".concat(r,"__gallery cl-clearfix");return i().createElement("div",{className:u},a.map(L=>this.renderGalleryItem(L)))},this.handleDeleteItem=a=>{var r=this.props,u=r.formik,L=r.defaultFieldList,Z=[...L],$=Z.findIndex(K=>K.userId===a);Z.splice($,1),this.context.changeSelectedRows(Z),u.setFieldValue("person",Z)},this.renderGalleryItem=a=>{var r=this.props.prefixCls,u="".concat(r,"__gallery__item"),L=a.user_info;return i().createElement("span",{className:u,key:a.userId},i().createElement(ye.Z,{dataType:"userName",value:L.userId,name:L.name,type:L.sourceType}),i().createElement("span",{onClick:()=>this.handleDeleteItem(a.userId)},i().createElement(Pe.Z,{iconClass:"icon-guanbi",size:"12px"})))}}render(){var t=this.props.prefixCls;return i().createElement("div",{className:t},this.renderFlunkPerson(),this.renderMissPerson())}}Te.contextType=o,Te.defaultProps={prefixCls:"cl-supplement-workflow__customform"};var Ne=(0,M.l)(o,Te),We=(0,s.Z)()((0,E.Z)((0,p.$j)(Ne))),Ke=(0,re.me)(),Le=oe.Z[Ke].exam.validation,$e=n=>{var t;return n.length||(t=Le.checkSupplementPerson),t};class Fe extends i().Component{render(){var t=this.props,a=t.values,r=t.onAfterChangeDate,u=t.t;return i().createElement(p.l0,{className:"cl-form"},i().createElement(p.gN,{component:We,displayType:"Custom",name:"person",label:u("exam.makeupUsers"),required:!0,defaultFieldList:a.person,validate:$e}),i().createElement(p.gN,{component:b.C0,displayType:"Custom",name:"dateRange",label:u("exam.makeupTime"),required:!0,defaultFieldList:a.dateRange,validate:k.V5,onAfterChange:r}))}}var je=(0,s.Z)()(Fe),Ie={person:[],dateRange:{startTime:"",endTime:""}};class Me extends i().Component{constructor(){super(...arguments);this.initRefFormik=t=>{this.context.initRefCustom(t)},this.handleChangeDateRange=t=>{var a=t.startTime,r=t.endTime;this.context.changeCustomDateRange({startTime:a,endTime:r})}}render(){var t=this.context,a=t.customSelectedRows,r=t.customDateRange,u=(0,f.Z)((0,f.Z)({},Ie),{},{person:a,dateRange:r});return i().createElement(p.J9,{ref:this.initRefFormik,initialValues:u,render:L=>i().createElement(je,(0,h.Z)({},L,{onAfterChangeDate:this.handleChangeDateRange}))})}}Me.contextType=o;var ke=(0,s.Z)()(Me);class Ze extends i().Component{constructor(){super(...arguments);this.state={contextData:(0,f.Z)({},c)},this.initRefOriginal=t=>{this.setState(a=>({contextData:(0,f.Z)((0,f.Z)({},a.contextData),{},{refOriginal:t})}))},this.initRefCustom=t=>{this.setState(a=>({contextData:(0,f.Z)((0,f.Z)({},a.contextData),{},{refCustom:t})}))},this.handleChangeworkflowStatus=t=>{this.setState(a=>({contextData:(0,f.Z)((0,f.Z)({},a.contextData),{},{workflowStatus:t})}))},this.handleChangeActionType=t=>{this.setState(a=>({contextData:(0,f.Z)((0,f.Z)({},a.contextData),{},{actionType:t})}))},this.handleChangeSelectedRows=t=>{this.setState(a=>({contextData:(0,f.Z)((0,f.Z)({},a.contextData),{},{customSelectedRows:t})}))},this.handleChangeCustomDateRange=t=>{this.setState(a=>({contextData:(0,f.Z)((0,f.Z)({},a.contextData),{},{customDateRange:t})}))},this.handleOk=()=>{var t=this.state.contextData,a=t.workflowStatus,r=t.actionType;a===m?this.handleChangeworkflowStatus(r===Q?W:y):a===W?this.handleValidateOriginal():this.handleValidateCustom()},this.handleValidateOriginal=()=>{var t=this.state.contextData.refOriginal;t.submitForm(),t.runValidations().then(a=>{if(!Object.keys(a).length){var r=t.state.values,u=r.dateRange,L=r.person,Z={id:this.props.actionId,dateRange:u,type:L.length===2?3:L[0],makeupUserIds:""};this.props.onCreate(Z)}})},this.handleValidateCustom=()=>{var t=this.state.contextData.refCustom;t.submitForm(),t.runValidations().then(a=>{if(!Object.keys(a).length){var r=t.state.values,u=r.dateRange,L=r.person,Z={id:this.props.actionId,dateRange:u,type:4,makeupUserIds:L.map($=>$.userId).join(",")};this.props.onCreate(Z)}})},this.renderFooter=()=>{var t=this.state.contextData,a=t.workflowStatus,r=null;switch(a){case m:case W:case j:r=this.renderCombinatorialFooter();break;case y:r=this.renderDismissedFooter();break;default:break}return r},this.handleCancel=()=>{var t=this.state.contextData.workflowStatus;t===m?this.props.onCancel():t===W||t===y?(this.handleChangeworkflowStatus(m),this.handleChangeSelectedRows([])):t===j&&this.handleChangeworkflowStatus(y)},this.renderCombinatorialFooter=()=>{var t=this.props.t,a=this.state.contextData,r=a.workflowStatus,u=a.customSelectedRows,L=r===j?"(".concat(u.length,")\u4EBA"):null;return i().createElement(i().Fragment,null,i().createElement(C.Z,{key:"dismiss",onClick:this.handleCancel},t("common.cancel")),i().createElement(C.Z,{key:"confirm",type:"primary",onClick:this.handleOk},t(r===m?"common.nextStep":"common.ok"),L))},this.renderDismissedFooter=()=>{var t=this.props.t;return i().createElement(i().Fragment,null,i().createElement(C.Z,{key:"dismiss",onClick:this.handleCancel},t("common.cancel")),i().createElement(C.Z,{key:"confirm",type:"primary",onClick:()=>this.handleChangeworkflowStatus(j)},t("common.nextStep")))},this.renderTitle=()=>{var t=this.props.t,a=this.state.contextData.workflowStatus,r="";return a===y?r=t("exam.supplementCustomizer"):r=t("exam.supplement"),i().createElement(i().Fragment,null,r)}}componentDidUpdate(t){t.visible!==this.props.visible&&this.props.visible&&this.setState({contextData:(0,f.Z)((0,f.Z)({},c),{},{changeworkflowStatus:this.handleChangeworkflowStatus,changeActionType:this.handleChangeActionType,initRefOriginal:this.initRefOriginal,initRefCustom:this.initRefCustom,changeSelectedRows:this.handleChangeSelectedRows,changeCustomDateRange:this.handleChangeCustomDateRange})})}render(){var t=this.props,a=t.visible,r=t.isLoading,u=(0,X.Z)(t,["visible","isLoading"]),L=this.state.contextData,Z=L.workflowStatus;return r?null:i().createElement(v.ZP,{visible:a,title:this.renderTitle(),footer:this.renderFooter(),onCancel:this.handleCancel},i().createElement(o.Provider,{value:L},Z===m&&i().createElement(Ve,null),Z===W&&i().createElement(Re,u),Z===y&&i().createElement(we,u),Z===j&&i().createElement(Qe,u)))}}var Ve=(0,M.l)(o,I),Re=(0,M.l)(o,ne),we=(0,M.l)(o,Be),Qe=(0,M.l)(o,ke),Ce=(0,s.Z)()(Ze)},18681:function(le,z,e){"use strict";e.d(z,{T:function(){return C},e:function(){return f}});var X=e(37055),O=e(10237);function C(w){var i=w.examId;return O.WY.get({url:X.ZP.ExaminationPlanList.getExaminationInfo({examId:i}),params:{examId:i}})}function f(w){var i=w.examId,s=w.publishStatus;return O.WY.post({url:X.ZP.ExaminationPlanList.changePublish(),params:{examId:i,publishStatus:s}})}},31945:function(le,z,e){"use strict";e.d(z,{Z:function(){return re}});var X=e(88983),O=e(47933),C=e(20228),f=e(11382),w=e(62029),i=e(30887),s=e(99210),v=e(59250),M=e(13013),m=e(57663),W=e(71577),y=e(63185),j=e(9676),Q=e(71194),B=e(57016),N=e(88986),A=e(34792),c=e(48086),o=e(43358),p=e(34041),h=e(12924),d=e.n(h),D=e(28216),E=e(91768),P=e(57254),l=e(18329);class T extends d().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var R=this.props,F=R.visible,U=R.courseList,q=R.t;return d().createElement(l.ZP,{visible:F,title:q("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},d().createElement("div",{className:"referenceWithOtherCourses"},d().createElement("div",{className:"referenceWithOtherCourses__tip"},q("course.deleteCourseTip")),U.map((ee,Y)=>d().createElement("div",{className:"referenceWithOtherCourses__item",key:Y},U.length>1?"".concat(Y+1,"\u3001"):null," ",ee))))}}var x=(0,E.Z)()(T),g=e(10237),S=e(63848),_=e(58546),I=e(30389),b=e(54792),k=e(86726),V=e(37055),H=p.Z.Option,ae={setClassify:V.ZP.CourseManageList.setClassify,setScore:V.ZP.CourseManageList.setScore,setBatchEmployee:V.ZP.CourseManageList.setBatchEmployee,deleteCourse:V.ZP.CourseManageList.deleteCourse,exportCourseView:V.ZP.CourseManageList.exportCourseView,syncCourse:V.ZP.CourseManageList.syncCourse},J=te=>({qyShield:te.user.qyShield});class oe extends d().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=R=>{this.props.onClassifyChange(R)},this.handleChangeType=R=>{this.props.onTypeChange(R)},this.handleChangeCourseType=R=>{this.props.onCourseTypeChange(R)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=R=>{var F=R.node,U=this.props,q=U.selectedCourseIds,ee=U.selectedProjectIds,Y=U.onForceRender,se=U.t,ne=F.id;ne&&g.qg.post({url:ae.setClassify(),data:{course_ids:q.join(","),project_ids:ee.join(","),classify_id:ne}}).then(()=>{c.default.success(se("course.setCourseClassifySuccess")),Y()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(R=>({scoreProps:(0,N.Z)((0,N.Z)({},R.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(R=>({scoreProps:(0,N.Z)((0,N.Z)({},R.scoreProps),{},{visible:!1})}))},this.handleScoreOk=R=>{var F=R.value;if(F===0){this.handleScoreCancel();return}var U=this.props,q=U.selectedCourseIds,ee=U.selectedProjectIds,Y=U.onForceRender,se=U.t;g.qg.post({url:ae.setScore(),data:{course_ids:q.join(","),project_ids:ee.join(","),credit:F}}).then(()=>{c.default.success(se("course.setCourseScoreSuccess")),Y()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(R=>({employeeProps:(0,N.Z)((0,N.Z)({},R.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=R=>{var F=this.props,U=F.selectedCourseIds,q=F.selectedProjectIds,ee=F.onForceRender,Y=F.t,se=R.isAll,ne=R.departmentIds,pe=R.groupIds,de=R.postIds,he=R.userIds,me=R.qy_we_chat_vo;g.WY.post({url:ae.setBatchEmployee(),data:{course_ids:U.join(","),project_ids:q.join(","),department_ids:ne,group_ids:pe,is_all:se,post_ids:de,user_ids:he,qy_we_chat_vo:me}}).then(()=>{c.default.success(Y("personal.batchSetRangeSuccess")),ee()}),this.handleEmployeeCancel()},this.showReferenceCourseList=R=>{this.setState(F=>({showReferenceCourseListProps:(0,N.Z)((0,N.Z)({},F.showReferenceCourseListProps),{},{visible:!F.showReferenceCourseListProps.visible,courseList:R||[]})}))},this.actionDelete=()=>{var R=this.props,F=R.selectedCourseIds,U=R.selectedProjectIds,q=R.list,ee=R.onForceRender,Y=R.t,se=0,ne=0,pe=[];if(q.forEach(de=>{F.includes(de.course_id)&&(de.reference_plan_count>0&&(ne+=1),de.reference_plan_count>0&&pe.push(de.title),de.can_delete==="true"&&(se+=1))}),ne>0)this.showReferenceCourseList(pe);else if(se!==F.length)c.default.warning(Y("personal.deletePlatformCourseTip"));else{if(U.length>0){c.default.warning(Y("personal.deleteProjectCourseTip"));return}B.Z.confirm({title:Y("common.tip"),content:Y("common.confirmDeleteTitle"),onOk(){g.qg.post({url:ae.deleteCourse(),data:{enterpriseId:V.ZP.enterpriseId,ids:F.join(","),project_ids:U.join(",")}}).then(de=>{var he=de.data,me=he.code,ge=he.msg;c.default["".concat(me===0?"success":"warning")](ge),me===0&&ee()})}})}},this.actionSyncSetting=()=>{this.setState(R=>({asyncProps:(0,N.Z)((0,N.Z)({},R.asyncProps),{},{visible:!0})}))},this.onAsyncChange=R=>{this.setState(F=>({asyncProps:(0,N.Z)((0,N.Z)({},F.asyncProps),{},{value:R.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var R=this.props,F=R.selectedCourseIds,U=R.selectedProjectIds,q=R.onForceRender,ee=R.t,Y=this.state.asyncProps;g.qg.post({url:ae.syncCourse(),data:{course_ids:F.join(","),project_ids:U.join(","),syncProgress:Y.value}}).then(se=>{var ne=se.data,pe=ne.code,de=ne.msg;pe===0?(c.default.success(ee("setting.setUpSucceed")),q()):c.default.warning(de)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var R=this.props,F=R.selectedCourseIds,U=R.selectedProjectIds,q=R.onForceRender,ee=R.t;if(F.concat(U).length>20){c.default.warning(ee("courseManage.exportMoreTip"));return}var Y=ae.exportCourseView(),se={course_Ids:F.join(","),project_Ids:U.join(",")};g.WY.get({url:Y,params:se}).then(ne=>{ne.data.code===200&&c.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),q(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var R=V.ZP.downLoadCenter.getDownLoadingCount();g.WY.get({url:R,params:{}}).then(F=>{sessionStorage.setItem("downloadingCount",F.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:F.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=R=>{this.props.onCheckboxChange(R.target.checked)},this.handleSharingQueryRowCheckboxChange=R=>{this.props.onSharingCheckboxChange(R.target.checked)},this.renderCondition=()=>{var R=this.props,F=R.prefixCls,U=R.params,q=R.qyShield,ee=R.t,Y=U.classify_id?U.classify_id.split(","):[];return d().createElement("div",{className:"".concat(F,"__condition")},this.props.extraDom&&this.props.extraDom(),d().createElement(S.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:Y,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),d().createElement(p.Z,{value:U.type,className:"cl-search-normal-width",onChange:this.handleChangeType},d().createElement(H,{value:""},this.props.t("courseManage.allOrigin")),d().createElement(H,{value:"original"},this.props.t("courseManage.originalCourse")),d().createElement(H,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),d().createElement(H,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:d().createElement(p.Z,{value:U.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},d().createElement(H,{value:"all"},this.props.t("courseManage.allType")),d().createElement(H,{value:"course"},this.props.t("common.courseLabel")),d().createElement(H,{value:"microCourse"},this.props.t("common.microCourse")),d().createElement(H,{value:"project"},this.props.t("leftMenuLists.studyProject"))),d().createElement(j.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},ee("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&q==="false"?d().createElement(j.Z,{onChange:this.handleSharingQueryRowCheckboxChange},ee("common.sharing")):null)},this.renderActions=()=>{var R=this.props,F=R.prefixCls,U=R.selectedCourseIds,q=R.selectedProjectIds,ee=R.showNum,Y=ee===void 0?1:ee,se=this.props.allowActions,ne=(0,k.H3)("delete",se),pe=(0,k.H3)("adjustment_classification",se),de=(0,k.H3)("set_visible",se),he=(0,k.H3)("export",se),me=(0,k.H3)("set_score",se),ge=(0,k.H3)("progressSync",se),Se=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:pe},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:he},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:me},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:de},{name:this.props.t("common.delete"),type:"actionDelete",isShow:ne},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:ge}],_e=Se.filter(fe=>fe.isShow),Oe=[],ye=[];if(_e.length)Y?(Oe=[..._e.slice(0,Y)],ye=[..._e.slice(Y)]):ye=[..._e];else return null;return d().createElement("div",{className:"".concat(F,"__action")},Oe.map(fe=>d().createElement(W.Z,{style:{marginRight:"8px"},key:fe.type,disabled:!(U.length+q.length),onClick:this[fe.type]},fe.name)),ye.length?d().createElement(M.Z,{disabled:!(U.length+q.length),overlay:this.renderMoreButton({buttons:ye})},d().createElement(W.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",d().createElement(P.Z,null))):"")}}renderMoreButton(R){var F=R.buttons,U=this.props,q=U.selectedCourseIds,ee=U.selectedProjectIds;return d().createElement(s.Z,{onClick:Y=>{var se=Y.key;this[se]()}},F.map(Y=>Y.isShow?d().createElement(s.Z.Item,{key:Y.type,disabled:!(q.length+ee.length)},d().createElement("span",{className:"cl-pointer"},Y.name)):null))}render(){var R=this.props,F=R.prefixCls,U=R.t,q=R.showRenderCondition,ee=q===void 0?!0:q,Y=R.showRenderActions,se=Y===void 0?!0:Y,ne=this.state,pe=ne.classifyProps,de=ne.scoreProps,he=ne.employeeProps,me=ne.showReferenceCourseListProps,ge=ne.asyncProps;return d().createElement("div",{className:F},ee&&this.renderCondition(),se&&this.renderActions(),d().createElement(_.Z,(0,w.Z)({},pe,{title:U("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),d().createElement(b.Z,(0,w.Z)({},de,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),he.visible&&d().createElement(I.Z,(0,w.Z)({},he,{title:U("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:U("component.chooseVisibleScope")},isLoading:!he.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),ge.visible&&d().createElement(l.ZP,{wrapClassName:"cl-async-selector-modal",visible:ge.visible,title:U("common.scheduleSyncSetting"),okText:U("common.ok"),cancelText:U("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},ge.visible?d().createElement("div",{className:"".concat(F,"__async")},d().createElement("p",null," ",U("common.scheduleSyncSettingTip")),d().createElement(O.ZP.Group,{onChange:this.onAsyncChange,value:ge.value},d().createElement(O.ZP,{value:0},U("common.outSync")),d().createElement(O.ZP,{value:1},U("common.synchronization")))):d().createElement(f.Z,{size:"large"})),d().createElement(x,(0,w.Z)({},me,{showReferenceCourseList:this.showReferenceCourseList})))}}oe.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var re=(0,E.Z)()((0,D.$j)(J)(oe))}}]);
