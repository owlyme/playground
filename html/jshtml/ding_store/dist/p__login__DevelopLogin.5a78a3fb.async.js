(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3890],{93739:function(v,r,t){"use strict";t.r(r);var c=t(57663),l=t(71577),d=t(47673),o=t(4107),E=t(20228),i=t(11382),I=t(34792),P=t(48086),M=t(57361),C=t(9754),u=t.n(C),h=t(12924),a=t.n(h),f=t(28216),L=t(91768),m=t(76651),p=t(91302),A=t(83940),T=t(38642);class g extends h.Component{constructor(){var s;super(...arguments);s=this,this.state={account:"",password:"",loading:!0},this.handleAccountChange=e=>{this.setState({account:e.target.value})},this.handleSetPassword=e=>{this.setState({password:e.target.value})},this.gotoProject=e=>{e===p.mF&&m.m8.push("/index-auth-default"),e===p.is&&m.m8.push("/index-auth-companyTab")},this.handleLogin=()=>{var e=this.props.dispatch;e({type:"user/setLoginMode",payload:{loginMode:"DEVELOPMENT"}}),e({type:"user/fetchUserInfo",loginType:"DEVELOPMENT",loginData:{username:this.state.account,password:(0,A.v)(this.state.password),encrypt:1}}).then(_=>{this.gotoProject(_)}).catch(()=>{})},this.tokenLogin=(0,M.Z)(u().mark(function e(){var _,O;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(window.location.href.match(/accessToken=(\w*)/)==null){n.next=15;break}return s.setState({loading:!0}),n.prev=2,n.next=5,s.tokenInfo();case 5:_=s.props.user.enterpriseId,O=(0,T.lz)(_,"student"),window.location.replace("".concat(O,"/home")),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),P.default.error(s.props.t("login.loginError"));case 13:n.next=16;break;case 15:s.setState({loading:!1});case 16:case"end":return n.stop()}},e,null,[[2,10]])})),this.tokenInfo=()=>{var e=window.location.href.match(/accessToken=(\w*)/)&&window.location.href.match(/accessToken=(\w*)/)[1];return this.props.dispatch({type:"user/fetchUserInfo",loginType:"TOKEN_LOGIN",payload:{access_token:e}})},this.handleReturnHome=()=>{this.props.history.push("/")}}componentDidMount(){this.tokenLogin()}render(){var s=this.props,e=s.prefixCls,_=s.t;return this.state.loading?a().createElement("div",{className:"".concat(e,"__loading")},a().createElement(i.Z,{size:"large"})):a().createElement("div",{className:e},a().createElement("div",{className:"".concat(e,"__login-wrapper")},a().createElement("div",{className:"".concat(e,"__login-wrapper__left")},a().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1790243481017520128.png"),alt:""})),a().createElement("div",{className:"".concat(e,"__login-wrapper__right")},a().createElement("div",{className:"".concat(e,"__login-wrapper__right__form")},a().createElement("div",{className:"".concat(e,"__login-wrapper__right__form__item")},a().createElement(o.Z,{placeholder:_("login.inputAccount"),value:this.state.account,onChange:this.handleAccountChange})),a().createElement("div",{className:"".concat(e,"__login-wrapper__right__form__item")},a().createElement(o.Z.Password,{placeholder:_("login.inputPassword"),value:this.state.password,onChange:this.handleSetPassword})),a().createElement("div",{className:"".concat(e,"__login-wrapper__right__form__item")},a().createElement(l.Z,{onClick:this.handleLogin,type:"primary",className:"".concat(e,"__login-wrapper__right__form__item__button")},_("login.loginType")))))),a().createElement("div",{className:"".concat(e,"__footer")},_("registerLogin.allRightReserved")))}}g.defaultProps={prefixCls:"develop-login-container"},r.default=(0,f.$j)(D=>({user:D.user}))((0,L.Z)()(g))},83940:function(v,r,t){"use strict";t.d(r,{v:function(){return l}});var c=t(75216);function l(d){var o=new c.Z,E="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCwp-dZYUGEJ8ixBevMmANELzri9jUet_m5AR8VkrktzuZZ0B0X-F-DYiYWmSn0_2MSWRxtiVU7d2ZzPYodBelubnH3YgxcOKJ8ILaLlCkWZd30L68MAO3JG65NWIgCDq9d0BFiOY6XzRFav2E5-u33hVk1jWspTlgL9ylaEB5ynQIDAQAB";o.setPublicKey(E);var i=o.encrypt(d);return i}}}]);
