(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3592],{4408:function(W,y,r){"use strict";var h=r(12924),e=r.n(h),_=r(28216),C=r(17780),v=r(38642),P=s=>({userInfo:s.user}),a=s=>{var i=s.title;return(0,C.xX)()&&setTimeout(()=>{document.title=i},0),(0,h.useEffect)(()=>{if(i&&document.title!==i&&setTimeout(()=>{document.title=i},0),(0,v.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var f=document.querySelector(".zoom-report");f&&(f.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[i]),e().createElement(e().Fragment,null)};a.defautProps={title:""},y.Z=(0,_.$j)(P)(a)},1164:function(W,y,r){"use strict";var h=r(12924),e=r.n(h),_=r(76651),C=r(38642),v=r(91302),P=a=>{var s=navigator.userAgent.toLocaleLowerCase(),i=localStorage.getItem("enterpriseId"),f=(0,C.lz)(i,a.projectType),I=localStorage.getItem("dingPersonnel"),g=v.bl.includes(I),d=a.target;function E(D){if(d==="self"&&(D.preventDefault(),_.m8.push(a.to)),g){if(a.projectType==="student"){window.location.href="".concat(f,"/").concat(a.to);return}_.m8.push(a.to);return}if(dd.version){D.preventDefault();var m="";a.to.includes("?")?m="".concat(f).concat(a.to,"&ddtab=true"):m="".concat(f).concat(a.to,"?ddtab=true"),dd.biz.util.openLink({url:m})}else s.indexOf("lark")!==-1&&(window.location.href="".concat(f).concat(a.to))}return e().createElement("a",{rel:"noreferrer",href:"".concat(a.projectType==="student"?"".concat(f).concat(a.to):"#".concat(a.to)),className:"".concat(a.wrapCls," cl-pointer"),target:s.indexOf("lark")!==-1||g?"_self":a.target||"_blank",onClick:E},a.children)};P.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},P.targetTo=a=>{var s=a.path,i=a.from,f=a.isExternalLink,I=f===void 0?!1:f,g=a.isAsync,d=g===void 0?!1:g,E=a.openName,D=E===void 0?"_blank":E,m=a.projectType,T=m===void 0?"manage":m,N=a.ddTab,M=N===void 0?!0:N,u,K=localStorage.getItem("dingPersonnel"),Z=v.bl.includes(K),j=navigator.userAgent.toLocaleLowerCase(),b=localStorage.getItem("enterpriseId"),L=(0,C.lz)(b,T),Y=localStorage.getItem("appType"),S=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var x="";if(u=I?"":L,Z&&!I){if(T==="student"){window.location.href="".concat(L).concat(s);return}_.m8.push(s);return}s.includes("?")?x="".concat(u).concat(s,"&ddtab=").concat(M):x="".concat(u).concat(s,"?ddtab=").concat(M),dd.biz.util.openLink({url:x})}else if(j.indexOf("lark")!==-1)u=I?"":L,window.location.href="".concat(u).concat(s);else if(Y==="wx_app"&&S&&I&&i==="imgText")u=I?"":T==="student"?"".concat(L):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(u).concat(s)});else if(u=I?"":T==="student"?"".concat(L):"#",d){var A=window.open("","_blank");setTimeout(()=>{A.location="".concat(u).concat(s)},100)}else window.open("".concat(u).concat(s),D)},y.Z=P},159:function(W,y,r){"use strict";r.r(y),r.d(y,{default:function(){return k}});var h=r(12924),e=r.n(h),_=r(76651),C=r(57068),v=r(91768),P=r(28216),a=r(57663),s=r(71577),i=r(96433),f=r(33304),I=r(57361),g=r(9754),d=r.n(g),E=r(78138),D=r.n(E),m=r(1164),T=r(70517),N=r(85725);class M extends e().PureComponent{constructor(){super(...arguments);this.learning=(0,I.Z)(d().mark(function o(){var t;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,N.Zv)(_.m8.location.query.courseId,{is_preview:"false",is_person_purchase:"true"});case 2:t=n.sent,m.Z.targetTo({path:t.data.learning_url,isExternalLink:!0});case 4:case"end":return n.stop()}},o)}))}render(){var o=this.props,t=o.prefixCls,c=o.courseInfo,n=o.t;return e().createElement("div",{className:t},e().createElement("div",{className:"".concat(t,"__left")},e().createElement("img",{src:c.cover})),e().createElement("div",{className:"".concat(t,"__right")},e().createElement("div",{className:"".concat(t,"__right__title")},c.source!=="ZHONG_JIAN"?"[".concat(n("course.preview"),"]").concat(c.title):c.title),e().createElement("div",{className:"".concat(t,"__right__body")},e().createElement("div",{className:"".concat(t,"__right__body__item")},n("course.validity"),"\uFF1A",e().createElement("span",{className:"".concat(t,"__right__body__item__content")},c.expireDate?D()(c.expireDate).format("YYYY-MM-DD"):n("course.unlimited"))),e().createElement("div",{className:"".concat(t,"__right__body__item")},n("course.viewers"),":",e().createElement("span",{className:"".concat(t,"__right__body__item__content")},c.scanCount,n("common.userUnit"))),e().createElement("div",{className:"".concat(t,"__right__body__item")},e().createElement("span",null,n("course.rate"),"\uFF1A"),e().createElement(f.Z,{className:"".concat(t,"__right__body__item__rate"),disabled:!0,value:c.score===0?5:c.score,style:{fontSize:16,color:"#ffc186"}}),e().createElement("span",{className:"".concat(t,"__right__body__item__content")},c.score===0?5:c.score,n("course.points")))),e().createElement("div",{className:"".concat(t,"__right__footer")},e().createElement("div",{className:"".concat(t,"__right__footer__item")},e().createElement("span",{className:"".concat(t,"__right__footer__item__label")},n("course.label"),":"),e().createElement("span",{className:"".concat(t,"__right__footer__item__content")},c.tags)),e().createElement("div",{className:"".concat(t,"__right__footer__item")},e().createElement("span",{className:"".concat(t,"__right__footer__item__label")},n("course.knowledgePoint"),":"),e().createElement("span",{className:"".concat(t,"__right__footer__item__content")},c.knowledgePoint)),e().createElement("div",{className:"".concat(t,"__right__footer__item")},e().createElement("span",{className:"".concat(t,"__right__footer__item__label")},n("course.intro"),":"),e().createElement("span",{className:"".concat(t,"__right__footer__item__content")},c.summary))),(0,T.ZG)(c.source)&&e().createElement(s.Z,{type:"primary",className:"".concat(t,"__right__button"),onClick:this.learning},n("course.startStudy"))))}}M.defaultProps={prefixCls:"purchased-course-top"};var u=(0,v.Z)()(M),K=r(18106),Z=r(88108),j=r(71153),b=r(60331),L=r(88986),Y=r(34792),S=r(48086),x=r(38642),A=r(84874),U=r(37055),J=r(6793);class z extends e().Component{constructor(){super(...arguments);this.handlePlayCourse=o=>{var t=this.props,c=t.courseId,n=t.expireDate,p=t.courseInfo,O=new Date().getTime();if(n&&n<=O){S.default.warn("\u8BFE\u7A0B\u5DF2\u5230\u671F!");return}if(!(0,T.ZG)(p.source)){if(o.status===1||o.status===2){S.default.warn("\u6B63\u5728\u8F6C\u7801\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5019\uFF01");return}var l={courseId:c,resourceId:o.id,source:"purchased"};p.source==="ZHONG_JIAN"&&(l=(0,L.Z)((0,L.Z)({},l),{},{CSCECSource:p.source,videoId:o.videoId})),(0,x.eJ)({url:"/course/watch?".concat(C.stringify(l))})}}}render(){var o=this.props,t=o.prefixCls,c=o.courseWareList,n=o.isDownload,p=o.t,O=(0,L.Z)({},U.e1);return e().createElement("div",{className:t},c.map((l,$)=>e().createElement("div",{className:"".concat(t,"__item"),key:l.id},e().createElement("div",{className:"".concat(t,"__item__info")},e().createElement("div",{className:"".concat(t,"__item__icon")},e().createElement(A.Z,{iconClass:l.contentType&&l.contentType.indexOf("audio")>-1?O.mp3:O[l.type],size:"20px"})),e().createElement("div",{className:"".concat(t,"__item__title-box"),onClick:()=>this.handlePlayCourse(l)},e().createElement("span",{className:"".concat(t,"__item__name")},$+1,"   ",l.name),l.type==="mp4"&&l.status!==1&&l.status!==2?e().createElement("span",{className:"".concat(t,"__item__video-duration")},(0,J.xj)(l.duration)):null),e().createElement("div",{className:"".concat(t,"__item__status")},l.status===1||l.status===2?e().createElement(b.Z,{color:"geekblue"},p("course.transcoding")):e().createElement("div",{className:"".concat(t,"__item__download")},n?e().createElement("a",{href:l.url,className:"".concat(t,"__item__download__icon")},e().createElement(A.Z,{iconClass:"icon-icon_donwloadx1",size:"16px"})):null))))))}}z.defaultProps={prefixCls:"course-ware-list"};var X=(0,v.Z)()(z),G=Z.Z.TabPane;class F extends e().Component{constructor(){super(...arguments);this.state={}}render(){var o=this.props,t=o.prefixCls,c=o.courseId,n=o.courseWareList,p=o.courseIntroduction,O=o.t,l=o.expireDate,$=o.courseInfo;return e().createElement("div",{className:t},e().createElement(Z.Z,{defaultActiveKey:"1",onChange:this.handleTabChange,size:"large"},e().createElement(G,{tab:O("course.courseDirectory"),key:"1"},e().createElement(X,{expireDate:l,courseWareList:n,courseId:c,courseInfo:$})),e().createElement(G,{tab:O("course.courseDescription"),key:"2"},e().createElement("div",{className:"".concat(t,"__introduction"),dangerouslySetInnerHTML:{__html:p}}))))}}F.defaultProps={prefixCls:"purchased-course-bottom"};var Q=(0,v.Z)()(F),B=r(10237),V=r(4408),w={getPlatformCourse:U.ZP.PlatformCourse.getPlatformCourse,getPlatformCourseList:U.ZP.PlatformCourse.getPlatformCourseList,courseEventsCount:U.ZP.PlatformCourse.courseEventsCount};class H extends e().Component{constructor(){super(...arguments);this.state={courseId:"",platformCourseInfo:{},platformCourseWareList:[]},this.getPlatformCourse=o=>{B.WY.get({url:w.getPlatformCourse(),params:{id:o,myCourseStep:!0}}).then(t=>{this.setState({platformCourseInfo:t.data})})},this.getPlatformCourseList=o=>{B.WY.get({url:w.getPlatformCourseList(),params:{id:o,pageNumber:1,pageSize:30}}).then(t=>{this.setState({platformCourseWareList:t.data})})},this.collectCourseEventsCount=o=>{var t=C.parse(this.props.location.search),c=t.courseId,n=w.courseEventsCount({courseId:c}),p={source_id:"",source_type:"normal",event_type:o,order_id:""};B.WY.post({url:n,data:p}).then(()=>{})}}componentDidMount(){var o=C.parse(_.m8.location.search),t=o.courseId;this.setState({courseId:t},()=>{this.getPlatformCourse(t),this.getPlatformCourseList(t),this.collectCourseEventsCount("click")})}render(){var o=this.props,t=o.prefixCls,c=o.t,n=this.state,p=n.platformCourseInfo,O=n.courseId,l=n.platformCourseWareList;return e().createElement("div",{className:t},e().createElement(V.Z,{title:c("documentTitle.selfPurchaseCourse")}),e().createElement("div",{className:"".concat(t,"__course-top")},e().createElement(u,{courseInfo:p,onCollectCourseEventsCount:this.collectCourseEventsCount})),e().createElement("div",{className:"".concat(t,"__course-bottom")},e().createElement("div",{className:"".concat(t,"__course-bottom__left more-width")},e().createElement(Q,{courseWareList:l,expireDate:p.expireDate,courseIntroduction:p.introduction,courseInfo:p,courseId:O}))))}}H.defaultProps={prefixCls:"purchased-container"};var k=(0,P.$j)()((0,v.Z)()(H))},85725:function(W,y,r){"use strict";r.d(y,{Zv:function(){return _},t2:function(){return C},ew:function(){return v}});var h=r(37055),e=r(10237);function _(a,s){var i=h.ZP.PlatformCourse.learningUrl(a);return e.WY.get({url:i,params:s})}function C(a){var s=a.planId,i=h.ZP.EnterpriseCourse.playCountStatistics();e.qg.post({url:i,data:{courseId:s}})}var v=a=>{var s=h.ZP.Common.addDownloadLog(),i={param:a};return e.WY.get({url:s,params:i})},P=a=>{var s=CONFIG.visitors.shouldGoToCourseDetails(),i={setting_type:a};return request.get({url:s,params:i})}},70517:function(W,y,r){"use strict";r.d(y,{ZG:function(){return a},v8:function(){return s},Yv:function(){return i},$v:function(){return f},yW:function(){return I}});var h=r(57361),e=r(9754),_=r.n(e),C=r(91302),v=r(10237),P=r(37055),a=g=>{var d=!1;return C.ch.forEach(E=>{(g||"").indexOf(E)!==-1&&(d=!0)}),d},s=function(){var g=(0,h.Z)(_().mark(function d(){var E;return _().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return E=P.ZP.LibraryList.checkMemberUserBinding(),m.abrupt("return",v.WY.get({url:E,params:{source_type:"lai_hua"}}));case 2:case"end":return m.stop()}},d)}));return function(){return g.apply(this,arguments)}}(),i=function(){var g=(0,h.Z)(_().mark(function d(E){var D,m,T,N;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return D=P.ZP.LibraryList.thirdEditorUrl(),u.next=3,v.WY.get({url:D,params:{source_type:"lai_hua",route_type:E}});case 3:m=u.sent,T=m.data,N=m.success,N==="true"&&window.open(T.url,"_blank");case 7:case"end":return u.stop()}},d)}));return function(E){return g.apply(this,arguments)}}(),f=()=>{localStorage.setItem("openedMemberModal","true")},I=g=>{var d=P.ZP.LibraryList.addTrialMemberBinding();return v.WY.get({url:d,params:{source_type:"lai_hua",route_type:g}})}}}]);
