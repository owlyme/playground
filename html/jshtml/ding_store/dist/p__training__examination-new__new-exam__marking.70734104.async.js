(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8595],{91279:function(J,R,t){"use strict";t.r(R),t.d(R,{default:function(){return Qe}});var g=t(33565),r=t(12924),e=t.n(r),T=t(91768),V=t(3230),K=t(1096),ge=t(58935),Fe=t(94233),fe=t(67869),ze=t(20228),pe=t(11382),Ee=t(57361),qe=t(71194),j=t(57016),d=t(88986),$e=t(18106),H=t(88108),Me=t(9754),F=t.n(Me),ye=t(246),ke=t.n(ye),Ze=t(70018),xe=t(15965),n=t.n(xe),he=t(56932),Ce=t.n(he),z=t(6793),q=t(84874),Le=t(9925),Se=t(6934),$=H.Z.TabPane,Ne=(L,S)=>{var l=L.t,M=(0,r.useContext)(V.Z),f=M.state,u=M.dispatch,p=f.params,C=f.config,N=f.hasChanged,P=f.markingStatus,W=p.exam_id,y=p.status,ee=p.markScene,Ue=C.anonymous_marking,Oe=C.reMark,Ie=(0,r.useState)(""),ae=(0,g.Z)(Ie,2),v=ae[0],te=ae[1],Ge=(0,r.useState)(!0),ne=(0,g.Z)(Ge,2),Ye=ne[0],we=ne[1],Xe=(0,r.useState)({isLoading:!1,hasMore:!1,list:[],pending:1,marked:1}),re=(0,g.Z)(Xe,2),k=re[0],B=re[1],se=k.isLoading,le=k.hasMore,A=k.list,E=k.pending,D=k.marked,be=(0,r.useState)(""),ie=(0,g.Z)(be,2),Q=ie[0],Je=ie[1],Re=(0,r.useState)({page_number:1,page_size:100}),de=(0,g.Z)(Re,2),U=de[0],Te=de[1];(0,r.useImperativeHandle)(S,()=>({updateList:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(s)I(!0);else{if(Oe)return;var i=A.findIndex(c=>c.submit_id===Q);if(A.splice(i,1),E-1!=0){var m=A[i]||A[0];Z(m,O,!1),Ve(m.submit_id)}B(c=>(0,d.Z)((0,d.Z)({},c),{},{pending:c.pending-1,marked:c.marked+1}))}}}));var Ve=a=>{var s='[class*="$$marking_list_item__'.concat(a,'"]'),i=document.querySelector(s);i.scrollIntoView()},Ke=a=>{B(s=>(0,d.Z)((0,d.Z)({},s),{},{isLoading:!0})),Te(s=>(0,d.Z)((0,d.Z)({},s),{},{page_number:a}))},je=a=>{Q!==a.submit_id&&Z(a,O)},Z=function(s,i){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(N&&m){j.Z.confirm({title:l("examination.confirmTab"),onOk:()=>{i(s)},className:n()["error-confirm"]});return}P==="remark"&&u({type:"updateMarkStatus",payload:"markEnd"}),i(s)},O=a=>{Je(a.submit_id),u({type:"saveParams",payload:{task_id:a.task_id,submit_id:a.submit_id,user_id:a.user_id}})},me=a=>{u({type:"saveParams",payload:{submit_id:""}}),te(a)},oe=a=>{we(a)};(0,r.useEffect)(()=>{te(y)},[y]),(0,r.useEffect)(()=>{I(!1)},[U]),(0,r.useEffect)(()=>{E===0&&v==="pending"&&Z("markEnd",me,!1)},[E]),(0,r.useEffect)(()=>{u({type:"updateMarkStatus",payload:v})},[v]),(0,r.useEffect)(()=>{I(!0)},[v,W,y,ee]);var I=function(){var a=(0,Ee.Z)(F().mark(function s(){var i,m,c,G,ue,x,Y,ce,w,ve,Ae,X,h,b=arguments;return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=b.length>0&&b[0]!==void 0?b[0]:!0,!(!W||!y)){o.next=3;break}return o.abrupt("return");case 3:return m=v||y,o.next=6,(0,Ze.rh)((0,d.Z)((0,d.Z)({},U),{},{examId:W,status:m,scene:ee,page_number:i?1:U.page_number}));case 6:if(c=o.sent,G=c.data,ue=G.code,x=G.data,Y=x.user_list,ce=Y.has_next_page,w=Y.list,ve=x.anonymous_marking,Ae=x.mark_end,X=x.pending,ue!=="200000"){o.next=25;break}if(h=i?w:A.concat(w),!(m==="pending"&&h.length===0&&X!==0||m==="markEnd"&&h.length===0)){o.next=21;break}return j.Z.warning({title:l("examination.markingRetry"),className:n()["error-confirm"],onOk:()=>{window.location.reload()}}),o.abrupt("return");case 21:B(He=>(0,d.Z)((0,d.Z)({},He),{},{isLoading:!1,pending:X,marked:Ae,hasMore:ce==="true",list:h})),Z(h[0],O,!1),u({type:"updateMarkStatus",payload:m}),u({type:"initConfig",payload:{anonymous_marking:ve==="true"}});case 25:case"end":return o.stop()}},s)}));return function(){return a.apply(this,arguments)}}();return e().createElement(e().Fragment,null,Ye?e().createElement("div",{className:n()["mark-person"]},A.length>0?e().createElement(e().Fragment,null,e().createElement("div",{className:n().tabs},e().createElement(H.Z,{activeKey:v,onChange:a=>{Z(a,me)},className:"".concat(E===0||D===0?n().single:"")},E>0?e().createElement($,{tab:"".concat(l("examination.unMarkedPaper")," (").concat(E,")"),key:"pending"}):null,D>0?e().createElement($,{tab:"".concat(l("examination.markedPaper")," (").concat(D,")"),key:"markEnd"}):null),e().createElement("span",{className:n().collapse,onClick:()=>{oe(!1)},title:l("common.collapse")},e().createElement(q.Z,{iconClass:"icon-icon_sx1"}))),e().createElement("div",{className:n().list},e().createElement(ke(),{pageStart:1,initialLoad:!1,hasMore:!se&&le,loadMore:Ke,useWindow:!1,loader:se?e().createElement("div",{className:"question-selector-loading"},e().createElement(pe.Z,null)):null},A.map(a=>e().createElement("div",{key:a.submit_id,className:"".concat(Q===a.submit_id?n().active:""," ").concat(n()["list-item"]," $$marking_list_item__").concat(a.submit_id),onClick:()=>je(a)},e().createElement(fe.C,{size:32,src:a.user_info.avatar||Ce()}),e().createElement("div",{className:n().person},e().createElement("div",{className:n()["per-info"]},Ue?e().createElement(e().Fragment,null,e().createElement("span",{className:n().name,title:"".concat(l("examination.anonymous"),"(").concat(a.user_info.name.slice(2),")")},"".concat(l("examination.anonymous"),"(").concat(a.user_info.name.slice(2),")"))):e().createElement(e().Fragment,null,e().createElement("span",{className:n().name,title:a.user_info.name},e().createElement(Le.Z,{userId:a.user_info.id,userName:a.user_info.name})),e().createElement("span",{className:n().dept,title:a.user_info.dept_name},e().createElement(Se.P,{allDepartmentsList:a.user_info.department_infos||[]})))),v==="pending"?e().createElement("p",{className:n().time},(0,z.p6)(+a.submit_time,"yyyy-MM-dd hh:mm")):e().createElement("p",{className:n().time},(0,z.p6)(+a.submit_time,"yyyy-MM-dd hh:mm"))))),le?null:e().createElement("p",{className:n().end},l("other.isEnd"))))):null):e().createElement("div",{className:n().expand,onClick:()=>{oe(!0)},title:l("common.expand")},e().createElement(q.Z,{iconClass:"icon-icon_sx1"})))},Pe=(0,T.Z)("translation",{withRef:!0})((0,r.forwardRef)(Ne)),We=t(69348),_=t.n(We),Be=t(4408),De=L=>{var S=L.t,l=(0,r.useReducer)(K.I,K.E),M=(0,g.Z)(l,2),f=M[0],u=M[1],p=(0,r.useRef)(null),C=P=>(P.preventDefault(),!1),N=()=>{p.current.updateList()};return e().createElement("div",{className:_().mark,onContextMenu:C},e().createElement(Be.Z,{title:S("examination.markingTitle")}),e().createElement(V.Z.Provider,{value:{state:f,dispatch:u}},e().createElement(Pe,{ref:p}),e().createElement("div",{className:_()["marking-wrapper"]},e().createElement(ge.tc,{type:"mark",finishedMarkCb:N}))))},Qe=(0,T.Z)("translation",{withRef:!0})(De)},56932:function(J){J.exports="data:image/png;base64,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"}}]);
