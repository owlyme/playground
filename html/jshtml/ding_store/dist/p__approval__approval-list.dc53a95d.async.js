(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[601],{26096:function(we,le,t){"use strict";var j=t(30887),N=t(99210),ne=t(62029),R=t(22385),$=t(31097),W=t(12924),M=t.n(W),y=t(71967),p=t.n(y),l=t(1164),P=f=>f.type==="more"?f.disabled?M().createElement(N.Z.Item,(0,ne.Z)({},f,{key:f.key,disabled:!0}),f.tooltip?M().createElement($.Z,{title:f.tooltip},M().createElement("p",{className:"cl-dropdown-menuitem"},f.title)):M().createElement("p",{className:"cl-dropdown-menuitem"},f.title)):f.link?M().createElement(N.Z.Item,(0,ne.Z)({},f,{key:f.key}),M().createElement(l.Z,{to:f.link},M().createElement("p",{className:"cl-dropdown-menuitem"},f.title))):M().createElement(N.Z.Item,(0,ne.Z)({},f,{key:f.key}),M().createElement("p",{className:"cl-dropdown-menuitem",onClick:f.click},f.title)):f.disabled?f.tooltip?M().createElement(M().Fragment,{key:f.key},M().createElement($.Z,{title:f.tooltip},M().createElement("span",{className:"".concat(p().pointer," ").concat(p().disabled)},f.title))):M().createElement(M().Fragment,{key:f.key},M().createElement("span",{className:"".concat(p().pointer," ").concat(p().disabled)},f.title)):f.link?M().createElement(M().Fragment,{key:f.key},M().createElement(l.Z,{to:f.link},M().createElement("span",{className:"cl-pointer ".concat(p().pointer)},f.title))):M().createElement(M().Fragment,{key:f.key},M().createElement("span",{className:"cl-pointer ".concat(p().pointer),onClick:f.click},f.title));le.Z=P},87722:function(we,le,t){"use strict";var j=t(62029),N=t(81211),ne=t(14965),R=t(11448),$=t(12924),W=t.n($),M=t(91768),y=t(78138),p=t.n(y),l=t(6793),P=t(37055),f=R.Z.RangePicker;class e extends W().Component{constructor(){super(...arguments);this.state={value:[]},this.handleChange=(u,a)=>{var w=this.props,O=w.onCustomChange,B=w.timestamp;if(!u||!u.length){this.setState({value:[]},()=>{O({startTime:null,endTime:null,value:u,dateStrings:a})});return}var I=this.props,U=I.startTimeFormatter,se=U===void 0?P.XE.INITIAL_DATE_FMT.PARAMS:U,X=I.endTimeFormatter,ie=X===void 0?P.XE.INITIAL_DATE_FMT.PARAMS:X,z=B?u[0].valueOf():u[0].format(se),ae=B?u[1].valueOf():u[1].format(ie),V=(0,l.jZ)(a[0])>(0,l.jZ)(a[1]);V&&a.reverse(),this.setState({value:V?[u[1],u[0]]:u},()=>{O({startTime:z,endTime:ae,value:u,dateStrings:a})})},this.clearTime=()=>{this.setState({value:[]})}}componentDidMount(){var u=this.props.defaultValue;if(u&&u[0]&&u[1]){var a=u.map(w=>p()(w));this.setState({value:a})}}UNSAFE_componentWillReceiveProps(u){if(u.defaultValue&&this.props.defaultValue&&(u.defaultValue[0]!==this.props.defaultValue[0]||u.defaultValue[1]!==this.props.defaultValue[1]))if(u.defaultValue[0]&&u.defaultValue[1]){var a=u.defaultValue.map(w=>p()(w));this.setState({value:a})}else this.setState({value:[]})}render(){var u=this.props,a=u.t,w=u.showTime,O=w===void 0?!0:w,B=u.disabledDate,I=u.noRange,U=u.ranges,se=u.customerShowTime,X=se===void 0?!1:se,ie=(0,N.Z)(u,["t","showTime","disabledDate","noRange","ranges","customerShowTime"]),z=this.state.value,ae=U&&JSON.stringify(U)!="{}"?U:{["".concat(a("component.lastWeek"))]:[p()().subtract("day",7),p()()],["".concat(a("component.lastMonth"))]:[p()().subtract("day",30),p()()],["".concat(a("component.lastThreeMonth"))]:[p()().subtract("month",3),p()()]};return W().createElement(f,(0,j.Z)({value:z,showTime:O?X?O:{format:P.XE.INITIAL_TIME_FMT.VIEW,defaultValue:[p()("00:00:00","HH:mm:ss"),p()("23:59:59","HH:mm:ss")]}:!1,format:P.XE.INITIAL_DATE_FMT.PARAMS,ranges:I?{}:ae,disabledDate:B||l.tI,onChange:this.handleChange},ie))}}e.defaultProps={showTime:!0,disabledDate:null,noRange:!1,ranges:{},rest:{},timestamp:!1},le.Z=(0,M.Z)("translation",{withRef:!0})(e)},4408:function(we,le,t){"use strict";var j=t(12924),N=t.n(j),ne=t(28216),R=t(17780),$=t(38642),W=y=>({userInfo:y.user}),M=y=>{var p=y.title;return(0,R.xX)()&&setTimeout(()=>{document.title=p},0),(0,j.useEffect)(()=>{if(p&&document.title!==p&&setTimeout(()=>{document.title=p},0),(0,$.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var l=document.querySelector(".zoom-report");l&&(l.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[p]),N().createElement(N().Fragment,null)};M.defautProps={title:""},le.Z=(0,ne.$j)(W)(M)},1164:function(we,le,t){"use strict";var j=t(12924),N=t.n(j),ne=t(76651),R=t(38642),$=t(91302),W=M=>{var y=navigator.userAgent.toLocaleLowerCase(),p=localStorage.getItem("enterpriseId"),l=(0,R.lz)(p,M.projectType),P=localStorage.getItem("dingPersonnel"),f=$.bl.includes(P),e=M.target;function L(u){if(e==="self"&&(u.preventDefault(),ne.m8.push(M.to)),f){if(M.projectType==="student"){window.location.href="".concat(l,"/").concat(M.to);return}ne.m8.push(M.to);return}if(dd.version){u.preventDefault();var a="";M.to.includes("?")?a="".concat(l).concat(M.to,"&ddtab=true"):a="".concat(l).concat(M.to,"?ddtab=true"),dd.biz.util.openLink({url:a})}else y.indexOf("lark")!==-1&&(window.location.href="".concat(l).concat(M.to))}return N().createElement("a",{rel:"noreferrer",href:"".concat(M.projectType==="student"?"".concat(l).concat(M.to):"#".concat(M.to)),className:"".concat(M.wrapCls," cl-pointer"),target:y.indexOf("lark")!==-1||f?"_self":M.target||"_blank",onClick:L},M.children)};W.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},W.targetTo=M=>{var y=M.path,p=M.from,l=M.isExternalLink,P=l===void 0?!1:l,f=M.isAsync,e=f===void 0?!1:f,L=M.openName,u=L===void 0?"_blank":L,a=M.projectType,w=a===void 0?"manage":a,O=M.ddTab,B=O===void 0?!0:O,I,U=localStorage.getItem("dingPersonnel"),se=$.bl.includes(U),X=navigator.userAgent.toLocaleLowerCase(),ie=localStorage.getItem("enterpriseId"),z=(0,R.lz)(ie,w),ae=localStorage.getItem("appType"),V=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var ve="";if(I=P?"":z,se&&!P){if(w==="student"){window.location.href="".concat(z).concat(y);return}ne.m8.push(y);return}y.includes("?")?ve="".concat(I).concat(y,"&ddtab=").concat(B):ve="".concat(I).concat(y,"?ddtab=").concat(B),dd.biz.util.openLink({url:ve})}else if(X.indexOf("lark")!==-1)I=P?"":z,window.location.href="".concat(I).concat(y);else if(ae==="wx_app"&&V&&P&&p==="imgText")I=P?"":w==="student"?"".concat(z):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(I).concat(y)});else if(I=P?"":w==="student"?"".concat(z):"#",e){var ce=window.open("","_blank");setTimeout(()=>{ce.location="".concat(I).concat(y)},100)}else window.open("".concat(I).concat(y),u)},le.Z=W},87312:function(we,le,t){"use strict";var j=t(12924),N=t.n(j),ne=t(91768),R=$=>{var W=$.t;return N().createElement("div",{className:$.className?"".concat($.className," no-result"):"no-result"},N().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1789886702513426432.png"),className:"no-data-img",alt:""}),N().createElement("p",{className:"no-data-tip"},$.tipText||W("common.empty")))};le.Z=(0,ne.Z)()(R)},88311:function(we,le,t){"use strict";t.d(le,{Z:function(){return Ue}});var j=t(62029),N=t(47673),ne=t(4107),R=t(33565),$=t(57361),W=t(34792),M=t(48086),y=t(88986),p=t(43358),l=t(34041),P=t(18106),f=t(88108),e=t(9754),L=t.n(e),u=t(12924),a=t.n(u),w=t(91768),O=t(77043),B=t.n(O),I=t(20228),U=t(11382),se=t(18721),X=t.n(se),ie=t(51975),z=t(37055),ae={breadNav:[{value:"",label:""}],checkOne:()=>{},checkAll:()=>{},nextLevel:()=>{},changeLevel:()=>{}},V=a().createContext(ae),ve={searchResult:[],deptList:[],groupList:[],postList:[],deptUser:[],groupUser:[],postUser:[],clusterList:[],classList:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],initTypeList:()=>{},initTypeUser:()=>{},toggleDisplayItem:()=>{},toggleDisplayList:()=>{},checkListOne:()=>{},checkUserOne:()=>{},removeCheckedUser:()=>{},changeLevel:()=>{},hidePosts:!1,initHidePostsStatus:()=>{},clearSelectedAll:()=>{}},ce=a().createContext(ve),be=t(36017),Ie=t(35247),De=t(60667);class xe extends a().Component{constructor(){super(...arguments);this.changeLevel=(S,E,n,i)=>{S.preventDefault(),this.props.contextData.changeLevel(E,n,i)}}render(){var S=this.props.contextData.breadNav.map((E,n)=>a().createElement(Ie.Z.Item,{key:E.value},a().createElement("span",{className:"bread-nav-item",onClick:i=>this.changeLevel(i,E.value,n,!(X()(E,"authorized")&&E.authorized==="true"))},a().createElement(De.Z,{dataType:"departmentName",value:E.value,name:E.label,type:E.sourceType}))));return a().createElement("div",{className:"bread-nav"},a().createElement(Ie.Z,null,S))}}xe.defaultProps={contextData:{breadNav:[]},changeLevel:()=>{}};var Oe=xe,je=t(63185),Ne=t(9676),Fe=t(88983),Je=t(47933),qe=t(22385),ze=t(31097),tt=t(57119),Qe=t(84874),ct=t(20136),ft=t(55241),dt=t(13062),ht=t(71230),gt=t(89032),_e=t(15746),Ke=t(28216),et=t(80430),He=t(10237);function Ge(){var J=CONFIG.Role.getUserManageRange();return request.get({url:J})}function st(J){var S=z.ZP.OrgDialog.getDeptInfoUrl({departmentId:J.departmentId});return delete J.departmentId,He.WY.get({url:S,params:J})}function mt(J){var S=z.ZP.OrgDialog.getDeptUsersUrl({departmentId:J.departmentId});return delete J.departmentId,He.WY.get({url:S,params:J})}function yt(J){var S=z.ZP.OrgDialog.getUserDetailUrl();return He.WY.get({url:S,params:J})}function Dt(J){var S=z.ZP.OrgDialog.getScopeUsersAndDeptsUrl({departmentId:J.departmentId});return delete J.departmentId,He.WY.get({url:S,params:J})}function $t(J){var S=z.ZP.OrgDialog.postDeleteCacheUrl({cacheId:J.cacheId});return delete J.cacheId,He.WY.post({url:S,params:J})}var St,Ut,xt=(St=(0,Ke.$j)(J=>{var S=J.user;return{enterpriseName:S.enterpriseName}}),St(Ut=class extends a().Component{constructor(){super(...arguments);this.state={loading:!0,cardInfoFinal:this.props.cardInfo},this.renderTitle=()=>{var S=this.props,E=S.cardInfo,n=S.prefixCls,i=S.enterpriseName,T=E.source_type,m=E.user_id,s=E.name;return a().createElement("div",{className:"".concat(n,"__header")},a().createElement("div",{className:"".concat(n,"__header-name")},a().createElement(De.Z,{type:T,value:m,name:s,dataType:"userName"})),a().createElement("div",{className:"".concat(n,"__header-corp")},i||"/"))},this.renderContent=()=>{var S=this.props,E=S.prefixCls,n=S.t,i=this.state.cardInfoFinal,T=i.user_id,m=i.job_number,s=i.post_names,b=s===void 0?[]:s,Q=i.department_infos,q=Q===void 0?[]:Q,ue=()=>!(q instanceof Array)||q.length===0?"/":a().createElement(et.Z,{list:q,displayAll:!0,isBlock:!0}),re=()=>!(b instanceof Array)||b.length===0?"/":b.map(fe=>a().createElement("div",{key:fe},fe)),ge=[{lable:"ID",value:T},{lable:n("personal.jobNumber"),value:m||"/"},{lable:n("setting.postLabel"),value:re()},{lable:n("learnRecord.department"),value:ue()}];return a().createElement("div",{className:"".concat(E,"__body")},ge.map(fe=>a().createElement(ht.Z,{className:"".concat(E,"__body-item"),key:fe.value},a().createElement(_e.Z,{className:"".concat(E,"__body-item-lable")},fe.lable),a().createElement(_e.Z,{className:"".concat(E,"__body-item-value")},fe.value||"/"))))}}render(){var S=this.props,E=S.children,n=S.prefixCls,i=this.state,T=i.loading,m=i.cardInfoFinal;return a().createElement(ft.Z,{overlayClassName:n,placement:"rightTop",title:this.renderTitle,content:T?a().createElement("div",{className:"".concat(n,"__body")},a().createElement(U.Z,null)):this.renderContent,onVisibleChange:s=>{s&&(m.detailInfo===!1?yt({user_id:m.id}).then(b=>{this.setState({loading:!1,cardInfoFinal:(0,y.Z)((0,y.Z)((0,y.Z)({},m),b.data),{},{detailInfo:!0})})}).catch(b=>{console.error(b)}):this.setState({loading:!1}))},mouseEnterDelay:.5},E)}})||Ut);xt.defaultProps={prefixCls:"user-card-popover",cardInfo:{}};var Ct=(0,w.Z)()(xt),zt=["cluster","class"];class Rt extends a().Component{constructor(){super(...arguments);this.checkOne=S=>{S.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=S=>{S.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var S=this.props,E=S.cardInfo,n=S.type,i=S.t;return E.authorized==="false"&&n==="dept"?a().createElement(ze.Z,{title:i("orgDialog.scopedAuthorize")},a().createElement(tt.Z,{style:{marginLeft:"4px"}})):null}}render(){var S=this.props,E=S.t,n=S.cardInfo,i=n===void 0?{}:n,T=S.hidePosts,m=S.type,s=S.userCount,b=null;return this.props.hasNext?(b=a().createElement("div",{className:"next-level"},!(T&&m==="post")&&s>-1?a().createElement("span",{className:"next-level-count"},"(",s,")"):null,zt.includes(m)?a().createElement("span",null):a().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},a().createElement(Qe.Z,{iconClass:"icon-xiaji1"}),E("component.nextLevel"))),this.props.single?a().createElement("div",{className:"org-tree-item"},a().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),b):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&a().createElement("div",{className:"org-tree-item"},a().createElement(Ne.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),b)):a().createElement("div",{className:"org-tree-item"},this.props.single?a().createElement(Je.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement(Ct,{cardInfo:i},this.props.title)):a().createElement(Ct,{cardInfo:i},a().createElement(Ne.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title)))}}Rt.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var Ht=(0,w.Z)()(Rt),Gt=["cluster","class"];class kt extends a().Component{constructor(){super(...arguments);this.checkOne=S=>{S.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=S=>{S.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var S=this.props,E=S.cardInfo,n=S.type,i=S.t;return E.authorized==="false"&&n==="dept"?a().createElement(ze.Z,{title:i("orgDialog.scopedAuthorize")},a().createElement(tt.Z,{style:{marginLeft:"4px"}})):null}}render(){var S=this.props,E=S.t,n=S.cardInfo,i=n===void 0?{}:n,T=S.hidePosts,m=S.type,s=S.userCount,b=null;return this.props.hasNext?(b=a().createElement("div",{className:"next-level"},a().createElement("span",{className:"next-level-belle"},!(T&&m==="post")&&s>-1?a().createElement("span",{className:"next-level-count"},"(",s,")"):null,Gt.includes(m)?a().createElement("span",null):a().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},a().createElement(Qe.Z,{iconClass:"icon-xiaji1"}),E("component.nextLevel")))),this.props.single?a().createElement("div",{className:"org-tree-item"},a().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),b):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&a().createElement("div",{className:"org-tree-item"},a().createElement(Ne.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),b)):a().createElement("div",{className:"org-tree-item"},this.props.single?a().createElement(Je.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement(Ct,{cardInfo:i},a().createElement("span",{className:"org-tree-item-title"},this.props.title))):a().createElement(Ct,{cardInfo:i},a().createElement(Ne.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title))))}}kt.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var Mt=(0,w.Z)()(kt),Lt=t(38642),Bt=["cluster","class"];class bt extends a().Component{constructor(S){super(S);this.checkAll=(E,n)=>{E.preventDefault(),this.props.contextData.checkAll(n)},this.getIsCheckAll=()=>{var E=[].concat(this.context["".concat(this.props.dataTypeKey,"List")],Bt.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")]);if(E.length===0)return!1;var n=E.findIndex(i=>!i.isChecked);return n===-1},this.renderDeptName=(E,n)=>n==="dept"?a().createElement(De.Z,{type:E.source_type,value:E.id,name:E.name,dataType:"departmentName"}):E.name,this.renderName=E=>a().createElement(De.Z,{type:E.source_type,value:E.user_id,name:E.name,dataType:"userName"}),this.state={isShowCheckAllEle:!0,whiteList:{belleFlag:(0,Lt.UI)("BELLE_CUSTOMER_WHITE")}}}render(){var S=this.state,E=S.isShowCheckAllEle,n=S.whiteList,i=this.props,T=i.t,m=i.dataTypeKey,s=i.disableHidden,b=i.scrollFlag,Q=this.context,q=Q.maxDeptUserCount,ue=Q.hidePosts,re=Q.onlyPost,ge=Q.onlyUser,fe=Q.single,ye=[],de=this.context["".concat(this.props.dataTypeKey,"List")].map(pe=>(ye.push(a().createElement("div",{className:"title-item",key:pe.id},this.renderDeptName(pe,m))),n.belleFlag&&b?a().createElement(Mt,{type:m,key:pe.id,cardInfo:pe,hasNext:!0,checkable:q&&(pe==null?void 0:pe.userCount)>q?!1:!(re&&pe.post_type==="post_group"||ge),single:fe,userCount:pe.userCount,isChecked:!!pe.isChecked,itemId:pe.id,title:this.renderDeptName(pe,m),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!pe.children,hidePosts:ue,disableHidden:s}):a().createElement(Ht,{type:m,key:pe.id,cardInfo:pe,hasNext:!0,checkable:q&&(pe==null?void 0:pe.userCount)>q?!1:!(re&&pe.post_type==="post_group"||ge),single:fe,userCount:pe.userCount,isChecked:!!pe.isChecked,itemId:pe.id,title:this.renderDeptName(pe,m),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!pe.children,hidePosts:ue,disableHidden:s}))),Te=[],$e=Bt.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")].map(pe=>(Te.push(a().createElement("div",{className:"title-item",key:pe.id},this.renderName(pe,m))),n.belleFlag&&b?a().createElement(Mt,{key:pe.id,hasNext:!1,title:this.renderName(pe),isChecked:!!pe.isChecked,itemId:pe.id,cardInfo:pe,checkable:!(pe.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:s}):a().createElement(Ht,{key:pe.id,hasNext:!1,title:this.renderName(pe),isChecked:!!pe.isChecked,itemId:pe.id,cardInfo:pe,checkable:!(pe.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:s}))),nt=this.getIsCheckAll(),it=a().createElement("div",{className:"org-tree-item"},a().createElement(Ne.Z,{checked:nt,defaultChecked:!0,onClick:pe=>this.checkAll(pe,!nt)},T("common.all")));return a().createElement("div",{className:"".concat(this.context.oneDisplayType?"org-tree more-height":"org-tree"," ").concat(n.belleFlag&&b?"org-tree-belle":"")},!this.context.single&&this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&de.length===0&&$e.length>0&&E||!this.context.single&&!this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&(de.length>0||$e.length>0)&&E?it:null,n.belleFlag&&b&&a().createElement("div",{className:"belle-title-scroll"},ye,Te),de,$e)}}bt.contextType=ce,bt.defaultProps={dataTypeKey:"dept",contextData:{},disableHidden:!1,scrollFlag:!1};var Wt=(0,w.Z)()(bt),Vt=t(25547),Nt="999",_t=1,Ft=["clusterList","classList"];class At extends a().Component{constructor(S,E){var n;super(S);n=this,this.getClusterList=()=>{var i=z.ZP.OrgDialog.getClusterList(),T={keyword:""};He.WY.get({url:i,params:T}).then(m=>{this.context.initTypeList("clusterList","checkedCluster",m.data.data.map(s=>({name:s.name,userCount:s.user_count,id:s.id,parentId:[""]})))})},this.getClassList=()=>{this.context.initTypeList("classList","checkedClass",[{name:"\u6D4B\u8BD52",userCount:2,id:"2",parentId:[""]},{name:"\u6D4B\u8BD54",userCount:1,id:"41",parentId:[""]}])},this.flatTreeData=(i,T)=>(i.children.forEach(m=>{m.children&&(T[m.id]=m.children,this.flatTreeData(m,T))}),T),this.getDeptList=function(i){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise((m,s)=>{var b=n.state.cacheId;st({departmentId:i,cache_id:b,filter_auth:T&&!n.props.filterAuthOpen}).then(Q=>{var q=Q.data.children||[];q.forEach(re=>{re.parentId=Q.data.id,re.userCount=re.user_count,re.name=re.department_name,re.all_name=a().createElement("span",null,n.state.contextData.breadNav.map(ge=>a().createElement("span",{key:ge.value},ge.label,"/")),re.department_name)});var ue=[];n.context.asyncDeptTree?ue=q:ue=n.flatTreeData(Q.data,{[Q.data.id]:q}),n.setState({deptList:ue}),n.context.initTypeList("deptList","checkedDept",q),m(Q.data)}).catch(Q=>{console.error(Q),s(Q)})})},this.getDeptUserList=function(i){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,m=n.state.cacheId;mt({departmentId:i,cache_id:m,filter_auth:T&&!n.props.filterAuthOpen}).then(s=>{s.data&&s.data.forEach(b=>{b.name=b.user_name,b.detailInfo=!1}),n.context.initTypeUser("deptUser",s.data)}).catch(s=>{console.error(s)})},this.getGroupList=()=>{var i=z.ZP.Organization.getGroupList(),T={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};He.WY.get({url:i,params:T}).then(m=>{m.data.groups=m.data.groups||[],m.data.groups.forEach(s=>{s.parentId=this.state.contextData.breadNav.map(b=>b.value),s.userCount=s.user_count,s.name=s.group_name}),this.setState({groupList:m.data.groups}),this.context.initTypeList("groupList","checkedGroup",m.data.groups)})},this.getGroupUserList=i=>{var T=z.ZP.Organization.getGroupUserList({groupId:i}),m={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};He.WY.get({url:T,params:m}).then(s=>{s.data.users&&s.data.users.forEach(b=>{b.name=b.user_name,b.parentId=this.state.contextData.breadNav.map(Q=>Q.value)}),this.context.initTypeUser("groupUser",s.data.users)})},this.getPostList=i=>{var T=z.ZP.Organization.getPostTree(),m={filter_auth:!this.props.filterAuthOpen,post_id:i,user_type:this.context.userType};He.WY.get({url:T,params:m}).then(s=>{s.data.posts=s.data.posts||[],s.data.posts.forEach(b=>{b.parentId=this.state.contextData.breadNav.map(Q=>Q.value),b.userCount=b.user_count,b.name=b.post_name}),this.setState({postList:s.data.posts}),this.context.initTypeList("postList","checkedPost",s.data.posts),this.context.initHidePostsStatus(s.data.hide_posts==="true")})},this.getPostUserList=i=>{var T=z.ZP.Organization.getPostUserList({postId:i}),m={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};He.WY.get({url:T,params:m}).then(s=>{s.data.users&&s.data.users.forEach(b=>{b.name=b.user_name,b.parentId=this.state.contextData.breadNav.map(Q=>Q.value)}),this.context.initTypeUser("postUser",s.data.users)})},this.getUserList=function(i){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n.props.type==="dept"?n.getDeptUserList(i,T):n.props.type==="group"?n.getGroupUserList(i):n.getPostUserList(i)},this.checkOne=(i,T,m)=>{var s=this.state.checkedCount;if(T==="list"){var b=this.context[this.state.listType].find(q=>q.id===i);b.isChecked=m,b.all_name&&typeof b.all_name=="object"&&delete b.all_name,s=m?s+1:s-1,this.context.checkListOne(b,this.state.checkedListType,this.state.listType)}else if(T==="user"){var Q=this.context[this.state.checkedUserType].find(q=>q.id===i);Q.isChecked=m,s=m?s+1:s-1,this.context.checkUserOne(Q,this.state.checkedUserType)}this.updateCheckedCount(s)},this.updateCheckedCount=i=>{this.setState({checkedCount:i})},this.checkAll=function(){var i=(0,$.Z)(L().mark(function T(m){var s,b,Q,q,ue,re,ge,fe,ye,de,Te,$e,nt,it,pe;return L().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(s=n.state,b=s.contextData,Q=s.cacheId,q=[...b.breadNav].reverse(),ue=(0,R.Z)(q,1),re=ue[0],ge=re.value,fe=[...n.context[n.state.checkedListType]],ye=re.authorized==="false",de={departments:[],users:[]},!ye){It.next=12;break}return It.next=9,Dt({departmentId:ge,cache_id:Q});case 9:Te=It.sent,$e=Te.data,de={departments:$e.departments.map(Le=>(Le.isChecked=m,Le.name=Le.department_name,Le.parentId=Le.parent_ids.split("/"),Le.parentAuthorize=!1,Le.userCount=Le.user_count,Le)),users:$e.users.map(Le=>(Le.isChecked=m,Le.name=Le.user_name,Le.parentAuthorize=!1,Le))};case 12:nt=n.context[n.state.listType].map(Le=>{Le.isChecked=m,n.props.type!=="dept"&&fe.forEach(rt=>{rt.parentId.indexOf("".concat(Le.id))!==-1&&(rt.isChecked=!1)});var Et=fe.findIndex(rt=>rt.id===Le.id);return Et!==-1?fe[Et].isChecked=m:fe.push(Le),Le}),it=[],n.context.checkedUser.forEach(Le=>{if(n.props.type!=="dept"){if(typeof Le.parentId!="undefined"&&Le.parentId.indexOf("".concat(ge))!==-1&&Le.parentId[Le.parentId.length-1]!==ge)return}else{var Et=typeof Le.parentId!="undefined"?Le.parentId:Le.department_ids||[];if(Et.indexOf(ge)!==-1)return}it.push(Le)}),pe=Ft.includes(n.state.listType)?[]:n.context[n.state.checkedUserType].map(Le=>{Le.isChecked=m;var Et=it.findIndex(rt=>rt.id===Le.id);return Et!==-1?it[Et].isChecked=m:it.push(Le),Le}),n.context.toggleDisplayList(n.state.checkedListType,B()(de.departments,fe,"id"),n.state.listType,nt,n.state.checkedUserType,pe,B()(de.users,it,"id")),n.setState({checkedCount:m?(Ft.includes(n.state.listType)?0:n.context[n.state.checkedUserType].length)+n.context[n.state.listType].length:0});case 18:case"end":return It.stop()}},T)}));return function(T){return i.apply(this,arguments)}}(),this.nextLevel=(i,T,m)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var s=[...this.state.contextData.breadNav,{value:i.id,label:T,authorized:i.authorized}];this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:s})},()=>{this.props.type==="post"?this.nextPostLevel(i.id,m):this.props.type==="dept"?this.nextDeptLevel(i.id,!(X()(i,"authorized")&&i.authorized==="true")):this.context.initTypeList("groupList","checkedGroup",[]),this.getUserList(i.id===Nt?_t:i.id,!(X()(i,"authorized")&&i.authorized==="true"))})},this.nextDeptLevel=(i,T)=>{if(this.context.asyncDeptTree)this.getDeptList(i,T);else{var m=this.state.deptList[i];typeof m!="undefined"&&m.forEach(s=>{s.parentId=this.state.contextData.breadNav.map(b=>b.value),s.userCount=s.user_count,s.name=s.department_name}),this.context.initTypeList("deptList","checkedDept",m||[])}},this.nextPostLevel=(i,T)=>{if(T){var m=(0,Vt.lK)(this.state.postList,i),s=m.children.map(b=>(b.name=b.post_name,b.parentId=this.state.contextData.breadNav.concat([i]).map(Q=>Q.value),b.userCount=b.user_count,b));this.context.initTypeList("postList","checkedPost",s)}},this.changeLevel=(i,T,m)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var s=this.props.type==="group"?[this.state.contextData.breadNav[0]]:this.state.contextData.breadNav.slice(0,T+1);this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:s}),isSearch:!1},()=>{this.props.type==="dept"?this.changeDeptLevel(i,m):this.props.type==="group"?this.changeGroupLevel(i):this.props.type==="cluster"?this.getClusterList():this.props.type==="class"?this.getClassList():this.changePostLevel(i)})},this.changeDeptLevel=function(i){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(n.context.asyncDeptTree)n.getDeptList(i,T);else{var m=n.state.deptList[i];m.forEach(s=>{s.parentId=n.state.contextData.breadNav.map(b=>b.value),s.userCount=s.user_count,s.name=s.department_name}),n.context.initTypeList("deptList","checkedDept",m)}n.getDeptUserList(i===Nt?_t:i,T)},this.changePostLevel=i=>{var T=i==="1"?this.state.postList:(0,Vt.lK)(this.state.postList,i).children,m=T.map(s=>(s.name=s.post_name,s.parentId=this.state.contextData.breadNav.concat([i]).map(b=>b.value),s.userCount=s.user_count,s));this.context.initTypeList("postList","checkedPost",m),i!=="1"&&this.getPostUserList(i===Nt?_t:i)},this.changeGroupLevel=i=>{i||(this.context.initTypeUser("groupUser",[]),this.context.initTypeList("groupList","checkedGroup",this.state.groupList))},this.state={postList:[],deptList:[],groupList:[],clusterList:[],classList:[],contextData:{breadNav:[this.props.defaultBreadNav],checkOne:this.checkOne,checkAll:this.checkAll,nextLevel:this.nextLevel,changeLevel:this.changeLevel},checkedCount:0,listType:"".concat(this.props.type,"List"),checkedListType:"checked".concat(this.props.type.charAt(0).toUpperCase()).concat(this.props.type.substr(1)),checkedUserType:"".concat(this.props.type,"User"),isSearch:!1,searchResult:[],loadDept:!1,loadUser:!1,cacheId:E.cacheId}}componentDidMount(){this.props.type!=="group"?this.props.type==="dept"?this.getDeptList("1").then(S=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:[{value:S.id,label:S.department_name,sourceType:S.source_type,authorized:S.authorized}]})}),this.getDeptUserList("1")}):this.getPostList("1"):this.getGroupList(1),this.props.type==="cluster"&&this.getClusterList(),this.props.type==="class"&&this.getClassList()}render(){return a().createElement(V.Provider,{value:this.state.contextData},a().createElement("div",{className:"org-display-container org-display-dept"},a().createElement(vt,null),this.props.type==="dept"&&(this.state.loadDept||this.state.loadUser)?a().createElement("div",{className:"dept-loading"},a().createElement(U.Z,null)):null,a().createElement(Yt,{dataTypeKey:this.props.type,disableHidden:this.props.disableHidden,scrollFlag:this.props.scrollFlag})))}}At.contextType=ce;var vt=(0,ie.l)(V,Oe),Yt=(0,ie.l)(V,Wt);At.defaultProps={defaultBreadNav:{value:"",label:"\u9177\u6E32\u79D1\u6280"},queryType:1,type:"dept",filterAuthOpen:!1,disableHidden:!1,scrollFlag:!1};var Kt=At,Jt=t(57663),Qt=t(71577),Se=t(54549);class g extends a().Component{constructor(){super(...arguments);this.removeItem=(S,E,n,i)=>{S.preventDefault(),E.isChecked=!1,i==="user"?this.context.removeCheckedUser(E):this.context.checkListOne(E,n,"".concat(i,"List"))},this.displayName=(S,E)=>{var n={user:"userName",dept:"departmentName"}[S]||"",i={user:E.unionid||E.user_id||E.userId,dept:E.id}[S]||E.id;return a().createElement(De.Z,{value:i,name:E.name,type:E.source_type||E.sourceType,dataType:n})},this.displayItem=S=>{var E=this.context,n=E.hidePosts,i=E.showUserCount,T="checked".concat(S.charAt(0).toUpperCase()).concat(S.substr(1)),m=this.context[T].map(s=>s.isChecked&&s.authorized!=="false"?a().createElement(ze.Z,{key:s.id,placement:"top",title:s.all_name||"",getPopupContainer:()=>document.querySelector(".checked-display-container")},a().createElement("div",{className:"display-item",key:s.id},this.displayName(S,s),S==="user"||n&&S==="post"?"":i&&s.userCount>-1?"(".concat(s.userCount,")"):"",s.reserve?null:a().createElement("span",{className:"display-item-close",onClick:b=>this.removeItem(b,s,T,S)},a().createElement(Se.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))):null);return m},this.handleClearSelected=()=>{this.context.clearSelectedAll()}}render(){var S=this.props.t,E=["dept","group","post","user","cluster","class"].map(n=>this.displayItem(n));return a().createElement("div",{className:"checked-display-container"},a().createElement("div",{className:"checked-display-container-header"},a().createElement("span",null,S("orgDialog.selected"),":"),a().createElement(Qt.Z,{type:"link",onClick:this.handleClearSelected},S("orgDialog.clearAll"))),E)}}g.contextType=ce;var C=(0,w.Z)()(g),d=t(67222),o=t(6793),h=ne.Z.Search;class _ extends a().Component{constructor(S){var E;super(S);E=this,this.onChange=n=>{var i=this.props.appType,T=localStorage.getItem("qyWechatBook");if(n.preventDefault(),this.setState({value:n.target.value}),!(!n.target.value&&!this.props.showCancel)&&!this.props.disableChange){var m=i==="wx_app"&&T==="true";!(0,Lt.eY)("ORG_DIALOG_SEARCH")||m||(0,o.Ds)(this.debounceChange,500)()}},this.handleSearch=(n,i)=>{i.preventDefault(),!(!n&&!this.props.showCancel)&&this.extendReturn(n)},this.debounceChange=()=>{this.extendReturn(this.state.value)},this.extendReturn=function(){var n=(0,$.Z)(L().mark(function i(T){var m,s,b,Q,q,ue,re,ge,fe;return L().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(m=E.props,s=m.appType,b=m.selectType,Q=m.appId,q=localStorage.getItem("qyWechatBook"),ue="",re=s==="wx_app"&&q==="true"&&Q==="9005",!(T&&b==="user"&&re)){de.next=17;break}return de.prev=5,de.next=8,(0,d.F_)(T);case 8:ge=de.sent,fe=ge.data,fe.success&&(ue=fe.data),de.next=17;break;case 13:de.prev=13,de.t0=de.catch(5),console.error(de.t0),ue="";case 17:E.props.onSearch(T,ue);case 18:case"end":return de.stop()}},i,null,[[5,13]])}));return function(i){return n.apply(this,arguments)}}(),this.state={value:""}}render(){var S=this.props,E=S.t,n=S.selectType;return a().createElement("div",{className:"top-search"},a().createElement(h,{placeholder:E(n==="user"?"component.searchStudent":n==="dept"?"component.searchDepartment":n==="post"?"component.searchPost":n==="cluster"?"component.searchCluster":n==="class"?"component.searchClass":"setting.searchGroup"),value:this.state.value,onSearch:this.handleSearch,allowClear:!0,onChange:this.onChange}))}}var A=(0,Ke.$j)(J=>({appType:J.user.appType,appId:J.user.appId}))((0,w.Z)()(_)),K=t(87312);class x extends u.Component{constructor(){super(...arguments);this.checkedAll=(S,E)=>{this.props.checkedAll(E)},this.getIsCheckedAll=()=>{var S=this.props.list,E=[].concat(S);if(E.length===0)return!1;var n=E.findIndex(i=>!i.isChecked);return n===-1},this.checkUser=(S,E)=>{E.isChecked=!E.isChecked,this.context.checkUserOne(E,"checkedUser")},this.checkSingleUser=(S,E)=>{E.isChecked=!0,this.context.checkUserOne(E,"checkedUser")},this.checkDept=(S,E)=>{E.isChecked=!E.isChecked,this.context.checkListOne(E,"checkedDept","deptList")},this.checkPost=(S,E)=>{E.isChecked=!E.isChecked,this.context.checkListOne(E,"checkedPost","postList")},this.checkGroup=(S,E)=>{E.isChecked=!E.isChecked,this.context.checkListOne(E,"checkedGroup","groupList")},this.checkedCluster=(S,E)=>{E.isChecked=!E.isChecked,this.context.checkListOne(E,"checkedCluster","clusterList")}}renderList(){var S=this.props,E=S.userListType,n=S.list,i=S.t,T=S.isSingle,m=S.hidePosts;return E==="user"&&!T?n.map(s=>a().createElement("div",{className:"search-result-item",key:s.id,onClick:b=>{this.checkUser(b,s)}},a().createElement(Ne.Z,{checked:s.isChecked},a().createElement(Ct,{cardInfo:s},a().createElement("span",{className:"user-names"},a().createElement(De.Z,{dataType:"userName",value:s.user_id,name:s.user_name,type:s.source_type}))),s.department_names&&s.department_names.length>0?a().createElement("span",{className:"user-dept"},a().createElement(et.Z,{sourceType:s.source_type,list:s.leaf_department_ids,nameList:s.department_names})):null))):E==="user"&&T?n.map(s=>a().createElement("div",{className:"search-result-item",key:s.id,onClick:b=>{this.checkSingleUser(b,s)}},a().createElement("div",{className:"user-name"},a().createElement(Ct,{cardInfo:s},a().createElement(De.Z,{dataType:"userName",value:s.user_id,name:s.user_name,type:s.source_type}))),s.department_names&&s.department_names.length>0?a().createElement("span",{className:"user-name-dept"},a().createElement(et.Z,{sourceType:s.source_type,list:s.leaf_department_ids,nameList:s.department_names})):null)):E==="dept"?n.map(s=>a().createElement("div",{className:"search-result-dept-item",key:s.id,onClick:b=>{this.checkDept(b,s)}},a().createElement(Ne.Z,{checked:s.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},a().createElement(De.Z,{dataType:"departmentName",value:s.id,name:s.department_name,type:s.source_type})),s.path&&s.path.length>0?a().createElement(ze.Z,{title:s.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement(et.Z,{list:s.department_infos||[],displayAll:!0}))):null)),a().createElement("div",{className:"department-right"},"(",s.userCount,i("common.userUnit"),")"))):E==="post"?n.map(s=>a().createElement("div",{className:"search-result-dept-item",key:s.id,onClick:b=>{this.checkPost(b,s)}},a().createElement(Ne.Z,{checked:s.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},s.name),s.path&&s.path.length>0?a().createElement(ze.Z,{title:s.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement("span",null,s.path.join(">")))):null)),!m&&a().createElement("div",{className:"department-right"},"(",s.userCount,i("common.userUnit"),")"))):E==="group"?n.map(s=>a().createElement("div",{className:"search-result-dept-item",key:s.id,onClick:b=>{this.checkGroup(b,s)}},a().createElement(Ne.Z,{checked:s.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},s.name),s.path&&s.path.length>0?a().createElement(ze.Z,{title:s.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement("span",null,s.path.join(">")))):null)),a().createElement("div",{className:"department-right"},"(",s.userCount,i("common.userUnit"),")"))):E==="cluster"?n.map(s=>a().createElement("div",{className:"search-result-dept-item",key:s.id,onClick:b=>{this.checkedCluster(b,s)}},a().createElement(Ne.Z,{checked:s.isChecked,className:"department-left"},a().createElement("span",{className:"user-name"},s.name)),a().createElement("div",{className:"department-right"},"(",s.userCount,i("common.userUnit"),")"))):null}render(){var S=this.props,E=S.t,n=S.isSingle,i=this.getIsCheckedAll(),T=a().createElement("div",{className:"search-result-all"},a().createElement(Ne.Z,{checked:i,onClick:m=>this.checkedAll(m,!i)},E("common.all")));return a().createElement("div",{className:"search-result-container more-height"},this.props.list.length>0?a().createElement(a().Fragment,null,!n&&T,this.renderList()):a().createElement(K.Z,{tipText:E("component.searchUserEmpty")}))}}x.contextType=ce,x.defaultProps={list:[]};var F=(0,w.Z)()(x),ee=t(18329),oe=t(65202),G=t(91648),Y=f.Z.TabPane,me=l.Z.Option,Ee={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0 20px"},maskClosable:!1};class Ae extends a().Component{constructor(S){var E;super(S);E=this,this.onCancel=()=>{var n=this.props.onCancel;this.setState({showCancel:!1}),n&&this.props.onCancel()},this.onOk=()=>{var n=this.props.onOk,i=this.state.contextData;this.setState({showCancel:!1});var T=0;if(n){var m=[];i.checkedDept.map(re=>(T+=re.isChecked?re.user_count:0,re.isChecked&&re.authorized!=="false"?m.push((0,y.Z)((0,y.Z)({},re),{},{renderType:"dept"})):null));var s=[];i.checkedPost.map(re=>(T+=re.isChecked?re.user_count:0,re.isChecked?s.push((0,y.Z)((0,y.Z)({},re),{},{renderType:"post"})):null));var b=[];i.checkedGroup.map(re=>(T+=re.isChecked?re.user_count:0,re.isChecked?b.push((0,y.Z)((0,y.Z)({},re),{},{renderType:"group"})):null));var Q=[];i.checkedUser.map(re=>{if(!re.reserve)return T+=re.isChecked?1:0,re.isChecked?Q.push((0,y.Z)((0,y.Z)({},re),{},{renderType:"user"})):null});var q=[];i.checkedCluster.map(re=>{if(!re.reserve)return T+=re.isChecked?1:0,re.isChecked?q.push((0,y.Z)((0,y.Z)({},re),{},{renderType:"cluster"})):null});var ue=[];if(i.checkedClass.map(re=>{if(!re.reserve)return T+=re.isChecked?1:0,re.isChecked?ue.push((0,y.Z)((0,y.Z)({},re),{},{renderType:"class"})):null}),T>this.props.maxUserCount){M.default.warn(this.props.beyondLimitTip);return}n({dept:m,post:s,group:b,user:Q,cluster:q,classes:ue})}},this.getListParentId=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];i.forEach(ge=>{ge.isChecked=!0,ge.parentId=[""],ge.userCount=ge.userCount||ge.user_count||0});var Q=n.map(ge=>ge.id),q=m.map(ge=>ge.id);if(Q||q){var ue=z.ZP.OrgDialog.getDeptParent(),re={query_type:1,dept_ids:Q,user_ids:q};He.WY.post({url:ue,data:(0,y.Z)({},re)}).then(ge=>{var fe=ge.data.data;n.forEach(ye=>{ye.isChecked=!0;var de=fe.find(Te=>Te.id===ye.id)||{path:[]};ye.parentId=de.path[0]?de.path[0].split("/").slice(1):[],ye.userCount=de.user_count||ye.userCount||ye.user_count||0}),T.forEach(ye=>{ye.isChecked=!0;var de=fe.find(Te=>Te.id===ye.id)||{path:[]};ye.parentId=de.path[0]?de.path[0].split("/").slice(1):[],ye.userCount=ye.userCount||ye.user_count||0}),m.forEach(ye=>{ye.isChecked=!0;var de=[];fe.forEach(Te=>{Te.id===ye.id&&Te.path.map($e=>{de.push(...$e.split("/").slice(1))})}),ye.parentId=Array.from(new Set(de))}),s.forEach(ye=>{ye.isChecked=!0;var de=fe.find(Te=>Te.id===ye.id)||{path:[]};ye.parentId=de.path[0]?de.path[0].split("/").slice(1):[],ye.userCount=ye.userCount||ye.user_count||0}),b.forEach(ye=>{ye.isChecked=!0;var de=fe.find(Te=>Te.id===ye.id)||{path:[]};ye.parentId=de.path[0]?de.path[0].split("/").slice(1):[],ye.userCount=ye.userCount||ye.user_count||0}),E.setState({contextData:(0,y.Z)((0,y.Z)({},E.state.contextData),{},{checkedDept:n,checkedGroup:i,checkedPost:T,checkedUser:m,checkedCluster:s,checkedClass:b})})})}else i.length>0?E.setState({contextData:(0,y.Z)((0,y.Z)({},E.state.contextData),{},{checkedGroup:i})}):E.setState({contextData:(0,y.Z)((0,y.Z)({},E.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[]})})},this.initHidePostsStatus=n=>{var i=this.state.contextData;this.setState({contextData:(0,y.Z)((0,y.Z)({},i),{},{hidePosts:n})})},this.initTypeList=(n,i,T)=>{T.forEach(m=>{var s=this.findItemIndex(m.id,i);s===-1?m.isChecked=!1:m.isChecked=this.state.contextData[i][s].isChecked}),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[n]:T})})},this.initTypeUser=(n,i)=>{var T=i||[...this.state.contextData[n]],m=this.props.reserveUser;T.forEach(s=>{var b=this.findItemIndex(s.id,"checkedUser");m.findIndex(Q=>Q.id===s.id)!==-1&&(s.reserve=!0),b===-1?s.isChecked=!1:s.isChecked=this.state.contextData.checkedUser[b].isChecked}),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[n]:T})})},this.toggleDisplayItem=(n,i)=>{var T=this.findItemIndex(n.id,i);return T===-1?i.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[i]:this.checkListParentId(i,n),checkedUser:n.isChecked?this.checkParentId(this.state.contextData.checkedUser,n.id):this.state.contextData.checkedUser}:{[i]:[...this.state.contextData[i],n]}:i.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[i]:this.checkListParentId(i,n),checkedUser:n.isChecked?this.checkParentId(this.state.contextData.checkedUser,n.id):this.state.contextData.checkedUser}:{checkedUser:this.getNewList(n,"checkedUser",!0),[i]:this.getNewList(n,i)}},this.toggleDisplayList=(n,i,T,m,s,b,Q)=>{this.deleteAllName(i),this.deleteAllName(m),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[n]:i,[T]:m,[s]:b,checkedUser:Q})})},this.deleteAllName=n=>{n.map(i=>(i.all_name&&typeof i.all_name=="object"&&delete i.all_name,i))},this.checkUserOne=(n,i)=>{this.props.single?this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedUser:[n],[i]:i==="checkedUser"?[n]:this.getSingleUserList(n,i)})}):this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),this.toggleDisplayItem(n,i))})},this.dealAuthorizedFalseChecked=function(){var n=(0,$.Z)(L().mark(function i(T){var m,s,b,Q,q,ue,re,ge,fe;return L().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return m=E.state.contextData,s=m.cacheId,b=m.checkedDept,Q=m.checkedUser,q={checkedDept:[],checkedUser:[]},de.prev=2,de.next=5,Dt({departmentId:T.id,cache_id:s});case 5:ue=de.sent,re=ue.data,ge=re.departments,fe=re.users,ge.push(T),ge.map(Te=>(Te.isChecked=!0,Te.name=Te.department_name,Te.parentId=Te.parent_ids.split("/"),Te.parentAuthorize=!1,Te.userCount=Te.user_count,Te)),fe.map(Te=>(Te.isChecked=!0,Te.name=Te.user_name,Te.parentAuthorize=!1,E.toggleDisplayItem(Te,"deptUser"),Te)),q=(0,y.Z)((0,y.Z)({},q),{},{checkedUser:B()(fe,Q,"id"),checkedDept:B()(ge,b,"id")}),de.next=16;break;case 13:de.prev=13,de.t0=de.catch(2),console.error("\u83B7\u53D6\u90E8\u95E8\u7BA1\u8F96\u8303\u56F4\u51FA\u9519",de.t0);case 16:return de.abrupt("return",q);case 17:case"end":return de.stop()}},i,null,[[2,13]])}));return function(i){return n.apply(this,arguments)}}(),this.dealAuthorizedFalseUnChecked=n=>{var i=this.state.contextData,T=i.checkedDept,m=i.checkedUser,s=i.deptUser,b=[],Q=T.filter(ue=>ue.parent_ids.split("/").indexOf(n.id)===-1),q=m.filter(ue=>{var re=ue.department_ids.indexOf(n.id)===-1;return re||b.push(ue.id),re});return{checkedDept:Q,checkedUser:q,deptUser:b.length>0?s.map(ue=>(b.indexOf(ue.id)>-1&&(ue.isChecked=!1),ue)):s}},this.checkListOne=function(){var n=(0,$.Z)(L().mark(function i(T,m,s){var b;return L().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(b={checkedDept:[],checkedUser:[]},!(T.authorized==="false"&&m==="checkedDept")){q.next=12;break}if(!T.isChecked){q.next=8;break}return q.next=5,E.dealAuthorizedFalseChecked(T);case 5:q.t0=q.sent,q.next=9;break;case 8:q.t0=E.dealAuthorizedFalseUnChecked(T);case 9:b=q.t0,q.next=14;break;case 12:T.parentAuthorize===!1&&T.isChecked===!1&&E.unCheckedParentDept(T,m),b=(0,y.Z)({[s]:E.getNewList(T,s,!1)},E.toggleDisplayItem(T,m));case 14:E.setState({contextData:(0,y.Z)((0,y.Z)({},E.state.contextData),b)});case 15:case"end":return q.stop()}},i)}));return function(i,T,m){return n.apply(this,arguments)}}(),this.removeCheckedUser=n=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedUser:this.getNewList(n,"checkedUser"),deptUser:this.getNewList(n,"deptUser"),postUser:this.getNewList(n,"postUser"),groupUser:this.getNewList(n,"groupUser"),searchResult:this.getNewList(n,"searchResult")})})},this.unCheckedParentDept=(n,i)=>{var T=this.state.contextData.checkedDept,m=T.filter(Q=>Q.authorized==="false"&&i==="checkedUser"?n.department_ids.indexOf(Q.id)>-1:i==="checkedDept"?n.parentId.indexOf(Q.id)>-1:!1),s=(0,R.Z)(m,1),b=s[0];b&&(b.isChecked=!1,this.toggleDisplayItem(b,"checkedDept"),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedDept:m})}))},this.checkListParentId=(n,i)=>{var T=[...this.state.contextData[n]],m=this.findItemIndex(i.id,n);return T.forEach(s=>{s.id!==i.id&&s.parentId.indexOf("".concat(i.id))!==-1?s.isChecked=!1:s.id===i.id&&(s.isChecked=i.isChecked)}),m===-1&&T.push(i),T},this.checkParentId=(n,i)=>{var T=[];return n.forEach(m=>{var s=typeof m.parentId!="undefined"?m.parentId:m.department_ids||[];s.indexOf(i)===-1&&T.push(m)}),T},this.getNewList=(n,i,T)=>{var m=[...this.state.contextData[i]],s=this.findItemIndex(n.id,i);return s===-1?T&&m.push(n):m[s].isChecked=n.isChecked,m},this.getSingleUserList=(n,i)=>{var T=[...this.state.contextData[i]];return T.forEach(m=>{m.id===n.id?m.isChecked=n.isChecked:m.isChecked=!1}),T},this.findItemIndex=(n,i)=>this.state.contextData[i].findIndex(T=>T.id===n),this.clearTabPanelList=(n,i)=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[n]:[],[i]:[]})})},this.getTabs=()=>{var n=[],i,T,m=this.props,s=m.t,b=m.filterAuthOpen,Q=m.disableHidden,q=m.scrollFlag,ue=this.state.contextData,re=ue.canUseGroups,ge=ue.canUseClass;return this.state.displayType.forEach(fe=>{switch(fe){case"dept":n.push({label:s("component.orgDialogDeptLabel"),key:"dept",defaultBreadNav:{value:"",label:"",sourceType:""},queryType:1});break;case"group":n.push({label:s("component.orgDialogGroupLabel"),key:"group",queryType:2,defaultBreadNav:{value:"",label:s("component.userGroup")}});break;case"post":n.push({label:s("component.orgDialogPostLabel"),key:"post",defaultBreadNav:{value:"1",label:s("common.post")},queryType:3});break;case"cluster":re&&n.push({label:s("component.orgDialogClusterLabel"),key:"cluster",defaultBreadNav:{value:"",label:""},queryType:4});break;case"class":ge&&n.push({label:s("component.orgDialogClassLabel"),key:"class",defaultBreadNav:{value:"",label:""},queryType:5});break}}),n.length===1?T=a().createElement(Kt,{defaultBreadNav:n[0].defaultBreadNav,queryType:n[0].queryType,type:n[0].key,filterAuthOpen:b,disableHidden:Q,scrollFlag:q}):(i=n.map(fe=>a().createElement(Y,{tab:fe.label,key:fe.key},a().createElement(Kt,{defaultBreadNav:fe.defaultBreadNav,queryType:fe.queryType,type:fe.key,filterAuthOpen:b,disableHidden:Q,scrollFlag:q}))),T=a().createElement(f.Z,null,i)),T},this.handleSearch=(n,i)=>{var T=this.state.selectType;T==="user"?this.getUserList(n,i):T==="dept"?this.getDeptList(n):T==="post"?this.getPostList(n):T==="cluster"?this.getClusterResult(n):T==="class"?this.getClassResult(n):this.getGroupList(n)},this.getClusterResult=n=>{var i=z.ZP.OrgDialog.getClusterList(),T={keyword:n};He.WY.get({url:i,params:T}).then(m=>{this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedCluster",m.data.data.map(s=>({name:s.name,userCount:s.user_count,id:s.id,parentId:[""]})))})},this.getUserList=(n,i)=>{var T=z.ZP.OrgDialog.getUserByName(),m={user_name:i===""?n:"",filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType,userIds:i};He.WY.get({url:T,params:m}).then(s=>{s.data.users&&s.data.users.forEach(b=>{b.name=b.user_name}),this.setState({showCancel:!0}),this.initTypeUser("searchResult",s.data.users||[])})},this.getDeptList=n=>{var i=z.ZP.Organization.queryDept(),T={department_name:n,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};He.WY.get({url:i,params:T}).then(m=>{m.data.departments&&m.data.departments.forEach(s=>{s.name=s.department_name,s.parentId=s.parent_ids?s.parent_ids.split("/"):[],s.userCount=s.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedDept",m.data.departments||[])})},this.getPostList=n=>{var i=z.ZP.Organization.addPost(),T={post_name:n,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};He.WY.get({url:i,params:T}).then(m=>{m.data.posts&&m.data.posts.forEach(s=>{s.name=s.post_name,s.parentId=s.parent_id?s.parent_id.split("/"):[],s.userCount=s.user_count}),this.setState({hidePosts:m.data.hide_posts,showCancel:!0}),this.initTypeList("searchResult","checkedPost",m.data.posts||[])})},this.getGroupList=n=>{var i=z.ZP.Organization.getGroupList(),T={group_name:n,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};He.WY.get({url:i,params:T}).then(m=>{m.data.groups&&m.data.groups.forEach(s=>{s.name=s.group_name,s.parentId=s.parent_id?s.parent_id.split("/"):[],s.userCount=s.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedGroup",m.data.groups||[])})},this.checkAllResult=n=>{var i=this.state,T=i.selectType,m=i.contextData,s="checked".concat(T.charAt(0).toUpperCase()).concat(T.substr(1)),b=[...m[s]],Q=m.searchResult.map(ue=>{ue.isChecked=n;var re=b.findIndex(ge=>ge.id===ue.id);return re!==-1?b[re].isChecked=n:b.push(ue),ue}),q=b;this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[s]:q,searchResult:Q})})},this.clearSelectedAll=()=>{var n=this.state.contextData,i=n.checkedDept,T=n.checkedGroup,m=n.checkedPost,s=n.checkedUser,b=n.checkedCluster,Q=n.checkedClass,q=n.deptList,ue=n.groupList,re=n.postList,ge=n.clusterList,fe=n.classList,ye=n.deptUser,de=n.groupUser,Te=n.postUser,$e=nt=>(nt.forEach(it=>{it.isChecked=!1}),nt);this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],deptList:i.length>0?$e(q):q,groupList:T.length>0?$e(ue):ue,postList:m.length>0?$e(re):re,clusterList:b.length>0?$e(ge):ge,classList:Q.length>0?$e(fe):fe,deptUser:s.length>0?$e(ye):ye,groupUser:s.length>0?$e(de):de,postUser:s.length>0?$e(Te):Te})})},this.handleCancel=()=>{this.setState({showCancel:!1})},this.handleSelectChange=n=>{this.setState({selectType:n,contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{searchResult:[]})})},this.state={title:S.title||S.t("component.chooseAssignScope"),displayType:S.displayType?S.displayType:["dept"],selectType:"user",showCancel:!1,hidePosts:!1,contextData:{showUserCount:S.showUserCount,deptList:[],groupList:[],postList:[],clusterList:[],classList:[],deptUser:[],groupUser:[],postUser:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[],onlyUser:S.onlyUser,onlyDept:S.onlyDept,onlyPost:S.onlyPost,canUseGroups:S.useGroups,canUseClass:S.useClass,single:S.single,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,userType:this.props.userType,initTypeList:this.initTypeList,initTypeUser:this.initTypeUser,toggleDisplayItem:this.toggleDisplayItem,toggleDisplayList:this.toggleDisplayList,checkListOne:this.checkListOne,checkUserOne:this.checkUserOne,removeCheckedUser:this.removeCheckedUser,clearTabPanelList:this.clearTabPanelList,maxDeptUserCount:S.maxDeptUserCount,hidePosts:!1,initHidePostsStatus:this.initHidePostsStatus,cacheId:(0,G.Z)(),clearSelectedAll:this.clearSelectedAll}}}componentDidUpdate(S){if(S.visible!==this.props.visible&&this.props.visible){var E=this.props.initData,n=E.dept,i=E.group,T=E.post,m=E.user,s=E.cluster,b=E.classes;console.warn(m,"user");var Q=this.props,q=Q.reserveUser,ue=Q.t,re=Q.onlyDept,ge=Q.onlyPost;q.forEach(fe=>{fe.reserve=!0}),this.setState({title:this.props.title||ue("component.chooseAssignScope"),displayType:this.props.displayType?this.props.displayType:["dept"],selectType:ge?"post":re?"dept":"user",contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{deptList:[],groupList:[],postList:[],deptUser:[],clusterList:[],classList:[],groupUser:[],postUser:[],searchResult:[],onlyUser:this.props.onlyUser,onlyDept:this.props.onlyDept,canUseGroups:this.props.useGroups,canUseClass:this.props.useClass,onlyPost:this.props.onlyPost,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,cacheId:(0,G.Z)()})},()=>{this.getListParentId(n,i,T,m.concat(q),s,b)})}}componentWillUnmount(){$t({cacheId:this.state.contextData.cacheId}).then(()=>{console.warn("\u6E05\u9664\u7F13\u5B58\u6210\u529F")}).catch(S=>{console.error("\u6E05\u9664\u7F13\u5B58\u5931\u8D25",S)})}render(){var S=this.getTabs(),E=this.props,n=E.t,i=E.onlyUser,T=E.onlyDept,m=E.onlyPost,s=E.displayType,b=E.useGroups,Q=E.useClass,q=E.onlyChoosePost,ue=(0,oe.p)(),re=this.state,ge=re.showCancel,fe=re.selectType,ye=re.hidePosts;return Ee.okText=this.props.okText||n("common.ok"),a().createElement(ee.ZP,(0,j.Z)({},Ee,this.props.modalConfig,{visible:this.props.visible,title:this.state.title,wrapClassName:[this.props.className,"cl-org-modal"],onCancel:this.onCancel,onOk:this.onOk}),a().createElement(ce.Provider,{value:this.state.contextData},a().createElement("div",{className:"cl-org"},a().createElement("div",{className:"cl-org-left"},this.props.visible?a().createElement("div",{className:"cl-org-left__top"},a().createElement(ne.Z.Group,{compact:!0},a().createElement(l.Z,{className:"cl-org-left__top__select",value:fe,style:{width:80},onChange:this.handleSelectChange},a().createElement(me,{value:"user",disabled:T||m||q},n("authGroup.userLabel")),a().createElement(me,{value:"dept",disabled:i||q},n("setting.deptLabel")),a().createElement(me,{value:"post",disabled:!m&&(T||i)||s.length===1},n("common.post")),a().createElement(me,{value:"group",disabled:T||i||s.length===1||q},n("component.userGroup")),b?a().createElement(me,{value:"cluster"},n("component.useCluster")):null,Q?a().createElement(me,{value:"class"},n("component.useClass")):null),a().createElement(A,{selectType:fe,onSearch:this.handleSearch,showCancel:ge,disableChange:this.props.disableChange})),ge?a().createElement("div",{className:"cl-org-left__top__cancel",onClick:this.handleCancel,style:{color:ue}},n("common.cancel")):null):null,ge?a().createElement(F,{isSingle:this.props.single,list:this.state.contextData.searchResult,userListType:fe,checkedAll:this.checkAllResult,hidePosts:ye}):S),a().createElement("div",{className:"cl-org-right"},a().createElement(C,null)))))}}Ae.defaultProps={visible:!0,showUserCount:!0,displayType:["dept","group","post","cluster","class"],initData:{dept:[],post:[],group:[],user:[],cluster:[],classes:[]},reserveUser:[],onlyUser:!1,onlyDept:!1,onlyPost:!1,useGroups:!1,useClass:!1,asyncDeptTree:!0,userType:"active",single:!1,maxUserCount:Infinity,filterAuthOpen:!1,disableHidden:!1,beyondLimitTip:"",onOk:()=>{},modalConfig:{},maxDeptUserCount:0,onlyChoosePost:!1,scrollFlag:!1};var Ue=(0,w.Z)()(Ae)},36202:function(we,le,t){"use strict";t.d(le,{f:function(){return O}});var j=t(62029),N=t(57361),ne=t(33565),R=t(9754),$=t.n(R),W=t(12924),M=t.n(W),y=t(28175),p=t(41647),l=t(93485);function P(B){var I={};if(B.length===0)return I;var U=(0,l.Z)(B),se;try{for(U.s();!(se=U.n()).done;){var X=se.value,ie=X,z=ie.field,ae=ie.fixed,V=ie.order,ve=ie.show;ve?ve==="true"||ve===!0?I[z]={fixed:ae,order:V,show:!0}:I[z]={fixed:ae,order:V,show:!1}:I[z]={fixed:ae,order:V,show:!0}}}catch(ce){U.e(ce)}finally{U.f()}return I}function f(B){var I=[],U=Object.entries(B);if(U.length===0)return I;for(var se=0,X=U;se<X.length;se++){var ie=X[se],z=(0,ne.Z)(ie,2),ae=z[0],V=z[1],ve=V.fixed,ce=V.order,be=V.show;I.push({field:ae,show:be,fixed:ve,order:ce})}return I}var e=t(38642),L=(B,I)=>{var U=(0,W.useState)(B),se=(0,ne.Z)(U,2),X=se[0],ie=se[1];return(0,W.useEffect)(()=>{var z=setTimeout(()=>{ie(B)},I);return()=>{clearTimeout(z)}},[B,I]),X},u=L;function a(B,I){var U=useRef(I);useEffect(()=>{U.current=I},[I]),useEffect(()=>{var se=X=>{var ie,z;console.warn(B.current,"node.current",X.target),!((ie=(z=B.current)===null||z===void 0?void 0:z.contains(X.target))!==null&&ie!==void 0?ie:!1)&&U.current&&U.current()};return document.addEventListener("mousedown",se),()=>{document.removeEventListener("mousedown",se)}},[B])}var w=!1;function O(B){var I=(0,W.useState)({}),U=(0,ne.Z)(I,2),se=U[0],X=U[1],ie=B.prefixCls,z=B.rowKey,ae=B.columnEmptyText,V=B.pagination,ve=B.headerTitle,ce=B.toolBarRender,be=B.size,Ie=B.loading,De=Ie===void 0?!1:Ie,xe=B.tableUUID;xe||console.error("tableUUID is required!!!"),(0,W.useEffect)(()=>{function Ne(Je){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,N.Z)($().mark(function Je(qe){var ze,tt,Qe,ct,ft,dt,ht,gt;return $().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=2,(0,e.Kb)((0,p.U)(qe));case 2:if(ze=Ke.sent,tt=(0,ne.Z)(ze,2),Qe=tt[0],ct=tt[1],!Qe){Ke.next=8;break}return Ke.abrupt("return");case 8:ft=ct.data,dt=ft.data,ht=dt.fields,gt=P(ht)||{},gt&&(w=!1,X(gt));case 13:case"end":return Ke.stop()}},Je)})),Fe.apply(this,arguments)}return xe&&Ne(xe),()=>{w=!1}},[xe]);var Oe=u(se,1e3);(0,W.useEffect)(()=>{!w||(0,p.I)(xe,f(se))},[Oe]);function je(Ne){w=!0,X(Ne)}return M().createElement("div",{className:"SampleProTable_container ".concat(B.className)},M().createElement(y.ZP,(0,j.Z)({size:be||"middle",rowKey:z||"id",columnEmptyText:ae||!1,pagination:V||!1,options:{density:!1,fullScreen:!1,reload:!1,setting:!0},search:!1,loading:De,headerTitle:ve||"",toolBarRender:ce||null,columnsStateMap:se,onColumnsStateChange:je},B,{className:"".concat(ie,"-table")})))}},41647:function(we,le,t){"use strict";t.d(le,{I:function(){return ne},U:function(){return R}});var j=t(37055),N=t(10237);function ne($){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=j.ZP.tableHeader.save(),y={fields:W,key:$};return N.WY.post({url:M,data:y})}function R($){var W=j.ZP.tableHeader.get($);return N.WY.get({url:W})}},16598:function(we,le,t){"use strict";var j=t(59250),N=t(13013),ne=t(30887),R=t(99210),$=t(62029),W=t(12924),M=t.n(W),y=t(57254),p=t(91768),l=t(26096),P=(e,L)=>{var u=e.map(a=>M().createElement(l.Z,(0,$.Z)({},a,{type:L,key:a.key||a.type})));return L==="more"?M().createElement(R.Z,null,u):u},f=e=>{var L=e.buttons,u=e.t,a=e.visibleNum,w=L.filter(U=>U.visible),O=a||1,B=[],I=[];if(w.length<=O)I=[...w];else if(w.length>O)I=[...w.slice(0,O)],B=[...w.slice(O)];else return"/";return M().createElement("div",{className:"cl-table__cell-action"},P(I),I.some(U=>U.visible)&&B.some(U=>U.visible)?M().createElement(M().Fragment,null,M().createElement("span",{className:"cl-pointer-divide"}),M().createElement(N.Z,{overlay:P(B,"more")},M().createElement("span",{className:"cl-pointer"},u("common.more")," ",M().createElement(y.Z,null)))):null)};f.defaultProps={visibleNum:1},le.Z=(0,p.Z)()(f)},99891:function(we,le,t){"use strict";var j=t(12924),N=t.n(j),ne=t(28216),R=t(91768),$=t(37055),W=t(10237),M=t(60667);class y extends N().PureComponent{constructor(P){super(P);this.getWaterMarkText=f=>{var e=this.props.userInfo,L=e.jobNumber,u=localStorage.getItem("waterMarkPostName"),a=[],w=f.find(B=>B.type==="content_setting"),O=f.find(B=>B.type==="content_custom");return w.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),O.param.checked==="true"&&O.param.comment[0]!==""&&this.setState({commentText:O.param.comment[0]}),w.param.comment.indexOf("position")!==-1&&u&&u!==""&&a.push("".concat(u)),w.param.comment.indexOf("jobnumber")!==-1&&L&&L!==""&&a.push("".concat(L)),a.join("-")},this.getWaterMarkApplication=f=>{var e=this.props.scenes,L=f.find(u=>u.type==="application_scenario");L.param.comment.indexOf(e)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=f=>{var e=f.find(L=>L.type==="dispersive");this.setState({isDispersive:e.param.checked==="true"})},this.getDynamicSet=()=>{var f=$.ZP.advancedSetting.dynamicWaterMarkNew(),e={access_token:window.localStorage.getItem("token")};W.WY.get({url:f,params:e}).then(L=>{var u=JSON.parse(L.data.actions);this.setState({waterMarkText:this.getWaterMarkText(u),actions:u}),this.getWaterMarkApplication(u),this.getWaterIsDispersive(u)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var P=localStorage.getItem("waterMarkPostName");P===""||P===null?this.getPostName():this.getDynamicSet()}getPostName(){var P=$.ZP.advancedSetting.getPostName();W.WY.get({url:P}).then(f=>{localStorage.setItem("waterMarkPostName",f.data.post_names[0]||""),this.getDynamicSet()})}render(){var P=this.state,f=P.showWaterMark,e=P.waterMarkCount,L=P.isUserName,u=P.isDispersive,a=P.waterMarkText,w=P.actions,O=P.commentText,B=this.props.userInfo,I=B.name,U=B.unionid,se=B.sourceType;return N().createElement("div",{className:"common-watermark"},f&&new Array(e).fill(0).map((X,ie)=>N().createElement("div",{key:ie,className:"common-watermark-item ".concat(u?"isDispersive":"")},N().createElement("span",{className:"common-watermark-item-content"},O!==""&&N().createElement("span",{className:"item-part"},O),L&&N().createElement("span",null,O!==""&&N().createElement("span",null,"-"),N().createElement(M.Z,{dataType:"userName",value:U,name:I,type:se})),N().createElement("span",{className:"item-part"},(L||O!=="")&&a!==""&&N().createElement("span",null,"-"),a)))))}}var p=l=>({userInfo:l.user});le.Z=(0,ne.$j)(p)((0,R.Z)()(y))},80430:function(we,le,t){"use strict";var j=t(12924),N=t.n(j),ne=t(60667),R=$=>{var W=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},e=f.department_ids.split("/"),L=f.department_names.split("/"),u=e.map((a,w)=>N().createElement(ne.Z,{key:a,dataType:"departmentName",value:a,name:L[w],type:f.source_type}));return N().createElement(N().Fragment,null,u.map((a,w)=>N().createElement("span",{key:a},a,w===L.length-1?"":"/")))},M=P=>N().createElement(ne.Z,{dataType:"departmentName",value:P.department_id,name:P.department_name,type:P.source_type}),y=()=>{var P=$.list,f=P===void 0?[]:P,e=$.isBlock;if(!f.length)return null;var L=f.map(u=>W(u));return L.length&&L.length>1?N().createElement(N().Fragment,null,L.map((u,a)=>e?N().createElement("div",{key:u},u):N().createElement("span",{key:u},u,a===L.length-1?"":"\uFF0C"))):N().createElement(N().Fragment,null,L[0]||"")},p=()=>{var P=$.list,f=$.nameList,e=$.sourceType,L=$.isBlock,u=P.map((a,w)=>M({department_id:a,department_name:f[w],source_type:e}));return N().createElement(N().Fragment,null,u.map((a,w)=>L?N().createElement("div",{key:a},a):N().createElement("span",{key:a},a,w===u.length-1?"":"\uFF0C")))},l=()=>$.displayAll?y():p();return l()};R.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},le.Z=R},60667:function(we,le,t){"use strict";t.d(le,{Z:function(){return y}});var j=t(33565),N=t(12924),ne=t.n(N),R=t(28216);function $(p){var l=p.type,P=p.openid,f=p.from,e=(0,N.useRef)(null);return(0,N.useLayoutEffect)(()=>{f==="vue"?window.parent.WWOpenData.bind(e.current):WWOpenData.bind(e.current)}),ne().createElement("ww-open-data",{ref:e,type:l,openid:P})}var W=p=>{var l=p.wxWorkApiFlag,P=p.appType,f=p.from,e=(0,N.useState)(!1),L=(0,j.Z)(e,2),u=L[0],a=L[1];(0,N.useEffect)(()=>{var B=localStorage.getItem("qyWechatBook");(P!=="wx_app"||l||B==="false"||f==="vue"||f==="taro")&&a(!0)},[l,P,f]);var w=(0,N.useCallback)(()=>{var B=p.type,I=p.value,U=p.name,se=U===void 0?"":U;switch(console.warn(p,"props"),B){case"wx_sync":{var X=p.dataType;return I?ne().createElement($,{from:f,type:X,openid:I}):se}default:return se}},[p]),O=()=>{var B=p.name,I=p.dataType,U=localStorage.getItem("qyWechatBook");if(I===""||U==="false")return B;if(f==="vue"||f==="taro")return w();switch(p.appType){case"wx_app":return w();default:return B}};return u?O():p.name};W.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var M=p=>({appType:p.user.appType,wxWorkApiFlag:p.user.wxWorkApiFlag}),y=(0,R.$j)(M)(W)},70075:function(we,le,t){"use strict";t.d(le,{a:function(){return L}});var j=t(62029),N=t(33565),ne=t(81211),R=t(47673),$=t(4107),W=t(12924),M=t.n(W),y=t(47444),p=t(60006),l=t.n(p),P=t(43859),f=$.Z.TextArea;function e(u){var a=u.char,w=u.displayType,O=u.LimitLength,B=u.value,I=u.valueSlice,U=u.showCount,se=u.onChange,X=u.disabledInput,ie=(0,ne.Z)(u,["char","displayType","LimitLength","value","valueSlice","showCount","onChange","disabledInput"]),z=(0,W.useState)(()=>I?(0,y.B)({value:B,LimitLength:O,char:a}):u.defaultValue||""),ae=(0,N.Z)(z,2),V=ae[0],ve=ae[1],ce=(0,W.useRef)({evtName:""});(0,W.useEffect)(()=>{ve(I?(0,y.B)({value:B,LimitLength:O,char:a,disabledInput:X}):B)},[B,O,a,I,X]),(0,W.useEffect)(()=>{if(ce.current.evtName==="input"){w==="Custom"?u.onFieldChange(V):se(V),u.onInput&&u.onInput(V),ce.current.evtName="";return}I&&(w==="Custom"?u.onFieldChange(V):se(V),u.onInput&&u.onInput(V))},[V,w,I]);var be=Oe=>{ce.current.evtName="input";var je=Oe.target,Ne=je.value,Fe=(0,y.B)({value:Ne,LimitLength:O,char:a,disabledInput:X});ve(Fe)},Ie=(0,W.useMemo)(()=>(0,y.S)({inputValue:V,LimitLength:O,char:a,showCount:U,disabledInput:X}),[V,O,a,U,X]),De=Ie.dataCount,xe=Ie.usedLength;return M().createElement("div",{className:"".concat(l()["textarea-wrap"]," ").concat(xe&&O&&xe>O?l()["textarea-wrap-error"]:""),"data-count":De},w==="Custom"?M().createElement(f,(0,j.Z)({},ie,{value:V,onInput:be})):M().createElement(f,(0,j.Z)({},ie,{value:V,onInput:be})))}e.defaultProps={valueSlice:!1,disabledInput:!0,onChange:()=>{},onInput:()=>{},char:!1,autoSize:{minRows:4,maxRows:10},displayType:""};var L=e;le.Z=(0,P.Z)(e)},7584:function(we,le,t){"use strict";t.d(le,{t:function(){return L}});var j=t(47673),N=t(4107),ne=t(62029),R=t(33565),$=t(81211),W=t(12924),M=t.n(W),y=t(80991),p=t(47444),l=t(60006),P=t.n(l),f=t(43859);function e(u){var a=u.isPreview,w=u.char,O=u.displayType,B=u.width,I=u.LimitLength,U=u.showCount,se=u.value,X=u.valueSlice,ie=u.onChange,z=u.disabledInput,ae=(0,$.Z)(u,["isPreview","char","displayType","width","LimitLength","showCount","value","valueSlice","onChange","disabledInput"]),V=(0,W.useState)(()=>X?(0,p.B)({value:se,LimitLength:I,char:w}):u.defaultValue||""),ve=(0,R.Z)(V,2),ce=ve[0],be=ve[1],Ie=(0,W.useRef)({evtName:""});(0,W.useEffect)(()=>{be(X?(0,p.B)({value:se,LimitLength:I,char:w,disabledInput:z}):se)},[se,I,w,X,z]),(0,W.useEffect)(()=>{if(Ie.current.evtName==="input"){O==="Custom"?u.onFieldChange(ce):ie(ce),u.onInput&&u.onInput(ce),Ie.current.evtName="";return}X&&(O==="Custom"?u.onFieldChange(ce):ie(ce),u.onInput&&u.onInput(ce))},[ce,O,X]);var De=Fe=>{Ie.current.evtName="input";var Je=Fe.target,qe=Je.value,ze=(0,p.B)({value:qe,LimitLength:I,char:w,disabledInput:z});be(ze)},xe=(0,W.useMemo)(()=>(0,p.S)({inputValue:ce,LimitLength:I,char:w,showCount:U,disabledInput:z}),[ce,I,w,U,z]),Oe=xe.dataCount,je=xe.usedLength,Ne=(0,W.useRef)(null);return(0,W.useEffect)(()=>{Ne&&Ne.current&&(u.autoFocus==="true"?Ne.current.focus():Ne.current.blur())},[u.autoFocus]),M().createElement("div",{className:"".concat(P()["input-wrap"]," ").concat(je&&I&&je>I?P()["input-wrap-error"]:""),"data-count":Oe,style:{width:B||void 0}},O==="Custom"?M().createElement(N.Z,(0,ne.Z)({},ae,{value:ce,disabled:a,onInput:De})):M().createElement(N.Z,(0,ne.Z)({},ae,{value:ce,ref:Ne,disabled:a,onInput:De})))}e.defaultProps={valueSlice:!1,disabledInput:!0,onChange:()=>{},onInput:()=>{},char:!1,LimitLength:void 0,showCount:!1,displayType:"",width:void 0};var L=e;le.Z=(0,f.Z)((0,y.$j)(e))},47444:function(we,le,t){"use strict";t.d(le,{B:function(){return N},S:function(){return ne}});var j=t(2396);function N(R){var $=R.value,W=R.LimitLength,M=R.char,y=R.disabledInput,p=$&&typeof $=="string"?$:"",l=p;return y&&M&&W&&(0,j.$s)(l)>W&&(l=p.substring(0,(0,j.rw)(p,W))),l}function ne(R){var $=R.inputValue,W=R.LimitLength,M=R.char,y=R.showCount,p="",l=$&&typeof $=="string"?$:"",P=M?Math.ceil((0,j.$s)(l)):l.length;return y&&W&&(p="".concat(P,"/").concat(W)),{dataCount:p,usedLength:P}}},48479:function(we,le,t){"use strict";var j=t(62029),N=t(57361),ne=t(47673),R=t(4107),$=t(9754),W=t.n($),M=t(12924),y=t.n(M),p=t(91768),l=t(94184),P=t.n(l),f=t(28216),e=t(84874),L=t(67222),u=t(2396),a=R.Z.Search;class w extends y().Component{constructor(B){var I;super(B);I=this,this.clear=()=>{this.setState({searchValue:""})},this.renderEnterButton=()=>y().createElement(e.Z,{iconClass:"icon-icon_serarchx1"}),this.handleSearch=function(){var U=(0,N.Z)(W().mark(function se(X){var ie,z,ae,V,ve,ce,be,Ie,De;return W().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(ie=I.props,z=ie.appType,ae=ie.exChange,V=ie.appId,ve=localStorage.getItem("qyWechatBook"),ce="",be=z==="wx_app"&&ve==="true"&&ae&&V==="9005",!(X&&be)){Oe.next=17;break}return Oe.prev=5,Oe.next=8,(0,L.F_)(X);case 8:Ie=Oe.sent,De=Ie.data,De.success?ce=De.data:ce="",Oe.next=17;break;case 13:Oe.prev=13,Oe.t0=Oe.catch(5),console.error(Oe.t0),ce="";case 17:I.props.onSearch(X,ce);case 18:case"end":return Oe.stop()}},se,null,[[5,13]])}));return function(se){return U.apply(this,arguments)}}(),this.handleChange=U=>{var se=U.target.value,X=U.type,ie=se;this.props.LimitLength&&(0,u.$s)(se)>this.props.LimitLength&&(ie=se.substring(0,(0,u.rw)(se,this.props.LimitLength))),this.setState({searchValue:ie});var z=!1;this.props.onSearch&&(X==="click"&&(z=!0),this.props.immediate&&X==="change"&&(z=!0)),z&&this.handleSearch(se)},this.state={searchValue:""}}componentDidMount(){this.props.onRef&&this.props.onRef(this)}componentWillReceiveProps(B){B.onRef&&B.onRef(this)}render(){var B=this.state.searchValue,I=this.props,U=I.prefixCls,se=I.placeholder,X=I.width,ie=I.maxLength,z=ie===void 0?400:ie,ae=I.height,V=I.immediate,ve=I.value,ce=P()(["".concat(U)]),be={width:X,height:ae},Ie={};return ve&&(Ie.value=ve),y().createElement(a,(0,j.Z)({className:ce,style:be,value:B,placeholder:se,onSearch:this.handleSearch,onChange:this.handleChange,maxLength:z,allowClear:!0,defaultValue:ve,immediate:V.toString()},Ie))}}w.defaultProps={prefixCls:"cl-search-input",placeholder:"Search",value:null,onSearch:()=>{},onChange:()=>{},immediate:!1,onRef:()=>{}},le.Z=(0,f.$j)(O=>({appType:O.user.appType,appId:O.user.appId}))((0,p.Z)()(w))},76466:function(we,le,t){"use strict";t.d(le,{Z:function(){return Qt}});var j=t(20228),N=t(11382),ne=t(57663),R=t(71577),$=t(62029),W=t(57361),M=t(9754),y=t.n(M),p=t(12924),l=t.n(p),P=t(91512),f=t(68654),e=t(91768),L=t(4412),u=t.n(L);class a extends l().Component{render(){var g=this.props.t;return l().createElement("div",{className:"net-preview"},l().createElement("div",{className:"net-preview-center"},l().createElement("img",{src:u(),alt:"picture"}),l().createElement("h2",null,g("localStorage.tip")),l().createElement("p",null,g("localStorage.banPreview"))))}}var w=(0,e.Z)()(a),O=t(88986),B=t(34792),I=t(48086),U=t(28216),se=t(21594),X=t(41225),ie=t(10237),z=(Se,g)=>(0,O.Z)({id:Se||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},g),ae=z;class V extends p.Component{constructor(){super(...arguments);this.setupPlayer=g=>{var C=this.props,d=C.onVideoReady,o=d===void 0?()=>{}:d,h=C.playerConfig,_=C.contentType;g&&g==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,O.Z)((0,O.Z)({},h),{},{contentType:_==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:h.source,autoplay:h.autoplay,width:h.width,id:h.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:A=>{A.on("sourceloaded",K=>{var x=K.paramData,F=x.desc,ee=x.definition;A.getComponent("VideoQuality")&&A.getComponent("VideoQuality").setCurrentQuality(F,ee,h.id)}),A.on("ready",()=>{o()}),this.playerInstance=A,this.setPlayerConfig()}}))}}componentDidUpdate(g){g.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(g){this.player&&this.player.seek(g)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(g){this.player.setSpeed(g)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var g=this.props,C=g.onPlay,d=C===void 0?()=>{}:C,o=g.onTimeUpDate,h=o===void 0?()=>{}:o,_=g.onEnd,A=_===void 0?()=>{}:_,K=g.onPause,x=K===void 0?()=>{}:K,F=g.onError,ee=F===void 0?()=>{}:F,oe=this.playerInstance;oe.on("play",()=>{d()}),oe.on("pause",()=>{x()}),oe.on("timeupdate",G=>{h(G)}),oe.on("ended",()=>{A()}),oe.on("error",(0,W.Z)(y().mark(function G(){return y().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:ee();case 1:case"end":return me.stop()}},G)})))}render(){var g=this.props.playerConfig;return l().createElement("div",{className:"common-video-player-container"},l().createElement("div",{id:g.id}))}}V.playerInstance=null,V.defaultProps={playerConfig:ae(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var ve=V,ce=(Se,g)=>(0,O.Z)({id:Se||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},g),be=ce;class Ie extends p.Component{constructor(){super(...arguments);this.setupPlayer=g=>{g&&g==="resetPlayer"&&this.player.dispose();var C=this.props,d=C.playerConfig,o=C.onVideoReady,h=o===void 0?()=>{}:o;this.player=new Aliplayer(d,_=>{_.on("sourceloaded",A=>{var K=A.paramData,x=K.desc,F=K.definition;_.getComponent("VideoQuality")&&_.getComponent("VideoQuality").setCurrentQuality(x,F,d.id)})}),this.player.on("ready",()=>{h()})},this.setPlayerConfig=()=>{var g=this.props,C=g.onPlay,d=C===void 0?()=>{}:C,o=g.onTimeUpDate,h=o===void 0?()=>{}:o,_=g.onEnd,A=_===void 0?()=>{}:_,K=g.onPause,x=K===void 0?()=>{}:K,F=g.onError,ee=F===void 0?()=>{}:F;this.player.on("play",()=>{d()}),this.player.on("pause",()=>{x()}),this.player.on("timeupdate",oe=>{h(oe)}),this.player.on("ended",()=>{A()}),this.player.on("error",(0,W.Z)(y().mark(function oe(){return y().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:ee();case 1:case"end":return Y.stop()}},oe)})))},this.getPlayerContent=g=>{this.playerContainer=g}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(g){g.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(g){this.player.seek(g)}exitFull(){var g=this.player.fullscreenService;g&&g.isFullScreen&&g.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var g=this.props.playerConfig;return l().createElement("div",{className:"common-video-player-container"},l().createElement("div",{id:g.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}Ie.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:be()};var De=Ie;class xe{constructor(g){this.hasCreated=!1,this.definition="",this.getQuality=g}createEl(g,C){var d=C._options&&C._options.language,o=C._el.id;this.isEn=d&&d==="en-us";var h=(0,se.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),_=(0,se.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),A=document.querySelector("#".concat(o," .prism-controlbar"));A.appendChild(h),g.appendChild(_)}setCurrentQuality(g,C,d){var o=document.querySelector("#".concat(d," .current-quality"));o.innerText=g,o.dataset.def=C,this.definition=C;var h=document.querySelector("#".concat(d," .quality-list")),_=h.querySelector(".current");_&&(_.className="");var A=h.querySelector('li[data-def="'.concat(C,'"]'));A&&(A.className="current")}created(g){this._urls=g._urls;var C=g._el.id,d=document.querySelector("#".concat(C," .current-quality")),o=document.querySelector("#".concat(C," .quality-list")),h=document.querySelector("#".concat(C," .quality-modal")),_=this._urls.map(x=>'<li data-def="'.concat(x.definition,'">').concat(x.desc,"</li>"));if(o.innerHTML=_.join(""),this.hasCreated==!1&&this.definition){var A=o.querySelector('li[data-def="'.concat(this.definition,'"]'));A.className="current"}this.hasCreated=!0;var K=null;d.onclick=()=>{o.style.display="block"},d.onmouseleave=()=>{K=setTimeout(()=>{o.style.display="none"},100)},o.onmouseenter=()=>{clearTimeout(K)},o.onmouseleave=()=>{o.style.display="none"},o.onclick=x=>{var F=x.target,ee=F.dataset.def,oe=F.innerText;if(ee&&F.className!=="current"){var G=this._urls.find(Y=>Y.definition===ee);g.loadByUrl(G.Url,g.getCurrentTime(),!0,!0),this.setCurrentQuality(G.desc,G.definition,C),h.style.display="block",h.querySelector("span.current-quality-tag").innerText=G.desc}this.getQuality(ee,oe)}}ready(g){var C=g._el.id,d=document.querySelector("#".concat(C," .quality-modal"));d.style.display="none";var o=document.querySelector("#".concat(C," .prism-setting-item.prism-setting-quality"));o&&o.classList.add("player-hidden")}}class Oe{createEl(g,C){var d=C._el.id,o=(0,se.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),h=document.querySelector("#".concat(d," .prism-controlbar"));h.appendChild(o)}ready(g){var C=g._el.id,d=document.querySelector("#".concat(C," .current-rate")),o=document.querySelector("#".concat(C," .rate-list")),h=null,_=document.querySelector("#".concat(C," .prism-setting-item.prism-setting-speed"));_&&_.classList.add("player-hidden"),d.onclick=()=>{o.style.display="block"},d.onmouseleave=()=>{h=setTimeout(()=>{o.style.display="none"},100)},o.onmouseenter=()=>{clearTimeout(h)},o.onmouseleave=()=>{o.style.display="none"},o.onclick=A=>{var K=A.target,x=K.dataset.rate;if(x){if(g.setSpeed(x),K.className!=="current"){var F=o.querySelector(".current");F&&(F.className=""),K.className="current"}o.style.display="none",d.innerText="".concat(x,"x")}}}}var je=t(69164),Ne=t(37055);function Fe(Se){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=Ne.ZP.local.getLocalUrl(Se);return ie.WY.get({url:C,params:g})}var Je=t(91648),qe=t(18329),ze=t(38642),tt=t(9849),Qe=t(99891);class ct extends p.Component{constructor(g){super();this.WaterMarkText=g,this.html=document.getElementsByClassName("common-watermark")}createEl(g){setTimeout(()=>{g.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var ft=ct,dt=Se=>({userInfo:Se.user});class ht extends p.Component{constructor(g){var C;super(g);C=this,this.onVideoReady=d=>{var o=this.props,h=o.resourceInfo,_=o.mode,A=o.autoPlay,K=o.t,x=h.storageType;d==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(d),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(_==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),_==="preview"&&A&&this.play.play()):x==="ALIBABA_PRIVATE"||x==="LOCAL"?this.updateSource("resetPlayer"):(ie.WY.logger({keyword:"video",moduleName:"video-play",msg:K("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var d=this.props,o=d.draggable,h=d.mode,_=d.t,A=d.studyInfo,K=d.needCurrentTime,x=d.onCurrentTime,F=x===void 0?()=>{}:x,ee=A.studyType,oe=A.studyId,G=A.resourceId,Y=this.state,me=Y.showPreventHang,Ee=Y.dragSwitch,Ae=Y.showRandomAlert,Ue=Y.randomAlertDialogVisible,J=this.playingVideo,S=J.oneTime,E=J.popupWindowCount,n=J.maxPlayTime,i=J.progress,T=J.auditionLength,m=J.auditionType,s=J.duration,b=J.recentStart,Q=this.play.getCurrentTime(),q=(me==="OPEN"||Ae==="OPEN")&&E>0;if(K&&F(Q),T>0&&m===2&&Q>T&&(this.play.seek(T),I.default.warning(_("component.haveALookOverTip")),this.play.pause()),h==="learn"&&q){var ue=s-S*E;if(E>0&&Q>ue)if(this.play.pause(),Ae==="OPEN"){if(!Ue){var re=(0,Je.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:re},()=>{(0,X.qp)({popupId:re,planId:oe,resourceId:G,type:"popup_start"})}),this.play.exitFull()}}else me==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((o||i===100)&&(Q>0&&(this.playingVideo.recentStart=Q),!((ee==="enterprise"||ee==="studyProject")&&Ee==="OPEN")))return!1;Q>n?Q-b>2?(this.playingVideo.recentStart=n,this.play.seek(n),I.default.warning(_("component.preventFastWatchTip"))):(this.playingVideo.recentStart=Q,this.playingVideo.maxPlayTime=Q):Q>0&&Q>this.playingVideo.recentStart&&(this.playingVideo.recentStart=Q)},this.onPlay=()=>{var d=this.props,o=d.mode,h=d.onPlay,_=h===void 0?()=>{}:h;_();var A=this;o==="learn"&&!A.timer&&(A.timer=setTimeout(function K(){A.saveProgress(),clearTimeout(A.timer),A.timer=setTimeout(K,2e4)},2e4))},this.onPause=()=>{var d=this.props,o=d.studyInfo,h=d.mode,_=o.studyType;clearTimeout(this.timer),this.timer=null,h==="learn"&&(_==="platform"||_==="enterprise"||_==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var d=this.props.mode;d==="learn"&&this.saveProgress()},this.onError=d=>{var o=this.props.resourceInfo,h=o.storageType;(h==="ALIBABA_PRIVATE"||h==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var d=this.props.mode;this.initPlayVideo(),d==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var d=this.state,o=d.showPreventHang,h=d.showRandomAlert,_=this.props,A=_.t,K=_.playingVideo,x=_.studyInfo,F=_.autoPlay,ee=K.recentStart,oe=K.duration,G=K.progress,Y=x.studyType,me=(o==="OPEN"||h==="OPEN")&&(Y==="studyTask"||Y==="enterprise"||Y==="studyProject")&&G<100;me?(h==="OPEN"?this.setState({promptMessage:A("component.preventAlertTip"),dialogVisible:!0}):o==="OPEN"&&this.setState({promptMessage:A("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):F&&(this.play.play(),Math.ceil(ee)<parseInt(oe)&&this.play.seek(ee))},this.playerShowPreventHang=()=>{var d=this.playingVideo,o=d.duration,h=d.recentStart,_=0;o>0&&o<180?(_=o/2,this.playingVideo.oneTime=_,h>=_?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):o>=180&&o<600?(_=o/3,this.playingVideo.oneTime=_,h>=2*_?this.playingVideo.popupWindowCount=0:h>=_?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(_=o/4,this.playingVideo.oneTime=_,h>=3*_?this.playingVideo.popupWindowCount=0:h>=2*_?this.playingVideo.popupWindowCount=1:h>=_?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var d=this.props,o=d.playingVideo,h=d.mode;if(h==="learn"){this.playingVideo=(0,O.Z)({},o);var _=o.duration,A=o.progress;this.playingVideo.hasFinished=parseInt(A)===100,this.playingVideo.maxPlayTime=parseInt(_)*parseInt(A)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,W.Z)(y().mark(function d(){var o,h,_,A,K,x,F,ee,oe,G,Y,me,Ee,Ae,Ue,J,S,E,n,i,T,m,s,b;return y().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(o=C.state,h=o.speedSwitch,_=o.dragSwitch,A=o.whiteList,K=C.props,x=K.resourceInfo,F=K.showQuality,ee=x.contentType,oe=x.storageType,G=x.source,Y=x.playId,me=x.playerId,Ee=x.showFullScreen,Ae=Ee===void 0?!0:Ee,Ue=be(me),Ue.components=[],J=typeof G=="object"&&G.hasOwnProperty("FD")&&G.FD.indexOf("m3u8")===-1,F&&J&&ee!=="mp3"&&(oe&&oe==="PUBLIC_CLOUD"||!oe)&&Ue.components.push({name:"VideoQuality",type:xe,args:[()=>{C.play.pause(),C.playingVideo.readyCount=0}]}),h==="OPEN"&&Ue.components.push({name:"VideoRate",type:Oe}),Ae&&(S=Ue.skinLayout.find(ue=>ue.name==="controlBar"),S&&S.children.splice(S.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),Ue.components.push({name:"VideoWaterMark",type:ft}),E=G.FD,n=G.OD,E.indexOf("http://")>-1&&(E=E.replace("http://","https://")),n.indexOf("http://")>-1&&(n=n.replace("http://","https://")),i=A.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",G.OD=n&&n.indexOf(i)>-1&&n.indexOf(".mp4")>-1?n:E,G.FD=E,T=typeof G!="string"?JSON.stringify(G):G,Ue.source=T,_==="OPEN"&&(Ue.disableSeek=!0),oe!=="ALIBABA_PRIVATE"){q.next=32;break}return q.next=22,(0,X.BR)(Y);case 22:if(m=q.sent,!m){q.next=28;break}Ue.source=m,Ue.vodRetry=1,q.next=30;break;case 28:return C.setState({showPrivateVodError:!0}),q.abrupt("return");case 30:q.next=38;break;case 32:if(oe!=="LOCAL"){q.next=38;break}return q.next=35,Fe(Y);case 35:s=q.sent,b=s.data,b.code===0&&(Ue.source="".concat(G.FD,"?auth_key=").concat(b.data.auth_key),Ue.vodRetry=1);case 38:C.setState({playerConfig:Ue});case 39:case"end":return q.stop()}},d)})),this.updateSource=function(){var d=(0,W.Z)(y().mark(function o(h){var _,A,K,x,F,ee,oe,G;return y().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(_=C.state.playerConfig,A=C.props.resourceInfo,K=A.storageType,x=A.source,F=A.playId,C.playingVideo.readyCount=0,K!=="ALIBABA_PRIVATE"){me.next=16;break}return me.next=7,(0,X.BR)(F);case 7:if(ee=me.sent,!ee){me.next=12;break}Object.assign(_,{source:ee,vodRetry:1}),me.next=14;break;case 12:return C.setState({showPrivateVodError:!0}),me.abrupt("return");case 14:me.next=22;break;case 16:if(K!=="LOCAL"){me.next=22;break}return me.next=19,Fe(F);case 19:oe=me.sent,G=oe.data,G.code===0&&Object.assign(_,{source:"".concat(x.FD,"?auth_key=").concat(G.data.auth_key),vodRetry:1});case 22:C.setState({playerConfig:_},()=>{C.play.setupPlayer(h)});case 23:case"end":return me.stop()}},o)}));return function(o){return d.apply(this,arguments)}}(),this.saveProgress=()=>{var d=this.props,o=d.studyInfo,h=d.userInfo,_=h.isLogin,A=h.enterpriseId,K=h.id,x=this.playingVideo,F=x.recentStart,ee=x.duration,oe=x.hasFinished,G=Math.ceil(+F);G>Number(ee)&&(G=Number(ee));var Y=Math.ceil(G/+ee*100);if((Y>100||oe)&&(Y=100),_){var me=this.playingVideo,Ee=me.auditionType,Ae=me.auditionLength;if(Ae>0&&Ee===2){var Ue=Math.ceil(Ae/ee*100);Ue<=Y&&(Y=Ue,G=Ae)}(0,X.sH)({studyInfo:o,progress:Y,recent_start:G,enterpriseId:A,userId:K}).then(J=>{J&&J.data&&(0,je.Z)(J.data.integral_info||"")})}},this.getInfoFromSettings=(0,W.Z)(y().mark(function d(){var o,h,_,A,K,x,F,ee,oe;return y().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return o=C.props.studyInfo,h=o.studyType,_=o.projectId,Y.next=4,(0,X.Gw)();case 4:if(A=Y.sent,K=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],x=(0,se.RG)(A,K),h!=="studyProject"){Y.next=14;break}return Y.next=10,(0,tt.NU)({id:_});case 10:F=Y.sent,ee=F.status,oe=F.data,ee===200&&(x.showPreventHang=oe.prevent_cut_screen?"OPEN":"CLOSED",x.speedSwitch=oe.speed_play?"OPEN":"CLOSED",x.dragSwitch=oe.prevent_drag?"OPEN":"CLOSED");case 14:C.setState(x,()=>{C.dealVideoConfig()});case 15:case"end":return Y.stop()}},d)})),this.dealAudioPoster=()=>{var d=this.props.resourceInfo.contentType,o=d===void 0?"":d;this.setState({showAudioPoster:o==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var d=this.state.showAudioPoster,o=this.play.playerContainer;d&&o&&(o.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),o.style.backgroundSize="cover")},this.getPlayInstance=d=>{this.play=d},this.handleOk=()=>{this.setState({dialogVisible:!1});var d=this.state.btnType,o=this.playingVideo.recentStart,h=this.props.t;d==="know"?(this.play.play(),this.play.seek(o),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:h("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,W.Z)(y().mark(function d(){var o,h,_,A;return y().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:o=C.props.studyInfo,h=o.studyId,_=o.resourceId,A=C.state.randomAlertUUID,(0,X.qp)({popupId:A,planId:h,resourceId:_,type:"popup_end"}).then(()=>{C.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),C.playingVideo.popupWindowCount-=1,C.play.play();case 6:case"end":return x.stop()}},d)})),this.renderFooter=()=>{var d=this.state.btnType,o=this.props.t;return l().createElement(R.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(d)},o(d==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var d=this.props.t;return l().createElement(R.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},d("common.ok"))},this.state={playerConfig:be(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:g.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:g.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:g.t("component.randomAlertTip"),randomAlertModal:{title:g.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,ze.UI)("CL_VIDEO_BAIYING_COM_CN")}},g.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(g){var C=typeof g.resourceInfo.source!="string"?JSON.stringify(g.resourceInfo.source):g.resourceInfo.source,d=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;C!==d&&d!==""&&this.initInfo()}componentWillUnmount(){var g=this.props.mode;g==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var g=this.state,C=g.playerConfig,d=g.showPrivateVodError,o=g.dialogVisible,h=g.dialogModal,_=g.promptMessage,A=g.randomAlertDialogVisible,K=g.randomAlertModal,x=g.randomAlertTip,F=g.encryptedSwitch,ee=this.props,oe=ee.resourceInfo,G=ee.t,Y=F==="OPEN"?ve:De;return l().createElement(p.Fragment,null,l().createElement(Y,(0,$.Z)({ref:this.getPlayInstance},oe,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:C,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),l().createElement(qe.ZP,(0,$.Z)({visible:o},h,{footer:this.renderFooter()}),l().createElement("div",{className:"video-business-prompt"},_)),l().createElement(qe.ZP,(0,$.Z)({visible:A},K,{footer:this.renderRandomFooter()}),l().createElement("div",{className:"video-player-container__prompt"},x)),d&&l().createElement("div",{className:"video-business-vod-error"},G("privateCloud.docReadError")),l().createElement(Qe.Z,{scenes:"video"}))}}var gt=(0,U.$j)(dt,null,null,{forwardRef:!0})((0,e.Z)("translation",{withRef:!0})(ht)),_e=t(94184),Ke=t.n(_e),et=t(84874),He=Se=>({userInfo:Se.user}),Ge={getPravateDocUrl:Ne.ZP.localStorage.getPravateDocUrl};function st(Se){return JSON.stringify(Se,(g,C)=>(typeof C=="function"&&(C=C.toString()),C))}function mt(Se){var g=parseInt(parseInt(Se,10)/60,10),C=parseInt(parseInt(Se,10)%60,10);return g<10&&(g="0".concat(g)),C<10&&(C="0".concat(C)),"".concat(g,":").concat(C)}class yt extends p.Component{constructor(g){var C;super(g);C=this,this.messageFun=d=>{var o=this.props,h=o.docType,_=o.progress,A=o.studyTimeLimit,K=o.studyTime,x=this.state,F=x.jumpPageTag,ee=x.totalTime,oe=x.timeRemaining,G=this.state.previewDocData,Y={};try{Y=JSON.parse(d.data)}catch(me){return}switch(Y.action){case"preview.ready":this.initDocData();break;case"preview.meta":G.totalPage=Y.data.pc||1,G.currentPage=1,this.setState({previewDocData:G},()=>{this.reportStatusInterval()}),A>0?(this.saveProgress(_,K||"1",Y.data.pc||1),this.setState({showCountDownContainer:!0})):h==="xlsx"||h==="xls"||G.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(_,K||"1",Y.data.pc||1),A>0&&_<100?(this.setState({showCountDown:!0}),h==="xlsx"||h==="xls"?ee=A:ee=A*Y.data.pc,oe=parseInt(ee*(1-_/100),10),this.setState({timeRemaining:oe,totalTime:ee},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(F){F=!1,this.setState({jumpPageTag:F});return}G.currentPage=Y.data.pageIndex+1,this.setState({previewDocData:G}),A||this.saveProgress(Math.ceil(G.currentPage/G.totalPage*100),G.currentPage,G.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":I.default.error(Y.data.result);break;default:break}},this.initDocData=(0,W.Z)(y().mark(function d(){var o,h,_,A,K,x,F,ee,oe,G,Y,me,Ee,Ae;return y().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(C.setState({isShowPrivateError:!1}),o=C.props,h=o.docType,_=o.userInfo,A=o.documentWatermarkSettings,K=o.storageType,x=o.privateDocId,F=_.name,ee=_.jobNumber,oe=_.position,G="",Y={},K!=="ALIBABA_PRIVATE"){J.next=18;break}return J.prev=6,me=Ge.getPravateDocUrl(x),J.next=10,ie.WY.get({url:me});case 10:Ee=J.sent,Ae=Ee.data,Ae.code===0?Y=Ae.data||{}:C.setState({isShowPrivateError:!0}),J.next=18;break;case 15:J.prev=15,J.t0=J.catch(6),C.setState({isShowPrivateError:!0});case 18:if(A.indexOf("name")>-1&&(G="".concat(G+F," ")),A.indexOf("position")>-1&&(G="".concat(G+oe," ")),A.indexOf("jobnumber")>-1&&(G+=ee),G.length>0?window.sendMessage("preview.init",(0,O.Z)({wmType:1,wmValue:G,wmColor:"rgba(192, 192, 192, 0.4)"},Y)):window.sendMessage("preview.init",(0,O.Z)({},Y)),h!=="xlsx"&&h!=="ppt"&&h!=="pptx"&&h!=="xls"?C.setState({pageOperateContainerVisible:!0}):C.setState({pageOperateContainerVisible:!1}),!(h==="ppt"||h==="pptx")){J.next=29;break}J.t1=window,J.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},J.t1.sendMessage.call(J.t1,"setConfig",J.t2),J.next=32;break;case 29:J.t3=window,J.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},J.t3.sendMessage.call(J.t3,"setConfig",J.t4);case 32:case"end":return J.stop()}},d,null,[[6,15]])})),this.handleJumpPage=d=>{var o=this.state.previewDocData;o.currentPage=d,this.setState({jumpPageTag:!0,previewDocData:o});var h=d/o.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(h),d,o.totalPage),window.sendMessage("logic.toPage",{pageIndex:d-1})},this.redirectPage=()=>{var d=this.props,o=d.studyTimeLimit,h=d.studyTime,_=0;o===0&&(_=h-1>0?h-1:0),window.sendMessage("logic.toPage",{pageIndex:_})},this.docCountDown=()=>{var d=this.state.timeRemaining,o=this.state,h=o.totalTime,_=o.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{d-=1,this.setState({timeRemaining:d}),d<1&&(this.saveProgress(100,0,_.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var A=(h-d)/h*100;d<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(A),d,_.totalPage)},2e4)},this.saveProgress=(d,o,h)=>{var _=this.props.onSaveProgress;_&&_(d,o,h)},this.reportStatusInterval=()=>{var d=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var o=this.state.previewDocData.currentPage;d&&d({currentPage:o})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=d=>{this.docReader=d},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(g,C)=>{var d=this.docReader.contentWindow;d.postMessage(st({action:g,data:C}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var g=this.props,C=g.t,d=g.storageType,o=g.privateDocId,h=this.props.aliUrl,_=this.state,A=_.previewDocData,K=_.pageOperateContainerVisible,x=_.timeRemaining,F=_.showCountDown,ee=_.showCountDownContainer,oe=_.showPageOperateContainer,G=_.isShowPrivateError;return d==="ALIBABA_PRIVATE"&&(h="https://preview.imm.aliyuncs.com/index.html?docId=".concat(o)),l().createElement("div",{className:"doc-reader-container"},l().createElement("div",{className:"ali-doc-container",style:{paddingBottom:K?"56px":"0"}},l().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:h,id:"aliyunPreview",ref:this.dealPreviewRef}),ee?l().createElement("div",{className:"ali-doc-container__countdown"},F?l().createElement("div",null,l().createElement(et.Z,{iconClass:"iconf-tipe",size:"16px"}),C("component.docStillStudy"),l().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",mt(x)," "),C("component.canDone")):l().createElement("div",null,l().createElement(et.Z,{iconClass:"iconf-tipe",size:"16px"}),C("component.docHasFinish"))):null,K?l().createElement("div",{className:"ali-doc__operate"},l().createElement("div",{className:Ke()(["ali-doc__operate__content",oe?"":"ali-doc__operate__hide-content"])},l().createElement("div",{className:"ali-doc__operate__pagination"},l().createElement("div",{className:"ali-doc__operate__pagination__pages"},A.currentPage," / ",A.totalPage),l().createElement("div",{className:"ali-doc__operate__pagination__toggle"},l().createElement("div",{className:"ali-doc__operate__pagination__choose"},l().createElement("span",null,C("component.choosePage"),l().createElement(et.Z,{iconClass:"iconf-arrow-under",size:"14px"})),l().createElement("div",{className:"ali-doc__operate__page-list-container"},l().createElement("div",{className:"ali-doc__operate__choose-page"},C("component.fastChoosePage")),l().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:A.totalPage})).map((Y,me)=>l().createElement("li",{key:Y,onClick:()=>this.handleJumpPage(me+1)},me+1))))),l().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},C("common.collapse"))))),l().createElement("div",{className:Ke()("ali-doc__operate__unfold",oe?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},C("common.expand"))):null,G&&l().createElement("div",{className:"ali-doc__error"},C("privateCloud.docReadError"))),l().createElement(Qe.Z,{scenes:"document"}))}}yt.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var Dt=(0,U.$j)(He)((0,e.Z)()(yt)),$t=Se=>({userInfo:Se.user}),St="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),Ut="".concat("https://doc.coolcollege.cn");class xt extends l().Component{constructor(g){var C;super(g);C=this,this.onSaveProgress=(d,o,h)=>{var _=this.props,A=_.mode,K=_.studyInfo,x=_.userInfo,F=x.enterpriseId,ee=x.id;A==="learn"&&(0,X.sH)({studyInfo:K,progress:d,page_count:h,recent_start:o,enterpriseId:F,userId:ee}).then(oe=>{oe&&oe.data&&(0,je.Z)(oe.data.integral_info||"")})},this.messageFun=function(){var d=(0,W.Z)(y().mark(function o(h){var _,A,K,x,F,ee;return y().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(h.data!=="local-resource"){G.next=9;break}if(_=C.props.resourceInfo,A=_.storageType,K=_.playId,!(A&&A==="LOCAL")){G.next=9;break}return G.next=6,Fe(K);case 6:x=G.sent,F=x.data,F.code===0&&(ee=document.getElementById("local-resource-box"),ee.contentWindow.postMessage({msg:"local-auth-key",authKey:F.data.auth_key},"*"));case 9:case"end":return G.stop()}},o)}));return function(o){return d.apply(this,arguments)}}(),this.getInfoFromSettings=(0,W.Z)(y().mark(function d(){var o,h,_;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,X.Gw)();case 2:o=K.sent,h=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],_=(0,se.RG)(o,h),C.setState(_,()=>{C.initDocPage(C.props)});case 6:case"end":return K.stop()}},d)})),this.initDocPage=(0,W.Z)(y().mark(function d(){var o,h,_,A,K,x,F,ee,oe,G,Y,me,Ee,Ae,Ue,J,S,E,n,i,T,m,s,b,Q,q,ue,re,ge,fe,ye,de,Te,$e,nt=arguments;return y().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(o=nt.length>0&&nt[0]!==void 0?nt[0]:{},h=o.resourceInfo,_=o.mode,A=o.studyInfo,K=o.userInfo,x=C.state.documentPlayerMode,F=h.docType,ee=h.docTitle,oe=h.url,G=h.studyTimeLimit,Y=h.studyTime,me=h.aliUrl,Ee=h.progress,Ae=h.storageType,Ue=h.playId,J=A.studyType,S=A.courseId,E=A.studyId,n=A.resourceId,i=K.enterpriseId,T=K.id,m=K.isLogin,s=K.token,b=x==="compat"&&me.indexOf("preview.imm.aliyun")>-1||Ae==="ALIBABA_PRIVATE",!b){pe.next=11;break}C.setState({showAliReader:!0}),pe.next=31;break;case 11:if(Q=(0,X.sH)({enterpriseId:i,userId:T,token:s,studyInfo:A},!0),q=J==="studyTask"?2:1,ue=Ne.ZP.SaveProgress.reportStatusInterval(A),re={isSaveProgress:m&&_==="learn"&&Q,isSaveRecord:!1,access_token:s,userId:T,hostUrl:St,courseId:S,resourceId:n,courseType:1,planId:E,studyTimeLimit:G,studyTime:Y,saveProgressUrl:Q,type:"eapp",progress:Ee,saveRecordProgressUrl:ue,actionType:q},!(Ae&&Ae==="LOCAL")){pe.next=26;break}return pe.next=18,Fe(Ue);case 18:if(ge=pe.sent,fe=ge.data,fe.code!==0){pe.next=25;break}re.auth_key=fe.data.auth_key,re.url=oe,pe.next=26;break;case 25:return pe.abrupt("return");case 26:ye=JSON.stringify(re),de="".concat(ee,".").concat(F).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),Te="".concat(Ut,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(ye),"&furl=").concat(oe,"?attname=").concat(de),Ae&&Ae==="LOCAL"&&($e="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),Te="".concat($e,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(ye),"&furl=").concat(oe,"?attname=").concat(de)),C.setState({encodeUrl:Te});case 31:case"end":return pe.stop()}},d)})),this.handleReportStatusInterval=d=>{var o=d.currentPage,h=this.props,_=h.resourceInfo,A=h.mode,K=h.studyInfo,x=h.userInfo,F=_.type,ee=K.courseId,oe=K.studyId,G=K.resourceId,Y=x.enterpriseId,me=x.id,Ee=x.isLogin,Ae="",Ue="",J=0,S=!1;switch(F){case"enterprise":J=1,S=!0;break;case"study":Ae=oe,J=2,S=!0;break;case"project":Ue=oe,J=1,S=!0;break;default:break}if(!(!S||!Ee)){var E={plan_id:Ae,enterprise_id:Y,user_id:me,course_id:ee,project_course_id:Ue,resource_id:G,current_page:o,action_type:J,send_time:Date.parse(new Date)};A==="learn"&&(0,X.Xc)(K,E)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(g){this.initDocPage(g)}render(){var g=this.props.resourceInfo,C=this.state,d=C.encodeUrl,o=C.documentWatermarkSettings,h=C.showAliReader,_=g.docType,A=g.type,K=g.studyTimeLimit,x=g.studyTime,F=g.aliUrl,ee=g.progress,oe=g.storageType,G=g.playId;return h?l().createElement(Dt,{privateDocId:G,storageType:oe,aliUrl:F,docType:_,progress:ee,studyTime:x,studyTimeLimit:K,documentWatermarkSettings:o,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:A}):l().createElement("div",{className:"doc-reader-container"},l().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:d,frameBorder:"0",allowFullScreen:!0}),l().createElement(Qe.Z,{scenes:"document"}))}}var Ct=(0,U.$j)($t)(xt),zt=t(38979),Rt=t(90706),Ht=t(12968),Gt=t(44208),kt=t(60667),Mt=Se=>({userInfo:Se.user});class Lt extends l().Component{constructor(){var g;super(...arguments);g=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var C=this.props,d=C.studyInfo,o=C.mode,h=C.userInfo,_=h.enterpriseId,A=h.id;o==="learn"&&(0,se.Gp)({studyInfo:d,enterpriseId:_,userId:A})},this.getInfoFromSettings=(0,W.Z)(y().mark(function C(){var d,o,h;return y().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,X.Gw)();case 2:d=A.sent,o=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],h=(0,se.RG)(d,o),g.setState(h,()=>{g.renderWatermark()});case 6:case"end":return A.stop()}},C)})),this.renderWatermark=()=>{var C=this.props.userInfo,d=this.state.imageWatermark,o=C.name,h=C.unionid,_=C.sourceType,A=C.jobNumber,K=C.position,x=[];d.indexOf("name")>-1&&x.push(l().createElement(kt.Z,{dataType:"userName",value:h,name:o,type:_})),d.indexOf("position")>-1&&x.push(l().createElement("span",null,K)),d.indexOf("jobnumber")>-1&&x.push(l().createElement("span",null,A)),d.length>0&&this.setState({watermark:x.map((F,ee)=>l().createElement("span",{key:ee},F))})},this.handleError=C=>{var d=this.props.onError;d&&d(C)},this.getImageUrl=(0,W.Z)(y().mark(function C(){var d,o,h,_,A,K,x,F,ee,oe;return y().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(d=g.props,o=d.resourceInfo,h=d.t,_=o.playId,A=o.url,K=o.storageType,x=A,!K){Y.next=21;break}if(K!=="ALIBABA_PRIVATE"){Y.next=15;break}return Y.next=7,(0,X.J7)(_);case 7:if(F=Y.sent,!F){Y.next=12;break}x=F,Y.next=13;break;case 12:return Y.abrupt("return",I.default.info(h("privateCloud.docReadError")));case 13:Y.next=21;break;case 15:if(K!=="LOCAL"){Y.next=21;break}return Y.next=18,Fe(_);case 18:ee=Y.sent,oe=ee.data,oe.code===0&&(x="".concat(A,"?auth_key=").concat(oe.data.auth_key));case 21:g.setState({imageUrl:[x]},()=>{var me=g.state.imageUrl,Ee="image-business",Ae=document.querySelectorAll(".".concat(Ee,"-image img"));Ae.forEach((Ue,J)=>{Ue.onerror=()=>{g.handleError(me[J])}})});case 22:case"end":return Y.stop()}},C)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var g="image-business",C=this.props.resourceInfo,d=C.preview,o=d===void 0?!1:d,h=this.state,_=h.watermark,A=h.imageUrl;return l().createElement("div",{className:g},l().createElement(Qe.Z,{scenes:"image"}),l().createElement(Rt.Z,{className:"".concat(g,"-carousel")},A.map((K,x)=>l().createElement("div",{className:"".concat(g,"-image"),key:x.toString()},l().createElement(Gt.Z,{src:K,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:o})))))}}Lt.defaultProps={prefixCls:"watch-image-page"};var Bt=(0,U.$j)(Mt)((0,e.Z)()(Lt)),bt=Se=>({userInfo:Se.user});class Wt extends l().Component{constructor(){var g;super(...arguments);g=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,W.Z)(y().mark(function C(){var d,o,h;return y().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,X.Gw)();case 2:d=A.sent,o=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],h=(0,se.RG)(d,o),g.setState(h,()=>{g.renderWatermark()});case 6:case"end":return A.stop()}},C)})),this.renderWatermark=()=>{var C=this.props.userInfo,d=this.state.htmlWatermark,o=C.name,h=C.unionid,_=C.sourceType,A=C.jobNumber,K=C.position,x=[];d.indexOf("name")>-1&&x.push(l().createElement(kt.Z,{dataType:"userName",value:h,name:o,type:_})),d.indexOf("position")>-1&&x.push(l().createElement("span",null,K)),d.indexOf("jobnumber")>-1&&x.push(l().createElement("span",null,A)),d.length>0&&this.setState({watermark:x.map((F,ee)=>l().createElement("span",{key:ee},F))})},this.saveProgress=()=>{var C=this.props,d=C.studyInfo,o=C.mode,h=C.userInfo,_=h.enterpriseId,A=h.id;o==="learn"&&(0,se.Gp)({studyInfo:d,enterpriseId:_,userId:A})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var g="html-business",C=this.props.resourceInfo,d=C.url,o=this.state.watermark;return l().createElement("div",{className:g},l().createElement("div",{className:"".concat(g,"__html-watermark")},o),l().createElement("iframe",{title:"html",className:"".concat(g,"_iframe"),src:d}))}}var Vt=(0,U.$j)(bt)((0,e.Z)()(Wt)),Nt=t(57068),_t=t(1164),Ft=Se=>({userInfo:Se.user});class At extends l().PureComponent{constructor(){super(...arguments);this.getHost=g=>{var C=g.split("//"),d=C[1].split("/");return[C[0],d[0]].join("//")},this.getScormUrl=()=>{var g=this.props,C=g.studyInfo,d=g.mode,o=g.userInfo,h=g.resourceInfo,_=g.from,A=o.enterpriseId,K=o.id,x=h.url,F=this.getHost(x);if(d==="learn"){var ee=(0,O.Z)({userId:K,enterpriseId:A,access_token:localStorage.token,from:_,scormUrl:encodeURIComponent(x),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},C);return"".concat(F).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(Nt.stringify(ee))}return"".concat(F,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(x))},this.handleOpenScormLink=g=>{_t.Z.targetTo({path:g,isExternalLink:!0})}}render(){var g=this.props.t,C="scorm-business",d=this.getScormUrl(),o=(0,ze.UI)("SCORM_EXTERNAL_WATCH");return l().createElement("div",{className:C},o?l().createElement("div",{className:"".concat(C,"_scorm")},l().createElement("img",{className:"".concat(C,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),l().createElement("h5",null,g("resourcePlay.scormTip")),l().createElement(R.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(d)},g("resourceLibrary.h5LinkPlayButton"))):l().createElement("iframe",{title:"scorm",className:"".concat(C,"_iframe"),src:d}))}}var vt=(0,U.$j)(Ft)((0,e.Z)()(At));class Yt extends l().Component{render(){var g=this.props,C=g.visible,d=g.title,o=g.onCancel,h=g.t,_=l().createElement("span",null,d);return l().createElement(qe.ZP,{visible:C,title:_,onCancel:o,footer:null},l().createElement("div",{className:"ban-preview"},l().createElement("div",{className:"ban-preview-center"},l().createElement("img",{src:u(),alt:"picture"}),l().createElement("h2",null,h("localStorage.tip")),l().createElement("p",null,h("localStorage.banPreview"))),l().createElement("hr",null),l().createElement(R.Z,{type:"primary",className:"know",onClick:o},h("localStorage.onKnow"))))}}var Kt=(0,e.Z)()(Yt);class Jt extends p.Component{constructor(){var g;super(...arguments);g=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=C=>{var d=this.props.previewInfo,o=d.onCancel;this.onCancel(),o(C)},this.onGetVideoBusiness=C=>{var d=this.props.onRef,o=d===void 0?()=>{}:d;this.videoBusiness=C,o(C)},this.onFullScreen=()=>{var C=this.state.fullScreen;this.setState({fullScreen:!C})},this.handleJudgeNetwork=(0,W.Z)(y().mark(function C(){var d,o,h,_,A,K,x,F,ee,oe,G,Y=arguments;return y().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(d=Y.length>0&&Y[0]!==void 0?Y[0]:null,o=g.props,h=o.resourceInfo,_=o.watchType,A=h.storageType,K=h.playId,x=h.originUrl,F=_==="image"||_==="video"||_==="doc",ee=null,d?ee=d:x?ee=x:ee=h.url,!(F&&ee&&K&&A&&A==="LOCAL")){Ee.next=22;break}return Ee.prev=7,Ee.next=10,(0,X.NY)(K);case 10:return oe=Ee.sent,Ee.next=13,(0,X.Hy)(ee,oe);case 13:G=Ee.sent,G?g.setState({showBan:"no"}):g.setState({showBan:"yes"}),Ee.next=20;break;case 17:Ee.prev=17,Ee.t0=Ee.catch(7),g.setState({showBan:"yes"});case 20:Ee.next=23;break;case 22:g.setState({showBan:"no"});case 23:case"end":return Ee.stop()}},C,null,[[7,17]])})),this.renderOuter=()=>{var C=this.props,d=C.prefixCls,o=C.watchType,h=C.onCurrentTime,_=h===void 0?()=>{}:h;return l().createElement("div",{className:"".concat(d,"-outer")},o==="video"&&l().createElement(gt,(0,$.Z)({onCurrentTime:_,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),o==="doc"&&l().createElement(Ct,this.props),o==="image"&&l().createElement(Bt,(0,$.Z)({onError:this.handleJudgeNetwork},this.props)),o==="html"&&l().createElement(Vt,this.props),o==="scorm"&&l().createElement(vt,this.props))},this.renderFooter=()=>{var C=this.props,d=C.resourceInfo.storageType,o=C.t,h=this.state.showBan,_=h!==""&&h==="yes";return d&&d!=="PUBLIC_CLOUD"&&_?l().createElement(R.Z,{type:"primary",className:"know",onClick:this.onCancelModel},o("localStorage.onKnow")):null}}componentDidMount(){var g=this.props.mode;g==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(g){g.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var g=this.state,C=g.showBan,d=g.fullScreen,o=this.props,h=o.mode,_=o.previewWay,A=o.previewInfo,K=o.prefixCls,x=o.t,F=o.showEnlarge,ee=o.footer,oe=ee===void 0?null:ee,G=A.visible,Y=A.destroyOnClose,me=A.title,Ee=C!==""&&C==="yes",Ae=C!==""&&C==="no";return l().createElement(p.Fragment,null,h==="preview"&&_==="popups"&&l().createElement(qe.ZP,{destroyOnClose:Y,visible:G,title:me,onCancel:this.onCancelModel,footer:oe||this.renderFooter(),wrapClassName:"".concat(K,"-resource ").concat(d?"".concat(K,"-full"):"")},F&&l().createElement("div",{className:"".concat(K,"-resource-out-icon"),onClick:this.onFullScreen},d?l().createElement(P.Z,{className:"".concat(K,"-resource-icon")}):l().createElement(f.Z,{className:"".concat(K,"-resource-icon")})),l().createElement("div",{className:"".concat(K,"-inner")},!G&&l().createElement(N.Z,{size:"large"}),G&&Ae&&this.renderOuter(),Ee&&l().createElement(w,null))),(h==="learn"||_==="page")&&Ae&&this.renderOuter(),(h==="learn"||_==="page")&&l().createElement(Kt,{visible:Ee,title:me||x("questionn.warmHint"),onCancel:this.onCancel}))}}Jt.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var Qt=(0,e.Z)("translation",{withRef:!0})(Jt)},41225:function(we,le,t){"use strict";t.d(le,{Hy:function(){return W},NY:function(){return M},Gw:function(){return y},sH:function(){return P},BR:function(){return p},qp:function(){return f},Xc:function(){return e},J7:function(){return l}});var j=t(57361),N=t(9754),ne=t.n(N),R=t(10237),$=t(37055),W=function(){var L=(0,j.Z)(ne().mark(function u(){var a,w,O,B,I,U,se,X=arguments;return ne().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return a=X.length>0&&X[0]!==void 0?X[0]:"",w=X.length>1&&X[1]!==void 0?X[1]:"",O="",a.startsWith("http")?(B=a.split("//")[1].trim(),I=B.split("/")[0],O="https://".concat(I,"/cms/ticket")):(U=a.split("/")[0],O="https://".concat(U,"/cms/ticket")),z.prev=4,z.next=7,R.ZQ.get({url:O,params:{ticket:w}});case 7:if(se=z.sent,!(se.status===200||se.status===403)){z.next=10;break}return z.abrupt("return",Promise.resolve(!0));case 10:return z.abrupt("return",Promise.resolve(!1));case 13:return z.prev=13,z.t0=z.catch(4),z.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return z.stop()}},u,null,[[4,13]])}));return function(){return L.apply(this,arguments)}}(),M=function(){var L=(0,j.Z)(ne().mark(function u(a){var w,O;return ne().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,R.ZQ.get({url:$.ZP.local.getTicket(a)});case 2:if(w=I.sent,O=w.data,O.code!==0){I.next=6;break}return I.abrupt("return",Promise.resolve(O.data.ticket));case 6:return I.abrupt("return",Promise.resolve(""));case 7:case"end":return I.stop()}},u)}));return function(a){return L.apply(this,arguments)}}(),y=function(){var L=(0,j.Z)(ne().mark(function u(){var a;return ne().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,R.WY.get({url:$.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return a=O.sent,O.abrupt("return",a.data.list);case 4:case"end":return O.stop()}},u)}));return function(){return L.apply(this,arguments)}}(),p=function(){var L=(0,j.Z)(ne().mark(function u(a){var w,O,B;return ne().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,R.WY.get({url:$.ZP.localStorage.getPravateVideoUrl(a)});case 2:if(w=U.sent,w.data.code!==0){U.next=6;break}return O=w.data.data.videoPlayInfo,B=O===void 0?"":O,U.abrupt("return",B);case 6:return U.abrupt("return","");case 7:case"end":return U.stop()}},u)}));return function(a){return L.apply(this,arguments)}}(),l=function(){var L=(0,j.Z)(ne().mark(function u(a){var w,O,B;return ne().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return w=$.ZP.localStorage.getPravateDocUrl(a),U.prev=1,U.next=4,R.WY.get({url:w});case 4:if(O=U.sent,B=O.data,!(B.code===0&&B.data)){U.next=8;break}return U.abrupt("return",B.data.docResourceDownloadUrl||"");case 8:return U.abrupt("return","");case 11:return U.prev=11,U.t0=U.catch(1),U.abrupt("return","");case 14:case"end":return U.stop()}},u,null,[[1,11]])}));return function(a){return L.apply(this,arguments)}}(),P=function(u){var a=u.studyInfo,w=u.progress,O=u.recent_start,B=u.page_count,I=u.enterpriseId,U=u.userId,se=u.token,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ie,z=a.studyType;if(z==="studyTask"&&(ie=$.ZP.SaveProgress.studySaveProgress(a)),(z==="course"||z==="enterprise")&&(ie=$.ZP.SaveProgress.enterpriseCourseSaveProgress(a)),z==="studyProject"&&(ie=$.ZP.SaveProgress.projectSaveProgress(a)),z==="platform"&&(ie="".concat($.ZP.SaveProgress.platformCourseSaveProgress(a))),(X||z==="platform")&&(ie+="?enterprise_id=".concat(I,"&user_id=").concat(U)),X)return ie+="&access_token=".concat(se||localStorage.getItem("token")),ie;var ae={progress:w,recent_start:O,tempTime:Date.parse(new Date)};return B&&(ae.page_count=B),a.evaluationId&&(ae.evaluation_id=a.evaluationId),R.WY.post({url:ie,data:ae})},f=L=>{var u=L.popupId,a=L.planId,w=L.resourceId,O=L.type;return R.WY.post({url:$.ZP.TaskStudyRecord.setRandomPopupRecord(a),data:{course_id:w,terminal_type:"PC",popup_id:u,type:O}})},e=(L,u)=>{var a=$.ZP.SaveProgress.reportStatusInterval(L);return R.WY.post({url:a,data:u})}},21594:function(we,le,t){"use strict";t.d(le,{pu:function(){return $},RG:function(){return W},Gp:function(){return M},O8:function(){return y}});var j=t(88986),N=t(69164),ne=t(38642),R=t(41225),$=p=>{var l="";switch(p){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":l="studyTask";break;case"enterprise":l="enterprise";break;case"courseProject":l="studyProject";break;case"platform":case"purchased":l="platform";break;default:break}return l},W=(p,l)=>{var P={};return l.forEach(f=>{var e=p.find(O=>O.type===f.type);if(e)if(f.type==="document_duration_limit"){var L=e.action_list,u=L.find(O=>O.type==="random_popup_verification");!(0,ne.UI)("RANDOM_POPUP_VERIFY")||!u?P[f.name]="CLOSE":P[f.name]=u.param.checked==="true"?"OPEN":"CLOSE"}else if(f.type==="document_player"){var a=JSON.parse(e.actions);a.forEach(O=>{O.param.checked==="true"&&(P[f.name]=O.type)})}else if(f.type==="dynamic_watermark"){var w=e.action_list;w.forEach(O=>{O.type===f.resourceType&&O.param.checked==="true"&&(P[f.name]=O.param.comment)})}else P[f.name]=e.switch_status}),P},M=p=>{(0,R.sH)((0,j.Z)({progress:100,recent_start:1},p)).then(l=>{l&&l.data&&(0,N.Z)(l.data.integral_info||"")})},y=p=>{var l=document.createElement("div");return l.innerHTML=p,l.childNodes[0]}},51975:function(we,le,t){"use strict";t.d(le,{l:function(){return R}});var j=t(62029),N=t(12924),ne=t.n(N),R=($,W)=>function(y){return ne().createElement($.Consumer,null,p=>ne().createElement(W,(0,j.Z)({},y,{contextData:p})))}},43859:function(we,le,t){"use strict";var j=t(62029),N=t(81211),ne=t(43358),R=t(34041),$=t(12924),W=t.n($),M=t(94184),y=t.n(M),p=t(59239),l=t(55446),P=t.n(l),f=t(6793),e=p.Z.Item,L=R.Z.Option,u=a=>function(O){var B=O.field,I=O.form,U=O.hasFeedback,se=O.label,X=O.selectOptions,ie=O.submitCount,z=O.type,ae=O.displayType,V=O.labelCol,ve=V===void 0?{}:V,ce=O.wrapperCol,be=ce===void 0?{}:ce,Ie=O.required,De=Ie===void 0?!1:Ie,xe=O.customError,Oe=xe===void 0?!1:xe,je=O.colon,Ne=je===void 0?!0:je,Fe=O.formItemClassName,Je=(0,N.Z)(O,["field","form","hasFeedback","label","selectOptions","submitCount","type","displayType","labelCol","wrapperCol","required","customError","colon","formItemClassName"]),qe=I.touched[B.name],ze=ie>0,tt=I.errors[B.name],Qe=tt&&ze,ct=tt&&qe,ft=_e=>{var Ke=_e!=null&&_e.target?_e.target.value:_e;I.setFieldValue(B.name,Ke),I.touched[B.name]||setTimeout(()=>{I.setFieldTouched(B.name,!0)},0)},dt=_e=>{var Ke={},et={},He=_e;if(_e===void 0&&(He=""),I.setFieldValue(B.name,He),B.name==="courseList"&&_e&&Object.prototype.toString.apply(_e).slice(8,-1)==="Array"&&_e.length>0){Ke.startTime=_e[0].beginTime,et.startTime=Number((0,f.jZ)(_e[0].beginTime))+864e5;var Ge=[];_e.forEach(mt=>{mt.endTime!==""&&Ge.push(mt)}),Ge.length>0&&I.values.dateRange.endTime?(0,f.jZ)(I.values.dateRange.endTime)>Ge[Ge.length-1].endTime?(Ke.endTime=I.values.dateRange.endTime,et.endTime=Number((0,f.jZ)(I.values.dateRange.endTime))-864e5):Ge.length>0&&I.values.dateRange.endTime&&(0,f.jZ)(I.values.dateRange.endTime)<=Ge[Ge.length-1].endTime&&(Ke.endTime=Ge[Ge.length-1].endTime,et.endTime=Number((0,f.jZ)(Ge[Ge.length-1].endTime))-864e5):Ge.length>0&&!I.values.dateRange.endTime&&(Ke.endTime=Ge[Ge.length-1].endTime,et.endTime=Number((0,f.jZ)(Ge[Ge.length-1].endTime))-864e5),Ge.length>0&&I.setFieldValue("dateRange",Ke),I.setFieldValue("dateRangeLimit",et)}if(B.name==="stages"&&_e&&Object.prototype.toString.apply(_e).slice(8,-1)==="Array"&&_e.length>0){var st=[];_e.forEach(mt=>{mt.list&&mt.list.forEach(yt=>{yt.componentName==="OfflineTrain"&&st.push(yt.data)})}),st.length>0&&(Ke.startTime=st[0].beginTimeStr,Ke.endTime=st[st.length-1].endTimeStr,Ke.startTime=Number((0,f.jZ)(st[0].beginTimeStr))+864e5,Ke.endTime=Number((0,f.jZ)(st[st.length-1].endTimeStr))-864e5,I.setFieldValue("dateRangeLimit",Ke))}I.touched[B.name]||setTimeout(()=>{I.setFieldTouched(B.name,!0)},0)},ht=()=>I.setFieldTouched(B.name,!0),gt=y()(["cl-form__field"]);return W().createElement("div",{className:gt},W().createElement(e,{label:se,className:"$$CL-FORM-ERROR__".concat(B.name," antd-field-item ").concat(Fe),hasFeedback:!!(U&&ze||U&&qe),help:(Qe||ct)&&!Oe?tt:!1,validateStatus:(Qe||ct)&&!Oe?"error":"success",labelCol:ve,wrapperCol:be,required:De,colon:Ne},ae==="Custom"?W().createElement(a,(0,j.Z)({},B,Je,{displayType:ae,onBlur:ht,onFieldChange:dt})):W().createElement(a,(0,j.Z)({},B,Je,{displayType:ae,onBlur:ht,onChange:z?ft:dt,form:I}),X&&X.map(_e=>W().createElement(L,{key:_e},_e)))))};le.Z=u},11449:function(we,le,t){"use strict";t.d(le,{Z:function(){return ve}});var j=t(88986),N=t(33565),ne=t(12924),R=t.n(ne),$=t(3115),W=t(49111),M=t(19650),y=t(62029),p=t(57663),l=t(71577),P=t(91768),f=t(28216),e=t(37055),L=t(10237);function u(ce){var be=e.ZP.getHelpContentByMenuKey(),Ie={key:ce};return L.WY.get({url:be,params:Ie})}var a=t(74228),w=t.n(a),O=t(1164),B=t(76466),I=t(38642);class U extends R().Component{constructor(be){var Ie;super(be);Ie=this,this.getHelpContentByMenuKey=()=>{var De=this.props.defaultMenuKey;u(De).then(xe=>{var Oe=xe.data,je=Oe.help_url,Ne=Oe.video_url;this.setState({videoUrl:Ne,helpUrl:je})})},this.handleOpenHelpUrl=De=>{if((0,I.ve)()){window.open(De,"_blank");return}O.Z.targetTo({path:De,isExternalLink:!0})},this.handleOpenVideo=function(De){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ie.props.t("helpCenter.video");Ie.setState(Oe=>({resourcePlayInfo:(0,j.Z)((0,j.Z)({},Oe.resourcePlayInfo),{},{resourceInfo:{originUrl:De,source:{FD:De,OD:De},contentType:"mp4"}}),previewInfo:(0,j.Z)((0,j.Z)({},Oe.previewInfo),{},{title:xe,visible:!0,onCancel:Ie.handleCancelPreview})}))},this.handleCancelPreview=()=>{var De=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,j.Z)((0,j.Z)({},De),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:be.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var be=this.state,Ie=be.helpUrl,De=be.resourcePlayInfo,xe=be.previewInfo,Oe=be.videoUrl,je=this.props.t;return R().createElement("div",{className:w().helpCenter},Oe&&R().createElement(l.Z,{type:"link",className:w()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(Oe)},je("helpCenter.video")),Ie&&R().createElement(l.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(Ie)},je("helpCenter.tutorial")),R().createElement(B.Z,(0,y.Z)({},De,{previewInfo:xe})))}}var se=ce=>({defaultMenuKey:ce.currentRoute.menuKey});U.defaultProps={defaultMenuKey:""};var X=(0,f.$j)(se)((0,P.Z)()(U));function ie(ce){var be=ce.extra,Ie=localStorage.getItem("dingPersonnel"),De=sessionStorage.getItem("dingPersonnel");return R().createElement(M.Z,null,be,Ie!=="dingPersonnel"&&De!=="dingPersonnel"&&(0,I.eY)("COMMONEXTRA_HELP_CENTER")&&R().createElement(X,null))}var z=ie,ae=t(4408);function V(ce){var be=(0,ne.useState)({helpCenter:(0,I.eY)("HEAD_HELP_CENTER_BUT")}),Ie=(0,N.Z)(be,1),De=Ie[0],xe=ce.pageContainerParams,Oe=xe===void 0?{}:xe,je=ce.noPadding,Ne=je===void 0?!1:je,Fe=ce.isPersonal,Je=Fe===void 0?!1:Fe,qe=ce.pageTitle,ze=ce.className,tt=ze===void 0?"":ze,Qe={extra:De.helpCenter?R().createElement(z,{extra:Oe.extra}):Oe.extra},ct=(0,j.Z)((0,j.Z)({},Oe),Qe);return R().createElement("div",{className:"page-container-content ".concat(Ne?"page-container-noPadding":""," ").concat(Je?"page-container-content_personal_background":""," ").concat(tt)},qe&&R().createElement(ae.Z,{title:qe}),Je?R().createElement($.Z,null,ce.children):R().createElement($.Z,ct,ce.children))}var ve=V},13420:function(we,le,t){"use strict";var j=t(43358),N=t(34041),ne=t(12924),R=t.n(ne),$=t(91768),W=t(80991),M=t(5105),y=t(43859),p=N.Z.Option;class l extends R().Component{constructor(f){super(f);this.getBusinessTypes=()=>{(0,M.zk)().then(e=>{this.setState({businessType:e.data.data})})},this.getCustomBusinessTypes=()=>{(0,M.HO)().then(e=>{this.setState({businessType:e.data.data})})},this.state={businessType:[]}}componentDidMount(){this.props.isHuaLaiShi?this.getCustomBusinessTypes():this.getBusinessTypes()}render(){var f=this.props,e=f.width,L=f.value,u=f.placeholder,a=f.disabled,w=this.state.businessType,O=w.some(B=>B.biz_type===L);return R().createElement(N.Z,{value:O?L:"",disabled:a,placeholder:u,style:{width:e},onChange:this.props.onFieldChange},w.map(B=>R().createElement(p,{value:B.biz_type,key:B.biz_type},B.biz_name)))}}le.Z=(0,y.Z)((0,W.$j)((0,$.Z)()(l)))},7951:function(we,le,t){"use strict";t.r(le),t.d(le,{default:function(){return Pa}});var j=t(22385),N=t(31097),ne=t(88983),R=t(47933),$=t(71194),W=t(57016),M=t(57663),y=t(71577),p=t(88986),l=t(43358),P=t(34041),f=t(12924),e=t.n(f),L=t(91768),u=t(49101),a=t(50361),w=t.n(a),O=t(62029),B=t(34792),I=t(48086),U=t(80991),se=t(33565),X=t(68628),ie=t(6793),z=t(3407),ae=(0,ie.me)(),V=z.Z[ae],ve=D=>(0,ie.fy)(D)?(0,ie.fy)(D).length>100?V.approval.approvalNameLimit:"":V.validation.pleaseEnter+V.approval.approvalName,ce=D=>{if(!D||!(0,ie.fy)(D))return V.component.pleaseChoose+V.approval.businessType},be=D=>D?"":V.component.pleaseChoose+V.approval.businessType,Ie=D=>D.length>20?V.approval.limitDirectorsTip:D.length?"":V.approval.noDirectorsTip,De=D=>D?"":V.component.pleaseChoose+V.approval.approvalType,xe=D=>D?"":V.component.pleaseChoose+V.approval.approverEmpty,Oe=D=>D?"":V.component.pleaseChoose+V.approval.countLimit,je=D=>D?"":V.component.pleaseChoose+V.approval.rangeOfSelect,Ne=D=>D.length?"":V.component.pleaseChoose+V.searchInputPlaceholder.roles,Fe=t(43859);class Je extends e().Component{constructor(k){super(k);this.onChange=r=>{this.props.formik.setFieldValue("multiApprovalType",r.target.value)},this.state={}}render(){var k=this.props,r=k.t,c=k.isPreview,v=k.value;return e().createElement(e().Fragment,null,e().createElement(R.ZP.Group,{disabled:c,onChange:this.onChange,value:v},e().createElement(R.ZP,{value:"all"},r("approval.allSign")),e().createElement(R.ZP,{value:"any"},r("approval.orSign"))))}}var qe=(0,U.$j)((0,L.Z)()(Je));class ze extends e().Component{constructor(k){super(k);this.onChange=r=>{this.props.formik.setFieldValue("approverEmpty",r.target.value)},this.state={}}render(){var k=this.props,r=k.t,c=k.isPreview,v=k.value;return e().createElement(e().Fragment,null,e().createElement(R.ZP.Group,{disabled:c,onChange:this.onChange,value:v},e().createElement(R.ZP,{value:"autoPass"},r("approval.autoPass"),e().createElement(N.Z,{title:r("approval.autoExplain")},e().createElement("span",{className:"info-icon"},e().createElement(X.Z,null)))),e().createElement(R.ZP,{value:"turnToManager"},r("approval.autoReferralToAdministrator"),e().createElement(N.Z,{title:r("approval.turnExplain")},e().createElement("span",{className:"info-icon"},e().createElement(X.Z,null))))))}}var tt=(0,U.$j)((0,L.Z)()(ze)),Qe=P.Z.Option;class ct extends e().Component{constructor(k){super(k);this.state={}}render(){var k=this.props,r=k.t,c=k.isPreview,v=k.value;return e().createElement("div",null,e().createElement(P.Z,{disabled:c,value:v,style:{width:200},onChange:this.props.onFieldChange},e().createElement(Qe,{value:"one"},r("approval.autoOne")),e().createElement(Qe,{value:"more"},r("approval.autoMultiple")),"))"))}}var ft=(0,U.$j)((0,L.Z)()(ct)),dt=P.Z.Option;class ht extends e().Component{constructor(k){super(k);this.handleChange=r=>{this.props.formik.setFieldValue("rangeType",r)},this.state={}}render(){var k=this.props,r=k.t,c=k.isPreview,v=k.value;return e().createElement("div",null,e().createElement(P.Z,{disabled:c,value:v,style:{width:200},onChange:this.handleChange},e().createElement(dt,{value:"1"},r("common.allCompany")),e().createElement(dt,{value:"2"},r("approval.specifiedMember")),e().createElement(dt,{value:"3"},r("searchInputPlaceholder.roles")),"))"))}}var gt=(0,U.$j)((0,L.Z)()(ht)),_e=t(84874),Ke=t(63185),et=t(9676),He=t(47673),Ge=t(4107),st=t(54549),mt=t(10237),yt=t(37055),Dt=t(18329),$t=Ge.Z.Search;class St extends e().Component{constructor(k){super(k);this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{var r=this.state.checkRoleList,c=this.props,v=c.maxUser,Z=c.t,te=0;if(r.forEach(H=>{te+=H.personNum}),v&&te>v){I.default.warning((0,ie.ZT)("".concat(Z("approval.userLimitCount")),v));return}if(!r.length){I.default.warning((0,ie.ZT)("".concat(Z("component.pleaseChoose")),v));return}this.props.onOk(r,te)},this.onClickRole=(r,c)=>{var v=this.state.roleList,Z=this.state.checkRoleList,te=this.props,H=te.maxNum,he=te.t;if(r.checked)Z=Z.filter(Pe=>Pe.id!==r.id),this.setState({checkRoleList:Z});else{if(H&&Z.length===H){I.default.warning((0,ie.ZT)("".concat(he("approval.roleLimitCount")),H));return}this.setState({checkRoleList:[...Z,r]})}v[c].checked=!v[c].checked,this.setState({roleList:v})},this.onSearch=r=>{this.setState({roleKeyword:r},()=>{this.funGetRoles()})},this.funGetRoles=()=>{mt.WY.get({url:yt.ZP.Role.getList(),params:{keyword:this.state.roleKeyword}}).then(r=>{var c=this.state.checkRoleList;r.data.data.forEach(v=>{c.forEach(Z=>{v.id===Z.id&&(v.checked=!0)})}),this.setState({roleList:r.data.data||[]})})},this.removeItem=(r,c)=>{var v=this.state,Z=v.roleList,te=v.checkRoleList;te.splice(c,1),this.setState({checkRoleList:te});for(var H=0;H<Z.length;H++){var he=Z[H];he.id===r.id&&(Z[H].checked=!1,this.setState({roleList:Z}))}},this.state={roleList:[],roleKeyword:"",checkRoleList:[]}}componentDidUpdate(k){k.visible!==this.props.visible&&this.props.visible&&this.setState({checkRoleList:this.props.checkRoles,roleKeyword:"",roleList:[]},()=>{this.funGetRoles()})}render(){var k=this.props,r=k.visible,c=k.t,v=k.maxNum,Z=this.state,te=Z.roleList,H=Z.checkRoleList,he={okText:c("common.ok"),cancelText:c("common.cancel"),size:"oversized",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};return e().createElement(Dt.ZP,(0,O.Z)({title:c("approval.selectRole")},he,{footerType:"custom",visible:r,onOk:this.onOk,onCancel:this.onCancel}),e().createElement("div",{className:"role-content"},e().createElement("div",{className:"role-wrap"},e().createElement($t,{className:"role-search",placeholder:c("searchInputPlaceholder.role"),onSearch:this.onSearch}),te.map((Pe,Re)=>e().createElement("div",{className:"role-item cl-text-ellipsis",key:Pe.id,onClick:()=>{this.onClickRole(Pe,Re)}},e().createElement(et.Z,{checked:Pe.checked,disabled:v&&!Pe.checked&&H.length===v,className:"check-role"}),Pe.roleNameDesc))),e().createElement("div",{className:"user-wrap"},H.map((Pe,Re)=>e().createElement("div",{className:"display-item",key:Pe.id},Pe.roleNameDesc,e().createElement("span",{className:"display-item-close",onClick:()=>this.removeItem(Pe,Re)},e().createElement(st.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))))))}}St.defaultProps={maxUser:0,maxNum:0,checkRoles:[]};var Ut=(0,L.Z)()(St);class xt extends e().Component{constructor(k){super(k);this.onShowRole=()=>{this.props.isPreview||this.setState({roleVisible:!0})},this.onCancelRole=()=>{this.setState({roleVisible:!1})},this.onOkRole=(r,c)=>{this.setState({roleVisible:!1});var v=this.props.onFieldChange;v(r),this.props.onOkRole(c)},this.onClear=()=>{var r=this.props.onFieldChange;r([])},this.removeChargeItem=r=>{var c=this.props,v=c.onFieldChange,Z=c.value;Z.splice(r,1),v(Z)},this.state={roleVisible:!1}}componentDidUpdate(k){k.approvalType!==this.props.approvalType&&this.onClear()}render(){var k=this.props.value||[],r=this.props,c=r.t,v=r.isPreview,Z=this.state.roleVisible,te=localStorage.getItem("themeColor")||"#516ae6";return e().createElement("div",{className:"charge-roles"},k&&k.map((H,he)=>e().createElement("span",{className:"charge-roles-item",key:he.toString()},H.roleNameDesc,!v&&e().createElement("span",{className:"charge-roles-remove",onClick:()=>this.removeChargeItem(he)},e().createElement(_e.Z,{iconClass:"iconf-close"})))),e().createElement("span",{className:"add-roles-btn",style:{color:v?"#ccc":te,borderColor:v?"#ccc":te},onClick:this.onShowRole},e().createElement(_e.Z,{iconClass:"icon-icon_addx"})),k.length&&!v?e().createElement("span",{className:"clear-all-roles",onClick:this.onClear},c("common.clear")):null,e().createElement(Ut,{visible:Z,checkRoles:k,maxNum:1,onCancel:this.onCancelRole,onOk:this.onOkRole}))}}var Ct=(0,U.$j)((0,L.Z)()(xt)),zt=P.Z.Option;class Rt extends e().Component{constructor(k){super(k);this.handleChange=r=>{this.props.formik.setFieldValue("approvalEndLevel",r)},this.state={}}render(){var k=this.props,r=k.t,c=k.isPreview,v=k.value,Z=[2,3,4,5,6,7,8];return e().createElement("div",null,e().createElement("span",{className:"initiator"},r("approval.approvalEndLevel")),e().createElement(P.Z,{disabled:c,value:v,style:{width:120},onChange:this.handleChange},e().createElement(zt,{value:"1"},r("approval.directManager")),Z.map(te=>e().createElement(zt,{value:te,key:te},(0,ie.ZT)("".concat(r("approval.managerLevel")),te)))))}}var Ht=(0,U.$j)((0,L.Z)()(Rt)),Gt=(0,Fe.Z)(qe),kt=(0,Fe.Z)(tt),Mt=(0,Fe.Z)(ft),Lt=(0,Fe.Z)(gt),Bt=(0,Fe.Z)(Ct),bt=(0,Fe.Z)(Ht),Wt=P.Z.Option;class Vt extends e().Component{constructor(k){super(k);this.handleChange=r=>{this.props.changeVal("manageLevel",r)},this.handleCheck=r=>{this.props.changeVal("noManagerIsChecked",r.target.checked)},this.state={}}render(){var k=this.props,r=k.t,c=k.value,v=c.manageLevel,Z=c.noManagerIsChecked,te=k.isPreview,H=[2,3,4,5,6,7,8];return e().createElement("div",null,e().createElement("span",{className:"initiator"},r("approval.initiator")),e().createElement(P.Z,{disabled:te,value:v||"1",style:{width:120},onChange:this.handleChange},e().createElement(Wt,{value:"1"},r("approval.directManager")),H.map(he=>e().createElement(Wt,{value:he,key:he},(0,ie.ZT)("".concat(r("approval.managerLevel")),he)))),e().createElement("div",{className:"no-manage"},e().createElement(et.Z,{disabled:te,checked:Z,onChange:this.handleCheck},r("approval.noManager"))))}}var Nt=(0,L.Z)()(Vt),_t=t(88311);class Ft extends e().Component{constructor(k){super(k);this.onShowOrg=()=>{this.props.disabled||(this.props.onShowDialog(),this.setState({orgDialogVisible:!0}))},this.removeChargeItem=r=>{var c=this.props.value;c.splice(r,1),this.props.onFieldChange(c)},this.removeChargeItem=r=>{var c=this.props.value;c.splice(r,1),this.props.onFieldChange(c)},this.handleAddSignCharge=r=>{this.props.onHiddenDialog();var c=r.user;this.setState({orgDialogVisible:!1}),this.props.onFieldChange(c)},this.onClear=()=>{this.props.onFieldChange([])},this.handleCancelOrg=()=>{this.props.onHiddenDialog(),this.setState({orgDialogVisible:!1})},this.state={orgDialogVisible:!1}}render(){var k=this.state.orgDialogVisible,r=this.props.value,c=this.props,v=c.disabled,Z=c.t,te=c.isClear,H=c.maxUserCount,he=c.beyondLimitTip,Pe=c.filterAuthOpen,Re=Pe===void 0?!1:Pe,Be=localStorage.getItem("themeColor")||"#516ae6";return e().createElement("div",{className:"offline-train-form-charge"},r&&r.map((Ye,Ce)=>e().createElement("span",{className:"charge-user-item",key:Ce.toString()},Ye.user_name,Ye.closable!==!1&&!v?e().createElement("span",{className:"charge-user-remove",onClick:()=>this.removeChargeItem(Ce)},e().createElement(_e.Z,{iconClass:"iconf-close"})):null)),e().createElement("span",{className:"add-user-btn",style:{color:v?"#ccc":Be,borderColor:v?"#ccc":Be},onClick:this.onShowOrg},e().createElement(_e.Z,{iconClass:"icon-icon_addx"})),r&&r.length&&te&&!v?e().createElement("span",{style:{color:v?"#ccc":Be,borderColor:v?"#ccc":Be},className:"clear-all-roles",onClick:this.onClear},Z("common.clear")):null,e().createElement(_t.Z,{maxUserCount:H,beyondLimitTip:he,className:"offline-train-form-org",visible:k,onOk:this.handleAddSignCharge,displayType:["dept"],onlyUser:!0,filterAuthOpen:Re,initData:{user:r},modalConfig:{mask:!1},onCancel:this.handleCancelOrg}))}}var At=(0,Fe.Z)((0,L.Z)()(Ft)),vt={labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:16},sm:{span:16}}};class Yt extends e().Component{constructor(k){super(k);this.onInitData=r=>{this.setState({roleCount:0,manageLevel:"1",noManagerIsChecked:!1,initData:{directors:[],multiApprovalType:null,approverEmpty:null,approvalEndLevel:"1",roles:[],submitAssignType:"one",rangeType:"1"}},()=>{this.setState({approvalType:r}),this.state.formRef.resetForm()})},this.onOk=()=>{this.state.formRef.submitForm()},this.onCancel=()=>{this.props.onCancel()},this.onSubmit=r=>{var c=this.props.t,v=this.state,Z=v.approvalType,te=v.initData;if((Z===4||Z===5&&te.rangeType===2)&&this.state.roleCount===0){I.default.warning(c("approval.roleNoUser"));return}this.setState({initData:(0,p.Z)({},r)},()=>{var H=this.state,he=H.approvalType,Pe=H.manageLevel,Re=H.noManagerIsChecked,Be=H.roleCount;this.props.onComplete((0,p.Z)((0,p.Z)({},this.state.initData),{},{roleCount:Be,approvalType:he,manageLevel:Pe,noManagerIsChecked:Re}))})},this.onChangeApprovalType=r=>{this.onInitData(r.target.value)},this.onShowDialog=()=>{},this.onHiddenDialog=()=>{},this.onOkRole=r=>{this.setState({roleCount:r})},this.changeSupervisorVal=(r,c)=>{r==="manageLevel"&&this.setState({manageLevel:c}),r==="noManagerIsChecked"&&this.setState({noManagerIsChecked:c})},this.initRef=r=>{this.setState({formRef:r})},this.footerBtn=()=>{var r=this.props,c=r.t,v=r.isPreview;return e().createElement("div",null,e().createElement(y.Z,{onClick:this.onCancel},c("common.cancel")),!v&&e().createElement(y.Z,{type:"primary",onClick:()=>this.onOk()},c("common.ok")))},this.state={approvalType:1,manageLevel:"1",noManagerIsChecked:!1,roleCount:0,initData:{directors:[],multiApprovalType:null,approverEmpty:null,approvalEndLevel:"1",roles:[],submitAssignType:"one",rangeType:"1"},maxUserCount:20,formRef:null}}componentDidUpdate(k){if(k.visible!==this.props.visible&&this.props.visible){var r=this.props.value;r?this.setState({approvalType:r.approval_type*1,manageLevel:r.approvers.dept_manager.level,noManagerIsChecked:r.approvers.dept_manager.if_missed==="true"||r.approvers.dept_manager.if_missed===!0,roleCount:r.approval_type==="4"?r.approvers.roleCount:r.approvers.range_type==="5"?r.approvers.submit_assign.roleCount:0,initData:{directors:r.approval_type==="1"?r.approvers.peoples:r.approvers.submit_assign.range_type==="2"?r.approvers.submit_assign.range_values:[],multiApprovalType:r.sign_type,approverEmpty:r.miss_approver,approvalEndLevel:r.approvers.multi_level.level||"1",roles:r.approval_type==="4"?r.approvers.roles:r.approvers.submit_assign.range_type==="3"?r.approvers.submit_assign.range_values:[],submitAssignType:r.approvers.submit_assign.type||"one",rangeType:r.approvers.submit_assign.range_type||"1"}}):this.setState({approvalType:1,manageLevel:"1",noManagerIsChecked:!1,roleCount:0,initData:{directors:[],multiApprovalType:null,approverEmpty:null,approvalEndLevel:"1",roles:[],submitAssignType:"one",rangeType:"1"}})}}render(){var k=this.props,r=k.t,c=k.visible,v=k.isPreview,Z=this.state,te=Z.initData,H=Z.approvalType,he=Z.maxUserCount,Pe=Z.noManagerIsChecked,Re=Z.manageLevel,Be=Z.roleCount,Ye={noManagerIsChecked:Pe,manageLevel:Re},Ce={size:"oversized",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};return e().createElement(Dt.ZP,(0,O.Z)({title:r("authentication.abilityDetailApprover")},Ce,{footerType:"custom",visible:c,renderCustomFooter:this.footerBtn,onCancel:this.onCancel}),e().createElement("div",{className:"set-approval"},e().createElement("div",{className:"approve-type-radio"},e().createElement("div",{className:"cl-form__sectitle"},r("approval.approvalType")),e().createElement(R.ZP.Group,{onChange:this.onChangeApprovalType,value:H,disabled:v},e().createElement(R.ZP,{value:1},r("approval.specifiedMember")),e().createElement(R.ZP,{value:2},r("approval.multistageDirector"),e().createElement(N.Z,{title:r("approval.multistageDirectorExplain")},e().createElement("span",{className:"info-icon"},e().createElement(X.Z,null)))),e().createElement(R.ZP,{value:3},r("approval.departmentManager")),e().createElement(R.ZP,{value:4},r("searchInputPlaceholder.roles")),e().createElement(R.ZP,{value:5},r("approval.byMyself")))),e().createElement(U.J9,{ref:this.initRef,initialValues:te,onSubmit:this.onSubmit,render:Me=>e().createElement(U.l0,null,H===2&&e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("approval.approvalEnding")),e().createElement(U.gN,(0,O.Z)({name:"approvalEndLevel",required:!0,isPreview:v,validate:je,component:bt},vt))),H===3&&e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("approval.manageSelect")),e().createElement(Nt,{isPreview:v,value:Ye,changeVal:this.changeSupervisorVal})),H===5&&e().createElement("div",null,e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("approval.countLimit")),e().createElement(U.gN,(0,O.Z)({isPreview:v,name:"submitAssignType",required:!0,displayType:"Custom",validate:Oe,component:Mt},vt))),e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("approval.rangeOfSelect")),e().createElement(U.gN,(0,O.Z)({name:"rangeType",required:!0,isPreview:v,validate:je,component:Lt},vt)))),H===1||H===5&&Me.values.rangeType.toString()==="2"?e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("approval.approver")),e().createElement(U.gN,(0,O.Z)({name:"directors",required:!0,maxUserCount:he,beyondLimitTip:r("approval.limitDirectorsTip"),displayType:"Custom",validate:Ie,onShowDialog:this.onShowDialog,onHiddenDialog:this.onHiddenDialog,component:At,filterAuthOpen:!0,isClear:!0,disabled:v},vt))):null,H===4||H===5&&Me.values.rangeType.toString()==="3"?e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("searchInputPlaceholder.roles")),e().createElement(U.gN,(0,O.Z)({name:"roles",required:!0,isPreview:v,approvalType:H,validate:Ne,component:Bt,displayType:"Custom",onOkRole:this.onOkRole},vt))):null,H===1&&Me.values.directors&&Me.values.directors.length<2||H===5&&Me.values.submitAssignType==="one"||H===4&&Be<2?null:e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("approval.multiUserApprovalType")),e().createElement(U.gN,(0,O.Z)({name:"multiApprovalType",required:!0,isPreview:v,validate:De,component:Gt},vt))),e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("approval.approverEmpty")),e().createElement(U.gN,(0,O.Z)({name:"approverEmpty",required:!0,isPreview:v,validate:xe,component:kt},vt))))}),e().createElement("div",null)))}}var Kt=(0,L.Z)()(Yt),Jt=t(77576),Qt=t(59314);class Se extends e().Component{constructor(k){super(k);this.onOk=()=>{var r=this.state,c=r.deptIds,v=r.submitUserIds,Z=r.isDefault,te=this.props,H=te.t,he=te.onComplete;if(Z==="true"){he({deptIds:[],submitUserIds:[],isDefault:"true"});return}c.length||v.length?this.funCheckRepeat():I.default.warning(H("component.pleaseChoose")+H("approval.createUser"))},this.onCancel=()=>{this.props.onCancel()},this.onShowConditional=()=>{var r=this.props.isPreview;r||this.setState({orgDialogVisible:!0})},this.handleAdd=r=>{this.setState({deptIds:r.dept||[],submitUserIds:r.user||[],orgDialogVisible:!1})},this.handleCancel=()=>{this.setState({orgDialogVisible:!1})},this.handleSwitch=r=>{this.setState({isDefault:r?"true":!1})},this.removeChargeItem=(r,c)=>{var v=this.state,Z=v.deptIds,te=v.submitUserIds;r==="user"?(te.splice(c,1),this.setState({submitUserIds:te})):(Z.splice(c,1),this.setState({deptIds:Z}))},this.funCheckRepeat=()=>{for(var r=this.state,c=r.deptIds,v=r.submitUserIds,Z=this.props,te=Z.config,H=Z.onComplete,he=Z.currentNode,Pe=Z.t,Re=te.child_node.condition_nodes,Be=!1,Ye=function(We){var Ve=Re[We],pt=Ve.id,at=Ve.condition_list,lt=Ve.default_branch,ut=Ve.is_config;if(pt===he.id)return"continue";if(lt!=="true"&&ut==="true")for(var Zt=0;Zt<at.length;Zt++){var Xt=at[Zt],Ze=Xt.field,qt=Xt.values;if(Ze==="deptId"?qt.forEach(Tt=>{c.forEach(wt=>{if(wt.id===Tt.id){Be=!0,I.default.error(Pe("approval.deptRepeat",{name:wt.name,index:We+1}));return}})}):Ze==="submitUserId"&&qt.forEach(Tt=>{v.forEach(wt=>{if(wt.user_id===Tt.user_id){Be=!0,I.default.error(Pe("approval.userRepeat",{name:wt.name,index:We+1}));return}})}),Be)return{v:void 0}}},Ce=0;Ce<Re.length;Ce++){var Me=Ye(Ce);if(Me!=="continue"&&typeof Me=="object")return Me.v}Be||H({deptIds:c,submitUserIds:v,isDefault:"false"})},this.footerBtn=()=>{var r=this.props,c=r.t,v=r.isPreview;return e().createElement("div",null,e().createElement(y.Z,{onClick:this.onCancel},c("common.cancel")),!v&&e().createElement(y.Z,{type:"primary",onClick:()=>this.onOk()},c("common.ok")))},this.state={orgDialogVisible:!1,deptIds:[],submitUserIds:[],isDefault:"false"}}componentDidUpdate(k){if(k.visible!==this.props.visible&&this.props.visible){var r=[],c=[],v=this.props.value;v&&v.default_branch!=="true"&&v.condition_list.forEach(Z=>{Z.field==="deptId"?r=[...Z.values]:c=[...Z.values]}),this.setState({deptIds:r,submitUserIds:c,isDefault:v?v.default_branch:"false"})}}render(){var k=this.props,r=k.t,c=k.visible,v=k.isPreview,Z=this.state,te=Z.orgDialogVisible,H=Z.submitUserIds,he=Z.deptIds,Pe=Z.isDefault,Re=localStorage.getItem("themeColor")||"#516ae6",Be={size:"oversized",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};return e().createElement(Dt.ZP,(0,O.Z)({title:r("approval.editConditional")},Be,{footerType:"custom",visible:c,renderCustomFooter:this.footerBtn,onCancel:this.onCancel}),e().createElement("div",{className:"set-conditional"},e().createElement("div",{className:"cl-form__sectitle"},r("approval.isDefaultBranch")),e().createElement("div",null,e().createElement(Qt.Z,{disabled:v,defaultChecked:Pe==="true",onChange:this.handleSwitch})),Pe!=="true"&&e().createElement("div",null,e().createElement("div",{className:"cl-form__sectitle"},r("approval.createUser")),e().createElement("div",null,he&&he.map((Ye,Ce)=>e().createElement("span",{className:"charge-conditional-item",key:Ce.toString()},Ye.name,!v&&e().createElement("span",{className:"charge-conditional-remove",onClick:()=>this.removeChargeItem("dept",Ce)},e().createElement(_e.Z,{iconClass:"iconf-close"})))),H&&H.map((Ye,Ce)=>e().createElement("span",{className:"charge-conditional-item",key:Ce.toString()},Ye.name,!v&&e().createElement("span",{className:"charge-conditional-remove",onClick:()=>this.removeChargeItem("user",Ce)},e().createElement(_e.Z,{iconClass:"iconf-close"})))),e().createElement("span",{className:"add-conditional-btn",style:{color:v?"#ccc":Re,borderColor:v?"#ccc":Re},onClick:this.onShowConditional},e().createElement(_e.Z,{iconClass:"icon-icon_addx"}))))),e().createElement(_t.Z,{className:"offline-train-form-org",visible:te,onOk:this.handleAdd,filterAuthOpen:!0,title:r("approval.rangeInitiator"),displayType:["dept"],initData:{user:H,dept:he},modalConfig:{mask:!1},onCancel:this.handleCancel}))}}var g=(0,L.Z)()(Se),C=(0,ie.me)(),d=z.Z[C],o={id:"sid-start-node",node_name:d.personal.submitter,node_type:0,condition_list:[],child_node:{id:"1",node_name:d.authentication.abilityDetailApprover,node_type:1,child_node:null,is_config:!1,config:{approval_type:"",sign_type:"",miss_approver:"",approvers:{peoples:[],roles:[],dept_manager:{if_missed:!0,level:"1"},submit_assign:{type:"",range_type:"",range_values:[]},multi_level:{level:""}}}}};function h(D){for(var k=D||32,r=[],c=0,v="0123456789".split("");c<k;)r.push(v[0|Math.random()*v.length]),c++;return r.join("")}function _(D){var k=D.t;return e().createElement("div",{className:"end-node"},e().createElement("div",{className:"end-node-circle"}),e().createElement("div",{className:"end-node-text"},k("approval.approvalEnd")))}var A=(0,L.Z)()(_),K=(0,ie.me)(),x=z.Z[K],F={APPROVER:1,NOTIFIER:2,BRANCH:3,CONDITION:4},ee=(0,p.Z)((0,p.Z)({},F),{},{START:0}),oe={"1":x.approval.specifiedMember,"2":x.approval.multistageDirector,"3":x.approval.departmentManager,"4":x.searchInputPlaceholder.roles,"5":x.approval.byMyself},G={[F.APPROVER]:x.authentication.abilityDetailApprover,[F.NOTIFIER]:x.approval.copyTo,[F.CONDITION]:x.approval.conditional},Y={[F.APPROVER]:{id:h(),node_name:x.authentication.abilityDetailApprover,node_type:F.APPROVER,child_node:null,is_config:"false",config:{approval_type:"1",sign_type:"",miss_approver:"",approvers:{peoples:[],roles:[],dept_manager:{if_missed:!1,level:"1"},submit_assign:{type:"one",range_type:"1",range_values:[]},multi_level:{level:"1"}}}},[F.NOTIFIER]:{node_name:x.approval.copyTo,node_type:F.NOTIFIER},[F.CONDITION]:{node_name:x.approval.conditionalBranch,id:h(),node_type:F.CONDITION,child_node:null,condition_nodes:[]},[F.BRANCH]:{node_name:x.approval.conditionalBranch,id:h(),node_type:F.BRANCH,default_branch:"false",is_config:"false",condition_list:[{field:"deptId",operate:"in",values:[]},{field:"submitUserId",operate:"in",values:[]}],child_node:null}},me=e().createContext(null),Ee=me;function Ae(D){return e().createElement("div",{className:"add-node-popover-item ".concat(D.type),onClick:D.onClick},e().createElement("div",{className:"item-wrapper"},e().createElement("span",{className:"iconfont"},e().createElement(_e.Z,{iconClass:"iconf-send",size:"30px"}))),e().createElement("p",null,D.name))}var Ue=Ae;function J(D){return e().createElement("div",{className:"add-node-popover-body"},e().createElement(Ue,{type:"approver",onClick:()=>D.onOptionClick(F.APPROVER),name:G[F.APPROVER]}),e().createElement(Ue,{type:"condition",onClick:()=>D.onOptionClick(F.CONDITION),name:G[F.CONDITION]}))}var S=J,E=11;function n(D){var k=(0,f.useState)(!1),r=(0,se.Z)(k,2),c=r[0],v=r[1],Z=(0,f.useContext)(Ee),te=Z.onAddNode,H=Z.config,he=Z.clickOpe,Pe=Z.isPreview;(0,f.useEffect)(()=>{v(!1)},[he]);function Re(We){if(We.stopPropagation(),We.cancelBubble=!0,!Pe)if(D.objRef.node_type===ee.START)ot();else if(D.objRef.node_type===ee.CONDITION){for(var Ve=Me(H.child_node.child_node),pt=0;pt<H.child_node.condition_nodes.length;pt++){var at=H.child_node.condition_nodes[pt];if(Ve+Me(at)>=E){I.default.warning(D.t("approval.approvalDeepTip"));return}}ot()}else Ye()}function Be(We){if(We===F.APPROVER&&Me(H)>=E){I.default.warning(D.t("approval.approvalDeepTip")),v(!1);return}te(We,D.pRef,D.objRef),v(!1)}function Ye(){if(H.child_node)if(H.child_node.node_type===4){for(var We=0;We<H.child_node.condition_nodes.length;We++){var Ve=H.child_node.condition_nodes[We];Ce(Ve,We)}H.child_node.child_node?Ce(H.child_node.child_node,0,"before"):Me(H)>=E&&(I.default.warning(D.t("approval.approvalDeepTip")),v(!1))}else ot()}function Ce(We,Ve,pt){if(D.objRef.id===We.id){var at=Me(H.child_node.child_node);if(pt==="before"){for(var lt=0;lt<H.child_node.condition_nodes.length;lt++){var ut=H.child_node.condition_nodes[lt],Zt=Me(ut);if(at+Zt>=E){I.default.warning(D.t("approval.approvalDeepTip")),v(!1);return}}ot();return}at+Me(H.child_node.condition_nodes[Ve])>=E?(I.default.warning(D.t("approval.approvalDeepTip")),v(!1)):ot()}We.child_node&&Ce(We.child_node,Ve,pt)}function Me(We){var Ve=0;return function pt(at,lt){if(typeof at=="object")for(var ut in at)at[ut]&&ut==="child_node"&&typeof at[ut]=="object"?pt(at[ut],lt+1):Ve=Ve<lt+1?lt+1:Ve;else Ve=Ve>lt?Ve:lt}(We,0),Ve}function ot(){D.objRef.node_type===ee.START&&D.objRef.child_node&&D.objRef.child_node.node_type!==F.CONDITION?v(!c):Be(F.APPROVER)}return e().createElement("div",{className:"add-node-btn-box"},e().createElement("div",{className:"add-node-btn"},c&&e().createElement("div",{className:"add-popover"},e().createElement(S,{onOptionClick:Be})),D.objRef.node_type===0&&D.objRef.child_node&&D.objRef.child_node.node_type===4||D.objRef.node_type===4?null:e().createElement("span",null,e().createElement("button",{className:"btn",onClick:Re},e().createElement("span",{className:"iconfont"},e().createElement(_e.Z,{className:"iconfont",iconClass:"icon-icon_addx"}))))))}var i=(0,L.Z)()(n);function T(D){return e().createElement("div",null,e().createElement("div",{className:"node-wrap"},e().createElement("div",{className:"node-wrap-box ".concat(D.type===ee.START?"start-node":"")},e().createElement("div",{className:"title",style:D.titleStyle},D.title),e().createElement("div",{className:"content",onClick:D.onContentClick},D.children)),e().createElement(i,{objRef:D.objRef})))}var m=T;function s(D){var k=D.t;return e().createElement(m,{type:0,objRef:D.objRef,title:e().createElement("span",null,D.node_name)},e().createElement("div",{className:"text"},k("approval.companyStaff")))}var b=(0,L.Z)()(s);function Q(D){var k=(0,f.useState)(""),r=(0,se.Z)(k,2),c=r[0],v=r[1],Z=(0,f.useState)(!1),te=(0,se.Z)(Z,2),H=te[0],he=te[1],Pe=(0,f.useRef)(null),Re=(0,f.useContext)(Ee),Be=Re.isPreview;(0,f.useEffect)(()=>{v(D.node_name)},[D.node_name]);function Ye(We){We.currentTarget.select()}function Ce(){he(!1),c||v(D.placeholder)}function Me(){}(0,f.useEffect)(()=>{H&&Pe.current.focus()},[H]);function ot(We){var Ve=We.target.value;D.onTitleChange&&D.onTitleChange(Ve),v(Ve)}return e().createElement(e().Fragment,null,D.icon&&e().createElement("span",{className:"iconfont"},D.icon),H?e().createElement("input",{ref:Pe,type:"text",className:"ant-input editable-title-input",onBlur:Ce,onChange:ot,onFocus:Ye,value:c,placeholder:D.placeholder}):e().createElement("span",{className:"editable-title",onClick:Me},c),!Be&&e().createElement("span",{onClick:D.delNode,className:"iconfont close"},e().createElement(_e.Z,{iconClass:"icon-f-close",size:"10px"})))}var q=Q;function ue(D){var k=D.t,r=(0,f.useContext)(Ee),c=r.onDeleteNode,v=r.onSelectNode;function Z(){c(D.pRef,D.objRef)}function te(Pe){D.pRef.child_node.node_name=Pe}function H(){v(D.pRef,D.objRef),D.onContentClick&&D.onContentClick()}var he=e().createElement(q,{delNode:Z,placeholder:D.node_name,node_name:D.node_name,onTitleChange:te});return e().createElement(m,{titleStyle:{backgroundColor:"rgb(255, 148, 62)"},onContentClick:H,title:he,objRef:D.objRef},e().createElement("div",{className:"text"},D.is_config==="true"?e().createElement(N.Z,{title:oe[D.config.approval_type]},e().createElement("span",{className:"cl-text-ellipsis"},oe[D.config.approval_type])):e().createElement("span",{className:"placeholder"},k("tutorial.selectApprover"))),e().createElement("span",{className:"iconfont arrow"},e().createElement(_e.Z,{iconClass:"icon-right"})))}var re=(0,L.Z)()(ue);function ge(D){var k=(0,f.useContext)(Ee),r=k.onDeleteNode,c=k.onSelectNode;function v(){r(D.pRef,D.objRef)}function Z(he){D.pRef.child_node.node_name=he}function te(){c(D.pRef,D.objRef),D.onContentClick&&D.onContentClick()}var H=e().createElement(q,{delNode:v,placeholder:D.node_name,node_name:D.node_name,onTitleChange:Z});return e().createElement(m,{titleStyle:{backgroundColor:"rgb(50, 150, 250)"},onContentClick:te,title:H,objRef:D.objRef},e().createElement("div",{className:"text"},D.owner?D.owner:D.t("approval.copyTo")),e().createElement("span",{className:"iconfont arrow"},e().createElement(_e.Z,{iconClass:"icon-right"})))}var fe=ge,ye=t(81211);function de(D){var k=D.first,r=k===void 0?!1:k,c=D.last,v=c===void 0?!1:c;return e().createElement(e().Fragment,null,r&&e().createElement("div",{className:"top-left-cover-line"}),r&&e().createElement("div",{className:"bottom-left-cover-line"}),v&&e().createElement("div",{className:"top-right-cover-line"}),v&&e().createElement("div",{className:"bottom-right-cover-line"}))}function Te(D){var k=[];return D.forEach(r=>{r.values.forEach(c=>{k.push(c.name)})}),k.join("\u3001")}function $e(D){var k=D.first,r=k===void 0?!1:k,c=D.last,v=c===void 0?!1:c,Z=D.t,te=D.index,H=D.sortLeft,he=D.node_name,Pe=D.default_branch,Re=D.delBranch,Be=D.sortRight,Ye=D.is_config,Ce=D.condition_list,Me=D.onBranchClick,ot=D.objRef,We=(0,f.useContext)(Ee),Ve=We.isPreview;return e().createElement("div",{className:"condition-node"},e().createElement("div",{className:"condition-node-box"},e().createElement("div",{className:"auto-judge"},!r&&e().createElement("div",{className:"sort-left",onClick:H}),e().createElement("div",{className:"title-wrapper"},e().createElement("span",{className:"editable-title"},he,te+1,e().createElement("span",{className:"default-conditional"},Pe==="true"?"(".concat(Z("approval.defaultConditional"),")"):"")),!Ve&&e().createElement("span",{className:"close",onClick:Re},e().createElement(_e.Z,{iconClass:"icon-f-close",size:"10px"}))),!v&&e().createElement("div",{className:"sort-right",onClick:Be}),e().createElement("div",{className:"content",onClick:()=>Me(ot)},e().createElement("div",{className:"text"},Ye==="true"&&Pe!=="true"?e().createElement(N.Z,{title:Z("approval.sponsorBelongs")+Te(Ce)},e().createElement("div",{className:"cl-text-ellipsis"},Z("approval.sponsorBelongs")+Te(Ce))):e().createElement("span",{className:"placeholder"},Z("approval.setConditional"))))),e().createElement(i,{objRef:D.objRef})))}function nt(D){var k=D.t,r=D.condition_nodes,c=r===void 0?[]:r,v=(0,ye.Z)(D,["t","condition_nodes"]),Z=(0,f.useContext)(Ee),te=Z.onAddNode,H=Z.onDeleteNode,he=Z.onSelectNode,Pe=Z.isPreview;function Re(){if(!Pe){if(v.objRef.condition_nodes.length===20){I.default.warning(k("approval.limitBranchTip"));return}te(ee.BRANCH,v.pRef,v.objRef)}}function Be(Ce){if(c.length===2){H(v.pRef,v.objRef,"twoBranch",Ce);return}H(v.pRef,v.objRef,ee.BRANCH,Ce)}function Ye(Ce){he(v.objRef,Ce)}return c&&c.length>0&&e().createElement("div",{className:"branch-wrap"},e().createElement("div",{className:"branch-box-wrap"},e().createElement("div",{className:"branch-box"},e().createElement("button",{className:"add-branch",onClick:Re},k("approval.addConditional")),c.map((Ce,Me)=>e().createElement("div",{className:"col-box",key:Me.toString()},e().createElement($e,(0,O.Z)({},Ce,{t:k,first:Me===0,onBranchClick:Ye,delBranch:()=>Be(Me),index:Me,last:Me===c.length-1,objRef:Ce})),Ce.child_node&&e().createElement(Et,{pRef:Ce,config:Ce.child_node}),e().createElement(de,{first:Me===0,last:Me===c.length-1})))),e().createElement(i,{objRef:v.objRef})))}var it=(0,L.Z)()(nt),pe={0:b,1:re,2:fe,4:it};function aa(D){var k=D.config,r=D.pRef,c=pe[k.node_type]||null;return c&&e().createElement(c,(0,O.Z)({},k,{objRef:k,pRef:r}))}var It=aa;function Le(D){var k=D.config,r=D.pRef;return e().createElement(e().Fragment,null,e().createElement(It,{pRef:r,config:k}),k.child_node&&e().createElement(Le,{pRef:k,config:k.child_node}))}var Et=Le,rt={DOWN:1,UP:2,MIN:50,MAX:300};function na(D){var k=(0,f.useState)(80),r=(0,se.Z)(k,2),c=r[0],v=r[1];function Z(te){if(te===rt.DOWN){if(c===rt.MIN)return;c-=10,v(c)}if(te===rt.UP){if(c===rt.MAX)return;c+=10,v(c)}}return e().createElement(e().Fragment,null,e().createElement("div",{className:"zoom"},e().createElement("div",{className:"zoom-out".concat(c===rt.MIN?" disabled":""),onClick:()=>Z(rt.DOWN)},"-"),e().createElement("span",null,c,"%"),e().createElement("div",{className:"zoom-in".concat(c===rt.MAX?" disabled":""),onClick:()=>Z(rt.UP)},"+")),e().createElement("div",{className:"box-scale",id:"box-scale",style:{transform:"scale(".concat(c/100,")"),transformOrigin:"50% 0px 0px"}},D.children))}var ia=na;function oa(D){var k=D.t,r=D.config,c=D.updateApproval,v=D.visible,Z=D.isPreview,te=(0,f.useState)(r),H=(0,se.Z)(te,2),he=H[0],Pe=H[1],Re=(0,f.useState)(!1),Be=(0,se.Z)(Re,2),Ye=Be[0],Ce=Be[1],Me=(0,f.useState)(!1),ot=(0,se.Z)(Me,2),We=ot[0],Ve=ot[1],pt=(0,f.useState)(!1),at=(0,se.Z)(pt,2),lt=at[0],ut=at[1],Zt=(0,f.useState)(null),Xt=(0,se.Z)(Zt,2),Ze=Xt[0],qt=Xt[1];function Tt(){Pe((0,p.Z)({},he)),La()}(0,f.useEffect)(()=>{v&&Tt()},[v]);function wt(ke,Xe,Pt){var jt=w()(Pt.child_node);ke===F.APPROVER&&(Pt.child_node=(0,p.Z)((0,p.Z)({},w()(Y[F.APPROVER])),{},{child_node:jt,id:h()})),ke===F.NOTIFIER&&(Pt.child_node=(0,p.Z)((0,p.Z)({},w()(Y[F.NOTIFIER])),{},{child_node:jt,id:h()})),ke===F.CONDITION&&(Pt.child_node=(0,p.Z)((0,p.Z)({},w()(Y[F.CONDITION])),{},{condition_nodes:[(0,p.Z)((0,p.Z)({},w()(Y[F.BRANCH])),{},{node_name:"".concat(k("approval.conditionalBranch")),child_node:jt,id:h(),default_branch:"true",is_config:"true"}),(0,p.Z)((0,p.Z)({},w()(Y[F.BRANCH])),{},{node_name:"".concat(k("approval.conditionalBranch")),id:h(),child_node:(0,p.Z)((0,p.Z)({},w()(Y[F.APPROVER])),{},{child_node:null,id:h()})})]})),ke===F.BRANCH&&Pt.condition_nodes.push((0,p.Z)((0,p.Z)({},w()(Y[ee.BRANCH])),{},{node_name:k("approval.conditionalBranch"),id:h(),child_node:(0,p.Z)((0,p.Z)({},w()(Y[F.APPROVER])),{},{child_node:null,id:h()})})),Tt()}function Da(ke,Xe,Pt,jt){W.Z.confirm({title:k("common.delete"),content:k("approval.deleteNodeTip"),okText:k("common.ok"),cancelText:k("common.cancel"),onOk:()=>{if(Pt==="twoBranch"){var ta=null;jt===1?ta=Xe.condition_nodes[0].child_node:ta=Xe.condition_nodes[1].child_node,ke.child_node=ta}else if(Pt===ee.BRANCH)Xe.condition_nodes.splice(jt,1);else{var Na=Xe.child_node;ke.child_node=Na}Tt()}})}function _a(ke,Xe){qt({current:Xe,prev:ke}),Xe.node_type===1&&Ve(!0),Xe.node_type===3&&ut(!0)}function Ia(){Ve(!1)}function Oa(){ut(!1)}function Sa(ke){switch(Ve(!1),Ze.current.is_config="true",Ze.current.config.approval_type=ke.approvalType.toString(),Ze.current.config.miss_approver=ke.approverEmpty,ke.approvalType.toString()){case"1":Ze.current.config=(0,p.Z)((0,p.Z)({},Ze.current.config),{},{approvers:(0,p.Z)((0,p.Z)({},Ze.current.config.approvers),{},{peoples:ke.directors}),sign_type:ke.directors.length>1?ke.multiApprovalType:null});break;case"2":Ze.current.config=(0,p.Z)((0,p.Z)({},Ze.current.config),{},{approvers:(0,p.Z)((0,p.Z)({},Ze.current.config.approvers),{},{multi_level:{level:ke.approvalEndLevel}}),sign_type:ke.multiApprovalType});break;case"3":Ze.current.config=(0,p.Z)((0,p.Z)({},Ze.current.config),{},{approvers:(0,p.Z)((0,p.Z)({},Ze.current.config.approvers),{},{dept_manager:{if_missed:ke.noManagerIsChecked,level:ke.manageLevel}}),sign_type:ke.multiApprovalType});break;case"4":Ze.current.config=(0,p.Z)((0,p.Z)({},Ze.current.config),{},{approvers:(0,p.Z)((0,p.Z)({},Ze.current.config.approvers),{},{roles:ke.roles,roleCount:ke.roleCount}),sign_type:ke.roleCount>1?ke.multiApprovalType:null});break;case"5":Ze.current.config=(0,p.Z)((0,p.Z)({},Ze.current.config),{},{approvers:(0,p.Z)((0,p.Z)({},Ze.current.config.approvers),{},{submit_assign:{type:ke.submitAssignType,range_type:ke.rangeType,range_values:ke.rangeType.toString()==="1"?[]:ke.rangeType.toString()==="2"?ke.directors:ke.roles,roleCount:ke.roleCount}}),sign_type:ke.submitAssignType==="more"?ke.multiApprovalType:null});break;default:}Tt()}function ka(ke){ut(!1),Ze.current.is_config="true",Ze.current.condition_list.forEach(Xe=>{Xe.values=Xe.field==="deptId"?[...ke.deptIds]:[...ke.submitUserIds]}),Ze.current.default_branch=ke.isDefault,ke.isDefault==="true"&&he.child_node.condition_nodes.forEach(Xe=>{Xe.id!==Ze.current.id&&Xe.default_branch==="true"&&(Xe.default_branch="false",Xe.is_config="false",Xe.condition_list.forEach(Pt=>{Pt.values=[]}))}),Tt()}function La(){c&&c(he)}function ba(){Ce(new Date().getTime())}return e().createElement(Ee.Provider,{value:{config:he,updateNode:Tt,onAddNode:wt,onDeleteNode:Da,onSelectNode:_a,clickOpe:Ye,isPreview:Z}},e().createElement("section",{className:"dingflow-design",onClick:ba},e().createElement(ia,null,e().createElement(Et,{config:he}),e().createElement(A,null)),e().createElement(Kt,{isPreview:Z,onCancel:Ia,value:Ze&&Ze.current.is_config==="true"?Ze.current.config:null,onComplete:Sa,visible:We}),e().createElement(g,{config:he,isPreview:Z,onCancel:Oa,value:Ze&&Ze.current.is_config==="true"?Ze.current:null,onComplete:ka,visible:lt,currentNode:Ze&&Ze.current})))}var la=(0,L.Z)()(oa);function ca(D){var k=D.updateConfig,r=D.nodeConfig,c=D.visible,v=D.isPreview;function Z(te){k(te)}return e().createElement("div",{className:"work-flow-content"},e().createElement(la,{config:r,updateApproval:Z,visible:c,isPreview:v}))}var da=ca,Ot=t(5105),pa=t(13420),ua=t(7584),ha=t(70075),ea={labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:16},sm:{span:16}}};class ma extends e().Component{constructor(k){super(k);this.onCancel=()=>{this.setState({operateType:null}),this.props.cancel()},this.onOk=()=>{this.setState({operateType:"enable"});var r=this.props.t;this.state.nowStage===1&&this.state.formRef?this.state.formRef.submitForm():this.state.nodeConfig&&(this.state.nodeConfig.child_node?this.verifyApprovalIsConfigOk(this.state.nodeConfig.child_node):I.default.warning(r("approval.approvalLimitTip")))},this.onSave=()=>{this.setState({operateType:"update"});var r=this.state,c=r.nowStage,v=r.formRef;c===1&&v?this.state.formRef.submitForm():this.finalSubmitData()},this.onSubmit=r=>{var c=this.state,v=c.operateType,Z=c.stepOneToTwo;v==="enable"&&this.setState({nowStage:2}),this.setState({initData:r},()=>{if(Z){this.setState({nowStage:2,stepOneToTwo:!1});return}v==="update"&&this.finalSubmitData()})},this.verifyApprovalIsConfigOk=r=>{var c=this.props.t;if(r.node_type===4){var v=!0,Z="false";if(r.condition_nodes.forEach(he=>{he.child_node||(v=!1),he.default_branch==="true"&&(Z="true")}),!v){I.default.warning(c("approval.approvalLimitTip"));return}if(Z!=="true"){I.default.warning(c("approval.defaultBranch"));return}if(r.condition_nodes.some(he=>he.is_config!=="true"&&he.default_branch!=="true")){I.default.warning(c("approval.editApprovalTip"));return}for(var te=0;te<r.condition_nodes.length;te++){var H=r.condition_nodes[te];if(H.child_node&&!this.verifyApproval(H.child_node))return}}if(r.node_type===1){if(r.is_config!=="true"){I.default.warning(c("approval.editApprovalTip"));return}if(r.child_node){this.verifyApprovalIsConfigOk(r.child_node);return}}this.finalSubmitData()},this.verifyApproval=r=>{var c=this.props.t;return r.is_config!=="true"?(I.default.warning(c("approval.editApprovalTip")),!1):r.child_node?this.verifyApproval(r.child_node):!0},this.finalSubmitData=()=>{if(!this.state.isLoading)try{this.setState({isLoading:!0},()=>{var r=this.state.operateType;r==="update"&&!this.props.initData.id&&(r="insert");var c={workflow_template:this.state.initData,node_config:this.state.nodeConfig,operate_type:r};(0,Ot.Xu)(c).then(v=>{v.data.code==="200000"?(this.setState({operateType:null,isLoading:!1}),this.props.updateSuccess()):I.default.error(v.data.message||this.props.t("study.operateFailed"))}).catch(()=>{this.setState({isLoading:!1})})})}catch(r){this.setState({isLoading:!1})}},this.stepClick=r=>{var c=this.state,v=c.totalStage,Z=c.operateStageList;r===2?(this.setState({stepOneToTwo:!0}),this.state.formRef.submitForm()):this.setState({nowStage:r,totalStage:Z.length===v?v:v+1})},this.initRef=r=>{this.setState({formRef:r})},this.updateApproval=r=>{this.setState({nodeConfig:r})},this.footerBtn=()=>{var r=this.props,c=r.t,v=r.isPreview,Z=this.state.nowStage;return e().createElement("div",null,e().createElement(y.Z,{onClick:this.onCancel},c("common.cancel")),!v&&e().createElement(y.Z,{type:"primary",onClick:()=>this.onSave()},c("common.save")),!v&&e().createElement(y.Z,{type:"primary",onClick:()=>this.onOk()},c(Z===1?"common.nextStep":"common.activatedStr")))},this.state={stepOneToTwo:!1,isLoading:!1,formRef:null,nowStage:1,totalStage:1,initData:{name:"",biz_type:void 0,remark:""},nodeConfig:o.nodeConfig,operateType:null,operateStageList:[{key:1,name:k.t("exam.basicInformation")},{key:2,name:k.t("approval.processDesign")}]}}componentDidUpdate(k){k.visible!==this.props.visible&&this.props.visible&&this.setState({nodeConfig:this.props.defaultNodeConfig||o.nodeConfig,initData:this.props.initData,nowStage:1,totalStage:this.props.initData.id?2:1})}render(){var k=this.props,r=k.t,c=k.visible,v=k.title,Z=k.isPreview,te=this.state,H=te.operateStageList,he=te.initData,Pe=te.totalStage,Re=te.nowStage,Be=te.nodeConfig,Ye={size:"oversized",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};return e().createElement(Dt.ZP,(0,O.Z)({title:v},Ye,{footerType:"custom",visible:c,renderCustomFooter:this.footerBtn,onCancel:this.onCancel}),e().createElement("div",{className:"add-approval"},e().createElement("div",{className:"form-page-left"},e().createElement("div",{className:"form-page-left-step"},H.map(Ce=>e().createElement("div",{onClick:()=>{Ce.key<=Pe&&Ce.key!==Re&&this.stepClick(Ce.key)},key:Ce.key,className:Re===Ce.key?"form-page-left-step-item form-page-left-step-active":Ce.key<=Pe?"form-page-left-step-item form-page-left-step-success":"form-page-left-step-item form-page-left-step-noallow"},e().createElement("div",{className:"form-page-left-step-item-number"},Ce.key),e().createElement("div",{className:"form-page-left-step-item-name"},Ce.name))))),e().createElement("div",{className:"form-page-aside form-page-right"},Re===1?e().createElement(U.J9,{ref:this.initRef,initialValues:he,onSubmit:this.onSubmit,render:Ce=>e().createElement(U.l0,null,e().createElement(U.gN,(0,O.Z)({component:ua.Z,name:"name",displayType:"Custom",label:r("approval.approvalName"),required:!0,isPreview:Z,placeholder:r("validation.pleaseEnter"),type:"text",maxLength:100,defaultValue:Ce.values.name,validate:ve},ea)),e().createElement(U.gN,(0,O.Z)({component:pa.Z,name:"biz_type",displayType:"Custom",label:r("approval.businessType"),required:!0,disabled:Z,placeholder:r("component.pleaseChoose"),validate:ce},ea)),e().createElement(U.gN,(0,O.Z)({name:"remark",label:r("shareInfo.signRemark"),displayType:"Custom",type:"text",disabled:Z,placeholder:r("approval.lenLimit",{len:500}),component:ha.Z,defaultValue:Ce.values.remark,maxLength:500},ea)))}):e().createElement("div",null,e().createElement(da,{isPreview:Z,visible:c,updateConfig:this.updateApproval,nodeConfig:Be})))))}}var va=(0,L.Z)()(ma),fa=t(11449),ga=t(4408),ya=t(87722),Ca=t(48479),Ea=t(36202),Ta=t(16598),ra=P.Z.Option;class sa extends e().Component{constructor(k){super(k);this.onInitTableList=()=>{this.setState({isLoading:!0});var r=this.state.params;(0,Ot.r4)((0,p.Z)((0,p.Z)({},r),{},{type:r.type,status:r.status})).then(c=>{this.setState({isLoading:!1,list:c.data.data.list,params:(0,p.Z)((0,p.Z)({},r),{},{total:c.data.data.total})})})},this.getBusinessTypes=()=>{(0,Ot.zk)().then(r=>{this.setState({businessType:r.data.data})})},this.resetPagination=()=>{this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{page_number:1})},()=>{this.onInitTableList()})},this.onPageChange=(r,c)=>{this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{page_number:r,page_size:c})},()=>{this.onInitTableList()})},this.handleSearch=r=>{this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{name:r})},()=>{this.resetPagination()})},this.headerTitle=()=>{var r=this.props.t;return e().createElement(y.Z,{type:"primary",onClick:this.handleAddTemplate,icon:e().createElement(u.Z,null)},r("approval.addTemplate")," ")},this.handleChangeRadio=r=>{var c=r.target.value;this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{status:c})},()=>{this.resetPagination()})},this.handleChangeDateRange=r=>{var c=r.dateStrings;this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{begin_time:c[0],end_time:c[1]})},()=>{this.resetPagination()})},this.handleChangeTaskType=r=>{this.setState({params:(0,p.Z)((0,p.Z)({},this.state.params),{},{type:r})},()=>{this.resetPagination()})},this.handleAddTemplate=()=>{var r=this.props.t;this.setState({initData:{name:"",biz_type:void 0,remark:""},nodeConfig:w()(o),addTemplateVisible:!0,operateTitle:r("common.add")+r("approval.approval")})},this.funPreview=r=>{var c=this.props.t;(0,Ot.BE)(r).then(v=>{this.setState({initData:(0,p.Z)({},v.data.data.workflow_template),nodeConfig:v.data.data.node_config,addTemplateVisible:!0,isPreview:!0,operateTitle:c("component.preview")+c("approval.approval")})})},this.funEdit=r=>{var c=this.props.t;(0,Ot.BE)(r).then(v=>{this.setState({initData:(0,p.Z)({},v.data.data.workflow_template),nodeConfig:v.data.data.node_config,addTemplateVisible:!0,operateTitle:c("common.edit")+c("approval.approval")})})},this.funStop=r=>{var c=this.props.t,v=r.biz_type,Z=r.template_id,te=r.name;if(v==="course_task"){(0,Ot.Az)(Z).then(H=>{if(H.code==="200000"&&H.data){W.Z.info({title:c("common.tip"),content:e().createElement("div",null,e().createElement("p",null,c("approval.beCited",{name:te})),e().createElement("p",null,c("approval.beCitedTips")))});return}this.funToStop(r)});return}this.funToStop(r)},this.funToStop=r=>{var c=this.props.t;W.Z.confirm({title:c("common.tip"),content:c("approval.stopTip"),okText:c("common.ok"),cancelText:c("common.cancel"),onOk:()=>{this.funSureStop(r)}})},this.funSureStop=r=>{var c=this.props.t;(0,Ot.uw)(r).then(v=>{var Z=v.data;if(Z.code==="200000"){if(Z.data.length){var te=Z.data.join("\u3001");W.Z.info({title:c("common.tip"),content:e().createElement("div",null,e().createElement("p",null,c("approval.usedByList"),":"),e().createElement("p",null,te))});return}this.resetPagination()}})},this.funDelete=r=>{var c=this.props.t;W.Z.confirm({title:c("common.delete"),content:c("approval.deleteTip"),okText:c("common.ok"),cancelText:c("common.cancel"),onOk:()=>{this.funSureDelete(r)}})},this.funSureDelete=r=>{(0,Ot.XS)(r).then(()=>{this.resetPagination()})},this.okAddTemplate=()=>{this.setState({addTemplateVisible:!1}),this.resetPagination()},this.cancelAddTemplate=()=>{this.setState({addTemplateVisible:!1,isPreview:!1})},this.toolBarRender=()=>{var r=this.props,c=r.prefixCls,v=r.t;return e().createElement("div",{className:"".concat(c,"__header")},e().createElement("div",{className:"".concat(c,"__header__tab-radio")},e().createElement(R.ZP.Group,{defaultValue:"",onChange:this.handleChangeRadio},e().createElement(R.ZP.Button,{value:""},v("common.all")),e().createElement(R.ZP.Button,{value:"enable"},v("approval.starting")),e().createElement(R.ZP.Button,{value:"disable"},v("approval.noStart")))),e().createElement("div",{className:"".concat(c,"__header__search")},e().createElement(Ca.Z,{onSearch:this.handleSearch,placeholder:"".concat(v("approval.templateNameNew"))})))},this.getTableColumns=()=>{var r=this.props.t,c=this.state.businessType;return[{title:r("common.number"),dataIndex:"id",width:80,key:"id",render:(v,Z,te)=>e().createElement("span",null,te+1)},{title:r("approval.templateName"),dataIndex:"name",key:"name",width:220,render:(v,Z)=>e().createElement(N.Z,{placement:"top",title:v},e().createElement("div",{className:"cl-text-ellipsis cl-hover cl-default-pointer",style:{width:220},onClick:()=>{this.funPreview(Z)}},v))},{title:r("approval.businessType"),dataIndex:"biz_type",key:"biz_type",width:220,render:v=>{for(var Z="--",te=0;te<c.length;te++){var H=c[te];if(H.biz_type===v){Z=H.biz_name;break}}return e().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},Z)}},{title:r("common.updateTime"),dataIndex:"update_timestamp",key:"update_timestamp",width:220,render:v=>(0,ie.p6)(v*1,"yyyy-MM-dd hh:mm:ss")},{title:r("common.operate"),width:135,fixed:"right",render:(v,Z)=>{var te=[{visible:Z.status==="disable",title:r("common.edit"),click:()=>this.funEdit(Z)},{visible:Z.status==="enable",title:r("common.deactivatedStr"),click:()=>this.funStop(Z)},{visible:Z.status==="disable",title:r("common.delete"),click:()=>this.funDelete(Z)}];return e().createElement(Ta.Z,{buttons:te})}}]},this.getTable=()=>{var r=this.state,c=r.params,v=r.isLoading,Z=r.list,te=this.props,H=te.prefixCls,he=te.t,Pe=this.getTableColumns(),Re=(0,p.Z)((0,p.Z)({},yt.XE.INITIAL_PAGINATION),{},{total:Number(c.total),current:c.page_number,onChange:this.onPageChange});return e().createElement(fa.Z,{pageContainerParams:{header:{title:he("approval.approval")}}},e().createElement("div",{className:H},e().createElement(ga.Z,{title:he("approval.approval")}),e().createElement("div",null,e().createElement(ya.Z,{format:"YYYY-MM-DD",onCustomChange:this.handleChangeDateRange,showTime:!1,className:"cl-search-normal-width"}),this.renderSelectType()),e().createElement(Ea.f,{columns:Pe,rowKey:"id",dataSource:Z,pagination:Re,loading:v,scroll:{x:"max-content",y:"100%"},headerTitle:this.headerTitle(),toolBarRender:this.toolBarRender,tableUUID:"f0bbd2eb-64c2-407a-b735-ea5f29e4e23c"})))},this.renderSelectType=()=>{var r=this.props.t,c=this.state.businessType;return e().createElement(P.Z,{className:"user-panel-filter-score cl-search-normal-width",placeholder:r("study.type"),defaultValue:"",onChange:this.handleChangeTaskType},e().createElement(ra,{value:"",key:""},r("common.all")),c.map(v=>e().createElement(ra,{value:v.biz_type,key:v.biz_type},v.biz_name)))},this.state={isPreview:!1,list:[],params:{name:"",page_number:1,page_size:20,begin_time:"",end_time:"",status:"",type:"",total:0},operateTitle:"",businessType:[],nodeConfig:null,initData:{name:"",biz_type:void 0,remark:""},isLoading:!1,addTemplateVisible:!1}}componentDidMount(){this.getBusinessTypes(),this.onInitTableList()}render(){var k=this.state,r=k.addTemplateVisible,c=k.nodeConfig,v=k.initData,Z=k.operateTitle,te=k.isPreview;return e().createElement("div",null,this.getTable(),e().createElement(va,{title:Z,isPreview:te,visible:r,defaultNodeConfig:c,initData:v,updateSuccess:this.okAddTemplate,cancel:this.cancelAddTemplate}))}}sa.defaultProps={prefixCls:"approval-list"};var Pa=(0,L.Z)()(sa)},5105:function(we,le,t){"use strict";t.d(le,{zk:function(){return ne},HO:function(){return R},r4:function(){return $},XS:function(){return W},Xu:function(){return M},BE:function(){return y},uw:function(){return p},A8:function(){return l},sB:function(){return P},UE:function(){return f},f9:function(){return e},m1:function(){return L},Az:function(){return u}});var j=t(37055),N=t(10237);function ne(){return N.WY.get({url:j.ZP.approval.getTypeList()})}function R(){return N.WY.get({url:j.ZP.approval.getCustomTypeList(),params:{status:"enable",type:"hands_on_approval"}})}function $(a){return N.WY.get({url:j.ZP.approval.getTemplatePage(),params:a})}function W(a){return N.WY.post({url:j.ZP.approval.deleteTemplateById(a)})}function M(a){return N.WY.post({url:j.ZP.approval.saveTemplate(),data:a})}function y(a){return N.WY.get({url:j.ZP.approval.getTemplateInfo(a)})}function p(a){return N.WY.post({url:j.ZP.approval.settingStatus(a)})}function l(a){var w=j.ZP.approval.getTemplateList();return N.WY.get({url:w,params:{biz_type:a}})}function P(a){var w=a.templateId,O=a.version,B=a.dept_id,I=j.ZP.approval.previewTemplates({templateId:w,version:O});return N.WY.get({url:I,params:{dept_id:B}})}function f(a){var w=a.templateId,O=a.version,B=a.title,I=a.assignNodeList,U=a.dataId,se=a.content,X=a.dept_id,ie=j.ZP.approval.submitWorkflow();return N.WY.post({url:ie,data:{dept_id:X,template_id:w,template_version:O,title:B,assign_node_list:I,data_id:U,content:se}})}function e(a){var w=j.ZP.approval.submitWorkflowBatch();return N.WY.post({url:w,data:a})}function L(a){var w=a.templateId,O=a.version,B=a.nodeNo,I=j.ZP.approval.getNodeUsers({templateId:w,version:O});return N.WY.post({url:I,params:{node_no:B}})}function u(a){var w=j.ZP.CourseManagement.templateIsNeed(a);return N.WY.get({url:w})}},9849:function(we,le,t){"use strict";t.d(le,{Ej:function(){return $},kL:function(){return W},T:function(){return M},NU:function(){return y},FL:function(){return p},fn:function(){return l},bm:function(){return P},jY:function(){return f},Vs:function(){return e},li:function(){return L},Nl:function(){return u},YF:function(){return a},Q6:function(){return w},zW:function(){return O},Zv:function(){return B},Qg:function(){return I},qc:function(){return U},Ve:function(){return X},rS:function(){return ie},Rh:function(){return z}});var j=t(10237),N=t(37055),ne=t(38642),R={zaraFlag:(0,ne.UI)("ZARA_H5")};function $(ae,V){var ve=N.ZP.StudyProjectList.startStudy(ae);return j.WY.post({url:ve,data:V})}function W(ae){var V=N.ZP.Common.enroll(ae);return j.WY.post({url:V})}function M(ae,V){var ve=ae.courseId,ce=N.ZP.StudyProjectList.studyProject(ve);return j.WY.get({url:ce,params:V})}function y(ae){var V=ae.id,ve=R.zaraFlag?N.m1.getAssessmentProjectInfo(V):N.m1.getProjectInfo(V);return j.WY.get({url:ve})}function p(ae){var V=ae.courseId,ve=N.ZP.EnterpriseCourse.addScanCount(V);return j.WY.post({url:ve})}function l(){var ae=N.ZP.StudyProjectList.getAccountInfo();return j.WY.get({url:ae})}function P(ae){var V=N.ZP.StudyProjectList.projectCertiUrl(ae);return j.WY.get({url:V})}function f(ae){var V=ae.courseId,ve=N.ZP.Courses.like(V);return j.WY.post({url:ve})}function e(ae){var V=N.ZP.EnterpriseCourse.addCommentAndScore();return j.qg.post({url:V,data:ae})}function L(ae){var V=N.ZP.EnterpriseCourse.getCourseComments();return j.WY.get({url:V,params:ae})}function u(ae){var V=N.ZP.EnterpriseCourse.addCommentAndScore();return j.qg.post({url:V,data:ae})}function a(ae){var V=N.ZP.EnterpriseCourse.deleteComment();return j.qg.post({url:V,data:ae})}function w(ae,V){var ve=N.ZP.StudyProjectList.projectStudyRecord(ae);return j.WY.get({url:ve,params:V})}function O(ae){var V=N.ZP.DingSpaceId.getSpaceId();return j.WY.get({url:V,params:ae})}function B(ae,V){var ve=N.ZP.PlatformCourse.learningUrl(ae);return j.WY.get({url:ve,params:V})}function I(ae){var V=N.ZP.MyExamTask.examIntro({examId:ae});return j.WY.get({url:V})}function U(ae){var V=N.ZP.MyExamTask.examCheckStatus({examId:ae});return j.WY.get({url:V})}function se(ae,V){var ve=CONFIG.Common.getOperateLog(ae);return formDataRequest.get({url:ve,params:V})}function X(ae,V){var ve=R.zaraFlag?N.ZP.StudyProjectList.changeCustomStatus(ae):N.ZP.StudyProjectList.changeStatus(ae);return j.WY.post({url:ve,data:V})}function ie(ae){var V=N.ZP.StudyProjectList.getProjectReward(ae);return j.WY.get({url:V})}function z(ae){var V=N.ZP.subsidyGz.subsidyCourseSetting(ae);return j.WY.get({url:V})}},91648:function(we,le,t){"use strict";t.d(le,{Z:function(){return j}});function j(N,ne){var R,$,W,M,R;if($="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),R=[],W=void 0,ne=ne||$.length,N)for(W=0;W<N;)R[W]=$[0|Math.random()*ne],W++;else for(M=void 0,R[8]=R[13]=R[18]=R[23]="-",R[14]="4",W=0;W<36;)R[W]||(M=0|Math.random()*16,R[W]=$[W===19?M&3|8:M]),W++;return R.join("")}},69164:function(we,le,t){"use strict";var j=t(34792),N=t(48086);function ne(R){R&&R.length>0&&N.default.success(R)}le.Z=ne},65202:function(we,le,t){"use strict";t.d(le,{p:function(){return j}});function j(){return localStorage.getItem("themeColor")||"#516AE6"}},25547:function(we,le,t){"use strict";t.d(le,{Yd:function(){return ne},VX:function(){return $},lK:function(){return W},NP:function(){return M}});var j=t(88986),N=t(93485);function ne(y,p,l){var P=0;function f(e,L){for(var u=0;u<e.length;u++){var a=e[u];if(a[y]===p){P=L;break}else a.children instanceof Array&&a.children.length&&f(a.children,L+1)}}return f(l,1),P}function R(y){var p=1;function l(P,f){P.forEach(e=>{f>p&&(p=f),e.children&&e.children.length>0&&l(e.children,f+1)})}return l(y,1),p}function $(y,p,l){y.forEach((P,f,e)=>{if(P.id===p)return l(P,f,e);if(P.children)return $(P.children,p,l)})}function W(y,p){var l;function P(f){var e=(0,N.Z)(f),L;try{for(e.s();!(L=e.n()).done;){var u=L.value;if(u.id==p){l={id:u.id,name:u.name,children:u.children,parentId:u.parentId};break}u.children&&u.children instanceof Array&&u.children.length>0&&P(u.children)}}catch(a){e.e(a)}finally{e.f()}}return P(y),l?(0,j.Z)((0,j.Z)({},l),{},{children:l.children instanceof Array?l.children:[]}):{children:[],id:"",name:""}}var M=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",f=[...p];function e(L){Object.keys(l).forEach(u=>{var a=u,w=l[u];L[w]=L[a],L[P]=L[P]&&L[P]instanceof Array?[...L[P]]:[],L[P].length?L[P].forEach(O=>{e(O)}):delete L[P]})}return f.forEach(L=>e(L)),f}},2396:function(we,le,t){"use strict";t.d(le,{fA:function(){return ne},kh:function(){return R},kR:function(){return $},rw:function(){return M},$s:function(){return y},q_:function(){return p},QK:function(){return l}});var j=t(6793),N={limitWords(P,f){return{rules:[{max:P,message:"\u6700\u591A\u8F93\u5165".concat(P,"\u4E2A\u5B57")},{required:!0,message:f||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},limitTagsLength(P){return{rules:[{max:P,message:"\u6700\u591A\u8F93\u5165".concat(P,"\u4E2A\u6807\u7B7E")}]}},required(P){return{rules:[{required:!0,message:P||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},requiredWithValidator(P,f){return{rules:[{required:!0,message:P||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0,validator:f}]}}},ne={score:/^\+?[0-9]*$/,positiveInteger:/^[1-9]\d*$/,examScore:/^[0-9]+([.]\d{1})?$/,url:/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/,httpsUrl:/(^https):\/\/([\w.]+\/?)\S*/,tagName:/^[\s　]|[ ]$/gi},R=P=>isNaN(P)||!P||!(P>=0&&P<1e3)||!ne.score.test(P),$=P=>isNaN(P)||!P||!(P>-1e3&&P<1e3),W=P=>isNaN(P)||!P||!(P>=0&&P<1e3)||!ne.examScore.test(P),M=(P,f)=>{for(var e=0,L=0;L<P.length;L++){var u=P.charAt(L);if(u.match(/[^\x00-\xff]/ig)!=null?e+=1:e+=.5,e>f)return L}return 0},y=P=>{for(var f=0,e=0;e<P.length;e++){var L=P.charAt(e);L.match(/[^\x00-\xff]/ig)!=null?f+=1:f+=.5}return f},p=(P,f)=>{var e=P.target.value,L=P.target.dataset.originLength;if(P.target.dataset.originLength||(L=f,P.target.dataset.originLength=L),!!L){var u=y(e);u*1<f*1?P.target.setAttribute("maxLength",f*2):P.target.setAttribute("maxLength",f)}},l=(P,f)=>{var e="";return(!P||!(0,j.fy)(P))&&(e=f),e}},4412:function(we){we.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAACPCAYAAAD0gYXiAAAW/ElEQVR4Xu2dCZAcV3mA/9fHaGZ2V9qVdlejvbQ7O7NaWdqNTbgxlmVbxkeME3AcHJwqKhCC44AJV0zZjg8ScwRDqLIMwUnsJEAKF4aCGEIigyVjAthQMTLWbcnyCmmtY6/Znav7vT/190yvenp7prtHM5Lm6NLUaHve1f/X//W6+zWD5lazEmA1O/LmwKEJr4ZPgia8JrwalkAND72peU14NSyBGh56U/N8wkNE6ZVXXrlIUZQrEPG5vr6+H/tsomLFm/A8iHJ6enowlUptYYxdwTm/HABWIaJZ89uqqn4sEokc8tBURYs04TmIc2ZmpiOTyVwmhLiCgAkhYlTMBObwnQaALwaDwfu7u7vnK0qoRGNNeDkogZmZmTdrmmZoFyL+rhBCLgbMCs8G8igAfHJgYODfGWOLqlktmA0JDxHZ9PT0GCJuAQCC9VZEbHGCYgJ00rpimggAzwohbhsaGvp5tcBRuw0Hb3p6+osAcBMiribhu0FxBJRKA2Q1wOWtBfVtZUnzvp7JZG5ft27db6sBsaHgzc7OXiuEeKIYtKJmUteBvTwBbM8BkPYeBPbKEQBZBn3zm0G77GJAVTHYOIFmjJEP/AwiPjA0NES+sWJbw8BDRHV2dvY3iDhSwmflANDn2KsAew4YwNj+l4Fls45CxxXLIft7l4N+0RggnHZzDifIywDw8Wg0+q1K0WsYeHNzcx/lnH++aNQ4MwewZz/A7gM5aHMJXzIWg32Quf4q4P1rSkWlwBjbAQC3RaPRX/vqwKFwQ8BLJBLdnPN9ALCiQOt+OwnwzLMAu/fnNK0Cm/a634Hs1ZeBaGtZYkpNbWSMcUT8J0S8Kx6Pnyi324aANzc391VE/LMCU6ZzwPu+ADB5vFzZFa2HywKQvfxiyL719QCKAkKIxbI2k70tHo9fWe4A6h7e9PT0RbIsP2fmbabZFD/6CcA3v1eu3DzVEys7IHPdFaBtGClmSlOyLK8sN5Cpe3hzc3M7EPGSAl+XmAdx52cBkilPEM60kB4bhPR1W4BHupZAFEJsGRkZebKcPuoaXjKZ/ENd1x+zBynia48D7vhZOfIquw5KDFI3vxOyF8QLTCgifjYej99eTsN1C29iYiLU0dGxWwixtgDexFHgn/oCgKj67NUSHtqFGyB50/WG9lkmtn8Vi8Ve24RnkcDCwsJdQoj77Ikz//yXAfccKEdWZ1xHtLZA4s4PLWaD+bGJYDDY3dfXd8pvB3Wpeclksg8R9wghjHjdBCh+tRP4Q4/6lVFFy89/+H2gR7rsacQfxeNxw7z72eoV3teEEO+2mCbArAbanZ8BODnlRz4VL5u+9nLIXPIGu+l8OBaLvd9vZ3UHT9O0N2Wz2Z/SlQOryeTffxLEt3/gVz4VL6+NRCH53nfZ4b0ci8WG/HZWV/AIWCqV+gUivq4gGZ6ZBe2TnwbIZPzKpyLlWVsLKBvXgzq2HpT1cTiSSoKQcqK3WId4LBbz5YzrCl4qlXoPIj5ii+ZAe/jrIP73uYqA8NSIqoIyGgN1/AIDmDzYD0ySFqtO7t4DyWWBgpSBMXbL8PDwVzy1ny9UN/BOnDjR1trauhcR11i1Thw8DNqn6BJeFTfGDEAmLALHAqfh2HuenZyEqVSqwHQyxh4fHh6+wc8o6wZeJpMZFULstqcG2fu/BGLfQT8y8VRW6u4EZWx9DtjGUZDaWkvWo3HxiaOgvbAb0ocnYObqSxfNZn7M08PDw52MsdMToS4jqRt4dJypVGoCEftMX0JCyX5uKyBdNTjDjbWEQdk4etoURrpdW+RT06C/sBu0nbsNaDgzmwPGGCT+5q9AhJYV+D1Jkt4QjUafdW243swmHU8mk3mEc/4eKzz+xJOgP/6EV3mcLqcqoKyLGT7L8FvRtQV+y6lBkUqDvmsvaDt3GbDEkWNF+03e/A7QxkYLTKckSXdEo9H7vQ623jSPcruvmfDom3xeli79uG0MQF7bn4sIyRSOxoFZggqn6sg56PsPgfbCLtB37gb9wEEA7s3qZd/4Gkj9wVX2iertsVhss9tQzd/rCh7dVJROp49RyrAIUAhIf/AOgIXkEpmwzpWgjl0A6vh6UDeuB2lFm7vf+u0k6C/sypnCXXsB6GakMjaxqgMSn7hl0Wzm/V4mHA6v7OnpWTpYhz7qCh4dXzqd/rUQYtxqOrWtj4L45fPAwqGc38oHGvKa1a5iF5QjGj4rZwpxasa1jtcCidtvBd6+vMDvAcDVsVjsh17aqEd4DyDiRwqumu89AIHWVlCGB139FqYzoO3al4O1czeIiarctQeiYwXMf+zPARWlwHQyxu4eHh6+r1HhXY2IPyhIGRLzEF7tHB0afuullw2fZfguSis49yK7MyqTooBlfL3d5yWDweBob2/vhJfG607zEDGcyWSmhBBGHG5qYFDTQW5fYciEH51cjAj1F/cCnqUr6iYQPToAyQ/8id3f0d/3Dg8P3+MFHJWpO3h0UKlU6ilENLJgUwPZ7n3An33eMIV46txdWaAcL3nbe4H35PytxUJMhEKhUa/BSj3DuwMA/tbq9/hzz4O29RGvJ3XVymlveA2kb7hmidYxxv54aGjoP/x0XJeal81mX885p6sLp4U0vwAZShlOP1fnR04VKYvBZZC8/VYQLWG71v00Go1e7LeTuoSHiHI6nT6BiB1W05S59wHAQ6/4lVHFymffvgWyl7zRrnVCkqTXr1279ld+O6pLeCSEdDr9OCK+w6p92reeAP7ENr8yqkh50bUKUh//AGD+0pDlOt6/DA4OvrecTuoZ3i2I+JDV74ld+4yJ6nOxpd93E/D1udv+LGOaC4VCI6tXry7rXvt6hhdDxP0F+Z6uQ/bL/wp0I9LZ3PhoDDLvf/eSG24B4K/Xrl37uXLHUrfw8qbzkBBi0BaSg9i9H/RvfAfwCD2FXN2NzGTmE7eA6O60wzswMDCwgTHm/OyYh2HVO7yHEfF99tsijL85B77jZ8C/818A8wseRFVeEX3TG0H7/dzVA+vdbLIsX9/b23tGD0vUO7y3AcB3rbMtNp8DuJAE/t3/BvHjZwAsT/OUh6qwFraEIXPHhwBDQeMH82khSZK29fX1lf10kNlLXcPLm86YEIIu6F1XMFltyQENwR6dBPHN7wH+Zs8ZccOOdhDrhkGsiwKPRwFaw3at04UQF65du/bFM+qoXqfHnISSTqe3cM7/AQAuWKJ9FpMmdu4yIMKrHp95DAVBjEQB1w0DrouB6Fppjyjtvu7B/v7+D54pOKpf95pnFRIiKqlUilKIv0fEZQUzMFZN5BzEj54BpJzQfrFVlgGjA4CjMYDRGIj+XgCJlXyU2RIwnaJn4vv7+ysyudpQ8EiIx48fv0SW5e2yLDNZNtbJKb6cBz3H950fAhw6DEA52mgMMD4EEAgUmELHgMg6NZf/P2PsL3t7eyuWaDYUPFr07dSpU78EgIsMs8MYKIoCkiQVXU/Ffithqb+dfmOMzQohtgPAtp6enq/Q8+iVMJkNZzZPnTpFz6V/1S48gkdaSDCLmVIf0DTG2M+FEE/SZ9++fc9u3rxZrxQwazvnjeY99dRTfYFAYGtbW9vbq3KgjEF3d7cBqUhAA5xzWL58+aImegFGVhcAdiGiAUuSpO1na/G48wLe9u3b3wQAtPRhpq2tzXiStdLbihf2Qks4DPCW1wFYnhswfd7x48cNeAS3vb0dWlpaigYhuq6nZVmmxXC2EbSurq7qT9U4COScw3v66affwzknX7BMVdXD1YCnpDLQ/eCjwNIZwN41ADdeBzASXRTH/Pw8zM3NFYgnEAhAR0cH0Dcl15lMBpLJ5MmTJ092ptNpMrGU/N+8efPms7ZEo53fOYP32GOPyd3d3TQp+xFzUNWC1/nDHbDsucIFh/CijQDvvAZ4+wqKQAumrqxCUlUVNE0zdmWz2cPz8/OLloEx9gIAXL9p06azvlDqOQtY7rnnHunSSy/9PgBcZRNUxTUveGIKVv3j152voCsKzNz2p7AQzk1fuW12ePnyJxljV27atOn/3OpX+vdzonkvvvhia3d3t7G4l3Wylv4UQhSMyWuobrZla48azIEz/hUu7GbUsUSY1vEUCfux4G7s/Pg553eOjY39XaXhuLV3TuAdP368VZKkxBJB2+Ybi4ErCsqlvh2O3/6LwW0oeKR5kUhkEZ5ViE55lpPQvOyjtszczX4ieKlvnvlOE9rW+rquN47m0ZrOU1NTxgPi9qklN9NlN7VeoLhpsFubbvUbFl4pWE5w/cAqVd/LSeK1PgB8eHR09EtuPqrSv58Tn0eaNz09nbGbSyfzWUkhu2mQV1Nqb4cxduu6deseqjQct/bOKTwnc1XM/7kJ1ouWlmrbS/1iJ1LDwvNiNq1lstksLCwsFCxAav5OZ+JKkEDqWuV40lLd2dn8c+GWO6cpqKFpMZpNcfN/Rfx0Y2nezMyMY8BSyqfpug4nT54sak2W/2YftP3nNsDNbwG45jKA4Onkm9qluuZsiVMjy5YtA5pR8QrQUq4x4fnxaclkcskcpAlB1nRYvfXfgCXyU41trYDXvw3gTa81rnRT3ZmZ0k+1kvaFw7l7TooBdNI8MpvxeLxxfN7s7OxiwOLVF5HZm5pyvoNg5Y5fQOjpXyxVqIFeEDdeB6+2BJeYWnth0rpgXluLBVNOY21IeG5BiFN0SLP/pEXWLTCXgE7SOt35InXihmtgbr3xLqeiG12QJa2zX1UvNkarBjYcvLm5uSWa5zWHo0s0dO3NFKCcWAApf+OsPemn5YG17s4lZtBuFgmaFxNeJJ1pLLNphVeOBpYRVJT0ZX5SFIeyjQfPtGHFkmcvmlhKW5yCCy9tepk8sJVpwiulgaUEWi5AL2ay1Alg+a2x4CUSicU8z4vw3cykn6kvN2iUtDu9haRYPURsLHjz8/OuAUu5c51e8jQ3gMVOliLW4dbh4eHGyfOs8Lxqnt2EeQkySmlsBes3FryFhQVD87wI0EmT/GhOJTW4SL+NCc+rLzuLkaNjvudysjQePK/5nR9z6SdiLbd/ez0KWBrK55HZdMvzKqVtXn2qnxzQaoqFEI0FL5lMlp0q+PGT5YLz0ofZNs1tDg4ONk60WQyeqY1+8iy73/RjZksFQ141seHgpVKponmek7n0E12WW9/Bl5nnkmMQY9HOxtI8Kzy/gUO5vrAUHC9a5lQ/f19oY8FLp9OeZ1is/qccDfSajpQDkNomszkwMFB/Pm9qaoqWIvwLXdcv0TSti3N+Qtf1n65Zs+bGcoVVqXnMUhrs5SSxBix1BY9WXkgmk1/inN+iaRqjm4esn56eHs/JcKWEXO5Mi1vECgD1pXnpdHor55w0rgCa+Xdvb6/r8hdO5s5LCF8Kkpf6fhP9uoKnadrFiPi0k8ZZ4fkVkh8zWyVIxj0u5rgpnaEPIj7POf/nVCr16IYNG87ak7JVuWOac/4NXddvKqZ1tJ80z9zcoJQC4TVSPVM/SbcF0scEZn7TvTQWiK/quv6h0dFR3+9/LchJPP5RFXhCiCOapvUWg0cH7GQ2ywVRbfNKa7XQx7zxqRRAIQQ9IHrH+vXrP+2RQdnFqgKPc57RdT1QSvP6+ow3pS2aIDftc9PSatUnaOaiAh7hEWQC+K4NGzZUVQOrAs9N8whqf3+/r4DFiw/zUsZPCkBlzTuoi4FzMp/5sq8yxmLV9IFVgefm88hsmprnxxd50S4v/tErZLvWlQBV4AstfvCD4+PjD5ZtF10qVgWel2hzYGDAVfO8gPCrSV7AmWVCoZDxWLSLjzNuALaXyWvfk+Pj41tqCh4N1i3Pc4JXbsBSLcjmKkhWMHZQJcAR0KPj4+Onw+oKU6yK5uUhlJxhIXhOAYsJ0OtsSLHyXudDS/XX2tq6RKtcYC1qIJVDxOzY2FjuxbBV2KoCj9Yq2bdvX08mkxlub2+/MhAI0HrKcSFEq6Zp85qm7R8cHHwNvXnkfNM26wllDVa8+jurliLiSVVVLxwZGTnKGDu9CEyFQFYU3sGDB1enUil68wMt8VTyjIvFYh+VJMlYMtgKsJQmeAluvPjAUoGPtT49bGn3eU6aV2wfALzIGKP1remugcOhUGh/NBot6wUYTrzPGN7+/fuXCSGGhBAxWZZLv3TVMoKWlpb+SCRyFyK2Wk2c3yvopcB7CU6c6pv7rMl5Mc1zSiFMmIyxR1VV/R+b4OcQ8SVJkg7F4/HF+3jKUcay4U1OTraQliHigBAiN+HnsplrXZqPZ7W2tna2t7dfyxgjB7jYhk+YdAwsv6xU7jt3hVSi/yO1i8AQkPYtlhUCpdw+WmcbGa23Y5RHkauX39/W1tZOV0j85nmIOK0oyq2SJKVMsViPX5IkwRh7hbQxEomU9WIH3/Bo6an5+flhxljkfFhgXJIkhTGmIKKa+5ZUxoTxjUjfqJLwcx+mInIFABWdiwCC8bsiBCpC5yrtFwiK4JoqBCgCudrR3t4XiUQu5JwzH34PJUn6dCAQ+InbCZ1bRwgnU6nUS34Tes/w6CCPHDkyiIg9jM7sEhvNoFg3Mj/Wrdjv9v3FurC2xzmXA4EAaYZKH0lSjf9LElOE0FXOCV4OKM+DBAEqMlS4pqkCqB6oIHiuDRSK4Ej7FeRC5ZyrkcjqkY6OjnUmwFLpApEAgIdVVf2GOX4vx0/HTqlFNBo9xBjztKyxJ3iTk5PdmUymPxAIOK/x63J6eYVlP0gPZy1ZSNIIVQimShKqTFEMCKRxBkSU6NvQQAOeAZOrKDFF17QAlWGkfQRRz50A9OEoVBBC4VxQGaW9fUV/Z+eqDRSIFcv7EPEUY+yBcDj8o3JO1vzkty7L8pFIJHLc7fhLwiNtm5yc7GOMeQ5E3Dqsxu9kOjmXVEniqiQRLPpwVbAcPGOSPA/UMKOcq8hIM3mA/i8AjH2L4AwN5CqBQ2qHG54zoUhysre3p0VRlI1CiGFd1+nlitOc85cA4KlgMEjvBvL0gno3OSBiIhKJHCmlhUXhHT16NBwOh1dns9lCm+fW6zn4nbEgkySNTFyAS5IqcQNeAFGoTJVU1ISqaVqAwOqY00oqC3mQBBck0JBDGplIyoxRADGvBINzKmNz4XD4rF1gtYovEAjoyWTy1WIvAXaER6+rnpqaoveqeDKr54DXki51XVYJoCzLAdJCxpgqRCaQ00IyfVyWJJkjIhdCaEJkNQA1raqBZCgkJ4U1RzkfDig/hlAohKFQaIoxtkSjl8BBxJZkMrmc6iaTSUd44XDYcbbALF/sd1MmfsvZZenUfjqdljVNUyUpJMOy/EmXAQyQYeRcDwaDi0FANfq3yqsax9/Z2TnLchZhcSuAMzExEWpvb28rBo0maq0brQHmZzPrF6tnHnSzf2el6e7unmOMLeaNi/DIDyQSiRV+YDTLnn0JtLW1kQYay80b8PKzE8tnZ2cdZ0oSiYSj+Wxrayswn2Y5r/vNQzfzxnyOtEQizf5Py7+lpYV3dHSQBhrTRXDo0KHgihUrqnbp4uyfn/XdI63bNjQ0lDbg0ZRXV1eX5yM+caLwxYBe65Zbzz6wctspt9752D+9r4gmY5Vjx47lVgm1bWvWrCkwi8eOHTNgF9vvmb7Hgs3+S8pfI3i0Oqjh6w4cOOBJrLFY4Qp6Zj37fk+NWQo1+/clf2Fonl8hN8ufHxIgeNK9995bMJq77777rI6u2X958q+Z6a+zejbVSGdNeDUCymmYTXhNeDUsgRoeelPzmvBqWAI1PPSm5jXh1bAEanjoTc1rwqthCdTw0Jua14RXwxKo4aE3Na8Jr4YlUMNDb2peE14NS6CGh97UvCa8GpZADQ+9qXlNeDUsgRoeelPzmvBqWAI1PPSm5jXh1bAEanjo/w+0S4IKs9Wq0AAAAABJRU5ErkJggg=="}}]);
