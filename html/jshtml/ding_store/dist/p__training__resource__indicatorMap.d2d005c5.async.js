(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8813],{4408:function(ue,ae,u){"use strict";var B=u(12924),n=u.n(B),j=u(28216),k=u(17780),V=u(38642),T=L=>({userInfo:L.user}),N=L=>{var O=L.title;return(0,k.xX)()&&setTimeout(()=>{document.title=O},0),(0,B.useEffect)(()=>{if(O&&document.title!==O&&setTimeout(()=>{document.title=O},0),(0,V.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var c=document.querySelector(".zoom-report");c&&(c.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[O]),n().createElement(n().Fragment,null)};N.defautProps={title:""},ae.Z=(0,j.$j)(T)(N)},1164:function(ue,ae,u){"use strict";var B=u(12924),n=u.n(B),j=u(76651),k=u(38642),V=u(91302),T=N=>{var L=navigator.userAgent.toLocaleLowerCase(),O=localStorage.getItem("enterpriseId"),c=(0,k.lz)(O,N.projectType),Y=localStorage.getItem("dingPersonnel"),H=V.bl.includes(Y),P=N.target;function x(b){if(P==="self"&&(b.preventDefault(),j.m8.push(N.to)),H){if(N.projectType==="student"){window.location.href="".concat(c,"/").concat(N.to);return}j.m8.push(N.to);return}if(dd.version){b.preventDefault();var M="";N.to.includes("?")?M="".concat(c).concat(N.to,"&ddtab=true"):M="".concat(c).concat(N.to,"?ddtab=true"),dd.biz.util.openLink({url:M})}else L.indexOf("lark")!==-1&&(window.location.href="".concat(c).concat(N.to))}return n().createElement("a",{rel:"noreferrer",href:"".concat(N.projectType==="student"?"".concat(c).concat(N.to):"#".concat(N.to)),className:"".concat(N.wrapCls," cl-pointer"),target:L.indexOf("lark")!==-1||H?"_self":N.target||"_blank",onClick:x},N.children)};T.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},T.targetTo=N=>{var L=N.path,O=N.from,c=N.isExternalLink,Y=c===void 0?!1:c,H=N.isAsync,P=H===void 0?!1:H,x=N.openName,b=x===void 0?"_blank":x,M=N.projectType,Q=M===void 0?"manage":M,w=N.ddTab,z=w===void 0?!0:w,K,R=localStorage.getItem("dingPersonnel"),se=V.bl.includes(R),X=navigator.userAgent.toLocaleLowerCase(),ne=localStorage.getItem("enterpriseId"),J=(0,k.lz)(ne,Q),Z=localStorage.getItem("appType"),A=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var re="";if(K=Y?"":J,se&&!Y){if(Q==="student"){window.location.href="".concat(J).concat(L);return}j.m8.push(L);return}L.includes("?")?re="".concat(K).concat(L,"&ddtab=").concat(z):re="".concat(K).concat(L,"?ddtab=").concat(z),dd.biz.util.openLink({url:re})}else if(X.indexOf("lark")!==-1)K=Y?"":J,window.location.href="".concat(K).concat(L);else if(Z==="wx_app"&&A&&Y&&O==="imgText")K=Y?"":Q==="student"?"".concat(J):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(K).concat(L)});else if(K=Y?"":Q==="student"?"".concat(J):"#",P){var Pe=window.open("","_blank");setTimeout(()=>{Pe.location="".concat(K).concat(L)},100)}else window.open("".concat(K).concat(L),b)},ae.Z=T},99891:function(ue,ae,u){"use strict";var B=u(12924),n=u.n(B),j=u(28216),k=u(91768),V=u(37055),T=u(10237),N=u(60667);class L extends n().PureComponent{constructor(Y){super(Y);this.getWaterMarkText=H=>{var P=this.props.userInfo,x=P.jobNumber,b=localStorage.getItem("waterMarkPostName"),M=[],Q=H.find(z=>z.type==="content_setting"),w=H.find(z=>z.type==="content_custom");return Q.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),w.param.checked==="true"&&w.param.comment[0]!==""&&this.setState({commentText:w.param.comment[0]}),Q.param.comment.indexOf("position")!==-1&&b&&b!==""&&M.push("".concat(b)),Q.param.comment.indexOf("jobnumber")!==-1&&x&&x!==""&&M.push("".concat(x)),M.join("-")},this.getWaterMarkApplication=H=>{var P=this.props.scenes,x=H.find(b=>b.type==="application_scenario");x.param.comment.indexOf(P)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=H=>{var P=H.find(x=>x.type==="dispersive");this.setState({isDispersive:P.param.checked==="true"})},this.getDynamicSet=()=>{var H=V.ZP.advancedSetting.dynamicWaterMarkNew(),P={access_token:window.localStorage.getItem("token")};T.WY.get({url:H,params:P}).then(x=>{var b=JSON.parse(x.data.actions);this.setState({waterMarkText:this.getWaterMarkText(b),actions:b}),this.getWaterMarkApplication(b),this.getWaterIsDispersive(b)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var Y=localStorage.getItem("waterMarkPostName");Y===""||Y===null?this.getPostName():this.getDynamicSet()}getPostName(){var Y=V.ZP.advancedSetting.getPostName();T.WY.get({url:Y}).then(H=>{localStorage.setItem("waterMarkPostName",H.data.post_names[0]||""),this.getDynamicSet()})}render(){var Y=this.state,H=Y.showWaterMark,P=Y.waterMarkCount,x=Y.isUserName,b=Y.isDispersive,M=Y.waterMarkText,Q=Y.actions,w=Y.commentText,z=this.props.userInfo,K=z.name,R=z.unionid,se=z.sourceType;return n().createElement("div",{className:"common-watermark"},H&&new Array(P).fill(0).map((X,ne)=>n().createElement("div",{key:ne,className:"common-watermark-item ".concat(b?"isDispersive":"")},n().createElement("span",{className:"common-watermark-item-content"},w!==""&&n().createElement("span",{className:"item-part"},w),x&&n().createElement("span",null,w!==""&&n().createElement("span",null,"-"),n().createElement(N.Z,{dataType:"userName",value:R,name:K,type:se})),n().createElement("span",{className:"item-part"},(x||w!=="")&&M!==""&&n().createElement("span",null,"-"),M)))))}}var O=c=>({userInfo:c.user});ae.Z=(0,j.$j)(O)((0,k.Z)()(L))},60667:function(ue,ae,u){"use strict";u.d(ae,{Z:function(){return L}});var B=u(33565),n=u(12924),j=u.n(n),k=u(28216);function V(O){var c=O.type,Y=O.openid,H=O.from,P=(0,n.useRef)(null);return(0,n.useLayoutEffect)(()=>{H==="vue"?window.parent.WWOpenData.bind(P.current):WWOpenData.bind(P.current)}),j().createElement("ww-open-data",{ref:P,type:c,openid:Y})}var T=O=>{var c=O.wxWorkApiFlag,Y=O.appType,H=O.from,P=(0,n.useState)(!1),x=(0,B.Z)(P,2),b=x[0],M=x[1];(0,n.useEffect)(()=>{var z=localStorage.getItem("qyWechatBook");(Y!=="wx_app"||c||z==="false"||H==="vue"||H==="taro")&&M(!0)},[c,Y,H]);var Q=(0,n.useCallback)(()=>{var z=O.type,K=O.value,R=O.name,se=R===void 0?"":R;switch(console.warn(O,"props"),z){case"wx_sync":{var X=O.dataType;return K?j().createElement(V,{from:H,type:X,openid:K}):se}default:return se}},[O]),w=()=>{var z=O.name,K=O.dataType,R=localStorage.getItem("qyWechatBook");if(K===""||R==="false")return z;if(H==="vue"||H==="taro")return Q();switch(O.appType){case"wx_app":return Q();default:return z}};return b?w():O.name};T.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var N=O=>({appType:O.user.appType,wxWorkApiFlag:O.user.wxWorkApiFlag}),L=(0,k.$j)(N)(T)},76466:function(ue,ae,u){"use strict";u.d(ae,{Z:function(){return nt}});var B=u(20228),n=u(11382),j=u(57663),k=u(71577),V=u(62029),T=u(57361),N=u(9754),L=u.n(N),O=u(12924),c=u.n(O),Y=u(91512),H=u(68654),P=u(91768),x=u(4412),b=u.n(x);class M extends c().Component{render(){var a=this.props.t;return c().createElement("div",{className:"net-preview"},c().createElement("div",{className:"net-preview-center"},c().createElement("img",{src:b(),alt:"picture"}),c().createElement("h2",null,a("localStorage.tip")),c().createElement("p",null,a("localStorage.banPreview"))))}}var Q=(0,P.Z)()(M),w=u(88986),z=u(34792),K=u(48086),R=u(28216),se=u(21594),X=u(41225),ne=u(10237),J=(G,a)=>(0,w.Z)({id:G||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},a),Z=J;class A extends O.Component{constructor(){super(...arguments);this.setupPlayer=a=>{var s=this.props,r=s.onVideoReady,t=r===void 0?()=>{}:r,i=s.playerConfig,l=s.contentType;a&&a==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,w.Z)((0,w.Z)({},i),{},{contentType:l==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:i.source,autoplay:i.autoplay,width:i.width,id:i.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:p=>{p.on("sourceloaded",f=>{var h=f.paramData,S=h.desc,I=h.definition;p.getComponent("VideoQuality")&&p.getComponent("VideoQuality").setCurrentQuality(S,I,i.id)}),p.on("ready",()=>{t()}),this.playerInstance=p,this.setPlayerConfig()}}))}}componentDidUpdate(a){a.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(a){this.player&&this.player.seek(a)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(a){this.player.setSpeed(a)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var a=this.props,s=a.onPlay,r=s===void 0?()=>{}:s,t=a.onTimeUpDate,i=t===void 0?()=>{}:t,l=a.onEnd,p=l===void 0?()=>{}:l,f=a.onPause,h=f===void 0?()=>{}:f,S=a.onError,I=S===void 0?()=>{}:S,E=this.playerInstance;E.on("play",()=>{r()}),E.on("pause",()=>{h()}),E.on("timeupdate",y=>{i(y)}),E.on("ended",()=>{p()}),E.on("error",(0,T.Z)(L().mark(function y(){return L().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:I();case 1:case"end":return F.stop()}},y)})))}render(){var a=this.props.playerConfig;return c().createElement("div",{className:"common-video-player-container"},c().createElement("div",{id:a.id}))}}A.playerInstance=null,A.defaultProps={playerConfig:Z(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var re=A,Pe=(G,a)=>(0,w.Z)({id:G||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},a),xe=Pe;class Ze extends O.Component{constructor(){super(...arguments);this.setupPlayer=a=>{a&&a==="resetPlayer"&&this.player.dispose();var s=this.props,r=s.playerConfig,t=s.onVideoReady,i=t===void 0?()=>{}:t;this.player=new Aliplayer(r,l=>{l.on("sourceloaded",p=>{var f=p.paramData,h=f.desc,S=f.definition;l.getComponent("VideoQuality")&&l.getComponent("VideoQuality").setCurrentQuality(h,S,r.id)})}),this.player.on("ready",()=>{i()})},this.setPlayerConfig=()=>{var a=this.props,s=a.onPlay,r=s===void 0?()=>{}:s,t=a.onTimeUpDate,i=t===void 0?()=>{}:t,l=a.onEnd,p=l===void 0?()=>{}:l,f=a.onPause,h=f===void 0?()=>{}:f,S=a.onError,I=S===void 0?()=>{}:S;this.player.on("play",()=>{r()}),this.player.on("pause",()=>{h()}),this.player.on("timeupdate",E=>{i(E)}),this.player.on("ended",()=>{p()}),this.player.on("error",(0,T.Z)(L().mark(function E(){return L().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:I();case 1:case"end":return C.stop()}},E)})))},this.getPlayerContent=a=>{this.playerContainer=a}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(a){a.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(a){this.player.seek(a)}exitFull(){var a=this.player.fullscreenService;a&&a.isFullScreen&&a.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var a=this.props.playerConfig;return c().createElement("div",{className:"common-video-player-container"},c().createElement("div",{id:a.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}Ze.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:xe()};var He=Ze;class Ke{constructor(a){this.hasCreated=!1,this.definition="",this.getQuality=a}createEl(a,s){var r=s._options&&s._options.language,t=s._el.id;this.isEn=r&&r==="en-us";var i=(0,se.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),l=(0,se.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),p=document.querySelector("#".concat(t," .prism-controlbar"));p.appendChild(i),a.appendChild(l)}setCurrentQuality(a,s,r){var t=document.querySelector("#".concat(r," .current-quality"));t.innerText=a,t.dataset.def=s,this.definition=s;var i=document.querySelector("#".concat(r," .quality-list")),l=i.querySelector(".current");l&&(l.className="");var p=i.querySelector('li[data-def="'.concat(s,'"]'));p&&(p.className="current")}created(a){this._urls=a._urls;var s=a._el.id,r=document.querySelector("#".concat(s," .current-quality")),t=document.querySelector("#".concat(s," .quality-list")),i=document.querySelector("#".concat(s," .quality-modal")),l=this._urls.map(h=>'<li data-def="'.concat(h.definition,'">').concat(h.desc,"</li>"));if(t.innerHTML=l.join(""),this.hasCreated==!1&&this.definition){var p=t.querySelector('li[data-def="'.concat(this.definition,'"]'));p.className="current"}this.hasCreated=!0;var f=null;r.onclick=()=>{t.style.display="block"},r.onmouseleave=()=>{f=setTimeout(()=>{t.style.display="none"},100)},t.onmouseenter=()=>{clearTimeout(f)},t.onmouseleave=()=>{t.style.display="none"},t.onclick=h=>{var S=h.target,I=S.dataset.def,E=S.innerText;if(I&&S.className!=="current"){var y=this._urls.find(C=>C.definition===I);a.loadByUrl(y.Url,a.getCurrentTime(),!0,!0),this.setCurrentQuality(y.desc,y.definition,s),i.style.display="block",i.querySelector("span.current-quality-tag").innerText=y.desc}this.getQuality(I,E)}}ready(a){var s=a._el.id,r=document.querySelector("#".concat(s," .quality-modal"));r.style.display="none";var t=document.querySelector("#".concat(s," .prism-setting-item.prism-setting-quality"));t&&t.classList.add("player-hidden")}}class Qe{createEl(a,s){var r=s._el.id,t=(0,se.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),i=document.querySelector("#".concat(r," .prism-controlbar"));i.appendChild(t)}ready(a){var s=a._el.id,r=document.querySelector("#".concat(s," .current-rate")),t=document.querySelector("#".concat(s," .rate-list")),i=null,l=document.querySelector("#".concat(s," .prism-setting-item.prism-setting-speed"));l&&l.classList.add("player-hidden"),r.onclick=()=>{t.style.display="block"},r.onmouseleave=()=>{i=setTimeout(()=>{t.style.display="none"},100)},t.onmouseenter=()=>{clearTimeout(i)},t.onmouseleave=()=>{t.style.display="none"},t.onclick=p=>{var f=p.target,h=f.dataset.rate;if(h){if(a.setSpeed(h),f.className!=="current"){var S=t.querySelector(".current");S&&(S.className=""),f.className="current"}t.style.display="none",r.innerText="".concat(h,"x")}}}}var Ue=u(69164),_e=u(37055);function Te(G){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=_e.ZP.local.getLocalUrl(G);return ne.WY.get({url:s,params:a})}var pt=u(91648),De=u(18329),ze=u(38642),Be=u(9849),ke=u(99891);class Ge extends O.Component{constructor(a){super();this.WaterMarkText=a,this.html=document.getElementsByClassName("common-watermark")}createEl(a){setTimeout(()=>{a.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var Xe=Ge,mt=G=>({userInfo:G.user});class Ve extends O.Component{constructor(a){var s;super(a);s=this,this.onVideoReady=r=>{var t=this.props,i=t.resourceInfo,l=t.mode,p=t.autoPlay,f=t.t,h=i.storageType;r==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(r),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(l==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),l==="preview"&&p&&this.play.play()):h==="ALIBABA_PRIVATE"||h==="LOCAL"?this.updateSource("resetPlayer"):(ne.WY.logger({keyword:"video",moduleName:"video-play",msg:f("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var r=this.props,t=r.draggable,i=r.mode,l=r.t,p=r.studyInfo,f=r.needCurrentTime,h=r.onCurrentTime,S=h===void 0?()=>{}:h,I=p.studyType,E=p.studyId,y=p.resourceId,C=this.state,F=C.showPreventHang,q=C.dragSwitch,$=C.showRandomAlert,te=C.randomAlertDialogVisible,U=this.playingVideo,me=U.oneTime,de=U.popupWindowCount,pe=U.maxPlayTime,be=U.progress,Ce=U.auditionLength,Se=U.auditionType,Ee=U.duration,we=U.recentStart,ce=this.play.getCurrentTime(),le=(F==="OPEN"||$==="OPEN")&&de>0;if(f&&S(ce),Ce>0&&Se===2&&ce>Ce&&(this.play.seek(Ce),K.default.warning(l("component.haveALookOverTip")),this.play.pause()),i==="learn"&&le){var Ne=Ee-me*de;if(de>0&&ce>Ne)if(this.play.pause(),$==="OPEN"){if(!te){var Le=(0,pt.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:Le},()=>{(0,X.qp)({popupId:Le,planId:E,resourceId:y,type:"popup_start"})}),this.play.exitFull()}}else F==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((t||be===100)&&(ce>0&&(this.playingVideo.recentStart=ce),!((I==="enterprise"||I==="studyProject")&&q==="OPEN")))return!1;ce>pe?ce-we>2?(this.playingVideo.recentStart=pe,this.play.seek(pe),K.default.warning(l("component.preventFastWatchTip"))):(this.playingVideo.recentStart=ce,this.playingVideo.maxPlayTime=ce):ce>0&&ce>this.playingVideo.recentStart&&(this.playingVideo.recentStart=ce)},this.onPlay=()=>{var r=this.props,t=r.mode,i=r.onPlay,l=i===void 0?()=>{}:i;l();var p=this;t==="learn"&&!p.timer&&(p.timer=setTimeout(function f(){p.saveProgress(),clearTimeout(p.timer),p.timer=setTimeout(f,2e4)},2e4))},this.onPause=()=>{var r=this.props,t=r.studyInfo,i=r.mode,l=t.studyType;clearTimeout(this.timer),this.timer=null,i==="learn"&&(l==="platform"||l==="enterprise"||l==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var r=this.props.mode;r==="learn"&&this.saveProgress()},this.onError=r=>{var t=this.props.resourceInfo,i=t.storageType;(i==="ALIBABA_PRIVATE"||i==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var r=this.props.mode;this.initPlayVideo(),r==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var r=this.state,t=r.showPreventHang,i=r.showRandomAlert,l=this.props,p=l.t,f=l.playingVideo,h=l.studyInfo,S=l.autoPlay,I=f.recentStart,E=f.duration,y=f.progress,C=h.studyType,F=(t==="OPEN"||i==="OPEN")&&(C==="studyTask"||C==="enterprise"||C==="studyProject")&&y<100;F?(i==="OPEN"?this.setState({promptMessage:p("component.preventAlertTip"),dialogVisible:!0}):t==="OPEN"&&this.setState({promptMessage:p("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):S&&(this.play.play(),Math.ceil(I)<parseInt(E)&&this.play.seek(I))},this.playerShowPreventHang=()=>{var r=this.playingVideo,t=r.duration,i=r.recentStart,l=0;t>0&&t<180?(l=t/2,this.playingVideo.oneTime=l,i>=l?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):t>=180&&t<600?(l=t/3,this.playingVideo.oneTime=l,i>=2*l?this.playingVideo.popupWindowCount=0:i>=l?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(l=t/4,this.playingVideo.oneTime=l,i>=3*l?this.playingVideo.popupWindowCount=0:i>=2*l?this.playingVideo.popupWindowCount=1:i>=l?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var r=this.props,t=r.playingVideo,i=r.mode;if(i==="learn"){this.playingVideo=(0,w.Z)({},t);var l=t.duration,p=t.progress;this.playingVideo.hasFinished=parseInt(p)===100,this.playingVideo.maxPlayTime=parseInt(l)*parseInt(p)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,T.Z)(L().mark(function r(){var t,i,l,p,f,h,S,I,E,y,C,F,q,$,te,U,me,de,pe,be,Ce,Se,Ee,we;return L().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(t=s.state,i=t.speedSwitch,l=t.dragSwitch,p=t.whiteList,f=s.props,h=f.resourceInfo,S=f.showQuality,I=h.contentType,E=h.storageType,y=h.source,C=h.playId,F=h.playerId,q=h.showFullScreen,$=q===void 0?!0:q,te=xe(F),te.components=[],U=typeof y=="object"&&y.hasOwnProperty("FD")&&y.FD.indexOf("m3u8")===-1,S&&U&&I!=="mp3"&&(E&&E==="PUBLIC_CLOUD"||!E)&&te.components.push({name:"VideoQuality",type:Ke,args:[()=>{s.play.pause(),s.playingVideo.readyCount=0}]}),i==="OPEN"&&te.components.push({name:"VideoRate",type:Qe}),$&&(me=te.skinLayout.find(Ne=>Ne.name==="controlBar"),me&&me.children.splice(me.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),te.components.push({name:"VideoWaterMark",type:Xe}),de=y.FD,pe=y.OD,de.indexOf("http://")>-1&&(de=de.replace("http://","https://")),pe.indexOf("http://")>-1&&(pe=pe.replace("http://","https://")),be=p.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",y.OD=pe&&pe.indexOf(be)>-1&&pe.indexOf(".mp4")>-1?pe:de,y.FD=de,Ce=typeof y!="string"?JSON.stringify(y):y,te.source=Ce,l==="OPEN"&&(te.disableSeek=!0),E!=="ALIBABA_PRIVATE"){le.next=32;break}return le.next=22,(0,X.BR)(C);case 22:if(Se=le.sent,!Se){le.next=28;break}te.source=Se,te.vodRetry=1,le.next=30;break;case 28:return s.setState({showPrivateVodError:!0}),le.abrupt("return");case 30:le.next=38;break;case 32:if(E!=="LOCAL"){le.next=38;break}return le.next=35,Te(C);case 35:Ee=le.sent,we=Ee.data,we.code===0&&(te.source="".concat(y.FD,"?auth_key=").concat(we.data.auth_key),te.vodRetry=1);case 38:s.setState({playerConfig:te});case 39:case"end":return le.stop()}},r)})),this.updateSource=function(){var r=(0,T.Z)(L().mark(function t(i){var l,p,f,h,S,I,E,y;return L().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(l=s.state.playerConfig,p=s.props.resourceInfo,f=p.storageType,h=p.source,S=p.playId,s.playingVideo.readyCount=0,f!=="ALIBABA_PRIVATE"){F.next=16;break}return F.next=7,(0,X.BR)(S);case 7:if(I=F.sent,!I){F.next=12;break}Object.assign(l,{source:I,vodRetry:1}),F.next=14;break;case 12:return s.setState({showPrivateVodError:!0}),F.abrupt("return");case 14:F.next=22;break;case 16:if(f!=="LOCAL"){F.next=22;break}return F.next=19,Te(S);case 19:E=F.sent,y=E.data,y.code===0&&Object.assign(l,{source:"".concat(h.FD,"?auth_key=").concat(y.data.auth_key),vodRetry:1});case 22:s.setState({playerConfig:l},()=>{s.play.setupPlayer(i)});case 23:case"end":return F.stop()}},t)}));return function(t){return r.apply(this,arguments)}}(),this.saveProgress=()=>{var r=this.props,t=r.studyInfo,i=r.userInfo,l=i.isLogin,p=i.enterpriseId,f=i.id,h=this.playingVideo,S=h.recentStart,I=h.duration,E=h.hasFinished,y=Math.ceil(+S);y>Number(I)&&(y=Number(I));var C=Math.ceil(y/+I*100);if((C>100||E)&&(C=100),l){var F=this.playingVideo,q=F.auditionType,$=F.auditionLength;if($>0&&q===2){var te=Math.ceil($/I*100);te<=C&&(C=te,y=$)}(0,X.sH)({studyInfo:t,progress:C,recent_start:y,enterpriseId:p,userId:f}).then(U=>{U&&U.data&&(0,Ue.Z)(U.data.integral_info||"")})}},this.getInfoFromSettings=(0,T.Z)(L().mark(function r(){var t,i,l,p,f,h,S,I,E;return L().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return t=s.props.studyInfo,i=t.studyType,l=t.projectId,C.next=4,(0,X.Gw)();case 4:if(p=C.sent,f=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],h=(0,se.RG)(p,f),i!=="studyProject"){C.next=14;break}return C.next=10,(0,Be.NU)({id:l});case 10:S=C.sent,I=S.status,E=S.data,I===200&&(h.showPreventHang=E.prevent_cut_screen?"OPEN":"CLOSED",h.speedSwitch=E.speed_play?"OPEN":"CLOSED",h.dragSwitch=E.prevent_drag?"OPEN":"CLOSED");case 14:s.setState(h,()=>{s.dealVideoConfig()});case 15:case"end":return C.stop()}},r)})),this.dealAudioPoster=()=>{var r=this.props.resourceInfo.contentType,t=r===void 0?"":r;this.setState({showAudioPoster:t==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var r=this.state.showAudioPoster,t=this.play.playerContainer;r&&t&&(t.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),t.style.backgroundSize="cover")},this.getPlayInstance=r=>{this.play=r},this.handleOk=()=>{this.setState({dialogVisible:!1});var r=this.state.btnType,t=this.playingVideo.recentStart,i=this.props.t;r==="know"?(this.play.play(),this.play.seek(t),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:i("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,T.Z)(L().mark(function r(){var t,i,l,p;return L().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:t=s.props.studyInfo,i=t.studyId,l=t.resourceId,p=s.state.randomAlertUUID,(0,X.qp)({popupId:p,planId:i,resourceId:l,type:"popup_end"}).then(()=>{s.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),s.playingVideo.popupWindowCount-=1,s.play.play();case 6:case"end":return h.stop()}},r)})),this.renderFooter=()=>{var r=this.state.btnType,t=this.props.t;return c().createElement(k.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(r)},t(r==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var r=this.props.t;return c().createElement(k.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},r("common.ok"))},this.state={playerConfig:xe(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:a.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:a.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:a.t("component.randomAlertTip"),randomAlertModal:{title:a.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,ze.UI)("CL_VIDEO_BAIYING_COM_CN")}},a.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(a){var s=typeof a.resourceInfo.source!="string"?JSON.stringify(a.resourceInfo.source):a.resourceInfo.source,r=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;s!==r&&r!==""&&this.initInfo()}componentWillUnmount(){var a=this.props.mode;a==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var a=this.state,s=a.playerConfig,r=a.showPrivateVodError,t=a.dialogVisible,i=a.dialogModal,l=a.promptMessage,p=a.randomAlertDialogVisible,f=a.randomAlertModal,h=a.randomAlertTip,S=a.encryptedSwitch,I=this.props,E=I.resourceInfo,y=I.t,C=S==="OPEN"?re:He;return c().createElement(O.Fragment,null,c().createElement(C,(0,V.Z)({ref:this.getPlayInstance},E,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:s,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),c().createElement(De.ZP,(0,V.Z)({visible:t},i,{footer:this.renderFooter()}),c().createElement("div",{className:"video-business-prompt"},l)),c().createElement(De.ZP,(0,V.Z)({visible:p},f,{footer:this.renderRandomFooter()}),c().createElement("div",{className:"video-player-container__prompt"},h)),r&&c().createElement("div",{className:"video-business-vod-error"},y("privateCloud.docReadError")),c().createElement(ke.Z,{scenes:"video"}))}}var qe=(0,R.$j)(mt,null,null,{forwardRef:!0})((0,P.Z)("translation",{withRef:!0})(Ve)),Je=u(94184),Fe=u.n(Je),Me=u(84874),We=G=>({userInfo:G.user}),$e={getPravateDocUrl:_e.ZP.localStorage.getPravateDocUrl};function et(G){return JSON.stringify(G,(a,s)=>(typeof s=="function"&&(s=s.toString()),s))}function tt(G){var a=parseInt(parseInt(G,10)/60,10),s=parseInt(parseInt(G,10)%60,10);return a<10&&(a="0".concat(a)),s<10&&(s="0".concat(s)),"".concat(a,":").concat(s)}class je extends O.Component{constructor(a){var s;super(a);s=this,this.messageFun=r=>{var t=this.props,i=t.docType,l=t.progress,p=t.studyTimeLimit,f=t.studyTime,h=this.state,S=h.jumpPageTag,I=h.totalTime,E=h.timeRemaining,y=this.state.previewDocData,C={};try{C=JSON.parse(r.data)}catch(F){return}switch(C.action){case"preview.ready":this.initDocData();break;case"preview.meta":y.totalPage=C.data.pc||1,y.currentPage=1,this.setState({previewDocData:y},()=>{this.reportStatusInterval()}),p>0?(this.saveProgress(l,f||"1",C.data.pc||1),this.setState({showCountDownContainer:!0})):i==="xlsx"||i==="xls"||y.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(l,f||"1",C.data.pc||1),p>0&&l<100?(this.setState({showCountDown:!0}),i==="xlsx"||i==="xls"?I=p:I=p*C.data.pc,E=parseInt(I*(1-l/100),10),this.setState({timeRemaining:E,totalTime:I},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(S){S=!1,this.setState({jumpPageTag:S});return}y.currentPage=C.data.pageIndex+1,this.setState({previewDocData:y}),p||this.saveProgress(Math.ceil(y.currentPage/y.totalPage*100),y.currentPage,y.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":K.default.error(C.data.result);break;default:break}},this.initDocData=(0,T.Z)(L().mark(function r(){var t,i,l,p,f,h,S,I,E,y,C,F,q,$;return L().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(s.setState({isShowPrivateError:!1}),t=s.props,i=t.docType,l=t.userInfo,p=t.documentWatermarkSettings,f=t.storageType,h=t.privateDocId,S=l.name,I=l.jobNumber,E=l.position,y="",C={},f!=="ALIBABA_PRIVATE"){U.next=18;break}return U.prev=6,F=$e.getPravateDocUrl(h),U.next=10,ne.WY.get({url:F});case 10:q=U.sent,$=q.data,$.code===0?C=$.data||{}:s.setState({isShowPrivateError:!0}),U.next=18;break;case 15:U.prev=15,U.t0=U.catch(6),s.setState({isShowPrivateError:!0});case 18:if(p.indexOf("name")>-1&&(y="".concat(y+S," ")),p.indexOf("position")>-1&&(y="".concat(y+E," ")),p.indexOf("jobnumber")>-1&&(y+=I),y.length>0?window.sendMessage("preview.init",(0,w.Z)({wmType:1,wmValue:y,wmColor:"rgba(192, 192, 192, 0.4)"},C)):window.sendMessage("preview.init",(0,w.Z)({},C)),i!=="xlsx"&&i!=="ppt"&&i!=="pptx"&&i!=="xls"?s.setState({pageOperateContainerVisible:!0}):s.setState({pageOperateContainerVisible:!1}),!(i==="ppt"||i==="pptx")){U.next=29;break}U.t1=window,U.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},U.t1.sendMessage.call(U.t1,"setConfig",U.t2),U.next=32;break;case 29:U.t3=window,U.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},U.t3.sendMessage.call(U.t3,"setConfig",U.t4);case 32:case"end":return U.stop()}},r,null,[[6,15]])})),this.handleJumpPage=r=>{var t=this.state.previewDocData;t.currentPage=r,this.setState({jumpPageTag:!0,previewDocData:t});var i=r/t.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(i),r,t.totalPage),window.sendMessage("logic.toPage",{pageIndex:r-1})},this.redirectPage=()=>{var r=this.props,t=r.studyTimeLimit,i=r.studyTime,l=0;t===0&&(l=i-1>0?i-1:0),window.sendMessage("logic.toPage",{pageIndex:l})},this.docCountDown=()=>{var r=this.state.timeRemaining,t=this.state,i=t.totalTime,l=t.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{r-=1,this.setState({timeRemaining:r}),r<1&&(this.saveProgress(100,0,l.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var p=(i-r)/i*100;r<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(p),r,l.totalPage)},2e4)},this.saveProgress=(r,t,i)=>{var l=this.props.onSaveProgress;l&&l(r,t,i)},this.reportStatusInterval=()=>{var r=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var t=this.state.previewDocData.currentPage;r&&r({currentPage:t})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=r=>{this.docReader=r},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(a,s)=>{var r=this.docReader.contentWindow;r.postMessage(et({action:a,data:s}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var a=this.props,s=a.t,r=a.storageType,t=a.privateDocId,i=this.props.aliUrl,l=this.state,p=l.previewDocData,f=l.pageOperateContainerVisible,h=l.timeRemaining,S=l.showCountDown,I=l.showCountDownContainer,E=l.showPageOperateContainer,y=l.isShowPrivateError;return r==="ALIBABA_PRIVATE"&&(i="https://preview.imm.aliyuncs.com/index.html?docId=".concat(t)),c().createElement("div",{className:"doc-reader-container"},c().createElement("div",{className:"ali-doc-container",style:{paddingBottom:f?"56px":"0"}},c().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:i,id:"aliyunPreview",ref:this.dealPreviewRef}),I?c().createElement("div",{className:"ali-doc-container__countdown"},S?c().createElement("div",null,c().createElement(Me.Z,{iconClass:"iconf-tipe",size:"16px"}),s("component.docStillStudy"),c().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",tt(h)," "),s("component.canDone")):c().createElement("div",null,c().createElement(Me.Z,{iconClass:"iconf-tipe",size:"16px"}),s("component.docHasFinish"))):null,f?c().createElement("div",{className:"ali-doc__operate"},c().createElement("div",{className:Fe()(["ali-doc__operate__content",E?"":"ali-doc__operate__hide-content"])},c().createElement("div",{className:"ali-doc__operate__pagination"},c().createElement("div",{className:"ali-doc__operate__pagination__pages"},p.currentPage," / ",p.totalPage),c().createElement("div",{className:"ali-doc__operate__pagination__toggle"},c().createElement("div",{className:"ali-doc__operate__pagination__choose"},c().createElement("span",null,s("component.choosePage"),c().createElement(Me.Z,{iconClass:"iconf-arrow-under",size:"14px"})),c().createElement("div",{className:"ali-doc__operate__page-list-container"},c().createElement("div",{className:"ali-doc__operate__choose-page"},s("component.fastChoosePage")),c().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:p.totalPage})).map((C,F)=>c().createElement("li",{key:C,onClick:()=>this.handleJumpPage(F+1)},F+1))))),c().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},s("common.collapse"))))),c().createElement("div",{className:Fe()("ali-doc__operate__unfold",E?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},s("common.expand"))):null,y&&c().createElement("div",{className:"ali-doc__error"},s("privateCloud.docReadError"))),c().createElement(ke.Z,{scenes:"document"}))}}je.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var rt=(0,R.$j)(We)((0,P.Z)()(je)),at=G=>({userInfo:G.user}),st="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),_="".concat("https://doc.coolcollege.cn");class d extends c().Component{constructor(a){var s;super(a);s=this,this.onSaveProgress=(r,t,i)=>{var l=this.props,p=l.mode,f=l.studyInfo,h=l.userInfo,S=h.enterpriseId,I=h.id;p==="learn"&&(0,X.sH)({studyInfo:f,progress:r,page_count:i,recent_start:t,enterpriseId:S,userId:I}).then(E=>{E&&E.data&&(0,Ue.Z)(E.data.integral_info||"")})},this.messageFun=function(){var r=(0,T.Z)(L().mark(function t(i){var l,p,f,h,S,I;return L().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(i.data!=="local-resource"){y.next=9;break}if(l=s.props.resourceInfo,p=l.storageType,f=l.playId,!(p&&p==="LOCAL")){y.next=9;break}return y.next=6,Te(f);case 6:h=y.sent,S=h.data,S.code===0&&(I=document.getElementById("local-resource-box"),I.contentWindow.postMessage({msg:"local-auth-key",authKey:S.data.auth_key},"*"));case 9:case"end":return y.stop()}},t)}));return function(t){return r.apply(this,arguments)}}(),this.getInfoFromSettings=(0,T.Z)(L().mark(function r(){var t,i,l;return L().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,X.Gw)();case 2:t=f.sent,i=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],l=(0,se.RG)(t,i),s.setState(l,()=>{s.initDocPage(s.props)});case 6:case"end":return f.stop()}},r)})),this.initDocPage=(0,T.Z)(L().mark(function r(){var t,i,l,p,f,h,S,I,E,y,C,F,q,$,te,U,me,de,pe,be,Ce,Se,Ee,we,ce,le,Ne,Le,ht,ot,lt,ct,ut,vt,dt=arguments;return L().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(t=dt.length>0&&dt[0]!==void 0?dt[0]:{},i=t.resourceInfo,l=t.mode,p=t.studyInfo,f=t.userInfo,h=s.state.documentPlayerMode,S=i.docType,I=i.docTitle,E=i.url,y=i.studyTimeLimit,C=i.studyTime,F=i.aliUrl,q=i.progress,$=i.storageType,te=i.playId,U=p.studyType,me=p.courseId,de=p.studyId,pe=p.resourceId,be=f.enterpriseId,Ce=f.id,Se=f.isLogin,Ee=f.token,we=h==="compat"&&F.indexOf("preview.imm.aliyun")>-1||$==="ALIBABA_PRIVATE",!we){ye.next=11;break}s.setState({showAliReader:!0}),ye.next=31;break;case 11:if(ce=(0,X.sH)({enterpriseId:be,userId:Ce,token:Ee,studyInfo:p},!0),le=U==="studyTask"?2:1,Ne=_e.ZP.SaveProgress.reportStatusInterval(p),Le={isSaveProgress:Se&&l==="learn"&&ce,isSaveRecord:!1,access_token:Ee,userId:Ce,hostUrl:st,courseId:me,resourceId:pe,courseType:1,planId:de,studyTimeLimit:y,studyTime:C,saveProgressUrl:ce,type:"eapp",progress:q,saveRecordProgressUrl:Ne,actionType:le},!($&&$==="LOCAL")){ye.next=26;break}return ye.next=18,Te(te);case 18:if(ht=ye.sent,ot=ht.data,ot.code!==0){ye.next=25;break}Le.auth_key=ot.data.auth_key,Le.url=E,ye.next=26;break;case 25:return ye.abrupt("return");case 26:lt=JSON.stringify(Le),ct="".concat(I,".").concat(S).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),ut="".concat(_,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(lt),"&furl=").concat(E,"?attname=").concat(ct),$&&$==="LOCAL"&&(vt="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),ut="".concat(vt,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(lt),"&furl=").concat(E,"?attname=").concat(ct)),s.setState({encodeUrl:ut});case 31:case"end":return ye.stop()}},r)})),this.handleReportStatusInterval=r=>{var t=r.currentPage,i=this.props,l=i.resourceInfo,p=i.mode,f=i.studyInfo,h=i.userInfo,S=l.type,I=f.courseId,E=f.studyId,y=f.resourceId,C=h.enterpriseId,F=h.id,q=h.isLogin,$="",te="",U=0,me=!1;switch(S){case"enterprise":U=1,me=!0;break;case"study":$=E,U=2,me=!0;break;case"project":te=E,U=1,me=!0;break;default:break}if(!(!me||!q)){var de={plan_id:$,enterprise_id:C,user_id:F,course_id:I,project_course_id:te,resource_id:y,current_page:t,action_type:U,send_time:Date.parse(new Date)};p==="learn"&&(0,X.Xc)(f,de)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(a){this.initDocPage(a)}render(){var a=this.props.resourceInfo,s=this.state,r=s.encodeUrl,t=s.documentWatermarkSettings,i=s.showAliReader,l=a.docType,p=a.type,f=a.studyTimeLimit,h=a.studyTime,S=a.aliUrl,I=a.progress,E=a.storageType,y=a.playId;return i?c().createElement(rt,{privateDocId:y,storageType:E,aliUrl:S,docType:l,progress:I,studyTime:h,studyTimeLimit:f,documentWatermarkSettings:t,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:p}):c().createElement("div",{className:"doc-reader-container"},c().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:r,frameBorder:"0",allowFullScreen:!0}),c().createElement(ke.Z,{scenes:"document"}))}}var e=(0,R.$j)(at)(d),o=u(38979),m=u(90706),v=u(12968),g=u(44208),D=u(60667),W=G=>({userInfo:G.user});class ee extends c().Component{constructor(){var a;super(...arguments);a=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var s=this.props,r=s.studyInfo,t=s.mode,i=s.userInfo,l=i.enterpriseId,p=i.id;t==="learn"&&(0,se.Gp)({studyInfo:r,enterpriseId:l,userId:p})},this.getInfoFromSettings=(0,T.Z)(L().mark(function s(){var r,t,i;return L().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,X.Gw)();case 2:r=p.sent,t=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],i=(0,se.RG)(r,t),a.setState(i,()=>{a.renderWatermark()});case 6:case"end":return p.stop()}},s)})),this.renderWatermark=()=>{var s=this.props.userInfo,r=this.state.imageWatermark,t=s.name,i=s.unionid,l=s.sourceType,p=s.jobNumber,f=s.position,h=[];r.indexOf("name")>-1&&h.push(c().createElement(D.Z,{dataType:"userName",value:i,name:t,type:l})),r.indexOf("position")>-1&&h.push(c().createElement("span",null,f)),r.indexOf("jobnumber")>-1&&h.push(c().createElement("span",null,p)),r.length>0&&this.setState({watermark:h.map((S,I)=>c().createElement("span",{key:I},S))})},this.handleError=s=>{var r=this.props.onError;r&&r(s)},this.getImageUrl=(0,T.Z)(L().mark(function s(){var r,t,i,l,p,f,h,S,I,E;return L().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(r=a.props,t=r.resourceInfo,i=r.t,l=t.playId,p=t.url,f=t.storageType,h=p,!f){C.next=21;break}if(f!=="ALIBABA_PRIVATE"){C.next=15;break}return C.next=7,(0,X.J7)(l);case 7:if(S=C.sent,!S){C.next=12;break}h=S,C.next=13;break;case 12:return C.abrupt("return",K.default.info(i("privateCloud.docReadError")));case 13:C.next=21;break;case 15:if(f!=="LOCAL"){C.next=21;break}return C.next=18,Te(l);case 18:I=C.sent,E=I.data,E.code===0&&(h="".concat(p,"?auth_key=").concat(E.data.auth_key));case 21:a.setState({imageUrl:[h]},()=>{var F=a.state.imageUrl,q="image-business",$=document.querySelectorAll(".".concat(q,"-image img"));$.forEach((te,U)=>{te.onerror=()=>{a.handleError(F[U])}})});case 22:case"end":return C.stop()}},s)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var a="image-business",s=this.props.resourceInfo,r=s.preview,t=r===void 0?!1:r,i=this.state,l=i.watermark,p=i.imageUrl;return c().createElement("div",{className:a},c().createElement(ke.Z,{scenes:"image"}),c().createElement(m.Z,{className:"".concat(a,"-carousel")},p.map((f,h)=>c().createElement("div",{className:"".concat(a,"-image"),key:h.toString()},c().createElement(g.Z,{src:f,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:t})))))}}ee.defaultProps={prefixCls:"watch-image-page"};var oe=(0,R.$j)(W)((0,P.Z)()(ee)),ie=G=>({userInfo:G.user});class he extends c().Component{constructor(){var a;super(...arguments);a=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,T.Z)(L().mark(function s(){var r,t,i;return L().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,X.Gw)();case 2:r=p.sent,t=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],i=(0,se.RG)(r,t),a.setState(i,()=>{a.renderWatermark()});case 6:case"end":return p.stop()}},s)})),this.renderWatermark=()=>{var s=this.props.userInfo,r=this.state.htmlWatermark,t=s.name,i=s.unionid,l=s.sourceType,p=s.jobNumber,f=s.position,h=[];r.indexOf("name")>-1&&h.push(c().createElement(D.Z,{dataType:"userName",value:i,name:t,type:l})),r.indexOf("position")>-1&&h.push(c().createElement("span",null,f)),r.indexOf("jobnumber")>-1&&h.push(c().createElement("span",null,p)),r.length>0&&this.setState({watermark:h.map((S,I)=>c().createElement("span",{key:I},S))})},this.saveProgress=()=>{var s=this.props,r=s.studyInfo,t=s.mode,i=s.userInfo,l=i.enterpriseId,p=i.id;t==="learn"&&(0,se.Gp)({studyInfo:r,enterpriseId:l,userId:p})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var a="html-business",s=this.props.resourceInfo,r=s.url,t=this.state.watermark;return c().createElement("div",{className:a},c().createElement("div",{className:"".concat(a,"__html-watermark")},t),c().createElement("iframe",{title:"html",className:"".concat(a,"_iframe"),src:r}))}}var ve=(0,R.$j)(ie)((0,P.Z)()(he)),ge=u(57068),Ie=u(1164),Re=G=>({userInfo:G.user});class Oe extends c().PureComponent{constructor(){super(...arguments);this.getHost=a=>{var s=a.split("//"),r=s[1].split("/");return[s[0],r[0]].join("//")},this.getScormUrl=()=>{var a=this.props,s=a.studyInfo,r=a.mode,t=a.userInfo,i=a.resourceInfo,l=a.from,p=t.enterpriseId,f=t.id,h=i.url,S=this.getHost(h);if(r==="learn"){var I=(0,w.Z)({userId:f,enterpriseId:p,access_token:localStorage.token,from:l,scormUrl:encodeURIComponent(h),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},s);return"".concat(S).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(ge.stringify(I))}return"".concat(S,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(h))},this.handleOpenScormLink=a=>{Ie.Z.targetTo({path:a,isExternalLink:!0})}}render(){var a=this.props.t,s="scorm-business",r=this.getScormUrl(),t=(0,ze.UI)("SCORM_EXTERNAL_WATCH");return c().createElement("div",{className:s},t?c().createElement("div",{className:"".concat(s,"_scorm")},c().createElement("img",{className:"".concat(s,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),c().createElement("h5",null,a("resourcePlay.scormTip")),c().createElement(k.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(r)},a("resourceLibrary.h5LinkPlayButton"))):c().createElement("iframe",{title:"scorm",className:"".concat(s,"_iframe"),src:r}))}}var Ae=(0,R.$j)(Re)((0,P.Z)()(Oe));class fe extends c().Component{render(){var a=this.props,s=a.visible,r=a.title,t=a.onCancel,i=a.t,l=c().createElement("span",null,r);return c().createElement(De.ZP,{visible:s,title:l,onCancel:t,footer:null},c().createElement("div",{className:"ban-preview"},c().createElement("div",{className:"ban-preview-center"},c().createElement("img",{src:b(),alt:"picture"}),c().createElement("h2",null,i("localStorage.tip")),c().createElement("p",null,i("localStorage.banPreview"))),c().createElement("hr",null),c().createElement(k.Z,{type:"primary",className:"know",onClick:t},i("localStorage.onKnow"))))}}var it=(0,P.Z)()(fe);class Ye extends O.Component{constructor(){var a;super(...arguments);a=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=s=>{var r=this.props.previewInfo,t=r.onCancel;this.onCancel(),t(s)},this.onGetVideoBusiness=s=>{var r=this.props.onRef,t=r===void 0?()=>{}:r;this.videoBusiness=s,t(s)},this.onFullScreen=()=>{var s=this.state.fullScreen;this.setState({fullScreen:!s})},this.handleJudgeNetwork=(0,T.Z)(L().mark(function s(){var r,t,i,l,p,f,h,S,I,E,y,C=arguments;return L().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(r=C.length>0&&C[0]!==void 0?C[0]:null,t=a.props,i=t.resourceInfo,l=t.watchType,p=i.storageType,f=i.playId,h=i.originUrl,S=l==="image"||l==="video"||l==="doc",I=null,r?I=r:h?I=h:I=i.url,!(S&&I&&f&&p&&p==="LOCAL")){q.next=22;break}return q.prev=7,q.next=10,(0,X.NY)(f);case 10:return E=q.sent,q.next=13,(0,X.Hy)(I,E);case 13:y=q.sent,y?a.setState({showBan:"no"}):a.setState({showBan:"yes"}),q.next=20;break;case 17:q.prev=17,q.t0=q.catch(7),a.setState({showBan:"yes"});case 20:q.next=23;break;case 22:a.setState({showBan:"no"});case 23:case"end":return q.stop()}},s,null,[[7,17]])})),this.renderOuter=()=>{var s=this.props,r=s.prefixCls,t=s.watchType,i=s.onCurrentTime,l=i===void 0?()=>{}:i;return c().createElement("div",{className:"".concat(r,"-outer")},t==="video"&&c().createElement(qe,(0,V.Z)({onCurrentTime:l,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),t==="doc"&&c().createElement(e,this.props),t==="image"&&c().createElement(oe,(0,V.Z)({onError:this.handleJudgeNetwork},this.props)),t==="html"&&c().createElement(ve,this.props),t==="scorm"&&c().createElement(Ae,this.props))},this.renderFooter=()=>{var s=this.props,r=s.resourceInfo.storageType,t=s.t,i=this.state.showBan,l=i!==""&&i==="yes";return r&&r!=="PUBLIC_CLOUD"&&l?c().createElement(k.Z,{type:"primary",className:"know",onClick:this.onCancelModel},t("localStorage.onKnow")):null}}componentDidMount(){var a=this.props.mode;a==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(a){a.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var a=this.state,s=a.showBan,r=a.fullScreen,t=this.props,i=t.mode,l=t.previewWay,p=t.previewInfo,f=t.prefixCls,h=t.t,S=t.showEnlarge,I=t.footer,E=I===void 0?null:I,y=p.visible,C=p.destroyOnClose,F=p.title,q=s!==""&&s==="yes",$=s!==""&&s==="no";return c().createElement(O.Fragment,null,i==="preview"&&l==="popups"&&c().createElement(De.ZP,{destroyOnClose:C,visible:y,title:F,onCancel:this.onCancelModel,footer:E||this.renderFooter(),wrapClassName:"".concat(f,"-resource ").concat(r?"".concat(f,"-full"):"")},S&&c().createElement("div",{className:"".concat(f,"-resource-out-icon"),onClick:this.onFullScreen},r?c().createElement(Y.Z,{className:"".concat(f,"-resource-icon")}):c().createElement(H.Z,{className:"".concat(f,"-resource-icon")})),c().createElement("div",{className:"".concat(f,"-inner")},!y&&c().createElement(n.Z,{size:"large"}),y&&$&&this.renderOuter(),q&&c().createElement(Q,null))),(i==="learn"||l==="page")&&$&&this.renderOuter(),(i==="learn"||l==="page")&&c().createElement(it,{visible:q,title:F||h("questionn.warmHint"),onCancel:this.onCancel}))}}Ye.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var nt=(0,P.Z)("translation",{withRef:!0})(Ye)},41225:function(ue,ae,u){"use strict";u.d(ae,{Hy:function(){return T},NY:function(){return N},Gw:function(){return L},sH:function(){return Y},BR:function(){return O},qp:function(){return H},Xc:function(){return P},J7:function(){return c}});var B=u(57361),n=u(9754),j=u.n(n),k=u(10237),V=u(37055),T=function(){var x=(0,B.Z)(j().mark(function b(){var M,Q,w,z,K,R,se,X=arguments;return j().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return M=X.length>0&&X[0]!==void 0?X[0]:"",Q=X.length>1&&X[1]!==void 0?X[1]:"",w="",M.startsWith("http")?(z=M.split("//")[1].trim(),K=z.split("/")[0],w="https://".concat(K,"/cms/ticket")):(R=M.split("/")[0],w="https://".concat(R,"/cms/ticket")),J.prev=4,J.next=7,k.ZQ.get({url:w,params:{ticket:Q}});case 7:if(se=J.sent,!(se.status===200||se.status===403)){J.next=10;break}return J.abrupt("return",Promise.resolve(!0));case 10:return J.abrupt("return",Promise.resolve(!1));case 13:return J.prev=13,J.t0=J.catch(4),J.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return J.stop()}},b,null,[[4,13]])}));return function(){return x.apply(this,arguments)}}(),N=function(){var x=(0,B.Z)(j().mark(function b(M){var Q,w;return j().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,k.ZQ.get({url:V.ZP.local.getTicket(M)});case 2:if(Q=K.sent,w=Q.data,w.code!==0){K.next=6;break}return K.abrupt("return",Promise.resolve(w.data.ticket));case 6:return K.abrupt("return",Promise.resolve(""));case 7:case"end":return K.stop()}},b)}));return function(M){return x.apply(this,arguments)}}(),L=function(){var x=(0,B.Z)(j().mark(function b(){var M;return j().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,k.WY.get({url:V.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return M=w.sent,w.abrupt("return",M.data.list);case 4:case"end":return w.stop()}},b)}));return function(){return x.apply(this,arguments)}}(),O=function(){var x=(0,B.Z)(j().mark(function b(M){var Q,w,z;return j().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,k.WY.get({url:V.ZP.localStorage.getPravateVideoUrl(M)});case 2:if(Q=R.sent,Q.data.code!==0){R.next=6;break}return w=Q.data.data.videoPlayInfo,z=w===void 0?"":w,R.abrupt("return",z);case 6:return R.abrupt("return","");case 7:case"end":return R.stop()}},b)}));return function(M){return x.apply(this,arguments)}}(),c=function(){var x=(0,B.Z)(j().mark(function b(M){var Q,w,z;return j().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return Q=V.ZP.localStorage.getPravateDocUrl(M),R.prev=1,R.next=4,k.WY.get({url:Q});case 4:if(w=R.sent,z=w.data,!(z.code===0&&z.data)){R.next=8;break}return R.abrupt("return",z.data.docResourceDownloadUrl||"");case 8:return R.abrupt("return","");case 11:return R.prev=11,R.t0=R.catch(1),R.abrupt("return","");case 14:case"end":return R.stop()}},b,null,[[1,11]])}));return function(M){return x.apply(this,arguments)}}(),Y=function(b){var M=b.studyInfo,Q=b.progress,w=b.recent_start,z=b.page_count,K=b.enterpriseId,R=b.userId,se=b.token,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ne,J=M.studyType;if(J==="studyTask"&&(ne=V.ZP.SaveProgress.studySaveProgress(M)),(J==="course"||J==="enterprise")&&(ne=V.ZP.SaveProgress.enterpriseCourseSaveProgress(M)),J==="studyProject"&&(ne=V.ZP.SaveProgress.projectSaveProgress(M)),J==="platform"&&(ne="".concat(V.ZP.SaveProgress.platformCourseSaveProgress(M))),(X||J==="platform")&&(ne+="?enterprise_id=".concat(K,"&user_id=").concat(R)),X)return ne+="&access_token=".concat(se||localStorage.getItem("token")),ne;var Z={progress:Q,recent_start:w,tempTime:Date.parse(new Date)};return z&&(Z.page_count=z),M.evaluationId&&(Z.evaluation_id=M.evaluationId),k.WY.post({url:ne,data:Z})},H=x=>{var b=x.popupId,M=x.planId,Q=x.resourceId,w=x.type;return k.WY.post({url:V.ZP.TaskStudyRecord.setRandomPopupRecord(M),data:{course_id:Q,terminal_type:"PC",popup_id:b,type:w}})},P=(x,b)=>{var M=V.ZP.SaveProgress.reportStatusInterval(x);return k.WY.post({url:M,data:b})}},21594:function(ue,ae,u){"use strict";u.d(ae,{pu:function(){return V},RG:function(){return T},Gp:function(){return N},O8:function(){return L}});var B=u(88986),n=u(69164),j=u(38642),k=u(41225),V=O=>{var c="";switch(O){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":c="studyTask";break;case"enterprise":c="enterprise";break;case"courseProject":c="studyProject";break;case"platform":case"purchased":c="platform";break;default:break}return c},T=(O,c)=>{var Y={};return c.forEach(H=>{var P=O.find(w=>w.type===H.type);if(P)if(H.type==="document_duration_limit"){var x=P.action_list,b=x.find(w=>w.type==="random_popup_verification");!(0,j.UI)("RANDOM_POPUP_VERIFY")||!b?Y[H.name]="CLOSE":Y[H.name]=b.param.checked==="true"?"OPEN":"CLOSE"}else if(H.type==="document_player"){var M=JSON.parse(P.actions);M.forEach(w=>{w.param.checked==="true"&&(Y[H.name]=w.type)})}else if(H.type==="dynamic_watermark"){var Q=P.action_list;Q.forEach(w=>{w.type===H.resourceType&&w.param.checked==="true"&&(Y[H.name]=w.param.comment)})}else Y[H.name]=P.switch_status}),Y},N=O=>{(0,k.sH)((0,B.Z)({progress:100,recent_start:1},O)).then(c=>{c&&c.data&&(0,n.Z)(c.data.integral_info||"")})},L=O=>{var c=document.createElement("div");return c.innerHTML=O,c.childNodes[0]}},92696:function(ue,ae,u){"use strict";u.r(ae),u.d(ae,{default:function(){return st}});var B=u(12924),n=u.n(B),j=u(91768),k=u(57068),V=u(76651),T=u(10237),N=u(37055),L=u(4408),O=u(57663),c=u(71577),Y=u(62029),H=u(34792),P=u(48086),x=u(88986),b=u(96486),M=u(21444),Q=u(38296),w=u(22385),z=u(31097),K=u(71153),R=u(60331),se=u(71194),X=u(57016),ne=u(8212),J=u(73171),Z=u(49101),A=u(64456);class re extends B.Component{constructor(d){super(d);this.reSetAIVideoList=()=>{if(this.outer.clientWidth<this.inner.offsetWidth){var e=document.querySelector(".ai_video_list"),o=document.querySelector(".ai_video_list_group");o.style.left="".concat(-(o.offsetWidth-e.offsetWidth),"px")}},this.setActiveIndex=e=>{this.setState({activeIndex:e})},this.handleEdit=e=>{this.setState({activeIndex:e},()=>{this.props.handleConfirm()})},this.handleDelete=e=>{var o=this.props.t;X.Z.confirm({title:o("common.tip"),content:o("common.confirmDeleteTitle"),onOk:()=>{this.props.handleDelete(e)},centered:!0,getContainer:document.getElementsByClassName("indicator")[0],onCancel(){}})},this.renderItem=()=>{var e=this.props.segmentationList,o=this.state.activeIndex;return e.map((m,v)=>{var g=o===v?"ai_video_list_item_active":"";return n().createElement("div",{key:v,className:"ai_video_list_item ".concat(g),value:v,key:v,onClick:()=>this.handleClick(v)},n().createElement("img",{className:"ai_video_list_item_img",src:m.snapshot_url,alt:""}),n().createElement("div",{className:"ai_video_list_item_text",title:m.name},m.name),n().createElement("div",{className:"ai_video_list_item_button"},n().createElement(ne.Z,{className:"ai_video_list_item_button_edit",onClick:()=>this.handleEdit(v)}),n().createElement(J.Z,{className:"ai_video_list_item_button_delete",onClick:()=>this.handleDelete(v)})),n().createElement("div",{className:"ai_video_list_item_time"},(0,A.Z)(m.start_time)," - ",(0,A.Z)(m.end_time)),n().createElement("div",{className:"ai_video_list_item_tags"},this.renderTags(m.tags)))})},this.renderTags=e=>{var o=document.getElementsByClassName("indicator");return e.map((m,v)=>n().createElement(z.Z,{getPopupContainer:()=>o&&o[0],key:v,title:m},n().createElement(R.Z,null,m)))},this.handleClick=e=>{var o=this.props.oprateStatus;if(!(o==="cut_processing"||o==="not")){var m=this.state.activeIndex;this.props.resetTemporaryData(),typeof m=="undefined"&&(this.props.setClick(!1),this.props.visibleCrop||this.props.setVisibleCrop(!0)),m!==e&&(this.props.setClick(!0),m=e,this.setState({activeIndex:m},()=>{this.props.setActiveIndex(m,!0)}))}},this.state={activeIndex:0},this.outer=null,this.inner=null}static getDerivedStateFromProps(d,e){return d.activeIndex!==e.activeIndex?{activeIndex:d.activeIndex}:null}componentDidMount(){this.outer=document.querySelector(".ai_video_list"),this.inner=document.querySelector(".ai_video_list_group")}dragAndClick(d,e){e.preventDefault(),e.persist();var o=!0,m=!0,v=e.clientX-this.inner.offsetLeft,g="ai_video_list_item";window.onmousemove=D=>{if(m=!1,!(o&&this.inner.offsetWidth<this.outer.clientWidth)&&o){var W=D.clientX-v;W>0&&(W=0),-W>this.inner.offsetWidth-this.outer.offsetWidth&&(W=-(this.inner.offsetWidth-this.outer.offsetWidth)),this.inner.style.left="".concat(W,"px")}},window.onmouseup=()=>{m&&e.target.getAttribute("class").trim().includes(g)&&this.handleClick(d,e),o=!1,window.onmousemove=null,window.onmouseup=null}}render(){var d=this.props.oprateStatus,e=d==="cut_processing"||d==="not"?" ai_video_list_item_disabled":"";return n().createElement("div",{className:"ai_video_list"},n().createElement("div",{className:"ai_video_list_group"},n().createElement("div",{className:"ai_video_list_item  add".concat(e),onClick:()=>this.handleClick()},n().createElement(c.Z,{type:"link",disabled:d==="cut_processing"||d==="not",icon:n().createElement(Z.Z,null)})),this.renderItem()))}}var Pe=(0,j.Z)()(re),xe=u(33565),Ze={outer:null,innerList:null,dragList:[],result:null,timeTogether:null,timeBox:null,direction:"",setCurrentTime:null,cb:null,divList:[{class:"left",left:"-6px",top:"50%",transform:"translateY(-50%)",cursor:"w-resize"},{class:"right",right:"-6px",top:"50%",transform:"translateY(-50%)",cursor:"e-resize"}],resize(_){var d=_.outer,e=_.inner,o=_.together,m=_.duration,v=_.cb,g=_.setCurrentTime,D=_.setClick,W=_.visibleCrop,ee=_.distance,oe=ee===void 0?15:ee;return this.duration=m,this.distance=oe,this.cb=v,this.setClick=D,this.outer=d,this.inner=e,this.setTimeOut=null,this.dragList=[],this.timeTogether=o,this.secondPerPx=this.duration/d.clientWidth,this.setCurrentTime=g,this.inner.style.display=W?"block":"none",this.timeTogether.increase.onmousedown=this.action.reduce.bind(this),this.timeTogether.reduce.onmousedown=this.action.increase.bind(this),this.timeTogether.choiceTime.onmouseenter=this.action.choiceTimeEnter.bind(this),this.timeTogether.choiceTime.onmouseleave=this.action.choiceTimeLeave.bind(this),this.divList.map(ie=>{for(var he=document.createElement("div"),ve="position:absolute;width:10px;height:100px",ge=0,Ie=Object.entries(ie);ge<Ie.length;ge++){var Re=Ie[ge],Oe=(0,xe.Z)(Re,2),Ae=Oe[0],fe=Oe[1];Ae==="class"&&(he.className=fe),Ae!=="class"&&(ve+=";".concat(Ae,":").concat(fe))}he.setAttribute("style",ve),he.onmousedown=this.drag.bind(this,he),this.dragList.push(he)}),this.inner.onmousedown=this.drag.bind(this,this.inner),this.dragList.map(ie=>this.inner.appendChild(ie)),this},drag(_){event.stopPropagation(),event.preventDefault(),clearTimeout(this.setTimeOut),window.onmouseup=null;var d=!0,e={downX:event.clientX,oldWith:this.inner.offsetWidth,oldLeft:this.inner.offsetLeft,offsetX:event.clientX-this.inner.offsetLeft};window.onmousemove=o=>{o.preventDefault(),!!d&&(Object.assign(e,{newX:o.clientX}),_.className==="inner"?(0,b.throttle)(this.action.move.bind(this,e),300)():(0,b.throttle)(this.action.drag.bind(this,e,_.className,o),300)())},window.onmouseup=o=>{o.preventDefault(),this.setTimeOut=setTimeout(()=>{this.timeTogether.choiceTime.style.opacity=0},5e3),this.timeBox={start:Math.floor(this.inner.offsetLeft*this.secondPerPx),end:Math.floor((this.inner.offsetLeft+this.inner.offsetWidth)*this.secondPerPx),click:!0},this.setClick(!1),this.cb(this.timeBox),window.onmousemove=null,window.onmouseup=null,o.stopPropagation(),d=!1}},action:{choiceTimeLeave(){event.stopPropagation(),event.preventDefault(),this.setTimeOut=setTimeout(()=>{this.timeTogether.choiceTime.style.opacity=0},5e3)},choiceTimeEnter(){event.stopPropagation(),event.preventDefault(),clearTimeout(this.setTimeOut)},reduce(_){_.stopPropagation(),_.preventDefault();var d;if(this.timeBox.start>0&&this.direction==="left"&&(this.timeBox.start-=1,d=this.timeBox.start,this.timeTogether.microTuning.innerText=(0,A.Z)(d)),this.direction==="right"){if(this.timeBox.end-1-this.timeBox.start<10)return;this.timeBox.end-=1,d=this.timeBox.end,this.timeTogether.microTuning.innerText=(0,A.Z)(d)}this.setClick(!0),this.cb(this.timeBox)},increase(_){_.stopPropagation(),_.preventDefault();var d;if(this.timeBox.end<this.duration&&this.direction==="right"&&(this.timeBox.end+=1,d=this.timeBox.end,this.timeTogether.microTuning.innerText=(0,A.Z)(d)),this.direction==="left"){if(this.timeBox.end-1-this.timeBox.start<10)return;this.timeBox.start+=1,d=this.timeBox.start,this.timeTogether.microTuning.innerText=(0,A.Z)(d)}this.setClick(!0),this.cb(this.timeBox)},drag(_,d){if(this.timeTogether.choiceTime.style.opacity=1,d==="right"){this.direction="right";var e=_.oldWith+_.newX-_.downX;if(_.oldLeft+e>this.outer.clientWidth)return;var o=(e+this.inner.offsetLeft)*this.secondPerPx;if(o=o>this.duration?this.duration:o,20*this.secondPerPx+this.inner.offsetLeft*this.secondPerPx>=o)return;this.timeTogether.microTuning.innerText=(0,A.Z)(Math.floor(o)),this.action.canResize.call(this,this.inner,{width:"".concat(e,"px")},e)}else{this.direction="left";var m=_.oldWith+(_.downX-_.newX),v=_.oldLeft+_.newX-_.downX;if(v<0||m<=20)return;this.timeTogether.microTuning.innerText=(0,A.Z)(Math.floor(v*this.secondPerPx)),this.setCurrentTime(Math.floor(v*this.secondPerPx)),this.action.canResize.call(this,this.inner,{left:"".concat(_.oldLeft+_.newX-_.downX,"px"),width:"".concat(m,"px")},m)}},move(_){this.timeTogether.choiceTime.style.opacity=0;var d=event.clientX-_.offsetX,e=this.outer.clientWidth-this.inner.offsetWidth;d=Math.ceil(Math.min(Math.max(0,d),e)),this.setCurrentTime(Math.floor(d*this.secondPerPx)),Object.assign(this.inner.style,{left:"".concat(d,"px")})},getSecondPerPx(){return this.secondPerPx},canResize(_,d,e){e>this.distance&&Object.assign(_.style,(0,x.Z)({},d))}},getResult(){return this.timeBox},reSetSecondPerPx(){this.secondPerPx=this.duration/this.outer.clientWidth},setInit(){this.inner.style.left="".concat(this.inner.offsetLeft+this.inner.offsetWidth,"px")}},He=u(73250),Ke=u.n(He);class Qe extends B.Component{constructor(d){super(d);this.handleClick=e=>{e==="add"?this.props.handleConfirm():e==="edit"&&this.props.confirmToSplit()},this.reset=()=>{var e=document.querySelector(".inner"),o=document.querySelector(".outer"),m=document.querySelector(".choice-time"),v=document.querySelector("#increase"),g=document.querySelector("#microTuning"),D=document.querySelector("#reduce"),W=document.querySelector(".crop"),ee={choiceTime:m,increase:v,microTuning:g,reduce:D,crop:W},oe={outer:o,inner:e,together:ee,duration:this.props.duration,cb:this.props.setTimePoint,setCurrentTime:this.props.setCurrentTime,setClick:this.props.setClick,visibleCrop:this.props.visibleCrop},ie;o&&typeof this.props.start_time!="undefined"&&(ie=o.clientWidth/this.props.duration,e.style.left="".concat(this.props.start_time*ie,"px"),this.props.end_time-this.props.start_time>this.props.duration?e.style.width="".concat(this.props.duration*ie,"px"):e.style.width="".concat((this.props.end_time-this.props.start_time)*ie,"px")),this.inter=Ze.resize(oe)},this.state={startDef:0,endDef:0},this.inter=null}static getDerivedStateFromProps(d,e){if((d.isClick||d.isClick===0)&&(d.start_time!==e.startDef||d.end_time!==e.endDef)){var o=document.querySelector(".inner"),m=document.querySelector(".outer"),v;return m&&typeof d.start_time!="undefined"&&(v=m.clientWidth/d.duration,o.style.left="".concat(d.start_time*v,"px"),d.end_time-d.start_time>d.duration?o.style.width="".concat(d.duration*v,"px"):o.style.width="".concat((d.end_time-d.start_time)*v,"px")),{startDef:d.start_time,endDef:d.end_time}}return null}componentDidUpdate(d){if(d.duration!==this.props.duration||d.visibleCrop!==this.props.visibleCrop){var e=document.querySelector(".inner"),o=document.querySelector(".outer"),m=document.querySelector(".choice-time"),v=document.querySelector("#increase"),g=document.querySelector("#microTuning"),D=document.querySelector("#reduce"),W=document.querySelector(".crop"),ee={choiceTime:m,increase:v,microTuning:g,reduce:D,crop:W},oe={outer:o,inner:e,together:ee,duration:this.props.duration,cb:this.props.setTimePoint,setCurrentTime:this.props.setCurrentTime,setClick:this.props.setClick,visibleCrop:this.props.visibleCrop};if(d.visibleCrop!==this.props.visibleCrop){var ie;o&&typeof this.props.start_time!="undefined"&&(ie=o.clientWidth/this.props.duration,e.style.left="".concat(this.props.start_time*ie,"px"),this.props.end_time-this.props.start_time>this.props.duration?e.style.width="".concat(this.props.duration*ie,"px"):e.style.width="".concat((this.props.end_time-this.props.start_time)*ie,"px"))}this.inter=Ze.resize(oe)}}render(){var d=this.props,e=d.duration,o=d.activeIndex;return n().createElement("div",{className:"timeScale"},n().createElement("div",{className:"outer"},n().createElement("div",{className:"scale"},n().createElement("span",null,(0,A.Z)(0)),n().createElement("span",null,e?(0,A.Z)(e):(0,A.Z)(0))),n().createElement("div",{className:"inner"},n().createElement("div",{className:"choice-time"},n().createElement("span",{id:"increase"},"<"),n().createElement("span",{id:"microTuning"}),n().createElement("span",{id:"reduce"},">")),typeof o=="undefined"?n().createElement("img",{src:Ke(),className:"crop",onClick:()=>this.handleClick("add"),onMouseDown:m=>{m.stopPropagation()},alt:""}):"")),this.props.children)}}var Ue=(0,j.Z)("translation",{withRef:!0})(Qe),_e=u(20228),Te=u(11382),pt=u(87593),De=u(37636),ze=u(47673),Be=u(4107),ke=Be.Z.TextArea;class Ge extends B.Component{constructor(d){super(d);this.setIndex=e=>{var o=this.state.isScroll;if(!!o){var m=this.state.isEdit;if(!m&&Math.floor(e)!==0){for(var v=0,g=this.state.List,D=0;D<g.length;D++){if(Math.floor(e)>=g[D].start_time&&Math.floor(e)<=g[D].end_time){v=D;break}if(D+1<g.length&&Math.floor(e)>g[D].end_time&&Math.floor(e)<g[D+1].start_time){v=D;break}}var W=document.getElementsByClassName("audioList_content")[0],ee=document.getElementsByClassName("ant-timeline-item")[v];ee&&(W.scrollTop=ee.offsetTop-200>0?ee.offsetTop-200:0,this.setState({activeIndex:v}))}}},this.getStatusText=e=>{var o;switch(e){case"asr_processing":o=this.props.t("indicatorMap.AudioIdentify");break;case"ai_success":o=this.props.t("course.dealSuccess");break;case"ai_failed":o=this.props.t("course.updateFailed");break;default:o=""}return o},this.clearAudioList=()=>{this.setState({List:[],activeIndex:0,isEdit:!1})},this.getAudioText=()=>{this.setState({loading:!0});var e=this.props.resourceId;if(e!==""){var o=N.ZP.LibraryList.getQueryText({resourceId:e});T.WY.get({url:o}).then(m=>{m.data.status==="ai_success"?(clearTimeout(this.timer),this.setState({loading:!1,List:m.data.text_list},()=>{var v=this.props.urlId,g=this.props.courseType,D=N.ZP.LibraryList.getCourseQuery({courseId:v});g!=="single"&&T.WY.get({url:D}).then(W=>{this.props.setResources(W.data.resources)})})):this.setState({status:m.data.status},()=>{clearTimeout(this.timer),this.timer=setTimeout(()=>{this.getAudioText()},2e3)})}).catch(m=>{clearTimeout(this.timer);var v=m.response.data.code;v==="enterpriseapi.404002"&&V.m8.push({pathname:"/knowledgeBase/learningResources/library"})})}},this.handleChange=(e,o)=>{var m=this.state.List;m[e].content=o.target.value,this.setState({List:m})},this.handleEdit=()=>{this.setState({isEdit:!0})},this.handleSave=()=>{this.setState({isEdit:!1},()=>{var e=this.props,o=e.resourceId,m=e.t,v=this.state.List,g=N.ZP.LibraryList.updateAudioText({resourceId:o});T.WY.post({url:g,data:{text_list:[...v]}}).then(D=>{P.default.destroy(),P.default.config({getContainer:()=>document.getElementsByClassName("indicator")[0]}),D.data.result==="true"?P.default.success(m("common.editSuccess")):D.data.result==="false"&&P.default.error(m("common.editFailure")),this.props.getSingleCourseDetail(o)})})},this.getTextList=()=>this.state.List,this.handleSwitchPoint=e=>{this.setState({activeIndex:e});var o=this.state.List;this.props.handleSwitchPoint(o[e].start_time)},this.getTextInstance=e=>{this.text=e},this.getContentInstance=e=>{this.container=e},this.renderItem=()=>{var e=this.state,o=e.List,m=e.isEdit,v=e.activeIndex;return o&&o.map((g,D)=>{var W=v===D?" audioList_content_active":"";return n().createElement(De.Z.Item,{className:"audioList_content_item".concat(W),key:D},n().createElement("div",{className:"audioList_content_item_top"},n().createElement("div",null,(0,A.Z)(g.start_time),"-",(0,A.Z)(g.end_time))),n().createElement("div",{className:"audioList_content_item_info",mode:"left"},m?n().createElement(ke,{ref:this.getTextInstance,value:g.content,onChange:ee=>this.handleChange(D,ee)}):n().createElement("div",{className:"audioList_content_item_info_text",onClick:()=>this.handleSwitchPoint(D)},g.content)))})},this.state={List:[],isEdit:!1,activeIndex:0,loading:!1,status:"",isScroll:!0},this.timer=null}componentDidMount(){var d=document.getElementsByClassName("audioList")[0];d.addEventListener("mouseover",()=>{this.setState({isScroll:!1})}),d.addEventListener("mouseout",()=>{this.setState({isScroll:!0})})}componentDidUpdate(d){d.resourceId!==this.props.resourceId&&this.getAudioText()}componentWillUnmount(){clearTimeout(this.timer)}render(){var d=this.props.t,e=this.state,o=e.isEdit,m=e.loading,v=e.status,g=e.List;return n().createElement(Te.Z,{spinning:m,tip:this.getStatusText(v),wrapperClassName:"indicator_top_listField"},n().createElement("div",{className:"audioList"},n().createElement("div",{className:"audioList_top"},n().createElement("h3",{className:"audioList_top_title"},d("indicatorMap.videoVoice")),n().createElement("div",{className:"audioList_top_btn"},o?n().createElement(c.Z,{type:"link",disabled:g.length<=0,onClick:()=>this.handleSave()},d("common.save")):n().createElement(c.Z,{type:"link",disabled:g.length<=0,onClick:()=>this.handleEdit()},d("common.edit")))),n().createElement(De.Z,{className:"audioList_content",ref:this.getContentInstance},this.renderItem())))}}var Xe=(0,j.Z)("translation",{withRef:!0})(Ge),mt=u(9715),Ve=u(86585);class qe extends n().Component{constructor(){super(...arguments);this.state={tags:this.props.tags||[],inputVisible:!1,inputValue:""},this.handleClose=d=>{var e=this.state.tags.filter(o=>o!==d);this.setState({tags:e}),this.props.handleTags(e)},this.showInput=()=>{var d=this.state.tags;if(d.length>=3){P.default.destroy(),P.default.config({getContainer:()=>document.getElementsByClassName("indicator")[0]}),P.default.info(this.props.t("lecturerPage.tagLimit"));return}this.setState({inputVisible:!0},()=>this.input.focus())},this.handleInputChange=d=>{var e=d.target.value;this.setState({inputValue:e.replace(/,/g,"")})},this.handleInputConfirm=()=>{var d=this.state.inputValue,e=this.state.tags;if(d.trim()===""||d===""){this.setState({inputVisible:!1,inputValue:""}),this.props.handleTags(e);return}d&&e.indexOf(d.trim())===-1?e=[...e,d]:(P.default.destroy(),P.default.config({getContainer:()=>document.getElementsByClassName("indicator")[0]}),P.default.error(this.props.t("lecturerPage.lecturerAddTitleTip"))),this.setState({tags:e,inputVisible:!1,inputValue:""}),this.props.handleTags(e)},this.saveInputRef=d=>this.input=d}componentDidMount(){}render(){var d=this.state,e=d.inputVisible,o=d.inputValue,m=d.tags,v=this.props.t;return n().createElement("div",null,m.map(g=>{var D=g.length>20,W=n().createElement(R.Z,{key:g,closable:!0,onClose:()=>this.handleClose(g)},D?"".concat(g.slice(0,20),"..."):g);return D?n().createElement(z.Z,{title:g,key:g},W):W}),e&&n().createElement(Be.Z,{ref:this.saveInputRef,type:"text",size:"small",maxLength:5,style:{width:150},value:o,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!e&&n().createElement(R.Z,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},n().createElement(Z.Z,null),v("lecturerPage.tag")))}}var Je=(0,j.Z)()(qe);class Fe extends B.Component{constructor(d){super(d);this.handleOk=(0,b.debounce)(()=>{var e=this.state.tags;this.formRef.current.validateFields().then(o=>{e.length!==0&&(o.tags=e,this.setState({visible:!1}),this.props.confirmToSplit(o))})},500),this.handleCancel=()=>{var e=this.props.tags;this.setState({visible:!1,tags:e},()=>{this.props.handleCancleModal()})},this.handleTags=e=>{this.setState({tags:e})},this.state={visible:!1},this.formRef=n().createRef()}static getDerivedStateFromProps(d,e){return d.visible!==e.visible?{visible:d.visible}:null}componentDidUpdate(d){d.visible!==this.props.visible&&this.setState({visible:this.props.visible}),d.tags!==this.props.tags&&this.setState({tags:this.props.tags})}render(){var d=this.props,e=d.activeIndex,o=d.t,m=document.getElementsByClassName("indicator"),v=this.state.tags,g={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},D=typeof e=="number"?"".concat(o("common.edit")).concat(o("indicatorMap.knowledgeSplite")):"".concat(o("common.add")).concat(o("indicatorMap.knowledgeSplite"));return n().createElement(X.Z,{title:D,destroyOnClose:!0,visible:this.state.visible,onOk:this.handleOk,centered:!0,getContainer:m&&m[0],onCancel:this.handleCancel},n().createElement(Ve.Z,{initialValues:{name:this.props.name,tags:this.props.tags},ref:this.formRef},n().createElement(Ve.Z.Item,(0,Y.Z)({label:o("indicatorMap.FragementName"),name:"name"},g,{rules:[{required:!0,message:"".concat(o("validation.pleaseEnter")).concat(o("common.name"))},{whitespace:!0}]}),n().createElement(Be.Z,{maxLength:60})),n().createElement(Ve.Z.Item,(0,Y.Z)({label:n().createElement("div",{className:"pointModal_lable"},n().createElement("span",null,"*"),n().createElement("span",null,o("indicatorMap.pointLabel"))),name:"tags"},g,{validateStatus:"error",help:v&&v.length>0?"":o("indicatorMap.pleaseAddTag")}),n().createElement(Je,{tags:v,handleTags:this.handleTags}))))}}var Me=(0,j.Z)()(Fe),We=u(38642),$e=u(76466);class et extends B.Component{constructor(d){super(d);this.onSetCurrentTime=e=>{this.audio.setIndex(e)},this.onRef=e=>{this.video=e},this.setVisibleCrop=e=>{this.setState({visibleCrop:e})},this.resetTemporaryData=()=>{var e=this.props.duration*.1;this.setState({temporaryData:{start_time:0,end_time:e,name:""}})},this.addHistory=()=>{var e=this.state,o=e.historyList,m=o===void 0?[]:o,v=e.segmentationList,g=JSON.parse(JSON.stringify(m)),D=JSON.parse(JSON.stringify(v));g.length>=10&&g.shift(),g.push(D),this.setState({historyList:g})},this.getCropAble=e=>{var o=this.state.segmentationList,m=o===void 0?[]:o,v;m.length===0?v=0:e>m[m.length-1].end_time?v=m.length:e<m[0]&&m[0].start_time&&(v=0);for(var g=0;g<m.length;g++)m[g].end_time?e>m[g].end_time&&m[g+1]&&e<m[g+1].start_time&&(v=Number(g+1)):v=Number(g);return v},this.handleConfirm=()=>{this.setState({visible:!0})},this.handleCancleModal=()=>{this.setState({visible:!1})},this.savePoint=e=>{var o=this.state.activeIndex,m=this.props,v=m.resourceId,g=m.courseType,D=N.ZP.LibraryList.updatePoint({resourceId:v});T.WY.post({url:D,data:e}).then(W=>{var ee=this.props.urlId,oe=N.ZP.LibraryList.getCourseQuery({courseId:ee});this.getResponseText(o,W),g!=="single"&&T.WY.get({url:oe}).then(ie=>{this.props.setResources(ie.data.resources)})})},this.confirmToSplit=e=>{var o=this.state,m=o.activeIndex,v=o.temporaryData,g=o.segmentationList,D={};if(typeof m=="number")if(Object.prototype.toString.call(e)==="[object Object]")D=(0,x.Z)((0,x.Z)({},g[m]),{},{name:e.name,tags:e.tags});else{var W=this.time.inter.getResult();D=(0,x.Z)((0,x.Z)({},g[m]),{},{start_time:W.start,end_time:W.end})}else typeof m!="number"&&(D=(0,x.Z)((0,x.Z)({},v),{},{name:e.name,tags:e.tags}));this.savePoint(D)},this.getResponseText=(e,o)=>{var m=this.props,v=m.t,g=m.resourceId;P.default.destroy(),P.default.config({getContainer:()=>document.getElementsByClassName("indicator")[0]}),typeof e=="undefined"?o.data.result==="true"?(P.default.success(v("common.addSuccess")),this.props.getSingleCourseDetail(g),this.setState({visible:!1})):o.data.result==="false"&&P.default.error(v("common.addFailure")):typeof e=="number"&&(o.data.result==="true"?(P.default.success(v("common.editSuccess")),this.props.getSingleCourseDetail(g),this.setState({visible:!1})):o.data.result==="false"&&P.default.error(v("common.editFailure")))},this.handleDelete=e=>{var o=this.state.segmentationList,m=o[e].id,v=this.props,g=v.t,D=v.courseType,W=this.props.resourceId,ee=N.ZP.LibraryList.deletePont({resourceId:W,segmentationId:m});T.WY.post({url:ee}).then(oe=>{var ie=this.props.urlId,he=N.ZP.LibraryList.getCourseQuery({courseId:ie});if(D!=="single"&&T.WY.get({url:he}).then(ge=>{this.props.setResources(ge.data.resources)}),P.default.destroy(),P.default.config({getContainer:()=>document.getElementsByClassName("indicator")[0]}),oe.data.result==="true"){P.default.success(g("common.deleteSuccess"));var ve=0;e===o.length-1&&(e===0?ve=void 0:ve=e-1),this.setState({visible:!1,activeIndex:ve}),this.props.getSingleCourseDetail(W)}else oe.data.result==="false"&&P.default.error(g("common.deleteFailure"))})},this.handleSwitchPoint=e=>{this.video.play.seek(e)},this.setActiveIndex=e=>{var o=document.querySelector(".choice-time");o.style.opacity=0;var m=this.state.activeIndex;if(this.tagList){this.tagList.handleDisEdit(m);var v=this.props.t,g=this.tagList.getVideoName();if((g===""||g.trim()==="")&&typeof m=="number"&&m!==e){P.default.destroy(),P.default.config({getContainer:()=>document.getElementsByClassName("indicator")[0]}),P.default.warning(v("indicatorMap.confirmName")),this.tagList.setFocus();return}}this.setState({isClick:!0,activeIndex:e},()=>{var D=this.state.segmentationList,W=D[e];W&&this.video.play.seek(W.start_time)})},this.setTagList=e=>{var o=this.state.activeIndex,m=this.state.segmentationList;m.length===0&&(m=[{tags:[]}]),m[o].tags=e,this.setState({segmentationList:m})},this.setTitle=(e,o)=>{var m=this.state,v=m.segmentationList,g=m.temporaryData;typeof o=="undefined"?(g.name=e,this.setState({temporaryData:g})):(v[o].name=e,this.setState({segmentationList:v}))},this.setTimePoint=e=>{var o=e.start,m=e.end,v=this.state,g=v.activeIndex,D=v.segmentationList,W=v.temporaryData;if(typeof g=="number"){var ee=this.time.inter.getResult(),oe=(0,x.Z)((0,x.Z)({},D[g]),{},{start_time:ee.start,end_time:ee.end});this.savePoint(oe)}else W.start_time=o,W.end_time=m,this.setState({temporaryData:W})},this.setClick=e=>{this.setState({isClick:e})},this.launchFullscreen=()=>{var e=document.fullscreenEnabled||window.fullScreen||document.webkitIsFullScreen||document.msFullscreenEnabled;if(e){var o=document.getElementsByClassName("indicator")[0];o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen?o.msRequestFullscreen():o.webkitRequestFullscreen&&o.webkitRequestFullScreen()}},this.exitFullscreen=()=>{document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},this.save=()=>{if(V.m8.location.query.from==="dingMessage"){(0,We.eJ)({url:"/home"});return}if(V.m8.location.query.from==="messageCenter"){(0,We.eJ)({url:"/messageCenter"});return}if(V.m8.location.query.from==="mycreate"){(0,We.eJ)({url:"/personal/profile?tab=mycreate"});return}V.m8.location.query.courseType==="single"?V.m8.push({pathname:"/knowledgeBase/learningResources/library"}):V.m8.push({pathname:"/knowledgeBase/learningResources/courseManage"})},this.preview=()=>{V.m8.push({pathname:"/training/resourceManage/library/videoPreview",search:k.stringify({id:this.props.resourceId})})},this.getAudioTextInstance=e=>{this.audio=e},this.getEditArea=e=>{this.editArea=e},this.getTimeScaleInstance=e=>{this.time=e},this.getAIListInstance=e=>{this.AIList=e},this.state={isClick:!0,segmentationList:[],historyList:[],activeIndex:void 0,fullScreen:!1,visible:!1,temporaryData:{start_time:0,end_time:20,name:""},visibleCrop:!1}}componentDidMount(){window.addEventListener("fullscreenchange",()=>{var d=this.state.fullScreen;if(document.fullscreenElement){d=!0;var e=document.getElementById("ai-player");e.classList.remove("prism-fullscreen")}else d=!1;this.setState({fullScreen:d},()=>{this.time&&this.time.reset()})})}componentDidUpdate(d){if((0,b.isEqual)(this.props.segmentation_list,d.segmentation_list)||this.setState({segmentationList:this.props.segmentation_list}),d.duration!==this.props.duration){var e=this.props.duration*.1;this.setState({temporaryData:{start_time:0,end_time:e,name:""}})}}render(){var d=this.state,e=d.segmentationList,o=d.activeIndex,m=d.temporaryData,v=d.isClick,g=d.fullScreen,D=d.visibleCrop,W=this.props,ee=W.url,oe=W.snapShortUrl,ie=W.resourceId,he=W.courseList,ve=W.t,ge=W.oprateStatus,Ie=W.urlId,Re=W.courseType,Oe=W.setResources,Ae=W.path,fe=e[o],it=fe&&fe.tags||[],Ye=g?"full_container":"",nt={mode:"preview",watchType:"video",previewWay:"page",resourceInfo:{playerId:"ai-player",source:{FD:ee||"",OD:Ae||""},contentType:"video",showFullScreen:!1},autoPlay:!1,draggable:!0,needCurrentTime:!0};return n().createElement("div",{className:"indicator"},n().createElement("div",{className:"indicator_fullscreen"},g?n().createElement(M.Z,{onClick:this.exitFullscreen}):n().createElement(Q.Z,{onClick:this.launchFullscreen})),n().createElement(Me,{visible:this.state.visible,activeIndex:o,name:fe&&fe.name,tags:it,confirmToSplit:this.confirmToSplit,handleCancleModal:this.handleCancleModal}),n().createElement("div",{className:"indicator_top ".concat(Ye)},he,n().createElement("div",{className:"ai-vide-container"},ee!==""&&n().createElement($e.Z,(0,Y.Z)({},nt,{onRef:this.onRef,onCurrentTime:this.onSetCurrentTime}))),n().createElement("div",{className:"indicator_top_listField"},n().createElement("div",{className:"indicator_top_listField_content"},n().createElement(Xe,{ref:this.getAudioTextInstance,handleSwitchPoint:this.handleSwitchPoint,resourceId:ie,setOprateStatus:()=>this.props.setOprateStatus(),getSingleCourseDetail:this.props.getSingleCourseDetail,urlId:Ie,courseType:Re,setResources:Oe})))),n().createElement("div",{className:"indicator_bottom",ref:this.getEditArea},n().createElement("div",{className:"indicator_bottom_text"},n().createElement("span",null,ve("indicatorMap.originalVideo")),n().createElement("span",null,ve("indicatorMap.knowledgeSplite"))),n().createElement("div",{className:"indicator_bottom_videoList"},n().createElement(Ue,{isClick:e&&e.length&&v,ref:this.getTimeScaleInstance,visibleCrop:D,setTimePoint:this.setTimePoint,confirmToSplit:this.confirmToSplit,handleConfirm:this.handleConfirm,duration:this.props.duration,setClick:this.setClick,activeIndex:o,start_time:fe&&fe.start_time||m.start_time,end_time:fe&&fe.end_time||m.end_time,setCurrentTime:G=>this.video.play.seek(G)},n().createElement("div",{className:"sourcevideo_wrapper origin",onClick:this.checkedOriginVideo},n().createElement("div",{className:"indicator_bottom_videoList_original_img"},n().createElement("img",{src:oe,alt:""})," ",n().createElement("span",null,this.props.name)))),n().createElement("div",{className:"indicator_bottom_videoList_original"},n().createElement(Pe,{isClick:v,visibleCrop:D,setVisibleCrop:this.setVisibleCrop,resetTemporaryData:this.resetTemporaryData,ref:this.getAIListInstance,segmentationList:e,activeIndex:o,setActiveIndex:this.setActiveIndex,handleConfirm:this.handleConfirm,handleDelete:this.handleDelete,oprateStatus:ge,setClick:this.setClick})))),n().createElement("div",{className:"indicator_bottom_button"},n().createElement(c.Z,{onClick:this.preview},this.props.t("component.preview")),n().createElement(c.Z,{onClick:this.save},this.props.t("common.save"))))}}var tt=(0,j.Z)("translation",{withRef:!0})(et);class je extends B.Component{constructor(d){super(d);this.handleSwitchIndex=e=>{this.setState({courseIndex:e},()=>{this.props.setCourseIndex(e)})},this.renderTab=e=>{var o=this.props.courseIndex;return e&&e.map((m,v)=>{var g=o===v?" activeCourse":"",D=m.aiUpgradeStatus==="ai_success"||m.aiUpgradeStatus==="finish"?"":" disabledCourse";return n().createElement("div",{className:"indicator_courses_item".concat(g).concat(D),onClick:()=>this.handleSwitchIndex(v),key:v},n().createElement("img",{src:m.cover,alt:""}),n().createElement("div",{className:"indicator_courses_item_right"},n().createElement("span",null,m.actualName),n().createElement("span",null,this.getStatusText(m.aiUpgradeStatus))))})},this.getStatusText=e=>{var o;switch(e){case"not":o=this.props.t("course.notUpdate");break;case"ai_processing":o=this.props.t("course.updating");break;case"ai_success":o=this.props.t("course.dealSuccess");break;case"ai_failed":o=this.props.t("course.updateFailed");break;case"finish":o=this.props.t("course.alreadyUpdate");break;default:o=""}return o},this.state={courseIndex:d.courseIndex}}static getDerivedStateFromProps(d,e){return d.courseIndex!==e.courseIndex?{courseIndex:d.courseIndex}:null}render(){var d=this.props.resources;return n().createElement("div",{className:"indicator_courses"},this.renderTab(d))}}var rt=(0,j.Z)()(je);class at extends B.Component{constructor(d){super(d);this.setResources=e=>{this.setState({resources:e})},this.getSingleCourseDetail=e=>{var o=N.ZP.LibraryList.getAIUpgrade({resourceId:e});T.WY.get({url:o}).then(m=>{this.setState({url:m.data.resource.url,path:m.data.resource.path,segmentation_list:m.data.segmentation_list,snapShortUrl:m.data.resource.cover,duration:m.data.resource.duration,name:m.data.resource.actualName,oprateStatus:m.data.status})})},this.setOprateStatus=()=>{this.setState({oprateStatus:"cut_processing"})},this.setCourseIndex=e=>{var o=this.state.resources;this.setState({courseIndex:e,resourceId:o[e].id},()=>{this.Indicator.audio.getAudioText(),this.Indicator.audio.clearAudioList(),this.Indicator.setActiveIndex(),this.Indicator.setVisibleCrop(),this.getSingleCourseDetail(o[e].id)})},this.getIndicator=e=>{this.Indicator=e},this.state={url:"",segmentation_list:[],courseIndex:0,resourceId:"",oprateStatus:""}}componentDidMount(){var d=k.parse(this.props.history.location.search),e=d.id,o=d.courseType;if(o==="single")this.getSingleCourseDetail(e),this.setState({resourceId:e});else{var m=N.ZP.LibraryList.getCourseQuery({courseId:e});T.WY.get({url:m}).then(v=>{this.setState({resources:v.data.resources,resourceId:v.data.resource_id}),this.getSingleCourseDetail(v.data.resource_id)}).catch(v=>{var g=v.response.data.code;g==="enterpriseapi.404002"&&V.m8.push({pathname:"/knowledgeBase/learningResources/courseManage"})})}}render(){var d=this.props.t,e=k.parse(this.props.history.location.search),o=e.id,m=e.courseType,v=this.state,g=v.courseIndex,D=v.resources,W=v.segmentation_list,ee=v.url,oe=v.duration,ie=v.snapShortUrl,he=v.name,ve=v.resourceId,ge=v.oprateStatus,Ie=v.path;return n().createElement("div",{className:"indicator_map"},n().createElement(L.Z,{title:d("course.AIUpdate")}),n().createElement("div",{className:"indicator__container"},n().createElement(tt,{ref:this.getIndicator,segmentation_list:W,url:ee,resourceId:ve,snapShortUrl:ie,duration:oe,name:he,path:Ie,urlId:o,courseType:m,setResources:this.setResources,resources:D,oprateStatus:ge,setOprateStatus:this.setOprateStatus,getSingleCourseDetail:this.getSingleCourseDetail,courseList:D&&D.length>1?n().createElement(rt,{courseIndex:g,resources:D,setCourseIndex:this.setCourseIndex}):""})))}}var st=(0,j.Z)("translation",{withRef:!0})(at)},64456:function(ue,ae,u){"use strict";u.d(ae,{Z:function(){return B}});var B=function(j){var k=0,V=0,T=0;return k=Math.floor(j/3600)%24,V=Math.floor(j/60)%60,T=Math.floor(j%60),k=k>9?k:"0".concat(k),V=V>9?V:"0".concat(V),T=T>9?T:"0".concat(T),"".concat(k,":").concat(V,":").concat(T)}},9849:function(ue,ae,u){"use strict";u.d(ae,{Ej:function(){return V},kL:function(){return T},T:function(){return N},NU:function(){return L},FL:function(){return O},fn:function(){return c},bm:function(){return Y},jY:function(){return H},Vs:function(){return P},li:function(){return x},Nl:function(){return b},YF:function(){return M},Q6:function(){return Q},zW:function(){return w},Zv:function(){return z},Qg:function(){return K},qc:function(){return R},Ve:function(){return X},rS:function(){return ne},Rh:function(){return J}});var B=u(10237),n=u(37055),j=u(38642),k={zaraFlag:(0,j.UI)("ZARA_H5")};function V(Z,A){var re=n.ZP.StudyProjectList.startStudy(Z);return B.WY.post({url:re,data:A})}function T(Z){var A=n.ZP.Common.enroll(Z);return B.WY.post({url:A})}function N(Z,A){var re=Z.courseId,Pe=n.ZP.StudyProjectList.studyProject(re);return B.WY.get({url:Pe,params:A})}function L(Z){var A=Z.id,re=k.zaraFlag?n.m1.getAssessmentProjectInfo(A):n.m1.getProjectInfo(A);return B.WY.get({url:re})}function O(Z){var A=Z.courseId,re=n.ZP.EnterpriseCourse.addScanCount(A);return B.WY.post({url:re})}function c(){var Z=n.ZP.StudyProjectList.getAccountInfo();return B.WY.get({url:Z})}function Y(Z){var A=n.ZP.StudyProjectList.projectCertiUrl(Z);return B.WY.get({url:A})}function H(Z){var A=Z.courseId,re=n.ZP.Courses.like(A);return B.WY.post({url:re})}function P(Z){var A=n.ZP.EnterpriseCourse.addCommentAndScore();return B.qg.post({url:A,data:Z})}function x(Z){var A=n.ZP.EnterpriseCourse.getCourseComments();return B.WY.get({url:A,params:Z})}function b(Z){var A=n.ZP.EnterpriseCourse.addCommentAndScore();return B.qg.post({url:A,data:Z})}function M(Z){var A=n.ZP.EnterpriseCourse.deleteComment();return B.qg.post({url:A,data:Z})}function Q(Z,A){var re=n.ZP.StudyProjectList.projectStudyRecord(Z);return B.WY.get({url:re,params:A})}function w(Z){var A=n.ZP.DingSpaceId.getSpaceId();return B.WY.get({url:A,params:Z})}function z(Z,A){var re=n.ZP.PlatformCourse.learningUrl(Z);return B.WY.get({url:re,params:A})}function K(Z){var A=n.ZP.MyExamTask.examIntro({examId:Z});return B.WY.get({url:A})}function R(Z){var A=n.ZP.MyExamTask.examCheckStatus({examId:Z});return B.WY.get({url:A})}function se(Z,A){var re=CONFIG.Common.getOperateLog(Z);return formDataRequest.get({url:re,params:A})}function X(Z,A){var re=k.zaraFlag?n.ZP.StudyProjectList.changeCustomStatus(Z):n.ZP.StudyProjectList.changeStatus(Z);return B.WY.post({url:re,data:A})}function ne(Z){var A=n.ZP.StudyProjectList.getProjectReward(Z);return B.WY.get({url:A})}function J(Z){var A=n.ZP.subsidyGz.subsidyCourseSetting(Z);return B.WY.get({url:A})}},91648:function(ue,ae,u){"use strict";u.d(ae,{Z:function(){return B}});function B(n,j){var k,V,T,N,k;if(V="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),k=[],T=void 0,j=j||V.length,n)for(T=0;T<n;)k[T]=V[0|Math.random()*j],T++;else for(N=void 0,k[8]=k[13]=k[18]=k[23]="-",k[14]="4",T=0;T<36;)k[T]||(N=0|Math.random()*16,k[T]=V[T===19?N&3|8:N]),T++;return k.join("")}},69164:function(ue,ae,u){"use strict";var B=u(34792),n=u(48086);function j(k){k&&k.length>0&&n.default.success(k)}ae.Z=j},4412:function(ue){ue.exports="data:image/png;base64,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"},73250:function(ue){ue.exports="data:image/png;base64,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"}}]);
