(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[5575],{30389:function(ee,z,e){"use strict";e.d(z,{Z:function(){return L}});var V=e(62029),W=e(20228),O=e(11382),g=e(12924),l=e.n(g),m=e(91768),K=e(80991),p={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},B=e(62615),S=e(52670);class N extends l().Component{render(){var s=this.props,t=s.values,r=s.mode,o=s.onlyChooseDept,a=s.reserveUser,v=s.t,d=s.orgProps,y=s.rangeAuth,E=s.projectId,$=s.onCancel,w=s.onlyCreateUser;return l().createElement(K.l0,{className:"cl-form"},l().createElement(K.gN,(0,V.Z)({component:B.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:v("common.visibleRange"),defaultFieldList:t.employeeRange,validate:S.FI,mode:r,rangeAuth:y,onlyChooseDept:o,onlyCreateUser:w,orgProps:d,reserveUser:a,projectId:E,onCancel:$,qwTicketShow:!0},p)))}}var k=(0,m.Z)()(N),U=e(18329),G=e(34773);class j extends l().Component{constructor(){super(...arguments);this.initRefFormik=s=>{this.refFormik=s},this.handleBeforeCreate=()=>{var s=this.refFormik;s.submitForm(),s.runValidations().then(t=>{if(!Object.keys(t).length){var r=s.state.values.employeeRange,o=(0,G.b)(r.rangeList),a={qyWeChatVo:r.qyWeChatVo,id:this.props.actionId,isAll:r.rangeType,groupIds:r.rangeType===2?o.groupIds.join(","):"",departmentIds:r.rangeType===2?o.deptIds.join(","):"",userIds:r.rangeType===2?o.userIds.join(","):"",postIds:r.rangeType===2?o.postIds.join(","):"",clusterIds:r.rangeType===2?o.clusterIds.join(","):"",qy_we_chat_vo:r.qyWeChatVo};this.props.onCreate(a)}})},this.handleBeforeCancel=()=>{var s=this.props.onCancel;s()}}render(){var s=this.props,t=s.visible,r=s.initialParams,o=s.isLoading,a=s.tipInfo,v=s.mode,d=s.onlyChooseDept,y=s.reserveUser,E=y===void 0?[]:y,$=s.t,w=s.title,P=s.orgProps,f=s.rangeAuth,I=s.projectId,D=s.onCancel,Q=s.onlyCreateUser,M=s.size;return o?l().createElement(O.Z,{size:"large"}):l().createElement(U.ZP,{wrapClassName:"cl-employee-selector-modal",visible:t,title:w||$("component.changeUser"),okText:$("common.ok"),cancelText:$("common.cancel"),size:M,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},o?l().createElement(O.Z,{size:"large"}):l().createElement(K.J9,{ref:this.initRefFormik,initialValues:r,render:x=>l().createElement(k,(0,V.Z)({},x,{mode:v,rangeAuth:f,orgProps:P,onlyChooseDept:d,onlyCreateUser:Q,reserveUser:E,projectId:I,onCancel:D}))}),a&&l().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},a))}}j.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var L=(0,m.Z)()(j)},63848:function(ee,z,e){"use strict";var V=e(36877),W=e(32969),O=e(12924),g=e.n(O),l=e(91768),m=e(56130);class K extends g().PureComponent{constructor(){super(...arguments);this.onChange=(B,S)=>{this.props.onChange(B,S)}}render(){var B=this.props,S=B.value,N=B.classify,k=B.showLabel,U=B.className,G=B.t,j=B.style;return g().createElement("div",{className:"classify-cascader ".concat(U)},k?g().createElement("span",{className:"classify-cascader-label"},G("component.selectClassifyLabel")):null,g().createElement(W.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(U),options:N,onChange:this.onChange,placeholder:G("component.selectClassifyLabel"),value:S,style:j,loadData:this.props.loadData}))}}K.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},z.Z=(0,m.Z)((0,l.Z)()(K))},51697:function(ee,z,e){"use strict";var V=e(22385),W=e(31097),O=e(33565),g=e(12924),l=e.n(g),m=e(28216),K=e(84874),p=S=>{var N=S.title,k=S.visible,U=S.placement,G=U===void 0?"top":U,j=S.children,L=j===void 0?null:j,F=S.isNewUser,s=F===void 0?"":F,t=S.closeGuide,r=S.guideStatus,o=(0,g.useState)(!1),a=(0,O.Z)(o,2),v=a[0],d=a[1],y=w=>l().createElement("div",{className:"guide-tooltip-title"},w,l().createElement("span",{onClick:E},l().createElement(K.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,g.useEffect)(()=>{d(k)},[k]);var E=w=>{if(w.stopPropagation(),w.preventDefault(),d(!1),t){t();return}s==="true"&&S.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),$()},$=()=>{localStorage.setItem("guideStatus","false"),S.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return l().createElement(W.Z,{title:y(N),placement:G,visible:v&&r==="true"&&N},L)},B=S=>({guideStatus:S.advancedSetting.guideStatus,isNewUser:S.advancedSetting.isNewUser});z.Z=(0,m.$j)(B)(p)},54792:function(ee,z,e){"use strict";var V=e(62029),W=e(63185),O=e(9676),g=e(47673),l=e(4107),m=e(88986),K=e(12924),p=e.n(K),B=e(91768),S=e(59239),N=e(55446),k=e.n(N),U=e(18329),G=e(2396);class j extends p().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var s=this.props,t=s.form,r=s.id,o=s.onCreate,a=this.state.isChecked;t.validateFields((v,d)=>{if(!v){var y=(0,m.Z)({},d);a||(y.value=0);var E=(0,m.Z)((0,m.Z)({},y),{},{id:r});o(E),setTimeout(()=>{t.resetFields()},100)}})},this.handleBeforeCancel=()=>{var s=this.props,t=s.form,r=s.onCancel;r(),setTimeout(()=>{t.resetFields()},100)},this.checkScore=(s,t,r)=>{var o=this.props.t,a=this.state.isChecked;if(a&&(0,G.kh)(t)){r(o("component.setScoreRuleTip"));return}r()},this.handleCheckChange=s=>{this.setState({isChecked:s.target.checked})},this.renderItem=()=>{var s=this.props,t=s.form,r=s.initialValue,o=s.labelTxt,a=this.state.isChecked,v=t.getFieldDecorator,d={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},y=a?v("value",{initialValue:r,rules:[{validator:this.checkScore}]})(p().createElement(l.Z,{maxLength:30,placeholder:""})):null,E=p().createElement(p().Fragment,null,p().createElement(O.Z,{checked:a,onChange:this.handleCheckChange},o));return p().createElement(S.Z.Item,(0,V.Z)({label:E},d),y)}}componentDidUpdate(s){this.props.visible&&this.props.visible!==s.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var s=this.props,t=s.visible,r=s.title,o=s.prefixCls;return p().createElement(U.ZP,{size:"small",visible:t,title:r,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},p().createElement(S.Z,{className:"".concat(o),layout:"horizontal",colon:!1},this.renderItem(),p().createElement("div",{className:"".concat(o,"__children")},this.props.children)))}}j.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var L=S.Z.create({name:"ClSetupBoxInModal"})(j);z.Z=(0,B.Z)()(L)},11449:function(ee,z,e){"use strict";e.d(z,{Z:function(){return w}});var V=e(88986),W=e(33565),O=e(12924),g=e.n(O),l=e(3115),m=e(49111),K=e(19650),p=e(62029),B=e(57663),S=e(71577),N=e(91768),k=e(28216),U=e(37055),G=e(10237);function j(P){var f=U.ZP.getHelpContentByMenuKey(),I={key:P};return G.WY.get({url:f,params:I})}var L=e(74228),F=e.n(L),s=e(1164),t=e(76466),r=e(38642);class o extends g().Component{constructor(f){var I;super(f);I=this,this.getHelpContentByMenuKey=()=>{var D=this.props.defaultMenuKey;j(D).then(Q=>{var M=Q.data,x=M.help_url,c=M.video_url;this.setState({videoUrl:c,helpUrl:x})})},this.handleOpenHelpUrl=D=>{if((0,r.ve)()){window.open(D,"_blank");return}s.Z.targetTo({path:D,isExternalLink:!0})},this.handleOpenVideo=function(D){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:I.props.t("helpCenter.video");I.setState(M=>({resourcePlayInfo:(0,V.Z)((0,V.Z)({},M.resourcePlayInfo),{},{resourceInfo:{originUrl:D,source:{FD:D,OD:D},contentType:"mp4"}}),previewInfo:(0,V.Z)((0,V.Z)({},M.previewInfo),{},{title:Q,visible:!0,onCancel:I.handleCancelPreview})}))},this.handleCancelPreview=()=>{var D=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,V.Z)((0,V.Z)({},D),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:f.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var f=this.state,I=f.helpUrl,D=f.resourcePlayInfo,Q=f.previewInfo,M=f.videoUrl,x=this.props.t;return g().createElement("div",{className:F().helpCenter},M&&g().createElement(S.Z,{type:"link",className:F()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(M)},x("helpCenter.video")),I&&g().createElement(S.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(I)},x("helpCenter.tutorial")),g().createElement(t.Z,(0,p.Z)({},D,{previewInfo:Q})))}}var a=P=>({defaultMenuKey:P.currentRoute.menuKey});o.defaultProps={defaultMenuKey:""};var v=(0,k.$j)(a)((0,N.Z)()(o));function d(P){var f=P.extra,I=localStorage.getItem("dingPersonnel"),D=sessionStorage.getItem("dingPersonnel");return g().createElement(K.Z,null,f,I!=="dingPersonnel"&&D!=="dingPersonnel"&&(0,r.eY)("COMMONEXTRA_HELP_CENTER")&&g().createElement(v,null))}var y=d,E=e(4408);function $(P){var f=(0,O.useState)({helpCenter:(0,r.eY)("HEAD_HELP_CENTER_BUT")}),I=(0,W.Z)(f,1),D=I[0],Q=P.pageContainerParams,M=Q===void 0?{}:Q,x=P.noPadding,c=x===void 0?!1:x,i=P.isPersonal,C=i===void 0?!1:i,T=P.pageTitle,H=P.className,X=H===void 0?"":H,n={extra:D.helpCenter?g().createElement(y,{extra:M.extra}):M.extra},u=(0,V.Z)((0,V.Z)({},M),n);return g().createElement("div",{className:"page-container-content ".concat(c?"page-container-noPadding":""," ").concat(C?"page-container-content_personal_background":""," ").concat(X)},T&&g().createElement(E.Z,{title:T}),C?g().createElement(l.Z,null,P.children):g().createElement(l.Z,u,P.children))}var w=$},72456:function(ee,z,e){"use strict";var V=e(49111),W=e(19650),O=e(57663),g=e(71577),l=e(12924),m=e.n(l),K=e(28216),p=e(91768),B=e(84391),S=e(90631),N=e(49101),k=e(76651),U=e(31945),G=e(1164),j=e(51697),L=s=>{var t=s.user,r=s.currentRoute,o=s.advancedSetting;return{currentPath:r.path,allAuthRoutes:r.allAuthRoutes,userLng:t.lng,themeColor:o.themeColor,qyShield:t.qyShield}};class F extends m().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var t=this.props.tabLink;k.m8.push(t)},this.renderActionBtn=()=>{var t=this.props,r=t.prefixCls,o=t.actionText,a=t.t,v=t.tabLink,d=t.showBtn,y=t.renderActionBtn,E=t.newPage,$=t.popOverProps,w=$===void 0?[]:$,P=t.renderGuide,f=P===void 0?!1:P,I=t.showDownloadBtn,D=I===void 0?!1:I,Q=t.showImportBtn,M=Q===void 0?!1:Q,x=t.showCreateBtn,c=x===void 0?!0:x,i=t.rowReverse,C=i===void 0?!1:i,T="".concat(r,"__action");if(!d&&y&&typeof y=="function")return m().createElement("div",{className:T},y());if(!d||!o)return null;var H=w.length?w[0].contentText:"";return m().createElement("div",{className:"".concat(T," ").concat(C&&"row-reverse")},m().createElement(W.Z,{size:16},D&&m().createElement(g.Z,{icon:m().createElement(B.Z,null),onClick:this.handleDownload},a("common.exportData")),M&&m().createElement(g.Z,{icon:m().createElement(S.Z,null),onClick:this.handleImport},a("exam.importTemplate")),c&&E&&m().createElement(G.Z,{to:v},m().createElement(j.Z,{visible:H&&f,placement:"topLeft",title:H},m().createElement(g.Z,{type:"primary",id:"create-project-button",icon:m().createElement(N.Z,null)},o))),c&&!E&&m().createElement(g.Z,{type:"primary",id:"create-project-button",icon:m().createElement(N.Z,null),onClick:this.handleCreate},o)))},this.renderQueryRow=()=>{var t=this.props,r=t.queryRowParams,o=t.queryRowList,a=t.queryRowSelectedCourseIds,v=t.queryRowSelectedProjectIds,d=t.queryRowOnForceRender,y=t.queryRowOnClassifyChange,E=t.queryRowOnTypeChange,$=t.queryRowOnCourseTypeChange,w=t.queryRowAllowActions,P=t.showNum,f=P===void 0?1:P;return m().createElement(U.Z,{params:r,list:o,selectedCourseIds:a,selectedProjectIds:v,onForceRender:d,onClassifyChange:y,onTypeChange:E,onCourseTypeChange:$,allowActions:w,showNum:f,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var t=this.props,r=t.t,o=t.extraBtnSelectedRowKeys,a=t.extraBtnHandleMultiVisibleRange;return m().createElement(g.Z,{disabled:o.length===0,onClick:a},r("courseManage.setTheVisibility"))}}render(){var t=this.props,r=t.prefixCls,o=t.wrapCls,a=t.showRenderQueryRow,v=t.showRendeExtraBtn;return m().createElement(m().Fragment,null,m().createElement("div",{className:"render_other"},m().createElement("header",{className:"".concat(r," ").concat(o)},m().createElement("section",{className:"".concat(r,"__radiocol")},this.renderActionBtn(),a&&this.renderQueryRow(),v&&this.rendeExtraBtn()))))}}F.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},z.Z=(0,K.$j)(L)((0,p.Z)()(F))},62117:function(ee,z,e){"use strict";var V=e(63185),W=e(9676),O=e(43358),g=e(34041),l=e(88983),m=e(47933),K=e(12924),p=e.n(K),B=e(28216),S=e(91768),N=e(48479),k=e(2971),U=e(45601),G=e(7249),j=F=>{var s=F.user,t=F.currentRoute,r=F.advancedSetting;return{currentPath:t.path,allAuthRoutes:t.allAuthRoutes,userLng:s.lng,themeColor:r.themeColor,appType:s.appType,appId:s.appId}};class L extends p().Component{constructor(s){super(s);this.setPlaceholder=()=>{var t=this.props,r=t.currentPath,o=t.allAuthRoutes,a=t.userLng,v=this.state.language,d=o[r],y=this.props,E=y.appType,$=y.appId,w=localStorage.getItem("qyWechatBook"),P=E==="wx_app"&&w==="true"&&$==="9005";if(!!d){var f=v[a].searchInputPlaceholder,I="";d.menuKey==="studyTemplate"||d.menuKey==="examTemplate"?I=f.template:d.menuKey==="employee"||d.menuKey==="obligatory"||d.menuKey==="elective"||d.menuKey==="plan"||d.menuKey==="evaluation"||d.menuKey==="myEvaluationPlan"?I=f.task:d.menuKey==="studyProject"?I=P?f.byProjectName:f.byProjectNameOrCreator:d.menuKey==="management"?I=P?f.byTaskName:f.byTaskNameOrCreator:I=f[d.menuKey],this.setState({currentPlaceholder:I})}},this.handleRadiosChange=t=>{this.props.onRadiosChange(t.target.value)},this.handleSelectChange=t=>{this.props.onSelectChange(t)},this.handleSearch=(t,r)=>{this.props.onSearch(t,r)},this.handleChange=t=>{this.props.onCheckboxChange(t.target.checked)},this.renderRadios=()=>{var t=this.props,r=t.prefixCls,o=t.radioList,a=t.defaultRadioValue,v=t.radioValue;if(!o.length)return null;var d=a||o[0].value,y="".concat(r,"__radios");return p().createElement("div",{className:y},typeof v!="undefined"?p().createElement(m.ZP.Group,{defaultValue:d,value:v,onChange:this.handleRadiosChange},o.map(E=>p().createElement(m.ZP.Button,{key:E.value,value:E.value},E.name))):p().createElement(m.ZP.Group,{defaultValue:d,onChange:this.handleRadiosChange},o.map(E=>p().createElement(m.ZP.Button,{key:E.value,value:E.value},E.name))))},this.renderSelect=()=>{var t=this.props,r=t.prefixCls,o=t.selectList,a=t.defaultSelectValue;if(!o.length)return null;var v=a||o[0].value,d="".concat(r,"__select");return p().createElement("div",{className:d},p().createElement(g.Z,{defaultValue:v,onChange:this.handleSelectChange,style:{minWidth:100}},o.map(y=>p().createElement(g.Z.Option,{key:y.value,value:y.value},y.name))))},this.renderOther=()=>{var t=this.props,r=t.prefixCls,o=t.renderOther,a=t.showOther,v="".concat(r,"__other");if(a&&o&&typeof o=="function")return p().createElement("div",{className:v},o())},this.renderCheckbox=()=>{var t=this.props,r=t.prefixCls,o=t.t,a=t.label,v=t.showCheckbox,d=t.renderActionSelect,y="".concat(r,"__checkbox");return!v&&d&&typeof d=="function"?p().createElement("div",{className:y},d()):v?p().createElement("div",{className:y},p().createElement(W.Z,{onChange:this.handleChange},a||o("common.myCreated"))):null},this.renderSearch=()=>{var t=this.props,r=t.prefixCls,o=t.showSearch,a=t.inputPlaceholder,v=t.maxLength,d=v===void 0?400:v,y=t.value,E="".concat(r,"__search");if(!o)return null;var $=this.state.currentPlaceholder;return a?p().createElement("div",{className:E},p().createElement(N.Z,{onSearch:this.handleSearch,placeholder:a,width:272,maxLength:d})):p().createElement("div",{className:E},p().createElement(N.Z,{onSearch:this.handleSearch,placeholder:$,width:272,maxLength:d,value:y}))},this.renderSearchOther=()=>{var t=this.props.renderSearchOther;return t?t():null},this.state={language:{zh_cn:U.Z,en_us:k.Z,zh_hk:G.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(s){s.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var s=this.props,t=s.prefixCls,r=s.wrapCls,o=s.showRenderRadios,a=o===void 0?!0:o,v=s.showRenderSelect;return p().createElement(p().Fragment,null,p().createElement("div",{className:"render_other"},this.renderOther(),p().createElement("header",{className:"".concat(t," ").concat(r)},p().createElement("section",{className:"".concat(t,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),a&&this.renderRadios(),v&&this.renderSelect(),this.renderSearch()))))}}L.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},z.Z=(0,B.$j)(j)((0,S.Z)()(L))},41397:function(ee,z,e){"use strict";e.r(z),e.d(z,{default:function(){return M}});var V=e(34792),W=e(48086),O=e(88986),g=e(12924),l=e.n(g),m=e(91768),K=e(28216),p=e(72456),B=e(62117),S=e(77576),N=e(59314),k=e(30887),U=e(99210),G=e(22385),j=e(31097),L=e(59250),F=e(13013),s=e(71194),t=e(57016),r=e(57119),o=e(57254),a=e(1164),v=e(37055),d=e(6793),y=e(36202);class E extends l().Component{constructor(c){super(c);this.onDelete=i=>{var C=i.record;t.Z.confirm({title:this.props.t("common.tip"),icon:l().createElement(r.Z,null),content:this.props.t("libraryPractice.deletePracticeTip"),onOk:()=>{this.props.onDelete(C.id)}})},this.handleTableChange=i=>{this.props.onTableChange(i)},this.handleChange=i=>{var C=i.isChecked,T=i.record,H=i.type;this.props.onRowChange({isChecked:C,record:T,type:H})},this.renderActions=i=>{var C=i.record;return l().createElement("div",{className:"cl-table__cell-action"},l().createElement(a.Z,{to:"/training/examination/practice/monitor?id=".concat(C.id)},l().createElement("span",{className:"cl-pointer"},this.props.t("common.monitor"))),l().createElement("span",{className:"cl-pointer-divide"}),l().createElement(F.Z,{overlay:this.renderActionMenu({record:C})},l().createElement("span",{className:"cl-pointer"},this.props.t("common.more")," ",l().createElement(o.Z,null))))},this.renderActionMenu=i=>{var C=i.record,T=this.props.showRenderDeleteBtn;return l().createElement(U.Z,null,l().createElement(U.Z.Item,{key:"1",disabled:C.status==="enable"},C.status==="enable"?l().createElement(j.Z,{title:this.props.t("lecturerPage.editTip")},l().createElement("p",{className:"cl-dropdown-menuitem"},this.props.t("common.edit"))):l().createElement("p",{className:"cl-dropdown-menuitem",onClick:()=>a.Z.targetTo({path:"/training/examination/practice/detail?id=".concat(C.id)})},this.props.t("common.edit"))),T&&l().createElement(U.Z.Item,{key:"2"},l().createElement("p",{className:"cl-dropdown-menuitem",onClick:()=>this.onDelete({record:C})},this.props.t("common.delete"))))},this.columns=[{title:this.props.t("libraryPractice.practiceName"),dataIndex:"title",key:"title"},{title:this.props.t("libraryPractice.count"),dataIndex:"question_count",key:"question_count",width:88},{title:this.props.t("libraryPractice.joinedUserCount"),dataIndex:"participate_user_count",key:"participate_user_count",width:150},{title:this.props.t("common.creator"),dataIndex:"create_user_name",key:"create_user_name",width:106},{title:this.props.t("common.createTime"),dataIndex:"create_time",key:"create_time",render:(i,C)=>{var T=C.create_time;return(0,d.p6)(T)},width:164},{title:this.props.t("common.status"),dataIndex:"status",key:"status",width:90,render:(i,C)=>l().createElement("span",{className:"update_status"},l().createElement(N.Z,{checkedChildren:this.props.t("common.activated"),unCheckedChildren:this.props.t("common.deactivatedStr"),checked:C.status==="enable",onChange:T=>this.handleChange({isChecked:T,record:C,type:"update_status"})}))},{title:this.props.t("announcement.topped"),dataIndex:"top_flag",key:"top_flag",width:90,render:(i,C)=>l().createElement("span",{className:"topped"},l().createElement(N.Z,{checked:+C.top_flag==1,onChange:T=>this.handleChange({isChecked:T,record:C,type:"update_top"})}))},{title:this.props.t("common.operate"),width:115,key:"operate",render:i=>this.renderActions({record:i})}]}render(){var c=this.props,i=c.prefixCls,C=c.list,T=C===void 0?[]:C,H=c.loading,X=c.paginationParams,n=X===void 0?{}:X,u=c.headerTitle,h=c.toolBarRender,Z=(0,O.Z)((0,O.Z)({},v.XE.INITIAL_PAGINATION),n);return l().createElement("section",{className:i},l().createElement(y.f,{columns:this.columns,rowKey:"id",dataSource:T,pagination:Z,loading:H,onChange:this.handleTableChange,headerTitle:u,toolBarRender:h,tableUUID:"cc502b5e-d529-472e-9cca-a0fea6324b58"}))}}E.defaultProps={prefixCls:"practice-list__content__table"};var $=(0,m.Z)()(E),w=e(10237),P=e(11449),f=e(86726),I=x=>({userInfo:x.user}),D={getTableList:v.ZP.QuestionBankPractice.getTableList,updatePracticeStatus:v.ZP.QuestionBankPractice.updatePracticeStatus,updatePracticeTop:v.ZP.QuestionBankPractice.updatePracticeTop,deletePractice:v.ZP.QuestionBankPractice.deletePractice};class Q extends l().Component{constructor(){super(...arguments);this.state={allowActions:(0,f.V9)("practice",this.props.userInfo.modules),params:{keyword:"",page_number:1,page_size:20,status:"all",only_see_me:!1},radioList:[{name:this.props.t("common.all"),value:"all"},{name:this.props.t("common.activated"),value:"enable"},{name:this.props.t("common.deactivated"),value:"not_enable"}],tableLoading:!0,tableList:[],tableTotal:0},this.initTableList=()=>{this.setState({tableLoading:!0}),w.WY.get({url:D.getTableList(),params:this.state.params}).then(c=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:c.data.list,tableTotal:c.data.total})},300)})},this.handleQueryRowRadiosChange=c=>{this.resetPagination().then(()=>{this.setState(i=>({params:(0,O.Z)((0,O.Z)({},i.params),{},{status:c})}),()=>{this.initTableList()})})},this.handleQueryRowSearch=c=>{this.resetPagination().then(()=>{this.setState(i=>({params:(0,O.Z)((0,O.Z)({},i.params),{},{keyword:c})}),()=>{this.initTableList()})})},this.handleChangePagination=c=>{var i=c.current,C=c.pageSize;this.setState(T=>({params:(0,O.Z)((0,O.Z)({},T.params),{},{page_number:i,page_size:C})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(c=>{this.setState(i=>({params:(0,O.Z)((0,O.Z)({},i.params),{},{page_number:1,page_size:20})}),()=>{c()})}),this.handleRowChange=c=>{var i=c.isChecked,C=c.record,T=c.type;T==="update_status"?w.WY.post({url:D.updatePracticeStatus(C.id),data:{status:i?"enable":"not_enable"}}).then(H=>{H.data.status==="true"&&W.default.success(this.props.t("study.updateSuccess")),this.initTableList()}):T==="update_top"&&w.WY.post({url:D.updatePracticeTop(C.id),data:{status:i?"on":"off"}}).then(H=>{H.data.code===200&&W.default.success(this.props.t("study.updateSuccess")),this.initTableList()})},this.handleRowDelete=c=>{w.WY.post({url:D.deletePractice(c)}).then(i=>{var C=i.data,T=C.code,H=C.msg;T===200?W.default.success(this.props.t("personal.removeSuccess")):W.default.warning(H),this.initTableList()})},this.handleChangeOnlySeeMe=c=>{var i=this.state.params,C=c;this.setState({params:(0,O.Z)((0,O.Z)({},i),{},{page_number:1,only_see_me:C})},()=>{this.initTableList()})},this.renderLeftRow=()=>{var c=this.state.allowActions;return l().createElement(p.Z,{actionText:this.props.t("libraryPractice.newPractice"),showBtn:(0,f.H3)("add",c),tabLink:"/training/examination/practice/detail"})},this.renderRightRow=()=>{var c=this.state.radioList;return l().createElement(B.Z,{showCheckbox:!0,onCheckboxChange:this.handleChangeOnlySeeMe,radioList:c,onRadiosChange:this.handleQueryRowRadiosChange,onSearch:this.handleQueryRowSearch})}}componentDidMount(){this.initTableList()}render(){var c=this.props.t,i=this.state,C=i.tableTotal,T=i.tableList,H=i.tableLoading,X=i.params,n=i.allowActions,u={total:C,current:X.page_number,pageSize:X.page_size};return l().createElement(P.Z,{pageContainerParams:{header:{title:c("leftMenuLists.practiceTest")}},pageTitle:c("exam.itemBankDetailTitle")},l().createElement("div",{className:"practice-list sticky-table"},l().createElement("div",{className:"practice-list__content",ref:h=>{this.tableRef=h}},l().createElement($,{loading:H,paginationParams:u,list:T,showRenderDeleteBtn:(0,f.H3)("delete",n),onDelete:this.handleRowDelete,onTableChange:this.handleChangePagination,onRowChange:this.handleRowChange,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow}))))}}var M=(0,K.$j)(I)((0,m.Z)()(Q))},31945:function(ee,z,e){"use strict";e.d(z,{Z:function(){return H}});var V=e(88983),W=e(47933),O=e(20228),g=e(11382),l=e(62029),m=e(30887),K=e(99210),p=e(59250),B=e(13013),S=e(57663),N=e(71577),k=e(63185),U=e(9676),G=e(71194),j=e(57016),L=e(88986),F=e(34792),s=e(48086),t=e(43358),r=e(34041),o=e(12924),a=e.n(o),v=e(28216),d=e(91768),y=e(57254),E=e(18329);class $ extends a().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var n=this.props,u=n.visible,h=n.courseList,Z=n.t;return a().createElement(E.ZP,{visible:u,title:Z("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},a().createElement("div",{className:"referenceWithOtherCourses"},a().createElement("div",{className:"referenceWithOtherCourses__tip"},Z("course.deleteCourseTip")),h.map((A,R)=>a().createElement("div",{className:"referenceWithOtherCourses__item",key:R},h.length>1?"".concat(R+1,"\u3001"):null," ",A))))}}var w=(0,d.Z)()($),P=e(10237),f=e(63848),I=e(58546),D=e(30389),Q=e(54792),M=e(86726),x=e(37055),c=r.Z.Option,i={setClassify:x.ZP.CourseManageList.setClassify,setScore:x.ZP.CourseManageList.setScore,setBatchEmployee:x.ZP.CourseManageList.setBatchEmployee,deleteCourse:x.ZP.CourseManageList.deleteCourse,exportCourseView:x.ZP.CourseManageList.exportCourseView,syncCourse:x.ZP.CourseManageList.syncCourse},C=X=>({qyShield:X.user.qyShield});class T extends a().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=n=>{this.props.onClassifyChange(n)},this.handleChangeType=n=>{this.props.onTypeChange(n)},this.handleChangeCourseType=n=>{this.props.onCourseTypeChange(n)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=n=>{var u=n.node,h=this.props,Z=h.selectedCourseIds,A=h.selectedProjectIds,R=h.onForceRender,_=h.t,b=u.id;b&&P.qg.post({url:i.setClassify(),data:{course_ids:Z.join(","),project_ids:A.join(","),classify_id:b}}).then(()=>{s.default.success(_("course.setCourseClassifySuccess")),R()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(n=>({scoreProps:(0,L.Z)((0,L.Z)({},n.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(n=>({scoreProps:(0,L.Z)((0,L.Z)({},n.scoreProps),{},{visible:!1})}))},this.handleScoreOk=n=>{var u=n.value;if(u===0){this.handleScoreCancel();return}var h=this.props,Z=h.selectedCourseIds,A=h.selectedProjectIds,R=h.onForceRender,_=h.t;P.qg.post({url:i.setScore(),data:{course_ids:Z.join(","),project_ids:A.join(","),credit:u}}).then(()=>{s.default.success(_("course.setCourseScoreSuccess")),R()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(n=>({employeeProps:(0,L.Z)((0,L.Z)({},n.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=n=>{var u=this.props,h=u.selectedCourseIds,Z=u.selectedProjectIds,A=u.onForceRender,R=u.t,_=n.isAll,b=n.departmentIds,J=n.groupIds,Y=n.postIds,q=n.userIds,te=n.qy_we_chat_vo;P.WY.post({url:i.setBatchEmployee(),data:{course_ids:h.join(","),project_ids:Z.join(","),department_ids:b,group_ids:J,is_all:_,post_ids:Y,user_ids:q,qy_we_chat_vo:te}}).then(()=>{s.default.success(R("personal.batchSetRangeSuccess")),A()}),this.handleEmployeeCancel()},this.showReferenceCourseList=n=>{this.setState(u=>({showReferenceCourseListProps:(0,L.Z)((0,L.Z)({},u.showReferenceCourseListProps),{},{visible:!u.showReferenceCourseListProps.visible,courseList:n||[]})}))},this.actionDelete=()=>{var n=this.props,u=n.selectedCourseIds,h=n.selectedProjectIds,Z=n.list,A=n.onForceRender,R=n.t,_=0,b=0,J=[];if(Z.forEach(Y=>{u.includes(Y.course_id)&&(Y.reference_plan_count>0&&(b+=1),Y.reference_plan_count>0&&J.push(Y.title),Y.can_delete==="true"&&(_+=1))}),b>0)this.showReferenceCourseList(J);else if(_!==u.length)s.default.warning(R("personal.deletePlatformCourseTip"));else{if(h.length>0){s.default.warning(R("personal.deleteProjectCourseTip"));return}j.Z.confirm({title:R("common.tip"),content:R("common.confirmDeleteTitle"),onOk(){P.qg.post({url:i.deleteCourse(),data:{enterpriseId:x.ZP.enterpriseId,ids:u.join(","),project_ids:h.join(",")}}).then(Y=>{var q=Y.data,te=q.code,se=q.msg;s.default["".concat(te===0?"success":"warning")](se),te===0&&A()})}})}},this.actionSyncSetting=()=>{this.setState(n=>({asyncProps:(0,L.Z)((0,L.Z)({},n.asyncProps),{},{visible:!0})}))},this.onAsyncChange=n=>{this.setState(u=>({asyncProps:(0,L.Z)((0,L.Z)({},u.asyncProps),{},{value:n.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var n=this.props,u=n.selectedCourseIds,h=n.selectedProjectIds,Z=n.onForceRender,A=n.t,R=this.state.asyncProps;P.qg.post({url:i.syncCourse(),data:{course_ids:u.join(","),project_ids:h.join(","),syncProgress:R.value}}).then(_=>{var b=_.data,J=b.code,Y=b.msg;J===0?(s.default.success(A("setting.setUpSucceed")),Z()):s.default.warning(Y)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var n=this.props,u=n.selectedCourseIds,h=n.selectedProjectIds,Z=n.onForceRender,A=n.t;if(u.concat(h).length>20){s.default.warning(A("courseManage.exportMoreTip"));return}var R=i.exportCourseView(),_={course_Ids:u.join(","),project_Ids:h.join(",")};P.WY.get({url:R,params:_}).then(b=>{b.data.code===200&&s.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),Z(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var n=x.ZP.downLoadCenter.getDownLoadingCount();P.WY.get({url:n,params:{}}).then(u=>{sessionStorage.setItem("downloadingCount",u.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:u.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=n=>{this.props.onCheckboxChange(n.target.checked)},this.handleSharingQueryRowCheckboxChange=n=>{this.props.onSharingCheckboxChange(n.target.checked)},this.renderCondition=()=>{var n=this.props,u=n.prefixCls,h=n.params,Z=n.qyShield,A=n.t,R=h.classify_id?h.classify_id.split(","):[];return a().createElement("div",{className:"".concat(u,"__condition")},this.props.extraDom&&this.props.extraDom(),a().createElement(f.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:R,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),a().createElement(r.Z,{value:h.type,className:"cl-search-normal-width",onChange:this.handleChangeType},a().createElement(c,{value:""},this.props.t("courseManage.allOrigin")),a().createElement(c,{value:"original"},this.props.t("courseManage.originalCourse")),a().createElement(c,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),a().createElement(c,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:a().createElement(r.Z,{value:h.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},a().createElement(c,{value:"all"},this.props.t("courseManage.allType")),a().createElement(c,{value:"course"},this.props.t("common.courseLabel")),a().createElement(c,{value:"microCourse"},this.props.t("common.microCourse")),a().createElement(c,{value:"project"},this.props.t("leftMenuLists.studyProject"))),a().createElement(U.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},A("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&Z==="false"?a().createElement(U.Z,{onChange:this.handleSharingQueryRowCheckboxChange},A("common.sharing")):null)},this.renderActions=()=>{var n=this.props,u=n.prefixCls,h=n.selectedCourseIds,Z=n.selectedProjectIds,A=n.showNum,R=A===void 0?1:A,_=this.props.allowActions,b=(0,M.H3)("delete",_),J=(0,M.H3)("adjustment_classification",_),Y=(0,M.H3)("set_visible",_),q=(0,M.H3)("export",_),te=(0,M.H3)("set_score",_),se=(0,M.H3)("progressSync",_),le=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:J},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:q},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:te},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:Y},{name:this.props.t("common.delete"),type:"actionDelete",isShow:b},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:se}],ne=le.filter(ae=>ae.isShow),oe=[],re=[];if(ne.length)R?(oe=[...ne.slice(0,R)],re=[...ne.slice(R)]):re=[...ne];else return null;return a().createElement("div",{className:"".concat(u,"__action")},oe.map(ae=>a().createElement(N.Z,{style:{marginRight:"8px"},key:ae.type,disabled:!(h.length+Z.length),onClick:this[ae.type]},ae.name)),re.length?a().createElement(B.Z,{disabled:!(h.length+Z.length),overlay:this.renderMoreButton({buttons:re})},a().createElement(N.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",a().createElement(y.Z,null))):"")}}renderMoreButton(n){var u=n.buttons,h=this.props,Z=h.selectedCourseIds,A=h.selectedProjectIds;return a().createElement(K.Z,{onClick:R=>{var _=R.key;this[_]()}},u.map(R=>R.isShow?a().createElement(K.Z.Item,{key:R.type,disabled:!(Z.length+A.length)},a().createElement("span",{className:"cl-pointer"},R.name)):null))}render(){var n=this.props,u=n.prefixCls,h=n.t,Z=n.showRenderCondition,A=Z===void 0?!0:Z,R=n.showRenderActions,_=R===void 0?!0:R,b=this.state,J=b.classifyProps,Y=b.scoreProps,q=b.employeeProps,te=b.showReferenceCourseListProps,se=b.asyncProps;return a().createElement("div",{className:u},A&&this.renderCondition(),_&&this.renderActions(),a().createElement(I.Z,(0,l.Z)({},J,{title:h("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),a().createElement(Q.Z,(0,l.Z)({},Y,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),q.visible&&a().createElement(D.Z,(0,l.Z)({},q,{title:h("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:h("component.chooseVisibleScope")},isLoading:!q.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),se.visible&&a().createElement(E.ZP,{wrapClassName:"cl-async-selector-modal",visible:se.visible,title:h("common.scheduleSyncSetting"),okText:h("common.ok"),cancelText:h("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},se.visible?a().createElement("div",{className:"".concat(u,"__async")},a().createElement("p",null," ",h("common.scheduleSyncSettingTip")),a().createElement(W.ZP.Group,{onChange:this.onAsyncChange,value:se.value},a().createElement(W.ZP,{value:0},h("common.outSync")),a().createElement(W.ZP,{value:1},h("common.synchronization")))):a().createElement(g.Z,{size:"large"})),a().createElement(w,(0,l.Z)({},te,{showReferenceCourseList:this.showReferenceCourseList})))}}T.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var H=(0,d.Z)()((0,v.$j)(C)(T))}}]);
