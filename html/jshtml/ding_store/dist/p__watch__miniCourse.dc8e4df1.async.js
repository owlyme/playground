(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[7006],{42837:function(ue,ee,t){"use strict";var Z=t(12924),m=t.n(Z),Y=t(91768),N=t(28216),U=t(66708),O=t(18329);class I extends m().Component{render(){var d=this.props,i=d.visible,e=d.onCancel,p=d.title,y=d.t;return i?m().createElement(O.ZP,{visible:i,width:"400",footer:null,title:p||y("common.QRCodeScan"),bodyStyle:{minWidth:430},onCancel:e,destroyOnClose:!0},m().createElement(U.Z,this.props)):null}}ee.Z=(0,N.$j)()((0,Y.Z)()(I))},74525:function(ue,ee,t){"use strict";var Z=t(57361),m=t(34792),Y=t(48086),N=t(9754),U=t.n(N),O=t(12924),I=t.n(O),L=t(91768),d=t(28216),i=t(92592),e=t(5430),p=t(10237),y=t(84874),v=t(16239),_=t(38642),g=t(28963);class R extends I().Component{constructor(b){var K;super(b);K=this,this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.initCode=()=>{var S=this.props,B=S.type,V=S.isProjectShare,Q=S.isCommodityExchange,j=S.userInfo;["wx","weixin"].includes(B)?B==="weixin"&&j.appId==="9005"?this.initOtherCode():this.initWXCode():V&&B==="ding"?this.getProjectShareUrl():Q&&B==="ding"?this.getCommodityExchangeUrl():B==="fullWebLink"?this.initOtherCode(this.props.option.scene):this.initOtherCode()},this.getCommodityExchangeUrl=()=>{var S=this.props,B=S.t,V=S.appType,Q=S.orderId,j=this.props.option.scene,f=localStorage.getItem("uid");if(!v.Z[(0,v.c)()].showCl||V!=="e_app"){var D={deliverUserId:f,orderId:Q,flag:"exchange"};i.toDataURL(JSON.stringify(D),{width:500}).then(he=>{this.setState({img:he})}).catch(()=>{Y.default.error(B("integralMall.qrCodeFailed"))})}else{var H="/pages/messageRedirect/messageRedirect?".concat(j),q=encodeURIComponent(H),me="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/appId=".concat(this.appId,"&pVersion=1&miniAppId=").concat(this.miniAppId,"&packageType=1&page=").concat(q,"&corpId=").concat(this.props.userInfo.corpId);this.getShortLink(me).then(he=>{i.toDataURL(he.data.short_link,{width:500}).then(Pe=>{this.setState({img:Pe})}).catch(()=>{Y.default.error(B("integralMall.qrCodeFailed"))})})}},this.getProjectShareUrl=()=>{var S=this.props.option.scene,B=encodeURIComponent("/pages/messageRedirect/messageRedirect?".concat(S)),V="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(B);this.getShortLink(V).then(Q=>{this.initOtherCode(Q.data.short_link)})},this.getShortLink=S=>p.WY.post({url:e.ZP.Common.getQrUrl(),data:{link:S}}),this.initWXCode=(0,Z.Z)(U().mark(function S(){var B,V,Q,j;return U().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return B=K.props.option,V=B.scene,Q=B.flag,D.next=3,p.WY.post({url:e.ZP.createWxCode(),data:{flag:Q,scene:"".concat(V,"&enterpriseId=").concat(e.ZP.enterpriseId),enterprise_id:e.ZP.enterpriseId}});case 3:j=D.sent,K.setState({img:j.data.wx_code,linkUrl:"data:image/png;base64,".concat(j.data.wx_code)});case 5:case"end":return D.stop()}},S)})),this.initOtherCode=function(){var S=(0,Z.Z)(U().mark(function B(V){var Q,j,f,D;return U().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(Q=K.props,j=Q.type,f=Q.fsUrl,q.t0=V,q.t0){q.next=6;break}return q.next=5,K.handleScanCode();case 5:q.t0=q.sent;case 6:D=q.t0,j==="fs"&&f&&(D=f),K.setState({linkUrl:D}),i.toDataURL(D,{width:500}).then(me=>{K.setState({img:me})}).catch(()=>{Y.default.error(K.props.t("personal.failedGenerateCode"))});case 10:case"end":return q.stop()}},B)}));return function(B){return S.apply(this,arguments)}}(),this.handleScanCode=(0,Z.Z)(U().mark(function S(){var B,V,Q,j,f,D,H,q,me,he,Pe,ve,_e,pe,Ie,ge,oe,ye;return U().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(B=K.props,V=B.type,Q=B.userInfo,j=B.universalFn,f=K.state.wxH5Url,D=K.props.option,H=D.scene,q=D.pc_url,me=q===void 0?"":q,he=D.mobile_url,Pe=he===void 0?"":he,ve=D.pc_type,_e=ve===void 0?"":ve,pe=D.mobile_type,Ie=pe===void 0?"":pe,ge=encodeURIComponent("/pages/messageRedirect/messageRedirect?"),oe=encodeURIComponent(H),!j){ce.next=12;break}return ce.next=8,K.getShortLink((0,_.jr)({pc_url:me,mobile_url:Pe,pc_type:_e,mobile_type:Ie}));case 8:return ye=ce.sent,ce.abrupt("return",(0,g.fZ)(ye.data.short_link));case 12:ce.t0=V,ce.next=ce.t0==="app"?15:ce.t0==="ding"?16:ce.t0==="fs"?17:ce.t0==="weixin"?18:19;break;case 15:return ce.abrupt("return","".concat(H,"&fromApp=true"));case 16:return ce.abrupt("return","dingtalk://dingtalkclient/action/open_micro_app?corpId=".concat(Q.corpId,"&appId=").concat(K.appId,"&miniAppId=").concat(K.miniAppId,"&packageType=1&pVersion=1&page=").concat(ge+oe));case 17:return ce.abrupt("return","https://applink.feishu.cn/client/web_app/open?appId=".concat("cli_a0aa5e0fe5f8500d","&path=").concat(encodeURIComponent("/index.html"),"&").concat(H,"&appType=lark"));case 18:return ce.abrupt("return","".concat(f,"/#/pages/login/login-we-com/index?appType=weCom&corp=").concat(Q.corpId,"&").concat(H));case 19:return ce.abrupt("return","");case 20:case"end":return ce.stop()}},S)})),this.saveQrcode=()=>{var S=this.state.img,B=this.props,V=B.type,Q=B.t,j=B.userInfo,f=document.createElement("a");f.download=Q("setting.Qrcode")+new Date().getTime(),f.href=V==="wx"||V==="weixin"&&j.appId!=="9005"?"data:image/png;base64,".concat(S):S,document.body.appendChild(f),f.click(),document.body.removeChild(f)},this.generatePoster=S=>{var B=S.linkUrl,V=S.type,Q=S.activeKey,j=S.option,f=this.props.universalFn;typeof f=="function"&&f({linkUrl:B,type:V,activeKey:Q,option:j})},this.state={img:"",linkUrl:"",wxH5Url:"https://mobile.coolcollege.cn"}}componentDidMount(){this.initCode()}componentDidUpdate(b){b.option.scene!==this.props.option.scene&&this.initCode()}render(){var b=this.props,K=b.type,S=b.tip,B=b.extraTip,V=b.t,Q=b.canSave,j=b.refreshQrCode,f=b.label,D=b.saveText,H=D===void 0?"":D,q=b.downloadAsBtn,me=b.userInfo,he=b.universalFn,Pe=b.activeKey,ve=b.option,_e=this.state,pe=_e.img,Ie=_e.linkUrl,ge=localStorage.getItem("themeColor")||"#465dcd";return pe?I().createElement("div",{className:"qr-code-content"},f?I().createElement("div",{className:"label-text"},f,":"):null,I().createElement("div",{className:"qr-code-div ".concat(f?"left":"")},K==="wx"||K==="weixin"&&me.appId!=="9005"?I().createElement("img",{src:"data:image/png;base64,".concat(pe),alt:""}):I().createElement("img",{src:pe,alt:""}),S?I().createElement("div",{className:"tip-text"},S):null,B?I().createElement("div",{className:"tip-text"},B):null,Q?I().createElement("div",{className:"save_qrcode ".concat(q?"save-btn":""),style:{color:ge},onClick:()=>this.saveQrcode()},q?null:I().createElement(y.Z,{iconClass:"icon-f-download",size:"14px"}),H||V("personal.saveCode")):null,he&&!j?I().createElement("div",{className:"save_qrcode",style:{color:ge},onClick:()=>this.generatePoster({linkUrl:Ie,type:K,activeKey:Pe,option:ve})},V("personal.saveCodePoster")):null,j?I().createElement("div",{className:"save_qrcode",style:{color:ge},onClick:()=>j()},I().createElement(y.Z,{iconClass:"iconf-switch",size:"14px"}),V("personal.refreshCodeTip")):null)):I().createElement("div",{className:"qr-code-placeholder"})}}ee.Z=(0,d.$j)(T=>{var b=T.user;return{userInfo:b,appType:b.appType,corpId:b.corpId}})((0,L.Z)()(R))},66708:function(ue,ee,t){"use strict";var Z=t(93485),m=t(33565),Y=t(57361),N=t(18106),U=t(88108),O=t(9754),I=t.n(O),L=t(12924),d=t.n(L),i=t(91768),e=t(28216),p=t(89366),y=t(48194),v=t(74525),_=t(77779),g=t.n(_),R=t(6793),T=U.Z.TabPane;class b extends d().Component{constructor(B){var V;super(B);V=this,this.initAppTypeScan=(0,Y.Z)(I().mark(function j(){var f,D,H,q,me,he,Pe,ve,_e,pe,Ie;return I().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,Promise.all([(0,y.q)(),(0,y.$)()]);case 2:f=oe.sent,D=(0,m.Z)(f,2),H=D[0],q=D[1],me=H.data.sync_organizes,he=q.data.list,Pe=!1,ve=(0,Z.Z)(he),oe.prev=10,ve.s();case 12:if((_e=ve.n()).done){oe.next=19;break}if(pe=_e.value,pe.type!=="wechat_applet_setting"){oe.next=17;break}return Pe=pe.switch_status==="OPEN",oe.abrupt("break",19);case 17:oe.next=12;break;case 19:oe.next=24;break;case 21:oe.prev=21,oe.t0=oe.catch(10),ve.e(oe.t0);case 24:return oe.prev=24,ve.f(),oe.finish(24);case 27:Ie=V.props.universalFn?V.filterOrganizes(me):V.filterCode(me),Pe&&Ie.push("wx"),V.setState({scanTypes:Ie});case 30:case"end":return oe.stop()}},j,null,[[10,21,24,27]])})),this.filterCode=j=>{var f=[...j],D=this.props.option;return f=f.map(H=>["third_oa_app","seeyon_app"].includes(H)?"ding":H),D&&D.flag==="exam_task"?[...new Set([...f])].filter(H=>H==="fs"):[...new Set([...f,"app"])]},this.filterOrganizes=j=>{var f=[...j],D=this.props.option;f=f.map(q=>["third_oa_app","seeyon_app"].includes(q)?"ding":q);var H=new Set([...f]);return H.size===1&&H.has("app")?D&&D.flag==="exam_task"?[...H].filter(q=>q==="fs"):[...H]:(H.delete("app"),D&&D.flag==="exam_task"?[...H].filter(q=>q==="fs"):[...H])};var Q=B.t;this.state={scanTypes:[],commonTitle:{ding:Q("common.sanCodeCommon"),fs:Q("common.sanCodeCommon"),weixin:Q("common.sanCodeCommon"),app:Q("common.sanCodeCommon"),wx:Q("common.weChatApplets")},tabTitle:{ding:Q("common.dingDingSanCode"),fs:Q("common.fsScanCode"),weixin:Q("common.WeComSanCode"),app:Q("common.appScanCode"),wx:Q("common.wxScanCode")}}}componentDidMount(){this.initAppTypeScan()}UNSAFE_componentWillReceiveProps(){this.initAppTypeScan()}render(){var B=this.state,V=B.tabTitle,Q=B.commonTitle,j=B.scanTypes,f=this.props,D=f.option,H=f.tip,q=f.t,me=f.extraTip,he=f.canSave,Pe=f.refreshQrCode,ve=f.isCommodityExchange,_e=f.type,pe=f.center,Ie=pe===void 0?!0:pe,ge=f.label,oe=ge===void 0?"":ge,ye=f.saveText,Ue=f.downloadAsBtn,ce=Ue===void 0?!1:Ue,Re=f.transfer,Ve=Re===void 0?!1:Re,Ge=f.source_type,Ze=f.universalFn,Fe=f.activeKey;return d().createElement("div",{className:"".concat(g()["scan-code-box"]," ").concat(_e==="card"?g()["card-tabs"]:"")},j.length===1?d().createElement(v.Z,{universalFn:Ze,activeKey:Fe,type:j[0],option:D,tip:(0,R.ZT)(q(H),Ze?Q[j[0]]:V[j[0]]),extraTip:me,canSave:he,fsUrl:D.fsUrl,refreshQrCode:Pe,isCommodityExchange:ve,label:oe,saveText:ye,downloadAsBtn:ce}):d().createElement(U.Z,{defaultActiveKey:"1",centered:Ie,type:_e},j.map((We,He)=>{var Ke=He+1;return d().createElement(T,{tab:Ze?Q[We]:V[We],key:Ke},Ve&&d().createElement("div",{className:g()["scan-code-transfer"]},d().createElement(p.Z,null),d().createElement("span",null,q("course.onlyScope",{source_type:q(Ge==="study_project"?"lineClass.project":"lineClass.task")}))),d().createElement(v.Z,{universalFn:Ze,activeKey:Fe,type:We,option:D,tip:(0,R.ZT)(q(H),Ze?Q[We]:V[We]),extraTip:me,canSave:he,fsUrl:D.fsUrl,refreshQrCode:Pe,isCommodityExchange:ve,label:oe,saveText:ye,downloadAsBtn:ce}))})))}}b.defaultProps={option:{flag:"",scene:""},tip:"",extraTip:"",canSave:!0,refreshQrCode:null};var K=S=>({appType:S.user.appType});ee.Z=(0,e.$j)(K)((0,i.Z)()(b))},48194:function(ue,ee,t){"use strict";t.d(ee,{q:function(){return Y},$:function(){return N}});var Z=t(37055),m=t(10237);function Y(){var U=Z.ZP.multiTerminalLogin.getEnterpriseOrganizations();return m.WY.get({url:U})}function N(){var U=Z.ZP.advancedSetting.getSetting();return m.WY.get({url:U,params:{page_size:9999,page_number:1}})}},1164:function(ue,ee,t){"use strict";var Z=t(12924),m=t.n(Z),Y=t(76651),N=t(38642),U=t(91302),O=I=>{var L=navigator.userAgent.toLocaleLowerCase(),d=localStorage.getItem("enterpriseId"),i=(0,N.lz)(d,I.projectType),e=localStorage.getItem("dingPersonnel"),p=U.bl.includes(e),y=I.target;function v(_){if(y==="self"&&(_.preventDefault(),Y.m8.push(I.to)),p){if(I.projectType==="student"){window.location.href="".concat(i,"/").concat(I.to);return}Y.m8.push(I.to);return}if(dd.version){_.preventDefault();var g="";I.to.includes("?")?g="".concat(i).concat(I.to,"&ddtab=true"):g="".concat(i).concat(I.to,"?ddtab=true"),dd.biz.util.openLink({url:g})}else L.indexOf("lark")!==-1&&(window.location.href="".concat(i).concat(I.to))}return m().createElement("a",{rel:"noreferrer",href:"".concat(I.projectType==="student"?"".concat(i).concat(I.to):"#".concat(I.to)),className:"".concat(I.wrapCls," cl-pointer"),target:L.indexOf("lark")!==-1||p?"_self":I.target||"_blank",onClick:v},I.children)};O.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},O.targetTo=I=>{var L=I.path,d=I.from,i=I.isExternalLink,e=i===void 0?!1:i,p=I.isAsync,y=p===void 0?!1:p,v=I.openName,_=v===void 0?"_blank":v,g=I.projectType,R=g===void 0?"manage":g,T=I.ddTab,b=T===void 0?!0:T,K,S=localStorage.getItem("dingPersonnel"),B=U.bl.includes(S),V=navigator.userAgent.toLocaleLowerCase(),Q=localStorage.getItem("enterpriseId"),j=(0,N.lz)(Q,R),f=localStorage.getItem("appType"),D=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var H="";if(K=e?"":j,B&&!e){if(R==="student"){window.location.href="".concat(j).concat(L);return}Y.m8.push(L);return}L.includes("?")?H="".concat(K).concat(L,"&ddtab=").concat(b):H="".concat(K).concat(L,"?ddtab=").concat(b),dd.biz.util.openLink({url:H})}else if(V.indexOf("lark")!==-1)K=e?"":j,window.location.href="".concat(K).concat(L);else if(f==="wx_app"&&D&&e&&d==="imgText")K=e?"":R==="student"?"".concat(j):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(K).concat(L)});else if(K=e?"":R==="student"?"".concat(j):"#",y){var q=window.open("","_blank");setTimeout(()=>{q.location="".concat(K).concat(L)},100)}else window.open("".concat(K).concat(L),_)},ee.Z=O},99891:function(ue,ee,t){"use strict";var Z=t(12924),m=t.n(Z),Y=t(28216),N=t(91768),U=t(37055),O=t(10237),I=t(60667);class L extends m().PureComponent{constructor(e){super(e);this.getWaterMarkText=p=>{var y=this.props.userInfo,v=y.jobNumber,_=localStorage.getItem("waterMarkPostName"),g=[],R=p.find(b=>b.type==="content_setting"),T=p.find(b=>b.type==="content_custom");return R.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),T.param.checked==="true"&&T.param.comment[0]!==""&&this.setState({commentText:T.param.comment[0]}),R.param.comment.indexOf("position")!==-1&&_&&_!==""&&g.push("".concat(_)),R.param.comment.indexOf("jobnumber")!==-1&&v&&v!==""&&g.push("".concat(v)),g.join("-")},this.getWaterMarkApplication=p=>{var y=this.props.scenes,v=p.find(_=>_.type==="application_scenario");v.param.comment.indexOf(y)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=p=>{var y=p.find(v=>v.type==="dispersive");this.setState({isDispersive:y.param.checked==="true"})},this.getDynamicSet=()=>{var p=U.ZP.advancedSetting.dynamicWaterMarkNew(),y={access_token:window.localStorage.getItem("token")};O.WY.get({url:p,params:y}).then(v=>{var _=JSON.parse(v.data.actions);this.setState({waterMarkText:this.getWaterMarkText(_),actions:_}),this.getWaterMarkApplication(_),this.getWaterIsDispersive(_)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var e=localStorage.getItem("waterMarkPostName");e===""||e===null?this.getPostName():this.getDynamicSet()}getPostName(){var e=U.ZP.advancedSetting.getPostName();O.WY.get({url:e}).then(p=>{localStorage.setItem("waterMarkPostName",p.data.post_names[0]||""),this.getDynamicSet()})}render(){var e=this.state,p=e.showWaterMark,y=e.waterMarkCount,v=e.isUserName,_=e.isDispersive,g=e.waterMarkText,R=e.actions,T=e.commentText,b=this.props.userInfo,K=b.name,S=b.unionid,B=b.sourceType;return m().createElement("div",{className:"common-watermark"},p&&new Array(y).fill(0).map((V,Q)=>m().createElement("div",{key:Q,className:"common-watermark-item ".concat(_?"isDispersive":"")},m().createElement("span",{className:"common-watermark-item-content"},T!==""&&m().createElement("span",{className:"item-part"},T),v&&m().createElement("span",null,T!==""&&m().createElement("span",null,"-"),m().createElement(I.Z,{dataType:"userName",value:S,name:K,type:B})),m().createElement("span",{className:"item-part"},(v||T!=="")&&g!==""&&m().createElement("span",null,"-"),g)))))}}var d=i=>({userInfo:i.user});ee.Z=(0,Y.$j)(d)((0,N.Z)()(L))},80430:function(ue,ee,t){"use strict";var Z=t(12924),m=t.n(Z),Y=t(60667),N=U=>{var O=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},y=p.department_ids.split("/"),v=p.department_names.split("/"),_=y.map((g,R)=>m().createElement(Y.Z,{key:g,dataType:"departmentName",value:g,name:v[R],type:p.source_type}));return m().createElement(m().Fragment,null,_.map((g,R)=>m().createElement("span",{key:g},g,R===v.length-1?"":"/")))},I=e=>m().createElement(Y.Z,{dataType:"departmentName",value:e.department_id,name:e.department_name,type:e.source_type}),L=()=>{var e=U.list,p=e===void 0?[]:e,y=U.isBlock;if(!p.length)return null;var v=p.map(_=>O(_));return v.length&&v.length>1?m().createElement(m().Fragment,null,v.map((_,g)=>y?m().createElement("div",{key:_},_):m().createElement("span",{key:_},_,g===v.length-1?"":"\uFF0C"))):m().createElement(m().Fragment,null,v[0]||"")},d=()=>{var e=U.list,p=U.nameList,y=U.sourceType,v=U.isBlock,_=e.map((g,R)=>I({department_id:g,department_name:p[R],source_type:y}));return m().createElement(m().Fragment,null,_.map((g,R)=>v?m().createElement("div",{key:g},g):m().createElement("span",{key:g},g,R===_.length-1?"":"\uFF0C")))},i=()=>U.displayAll?L():d();return i()};N.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},ee.Z=N},60667:function(ue,ee,t){"use strict";t.d(ee,{Z:function(){return L}});var Z=t(33565),m=t(12924),Y=t.n(m),N=t(28216);function U(d){var i=d.type,e=d.openid,p=d.from,y=(0,m.useRef)(null);return(0,m.useLayoutEffect)(()=>{p==="vue"?window.parent.WWOpenData.bind(y.current):WWOpenData.bind(y.current)}),Y().createElement("ww-open-data",{ref:y,type:i,openid:e})}var O=d=>{var i=d.wxWorkApiFlag,e=d.appType,p=d.from,y=(0,m.useState)(!1),v=(0,Z.Z)(y,2),_=v[0],g=v[1];(0,m.useEffect)(()=>{var b=localStorage.getItem("qyWechatBook");(e!=="wx_app"||i||b==="false"||p==="vue"||p==="taro")&&g(!0)},[i,e,p]);var R=(0,m.useCallback)(()=>{var b=d.type,K=d.value,S=d.name,B=S===void 0?"":S;switch(console.warn(d,"props"),b){case"wx_sync":{var V=d.dataType;return K?Y().createElement(U,{from:p,type:V,openid:K}):B}default:return B}},[d]),T=()=>{var b=d.name,K=d.dataType,S=localStorage.getItem("qyWechatBook");if(K===""||S==="false")return b;if(p==="vue"||p==="taro")return R();switch(d.appType){case"wx_app":return R();default:return b}};return _?T():d.name};O.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var I=d=>({appType:d.user.appType,wxWorkApiFlag:d.user.wxWorkApiFlag}),L=(0,N.$j)(I)(O)},76466:function(ue,ee,t){"use strict";t.d(ee,{Z:function(){return vt}});var Z=t(20228),m=t(11382),Y=t(57663),N=t(71577),U=t(62029),O=t(57361),I=t(9754),L=t.n(I),d=t(12924),i=t.n(d),e=t(91512),p=t(68654),y=t(91768),v=t(4412),_=t.n(v);class g extends i().Component{render(){var s=this.props.t;return i().createElement("div",{className:"net-preview"},i().createElement("div",{className:"net-preview-center"},i().createElement("img",{src:_(),alt:"picture"}),i().createElement("h2",null,s("localStorage.tip")),i().createElement("p",null,s("localStorage.banPreview"))))}}var R=(0,y.Z)()(g),T=t(88986),b=t(34792),K=t(48086),S=t(28216),B=t(21594),V=t(41225),Q=t(10237),j=(ae,s)=>(0,T.Z)({id:ae||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},s),f=j;class D extends d.Component{constructor(){super(...arguments);this.setupPlayer=s=>{var n=this.props,r=n.onVideoReady,a=r===void 0?()=>{}:r,o=n.playerConfig,l=n.contentType;s&&s==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,T.Z)((0,T.Z)({},o),{},{contentType:l==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:o.source,autoplay:o.autoplay,width:o.width,id:o.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:u=>{u.on("sourceloaded",P=>{var C=P.paramData,k=C.desc,W=C.definition;u.getComponent("VideoQuality")&&u.getComponent("VideoQuality").setCurrentQuality(k,W,o.id)}),u.on("ready",()=>{a()}),this.playerInstance=u,this.setPlayerConfig()}}))}}componentDidUpdate(s){s.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(s){this.player&&this.player.seek(s)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(s){this.player.setSpeed(s)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var s=this.props,n=s.onPlay,r=n===void 0?()=>{}:n,a=s.onTimeUpDate,o=a===void 0?()=>{}:a,l=s.onEnd,u=l===void 0?()=>{}:l,P=s.onPause,C=P===void 0?()=>{}:P,k=s.onError,W=k===void 0?()=>{}:k,F=this.playerInstance;F.on("play",()=>{r()}),F.on("pause",()=>{C()}),F.on("timeupdate",A=>{o(A)}),F.on("ended",()=>{u()}),F.on("error",(0,O.Z)(L().mark(function A(){return L().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:W();case 1:case"end":return X.stop()}},A)})))}render(){var s=this.props.playerConfig;return i().createElement("div",{className:"common-video-player-container"},i().createElement("div",{id:s.id}))}}D.playerInstance=null,D.defaultProps={playerConfig:f(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var H=D,q=(ae,s)=>(0,T.Z)({id:ae||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},s),me=q;class he extends d.Component{constructor(){super(...arguments);this.setupPlayer=s=>{s&&s==="resetPlayer"&&this.player.dispose();var n=this.props,r=n.playerConfig,a=n.onVideoReady,o=a===void 0?()=>{}:a;this.player=new Aliplayer(r,l=>{l.on("sourceloaded",u=>{var P=u.paramData,C=P.desc,k=P.definition;l.getComponent("VideoQuality")&&l.getComponent("VideoQuality").setCurrentQuality(C,k,r.id)})}),this.player.on("ready",()=>{o()})},this.setPlayerConfig=()=>{var s=this.props,n=s.onPlay,r=n===void 0?()=>{}:n,a=s.onTimeUpDate,o=a===void 0?()=>{}:a,l=s.onEnd,u=l===void 0?()=>{}:l,P=s.onPause,C=P===void 0?()=>{}:P,k=s.onError,W=k===void 0?()=>{}:k;this.player.on("play",()=>{r()}),this.player.on("pause",()=>{C()}),this.player.on("timeupdate",F=>{o(F)}),this.player.on("ended",()=>{u()}),this.player.on("error",(0,O.Z)(L().mark(function F(){return L().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:W();case 1:case"end":return M.stop()}},F)})))},this.getPlayerContent=s=>{this.playerContainer=s}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(s){s.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(s){this.player.seek(s)}exitFull(){var s=this.player.fullscreenService;s&&s.isFullScreen&&s.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var s=this.props.playerConfig;return i().createElement("div",{className:"common-video-player-container"},i().createElement("div",{id:s.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}he.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:me()};var Pe=he;class ve{constructor(s){this.hasCreated=!1,this.definition="",this.getQuality=s}createEl(s,n){var r=n._options&&n._options.language,a=n._el.id;this.isEn=r&&r==="en-us";var o=(0,B.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),l=(0,B.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),u=document.querySelector("#".concat(a," .prism-controlbar"));u.appendChild(o),s.appendChild(l)}setCurrentQuality(s,n,r){var a=document.querySelector("#".concat(r," .current-quality"));a.innerText=s,a.dataset.def=n,this.definition=n;var o=document.querySelector("#".concat(r," .quality-list")),l=o.querySelector(".current");l&&(l.className="");var u=o.querySelector('li[data-def="'.concat(n,'"]'));u&&(u.className="current")}created(s){this._urls=s._urls;var n=s._el.id,r=document.querySelector("#".concat(n," .current-quality")),a=document.querySelector("#".concat(n," .quality-list")),o=document.querySelector("#".concat(n," .quality-modal")),l=this._urls.map(C=>'<li data-def="'.concat(C.definition,'">').concat(C.desc,"</li>"));if(a.innerHTML=l.join(""),this.hasCreated==!1&&this.definition){var u=a.querySelector('li[data-def="'.concat(this.definition,'"]'));u.className="current"}this.hasCreated=!0;var P=null;r.onclick=()=>{a.style.display="block"},r.onmouseleave=()=>{P=setTimeout(()=>{a.style.display="none"},100)},a.onmouseenter=()=>{clearTimeout(P)},a.onmouseleave=()=>{a.style.display="none"},a.onclick=C=>{var k=C.target,W=k.dataset.def,F=k.innerText;if(W&&k.className!=="current"){var A=this._urls.find(M=>M.definition===W);s.loadByUrl(A.Url,s.getCurrentTime(),!0,!0),this.setCurrentQuality(A.desc,A.definition,n),o.style.display="block",o.querySelector("span.current-quality-tag").innerText=A.desc}this.getQuality(W,F)}}ready(s){var n=s._el.id,r=document.querySelector("#".concat(n," .quality-modal"));r.style.display="none";var a=document.querySelector("#".concat(n," .prism-setting-item.prism-setting-quality"));a&&a.classList.add("player-hidden")}}class _e{createEl(s,n){var r=n._el.id,a=(0,B.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),o=document.querySelector("#".concat(r," .prism-controlbar"));o.appendChild(a)}ready(s){var n=s._el.id,r=document.querySelector("#".concat(n," .current-rate")),a=document.querySelector("#".concat(n," .rate-list")),o=null,l=document.querySelector("#".concat(n," .prism-setting-item.prism-setting-speed"));l&&l.classList.add("player-hidden"),r.onclick=()=>{a.style.display="block"},r.onmouseleave=()=>{o=setTimeout(()=>{a.style.display="none"},100)},a.onmouseenter=()=>{clearTimeout(o)},a.onmouseleave=()=>{a.style.display="none"},a.onclick=u=>{var P=u.target,C=P.dataset.rate;if(C){if(s.setSpeed(C),P.className!=="current"){var k=a.querySelector(".current");k&&(k.className=""),P.className="current"}a.style.display="none",r.innerText="".concat(C,"x")}}}}var pe=t(69164),Ie=t(37055);function ge(ae){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Ie.ZP.local.getLocalUrl(ae);return Q.WY.get({url:n,params:s})}var oe=t(91648),ye=t(18329),Ue=t(38642),ce=t(9849),Re=t(99891);class Ve extends d.Component{constructor(s){super();this.WaterMarkText=s,this.html=document.getElementsByClassName("common-watermark")}createEl(s){setTimeout(()=>{s.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var Ge=Ve,Ze=ae=>({userInfo:ae.user});class Fe extends d.Component{constructor(s){var n;super(s);n=this,this.onVideoReady=r=>{var a=this.props,o=a.resourceInfo,l=a.mode,u=a.autoPlay,P=a.t,C=o.storageType;r==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(r),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(l==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),l==="preview"&&u&&this.play.play()):C==="ALIBABA_PRIVATE"||C==="LOCAL"?this.updateSource("resetPlayer"):(Q.WY.logger({keyword:"video",moduleName:"video-play",msg:P("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var r=this.props,a=r.draggable,o=r.mode,l=r.t,u=r.studyInfo,P=r.needCurrentTime,C=r.onCurrentTime,k=C===void 0?()=>{}:C,W=u.studyType,F=u.studyId,A=u.resourceId,M=this.state,X=M.showPreventHang,re=M.dragSwitch,ie=M.showRandomAlert,le=M.randomAlertDialogVisible,$=this.playingVideo,Oe=$.oneTime,Se=$.popupWindowCount,Ae=$.maxPlayTime,Qe=$.progress,Ne=$.auditionLength,be=$.auditionType,Be=$.duration,xe=$.recentStart,Ee=this.play.getCurrentTime(),fe=(X==="OPEN"||ie==="OPEN")&&Se>0;if(P&&k(Ee),Ne>0&&be===2&&Ee>Ne&&(this.play.seek(Ne),K.default.warning(l("component.haveALookOverTip")),this.play.pause()),o==="learn"&&fe){var ze=Be-Oe*Se;if(Se>0&&Ee>ze)if(this.play.pause(),ie==="OPEN"){if(!le){var Ye=(0,oe.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:Ye},()=>{(0,V.qp)({popupId:Ye,planId:F,resourceId:A,type:"popup_start"})}),this.play.exitFull()}}else X==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((a||Qe===100)&&(Ee>0&&(this.playingVideo.recentStart=Ee),!((W==="enterprise"||W==="studyProject")&&re==="OPEN")))return!1;Ee>Ae?Ee-xe>2?(this.playingVideo.recentStart=Ae,this.play.seek(Ae),K.default.warning(l("component.preventFastWatchTip"))):(this.playingVideo.recentStart=Ee,this.playingVideo.maxPlayTime=Ee):Ee>0&&Ee>this.playingVideo.recentStart&&(this.playingVideo.recentStart=Ee)},this.onPlay=()=>{var r=this.props,a=r.mode,o=r.onPlay,l=o===void 0?()=>{}:o;l();var u=this;a==="learn"&&!u.timer&&(u.timer=setTimeout(function P(){u.saveProgress(),clearTimeout(u.timer),u.timer=setTimeout(P,2e4)},2e4))},this.onPause=()=>{var r=this.props,a=r.studyInfo,o=r.mode,l=a.studyType;clearTimeout(this.timer),this.timer=null,o==="learn"&&(l==="platform"||l==="enterprise"||l==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var r=this.props.mode;r==="learn"&&this.saveProgress()},this.onError=r=>{var a=this.props.resourceInfo,o=a.storageType;(o==="ALIBABA_PRIVATE"||o==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var r=this.props.mode;this.initPlayVideo(),r==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var r=this.state,a=r.showPreventHang,o=r.showRandomAlert,l=this.props,u=l.t,P=l.playingVideo,C=l.studyInfo,k=l.autoPlay,W=P.recentStart,F=P.duration,A=P.progress,M=C.studyType,X=(a==="OPEN"||o==="OPEN")&&(M==="studyTask"||M==="enterprise"||M==="studyProject")&&A<100;X?(o==="OPEN"?this.setState({promptMessage:u("component.preventAlertTip"),dialogVisible:!0}):a==="OPEN"&&this.setState({promptMessage:u("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):k&&(this.play.play(),Math.ceil(W)<parseInt(F)&&this.play.seek(W))},this.playerShowPreventHang=()=>{var r=this.playingVideo,a=r.duration,o=r.recentStart,l=0;a>0&&a<180?(l=a/2,this.playingVideo.oneTime=l,o>=l?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):a>=180&&a<600?(l=a/3,this.playingVideo.oneTime=l,o>=2*l?this.playingVideo.popupWindowCount=0:o>=l?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(l=a/4,this.playingVideo.oneTime=l,o>=3*l?this.playingVideo.popupWindowCount=0:o>=2*l?this.playingVideo.popupWindowCount=1:o>=l?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var r=this.props,a=r.playingVideo,o=r.mode;if(o==="learn"){this.playingVideo=(0,T.Z)({},a);var l=a.duration,u=a.progress;this.playingVideo.hasFinished=parseInt(u)===100,this.playingVideo.maxPlayTime=parseInt(l)*parseInt(u)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,O.Z)(L().mark(function r(){var a,o,l,u,P,C,k,W,F,A,M,X,re,ie,le,$,Oe,Se,Ae,Qe,Ne,be,Be,xe;return L().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(a=n.state,o=a.speedSwitch,l=a.dragSwitch,u=a.whiteList,P=n.props,C=P.resourceInfo,k=P.showQuality,W=C.contentType,F=C.storageType,A=C.source,M=C.playId,X=C.playerId,re=C.showFullScreen,ie=re===void 0?!0:re,le=me(X),le.components=[],$=typeof A=="object"&&A.hasOwnProperty("FD")&&A.FD.indexOf("m3u8")===-1,k&&$&&W!=="mp3"&&(F&&F==="PUBLIC_CLOUD"||!F)&&le.components.push({name:"VideoQuality",type:ve,args:[()=>{n.play.pause(),n.playingVideo.readyCount=0}]}),o==="OPEN"&&le.components.push({name:"VideoRate",type:_e}),ie&&(Oe=le.skinLayout.find(ze=>ze.name==="controlBar"),Oe&&Oe.children.splice(Oe.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),le.components.push({name:"VideoWaterMark",type:Ge}),Se=A.FD,Ae=A.OD,Se.indexOf("http://")>-1&&(Se=Se.replace("http://","https://")),Ae.indexOf("http://")>-1&&(Ae=Ae.replace("http://","https://")),Qe=u.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",A.OD=Ae&&Ae.indexOf(Qe)>-1&&Ae.indexOf(".mp4")>-1?Ae:Se,A.FD=Se,Ne=typeof A!="string"?JSON.stringify(A):A,le.source=Ne,l==="OPEN"&&(le.disableSeek=!0),F!=="ALIBABA_PRIVATE"){fe.next=32;break}return fe.next=22,(0,V.BR)(M);case 22:if(be=fe.sent,!be){fe.next=28;break}le.source=be,le.vodRetry=1,fe.next=30;break;case 28:return n.setState({showPrivateVodError:!0}),fe.abrupt("return");case 30:fe.next=38;break;case 32:if(F!=="LOCAL"){fe.next=38;break}return fe.next=35,ge(M);case 35:Be=fe.sent,xe=Be.data,xe.code===0&&(le.source="".concat(A.FD,"?auth_key=").concat(xe.data.auth_key),le.vodRetry=1);case 38:n.setState({playerConfig:le});case 39:case"end":return fe.stop()}},r)})),this.updateSource=function(){var r=(0,O.Z)(L().mark(function a(o){var l,u,P,C,k,W,F,A;return L().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(l=n.state.playerConfig,u=n.props.resourceInfo,P=u.storageType,C=u.source,k=u.playId,n.playingVideo.readyCount=0,P!=="ALIBABA_PRIVATE"){X.next=16;break}return X.next=7,(0,V.BR)(k);case 7:if(W=X.sent,!W){X.next=12;break}Object.assign(l,{source:W,vodRetry:1}),X.next=14;break;case 12:return n.setState({showPrivateVodError:!0}),X.abrupt("return");case 14:X.next=22;break;case 16:if(P!=="LOCAL"){X.next=22;break}return X.next=19,ge(k);case 19:F=X.sent,A=F.data,A.code===0&&Object.assign(l,{source:"".concat(C.FD,"?auth_key=").concat(A.data.auth_key),vodRetry:1});case 22:n.setState({playerConfig:l},()=>{n.play.setupPlayer(o)});case 23:case"end":return X.stop()}},a)}));return function(a){return r.apply(this,arguments)}}(),this.saveProgress=()=>{var r=this.props,a=r.studyInfo,o=r.userInfo,l=o.isLogin,u=o.enterpriseId,P=o.id,C=this.playingVideo,k=C.recentStart,W=C.duration,F=C.hasFinished,A=Math.ceil(+k);A>Number(W)&&(A=Number(W));var M=Math.ceil(A/+W*100);if((M>100||F)&&(M=100),l){var X=this.playingVideo,re=X.auditionType,ie=X.auditionLength;if(ie>0&&re===2){var le=Math.ceil(ie/W*100);le<=M&&(M=le,A=ie)}(0,V.sH)({studyInfo:a,progress:M,recent_start:A,enterpriseId:u,userId:P}).then($=>{$&&$.data&&(0,pe.Z)($.data.integral_info||"")})}},this.getInfoFromSettings=(0,O.Z)(L().mark(function r(){var a,o,l,u,P,C,k,W,F;return L().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return a=n.props.studyInfo,o=a.studyType,l=a.projectId,M.next=4,(0,V.Gw)();case 4:if(u=M.sent,P=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],C=(0,B.RG)(u,P),o!=="studyProject"){M.next=14;break}return M.next=10,(0,ce.NU)({id:l});case 10:k=M.sent,W=k.status,F=k.data,W===200&&(C.showPreventHang=F.prevent_cut_screen?"OPEN":"CLOSED",C.speedSwitch=F.speed_play?"OPEN":"CLOSED",C.dragSwitch=F.prevent_drag?"OPEN":"CLOSED");case 14:n.setState(C,()=>{n.dealVideoConfig()});case 15:case"end":return M.stop()}},r)})),this.dealAudioPoster=()=>{var r=this.props.resourceInfo.contentType,a=r===void 0?"":r;this.setState({showAudioPoster:a==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var r=this.state.showAudioPoster,a=this.play.playerContainer;r&&a&&(a.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),a.style.backgroundSize="cover")},this.getPlayInstance=r=>{this.play=r},this.handleOk=()=>{this.setState({dialogVisible:!1});var r=this.state.btnType,a=this.playingVideo.recentStart,o=this.props.t;r==="know"?(this.play.play(),this.play.seek(a),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:o("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,O.Z)(L().mark(function r(){var a,o,l,u;return L().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:a=n.props.studyInfo,o=a.studyId,l=a.resourceId,u=n.state.randomAlertUUID,(0,V.qp)({popupId:u,planId:o,resourceId:l,type:"popup_end"}).then(()=>{n.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),n.playingVideo.popupWindowCount-=1,n.play.play();case 6:case"end":return C.stop()}},r)})),this.renderFooter=()=>{var r=this.state.btnType,a=this.props.t;return i().createElement(N.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(r)},a(r==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var r=this.props.t;return i().createElement(N.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},r("common.ok"))},this.state={playerConfig:me(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:s.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:s.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:s.t("component.randomAlertTip"),randomAlertModal:{title:s.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,Ue.UI)("CL_VIDEO_BAIYING_COM_CN")}},s.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(s){var n=typeof s.resourceInfo.source!="string"?JSON.stringify(s.resourceInfo.source):s.resourceInfo.source,r=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;n!==r&&r!==""&&this.initInfo()}componentWillUnmount(){var s=this.props.mode;s==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var s=this.state,n=s.playerConfig,r=s.showPrivateVodError,a=s.dialogVisible,o=s.dialogModal,l=s.promptMessage,u=s.randomAlertDialogVisible,P=s.randomAlertModal,C=s.randomAlertTip,k=s.encryptedSwitch,W=this.props,F=W.resourceInfo,A=W.t,M=k==="OPEN"?H:Pe;return i().createElement(d.Fragment,null,i().createElement(M,(0,U.Z)({ref:this.getPlayInstance},F,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:n,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),i().createElement(ye.ZP,(0,U.Z)({visible:a},o,{footer:this.renderFooter()}),i().createElement("div",{className:"video-business-prompt"},l)),i().createElement(ye.ZP,(0,U.Z)({visible:u},P,{footer:this.renderRandomFooter()}),i().createElement("div",{className:"video-player-container__prompt"},C)),r&&i().createElement("div",{className:"video-business-vod-error"},A("privateCloud.docReadError")),i().createElement(Re.Z,{scenes:"video"}))}}var We=(0,S.$j)(Ze,null,null,{forwardRef:!0})((0,y.Z)("translation",{withRef:!0})(Fe)),He=t(94184),Ke=t.n(He),$e=t(84874),ut=ae=>({userInfo:ae.user}),Xe={getPravateDocUrl:Ie.ZP.localStorage.getPravateDocUrl};function qe(ae){return JSON.stringify(ae,(s,n)=>(typeof n=="function"&&(n=n.toString()),n))}function at(ae){var s=parseInt(parseInt(ae,10)/60,10),n=parseInt(parseInt(ae,10)%60,10);return s<10&&(s="0".concat(s)),n<10&&(n="0".concat(n)),"".concat(s,":").concat(n)}class et extends d.Component{constructor(s){var n;super(s);n=this,this.messageFun=r=>{var a=this.props,o=a.docType,l=a.progress,u=a.studyTimeLimit,P=a.studyTime,C=this.state,k=C.jumpPageTag,W=C.totalTime,F=C.timeRemaining,A=this.state.previewDocData,M={};try{M=JSON.parse(r.data)}catch(X){return}switch(M.action){case"preview.ready":this.initDocData();break;case"preview.meta":A.totalPage=M.data.pc||1,A.currentPage=1,this.setState({previewDocData:A},()=>{this.reportStatusInterval()}),u>0?(this.saveProgress(l,P||"1",M.data.pc||1),this.setState({showCountDownContainer:!0})):o==="xlsx"||o==="xls"||A.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(l,P||"1",M.data.pc||1),u>0&&l<100?(this.setState({showCountDown:!0}),o==="xlsx"||o==="xls"?W=u:W=u*M.data.pc,F=parseInt(W*(1-l/100),10),this.setState({timeRemaining:F,totalTime:W},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(k){k=!1,this.setState({jumpPageTag:k});return}A.currentPage=M.data.pageIndex+1,this.setState({previewDocData:A}),u||this.saveProgress(Math.ceil(A.currentPage/A.totalPage*100),A.currentPage,A.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":K.default.error(M.data.result);break;default:break}},this.initDocData=(0,O.Z)(L().mark(function r(){var a,o,l,u,P,C,k,W,F,A,M,X,re,ie;return L().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(n.setState({isShowPrivateError:!1}),a=n.props,o=a.docType,l=a.userInfo,u=a.documentWatermarkSettings,P=a.storageType,C=a.privateDocId,k=l.name,W=l.jobNumber,F=l.position,A="",M={},P!=="ALIBABA_PRIVATE"){$.next=18;break}return $.prev=6,X=Xe.getPravateDocUrl(C),$.next=10,Q.WY.get({url:X});case 10:re=$.sent,ie=re.data,ie.code===0?M=ie.data||{}:n.setState({isShowPrivateError:!0}),$.next=18;break;case 15:$.prev=15,$.t0=$.catch(6),n.setState({isShowPrivateError:!0});case 18:if(u.indexOf("name")>-1&&(A="".concat(A+k," ")),u.indexOf("position")>-1&&(A="".concat(A+F," ")),u.indexOf("jobnumber")>-1&&(A+=W),A.length>0?window.sendMessage("preview.init",(0,T.Z)({wmType:1,wmValue:A,wmColor:"rgba(192, 192, 192, 0.4)"},M)):window.sendMessage("preview.init",(0,T.Z)({},M)),o!=="xlsx"&&o!=="ppt"&&o!=="pptx"&&o!=="xls"?n.setState({pageOperateContainerVisible:!0}):n.setState({pageOperateContainerVisible:!1}),!(o==="ppt"||o==="pptx")){$.next=29;break}$.t1=window,$.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},$.t1.sendMessage.call($.t1,"setConfig",$.t2),$.next=32;break;case 29:$.t3=window,$.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},$.t3.sendMessage.call($.t3,"setConfig",$.t4);case 32:case"end":return $.stop()}},r,null,[[6,15]])})),this.handleJumpPage=r=>{var a=this.state.previewDocData;a.currentPage=r,this.setState({jumpPageTag:!0,previewDocData:a});var o=r/a.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(o),r,a.totalPage),window.sendMessage("logic.toPage",{pageIndex:r-1})},this.redirectPage=()=>{var r=this.props,a=r.studyTimeLimit,o=r.studyTime,l=0;a===0&&(l=o-1>0?o-1:0),window.sendMessage("logic.toPage",{pageIndex:l})},this.docCountDown=()=>{var r=this.state.timeRemaining,a=this.state,o=a.totalTime,l=a.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{r-=1,this.setState({timeRemaining:r}),r<1&&(this.saveProgress(100,0,l.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var u=(o-r)/o*100;r<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(u),r,l.totalPage)},2e4)},this.saveProgress=(r,a,o)=>{var l=this.props.onSaveProgress;l&&l(r,a,o)},this.reportStatusInterval=()=>{var r=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var a=this.state.previewDocData.currentPage;r&&r({currentPage:a})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=r=>{this.docReader=r},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(s,n)=>{var r=this.docReader.contentWindow;r.postMessage(qe({action:s,data:n}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var s=this.props,n=s.t,r=s.storageType,a=s.privateDocId,o=this.props.aliUrl,l=this.state,u=l.previewDocData,P=l.pageOperateContainerVisible,C=l.timeRemaining,k=l.showCountDown,W=l.showCountDownContainer,F=l.showPageOperateContainer,A=l.isShowPrivateError;return r==="ALIBABA_PRIVATE"&&(o="https://preview.imm.aliyuncs.com/index.html?docId=".concat(a)),i().createElement("div",{className:"doc-reader-container"},i().createElement("div",{className:"ali-doc-container",style:{paddingBottom:P?"56px":"0"}},i().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:o,id:"aliyunPreview",ref:this.dealPreviewRef}),W?i().createElement("div",{className:"ali-doc-container__countdown"},k?i().createElement("div",null,i().createElement($e.Z,{iconClass:"iconf-tipe",size:"16px"}),n("component.docStillStudy"),i().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",at(C)," "),n("component.canDone")):i().createElement("div",null,i().createElement($e.Z,{iconClass:"iconf-tipe",size:"16px"}),n("component.docHasFinish"))):null,P?i().createElement("div",{className:"ali-doc__operate"},i().createElement("div",{className:Ke()(["ali-doc__operate__content",F?"":"ali-doc__operate__hide-content"])},i().createElement("div",{className:"ali-doc__operate__pagination"},i().createElement("div",{className:"ali-doc__operate__pagination__pages"},u.currentPage," / ",u.totalPage),i().createElement("div",{className:"ali-doc__operate__pagination__toggle"},i().createElement("div",{className:"ali-doc__operate__pagination__choose"},i().createElement("span",null,n("component.choosePage"),i().createElement($e.Z,{iconClass:"iconf-arrow-under",size:"14px"})),i().createElement("div",{className:"ali-doc__operate__page-list-container"},i().createElement("div",{className:"ali-doc__operate__choose-page"},n("component.fastChoosePage")),i().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:u.totalPage})).map((M,X)=>i().createElement("li",{key:M,onClick:()=>this.handleJumpPage(X+1)},X+1))))),i().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},n("common.collapse"))))),i().createElement("div",{className:Ke()("ali-doc__operate__unfold",F?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},n("common.expand"))):null,A&&i().createElement("div",{className:"ali-doc__error"},n("privateCloud.docReadError"))),i().createElement(Re.Z,{scenes:"document"}))}}et.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var rt=(0,S.$j)(ut)((0,y.Z)()(et)),we=ae=>({userInfo:ae.user}),De="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),tt="".concat("https://doc.coolcollege.cn");class st extends i().Component{constructor(s){var n;super(s);n=this,this.onSaveProgress=(r,a,o)=>{var l=this.props,u=l.mode,P=l.studyInfo,C=l.userInfo,k=C.enterpriseId,W=C.id;u==="learn"&&(0,V.sH)({studyInfo:P,progress:r,page_count:o,recent_start:a,enterpriseId:k,userId:W}).then(F=>{F&&F.data&&(0,pe.Z)(F.data.integral_info||"")})},this.messageFun=function(){var r=(0,O.Z)(L().mark(function a(o){var l,u,P,C,k,W;return L().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(o.data!=="local-resource"){A.next=9;break}if(l=n.props.resourceInfo,u=l.storageType,P=l.playId,!(u&&u==="LOCAL")){A.next=9;break}return A.next=6,ge(P);case 6:C=A.sent,k=C.data,k.code===0&&(W=document.getElementById("local-resource-box"),W.contentWindow.postMessage({msg:"local-auth-key",authKey:k.data.auth_key},"*"));case 9:case"end":return A.stop()}},a)}));return function(a){return r.apply(this,arguments)}}(),this.getInfoFromSettings=(0,O.Z)(L().mark(function r(){var a,o,l;return L().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,V.Gw)();case 2:a=P.sent,o=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],l=(0,B.RG)(a,o),n.setState(l,()=>{n.initDocPage(n.props)});case 6:case"end":return P.stop()}},r)})),this.initDocPage=(0,O.Z)(L().mark(function r(){var a,o,l,u,P,C,k,W,F,A,M,X,re,ie,le,$,Oe,Se,Ae,Qe,Ne,be,Be,xe,Ee,fe,ze,Ye,dt,nt,ot,it,lt,mt,ct=arguments;return L().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(a=ct.length>0&&ct[0]!==void 0?ct[0]:{},o=a.resourceInfo,l=a.mode,u=a.studyInfo,P=a.userInfo,C=n.state.documentPlayerMode,k=o.docType,W=o.docTitle,F=o.url,A=o.studyTimeLimit,M=o.studyTime,X=o.aliUrl,re=o.progress,ie=o.storageType,le=o.playId,$=u.studyType,Oe=u.courseId,Se=u.studyId,Ae=u.resourceId,Qe=P.enterpriseId,Ne=P.id,be=P.isLogin,Be=P.token,xe=C==="compat"&&X.indexOf("preview.imm.aliyun")>-1||ie==="ALIBABA_PRIVATE",!xe){Me.next=11;break}n.setState({showAliReader:!0}),Me.next=31;break;case 11:if(Ee=(0,V.sH)({enterpriseId:Qe,userId:Ne,token:Be,studyInfo:u},!0),fe=$==="studyTask"?2:1,ze=Ie.ZP.SaveProgress.reportStatusInterval(u),Ye={isSaveProgress:be&&l==="learn"&&Ee,isSaveRecord:!1,access_token:Be,userId:Ne,hostUrl:De,courseId:Oe,resourceId:Ae,courseType:1,planId:Se,studyTimeLimit:A,studyTime:M,saveProgressUrl:Ee,type:"eapp",progress:re,saveRecordProgressUrl:ze,actionType:fe},!(ie&&ie==="LOCAL")){Me.next=26;break}return Me.next=18,ge(le);case 18:if(dt=Me.sent,nt=dt.data,nt.code!==0){Me.next=25;break}Ye.auth_key=nt.data.auth_key,Ye.url=F,Me.next=26;break;case 25:return Me.abrupt("return");case 26:ot=JSON.stringify(Ye),it="".concat(W,".").concat(k).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),lt="".concat(tt,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(ot),"&furl=").concat(F,"?attname=").concat(it),ie&&ie==="LOCAL"&&(mt="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),lt="".concat(mt,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(ot),"&furl=").concat(F,"?attname=").concat(it)),n.setState({encodeUrl:lt});case 31:case"end":return Me.stop()}},r)})),this.handleReportStatusInterval=r=>{var a=r.currentPage,o=this.props,l=o.resourceInfo,u=o.mode,P=o.studyInfo,C=o.userInfo,k=l.type,W=P.courseId,F=P.studyId,A=P.resourceId,M=C.enterpriseId,X=C.id,re=C.isLogin,ie="",le="",$=0,Oe=!1;switch(k){case"enterprise":$=1,Oe=!0;break;case"study":ie=F,$=2,Oe=!0;break;case"project":le=F,$=1,Oe=!0;break;default:break}if(!(!Oe||!re)){var Se={plan_id:ie,enterprise_id:M,user_id:X,course_id:W,project_course_id:le,resource_id:A,current_page:a,action_type:$,send_time:Date.parse(new Date)};u==="learn"&&(0,V.Xc)(P,Se)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(s){this.initDocPage(s)}render(){var s=this.props.resourceInfo,n=this.state,r=n.encodeUrl,a=n.documentWatermarkSettings,o=n.showAliReader,l=s.docType,u=s.type,P=s.studyTimeLimit,C=s.studyTime,k=s.aliUrl,W=s.progress,F=s.storageType,A=s.playId;return o?i().createElement(rt,{privateDocId:A,storageType:F,aliUrl:k,docType:l,progress:W,studyTime:C,studyTimeLimit:P,documentWatermarkSettings:a,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:u}):i().createElement("div",{className:"doc-reader-container"},i().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:r,frameBorder:"0",allowFullScreen:!0}),i().createElement(Re.Z,{scenes:"document"}))}}var ke=(0,S.$j)(we)(st),se=t(38979),c=t(90706),h=t(12968),E=t(44208),w=t(60667),x=ae=>({userInfo:ae.user});class z extends i().Component{constructor(){var s;super(...arguments);s=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var n=this.props,r=n.studyInfo,a=n.mode,o=n.userInfo,l=o.enterpriseId,u=o.id;a==="learn"&&(0,B.Gp)({studyInfo:r,enterpriseId:l,userId:u})},this.getInfoFromSettings=(0,O.Z)(L().mark(function n(){var r,a,o;return L().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,V.Gw)();case 2:r=u.sent,a=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],o=(0,B.RG)(r,a),s.setState(o,()=>{s.renderWatermark()});case 6:case"end":return u.stop()}},n)})),this.renderWatermark=()=>{var n=this.props.userInfo,r=this.state.imageWatermark,a=n.name,o=n.unionid,l=n.sourceType,u=n.jobNumber,P=n.position,C=[];r.indexOf("name")>-1&&C.push(i().createElement(w.Z,{dataType:"userName",value:o,name:a,type:l})),r.indexOf("position")>-1&&C.push(i().createElement("span",null,P)),r.indexOf("jobnumber")>-1&&C.push(i().createElement("span",null,u)),r.length>0&&this.setState({watermark:C.map((k,W)=>i().createElement("span",{key:W},k))})},this.handleError=n=>{var r=this.props.onError;r&&r(n)},this.getImageUrl=(0,O.Z)(L().mark(function n(){var r,a,o,l,u,P,C,k,W,F;return L().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(r=s.props,a=r.resourceInfo,o=r.t,l=a.playId,u=a.url,P=a.storageType,C=u,!P){M.next=21;break}if(P!=="ALIBABA_PRIVATE"){M.next=15;break}return M.next=7,(0,V.J7)(l);case 7:if(k=M.sent,!k){M.next=12;break}C=k,M.next=13;break;case 12:return M.abrupt("return",K.default.info(o("privateCloud.docReadError")));case 13:M.next=21;break;case 15:if(P!=="LOCAL"){M.next=21;break}return M.next=18,ge(l);case 18:W=M.sent,F=W.data,F.code===0&&(C="".concat(u,"?auth_key=").concat(F.data.auth_key));case 21:s.setState({imageUrl:[C]},()=>{var X=s.state.imageUrl,re="image-business",ie=document.querySelectorAll(".".concat(re,"-image img"));ie.forEach((le,$)=>{le.onerror=()=>{s.handleError(X[$])}})});case 22:case"end":return M.stop()}},n)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var s="image-business",n=this.props.resourceInfo,r=n.preview,a=r===void 0?!1:r,o=this.state,l=o.watermark,u=o.imageUrl;return i().createElement("div",{className:s},i().createElement(Re.Z,{scenes:"image"}),i().createElement(c.Z,{className:"".concat(s,"-carousel")},u.map((P,C)=>i().createElement("div",{className:"".concat(s,"-image"),key:C.toString()},i().createElement(E.Z,{src:P,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:a})))))}}z.defaultProps={prefixCls:"watch-image-page"};var J=(0,S.$j)(x)((0,y.Z)()(z)),G=ae=>({userInfo:ae.user});class te extends i().Component{constructor(){var s;super(...arguments);s=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,O.Z)(L().mark(function n(){var r,a,o;return L().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,V.Gw)();case 2:r=u.sent,a=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],o=(0,B.RG)(r,a),s.setState(o,()=>{s.renderWatermark()});case 6:case"end":return u.stop()}},n)})),this.renderWatermark=()=>{var n=this.props.userInfo,r=this.state.htmlWatermark,a=n.name,o=n.unionid,l=n.sourceType,u=n.jobNumber,P=n.position,C=[];r.indexOf("name")>-1&&C.push(i().createElement(w.Z,{dataType:"userName",value:o,name:a,type:l})),r.indexOf("position")>-1&&C.push(i().createElement("span",null,P)),r.indexOf("jobnumber")>-1&&C.push(i().createElement("span",null,u)),r.length>0&&this.setState({watermark:C.map((k,W)=>i().createElement("span",{key:W},k))})},this.saveProgress=()=>{var n=this.props,r=n.studyInfo,a=n.mode,o=n.userInfo,l=o.enterpriseId,u=o.id;a==="learn"&&(0,B.Gp)({studyInfo:r,enterpriseId:l,userId:u})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var s="html-business",n=this.props.resourceInfo,r=n.url,a=this.state.watermark;return i().createElement("div",{className:s},i().createElement("div",{className:"".concat(s,"__html-watermark")},a),i().createElement("iframe",{title:"html",className:"".concat(s,"_iframe"),src:r}))}}var ne=(0,S.$j)(G)((0,y.Z)()(te)),Le=t(57068),Te=t(1164),je=ae=>({userInfo:ae.user});class Ce extends i().PureComponent{constructor(){super(...arguments);this.getHost=s=>{var n=s.split("//"),r=n[1].split("/");return[n[0],r[0]].join("//")},this.getScormUrl=()=>{var s=this.props,n=s.studyInfo,r=s.mode,a=s.userInfo,o=s.resourceInfo,l=s.from,u=a.enterpriseId,P=a.id,C=o.url,k=this.getHost(C);if(r==="learn"){var W=(0,T.Z)({userId:P,enterpriseId:u,access_token:localStorage.token,from:l,scormUrl:encodeURIComponent(C),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},n);return"".concat(k).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(Le.stringify(W))}return"".concat(k,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(C))},this.handleOpenScormLink=s=>{Te.Z.targetTo({path:s,isExternalLink:!0})}}render(){var s=this.props.t,n="scorm-business",r=this.getScormUrl(),a=(0,Ue.UI)("SCORM_EXTERNAL_WATCH");return i().createElement("div",{className:n},a?i().createElement("div",{className:"".concat(n,"_scorm")},i().createElement("img",{className:"".concat(n,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),i().createElement("h5",null,s("resourcePlay.scormTip")),i().createElement(N.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(r)},s("resourceLibrary.h5LinkPlayButton"))):i().createElement("iframe",{title:"scorm",className:"".concat(n,"_iframe"),src:r}))}}var Je=(0,S.$j)(je)((0,y.Z)()(Ce));class de extends i().Component{render(){var s=this.props,n=s.visible,r=s.title,a=s.onCancel,o=s.t,l=i().createElement("span",null,r);return i().createElement(ye.ZP,{visible:n,title:l,onCancel:a,footer:null},i().createElement("div",{className:"ban-preview"},i().createElement("div",{className:"ban-preview-center"},i().createElement("img",{src:_(),alt:"picture"}),i().createElement("h2",null,o("localStorage.tip")),i().createElement("p",null,o("localStorage.banPreview"))),i().createElement("hr",null),i().createElement(N.Z,{type:"primary",className:"know",onClick:a},o("localStorage.onKnow"))))}}var ht=(0,y.Z)()(de);class pt extends d.Component{constructor(){var s;super(...arguments);s=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=n=>{var r=this.props.previewInfo,a=r.onCancel;this.onCancel(),a(n)},this.onGetVideoBusiness=n=>{var r=this.props.onRef,a=r===void 0?()=>{}:r;this.videoBusiness=n,a(n)},this.onFullScreen=()=>{var n=this.state.fullScreen;this.setState({fullScreen:!n})},this.handleJudgeNetwork=(0,O.Z)(L().mark(function n(){var r,a,o,l,u,P,C,k,W,F,A,M=arguments;return L().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(r=M.length>0&&M[0]!==void 0?M[0]:null,a=s.props,o=a.resourceInfo,l=a.watchType,u=o.storageType,P=o.playId,C=o.originUrl,k=l==="image"||l==="video"||l==="doc",W=null,r?W=r:C?W=C:W=o.url,!(k&&W&&P&&u&&u==="LOCAL")){re.next=22;break}return re.prev=7,re.next=10,(0,V.NY)(P);case 10:return F=re.sent,re.next=13,(0,V.Hy)(W,F);case 13:A=re.sent,A?s.setState({showBan:"no"}):s.setState({showBan:"yes"}),re.next=20;break;case 17:re.prev=17,re.t0=re.catch(7),s.setState({showBan:"yes"});case 20:re.next=23;break;case 22:s.setState({showBan:"no"});case 23:case"end":return re.stop()}},n,null,[[7,17]])})),this.renderOuter=()=>{var n=this.props,r=n.prefixCls,a=n.watchType,o=n.onCurrentTime,l=o===void 0?()=>{}:o;return i().createElement("div",{className:"".concat(r,"-outer")},a==="video"&&i().createElement(We,(0,U.Z)({onCurrentTime:l,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),a==="doc"&&i().createElement(ke,this.props),a==="image"&&i().createElement(J,(0,U.Z)({onError:this.handleJudgeNetwork},this.props)),a==="html"&&i().createElement(ne,this.props),a==="scorm"&&i().createElement(Je,this.props))},this.renderFooter=()=>{var n=this.props,r=n.resourceInfo.storageType,a=n.t,o=this.state.showBan,l=o!==""&&o==="yes";return r&&r!=="PUBLIC_CLOUD"&&l?i().createElement(N.Z,{type:"primary",className:"know",onClick:this.onCancelModel},a("localStorage.onKnow")):null}}componentDidMount(){var s=this.props.mode;s==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(s){s.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var s=this.state,n=s.showBan,r=s.fullScreen,a=this.props,o=a.mode,l=a.previewWay,u=a.previewInfo,P=a.prefixCls,C=a.t,k=a.showEnlarge,W=a.footer,F=W===void 0?null:W,A=u.visible,M=u.destroyOnClose,X=u.title,re=n!==""&&n==="yes",ie=n!==""&&n==="no";return i().createElement(d.Fragment,null,o==="preview"&&l==="popups"&&i().createElement(ye.ZP,{destroyOnClose:M,visible:A,title:X,onCancel:this.onCancelModel,footer:F||this.renderFooter(),wrapClassName:"".concat(P,"-resource ").concat(r?"".concat(P,"-full"):"")},k&&i().createElement("div",{className:"".concat(P,"-resource-out-icon"),onClick:this.onFullScreen},r?i().createElement(e.Z,{className:"".concat(P,"-resource-icon")}):i().createElement(p.Z,{className:"".concat(P,"-resource-icon")})),i().createElement("div",{className:"".concat(P,"-inner")},!A&&i().createElement(m.Z,{size:"large"}),A&&ie&&this.renderOuter(),re&&i().createElement(R,null))),(o==="learn"||l==="page")&&ie&&this.renderOuter(),(o==="learn"||l==="page")&&i().createElement(ht,{visible:re,title:X||C("questionn.warmHint"),onCancel:this.onCancel}))}}pt.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var vt=(0,y.Z)("translation",{withRef:!0})(pt)},41225:function(ue,ee,t){"use strict";t.d(ee,{Hy:function(){return O},NY:function(){return I},Gw:function(){return L},sH:function(){return e},BR:function(){return d},qp:function(){return p},Xc:function(){return y},J7:function(){return i}});var Z=t(57361),m=t(9754),Y=t.n(m),N=t(10237),U=t(37055),O=function(){var v=(0,Z.Z)(Y().mark(function _(){var g,R,T,b,K,S,B,V=arguments;return Y().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return g=V.length>0&&V[0]!==void 0?V[0]:"",R=V.length>1&&V[1]!==void 0?V[1]:"",T="",g.startsWith("http")?(b=g.split("//")[1].trim(),K=b.split("/")[0],T="https://".concat(K,"/cms/ticket")):(S=g.split("/")[0],T="https://".concat(S,"/cms/ticket")),j.prev=4,j.next=7,N.ZQ.get({url:T,params:{ticket:R}});case 7:if(B=j.sent,!(B.status===200||B.status===403)){j.next=10;break}return j.abrupt("return",Promise.resolve(!0));case 10:return j.abrupt("return",Promise.resolve(!1));case 13:return j.prev=13,j.t0=j.catch(4),j.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return j.stop()}},_,null,[[4,13]])}));return function(){return v.apply(this,arguments)}}(),I=function(){var v=(0,Z.Z)(Y().mark(function _(g){var R,T;return Y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,N.ZQ.get({url:U.ZP.local.getTicket(g)});case 2:if(R=K.sent,T=R.data,T.code!==0){K.next=6;break}return K.abrupt("return",Promise.resolve(T.data.ticket));case 6:return K.abrupt("return",Promise.resolve(""));case 7:case"end":return K.stop()}},_)}));return function(g){return v.apply(this,arguments)}}(),L=function(){var v=(0,Z.Z)(Y().mark(function _(){var g;return Y().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,N.WY.get({url:U.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return g=T.sent,T.abrupt("return",g.data.list);case 4:case"end":return T.stop()}},_)}));return function(){return v.apply(this,arguments)}}(),d=function(){var v=(0,Z.Z)(Y().mark(function _(g){var R,T,b;return Y().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,N.WY.get({url:U.ZP.localStorage.getPravateVideoUrl(g)});case 2:if(R=S.sent,R.data.code!==0){S.next=6;break}return T=R.data.data.videoPlayInfo,b=T===void 0?"":T,S.abrupt("return",b);case 6:return S.abrupt("return","");case 7:case"end":return S.stop()}},_)}));return function(g){return v.apply(this,arguments)}}(),i=function(){var v=(0,Z.Z)(Y().mark(function _(g){var R,T,b;return Y().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return R=U.ZP.localStorage.getPravateDocUrl(g),S.prev=1,S.next=4,N.WY.get({url:R});case 4:if(T=S.sent,b=T.data,!(b.code===0&&b.data)){S.next=8;break}return S.abrupt("return",b.data.docResourceDownloadUrl||"");case 8:return S.abrupt("return","");case 11:return S.prev=11,S.t0=S.catch(1),S.abrupt("return","");case 14:case"end":return S.stop()}},_,null,[[1,11]])}));return function(g){return v.apply(this,arguments)}}(),e=function(_){var g=_.studyInfo,R=_.progress,T=_.recent_start,b=_.page_count,K=_.enterpriseId,S=_.userId,B=_.token,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Q,j=g.studyType;if(j==="studyTask"&&(Q=U.ZP.SaveProgress.studySaveProgress(g)),(j==="course"||j==="enterprise")&&(Q=U.ZP.SaveProgress.enterpriseCourseSaveProgress(g)),j==="studyProject"&&(Q=U.ZP.SaveProgress.projectSaveProgress(g)),j==="platform"&&(Q="".concat(U.ZP.SaveProgress.platformCourseSaveProgress(g))),(V||j==="platform")&&(Q+="?enterprise_id=".concat(K,"&user_id=").concat(S)),V)return Q+="&access_token=".concat(B||localStorage.getItem("token")),Q;var f={progress:R,recent_start:T,tempTime:Date.parse(new Date)};return b&&(f.page_count=b),g.evaluationId&&(f.evaluation_id=g.evaluationId),N.WY.post({url:Q,data:f})},p=v=>{var _=v.popupId,g=v.planId,R=v.resourceId,T=v.type;return N.WY.post({url:U.ZP.TaskStudyRecord.setRandomPopupRecord(g),data:{course_id:R,terminal_type:"PC",popup_id:_,type:T}})},y=(v,_)=>{var g=U.ZP.SaveProgress.reportStatusInterval(v);return N.WY.post({url:g,data:_})}},21594:function(ue,ee,t){"use strict";t.d(ee,{pu:function(){return U},RG:function(){return O},Gp:function(){return I},O8:function(){return L}});var Z=t(88986),m=t(69164),Y=t(38642),N=t(41225),U=d=>{var i="";switch(d){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":i="studyTask";break;case"enterprise":i="enterprise";break;case"courseProject":i="studyProject";break;case"platform":case"purchased":i="platform";break;default:break}return i},O=(d,i)=>{var e={};return i.forEach(p=>{var y=d.find(T=>T.type===p.type);if(y)if(p.type==="document_duration_limit"){var v=y.action_list,_=v.find(T=>T.type==="random_popup_verification");!(0,Y.UI)("RANDOM_POPUP_VERIFY")||!_?e[p.name]="CLOSE":e[p.name]=_.param.checked==="true"?"OPEN":"CLOSE"}else if(p.type==="document_player"){var g=JSON.parse(y.actions);g.forEach(T=>{T.param.checked==="true"&&(e[p.name]=T.type)})}else if(p.type==="dynamic_watermark"){var R=y.action_list;R.forEach(T=>{T.type===p.resourceType&&T.param.checked==="true"&&(e[p.name]=T.param.comment)})}else e[p.name]=y.switch_status}),e},I=d=>{(0,N.sH)((0,Z.Z)({progress:100,recent_start:1},d)).then(i=>{i&&i.data&&(0,m.Z)(i.data.integral_info||"")})},L=d=>{var i=document.createElement("div");return i.innerHTML=d,i.childNodes[0]}},89231:function(ue,ee,t){"use strict";var Z=t(12924),m=t.n(Z),Y=t(91768),N=t(6793),U=t(84874),O=t(60667),I=t(56932),L=t.n(I);class d extends m().Component{constructor(){super(...arguments);this.handleDeleteComment=e=>{var p=this.props.onDeleteComment;p&&p(e)}}render(){var e=this.props,p=e.prefixCls,y=e.commentsList,v=e.t;return y.length>0?m().createElement("div",{className:p},y.map((_,g)=>m().createElement("div",{key:g,className:"".concat(p,"__item")},m().createElement("div",{className:"".concat(p,"__user-avatar")},m().createElement("img",{src:_.avatar||L(),alt:"\u56FE\u7247\u52A0\u8F7D\u5931\u8D25"})),m().createElement("div",{className:"".concat(p,"__content")},m().createElement("div",{className:"".concat(p,"__content-top")},m().createElement("div",{className:"".concat(p,"__content-top__left")},m().createElement("div",{className:"".concat(p,"__user-name")},m().createElement(O.Z,{dataType:"userName",value:_.sync_user_id,name:_.name,type:_.source_type})),m().createElement("div",{className:"".concat(p,"__comment-time")},(0,N.TC)(_.createTime))),m().createElement("div",{className:"".concat(p,"__content-top__right"),onClick:()=>this.handleDeleteComment(_.id)},v("common.delete"))),m().createElement("div",{className:"".concat(p,"__comment")},_.content))))):m().createElement("div",{className:"".concat(p,"__empty")},m().createElement(U.Z,{iconClass:"icon-pinglunkong",size:"50px"}),m().createElement("p",null,v("course.noComments")))}}d.defaultProps={prefixCls:"comments-list"},ee.Z=(0,Y.Z)()(d)},96016:function(ue,ee,t){"use strict";var Z=t(34669),m=t(82833),Y=t(12924),N=t.n(Y),U=t(78138),O=t.n(U),I=t(80430),L=t(60667);class d extends N().Component{constructor(e){super(e);this.state={}}render(){var e=this.props,p=e.prefixCls,y=e.watchRecordsList;return N().createElement("div",{className:p},y.map((v,_)=>N().createElement("div",{key:_,className:"".concat(p,"__item")},N().createElement("div",{className:"".concat(p,"__user")},N().createElement("div",{className:"".concat(p,"__user__avatar")},v.avatar?N().createElement("img",{src:v.avatar,alt:"\u56FE\u7247\u52A0\u8F7D\u5931\u8D25"}):N().createElement("span",null,N().createElement(L.Z,{dataType:"userName",value:v.sync_user_id,name:v.userName,type:v.source_type}))),N().createElement("div",{className:"".concat(p,"__user__info")},N().createElement("div",{className:"".concat(p,"__user__name")},N().createElement(L.Z,{dataType:"userName",value:v.sync_user_id,name:v.userName,type:v.source_type})),N().createElement("div",{className:"".concat(p,"__user__dept")},"(",v.user_info?N().createElement(I.Z,{list:v.user_info.department_infos,displayAll:!0}):v.departName,")"))),N().createElement("div",{className:"".concat(p,"__time")},O()(v.updateTime).format("YYYY-MM-DD HH:mm")),N().createElement("div",{className:"".concat(p,"__progress")},N().createElement(m.Z,{percent:v.progress,strokeWidth:7})))))}}d.defaultProps={prefixCls:"watch-records"},ee.Z=d},9849:function(ue,ee,t){"use strict";t.d(ee,{Ej:function(){return U},kL:function(){return O},T:function(){return I},NU:function(){return L},FL:function(){return d},fn:function(){return i},bm:function(){return e},jY:function(){return p},Vs:function(){return y},li:function(){return v},Nl:function(){return _},YF:function(){return g},Q6:function(){return R},zW:function(){return T},Zv:function(){return b},Qg:function(){return K},qc:function(){return S},Ve:function(){return V},rS:function(){return Q},Rh:function(){return j}});var Z=t(10237),m=t(37055),Y=t(38642),N={zaraFlag:(0,Y.UI)("ZARA_H5")};function U(f,D){var H=m.ZP.StudyProjectList.startStudy(f);return Z.WY.post({url:H,data:D})}function O(f){var D=m.ZP.Common.enroll(f);return Z.WY.post({url:D})}function I(f,D){var H=f.courseId,q=m.ZP.StudyProjectList.studyProject(H);return Z.WY.get({url:q,params:D})}function L(f){var D=f.id,H=N.zaraFlag?m.m1.getAssessmentProjectInfo(D):m.m1.getProjectInfo(D);return Z.WY.get({url:H})}function d(f){var D=f.courseId,H=m.ZP.EnterpriseCourse.addScanCount(D);return Z.WY.post({url:H})}function i(){var f=m.ZP.StudyProjectList.getAccountInfo();return Z.WY.get({url:f})}function e(f){var D=m.ZP.StudyProjectList.projectCertiUrl(f);return Z.WY.get({url:D})}function p(f){var D=f.courseId,H=m.ZP.Courses.like(D);return Z.WY.post({url:H})}function y(f){var D=m.ZP.EnterpriseCourse.addCommentAndScore();return Z.qg.post({url:D,data:f})}function v(f){var D=m.ZP.EnterpriseCourse.getCourseComments();return Z.WY.get({url:D,params:f})}function _(f){var D=m.ZP.EnterpriseCourse.addCommentAndScore();return Z.qg.post({url:D,data:f})}function g(f){var D=m.ZP.EnterpriseCourse.deleteComment();return Z.qg.post({url:D,data:f})}function R(f,D){var H=m.ZP.StudyProjectList.projectStudyRecord(f);return Z.WY.get({url:H,params:D})}function T(f){var D=m.ZP.DingSpaceId.getSpaceId();return Z.WY.get({url:D,params:f})}function b(f,D){var H=m.ZP.PlatformCourse.learningUrl(f);return Z.WY.get({url:H,params:D})}function K(f){var D=m.ZP.MyExamTask.examIntro({examId:f});return Z.WY.get({url:D})}function S(f){var D=m.ZP.MyExamTask.examCheckStatus({examId:f});return Z.WY.get({url:D})}function B(f,D){var H=CONFIG.Common.getOperateLog(f);return formDataRequest.get({url:H,params:D})}function V(f,D){var H=N.zaraFlag?m.ZP.StudyProjectList.changeCustomStatus(f):m.ZP.StudyProjectList.changeStatus(f);return Z.WY.post({url:H,data:D})}function Q(f){var D=m.ZP.StudyProjectList.getProjectReward(f);return Z.WY.get({url:D})}function j(f){var D=m.ZP.subsidyGz.subsidyCourseSetting(f);return Z.WY.get({url:D})}},55774:function(ue,ee,t){"use strict";t.r(ee),t.d(ee,{default:function(){return st}});var Z=t(62029),m=t(71194),Y=t(57016),N=t(34792),U=t(48086),O=t(88986),I=t(57361),L=t(9754),d=t.n(L),i=t(12924),e=t.n(i),p=t(91768),y=t(76651),v=t(57068),_=t(28336),g=t(57663),R=t(71577),T=t(18106),b=t(88108),K=t(47673),S=t(4107),B=t(59239),V=t(96016),Q=t(89231),j=t(20228),f=t(11382),D={init:"",loading:"loading"};class H extends e().Component{constructor(se){super(se);this.loadMore=()=>{var c=this.state.hasNextPage;c&&(setTimeout(()=>{this.setState({loaderState:D.loading},2e3)}),this.props.onLoadMore(()=>{this.setState({loaderState:D.init})}))},this.state={loaderState:D.init}}render(){var se=this.props,c=se.children,h=se.hasNextPage,E=this.state.loaderState,w=h==="false"?e().createElement("div",{className:"tloader-btn"},this.props.t("other.isEnd")):e().createElement("div",{className:"tloader-btn loadMore",onClick:()=>this.props.onLoadMore()},this.props.t("course.loadMore"));return e().createElement("div",null,E==="loading"?e().createElement(f.Z,null):e().createElement("div",null,e().createElement("div",{className:"tloader-body"},c),e().createElement("div",{className:"tloader-body"},w)))}}var q=(0,p.Z)()(H),me=t(94233),he=t(67869),Pe=t(62350),ve=t(75443),_e=t(28216),pe=t(86726),Ie=t(65202),ge=t(56932),oe=t.n(ge),ye=t(60667),Ue=S.Z.TextArea;class ce extends e().Component{constructor(se){super(se);this.newReplyVoList=[],this.childOpen=c=>{this.props.changeShowMore(c)},this.CommentReply=()=>{var c=this.state,h=c.replyContent,E=c.replyComments,w=c.comment_id;if(this.setState({replyContent:h.trim()}),!h.trim())return U.default.warning(this.props.t("other.replyNotBeEmpty")),!1;this.props.onReply&&this.props.onReply(h,E,w),this.setState({replyContent:"",num:140})},this.openInput=c=>{var h=c.comments.isReply;h||(this.props.changeReplyModal(c),this.setState({replyComments:c.comments,targetName:{user_id:c.comments.author.user_id,source_type:c.comments.author.source_type,name:c.comments.author.name}}))},this.handleReplyContentChange=c=>{var h=c.target.value;this.setState({replyContent:h,num:140-h.length})},this.handleDelete=(c,h)=>{this.props.deleteReply(c,h)},this.deleteComment=c=>{var h=this.props.t;Y.Z.confirm({title:h("common.tip"),content:h("course.deleteCommentTips"),okText:h("common.ok"),cancelText:h("common.cancel"),onOk:()=>{this.props.onRowDelete(c)},onCancel(){}})},this.renderCommentSelf=c=>{var h=this.props.comments.id;return c.self?e().createElement("div",{className:"notice-comments-right-top-box-btn"},e().createElement(e().Fragment,null,e().createElement("div",{className:"notice-comments-right-top-item",onClick:()=>this.deleteComment(h)},e().createElement("span",null,this.props.t("common.delete")))),e().createElement("div",{className:"notice-comments-right-top-item",onClick:()=>this.openInput({comments:c,type:"comment"})},e().createElement("span",null,this.props.t("other.reply")))):e().createElement("div",{className:"notice-comments-right-top-item",onClick:()=>this.openInput({comments:c,type:"comment"})},e().createElement("span",null,this.props.t("other.reply")))},this.renderCommentDelete=()=>{var c=this.props.comments.id,h=this.state.allowActions,E=(0,pe.H3)("comment_delete",h);return E?e().createElement("div",{className:"notice-comments-right-top-box-btn"},e().createElement(e().Fragment,null,e().createElement("div",{className:"notice-comments-right-top-item",onClick:()=>this.deleteComment(c)},e().createElement("span",null,this.props.t("common.delete"))))):null},this.renderCommentItems=c=>{var h=this.props.comments.id;return c.self?e().createElement("div",{className:"comment__reply__top__btn"},e().createElement(e().Fragment,null,e().createElement(ve.Z,{title:this.props.t("other.isDeleteComment"),placement:"topLeft",onConfirm:()=>this.handleDelete(c.id,h)},e().createElement("span",{className:"comment__reply__top__reply"},this.props.t("common.delete")))),e().createElement("span",{className:"comment__reply__top__reply",onClick:()=>this.openInput({comments:c,type:"reply"})},this.props.t("other.reply"))):e().createElement("span",{className:"comment__reply__top__reply",onClick:()=>this.openInput({comments:c,type:"reply"})},this.props.t("other.reply"))},this.renderCommentDeleteItems=c=>{var h=this.props.comments.id,E=this.state.allowActions,w=(0,pe.H3)("comment_delete",E);return w?e().createElement("div",{className:"comment__reply__top__btn"},e().createElement(e().Fragment,null,e().createElement(ve.Z,{title:this.props.t("other.isDeleteComment"),placement:"topLeft",onConfirm:()=>this.handleDelete(c.id,h)},e().createElement("span",{className:"comment__reply__top__reply"},this.props.t("common.delete"))))):null},this.state={replyContent:"",replyComments:{},comment_id:this.props.comments.id,num:140,targetName:"",allowActions:(0,pe.V9)("notice",JSON.parse(localStorage.getItem("modules")))}}render(){var se=(0,Ie.p)(),c=this.props,h=c.comments,E=c.relay,w=c.appType,x=c.showMore,z=localStorage.getItem("qyWechatBook"),J=w==="wx_app"&&z==="true",G=h.author,te=h.reply,ne=h.id,Le=h.isReply;x?this.newReplyVoList=te.slice(0,2):this.newReplyVoList=te;var Te=this.state,je=Te.replyContent,Ce=Te.num,Je=Te.targetName;return e().createElement("div",{className:"notice-comments"},e().createElement("div",{className:"notice-comments-box"},e().createElement("div",{className:"notice-comments-style"},e().createElement("div",{className:"notice-comments-left"},e().createElement(he.C,{className:"notice-comments-left-img",src:G.avatar?G.avatar:oe(),alt:e().createElement(ye.Z,{dataType:"userName",value:G.user_id,name:G.name,type:G.source_type}),key:G.id})),e().createElement("div",{className:"notice-comments-right"},e().createElement("div",{className:"notice-comments-right-top"},e().createElement("div",null,e().createElement("span",{className:"notice-comments-right-top-name"},e().createElement(ye.Z,{dataType:"userName",value:G.user_id,name:G.name,type:G.source_type})),e().createElement("span",{className:"notice-comments-right-top-time"},h.date_str)),e().createElement("div",{className:"notice-comments-right-top-box"},E?this.renderCommentSelf(h):this.renderCommentDelete())),e().createElement("div",{className:"notice-comments-right-bottom"},h.content))),e().createElement("div",{className:"comment__reply"},e().createElement("div",null,this.newReplyVoList.map(de=>e().createElement("div",{key:de.id,className:"comment__block"},e().createElement("div",{className:"comment__reply__top"},e().createElement("div",null,e().createElement("span",{style:{color:se},className:"comment__reply__top__name"},e().createElement(ye.Z,{dataType:"userName",value:de.author.user_id,name:de.author.name,type:de.author.source_type}),e().createElement("span",{className:"comment__reply__top__replyBtn"},this.props.t("other.reply")),e().createElement(ye.Z,{dataType:"userName",value:de.target.user_id,name:de.target.name,type:de.target.source_type}),":"),e().createElement("span",{className:"comment__reply__top__time"},de.date_str)),e().createElement("div",null,E?this.renderCommentItems(de):this.renderCommentDeleteItems(de))),e().createElement("div",{className:"comment__reply__bottom"},de.content)))),te.length>2&&(x?e().createElement("div",{className:"isColl",key:"unfold",onClick:()=>this.childOpen(ne)},this.props.t("other.displayMore")):e().createElement("div",{className:"isColl",key:"fold",onClick:()=>this.childOpen(ne)},this.props.t("common.collapse"))),Le?e().createElement("div",{className:"replyInput",id:h.id},e().createElement(Ue,{rows:5,maxLength:140,value:je,onChange:this.handleReplyContentChange,placeholder:"".concat(this.props.t("other.reply")).concat(J?"":Je.name,":")}),e().createElement("div",{className:"comment__num"},this.props.t("other.alsoEnter"),Ce,this.props.t("other.word")),e().createElement("div",{className:"reply_btn"},e().createElement(R.Z,{size:"small",className:"ant-button",onClick:this.CommentReply},this.props.t("other.reply")))):null)))}}var Re=(0,_e.$j)(ke=>({appType:ke.user.appType}))((0,p.Z)()(ce)),Ve=t(84874);class Ge extends e().Component{constructor(se){super(se);this.deleteReply=(c,h)=>{this.props.deleteReply(c,h)},this.handleDelete=c=>{this.props.onRowDelete(c)},this.handleReply=(c,h,E)=>{this.props.onReply(c,h,E)},this.loadMore=()=>{this.props.loadMore()},this.changeShowMore=c=>{this.props.changeShowMore(c)},this.changeReplyModal=c=>{this.props.changeReplyModal(c)},this.state={}}componentDidMount(){}render(){var se=this.props,c=se.relay,h=se.hasNextPage,E=se.comments;return e().createElement(e().Fragment,null,E&&E.length>0?e().createElement(q,{className:"main",onLoadMore:this.loadMore,hasNextPage:h},E.map(w=>e().createElement(Re,{key:w.id,relay:c,comments:w,showMore:w.showMore,onReply:this.handleReply,deleteReply:this.deleteReply,onRowDelete:this.handleDelete,changeShowMore:this.changeShowMore,changeReplyModal:this.changeReplyModal}))):e().createElement("div",{className:"noComments"},e().createElement(Ve.Z,{iconClass:"icon-pinglunkong",size:"50px"}),e().createElement("div",{className:"noComments__word"},this.props.t("other.noComment"))))}}var Ze=(0,p.Z)()(Ge),Fe=t(2396),We=S.Z.TextArea,He=b.Z.TabPane;class Ke extends e().Component{constructor(se){super(se);this.handleAddComment=c=>{c.preventDefault(),this.props.form.validateFields((h,E)=>{if(!h){var w=E.comment;this.props.addComments(w),this.props.form.resetFields()}})},this.handleDeleteComment=c=>{this.props.deleteComment(c)},this.handleLoadMoreComments=()=>{this.props.handleLoadMoreComments()},this.handleLoadMoreRecords=()=>{this.props.handleLoadMoreRecords()},this.changeReplyModal=c=>{this.props.changeReplyModal(c)},this.replyComment=(c,h,E)=>{this.props.replyComment(c,h,E)},this.deleteReply=(c,h)=>{this.props.deleteReply(c,h)},this.changeShowMore=c=>{this.props.changeShowMore(c)},this.loadMore=()=>{this.props.loadMore()},this.handleContentLimit=c=>{(0,Fe.$s)(c.target.value)>1e3&&(c.target.value=c.target.value.substring(0,(0,Fe.rw)(c.target.value,1e3)))},this.state={}}render(){var se=this.props,c=se.t,h=se.Cls,E=this.props,w=E.watchRecordsList,x=E.totalRecords,z=E.recordsParams,J=E.courseCommentsList,G=E.commentsParams,te=E.totalComments,ne=localStorage.getItem("themeColor")||"#516AE6",Le=this.props.form.getFieldDecorator,Te=y.m8.location.query.isNewVersion;return e().createElement(b.Z,{defaultActiveKey:"1",onChange:this.handleTabChange,size:"large"},e().createElement(He,{tab:"".concat(c("course.comments")," (").concat(te,")"),key:"2"},e().createElement("div",{className:"".concat(h,"__comments")},e().createElement("div",{className:"".concat(h,"__comments__add")},e().createElement(B.Z,{layout:"vertical"},e().createElement(B.Z.Item,null,Le("comment",{rules:[{required:!0,message:c("course.commentTips")}]})(e().createElement(We,{onChange:this.handleContentLimit,className:"".concat(h,"__comments__add__textarea"),placeholder:c("course.commentHere")})))),e().createElement("div",{className:"".concat(h,"__comments__add__button")},e().createElement(R.Z,{type:"primary",onClick:this.handleAddComment},c("course.comment")))),Te==="true"?e().createElement(Ze,{relay:!0,comments:J,loadMore:this.loadMore,onRowDelete:this.handleDeleteComment,onReply:this.replyComment,deleteReply:this.deleteReply,hasNextPage:G.hasNextPage,changeShowMore:this.changeShowMore,changeReplyModal:this.changeReplyModal}):e().createElement(e().Fragment,null,e().createElement(Q.Z,{commentsList:J,onDeleteComment:this.handleDeleteComment}),G.hasNextPage?e().createElement("div",{className:"".concat(h,"__load-more"),style:{color:ne}},e().createElement("span",{onClick:this.handleLoadMoreComments}," ",c("course.loadMore"))):null))),e().createElement(He,{tab:"".concat(c("course.watchHistory"),"(").concat(x,")"),key:"3"},e().createElement(V.Z,{watchRecordsList:w}),z.hasNextPage?e().createElement("div",{className:"".concat(h,"__load-more"),style:{color:ne}},e().createElement("span",{onClick:this.handleLoadMoreRecords}," ",c("course.loadMore"))):null))}}Ke.defaultProps={Cls:"mini-course-bottom"};var $e=B.Z.create({name:"comments-form"})((0,p.Z)()(Ke)),ut=t(13254),Xe=t(14277);class qe extends e().Component{constructor(se){super(se);this.handleCourse=c=>{this.props.handleCourse(c)},this.state={}}render(){var se=this.props,c=se.Cls,h=se.t,E=se.relatedCourseList;return e().createElement("div",{className:"".concat(c)},e().createElement("h5",{className:"".concat(c,"__title")},h("community.aboutRecommend")),E.length?e().createElement("ul",null,E.map(w=>e().createElement("li",{className:"".concat(c,"__item"),key:w.id,onClick:()=>this.handleCourse(w)},e().createElement("span",{className:"".concat(c,"__item__img")},e().createElement("img",{src:w.cover,alt:""})),e().createElement("div",{className:"".concat(c,"__item__right")},e().createElement("div",{className:"".concat(c,"__item__title")},w.title),e().createElement("div",{className:"".concat(c,"__item__teacher")},h("course.lecturer"),"\uFF1A",w.teacher_type==="inside"?e().createElement(ye.Z,{dataType:"userName",value:w.teacher_sync_user_id,name:w.teacherName,type:w.teacher_source_type}):w.teacherName),e().createElement("div",{className:"".concat(c,"__item__count")},e().createElement("span",null,e().createElement(Ve.Z,{iconClass:"iconComment",color:"#C0C2CB"}),w.commentCount),e().createElement("span",null,e().createElement(Ve.Z,{iconClass:"icon-dianzan",color:"#C0C2CB"}),w.likeCount)))))):e().createElement(Xe.Z,{image:Xe.Z.PRESENTED_IMAGE_SIMPLE}))}}qe.defaultProps={Cls:"related-suggest-box"};var at=(0,p.Z)()(qe),et=t(42837),rt=t(76466),we=t(37055),De=t(10237);class tt extends e().Component{constructor(se){var c;super(se);c=this,this.initData=()=>{this.setState({videoFlag:!1},()=>{this.getEnterpriseCourse(),this.collectPlayCountStatistics(),this.getCourseRecord(),this.getCourseList(),this.getWatchEnterpriseCourseList(),this.addScanCount(),y.m8.location.query.isNewVersion==="true"?this.getCourseNewComments():this.getCourseComments()})},this.addScanCount=()=>{De.WY.post({url:we.ZP.EnterpriseCourse.addScanCount(y.m8.location.query.courseId),params:{}})},this.collectPlayCountStatistics=()=>{(0,_.t2)({planId:y.m8.location.query.courseId})},this.getEnterpriseCourse=(0,I.Z)(d().mark(function h(){var E,w;return d().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return E=y.m8.location.query.courseId,z.next=3,De.WY.get({url:we.ZP.EnterpriseCourse.getEnterpriseCourse(),params:{id:E,appType:localStorage.getItem("loginMode")==="STORE"?"store":""}});case 3:w=z.sent,c.setState({enterpriseCourseInfo:w.data});case 5:case"end":return z.stop()}},h)})),this.getWatchEnterpriseCourseList=(0,I.Z)(d().mark(function h(){var E,w,x,z,J,G,te,ne,Le,Te;return d().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,(0,_.Qq)({courseId:y.m8.location.query.courseId});case 2:E=Ce.sent,w=E.data.resources[0],x=w.url,z=w.path,J=w.recent_start,G=w.progress,te=w.duration,ne=w.id,Le=w.contentType,Te=y.m8.location.query.courseId,c.setState({resourcePlayInfo:{from:"course",mode:"learn",watchType:"video",studyInfo:{courseId:Te,studyId:ne,resourceId:ne,studyType:"enterprise",evaluationId:null},resourceInfo:{source:{FD:x,OD:z},contentType:Le},autoPlay:!0,draggable:!0,playingVideo:{recentStart:y.m8.location.query.startTime||J,progress:G,duration:te,auditionType:0,auditionLength:0}},videoFlag:!0});case 6:case"end":return Ce.stop()}},h)})),this.getCourseRecord=(0,I.Z)(d().mark(function h(){var E,w,x,z,J,G;return d().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return E=c.state,w=E.watchRecordsList,x=E.recordsParams,z=x.pageNumber,J={courseId:y.m8.location.query.courseId,pageNumber:z,pageSize:20,timestamp:Date.parse(new Date)},ne.next=5,De.WY.get({url:we.ZP.EnterpriseCourse.getCourseRecord(),params:J});case 5:G=ne.sent,c.setState({watchRecordsList:w.concat(G.data.list),recordsParams:(0,O.Z)((0,O.Z)({},x),{},{hasNextPage:G.data.hasNextPage}),totalRecords:G.data.total});case 7:case"end":return ne.stop()}},h)})),this.getCourseComments=(0,I.Z)(d().mark(function h(){var E,w,x,z,J,G;return d().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return E=c.state,w=E.courseCommentsList,x=E.commentsParams,z=x.pageNumber,J={courseId:y.m8.location.query.courseId,pageNumber:z,timestamp:Date.parse(new Date),pageSize:10},ne.next=5,De.WY.get({url:we.ZP.EnterpriseCourse.getCourseComments(),params:J});case 5:G=ne.sent,c.setState({courseCommentsList:w.concat(G.data.list),commentsParams:(0,O.Z)((0,O.Z)({},x),{},{hasNextPage:G.data.hasNextPage}),totalComments:G.data.total});case 7:case"end":return ne.stop()}},h)})),this.getCourseNewComments=function(){var h=(0,I.Z)(d().mark(function E(w){var x,z;return d().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return c.getTotalComment(),x=c.state.commentsParams,G.next=4,De.WY.get({url:we.ZP.miniCourse.commentList(),params:{resource_id:y.m8.location.query.courseId,page_number:1,page_size:x.pageNumber*10}});case 4:z=G.sent,z.data.list&&(z.data.list.forEach(te=>{te.isReply=!1,te.id!==w&&(te.reply&&te.reply.length>2?te.showMore=!0:te.showMore=!1),te.reply&&te.reply.forEach(ne=>{ne.isReply=!1})}),c.setState({courseCommentsList:z.data.list,commentsParams:(0,O.Z)((0,O.Z)({},x),{},{hasNextPage:z.data.has_next_page})}));case 6:case"end":return G.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),this.getTotalComment=(0,I.Z)(d().mark(function h(){var E;return d().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,De.WY.get({url:we.ZP.miniCourse.commentCount(),params:{resource_id:y.m8.location.query.courseId,resource_type:"course"}});case 2:E=x.sent,E.data&&c.setState({totalComments:E.data.count});case 4:case"end":return x.stop()}},h)})),this.changeReplyModal=h=>{var E=this.state.courseCommentsList,w=h.comments;E&&E.forEach(x=>{if(h.type==="comment")x.id===w.id?x.isReply=!0:x.isReply=!1;else{var z=!1;x.reply&&x.reply.forEach(J=>{J.id===w.id&&(z=!0)}),z?x.isReply=!0:x.isReply=!1}this.setState({courseCommentsList:E})})},this.getCourseList=(0,I.Z)(d().mark(function h(){var E;return d().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,De.WY.get({url:we.ZP.Courses.getCourseListByAuth(),params:{classifyId:y.m8.location.query.classifyId,classifyType:"micro_course",pageNumber:1,pageSize:10,filterCourseId:y.m8.location.query.courseId}});case 2:E=x.sent,c.setState({relatedCourseList:E.data.list&&E.data.list!==null?E.data.list:[]});case 4:case"end":return x.stop()}},h)})),this.handleCourse=h=>{if(h.resource_type==="video"){y.m8.push({pathname:"/miniCourse/watch",search:v.stringify({courseId:h.id,isNewVersion:h.isNewVersion,classifyId:h.classifyId})}),this.setState({courseCommentsList:[],watchRecordsList:[],relatedCourseList:[],recordsParams:{pageNumber:1,hasNextPage:!1},commentsParams:{pageNumber:1,hasNextPage:!1}},()=>{this.initData()});return}this.setState({weiProps:{visible:!0,option:{flag:"miniCourse",scene:"courseId=".concat(h.id,"&flag=miniCourse")}}})},this.handleCancelWei=()=>{this.setState({weiProps:{visible:!1,option:{flag:"",scene:""}}})},this.addComments=function(){var h=(0,I.Z)(d().mark(function E(w){return d().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:y.m8.location.query.isNewVersion==="true"?c.addNewComments(w):c.addOldComments(w);case 1:case"end":return z.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),this.addNewComments=function(){var h=(0,I.Z)(d().mark(function E(w){var x;return d().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,De.WY.post({url:we.ZP.miniCourse.addComment(),data:{resource_id:y.m8.location.query.courseId,resource_type:"course",content:w}});case 2:x=J.sent,x.data.result==="true"&&c.setState({courseCommentsList:[]},()=>{c.getCourseNewComments()});case 4:case"end":return J.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),this.addOldComments=function(){var h=(0,I.Z)(d().mark(function E(w){var x,z;return d().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return x=c.props.t,G.next=3,De.qg.post({url:we.ZP.EnterpriseCourse.addCommentAndScore(),data:{courseId:y.m8.location.query.courseId,content:w}});case 3:z=G.sent,z.data.code===0&&(U.default.success(x("course.publishSuccess")),c.setState({courseCommentsList:[],commentsParams:{pageNumber:1,hasNextPage:!1}},()=>{c.getCourseComments()}));case 5:case"end":return G.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),this.deleteComment=function(){var h=(0,I.Z)(d().mark(function E(w){var x;return d().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:x=c.props.t,y.m8.location.query.isNewVersion==="true"?c.deleteNewComment(w):Y.Z.confirm({title:x("common.tip"),content:x("course.deleteCommentTips"),okText:x("common.ok"),cancelText:x("common.cancel"),onOk:()=>{c.deleteOldComment(w)},onCancel(){}});case 2:case"end":return J.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),this.deleteNewComment=function(){var h=(0,I.Z)(d().mark(function E(w){var x;return d().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,De.WY.post({url:we.ZP.miniCourse.removeComment(),data:{comment_id:w}});case 2:x=J.sent,x.data.result==="true"&&c.setState({courseCommentsList:[]},()=>{c.getCourseNewComments()});case 4:case"end":return J.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),this.deleteOldComment=function(){var h=(0,I.Z)(d().mark(function E(w){var x,z,J;return d().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return x=c.props.t,z=c.state.commentsParams,te.next=4,De.qg.post({url:we.ZP.EnterpriseCourse.deleteComment(),data:{commentId:w,courseId:y.m8.location.query.courseId}});case 4:J=te.sent,J.data.code===0?(U.default.success(x("course.deleteSucceed")),c.setState({courseCommentsList:[],commentsParams:(0,O.Z)((0,O.Z)({},z),{},{pageNumber:1})},()=>{c.getCourseComments()})):U.default.error(x("course.deleteFailed"));case 6:case"end":return te.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),this.handleLoadMoreComments=()=>{var h=this.state.commentsParams,E=h.pageNumber,w=h.hasNextPage;!w||this.setState({commentsParams:(0,O.Z)((0,O.Z)({},h),{},{pageNumber:E+1})},()=>{this.getCourseComments()})},this.handleLoadMoreRecords=()=>{var h=this.state.recordsParams,E=h.pageNumber,w=h.hasNextPage;!w||this.setState({recordsParams:(0,O.Z)((0,O.Z)({},h),{},{pageNumber:E+1})},()=>{this.getCourseRecord()})},this.replyComment=function(){var h=(0,I.Z)(d().mark(function E(w,x,z){var J,G,te,ne,Le,Te;return d().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return J=x.author,G=J.id,te=J.name,ne=J.avatar,Le=J.department,Ce.next=3,De.WY.post({url:we.ZP.miniCourse.replyComment(),data:{comment_id:z,content:w,resource_id:y.m8.location.query.courseId,target_user:{id:G,name:te,avatar:ne,department:Le}}});case 3:Te=Ce.sent,Te.data.result==="true"&&c.setState({courseCommentsList:[]},()=>{c.getCourseNewComments(z)});case 5:case"end":return Ce.stop()}},E)}));return function(E,w,x){return h.apply(this,arguments)}}(),this.deleteReply=function(){var h=(0,I.Z)(d().mark(function E(w,x){var z;return d().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,De.WY.post({url:we.ZP.miniCourse.removeReplay(),data:{comment_id:x,reply_id:w}});case 2:z=G.sent,z.data.result==="true"&&c.setState({courseCommentsList:[]},()=>{c.getCourseNewComments(x)});case 4:case"end":return G.stop()}},E)}));return function(E,w){return h.apply(this,arguments)}}(),this.changeShowMore=h=>{var E=this.state.courseCommentsList;E&&E.forEach(w=>{w.id===h&&(w.showMore=!w.showMore),this.setState({courseCommentsList:E})})},this.loadMore=()=>{var h=this.state.commentsParams,E=h.pageNumber,w=h.hasNextPage;w==="true"&&this.setState({courseCommentsList:[],commentsParams:(0,O.Z)((0,O.Z)({},h),{},{pageNumber:E+1})},()=>{this.getCourseNewComments()})},this.state={enterpriseCourseInfo:{},videoFlag:!1,relatedCourseList:[],watchRecordsList:[],recordsParams:{pageNumber:1,hasNextPage:!1},totalRecords:0,courseCommentsList:[],commentsParams:{pageNumber:1,hasNextPage:!1},totalComments:0,weiProps:{visible:!1,option:{flag:"",scene:""}},resourcePlayInfo:{mode:"learn",watchType:"",autoPlay:!0,draggable:!0}}}componentDidMount(){this.initData()}render(){var se=this.props,c=se.Cls,h=se.t,E=this.state,w=E.enterpriseCourseInfo,x=E.resourcePlayInfo,z=E.relatedCourseList,J=E.weiProps,G=E.videoFlag,te=this.state,ne=te.watchRecordsList,Le=te.totalRecords,Te=te.recordsParams,je=te.courseCommentsList,Ce=te.commentsParams,Je=te.totalComments;return e().createElement("div",{className:"".concat(c)},e().createElement("main",{className:"".concat(c,"__main")},e().createElement("div",{className:"".concat(c,"__left")},e().createElement("div",null,e().createElement("span",{className:"".concat(c,"__left__avatar")},e().createElement("img",{src:w.updateUserAvatar||oe(),alt:""})),e().createElement("span",{className:"".concat(c,"__left__teacher")},e().createElement(ye.Z,{dataType:"userName",value:w.creator_sync_user_id,name:w.createUserName,type:w.creator_sync_source_type}))),e().createElement("p",{className:"".concat(c,"__left__title")},w.title),e().createElement("div",{className:"".concat(c,"__left__video")},G&&e().createElement(rt.Z,x)),w.syncProgress&&e().createElement("p",{className:"course-project_sync"},h("trainee.openSync")),e().createElement($e,{watchRecordsList:ne,totalRecords:Le,recordsParams:Te,courseCommentsList:je,commentsParams:Ce,totalComments:Je,addComments:de=>this.addComments(de),deleteComment:de=>this.deleteComment(de),handleLoadMoreComments:this.handleLoadMoreComments,handleLoadMoreRecords:this.handleLoadMoreRecords,changeReplyModal:de=>this.changeReplyModal(de),replyComment:this.replyComment,deleteReply:this.deleteReply,changeShowMore:this.changeShowMore,loadMore:this.loadMore,enterpriseCourseInfo:w})),e().createElement("div",{className:"".concat(c,"__right")},e().createElement(at,{relatedCourseList:z,handleCourse:de=>this.handleCourse(de)}))),e().createElement(et.Z,(0,Z.Z)({title:h("component.microCourseScan")},J,{onCancel:this.handleCancelWei})))}}tt.defaultProps={Cls:"mini-course-watch"};var st=(0,p.Z)()(tt)},28336:function(ue,ee,t){"use strict";t.d(ee,{_T:function(){return Y},_J:function(){return N},yJ:function(){return U},t2:function(){return O},Wd:function(){return I},Qq:function(){return L},L5:function(){return d},Bu:function(){return i},dg:function(){return p},YN:function(){return y},P2:function(){return v},WF:function(){return _}});var Z=t(37055),m=t(10237);function Y(g){var R=g.action_type,T=g.plan_id,b=g.course_id,K=g.resource_id,S=g.plan_type,B=Z.ZP.WatchTask.setStudyRecord();return m.WY.post({url:B,data:{action_type:R,plan_id:T,course_id:b,resource_id:K,plan_type:S}})}function N(g){var R=g.planId,T=g.resourceId,b=Z.ZP.knowledgeCourse.aiLearning(R,T);return m.WY.get({url:b,params:{}})}function U(g){var R=Z.ZP.WatchTask.getResource();return m.WY.get({url:R,params:g})}function O(g){var R=g.planId,T=Z.ZP.EnterpriseCourse.playCountStatistics();m.qg.post({url:T,data:{courseId:R}})}function I(g,R){var T=Z.ZP.PlatformCourse.courseEventsCount({courseId:g});m.WY.post({url:T,data:R})}function L(g){var R=g.courseId,T={courseId:R},b="".concat(Z.ZP.EnterpriseCourse.getEnterpriseCourseWareList(T),"?&useType=draft");return m.WY.get({url:b,params:{appType:localStorage.getItem("loginMode")==="STORE"?"store":""}})}function d(g){var R=g.courseId,T=Z.ZP.PlatformCourse.getPlatformCourseList();return m.WY.get({url:T,params:{id:R,pageNumber:1,pageSize:30}})}var i=(g,R)=>{var T=Z.ZP.EnterpriseCourse.getCSCECCourse({courseId:g});return m.WY.get({url:T,params:R})};function e(g){var R=CONFIG.PlatformCourse.getRecommendCourses();return request.get({url:R,params:g})}function p(g){var R=Z.ZP.ahLaboratory.queryEnvDetail();return m.WY.get({url:R,params:g})}function y(g){var R=g.lab_resource_id,T=g.project_course_id,b=g.course_id,K=g.resource_id,S=g.confirm,B=Z.ZP.ahLaboratory.creatEnv();return m.WY.post({url:B,data:{lab_resource_id:R,project_course_id:T,course_id:b,resource_id:K,confirm:S}})}function v(g){var R=g.virtual_id,T=Z.ZP.ahLaboratory.destroyEnv();return m.WY.post({url:T,data:{virtual_id:R}})}function _(g){var R=g.virtual_id,T=Z.ZP.ahLaboratory.extendEnv();return m.WY.post({url:T,data:{virtual_id:R}})}},91648:function(ue,ee,t){"use strict";t.d(ee,{Z:function(){return Z}});function Z(m,Y){var N,U,O,I,N;if(U="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),N=[],O=void 0,Y=Y||U.length,m)for(O=0;O<m;)N[O]=U[0|Math.random()*Y],O++;else for(I=void 0,N[8]=N[13]=N[18]=N[23]="-",N[14]="4",O=0;O<36;)N[O]||(I=0|Math.random()*16,N[O]=U[O===19?I&3|8:I]),O++;return N.join("")}},86726:function(ue,ee,t){"use strict";t.d(ee,{V9:function(){return m},H3:function(){return Y},e:function(){return N},F:function(){return U}});var Z=t(93485);function m(O){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],L=[];function d(i,e){var p=(0,Z.Z)(e),y;try{for(p.s();!(y=p.n()).done;){var v=y.value;if(v.key===i){L=v.actions;break}v.children instanceof Array&&v.children.length&&d(O,v.children)}}catch(_){p.e(_)}finally{p.f()}}return d(O,I),L}function Y(O){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],L=I.find(d=>d.key===O)||{};return L.checked||!1}function N(O){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],L=!1;function d(i,e){var p=(0,Z.Z)(e),y;try{for(p.s();!(y=p.n()).done;){var v=y.value;if(v.key===i){L=v.checked;break}v.children instanceof Array&&v.children.length&&d(O,v.children)}}catch(_){p.e(_)}finally{p.f()}}return d(O,I),L}function U(O){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],L="";function d(i,e){var p=(0,Z.Z)(e),y;try{for(p.s();!(y=p.n()).done;){var v=y.value;if(v.key===i){L=v.id;break}v.children instanceof Array&&v.children.length&&d(O,v.children)}}catch(_){p.e(_)}finally{p.f()}}return d(O,I),L}},69164:function(ue,ee,t){"use strict";var Z=t(34792),m=t(48086);function Y(N){N&&N.length>0&&m.default.success(N)}ee.Z=Y},65202:function(ue,ee,t){"use strict";t.d(ee,{p:function(){return Z}});function Z(){return localStorage.getItem("themeColor")||"#516AE6"}},2396:function(ue,ee,t){"use strict";t.d(ee,{fA:function(){return Y},kh:function(){return N},kR:function(){return U},rw:function(){return I},$s:function(){return L},q_:function(){return d},QK:function(){return i}});var Z=t(6793),m={limitWords(e,p){return{rules:[{max:e,message:"\u6700\u591A\u8F93\u5165".concat(e,"\u4E2A\u5B57")},{required:!0,message:p||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},limitTagsLength(e){return{rules:[{max:e,message:"\u6700\u591A\u8F93\u5165".concat(e,"\u4E2A\u6807\u7B7E")}]}},required(e){return{rules:[{required:!0,message:e||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},requiredWithValidator(e,p){return{rules:[{required:!0,message:e||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0,validator:p}]}}},Y={score:/^\+?[0-9]*$/,positiveInteger:/^[1-9]\d*$/,examScore:/^[0-9]+([.]\d{1})?$/,url:/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/,httpsUrl:/(^https):\/\/([\w.]+\/?)\S*/,tagName:/^[\s　]|[ ]$/gi},N=e=>isNaN(e)||!e||!(e>=0&&e<1e3)||!Y.score.test(e),U=e=>isNaN(e)||!e||!(e>-1e3&&e<1e3),O=e=>isNaN(e)||!e||!(e>=0&&e<1e3)||!Y.examScore.test(e),I=(e,p)=>{for(var y=0,v=0;v<e.length;v++){var _=e.charAt(v);if(_.match(/[^\x00-\xff]/ig)!=null?y+=1:y+=.5,y>p)return v}return 0},L=e=>{for(var p=0,y=0;y<e.length;y++){var v=e.charAt(y);v.match(/[^\x00-\xff]/ig)!=null?p+=1:p+=.5}return p},d=(e,p)=>{var y=e.target.value,v=e.target.dataset.originLength;if(e.target.dataset.originLength||(v=p,e.target.dataset.originLength=v),!!v){var _=L(y);_*1<p*1?e.target.setAttribute("maxLength",p*2):e.target.setAttribute("maxLength",p)}},i=(e,p)=>{var y="";return(!e||!(0,Z.fy)(e))&&(y=p),y}},56932:function(ue){ue.exports="data:image/png;base64,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"},4412:function(ue){ue.exports="data:image/png;base64,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"}}]);
