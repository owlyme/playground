(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8022],{67620:function(pe,$,t){"use strict";var h=t(34792),F=t(48086),U=t(12924),D=t.n(U),u=t(19222),B=t.n(u),w=t(32407),A=t(37055),S=A.ZP.Common.editorUpload(),k="cl_editor_toolbar_default",s="cl_editor_content_default";class x extends U.Component{constructor(H){super(H);this.initEditor=()=>{this.editor=new(B())(".".concat(this.props.toolbarCls),".".concat(this.props.contentCls)),this.editor.config.zIndex=10,this.editor.config.onfocus=()=>{var e=document.querySelector(".".concat(this.props.contentCls));e&&(e.style.minHeight=this.props.contentHeight,e.style.height="auto")},this.editor.config.onblur=()=>{var e=document.querySelector(".".concat(this.props.contentCls));e&&(e.style.height=this.props.contentHeight)},this.editor.config.menus=this.props.controls,this.editor.config.placeholder=this.props.placeholderContent||w.Z.t("component.pleaseEnterText"),this.editor.config.onchange=e=>{this.props.onChange&&this.props.onChange(e)},this.editor.config.onchangeTimeout=300,this.editor.config.uploadImgServer=S,this.editor.config.uploadImgMaxLength=5,this.editor.config.uploadImgParams={access_token:window.localStorage.getItem("token")},this.editor.config.uploadFileName="files",this.editor.config.uploadImgHooks={customInsert(e,v){var me=v.data;me.forEach(Q=>{e(Q)})}},this.editor.config.pasteTextHandle=function(e){return~e.indexOf("<!--[if gte mso 9]><xml>")||~e.indexOf("<spanyes")?"\u7C98\u8D34\u5185\u5BB9\u6709\u4E71\u7801\uFF0C\u8BF7\u4F7F\u7528ctrl+shift+v\u6765\u7C98\u8D34\u5185\u5BB9(mac\u8BF7\u4F7F\u7528command+shift+v)":e},this.editor.config.focus=!1,this.editor.config.uploadImgMaxSize=3*1024*1024,this.editor.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp"],this.editor.config.showLinkImg=!1,this.editor.config.customAlert=function(e,v){switch(v){case"success":F.default.success(e);break;case"info":F.default.info(e);break;case"warning":F.default.warning(e);break;case"error":F.default.error(e);break;default:F.default.info(e);break}},this.editor.create(),this.editor.txt.html("".concat(this.props.placeholder))},this.getHtml=()=>this.editor.txt.html(),this.getText=()=>this.editor.txt.text(),this.setHtml=e=>this.editor.txt.html(e),this.editor=null}componentDidMount(){this.initEditor()}render(){var H=this.props.toolbarCls?"".concat(this.props.toolbarCls," cl_editor_toolbar"):"".concat(k," cl_editor_toolbar"),e=this.props.contentCls?"".concat(this.props.contentCls," cl_editor_content"):"".concat(s," cl_editor_content");return D().createElement(D().Fragment,null,D().createElement("div",{className:H}),D().createElement("div",{className:e,style:{height:this.props.contentHeight,minHeight:this.props.contentHeight}}))}}x.defaultProps={controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],placeholder:"\u5185\u5BB9\u7F16\u8F91\u533A\u57DF",toolbarCls:k,contentCls:s,contentHeight:"300px",placeholderContent:""},$.Z=x},26697:function(pe,$,t){"use strict";var h=t(71194),F=t(57016),U=t(57663),D=t(71577),u=t(34792),B=t(48086),w=t(57361),A=t(9754),S=t.n(A),k=t(12924),s=t.n(k),x=t(91768),y=t(10237),H=t(28216),e=t(37055);class v extends s().Component{constructor(Q){var T;super(Q);T=this,this.dealData=()=>{this.setState({recordList:this.props.record})},this.getPostTree=(0,w.Z)(S().mark(function Z(){var C;return S().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,y.WY.get({url:e.ZP.LibraryList.listByLevel(),params:{level:2,is_layered:"true"}});case 2:C=N.sent,C&&T.setState({treeData:C.data});case 4:case"end":return N.stop()}},Z)})),this.AIsure=function(){var Z=(0,w.Z)(S().mark(function C(L){var N,W;return S().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return N=[],T.state.recordList.forEach(g=>{g.ai_resources.forEach(R=>{(R.ai_upgrade_status==="not"||R.ai_upgrade_status==="ai_failed")&&N.push({classify_id:L?R.categoryId:"",resourceId:R.resource_id,course_id:g.course_id})})}),b.next=4,y.WY.post({url:e.ZP.LibraryList.batchSubmit(),data:{resourceClassifyVoList:N}});case 4:W=b.sent,W&&(B.default.success(T.props.t("study.operateSuccess")),T.props.onCancel(!L));case 6:case"end":return b.stop()}},C)}));return function(C){return Z.apply(this,arguments)}}(),this.handleChange=(Z,C)=>{var L=[];L=this.state.recordList.map(N=>{var W=N;return W.ai_resources.map(K=>{var b=K;return K.resource_id===C.resource_id&&(b.categoryId=b.categoryId==Z.id?"":Z.id),b}),W}),this.setState({recordList:L})},this.state={recordList:[],treeData:[]},this.operateResourceItem=""}componentDidMount(){this.dealData(),this.getPostTree()}render(){var Q=localStorage.getItem("themeColor")||"#465dcd";return s().createElement(F.Z,{title:"".concat(this.props.t("course.chooseAICategory")),visible:this.props.visible,onCancel:()=>this.props.onCancel(),className:"AIAllCourseModal",width:900,footer:null},this.props.visible&&s().createElement("div",{className:"AI-course-modal"},s().createElement("p",null,this.props.t("course.AIValue")),s().createElement("p",null,this.props.t("course.AITip")),s().createElement("div",{className:"AICategory-main"},this.state.recordList.map(T=>s().createElement("ul",{className:"AI-course-list"},T.ai_resources.map(Z=>s().createElement("li",null,s().createElement("div",{className:"course-list-name"},Z.name),this.state.treeData.map(C=>C.children.length?s().createElement("div",{className:"tabs-box"},s().createElement("p",null,C.name,"\uFF1A"),s().createElement("ul",{className:"tabs"},C.children.map(L=>s().createElement("li",{onClick:()=>this.handleChange(L,Z),className:Z.categoryId===L.id?"active":"",style:Z.categoryId===L.id?{backgroundColor:Q}:{}},L.name)))):null)))))),s().createElement("div",{className:"cl-form-fixed-footer__container"},s().createElement(D.Z,{className:"form-page-container-bottom-btn",onClick:()=>this.props.onCancel()},this.props.t("common.cancel")),s().createElement(D.Z,{type:"primary",onClick:()=>this.AIsure(!0)},this.props.t("course.AICut")),s().createElement(D.Z,{type:"primary",onClick:()=>this.AIsure()},this.props.t("course.ManualCut")))))}}$.Z=(0,H.$j)()((0,x.Z)()(v))},74021:function(pe,$,t){"use strict";t.d($,{Z:function(){return Q}});var h=t(20136),F=t(55241),U=t(33565),D=t(12924),u=t.n(D),B=t(91768),w=t(95357),A=t(88573),S=t.n(A),k=t(84874),s=t(92592),x=t(87763),y=t.n(x),H=t(1164);function e(T){var Z=T.t,C=T.linkUrl,L=T.from,N=L===void 0?"":L,W=T.ddTab,K=W===void 0?!0:W,b=T.type,g=b===void 0?["pc","mobile"]:b,R=T.theme,J=(0,D.useState)(""),ce=(0,U.Z)(J,2),re=ce[0],ne=ce[1],_=()=>{var q=navigator.userAgent.toLocaleLowerCase();if(q.indexOf("lark")!==-1){window.open(C);return}H.Z.targetTo({path:C,isExternalLink:!0,from:N,ddTab:K})},he="".concat("https://mobile.coolcollege.cn","/assets-external-link-preview.html?type=enternalLink&linkUrl=").concat(encodeURIComponent(C));return s.toDataURL(he,{width:146}).then(q=>{ne(q)}).catch(()=>{}),u().createElement("div",{className:"".concat(y()["enternal-link-wrap"]," ").concat(R=="dark"?"".concat(y()["dark-back"]):"")},g.indexOf("pc")>-1?u().createElement(u().Fragment,null,u().createElement("div",{className:"".concat(y().label," ").concat(R==="dark"?"".concat(y()["label-dark"]):"")},Z("externalLink.pcLabel"),":"),u().createElement("div",{className:y()["pc-preview-btn"],onClick:_},Z("externalLink.pcPreviewBtn"))):null,g.indexOf("mobile")>-1?u().createElement(u().Fragment,null,u().createElement("div",{className:"".concat(y().label," ").concat(R==="dark"?"".concat(y()["label-dark"]):"")},Z("externalLink.mobileLabel"),":"),u().createElement("div",{className:"".concat(y()["code-wrap"]," ").concat(R=="dark"?"".concat(y()["code-wrap-dark"]):"")},u().createElement("div",{className:y()["code-img"]},re&&u().createElement("img",{className:y().img,src:re})),u().createElement("div",{className:"".concat(y()["mobile-preview-btn"]," ").concat(R=="dark"?"".concat(y()["mobile-preview-btn-dark"]):"")},Z("externalLink.mobilePreviewBtn"))),u().createElement("div",{className:"".concat(y().tip," ").concat(R=="dark"?"".concat(y()["label-dark"]):"")},Z("externalLink.wramTips"))):null)}var v=(0,B.Z)()(e);function me(T){var Z=T.t,C=T.linkUrl,L=T.from,N=L===void 0?"":L,W=T.type,K=W===void 0?["pc","mobile"]:W,b=T.theme,g=b===void 0?"white":b,R=T.ddTab,J=R===void 0?!0:R,ce=(0,D.useState)(!1),re=(0,U.Z)(ce,2),ne=re[0],_=re[1];(0,D.useEffect)(()=>{C||_(!1)},[C]);var he=()=>u().createElement("div",{className:"".concat(S()["title-top"]," ").concat(g==="dark"?"".concat(S()["white-color"]):"")},u().createElement("span",null,Z("component.preview")),u().createElement("span",{onClick:()=>_(!1)},u().createElement(k.Z,{iconClass:"icon-f-close",size:"12px"}))),q=()=>{var Ee=navigator.userAgent.toLocaleLowerCase();if(Ee.indexOf("lark")!==-1){window.open(C);return}H.Z.targetTo({path:C,isExternalLink:!0,from:N,ddTab:J})},oe=()=>{if(!!C){if(K.length===1&&K[0]==="pc"){q();return}_(!0)}};return u().createElement(F.Z,{overlayClassName:g==="white"?"":"popover-customize",content:u().createElement(v,{theme:g,type:K,linkUrl:C,from:N,ddTab:J}),title:he,trigger:"click",visible:!!C&&ne},u().createElement("span",{className:S()["preview-btn-icon"],onClick:oe},u().createElement(w.Z,{style:{fontSize:"20px",color:C?g==="white"?"#000":"#fff":"#D9D9D9"}})))}var Q=(0,B.Z)()(me)},29284:function(pe,$,t){"use strict";t.d($,{lL:function(){return Be},kI:function(){return ke},yX:function(){return Te},UW:function(){return Ie},Rv:function(){return ye},gg:function(){return ee},_z:function(){return M},mh:function(){return Ce},RQ:function(){return $e},J$:function(){return se},_D:function(){return te}});var h=t(62029),F=t(62350),U=t(75443),D=t(22385),u=t(31097),B=t(57663),w=t(71577),A=t(88986),S=t(57361),k=t(34792),s=t(48086),x=t(9754),y=t.n(x),H=t(12924),e=t.n(H),v=t(91768),me=t(94184),Q=t.n(me),T=t(28216),Z=t(76651),C=t(57068),L=t(80991),N=t(36546),W=t(44289),K=t(1164),b=t(76466),g=t(84874),R=t(86458),J=t(37055),ce=t(74262),re=t(10780),ne=t(6793),_=t(86726),he=V=>({userInfo:V.user,documentStudyLimit:V.advancedSetting.documentStudyLimit});class q extends e().Component{constructor(i){var n;super(i);n=this,this.handleSelectCourseware=()=>{this.props.defaultFieldList.length>=50?s.default.warning(this.props.t("course.courseDetailResourceLimit")):this.setState({visible:!0})},this.handleUploadFileSuccess=a=>{var d=this.state,c=d.uploadShow,l=d.list,O=this.props.defaultFieldList,E=[...l,...a];if(O.length+a.length>50){s.default.warning(this.props.t("course.courseDetailResourceLimit"));return}Object.assign(c,{visible:!1}),this.setState({uploadShow:c,list:E},()=>{this.triggerChange(E)})},this.handleUploadClose=()=>{var a=this.state.uploadShow;Object.assign(a,{visible:!1}),this.setState({uploadShow:a})},this.handleChooseFiles=(0,S.Z)(y().mark(function a(){var d,c,l;return y().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return d=n.props.t,E.next=3,(0,ne.x8)("quota_source_book",d("course.sourceValidateLimit",{courseType:d("documentTitle.matter")}));case 3:if(c=E.sent,!c){E.next=6;break}return E.abrupt("return");case 6:l=n.state.uploadShow,Object.assign(l,{visible:!0}),n.setState({uploadShow:l});case 9:case"end":return E.stop()}},a)})),this.handleOk=a=>{var d=[...this.state.list].concat(a),c=(0,ne.Cj)(d);if(c.length>50){s.default.warning(this.props.t("course.courseDetailResourceLimit"));return}this.setState({list:c,visible:!1},()=>{this.triggerChange(c)})},this.handleCancel=()=>{this.setState({visible:!1})},this.handleAddArticle=()=>{K.Z.targetTo({path:"/training/resourceManage/library/articleDetail?classifyId=0"})},this.triggerChange=a=>{this.props.formik.setFieldValue("resource",a);var d=0;d+=a.filter(c=>["h5","txt","doc","docx","xls","xlsx","pdf","ppt","pptx"].indexOf(c.type)>0).length,this.props.formik.setFieldValue("studyLimit",(0,A.Z)((0,A.Z)({},this.props.formik.values.studyLimit),{},{checked:this.props.documentStudyLimit!==0&&d>0}))},this.dealWatchType=a=>{var d=J.Yq.findIndex(le=>a.type.toLowerCase().includes(le))>-1,c=J.WB.indexOf(a.type.toLowerCase())>-1,l=J.SR.indexOf(a.type.toLowerCase())>-1||a.contentType.indexOf("html")>-1,O=a.contentType.indexOf("scorm")>-1,E=a.contentType.indexOf("video")>-1,X=J.Ss.indexOf(a.contentType)>-1,G=a.contentType.indexOf("h5")>-1,z="";return G?z="article":d?z="doc":E||X?z="video":c?z="image":l?z="html":O&&(z="scorm"),z},this.handlePreview=a=>{var d=a.item,c=this.state.previewInfo,l=d.data||d,O=l.status===1||l.status===2;if(O){s.default.warning(this.props.t("resourceLibrary.transcodingPlayerTip"));return}var E=this.dealWatchType(l),X=J.Ss.indexOf(l.contentType)>-1;if(l.type==="mp4"&&l.aiUpgradeStatus==="finish"){Z.m8.push({pathname:"/training/resourceManage/library/videoPreview",search:C.stringify({id:l.id})});return}if(E==="article"){var G=l.contentType,z=l.url,le=G==="h5/link";le?K.Z.targetTo({path:z,isExternalLink:!0}):K.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(l.id)});return}var fe={mode:"preview",watchType:E};E==="doc"?Object.assign(fe,{resourceInfo:{type:"",docType:l.type,aliUrl:l.path,url:l.url,docTitle:l.name,playId:l.videoId||l.video_id,storageType:l.storage_type}}):E==="image"?Object.assign(fe,{resourceInfo:{url:l.url,playId:l.videoId||l.video_id,storageType:l.storage_type}}):E==="html"?Object.assign(fe,{resourceInfo:{url:l.url}}):Object.assign(fe,{resourceInfo:{source:{FD:l.url,OD:l.path},originUrl:l.url,contentType:X?"mp3":l.type,playId:l.videoId||l.video_id,storageType:l.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:fe,previewInfo:(0,A.Z)((0,A.Z)({},c),{},{title:l.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var a=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,A.Z)((0,A.Z)({},a),{},{visible:!1})})},this.handleDelete=a=>{var d=[...this.state.list],c=d.findIndex(l=>l.id===a);c>-1&&d.splice(c,1),this.setState({list:d}),this.triggerChange(d)},this.handleDND=(a,d)=>{var c=this.state.list,l=c[a];c.splice(a,1),c.splice(d,0,l),this.setState({list:c})},this.generateCourseSelecorList=a=>{var d=[];return a.forEach(c=>{c.componentName==="CoursewareSelector"&&d.push({id:c.id,name:c.name,componentName:"CoursewareSelector",data:c.data,icon:J.e1[c.type],type:c.type,duration:c.data.duration})}),d},this.renderTitle=()=>{var a=(0,_.V9)("courseManage",this.props.userInfo.modules),d=(0,_.H3)("make_interactive_video",a),c=this.props,l=c.prefixCls,O=c.formik,E=c.t,X=c.userInfo,G=this.state.list,z=X.appType,le=O.values.relationPlan,fe=localStorage.getItem("themeColor")||"#465dcd",Ve=0;return G.forEach(We=>{var Ae=We.data?We.data:We;Ae.contentType.includes("video")&&Ae.status&&Ae.status===3&&Ae.privatization==="public"&&(Ve+=1)}),e().createElement("h1",{className:"".concat(l,"__title")},E("course.courseDetailResource"),le?null:this.renderHeaderAction(),Ve>0&&d&&z!=="wx_app"&&e().createElement(u.Z,{placement:"top",title:E("course.interactiveVideoEdit")},e().createElement(w.Z,{className:"text-btn interactiveInter",style:{color:fe},onClick:()=>this.props.handleSubmit("")},E("course.createInteractiveVideo"))))},this.renderHeaderAction=()=>{var a=this.props.t;return e().createElement("div",{className:"action-container"},e().createElement(w.Z,{type:"primary",className:"qa-course-library-selection-button",onClick:this.handleSelectCourseware},e().createElement(g.Z,{iconClass:"iconf-course-library",color:"#fff",size:"14px"}),a("course.courseDetailResourceCS")),e().createElement(w.Z,{type:"primary",className:"qa-local-upload-button",onClick:this.handleChooseFiles},e().createElement(g.Z,{iconClass:"iconf-folder",color:"#fff",size:"14px"}),a("course.courseDetailResourceUP")))},this.renderContent=()=>{var a=this.props.prefixCls,d=this.state.list;return e().createElement("ul",{className:"".concat(a,"__content")},d.map((c,l)=>this.renderItem(c,l)))},this.renderTooltip=a=>{var d=this.props.t;return a.status===3&&(a.type==="mp4"||a.type==="mp3")?e().createElement("span",{className:"item__duration"},(0,ne.xj)(a.duration)):a.status&&a.status!==3?e().createElement("span",{className:"resource-item-duration"},"--:--:--",e().createElement(u.Z,{placement:"top",title:d("course.transcodingStudyLimit")},e().createElement("span",null,e().createElement(g.Z,{iconClass:"icon-f-tipe",color:"#9C9C9F"})))):e().createElement("span",{className:"item__duration"},"--:--:--",e().createElement(u.Z,{placement:"top",title:this.getTitle(a)},e().createElement("span",null,e().createElement(g.Z,{iconClass:"icon-f-tipe",color:"#9C9C9F"}))))},this.getTitleTip=a=>{var d=this.props.t,c=a.data?a.data.privatization:a.privatization;return c!=="public"?d("course.interactiveVideoDisabledC"):a.status!==3?d("course.interactiveVideoDisabledB"):""},this.renderInteractiveVideo=a=>{var d=(0,_.V9)("courseManage",this.props.userInfo.modules),c=(0,_.H3)("make_interactive_video",d),l=this.props.t,O=a.data?a.data.contentType:a.contentType,E=a.data?a.data.privatization:a.privatization,X=a.data?a.data.isInteract:a.isInteract;return O.includes("video")&&a.status&&a.status===3&&E==="public"&&c?e().createElement(u.Z,{placement:"top",title:l("course.interactiveVideoEdit")},e().createElement("span",{className:"interactiveInter interactiveSuccess",onClick:()=>this.props.handleSubmit(a.id)},e().createElement(g.Z,{color:"#4D67E9",iconClass:X?"icon-yikanshipin1":"icon-hudongshipin",size:"16px"}))):O.includes("video")&&c&&(a.status&&a.status===3||E!=="public")?e().createElement(u.Z,{placement:"top",title:this.getTitleTip(a)},e().createElement("span",{className:"interactiveInter interactiveFail"},e().createElement(g.Z,{color:"#E1E0E5",iconClass:"icon-hudongshipin",size:"16px"}))):""},this.getTitle=a=>{var d=this.props.t;return a.type==="h5"?d("course.ArticleStudyLimit"):a.type==="html"||a.type==="jpg"||a.type==="jpeg"||a.type==="png"||a.type==="scorm"?d("common.notSupportSetTime"):d("course.documentStudyLimitTip3")},this.renderItem=(a,d)=>{var c=this.props,l=c.prefixCls,O=c.formik,E=c.t,X=c.userInfo,G=O.values.relationPlan,z=X.appType,le=Q()(["".concat(l,"__content__list item ").concat(G?"item-disabled":"")]);return a.type=J.Ss.indexOf(a.contentType)>-1?"mp3":a.type,e().createElement(R.Z,{id:a.id,key:a.id,title:a.title,content:a.content,index:d,disabled:G,onDND:this.handleDND},e().createElement("li",{className:le,key:a.id},e().createElement(g.Z,{iconClass:J.e1[a.type],size:"16px"}),e().createElement("span",{className:"item__title",onClick:()=>this.handlePreview({item:a})},a.name),this.renderTooltip(a),G?e().createElement("span",{className:"item__action"},z!=="wx_app"&&this.renderInteractiveVideo(a)):e().createElement("span",{className:"item__action"},z!=="wx_app"&&this.renderInteractiveVideo(a),e().createElement(U.Z,{title:E("common.confirmDeleteTitle"),onConfirm:()=>this.handleDelete(a.id)},e().createElement("span",{className:"item__action__delete"},e().createElement(g.Z,{iconClass:"iconf-clear",size:"16px"}))),e().createElement("span",{className:"item__action__drag"},localStorage.getItem("dingPersonnel")!=="dingPersonnel"&&e().createElement(g.Z,{iconClass:"iconf-move",size:"19px"})))))},this.state={list:i.defaultFieldList,visible:!1,uploadShow:{visible:!1,title:this.props.t("common.storage"),onSuccess:a=>this.handleUploadFileSuccess(a),onCancel:()=>this.handleUploadClose()},resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}}}render(){var i=this.props.prefixCls,n=this.state,a=n.visible,d=n.list,c=n.uploadShow,l=n.resourcePlayInfo,O=n.previewInfo;return e().createElement("section",{className:"".concat(i)},this.renderTitle(),this.renderContent(),e().createElement(ce.Z,(0,h.Z)({isAllowLocal:!0,params:{classifyId:0,bizType:0}},c)),e().createElement(re.Z,{visible:a,defaultChecked:this.generateCourseSelecorList(d),onOk:this.handleOk,onCancel:this.handleCancel,excludeType:"h5"}),e().createElement(b.Z,(0,h.Z)({},l,{previewInfo:O})))}}q.defaultProps={prefixCls:"resource"};var oe=(0,T.$j)(he)((0,N.Z5)(W.ZP)((0,L.$j)((0,v.Z)()(q)))),Ee=t(31151),de=t(60667);class Le extends e().Component{constructor(){super(...arguments);this.state={visible:!1},this.handleSelectTeacher=()=>{this.setState({visible:!0})},this.handleCancel=()=>{this.setState({visible:!1})},this.handleOk=i=>{var n=i.id,a=i.name,d=i.data;this.props.formik.setFieldValue("teacher",{id:n,name:a,lecturer_sync_user_id:d.lecturer_sync_user_id,lecturer_source_type:d.lecturer_source_type,type:d.type}),this.handleCancel()},this.handleDelete=()=>{this.props.formik.setFieldValue("teacher",{id:0,name:""})}}render(){var i=this.props,n=i.prefixCls,a=i.defaultFieldList,d=a.id,c=a.name,l=a.lecturer_sync_user_id,O=a.lecturer_source_type,E=a.type,X={id:d,name:c,data:{}},G=localStorage.getItem("themeColor")||"#516AE6";return e().createElement("div",{className:n},c?e().createElement("span",{className:"".concat(n,"__name")},E==="inside"?e().createElement(de.Z,{dataType:"userName",value:l,name:c,type:O}):c,e().createElement("span",{className:"".concat(n,"__name__delete"),onClick:this.handleDelete},e().createElement(g.Z,{iconClass:"icon-guanbi1"}))):null,e().createElement("span",{className:"".concat(n,"__add"),style:{borderColor:G,color:G},onClick:this.handleSelectTeacher},e().createElement(g.Z,{iconClass:"iconf-add-man"})),e().createElement(Ee.Z,{visible:this.state.visible,selected:X,onOk:this.handleOk,onCancel:this.handleCancel}))}}Le.defaultProps={prefixCls:"teacher"};var ve=(0,L.$j)(Le),Y=t(88983),P=t(47933),ie=t(81211);class Se extends e().Component{render(){var i=this.props,n=i.t,a=(0,ie.Z)(i,["t"]);return e().createElement(P.ZP.Group,(0,h.Z)({name:"originalGroup"},a),e().createElement(P.ZP,{value:1},n("course.courseDetailOriginalTrue"),e().createElement(u.Z,{title:n("course.courseDetailOriginalTrueTip")},e().createElement("span",{style:{marginLeft:"5px"}},e().createElement(g.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))),e().createElement(P.ZP,{value:0},n("course.courseDetailOriginalFalse"),e().createElement(u.Z,{title:n("course.courseDetailOriginalFalseTip")},e().createElement("span",{style:{marginLeft:"5px"}},e().createElement(g.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))))}}var Ne=(0,v.Z)()(Se),Me=t(67620);class be extends e().Component{constructor(i){super(i);this.handleChange=n=>{var a=n;this.setState({introduction:a}),this.triggerChange(a)},this.triggerChange=n=>{this.props.formik.setFieldValue("introduction",{desc:n})},this.getHtml=()=>{var n=this.editorInstance.getHtml();return n},this.state={introduction:i.defaultFieldList.desc}}render(){return e().createElement(Me.Z,{ref:i=>this.editorInstance=i,toolbarCls:this.props.toolbarCls,contentCls:this.props.contentCls,placeholder:this.state.introduction,onChange:this.handleChange,controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","image","undo","redo"]})}}var we=(0,L.$j)(be),je=t(63185),ue=t(9676),Ze=t(77883),De=t(21888);class xe extends e().Component{constructor(){super(...arguments);this.renderText=()=>{var i=this.props.t;return e().createElement("div",null,e().createElement("p",{className:"title"},i("course.documentStudyLimitTip1")),e().createElement("p",{className:"title"},i("course.documentStudyLimitTip2")))},this.handleChangeCheckbox=i=>{var n=i.target.checked;this.props.formik.setFieldValue("studyLimit",{checked:n,limit:this.props.defaultFieldList.limit})},this.handleChangeInput=i=>{this.props.formik.setFieldValue("studyLimit",{checked:this.props.defaultFieldList.checked,limit:i})},this.renderInput=()=>{var i=this.props,n=i.defaultFieldList,a=i.t;return e().createElement("span",null,e().createElement(De.Z,{precision:0,min:1,max:9999,value:n.limit,disabled:!n.checked,onChange:this.handleChangeInput}),e().createElement("span",{style:{margin:"0 8px"}},a("course.secByPage"),e().createElement(u.Z,{placement:"top",title:this.renderText},e().createElement("span",null,e().createElement(g.Z,{iconClass:"icon-f-tipe"}))),n.checked?null:e().createElement("span",{style:{marginLeft:"8px"}},a("course.documentStudyLimitTip"))))}}render(){var i=this.props,n=i.defaultFieldList,a=i.shouldSetStudyLimit,d=i.t;return e().createElement(e().Fragment,null,e().createElement(ue.Z,{onChange:this.handleChangeCheckbox,checked:n.checked,disabled:!a},d("course.documentLearningTime")),this.renderInput())}}var Pe=(0,L.$j)((0,v.Z)()(xe));class Re extends e().Component{constructor(){super(...arguments);this.handleChangeChecbox=i=>{var n=i.target.checked;this.props.formik.setFieldValue("credit",{checked:n,score:this.props.defaultFieldList.score})},this.handleChangeInput=i=>{this.props.formik.setFieldValue("credit",{checked:this.props.defaultFieldList.checked,score:i})},this.renderInput=()=>{var i=this.props.defaultFieldList;return e().createElement("span",null,e().createElement(De.Z,{precision:0,min:0,max:999,value:i.score,disabled:!i.checked,onChange:this.handleChangeInput}),this.props.t("course.courseDetailRewardUnit"))}}render(){var i=this.props.defaultFieldList;return e().createElement(e().Fragment,null,e().createElement(ue.Z,{onChange:this.handleChangeChecbox,checked:i.checked},this.props.t("common.credit")),this.renderInput())}}var ge=(0,L.$j)((0,v.Z)()(Re));class Fe extends e().Component{render(){var i=this.props,n=i.t,a=(0,ie.Z)(i,["t"]);return e().createElement(P.ZP.Group,(0,h.Z)({name:"downloadGroup"},a),e().createElement(P.ZP,{value:0},n("course.courseDetailDownloadForbidden")),e().createElement(P.ZP,{value:1},n("course.courseDetailDownloadAllow")))}}var Oe=(0,v.Z)()(Fe);class Ue extends e().Component{render(){var i=this.props,n=i.t,a=(0,ie.Z)(i,["t"]),d=Z.m8.location.query.courseId;return e().createElement(e().Fragment,null,e().createElement(P.ZP.Group,(0,h.Z)({name:"completeCourseGroup"},a,{disabled:d}),e().createElement(P.ZP,{value:"all"},n("course.courseDetailCompleteAll")),e().createElement(P.ZP,{value:"onlyOne"},n("course.courseDetailCompleteAny")),e().createElement(u.Z,{title:n("course.courseDetailTip")},e().createElement("span",{className:"stydyTypeTip"},e().createElement(g.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))),e().createElement("span",null,n("course.courseDetailInfo")))}}var ae=(0,v.Z)()(Ue);class f extends e().Component{render(){var i=this.props,n=i.t,a=(0,ie.Z)(i,["t"]);return e().createElement(P.ZP.Group,(0,h.Z)({name:"studyType"},a),e().createElement(P.ZP,{value:""},n("course.courseStudyTypeDefault"),e().createElement(u.Z,{title:n("course.courseStudyTypeDefaultTip")},e().createElement("span",{className:"stydyTypeTip"},e().createElement(g.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))),e().createElement(P.ZP,{value:"requiredCourse"},n("course.courseStudyTypeTrue"),e().createElement(u.Z,{title:n("course.courseStudyTypeTrueTip")},e().createElement("span",{className:"stydyTypeTip"},e().createElement(g.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))),e().createElement(P.ZP,{value:"notRequiredCourse"},n("course.courseStudyTypeFalse"),e().createElement(u.Z,{title:n("course.courseStudyTypeFalseTip")},e().createElement("span",{className:"stydyTypeTip"},e().createElement(g.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))))}}var o=(0,v.Z)()(f);class m extends e().Component{render(){var i=this.props,n=i.t,a=(0,ie.Z)(i,["t"]);return e().createElement(P.ZP.Group,(0,h.Z)({name:"downloadGroup"},a),e().createElement(P.ZP,{value:0},n("common.outSync")),e().createElement(P.ZP,{value:1},n("common.synchronization")),e().createElement(u.Z,{title:n("common.scheduleSyncTip")},e().createElement("span",{className:"stydyTypeTip"},e().createElement(g.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"}))))}}var r=(0,v.Z)()(m);class I extends e().Component{render(){var i=this.props,n=i.t,a=(0,ie.Z)(i,["t"]);return e().createElement(P.ZP.Group,(0,h.Z)({name:"commentSwitch"},a),e().createElement(P.ZP,{value:0},n("common.unactivated")),e().createElement(P.ZP,{value:1},n("common.open")))}}var j=(0,v.Z)()(I),p=t(43859),M=(0,p.Z)(oe),se=(0,p.Z)(ve),ee=(0,p.Z)(Ne),te=(0,p.Z)(o),ye=(0,p.Z)(we),Ce=(0,p.Z)(Pe),Te=(0,p.Z)(ge),Ie=(0,p.Z)(Oe),ke=(0,p.Z)(ae),$e=(0,p.Z)(r),Be=(0,p.Z)(j)},72538:function(pe,$,t){"use strict";t.d($,{I4:function(){return h},K5:function(){return U}});var h={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},F={labelCol:{xs:{span:0},sm:{span:0}},wrapperCol:{xs:{span:24},sm:{span:24}}},U={labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},D={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:18,offset:3}}}},19858:function(pe,$,t){"use strict";t.d($,{$h:function(){return w},H4:function(){return A},T9:function(){return S}});var h=t(6793),F=t(2396),U=t(3407),D=(0,h.me)(),u=U.Z[D].course.validation,B=U.Z[D].integralMall,w=k=>k.length?"":u.courseDetailResourceNull,A=k=>{var s,x=k.score,y=Number.isNaN(x)||!(x>=0&&x<1e3);return k.checked&&y&&(s=u.courseDetailRewardScore),s},S=k=>{var s,x=k.limit,y=Number.isNaN(x)||!x||!(x>0&&x<=9999)||!F.fA.score.test(x);return k.checked&&y&&(s=B.durationLimit),s}},39860:function(pe,$,t){"use strict";t.r($),t.d($,{default:function(){return Ue}});var h=t(62029),F=t(20228),U=t(11382),D=t(57361),u=t(34792),B=t(48086),w=t(88986),A=t(9754),S=t.n(A),k=t(12924),s=t.n(k),x=t(28216),y=t(91768),H=t(57068),e=t(76651),v=t(80991),me=t(57663),Q=t(71577),T=t(43859),Z=t(22385),C=t(31097),L=t(47673),N=t(4107),W=t(81211),K=t(68628),b=t(74021);class g extends s().Component{constructor(f){super(f);this.state={}}render(){var f=this.props,o=f.t,m=f.tReady,r=f.value,I=f.httpsFlag,j=(0,W.Z)(f,["t","tReady","value","httpsFlag"]);return s().createElement("div",{className:"url-content"},s().createElement(N.Z,(0,h.Z)({className:"url-content__input",type:"text",placeholder:I?"https:":o("h5Article.urlPlace"),tready:m.toString()},j)),s().createElement(b.Z,{linkUrl:r,from:"imgText",ddTab:!1}),s().createElement(C.Z,{className:"url-content__tooltip",title:o("course.externalLinkTips")},s().createElement(K.Z,null)))}}var R=(0,y.Z)()(g),J=t(77576),ce=t(59314);class re extends s().Component{render(){var f=this.props,o=f.value,m=f.t,r=(0,W.Z)(f,["value","t"]);return s().createElement(s().Fragment,null,s().createElement(ce.Z,(0,h.Z)({checked:o},r)),o&&s().createElement("span",{style:{color:"rgba(0, 0, 0, 0.25)",marginLeft:"8px"}}," ",m("course.externalLinkTips2")))}}var ne=(0,y.Z)()(re),_=(0,T.Z)(R),he=(0,T.Z)(ne),q=t(84291),oe=t(38642),Ee=t(7584),de=t(62615),Le=t(52670),ve=t(29284),Y=t(72538),P=t(19858),ie=t(86726),Se=t(2396),Ne=ae=>({userInfo:ae.user});class Me extends s().Component{constructor(){super(...arguments);this.state={allowActions:(0,ie.V9)("classify",JSON.parse(localStorage.getItem("modules"))),httpsFlag:!(0,oe.UI)("IMAGE_TEXT_EXTERNAL_HTTP_RULE")},this.handlePropsSubmit=f=>{var o=this.props,m=o.handleSubmit,r=o.onTypeChange;r(f),m()},this.handCancel=()=>{var f=H.parse(e.m8.location.search),o=f.history,m=this.props.userInfo,r=m===void 0?{}:m,I=r.showUserModules,j=I===void 0?"":I,p,M;switch(o){case"courseManagement":p="/course/management",M="student";break;case"myCreate":p="/personal/profile?tab=mycreate",M="student";break;case"rescource":p="/knowledgeBase/learningResources/graphicLesson";break;default:p="/course/management",M="student";break}j&&o==="courseManagement"&&(p="/knowledgeBase/learningResources/courseManage",M=""),(0,oe.eJ)({url:p,projectType:M||"manage"})},this.renderContentRow=()=>{var f=this.props.values,o=this.state.httpsFlag;return f.linkSwitch?s().createElement(v.gN,(0,h.Z)({component:_,name:"url",type:"text",defaultValue:f.url,validate:o?q.G:q.w,httpsFlag:o,label:this.props.t("setting.externalLink"),required:f.linkSwitch},Y.I4)):s().createElement(v.gN,(0,h.Z)({component:de.h,displayType:"Custom",name:"h5Article",required:!f.linkSwitch,showPrivate:!1,defaultFieldList:f.h5Article,topHeight:64,scrollDOMSelector:".course-add__content"},Y.I4))}}render(){var f=this.state.allowActions,o=this.props,m=o.values,r=o.isSubmitting,I=r===void 0?!1:r,j=o.title,p=o.t,M=o.isEdit,se=o.tagGroupInit;return s().createElement(v.l0,{className:"cl-form"},s().createElement("h1",{className:"cl-form-htitle"},j),s().createElement(v.gN,(0,h.Z)({component:Ee.Z,name:"title",required:!0,type:"text",defaultValue:m.title,validate:ee=>(0,Se.QK)(ee,p("course.courseDetailNamePlaceholder")),maxLength:60,style:{width:"745px"},placeholder:p("course.courseDetailNamePlaceholder"),label:p("course.courseDetailName")},Y.I4)),s().createElement(v.gN,(0,h.Z)({component:de.Y9,displayType:"Custom",name:"covers",label:p("course.courseDetailCover"),required:!0},Y.I4)),s().createElement(v.gN,(0,h.Z)({component:de.O,displayType:"Custom",name:"courseClassify",showAdd:(0,ie.H3)("add",f),label:p("course.courseDetailCategory"),isObj:!0,required:!0,validate:ee=>(0,Se.QK)(ee.id,p("course.courseDetailCategoryPlaceholder")),defaultValue:m.courseClassify},Y.I4)),s().createElement(v.gN,(0,h.Z)({component:ve.J$,name:"teacher",label:p("course.courseDetailLecture"),displayType:"Custom",defaultFieldList:m.teacher},Y.I4)),s().createElement(v.gN,(0,h.Z)({component:ve.gg,name:"original",label:p("course.courseDetailOriginal"),type:"text",defaultValue:m.original},Y.I4)),s().createElement(v.gN,(0,h.Z)({component:de.QS,displayType:"Custom",name:"tagGroup",label:p("common.detailTag"),defaultFieldList:se},Y.I4)),s().createElement(v.gN,(0,h.Z)({component:he,name:"linkSwitch",label:p("course.externalLinks"),defaultFieldList:m.linkSwitch},Y.I4)),this.renderContentRow(),s().createElement(v.gN,(0,h.Z)({component:ve.yX,label:p("course.courseDetailRewardScore"),displayType:"Custom",name:"credit",defaultFieldList:m.credit,validate:P.H4},Y.I4)),s().createElement(v.gN,(0,h.Z)({type:"text",component:ve.lL,defaultValue:m.commentSwitch,label:p("course.courseCommentTitle"),name:"commentSwitch"},Y.I4)),s().createElement(v.gN,(0,h.Z)({component:ve.RQ,name:"syncProgress",label:p("common.scheduleSync"),type:"text",defaultValue:m.syncProgress},Y.I4)),s().createElement(v.gN,(0,h.Z)({component:de.ww,displayType:"Custom",name:"employeeRange",mode:["all","part","private"],orgProps:{title:p("component.chooseVisibleScope")},showSectitle:!1,label:p("common.visibleRange"),defaultFieldList:m.employeeRange,validate:Le.FI,qwTicketShow:!0},Y.I4)),s().createElement(de.I,null),s().createElement("footer",{className:"cl-form-fixed-footer"},s().createElement("div",{className:"cl-form-fixed-footer__container"},s().createElement(Q.Z,{onClick:this.handCancel},p("common.cancel")),s().createElement(Q.Z,{disabled:I,loading:I,onClick:()=>this.handlePropsSubmit("draft")},p("common.draft")),s().createElement(Q.Z,{type:"primary",disabled:I,loading:I,onClick:()=>this.handlePropsSubmit("release")},p(M?"common.save":"common.release")))))}}var be=(0,x.$j)(Ne)((0,y.Z)()(Me)),we=t(4408),je=t(34773),ue=t(37055),Ze=t(10237),De=t(26697),xe=t(6793),Pe=t(28531),Re=t(73704),ge={getScoreRule:ue.ZP.CourseManagement.getScoreRule,addCourse:ue.ZP.GraphicManagement.addCourse,editCourse:ue.ZP.GraphicManagement.editCourse,getCourseInfo:ue.ZP.GraphicManagement.getCourseInfo},Fe=ae=>({documentStudyLimit:ae.advancedSetting.documentStudyLimit,userInfo:ae.user});class Oe extends s().Component{constructor(){var f;super(...arguments);f=this,this.state={initialParams:{title:"",h5Article:null,covers:{coverType:1,cover:"",baseCover:""},courseClassify:{id:"",name:""},teacher:{name:"",id:""},original:1,introduction:{desc:""},studyLimit:{checked:!1,limit:this.props.documentStudyLimit},credit:{checked:!1,score:0},employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}},relationPlan:!1,linkSwitch:!1,url:"",syncProgress:0,commentSwitch:1},initType:"release",isLoading:!0,AIModalFlag:!1,createList:[],approvalModal:{isShowApprovalModal:!1,content:{},defaultTemplate:{}},courseId:"",temData:{}},this.onCancel=()=>{this.setState({AIModalFlag:!1});var o=this.props.userInfo,m=o===void 0?{}:o,r=m.showUserModules,I=r===void 0?"":r;I?e.m8.push("/knowledgeBase/learningResources/graphicLesson"):(0,oe.eJ)({url:"/personal/profile?tab=mycreate"})},this.getScoreRule=()=>{Ze.WY.get({url:ge.getScoreRule()}).then(o=>{var m=o.data.data.courseScoreList,r=m===void 0?[]:m;this.setState(I=>({initialParams:(0,w.Z)((0,w.Z)({},I.initialParams),{},{credit:{checked:!1,score:Array.isArray(r)&&r.length?r[0].score:0}}),isLoading:!1}))})},this.initParams=o=>{Ze.WY.get({url:ge.getCourseInfo({id:o})}).then(m=>{var r=m.data;this.setState(()=>({initialParams:{title:(0,xe.fy)(r.title),h5Article:r.contentJson?r.contentJson:null,covers:{coverType:r.coverType,cover:r.cover,baseCover:r.baseCover},teacher:{name:r.teacherId!=0?r.teacherName:"",id:r.teacherId.toString(),type:r.teacher_type,lecturer_sync_user_id:r.teacher_sync_user_id,lecturer_source_type:r.teacher_source_type},original:r.original?1:0,studyLimit:{checked:!!r.studyTimeLimit,limit:r.studyTimeLimit},credit:{checked:!!r.credit,score:r.credit},courseClassify:{id:r.courseClassify.split(",").pop(),name:r.courseClassifyName},employeeRange:{rangeType:r.isAll,rangeList:{dept:r.departmentList||[],post:r.postList||[],group:r.groupList||[],user:r.userList||[]}},relationPlan:r.relationPlan||!1,linkSwitch:r.link_switch==="true",url:r.resourceList&&r.resourceList.length?r.resourceList[0].url:"",syncProgress:r.syncProgress?1:0,commentSwitch:r.commentSwitch?1:0},isLoading:!1}))})},this.handleTypeChange=o=>{this.setState({initType:o})},this.handleSubmit=(o,m)=>{var r=this.state.courseId,I=o.courseClassify,j=o.covers,p=o.credit,M=o.studyLimit,se=o.original,ee=o.tagGroup,te=o.employeeRange,ye=o.h5Article,Ce=o.teacher,Te=o.title,Ie=o.linkSwitch,ke=o.url,$e=o.syncProgress,Be=o.commentSwitch,V=this.props.t,i=JSON.parse(ye);if(!Ie&&(!i||i.entityMap&&Object.keys(i.entityMap).length==0)&&!(i&&i.blocks&&i.blocks.some(l=>l.text!=""))){B.default.error(V("course.courseContentTip")),m.setSubmitting(!1);return}var n=ee?ee.tagsNameList:[],a=(0,je.b)(te.rangeList),d={id:r,title:(0,xe.fy)(Te),coverType:j.coverType,cover:j.cover,baseCover:j.baseCover,teacherId:Ce.id,courseClassify:I.id||"999",contentJson:ye,original:se,isAll:te.rangeType,groupIds:te.rangeType==2?a.groupIds.join(","):"",departmentIds:te.rangeType==2?a.deptIds.join(","):"",userIds:te.rangeType==2?a.userIds.join(","):"",postIds:te.rangeType==2?a.postIds.join(","):"",studyTimeLimit:M.checked?M.limit:0,credit:p.checked?p.score:0,init_type:this.state.initType,biz_type:6,linkSwitch:Ie?"true":"false",url:Ie?ke:"",syncProgress:$e,qy_we_chat_vo:te.qyWeChatVo,commentSwitch:Be,tags:n.length?n.map(l=>l.tag_name).join(","):""},c;r?c=ge.editCourse():c=ge.addCourse(),Ze.qg.post({url:c,data:(0,w.Z)({enterpriseId:ue.ZP.enterpriseId},d)}).then(l=>{var O=l.data,E=O.code,X=O.msg,G=O.data;if(r){var z={tags:n,resourceId:r,resourceType:"course"};(0,Pe.tB)(z)}else if(n&&n.length){var le={tags:n,resourceId:G.course[0].course_id,resourceType:"course"};(0,Pe.tB)(le)}E===0&&(m.setSubmitting(!1),this.state.initType==="draft"?(B.default.success(X),this.saveSuccessJump()):(B.default.success(this.props.t("common.saveSuccess")),this.setState({temData:d}),this.funCheckApproval(r||G.course[0].course_id,G)))}).catch(()=>{B.default.error(V("course.releaseFailedTip")),setTimeout(()=>{m.setSubmitting(!1)},1e3)})},this.saveSuccessJump=()=>{var o=H.parse(e.m8.location.search),m=o.from;setTimeout(()=>{m==="myCreate"?(0,oe.eJ)({url:"/personal/profile?tab=mycreate",actionType:"replace"}):e.m8.replace("/knowledgeBase/learningResources/graphicLesson")},1e3)},this.funCheckApproval=(o,m)=>{this.setState({courseId:o});var r=m.state,I=m.approval_template;r?this.setState({approvalModal:{isShowApprovalModal:!0,defaultTemplate:I,content:{courseId:o,classifyType:"imageText"}}}):this.saveSuccessJump()},this.queryAiResource=(0,D.Z)(S().mark(function o(){var m,r,I,j;return S().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:m=f.props.userInfo,r=m===void 0?{}:m,I=r.showUserModules,j=I===void 0?"":I,j?e.m8.push("/knowledgeBase/learningResources/graphicLesson"):(0,oe.eJ)({url:"/personal/profile?tab=mycreate"});case 3:case"end":return M.stop()}},o)})),this.handleCloseApproval=o=>{this.setState({approvalModal:{isShowApprovalModal:!1,content:{},defaultTemplate:{}}}),o==="submit"&&this.saveSuccessJump()}}componentDidMount(){var f=H.parse(e.m8.location.search),o=f.courseId;this.setState({courseId:o}),o?this.initParams(o):this.getScoreRule()}render(){var f=this.props,o=f.prefixCls,m=f.t,r=this.state,I=r.initialParams,j=r.isLoading,p=r.temData,M=r.approvalModal,se=r.courseId,ee=M.isShowApprovalModal,te=M.content,ye=M.defaultTemplate;if(j)return s().createElement(U.Z,{size:"large"});var Ce={resourceType:"course",resourceId:se};return s().createElement("div",{className:o},s().createElement(we.Z,{title:m(se?"documentTitle.editGraphicCourse":"documentTitle.newGraphicCourse")}),s().createElement("div",{className:"".concat(o,"__content")},s().createElement("div",{className:"".concat(o,"__content__form")},s().createElement(v.J9,{enableReinitialize:!0,initialValues:I,onSubmit:this.handleSubmit,render:Te=>s().createElement(be,(0,h.Z)({},Te,{tagGroupInit:Ce,isEdit:!!se,onTypeChange:this.handleTypeChange}))}))),this.state.AIModalFlag&&s().createElement(De.Z,{visible:this.state.AIModalFlag,record:this.state.createList,onCancel:()=>this.onCancel()}),ee&&s().createElement(Re.Z,{haveContent:!1,defaultTemplate:ye,show:ee,setShow:()=>this.handleCloseApproval(),submitRefresh:()=>this.handleCloseApproval("submit"),businessId:se,bizType:"course_task",title:p.title,content:te}))}}Oe.defaultProps={prefixCls:"course-add"};var Ue=(0,x.$j)(Fe)((0,y.Z)()(Oe))},84291:function(pe,$,t){"use strict";t.d($,{w:function(){return B},G:function(){return w}});var h=t(6793),F=t(2396),U=t(3407),D=(0,h.me)(),u=U.Z[D].h5Article.validation,B=A=>{var S;return F.fA.url.test(A)||(S=u.urlIllegal),S},w=A=>{var S;return F.fA.httpsUrl.test(A)||(S=u.httpsUrlIllegal),S}}}]);
