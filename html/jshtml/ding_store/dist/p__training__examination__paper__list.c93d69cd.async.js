(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8976],{30389:function(ne,Y,e){"use strict";e.d(Y,{Z:function(){return T}});var z=e(62029),q=e(20228),te=e(11382),R=e(12924),x=e.n(R),u=e(91768),Q=e(80991),m={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},K=e(62615),i=e(52670);class D extends x().Component{render(){var a=this.props,t=a.values,n=a.mode,r=a.onlyChooseDept,s=a.reserveUser,p=a.t,c=a.orgProps,v=a.rangeAuth,I=a.projectId,O=a.onCancel,Z=a.onlyCreateUser;return x().createElement(Q.l0,{className:"cl-form"},x().createElement(Q.gN,(0,z.Z)({component:K.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:p("common.visibleRange"),defaultFieldList:t.employeeRange,validate:i.FI,mode:n,rangeAuth:v,onlyChooseDept:r,onlyCreateUser:Z,orgProps:c,reserveUser:s,projectId:I,onCancel:O,qwTicketShow:!0},m)))}}var k=(0,u.Z)()(D),G=e(18329),F=e(34773);class U extends x().Component{constructor(){super(...arguments);this.initRefFormik=a=>{this.refFormik=a},this.handleBeforeCreate=()=>{var a=this.refFormik;a.submitForm(),a.runValidations().then(t=>{if(!Object.keys(t).length){var n=a.state.values.employeeRange,r=(0,F.b)(n.rangeList),s={qyWeChatVo:n.qyWeChatVo,id:this.props.actionId,isAll:n.rangeType,groupIds:n.rangeType===2?r.groupIds.join(","):"",departmentIds:n.rangeType===2?r.deptIds.join(","):"",userIds:n.rangeType===2?r.userIds.join(","):"",postIds:n.rangeType===2?r.postIds.join(","):"",clusterIds:n.rangeType===2?r.clusterIds.join(","):"",qy_we_chat_vo:n.qyWeChatVo};this.props.onCreate(s)}})},this.handleBeforeCancel=()=>{var a=this.props.onCancel;a()}}render(){var a=this.props,t=a.visible,n=a.initialParams,r=a.isLoading,s=a.tipInfo,p=a.mode,c=a.onlyChooseDept,v=a.reserveUser,I=v===void 0?[]:v,O=a.t,Z=a.title,y=a.orgProps,E=a.rangeAuth,S=a.projectId,_=a.onCancel,H=a.onlyCreateUser,N=a.size;return r?x().createElement(te.Z,{size:"large"}):x().createElement(G.ZP,{wrapClassName:"cl-employee-selector-modal",visible:t,title:Z||O("component.changeUser"),okText:O("common.ok"),cancelText:O("common.cancel"),size:N,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},r?x().createElement(te.Z,{size:"large"}):x().createElement(Q.J9,{ref:this.initRefFormik,initialValues:n,render:w=>x().createElement(k,(0,z.Z)({},w,{mode:p,rangeAuth:E,orgProps:y,onlyChooseDept:c,onlyCreateUser:H,reserveUser:I,projectId:S,onCancel:_}))}),s&&x().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},s))}}U.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var T=(0,u.Z)()(U)},63848:function(ne,Y,e){"use strict";var z=e(36877),q=e(32969),te=e(12924),R=e.n(te),x=e(91768),u=e(56130);class Q extends R().PureComponent{constructor(){super(...arguments);this.onChange=(K,i)=>{this.props.onChange(K,i)}}render(){var K=this.props,i=K.value,D=K.classify,k=K.showLabel,G=K.className,F=K.t,U=K.style;return R().createElement("div",{className:"classify-cascader ".concat(G)},k?R().createElement("span",{className:"classify-cascader-label"},F("component.selectClassifyLabel")):null,R().createElement(q.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(G),options:D,onChange:this.onChange,placeholder:F("component.selectClassifyLabel"),value:i,style:U,loadData:this.props.loadData}))}}Q.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},Y.Z=(0,u.Z)((0,x.Z)()(Q))},51697:function(ne,Y,e){"use strict";var z=e(22385),q=e(31097),te=e(33565),R=e(12924),x=e.n(R),u=e(28216),Q=e(84874),m=i=>{var D=i.title,k=i.visible,G=i.placement,F=G===void 0?"top":G,U=i.children,T=U===void 0?null:U,V=i.isNewUser,a=V===void 0?"":V,t=i.closeGuide,n=i.guideStatus,r=(0,R.useState)(!1),s=(0,te.Z)(r,2),p=s[0],c=s[1],v=Z=>x().createElement("div",{className:"guide-tooltip-title"},Z,x().createElement("span",{onClick:I},x().createElement(Q.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,R.useEffect)(()=>{c(k)},[k]);var I=Z=>{if(Z.stopPropagation(),Z.preventDefault(),c(!1),t){t();return}a==="true"&&i.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),O()},O=()=>{localStorage.setItem("guideStatus","false"),i.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return x().createElement(q.Z,{title:v(D),placement:F,visible:p&&n==="true"&&D},T)},K=i=>({guideStatus:i.advancedSetting.guideStatus,isNewUser:i.advancedSetting.isNewUser});Y.Z=(0,u.$j)(K)(m)},54792:function(ne,Y,e){"use strict";var z=e(62029),q=e(63185),te=e(9676),R=e(47673),x=e(4107),u=e(88986),Q=e(12924),m=e.n(Q),K=e(91768),i=e(59239),D=e(55446),k=e.n(D),G=e(18329),F=e(2396);class U extends m().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var a=this.props,t=a.form,n=a.id,r=a.onCreate,s=this.state.isChecked;t.validateFields((p,c)=>{if(!p){var v=(0,u.Z)({},c);s||(v.value=0);var I=(0,u.Z)((0,u.Z)({},v),{},{id:n});r(I),setTimeout(()=>{t.resetFields()},100)}})},this.handleBeforeCancel=()=>{var a=this.props,t=a.form,n=a.onCancel;n(),setTimeout(()=>{t.resetFields()},100)},this.checkScore=(a,t,n)=>{var r=this.props.t,s=this.state.isChecked;if(s&&(0,F.kh)(t)){n(r("component.setScoreRuleTip"));return}n()},this.handleCheckChange=a=>{this.setState({isChecked:a.target.checked})},this.renderItem=()=>{var a=this.props,t=a.form,n=a.initialValue,r=a.labelTxt,s=this.state.isChecked,p=t.getFieldDecorator,c={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},v=s?p("value",{initialValue:n,rules:[{validator:this.checkScore}]})(m().createElement(x.Z,{maxLength:30,placeholder:""})):null,I=m().createElement(m().Fragment,null,m().createElement(te.Z,{checked:s,onChange:this.handleCheckChange},r));return m().createElement(i.Z.Item,(0,z.Z)({label:I},c),v)}}componentDidUpdate(a){this.props.visible&&this.props.visible!==a.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var a=this.props,t=a.visible,n=a.title,r=a.prefixCls;return m().createElement(G.ZP,{size:"small",visible:t,title:n,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},m().createElement(i.Z,{className:"".concat(r),layout:"horizontal",colon:!1},this.renderItem(),m().createElement("div",{className:"".concat(r,"__children")},this.props.children)))}}U.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var T=i.Z.create({name:"ClSetupBoxInModal"})(U);Y.Z=(0,K.Z)()(T)},11449:function(ne,Y,e){"use strict";e.d(Y,{Z:function(){return Z}});var z=e(88986),q=e(33565),te=e(12924),R=e.n(te),x=e(3115),u=e(49111),Q=e(19650),m=e(62029),K=e(57663),i=e(71577),D=e(91768),k=e(28216),G=e(37055),F=e(10237);function U(y){var E=G.ZP.getHelpContentByMenuKey(),S={key:y};return F.WY.get({url:E,params:S})}var T=e(74228),V=e.n(T),a=e(1164),t=e(76466),n=e(38642);class r extends R().Component{constructor(E){var S;super(E);S=this,this.getHelpContentByMenuKey=()=>{var _=this.props.defaultMenuKey;U(_).then(H=>{var N=H.data,w=N.help_url,ee=N.video_url;this.setState({videoUrl:ee,helpUrl:w})})},this.handleOpenHelpUrl=_=>{if((0,n.ve)()){window.open(_,"_blank");return}a.Z.targetTo({path:_,isExternalLink:!0})},this.handleOpenVideo=function(_){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.props.t("helpCenter.video");S.setState(N=>({resourcePlayInfo:(0,z.Z)((0,z.Z)({},N.resourcePlayInfo),{},{resourceInfo:{originUrl:_,source:{FD:_,OD:_},contentType:"mp4"}}),previewInfo:(0,z.Z)((0,z.Z)({},N.previewInfo),{},{title:H,visible:!0,onCancel:S.handleCancelPreview})}))},this.handleCancelPreview=()=>{var _=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,z.Z)((0,z.Z)({},_),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:E.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var E=this.state,S=E.helpUrl,_=E.resourcePlayInfo,H=E.previewInfo,N=E.videoUrl,w=this.props.t;return R().createElement("div",{className:V().helpCenter},N&&R().createElement(i.Z,{type:"link",className:V()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(N)},w("helpCenter.video")),S&&R().createElement(i.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(S)},w("helpCenter.tutorial")),R().createElement(t.Z,(0,m.Z)({},_,{previewInfo:H})))}}var s=y=>({defaultMenuKey:y.currentRoute.menuKey});r.defaultProps={defaultMenuKey:""};var p=(0,k.$j)(s)((0,D.Z)()(r));function c(y){var E=y.extra,S=localStorage.getItem("dingPersonnel"),_=sessionStorage.getItem("dingPersonnel");return R().createElement(Q.Z,null,E,S!=="dingPersonnel"&&_!=="dingPersonnel"&&(0,n.eY)("COMMONEXTRA_HELP_CENTER")&&R().createElement(p,null))}var v=c,I=e(4408);function O(y){var E=(0,te.useState)({helpCenter:(0,n.eY)("HEAD_HELP_CENTER_BUT")}),S=(0,q.Z)(E,1),_=S[0],H=y.pageContainerParams,N=H===void 0?{}:H,w=y.noPadding,ee=w===void 0?!1:w,se=y.isPersonal,ie=se===void 0?!1:se,re=y.pageTitle,oe=y.className,ce=oe===void 0?"":oe,l={extra:_.helpCenter?R().createElement(v,{extra:N.extra}):N.extra},P=(0,z.Z)((0,z.Z)({},N),l);return R().createElement("div",{className:"page-container-content ".concat(ee?"page-container-noPadding":""," ").concat(ie?"page-container-content_personal_background":""," ").concat(ce)},re&&R().createElement(I.Z,{title:re}),ie?R().createElement(x.Z,null,y.children):R().createElement(x.Z,P,y.children))}var Z=O},72456:function(ne,Y,e){"use strict";var z=e(49111),q=e(19650),te=e(57663),R=e(71577),x=e(12924),u=e.n(x),Q=e(28216),m=e(91768),K=e(84391),i=e(90631),D=e(49101),k=e(76651),G=e(31945),F=e(1164),U=e(51697),T=a=>{var t=a.user,n=a.currentRoute,r=a.advancedSetting;return{currentPath:n.path,allAuthRoutes:n.allAuthRoutes,userLng:t.lng,themeColor:r.themeColor,qyShield:t.qyShield}};class V extends u().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var t=this.props.tabLink;k.m8.push(t)},this.renderActionBtn=()=>{var t=this.props,n=t.prefixCls,r=t.actionText,s=t.t,p=t.tabLink,c=t.showBtn,v=t.renderActionBtn,I=t.newPage,O=t.popOverProps,Z=O===void 0?[]:O,y=t.renderGuide,E=y===void 0?!1:y,S=t.showDownloadBtn,_=S===void 0?!1:S,H=t.showImportBtn,N=H===void 0?!1:H,w=t.showCreateBtn,ee=w===void 0?!0:w,se=t.rowReverse,ie=se===void 0?!1:se,re="".concat(n,"__action");if(!c&&v&&typeof v=="function")return u().createElement("div",{className:re},v());if(!c||!r)return null;var oe=Z.length?Z[0].contentText:"";return u().createElement("div",{className:"".concat(re," ").concat(ie&&"row-reverse")},u().createElement(q.Z,{size:16},_&&u().createElement(R.Z,{icon:u().createElement(K.Z,null),onClick:this.handleDownload},s("common.exportData")),N&&u().createElement(R.Z,{icon:u().createElement(i.Z,null),onClick:this.handleImport},s("exam.importTemplate")),ee&&I&&u().createElement(F.Z,{to:p},u().createElement(U.Z,{visible:oe&&E,placement:"topLeft",title:oe},u().createElement(R.Z,{type:"primary",id:"create-project-button",icon:u().createElement(D.Z,null)},r))),ee&&!I&&u().createElement(R.Z,{type:"primary",id:"create-project-button",icon:u().createElement(D.Z,null),onClick:this.handleCreate},r)))},this.renderQueryRow=()=>{var t=this.props,n=t.queryRowParams,r=t.queryRowList,s=t.queryRowSelectedCourseIds,p=t.queryRowSelectedProjectIds,c=t.queryRowOnForceRender,v=t.queryRowOnClassifyChange,I=t.queryRowOnTypeChange,O=t.queryRowOnCourseTypeChange,Z=t.queryRowAllowActions,y=t.showNum,E=y===void 0?1:y;return u().createElement(G.Z,{params:n,list:r,selectedCourseIds:s,selectedProjectIds:p,onForceRender:c,onClassifyChange:v,onTypeChange:I,onCourseTypeChange:O,allowActions:Z,showNum:E,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var t=this.props,n=t.t,r=t.extraBtnSelectedRowKeys,s=t.extraBtnHandleMultiVisibleRange;return u().createElement(R.Z,{disabled:r.length===0,onClick:s},n("courseManage.setTheVisibility"))}}render(){var t=this.props,n=t.prefixCls,r=t.wrapCls,s=t.showRenderQueryRow,p=t.showRendeExtraBtn;return u().createElement(u().Fragment,null,u().createElement("div",{className:"render_other"},u().createElement("header",{className:"".concat(n," ").concat(r)},u().createElement("section",{className:"".concat(n,"__radiocol")},this.renderActionBtn(),s&&this.renderQueryRow(),p&&this.rendeExtraBtn()))))}}V.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},Y.Z=(0,Q.$j)(T)((0,m.Z)()(V))},62117:function(ne,Y,e){"use strict";var z=e(63185),q=e(9676),te=e(43358),R=e(34041),x=e(88983),u=e(47933),Q=e(12924),m=e.n(Q),K=e(28216),i=e(91768),D=e(48479),k=e(2971),G=e(45601),F=e(7249),U=V=>{var a=V.user,t=V.currentRoute,n=V.advancedSetting;return{currentPath:t.path,allAuthRoutes:t.allAuthRoutes,userLng:a.lng,themeColor:n.themeColor,appType:a.appType,appId:a.appId}};class T extends m().Component{constructor(a){super(a);this.setPlaceholder=()=>{var t=this.props,n=t.currentPath,r=t.allAuthRoutes,s=t.userLng,p=this.state.language,c=r[n],v=this.props,I=v.appType,O=v.appId,Z=localStorage.getItem("qyWechatBook"),y=I==="wx_app"&&Z==="true"&&O==="9005";if(!!c){var E=p[s].searchInputPlaceholder,S="";c.menuKey==="studyTemplate"||c.menuKey==="examTemplate"?S=E.template:c.menuKey==="employee"||c.menuKey==="obligatory"||c.menuKey==="elective"||c.menuKey==="plan"||c.menuKey==="evaluation"||c.menuKey==="myEvaluationPlan"?S=E.task:c.menuKey==="studyProject"?S=y?E.byProjectName:E.byProjectNameOrCreator:c.menuKey==="management"?S=y?E.byTaskName:E.byTaskNameOrCreator:S=E[c.menuKey],this.setState({currentPlaceholder:S})}},this.handleRadiosChange=t=>{this.props.onRadiosChange(t.target.value)},this.handleSelectChange=t=>{this.props.onSelectChange(t)},this.handleSearch=(t,n)=>{this.props.onSearch(t,n)},this.handleChange=t=>{this.props.onCheckboxChange(t.target.checked)},this.renderRadios=()=>{var t=this.props,n=t.prefixCls,r=t.radioList,s=t.defaultRadioValue,p=t.radioValue;if(!r.length)return null;var c=s||r[0].value,v="".concat(n,"__radios");return m().createElement("div",{className:v},typeof p!="undefined"?m().createElement(u.ZP.Group,{defaultValue:c,value:p,onChange:this.handleRadiosChange},r.map(I=>m().createElement(u.ZP.Button,{key:I.value,value:I.value},I.name))):m().createElement(u.ZP.Group,{defaultValue:c,onChange:this.handleRadiosChange},r.map(I=>m().createElement(u.ZP.Button,{key:I.value,value:I.value},I.name))))},this.renderSelect=()=>{var t=this.props,n=t.prefixCls,r=t.selectList,s=t.defaultSelectValue;if(!r.length)return null;var p=s||r[0].value,c="".concat(n,"__select");return m().createElement("div",{className:c},m().createElement(R.Z,{defaultValue:p,onChange:this.handleSelectChange,style:{minWidth:100}},r.map(v=>m().createElement(R.Z.Option,{key:v.value,value:v.value},v.name))))},this.renderOther=()=>{var t=this.props,n=t.prefixCls,r=t.renderOther,s=t.showOther,p="".concat(n,"__other");if(s&&r&&typeof r=="function")return m().createElement("div",{className:p},r())},this.renderCheckbox=()=>{var t=this.props,n=t.prefixCls,r=t.t,s=t.label,p=t.showCheckbox,c=t.renderActionSelect,v="".concat(n,"__checkbox");return!p&&c&&typeof c=="function"?m().createElement("div",{className:v},c()):p?m().createElement("div",{className:v},m().createElement(q.Z,{onChange:this.handleChange},s||r("common.myCreated"))):null},this.renderSearch=()=>{var t=this.props,n=t.prefixCls,r=t.showSearch,s=t.inputPlaceholder,p=t.maxLength,c=p===void 0?400:p,v=t.value,I="".concat(n,"__search");if(!r)return null;var O=this.state.currentPlaceholder;return s?m().createElement("div",{className:I},m().createElement(D.Z,{onSearch:this.handleSearch,placeholder:s,width:272,maxLength:c})):m().createElement("div",{className:I},m().createElement(D.Z,{onSearch:this.handleSearch,placeholder:O,width:272,maxLength:c,value:v}))},this.renderSearchOther=()=>{var t=this.props.renderSearchOther;return t?t():null},this.state={language:{zh_cn:G.Z,en_us:k.Z,zh_hk:F.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(a){a.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var a=this.props,t=a.prefixCls,n=a.wrapCls,r=a.showRenderRadios,s=r===void 0?!0:r,p=a.showRenderSelect;return m().createElement(m().Fragment,null,m().createElement("div",{className:"render_other"},this.renderOther(),m().createElement("header",{className:"".concat(t," ").concat(n)},m().createElement("section",{className:"".concat(t,"__searchcol")},this.renderSearchOther(),this.renderCheckbox(),s&&this.renderRadios(),p&&this.renderSelect(),this.renderSearch()))))}}T.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",showRadioList:!0,showCheckbox:!0,showSearch:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{},renderSearchOther:()=>{}},Y.Z=(0,K.$j)(U)((0,i.Z)()(T))},28107:function(ne,Y,e){"use strict";var z=e(66456),q=e(55313),te=e(22385),R=e(31097),x=e(57663),u=e(71577),Q=e(71194),m=e(57016),K=e(88986),i=e(12924),D=e.n(i),k=e(91768),G=e(10237),F=e(37055),U=e(6793),T=e(18329),V=e(95664);class a extends D().Component{constructor(n){super(n);this.onCancel=()=>{var r=this.props,s=r.handleReferenceList,p=r.onReferenceList;s?s():p&&p()},this.onContinueEdit=()=>{var r=this.props.continueEdit;r&&r()},this.initTableList=(r,s)=>{var p=this.props,c=p.type,v=p.operation,I=p.resourceId,O=p.t,Z=this.state.resourceTypes,y=s||v;return this.setState({loading:!0}),G.WY.get({url:F.ZP.deleteResource.check(),params:(0,K.Z)((0,K.Z)({},this.state.params),{},{type:c,id:r||I})}).then(E=>{if(E.data.list&&E.data.list.length===0)return!0;if(E.data.total<2&&E.data.list.length>0){var S=E.data.list[0],_=S.title,H=S.type_name,N=S.create_user_name,w="";return y==="continueEdit"?w=(0,U.ZT)("".concat(O("component.continueEditReminderTip")),Z[c],"\u300A".concat(_,"\u300B").concat(H)):y==="forbiddenEdit"?w=(0,U.ZT)("".concat(O("component.forbiddenEditReminderTip")),Z[c],"\u300A".concat(_,"\u300B").concat(H)):w=(0,U.ZT)("".concat(O("component.deleteElseReminderTip")),Z[c],"\u300A".concat(_,"\u300B(").concat(N?O("common.creator")+":"+N:"",")").concat(H),O(y==="delete"?"common.delete":"course.cancelRelease")),y==="move"?(m.Z.confirm({title:O("common.tip"),content:(0,U.ZT)("".concat(O("component.forbiddenMoveReminderTip")),"\u300A".concat(_,"\u300B").concat(H)),okText:O("common.ok"),onOk:()=>{this.onCancel()},onCancel:()=>{this.onCancel()}}),!1):(y==="continueEdit"?m.Z.confirm({title:O("common.tip"),content:w,okText:O("common.cancel"),cancelText:O("course.continueEdit"),onOk:()=>{this.onCancel()},onCancel:()=>{y==="continueEdit"&&this.props.continueEdit()}}):m.Z.info({title:O("common.tip"),content:w,okText:O("common.ok"),onOk:()=>{this.onCancel()}}),!1)}setTimeout(()=>{this.setState({loading:!1,tableList:E.data.list,tableTotal:E.data.total,tableTotalPages:E.data.pages})},300)})},this.handleTableChange=r=>{var s=this.state.params;s.page_number=r,this.setState({params:s},()=>{this.initTableList()})},this.renderFooter=()=>{var r=this.props,s=r.t,p=r.operation;return D().createElement("div",null,p==="continueEdit"?D().createElement(u.Z,{type:"primary",onClick:this.onContinueEdit},s("course.continueEdit")):null,D().createElement(u.Z,{type:"primary",onClick:this.onCancel},s("common.ok")))},this.state={loading:!0,params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0,resourceTypes:{questionnaire:this.props.t("common.questionnaire"),classify:this.props.t("course.category"),paper:this.props.t("exam.paperAddTitle"),question:this.props.t("learning.questionAddTitle"),course:this.props.t("study.course"),resource:this.props.t("common.courseware"),lecturer:this.props.t("course.lecturer"),evaluationProduct:this.props.t("questionn.evaluationTool")}},this.columns=[{title:this.props.t("common.number"),dataIndex:"userId",width:30,render:(r,s,p)=>p+1},{title:this.props.t("common.name"),dataIndex:"title",width:420,render:r=>D().createElement(R.Z,{title:r},D().createElement("div",{className:"cl-text-ellipsis",style:{width:420}},r))},{title:this.props.t("study.type"),dataIndex:"type_name",width:120},{title:this.props.t("common.creator"),dataIndex:"create_user_name",width:30}]}componentDidMount(){var n=this.props.onRef;n&&n(this)}componentDidUpdate(n){var r=this.props.onRef;r||this.props.visible&&this.props.visible!==n.visible&&this.props.resourceId&&this.setState({params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0},()=>{this.initTableList()})}render(){var n=this.props,r=n.visible,s=n.type,p=n.operation,c=n.t,v=this.state,I=v.loading,O=v.params,Z=v.tableList,y=v.tableTotal,E=v.tableTotalPages,S=v.resourceTypes;return D().createElement("div",null,y>1?D().createElement(T.ZP,{visible:r,title:p==="move"?"".concat(c("common.tip")):(0,U.ZT)("".concat(c("component.deleteReminder")),c(p==="delete"?"common.deletion":p==="cancelPublish"?"course.cancelRelease":"common.edit")),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},D().createElement("div",{className:"referenceWithOther"},D().createElement("div",{className:"referenceWithOther__tip"},p==="continueEdit"?"".concat(c("component.this")).concat(S[s]).concat(c("component.continueEditReminderTip2")):p==="forbiddenEdit"?"".concat(c("component.pleaseNote")).concat(S[s]).concat(c("component.forbiddenEditReminderTip2")):p==="move"?"".concat(c("component.forbiddenMoveTip")):(0,U.ZT)("".concat(c("component.deleteReminderTip")),S[s],c(p==="delete"?"common.delete":"course.cancelRelease"))),D().createElement(q.Z,{bordered:!0,size:"middle",columns:this.columns,rowKey:"id",dataSource:Z,pagination:!1,loading:I}),D().createElement(V.Z,{defaultPageSize:10,totalNum:y,totalPage:E,current:O.page_number,showRenderRefresh:!1,onChange:this.handleTableChange}))):null)}}Y.Z=(0,k.Z)()(a)},24177:function(ne,Y,e){"use strict";e.r(Y),e.d(Y,{default:function(){return j}});var z=e(62029),q=e(14781),te=e(53431),R=e(63185),x=e(9676),u=e(88986),Q=e(34792),m=e(48086),K=e(12924),i=e.n(K),D=e(91768),k=e(28216),G=e(57068),F=e(37055),U=e(11449),T=e(86726),V=e(10237),a=e(76651),t=e(30389),n=e(63848),r=e(6793),s=e(4408),p=e(62117),c=e(72456),v=e(59250),I=e(13013),O=e(30887),Z=e(99210),y=e(71194),E=e(57016),S=e(57361),_=e(9754),H=e.n(_),N=e(57254),w=e(28107),ee=e(1164),se=B=>{var g=B.user;return{userId:g.id||window.localStorage.getItem("uid"),isAdmin:g.isAdmin,modules:g.modules}};class ie extends i().PureComponent{constructor(g){var o;super(g);o=this,this.onCheckEdit=()=>{var d=this.props,h=d.record,f=d.userId,W=d.isAdmin,b="forbiddenEdit";if(!(h.creatorId!==f&&!W)&&!!this.referenceWithOtherListRef){var A=h.id;this.checkRefer(A,b).then(X=>{if(X){var J={path:"/training/examination/paper/add?paperId=".concat(this.props.record.id)};ee.Z.targetTo(J)}else this.handleReferenceList(A,b)})}},this.onCheckDelete=(0,S.Z)(H().mark(function d(){var h,f,W,b,A,X;return H().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(h=o.props,f=h.record,W=h.userId,b=h.isAdmin,A="delete",!(f.creatorId!==W&&!b)){ae.next=4;break}return ae.abrupt("return");case 4:if(o.referenceWithOtherListRef){ae.next=6;break}return ae.abrupt("return");case 6:X=f.id,o.checkRefer(X,A).then(de=>{if(de){var le=o.props.t;E.Z.confirm({title:"".concat(le("common.tip")),okText:le("common.ok"),cancelText:le("common.cancel"),content:le("exam.paperDeleteTip"),onOk:o.removePaper,onCancel:()=>{}})}else o.handleReferenceList(X,A)});case 8:case"end":return ae.stop()}},d)})),this.checkRefer=(d,h)=>this.referenceWithOtherListRef?this.referenceWithOtherListRef.initTableList(d,h):new Promise.resolve,this.removePaper=()=>{var d=F.ZP.PaperManager.removePaper(),h=this.props,f=h.record,W=h.t,b={access_token:window.localStorage.getItem("token"),ids:f.id};V.qg.post({url:d,data:b}).then(A=>{A.data.code===0&&(m.default.success(W("personal.removeSuccess")),this.props.onRemovePaper())})},this.handleReferenceList=(d,h)=>{this.setState(f=>({referenceWithOtherConfig:(0,u.Z)((0,u.Z)({},f.referenceWithOtherConfig),{},{visible:!f.referenceWithOtherConfig.visible,resourceId:d||"",operation:h||""})}))},this.moreOperate=()=>{var d=this.props,h=d.t,f=d.record,W=d.userId,b=d.isAdmin,A=this.state.actions;return i().createElement(Z.Z,null,(0,T.H3)("edit",A)?i().createElement(Z.Z.Item,{disabled:f.creatorId!==W&&!b},i().createElement("p",{className:f.creatorId!==W&&!b?"paper-manager-dropdown-menuitem":"cl-dropdown-menuitem",onClick:this.onCheckEdit},h("common.edit"))):null,(0,T.H3)("delete",A)?i().createElement(Z.Z.Item,{disabled:f.creatorId!==W&&!b},i().createElement("p",{className:f.creatorId!==W&&!b?"paper-manager-dropdown-menuitem":"cl-dropdown-menuitem",onClick:this.onCheckDelete},h("common.delete"))):null,(0,T.H3)("copyPaper",A)?i().createElement(Z.Z.Item,null,i().createElement("p",{className:"cl-dropdown-menuitem",onClick:()=>this.props.onCopyPaper(f)},h("live.copy"))):null)},this.state={actions:(0,T.V9)("paper",g.modules),referenceWithOtherConfig:{visible:!1,type:"paper",operation:"",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList}},this.referenceWithOtherListRef=null}render(){var g=this.state,o=g.actions,d=g.referenceWithOtherConfig,h=this.props,f=h.record,W=h.userId,b=h.isAdmin;return i().createElement("div",{className:"cl-table__cell-action"},i().createElement("a",{className:"cl-pointer ".concat(f.creatorId!==W&&!b?"disabled":""),onClick:()=>this.props.onSetVisibleRange(f)},this.props.t("courseManage.setTheVisibility")),(0,T.H3)("edit",o)||(0,T.H3)("delete",o)||(0,T.H3)("copyPaper",o)?i().createElement(i().Fragment,null,i().createElement("span",{className:"cl-pointer-divide"}),i().createElement(I.Z,{overlay:this.moreOperate()},i().createElement("span",{className:"cl-pointer"},this.props.t("common.more")," ",i().createElement(N.Z,null)))):null,i().createElement(w.Z,(0,z.Z)({},d,{onReferenceList:this.handleReferenceList,onRef:A=>{this.referenceWithOtherListRef=A}})))}}var re=(0,k.$j)(se)((0,D.Z)()(ie)),oe=e(36202),ce=e(60667),l=B=>{var g=B.user;return{userId:g.id||window.localStorage.getItem("uid"),isAdmin:g.isAdmin,lngType:g.lng}};class P extends i().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var g=[{title:this.props.t("exam.paperAddItemName"),dataIndex:"title",key:"title",width:400,render:(o,d)=>{var h=d.title,f=d.id;return this.props.shouldRenderPreview?i().createElement(ee.Z,{to:"/training/examination/paper/info?paperId=".concat(f)},i().createElement("span",{className:"paper-table-title"},h)):i().createElement("span",null,h)}},{title:this.props.t("libraryPractice.count"),width:100,dataIndex:"paperTotal",key:"paperTotal"},{title:this.props.t("exam.paperAddSecItemTotaled"),width:100,dataIndex:"totalScore",key:"totalScore"},{title:this.props.t("exam.passingGrade"),width:100,dataIndex:"passingScore",key:"passingScore"},{title:this.props.t("common.createTime"),width:164,dataIndex:"createTimeLabel",key:"createTimeLabel"},{title:this.props.t("common.visibleRange"),dataIndex:"visibleRange",key:"visibleRange",render:(o,d)=>{var h=d.visibleRange;return h==="all"?this.props.t("common.allCompany"):this.props.t("setting.partlyVisible")}},{title:this.props.t("common.creator"),width:106,dataIndex:"creatorName",key:"creatorName",render:(o,d)=>this.props.lngType==="en_us"&&o==="\u516C\u53F8"?"Company":i().createElement(ce.Z,{dataType:"userName",value:d.creator_user_id,name:o,type:d.creator_source_type})},{title:this.props.t("common.operate"),width:190,fixed:"right",key:"operate",render:(o,d)=>i().createElement(re,{record:d,onRemovePaper:this.props.onRemovePaper,onCopyPaper:this.props.onCopyPaper,onSetVisibleRange:this.props.onSetVisibleRange})}];return g}}render(){var g=this.props,o=g.isLoading,d=g.paperList,h=g.onSelectChange,f=g.selectedRowKeys,W=g.toolBarRender,b=g.headerTitle,A=this.props,X=A.userId,J=A.isAdmin,ae=this.getTableColumn(),de={selectedRowKeys:f,onChange:h,getCheckboxProps:le=>({disabled:le.creatorId!==X&&!J,name:le.name})};return i().createElement("section",null,i().createElement(oe.f,{dataSource:d,columns:ae,rowKey:le=>le.id,pagination:!1,loading:o,rowSelection:de,toolBarRender:W,headerTitle:b,scroll:{x:"max-content",y:"100%"},tableUUID:"9bfbd22a-38da-42b2-8bfe-9bd31d7207af"}))}}var C=(0,k.$j)(l)((0,D.Z)()(P)),$=B=>{var g=B.user;return{modules:g.modules}},L={pageNumber:1,pageSize:20};class M extends i().Component{constructor(g){super(g);this.onSearch=o=>{L.pageNumber=1,this.setState({keyword:o},()=>{this.getPaperList()})},this.onClassifyChange=o=>{L.pageNumber=1,this.setState({classify:o},()=>{this.getPaperList()})},this.onChangeOnlySeeMe=o=>{var d=o.target.checked;L.pageNumber=1,this.setState({onlySeeMe:d},()=>{this.getPaperList()})},this.onRemovePaper=()=>{this.getPaperList()},this.onCopyPaper=o=>{var d=this.props.t;V.WY.post({url:F.ZP.PaperManager.copyPaper(o.id),data:{}}).then(h=>{h.data.copied==="true"&&m.default.success(d("exam.copySucceed")),this.getPaperList()})},this.handleTableSelectChange=o=>{this.setState({selectedRowKeys:o})},this.handleMultiVisibleRange=()=>{var o=this.state.selectedRowKeys;this.setState(d=>({employeeProps:(0,u.Z)((0,u.Z)({},d.employeeProps),{},{visible:!0,paperIds:o,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[]}}}})}))},this.handleSingleVisibleRange=o=>{var d=o.visibleRange,h=o.scopes,f=o.id;this.setState({employeeProps:{visible:!0,paperIds:[f],initialParams:{employeeRange:{rangeType:d==="all"?1:d==="part"?2:3,rangeList:{dept:h.departmentList,post:h.postList,group:h.groupList,user:h.userList}}}}})},this.handleEmployeeOk=o=>{var d=this.state.employeeProps.paperIds,h=o.isAll,f=o.departmentIds,W=o.groupIds,b=o.postIds,A=o.userIds,X=o.qy_we_chat_vo,J={paper_ids:d.join(","),visible_range:h===1?"all":h===2?"part":"myself",department_ids:f,group_ids:W,post_ids:b,user_ids:A,qy_we_chat_vo:X};this.withApiSetEmployeeOk(J)},this.handleEmployeeCancel=()=>{this.setState(o=>({employeeProps:(0,u.Z)((0,u.Z)({},o.employeeProps),{},{visible:!1})}))},this.pageChange=o=>{L.pageNumber=o,this.getPaperList()},this.pageSizeChange=(o,d)=>{L.pageSize=d,this.getPaperList()},this.getPaperList=()=>{var o=F.ZP.PaperManager.getPaperList(),d=this.state,h=d.keyword,f=d.onlySeeMe,W=d.classify,b=L.pageNumber,A=L.pageSize,X={keyword:h,onlySeeMe:f,sortName:"createTime",sortOrder:"desc",pageSize:A,pageNumber:b,courseClassify:W[W.length-1]};this.setState({isLoading:!0}),V.WY.get({url:o,params:X}).then(J=>{J.data.list.forEach(ae=>{ae.createTimeLabel=(0,r.p6)(ae.createTime,"yyyy-MM-dd hh:mm")}),this.setState({isLoading:!1,paperList:J.data.list,paperTotal:J.data.total})})},this.withApiSetEmployeeOk=o=>{var d=this.props.t;V.WY.post({url:F.ZP.PaperManager.batchUpdateVisible(),data:(0,u.Z)({},o)}).then(h=>{h.data.result&&m.default.success(d("personal.batchSetRangeSuccess")),this.setState({selectedRowKeys:[]}),this.handleEmployeeCancel(),this.getPaperList()})},this.renderLeftRow=()=>{var o=this.props.t,d=G.parse(a.m8.location.search),h=d.renderGuide,f=h===void 0?!1:h,W=this.state,b=W.actions,A=W.selectedRowKeys,X=W.popOverProps;return i().createElement(c.Z,{showBtn:(0,T.H3)("add",b),actionText:o("exam.paperAdd"),tabLink:"/training/examination/paper/add",popOverProps:X,renderGuide:f,extraBtnSelectedRowKeys:A,showRendeExtraBtn:!0,extraBtnHandleMultiVisibleRange:this.handleMultiVisibleRange})},this.renderRightRow=()=>i().createElement(p.Z,{onSearch:this.onSearch,showCheckbox:!1}),this.state={actions:(0,T.V9)("paper",g.modules),keyword:"",onlySeeMe:!1,paperList:[],paperTotal:0,classify:[],isLoading:!1,employeeProps:{visible:!1,paperIds:"",initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[]}}}},selectedRowKeys:[],popOverProps:[{typeText:this.props.t("exam.paperAdd"),contentText:this.props.t("newUserGuidance.createPaperIntro"),buttonText:this.props.t("lecturerPage.know")}]}}componentDidMount(){this.getPaperList()}componentWillUnmount(){L.pageNumber=1,L.pageSize=20}componentWillUnmount(){L.pageNumber=1,L.pageSize=20}render(){var g=this.props.t,o=this.state,d=o.paperList,h=o.paperTotal,f=o.actions,W=o.isLoading,b=o.classify,A=o.employeeProps,X=o.selectedRowKeys,J=(0,u.Z)((0,u.Z)({},F.XE.INITIAL_PAGINATION),{},{current:L.pageNumber,total:h,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return i().createElement(U.Z,{pageContainerParams:{header:{title:g("leftMenuLists.testPaperManagement")}},pageTitle:g("exam.paperAddTitle")},i().createElement(s.Z,{title:g("documentTitle.examinationPaperList")}),i().createElement("div",{className:"paper-manager"},i().createElement("div",{className:"paper-manager-container"},i().createElement("div",{className:"paper-manager-filter"},i().createElement(n.Z,{onChange:this.onClassifyChange,value:b,unclassified:!1,showLabel:!1,className:"cl-search-normal-width",queryType:"paper_manage"}),i().createElement(x.Z,{onChange:this.onChangeOnlySeeMe,style:{marginLeft:16}},g("common.myCreated"))),i().createElement("div",{className:"paper-manager-list"},i().createElement("div",{className:"paper-manager-list-table",ref:ae=>{this.tableRef=ae}},i().createElement(C,{shouldRenderPreview:(0,T.H3)("preview",f),paperList:d,onCopyPaper:this.onCopyPaper,onRemovePaper:this.onRemovePaper,selectedRowKeys:X,onSelectChange:this.handleTableSelectChange,onSetVisibleRange:this.handleSingleVisibleRange,isLoading:W,toolBarRender:this.renderRightRow,headerTitle:this.renderLeftRow()})),h>L.pageSize||!J.hideOnSinglePage?i().createElement("div",{className:"paper-manager-list-pagination"},i().createElement(te.Z,J)):null)),A.visible&&i().createElement(t.Z,(0,z.Z)({},A,{title:g("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:g("component.chooseVisibleScope")},onlyChooseDept:!0,rangeAuth:!0,isLoading:!A.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk}))))}}var j=(0,k.$j)($)((0,D.Z)()(M))},31945:function(ne,Y,e){"use strict";e.d(Y,{Z:function(){return oe}});var z=e(88983),q=e(47933),te=e(20228),R=e(11382),x=e(62029),u=e(30887),Q=e(99210),m=e(59250),K=e(13013),i=e(57663),D=e(71577),k=e(63185),G=e(9676),F=e(71194),U=e(57016),T=e(88986),V=e(34792),a=e(48086),t=e(43358),n=e(34041),r=e(12924),s=e.n(r),p=e(28216),c=e(91768),v=e(57254),I=e(18329);class O extends s().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var l=this.props,P=l.visible,C=l.courseList,$=l.t;return s().createElement(I.ZP,{visible:P,title:$("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},s().createElement("div",{className:"referenceWithOtherCourses"},s().createElement("div",{className:"referenceWithOtherCourses__tip"},$("course.deleteCourseTip")),C.map((L,M)=>s().createElement("div",{className:"referenceWithOtherCourses__item",key:M},C.length>1?"".concat(M+1,"\u3001"):null," ",L))))}}var Z=(0,c.Z)()(O),y=e(10237),E=e(63848),S=e(58546),_=e(30389),H=e(54792),N=e(86726),w=e(37055),ee=n.Z.Option,se={setClassify:w.ZP.CourseManageList.setClassify,setScore:w.ZP.CourseManageList.setScore,setBatchEmployee:w.ZP.CourseManageList.setBatchEmployee,deleteCourse:w.ZP.CourseManageList.deleteCourse,exportCourseView:w.ZP.CourseManageList.exportCourseView,syncCourse:w.ZP.CourseManageList.syncCourse},ie=ce=>({qyShield:ce.user.qyShield});class re extends s().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=l=>{this.props.onClassifyChange(l)},this.handleChangeType=l=>{this.props.onTypeChange(l)},this.handleChangeCourseType=l=>{this.props.onCourseTypeChange(l)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=l=>{var P=l.node,C=this.props,$=C.selectedCourseIds,L=C.selectedProjectIds,M=C.onForceRender,j=C.t,B=P.id;B&&y.qg.post({url:se.setClassify(),data:{course_ids:$.join(","),project_ids:L.join(","),classify_id:B}}).then(()=>{a.default.success(j("course.setCourseClassifySuccess")),M()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(l=>({scoreProps:(0,T.Z)((0,T.Z)({},l.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(l=>({scoreProps:(0,T.Z)((0,T.Z)({},l.scoreProps),{},{visible:!1})}))},this.handleScoreOk=l=>{var P=l.value;if(P===0){this.handleScoreCancel();return}var C=this.props,$=C.selectedCourseIds,L=C.selectedProjectIds,M=C.onForceRender,j=C.t;y.qg.post({url:se.setScore(),data:{course_ids:$.join(","),project_ids:L.join(","),credit:P}}).then(()=>{a.default.success(j("course.setCourseScoreSuccess")),M()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(l=>({employeeProps:(0,T.Z)((0,T.Z)({},l.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=l=>{var P=this.props,C=P.selectedCourseIds,$=P.selectedProjectIds,L=P.onForceRender,M=P.t,j=l.isAll,B=l.departmentIds,g=l.groupIds,o=l.postIds,d=l.userIds,h=l.qy_we_chat_vo;y.WY.post({url:se.setBatchEmployee(),data:{course_ids:C.join(","),project_ids:$.join(","),department_ids:B,group_ids:g,is_all:j,post_ids:o,user_ids:d,qy_we_chat_vo:h}}).then(()=>{a.default.success(M("personal.batchSetRangeSuccess")),L()}),this.handleEmployeeCancel()},this.showReferenceCourseList=l=>{this.setState(P=>({showReferenceCourseListProps:(0,T.Z)((0,T.Z)({},P.showReferenceCourseListProps),{},{visible:!P.showReferenceCourseListProps.visible,courseList:l||[]})}))},this.actionDelete=()=>{var l=this.props,P=l.selectedCourseIds,C=l.selectedProjectIds,$=l.list,L=l.onForceRender,M=l.t,j=0,B=0,g=[];if($.forEach(o=>{P.includes(o.course_id)&&(o.reference_plan_count>0&&(B+=1),o.reference_plan_count>0&&g.push(o.title),o.can_delete==="true"&&(j+=1))}),B>0)this.showReferenceCourseList(g);else if(j!==P.length)a.default.warning(M("personal.deletePlatformCourseTip"));else{if(C.length>0){a.default.warning(M("personal.deleteProjectCourseTip"));return}U.Z.confirm({title:M("common.tip"),content:M("common.confirmDeleteTitle"),onOk(){y.qg.post({url:se.deleteCourse(),data:{enterpriseId:w.ZP.enterpriseId,ids:P.join(","),project_ids:C.join(",")}}).then(o=>{var d=o.data,h=d.code,f=d.msg;a.default["".concat(h===0?"success":"warning")](f),h===0&&L()})}})}},this.actionSyncSetting=()=>{this.setState(l=>({asyncProps:(0,T.Z)((0,T.Z)({},l.asyncProps),{},{visible:!0})}))},this.onAsyncChange=l=>{this.setState(P=>({asyncProps:(0,T.Z)((0,T.Z)({},P.asyncProps),{},{value:l.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var l=this.props,P=l.selectedCourseIds,C=l.selectedProjectIds,$=l.onForceRender,L=l.t,M=this.state.asyncProps;y.qg.post({url:se.syncCourse(),data:{course_ids:P.join(","),project_ids:C.join(","),syncProgress:M.value}}).then(j=>{var B=j.data,g=B.code,o=B.msg;g===0?(a.default.success(L("setting.setUpSucceed")),$()):a.default.warning(o)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var l=this.props,P=l.selectedCourseIds,C=l.selectedProjectIds,$=l.onForceRender,L=l.t;if(P.concat(C).length>20){a.default.warning(L("courseManage.exportMoreTip"));return}var M=se.exportCourseView(),j={course_Ids:P.join(","),project_Ids:C.join(",")};y.WY.get({url:M,params:j}).then(B=>{B.data.code===200&&a.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),$(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var l=w.ZP.downLoadCenter.getDownLoadingCount();y.WY.get({url:l,params:{}}).then(P=>{sessionStorage.setItem("downloadingCount",P.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:P.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=l=>{this.props.onCheckboxChange(l.target.checked)},this.handleSharingQueryRowCheckboxChange=l=>{this.props.onSharingCheckboxChange(l.target.checked)},this.renderCondition=()=>{var l=this.props,P=l.prefixCls,C=l.params,$=l.qyShield,L=l.t,M=C.classify_id?C.classify_id.split(","):[];return s().createElement("div",{className:"".concat(P,"__condition")},this.props.extraDom&&this.props.extraDom(),s().createElement(E.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:M,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),s().createElement(n.Z,{value:C.type,className:"cl-search-normal-width",onChange:this.handleChangeType},s().createElement(ee,{value:""},this.props.t("courseManage.allOrigin")),s().createElement(ee,{value:"original"},this.props.t("courseManage.originalCourse")),s().createElement(ee,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),s().createElement(ee,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:s().createElement(n.Z,{value:C.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},s().createElement(ee,{value:"all"},this.props.t("courseManage.allType")),s().createElement(ee,{value:"course"},this.props.t("common.courseLabel")),s().createElement(ee,{value:"microCourse"},this.props.t("common.microCourse")),s().createElement(ee,{value:"project"},this.props.t("leftMenuLists.studyProject"))),s().createElement(G.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},L("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&$==="false"?s().createElement(G.Z,{onChange:this.handleSharingQueryRowCheckboxChange},L("common.sharing")):null)},this.renderActions=()=>{var l=this.props,P=l.prefixCls,C=l.selectedCourseIds,$=l.selectedProjectIds,L=l.showNum,M=L===void 0?1:L,j=this.props.allowActions,B=(0,N.H3)("delete",j),g=(0,N.H3)("adjustment_classification",j),o=(0,N.H3)("set_visible",j),d=(0,N.H3)("export",j),h=(0,N.H3)("set_score",j),f=(0,N.H3)("progressSync",j),W=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:g},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:d},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:h},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:o},{name:this.props.t("common.delete"),type:"actionDelete",isShow:B},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:f}],b=W.filter(J=>J.isShow),A=[],X=[];if(b.length)M?(A=[...b.slice(0,M)],X=[...b.slice(M)]):X=[...b];else return null;return s().createElement("div",{className:"".concat(P,"__action")},A.map(J=>s().createElement(D.Z,{style:{marginRight:"8px"},key:J.type,disabled:!(C.length+$.length),onClick:this[J.type]},J.name)),X.length?s().createElement(K.Z,{disabled:!(C.length+$.length),overlay:this.renderMoreButton({buttons:X})},s().createElement(D.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",s().createElement(v.Z,null))):"")}}renderMoreButton(l){var P=l.buttons,C=this.props,$=C.selectedCourseIds,L=C.selectedProjectIds;return s().createElement(Q.Z,{onClick:M=>{var j=M.key;this[j]()}},P.map(M=>M.isShow?s().createElement(Q.Z.Item,{key:M.type,disabled:!($.length+L.length)},s().createElement("span",{className:"cl-pointer"},M.name)):null))}render(){var l=this.props,P=l.prefixCls,C=l.t,$=l.showRenderCondition,L=$===void 0?!0:$,M=l.showRenderActions,j=M===void 0?!0:M,B=this.state,g=B.classifyProps,o=B.scoreProps,d=B.employeeProps,h=B.showReferenceCourseListProps,f=B.asyncProps;return s().createElement("div",{className:P},L&&this.renderCondition(),j&&this.renderActions(),s().createElement(S.Z,(0,x.Z)({},g,{title:C("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),s().createElement(H.Z,(0,x.Z)({},o,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),d.visible&&s().createElement(_.Z,(0,x.Z)({},d,{title:C("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:C("component.chooseVisibleScope")},isLoading:!d.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),f.visible&&s().createElement(I.ZP,{wrapClassName:"cl-async-selector-modal",visible:f.visible,title:C("common.scheduleSyncSetting"),okText:C("common.ok"),cancelText:C("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},f.visible?s().createElement("div",{className:"".concat(P,"__async")},s().createElement("p",null," ",C("common.scheduleSyncSettingTip")),s().createElement(q.ZP.Group,{onChange:this.onAsyncChange,value:f.value},s().createElement(q.ZP,{value:0},C("common.outSync")),s().createElement(q.ZP,{value:1},C("common.synchronization")))):s().createElement(R.Z,{size:"large"})),s().createElement(Z,(0,x.Z)({},h,{showReferenceCourseList:this.showReferenceCourseList})))}}re.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var oe=(0,c.Z)()((0,p.$j)(ie)(re))}}]);
