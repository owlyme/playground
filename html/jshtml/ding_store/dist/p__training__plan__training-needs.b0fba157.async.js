(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[1569],{56226:function(Sa,Ee,t){"use strict";t.d(Ee,{Z:function(){return we}});var ta=t(71194),ge=t(57016),na=t(43185),x=t(53251),f=t(62029),g=t(57663),a=t(71577),oe=t(57361),ve=t(34792),De=t(48086),xe=t(33565),ja=t(9754),Ke=t.n(ja),Le=t(12924),y=t.n(Le),He=t(91768),Za=t(90631),se=t(84874),Ia=t(36202),Ca=t(79642),A=t(37055),Ae=V=>{switch(V){case"training_month_plan":return"month";case"training_temp_plan":return"temp";default:return V}},Ba=V=>{var O=Ae(V);switch(O){case"needs":return"".concat(A.ZP.trainingConfig.needsTemplate(),"?access_token=").concat(window.localStorage.getItem("token"));case"annual":return"".concat(A.ZP.trainingConfig.yearTemplate(),"?access_token=").concat(window.localStorage.getItem("token"));case"month":return"".concat(A.ZP.trainingConfig.monthAndTempTemplate(),"?type=month&access_token=").concat(window.localStorage.getItem("token"));case"temp":return"".concat(A.ZP.trainingConfig.monthAndTempTemplate(),"?type=temp&access_token=").concat(window.localStorage.getItem("token"));default:return"".concat(A.ZP.trainingConfig.needsTemplate(),"?access_token=").concat(window.localStorage.getItem("token"))}},Ge=(V,O)=>{var la=Ae(V);switch(la){case"needs":return O?A.ZP.trainingConfig.needsImportCommit():A.ZP.trainingConfig.needsImportValidate();case"annual":return O?A.ZP.trainingConfig.yearPlanImportCommit():A.ZP.trainingConfig.yearPlanImportValidate();case"month":return O?A.ZP.trainingConfig.monthAndTempImportCommit():A.ZP.trainingConfig.monthAndTempImportValidate();case"temp":return O?A.ZP.trainingConfig.monthAndTempImportCommit():A.ZP.trainingConfig.monthAndTempImportValidate();default:return O?A.ZP.trainingConfig.needsImportCommit():A.ZP.trainingConfig.needsImportValidate()}},ra=t(29712),Se=t.n(ra),k=V=>{var O=V.type,la=V.visible,We=V.title,de=V.t,B=V.width,Fa=V.handleCloseModal,Ye=V.fetchRefresh,Ua=(0,Le.useState)([]),R=(0,xe.Z)(Ua,2),ia=R[0],Oe=R[1],Ta=(0,Le.useState)([]),H=(0,xe.Z)(Ta,2),oa=H[0],ae=H[1],Qe=(0,Le.useState)(!1),sa=(0,xe.Z)(Qe,2),Ka=sa[0],ze=sa[1],Xe=w=>{if(w.file&&w.file.response)if(w.file.response.data){if(w.file.response.data.result==="false"){De.default.error(w.file.response.data.error_messages);return}w.file.response.data.error_messages&&(ae(w.file.response.data.error_messages),Oe([w.file.response.data]))}else De.default.error(de("upload.typeError"))},da={name:"file",action:Ge(O,!1),showUploadList:!1,data:{access_token:window.localStorage.getItem("token"),type:Ae(O)},headers:{"Enterprise-Id":localStorage.getItem("enterpriseId")},onChange:Xe},Je=()=>{Oe([]),ae([]),Fa("import")},Ve=function(){var w=(0,oe.Z)(Ke().mark(function Re(){var Ze,$e;return Ke().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return ze(!0),te.next=3,(0,Ca.Ji)({new_file_name:ia[0].new_file_name,type:Ae(O)},Ge(O,!0));case 3:Ze=te.sent,Ze.data.code==="200000"?(($e=Ze.data.data)===null||$e===void 0?void 0:$e.result)==="true"&&(Je(),Oe([]),ae([]),Ye(),ze(!1)):(De.default.error(Ze.data.message),ze(!1));case 6:case"end":return te.stop()}},Re)}));return function(){return w.apply(this,arguments)}}(),xa=y().createElement("div",{className:Se().footerBtn},y().createElement(a.Z,{onClick:Je,className:Se().btn},de("training.cancle")),y().createElement(a.Z,{loading:Ka,onClick:Ve,type:"primary",className:[Se().btn].join(" ")},de("training.confirm"))),ca=()=>{window.location.href=Ba(O)},wa=w=>[{title:w("training.file_name"),dataIndex:"new_file_name",key:"new_file_name"},{title:w("training.success"),dataIndex:"success_count",key:"success_count",width:80},{title:w("training.fail"),dataIndex:"failed_count",key:"failed_count",width:80}];return y().createElement("div",null,y().createElement(ge.Z,{title:We,visible:la,onCancel:Je,width:B||800,footer:xa,destroyOnClose:!0},y().createElement("div",{className:Se().importHeader},y().createElement("div",{className:Se().downloadTemplate},y().createElement(a.Z,{onClick:ca},y().createElement(Za.Z,null),de("training.download_template")),y().createElement("span",{className:Se().text},de("training.download_the_template_first_then_import"))),y().createElement(x.Z,(0,f.Z)({className:"import-score-import-btn right"},da),y().createElement(a.Z,{type:"primary"},y().createElement(se.Z,{iconClass:"icon-import"}),ia.length===0?de("component.importLabel"):de("employeeSummary.reImport")))),y().createElement(Ia.f,{scroll:{y:"100%",x:"max-content"},dataSource:ia,columns:wa(de),rowKey:w=>w.id,pagination:!1,options:{setting:!1,density:!1,fullScreen:!1,reload:!1},tableUUID:"5863e669-72f2-4e9f-adc1-a197feb12b4f"}),oa.length>0?y().createElement("div",{className:"import-score-tip"},y().createElement("p",null,y().createElement(se.Z,{iconClass:"icon-tishi"}),de("component.errorTips"),":"),oa.map((w,Re)=>y().createElement("p",{key:Re},w))):null))},we=(0,He.Z)()(k)},76404:function(Sa,Ee,t){"use strict";t.d(Ee,{nm:function(){return x},oR:function(){return f},DG:function(){return g}});var ta=t(33565),ge=t(12924),na=t.n(ge),x=(0,ge.createContext)(()=>{}),f=()=>(0,ge.useContext)(x),g=a=>Object.entries(a).map(oe=>{var ve=(0,ta.Z)(oe,2),De=ve[0],xe=ve[1];return"".concat(De,"=").concat(xe)}).join("&")},73665:function(Sa,Ee,t){"use strict";t.d(Ee,{lR:function(){return ge},zQ:function(){return na},Sc:function(){return x}});var ta={labelCol:{xs:{span:6},sm:{span:6}},wrapperCol:{xs:{span:16},sm:{span:16}}},ge=f=>[{label:f("training.whole"),value:"all"},{label:f("training.published"),value:"published"},{label:f("training.unpublished"),value:"unpublished"},{label:f("training.reject"),value:"reject"},{label:f("training.under_approval"),value:"under_approval"}],na={plan_year:"training_year",plan_month:"training_month",status:"status",department:"department_ids",create_user:"create_user",query_param:"query_param",is_my:"is_my"},x={training_year:"",status:"all"}},55527:function(Sa,Ee,t){"use strict";t.r(Ee),t.d(Ee,{default:function(){return Ot}});var ta=t(58024),ge=t(39144),na=t(34792),x=t(48086),f=t(33565),g=t(12924),a=t.n(g),oe=t(91768),ve=t(76404),De=t(63185),xe=t(9676),ja=t(14965),Ke=t(11448),Le=t(78138),y=t.n(Le),He=t(57254),Za=t(43086),se=t.n(Za),Ia=t(64262),Ca=t(64303),A=e=>{var n=e.t,r=(0,ve.oR)(),p=r.queryTrainingList,s=r.pageInfo,d=(l,o)=>{var u;switch(l){case"training_year":u=o?y()(o).format("YYYY"):"";break;case"is_my":u=o.target.checked;break;case"department_ids":u=o.join(",");break;default:u=o||"";break}p(Object.assign(s,{[l]:u}))};return a().createElement("div",{className:se().trainingHeader},a().createElement("div",{className:se().trainingFilter},a().createElement("div",{className:se().selectTime,id:"trainingDemand"},a().createElement(Ke.Z,{picker:"year",suffixIcon:a().createElement(He.Z,null),getPopupContainer:()=>document.getElementById("trainingDemand"),onChange:l=>d("training_year",l),placeholder:n("internationalizationDate.year"),className:se().yearPicker}),a().createElement("div",{className:se().selectMonth},a().createElement(Ca.Z,{getPopupContainer:()=>document.getElementById("trainingDemand"),onChange:l=>d("training_month",l)})),a().createElement(Ia.Z,{style:{width:"300px"},parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,handleTreeSelectChange:l=>d("department_ids",l),className:se().orgSelect,multiple:!0,getPopupContainer:()=>document.getElementById("trainingDemand")}),a().createElement("div",{className:se().checkBoxMine},a().createElement(xe.Z,{onChange:l=>d("is_my",l)},n("training.look_me"))))))},Ae=(0,oe.Z)()(A),Ba=t(14781),Ge=t(53431),ra=t(62029),Se=t(93485),k=t(88986),we=t(57361),V=t(88983),O=t(47933),la=t(59250),We=t(13013),de=t(57663),B=t(71577),Fa=t(22385),Ye=t(31097),Ua=t(30887),R=t(99210),ia=t(47673),Oe=t(4107),Ta=t(9754),H=t.n(Ta),oa=t(28216),ae=t(96486),Qe=t(49101),sa=t(84391),Ka=t(71194),ze=t(57016),Xe=t(51909),da=t(92954),Je=t(14216),Ve=t.n(Je),xa=e=>{var n=e.visible,r=e.type,p=e.title,s=e.currentItem,d=e.handleCallBack,l=e.forms,o=e.width,u=e.handleCloseModal,b=e.t,E=(0,g.useRef)(null),T=(0,g.useState)(),F=(0,f.Z)(T,2),re=F[0],U=F[1],J=function(){var M=(0,we.Z)(H().mark(function W(_){var Y;return H().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!(E&&E.current)){N.next=7;break}return N.next=3,(0,da.Gy)(E.current);case 3:Y=N.sent,Y||E.current.submitForm(),U(_);case 7:case 8:case"end":return N.stop()}},W)}));return function(_){return M.apply(this,arguments)}}(),$=()=>{E&&E.current&&(E.current.resetForm(),u())},K=M=>{var W=(0,k.Z)((0,k.Z)({},M),{},{submit_type:re});d(W),$()},S=a().createElement("div",{className:Ve().footerBtn},a().createElement(B.Z,{onClick:$,className:Ve().btn},b("training.cancle")),a().createElement(B.Z,{onClick:(0,ae.debounce)(()=>J("save"),1e3),className:Ve().btn},b("common.save")),["month","temporary","trainingNeeds"].includes(r)&&a().createElement(B.Z,{type:"primary",onClick:(0,ae.debounce)(()=>J("commit"),1e3),className:Ve().btn},b("common.release")));return a().createElement("div",null,a().createElement(ze.Z,{title:p,visible:n,onCancel:$,width:o,footer:S,destroyOnClose:!0},a().createElement(Xe.Z,{ref:E,fields:l,initialValue:s,onSubmitCallback:K})))},ca=(0,oe.Z)()(xa),wa=t(56226),w=t(44586),Re=t(7145),Ze=t.n(Re),$e=t(36546),Ha=t(44289),te=t(57482),Jt=t(48736),Na=t(27049),tt=t(57119),Ga=t(76651),G=t(94532),Wa=t(65771),je=t(79642),nt=(e,n,r)=>{var p={demandId:e};(0,je.d1)(p).then(s=>{s&&s.data.code==="200000"&&(x.default.success("".concat(r("training.delete_success"),"\uFF01"),3),n())})},rt=(e,n,r)=>{var p={demandId:e};(0,je.BL)(p).then(s=>{s&&s.data.code==="200000"&&(x.default.success("".concat(r("training.cancel_success"),"\uFF01"),3),n())})},lt=(e,n,r,p,s,d)=>{var l={commit:"".concat(d("training.commit_replease"),"!"),save:"".concat(d("training.save"),"!")};it(e,n).then(o=>{if(o&&o.data.code==="200000"){var u=o.data.data,b=u.business_id,E=u.type,T=u.has_flow_template,F=u.content;T&&n.submit_type==="commit"?s({isShowApprovalModal:!0,businessId:b,bizType:E,approvalTitle:n.name,content:F}):(x.default.success(l[n.submit_type||"save"]),p({visible:!1,type:"add",currentItem:{}}),r())}})},it=(e,n)=>e==="add"?(0,je.S9)(n):(0,je.k_)(n),ot=(e,n,r,p,s,d)=>{(0,te.B3)(e).then(l=>{if(l&&l.data.code==="200000"){var o=l.data.data,u=o.business_id,b=o.type,E=o.has_flow_template,T=o.content;E&&e.submit_type==="commit"?p({isShowApprovalModal:!0,businessId:u,bizType:b,approvalTitle:e.name,content:T}):(x.default.success("".concat(d("training.add_plan"),"!"),3),n(),r("add_plan"),s([]))}})},st=(e,n,r,p,s,d,l)=>{(0,te.um)(e).then(o=>{if(o&&o.data.code==="200000"){var u=o.data.data,b=u.has_flow_template,E=u.business_id,T=u.type,F=u.content;b&&e.submit_type==="commit"?p({isShowApprovalModal:!0,businessId:E,bizType:T,approvalTitle:e.name,content:F}):(x.default.success("".concat(l("training.merge_success")),3),n(),r("add_plan"),s([]),d({}))}})},ce=t(9142),dt=t(73489),me=t.n(dt),Qa=t(6793),ct=(e,n,r,p)=>{var s=l=>{var o=l.type,u=l.title,b=l.record;ze.Z.confirm({title:u,icon:a().createElement(tt.Z,null),onOk:()=>{try{ma(o,b,r,n,e)}catch(E){console.error(E)}}})},d=(l,o)=>u=>{var b=u.key;switch(b){case"delete":s({type:"delete",title:"".concat(o("training.is_delete"),"?"),record:l});break;case"publish":["published","under_approval"].includes(l.status)&&s({type:"resetPublish",title:"".concat(o("training.is_cancel")),record:l});break;default:break}};return[{title:e("training.trainingNeed"),dataIndex:"name",key:"name",width:150,fixed:"left",render:(l,o)=>a().createElement(G.Z,{title:l||"-",width:150,placement:"topLeft",isCoolCopy:!0,copyTitle:l||"-"},a().createElement("a",{onClick:()=>{Ga.m8.push("/training/trainingPlan/trainPlan/detail?bizType=training_demand&instanceId=".concat(o.workflow_instance_id||null,"&businessId=").concat(o.id))}},l||"-"))},{title:e("training.training_type"),dataIndex:"category",key:"category",width:80,render:l=>a().createElement(G.Z,{title:l||"-",width:80,placement:"topLeft"},l||"-")},{title:e("training.training_form"),dataIndex:"form",key:"form",width:80,render:l=>{var o=Wa.K.filter(u=>u.key===l);return o.length>0?o[0].title:"-"}},{title:e("training.executive_department"),dataIndex:"department_name",key:"department_name",width:80,render:l=>a().createElement(G.Z,{title:l||"-",width:80,placement:"topLeft"},l||"-")},{title:e("training.year_of_training2"),dataIndex:"training_year",key:"training_year",width:80},{title:e("training.training_month"),dataIndex:"training_month",key:"training_month",width:80,render:l=>a().createElement(G.Z,{title:l||"-",width:80,placement:"topLeft"},l||"-")},{title:e("training.person_in_charge"),dataIndex:"directors",key:"directors",width:80,render:l=>{var o=l.length>0?l.map(u=>u.name).join(","):"";return a().createElement(G.Z,{title:o||"-",width:80,placement:"topLeft"},o||"-")}},{title:e("training.executor"),dataIndex:"executors",key:"executors",width:80,render:l=>{var o=l.length>0?l.map(u=>u.name).join(","):"";return a().createElement(G.Z,{title:o||"-",width:80,placement:"topLeft"},o||"-")}},{title:e("training.lecturer"),dataIndex:"lecturer",key:"lecturer",width:80,render:l=>a().createElement(G.Z,{title:l||"-",width:80,placement:"topLeft"},l||"-")},{title:e("training.state"),dataIndex:"status",key:"status",width:80,render:l=>{var o=(0,Wa.y)(e).filter(u=>u.key===l);return o.length>0?o[0].title:"-"}},{title:e("training.creator"),dataIndex:"create_user_name",key:"create_user_name",width:80},{title:e("training.creation_time"),dataIndex:"create_time",key:"create_time",width:150,render:l=>(0,Qa.p6)(parseInt(l),"yyyy-MM-dd hh:mm")},{title:e("common.operate"),dataIndex:"action",key:"action",fixed:"right",width:150,render:(l,o)=>{var u=a().createElement(R.Z,{onClick:d(o,e)},p.edit?a().createElement(R.Z.Item,{key:"edit"},["published","under_approval"].includes(o.status)?a().createElement(Ye.Z,{title:"".concat(e("training.please_cancel_publishing_before_attempting_the_operation"))},a().createElement("span",{className:me().disabled},e("common.edit"))):a().createElement("a",{onClick:()=>ma("edit",o,r,n,e)},e("common.edit"))):"",p.delete?a().createElement(R.Z.Item,{key:"delete"},["published","under_approval"].includes(o.status)?a().createElement(Ye.Z,{title:"".concat(e("training.please_cancel_publishing_before_attempting_the_operation"))},a().createElement("span",{className:me().disabled},e("common.delete"))):a().createElement("a",null,e("common.delete"))):"",p.release_or_cancelled?a().createElement(R.Z.Item,{key:"publish"},["unpublished","reject"].includes(o.status)?a().createElement("a",{onClick:()=>ma("publish",o,r,n,e)},e("common.release")):a().createElement("a",null,e("courseManage.cancelPublished"))):"");return a().createElement("div",null,a().createElement("a",{onClick:()=>ma("detail",o,r,n,e)},e("common.viewDetails")),Object.values(p).filter(b=>b==!0).length!==0?a().createElement(a().Fragment,null,a().createElement(Na.Z,{type:"vertical"}),a().createElement(We.Z,{overlay:u,placement:"bottomLeft"},a().createElement("a",null,e("common.more"),a().createElement(He.Z,null)))):"")}}]},ma=(e,n,r,p,s)=>{switch(e){case"delete":nt(n.id,r,s);break;case"resetPublish":rt(n.id,r,s);break;case"edit":case"publish":p("edit",n);break;case"detail":Ga.m8.push("/training/trainingPlan/trainPlan/detail?bizType=training_demand&instanceId=".concat(n.workflow_instance_id||null,"&businessId=").concat(n.id));break;default:break}},X={span:24,labelCol:{xs:{span:8},sm:{span:4}},wrapperCol:{xs:{span:12},sm:{span:16}}},ua={span:8,labelCol:{xs:{span:24},sm:{span:12}},wrapperCol:{xs:{span:24},sm:{span:12}}},Xa=e=>[{name:"name",label:e("training.trainingNeed"),type:"text",required:!0,placeholder:e("training.please_enter_training_requirements"),config:{maxLength:60},layout:X,validate:n=>n?(0,ce.w)(n,e):e("common.requiredNotBlank")},{name:"category",label:e("training.category"),type:"text",placeholder:e("training.please_enter_a_category"),layout:X,config:{maxLength:60},validate:n=>n?(0,ce.w)(n,e):""},{name:"form",label:e("training.training_form"),type:"select",placeholder:e("training.please_select_training_category"),config:{getPopupContainer:()=>document.getElementById("form"),defaultValue:"online"},options:[{label:e("training.on_line"),value:"online"},{label:e("training.offline"),value:"offline"},{label:e("training.blend"),value:"blend"},{label:e("training.other_training"),value:"other"}],layout:X},{name:"target",placeholder:e("training.please_enter_training_purpose"),label:e("training.training_purpose"),type:"textArea",config:{maxLength:1e3},validate:n=>n?(0,ce.w)(n,e):"",layout:X},{name:"plan_user_quantity",label:e("training.planned_number"),type:"number",config:{addonAfter:e("training.person_time"),min:0,max:9999999,defaultValue:0,precision:0},validate:n=>n?(0,ce.m)(n,e):"",layout:ua},{name:"estimated_cost",label:e("training.estimated_cost"),config:{addonAfter:e("training.element"),min:0,max:9999999,step:.1,defaultValue:0,precision:1},validate:n=>n?(0,ce.m)(n,e):"",type:"number",layout:ua},{name:"class_hours",label:e("training.estimated_class_hours"),type:"number",config:{addonAfter:e("training.class_hour"),min:0,max:9999999,defaultValue:0,precision:0},validate:n=>n?(0,ce.m)(n,e):"",layout:(0,k.Z)({offset:8},ua)},{name:"session_quantity",label:e("training.estimated_number_of_sessions"),type:"number",config:{addonAfter:e("training.frequency"),min:1,max:9999999,defaultValue:0,precision:0},validate:n=>n?(0,ce.m)(n,e):"",layout:ua},{name:"lecturer",placeholder:e("training.please_fill_in_instructor"),label:e("training.training_institution_lecturer"),type:"text",config:{maxLength:60},layout:X,validate:n=>n?(0,ce.w)(n,e):""},{name:"training_object",label:e("training.training_object"),type:"text",placeholder:e("training.please_enter_the_training_object"),layout:X,validate:n=>n?(0,ce.w)(n,e):""},{name:"training_year",label:e("training.year_of_training"),type:"select",validate:n=>n?"":e("common.requiredNotBlank"),required:!0,placeholder:e("training.please_select_training_year"),layout:X,config:{getPopupContainer:()=>document.getElementById("training_year"),defaultValue:parseInt(y()(new Date).format("YYYY"))},options:mt(e)},{name:"training_month",label:e("training.training_month"),type:"month",placeholder:e("training.please_select_training_month"),config:{mode:"multiple",showAll:!1,showSearch:!1,allowClear:!0},layout:X},{name:"address",label:e("training.training_location"),layout:X,placeholder:e("training.please_enter_the_training_location"),validate:n=>n?(0,ce.w)(n,e):"",config:{maxLength:1e3},type:"text"},{name:"department_id",label:e("training.executive_department"),type:"department",placeholder:e("training.please_department_name"),config:{treeSelect:!0},layout:X},{name:"directors",label:e("training.person_in_charge"),type:"users",config:{onlyUser:!0},validate:n=>(0,ae.reduce)(n,(r,p)=>r.concat(p),[]).length===0?e("common.requiredNotBlank"):"",required:!0,layout:X},{name:"executors",label:e("training.executor"),type:"users",config:{onlyUser:!0},layout:X}],mt=e=>{var n=parseInt(y()().format("YYYY")),r=(0,ae.map)(new Array(3),(p,s)=>{var d=n+parseInt(s);return{label:"".concat(d).concat(e("internationalizationDate.year1")),value:d}});return r},ut=t(86824),Ne=t.n(ut),$t=t(62350),pt=t(75443),Pa=t(60667),gt=t(2396),vt=t(84874),ft=e=>{var n=parseInt(y()().format("YYYY")),r=(0,ae.map)(new Array(3),(p,s)=>{var d=n+parseInt(s);return{label:"".concat(d).concat(e("internationalizationDate.year")),value:d}});return r},Ja={labelCol:{xs:{span:12},sm:{span:3}},wrapperCol:{xs:{span:16},sm:{span:16}}},ht=e=>{var n=s=>(0,gt.QK)(s,e("common.requiredNotBlank")),r=ft(e),p=[{name:"name",label:e("training.planName"),type:"text",required:!0,validate:n,placeholder:e("training.please_input_plan"),layout:Ja},{name:"plan_year",label:e("training.plan_year"),type:"select",placeholder:e("training.select_year"),config:{getPopupContainer:()=>document.getElementById("plan_year"),defaultValue:parseInt(y()(new Date).format("YYYY"))},layout:Ja,options:r}];return p},yt=(e,n)=>[{title:e("training.training_content"),dataIndex:"name",key:"name",width:120,fixed:"left",render:r=>a().createElement(G.Z,{title:r||"-",width:120,placement:"topLeft",isCoolCopy:!0,copyTitle:r||"-"},r||"-")},{title:e("training.estimated_number_of_sessions"),dataIndex:"session_quantity",key:"session_quantity",width:80,render:r=>a().createElement(G.Z,{title:r?r.toString():"1",width:100,placement:"topLeft"},r?r.toString():"1")},{title:e("training.estimated_cost"),dataIndex:"estimated_cost",key:"estimated_cost",width:100,render:r=>a().createElement(G.Z,{title:r?r.toString():"0",width:100,placement:"topLeft"},r?r.toString():"0")},{title:e("training.planned_number"),dataIndex:"plan_user_quantity",key:"plan_user_quantity",width:80,render:r=>a().createElement(G.Z,{title:r?r.toString():"0",width:100,placement:"topLeft"},r?r.toString():"0")},{title:e("training.executive_department"),dataIndex:"department_id",key:"department_id",width:150,render:(r,p)=>!r||r==="0"||r===0?"-":p.department_name},{title:e("training.person_in_charge"),dataIndex:"directors",key:"directors",width:100,render:r=>{var p=r.user?r.user.map((s,d)=>a().createElement(a().Fragment,null,d!==0?"\u3001":"",a().createElement(Pa.Z,{key:s.user_id,type:s.source_type,value:s.user_id,name:s.name||s.user_name,dataType:"userName"}),"\u3001")):r.length>0?r.map((s,d)=>a().createElement(a().Fragment,null,d!==0?"\u3001":"",a().createElement(Pa.Z,{key:s.user_id,type:s.source_type,value:s.user_id,name:s.name||s.user_name,dataType:"userName"}))):"";return p||"-"}},{title:e("training.expected_training_month"),dataIndex:"training_month",key:"training_month",width:120,render:r=>a().createElement(G.Z,{title:r?r.toString():"-",width:120,placement:"topLeft"},r?r.toString():"-")},{title:e("common.operate"),dataIndex:"action",key:"action",fixed:"right",width:150,render:(r,p)=>a().createElement(a().Fragment,null,a().createElement("a",{onClick:()=>{n("edit",p)}},"\u7F16\u8F91"),a().createElement(Na.Z,{type:"vertical"}),a().createElement(pt.Z,{title:"".concat(e("training.is_delete")),onConfirm:()=>{n("delete",p)},onCancel:()=>{x.default.info("".concat(e("training.cancle_operate")),3)},okText:"".concat(e("training.confirm")),cancelText:"".concat(e("training.cancle"))},a().createElement("a",null,e("training.delete"))),localStorage.getItem("dingPersonnel")!=="dingPersonnel"&&a().createElement(a().Fragment,null,a().createElement(Na.Z,{type:"vertical"}),a().createElement(vt.Z,{iconClass:"iconf-move"})))}],bt=t(86458),$a=t(18329),_a=t(73704),Ma=t(36202),Et=bt.Z.DragTableRow,St=e=>{var n=e.title,r=e.visible,p=e.width,s=e.ids,d=e.t,l=e.handleCloseModal,o=e.planId,u=e.actionType,b=(0,g.useState)("save"),E=(0,f.Z)(b,2),T=E[0],F=E[1],re=(0,g.useState)(!1),U=(0,f.Z)(re,2),J=U[0],$=U[1],K=(0,g.useState)({}),S=(0,f.Z)(K,2),M=S[0],W=S[1],_=(0,g.useState)([]),Y=(0,f.Z)(_,2),L=Y[0],N=Y[1],Pe=(0,g.useState)({modalVisible:!1,type:"add",currentItem:{}}),Me=(0,f.Z)(Pe,2),Ce=Me[0],he=Me[1],Be=(0,g.useState)({isShowApprovalModal:!1,businessId:"",bizType:"",approvalTitle:"",content:{}}),ue=(0,f.Z)(Be,2),le=ue[0],Z=ue[1],j=le.isShowApprovalModal,Q=le.businessId,ye=le.bizType,_e=le.approvalTitle,Fe=le.content,qe=Ce.modalVisible,ke=Ce.type,pa=Ce.currentItem,q=(0,g.useRef)(null),ka=(0,ve.oR)(),Ue=ka.queryTrainingList,Da=()=>{$(!0);var h={ids:s.join(",")};(0,je.pK)(h).then(c=>{if(c.data.code==="200000"){var m=[];c.data.data.length>0&&c.data.data.forEach(P=>{m.push((0,k.Z)((0,k.Z)({},P),{},{uuid:(0,w.Z)()}))}),N(m),o&&u==="edit"&&ie(m),$(!1)}else x.default.error(c.data.message)}).catch(c=>{x.default.error(c.message)})},La=function(){var h=(0,we.Z)(H().mark(function c(m){var P;return H().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,te.Yy)(m);case 2:return P=I.sent,I.abrupt("return",P.data.data?ga(P.data.data):"-");case 4:case"end":return I.stop()}},c)}));return function(m){return h.apply(this,arguments)}}(),ga=h=>a().createElement(Pa.Z,{type:h.source_type,value:h.id,name:h.name,dataType:"departmentName"});(0,g.useEffect)(()=>{s.length>0&&Da()},[s]);var ie=h=>{(0,te.DM)("annual",o).then(c=>{if(c.data.code==="200000"||c.data.code===2e5){var m=c.data.data.content_list;if(W(c.data.data),m.length===0)return;var P=[];m.forEach(D=>{P.push((0,k.Z)((0,k.Z)({},D),{},{uuid:(0,w.Z)()}))}),N(h.concat(P))}})},ee=()=>{q&&q.current&&q.current.resetForm(),l()},Te=h=>{var c=[];if(L.forEach((D,I)=>{D.directors&&D.directors.length>0&&(D.directors=D.directors.map(z=>(console.log("col",z),z.id))),D.executors&&D.executors.length>0&&(D.executors=D.executors.map(z=>z.id)),D.sort=I.toString(),c.push(D)}),u==="edit"){var m=(0,k.Z)((0,k.Z)({},h),{},{id:M.id,submit_type:T,content_list:c});st(m,Ue,l,Z,N,W,d)}else{var P=(0,k.Z)((0,k.Z)({},h),{},{submit_type:T,content_list:c});ot(P,Ue,l,Z,N,d)}},ea=function(){var h=(0,we.Z)(H().mark(function c(m){var P;return H().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(q&&q.current)){I.next=7;break}return I.next=3,(0,da.Gy)(q.current);case 3:P=I.sent,P||q.current.submitForm(),F(m);case 7:case 8:case"end":return I.stop()}},c)}));return function(m){return h.apply(this,arguments)}}(),be=a().createElement("div",{className:Ne().footerBtn},a().createElement(B.Z,{onClick:ee,className:Ne().btn},d("training.cancle")),a().createElement(B.Z,{className:Ne().btn,onClick:()=>ea("save")},d("training.save_draft")),a().createElement(B.Z,{onClick:()=>ea("commit"),type:"primary",className:Ne().btn},d("training.confirm"))),Aa=function(){var h=(0,we.Z)(H().mark(function c(m){var P;return H().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(m.directors&&m.directors.user&&(m.directors=m.directors.user.map(z=>({id:z.id,name:z.user_name||z.name}))),m.executors&&m.executors.user&&(m.executors=m.executors.user.map(z=>({id:z.id,name:z.user_name||z.name}))),m.training_month&&m.training_month.length>0&&(m.training_month=m.training_month.join(",")),console.log("-----\u63D0\u4EA4-----",m),!(m.department_id&&m.department_id!==0&&m.department_id!=="0")){I.next=11;break}return I.next=10,La(m.department_id);case 10:m.department_name=I.sent;case 11:ke==="add"?(m.uuid=(0,w.Z)(),N(Ze()(L,{$push:[m]}))):(P=L.findIndex(z=>z.uuid===m.uuid),N(Ze()(L,{$splice:[[P,1,m]]}))),he({type:"add",modalVisible:!1,currentItem:{}});case 15:case"end":return I.stop()}},c)}));return function(m){return h.apply(this,arguments)}}(),Ya=()=>{he({modalVisible:!1,type:"add",currentItem:{}})},va=(h,c)=>{switch(h){case"add":he({modalVisible:!0,type:h,currentItem:{}});break;case"edit":if(c.training_month&&c.training_month.length>0?c.training_month=c.training_month.split(","):c.training_month=void 0,c.directors&&c.directors.length>0){var m=c.directors;c.directors={user:m}}else c.directors={user:[]};if(c.executors&&c.executors.length>0){var P=c.executors;c.executors={user:P}}else c.executors={user:[]};he({modalVisible:!0,type:h,currentItem:c});break;case"delete":var D=L.findIndex(I=>I.uuid===c.uuid);N(Ze()(L,{$splice:[[D,1]]})),x.default.success("".concat(d("training.delete_success"),"!"),3);break;default:break}},fa=()=>{Z({isShowApprovalModal:!1,businessId:"",bizType:"",approvalTitle:"",content:{}}),Ue(),l()},ha=()=>{Z({isShowApprovalModal:!1,businessId:"",bizType:"",approvalTitle:"",content:{}}),Ue(),l()},ya=ht(d),Oa=Xa(d),za={add:d("training.add_trainingNeeds"),edit:d("training.edit_trainingNeeds")},Va=(h,c)=>{var m=(0,ae.cloneDeep)(L),P=m[h];m.splice(h,1),m.splice(c,0,P),N(m)};return a().createElement("div",null,a().createElement($a.ZP,{title:n,visible:r,width:p||900,onCancel:ee,footer:be,destroyOnClose:!0,size:"small"},a().createElement("div",{className:Ne().filter},a().createElement("h4",null,d("training.base_info")),u==="edit"?Object.keys(M).length>0?a().createElement(Xe.Z,{ref:q,fields:ya,initialValue:M,onSubmitCallback:Te}):null:a().createElement(Xe.Z,{ref:q,fields:ya,initialValue:{},onSubmitCallback:Te})),a().createElement("div",{className:Ne().planDemand},a().createElement("h4",null,d("training.plan_detail")),a().createElement(B.Z,{className:Ne().add,onClick:()=>va("add",{})},a().createElement(Qe.Z,null)," ",d("training.new")),a().createElement(Ma.f,{scroll:{y:"100%",x:"max-content"},loading:J,dataSource:L,columns:yt(d,va),rowKey:h=>h.id,pagination:!1,options:{setting:!1,density:!1,fullScreen:!1,reload:!1},onRow:(h,c)=>({index:c,record:h,keyName:"id",moveRow:Va,onMouseEnter:()=>{},onMouseLeave:()=>{}}),components:{body:{row:Et}},tableUUID:"5863e669-72f2-4e9f-adc1-a197feb12b4f"}),a().createElement(ca,{title:za[ke],visible:qe,currentItem:pa,handleCallBack:Aa,type:"",forms:Oa,width:900,handleCloseModal:Ya}))),j&&a().createElement(_a.Z,{content:Fe,show:j,setShow:fa,submitRefresh:ha,businessId:Q,bizType:ye,title:_e}))},Zt=(0,oe.Z)()((0,$e.Z5)(Ha.ZP)(St)),qa=t(37055),It=e=>[{title:e("training.planName"),dataIndex:"name",key:"name",width:120,render:n=>a().createElement(G.Z,{width:120,title:n||"-",placement:"topLeft"},n||"-")},{title:e("training.year"),dataIndex:"plan_year",key:"plan_year",width:80},{title:e("training.creation_time"),dataIndex:"create_time",key:"create_time",width:150,render:n=>(0,Qa.p6)(parseInt(n),"yyyy-MM-dd hh:mm")},{title:e("training.creator"),dataIndex:"create_user_name",key:"create_user_name",width:120}],Ct=t(80667),fe=t.n(Ct),Tt=Oe.Z.Search,xt=e=>{var n=e.t,r=e.visible,p=e.title,s=e.width,d=e.handleCloseModal,l=e.ids,o=e.handleSubmit,u=(0,g.useState)(!1),b=(0,f.Z)(u,2),E=b[0],T=b[1],F=(0,g.useState)([]),re=(0,f.Z)(F,2),U=re[0],J=re[1],$=(0,g.useState)({page_num:1,page_size:20,plan_year:y()(new Date().getFullYear(),"YYYY")}),K=(0,f.Z)($,2),S=K[0],M=K[1],W=(0,g.useState)([]),_=(0,f.Z)(W,2),Y=_[0],L=_[1],N=Z=>{T(!0);var j=Z?(0,k.Z)((0,k.Z)({},Z),{},{plan_year:y()(Z.plan_year).format("YYYY"),status:"unpublished,reject"}):(0,k.Z)((0,k.Z)({},S),{},{plan_year:y()(S.plan_year).format("YYYY"),status:"unpublished,reject"});(0,te.Wz)(j).then(Q=>{if(Q.data.code==="200000"){var ye=Q.data.data,_e=ye.list,Fe=ye.page_num,qe=ye.page_size,ke=ye.total;J(_e),T(!1),M(Object.assign(j,{page_num:Fe,page_size:qe,total:ke}))}else x.default.error(Q.data.message)}).catch(Q=>{x.default.error(Q.message)})};(0,g.useEffect)(()=>{l.length>0&&N()},[l]);var Pe=()=>{J([]),M({page_num:1,page_size:10}),L([]),d("merge_plan")},Me=()=>{if(Y.length===0){x.default.info("".concat(n("training.select_merge_plan"),"!"),3);return}var Z=U.filter(j=>j.id===Y[0]);if(Z.length===0){x.default.info("".concat(n("training.lose_plan"),"!"),3);return}o(Y[0])},Ce=a().createElement("div",{className:fe().footerBtn},a().createElement(B.Z,{onClick:Pe,className:fe().btn},n("training.cancle")),a().createElement(B.Z,{onClick:()=>Me(),type:"primary",className:fe().btn},n("training.confirm"))),he=(Z,j)=>{var Q;switch(Z){case"plan_year":Q=y()(j).format("YYYY");break;default:Q=j||"";break}N(Object.assign(S,{[Z]:Q}))},Be=(Z,j)=>{N(Object.assign(S,{page_num:Z,page_size:j}))},ue=Z=>{L(Z)},le=()=>a().createElement("div",{className:fe().message},a().createElement("h4",{className:fe().title},n("training.select_plan")),a().createElement("span",{className:fe().text},n("training.unpublished_plan")));return a().createElement("div",null,a().createElement($a.ZP,{title:p,visible:r,width:s||900,onCancel:Pe,footer:Ce,size:"medium"},a().createElement("div",{className:fe().filter},a().createElement(Ke.Z,{defaultValue:S.plan_year,allowClear:!1,picker:"year",suffixIcon:a().createElement(He.Z,null),onChange:Z=>he("plan_year",Z)}),a().createElement(Tt,{className:fe().search,placeholder:"".concat(n("training.search_plan")),allowClear:!0,onSearch:Z=>he("query_param",Z)})),a().createElement(Ma.f,{scroll:{y:"100%",x:"max-content"},loading:E,rowSelection:{type:"radio",selectedRowKeys:Y,onChange:ue},dataSource:U,columns:It(n),rowKey:Z=>Z.id,pagination:!1,headerTitle:le(),options:{setting:!1,density:!1,fullScreen:!1,reload:!1},tableUUID:"5863e669-72f2-4e9f-adc1-a197feb12b4f"}),a().createElement(Ge.Z,(0,ra.Z)({},qa.XE.INITIAL_PAGINATION,{className:fe().paginationAction,total:S.total,showSizeChanger:!0,defaultPageSize:S.page_size,onChange:Be,current:S.page_num,defaultCurrent:S.page_num,pageSizeOptions:["20","30","40","50"]}))))},wt=(0,oe.Z)()(xt),Nt=t(73665),Pt=t(97593),Ie=t(86726),ne=[],Mt=Oe.Z.Search,kt=e=>{var n=e.t,r=e.dataSource,p=e.isLoading,s=(0,g.useState)(!1),d=(0,f.Z)(s,2),l=d[0],o=d[1],u=(0,g.useState)({visible:!1,type:"add",currentItem:{}}),b=(0,f.Z)(u,2),E=b[0],T=b[1],F=(0,g.useState)(!1),re=(0,f.Z)(F,2),U=re[0],J=re[1],$=(0,g.useState)([]),K=(0,f.Z)($,2),S=K[0],M=K[1],W=(0,g.useState)({planVisible:!1,planIds:[],planType:"add",planId:""}),_=(0,f.Z)(W,2),Y=_[0],L=_[1],N=(0,g.useState)({mergeVisible:!1,ids:[]}),Pe=(0,f.Z)(N,2),Me=Pe[0],Ce=Pe[1],he=(0,g.useState)({isShowApprovalModal:!1,businessId:"",bizType:"",approvalTitle:"",content:{}}),Be=(0,f.Z)(he,2),ue=Be[0],le=Be[1],Z=E.visible,j=E.type,Q=E.currentItem,ye=Y.planVisible,_e=Y.planIds,Fe=Y.planType,qe=Y.planId,ke=Me.mergeVisible,pa=Me.ids,q=ue.isShowApprovalModal,ka=ue.businessId,Ue=ue.bizType,Da=ue.approvalTitle,La=ue.content,ga=(0,ve.oR)(),ie=ga.queryTrainingList,ee=ga.pageInfo,Te=i=>{switch(i){case"needs":T({visible:!1,type:"add",currentItem:{}});break;case"import":ie(),J(!1);break;case"add_plan":L({planVisible:!1,planIds:[],planType:"add"});break;case"merge_plan":Ce({mergeVisible:!1,ids:[]});break;default:break}};(0,g.useEffect)(()=>(document.addEventListener("click",ea),()=>{document.removeEventListener("click",ea)}),[]);var ea=i=>{i.target.parentNode.className==="ant-pro-table-alert-info-option"?(M([]),ne=[]):i.target.parentNode.className==="ant-menu ant-menu-sub ant-menu-inline"&&(M([]),ne=[])},be=(0,Ie.V9)("trainingDemand",e.userInfo.modules),Aa=i=>{switch(i){case"add":T({type:"add",visible:!0,currentItem:{}});break;case"import":J(!0);break;default:break}},Ya=(0,Ie.H3)("export",be),va=(0,Ie.H3)("consolidationPlan",be),fa=(0,Ie.H3)("addDemand",be),ha=(0,Ie.H3)("importDemand",be),ya=(0,Ie.H3)("edit",be),Oa=(0,Ie.H3)("delete",be),za=(0,Ie.H3)("release_or_cancelled",be),Va=[fa,ha],h={edit:ya,delete:Oa,release_or_cancelled:za},c=a().createElement(R.Z,{onClick:i=>{var C=i.key;Aa(C)}},fa&&a().createElement(R.Z.Item,{key:"add"},n("training.addNeeds")),ha&&a().createElement(R.Z.Item,{key:"import"},n("training.importNeeds"))),m=i=>{switch(i){case"add":L({planVisible:!0,planIds:S,planType:i});break;case"merge":Ce({mergeVisible:!0,ids:S});break;default:break}},P=a().createElement(R.Z,{onClick:i=>{var C=i.key;m(C)}},S.length===0?a().createElement(a().Fragment,null,a().createElement(R.Z.Item,{key:"add",disabled:S.length===0},a().createElement(Ye.Z,{title:"".concat(n("training.please_select_published_training"))},n("training.new_annual_plan"))),a().createElement(R.Z.Item,{key:"merge",disabled:S.length===0},a().createElement(Ye.Z,{title:"".concat(n("training.please_select_published_training"))},n("training.mergePlan")))):a().createElement(a().Fragment,null,a().createElement(R.Z.Item,{key:"add"},n("training.new_annual_plan")),a().createElement(R.Z.Item,{key:"merge"},n("training.mergePlan")))),D=()=>a().createElement("div",{className:me().headerAction},Va.filter(i=>i).length?a().createElement(We.Z,{overlay:c,placement:"bottomRight",className:me().btn},a().createElement(B.Z,{type:"primary"},a().createElement(Qe.Z,null)," ",n("common.add"))):"",Ya&&a().createElement(B.Z,{loading:l,type:"primary",ghost:!0,className:[me().searchExport,me().btn].join(" "),onClick:z},a().createElement(sa.Z,null),n("common.exportData")),va&&a().createElement(We.Z,{overlay:P,placement:"bottomRight",className:[me().addYaerPlan,me().planbtn].join(" ")},a().createElement(B.Z,{type:"primary",ghost:!0},a().createElement(Qe.Z,null),n("training.addAnnualPlan")))),I=()=>a().createElement("div",null,a().createElement(O.ZP.Group,{value:ee.status||"all",onChange:i=>{var C=i.target?i.target.value:i;ie(Object.assign(ee,{status:C}))}},(0,Nt.lR)(n).map(i=>{var C=i.label,v=i.value;return a().createElement(O.ZP.Button,{key:v,value:v},C)})),a().createElement(Mt,{className:me().search,placeholder:"".concat(n("training.search_training")),onSearch:i=>ie(Object.assign(ee,{query_param:i||""})),allowClear:!0})),z=function(){var i=(0,we.Z)(H().mark(function C(){var v;return H().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:o(!0);try{v=(0,k.Z)((0,k.Z)({},ee),{},{access_token:localStorage.getItem("token")}),delete v.page_num,delete v.page_size,delete v.total,(0,Pt.N)({page:"trainingDemandExport",props:e,query:"?".concat((0,ve.DG)(v))}),o(!1)}catch(Ra){o(!1)}case 2:case"end":return pe.stop()}},C)}));return function(){return i.apply(this,arguments)}}(),zt=(i,C)=>{var v=(0,ae.cloneDeep)(C);if(["edit","publish"].includes(i)){if(v.training_month?v.training_month=v.training_month.split(","):v.training_month=void 0,(v.department_id==="0"||v.department_id===0)&&(v.department_id=""),v.directors&&v.directors.length>0){var aa=v.directors;v.directors={user:aa}}else v.directors={user:[]};if(v.executors&&v.executors.length>0){var pe=v.executors;v.executors={user:pe}}else v.executors={user:[]};T({visible:!0,currentItem:v,type:"edit"})}},Vt=Xa(n),Rt={add:n("training.add_trainingNeeds"),edit:n("training.edit_trainingNeeds")},jt=(i,C)=>{ie(Object.assign(ee,{page_num:i,page_size:C}))},Bt=i=>{i.directors&&(i.directors.user?i.directors=i.directors.user.map(C=>C.id):i.directors=i.directors.map(C=>C.id)),i.executors&&(i.executors.user?i.executors=i.executors.user.map(C=>C.id):i.executors=i.executors.map(C=>C.id)),i.training_month&&i.training_month.length>0?i.training_month=i.training_month.join(","):i.training_month="",lt(j,i,ie,T,le,n)},Ft=i=>{ne=[...new Set([...ne,...i])],M([...ne])},Ut=()=>{le({isShowApprovalModal:!1,businessId:"",bizType:"",approvalTitle:"",content:{}}),T({type:"add",visible:!1,currentItem:{}}),ie()},Kt=i=>{le({isShowApprovalModal:i,businessId:"",bizType:"",approvalTitle:"",content:{}}),T({type:"add",visible:!1,currentItem:{}}),ie()},Ht=i=>{L({planIds:pa,planId:i,planVisible:!0,planType:"edit"}),Te("merge_plan")},Gt={edit:n("training.edit_annual_plan"),add:n("training.new_annual_plan")};return a().createElement("div",null,a().createElement(Ma.f,{scroll:{y:"100%",x:"max-content"},rowKey:i=>i.id,loading:p,dataSource:r,rowSelection:{selectedRowKeys:S,onChange:Ft,getCheckboxProps:i=>({disabled:i.status!=="published"}),onSelect:(i,C)=>{C||(ne=ne.filter(v=>v!==i.id),M(ne))},onSelectAll:(i,C,v)=>{if(!i){var aa={},pe=(0,Se.Z)(v),Ra;try{for(pe.s();!(Ra=pe.n()).done;){var et=Ra.value;aa[et.id]=et.id}}catch(Xt){pe.e(Xt)}finally{pe.f()}for(var ba=[...ne],at=0,Wt=v.length,Ea=0;ba.length;Ea++){var Qt=ba[Ea];if(at===Wt)break;aa[Qt]&&(ba.splice(Ea,1),Ea--,at++),ne=ba}M(ne)}}},columns:ct(n,zt,ie,h),pagination:!1,headerTitle:D(),toolBarRender:I,tableUUID:"5863e669-72f2-4e9f-adc1-a197feb12b4f"}),a().createElement(Ge.Z,(0,ra.Z)({},qa.XE.INITIAL_PAGINATION,{className:me().paginationAction,total:ee.total,showSizeChanger:!0,defaultPageSize:ee.page_size,onChange:jt,current:ee.page_num,defaultCurrent:ee.page_num,pageSizeOptions:["20","30","40","50"]})),Z&&a().createElement(ca,{title:Rt[j],visible:Z,currentItem:Q,handleCallBack:Bt,type:"trainingNeeds",forms:Vt,width:900,handleCloseModal:()=>Te("needs")}),U&&a().createElement(wa.Z,{title:"".concat(n("training.import_training")),visible:U,type:"needs",fetchRefresh:ie,handleCloseModal:()=>Te("import")}),ye&&a().createElement(Zt,{actionType:Fe,visible:ye,ids:_e,planId:qe,title:Gt[Fe],handleCloseModal:()=>Te("add_plan")}),ke&&a().createElement(wt,{visible:ke,ids:pa,title:"".concat(n("training.please_select_plan")),handleSubmit:Ht,handleCloseModal:()=>Te("merge_plan")}),q&&a().createElement(_a.Z,{content:La,show:q,setShow:Kt,submitRefresh:Ut,businessId:ka,bizType:Ue,title:Da,closable:!0}))},Dt=e=>({userInfo:e.user}),Lt=(0,oa.$j)(Dt)((0,oe.Z)()(kt)),At=t(11449),Yt=e=>{var n=e.t,r=(0,g.useState)(!1),p=(0,f.Z)(r,2),s=p[0],d=p[1],l=(0,g.useState)({page_num:"1",page_size:"20",training_year:""}),o=(0,f.Z)(l,2),u=o[0],b=o[1],E=(0,g.useState)([]),T=(0,f.Z)(E,2),F=T[0],re=T[1],U=(0,g.useCallback)($=>{d(!0);var K=$||u;K.status==="all"&&delete K.status,(0,je.pf)(K).then(S=>{if(S.data.code==="200000"){var M=S.data.data,W=M.list,_=M.page_num,Y=M.page_size,L=M.total;d(!1),b(Object.assign(K,{page_num:_,page_size:Y,total:L})),re(W)}else x.default.error(S.data.message)}).catch(S=>{x.default.error(S.message)})},[u]);(0,g.useEffect)(()=>{U()},[]);var J=(0,g.useMemo)(()=>({queryTrainingList:U,setPageInfo:b,pageInfo:u}),[u,U,b]);return a().createElement(At.Z,{pageContainerParams:{header:{title:n("leftMenuLists.trainingDemand")}},pageTitle:n("leftMenuLists.trainingDemand")},a().createElement(ve.nm.Provider,{value:J},a().createElement(ge.Z,null,a().createElement(Ae,null),a().createElement(Lt,{dataSource:F,isLoading:s}))))},Ot=(0,oe.Z)()(Yt)}}]);
