(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[7854],{99467:function(I,l,t){"use strict";t.r(l);var R=t(20228),u=t(11382),T=t(34792),_=t(48086),o=t(88986),m=t(12924),n=t.n(m),v=t(91768),d=t(76651),P=t(57068),D=t(22929),M=t(47699),c=t(10237),p=t(4408),E=t(37055),h={getGoodsEditDetail:E.ZP.integralMall.getGoodsEditDetail,saveEditGoods:E.ZP.integralMall.saveEditGoods};class g extends m.Component{constructor(){super(...arguments);this.state={goodsId:"",initialParams:{},isLoading:!0},this.getGoodsEditDetail=()=>{var a=P.parse(d.m8.location.search),s=a.goodsId;c.WY.get({url:h.getGoodsEditDetail(s)}).then(i=>{var e=i.data,r={name:e.name,image:e.image,description:e.description,score:e.score,inventory:e.inventory,convert:e.repeat_exchange,expire_time:e.expire_time||"",is_time_limited:e.is_time_limited_str==="true",deliver_user:e.deliver_user_name,deliver_user_contact:e.deliver_user_contact,receive_address:e.receive_address,deliver_method:this.handleDeliverMethod(e.deliver_method),rangeList:{dept:e.scopes.department_list,post:e.scopes.post_list,group:e.scopes.group_list,user:e.scopes.user_list},exchange_demand:e.exchange_demand?e.exchange_demand.split(","):[],ids:this.convertConditionsList(e.exchangeRecordList||[])};this.setState({isLoading:!1,initialParams:r,goodsId:s})})},this.handleDeliverMethod=a=>a===2?[0,1]:[a],this.convertConditionsList=a=>{if(!!a.length)return a.map(s=>(0,o.Z)((0,o.Z)({},s),{},{id:s.con_id,title:s.con_name}))},this.handleSubmit=a=>{var s=this.props.t,i=this.state.goodsId;c.WY.post({url:h.saveEditGoods(i),data:a}).then(()=>{_.default.success(s("integralMall.editProductSuccess")),d.m8.push({pathname:"/talentedDevelopment/excitation/manageGoods"})}).catch(()=>{_.default.error(s("integralMall.publishProductFailed"))})},this.handleCancel=()=>{d.m8.go(-1)},this.handleChecked=a=>{this.setState({initialParams:(0,o.Z)((0,o.Z)({},this.state.initialParams),{},{deliver_method:a})})}}componentDidMount(){this.getGoodsEditDetail()}render(){var a=this.props,s=a.prefixCls,i=a.t,e=this.state,r=e.initialParams,C=e.isLoading,O=e.goodsId,L=[{name:i("integralMall.mallManageMent"),route:"/talentedDevelopment/excitation/manageGoods",goBack:!0},{name:i("integralMall.editProduct")}];return C?n().createElement(u.Z,{className:"".concat(s,"__center"),size:"large",style:{marginTop:300}}):n().createElement("div",{className:s},n().createElement(p.Z,{title:i("integralMall.editProduct")}),n().createElement(M.Z,{list:L}),n().createElement("div",{className:"".concat(s,"__content")},n().createElement(D.Z,{initialParams:r,onSubmit:this.handleSubmit,onCancel:this.handleCancel,goodsId:O,onChangeChecked:this.handleChecked})))}}g.defaultProps={prefixCls:"edit-goods"},l.default=(0,v.Z)()(g)}}]);
