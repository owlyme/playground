(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8697],{30389:function(ne,F,e){"use strict";e.d(F,{Z:function(){return U}});var x=e(62029),X=e(20228),Y=e(11382),P=e(12924),E=e.n(P),z=e(91768),H=e(80991),W={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},M=e(62615),s=e(52670);class T extends E().Component{render(){var n=this.props,B=n.values,c=n.mode,d=n.onlyChooseDept,u=n.reserveUser,g=n.t,m=n.orgProps,O=n.rangeAuth,K=n.projectId,y=n.onCancel,w=n.onlyCreateUser;return E().createElement(H.l0,{className:"cl-form"},E().createElement(H.gN,(0,x.Z)({component:M.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:g("common.visibleRange"),defaultFieldList:B.employeeRange,validate:s.FI,mode:c,rangeAuth:O,onlyChooseDept:d,onlyCreateUser:w,orgProps:m,reserveUser:u,projectId:K,onCancel:y,qwTicketShow:!0},W)))}}var G=(0,z.Z)()(T),L=e(18329),Q=e(34773);class b extends E().Component{constructor(){super(...arguments);this.initRefFormik=n=>{this.refFormik=n},this.handleBeforeCreate=()=>{var n=this.refFormik;n.submitForm(),n.runValidations().then(B=>{if(!Object.keys(B).length){var c=n.state.values.employeeRange,d=(0,Q.b)(c.rangeList),u={qyWeChatVo:c.qyWeChatVo,id:this.props.actionId,isAll:c.rangeType,groupIds:c.rangeType===2?d.groupIds.join(","):"",departmentIds:c.rangeType===2?d.deptIds.join(","):"",userIds:c.rangeType===2?d.userIds.join(","):"",postIds:c.rangeType===2?d.postIds.join(","):"",clusterIds:c.rangeType===2?d.clusterIds.join(","):"",qy_we_chat_vo:c.qyWeChatVo};this.props.onCreate(u)}})},this.handleBeforeCancel=()=>{var n=this.props.onCancel;n()}}render(){var n=this.props,B=n.visible,c=n.initialParams,d=n.isLoading,u=n.tipInfo,g=n.mode,m=n.onlyChooseDept,O=n.reserveUser,K=O===void 0?[]:O,y=n.t,w=n.title,v=n.orgProps,h=n.rangeAuth,C=n.projectId,f=n.onCancel,R=n.onlyCreateUser,S=n.size;return d?E().createElement(Y.Z,{size:"large"}):E().createElement(L.ZP,{wrapClassName:"cl-employee-selector-modal",visible:B,title:w||y("component.changeUser"),okText:y("common.ok"),cancelText:y("common.cancel"),size:S,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},d?E().createElement(Y.Z,{size:"large"}):E().createElement(H.J9,{ref:this.initRefFormik,initialValues:c,render:I=>E().createElement(G,(0,x.Z)({},I,{mode:g,rangeAuth:h,orgProps:v,onlyChooseDept:m,onlyCreateUser:R,reserveUser:K,projectId:C,onCancel:f}))}),u&&E().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},u))}}b.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var U=(0,z.Z)()(b)},11449:function(ne,F,e){"use strict";e.d(F,{Z:function(){return w}});var x=e(88986),X=e(33565),Y=e(12924),P=e.n(Y),E=e(3115),z=e(49111),H=e(19650),W=e(62029),M=e(57663),s=e(71577),T=e(91768),G=e(28216),L=e(37055),Q=e(10237);function b(v){var h=L.ZP.getHelpContentByMenuKey(),C={key:v};return Q.WY.get({url:h,params:C})}var U=e(74228),J=e.n(U),n=e(1164),B=e(76466),c=e(38642);class d extends P().Component{constructor(h){var C;super(h);C=this,this.getHelpContentByMenuKey=()=>{var f=this.props.defaultMenuKey;b(f).then(R=>{var S=R.data,I=S.help_url,_=S.video_url;this.setState({videoUrl:_,helpUrl:I})})},this.handleOpenHelpUrl=f=>{if((0,c.ve)()){window.open(f,"_blank");return}n.Z.targetTo({path:f,isExternalLink:!0})},this.handleOpenVideo=function(f){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.props.t("helpCenter.video");C.setState(S=>({resourcePlayInfo:(0,x.Z)((0,x.Z)({},S.resourcePlayInfo),{},{resourceInfo:{originUrl:f,source:{FD:f,OD:f},contentType:"mp4"}}),previewInfo:(0,x.Z)((0,x.Z)({},S.previewInfo),{},{title:R,visible:!0,onCancel:C.handleCancelPreview})}))},this.handleCancelPreview=()=>{var f=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,x.Z)((0,x.Z)({},f),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:h.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var h=this.state,C=h.helpUrl,f=h.resourcePlayInfo,R=h.previewInfo,S=h.videoUrl,I=this.props.t;return P().createElement("div",{className:J().helpCenter},S&&P().createElement(s.Z,{type:"link",className:J()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(S)},I("helpCenter.video")),C&&P().createElement(s.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(C)},I("helpCenter.tutorial")),P().createElement(B.Z,(0,W.Z)({},f,{previewInfo:R})))}}var u=v=>({defaultMenuKey:v.currentRoute.menuKey});d.defaultProps={defaultMenuKey:""};var g=(0,G.$j)(u)((0,T.Z)()(d));function m(v){var h=v.extra,C=localStorage.getItem("dingPersonnel"),f=sessionStorage.getItem("dingPersonnel");return P().createElement(H.Z,null,h,C!=="dingPersonnel"&&f!=="dingPersonnel"&&(0,c.eY)("COMMONEXTRA_HELP_CENTER")&&P().createElement(g,null))}var O=m,K=e(4408);function y(v){var h=(0,Y.useState)({helpCenter:(0,c.eY)("HEAD_HELP_CENTER_BUT")}),C=(0,X.Z)(h,1),f=C[0],R=v.pageContainerParams,S=R===void 0?{}:R,I=v.noPadding,_=I===void 0?!1:I,ee=v.isPersonal,te=ee===void 0?!1:ee,ae=v.pageTitle,se=v.className,re=se===void 0?"":se,ie={extra:f.helpCenter?P().createElement(O,{extra:S.extra}):S.extra},le=(0,x.Z)((0,x.Z)({},S),ie);return P().createElement("div",{className:"page-container-content ".concat(_?"page-container-noPadding":""," ").concat(te?"page-container-content_personal_background":""," ").concat(re)},ae&&P().createElement(K.Z,{title:ae}),te?P().createElement(E.Z,null,v.children):P().createElement(E.Z,le,v.children))}var w=y},28107:function(ne,F,e){"use strict";var x=e(66456),X=e(55313),Y=e(22385),P=e(31097),E=e(57663),z=e(71577),H=e(71194),W=e(57016),M=e(88986),s=e(12924),T=e.n(s),G=e(91768),L=e(10237),Q=e(37055),b=e(6793),U=e(18329),J=e(95664);class n extends T().Component{constructor(c){super(c);this.onCancel=()=>{var d=this.props,u=d.handleReferenceList,g=d.onReferenceList;u?u():g&&g()},this.onContinueEdit=()=>{var d=this.props.continueEdit;d&&d()},this.initTableList=(d,u)=>{var g=this.props,m=g.type,O=g.operation,K=g.resourceId,y=g.t,w=this.state.resourceTypes,v=u||O;return this.setState({loading:!0}),L.WY.get({url:Q.ZP.deleteResource.check(),params:(0,M.Z)((0,M.Z)({},this.state.params),{},{type:m,id:d||K})}).then(h=>{if(h.data.list&&h.data.list.length===0)return!0;if(h.data.total<2&&h.data.list.length>0){var C=h.data.list[0],f=C.title,R=C.type_name,S=C.create_user_name,I="";return v==="continueEdit"?I=(0,b.ZT)("".concat(y("component.continueEditReminderTip")),w[m],"\u300A".concat(f,"\u300B").concat(R)):v==="forbiddenEdit"?I=(0,b.ZT)("".concat(y("component.forbiddenEditReminderTip")),w[m],"\u300A".concat(f,"\u300B").concat(R)):I=(0,b.ZT)("".concat(y("component.deleteElseReminderTip")),w[m],"\u300A".concat(f,"\u300B(").concat(S?y("common.creator")+":"+S:"",")").concat(R),y(v==="delete"?"common.delete":"course.cancelRelease")),v==="move"?(W.Z.confirm({title:y("common.tip"),content:(0,b.ZT)("".concat(y("component.forbiddenMoveReminderTip")),"\u300A".concat(f,"\u300B").concat(R)),okText:y("common.ok"),onOk:()=>{this.onCancel()},onCancel:()=>{this.onCancel()}}),!1):(v==="continueEdit"?W.Z.confirm({title:y("common.tip"),content:I,okText:y("common.cancel"),cancelText:y("course.continueEdit"),onOk:()=>{this.onCancel()},onCancel:()=>{v==="continueEdit"&&this.props.continueEdit()}}):W.Z.info({title:y("common.tip"),content:I,okText:y("common.ok"),onOk:()=>{this.onCancel()}}),!1)}setTimeout(()=>{this.setState({loading:!1,tableList:h.data.list,tableTotal:h.data.total,tableTotalPages:h.data.pages})},300)})},this.handleTableChange=d=>{var u=this.state.params;u.page_number=d,this.setState({params:u},()=>{this.initTableList()})},this.renderFooter=()=>{var d=this.props,u=d.t,g=d.operation;return T().createElement("div",null,g==="continueEdit"?T().createElement(z.Z,{type:"primary",onClick:this.onContinueEdit},u("course.continueEdit")):null,T().createElement(z.Z,{type:"primary",onClick:this.onCancel},u("common.ok")))},this.state={loading:!0,params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0,resourceTypes:{questionnaire:this.props.t("common.questionnaire"),classify:this.props.t("course.category"),paper:this.props.t("exam.paperAddTitle"),question:this.props.t("learning.questionAddTitle"),course:this.props.t("study.course"),resource:this.props.t("common.courseware"),lecturer:this.props.t("course.lecturer"),evaluationProduct:this.props.t("questionn.evaluationTool")}},this.columns=[{title:this.props.t("common.number"),dataIndex:"userId",width:30,render:(d,u,g)=>g+1},{title:this.props.t("common.name"),dataIndex:"title",width:420,render:d=>T().createElement(P.Z,{title:d},T().createElement("div",{className:"cl-text-ellipsis",style:{width:420}},d))},{title:this.props.t("study.type"),dataIndex:"type_name",width:120},{title:this.props.t("common.creator"),dataIndex:"create_user_name",width:30}]}componentDidMount(){var c=this.props.onRef;c&&c(this)}componentDidUpdate(c){var d=this.props.onRef;d||this.props.visible&&this.props.visible!==c.visible&&this.props.resourceId&&this.setState({params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0},()=>{this.initTableList()})}render(){var c=this.props,d=c.visible,u=c.type,g=c.operation,m=c.t,O=this.state,K=O.loading,y=O.params,w=O.tableList,v=O.tableTotal,h=O.tableTotalPages,C=O.resourceTypes;return T().createElement("div",null,v>1?T().createElement(U.ZP,{visible:d,title:g==="move"?"".concat(m("common.tip")):(0,b.ZT)("".concat(m("component.deleteReminder")),m(g==="delete"?"common.deletion":g==="cancelPublish"?"course.cancelRelease":"common.edit")),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},T().createElement("div",{className:"referenceWithOther"},T().createElement("div",{className:"referenceWithOther__tip"},g==="continueEdit"?"".concat(m("component.this")).concat(C[u]).concat(m("component.continueEditReminderTip2")):g==="forbiddenEdit"?"".concat(m("component.pleaseNote")).concat(C[u]).concat(m("component.forbiddenEditReminderTip2")):g==="move"?"".concat(m("component.forbiddenMoveTip")):(0,b.ZT)("".concat(m("component.deleteReminderTip")),C[u],m(g==="delete"?"common.delete":"course.cancelRelease"))),T().createElement(X.Z,{bordered:!0,size:"middle",columns:this.columns,rowKey:"id",dataSource:w,pagination:!1,loading:K}),T().createElement(J.Z,{defaultPageSize:10,totalNum:v,totalPage:h,current:y.page_number,showRenderRefresh:!1,onChange:this.handleTableChange}))):null)}}F.Z=(0,G.Z)()(n)},74840:function(ne,F,e){"use strict";e.r(F),e.d(F,{default:function(){return Te}});var x=e(14781),X=e(53431),Y=e(17462),P=e(1474),E=e(88986),z=e(57361),H=e(9754),W=e.n(H),M=e(12924),s=e.n(M),T=e(91768),G=e(76651),L=e(56075),Q=e(62029),b=e(57663),U=e(71577),J=e(34792),n=e(48086),B=e(30389),c=e(49101),d=e(71194),u=e(57016),g=e(22385),m=e(31097),O=e(63185),K=e(9676),y=e(88983),w=e(47933),v=e(43358),h=e(34041),C=e(47673),f=e(4107),R=e(70596),S=e.n(R),I=f.Z.Search,_=h.Z.Option;class ee extends M.Component{constructor(l){super(l);this.getToolsList=()=>{var t=this.state,a=t.keyword,r=t.industry;(0,L.UN)({industry:r,keyword:a}).then(i=>{var o=i.data;this.setState({toolsOptions:o})})},this.showCharts=(t,a)=>{var r=this.props.t,i=[],o=[];a&&a.ability_dependencys_vos.forEach(A=>{i.push({text:A.ability_name,max:10}),o.push(A.dependency)});var p=S().init(t);if(t&&i.length>0){var Z={title:{text:r("evaluationManage.investigation"),textStyle:{color:"rgba(0, 0, 0, 0.25)",fontSize:12},x:10,y:10},tooltip:{trigger:"axis"},radar:[{indicator:i.length>10?i.slice(0,10):i,center:["50%","50%"],radius:60}],series:[{type:"radar",areaStyle:{},data:[{value:o}]}]};p.setOption(Z),window.addEventListener("resize",()=>{p.resize()})}else p.clear()},this.checkTools=t=>{var a=t.target,r=a.data,i=a.checked,o=this.state.checkedTools;if(i)o.push(r);else{var p=o.findIndex(Z=>Z.id===r.id);p>-1&&o.splice(p,1)}this.showCharts(this.chart,o[o.length-1]),this.setState({checkedTools:o})},this.selectTools=t=>{this.showCharts(this.chart,t.target.value),this.setState({checkedTools:[t.target.value]})},this.dealSelect=t=>{var a=[];return t.forEach(r=>{a.push((0,E.Z)((0,E.Z)({},r),{},{label:r.product_name,value:r.id}))}),a},this.renderTools=()=>{var t=this.state,a=t.toolsOptions,r=t.checkedTools,i=this.props.type;return i==="radio"?s().createElement(w.ZP.Group,{value:r[0],onChange:this.selectTools,name:"tools"},a&&a.map(o=>s().createElement(w.ZP,{className:"task_Modal_tools_item",value:o,key:o.id},o.product_name))):a&&a.map(o=>s().createElement(K.Z,{checked:r.findIndex(p=>p.id===o.id)>-1,className:"task_Modal_tools_item",data:o,key:o.id,onChange:this.checkTools},o.product_name))},this.renderEnumTools=()=>{var t=["\u6807\u51C6\u5C97\u4F4D","\u533B\u836F","\u9910\u996E/\u9152\u5E97/\u751F\u6D3B\u670D\u52A1","\u6C7D\u8F66","\u6C7D\u8F66\u5236\u9020","\u96F6\u552E","\u978B\u670D","\u5FEB\u6D88","\u4E92\u8054\u7F51\u91D1\u878D","\u57FA\u91D1/\u8BC1\u5238/\u671F\u8D27/\u6295\u8D44","\u4FDD\u9669","\u94F6\u884C","\u623F\u5730\u4EA7/\u5EFA\u7B51","\u91D1\u724C\u9500\u552E\u8BC6\u522B\u5668","\u57FA\u5C42\u7BA1\u7406\u4EBA\u5458\u60C5\u666F\u5224\u65AD\u6D4B\u8BC4","\u4E2D\u9AD8\u5C42\u7BA1\u7406\u4EBA\u5458\u60C5\u666F\u5224\u65AD\u6D4B\u8BC4","\u4E92\u8054\u7F51/\u6E38\u620F/\u8F6F\u4EF6","\u7535\u5B50/\u901A\u4FE1/\u786C\u4EF6"];return t.map((a,r)=>s().createElement(_,{value:a,key:r},s().createElement(m.Z,{title:a},a)))},this.handleSelect=t=>{this.setState({industry:t},()=>{this.getToolsList()})},this.handleSearch=t=>{this.setState({keyword:t},()=>{this.getToolsList()})},this.handleOk=()=>{var t=this.state.checkedTools;this.props.handleOk(t),this.setState({checkedTools:[],industry:"",keyword:""})},this.handleCancel=()=>{this.props.handleCancel(),this.setState({checkedTools:[],industry:"",keyword:""})},this.getChart=t=>{this.chart=t},this.state={toolsOptions:[],checkedTools:[],industry:"",keyword:""}}componentDidUpdate(l){l.visible!==this.props.visible&&this.props.visible&&this.getToolsList()}render(){var l=this.props.t;return s().createElement(u.Z,{title:l("evaluationManage.addTools"),visible:this.props.visible,onOk:this.handleOk,destroyOnClose:!0,maskClosable:!1,onCancel:this.handleCancel,width:920},s().createElement("div",{className:"task_Modal"},s().createElement("div",{className:"task_Modal_top"},s().createElement(h.Z,{placeholder:l("evaluationManage.pleaseSelectJop"),className:"task_Modal_top__select",allowClear:!0,onChange:this.handleSelect},this.renderEnumTools()),s().createElement(I,{allowClear:!0,placeholder:l("evaluationManage.addToolModalPlaceholder"),onSearch:this.handleSearch})),s().createElement("div",{className:"task_Modal_content"},s().createElement("div",{className:"task_Modal_content_body"},this.renderTools()),s().createElement("div",{className:"task_Modal_content_picture",ref:this.getChart}))))}}var te=(0,T.Z)()(ee);class ae extends M.Component{constructor(l){super(l);this.handleAdd=()=>{this.setState({visible:!0})},this.handleOk=t=>{if(t.length!==0){var a=this.props.t,r=t.map(i=>i.id);(0,L.Ty)({evaluation_tools:r}).then(i=>{i.data.success==="true"?(n.default.success(a("common.addSuccess")),this.props.getToolsList()):i.data.success==="false"&&n.default.success(a("common.addFailure")),this.setState({visible:!1})})}},this.handleCancel=()=>{this.setState({visible:!1})},this.showViewScope=(t,a)=>{if(a==="single"){var r=t.id;(0,L.K)({id:r}).then(o=>{var p=o.data,Z=p.department_list,A=p.post_list,V=p.group_list,$=p.user_list,N=p.visible_range,D={all:1,part:2,myself:3}[N]||0;this.setState({viewScopeConfig:{visible:!0,projectId:[r],initialParams:{employeeRange:{rangeType:D,rangeList:{dept:Z||[],post:A||[],group:V||[],user:$||[]}}}}})})}else{var i=this.props.selectedRowKeys;this.setState({viewScopeConfig:{visible:!0,projectId:i.map(o=>String(o).replace(/normal|disabled|draft/,"")),initialParams:{employeeRange:{rangeType:"",rangeList:{dept:[],post:[],group:[],user:[]}}}}})}},this.hiddenViewScope=()=>{var t=this.state.viewScopeConfig;t.visible=!1,t.projectId="",this.setState({viewScopeConfig:t})},this.sureViewScope=t=>{var a=t.isAll,r=t.departmentIds,i=t.groupIds,o=t.postIds,p=t.userIds;a={1:"all",2:"part"}[a]||"myself";var Z=this.props.t,A=this.state.viewScopeConfig,V={ids:[...A.projectId],visible_range:a,user_ids:p,department_ids:r,group_ids:i,post_ids:o};V.ids=A.projectId.join(","),(0,L.tb)((0,E.Z)({},V)).then($=>{$.data.result==="true"?(this.props.clearSelectedRowKeys(!0),n.default.success(Z("setting.setUpSucceed"))):$.data.result==="false"&&n.default.error("".concat(Z("setting.setUpFailure")))}),this.hiddenViewScope()},this.renderOptionBtn=()=>{var t=this.props,a=t.t,r=t.selectedRows;return s().createElement(s().Fragment,null,s().createElement(U.Z,{className:"task_query_row_left_add",type:"primary",icon:s().createElement(c.Z,null),onClick:this.handleAdd},a("common.addSome")),s().createElement(U.Z,{disabled:r.length===0,onClick:()=>this.showViewScope(r,"more")},"".concat(a("common.visibleRange"))))},this.renderNewOptionBtn=()=>{var t=this.props,a=t.actionAdd,r=a===void 0?!0:a,i=t.actionSetVisibile,o=i===void 0?!0:i,p=t.selectedRows,Z=t.t;return s().createElement(s().Fragment,null,r&&s().createElement(U.Z,{className:"task_query_row_left_add",type:"primary",icon:s().createElement(c.Z,null),onClick:this.handleAdd},Z("common.addSome")),o&&s().createElement(U.Z,{disabled:p.length===0,onClick:()=>this.showViewScope(p,"more")},"".concat(Z("common.visibleRange"))))},this.state={visible:!1,viewScopeConfig:{visible:!1,projectId:"",initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[]}}}}}}componentDidMount(){}render(){var l=this.props,t=l.t,a=l.isNewEvaluationTool,r=this.state,i=r.visible,o=r.viewScopeConfig;return s().createElement("div",null,s().createElement("div",{className:"task_query_row"},s().createElement("div",{className:"task_query_row_left"},a?this.renderNewOptionBtn():this.renderOptionBtn())),s().createElement(te,{visible:i,handleOk:this.handleOk,handleCancel:this.handleCancel}),o.visible&&s().createElement(B.Z,(0,Q.Z)({},o,{title:t("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:t("component.chooseVisibleScope")},onCancel:this.hiddenViewScope,onCreate:this.sureViewScope})))}}var se=(0,T.Z)("translation",{withRef:!0})(ae),re=f.Z.Search;class ie extends M.Component{constructor(){super(...arguments);this.handleSearch=l=>{this.props.getToolsList(l)}}render(){var l=this.props.t;return s().createElement(re,{allowClear:!0,placeholder:l("evaluationManage.toolPlaceHolder"),onSearch:this.handleSearch})}}var le=(0,T.Z)("translation",{withRef:!0})(ie),de=e(28216),ce=e(78138),he=e.n(ce),pe=e(28107),me=e(36202),ue=j=>{var l=j.advancedSetting;return{themeColor:l.themeColor}};class ve extends M.Component{constructor(l){super(l);this.handleDelete=t=>{var a=this.props.t,r=this,i=this.state.referenceWithOtherConfig;u.Z.confirm({title:a("common.delete"),content:a("common.confirmDeleteTitle"),okCancel:()=>!1,onOk:()=>{(0,L.b9)({id:t}).then(o=>{o.data.data==="true"?(i.type="evaluationProduct",i.resourceId=t,i.visible=!0,this.setState({referenceWithOtherConfig:i})):o.data.data==="false"&&(0,L.el)({id:t}).then(p=>{p.data.result==="true"?(n.default.success(a("common.deleteSuccess")),r.props.getToolsList()):p.data.result==="false"&&n.default.success(a("common.deleteFailure"))})})}})},this.handleReferenceList=t=>{this.setState(a=>({referenceWithOtherConfig:(0,E.Z)((0,E.Z)({},a.referenceWithOtherConfig),{},{visible:!a.referenceWithOtherConfig.visible,resourceId:t||""})}))},this.getContent=t=>{this.content=t},this.renderNewOption=t=>{var a=this.props,r=a.actionSetVisibile,i=a.actionDelete,o=a.t;return s().createElement(s().Fragment,null,r&&s().createElement("a",{className:"cl-pointer",onClick:()=>this.props.handleEmploy(t,"single")},"".concat(o("common.visibleRange"))),i&&s().createElement("a",{className:"cl-pointer",onClick:()=>this.handleDelete(t.id)},o("common.delete")))},this.renderOption=t=>{var a=this.props.t;return s().createElement(s().Fragment,null,s().createElement(U.Z,{type:"link",onClick:()=>this.props.handleEmploy(t,"single")},"".concat(a("common.visibleRange"))),s().createElement(U.Z,{type:"link",onClick:()=>this.handleDelete(t.id)},a("common.delete")))},this.state={selectedRowKeys:[],referenceWithOtherConfig:{visible:!1,type:"evaluationProduct",operation:"delete",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList}}}render(){var l=this.props,t=l.t,a=l.headerTitle,r=l.toolBarRender,i=l.isNewEvaluationTool,o=this.state.referenceWithOtherConfig,p=[{title:t("evaluationManage.toolName"),dataIndex:"product_name",key:"product_name",width:340,textWrap:"word-break",ellipsis:!0,render:(N,D)=>s().createElement(s().Fragment,null,s().createElement("div",{className:"training_task_listTable_toolName"},s().createElement(m.Z,{title:N},N)),s().createElement("div",{className:"training_task_listTable_toolDes"},s().createElement(m.Z,{placement:"topLeft",title:D.product_purpose},D.product_purpose)))},{title:t("common.createTime"),dataIndex:"create_time",key:"create_time",render:(N,D)=>{var oe=D.create_time;return s().createElement("span",null,oe?he()(oe).format("YYYY-MM-DD HH:mm:ss"):"--")}},{title:t("common.creator"),dataIndex:"create_user_name",key:"create_user_name",render:(N,D)=>{var oe=D.create_user_name;return s().createElement("span",null,oe||"--")}}];p.push({title:t("common.operate"),key:"operate",render:(N,D)=>s().createElement("div",{className:"cl-table__cell-action"},i?this.renderNewOption(D):this.renderOption(D))});var Z=this.props,A=Z.dataSource,V=Z.loading,$=(0,E.Z)((0,E.Z)({},this.state.selectedRowKeys),{},{onChange:(N,D)=>{this.setState({selectedRowKeys:N},()=>{this.props.handleSelect(N,D)})}});return s().createElement("div",{className:"training_task_listTable",ref:this.getContent},s().createElement(me.f,{columns:p,dataSource:A,rowSelection:$,rowKey:N=>N.id,pagination:!1,loading:V,headerTitle:a,toolBarRender:r,tableUUID:"47044ee7-0cdb-47ab-800f-f9940a755717"}),s().createElement(pe.Z,(0,Q.Z)({},o,{handleReferenceList:this.handleReferenceList})))}}var ge=(0,de.$j)(ue)((0,T.Z)()(ve)),fe=e(4408),q=e(86726),ye=e(11449),Ee=e(37055),k={pageNumber:1,pageSize:20,keyword:""};class Ce extends M.Component{constructor(l){super(l);this.getToolsList=()=>{this.setState({loading:!1});var t=k,a=t.pageNumber,r=t.pageSize,i=t.keyword;(0,L.lf)({page_number:a,page_size:r,keyword:i}).then(o=>{this.setState({dataSource:o.data.list,loading:!1,trainTotal:parseInt(o.data.total)})})},this.handleSelect=(t,a)=>{this.setState({selectedRowKeys:t,selectedRows:a})},this.getListQueryRow=t=>{this.query=t},this.clearSelectedRowKeys=t=>{this.setState({selectedRowKeys:[]},()=>{t&&(k.pageNumber=1,k.keyword="",this.getToolsList())})},this.pageChange=t=>{k.pageNumber=t,this.getToolsList()},this.pageSizeChange=(t,a)=>{k.pageNumber=1,k.pageSize=a,this.getToolsList()},this.setKeyword=t=>{k.pageNumber=1,k.keyword=t,this.getToolsList()},this.renderLeftRow=()=>{var t=this.props.modules,a=this.state,r=a.selectedRowKeys,i=a.selectedRows,o=a.isNewEvaluationTool,p=a.isNotifyTaskExp;return s().createElement(se,{selectedRowKeys:r,selectedRows:i,clearSelectedRowKeys:this.clearSelectedRowKeys,ref:this.getListQueryRow,modules:t,isNotifyTaskExp:p,getToolsList:this.setKeyword,actionAdd:(0,q.H3)("add",this.state.actions),actionSetVisibile:(0,q.H3)("set_visible",this.state.actions),isNewEvaluationTool:o})},this.renderRightRow=()=>s().createElement(le,{getToolsList:this.setKeyword}),this.state={actions:(0,q.V9)("evaluationTool",l.modules),selectedRowKeys:[],selectedRows:[],dataSource:[],loading:!1,trainTotal:0,isNewEvaluationTool:(0,q.F)("evaluationTool",l.modules)==="856363557683971594",isNotifyTaskExp:!1}}componentDidMount(){var l=this;return(0,z.Z)(W().mark(function t(){var a,r;return W().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,L.IT)();case 2:a=o.sent,r=a.data.data,l.setState({isNotifyTaskExp:r==="true"}),l.getToolsList();case 6:case"end":return o.stop()}},t)}))()}componentWillUnmount(){k={pageNumber:1,pageSize:20,keyword:""}}render(){var l=this.props,t=l.t,a=l.userLng,r=l.modules,i=l.isNewEvaluationTool,o=this.state,p=o.dataSource,Z=o.loading,A=o.trainTotal,V=o.isNotifyTaskExp,$=(0,E.Z)((0,E.Z)({},Ee.XE.INITIAL_PAGINATION),{},{current:k.pageNumber,total:A,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return s().createElement(ye.Z,{pageContainerParams:{header:{title:t("leftMenuLists.evaluationTools")}}},V?s().createElement(P.Z,{message:"".concat(t("evaluation.isNotifyTaskExpTips")),banner:!0,type:"warning",showIcon:!0,closable:!0}):null,s().createElement(fe.Z,{title:t("questionn.evaluationTool")}),s().createElement("div",{className:"training_task_content"},s().createElement("div",{className:"training_task_table",ref:N=>{this.tableRef=N}},s().createElement(ge,{lng:a.lng,modules:r,getToolsList:this.getToolsList,dataSource:p,handleSelect:this.handleSelect,handleEmploy:this.query&&this.query.showViewScope,pageConfig:$,loading:Z,isNotifyTaskExp:V,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow,actionSetVisibile:(0,q.H3)("set_visible",this.state.actions),actionDelete:(0,q.H3)("delete",this.state.actions),isNewEvaluationTool:i})),A>k.pageSize||!$.hideOnSinglePage?s().createElement("div",{className:"training_task_pagination"},s().createElement(X.Z,$)):null))}}var Te=(0,G.$j)(j=>({modules:j.user.modules,userLng:j.user}))((0,T.Z)()(Ce))}}]);
