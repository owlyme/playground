(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[4118],{95664:function(xe,ue,e){"use strict";var $=e(14781),h=e(53431),m=e(12924),M=e.n(m),H=e(91768),F=e(84874);class Y extends M().Component{render(){var i=this.props,s=i.prefixCls,D=i.showRenderRefresh,S=i.totalNum,Z=i.totalPage,w=i.onRefresh,O=i.onChange,r=i.defaultPageSize,te=i.current,K=i.t,se=i.onShowSizeChange,U=se===void 0?()=>{}:se;return M().createElement("div",{className:s},M().createElement("span",{className:"".concat(s,"__info")},D&&M().createElement("span",{className:"".concat(s,"__info__refresh"),onClick:w},M().createElement(F.Z,{iconClass:"iconf-switch",color:"#535B6E",size:"14px"})),K("component.totalLabel"),M().createElement("b",null,Z),K("component.pageLabel"),"\uFF0C",M().createElement("b",null,S),K("component.dataItems")),S?M().createElement(h.Z,{size:"small",total:S,onChange:O,current:te,defaultPageSize:r,showSizeChanger:!1,onShowSizeChange:U}):null)}}Y.defaultProps={prefixCls:"cl-modal-pagination",showRenderRefresh:!0,totalNum:0,totalPage:0,defaultPageSize:12,current:1,onRefresh:()=>{},onChange:()=>{}},ue.Z=(0,H.Z)()(Y)},4408:function(xe,ue,e){"use strict";var $=e(12924),h=e.n($),m=e(28216),M=e(17780),H=e(38642),F=E=>({userInfo:E.user}),Y=E=>{var i=E.title;return(0,M.xX)()&&setTimeout(()=>{document.title=i},0),(0,$.useEffect)(()=>{if(i&&document.title!==i&&setTimeout(()=>{document.title=i},0),(0,H.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var s=document.querySelector(".zoom-report");s&&(s.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[i]),h().createElement(h().Fragment,null)};Y.defautProps={title:""},ue.Z=(0,m.$j)(F)(Y)},1164:function(xe,ue,e){"use strict";var $=e(12924),h=e.n($),m=e(76651),M=e(38642),H=e(91302),F=Y=>{var E=navigator.userAgent.toLocaleLowerCase(),i=localStorage.getItem("enterpriseId"),s=(0,M.lz)(i,Y.projectType),D=localStorage.getItem("dingPersonnel"),S=H.bl.includes(D),Z=Y.target;function w(O){if(Z==="self"&&(O.preventDefault(),m.m8.push(Y.to)),S){if(Y.projectType==="student"){window.location.href="".concat(s,"/").concat(Y.to);return}m.m8.push(Y.to);return}if(dd.version){O.preventDefault();var r="";Y.to.includes("?")?r="".concat(s).concat(Y.to,"&ddtab=true"):r="".concat(s).concat(Y.to,"?ddtab=true"),dd.biz.util.openLink({url:r})}else E.indexOf("lark")!==-1&&(window.location.href="".concat(s).concat(Y.to))}return h().createElement("a",{rel:"noreferrer",href:"".concat(Y.projectType==="student"?"".concat(s).concat(Y.to):"#".concat(Y.to)),className:"".concat(Y.wrapCls," cl-pointer"),target:E.indexOf("lark")!==-1||S?"_self":Y.target||"_blank",onClick:w},Y.children)};F.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},F.targetTo=Y=>{var E=Y.path,i=Y.from,s=Y.isExternalLink,D=s===void 0?!1:s,S=Y.isAsync,Z=S===void 0?!1:S,w=Y.openName,O=w===void 0?"_blank":w,r=Y.projectType,te=r===void 0?"manage":r,K=Y.ddTab,se=K===void 0?!0:K,U,B=localStorage.getItem("dingPersonnel"),J=H.bl.includes(B),G=navigator.userAgent.toLocaleLowerCase(),ae=localStorage.getItem("enterpriseId"),Q=(0,M.lz)(ae,te),X=localStorage.getItem("appType"),z=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var he="";if(U=D?"":Q,J&&!D){if(te==="student"){window.location.href="".concat(Q).concat(E);return}m.m8.push(E);return}E.includes("?")?he="".concat(U).concat(E,"&ddtab=").concat(se):he="".concat(U).concat(E,"?ddtab=").concat(se),dd.biz.util.openLink({url:he})}else if(G.indexOf("lark")!==-1)U=D?"":Q,window.location.href="".concat(U).concat(E);else if(X==="wx_app"&&z&&D&&i==="imgText")U=D?"":te==="student"?"".concat(Q):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(U).concat(E)});else if(U=D?"":te==="student"?"".concat(Q):"#",Z){var ne=window.open("","_blank");setTimeout(()=>{ne.location="".concat(U).concat(E)},100)}else window.open("".concat(U).concat(E),O)},ue.Z=F},87312:function(xe,ue,e){"use strict";var $=e(12924),h=e.n($),m=e(91768),M=H=>{var F=H.t;return h().createElement("div",{className:H.className?"".concat(H.className," no-result"):"no-result"},h().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1789886702513426432.png"),className:"no-data-img",alt:""}),h().createElement("p",{className:"no-data-tip"},H.tipText||F("common.empty")))};ue.Z=(0,m.Z)()(M)},88311:function(xe,ue,e){"use strict";e.d(ue,{Z:function(){return b}});var $=e(62029),h=e(47673),m=e(4107),M=e(33565),H=e(57361),F=e(34792),Y=e(48086),E=e(88986),i=e(43358),s=e(34041),D=e(18106),S=e(88108),Z=e(9754),w=e.n(Z),O=e(12924),r=e.n(O),te=e(91768),K=e(77043),se=e.n(K),U=e(20228),B=e(11382),J=e(18721),G=e.n(J),ae=e(51975),Q=e(37055),X={breadNav:[{value:"",label:""}],checkOne:()=>{},checkAll:()=>{},nextLevel:()=>{},changeLevel:()=>{}},z=r().createContext(X),he={searchResult:[],deptList:[],groupList:[],postList:[],deptUser:[],groupUser:[],postUser:[],clusterList:[],classList:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],initTypeList:()=>{},initTypeUser:()=>{},toggleDisplayItem:()=>{},toggleDisplayList:()=>{},checkListOne:()=>{},checkUserOne:()=>{},removeCheckedUser:()=>{},changeLevel:()=>{},hidePosts:!1,initHidePostsStatus:()=>{},clearSelectedAll:()=>{}},ne=r().createContext(he),fe=e(36017),ve=e(35247),ge=e(60667);class Ce extends r().Component{constructor(){super(...arguments);this.changeLevel=(d,o,t,n)=>{d.preventDefault(),this.props.contextData.changeLevel(o,t,n)}}render(){var d=this.props.contextData.breadNav.map((o,t)=>r().createElement(ve.Z.Item,{key:o.value},r().createElement("span",{className:"bread-nav-item",onClick:n=>this.changeLevel(n,o.value,t,!(G()(o,"authorized")&&o.authorized==="true"))},r().createElement(ge.Z,{dataType:"departmentName",value:o.value,name:o.label,type:o.sourceType}))));return r().createElement("div",{className:"bread-nav"},r().createElement(ve.Z,null,d))}}Ce.defaultProps={contextData:{breadNav:[]},changeLevel:()=>{}};var ye=Ce,Te=e(63185),Ie=e(9676),_e=e(88983),Oe=e(47933),be=e(22385),Ze=e(31097),We=e(57119),we=e(84874),Ve=e(20136),Ge=e(55241),Ye=e(13062),je=e(71230),qe=e(89032),De=e(15746),me=e(28216),Ae=e(80430),Se=e(10237);function Le(){var I=CONFIG.Role.getUserManageRange();return request.get({url:I})}function Re(I){var d=Q.ZP.OrgDialog.getDeptInfoUrl({departmentId:I.departmentId});return delete I.departmentId,Se.WY.get({url:d,params:I})}function $e(I){var d=Q.ZP.OrgDialog.getDeptUsersUrl({departmentId:I.departmentId});return delete I.departmentId,Se.WY.get({url:d,params:I})}function ze(I){var d=Q.ZP.OrgDialog.getUserDetailUrl();return Se.WY.get({url:d,params:I})}function st(I){var d=Q.ZP.OrgDialog.getScopeUsersAndDeptsUrl({departmentId:I.departmentId});return delete I.departmentId,Se.WY.get({url:d,params:I})}function Dt(I){var d=Q.ZP.OrgDialog.postDeleteCacheUrl({cacheId:I.cacheId});return delete I.cacheId,Se.WY.post({url:d,params:I})}var ht,mt,vt=(ht=(0,me.$j)(I=>{var d=I.user;return{enterpriseName:d.enterpriseName}}),ht(mt=class extends r().Component{constructor(){super(...arguments);this.state={loading:!0,cardInfoFinal:this.props.cardInfo},this.renderTitle=()=>{var d=this.props,o=d.cardInfo,t=d.prefixCls,n=d.enterpriseName,u=o.source_type,l=o.user_id,a=o.name;return r().createElement("div",{className:"".concat(t,"__header")},r().createElement("div",{className:"".concat(t,"__header-name")},r().createElement(ge.Z,{type:u,value:l,name:a,dataType:"userName"})),r().createElement("div",{className:"".concat(t,"__header-corp")},n||"/"))},this.renderContent=()=>{var d=this.props,o=d.prefixCls,t=d.t,n=this.state.cardInfoFinal,u=n.user_id,l=n.job_number,a=n.post_names,T=a===void 0?[]:a,L=n.department_infos,R=L===void 0?[]:L,re=()=>!(R instanceof Array)||R.length===0?"/":r().createElement(Ae.Z,{list:R,displayAll:!0,isBlock:!0}),j=()=>!(T instanceof Array)||T.length===0?"/":T.map(oe=>r().createElement("div",{key:oe},oe)),de=[{lable:"ID",value:u},{lable:t("personal.jobNumber"),value:l||"/"},{lable:t("setting.postLabel"),value:j()},{lable:t("learnRecord.department"),value:re()}];return r().createElement("div",{className:"".concat(o,"__body")},de.map(oe=>r().createElement(je.Z,{className:"".concat(o,"__body-item"),key:oe.value},r().createElement(De.Z,{className:"".concat(o,"__body-item-lable")},oe.lable),r().createElement(De.Z,{className:"".concat(o,"__body-item-value")},oe.value||"/"))))}}render(){var d=this.props,o=d.children,t=d.prefixCls,n=this.state,u=n.loading,l=n.cardInfoFinal;return r().createElement(Ge.Z,{overlayClassName:t,placement:"rightTop",title:this.renderTitle,content:u?r().createElement("div",{className:"".concat(t,"__body")},r().createElement(B.Z,null)):this.renderContent,onVisibleChange:a=>{a&&(l.detailInfo===!1?ze({user_id:l.id}).then(T=>{this.setState({loading:!1,cardInfoFinal:(0,E.Z)((0,E.Z)((0,E.Z)({},l),T.data),{},{detailInfo:!0})})}).catch(T=>{console.error(T)}):this.setState({loading:!1}))},mouseEnterDelay:.5},o)}})||mt);vt.defaultProps={prefixCls:"user-card-popover",cardInfo:{}};var He=(0,te.Z)()(vt),kt=["cluster","class"];class gt extends r().Component{constructor(){super(...arguments);this.checkOne=d=>{d.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=d=>{d.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var d=this.props,o=d.cardInfo,t=d.type,n=d.t;return o.authorized==="false"&&t==="dept"?r().createElement(Ze.Z,{title:n("orgDialog.scopedAuthorize")},r().createElement(We.Z,{style:{marginLeft:"4px"}})):null}}render(){var d=this.props,o=d.t,t=d.cardInfo,n=t===void 0?{}:t,u=d.hidePosts,l=d.type,a=d.userCount,T=null;return this.props.hasNext?(T=r().createElement("div",{className:"next-level"},!(u&&l==="post")&&a>-1?r().createElement("span",{className:"next-level-count"},"(",a,")"):null,kt.includes(l)?r().createElement("span",null):r().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},r().createElement(we.Z,{iconClass:"icon-xiaji1"}),o("component.nextLevel"))),this.props.single?r().createElement("div",{className:"org-tree-item"},r().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),T):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&r().createElement("div",{className:"org-tree-item"},r().createElement(Ie.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),T)):r().createElement("div",{className:"org-tree-item"},this.props.single?r().createElement(Oe.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},r().createElement(He,{cardInfo:n},this.props.title)):r().createElement(He,{cardInfo:n},r().createElement(Ie.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title)))}}gt.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var et=(0,te.Z)()(gt),Tt=["cluster","class"];class nt extends r().Component{constructor(){super(...arguments);this.checkOne=d=>{d.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=d=>{d.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var d=this.props,o=d.cardInfo,t=d.type,n=d.t;return o.authorized==="false"&&t==="dept"?r().createElement(Ze.Z,{title:n("orgDialog.scopedAuthorize")},r().createElement(We.Z,{style:{marginLeft:"4px"}})):null}}render(){var d=this.props,o=d.t,t=d.cardInfo,n=t===void 0?{}:t,u=d.hidePosts,l=d.type,a=d.userCount,T=null;return this.props.hasNext?(T=r().createElement("div",{className:"next-level"},r().createElement("span",{className:"next-level-belle"},!(u&&l==="post")&&a>-1?r().createElement("span",{className:"next-level-count"},"(",a,")"):null,Tt.includes(l)?r().createElement("span",null):r().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},r().createElement(we.Z,{iconClass:"icon-xiaji1"}),o("component.nextLevel")))),this.props.single?r().createElement("div",{className:"org-tree-item"},r().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},r().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),T):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&r().createElement("div",{className:"org-tree-item"},r().createElement(Ie.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},r().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),T)):r().createElement("div",{className:"org-tree-item"},this.props.single?r().createElement(Oe.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},r().createElement(He,{cardInfo:n},r().createElement("span",{className:"org-tree-item-title"},this.props.title))):r().createElement(He,{cardInfo:n},r().createElement(Ie.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},r().createElement("span",{className:"org-tree-item-title"},this.props.title))))}}nt.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var ft=(0,te.Z)()(nt),it=e(38642),yt=["cluster","class"];class Qe extends r().Component{constructor(d){super(d);this.checkAll=(o,t)=>{o.preventDefault(),this.props.contextData.checkAll(t)},this.getIsCheckAll=()=>{var o=[].concat(this.context["".concat(this.props.dataTypeKey,"List")],yt.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")]);if(o.length===0)return!1;var t=o.findIndex(n=>!n.isChecked);return t===-1},this.renderDeptName=(o,t)=>t==="dept"?r().createElement(ge.Z,{type:o.source_type,value:o.id,name:o.name,dataType:"departmentName"}):o.name,this.renderName=o=>r().createElement(ge.Z,{type:o.source_type,value:o.user_id,name:o.name,dataType:"userName"}),this.state={isShowCheckAllEle:!0,whiteList:{belleFlag:(0,it.UI)("BELLE_CUSTOMER_WHITE")}}}render(){var d=this.state,o=d.isShowCheckAllEle,t=d.whiteList,n=this.props,u=n.t,l=n.dataTypeKey,a=n.disableHidden,T=n.scrollFlag,L=this.context,R=L.maxDeptUserCount,re=L.hidePosts,j=L.onlyPost,de=L.onlyUser,oe=L.single,le=[],ie=this.context["".concat(this.props.dataTypeKey,"List")].map(pe=>(le.push(r().createElement("div",{className:"title-item",key:pe.id},this.renderDeptName(pe,l))),t.belleFlag&&T?r().createElement(ft,{type:l,key:pe.id,cardInfo:pe,hasNext:!0,checkable:R&&(pe==null?void 0:pe.userCount)>R?!1:!(j&&pe.post_type==="post_group"||de),single:oe,userCount:pe.userCount,isChecked:!!pe.isChecked,itemId:pe.id,title:this.renderDeptName(pe,l),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!pe.children,hidePosts:re,disableHidden:a}):r().createElement(et,{type:l,key:pe.id,cardInfo:pe,hasNext:!0,checkable:R&&(pe==null?void 0:pe.userCount)>R?!1:!(j&&pe.post_type==="post_group"||de),single:oe,userCount:pe.userCount,isChecked:!!pe.isChecked,itemId:pe.id,title:this.renderDeptName(pe,l),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!pe.children,hidePosts:re,disableHidden:a}))),ce=[],ke=yt.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")].map(pe=>(ce.push(r().createElement("div",{className:"title-item",key:pe.id},this.renderName(pe,l))),t.belleFlag&&T?r().createElement(ft,{key:pe.id,hasNext:!1,title:this.renderName(pe),isChecked:!!pe.isChecked,itemId:pe.id,cardInfo:pe,checkable:!(pe.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:a}):r().createElement(et,{key:pe.id,hasNext:!1,title:this.renderName(pe),isChecked:!!pe.isChecked,itemId:pe.id,cardInfo:pe,checkable:!(pe.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:a}))),Ue=this.getIsCheckAll(),Me=r().createElement("div",{className:"org-tree-item"},r().createElement(Ie.Z,{checked:Ue,defaultChecked:!0,onClick:pe=>this.checkAll(pe,!Ue)},u("common.all")));return r().createElement("div",{className:"".concat(this.context.oneDisplayType?"org-tree more-height":"org-tree"," ").concat(t.belleFlag&&T?"org-tree-belle":"")},!this.context.single&&this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&ie.length===0&&ke.length>0&&o||!this.context.single&&!this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&(ie.length>0||ke.length>0)&&o?Me:null,t.belleFlag&&T&&r().createElement("div",{className:"belle-title-scroll"},le,ce),ie,ke)}}Qe.contextType=ne,Qe.defaultProps={dataTypeKey:"dept",contextData:{},disableHidden:!1,scrollFlag:!1};var ot=(0,te.Z)()(Qe),Ct=e(25547),lt="999",ct=1,dt=["clusterList","classList"];class pt extends r().Component{constructor(d,o){var t;super(d);t=this,this.getClusterList=()=>{var n=Q.ZP.OrgDialog.getClusterList(),u={keyword:""};Se.WY.get({url:n,params:u}).then(l=>{this.context.initTypeList("clusterList","checkedCluster",l.data.data.map(a=>({name:a.name,userCount:a.user_count,id:a.id,parentId:[""]})))})},this.getClassList=()=>{this.context.initTypeList("classList","checkedClass",[{name:"\u6D4B\u8BD52",userCount:2,id:"2",parentId:[""]},{name:"\u6D4B\u8BD54",userCount:1,id:"41",parentId:[""]}])},this.flatTreeData=(n,u)=>(n.children.forEach(l=>{l.children&&(u[l.id]=l.children,this.flatTreeData(l,u))}),u),this.getDeptList=function(n){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise((l,a)=>{var T=t.state.cacheId;Re({departmentId:n,cache_id:T,filter_auth:u&&!t.props.filterAuthOpen}).then(L=>{var R=L.data.children||[];R.forEach(j=>{j.parentId=L.data.id,j.userCount=j.user_count,j.name=j.department_name,j.all_name=r().createElement("span",null,t.state.contextData.breadNav.map(de=>r().createElement("span",{key:de.value},de.label,"/")),j.department_name)});var re=[];t.context.asyncDeptTree?re=R:re=t.flatTreeData(L.data,{[L.data.id]:R}),t.setState({deptList:re}),t.context.initTypeList("deptList","checkedDept",R),l(L.data)}).catch(L=>{console.error(L),a(L)})})},this.getDeptUserList=function(n){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,l=t.state.cacheId;$e({departmentId:n,cache_id:l,filter_auth:u&&!t.props.filterAuthOpen}).then(a=>{a.data&&a.data.forEach(T=>{T.name=T.user_name,T.detailInfo=!1}),t.context.initTypeUser("deptUser",a.data)}).catch(a=>{console.error(a)})},this.getGroupList=()=>{var n=Q.ZP.Organization.getGroupList(),u={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Se.WY.get({url:n,params:u}).then(l=>{l.data.groups=l.data.groups||[],l.data.groups.forEach(a=>{a.parentId=this.state.contextData.breadNav.map(T=>T.value),a.userCount=a.user_count,a.name=a.group_name}),this.setState({groupList:l.data.groups}),this.context.initTypeList("groupList","checkedGroup",l.data.groups)})},this.getGroupUserList=n=>{var u=Q.ZP.Organization.getGroupUserList({groupId:n}),l={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Se.WY.get({url:u,params:l}).then(a=>{a.data.users&&a.data.users.forEach(T=>{T.name=T.user_name,T.parentId=this.state.contextData.breadNav.map(L=>L.value)}),this.context.initTypeUser("groupUser",a.data.users)})},this.getPostList=n=>{var u=Q.ZP.Organization.getPostTree(),l={filter_auth:!this.props.filterAuthOpen,post_id:n,user_type:this.context.userType};Se.WY.get({url:u,params:l}).then(a=>{a.data.posts=a.data.posts||[],a.data.posts.forEach(T=>{T.parentId=this.state.contextData.breadNav.map(L=>L.value),T.userCount=T.user_count,T.name=T.post_name}),this.setState({postList:a.data.posts}),this.context.initTypeList("postList","checkedPost",a.data.posts),this.context.initHidePostsStatus(a.data.hide_posts==="true")})},this.getPostUserList=n=>{var u=Q.ZP.Organization.getPostUserList({postId:n}),l={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Se.WY.get({url:u,params:l}).then(a=>{a.data.users&&a.data.users.forEach(T=>{T.name=T.user_name,T.parentId=this.state.contextData.breadNav.map(L=>L.value)}),this.context.initTypeUser("postUser",a.data.users)})},this.getUserList=function(n){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;t.props.type==="dept"?t.getDeptUserList(n,u):t.props.type==="group"?t.getGroupUserList(n):t.getPostUserList(n)},this.checkOne=(n,u,l)=>{var a=this.state.checkedCount;if(u==="list"){var T=this.context[this.state.listType].find(R=>R.id===n);T.isChecked=l,T.all_name&&typeof T.all_name=="object"&&delete T.all_name,a=l?a+1:a-1,this.context.checkListOne(T,this.state.checkedListType,this.state.listType)}else if(u==="user"){var L=this.context[this.state.checkedUserType].find(R=>R.id===n);L.isChecked=l,a=l?a+1:a-1,this.context.checkUserOne(L,this.state.checkedUserType)}this.updateCheckedCount(a)},this.updateCheckedCount=n=>{this.setState({checkedCount:n})},this.checkAll=function(){var n=(0,H.Z)(w().mark(function u(l){var a,T,L,R,re,j,de,oe,le,ie,ce,ke,Ue,Me,pe;return w().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(a=t.state,T=a.contextData,L=a.cacheId,R=[...T.breadNav].reverse(),re=(0,M.Z)(R,1),j=re[0],de=j.value,oe=[...t.context[t.state.checkedListType]],le=j.authorized==="false",ie={departments:[],users:[]},!le){Je.next=12;break}return Je.next=9,st({departmentId:de,cache_id:L});case 9:ce=Je.sent,ke=ce.data,ie={departments:ke.departments.map(Pe=>(Pe.isChecked=l,Pe.name=Pe.department_name,Pe.parentId=Pe.parent_ids.split("/"),Pe.parentAuthorize=!1,Pe.userCount=Pe.user_count,Pe)),users:ke.users.map(Pe=>(Pe.isChecked=l,Pe.name=Pe.user_name,Pe.parentAuthorize=!1,Pe))};case 12:Ue=t.context[t.state.listType].map(Pe=>{Pe.isChecked=l,t.props.type!=="dept"&&oe.forEach(tt=>{tt.parentId.indexOf("".concat(Pe.id))!==-1&&(tt.isChecked=!1)});var Xe=oe.findIndex(tt=>tt.id===Pe.id);return Xe!==-1?oe[Xe].isChecked=l:oe.push(Pe),Pe}),Me=[],t.context.checkedUser.forEach(Pe=>{if(t.props.type!=="dept"){if(typeof Pe.parentId!="undefined"&&Pe.parentId.indexOf("".concat(de))!==-1&&Pe.parentId[Pe.parentId.length-1]!==de)return}else{var Xe=typeof Pe.parentId!="undefined"?Pe.parentId:Pe.department_ids||[];if(Xe.indexOf(de)!==-1)return}Me.push(Pe)}),pe=dt.includes(t.state.listType)?[]:t.context[t.state.checkedUserType].map(Pe=>{Pe.isChecked=l;var Xe=Me.findIndex(tt=>tt.id===Pe.id);return Xe!==-1?Me[Xe].isChecked=l:Me.push(Pe),Pe}),t.context.toggleDisplayList(t.state.checkedListType,se()(ie.departments,oe,"id"),t.state.listType,Ue,t.state.checkedUserType,pe,se()(ie.users,Me,"id")),t.setState({checkedCount:l?(dt.includes(t.state.listType)?0:t.context[t.state.checkedUserType].length)+t.context[t.state.listType].length:0});case 18:case"end":return Je.stop()}},u)}));return function(u){return n.apply(this,arguments)}}(),this.nextLevel=(n,u,l)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var a=[...this.state.contextData.breadNav,{value:n.id,label:u,authorized:n.authorized}];this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{breadNav:a})},()=>{this.props.type==="post"?this.nextPostLevel(n.id,l):this.props.type==="dept"?this.nextDeptLevel(n.id,!(G()(n,"authorized")&&n.authorized==="true")):this.context.initTypeList("groupList","checkedGroup",[]),this.getUserList(n.id===lt?ct:n.id,!(G()(n,"authorized")&&n.authorized==="true"))})},this.nextDeptLevel=(n,u)=>{if(this.context.asyncDeptTree)this.getDeptList(n,u);else{var l=this.state.deptList[n];typeof l!="undefined"&&l.forEach(a=>{a.parentId=this.state.contextData.breadNav.map(T=>T.value),a.userCount=a.user_count,a.name=a.department_name}),this.context.initTypeList("deptList","checkedDept",l||[])}},this.nextPostLevel=(n,u)=>{if(u){var l=(0,Ct.lK)(this.state.postList,n),a=l.children.map(T=>(T.name=T.post_name,T.parentId=this.state.contextData.breadNav.concat([n]).map(L=>L.value),T.userCount=T.user_count,T));this.context.initTypeList("postList","checkedPost",a)}},this.changeLevel=(n,u,l)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var a=this.props.type==="group"?[this.state.contextData.breadNav[0]]:this.state.contextData.breadNav.slice(0,u+1);this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{breadNav:a}),isSearch:!1},()=>{this.props.type==="dept"?this.changeDeptLevel(n,l):this.props.type==="group"?this.changeGroupLevel(n):this.props.type==="cluster"?this.getClusterList():this.props.type==="class"?this.getClassList():this.changePostLevel(n)})},this.changeDeptLevel=function(n){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.context.asyncDeptTree)t.getDeptList(n,u);else{var l=t.state.deptList[n];l.forEach(a=>{a.parentId=t.state.contextData.breadNav.map(T=>T.value),a.userCount=a.user_count,a.name=a.department_name}),t.context.initTypeList("deptList","checkedDept",l)}t.getDeptUserList(n===lt?ct:n,u)},this.changePostLevel=n=>{var u=n==="1"?this.state.postList:(0,Ct.lK)(this.state.postList,n).children,l=u.map(a=>(a.name=a.post_name,a.parentId=this.state.contextData.breadNav.concat([n]).map(T=>T.value),a.userCount=a.user_count,a));this.context.initTypeList("postList","checkedPost",l),n!=="1"&&this.getPostUserList(n===lt?ct:n)},this.changeGroupLevel=n=>{n||(this.context.initTypeUser("groupUser",[]),this.context.initTypeList("groupList","checkedGroup",this.state.groupList))},this.state={postList:[],deptList:[],groupList:[],clusterList:[],classList:[],contextData:{breadNav:[this.props.defaultBreadNav],checkOne:this.checkOne,checkAll:this.checkAll,nextLevel:this.nextLevel,changeLevel:this.changeLevel},checkedCount:0,listType:"".concat(this.props.type,"List"),checkedListType:"checked".concat(this.props.type.charAt(0).toUpperCase()).concat(this.props.type.substr(1)),checkedUserType:"".concat(this.props.type,"User"),isSearch:!1,searchResult:[],loadDept:!1,loadUser:!1,cacheId:o.cacheId}}componentDidMount(){this.props.type!=="group"?this.props.type==="dept"?this.getDeptList("1").then(d=>{this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{breadNav:[{value:d.id,label:d.department_name,sourceType:d.source_type,authorized:d.authorized}]})}),this.getDeptUserList("1")}):this.getPostList("1"):this.getGroupList(1),this.props.type==="cluster"&&this.getClusterList(),this.props.type==="class"&&this.getClassList()}render(){return r().createElement(z.Provider,{value:this.state.contextData},r().createElement("div",{className:"org-display-container org-display-dept"},r().createElement(xt,null),this.props.type==="dept"&&(this.state.loadDept||this.state.loadUser)?r().createElement("div",{className:"dept-loading"},r().createElement(B.Z,null)):null,r().createElement(Et,{dataTypeKey:this.props.type,disableHidden:this.props.disableHidden,scrollFlag:this.props.scrollFlag})))}}pt.contextType=ne;var xt=(0,ae.l)(z,ye),Et=(0,ae.l)(z,ot);pt.defaultProps={defaultBreadNav:{value:"",label:"\u9177\u6E32\u79D1\u6280"},queryType:1,type:"dept",filterAuthOpen:!1,disableHidden:!1,scrollFlag:!1};var Pt=pt,It=e(57663),ut=e(71577),Ee=e(54549);class y extends r().Component{constructor(){super(...arguments);this.removeItem=(d,o,t,n)=>{d.preventDefault(),o.isChecked=!1,n==="user"?this.context.removeCheckedUser(o):this.context.checkListOne(o,t,"".concat(n,"List"))},this.displayName=(d,o)=>{var t={user:"userName",dept:"departmentName"}[d]||"",n={user:o.unionid||o.user_id||o.userId,dept:o.id}[d]||o.id;return r().createElement(ge.Z,{value:n,name:o.name,type:o.source_type||o.sourceType,dataType:t})},this.displayItem=d=>{var o=this.context,t=o.hidePosts,n=o.showUserCount,u="checked".concat(d.charAt(0).toUpperCase()).concat(d.substr(1)),l=this.context[u].map(a=>a.isChecked&&a.authorized!=="false"?r().createElement(Ze.Z,{key:a.id,placement:"top",title:a.all_name||"",getPopupContainer:()=>document.querySelector(".checked-display-container")},r().createElement("div",{className:"display-item",key:a.id},this.displayName(d,a),d==="user"||t&&d==="post"?"":n&&a.userCount>-1?"(".concat(a.userCount,")"):"",a.reserve?null:r().createElement("span",{className:"display-item-close",onClick:T=>this.removeItem(T,a,u,d)},r().createElement(Ee.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))):null);return l},this.handleClearSelected=()=>{this.context.clearSelectedAll()}}render(){var d=this.props.t,o=["dept","group","post","user","cluster","class"].map(t=>this.displayItem(t));return r().createElement("div",{className:"checked-display-container"},r().createElement("div",{className:"checked-display-container-header"},r().createElement("span",null,d("orgDialog.selected"),":"),r().createElement(ut.Z,{type:"link",onClick:this.handleClearSelected},d("orgDialog.clearAll"))),o)}}y.contextType=ne;var g=(0,te.Z)()(y),v=e(67222),p=e(6793),P=m.Z.Search;class _ extends r().Component{constructor(d){var o;super(d);o=this,this.onChange=t=>{var n=this.props.appType,u=localStorage.getItem("qyWechatBook");if(t.preventDefault(),this.setState({value:t.target.value}),!(!t.target.value&&!this.props.showCancel)&&!this.props.disableChange){var l=n==="wx_app"&&u==="true";!(0,it.eY)("ORG_DIALOG_SEARCH")||l||(0,p.Ds)(this.debounceChange,500)()}},this.handleSearch=(t,n)=>{n.preventDefault(),!(!t&&!this.props.showCancel)&&this.extendReturn(t)},this.debounceChange=()=>{this.extendReturn(this.state.value)},this.extendReturn=function(){var t=(0,H.Z)(w().mark(function n(u){var l,a,T,L,R,re,j,de,oe;return w().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(l=o.props,a=l.appType,T=l.selectType,L=l.appId,R=localStorage.getItem("qyWechatBook"),re="",j=a==="wx_app"&&R==="true"&&L==="9005",!(u&&T==="user"&&j)){ie.next=17;break}return ie.prev=5,ie.next=8,(0,v.F_)(u);case 8:de=ie.sent,oe=de.data,oe.success&&(re=oe.data),ie.next=17;break;case 13:ie.prev=13,ie.t0=ie.catch(5),console.error(ie.t0),re="";case 17:o.props.onSearch(u,re);case 18:case"end":return ie.stop()}},n,null,[[5,13]])}));return function(n){return t.apply(this,arguments)}}(),this.state={value:""}}render(){var d=this.props,o=d.t,t=d.selectType;return r().createElement("div",{className:"top-search"},r().createElement(P,{placeholder:o(t==="user"?"component.searchStudent":t==="dept"?"component.searchDepartment":t==="post"?"component.searchPost":t==="cluster"?"component.searchCluster":t==="class"?"component.searchClass":"setting.searchGroup"),value:this.state.value,onSearch:this.handleSearch,allowClear:!0,onChange:this.onChange}))}}var A=(0,me.$j)(I=>({appType:I.user.appType,appId:I.user.appId}))((0,te.Z)()(_)),V=e(87312);class N extends O.Component{constructor(){super(...arguments);this.checkedAll=(d,o)=>{this.props.checkedAll(o)},this.getIsCheckedAll=()=>{var d=this.props.list,o=[].concat(d);if(o.length===0)return!1;var t=o.findIndex(n=>!n.isChecked);return t===-1},this.checkUser=(d,o)=>{o.isChecked=!o.isChecked,this.context.checkUserOne(o,"checkedUser")},this.checkSingleUser=(d,o)=>{o.isChecked=!0,this.context.checkUserOne(o,"checkedUser")},this.checkDept=(d,o)=>{o.isChecked=!o.isChecked,this.context.checkListOne(o,"checkedDept","deptList")},this.checkPost=(d,o)=>{o.isChecked=!o.isChecked,this.context.checkListOne(o,"checkedPost","postList")},this.checkGroup=(d,o)=>{o.isChecked=!o.isChecked,this.context.checkListOne(o,"checkedGroup","groupList")},this.checkedCluster=(d,o)=>{o.isChecked=!o.isChecked,this.context.checkListOne(o,"checkedCluster","clusterList")}}renderList(){var d=this.props,o=d.userListType,t=d.list,n=d.t,u=d.isSingle,l=d.hidePosts;return o==="user"&&!u?t.map(a=>r().createElement("div",{className:"search-result-item",key:a.id,onClick:T=>{this.checkUser(T,a)}},r().createElement(Ie.Z,{checked:a.isChecked},r().createElement(He,{cardInfo:a},r().createElement("span",{className:"user-names"},r().createElement(ge.Z,{dataType:"userName",value:a.user_id,name:a.user_name,type:a.source_type}))),a.department_names&&a.department_names.length>0?r().createElement("span",{className:"user-dept"},r().createElement(Ae.Z,{sourceType:a.source_type,list:a.leaf_department_ids,nameList:a.department_names})):null))):o==="user"&&u?t.map(a=>r().createElement("div",{className:"search-result-item",key:a.id,onClick:T=>{this.checkSingleUser(T,a)}},r().createElement("div",{className:"user-name"},r().createElement(He,{cardInfo:a},r().createElement(ge.Z,{dataType:"userName",value:a.user_id,name:a.user_name,type:a.source_type}))),a.department_names&&a.department_names.length>0?r().createElement("span",{className:"user-name-dept"},r().createElement(Ae.Z,{sourceType:a.source_type,list:a.leaf_department_ids,nameList:a.department_names})):null)):o==="dept"?t.map(a=>r().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:T=>{this.checkDept(T,a)}},r().createElement(Ie.Z,{checked:a.isChecked,className:"department-left"},r().createElement("div",{className:"department-left-department"},r().createElement("div",{className:"user-name"},r().createElement(ge.Z,{dataType:"departmentName",value:a.id,name:a.department_name,type:a.source_type})),a.path&&a.path.length>0?r().createElement(Ze.Z,{title:a.path.join(">"),mouseEnterDelay:.8},r().createElement("span",{className:"user-name-dept"},r().createElement(Ae.Z,{list:a.department_infos||[],displayAll:!0}))):null)),r().createElement("div",{className:"department-right"},"(",a.userCount,n("common.userUnit"),")"))):o==="post"?t.map(a=>r().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:T=>{this.checkPost(T,a)}},r().createElement(Ie.Z,{checked:a.isChecked,className:"department-left"},r().createElement("div",{className:"department-left-department"},r().createElement("div",{className:"user-name"},a.name),a.path&&a.path.length>0?r().createElement(Ze.Z,{title:a.path.join(">"),mouseEnterDelay:.8},r().createElement("span",{className:"user-name-dept"},r().createElement("span",null,a.path.join(">")))):null)),!l&&r().createElement("div",{className:"department-right"},"(",a.userCount,n("common.userUnit"),")"))):o==="group"?t.map(a=>r().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:T=>{this.checkGroup(T,a)}},r().createElement(Ie.Z,{checked:a.isChecked,className:"department-left"},r().createElement("div",{className:"department-left-department"},r().createElement("div",{className:"user-name"},a.name),a.path&&a.path.length>0?r().createElement(Ze.Z,{title:a.path.join(">"),mouseEnterDelay:.8},r().createElement("span",{className:"user-name-dept"},r().createElement("span",null,a.path.join(">")))):null)),r().createElement("div",{className:"department-right"},"(",a.userCount,n("common.userUnit"),")"))):o==="cluster"?t.map(a=>r().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:T=>{this.checkedCluster(T,a)}},r().createElement(Ie.Z,{checked:a.isChecked,className:"department-left"},r().createElement("span",{className:"user-name"},a.name)),r().createElement("div",{className:"department-right"},"(",a.userCount,n("common.userUnit"),")"))):null}render(){var d=this.props,o=d.t,t=d.isSingle,n=this.getIsCheckedAll(),u=r().createElement("div",{className:"search-result-all"},r().createElement(Ie.Z,{checked:n,onClick:l=>this.checkedAll(l,!n)},o("common.all")));return r().createElement("div",{className:"search-result-container more-height"},this.props.list.length>0?r().createElement(r().Fragment,null,!t&&u,this.renderList()):r().createElement(V.Z,{tipText:o("component.searchUserEmpty")}))}}N.contextType=ne,N.defaultProps={list:[]};var q=(0,te.Z)()(N),ee=e(18329),W=e(65202),k=e(91648),f=S.Z.TabPane,c=s.Z.Option,C={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0 20px"},maskClosable:!1};class x extends r().Component{constructor(d){var o;super(d);o=this,this.onCancel=()=>{var t=this.props.onCancel;this.setState({showCancel:!1}),t&&this.props.onCancel()},this.onOk=()=>{var t=this.props.onOk,n=this.state.contextData;this.setState({showCancel:!1});var u=0;if(t){var l=[];n.checkedDept.map(j=>(u+=j.isChecked?j.user_count:0,j.isChecked&&j.authorized!=="false"?l.push((0,E.Z)((0,E.Z)({},j),{},{renderType:"dept"})):null));var a=[];n.checkedPost.map(j=>(u+=j.isChecked?j.user_count:0,j.isChecked?a.push((0,E.Z)((0,E.Z)({},j),{},{renderType:"post"})):null));var T=[];n.checkedGroup.map(j=>(u+=j.isChecked?j.user_count:0,j.isChecked?T.push((0,E.Z)((0,E.Z)({},j),{},{renderType:"group"})):null));var L=[];n.checkedUser.map(j=>{if(!j.reserve)return u+=j.isChecked?1:0,j.isChecked?L.push((0,E.Z)((0,E.Z)({},j),{},{renderType:"user"})):null});var R=[];n.checkedCluster.map(j=>{if(!j.reserve)return u+=j.isChecked?1:0,j.isChecked?R.push((0,E.Z)((0,E.Z)({},j),{},{renderType:"cluster"})):null});var re=[];if(n.checkedClass.map(j=>{if(!j.reserve)return u+=j.isChecked?1:0,j.isChecked?re.push((0,E.Z)((0,E.Z)({},j),{},{renderType:"class"})):null}),u>this.props.maxUserCount){Y.default.warn(this.props.beyondLimitTip);return}t({dept:l,post:a,group:T,user:L,cluster:R,classes:re})}},this.getListParentId=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],T=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];n.forEach(de=>{de.isChecked=!0,de.parentId=[""],de.userCount=de.userCount||de.user_count||0});var L=t.map(de=>de.id),R=l.map(de=>de.id);if(L||R){var re=Q.ZP.OrgDialog.getDeptParent(),j={query_type:1,dept_ids:L,user_ids:R};Se.WY.post({url:re,data:(0,E.Z)({},j)}).then(de=>{var oe=de.data.data;t.forEach(le=>{le.isChecked=!0;var ie=oe.find(ce=>ce.id===le.id)||{path:[]};le.parentId=ie.path[0]?ie.path[0].split("/").slice(1):[],le.userCount=ie.user_count||le.userCount||le.user_count||0}),u.forEach(le=>{le.isChecked=!0;var ie=oe.find(ce=>ce.id===le.id)||{path:[]};le.parentId=ie.path[0]?ie.path[0].split("/").slice(1):[],le.userCount=le.userCount||le.user_count||0}),l.forEach(le=>{le.isChecked=!0;var ie=[];oe.forEach(ce=>{ce.id===le.id&&ce.path.map(ke=>{ie.push(...ke.split("/").slice(1))})}),le.parentId=Array.from(new Set(ie))}),a.forEach(le=>{le.isChecked=!0;var ie=oe.find(ce=>ce.id===le.id)||{path:[]};le.parentId=ie.path[0]?ie.path[0].split("/").slice(1):[],le.userCount=le.userCount||le.user_count||0}),T.forEach(le=>{le.isChecked=!0;var ie=oe.find(ce=>ce.id===le.id)||{path:[]};le.parentId=ie.path[0]?ie.path[0].split("/").slice(1):[],le.userCount=le.userCount||le.user_count||0}),o.setState({contextData:(0,E.Z)((0,E.Z)({},o.state.contextData),{},{checkedDept:t,checkedGroup:n,checkedPost:u,checkedUser:l,checkedCluster:a,checkedClass:T})})})}else n.length>0?o.setState({contextData:(0,E.Z)((0,E.Z)({},o.state.contextData),{},{checkedGroup:n})}):o.setState({contextData:(0,E.Z)((0,E.Z)({},o.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[]})})},this.initHidePostsStatus=t=>{var n=this.state.contextData;this.setState({contextData:(0,E.Z)((0,E.Z)({},n),{},{hidePosts:t})})},this.initTypeList=(t,n,u)=>{u.forEach(l=>{var a=this.findItemIndex(l.id,n);a===-1?l.isChecked=!1:l.isChecked=this.state.contextData[n][a].isChecked}),this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{[t]:u})})},this.initTypeUser=(t,n)=>{var u=n||[...this.state.contextData[t]],l=this.props.reserveUser;u.forEach(a=>{var T=this.findItemIndex(a.id,"checkedUser");l.findIndex(L=>L.id===a.id)!==-1&&(a.reserve=!0),T===-1?a.isChecked=!1:a.isChecked=this.state.contextData.checkedUser[T].isChecked}),this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{[t]:u})})},this.toggleDisplayItem=(t,n)=>{var u=this.findItemIndex(t.id,n);return u===-1?n.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[n]:this.checkListParentId(n,t),checkedUser:t.isChecked?this.checkParentId(this.state.contextData.checkedUser,t.id):this.state.contextData.checkedUser}:{[n]:[...this.state.contextData[n],t]}:n.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[n]:this.checkListParentId(n,t),checkedUser:t.isChecked?this.checkParentId(this.state.contextData.checkedUser,t.id):this.state.contextData.checkedUser}:{checkedUser:this.getNewList(t,"checkedUser",!0),[n]:this.getNewList(t,n)}},this.toggleDisplayList=(t,n,u,l,a,T,L)=>{this.deleteAllName(n),this.deleteAllName(l),this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{[t]:n,[u]:l,[a]:T,checkedUser:L})})},this.deleteAllName=t=>{t.map(n=>(n.all_name&&typeof n.all_name=="object"&&delete n.all_name,n))},this.checkUserOne=(t,n)=>{this.props.single?this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{checkedUser:[t],[n]:n==="checkedUser"?[t]:this.getSingleUserList(t,n)})}):this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),this.toggleDisplayItem(t,n))})},this.dealAuthorizedFalseChecked=function(){var t=(0,H.Z)(w().mark(function n(u){var l,a,T,L,R,re,j,de,oe;return w().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return l=o.state.contextData,a=l.cacheId,T=l.checkedDept,L=l.checkedUser,R={checkedDept:[],checkedUser:[]},ie.prev=2,ie.next=5,st({departmentId:u.id,cache_id:a});case 5:re=ie.sent,j=re.data,de=j.departments,oe=j.users,de.push(u),de.map(ce=>(ce.isChecked=!0,ce.name=ce.department_name,ce.parentId=ce.parent_ids.split("/"),ce.parentAuthorize=!1,ce.userCount=ce.user_count,ce)),oe.map(ce=>(ce.isChecked=!0,ce.name=ce.user_name,ce.parentAuthorize=!1,o.toggleDisplayItem(ce,"deptUser"),ce)),R=(0,E.Z)((0,E.Z)({},R),{},{checkedUser:se()(oe,L,"id"),checkedDept:se()(de,T,"id")}),ie.next=16;break;case 13:ie.prev=13,ie.t0=ie.catch(2),console.error("\u83B7\u53D6\u90E8\u95E8\u7BA1\u8F96\u8303\u56F4\u51FA\u9519",ie.t0);case 16:return ie.abrupt("return",R);case 17:case"end":return ie.stop()}},n,null,[[2,13]])}));return function(n){return t.apply(this,arguments)}}(),this.dealAuthorizedFalseUnChecked=t=>{var n=this.state.contextData,u=n.checkedDept,l=n.checkedUser,a=n.deptUser,T=[],L=u.filter(re=>re.parent_ids.split("/").indexOf(t.id)===-1),R=l.filter(re=>{var j=re.department_ids.indexOf(t.id)===-1;return j||T.push(re.id),j});return{checkedDept:L,checkedUser:R,deptUser:T.length>0?a.map(re=>(T.indexOf(re.id)>-1&&(re.isChecked=!1),re)):a}},this.checkListOne=function(){var t=(0,H.Z)(w().mark(function n(u,l,a){var T;return w().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(T={checkedDept:[],checkedUser:[]},!(u.authorized==="false"&&l==="checkedDept")){R.next=12;break}if(!u.isChecked){R.next=8;break}return R.next=5,o.dealAuthorizedFalseChecked(u);case 5:R.t0=R.sent,R.next=9;break;case 8:R.t0=o.dealAuthorizedFalseUnChecked(u);case 9:T=R.t0,R.next=14;break;case 12:u.parentAuthorize===!1&&u.isChecked===!1&&o.unCheckedParentDept(u,l),T=(0,E.Z)({[a]:o.getNewList(u,a,!1)},o.toggleDisplayItem(u,l));case 14:o.setState({contextData:(0,E.Z)((0,E.Z)({},o.state.contextData),T)});case 15:case"end":return R.stop()}},n)}));return function(n,u,l){return t.apply(this,arguments)}}(),this.removeCheckedUser=t=>{this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{checkedUser:this.getNewList(t,"checkedUser"),deptUser:this.getNewList(t,"deptUser"),postUser:this.getNewList(t,"postUser"),groupUser:this.getNewList(t,"groupUser"),searchResult:this.getNewList(t,"searchResult")})})},this.unCheckedParentDept=(t,n)=>{var u=this.state.contextData.checkedDept,l=u.filter(L=>L.authorized==="false"&&n==="checkedUser"?t.department_ids.indexOf(L.id)>-1:n==="checkedDept"?t.parentId.indexOf(L.id)>-1:!1),a=(0,M.Z)(l,1),T=a[0];T&&(T.isChecked=!1,this.toggleDisplayItem(T,"checkedDept"),this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{checkedDept:l})}))},this.checkListParentId=(t,n)=>{var u=[...this.state.contextData[t]],l=this.findItemIndex(n.id,t);return u.forEach(a=>{a.id!==n.id&&a.parentId.indexOf("".concat(n.id))!==-1?a.isChecked=!1:a.id===n.id&&(a.isChecked=n.isChecked)}),l===-1&&u.push(n),u},this.checkParentId=(t,n)=>{var u=[];return t.forEach(l=>{var a=typeof l.parentId!="undefined"?l.parentId:l.department_ids||[];a.indexOf(n)===-1&&u.push(l)}),u},this.getNewList=(t,n,u)=>{var l=[...this.state.contextData[n]],a=this.findItemIndex(t.id,n);return a===-1?u&&l.push(t):l[a].isChecked=t.isChecked,l},this.getSingleUserList=(t,n)=>{var u=[...this.state.contextData[n]];return u.forEach(l=>{l.id===t.id?l.isChecked=t.isChecked:l.isChecked=!1}),u},this.findItemIndex=(t,n)=>this.state.contextData[n].findIndex(u=>u.id===t),this.clearTabPanelList=(t,n)=>{this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{[t]:[],[n]:[]})})},this.getTabs=()=>{var t=[],n,u,l=this.props,a=l.t,T=l.filterAuthOpen,L=l.disableHidden,R=l.scrollFlag,re=this.state.contextData,j=re.canUseGroups,de=re.canUseClass;return this.state.displayType.forEach(oe=>{switch(oe){case"dept":t.push({label:a("component.orgDialogDeptLabel"),key:"dept",defaultBreadNav:{value:"",label:"",sourceType:""},queryType:1});break;case"group":t.push({label:a("component.orgDialogGroupLabel"),key:"group",queryType:2,defaultBreadNav:{value:"",label:a("component.userGroup")}});break;case"post":t.push({label:a("component.orgDialogPostLabel"),key:"post",defaultBreadNav:{value:"1",label:a("common.post")},queryType:3});break;case"cluster":j&&t.push({label:a("component.orgDialogClusterLabel"),key:"cluster",defaultBreadNav:{value:"",label:""},queryType:4});break;case"class":de&&t.push({label:a("component.orgDialogClassLabel"),key:"class",defaultBreadNav:{value:"",label:""},queryType:5});break}}),t.length===1?u=r().createElement(Pt,{defaultBreadNav:t[0].defaultBreadNav,queryType:t[0].queryType,type:t[0].key,filterAuthOpen:T,disableHidden:L,scrollFlag:R}):(n=t.map(oe=>r().createElement(f,{tab:oe.label,key:oe.key},r().createElement(Pt,{defaultBreadNav:oe.defaultBreadNav,queryType:oe.queryType,type:oe.key,filterAuthOpen:T,disableHidden:L,scrollFlag:R}))),u=r().createElement(S.Z,null,n)),u},this.handleSearch=(t,n)=>{var u=this.state.selectType;u==="user"?this.getUserList(t,n):u==="dept"?this.getDeptList(t):u==="post"?this.getPostList(t):u==="cluster"?this.getClusterResult(t):u==="class"?this.getClassResult(t):this.getGroupList(t)},this.getClusterResult=t=>{var n=Q.ZP.OrgDialog.getClusterList(),u={keyword:t};Se.WY.get({url:n,params:u}).then(l=>{this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedCluster",l.data.data.map(a=>({name:a.name,userCount:a.user_count,id:a.id,parentId:[""]})))})},this.getUserList=(t,n)=>{var u=Q.ZP.OrgDialog.getUserByName(),l={user_name:n===""?t:"",filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType,userIds:n};Se.WY.get({url:u,params:l}).then(a=>{a.data.users&&a.data.users.forEach(T=>{T.name=T.user_name}),this.setState({showCancel:!0}),this.initTypeUser("searchResult",a.data.users||[])})},this.getDeptList=t=>{var n=Q.ZP.Organization.queryDept(),u={department_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Se.WY.get({url:n,params:u}).then(l=>{l.data.departments&&l.data.departments.forEach(a=>{a.name=a.department_name,a.parentId=a.parent_ids?a.parent_ids.split("/"):[],a.userCount=a.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedDept",l.data.departments||[])})},this.getPostList=t=>{var n=Q.ZP.Organization.addPost(),u={post_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Se.WY.get({url:n,params:u}).then(l=>{l.data.posts&&l.data.posts.forEach(a=>{a.name=a.post_name,a.parentId=a.parent_id?a.parent_id.split("/"):[],a.userCount=a.user_count}),this.setState({hidePosts:l.data.hide_posts,showCancel:!0}),this.initTypeList("searchResult","checkedPost",l.data.posts||[])})},this.getGroupList=t=>{var n=Q.ZP.Organization.getGroupList(),u={group_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Se.WY.get({url:n,params:u}).then(l=>{l.data.groups&&l.data.groups.forEach(a=>{a.name=a.group_name,a.parentId=a.parent_id?a.parent_id.split("/"):[],a.userCount=a.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedGroup",l.data.groups||[])})},this.checkAllResult=t=>{var n=this.state,u=n.selectType,l=n.contextData,a="checked".concat(u.charAt(0).toUpperCase()).concat(u.substr(1)),T=[...l[a]],L=l.searchResult.map(re=>{re.isChecked=t;var j=T.findIndex(de=>de.id===re.id);return j!==-1?T[j].isChecked=t:T.push(re),re}),R=T;this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{[a]:R,searchResult:L})})},this.clearSelectedAll=()=>{var t=this.state.contextData,n=t.checkedDept,u=t.checkedGroup,l=t.checkedPost,a=t.checkedUser,T=t.checkedCluster,L=t.checkedClass,R=t.deptList,re=t.groupList,j=t.postList,de=t.clusterList,oe=t.classList,le=t.deptUser,ie=t.groupUser,ce=t.postUser,ke=Ue=>(Ue.forEach(Me=>{Me.isChecked=!1}),Ue);this.setState({contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],deptList:n.length>0?ke(R):R,groupList:u.length>0?ke(re):re,postList:l.length>0?ke(j):j,clusterList:T.length>0?ke(de):de,classList:L.length>0?ke(oe):oe,deptUser:a.length>0?ke(le):le,groupUser:a.length>0?ke(ie):ie,postUser:a.length>0?ke(ce):ce})})},this.handleCancel=()=>{this.setState({showCancel:!1})},this.handleSelectChange=t=>{this.setState({selectType:t,contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{searchResult:[]})})},this.state={title:d.title||d.t("component.chooseAssignScope"),displayType:d.displayType?d.displayType:["dept"],selectType:"user",showCancel:!1,hidePosts:!1,contextData:{showUserCount:d.showUserCount,deptList:[],groupList:[],postList:[],clusterList:[],classList:[],deptUser:[],groupUser:[],postUser:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[],onlyUser:d.onlyUser,onlyDept:d.onlyDept,onlyPost:d.onlyPost,canUseGroups:d.useGroups,canUseClass:d.useClass,single:d.single,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,userType:this.props.userType,initTypeList:this.initTypeList,initTypeUser:this.initTypeUser,toggleDisplayItem:this.toggleDisplayItem,toggleDisplayList:this.toggleDisplayList,checkListOne:this.checkListOne,checkUserOne:this.checkUserOne,removeCheckedUser:this.removeCheckedUser,clearTabPanelList:this.clearTabPanelList,maxDeptUserCount:d.maxDeptUserCount,hidePosts:!1,initHidePostsStatus:this.initHidePostsStatus,cacheId:(0,k.Z)(),clearSelectedAll:this.clearSelectedAll}}}componentDidUpdate(d){if(d.visible!==this.props.visible&&this.props.visible){var o=this.props.initData,t=o.dept,n=o.group,u=o.post,l=o.user,a=o.cluster,T=o.classes;console.warn(l,"user");var L=this.props,R=L.reserveUser,re=L.t,j=L.onlyDept,de=L.onlyPost;R.forEach(oe=>{oe.reserve=!0}),this.setState({title:this.props.title||re("component.chooseAssignScope"),displayType:this.props.displayType?this.props.displayType:["dept"],selectType:de?"post":j?"dept":"user",contextData:(0,E.Z)((0,E.Z)({},this.state.contextData),{},{deptList:[],groupList:[],postList:[],deptUser:[],clusterList:[],classList:[],groupUser:[],postUser:[],searchResult:[],onlyUser:this.props.onlyUser,onlyDept:this.props.onlyDept,canUseGroups:this.props.useGroups,canUseClass:this.props.useClass,onlyPost:this.props.onlyPost,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,cacheId:(0,k.Z)()})},()=>{this.getListParentId(t,n,u,l.concat(R),a,T)})}}componentWillUnmount(){Dt({cacheId:this.state.contextData.cacheId}).then(()=>{console.warn("\u6E05\u9664\u7F13\u5B58\u6210\u529F")}).catch(d=>{console.error("\u6E05\u9664\u7F13\u5B58\u5931\u8D25",d)})}render(){var d=this.getTabs(),o=this.props,t=o.t,n=o.onlyUser,u=o.onlyDept,l=o.onlyPost,a=o.displayType,T=o.useGroups,L=o.useClass,R=o.onlyChoosePost,re=(0,W.p)(),j=this.state,de=j.showCancel,oe=j.selectType,le=j.hidePosts;return C.okText=this.props.okText||t("common.ok"),r().createElement(ee.ZP,(0,$.Z)({},C,this.props.modalConfig,{visible:this.props.visible,title:this.state.title,wrapClassName:[this.props.className,"cl-org-modal"],onCancel:this.onCancel,onOk:this.onOk}),r().createElement(ne.Provider,{value:this.state.contextData},r().createElement("div",{className:"cl-org"},r().createElement("div",{className:"cl-org-left"},this.props.visible?r().createElement("div",{className:"cl-org-left__top"},r().createElement(m.Z.Group,{compact:!0},r().createElement(s.Z,{className:"cl-org-left__top__select",value:oe,style:{width:80},onChange:this.handleSelectChange},r().createElement(c,{value:"user",disabled:u||l||R},t("authGroup.userLabel")),r().createElement(c,{value:"dept",disabled:n||R},t("setting.deptLabel")),r().createElement(c,{value:"post",disabled:!l&&(u||n)||a.length===1},t("common.post")),r().createElement(c,{value:"group",disabled:u||n||a.length===1||R},t("component.userGroup")),T?r().createElement(c,{value:"cluster"},t("component.useCluster")):null,L?r().createElement(c,{value:"class"},t("component.useClass")):null),r().createElement(A,{selectType:oe,onSearch:this.handleSearch,showCancel:de,disableChange:this.props.disableChange})),de?r().createElement("div",{className:"cl-org-left__top__cancel",onClick:this.handleCancel,style:{color:re}},t("common.cancel")):null):null,de?r().createElement(q,{isSingle:this.props.single,list:this.state.contextData.searchResult,userListType:oe,checkedAll:this.checkAllResult,hidePosts:le}):d),r().createElement("div",{className:"cl-org-right"},r().createElement(g,null)))))}}x.defaultProps={visible:!0,showUserCount:!0,displayType:["dept","group","post","cluster","class"],initData:{dept:[],post:[],group:[],user:[],cluster:[],classes:[]},reserveUser:[],onlyUser:!1,onlyDept:!1,onlyPost:!1,useGroups:!1,useClass:!1,asyncDeptTree:!0,userType:"active",single:!1,maxUserCount:Infinity,filterAuthOpen:!1,disableHidden:!1,beyondLimitTip:"",onOk:()=>{},modalConfig:{},maxDeptUserCount:0,onlyChoosePost:!1,scrollFlag:!1};var b=(0,te.Z)()(x)},99891:function(xe,ue,e){"use strict";var $=e(12924),h=e.n($),m=e(28216),M=e(91768),H=e(37055),F=e(10237),Y=e(60667);class E extends h().PureComponent{constructor(D){super(D);this.getWaterMarkText=S=>{var Z=this.props.userInfo,w=Z.jobNumber,O=localStorage.getItem("waterMarkPostName"),r=[],te=S.find(se=>se.type==="content_setting"),K=S.find(se=>se.type==="content_custom");return te.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),K.param.checked==="true"&&K.param.comment[0]!==""&&this.setState({commentText:K.param.comment[0]}),te.param.comment.indexOf("position")!==-1&&O&&O!==""&&r.push("".concat(O)),te.param.comment.indexOf("jobnumber")!==-1&&w&&w!==""&&r.push("".concat(w)),r.join("-")},this.getWaterMarkApplication=S=>{var Z=this.props.scenes,w=S.find(O=>O.type==="application_scenario");w.param.comment.indexOf(Z)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=S=>{var Z=S.find(w=>w.type==="dispersive");this.setState({isDispersive:Z.param.checked==="true"})},this.getDynamicSet=()=>{var S=H.ZP.advancedSetting.dynamicWaterMarkNew(),Z={access_token:window.localStorage.getItem("token")};F.WY.get({url:S,params:Z}).then(w=>{var O=JSON.parse(w.data.actions);this.setState({waterMarkText:this.getWaterMarkText(O),actions:O}),this.getWaterMarkApplication(O),this.getWaterIsDispersive(O)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var D=localStorage.getItem("waterMarkPostName");D===""||D===null?this.getPostName():this.getDynamicSet()}getPostName(){var D=H.ZP.advancedSetting.getPostName();F.WY.get({url:D}).then(S=>{localStorage.setItem("waterMarkPostName",S.data.post_names[0]||""),this.getDynamicSet()})}render(){var D=this.state,S=D.showWaterMark,Z=D.waterMarkCount,w=D.isUserName,O=D.isDispersive,r=D.waterMarkText,te=D.actions,K=D.commentText,se=this.props.userInfo,U=se.name,B=se.unionid,J=se.sourceType;return h().createElement("div",{className:"common-watermark"},S&&new Array(Z).fill(0).map((G,ae)=>h().createElement("div",{key:ae,className:"common-watermark-item ".concat(O?"isDispersive":"")},h().createElement("span",{className:"common-watermark-item-content"},K!==""&&h().createElement("span",{className:"item-part"},K),w&&h().createElement("span",null,K!==""&&h().createElement("span",null,"-"),h().createElement(Y.Z,{dataType:"userName",value:B,name:U,type:J})),h().createElement("span",{className:"item-part"},(w||K!=="")&&r!==""&&h().createElement("span",null,"-"),r)))))}}var i=s=>({userInfo:s.user});ue.Z=(0,m.$j)(i)((0,M.Z)()(E))},80430:function(xe,ue,e){"use strict";var $=e(12924),h=e.n($),m=e(60667),M=H=>{var F=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},Z=S.department_ids.split("/"),w=S.department_names.split("/"),O=Z.map((r,te)=>h().createElement(m.Z,{key:r,dataType:"departmentName",value:r,name:w[te],type:S.source_type}));return h().createElement(h().Fragment,null,O.map((r,te)=>h().createElement("span",{key:r},r,te===w.length-1?"":"/")))},Y=D=>h().createElement(m.Z,{dataType:"departmentName",value:D.department_id,name:D.department_name,type:D.source_type}),E=()=>{var D=H.list,S=D===void 0?[]:D,Z=H.isBlock;if(!S.length)return null;var w=S.map(O=>F(O));return w.length&&w.length>1?h().createElement(h().Fragment,null,w.map((O,r)=>Z?h().createElement("div",{key:O},O):h().createElement("span",{key:O},O,r===w.length-1?"":"\uFF0C"))):h().createElement(h().Fragment,null,w[0]||"")},i=()=>{var D=H.list,S=H.nameList,Z=H.sourceType,w=H.isBlock,O=D.map((r,te)=>Y({department_id:r,department_name:S[te],source_type:Z}));return h().createElement(h().Fragment,null,O.map((r,te)=>w?h().createElement("div",{key:r},r):h().createElement("span",{key:r},r,te===O.length-1?"":"\uFF0C")))},s=()=>H.displayAll?E():i();return s()};M.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},ue.Z=M},60667:function(xe,ue,e){"use strict";e.d(ue,{Z:function(){return E}});var $=e(33565),h=e(12924),m=e.n(h),M=e(28216);function H(i){var s=i.type,D=i.openid,S=i.from,Z=(0,h.useRef)(null);return(0,h.useLayoutEffect)(()=>{S==="vue"?window.parent.WWOpenData.bind(Z.current):WWOpenData.bind(Z.current)}),m().createElement("ww-open-data",{ref:Z,type:s,openid:D})}var F=i=>{var s=i.wxWorkApiFlag,D=i.appType,S=i.from,Z=(0,h.useState)(!1),w=(0,$.Z)(Z,2),O=w[0],r=w[1];(0,h.useEffect)(()=>{var se=localStorage.getItem("qyWechatBook");(D!=="wx_app"||s||se==="false"||S==="vue"||S==="taro")&&r(!0)},[s,D,S]);var te=(0,h.useCallback)(()=>{var se=i.type,U=i.value,B=i.name,J=B===void 0?"":B;switch(console.warn(i,"props"),se){case"wx_sync":{var G=i.dataType;return U?m().createElement(H,{from:S,type:G,openid:U}):J}default:return J}},[i]),K=()=>{var se=i.name,U=i.dataType,B=localStorage.getItem("qyWechatBook");if(U===""||B==="false")return se;if(S==="vue"||S==="taro")return te();switch(i.appType){case"wx_app":return te();default:return se}};return O?K():i.name};F.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var Y=i=>({appType:i.user.appType,wxWorkApiFlag:i.user.wxWorkApiFlag}),E=(0,M.$j)(Y)(F)},7584:function(xe,ue,e){"use strict";e.d(ue,{t:function(){return w}});var $=e(47673),h=e(4107),m=e(62029),M=e(33565),H=e(81211),F=e(12924),Y=e.n(F),E=e(80991),i=e(47444),s=e(60006),D=e.n(s),S=e(43859);function Z(O){var r=O.isPreview,te=O.char,K=O.displayType,se=O.width,U=O.LimitLength,B=O.showCount,J=O.value,G=O.valueSlice,ae=O.onChange,Q=O.disabledInput,X=(0,H.Z)(O,["isPreview","char","displayType","width","LimitLength","showCount","value","valueSlice","onChange","disabledInput"]),z=(0,F.useState)(()=>G?(0,i.B)({value:J,LimitLength:U,char:te}):O.defaultValue||""),he=(0,M.Z)(z,2),ne=he[0],fe=he[1],ve=(0,F.useRef)({evtName:""});(0,F.useEffect)(()=>{fe(G?(0,i.B)({value:J,LimitLength:U,char:te,disabledInput:Q}):J)},[J,U,te,G,Q]),(0,F.useEffect)(()=>{if(ve.current.evtName==="input"){K==="Custom"?O.onFieldChange(ne):ae(ne),O.onInput&&O.onInput(ne),ve.current.evtName="";return}G&&(K==="Custom"?O.onFieldChange(ne):ae(ne),O.onInput&&O.onInput(ne))},[ne,K,G]);var ge=_e=>{ve.current.evtName="input";var Oe=_e.target,be=Oe.value,Ze=(0,i.B)({value:be,LimitLength:U,char:te,disabledInput:Q});fe(Ze)},Ce=(0,F.useMemo)(()=>(0,i.S)({inputValue:ne,LimitLength:U,char:te,showCount:B,disabledInput:Q}),[ne,U,te,B,Q]),ye=Ce.dataCount,Te=Ce.usedLength,Ie=(0,F.useRef)(null);return(0,F.useEffect)(()=>{Ie&&Ie.current&&(O.autoFocus==="true"?Ie.current.focus():Ie.current.blur())},[O.autoFocus]),Y().createElement("div",{className:"".concat(D()["input-wrap"]," ").concat(Te&&U&&Te>U?D()["input-wrap-error"]:""),"data-count":ye,style:{width:se||void 0}},K==="Custom"?Y().createElement(h.Z,(0,m.Z)({},X,{value:ne,disabled:r,onInput:ge})):Y().createElement(h.Z,(0,m.Z)({},X,{value:ne,ref:Ie,disabled:r,onInput:ge})))}Z.defaultProps={valueSlice:!1,disabledInput:!0,onChange:()=>{},onInput:()=>{},char:!1,LimitLength:void 0,showCount:!1,displayType:"",width:void 0};var w=Z;ue.Z=(0,S.Z)((0,E.$j)(Z))},47444:function(xe,ue,e){"use strict";e.d(ue,{B:function(){return h},S:function(){return m}});var $=e(2396);function h(M){var H=M.value,F=M.LimitLength,Y=M.char,E=M.disabledInput,i=H&&typeof H=="string"?H:"",s=i;return E&&Y&&F&&(0,$.$s)(s)>F&&(s=i.substring(0,(0,$.rw)(i,F))),s}function m(M){var H=M.inputValue,F=M.LimitLength,Y=M.char,E=M.showCount,i="",s=H&&typeof H=="string"?H:"",D=Y?Math.ceil((0,$.$s)(s)):s.length;return E&&F&&(i="".concat(D,"/").concat(F)),{dataCount:i,usedLength:D}}},76466:function(xe,ue,e){"use strict";e.d(ue,{Z:function(){return ut}});var $=e(20228),h=e(11382),m=e(57663),M=e(71577),H=e(62029),F=e(57361),Y=e(9754),E=e.n(Y),i=e(12924),s=e.n(i),D=e(91512),S=e(68654),Z=e(91768),w=e(4412),O=e.n(w);class r extends s().Component{render(){var y=this.props.t;return s().createElement("div",{className:"net-preview"},s().createElement("div",{className:"net-preview-center"},s().createElement("img",{src:O(),alt:"picture"}),s().createElement("h2",null,y("localStorage.tip")),s().createElement("p",null,y("localStorage.banPreview"))))}}var te=(0,Z.Z)()(r),K=e(88986),se=e(34792),U=e(48086),B=e(28216),J=e(21594),G=e(41225),ae=e(10237),Q=(Ee,y)=>(0,K.Z)({id:Ee||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},y),X=Q;class z extends i.Component{constructor(){super(...arguments);this.setupPlayer=y=>{var g=this.props,v=g.onVideoReady,p=v===void 0?()=>{}:v,P=g.playerConfig,_=g.contentType;y&&y==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,K.Z)((0,K.Z)({},P),{},{contentType:_==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:P.source,autoplay:P.autoplay,width:P.width,id:P.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:A=>{A.on("sourceloaded",V=>{var N=V.paramData,q=N.desc,ee=N.definition;A.getComponent("VideoQuality")&&A.getComponent("VideoQuality").setCurrentQuality(q,ee,P.id)}),A.on("ready",()=>{p()}),this.playerInstance=A,this.setPlayerConfig()}}))}}componentDidUpdate(y){y.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(y){this.player&&this.player.seek(y)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(y){this.player.setSpeed(y)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var y=this.props,g=y.onPlay,v=g===void 0?()=>{}:g,p=y.onTimeUpDate,P=p===void 0?()=>{}:p,_=y.onEnd,A=_===void 0?()=>{}:_,V=y.onPause,N=V===void 0?()=>{}:V,q=y.onError,ee=q===void 0?()=>{}:q,W=this.playerInstance;W.on("play",()=>{v()}),W.on("pause",()=>{N()}),W.on("timeupdate",k=>{P(k)}),W.on("ended",()=>{A()}),W.on("error",(0,F.Z)(E().mark(function k(){return E().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:ee();case 1:case"end":return c.stop()}},k)})))}render(){var y=this.props.playerConfig;return s().createElement("div",{className:"common-video-player-container"},s().createElement("div",{id:y.id}))}}z.playerInstance=null,z.defaultProps={playerConfig:X(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var he=z,ne=(Ee,y)=>(0,K.Z)({id:Ee||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},y),fe=ne;class ve extends i.Component{constructor(){super(...arguments);this.setupPlayer=y=>{y&&y==="resetPlayer"&&this.player.dispose();var g=this.props,v=g.playerConfig,p=g.onVideoReady,P=p===void 0?()=>{}:p;this.player=new Aliplayer(v,_=>{_.on("sourceloaded",A=>{var V=A.paramData,N=V.desc,q=V.definition;_.getComponent("VideoQuality")&&_.getComponent("VideoQuality").setCurrentQuality(N,q,v.id)})}),this.player.on("ready",()=>{P()})},this.setPlayerConfig=()=>{var y=this.props,g=y.onPlay,v=g===void 0?()=>{}:g,p=y.onTimeUpDate,P=p===void 0?()=>{}:p,_=y.onEnd,A=_===void 0?()=>{}:_,V=y.onPause,N=V===void 0?()=>{}:V,q=y.onError,ee=q===void 0?()=>{}:q;this.player.on("play",()=>{v()}),this.player.on("pause",()=>{N()}),this.player.on("timeupdate",W=>{P(W)}),this.player.on("ended",()=>{A()}),this.player.on("error",(0,F.Z)(E().mark(function W(){return E().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:ee();case 1:case"end":return f.stop()}},W)})))},this.getPlayerContent=y=>{this.playerContainer=y}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(y){y.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(y){this.player.seek(y)}exitFull(){var y=this.player.fullscreenService;y&&y.isFullScreen&&y.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var y=this.props.playerConfig;return s().createElement("div",{className:"common-video-player-container"},s().createElement("div",{id:y.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}ve.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:fe()};var ge=ve;class Ce{constructor(y){this.hasCreated=!1,this.definition="",this.getQuality=y}createEl(y,g){var v=g._options&&g._options.language,p=g._el.id;this.isEn=v&&v==="en-us";var P=(0,J.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),_=(0,J.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),A=document.querySelector("#".concat(p," .prism-controlbar"));A.appendChild(P),y.appendChild(_)}setCurrentQuality(y,g,v){var p=document.querySelector("#".concat(v," .current-quality"));p.innerText=y,p.dataset.def=g,this.definition=g;var P=document.querySelector("#".concat(v," .quality-list")),_=P.querySelector(".current");_&&(_.className="");var A=P.querySelector('li[data-def="'.concat(g,'"]'));A&&(A.className="current")}created(y){this._urls=y._urls;var g=y._el.id,v=document.querySelector("#".concat(g," .current-quality")),p=document.querySelector("#".concat(g," .quality-list")),P=document.querySelector("#".concat(g," .quality-modal")),_=this._urls.map(N=>'<li data-def="'.concat(N.definition,'">').concat(N.desc,"</li>"));if(p.innerHTML=_.join(""),this.hasCreated==!1&&this.definition){var A=p.querySelector('li[data-def="'.concat(this.definition,'"]'));A.className="current"}this.hasCreated=!0;var V=null;v.onclick=()=>{p.style.display="block"},v.onmouseleave=()=>{V=setTimeout(()=>{p.style.display="none"},100)},p.onmouseenter=()=>{clearTimeout(V)},p.onmouseleave=()=>{p.style.display="none"},p.onclick=N=>{var q=N.target,ee=q.dataset.def,W=q.innerText;if(ee&&q.className!=="current"){var k=this._urls.find(f=>f.definition===ee);y.loadByUrl(k.Url,y.getCurrentTime(),!0,!0),this.setCurrentQuality(k.desc,k.definition,g),P.style.display="block",P.querySelector("span.current-quality-tag").innerText=k.desc}this.getQuality(ee,W)}}ready(y){var g=y._el.id,v=document.querySelector("#".concat(g," .quality-modal"));v.style.display="none";var p=document.querySelector("#".concat(g," .prism-setting-item.prism-setting-quality"));p&&p.classList.add("player-hidden")}}class ye{createEl(y,g){var v=g._el.id,p=(0,J.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),P=document.querySelector("#".concat(v," .prism-controlbar"));P.appendChild(p)}ready(y){var g=y._el.id,v=document.querySelector("#".concat(g," .current-rate")),p=document.querySelector("#".concat(g," .rate-list")),P=null,_=document.querySelector("#".concat(g," .prism-setting-item.prism-setting-speed"));_&&_.classList.add("player-hidden"),v.onclick=()=>{p.style.display="block"},v.onmouseleave=()=>{P=setTimeout(()=>{p.style.display="none"},100)},p.onmouseenter=()=>{clearTimeout(P)},p.onmouseleave=()=>{p.style.display="none"},p.onclick=A=>{var V=A.target,N=V.dataset.rate;if(N){if(y.setSpeed(N),V.className!=="current"){var q=p.querySelector(".current");q&&(q.className=""),V.className="current"}p.style.display="none",v.innerText="".concat(N,"x")}}}}var Te=e(69164),Ie=e(37055);function _e(Ee){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=Ie.ZP.local.getLocalUrl(Ee);return ae.WY.get({url:g,params:y})}var Oe=e(91648),be=e(18329),Ze=e(38642),We=e(9849),we=e(99891);class Ve extends i.Component{constructor(y){super();this.WaterMarkText=y,this.html=document.getElementsByClassName("common-watermark")}createEl(y){setTimeout(()=>{y.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var Ge=Ve,Ye=Ee=>({userInfo:Ee.user});class je extends i.Component{constructor(y){var g;super(y);g=this,this.onVideoReady=v=>{var p=this.props,P=p.resourceInfo,_=p.mode,A=p.autoPlay,V=p.t,N=P.storageType;v==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(v),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(_==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),_==="preview"&&A&&this.play.play()):N==="ALIBABA_PRIVATE"||N==="LOCAL"?this.updateSource("resetPlayer"):(ae.WY.logger({keyword:"video",moduleName:"video-play",msg:V("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var v=this.props,p=v.draggable,P=v.mode,_=v.t,A=v.studyInfo,V=v.needCurrentTime,N=v.onCurrentTime,q=N===void 0?()=>{}:N,ee=A.studyType,W=A.studyId,k=A.resourceId,f=this.state,c=f.showPreventHang,C=f.dragSwitch,x=f.showRandomAlert,b=f.randomAlertDialogVisible,I=this.playingVideo,d=I.oneTime,o=I.popupWindowCount,t=I.maxPlayTime,n=I.progress,u=I.auditionLength,l=I.auditionType,a=I.duration,T=I.recentStart,L=this.play.getCurrentTime(),R=(c==="OPEN"||x==="OPEN")&&o>0;if(V&&q(L),u>0&&l===2&&L>u&&(this.play.seek(u),U.default.warning(_("component.haveALookOverTip")),this.play.pause()),P==="learn"&&R){var re=a-d*o;if(o>0&&L>re)if(this.play.pause(),x==="OPEN"){if(!b){var j=(0,Oe.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:j},()=>{(0,G.qp)({popupId:j,planId:W,resourceId:k,type:"popup_start"})}),this.play.exitFull()}}else c==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((p||n===100)&&(L>0&&(this.playingVideo.recentStart=L),!((ee==="enterprise"||ee==="studyProject")&&C==="OPEN")))return!1;L>t?L-T>2?(this.playingVideo.recentStart=t,this.play.seek(t),U.default.warning(_("component.preventFastWatchTip"))):(this.playingVideo.recentStart=L,this.playingVideo.maxPlayTime=L):L>0&&L>this.playingVideo.recentStart&&(this.playingVideo.recentStart=L)},this.onPlay=()=>{var v=this.props,p=v.mode,P=v.onPlay,_=P===void 0?()=>{}:P;_();var A=this;p==="learn"&&!A.timer&&(A.timer=setTimeout(function V(){A.saveProgress(),clearTimeout(A.timer),A.timer=setTimeout(V,2e4)},2e4))},this.onPause=()=>{var v=this.props,p=v.studyInfo,P=v.mode,_=p.studyType;clearTimeout(this.timer),this.timer=null,P==="learn"&&(_==="platform"||_==="enterprise"||_==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var v=this.props.mode;v==="learn"&&this.saveProgress()},this.onError=v=>{var p=this.props.resourceInfo,P=p.storageType;(P==="ALIBABA_PRIVATE"||P==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var v=this.props.mode;this.initPlayVideo(),v==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var v=this.state,p=v.showPreventHang,P=v.showRandomAlert,_=this.props,A=_.t,V=_.playingVideo,N=_.studyInfo,q=_.autoPlay,ee=V.recentStart,W=V.duration,k=V.progress,f=N.studyType,c=(p==="OPEN"||P==="OPEN")&&(f==="studyTask"||f==="enterprise"||f==="studyProject")&&k<100;c?(P==="OPEN"?this.setState({promptMessage:A("component.preventAlertTip"),dialogVisible:!0}):p==="OPEN"&&this.setState({promptMessage:A("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):q&&(this.play.play(),Math.ceil(ee)<parseInt(W)&&this.play.seek(ee))},this.playerShowPreventHang=()=>{var v=this.playingVideo,p=v.duration,P=v.recentStart,_=0;p>0&&p<180?(_=p/2,this.playingVideo.oneTime=_,P>=_?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):p>=180&&p<600?(_=p/3,this.playingVideo.oneTime=_,P>=2*_?this.playingVideo.popupWindowCount=0:P>=_?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(_=p/4,this.playingVideo.oneTime=_,P>=3*_?this.playingVideo.popupWindowCount=0:P>=2*_?this.playingVideo.popupWindowCount=1:P>=_?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var v=this.props,p=v.playingVideo,P=v.mode;if(P==="learn"){this.playingVideo=(0,K.Z)({},p);var _=p.duration,A=p.progress;this.playingVideo.hasFinished=parseInt(A)===100,this.playingVideo.maxPlayTime=parseInt(_)*parseInt(A)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,F.Z)(E().mark(function v(){var p,P,_,A,V,N,q,ee,W,k,f,c,C,x,b,I,d,o,t,n,u,l,a,T;return E().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(p=g.state,P=p.speedSwitch,_=p.dragSwitch,A=p.whiteList,V=g.props,N=V.resourceInfo,q=V.showQuality,ee=N.contentType,W=N.storageType,k=N.source,f=N.playId,c=N.playerId,C=N.showFullScreen,x=C===void 0?!0:C,b=fe(c),b.components=[],I=typeof k=="object"&&k.hasOwnProperty("FD")&&k.FD.indexOf("m3u8")===-1,q&&I&&ee!=="mp3"&&(W&&W==="PUBLIC_CLOUD"||!W)&&b.components.push({name:"VideoQuality",type:Ce,args:[()=>{g.play.pause(),g.playingVideo.readyCount=0}]}),P==="OPEN"&&b.components.push({name:"VideoRate",type:ye}),x&&(d=b.skinLayout.find(re=>re.name==="controlBar"),d&&d.children.splice(d.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),b.components.push({name:"VideoWaterMark",type:Ge}),o=k.FD,t=k.OD,o.indexOf("http://")>-1&&(o=o.replace("http://","https://")),t.indexOf("http://")>-1&&(t=t.replace("http://","https://")),n=A.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",k.OD=t&&t.indexOf(n)>-1&&t.indexOf(".mp4")>-1?t:o,k.FD=o,u=typeof k!="string"?JSON.stringify(k):k,b.source=u,_==="OPEN"&&(b.disableSeek=!0),W!=="ALIBABA_PRIVATE"){R.next=32;break}return R.next=22,(0,G.BR)(f);case 22:if(l=R.sent,!l){R.next=28;break}b.source=l,b.vodRetry=1,R.next=30;break;case 28:return g.setState({showPrivateVodError:!0}),R.abrupt("return");case 30:R.next=38;break;case 32:if(W!=="LOCAL"){R.next=38;break}return R.next=35,_e(f);case 35:a=R.sent,T=a.data,T.code===0&&(b.source="".concat(k.FD,"?auth_key=").concat(T.data.auth_key),b.vodRetry=1);case 38:g.setState({playerConfig:b});case 39:case"end":return R.stop()}},v)})),this.updateSource=function(){var v=(0,F.Z)(E().mark(function p(P){var _,A,V,N,q,ee,W,k;return E().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(_=g.state.playerConfig,A=g.props.resourceInfo,V=A.storageType,N=A.source,q=A.playId,g.playingVideo.readyCount=0,V!=="ALIBABA_PRIVATE"){c.next=16;break}return c.next=7,(0,G.BR)(q);case 7:if(ee=c.sent,!ee){c.next=12;break}Object.assign(_,{source:ee,vodRetry:1}),c.next=14;break;case 12:return g.setState({showPrivateVodError:!0}),c.abrupt("return");case 14:c.next=22;break;case 16:if(V!=="LOCAL"){c.next=22;break}return c.next=19,_e(q);case 19:W=c.sent,k=W.data,k.code===0&&Object.assign(_,{source:"".concat(N.FD,"?auth_key=").concat(k.data.auth_key),vodRetry:1});case 22:g.setState({playerConfig:_},()=>{g.play.setupPlayer(P)});case 23:case"end":return c.stop()}},p)}));return function(p){return v.apply(this,arguments)}}(),this.saveProgress=()=>{var v=this.props,p=v.studyInfo,P=v.userInfo,_=P.isLogin,A=P.enterpriseId,V=P.id,N=this.playingVideo,q=N.recentStart,ee=N.duration,W=N.hasFinished,k=Math.ceil(+q);k>Number(ee)&&(k=Number(ee));var f=Math.ceil(k/+ee*100);if((f>100||W)&&(f=100),_){var c=this.playingVideo,C=c.auditionType,x=c.auditionLength;if(x>0&&C===2){var b=Math.ceil(x/ee*100);b<=f&&(f=b,k=x)}(0,G.sH)({studyInfo:p,progress:f,recent_start:k,enterpriseId:A,userId:V}).then(I=>{I&&I.data&&(0,Te.Z)(I.data.integral_info||"")})}},this.getInfoFromSettings=(0,F.Z)(E().mark(function v(){var p,P,_,A,V,N,q,ee,W;return E().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return p=g.props.studyInfo,P=p.studyType,_=p.projectId,f.next=4,(0,G.Gw)();case 4:if(A=f.sent,V=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],N=(0,J.RG)(A,V),P!=="studyProject"){f.next=14;break}return f.next=10,(0,We.NU)({id:_});case 10:q=f.sent,ee=q.status,W=q.data,ee===200&&(N.showPreventHang=W.prevent_cut_screen?"OPEN":"CLOSED",N.speedSwitch=W.speed_play?"OPEN":"CLOSED",N.dragSwitch=W.prevent_drag?"OPEN":"CLOSED");case 14:g.setState(N,()=>{g.dealVideoConfig()});case 15:case"end":return f.stop()}},v)})),this.dealAudioPoster=()=>{var v=this.props.resourceInfo.contentType,p=v===void 0?"":v;this.setState({showAudioPoster:p==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var v=this.state.showAudioPoster,p=this.play.playerContainer;v&&p&&(p.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),p.style.backgroundSize="cover")},this.getPlayInstance=v=>{this.play=v},this.handleOk=()=>{this.setState({dialogVisible:!1});var v=this.state.btnType,p=this.playingVideo.recentStart,P=this.props.t;v==="know"?(this.play.play(),this.play.seek(p),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:P("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,F.Z)(E().mark(function v(){var p,P,_,A;return E().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:p=g.props.studyInfo,P=p.studyId,_=p.resourceId,A=g.state.randomAlertUUID,(0,G.qp)({popupId:A,planId:P,resourceId:_,type:"popup_end"}).then(()=>{g.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),g.playingVideo.popupWindowCount-=1,g.play.play();case 6:case"end":return N.stop()}},v)})),this.renderFooter=()=>{var v=this.state.btnType,p=this.props.t;return s().createElement(M.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(v)},p(v==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var v=this.props.t;return s().createElement(M.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},v("common.ok"))},this.state={playerConfig:fe(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:y.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:y.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:y.t("component.randomAlertTip"),randomAlertModal:{title:y.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,Ze.UI)("CL_VIDEO_BAIYING_COM_CN")}},y.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(y){var g=typeof y.resourceInfo.source!="string"?JSON.stringify(y.resourceInfo.source):y.resourceInfo.source,v=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;g!==v&&v!==""&&this.initInfo()}componentWillUnmount(){var y=this.props.mode;y==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var y=this.state,g=y.playerConfig,v=y.showPrivateVodError,p=y.dialogVisible,P=y.dialogModal,_=y.promptMessage,A=y.randomAlertDialogVisible,V=y.randomAlertModal,N=y.randomAlertTip,q=y.encryptedSwitch,ee=this.props,W=ee.resourceInfo,k=ee.t,f=q==="OPEN"?he:ge;return s().createElement(i.Fragment,null,s().createElement(f,(0,H.Z)({ref:this.getPlayInstance},W,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:g,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),s().createElement(be.ZP,(0,H.Z)({visible:p},P,{footer:this.renderFooter()}),s().createElement("div",{className:"video-business-prompt"},_)),s().createElement(be.ZP,(0,H.Z)({visible:A},V,{footer:this.renderRandomFooter()}),s().createElement("div",{className:"video-player-container__prompt"},N)),v&&s().createElement("div",{className:"video-business-vod-error"},k("privateCloud.docReadError")),s().createElement(we.Z,{scenes:"video"}))}}var qe=(0,B.$j)(Ye,null,null,{forwardRef:!0})((0,Z.Z)("translation",{withRef:!0})(je)),De=e(94184),me=e.n(De),Ae=e(84874),Se=Ee=>({userInfo:Ee.user}),Le={getPravateDocUrl:Ie.ZP.localStorage.getPravateDocUrl};function Re(Ee){return JSON.stringify(Ee,(y,g)=>(typeof g=="function"&&(g=g.toString()),g))}function $e(Ee){var y=parseInt(parseInt(Ee,10)/60,10),g=parseInt(parseInt(Ee,10)%60,10);return y<10&&(y="0".concat(y)),g<10&&(g="0".concat(g)),"".concat(y,":").concat(g)}class ze extends i.Component{constructor(y){var g;super(y);g=this,this.messageFun=v=>{var p=this.props,P=p.docType,_=p.progress,A=p.studyTimeLimit,V=p.studyTime,N=this.state,q=N.jumpPageTag,ee=N.totalTime,W=N.timeRemaining,k=this.state.previewDocData,f={};try{f=JSON.parse(v.data)}catch(c){return}switch(f.action){case"preview.ready":this.initDocData();break;case"preview.meta":k.totalPage=f.data.pc||1,k.currentPage=1,this.setState({previewDocData:k},()=>{this.reportStatusInterval()}),A>0?(this.saveProgress(_,V||"1",f.data.pc||1),this.setState({showCountDownContainer:!0})):P==="xlsx"||P==="xls"||k.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(_,V||"1",f.data.pc||1),A>0&&_<100?(this.setState({showCountDown:!0}),P==="xlsx"||P==="xls"?ee=A:ee=A*f.data.pc,W=parseInt(ee*(1-_/100),10),this.setState({timeRemaining:W,totalTime:ee},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(q){q=!1,this.setState({jumpPageTag:q});return}k.currentPage=f.data.pageIndex+1,this.setState({previewDocData:k}),A||this.saveProgress(Math.ceil(k.currentPage/k.totalPage*100),k.currentPage,k.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":U.default.error(f.data.result);break;default:break}},this.initDocData=(0,F.Z)(E().mark(function v(){var p,P,_,A,V,N,q,ee,W,k,f,c,C,x;return E().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(g.setState({isShowPrivateError:!1}),p=g.props,P=p.docType,_=p.userInfo,A=p.documentWatermarkSettings,V=p.storageType,N=p.privateDocId,q=_.name,ee=_.jobNumber,W=_.position,k="",f={},V!=="ALIBABA_PRIVATE"){I.next=18;break}return I.prev=6,c=Le.getPravateDocUrl(N),I.next=10,ae.WY.get({url:c});case 10:C=I.sent,x=C.data,x.code===0?f=x.data||{}:g.setState({isShowPrivateError:!0}),I.next=18;break;case 15:I.prev=15,I.t0=I.catch(6),g.setState({isShowPrivateError:!0});case 18:if(A.indexOf("name")>-1&&(k="".concat(k+q," ")),A.indexOf("position")>-1&&(k="".concat(k+W," ")),A.indexOf("jobnumber")>-1&&(k+=ee),k.length>0?window.sendMessage("preview.init",(0,K.Z)({wmType:1,wmValue:k,wmColor:"rgba(192, 192, 192, 0.4)"},f)):window.sendMessage("preview.init",(0,K.Z)({},f)),P!=="xlsx"&&P!=="ppt"&&P!=="pptx"&&P!=="xls"?g.setState({pageOperateContainerVisible:!0}):g.setState({pageOperateContainerVisible:!1}),!(P==="ppt"||P==="pptx")){I.next=29;break}I.t1=window,I.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},I.t1.sendMessage.call(I.t1,"setConfig",I.t2),I.next=32;break;case 29:I.t3=window,I.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},I.t3.sendMessage.call(I.t3,"setConfig",I.t4);case 32:case"end":return I.stop()}},v,null,[[6,15]])})),this.handleJumpPage=v=>{var p=this.state.previewDocData;p.currentPage=v,this.setState({jumpPageTag:!0,previewDocData:p});var P=v/p.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(P),v,p.totalPage),window.sendMessage("logic.toPage",{pageIndex:v-1})},this.redirectPage=()=>{var v=this.props,p=v.studyTimeLimit,P=v.studyTime,_=0;p===0&&(_=P-1>0?P-1:0),window.sendMessage("logic.toPage",{pageIndex:_})},this.docCountDown=()=>{var v=this.state.timeRemaining,p=this.state,P=p.totalTime,_=p.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{v-=1,this.setState({timeRemaining:v}),v<1&&(this.saveProgress(100,0,_.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var A=(P-v)/P*100;v<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(A),v,_.totalPage)},2e4)},this.saveProgress=(v,p,P)=>{var _=this.props.onSaveProgress;_&&_(v,p,P)},this.reportStatusInterval=()=>{var v=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var p=this.state.previewDocData.currentPage;v&&v({currentPage:p})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=v=>{this.docReader=v},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(y,g)=>{var v=this.docReader.contentWindow;v.postMessage(Re({action:y,data:g}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var y=this.props,g=y.t,v=y.storageType,p=y.privateDocId,P=this.props.aliUrl,_=this.state,A=_.previewDocData,V=_.pageOperateContainerVisible,N=_.timeRemaining,q=_.showCountDown,ee=_.showCountDownContainer,W=_.showPageOperateContainer,k=_.isShowPrivateError;return v==="ALIBABA_PRIVATE"&&(P="https://preview.imm.aliyuncs.com/index.html?docId=".concat(p)),s().createElement("div",{className:"doc-reader-container"},s().createElement("div",{className:"ali-doc-container",style:{paddingBottom:V?"56px":"0"}},s().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:P,id:"aliyunPreview",ref:this.dealPreviewRef}),ee?s().createElement("div",{className:"ali-doc-container__countdown"},q?s().createElement("div",null,s().createElement(Ae.Z,{iconClass:"iconf-tipe",size:"16px"}),g("component.docStillStudy"),s().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",$e(N)," "),g("component.canDone")):s().createElement("div",null,s().createElement(Ae.Z,{iconClass:"iconf-tipe",size:"16px"}),g("component.docHasFinish"))):null,V?s().createElement("div",{className:"ali-doc__operate"},s().createElement("div",{className:me()(["ali-doc__operate__content",W?"":"ali-doc__operate__hide-content"])},s().createElement("div",{className:"ali-doc__operate__pagination"},s().createElement("div",{className:"ali-doc__operate__pagination__pages"},A.currentPage," / ",A.totalPage),s().createElement("div",{className:"ali-doc__operate__pagination__toggle"},s().createElement("div",{className:"ali-doc__operate__pagination__choose"},s().createElement("span",null,g("component.choosePage"),s().createElement(Ae.Z,{iconClass:"iconf-arrow-under",size:"14px"})),s().createElement("div",{className:"ali-doc__operate__page-list-container"},s().createElement("div",{className:"ali-doc__operate__choose-page"},g("component.fastChoosePage")),s().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:A.totalPage})).map((f,c)=>s().createElement("li",{key:f,onClick:()=>this.handleJumpPage(c+1)},c+1))))),s().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},g("common.collapse"))))),s().createElement("div",{className:me()("ali-doc__operate__unfold",W?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},g("common.expand"))):null,k&&s().createElement("div",{className:"ali-doc__error"},g("privateCloud.docReadError"))),s().createElement(we.Z,{scenes:"document"}))}}ze.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var st=(0,B.$j)(Se)((0,Z.Z)()(ze)),Dt=Ee=>({userInfo:Ee.user}),ht="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),mt="".concat("https://doc.coolcollege.cn");class vt extends s().Component{constructor(y){var g;super(y);g=this,this.onSaveProgress=(v,p,P)=>{var _=this.props,A=_.mode,V=_.studyInfo,N=_.userInfo,q=N.enterpriseId,ee=N.id;A==="learn"&&(0,G.sH)({studyInfo:V,progress:v,page_count:P,recent_start:p,enterpriseId:q,userId:ee}).then(W=>{W&&W.data&&(0,Te.Z)(W.data.integral_info||"")})},this.messageFun=function(){var v=(0,F.Z)(E().mark(function p(P){var _,A,V,N,q,ee;return E().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(P.data!=="local-resource"){k.next=9;break}if(_=g.props.resourceInfo,A=_.storageType,V=_.playId,!(A&&A==="LOCAL")){k.next=9;break}return k.next=6,_e(V);case 6:N=k.sent,q=N.data,q.code===0&&(ee=document.getElementById("local-resource-box"),ee.contentWindow.postMessage({msg:"local-auth-key",authKey:q.data.auth_key},"*"));case 9:case"end":return k.stop()}},p)}));return function(p){return v.apply(this,arguments)}}(),this.getInfoFromSettings=(0,F.Z)(E().mark(function v(){var p,P,_;return E().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,G.Gw)();case 2:p=V.sent,P=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],_=(0,J.RG)(p,P),g.setState(_,()=>{g.initDocPage(g.props)});case 6:case"end":return V.stop()}},v)})),this.initDocPage=(0,F.Z)(E().mark(function v(){var p,P,_,A,V,N,q,ee,W,k,f,c,C,x,b,I,d,o,t,n,u,l,a,T,L,R,re,j,de,oe,le,ie,ce,ke,Ue=arguments;return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(p=Ue.length>0&&Ue[0]!==void 0?Ue[0]:{},P=p.resourceInfo,_=p.mode,A=p.studyInfo,V=p.userInfo,N=g.state.documentPlayerMode,q=P.docType,ee=P.docTitle,W=P.url,k=P.studyTimeLimit,f=P.studyTime,c=P.aliUrl,C=P.progress,x=P.storageType,b=P.playId,I=A.studyType,d=A.courseId,o=A.studyId,t=A.resourceId,n=V.enterpriseId,u=V.id,l=V.isLogin,a=V.token,T=N==="compat"&&c.indexOf("preview.imm.aliyun")>-1||x==="ALIBABA_PRIVATE",!T){pe.next=11;break}g.setState({showAliReader:!0}),pe.next=31;break;case 11:if(L=(0,G.sH)({enterpriseId:n,userId:u,token:a,studyInfo:A},!0),R=I==="studyTask"?2:1,re=Ie.ZP.SaveProgress.reportStatusInterval(A),j={isSaveProgress:l&&_==="learn"&&L,isSaveRecord:!1,access_token:a,userId:u,hostUrl:ht,courseId:d,resourceId:t,courseType:1,planId:o,studyTimeLimit:k,studyTime:f,saveProgressUrl:L,type:"eapp",progress:C,saveRecordProgressUrl:re,actionType:R},!(x&&x==="LOCAL")){pe.next=26;break}return pe.next=18,_e(b);case 18:if(de=pe.sent,oe=de.data,oe.code!==0){pe.next=25;break}j.auth_key=oe.data.auth_key,j.url=W,pe.next=26;break;case 25:return pe.abrupt("return");case 26:le=JSON.stringify(j),ie="".concat(ee,".").concat(q).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),ce="".concat(mt,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(le),"&furl=").concat(W,"?attname=").concat(ie),x&&x==="LOCAL"&&(ke="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),ce="".concat(ke,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(le),"&furl=").concat(W,"?attname=").concat(ie)),g.setState({encodeUrl:ce});case 31:case"end":return pe.stop()}},v)})),this.handleReportStatusInterval=v=>{var p=v.currentPage,P=this.props,_=P.resourceInfo,A=P.mode,V=P.studyInfo,N=P.userInfo,q=_.type,ee=V.courseId,W=V.studyId,k=V.resourceId,f=N.enterpriseId,c=N.id,C=N.isLogin,x="",b="",I=0,d=!1;switch(q){case"enterprise":I=1,d=!0;break;case"study":x=W,I=2,d=!0;break;case"project":b=W,I=1,d=!0;break;default:break}if(!(!d||!C)){var o={plan_id:x,enterprise_id:f,user_id:c,course_id:ee,project_course_id:b,resource_id:k,current_page:p,action_type:I,send_time:Date.parse(new Date)};A==="learn"&&(0,G.Xc)(V,o)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(y){this.initDocPage(y)}render(){var y=this.props.resourceInfo,g=this.state,v=g.encodeUrl,p=g.documentWatermarkSettings,P=g.showAliReader,_=y.docType,A=y.type,V=y.studyTimeLimit,N=y.studyTime,q=y.aliUrl,ee=y.progress,W=y.storageType,k=y.playId;return P?s().createElement(st,{privateDocId:k,storageType:W,aliUrl:q,docType:_,progress:ee,studyTime:N,studyTimeLimit:V,documentWatermarkSettings:p,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:A}):s().createElement("div",{className:"doc-reader-container"},s().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:v,frameBorder:"0",allowFullScreen:!0}),s().createElement(we.Z,{scenes:"document"}))}}var He=(0,B.$j)(Dt)(vt),kt=e(38979),gt=e(90706),et=e(12968),Tt=e(44208),nt=e(60667),ft=Ee=>({userInfo:Ee.user});class it extends s().Component{constructor(){var y;super(...arguments);y=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var g=this.props,v=g.studyInfo,p=g.mode,P=g.userInfo,_=P.enterpriseId,A=P.id;p==="learn"&&(0,J.Gp)({studyInfo:v,enterpriseId:_,userId:A})},this.getInfoFromSettings=(0,F.Z)(E().mark(function g(){var v,p,P;return E().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,G.Gw)();case 2:v=A.sent,p=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],P=(0,J.RG)(v,p),y.setState(P,()=>{y.renderWatermark()});case 6:case"end":return A.stop()}},g)})),this.renderWatermark=()=>{var g=this.props.userInfo,v=this.state.imageWatermark,p=g.name,P=g.unionid,_=g.sourceType,A=g.jobNumber,V=g.position,N=[];v.indexOf("name")>-1&&N.push(s().createElement(nt.Z,{dataType:"userName",value:P,name:p,type:_})),v.indexOf("position")>-1&&N.push(s().createElement("span",null,V)),v.indexOf("jobnumber")>-1&&N.push(s().createElement("span",null,A)),v.length>0&&this.setState({watermark:N.map((q,ee)=>s().createElement("span",{key:ee},q))})},this.handleError=g=>{var v=this.props.onError;v&&v(g)},this.getImageUrl=(0,F.Z)(E().mark(function g(){var v,p,P,_,A,V,N,q,ee,W;return E().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(v=y.props,p=v.resourceInfo,P=v.t,_=p.playId,A=p.url,V=p.storageType,N=A,!V){f.next=21;break}if(V!=="ALIBABA_PRIVATE"){f.next=15;break}return f.next=7,(0,G.J7)(_);case 7:if(q=f.sent,!q){f.next=12;break}N=q,f.next=13;break;case 12:return f.abrupt("return",U.default.info(P("privateCloud.docReadError")));case 13:f.next=21;break;case 15:if(V!=="LOCAL"){f.next=21;break}return f.next=18,_e(_);case 18:ee=f.sent,W=ee.data,W.code===0&&(N="".concat(A,"?auth_key=").concat(W.data.auth_key));case 21:y.setState({imageUrl:[N]},()=>{var c=y.state.imageUrl,C="image-business",x=document.querySelectorAll(".".concat(C,"-image img"));x.forEach((b,I)=>{b.onerror=()=>{y.handleError(c[I])}})});case 22:case"end":return f.stop()}},g)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var y="image-business",g=this.props.resourceInfo,v=g.preview,p=v===void 0?!1:v,P=this.state,_=P.watermark,A=P.imageUrl;return s().createElement("div",{className:y},s().createElement(we.Z,{scenes:"image"}),s().createElement(gt.Z,{className:"".concat(y,"-carousel")},A.map((V,N)=>s().createElement("div",{className:"".concat(y,"-image"),key:N.toString()},s().createElement(Tt.Z,{src:V,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:p})))))}}it.defaultProps={prefixCls:"watch-image-page"};var yt=(0,B.$j)(ft)((0,Z.Z)()(it)),Qe=Ee=>({userInfo:Ee.user});class ot extends s().Component{constructor(){var y;super(...arguments);y=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,F.Z)(E().mark(function g(){var v,p,P;return E().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,G.Gw)();case 2:v=A.sent,p=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],P=(0,J.RG)(v,p),y.setState(P,()=>{y.renderWatermark()});case 6:case"end":return A.stop()}},g)})),this.renderWatermark=()=>{var g=this.props.userInfo,v=this.state.htmlWatermark,p=g.name,P=g.unionid,_=g.sourceType,A=g.jobNumber,V=g.position,N=[];v.indexOf("name")>-1&&N.push(s().createElement(nt.Z,{dataType:"userName",value:P,name:p,type:_})),v.indexOf("position")>-1&&N.push(s().createElement("span",null,V)),v.indexOf("jobnumber")>-1&&N.push(s().createElement("span",null,A)),v.length>0&&this.setState({watermark:N.map((q,ee)=>s().createElement("span",{key:ee},q))})},this.saveProgress=()=>{var g=this.props,v=g.studyInfo,p=g.mode,P=g.userInfo,_=P.enterpriseId,A=P.id;p==="learn"&&(0,J.Gp)({studyInfo:v,enterpriseId:_,userId:A})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var y="html-business",g=this.props.resourceInfo,v=g.url,p=this.state.watermark;return s().createElement("div",{className:y},s().createElement("div",{className:"".concat(y,"__html-watermark")},p),s().createElement("iframe",{title:"html",className:"".concat(y,"_iframe"),src:v}))}}var Ct=(0,B.$j)(Qe)((0,Z.Z)()(ot)),lt=e(57068),ct=e(1164),dt=Ee=>({userInfo:Ee.user});class pt extends s().PureComponent{constructor(){super(...arguments);this.getHost=y=>{var g=y.split("//"),v=g[1].split("/");return[g[0],v[0]].join("//")},this.getScormUrl=()=>{var y=this.props,g=y.studyInfo,v=y.mode,p=y.userInfo,P=y.resourceInfo,_=y.from,A=p.enterpriseId,V=p.id,N=P.url,q=this.getHost(N);if(v==="learn"){var ee=(0,K.Z)({userId:V,enterpriseId:A,access_token:localStorage.token,from:_,scormUrl:encodeURIComponent(N),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},g);return"".concat(q).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(lt.stringify(ee))}return"".concat(q,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(N))},this.handleOpenScormLink=y=>{ct.Z.targetTo({path:y,isExternalLink:!0})}}render(){var y=this.props.t,g="scorm-business",v=this.getScormUrl(),p=(0,Ze.UI)("SCORM_EXTERNAL_WATCH");return s().createElement("div",{className:g},p?s().createElement("div",{className:"".concat(g,"_scorm")},s().createElement("img",{className:"".concat(g,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),s().createElement("h5",null,y("resourcePlay.scormTip")),s().createElement(M.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(v)},y("resourceLibrary.h5LinkPlayButton"))):s().createElement("iframe",{title:"scorm",className:"".concat(g,"_iframe"),src:v}))}}var xt=(0,B.$j)(dt)((0,Z.Z)()(pt));class Et extends s().Component{render(){var y=this.props,g=y.visible,v=y.title,p=y.onCancel,P=y.t,_=s().createElement("span",null,v);return s().createElement(be.ZP,{visible:g,title:_,onCancel:p,footer:null},s().createElement("div",{className:"ban-preview"},s().createElement("div",{className:"ban-preview-center"},s().createElement("img",{src:O(),alt:"picture"}),s().createElement("h2",null,P("localStorage.tip")),s().createElement("p",null,P("localStorage.banPreview"))),s().createElement("hr",null),s().createElement(M.Z,{type:"primary",className:"know",onClick:p},P("localStorage.onKnow"))))}}var Pt=(0,Z.Z)()(Et);class It extends i.Component{constructor(){var y;super(...arguments);y=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=g=>{var v=this.props.previewInfo,p=v.onCancel;this.onCancel(),p(g)},this.onGetVideoBusiness=g=>{var v=this.props.onRef,p=v===void 0?()=>{}:v;this.videoBusiness=g,p(g)},this.onFullScreen=()=>{var g=this.state.fullScreen;this.setState({fullScreen:!g})},this.handleJudgeNetwork=(0,F.Z)(E().mark(function g(){var v,p,P,_,A,V,N,q,ee,W,k,f=arguments;return E().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(v=f.length>0&&f[0]!==void 0?f[0]:null,p=y.props,P=p.resourceInfo,_=p.watchType,A=P.storageType,V=P.playId,N=P.originUrl,q=_==="image"||_==="video"||_==="doc",ee=null,v?ee=v:N?ee=N:ee=P.url,!(q&&ee&&V&&A&&A==="LOCAL")){C.next=22;break}return C.prev=7,C.next=10,(0,G.NY)(V);case 10:return W=C.sent,C.next=13,(0,G.Hy)(ee,W);case 13:k=C.sent,k?y.setState({showBan:"no"}):y.setState({showBan:"yes"}),C.next=20;break;case 17:C.prev=17,C.t0=C.catch(7),y.setState({showBan:"yes"});case 20:C.next=23;break;case 22:y.setState({showBan:"no"});case 23:case"end":return C.stop()}},g,null,[[7,17]])})),this.renderOuter=()=>{var g=this.props,v=g.prefixCls,p=g.watchType,P=g.onCurrentTime,_=P===void 0?()=>{}:P;return s().createElement("div",{className:"".concat(v,"-outer")},p==="video"&&s().createElement(qe,(0,H.Z)({onCurrentTime:_,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),p==="doc"&&s().createElement(He,this.props),p==="image"&&s().createElement(yt,(0,H.Z)({onError:this.handleJudgeNetwork},this.props)),p==="html"&&s().createElement(Ct,this.props),p==="scorm"&&s().createElement(xt,this.props))},this.renderFooter=()=>{var g=this.props,v=g.resourceInfo.storageType,p=g.t,P=this.state.showBan,_=P!==""&&P==="yes";return v&&v!=="PUBLIC_CLOUD"&&_?s().createElement(M.Z,{type:"primary",className:"know",onClick:this.onCancelModel},p("localStorage.onKnow")):null}}componentDidMount(){var y=this.props.mode;y==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(y){y.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var y=this.state,g=y.showBan,v=y.fullScreen,p=this.props,P=p.mode,_=p.previewWay,A=p.previewInfo,V=p.prefixCls,N=p.t,q=p.showEnlarge,ee=p.footer,W=ee===void 0?null:ee,k=A.visible,f=A.destroyOnClose,c=A.title,C=g!==""&&g==="yes",x=g!==""&&g==="no";return s().createElement(i.Fragment,null,P==="preview"&&_==="popups"&&s().createElement(be.ZP,{destroyOnClose:f,visible:k,title:c,onCancel:this.onCancelModel,footer:W||this.renderFooter(),wrapClassName:"".concat(V,"-resource ").concat(v?"".concat(V,"-full"):"")},q&&s().createElement("div",{className:"".concat(V,"-resource-out-icon"),onClick:this.onFullScreen},v?s().createElement(D.Z,{className:"".concat(V,"-resource-icon")}):s().createElement(S.Z,{className:"".concat(V,"-resource-icon")})),s().createElement("div",{className:"".concat(V,"-inner")},!k&&s().createElement(h.Z,{size:"large"}),k&&x&&this.renderOuter(),C&&s().createElement(te,null))),(P==="learn"||_==="page")&&x&&this.renderOuter(),(P==="learn"||_==="page")&&s().createElement(Pt,{visible:C,title:c||N("questionn.warmHint"),onCancel:this.onCancel}))}}It.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var ut=(0,Z.Z)("translation",{withRef:!0})(It)},41225:function(xe,ue,e){"use strict";e.d(ue,{Hy:function(){return F},NY:function(){return Y},Gw:function(){return E},sH:function(){return D},BR:function(){return i},qp:function(){return S},Xc:function(){return Z},J7:function(){return s}});var $=e(57361),h=e(9754),m=e.n(h),M=e(10237),H=e(37055),F=function(){var w=(0,$.Z)(m().mark(function O(){var r,te,K,se,U,B,J,G=arguments;return m().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return r=G.length>0&&G[0]!==void 0?G[0]:"",te=G.length>1&&G[1]!==void 0?G[1]:"",K="",r.startsWith("http")?(se=r.split("//")[1].trim(),U=se.split("/")[0],K="https://".concat(U,"/cms/ticket")):(B=r.split("/")[0],K="https://".concat(B,"/cms/ticket")),Q.prev=4,Q.next=7,M.ZQ.get({url:K,params:{ticket:te}});case 7:if(J=Q.sent,!(J.status===200||J.status===403)){Q.next=10;break}return Q.abrupt("return",Promise.resolve(!0));case 10:return Q.abrupt("return",Promise.resolve(!1));case 13:return Q.prev=13,Q.t0=Q.catch(4),Q.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return Q.stop()}},O,null,[[4,13]])}));return function(){return w.apply(this,arguments)}}(),Y=function(){var w=(0,$.Z)(m().mark(function O(r){var te,K;return m().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,M.ZQ.get({url:H.ZP.local.getTicket(r)});case 2:if(te=U.sent,K=te.data,K.code!==0){U.next=6;break}return U.abrupt("return",Promise.resolve(K.data.ticket));case 6:return U.abrupt("return",Promise.resolve(""));case 7:case"end":return U.stop()}},O)}));return function(r){return w.apply(this,arguments)}}(),E=function(){var w=(0,$.Z)(m().mark(function O(){var r;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,M.WY.get({url:H.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return r=K.sent,K.abrupt("return",r.data.list);case 4:case"end":return K.stop()}},O)}));return function(){return w.apply(this,arguments)}}(),i=function(){var w=(0,$.Z)(m().mark(function O(r){var te,K,se;return m().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,M.WY.get({url:H.ZP.localStorage.getPravateVideoUrl(r)});case 2:if(te=B.sent,te.data.code!==0){B.next=6;break}return K=te.data.data.videoPlayInfo,se=K===void 0?"":K,B.abrupt("return",se);case 6:return B.abrupt("return","");case 7:case"end":return B.stop()}},O)}));return function(r){return w.apply(this,arguments)}}(),s=function(){var w=(0,$.Z)(m().mark(function O(r){var te,K,se;return m().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return te=H.ZP.localStorage.getPravateDocUrl(r),B.prev=1,B.next=4,M.WY.get({url:te});case 4:if(K=B.sent,se=K.data,!(se.code===0&&se.data)){B.next=8;break}return B.abrupt("return",se.data.docResourceDownloadUrl||"");case 8:return B.abrupt("return","");case 11:return B.prev=11,B.t0=B.catch(1),B.abrupt("return","");case 14:case"end":return B.stop()}},O,null,[[1,11]])}));return function(r){return w.apply(this,arguments)}}(),D=function(O){var r=O.studyInfo,te=O.progress,K=O.recent_start,se=O.page_count,U=O.enterpriseId,B=O.userId,J=O.token,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ae,Q=r.studyType;if(Q==="studyTask"&&(ae=H.ZP.SaveProgress.studySaveProgress(r)),(Q==="course"||Q==="enterprise")&&(ae=H.ZP.SaveProgress.enterpriseCourseSaveProgress(r)),Q==="studyProject"&&(ae=H.ZP.SaveProgress.projectSaveProgress(r)),Q==="platform"&&(ae="".concat(H.ZP.SaveProgress.platformCourseSaveProgress(r))),(G||Q==="platform")&&(ae+="?enterprise_id=".concat(U,"&user_id=").concat(B)),G)return ae+="&access_token=".concat(J||localStorage.getItem("token")),ae;var X={progress:te,recent_start:K,tempTime:Date.parse(new Date)};return se&&(X.page_count=se),r.evaluationId&&(X.evaluation_id=r.evaluationId),M.WY.post({url:ae,data:X})},S=w=>{var O=w.popupId,r=w.planId,te=w.resourceId,K=w.type;return M.WY.post({url:H.ZP.TaskStudyRecord.setRandomPopupRecord(r),data:{course_id:te,terminal_type:"PC",popup_id:O,type:K}})},Z=(w,O)=>{var r=H.ZP.SaveProgress.reportStatusInterval(w);return M.WY.post({url:r,data:O})}},21594:function(xe,ue,e){"use strict";e.d(ue,{pu:function(){return H},RG:function(){return F},Gp:function(){return Y},O8:function(){return E}});var $=e(88986),h=e(69164),m=e(38642),M=e(41225),H=i=>{var s="";switch(i){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":s="studyTask";break;case"enterprise":s="enterprise";break;case"courseProject":s="studyProject";break;case"platform":case"purchased":s="platform";break;default:break}return s},F=(i,s)=>{var D={};return s.forEach(S=>{var Z=i.find(K=>K.type===S.type);if(Z)if(S.type==="document_duration_limit"){var w=Z.action_list,O=w.find(K=>K.type==="random_popup_verification");!(0,m.UI)("RANDOM_POPUP_VERIFY")||!O?D[S.name]="CLOSE":D[S.name]=O.param.checked==="true"?"OPEN":"CLOSE"}else if(S.type==="document_player"){var r=JSON.parse(Z.actions);r.forEach(K=>{K.param.checked==="true"&&(D[S.name]=K.type)})}else if(S.type==="dynamic_watermark"){var te=Z.action_list;te.forEach(K=>{K.type===S.resourceType&&K.param.checked==="true"&&(D[S.name]=K.param.comment)})}else D[S.name]=Z.switch_status}),D},Y=i=>{(0,M.sH)((0,$.Z)({progress:100,recent_start:1},i)).then(s=>{s&&s.data&&(0,h.Z)(s.data.integral_info||"")})},E=i=>{var s=document.createElement("div");return s.innerHTML=i,s.childNodes[0]}},51975:function(xe,ue,e){"use strict";e.d(ue,{l:function(){return M}});var $=e(62029),h=e(12924),m=e.n(h),M=(H,F)=>function(E){return m().createElement(H.Consumer,null,i=>m().createElement(F,(0,$.Z)({},E,{contextData:i})))}},43859:function(xe,ue,e){"use strict";var $=e(62029),h=e(81211),m=e(43358),M=e(34041),H=e(12924),F=e.n(H),Y=e(94184),E=e.n(Y),i=e(59239),s=e(55446),D=e.n(s),S=e(6793),Z=i.Z.Item,w=M.Z.Option,O=r=>function(K){var se=K.field,U=K.form,B=K.hasFeedback,J=K.label,G=K.selectOptions,ae=K.submitCount,Q=K.type,X=K.displayType,z=K.labelCol,he=z===void 0?{}:z,ne=K.wrapperCol,fe=ne===void 0?{}:ne,ve=K.required,ge=ve===void 0?!1:ve,Ce=K.customError,ye=Ce===void 0?!1:Ce,Te=K.colon,Ie=Te===void 0?!0:Te,_e=K.formItemClassName,Oe=(0,h.Z)(K,["field","form","hasFeedback","label","selectOptions","submitCount","type","displayType","labelCol","wrapperCol","required","customError","colon","formItemClassName"]),be=U.touched[se.name],Ze=ae>0,We=U.errors[se.name],we=We&&Ze,Ve=We&&be,Ge=De=>{var me=De!=null&&De.target?De.target.value:De;U.setFieldValue(se.name,me),U.touched[se.name]||setTimeout(()=>{U.setFieldTouched(se.name,!0)},0)},Ye=De=>{var me={},Ae={},Se=De;if(De===void 0&&(Se=""),U.setFieldValue(se.name,Se),se.name==="courseList"&&De&&Object.prototype.toString.apply(De).slice(8,-1)==="Array"&&De.length>0){me.startTime=De[0].beginTime,Ae.startTime=Number((0,S.jZ)(De[0].beginTime))+864e5;var Le=[];De.forEach($e=>{$e.endTime!==""&&Le.push($e)}),Le.length>0&&U.values.dateRange.endTime?(0,S.jZ)(U.values.dateRange.endTime)>Le[Le.length-1].endTime?(me.endTime=U.values.dateRange.endTime,Ae.endTime=Number((0,S.jZ)(U.values.dateRange.endTime))-864e5):Le.length>0&&U.values.dateRange.endTime&&(0,S.jZ)(U.values.dateRange.endTime)<=Le[Le.length-1].endTime&&(me.endTime=Le[Le.length-1].endTime,Ae.endTime=Number((0,S.jZ)(Le[Le.length-1].endTime))-864e5):Le.length>0&&!U.values.dateRange.endTime&&(me.endTime=Le[Le.length-1].endTime,Ae.endTime=Number((0,S.jZ)(Le[Le.length-1].endTime))-864e5),Le.length>0&&U.setFieldValue("dateRange",me),U.setFieldValue("dateRangeLimit",Ae)}if(se.name==="stages"&&De&&Object.prototype.toString.apply(De).slice(8,-1)==="Array"&&De.length>0){var Re=[];De.forEach($e=>{$e.list&&$e.list.forEach(ze=>{ze.componentName==="OfflineTrain"&&Re.push(ze.data)})}),Re.length>0&&(me.startTime=Re[0].beginTimeStr,me.endTime=Re[Re.length-1].endTimeStr,me.startTime=Number((0,S.jZ)(Re[0].beginTimeStr))+864e5,me.endTime=Number((0,S.jZ)(Re[Re.length-1].endTimeStr))-864e5,U.setFieldValue("dateRangeLimit",me))}U.touched[se.name]||setTimeout(()=>{U.setFieldTouched(se.name,!0)},0)},je=()=>U.setFieldTouched(se.name,!0),qe=E()(["cl-form__field"]);return F().createElement("div",{className:qe},F().createElement(Z,{label:J,className:"$$CL-FORM-ERROR__".concat(se.name," antd-field-item ").concat(_e),hasFeedback:!!(B&&Ze||B&&be),help:(we||Ve)&&!ye?We:!1,validateStatus:(we||Ve)&&!ye?"error":"success",labelCol:he,wrapperCol:fe,required:ge,colon:Ie},X==="Custom"?F().createElement(r,(0,$.Z)({},se,Oe,{displayType:X,onBlur:je,onFieldChange:Ye})):F().createElement(r,(0,$.Z)({},se,Oe,{displayType:X,onBlur:je,onChange:Q?Ge:Ye,form:U}),G&&G.map(De=>F().createElement(w,{key:De},De)))))};ue.Z=O},11449:function(xe,ue,e){"use strict";e.d(ue,{Z:function(){return he}});var $=e(88986),h=e(33565),m=e(12924),M=e.n(m),H=e(3115),F=e(49111),Y=e(19650),E=e(62029),i=e(57663),s=e(71577),D=e(91768),S=e(28216),Z=e(37055),w=e(10237);function O(ne){var fe=Z.ZP.getHelpContentByMenuKey(),ve={key:ne};return w.WY.get({url:fe,params:ve})}var r=e(74228),te=e.n(r),K=e(1164),se=e(76466),U=e(38642);class B extends M().Component{constructor(fe){var ve;super(fe);ve=this,this.getHelpContentByMenuKey=()=>{var ge=this.props.defaultMenuKey;O(ge).then(Ce=>{var ye=Ce.data,Te=ye.help_url,Ie=ye.video_url;this.setState({videoUrl:Ie,helpUrl:Te})})},this.handleOpenHelpUrl=ge=>{if((0,U.ve)()){window.open(ge,"_blank");return}K.Z.targetTo({path:ge,isExternalLink:!0})},this.handleOpenVideo=function(ge){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ve.props.t("helpCenter.video");ve.setState(ye=>({resourcePlayInfo:(0,$.Z)((0,$.Z)({},ye.resourcePlayInfo),{},{resourceInfo:{originUrl:ge,source:{FD:ge,OD:ge},contentType:"mp4"}}),previewInfo:(0,$.Z)((0,$.Z)({},ye.previewInfo),{},{title:Ce,visible:!0,onCancel:ve.handleCancelPreview})}))},this.handleCancelPreview=()=>{var ge=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,$.Z)((0,$.Z)({},ge),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:fe.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var fe=this.state,ve=fe.helpUrl,ge=fe.resourcePlayInfo,Ce=fe.previewInfo,ye=fe.videoUrl,Te=this.props.t;return M().createElement("div",{className:te().helpCenter},ye&&M().createElement(s.Z,{type:"link",className:te()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(ye)},Te("helpCenter.video")),ve&&M().createElement(s.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(ve)},Te("helpCenter.tutorial")),M().createElement(se.Z,(0,E.Z)({},ge,{previewInfo:Ce})))}}var J=ne=>({defaultMenuKey:ne.currentRoute.menuKey});B.defaultProps={defaultMenuKey:""};var G=(0,S.$j)(J)((0,D.Z)()(B));function ae(ne){var fe=ne.extra,ve=localStorage.getItem("dingPersonnel"),ge=sessionStorage.getItem("dingPersonnel");return M().createElement(Y.Z,null,fe,ve!=="dingPersonnel"&&ge!=="dingPersonnel"&&(0,U.eY)("COMMONEXTRA_HELP_CENTER")&&M().createElement(G,null))}var Q=ae,X=e(4408);function z(ne){var fe=(0,m.useState)({helpCenter:(0,U.eY)("HEAD_HELP_CENTER_BUT")}),ve=(0,h.Z)(fe,1),ge=ve[0],Ce=ne.pageContainerParams,ye=Ce===void 0?{}:Ce,Te=ne.noPadding,Ie=Te===void 0?!1:Te,_e=ne.isPersonal,Oe=_e===void 0?!1:_e,be=ne.pageTitle,Ze=ne.className,We=Ze===void 0?"":Ze,we={extra:ge.helpCenter?M().createElement(Q,{extra:ye.extra}):ye.extra},Ve=(0,$.Z)((0,$.Z)({},ye),we);return M().createElement("div",{className:"page-container-content ".concat(Ie?"page-container-noPadding":""," ").concat(Oe?"page-container-content_personal_background":""," ").concat(We)},be&&M().createElement(X.Z,{title:be}),Oe?M().createElement(H.Z,null,ne.children):M().createElement(H.Z,Ve,ne.children))}var he=z},33577:function(xe,ue,e){"use strict";e.r(ue),e.d(ue,{default:function(){return ee}});var $=e(12924),h=e.n($),m=e(91768),M=e(62029),H=e(20228),F=e(11382),Y=e(57663),E=e(71577),i=e(71194),s=e(57016),D=e(34792),S=e(48086),Z=e(88986),w=e(57361),O=e(9754),r=e.n(O),te=e(28216),K=e(50361),se=e.n(K),U=e(1977),B=e(8212),J=e(59465),G=e(84391),ae=e(28107),Q=e(57338),X=e(83107),z=e(33565),he=e(32157),ne=e(75869),fe=ne.Z.TreeNode;function ve(W){var k=W.treeData,f=W.loadData,c=W.expandedKeys,C=W.handleExpand,x=W.handleSelect,b=W.handleRenderTitle,I=W.handleFilter,d=W.handleDisable,o=W.currentId,t=W.handleDrop,n=W.draggable,u=function l(a){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a.map(L=>{L.crumbs=[...T,L.name];var R=d(L);return L.children?h().createElement(fe,{name:L.name,key:L.id,title:b(L),dataRef:L,isLeaf:!L.has_children,crumbs:L.crumbs,disabled:R,className:o===L.id&&"disable-node"},l(L.children,L.crumbs)):h().createElement(fe,(0,M.Z)({name:L.name,key:L.id,title:b(L)},L,{isLeaf:!L.has_children,crumbs:L.crumbs,dataRef:L,className:o===L.id&&"disable-node",disabled:R}))})};return h().createElement(ne.Z,{blockNode:!0,draggable:n,showLine:{showLeafIcon:!1},expandedKeys:c,onExpand:C,onSelect:x,onDrop:t,filterTreeNode:I,loadData:f},k.length>0&&u(k))}ve.defaultProps={expandedKeys:[],handleSelect:()=>{},loadData:()=>{},handleDrop:()=>{},handleExpand:()=>{},draggable:!1,currentId:"",draggable:!1,handleRenderTitle:W=>W.name,handleDisable:()=>!1};var ge=(0,m.Z)()(ve),Ce=e(37055),ye=e(10237),Te=W=>{var k=W.classify_id,f=W.target_parent_id,c=Ce.ZP.knowledgeCourse.moveClassify(),C={classify_id:k,target_parent_id:f};return ye.WY.post({url:c,data:C})},Ie=e(61650),_e=e.n(Ie);function Oe(W){var k=W.t,f=W.modifyDrawerRef,c=W.treeData,C=c===void 0?[]:c,x=W.loadData,b=W.editData,I=W.onClose,d=(0,$.useState)(!1),o=(0,z.Z)(d,2),t=o[0],n=o[1],u=(0,$.useState)([]),l=(0,z.Z)(u,2),a=l[0],T=l[1],L=(0,$.useState)(["0"]),R=(0,z.Z)(L,2),re=R[0],j=R[1],de=(0,$.useState)({}),oe=(0,z.Z)(de,2),le=oe[0],ie=oe[1],ce=(0,$.useState)(!1),ke=(0,z.Z)(ce,2),Ue=ke[0],Me=ke[1],pe={courseCount:0,createTime:0,createUser:"",id:"0",label:k("common.all"),level:0,name:k("common.all"),orderId:0,parentId:"-1",value:"0",has_children:!0,children:[]};(0,$.useEffect)(()=>{t||(j(["0"]),ie({}))},[t]),(0,$.useEffect)(()=>{T([(0,Z.Z)((0,Z.Z)({},pe),{},{children:C})])},[C]),(0,$.useImperativeHandle)(f,()=>({handleDrawer:Be=>{n(Be)}}));var _t=()=>{I()},Je=function(){var Be=(0,w.Z)(r().mark(function Fe(){var Ne;return r().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:Ne=le.grant_child,Ne?s.Z.confirm({title:k("course.moveClassifyTip1"),content:k("course.moveClassifyTip2"),onOk:()=>{Pe()},onCancel(){}}):Pe();case 2:case"end":return rt.stop()}},Fe)}));return function(){return Be.apply(this,arguments)}}(),Pe=function(){var Be=(0,w.Z)(r().mark(function Fe(){var Ne,at,rt;return r().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(Ne={classify_id:b.id,target_parent_id:le.id},b.parent_id!==le.id){Ke.next=4;break}return I("success",Ne),Ke.abrupt("return");case 4:return Me(!0),Ke.prev=5,Ke.next=8,Te(Ne);case 8:at=Ke.sent,rt=at.success,rt==="true"&&(I("success",Ne),S.default.success(k("exam.movedSuccess"))),Ke.next=15;break;case 13:Ke.prev=13,Ke.t0=Ke.catch(5);case 15:Me(!1);case 16:case"end":return Ke.stop()}},Fe,null,[[5,13]])}));return function(){return Be.apply(this,arguments)}}(),Xe=()=>h().createElement("div",{className:"classify_footer"},h().createElement(E.Z,{onClick:_t},k("common.cancel")),h().createElement(E.Z,{type:"primary",onClick:Je,disabled:!le.id,loading:Ue},k("common.save"))),tt=(Be,Fe)=>{var Ne=Fe.expanded,at=Fe.node,rt=at.props.eventKey;St(rt,Ne)},Zt=(Be,Fe)=>{var Ne=Fe.node;Number(Ne.level)>4||ie(Ne.dataRef)},St=(Be,Fe)=>{var Ne=Array.from(new Set([...re]));if(Fe)j([Be,...Ne]);else{var at=Ne.indexOf(Be);at>-1&&Ne.splice(at,1),j(Ne)}},Lt=Be=>Be.id===b.id||Be.level>4;return h().createElement(X.Z,{width:700,maskClosable:!1,destroyOnClose:!0,visible:t,size:"small",title:k("courseManage.adjustClassification"),onClose:_t,onOk:Je,footer:Xe(),className:_e()["classify-drawer"]},h().createElement("div",{className:_e().header},h().createElement("div",{className:_e().col},h().createElement("span",null,k("course.chooseClassify"),"\uFF1A"),h().createElement("span",null,b.name)),h().createElement("div",{className:_e().col},h().createElement("span",null,k("exam.moveTo"),"\uFF1A"),h().createElement("span",null,le.name))),h().createElement("div",{className:_e().content},h().createElement(ge,{expandedKeys:re,handleSelect:Zt,treeData:a,loadData:x,currentId:b.id,handleDisable:Lt,handleExpand:tt})))}var be=(0,m.Z)()((0,$.forwardRef)(Oe)),Ze=e(80991),We=e(22385),we=e(31097);class Ve extends h().Component{render(){var k=this.props,f=k.defaultValue,c=k.values;return h().createElement(we.Z,{title:c,overlayStyle:{maxWidth:"none"}},h().createElement("span",null,f))}}var Ge=(0,m.Z)()(Ve),Ye=e(77576),je=e(59314);class qe extends h().Component{constructor(){super(...arguments);this.handleChangePublic=k=>{this.props.onHandleChangePublic&&this.props.onHandleChangePublic(k)}}render(){var k=this.props,f=k.t,c=k.value;return h().createElement("div",null,h().createElement(je.Z,{checked:c,checkedChildren:f("common.open"),unCheckedChildren:f("common.close"),onChange:C=>this.handleChangePublic(C)}),h().createElement("span",{className:"makePublicTips"},f("setting.makePublicTips")))}}var De=(0,m.Z)()(qe),me=e(63185),Ae=e(9676),Se=e(68628),Le=e(49101),Re=e(73218),$e=e(88311),ze=e(60667),st=e(26885),Dt=()=>{};class ht extends h().Component{constructor(k){super(k);this.handleCheck=(f,c)=>{var C=this.state.permissionArray,x=this.props.banQuery,b=C.findIndex(o=>o.visible_id===c.visible_id);if(f==="all"){var I=(0,Z.Z)((0,Z.Z)({},c),{},{all:!c.all,query:!c.all,edit:!c.all,refer:!c.all});x&&(I.query=!0),C.splice(b,1,I),this.setState({permissionArray:C})}else{var d=(0,Z.Z)((0,Z.Z)({},c),{},{[f]:!c[f]});(d.edit||d.refer)&&(d.query=!0),d.all=d.query&&d.edit&&d.refer,C.splice(b,1,d),this.setState({permissionArray:C},()=>{var o=this.props.form;o.setFieldValue("authority_settings",C)})}},this.handleRemove=f=>{var c=this.state,C=c.permissionArray,x=c.initData,b=C.findIndex(d=>d.visible_id===f.visible_id);if(b>-1){C.splice(b,1);var I=x[f.visible_type].filter(d=>d.id!==f.visible_id);x[f.visible_type]=I}this.setState({permissionArray:C,initData:x},()=>{var d=this.props.form;d.setFieldValue("authority_settings",C)})},this.handleAdd=()=>{var f=localStorage.getItem("authorityType"),c=this.props.user,C=c.appType,x=c.loginMode;C==="wx_app"&&x==="WE_COM"&&f==="1"?this.handleSelectWx():this.setOrgModalVisibility(!0)},this.handleSelectWx=()=>{var f=this.props.user,c=this.state.initData,C=c.user.map(b=>b.name),x=c.dept.map(b=>b.name);(0,st.Sk)({userIds:C,deptIds:x}).then(b=>{(0,st.$f)({result:b,user:f,hasDefault:!1}).then(I=>{var d=I.qyWeChatVo,o=I.rangeList;this.setState({qyWeChatVo:d},()=>{this.handleAddUsersOk(o)})})}).catch(()=>{})},this.setOrgModalVisibility=f=>{this.setState({orgVisible:f})},this.handleAddUsersOk=f=>{var c=this.state,C=c.options,x=c.permissionArray,b=(0,Z.Z)({},f),I=[...x],d=[],o=function(a){Object.hasOwnProperty.call(b,a)&&b[a].forEach(T=>{d.push(T.id);var L=x.findIndex(re=>re.visible_id===T.id);if(L<0){var R=(0,Z.Z)({visible_type:a,visible_id:T.id,visible_name:T.name||T.user_id,source_type:T.source_type,sync_user_id:T.user_id},C);I.push(R)}})};for(var t in b)o(t);if(d.length>20){S.default.warn("\u4E0D\u80FD\u8D85\u8FC720\u7EC4");return}var n=I.splice(0,2),u=I.filter(l=>d.includes(l.visible_id));this.setState({permissionArray:[...n,...u],orgVisible:!1,initData:b},()=>{var l=this.props.form;l.setFieldValue("qy_we_chat_vo",this.state.qyWeChatVo),l.setFieldValue("authority_settings",[...n,...u])})},this.handleAddUsersCancel=()=>{this.setState({orgVisible:!1})},this.renderTooltip=()=>{var f=this.props.t;return h().createElement("div",null,h().createElement("div",null,f("common.preview"),"\uFF1A",f("setting.browseTips")),h().createElement("div",null,f("setting.quote"),"\uFF1A",f("setting.quoteTips")),h().createElement("div",null,f("common.edit"),"\uFF1A",f("setting.editTips")))},this.state={plainOptions:[{label:this.props.t("common.all"),key:"all"},{label:this.props.t("authGroup.viewUser"),key:"query"},{label:this.props.t("setting.quote"),key:"refer"},{label:this.props.t("common.edit"),key:"edit"}],permissionArray:k.defaultValue,initData:{user:[],dept:[],group:[],post:[]},options:{all:!0,query:!0,edit:!0,refer:!0},orgVisible:!1,qyWeChatVo:null}}UNSAFE_componentWillReceiveProps(k){var f=k.defaultValue,c=f===void 0?[]:f;this.setState({permissionArray:c},()=>{var C={user:[],dept:[],group:[],post:[]};c.forEach(x=>{var b=x.visible_id,I=x.visible_name,d=x.visible_type,o=x.source_type,t=x.sync_user_id;d!=="all"&&d!=="admin"&&C[d].push({id:b,name:I,user_id:t,sourceType:o})}),this.setState({initData:C})})}render(){var k=this.props,f=k.t,c=k.disabled,C=k.banQuery,x=this.state,b=x.plainOptions,I=x.orgVisible,d=x.permissionArray,o=d===void 0?[]:d,t=x.initData,n=x.qyWeChatVo,u=n?JSON.parse(n):null;return h().createElement("div",{className:"resource_permissions_container"},h().createElement("div",{className:"resource_permissions_container_title"},h().createElement(we.Z,{title:this.renderTooltip,overlayStyle:{maxWidth:"none"}},h().createElement(Se.Z,null)),h().createElement("label",{className:"resource_permissions_container_label",style:{width:"84px"}},f("setting.resourcePermissions"))),h().createElement("div",{className:"right-action"},h().createElement(E.Z,{type:"dashed",block:!0,disabled:c,icon:h().createElement(Le.Z,null),className:"addGroupPermissions_btn",onClick:this.handleAdd},f("setting.addPermissionGroup"),h().createElement("span",{className:"add_permissionGroup_tip"},"(",f("setting.addPermissionGroupTips"),")")),h().createElement("div",{className:"checkbox_group_spin"},o.length>0&&o.map(l=>h().createElement("div",{className:"checkbox_group_spin_item",key:l.visible_id},h().createElement("label",null,l.visible_type==="dept"&&h().createElement(ze.Z,{dataType:"departmentName",value:l.visible_id,name:l.visible_name,type:l.source_type}),l.visible_type==="user"&&h().createElement(ze.Z,{dataType:"userName",value:l.sync_user_id,name:l.visible_name,type:l.source_type}),!(l.visible_type==="dept"||l.visible_type==="user")&&l.visible_name,"\uFF1A"),b.map(a=>h().createElement(Ae.Z,{disabled:l.visible_type==="admin"||c||a.key==="query"&&C,checked:l[a.key],key:a.key,onClick:()=>this.handleCheck(a.key,l)},a.label)),l.visible_type!=="admin"&&l.visible_type!=="all"&&!c&&h().createElement(Re.Z,{style:{fontSize:"16px",color:"#ff4d4f"},onClick:()=>this.handleRemove(l)})))),h().createElement($e.Z,{title:f("setting.selectPermissionObject"),visible:I,initData:t,onOk:this.handleAddUsersOk,onCancel:this.handleAddUsersCancel})))}}var mt=W=>{var k=W.user;return{user:k}},vt=(0,te.$j)(mt)((0,m.Z)()(ht));class He extends h().Component{constructor(){super(...arguments);this.handleChange=(k,f)=>{this.props.onHandleChangeRules&&this.props.onHandleChangeRules(f,k.target.checked)}}render(){var k=this.props,f=k.t,c=k.grant_child,C=k.inherit_parent,x=k.banInheritParent,b=k.banGrantChild;return h().createElement("div",{className:"permission-rules"},h().createElement(Ae.Z,{disabled:x,onChange:I=>this.handleChange(I,"inherit_parent"),checked:C},f("setting.inheritParentPermissions")),h().createElement("div",{className:"permission_rule"},f("setting.parentPermissionTips")),h().createElement(Ae.Z,{onChange:I=>this.handleChange(I,"grant_child"),checked:c,disabled:b},f("setting.childInheritCurrentPermissions")),h().createElement("div",{className:"permission_rule"},f("setting.childrenPermissionTips")))}}var kt=(0,m.Z)()(He),gt=e(7584),et=e(43859),Tt=(0,et.Z)(Ge),nt=gt.Z,ft=(0,et.Z)(De),it=(0,et.Z)(vt),yt=(0,et.Z)(kt),Qe={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:16}}},ot=e(6793),Ct=e(3407),lt=e(2396),ct=(0,ot.me)(),dt=Ct.Z[ct].setting,pt=W=>(0,ot.fy)(W)?(0,lt.$s)((0,ot.fy)(W))>50?dt.classifyNamePlaceholder50:"":dt.classifyNameValidate,xt=e(55446),Et={getClassifyDetail:Ce.ZP.Classify.editCheck};class Pt extends h().Component{constructor(k){var f;super(k);f=this,this.getParentAuthSettings=function(){var c=(0,w.Z)(r().mark(function C(x){var b,I,d,o,t,n,u,l,a;return r().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return f.setState({loading:!0}),b={id:x},I=Et.getClassifyDetail(),L.prev=3,L.next=6,ye.WY.get({url:I,params:b});case 6:d=L.sent,o=d.data,t=o===void 0?{}:o,n=t.authority_settings,u=t.grant_child,l=t.make_public,a=(0,Z.Z)((0,Z.Z)({},f.state.operateData),{},{parent_grant_child:u,inherit_parent:u,grant_child:u,make_public:l}),u&&(a.authority_settings=[...n]),l&&a.authority_settings.forEach(R=>{R.query=!0}),f.setState({operateData:a,loading:!1},()=>{f.formik.setValues((0,Z.Z)({},a))}),L.next=19;break;case 16:L.prev=16,L.t0=L.catch(3),console.log(L.t0);case 19:case"end":return L.stop()}},C,null,[[3,16]])}));return function(C){return c.apply(this,arguments)}}(),this.getClassifyDetail=function(){var c=(0,w.Z)(r().mark(function C(x){var b,I,d,o,t,n,u,l,a,T,L,R,re,j,de,oe,le;return r().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return f.setState({loading:!0}),b={id:x},I=Et.getClassifyDetail(),ce.prev=3,ce.next=6,ye.WY.get({url:I,params:b});case 6:d=ce.sent,o=d.data,t=o===void 0?{}:o,n=t.authority_settings,u=t.name,l=u===void 0?"":u,a=t.inherit_parent,T=a===void 0?!1:a,L=t.grant_child,R=L===void 0?!1:L,re=t.make_public,j=re===void 0?!1:re,de=t.allow_edit_auth_rule,oe=de===void 0?!0:de,j&&n.forEach(ke=>{ke.query=!0}),le=(0,Z.Z)((0,Z.Z)({},f.state.operateData),{},{authority_settings:n,name:l,inherit_parent:T,grant_child:R,make_public:j,allow_edit_auth_rule:oe}),f.setState({operateData:le,loading:!1},()=>{f.formik.setValues((0,Z.Z)({},le))}),ce.next=18;break;case 15:ce.prev=15,ce.t0=ce.catch(3),console.log(ce.t0);case 18:case"end":return ce.stop()}},C,null,[[3,15]])}));return function(C){return c.apply(this,arguments)}}(),this.initFormRef=c=>{this.formik=c},this.renderFooter=()=>{var c=this.props,C=c.t,x=c.onCreate,b=c.onClose;return h().createElement("div",{className:"classify_footer"},h().createElement(E.Z,{onClick:b},C("common.cancel")),h().createElement(E.Z,{key:"submit",type:"primary",onClick:x},C("common.save")))},this.handleChangePublic=c=>{if(c){var C=this.formik.state.values,x=C.authority_settings;x.forEach(b=>{b.query=!0}),this.formik.setValues((0,Z.Z)((0,Z.Z)({},C),{},{authority_settings:x,make_public:c}))}else this.formik.setFieldValue("make_public",!1)},this.handleChangeRules=(c,C)=>{this.formik.setFieldValue(c,C)},this.renderParentCategory=c=>{var C=c.type,x=c.crumbs,b=[...x];return C==="edit"&&b.pop(),b.join(" / ")},this.judgeBanInheritParent=c=>{var C=c.level,x=c.type,b=c.parent_grant_child,I=c.allow_edit_auth_rule;return!!(C==="1"&&x!=="add"||b&&x==="add"||!I)},this.state={operateData:{id:"",value:"",type:"addRoot",level:"",parent_id:"",crumbs:[],name:"",inherit_parent:!1,grant_child:!1,make_public:!1,authority_settings:[{visible_type:"admin",visible_id:"0",visible_name:k.t("setting.masterAdministrator"),all:!0,query:!0,refer:!0,edit:!0},{visible_type:"all",visible_id:"1",visible_name:k.t("common.allCompany"),all:!0,query:!0,refer:!0,edit:!0}],allow_edit_auth_rule:!0},loading:!0}}componentDidMount(){this.props.onRef&&this.props.onRef(this)}UNSAFE_componentWillReceiveProps(k){if(this.props.visible!==k.visible&&k.visible){var f=k.operateData,c=this.state.operateData;this.setState({operateData:(0,Z.Z)((0,Z.Z)({},c),f),loading:!1},()=>{f.type==="edit"&&this.getClassifyDetail(f.id),f.type==="add"&&this.getParentAuthSettings(f.parent_id)})}}render(){var k=this.props,f=k.visible,c=k.title,C=k.t,x=k.onClose,b=k.onCreate,I=this.state,d=I.operateData,o=I.loading;return h().createElement(X.Z,{width:700,maskClosable:!1,destroyOnClose:!0,visible:f,size:"small",title:c,onClose:x,onOk:b,footer:this.renderFooter(),className:"classify-drawer"},h().createElement(F.Z,{spinning:o},h().createElement(Ze.J9,{ref:this.initFormRef,initialValues:d,onSubmit:b,render:t=>h().createElement(Ze.l0,{className:"collect_form_container"},(d.type==="add"&&d.level==="1"||d.level!=="1")&&h().createElement("div",{className:"parent-category"},h().createElement("span",null,C("setting.parentCategory"),"\uFF1A"),h().createElement("span",null,this.renderParentCategory(d))),h().createElement(Ze.gN,(0,M.Z)({component:nt,name:"name",type:"text",label:C("setting.classifyName"),required:!0,placeholder:C("setting.classifyNamePlaceholder50"),defaultValue:t.values.name,LimitLength:50,char:!0,validate:pt},Qe)),d.level==="1"&&d.type!=="add"&&h().createElement(Ze.gN,(0,M.Z)({component:ft,name:"make_public",label:C("setting.makePublic"),defaultValue:t.values.make_public,onHandleChangePublic:this.handleChangePublic},Qe,{value:t.values.make_public})),h().createElement(Ze.gN,{component:it,name:"authority_settings",disabled:t.values.inherit_parent,banQuery:t.values.make_public,defaultValue:t.values.authority_settings}),h().createElement(Ze.gN,(0,M.Z)({component:yt,name:"permissionRules",label:C("setting.permissionRules"),grant_child:t.values.grant_child,inherit_parent:t.values.inherit_parent,onHandleChangeRules:this.handleChangeRules,banGrantChild:t.values.parent_grant_child||!t.values.allow_edit_auth_rule,banInheritParent:this.judgeBanInheritParent(t.values)},Qe)))})))}}var It=(0,m.Z)()(Pt),ut=e(84874),Ee=e(97593),y=e(86726),g=e(25547),v=W=>({userInfo:W.user}),p={tree:Ce.ZP.Classify.getTree,add:Ce.ZP.Classify.newAdd,relativeDel:Ce.ZP.Classify.relativeDel,del:Ce.ZP.Classify.del,editCheck:Ce.ZP.Classify.editCheck,edit:Ce.ZP.Classify.newEdit,move:Ce.ZP.Classify.move,countResource:Ce.ZP.Classify.countResource,getResourceClassify:Ce.ZP.Classify.getResourceClassify},P={};class _ extends h().Component{constructor(k){var f;super(k);f=this,this.onRef=c=>{this.childRef=c},this.getResourceClassify=function(){var c=(0,w.Z)(r().mark(function C(x){var b,I,d,o,t;return r().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(b=x.id,b){u.next=3;break}return u.abrupt("return");case 3:return I=(0,Z.Z)((0,Z.Z)({},f.state.params),{},{parent_id:b}),u.prev=4,d=p.getResourceClassify(),u.next=8,ye.WY.get({url:d,params:I});case 8:if(o=u.sent,t=o.data,!(t&&t.list)){u.next=12;break}return u.abrupt("return",new Promise(l=>{setTimeout(()=>{x.props.dataRef.children=[...t.list],f.setState({treeData:[...f.state.treeData]}),l()},500)}));case 12:u.next=16;break;case 14:u.prev=14,u.t0=u.catch(4);case 16:case"end":return u.stop()}},C,null,[[4,14]])}));return function(C){return c.apply(this,arguments)}}(),this.isNeedCountResource=()=>{for(var c=this.state.treeData,C,x=0;x<c.length;x++)c[x].isNeedCountResource==="true"&&(C=c[x].id);this.countResource(C)},this.countResource=c=>{ye.WY.get({url:p.countResource(),params:{classifiedId:c}}).then(C=>{this.setState({count:C.data.total})})},this.renderTreeNodeTitle=c=>{var C=localStorage.getItem("themeColor")||"#516ae6",x=this.state,b=x.treeData,I=x.count,d=(0,g.Yd)("id",c.id,b)>=5?null:h().createElement("span",{onClick:o=>{this.handleAdd(c,o)}},h().createElement(U.Z,null));return h().createElement("div",{className:"custom-tree-node"},h().createElement("span",{className:"tree-node-title"},c.name),h().createElement("span",{className:"operate-box",style:{color:C}},c.allow_edit?h().createElement(h().Fragment,null,h().createElement("span",{onClick:o=>{this.handleRename(c,o)}},h().createElement(B.Z,null)),h().createElement("span",{onClick:o=>{this.handleDelete(c,o)}},h().createElement(J.Z,null)),d,h().createElement("span",{onClick:o=>{this.handleMove(c,o)}},h().createElement(ut.Z,{iconClass:"icon-fenleitiaozheng"}))):null),h().createElement("span",{className:"drag-icon"},h().createElement(ut.Z,{iconClass:"icon-yidong"})),c.isNeedCountResource==="true"?h().createElement("span",{className:"count-resource"},this.props.t("setting.containing")," ",I," ",this.props.t("setting.lesson")):null)},this.canEnterNext=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,C=arguments.length>1?arguments[1]:void 0,x=arguments.length>2?arguments[2]:void 0,b=arguments.length>3?arguments[3]:void 0;ye.WY.get({url:C,params:{id:x}}).then(I=>{var d=I.data,o=d.code,t=d.msg;if(!c)b(I.data);else if(o!==0){if(o===-2){f.handleReferenceList(x);return}S.default.warning(t)}else b(x)})},this.handleReferenceList=c=>{this.setState(C=>({referenceWithOtherConfig:(0,Z.Z)((0,Z.Z)({},C.referenceWithOtherConfig),{},{visible:!C.referenceWithOtherConfig.visible,resourceId:c||""})}))},this.handleAddRootNode=()=>{var c=this.state.operateData;this.setState({visible:!0,operateData:(0,Z.Z)((0,Z.Z)({},c),{},{type:"addRoot",level:"1"})})},this.handleRename=(c,C)=>{var x=c.id,b=c.value,I=c.level,d=c.name,o=c.parent_id,t=c.crumbs;C.stopPropagation(),this.setState({visible:!0,operateData:(0,Z.Z)((0,Z.Z)({},this.state.operateData),{},{id:x,value:b,level:I,name:d,parent_id:o,crumbs:t,type:"edit"})})},this.updateNodeById=(c,C)=>{this.canEnterNext(!1,p.editCheck(),c,x=>{this.confirmEdit(x,C),this.handleResetModal()})},this.confirmEdit=(c,C)=>{var x=c.id;ye.WY.post({url:p.edit(x),data:(0,Z.Z)({id:x},C)}).then(b=>{var I=b.data,d=I.code,o=I.msg;if(S.default[d===0?"success":"warning"](o),d===0){var t=[...this.state.treeData];(0,g.VX)(t,x,n=>{var u=C.inherit_parent,l=C.grant_child,a=C.make_public,T=C.name,L={inherit_parent:u,grant_child:l,make_public:a,name:T};for(var R in L)Object.hasOwnProperty.call(L,R)&&(n[R]=L[R])}),this.setState({treeData:t})}})},this.handleMove=(c,C)=>{C.stopPropagation(),this.setState({operateData:(0,Z.Z)((0,Z.Z)({},this.state.operateData),{},{id:c.id||c.key,value:c.value,level:c.level,name:c.name,parent_id:c.parent_id,type:"edit"})},()=>{this.modifyDrawerRef.current.handleDrawer(!0)})},this.handleMoveModal=function(c){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=C.classify_id,b=C.target_parent_id;f.setState({operateData:(0,Z.Z)((0,Z.Z)({},f.state.operateData),{},{id:"",value:"",level:"",name:"",type:"addRoot"})},()=>{c==="success"&&f.handleMoveSuccess({classify_id:x,target_parent_id:b}),f.modifyDrawerRef.current.handleDrawer(!1)})},this.handleMoveSuccess=c=>{var C=c.classify_id,x=c.target_parent_id;if(C!==x){var b=[...this.state.treeData],I={};(0,g.VX)(b,C,(d,o,t)=>{t.splice(o,1),I=d}),x==="0"?this.setState({treeData:[I,...b]}):this.setState({treeData:b},()=>{this.appendNode(x,I)})}},this.handleDelete=(c,C)=>{C.stopPropagation();var x=this.props.t,b=c.id,I=this.state.delConfirmProps;this.canEnterNext(!0,p.relativeDel(),b,()=>{this.setState({delConfirmProps:(0,Z.Z)((0,Z.Z)({},I),{},{tempDeleteId:b})},()=>{s.Z.confirm({title:x("common.delete"),content:x("setting.deleteClassifyTip"),onOk:()=>{this.confirmOk()}})})})},this.confirmOk=()=>{var c=this.state,C=c.delConfirmProps,x=c.treeData;ye.qg.post({url:p.del(),data:{id:C.tempDeleteId}}).then(b=>{var I=b.data,d=I.code,o=I.msg;if(S.default[d===0?"success":"warning"](o),d===0){var t=[...x];(0,g.VX)(t,C.tempDeleteId,(n,u,l)=>{l.splice(u,1)}),this.setState({delConfirmProps:(0,Z.Z)((0,Z.Z)({},C),{},{tempDeleteId:""}),treeData:t})}})},this.addRootClassification=c=>{ye.WY.post({url:p.add(),data:(0,Z.Z)((0,Z.Z)({},c),{},{parent_id:"0"})}).then(C=>{var x=C.data,b=x.code,I=x.msg,d=x.data;if(S.default[b===0?"success":"warning"](I),b===0){var o=(0,Z.Z)((0,Z.Z)({},d),{},{allow_edit:!0});this.setState({treeData:[o,...this.state.treeData]}),this.handleResetModal()}})},this.handleAdd=(c,C)=>{C.stopPropagation();var x=this.state.operateData;return this.setState({visible:!0,operateData:(0,Z.Z)((0,Z.Z)({},x),{},{id:c.id,value:c.id,type:"add",level:c.level,parent_id:c.id,crumbs:c.crumbs,name:"",parent_grant_child:c.grant_child,inherit_parent:c.grant_child,grant_child:c.grant_child})}),!1},this.addSubClassificationById=(c,C)=>{ye.WY.post({url:p.add(),data:C}).then(x=>{var b=x.data,I=b.code,d=b.msg,o=b.data;if(S.default[I===0?"success":"warning"](d),I===0){var t=(0,Z.Z)((0,Z.Z)({},o),{},{allow_edit:!0});this.appendNode(c,t),this.handleResetModal()}})},this.getChild=c=>{var C=(0,Z.Z)((0,Z.Z)({},this.state.params),{},{parent_id:c}),x=p.getResourceClassify();return new Promise(b=>{ye.WY.get({url:x,params:C}).then(I=>{var d=I.data;b(d.list||[])}).catch(()=>{b([])})})},this.appendNode=(c,C)=>{var x=se()(this.state.treeData);(0,g.VX)(x,c,function(){var I=(0,w.Z)(r().mark(function d(o){var t;return r().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(o.has_children=!0,!o.children){u.next=5;break}o.children.unshift(C),u.next=9;break;case 5:return u.next=7,f.getChild(c);case 7:t=u.sent,o.children=[...t];case 9:case"end":return u.stop()}},d)}));return function(d){return I.apply(this,arguments)}}());var b=Array.from(new Set([...this.state.expandedKeys]));b.push(c),this.setState({treeData:x,expandedKeys:b})},this.handleCreate=()=>{var c=this.childRef.formik,C=c.state.values,x=C.authority_settings,b=C.inherit_parent,I=C.grant_child,d=C.make_public,o=C.name,t=C.parent_id,n=t===void 0?"0":t,u=C.qy_we_chat_vo,l=u===void 0?"":u;c.submitForm(),c.runValidations().then(a=>{if(Object.keys(a).length)return!1;var T=this.state.operateData,L=T.type,R=T.id,re={authority_settings:x,inherit_parent:b,grant_child:I,make_public:d,name:o,parent_id:n,qy_we_chat_vo:l};L==="addRoot"?this.addRootClassification(re):L==="add"?this.addSubClassificationById(R,re):this.updateNodeById(R,re)})},this.handleClose=()=>{this.handleResetModal()},this.handleResetModal=()=>{this.setState({visible:!1,operateData:{id:"",value:"",type:"addRoot",level:"1",crumbs:[],parent_id:"0",name:"",inherit_parent:!1,grant_child:!1,make_public:!1,parent_grant_child:!1,allow_edit_auth_rule:!0,authority_settings:[{visible_type:"admin",visible_id:"0",visible_name:"\u603B\u7BA1\u7406\u5458",all:!0,query:!0,refer:!0,edit:!0},{visible_type:"all",visible_id:"1",visible_name:"\u5168\u516C\u53F8",all:!0,query:!0,refer:!0,edit:!0}]}}),this.childRef.formik.resetForm()},this.handleExpand=(c,C)=>{var x=C.expanded,b=C.node;this.handleFilterExpandedKeys(b.props.eventKey,x)},this.handleSelect=(c,C)=>{var x=C.node;this.handleFilterExpandedKeys(x.props.eventKey,!x.props.expanded)},this.handleFilterExpandedKeys=(c,C)=>{var x=Array.from(new Set([...this.state.expandedKeys]));if(C)this.setState({expandedKeys:[c,...x]});else{var b=x.indexOf(c);b>-1&&x.splice(b,1),this.setState({expandedKeys:x})}},this.handleDrop=c=>{var C=this.props.t,x=this.state.treeData,b=c.dragNode,I=c.node,d=c.dropToGap,o=I.props.pos.split("-"),t=b.props.pos.split("-"),n=o.pop(),u=t.pop();if(o.toString()!==t.toString())S.default.warn(C("setting.dragOtherLevelTip"));else{if(!d){S.default.warn(C("setting.dragOtherLevelTip"));return}var l=parseFloat(n-u),a=(0,g.Yd)("id",I.props.dataRef.id,x),T=a-1,L;l===-1?L="before":L="after";var R=I.props.eventKey,re=b.props.eventKey;this.handleMoveWithApi(re,R,I.props.dataRef.parent_id,T===0,L,()=>{var j=[...this.state.treeData],de=[...this.state.expandedKeys];de.push(R);var oe;if((0,g.VX)(j,re,(ce,ke,Ue)=>{Ue.splice(ke,1),oe=ce}),!c.dropToGap)(0,g.VX)(j,R,ce=>{ce.children=ce.children||[],ce.children.push(oe)});else{var le,ie;(0,g.VX)(j,R,(ce,ke,Ue)=>{le=Ue,ie=ke}),L==="before"?le.splice(ie,0,oe):le.splice(ie+1,0,oe)}this.setState({treeData:j,expandedKeys:de})})}},this.handleMoveWithApi=function(c,C,x,b,I){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:()=>{},o=f.props.t,t=I==="inner",n={classify_drag:[c],classify_drop:{parent_id:b&&!t?0:t?C:x,base_id:t?"":C,type:I}};ye.WY.post({url:p.move(),data:n}).then(u=>{var l=u.data.status,a=l==="success";a?d():S.default.warning(o("setting.errorTip"))})},this.getPath=c=>{for(var C=[],x=P[c];x;)C.unshift(x.value),x=x.parent;return C},this.joinParentPath=c=>{var C=this.getPath(c),x="";return C.forEach((b,I)=>{I<C.length-1?x+="".concat(b,"/"):x+="".concat(b)}),x},this.handleExportExcel=()=>{(0,Ee.N)({page:"resourceSettings",props:this.props})},this.state={allowActions:(0,y.V9)("classify",k.userInfo.modules),treeData:[],expandedKeys:[],loading:!0,operateData:{id:"",value:"",type:"addRoot",level:"1",parent_id:"0",crumbs:[],name:"",inherit_parent:!1,grant_child:!1,make_public:!1,parent_grant_child:!1,allow_edit_auth_rule:!0,authority_settings:[{visible_type:"admin",visible_id:"0",visible_name:k.t("setting.masterAdministrator"),all:!0,query:!0,refer:!0,edit:!0},{visible_type:"all",visible_id:"1",visible_name:k.t("common.allCompanyed"),all:!0,query:!0,refer:!0,edit:!0}]},visible:!1,delConfirmProps:{tempDeleteId:""},referenceWithOtherConfig:{visible:!1,type:"classify",operation:"delete",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList},count:"",params:{auth_type:"edit",include_unclassified:!1,parent_id:0}},this.modifyDrawerRef=h().createRef()}componentDidMount(){var k=this.state.params;ye.WY.get({url:p.getResourceClassify(),params:k}).then(f=>{f.data&&f.data.list&&this.setState({treeData:f.data.list,loading:!1},()=>{this.isNeedCountResource()})})}render(){var k=this.props.t,f=this.state,c=f.operateData,C=f.visible,x=f.treeData,b=f.expandedKeys,I=f.referenceWithOtherConfig,d=f.loading,o=f.allowActions,t={shouldRenderAdd:(0,y.H3)("add",o)},n={addRoot:k("setting.addResourceClassify"),edit:k("setting.modifyResourceClassify"),add:k("setting.addClassifyChild")};return h().createElement("div",{className:"classify-collection-tree"},h().createElement("div",{className:"classify-collection-tree__top"},t.shouldRenderAdd?h().createElement(E.Z,{type:"primary",ghost:!0,onClick:this.handleAddRootNode},h().createElement(ut.Z,{iconClass:"icon-icon_addx"}),k("setting.addResourceClassify")):null,h().createElement(E.Z,{type:"primary",className:"export-btn",onClick:this.handleExportExcel},h().createElement(G.Z,null),k("common.exportData"))),h().createElement("div",{className:"classify-collection-tree__frame"},d?h().createElement("div",{className:"spin"},h().createElement(F.Z,null)):h().createElement(ge,{expandedKeys:b,handleExpand:this.handleExpand,handleSelect:this.handleSelect,handleDrop:this.handleDrop,treeData:x,draggable:!0,handleRenderTitle:this.renderTreeNodeTitle,loadData:this.getResourceClassify})),h().createElement(It,{onRef:this.onRef,visible:C,title:n[c.type],operateData:c,onClose:this.handleClose,onCreate:this.handleCreate,onHandleChangePublic:this.handleChangePublic,handleParentCheck:this.parentCheck,handleChildCheck:this.childCheck}),h().createElement(be,{editData:c,loadData:this.getResourceClassify,onClose:this.handleMoveModal,modifyDrawerRef:this.modifyDrawerRef,treeData:x}),h().createElement(ae.Z,(0,M.Z)({},I,{handleReferenceList:this.handleReferenceList})))}}var A=(0,te.$j)(v)((0,m.Z)()(_)),V=e(11449),N=e(4408);class q extends h().Component{render(){var k=this.props,f=k.prefixCls,c=k.t;return h().createElement(V.Z,{pageContainerParams:{header:{title:c("customFields.classify")}}},h().createElement(N.Z,{title:this.props.t("setting.classifyLabel")}),h().createElement("div",{className:f},h().createElement("div",{className:"".concat(f,"__content")},h().createElement(A,null))))}}q.defaultProps={prefixCls:"classify-container-wrapper"};var ee=(0,m.Z)()(q)},28107:function(xe,ue,e){"use strict";var $=e(66456),h=e(55313),m=e(22385),M=e(31097),H=e(57663),F=e(71577),Y=e(71194),E=e(57016),i=e(88986),s=e(12924),D=e.n(s),S=e(91768),Z=e(10237),w=e(37055),O=e(6793),r=e(18329),te=e(95664);class K extends D().Component{constructor(U){super(U);this.onCancel=()=>{var B=this.props,J=B.handleReferenceList,G=B.onReferenceList;J?J():G&&G()},this.onContinueEdit=()=>{var B=this.props.continueEdit;B&&B()},this.initTableList=(B,J)=>{var G=this.props,ae=G.type,Q=G.operation,X=G.resourceId,z=G.t,he=this.state.resourceTypes,ne=J||Q;return this.setState({loading:!0}),Z.WY.get({url:w.ZP.deleteResource.check(),params:(0,i.Z)((0,i.Z)({},this.state.params),{},{type:ae,id:B||X})}).then(fe=>{if(fe.data.list&&fe.data.list.length===0)return!0;if(fe.data.total<2&&fe.data.list.length>0){var ve=fe.data.list[0],ge=ve.title,Ce=ve.type_name,ye=ve.create_user_name,Te="";return ne==="continueEdit"?Te=(0,O.ZT)("".concat(z("component.continueEditReminderTip")),he[ae],"\u300A".concat(ge,"\u300B").concat(Ce)):ne==="forbiddenEdit"?Te=(0,O.ZT)("".concat(z("component.forbiddenEditReminderTip")),he[ae],"\u300A".concat(ge,"\u300B").concat(Ce)):Te=(0,O.ZT)("".concat(z("component.deleteElseReminderTip")),he[ae],"\u300A".concat(ge,"\u300B(").concat(ye?z("common.creator")+":"+ye:"",")").concat(Ce),z(ne==="delete"?"common.delete":"course.cancelRelease")),ne==="move"?(E.Z.confirm({title:z("common.tip"),content:(0,O.ZT)("".concat(z("component.forbiddenMoveReminderTip")),"\u300A".concat(ge,"\u300B").concat(Ce)),okText:z("common.ok"),onOk:()=>{this.onCancel()},onCancel:()=>{this.onCancel()}}),!1):(ne==="continueEdit"?E.Z.confirm({title:z("common.tip"),content:Te,okText:z("common.cancel"),cancelText:z("course.continueEdit"),onOk:()=>{this.onCancel()},onCancel:()=>{ne==="continueEdit"&&this.props.continueEdit()}}):E.Z.info({title:z("common.tip"),content:Te,okText:z("common.ok"),onOk:()=>{this.onCancel()}}),!1)}setTimeout(()=>{this.setState({loading:!1,tableList:fe.data.list,tableTotal:fe.data.total,tableTotalPages:fe.data.pages})},300)})},this.handleTableChange=B=>{var J=this.state.params;J.page_number=B,this.setState({params:J},()=>{this.initTableList()})},this.renderFooter=()=>{var B=this.props,J=B.t,G=B.operation;return D().createElement("div",null,G==="continueEdit"?D().createElement(F.Z,{type:"primary",onClick:this.onContinueEdit},J("course.continueEdit")):null,D().createElement(F.Z,{type:"primary",onClick:this.onCancel},J("common.ok")))},this.state={loading:!0,params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0,resourceTypes:{questionnaire:this.props.t("common.questionnaire"),classify:this.props.t("course.category"),paper:this.props.t("exam.paperAddTitle"),question:this.props.t("learning.questionAddTitle"),course:this.props.t("study.course"),resource:this.props.t("common.courseware"),lecturer:this.props.t("course.lecturer"),evaluationProduct:this.props.t("questionn.evaluationTool")}},this.columns=[{title:this.props.t("common.number"),dataIndex:"userId",width:30,render:(B,J,G)=>G+1},{title:this.props.t("common.name"),dataIndex:"title",width:420,render:B=>D().createElement(M.Z,{title:B},D().createElement("div",{className:"cl-text-ellipsis",style:{width:420}},B))},{title:this.props.t("study.type"),dataIndex:"type_name",width:120},{title:this.props.t("common.creator"),dataIndex:"create_user_name",width:30}]}componentDidMount(){var U=this.props.onRef;U&&U(this)}componentDidUpdate(U){var B=this.props.onRef;B||this.props.visible&&this.props.visible!==U.visible&&this.props.resourceId&&this.setState({params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0},()=>{this.initTableList()})}render(){var U=this.props,B=U.visible,J=U.type,G=U.operation,ae=U.t,Q=this.state,X=Q.loading,z=Q.params,he=Q.tableList,ne=Q.tableTotal,fe=Q.tableTotalPages,ve=Q.resourceTypes;return D().createElement("div",null,ne>1?D().createElement(r.ZP,{visible:B,title:G==="move"?"".concat(ae("common.tip")):(0,O.ZT)("".concat(ae("component.deleteReminder")),ae(G==="delete"?"common.deletion":G==="cancelPublish"?"course.cancelRelease":"common.edit")),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},D().createElement("div",{className:"referenceWithOther"},D().createElement("div",{className:"referenceWithOther__tip"},G==="continueEdit"?"".concat(ae("component.this")).concat(ve[J]).concat(ae("component.continueEditReminderTip2")):G==="forbiddenEdit"?"".concat(ae("component.pleaseNote")).concat(ve[J]).concat(ae("component.forbiddenEditReminderTip2")):G==="move"?"".concat(ae("component.forbiddenMoveTip")):(0,O.ZT)("".concat(ae("component.deleteReminderTip")),ve[J],ae(G==="delete"?"common.delete":"course.cancelRelease"))),D().createElement(h.Z,{bordered:!0,size:"middle",columns:this.columns,rowKey:"id",dataSource:he,pagination:!1,loading:X}),D().createElement(te.Z,{defaultPageSize:10,totalNum:ne,totalPage:fe,current:z.page_number,showRenderRefresh:!1,onChange:this.handleTableChange}))):null)}}ue.Z=(0,S.Z)()(K)},9849:function(xe,ue,e){"use strict";e.d(ue,{Ej:function(){return H},kL:function(){return F},T:function(){return Y},NU:function(){return E},FL:function(){return i},fn:function(){return s},bm:function(){return D},jY:function(){return S},Vs:function(){return Z},li:function(){return w},Nl:function(){return O},YF:function(){return r},Q6:function(){return te},zW:function(){return K},Zv:function(){return se},Qg:function(){return U},qc:function(){return B},Ve:function(){return G},rS:function(){return ae},Rh:function(){return Q}});var $=e(10237),h=e(37055),m=e(38642),M={zaraFlag:(0,m.UI)("ZARA_H5")};function H(X,z){var he=h.ZP.StudyProjectList.startStudy(X);return $.WY.post({url:he,data:z})}function F(X){var z=h.ZP.Common.enroll(X);return $.WY.post({url:z})}function Y(X,z){var he=X.courseId,ne=h.ZP.StudyProjectList.studyProject(he);return $.WY.get({url:ne,params:z})}function E(X){var z=X.id,he=M.zaraFlag?h.m1.getAssessmentProjectInfo(z):h.m1.getProjectInfo(z);return $.WY.get({url:he})}function i(X){var z=X.courseId,he=h.ZP.EnterpriseCourse.addScanCount(z);return $.WY.post({url:he})}function s(){var X=h.ZP.StudyProjectList.getAccountInfo();return $.WY.get({url:X})}function D(X){var z=h.ZP.StudyProjectList.projectCertiUrl(X);return $.WY.get({url:z})}function S(X){var z=X.courseId,he=h.ZP.Courses.like(z);return $.WY.post({url:he})}function Z(X){var z=h.ZP.EnterpriseCourse.addCommentAndScore();return $.qg.post({url:z,data:X})}function w(X){var z=h.ZP.EnterpriseCourse.getCourseComments();return $.WY.get({url:z,params:X})}function O(X){var z=h.ZP.EnterpriseCourse.addCommentAndScore();return $.qg.post({url:z,data:X})}function r(X){var z=h.ZP.EnterpriseCourse.deleteComment();return $.qg.post({url:z,data:X})}function te(X,z){var he=h.ZP.StudyProjectList.projectStudyRecord(X);return $.WY.get({url:he,params:z})}function K(X){var z=h.ZP.DingSpaceId.getSpaceId();return $.WY.get({url:z,params:X})}function se(X,z){var he=h.ZP.PlatformCourse.learningUrl(X);return $.WY.get({url:he,params:z})}function U(X){var z=h.ZP.MyExamTask.examIntro({examId:X});return $.WY.get({url:z})}function B(X){var z=h.ZP.MyExamTask.examCheckStatus({examId:X});return $.WY.get({url:z})}function J(X,z){var he=CONFIG.Common.getOperateLog(X);return formDataRequest.get({url:he,params:z})}function G(X,z){var he=M.zaraFlag?h.ZP.StudyProjectList.changeCustomStatus(X):h.ZP.StudyProjectList.changeStatus(X);return $.WY.post({url:he,data:z})}function ae(X){var z=h.ZP.StudyProjectList.getProjectReward(X);return $.WY.get({url:z})}function Q(X){var z=h.ZP.subsidyGz.subsidyCourseSetting(X);return $.WY.get({url:z})}},97593:function(xe,ue,e){"use strict";e.d(ue,{N:function(){return E}});var $=e(34792),h=e(48086),m=e(37055),M={examinationPlan:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(m.ZP.enterpriseId,"/plan_exam_export"),pkReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(m.ZP.enterpriseId,"/competition/report/list_export"),pkReportDetails:i=>{var s=i.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(m.ZP.enterpriseId,"/competition/user/").concat(s,"/report/list_report")},pkReportDetailsDetails:i=>{var s=i.competitionId,D=i.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(m.ZP.enterpriseId,"/competition/user/").concat(D,"/pk/").concat(s,"/list_export")},opearationReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/tutor-manager-api/v2/").concat(m.ZP.enterpriseId,"/tutor_report_data/export"),courseDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v3/").concat(m.ZP.enterpriseId,"/courses/all/export"),taskReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/report/trainArchives/exportUserTrainArchivesList"),taskReportDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(m.ZP.enterpriseId,"/user_plans_archives_detail_export"),taskReportInfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/report/trainArchives/exportUserTrainArchivesDetailList/back-end"),personalTaskReportInfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/report/trainArchives/exportUserTrainArchivesDetailListToStudent"),selfReportedReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(m.ZP.enterpriseId,"/course_archives_export"),selfReportedReportTotalDetail:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(m.ZP.enterpriseId,"/course_archives_detail_export"),exportTrainingMonthlyReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/").concat(m.ZP.enterpriseId,"/excel/exportReport"),selfReportedinfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(m.ZP.enterpriseId,"/user_course_archives_export"),authenticationReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(m.ZP.enterpriseId,"/qualification_archives_export"),authenticationReportDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(m.ZP.enterpriseId,"/qualification_archives_detail_export"),authenticationReportDetailsDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(m.ZP.enterpriseId,"/user_qualification_archives_export"),studentFilesListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/student_archives/list_export"),studentFilesDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/student_archives/detailed_export"),staffTrainingSummaryExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(m.ZP.enterpriseId,"/getStaffData"),studentExclusiveDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/student_archives/youjia_list_export"),authInfo:i=>{var s=i.enterpriseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(s,"/dazheng/exportForm")},exportStudentRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/platform_overview/learn_duration/student_export"),exportDepartmentRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/platform_overview/learn_duration/department_export"),creditRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/score/exportScoreRank"),creditRankingDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/score/exportScoreRecord"),integralRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(m.ZP.enterpriseId,"/integral/rank_export"),integralRankingDetails:i=>{var s=i.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(m.ZP.enterpriseId,"/user/").concat(s,"/integral_export")},teacherImportPoints:i=>{var s=i.lecturerId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/teacher-manage-api/v2/").concat(m.ZP.enterpriseId,"/lecture/").concat(s,"/integral_list_export")},certificateRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(m.ZP.enterpriseId,"/certificate_ranks_export"),certificateRankingDetials:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(m.ZP.enterpriseId,"/certificate_details_export"),signRecord:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/sign/export"),operationLog:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-manage-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/log/export"),zaraOperationLog:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/").concat(m.ZP.enterpriseId,"/zara/exportReport"),loginStatistic:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/userLoginIp/").concat(m.ZP.enterpriseId,"/user-detail/export"),studyProject:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/study_projects_export"),signAnalysisExport:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(m.ZP.enterpriseId,"/offline-courses/").concat(i,"/sign-analysis-export"),signAnalysisDetailExport:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(m.ZP.enterpriseId,"/offline-courses/").concat(i.id,"/sign-detail-export"),studyProjectMonitorExport:i=>{var s=i.courseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/study_projects/").concat(s,"/user_monitors_export")},studyProjectPaymentList:i=>{var s=i.projectId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/study_project/").concat(s,"/study_project_transaction_export")},study_project_transaction_export:i=>{var s=i.projectId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/study_project/").concat(s,"/study_project_transaction_export")},courseManageSend:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(m.ZP.enterpriseId,"/courses/export"),whCourseManageSend:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(m.ZP.enterpriseId,"/courses/exportV2"),liveDetail:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v1/").concat(m.ZP.enterpriseId,"/course/live/watchInfo/export"),liveDetailProject:i=>{var s=i.projectId,D=i.courseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v1/").concat(m.ZP.enterpriseId,"/study_project/").concat(s,"/course/").concat(D,"/live_monitors/export")},graphicLessonStudentData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/course/imageText/export"),graphicLessonClientData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/course/imageText/client/export"),graphicLessonTaskList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(m.ZP.enterpriseId,"/plan_exam_export"),certificate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(m.ZP.enterpriseId,"/certificates_export"),certificatePeople:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(m.ZP.enterpriseId,"/certificates/").concat(i.certificateId,"/users/export?type=").concat(i.typeStatus,"&access_token=").concat(localStorage.token),learningTaskManagement:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/plan_study_export"),learningMonitor:i=>{var s=i.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/plans/").concat(s,"/monitors_export")},learningOffline:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/plan/employeeTrain/exportLatojaMonitorDetailList"),learningQuestionnairePaper:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/investigates/").concat(i.investigateId,"/statistics_export?access_token=").concat(localStorage.token),learningRateUser:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(m.ZP.enterpriseId,"/rate_user_export"),learningWorkUserData:i=>{var s=i.operationId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/operations/").concat(s,"/user_monitors_export")},huaLaiShiWorkUserData:i=>{var s=i.operationId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/operations/").concat(s,"/user_monitors_export")},learningFaceMonitor:i=>{var s=i.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(m.ZP.enterpriseId,"/user-recognition/course/").concat(s,"/export")},learningDetailMonitor:i=>{var s=i.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(m.ZP.enterpriseId,"/user-recognition/v2/course/").concat(s,"/export")},classLearningMonitor:i=>{var s=i.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(m.ZP.enterpriseId,"/study-record/plan/").concat(s,"/export")},employeeResult:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/plan/employeeTrain/exportTrainMonitor"),employeeQuestionnairePaper:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/investigates/").concat(i.investigateId,"/statistics_export?access_token=").concat(localStorage.token),exportExamResult:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/plan/exam/exportExamResult?access_token=").concat(localStorage.token),exportAnswerList:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(m.ZP.enterpriseId,"/exams/").concat(i.examId,"/export_detail?access_token=").concat(localStorage.token),exportAnswerDetails:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(m.ZP.enterpriseId,"/exams/").concat(i.examId,"/answer_detail_export?access_token=").concat(localStorage.token),exportQuestionAnalysis:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/plan/exam/exportQuestionAnalysis?access_token=").concat(localStorage.token),exportMakeupExamMonitors:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(m.ZP.enterpriseId,"/exams/").concat(i.examId,"/makeupExam_monitors_export?access_token=").concat(localStorage.token),submitReportManagement:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v1/").concat(m.ZP.enterpriseId,"/submit/export"),exportPracticeMonitors:i=>{var s=i.practiceId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/practices/").concat(s,"/monitors/export")},exportPk_game:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(m.ZP.enterpriseId,"/competition/user/").concat(m.ZP.userId,"/list/export"),exportPkMonitor:i=>{var s=i.competitionId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(m.ZP.enterpriseId,"/competition/").concat(s,"/user/list/export")},exportPostMap:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/post_maps/").concat(i.mapId,"/users_export"),exportPowerMonitor:i=>{var s=i.abilityId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/qualifications/").concat(s,"/monitors_export")},exportQuestionnaire:i=>{var s=i.taskId,D=i.questionnaireId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/studies/").concat(s,"/investigates/").concat(D,"/statistics_export")},exportGoodsExchangeDetail:i=>{var s=i.goodsId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(m.ZP.enterpriseId,"/integral_mall/goods/").concat(s,"/export_orders")},teacherExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/teacher-manage-api/v2/").concat(m.ZP.enterpriseId,"/lecture/export"),teacherLatojaImport:i=>{var s=i.lecturerId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(m.ZP.enterpriseId,"/lecturer/").concat(s,"/latojas/export")},clueStatis:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v1/clue/clueListExport"),postTalentAssessment:i=>{var s=i.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/evaluation-api/v2/").concat(m.ZP.enterpriseId,"/export/plan/").concat(s,"/model")},offlineCrouseCheckIn:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(m.ZP.enterpriseId,"/offline-courses/").concat(i,"/sign-analysis-export"),monitorUserExport:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(m.ZP.enterpriseId,"/offline-courses/").concat(i,"/monitors-export"),evaluateAnalyzeExport:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/").concat(m.ZP.enterpriseId,"/course/").concat(i,"/evaluate-analysis/export-evaluate-info-list"),learnAbilityRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/study-power/export_learn_ability"),learnShareRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/study-power/export_share_ability"),coachAnalysisDetail:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/tutor-manager-api/v2/").concat(m.ZP.enterpriseId,"/plan/").concat(i.planId,"/tutorials/").concat(i.tutorialsId,"/evaluation_export"),offlineCourseListExport:i=>{var s=i.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(m.ZP.enterpriseId,"/plans/").concat(s,"/offline-course/list/export")},abilityModelListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/talentability/v1/").concat(m.ZP.enterpriseId,"/post/ability_model/project/export"),selectUserTemplate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/user-center-api/v2/").concat(m.ZP.enterpriseId,"/users/").concat(m.ZP.userId,"/export_address_book"),resourceSettings:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(m.ZP.enterpriseId,"/resource_classifications/export"),evaluationResultExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/talentability/v1/").concat(m.ZP.enterpriseId,"/post/download"),learningTaskCourseExport:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/plans/").concat(i,"/courses-export"),studyProjectCourseExport:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/study_projects/").concat(i,"/courses-export"),studyProjectPracticeExport:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/study_projects/").concat(i,"/practice-export"),trainingTandardsDetail:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/train-objective/v2/").concat(m.ZP.enterpriseId,"/objective/").concat(i,"/export"),trainingDemandExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(m.ZP.enterpriseId,"/training-demands/export"),exportPlan:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(m.ZP.enterpriseId,"/plans/export"),exportAnnualPlan:i=>{var s=i.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(m.ZP.enterpriseId,"/annual-plans/").concat(s,"/export")},courseDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/course_details/export"),loginDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/platform_overview/login_detail_export"),ExamDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/exam_details/export"),medalDetailsExportData:i=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(m.ZP.enterpriseId,"/medal/group/").concat(i,"/user/detail/export"),trainDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(m.ZP.enterpriseId,"/").concat(m.ZP.userId,"/train_details/export"),exportExamList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/exam-plan/export_exam_list"),exportNewExamResult:i=>{var s=i.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/exam-plan/").concat(s,"/export-user-task")},exportNewExamAnswerList:i=>{var s=i.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/exam-plan/").concat(s,"/export_student_detail")},exportNewExamAnswerListPDF:i=>{var s=i.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-export-service/v2/enterprises/").concat(m.ZP.enterpriseId,"/exams/").concat(s,"/download")},exportQuestionAnswerDetails:i=>{var s=i.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/exam-plan/").concat(s,"/export_question_answer")},exportAnswerDataList:i=>{var s=i.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/exam-plan/").concat(s,"/export-question-analysis")},exportSubmitList:i=>{var s=i.planId,D=i.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/exam-plan/").concat(s,"/user-id/").concat(D,"/export_user_submit")},exportFaceRecognitionRecord:i=>{var s=i.userId,D=i.examId,S=i.submitId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/users/").concat(s,"/exams/").concat(D,"/submit-id/").concat(S,"/export_face-info")},exportQuestionDetails:i=>{var s=i.planId,D=i.questionId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(m.ZP.enterpriseId,"/exam-plan/").concat(s,"/export-question-user-result/").concat(D)},exportPointsDetail:i=>{var s=i.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(m.ZP.enterpriseId,"/user/").concat(s,"/integral_export")},exportPointsList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(m.ZP.enterpriseId,"/integral/rank_export"),downloadPointsTemplate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(m.ZP.enterpriseId,"/integral/import/download_template"),employeeTrainReportExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/plan/employeeTrain/authority/exportTrainMonitor"),exchangeRecordListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(m.ZP.enterpriseId,"/integral_mall/goods/export_orders"),exchangeGoodRecordListExport:i=>{var s=i.goodId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(m.ZP.enterpriseId,"/integral_mall/goods/").concat(s,"/export_orders")},exportLotteryOverview:i=>{var s=i.lotteryId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(m.ZP.enterpriseId,"/lottery/").concat(s,"/prizeOverview/export")},exportLotteryDetailList:i=>{var s=i.lotteryId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(m.ZP.enterpriseId,"/lottery/").concat(s,"/prizeDetail/list/export")},taskDownLoadImport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/evaluation-api/v1/").concat(m.ZP.enterpriseId,"/evaluation/relation/download"),pointCourseDetailsExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/ydt/records/export"),exportBelleGroupUsers:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/user-center-api/v2/").concat(m.ZP.enterpriseId,"/users/").concat(m.ZP.userId,"/group/export_address_book")},H=M,F=e(10237),Y=e(31457),E=i=>{var s=i.page,D=i.props,S=i.query,Z=S===void 0?"":S,w=i.rest,O=i.sendType,r=O===void 0?"get":O,te=i.success,K=i.fail,se=K===void 0?"":K,U=H[s](w)+(r==="get"?Z:""),B=F.WY[r];B.call(F.WY,r==="get"?{url:U}:{url:U,data:Z}).then(J=>{if(U.includes("/v3/")&&J.success==="true"||J.data.code===0||J.data.code===200||J.data.code===2e5||J.data.code==="200000"||J.data.resultCode==="200"||J.data.result_code==="200")(0,Y.Pp)(D),h.default.success(D.t("study.compoundSucceed")),te&&te({code:200});else{if(se){se(J);return}h.default.error(D.t("community.isError"))}})}},91648:function(xe,ue,e){"use strict";e.d(ue,{Z:function(){return $}});function $(h,m){var M,H,F,Y,M;if(H="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),M=[],F=void 0,m=m||H.length,h)for(F=0;F<h;)M[F]=H[0|Math.random()*m],F++;else for(Y=void 0,M[8]=M[13]=M[18]=M[23]="-",M[14]="4",F=0;F<36;)M[F]||(Y=0|Math.random()*16,M[F]=H[F===19?Y&3|8:Y]),F++;return M.join("")}},86726:function(xe,ue,e){"use strict";e.d(ue,{V9:function(){return h},H3:function(){return m},e:function(){return M},F:function(){return H}});var $=e(93485);function h(F){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],E=[];function i(s,D){var S=(0,$.Z)(D),Z;try{for(S.s();!(Z=S.n()).done;){var w=Z.value;if(w.key===s){E=w.actions;break}w.children instanceof Array&&w.children.length&&i(F,w.children)}}catch(O){S.e(O)}finally{S.f()}}return i(F,Y),E}function m(F){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],E=Y.find(i=>i.key===F)||{};return E.checked||!1}function M(F){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],E=!1;function i(s,D){var S=(0,$.Z)(D),Z;try{for(S.s();!(Z=S.n()).done;){var w=Z.value;if(w.key===s){E=w.checked;break}w.children instanceof Array&&w.children.length&&i(F,w.children)}}catch(O){S.e(O)}finally{S.f()}}return i(F,Y),E}function H(F){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],E="";function i(s,D){var S=(0,$.Z)(D),Z;try{for(S.s();!(Z=S.n()).done;){var w=Z.value;if(w.key===s){E=w.id;break}w.children instanceof Array&&w.children.length&&i(F,w.children)}}catch(O){S.e(O)}finally{S.f()}}return i(F,Y),E}},69164:function(xe,ue,e){"use strict";var $=e(34792),h=e(48086);function m(M){M&&M.length>0&&h.default.success(M)}ue.Z=m},65202:function(xe,ue,e){"use strict";e.d(ue,{p:function(){return $}});function $(){return localStorage.getItem("themeColor")||"#516AE6"}},25547:function(xe,ue,e){"use strict";e.d(ue,{Yd:function(){return m},VX:function(){return H},lK:function(){return F},NP:function(){return Y}});var $=e(88986),h=e(93485);function m(E,i,s){var D=0;function S(Z,w){for(var O=0;O<Z.length;O++){var r=Z[O];if(r[E]===i){D=w;break}else r.children instanceof Array&&r.children.length&&S(r.children,w+1)}}return S(s,1),D}function M(E){var i=1;function s(D,S){D.forEach(Z=>{S>i&&(i=S),Z.children&&Z.children.length>0&&s(Z.children,S+1)})}return s(E,1),i}function H(E,i,s){E.forEach((D,S,Z)=>{if(D.id===i)return s(D,S,Z);if(D.children)return H(D.children,i,s)})}function F(E,i){var s;function D(S){var Z=(0,h.Z)(S),w;try{for(Z.s();!(w=Z.n()).done;){var O=w.value;if(O.id==i){s={id:O.id,name:O.name,children:O.children,parentId:O.parentId};break}O.children&&O.children instanceof Array&&O.children.length>0&&D(O.children)}}catch(r){Z.e(r)}finally{Z.f()}}return D(E),s?(0,$.Z)((0,$.Z)({},s),{},{children:s.children instanceof Array?s.children:[]}):{children:[],id:"",name:""}}var Y=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",S=[...i];function Z(w){Object.keys(s).forEach(O=>{var r=O,te=s[O];w[te]=w[r],w[D]=w[D]&&w[D]instanceof Array?[...w[D]]:[],w[D].length?w[D].forEach(K=>{Z(K)}):delete w[D]})}return S.forEach(w=>Z(w)),S}},2396:function(xe,ue,e){"use strict";e.d(ue,{fA:function(){return m},kh:function(){return M},kR:function(){return H},rw:function(){return Y},$s:function(){return E},q_:function(){return i},QK:function(){return s}});var $=e(6793),h={limitWords(D,S){return{rules:[{max:D,message:"\u6700\u591A\u8F93\u5165".concat(D,"\u4E2A\u5B57")},{required:!0,message:S||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},limitTagsLength(D){return{rules:[{max:D,message:"\u6700\u591A\u8F93\u5165".concat(D,"\u4E2A\u6807\u7B7E")}]}},required(D){return{rules:[{required:!0,message:D||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},requiredWithValidator(D,S){return{rules:[{required:!0,message:D||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0,validator:S}]}}},m={score:/^\+?[0-9]*$/,positiveInteger:/^[1-9]\d*$/,examScore:/^[0-9]+([.]\d{1})?$/,url:/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/,httpsUrl:/(^https):\/\/([\w.]+\/?)\S*/,tagName:/^[\s　]|[ ]$/gi},M=D=>isNaN(D)||!D||!(D>=0&&D<1e3)||!m.score.test(D),H=D=>isNaN(D)||!D||!(D>-1e3&&D<1e3),F=D=>isNaN(D)||!D||!(D>=0&&D<1e3)||!m.examScore.test(D),Y=(D,S)=>{for(var Z=0,w=0;w<D.length;w++){var O=D.charAt(w);if(O.match(/[^\x00-\xff]/ig)!=null?Z+=1:Z+=.5,Z>S)return w}return 0},E=D=>{for(var S=0,Z=0;Z<D.length;Z++){var w=D.charAt(Z);w.match(/[^\x00-\xff]/ig)!=null?S+=1:S+=.5}return S},i=(D,S)=>{var Z=D.target.value,w=D.target.dataset.originLength;if(D.target.dataset.originLength||(w=S,D.target.dataset.originLength=w),!!w){var O=E(Z);O*1<S*1?D.target.setAttribute("maxLength",S*2):D.target.setAttribute("maxLength",S)}},s=(D,S)=>{var Z="";return(!D||!(0,$.fy)(D))&&(Z=S),Z}},26885:function(xe,ue,e){"use strict";e.d(ue,{mw:function(){return w},kr:function(){return O},w8:function(){return r},Sk:function(){return K},$f:function(){return se}});var $=e(34792),h=e(48086),m=e(88986),M=e(57361),H=e(9754),F=e.n(H),Y=e(76651),E=e(78001),i=e(37055),s=e(10237),D=localStorage.getItem("corpId"),S=(U,B)=>{wx.config({beta:!0,debug:!1,appId:U.corpId||localStorage.getItem("corpId"),timestamp:U.timeStamp,nonceStr:U.nonceStr,signature:U.signature,jsApiList:["openDefaultBrowser","innerSaveWebPerformance"]}),wx.ready(()=>{B&&O()}),wx.error(J=>{console.log("error",J)})},Z=(U,B)=>{wx.agentConfig({corpid:U.corpId,agentid:U.agentId,timestamp:U.timeStamp,nonceStr:U.nonceStr,signature:U.signature,jsApiList:["openDefaultBrowser","selectExternalContact","selectEnterpriseContact","selectPrivilegedContact","createChatWithMsg","openEnterpriseChat","openExistedChatWithMsg"],success:()=>{B("success"),(0,Y.Qm)()._store.dispatch({type:"user/setWxWorkApiFlag",payload:{wxWorkApiFlag:(0,Y.Qm)()._store.getState().user.wxWorkApiFlag+=1}})},fail:J=>{J.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},w=(U,B,J)=>{window.wx.openEnterpriseChat({userIds:U.join(";"),groupName:B.title,chatId:"",success:function(ae){var Q=ae.chatId;window.wx.invoke("openExistedChatWithMsg",{chatId:Q,msg:{msgtype:"link",link:{title:B.title,desc:B.desc,url:B.url,imgUrl:B.imgUrl}}},function(X){X.err_msg=="openExistedChatWithMsg:ok"&&J&&J(Q)})},fail:function(ae){ae.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},O=function(){var U=(0,M.Z)(F().mark(function B(J){var G,ae,Q,X,z,he,ne=arguments;return F().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return G=ne.length>1&&ne[1]!==void 0?ne[1]:()=>{},ae=i.ZP.util.getAppSignature(),Q=window.location.href.split("#")[0],X=J||i.ZP.enterpriseId,ve.next=6,s.WY.get({url:ae,params:{enterprise_id:X,url:Q,batch_id:""}});case 6:z=ve.sent,he=z.data,Z(he,G);case 9:case"end":return ve.stop()}},B)}));return function(J){return U.apply(this,arguments)}}(),r=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(navigator.userAgent.toLowerCase().indexOf("wxwork")>-1){var G=i.ZP.util.getCorpSignature(),ae=window.location.href.split("#")[0];s.WY.get({url:G,params:{enterprise_id:i.ZP.enterpriseId,url:ae,batch_id:J}}).then(Q=>{var X=Q.data;S(X,B)})}else B&&O()},te=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=CONFIG.util.getSignature(),G=window.location.href;request.get({url:J,params:{corpId:D,url:G,uuid:""}}).then(ae=>{var Q=ae.data;S(Q,B)})},K=U=>{var B=U.userIds,J=B===void 0?[]:B,G=U.deptIds,ae=G===void 0?[]:G,Q=U.mode,X=Q===void 0?"multi":Q;return new Promise((z,he)=>{window.wx.invoke("selectPrivilegedContact",{fromDepartmentId:0,mode:X,selectedContextContact:0,selectedOpenUserIds:J||[],selectedTickets:ae||[]},ne=>{ne.err_msg==="selectPrivilegedContact:ok"?(typeof ne.result=="string"&&(ne.result=JSON.parse(ne.result)),z(ne.result)):ne.err_msg==="selectPrivilegedContact:cancel"&&he("cancel")})})},se=U=>{var B=U.type,J=B===void 0?"employeeRange":B,G=U.result,ae=G===void 0?{}:G,Q=U.user,X=Q===void 0?{}:Q,z=U.reserveUser,he=z===void 0?[]:z,ne=U.rangeType,fe=ne===void 0?"all":ne,ve=U.hasDefault,ge=ve===void 0?!0:ve;return new Promise(Ce=>{var ye=ae.userList,Te=ye===void 0?[]:ye,Ie=ae.selectedUserCount,_e=Te||[];if(J==="employeeRange"){var Oe=X.unionid,be="";!Te.length&&Ie?(ge&&(_e.push({id:Oe,unionid:Oe,openUserId:Oe}),ae.userList=[{id:Oe,unionid:Oe,openUserId:Oe}],ae.selectedUserCount+=1),be=!0):be=!1;var Ze={dept:[],post:[],group:[],user:_e.map(me=>(0,m.Z)((0,m.Z)({},me),{},{unionid:me.openUserId,id:me.openUserId,user_id:me.openUserId,source_type:"wx_sync"})),classes:[],cluster:[]};fe==="onlyDeptUser"&&(Ze={dept:[],user:_e.map(me=>(0,m.Z)((0,m.Z)({},me),{},{unionid:me.openUserId,id:me.openUserId,user_id:me.openUserId,source_type:"wx_sync"}))});var We={isShowType:be,qyWeChatVo:JSON.stringify(ae),rangeList:Ze},we=ae.selectedUserCount-Ze.user.length;we>0&&(be&&ge?h.default.warning(E.Z.t("component.selectedErrorTips",{count:we})):h.default.warning(E.Z.t("component.selectedErrorTips2",{count:we}))),Ce(We)}if(J==="supervision"){Te&&(_e.find(me=>me.openUserId===(he[0].unionid||he[0].user_id||he[0].name))&&(ae.selectedUserCount-=1),_e=_e.filter(me=>me.openUserId!==he[0].unionid&&me.openUserId!==he[0].user_id&&me.openUserId!==he[0].name).map(me=>me));var Ve=_e.map(me=>(0,m.Z)((0,m.Z)({},me),{},{unionid:me.openUserId,id:me.openUserId,user_id:me.openUserId,source_type:"wx_sync"})),Ge={qyWeChatVo:JSON.stringify(ae),user:Ve},Ye=ae.selectedUserCount-Ve.length;Ye>0&&h.default.warning(E.Z.t("component.selectedErrorTips2",{count:Ye})),Ce(Ge)}if(J==="normal"){var je=_e.map(me=>(0,m.Z)((0,m.Z)({},me),{},{unionid:me.openUserId,id:me.openUserId,user_id:me.openUserId,source_type:"wx_sync",qyWeChatVo:JSON.stringify(ae)})),qe={qyWeChatVo:JSON.stringify(ae),user:je},De=ae.selectedUserCount-je.length;De>0&&h.default.warning(E.Z.t("component.selectedErrorTips2",{count:De})),Ce(qe)}})}},4412:function(xe){xe.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAACPCAYAAAD0gYXiAAAW/ElEQVR4Xu2dCZAcV3mA/9fHaGZ2V9qVdlejvbQ7O7NaWdqNTbgxlmVbxkeME3AcHJwqKhCC44AJV0zZjg8ScwRDqLIMwUnsJEAKF4aCGEIigyVjAthQMTLWbcnyCmmtY6/Znav7vT/190yvenp7prtHM5Lm6NLUaHve1f/X//W6+zWD5lazEmA1O/LmwKEJr4ZPgia8JrwalkAND72peU14NSyBGh56U/N8wkNE6ZVXXrlIUZQrEPG5vr6+H/tsomLFm/A8iHJ6enowlUptYYxdwTm/HABWIaJZ89uqqn4sEokc8tBURYs04TmIc2ZmpiOTyVwmhLiCgAkhYlTMBObwnQaALwaDwfu7u7vnK0qoRGNNeDkogZmZmTdrmmZoFyL+rhBCLgbMCs8G8igAfHJgYODfGWOLqlktmA0JDxHZ9PT0GCJuAQCC9VZEbHGCYgJ00rpimggAzwohbhsaGvp5tcBRuw0Hb3p6+osAcBMiribhu0FxBJRKA2Q1wOWtBfVtZUnzvp7JZG5ft27db6sBsaHgzc7OXiuEeKIYtKJmUteBvTwBbM8BkPYeBPbKEQBZBn3zm0G77GJAVTHYOIFmjJEP/AwiPjA0NES+sWJbw8BDRHV2dvY3iDhSwmflANDn2KsAew4YwNj+l4Fls45CxxXLIft7l4N+0RggnHZzDifIywDw8Wg0+q1K0WsYeHNzcx/lnH++aNQ4MwewZz/A7gM5aHMJXzIWg32Quf4q4P1rSkWlwBjbAQC3RaPRX/vqwKFwQ8BLJBLdnPN9ALCiQOt+OwnwzLMAu/fnNK0Cm/a634Hs1ZeBaGtZYkpNbWSMcUT8J0S8Kx6Pnyi324aANzc391VE/LMCU6ZzwPu+ADB5vFzZFa2HywKQvfxiyL719QCKAkKIxbI2k70tHo9fWe4A6h7e9PT0RbIsP2fmbabZFD/6CcA3v1eu3DzVEys7IHPdFaBtGClmSlOyLK8sN5Cpe3hzc3M7EPGSAl+XmAdx52cBkilPEM60kB4bhPR1W4BHupZAFEJsGRkZebKcPuoaXjKZ/ENd1x+zBynia48D7vhZOfIquw5KDFI3vxOyF8QLTCgifjYej99eTsN1C29iYiLU0dGxWwixtgDexFHgn/oCgKj67NUSHtqFGyB50/WG9lkmtn8Vi8Ve24RnkcDCwsJdQoj77Ikz//yXAfccKEdWZ1xHtLZA4s4PLWaD+bGJYDDY3dfXd8pvB3Wpeclksg8R9wghjHjdBCh+tRP4Q4/6lVFFy89/+H2gR7rsacQfxeNxw7z72eoV3teEEO+2mCbArAbanZ8BODnlRz4VL5u+9nLIXPIGu+l8OBaLvd9vZ3UHT9O0N2Wz2Z/SlQOryeTffxLEt3/gVz4VL6+NRCH53nfZ4b0ci8WG/HZWV/AIWCqV+gUivq4gGZ6ZBe2TnwbIZPzKpyLlWVsLKBvXgzq2HpT1cTiSSoKQcqK3WId4LBbz5YzrCl4qlXoPIj5ii+ZAe/jrIP73uYqA8NSIqoIyGgN1/AIDmDzYD0ySFqtO7t4DyWWBgpSBMXbL8PDwVzy1ny9UN/BOnDjR1trauhcR11i1Thw8DNqn6BJeFTfGDEAmLALHAqfh2HuenZyEqVSqwHQyxh4fHh6+wc8o6wZeJpMZFULstqcG2fu/BGLfQT8y8VRW6u4EZWx9DtjGUZDaWkvWo3HxiaOgvbAb0ocnYObqSxfNZn7M08PDw52MsdMToS4jqRt4dJypVGoCEftMX0JCyX5uKyBdNTjDjbWEQdk4etoURrpdW+RT06C/sBu0nbsNaDgzmwPGGCT+5q9AhJYV+D1Jkt4QjUafdW243swmHU8mk3mEc/4eKzz+xJOgP/6EV3mcLqcqoKyLGT7L8FvRtQV+y6lBkUqDvmsvaDt3GbDEkWNF+03e/A7QxkYLTKckSXdEo9H7vQ623jSPcruvmfDom3xeli79uG0MQF7bn4sIyRSOxoFZggqn6sg56PsPgfbCLtB37gb9wEEA7s3qZd/4Gkj9wVX2iertsVhss9tQzd/rCh7dVJROp49RyrAIUAhIf/AOgIXkEpmwzpWgjl0A6vh6UDeuB2lFm7vf+u0k6C/sypnCXXsB6GakMjaxqgMSn7hl0Wzm/V4mHA6v7OnpWTpYhz7qCh4dXzqd/rUQYtxqOrWtj4L45fPAwqGc38oHGvKa1a5iF5QjGj4rZwpxasa1jtcCidtvBd6+vMDvAcDVsVjsh17aqEd4DyDiRwqumu89AIHWVlCGB139FqYzoO3al4O1czeIiarctQeiYwXMf+zPARWlwHQyxu4eHh6+r1HhXY2IPyhIGRLzEF7tHB0afuullw2fZfguSis49yK7MyqTooBlfL3d5yWDweBob2/vhJfG607zEDGcyWSmhBBGHG5qYFDTQW5fYciEH51cjAj1F/cCnqUr6iYQPToAyQ/8id3f0d/3Dg8P3+MFHJWpO3h0UKlU6ilENLJgUwPZ7n3An33eMIV46txdWaAcL3nbe4H35PytxUJMhEKhUa/BSj3DuwMA/tbq9/hzz4O29RGvJ3XVymlveA2kb7hmidYxxv54aGjoP/x0XJeal81mX885p6sLp4U0vwAZShlOP1fnR04VKYvBZZC8/VYQLWG71v00Go1e7LeTuoSHiHI6nT6BiB1W05S59wHAQ6/4lVHFymffvgWyl7zRrnVCkqTXr1279ld+O6pLeCSEdDr9OCK+w6p92reeAP7ENr8yqkh50bUKUh//AGD+0pDlOt6/DA4OvrecTuoZ3i2I+JDV74ld+4yJ6nOxpd93E/D1udv+LGOaC4VCI6tXry7rXvt6hhdDxP0F+Z6uQ/bL/wp0I9LZ3PhoDDLvf/eSG24B4K/Xrl37uXLHUrfw8qbzkBBi0BaSg9i9H/RvfAfwCD2FXN2NzGTmE7eA6O60wzswMDCwgTHm/OyYh2HVO7yHEfF99tsijL85B77jZ8C/818A8wseRFVeEX3TG0H7/dzVA+vdbLIsX9/b23tGD0vUO7y3AcB3rbMtNp8DuJAE/t3/BvHjZwAsT/OUh6qwFraEIXPHhwBDQeMH82khSZK29fX1lf10kNlLXcPLm86YEIIu6F1XMFltyQENwR6dBPHN7wH+Zs8ZccOOdhDrhkGsiwKPRwFaw3at04UQF65du/bFM+qoXqfHnISSTqe3cM7/AQAuWKJ9FpMmdu4yIMKrHp95DAVBjEQB1w0DrouB6Fppjyjtvu7B/v7+D54pOKpf95pnFRIiKqlUilKIv0fEZQUzMFZN5BzEj54BpJzQfrFVlgGjA4CjMYDRGIj+XgCJlXyU2RIwnaJn4vv7+ysyudpQ8EiIx48fv0SW5e2yLDNZNtbJKb6cBz3H950fAhw6DEA52mgMMD4EEAgUmELHgMg6NZf/P2PsL3t7eyuWaDYUPFr07dSpU78EgIsMs8MYKIoCkiQVXU/Ffithqb+dfmOMzQohtgPAtp6enq/Q8+iVMJkNZzZPnTpFz6V/1S48gkdaSDCLmVIf0DTG2M+FEE/SZ9++fc9u3rxZrxQwazvnjeY99dRTfYFAYGtbW9vbq3KgjEF3d7cBqUhAA5xzWL58+aImegFGVhcAdiGiAUuSpO1na/G48wLe9u3b3wQAtPRhpq2tzXiStdLbihf2Qks4DPCW1wFYnhswfd7x48cNeAS3vb0dWlpaigYhuq6nZVmmxXC2EbSurq7qT9U4COScw3v66affwzknX7BMVdXD1YCnpDLQ/eCjwNIZwN41ADdeBzASXRTH/Pw8zM3NFYgnEAhAR0cH0Dcl15lMBpLJ5MmTJ092ptNpMrGU/N+8efPms7ZEo53fOYP32GOPyd3d3TQp+xFzUNWC1/nDHbDsucIFh/CijQDvvAZ4+wqKQAumrqxCUlUVNE0zdmWz2cPz8/OLloEx9gIAXL9p06azvlDqOQtY7rnnHunSSy/9PgBcZRNUxTUveGIKVv3j152voCsKzNz2p7AQzk1fuW12ePnyJxljV27atOn/3OpX+vdzonkvvvhia3d3t7G4l3Wylv4UQhSMyWuobrZla48azIEz/hUu7GbUsUSY1vEUCfux4G7s/Pg553eOjY39XaXhuLV3TuAdP368VZKkxBJB2+Ybi4ErCsqlvh2O3/6LwW0oeKR5kUhkEZ5ViE55lpPQvOyjtszczX4ieKlvnvlOE9rW+rquN47m0ZrOU1NTxgPi9qklN9NlN7VeoLhpsFubbvUbFl4pWE5w/cAqVd/LSeK1PgB8eHR09EtuPqrSv58Tn0eaNz09nbGbSyfzWUkhu2mQV1Nqb4cxduu6deseqjQct/bOKTwnc1XM/7kJ1ouWlmrbS/1iJ1LDwvNiNq1lstksLCwsFCxAav5OZ+JKkEDqWuV40lLd2dn8c+GWO6cpqKFpMZpNcfN/Rfx0Y2nezMyMY8BSyqfpug4nT54sak2W/2YftP3nNsDNbwG45jKA4Onkm9qluuZsiVMjy5YtA5pR8QrQUq4x4fnxaclkcskcpAlB1nRYvfXfgCXyU41trYDXvw3gTa81rnRT3ZmZ0k+1kvaFw7l7TooBdNI8MpvxeLxxfN7s7OxiwOLVF5HZm5pyvoNg5Y5fQOjpXyxVqIFeEDdeB6+2BJeYWnth0rpgXluLBVNOY21IeG5BiFN0SLP/pEXWLTCXgE7SOt35InXihmtgbr3xLqeiG12QJa2zX1UvNkarBjYcvLm5uSWa5zWHo0s0dO3NFKCcWAApf+OsPemn5YG17s4lZtBuFgmaFxNeJJ1pLLNphVeOBpYRVJT0ZX5SFIeyjQfPtGHFkmcvmlhKW5yCCy9tepk8sJVpwiulgaUEWi5AL2ay1Alg+a2x4CUSicU8z4vw3cykn6kvN2iUtDu9haRYPURsLHjz8/OuAUu5c51e8jQ3gMVOliLW4dbh4eHGyfOs8Lxqnt2EeQkySmlsBes3FryFhQVD87wI0EmT/GhOJTW4SL+NCc+rLzuLkaNjvudysjQePK/5nR9z6SdiLbd/ez0KWBrK55HZdMvzKqVtXn2qnxzQaoqFEI0FL5lMlp0q+PGT5YLz0ofZNs1tDg4ONk60WQyeqY1+8iy73/RjZksFQ141seHgpVKponmek7n0E12WW9/Bl5nnkmMQY9HOxtI8Kzy/gUO5vrAUHC9a5lQ/f19oY8FLp9OeZ1is/qccDfSajpQDkNomszkwMFB/Pm9qaoqWIvwLXdcv0TSti3N+Qtf1n65Zs+bGcoVVqXnMUhrs5SSxBix1BY9WXkgmk1/inN+iaRqjm4esn56eHs/JcKWEXO5Mi1vECgD1pXnpdHor55w0rgCa+Xdvb6/r8hdO5s5LCF8Kkpf6fhP9uoKnadrFiPi0k8ZZ4fkVkh8zWyVIxj0u5rgpnaEPIj7POf/nVCr16IYNG87ak7JVuWOac/4NXddvKqZ1tJ80z9zcoJQC4TVSPVM/SbcF0scEZn7TvTQWiK/quv6h0dFR3+9/LchJPP5RFXhCiCOapvUWg0cH7GQ2ywVRbfNKa7XQx7zxqRRAIQQ9IHrH+vXrP+2RQdnFqgKPc57RdT1QSvP6+ow3pS2aIDftc9PSatUnaOaiAh7hEWQC+K4NGzZUVQOrAs9N8whqf3+/r4DFiw/zUsZPCkBlzTuoi4FzMp/5sq8yxmLV9IFVgefm88hsmprnxxd50S4v/tErZLvWlQBV4AstfvCD4+PjD5ZtF10qVgWel2hzYGDAVfO8gPCrSV7AmWVCoZDxWLSLjzNuALaXyWvfk+Pj41tqCh4N1i3Pc4JXbsBSLcjmKkhWMHZQJcAR0KPj4+Onw+oKU6yK5uUhlJxhIXhOAYsJ0OtsSLHyXudDS/XX2tq6RKtcYC1qIJVDxOzY2FjuxbBV2KoCj9Yq2bdvX08mkxlub2+/MhAI0HrKcSFEq6Zp85qm7R8cHHwNvXnkfNM26wllDVa8+jurliLiSVVVLxwZGTnKGDu9CEyFQFYU3sGDB1enUil68wMt8VTyjIvFYh+VJMlYMtgKsJQmeAluvPjAUoGPtT49bGn3eU6aV2wfALzIGKP1remugcOhUGh/NBot6wUYTrzPGN7+/fuXCSGGhBAxWZZLv3TVMoKWlpb+SCRyFyK2Wk2c3yvopcB7CU6c6pv7rMl5Mc1zSiFMmIyxR1VV/R+b4OcQ8SVJkg7F4/HF+3jKUcay4U1OTraQliHigBAiN+HnsplrXZqPZ7W2tna2t7dfyxgjB7jYhk+YdAwsv6xU7jt3hVSi/yO1i8AQkPYtlhUCpdw+WmcbGa23Y5RHkauX39/W1tZOV0j85nmIOK0oyq2SJKVMsViPX5IkwRh7hbQxEomU9WIH3/Bo6an5+flhxljkfFhgXJIkhTGmIKKa+5ZUxoTxjUjfqJLwcx+mInIFABWdiwCC8bsiBCpC5yrtFwiK4JoqBCgCudrR3t4XiUQu5JwzH34PJUn6dCAQ+InbCZ1bRwgnU6nUS34Tes/w6CCPHDkyiIg9jM7sEhvNoFg3Mj/Wrdjv9v3FurC2xzmXA4EAaYZKH0lSjf9LElOE0FXOCV4OKM+DBAEqMlS4pqkCqB6oIHiuDRSK4Ej7FeRC5ZyrkcjqkY6OjnUmwFLpApEAgIdVVf2GOX4vx0/HTqlFNBo9xBjztKyxJ3iTk5PdmUymPxAIOK/x63J6eYVlP0gPZy1ZSNIIVQimShKqTFEMCKRxBkSU6NvQQAOeAZOrKDFF17QAlWGkfQRRz50A9OEoVBBC4VxQGaW9fUV/Z+eqDRSIFcv7EPEUY+yBcDj8o3JO1vzkty7L8pFIJHLc7fhLwiNtm5yc7GOMeQ5E3Dqsxu9kOjmXVEniqiQRLPpwVbAcPGOSPA/UMKOcq8hIM3mA/i8AjH2L4AwN5CqBQ2qHG54zoUhysre3p0VRlI1CiGFd1+nlitOc85cA4KlgMEjvBvL0gno3OSBiIhKJHCmlhUXhHT16NBwOh1dns9lCm+fW6zn4nbEgkySNTFyAS5IqcQNeAFGoTJVU1ISqaVqAwOqY00oqC3mQBBck0JBDGplIyoxRADGvBINzKmNz4XD4rF1gtYovEAjoyWTy1WIvAXaER6+rnpqaoveqeDKr54DXki51XVYJoCzLAdJCxpgqRCaQ00IyfVyWJJkjIhdCaEJkNQA1raqBZCgkJ4U1RzkfDig/hlAohKFQaIoxtkSjl8BBxJZkMrmc6iaTSUd44XDYcbbALF/sd1MmfsvZZenUfjqdljVNUyUpJMOy/EmXAQyQYeRcDwaDi0FANfq3yqsax9/Z2TnLchZhcSuAMzExEWpvb28rBo0maq0brQHmZzPrF6tnHnSzf2el6e7unmOMLeaNi/DIDyQSiRV+YDTLnn0JtLW1kQYay80b8PKzE8tnZ2cdZ0oSiYSj+Wxrayswn2Y5r/vNQzfzxnyOtEQizf5Py7+lpYV3dHSQBhrTRXDo0KHgihUrqnbp4uyfn/XdI63bNjQ0lDbg0ZRXV1eX5yM+caLwxYBe65Zbzz6wctspt9752D+9r4gmY5Vjx47lVgm1bWvWrCkwi8eOHTNgF9vvmb7Hgs3+S8pfI3i0Oqjh6w4cOOBJrLFY4Qp6Zj37fk+NWQo1+/clf2Fonl8hN8ufHxIgeNK9995bMJq77777rI6u2X958q+Z6a+zejbVSGdNeDUCymmYTXhNeDUsgRoeelPzmvBqWAI1PPSm5jXh1bAEanjoTc1rwqthCdTw0Jua14RXwxKo4aE3Na8Jr4YlUMNDb2peE14NS6CGh97UvCa8GpZADQ+9qXlNeDUsgRoeelPzmvBqWAI1PPSm5jXh1bAEanjo/w+0S4IKs9Wq0AAAAABJRU5ErkJggg=="}}]);
