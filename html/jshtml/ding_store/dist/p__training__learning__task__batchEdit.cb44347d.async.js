(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[2568],{53009:function(oe,V,d){"use strict";d.d(V,{TD:function(){return k},$S:function(){return f},aI:function(){return X},Bg:function(){return I},tT:function(){return W},XN:function(){return v},YK:function(){return L},$x:function(){return A}});var U=d(81211),c=d(88986),F=d(78138),g=d.n(F),te=d(78001),b=d(76651),j=d(38642),E=d(6793),o=d(37055),l=d(75205);function h(i){return i.map(_=>({name:_.name,id:_.id,proportion:0,disabled:_.totalCount===0||_.total_count===0}))}function y(i,_){return _.map((C,p)=>(0,c.Z)((0,c.Z)({},i[p]),{},{disabled:C.total_count===0}))}var S=i=>{var _=0,C=i.checkedValue,p=i.fillBlank,m=i.shortAnswer;return C===2?p.checked&&!m.checked?_=3:!p.checked&&m.checked?_=4:_=2:_=1,_},R=i=>{for(var _ in i)i[(0,j.FI)(_)]=i[_];return i},k=(i,_,C,p,m,s)=>{var e=i.map((t,T)=>{var M=t.list.map((r,n)=>{var u,a=r.data,w={};switch(r.componentName){case"CoursewareSelector":w={courseId:r.id,courseSort:n,courseType:3,flag:1,mappingId:r.mappingId?r.mappingId:""};break;case"CourseSelector":w={courseId:r.id,courseSort:n,courseType:1,flag:1,mappingId:r.mappingId?r.mappingId:""};break;case"AddExam":w={courseSort:n,title:a.title,type:"ex",cheatFlag:a.cheatFlag.isChecked?1:0,faceRecognition:a.cheatFlag.faceRecognition,examDuration:a.examDuration,summary:a.summary,flag:2,mappingId:r.mappingId?r.mappingId:"",courseId:r.id,markType:S(a.markType),paperId:a.questionsMode===1?a.fixedQuestion.id:"",paperTitle:a.questionsMode===1?a.fixedQuestion.name:"",passLine:a.passLine,questionBankList:a.questionsMode===1?"":a.randomQuestion.bankQuesitonVoList.map(Q=>Q.id).join(","),questionMode:a.questionsMode,showKnowledge:a.knowledgePoints===1?"show":"hide",repeatExam:a.reExam.isChecked,multipleCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleCount,multipleUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleScore,fillBlankCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.fillBlankCount,fillBlankUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.fillBlankScore,fillBlankType:a.questionsMode===1?1:a.randomQuestion.bankQuesitonInfo.fillBlankType,shortAnswerCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.shortAnswerCount,shortAnswerUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.shortAnswerScore,shortAnswerType:a.questionsMode===1?1:a.randomQuestion.bankQuesitonInfo.shortAnswerType,singleCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.singleCount,singleUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.singleScore,trueOrFalseCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.trueOrFalseCount,trueOrFalseUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multipleMissedScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleMissedScore,totalScore:a.questionsMode===1?a.fixedQuestion.tableList.totalScore:"",answerParsing:a.reExam.isChecked?a.reExam.allowed.end:a.reExam.notAllowed.end,passingScore:a.questionsMode===1?Number(a.fixedQuestion.tableList.totalScore*a.passLine/100).toFixed(1):60,cutScreenCount:a.cheatFlag.switchNum!==null?a.cheatFlag.switchNum:-1,reExamRule:a.reExam.allowed.reRule,reExamNumber:a.reExam.allowed.reRule===2?a.reExam.allowed.reNum:0,scoreRule:a.reExam.allowed.record,viewRule:a.reExam.allowed.viewRule,proportional:a.questionsMode===2&&a.isOpenDrawQuestions?a.proportional:[],anonymousMarking:"".concat(a.markType.anonymousMarking),show_result:a.reExam.show_result};break;case"AddNewExam":var O=r.data,N=O.paperInfo,x=O.exam_times,ee=O.cut_screen_times,J=O.random_order,Z=O.mark_setting,ae=O.result_visible,Y=O.face_recognition,q=(0,U.Z)(O,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);w={courseSort:n,flag:15,courseType:15,type:"ex",courseId:r.id,mappingId:r.mappingId?r.mappingId:"",new_exam:(0,c.Z)((0,c.Z)((0,c.Z)({},q),(0,l.jJ)(Y)),{},{paper_id:N.id,answer_rule:x.answer_rule,exam_count:x.exam_count||1,cut_screen_rule:ee.cut_screen_rule,cut_screen_count:ee.cut_screen_count||1,cut_screen_interval:ee.cut_screen_interval||0,random_question:J.random_question,random_options:J.random_options,mark_type:Z.mark_type,mark_question_type:{fill_blank:Z.mark_type===l.lt.MANUAL?Z.fill_blank:!1,short_answer:Z.mark_type===l.lt.MANUAL?Z.short_answer:!1},anonymous_marking:Z.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...Z.marker_list.map(Q=>typeof Q=="string"?Q:Q.id)],result_view_rule:ae.result_view_rule,answer_parsing:ae.answer_parsing,ranking_list_view_rule:ae.ranking_list_view_rule,show_result:ae.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};break;case"OfflineTrain":w={courseSort:n,flag:3,id:_&&!m?r.id:"",type:"xx",mappingId:r.mappingId?r.mappingId:"",title:a.title,begin_time:g()(a.dateRange.startTime).valueOf(),end_time:g()(a.dateRange.endTime).valueOf(),attachment:a.attachment.map(Q=>Q.id),course_duration:a.course_duration||"",lecturer_id:a.teacher.id,is_lecturer_confirm:!!a.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!a.teacher.is_lecturer_subsidy,address:a.address,introduction:a.introduction,is_open_offline_assessment:a.assess.is_open_offline_assessment,is_open_upload:a.other.is_open_upload,is_open_schedule:!1,remind_type:a.remind.remind_type,advance_minute:a.remind.advance_minute?Number(a.remind.advance_minute):0,is_lecturer_remind:a.remind.is_lecturer_remind,is_student_remind:a.remind.is_student_remind,is_lecturer_student_evaluate:a.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:a.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:a.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:a.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:a.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:a.evaluate.student_course_evaluate_content,assessment_total_score:a.assess.assessment_total_score,assessment_pass_score:a.assess.assessment_pass_score};break;case"AddInvestigate":C==="study"?w={courseSort:n,courseType:9,flag:4,id:r.id,questionnaireId:r.questionnaire.id,title:r.name,type:"questionnaire",mappingId:r.mappingId?r.mappingId:""}:w={courseId:r.id,courseType:9,flag:9,courseSort:n,investigate:{id:r.id,title:r.name,questionnaire_id:r.questionnaire.id}};break;case"AddPracticeTest":w={courseType:10,courseSort:n,flag:C==="study"?5:4,type:"sc",id:r.id,title:r.data.title,content:r.data.content||r.data.address,resources:r.data.attachment.map(Q=>({resourceId:Q.id})),scoreSetting:{scoreSwitch:r.data.mark.isFull?"on":"off",score:r.data.mark.value},workflowJson:r.data.workFlowTemplateId?{}:D(r.data.supervisor),mappingId:r.mappingId?r.mappingId:"",job_type:r.data.job_type,workFlowTemplateId:r.data.workFlowTemplateId};break;case"AddJobEvaluation":w={courseSort:n,flag:6,title:r.data.title,productId:r.data.evaluationTools.product_id,modelId:r.data.evaluationTools.model_id,id:r.id||"",mappingId:r.mappingId?r.mappingId:""};break;case"Attendance":w={courseSort:n,flag:13,id:_&&!m?r.id:"",type:"attendance",mappingId:r.mappingId?r.mappingId:"",title:a.title,directors:a.directors.map(Q=>typeof Q=="object"&&(Q.id||Q.user_id)?Q.id||Q.user_id:Q),name:a.name,qrcode_type:a.qrcode_type||"statics",sign_in_begin_time:a.sign_in_begin_time?g()(a.sign_in_begin_time).valueOf():"",sign_in_end_time:a.sign_in_end_time?g()(a.sign_in_end_time).valueOf():"",sign_out_begin_time:a.sign_out_begin_time?g()(a.sign_out_begin_time).valueOf():"",sign_out_end_time:a.sign_out_end_time?g()(a.sign_out_end_time).valueOf():"",relate_course:a.relate_course,relate_course_list:((u=a.relate_course_list)===null||u===void 0?void 0:u.length)>0?a.relate_course_list:[],remind_directors:a.remind_directors,advance_minute:a.advance_minute||0,qy_we_chat_vo:a.qy_we_chat_vo,address:a.address,longitude:a.longitude,latitude:a.latitude,address_detail:a.address_detail,sign_range:a.sign_range};break;case"AddAssessment":w=(0,c.Z)((0,c.Z)({},R(r.data)),{},{tutorId:s,courseSort:n,courseType:14,flag:14});break;default:break}return p==="unlock_mode"&&a.unlockingTime&&(w.unlockingTime=g()(a.unlockingTime).valueOf()),w.resource_lock=r.resource_lock||!1,w});return{content:t.desc,stageName:t.name,isOrder:t.inOrder,stageSort:T+1,stageId:_?t.stageId:"",startTime:p==="unlock_mode"&&t.studyTime?g()(t.studyTime[0]).valueOf():null,endTime:p==="unlock_mode"&&t.studyTime?g()(t.studyTime[1]).valueOf():null,course:M}});return e},f=i=>{var _=i.map((C,p)=>({content:C.desc,stage_name:C.name,is_order:C.inOrder,stage_sort:p+1,stage_id:C.stageId,resources:C.list.map((m,s)=>{var e=m.data;switch(m.componentName){case"CoursewareSelector":return{course_id:m.id,course_sort:s,course_type:3,flag:1,mappingId:m.mappingId};case"AddMentorCoaching":return{course_id:m.id,tutorials:{id:m.id,title:e.title,content:e.content,model:e.model,tutor_model:e.tutor_model,evaluation_type:e.evaluation_type,user_id:e.user_id||"",user_name:e.user_name||""},course_sort:s,course_type:12,flag:7,mappingId:m.mappingId};case"CourseSelector":return{course_id:m.id,course_sort:s,course_type:1,flag:1,mappingId:m.mappingId};case"AddExam":return{exam:{id:m.id,title:e.title,cheat_flag:e.cheatFlag.isChecked?1:0,exam_duration:e.examDuration,face_recognition:e.cheatFlag.faceRecognition,summary:e.summary,mark_type:S(e.markType),paper_id:e.questionsMode===1?e.fixedQuestion.id:"",paper_name:e.questionsMode===1?e.fixedQuestion.name:"",pass_line:e.passLine,question_banks:e.questionsMode===1?"":e.randomQuestion.bankQuesitonVoList.map(N=>N.id),question_mode:e.questionsMode,show_knowledge:e.knowledgePoints===1?"show":"hide",repeat_exam:e.reExam.isChecked,multiple_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.shortAnswerType,short_answer_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerScore,single_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleScore,multiple_missed_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleMissedScore,true_or_false_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseScore,total_score:e.questionsMode===1?e.fixedQuestion.tableList.totalScore:"",answer_parsing:e.reExam.isChecked?e.reExam.allowed.end:e.reExam.notAllowed.end,passing_score:e.questionsMode===1?Number(e.fixedQuestion.tableList.totalScore*e.passLine/100).toFixed(1):60,cut_screen_count:e.cheatFlag.switchNum!==null?e.cheatFlag.switchNum:-1,re_exam_rule:e.reExam.allowed.reRule,re_exam_number:e.reExam.allowed.reRule===2?e.reExam.allowed.reNum:0,score_rule:e.reExam.allowed.record,view_rule:e.reExam.allowed.viewRule,proportional:e.questionsMode===2&&e.isOpenDrawQuestions?e.proportional:[],anonymous_marking:"".concat(e.markType.anonymousMarking),show_result:e.reExam.show_result},flag:2,course_sort:s,course_id:m.id,course_type:6,mappingId:m.mappingId};case"AddNewExam":var t=m.data,T=t.paperInfo,M=t.exam_times,r=t.cut_screen_times,n=t.random_order,u=t.mark_setting,a=t.result_visible,w=t.face_recognition,O=(0,U.Z)(t,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_sort:s,flag:15,type:"ex",course_id:m.id,course_type:15,mappingId:m.mappingId?m.mappingId:"",new_exam:(0,c.Z)((0,c.Z)((0,c.Z)({},O),(0,l.jJ)(w)),{},{paper_id:T.id,answer_rule:M.answer_rule,exam_count:M.exam_count||1,cut_screen_rule:r.cut_screen_rule,cut_screen_count:r.cut_screen_count||1,cut_screen_interval:r.cut_screen_interval||0,random_question:n.random_question,random_options:n.random_options,mark_type:u.mark_type,mark_question_type:{fill_blank:u.mark_type===l.lt.MANUAL?u.fill_blank:!1,short_answer:u.mark_type===l.lt.MANUAL?u.short_answer:!1},anonymous_marking:u.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...u.marker_list.map(N=>typeof N=="string"?N:N.id)],result_view_rule:a.result_view_rule,answer_parsing:a.answer_parsing,ranking_list_view_rule:a.ranking_list_view_rule,show_result:a.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddPracticeTest":return{operation:{id:m.id,title:m.data.title,content:m.data.content||m.data.address,type:"sc",resources:m.data.attachment.map(N=>({resourceId:N.id})),score_setting:{scoreSwitch:m.data.mark.isFull?"on":"off",score:m.data.mark.value},workflow_json:D(m.data.supervisor),sort:s,job_type:m.data.job_type},course_type:10,course_sort:s,flag:5,mappingId:m.mappingId};case"AddInvestigate":return{course_id:m.id,course_type:9,flag:4,course_sort:s,investigate:{id:m.id,title:m.name,questionnaire_id:m.questionnaire.id}};default:return null}})}));return _};function D(i){var _=[];if(i.type==="multilevel"){var C=i.multilevel;C.forEach(p=>{var m=[];p.forEach(s=>{m.push(s.id)}),_.push(m.join(","))})}else i.type==="or"?(i.or.forEach(p=>{_.push(p.id)}),_=[_.join(",")]):_=[];return{type:i.type,userIds:_}}var X=i=>{function _(s){if(s.questionMode===1){if(s.paperVo.fillBlankCount>0||s.paperVo.shortAnswerCount>0)return!0}else if(s.fillBlankCount>0||s.shortAnswerCount>0)return!0;return!1}function C(s){if(s.questionMode===1){if(s.paperVo.fillBlankCount>0)return!0}else if(s.fillBlankCount>0)return!0;return!1}function p(s){if(s.questionMode===1){if(s.paperVo.shortAnswerCount>0)return!0}else if(s.shortAnswerCount>0)return!0;return!1}var m=i.map((s,e)=>({key:"".concat(new Date().getTime()).concat(e),desc:s.content,name:s.stageName,inOrder:s.isOrder,stageId:s.id,studyTime:s.startTime?[g()(s.startTime),g()(s.endTime)]:["",""],list:s.courseMappingList.map(t=>{var T,M,r=t.planExamVos,n={},u,a;switch(t.flag){case 1:t.contentType==="audio/mp3"||t.contentType==="audio/mpeg"||t.contentType==="audio"?(a="mp3",u="mp3"):(a=t.type,u=t.type==="imageText"?"h5":t.type),n={id:t.courseId,name:t.name,type:t.courseType===1?"course":"courseware",icon:o.e1[u],originalType:a,componentName:t.courseType===1?"CourseSelector":"CoursewareSelector",status:t.courseType===1?"0":t.status,duration:t.duration,data:t,mappingId:t.mappingId};break;case 2:n={id:t.id,name:t.name,type:"ex",icon:o.e1.ex,componentName:"AddExam",duration:r.examDuration*60,data:{title:r.title,examDuration:r.examDuration,summary:r.summary,isOpenDrawQuestions:r.proportionalExamVos&&r.proportionalExamVos.length>0,proportional:r.proportionalExamVos&&(r.proportionalExamVos.length>0?y(r.proportionalExamVos,r.bankQuesitonVoList):r.questionMode===2?h(r.bankQuesitonVoList):[])||[],cheatFlag:{isChecked:!!r.cheatFlag,switchNum:r.cutScreenCount===-1?null:r.cutScreenCount,faceRecognition:r.faceRecognition},reExam:{show_result:r.show_result,isChecked:r.repeatExam,userJoin:r.user_join==="true",notAllowed:{end:r.answerParsing},allowed:{reRule:r.reExamRule,record:r.scoreRule,end:r.answerParsing,reNum:r.reExamRule===2?r.reExamNumber:1,viewRule:r.viewRule}},markType:{checkedValue:r.markType===1?1:2,artificialDisabled:r.markType===1&&!_(r),fillBlank:{checked:(r.markType===2||r.markType===3)&&C(r),disabled:!C(r)},shortAnswer:{checked:(r.markType===2||r.markType===4)&&p(r),disabled:!p(r)},anonymousMarking:r.anonymous_marking==="true"},questionsMode:r.questionMode,knowledgePoints:r.showKnowledge==="show"?1:2,passLine:r.passLine,fixedQuestion:r.questionMode===1?{id:r.paperVo.id,name:r.paperVo.title,tableList:{fillBlankCount:r.paperVo.fillBlankCount,fillBlankScore:r.paperVo.fillBlankScore,multipleCount:r.paperVo.multipleCount,multipleScore:r.paperVo.multipleScore,shortAnswerCount:r.paperVo.shortAnswerCount,shortAnswerScore:r.paperVo.shortAnswerScore,singleCount:r.paperVo.singleCount,singleScore:r.paperVo.singleScore,totalCount:r.paperVo.totalCount,totalScore:r.paperVo.totalScore,trueOrFalseCount:r.paperVo.trueOrFalseCount,trueOrFalseScore:r.paperVo.trueOrFalseScore}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:r.questionMode===2?{bankQuesitonVoList:r.bankQuesitonVoList.map(Z=>({id:Z.id,name:Z.name,data:Z})),bankQuesitonInfo:{fillBlankCount:r.fillBlankCount,fillBlankScore:r.fillBlankUnitScore,fillBlankType:+r.fillBlankType||1,multipleCount:r.multipleCount,multipleScore:r.multipleUnitScore,shortAnswerCount:r.shortAnswerCount,shortAnswerScore:r.shortAnswerUnitScore,shortAnswerType:+r.shortAnswerType||1,singleCount:r.singleCount,singleScore:r.singleUnitScore,trueOrFalseCount:r.trueOrFalseCount,trueOrFalseScore:r.trueOrFalseUnitScore,multipleMissedScore:r.multipleMissedScore}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},mappingId:t.mappingId,isExamEdit:t.isExamEdit};break;case 3:var w=t.offline_course_vo;n={id:t.id,name:t.name,type:"xx",componentName:"OfflineTrain",icon:o.e1.xx,data:(0,c.Z)({},$(w)),mappingId:t.mappingId};break;case 4:case 5:if(t.type==="sc"||t.type==="operation"){n={id:t.id,name:t.title,type:"sc",icon:o.e1.sc,componentName:"AddPracticeTest",data:(0,j.UI)("PRIVACY_HLS_APPROVAL_MANAGE")?G(t):P(t),mappingId:t.mappingId};break}n={id:t.courseId,name:t.title||t.name,type:"investigate",icon:o.e1.questionnaire,componentName:"AddInvestigate",data:t,mappingId:t.mappingId,questionnaire:{id:t.questionnaireId,name:t.name}};break;case 6:n={id:t.evaluation.id,name:t.evaluation.title,productId:t.evaluation.product_id,modelId:t.evaluation.model_id,type:"jobEvaluation",icon:o.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:t.evaluation.title,evaluationTools:{product_id:t.evaluation.product_id,model_id:t.evaluation.model_id}},mappingId:t.mappingId};break;case 7:n={id:t.id,name:t.tutorials.title,type:"tutor",icon:o.e1.tutor,componentName:"AddMentorCoaching",data:(0,c.Z)((0,c.Z)({},t.tutorials),{},{tutor_model:t.tutorials.tutorModel,evaluation_type:t.tutorials.evaluationType,user_id:t.tutorials.userId,user_name:t.tutorials.userName}),mappingId:t.mappingId};break;case 9:n={id:t.courseId,name:t.title,type:"investigate",icon:o.e1.questionnaire,componentName:"AddInvestigate",data:t,questionnaire:{id:t.questionnaireId,name:t.name}};break;case 13:var O=t.course_sign_vo;n={id:t.id,name:t.name,type:"attendance",componentName:"Attendance",icon:o.e1.attendance,data:(0,c.Z)({},z(O)),mappingId:t.mappingId};break;case 14:n={id:(t==null||(T=t.evaluate)===null||T===void 0?void 0:T.id)||"",name:(t==null||(M=t.evaluate)===null||M===void 0?void 0:M.name)||"",type:"assess",componentName:"AddAssessment",icon:o.e1.assess,data:(0,c.Z)({},se(t.evaluate)),resource_lock:t.resource_lock};break;case 15:{var N=(0,b.Qm)()._store,x=N.getState(),ee=x.user,J=(0,l.AC)({data:t.exam_plan_detail_v1,user:{id:ee.id,name:ee.name,creator:!0}});n={id:t.exam_plan_detail_v1.id,name:t.exam_plan_detail_v1.title,type:"ex",icon:o.e1.ex,componentName:"AddNewExam",duration:t.exam_plan_detail_v1.exam_duration*60,data:J,mappingId:t.mappingId,isExamEdit:t.isExamEdit}}default:break}return n.data&&(n.data.unlockingTime=t.unlockingTime?g()(t.unlockingTime):""),n.resource_lock=t.resource_lock,n})}));return m};function G(i){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources";return i.supervisor={lead:"",multilevel:[],or:[],type:"or"},i.mark={isFull:i.scoreSetting.score_switch==="on",value:i.scoreSetting.score_switch==="on"?i.scoreSetting.score:100},i.attachment=i[_],i}function P(i){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources",C=[],p=[];return i.workflowJson.type==="or"?i.workflowJson.nodeList[0].forEach(m=>{C.push({type:2,id:m.id,name:m.name,show:!0,unionid:m.unionid,user_id:m.sync_user_id,source_type:m.source_type||m.sourceType})}):i.workflowJson.type==="multilevel"&&i.workflowJson.nodeList.forEach(m=>{m.forEach(s=>{s.user_id=s.sync_user_id}),p.push(m)}),i.supervisor={or:C,multilevel:p,lead:"",type:i.workflowJson.type},i.mark={isFull:i.scoreSetting.score_switch==="on",value:i.scoreSetting.score_switch==="on"?i.scoreSetting.score:100},i.attachment=i[_],i}var I=(i,_)=>{var C=i.map((p,m)=>({id:p.id?p.id:"",content:p.desc,stage_name:p.name,is_order:_==="free_mode"?!1:p.inOrder,sort:m+1,progress:p.Standard.progressCheck?p.Standard.progress:"",exam_times:p.Standard.examCheck?p.Standard.examNum:"",practice_times:p.Standard.bankCheck?p.Standard.bankNum:"",operation_times:p.Standard.practiceCheck?p.Standard.practiceNum:"",finish_evaluation:p.Standard.jobEvaluationCheck?"true":"false",is_get_score:p.reward.getScoreChecked?p.reward.getScore:"",certificate_id:p.reward.certificateChecked?p.reward.certificateId:"",resources:p.list.map((s,e)=>{var t=s.data;switch(s.componentName){case"CoursewareSelector":return{course_id:s.id,replaced_old_id:s.replaced_old_id===s.id?"":s.replaced_old_id,sort:e,type:3,lab_resource_id:s.lab_resource_id,lab_resource_name:s.lab_resource_name,resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"ClNewUpload":case"CourseSelector":return{course_id:s.id,replaced_old_id:s.replaced_old_id||"",sort:e,type:1,lab_resource_id:s.lab_resource_id,lab_resource_name:s.lab_resource_name,resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"LiveClass":return{course_id:s.id,replaced_old_id:s.replaced_old_id||"",sort:e,type:16,lab_resource_id:s.lab_resource_id,lab_resource_name:s.lab_resource_name,resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"AddExam":return{type:6,sort:e,course_id:s.id,exam:{title:t.title,cheat_flag:t.cheatFlag.isChecked?1:0,exam_duration:t.examDuration,face_recognition:t.cheatFlag.faceRecognition,summary:t.summary,mark_type:S(t.markType),paper_id:t.questionsMode===1?t.fixedQuestion.id:"",pass_line:t.passLine,question_banks:t.questionsMode===1?[]:t.randomQuestion.bankQuesitonVoList.map(x=>x.id),question_mode:t.questionsMode,show_knowledge:t.knowledgePoints===1?"show":"hide",repeat_exam:t.reExam.isChecked,multiple_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:t.questionsMode===1?t.fixedQuestion.tableList.totalScore:"",answer_parsing:t.reExam.isChecked?t.reExam.allowed.end:t.reExam.notAllowed.end,passing_score:t.questionsMode===1?Number(t.fixedQuestion.tableList.totalScore*t.passLine/100).toFixed(1):60,cut_screen_count:t.cheatFlag.switchNum!==null?t.cheatFlag.switchNum:-1,re_exam_rule:t.reExam.allowed.reRule,re_exam_number:t.reExam.allowed.reRule===2?t.reExam.allowed.reNum:0,score_rule:t.reExam.allowed.record,view_rule:t.reExam.allowed.viewRule,proportional:t.questionsMode===2&&t.isOpenDrawQuestions?t.proportional:[],anonymous_marking:"".concat(t.markType.anonymousMarking),show_result:t.reExam.show_result},resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"AddNewExam":var T=s.data,M=T.paperInfo,r=T.exam_times,n=T.cut_screen_times,u=T.random_order,a=T.mark_setting,w=T.result_visible,O=T.face_recognition,N=(0,U.Z)(T,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{type:15,sort:e,course_id:s.id,new_exam:(0,c.Z)((0,c.Z)((0,c.Z)({},N),(0,l.jJ)(O)),{},{paper_id:M.id,answer_rule:r.answer_rule,exam_count:r.exam_count||1,cut_screen_rule:n.cut_screen_rule,cut_screen_count:n.cut_screen_count||1,cut_screen_interval:n.cut_screen_interval||0,random_question:u.random_question,random_options:u.random_options,mark_type:a.mark_type,mark_question_type:{fill_blank:a.mark_type===l.lt.MANUAL?a.fill_blank:!1,short_answer:a.mark_type===l.lt.MANUAL?a.short_answer:!1},anonymous_marking:a.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...a.marker_list.map(x=>typeof x=="string"?x:x.id)],result_view_rule:w.result_view_rule,answer_parsing:w.answer_parsing,ranking_list_view_rule:w.ranking_list_view_rule,show_result:w.show_result,reward_rule:null,authority_range:null,supervisor_mark:null}),resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"OfflineTrain":return{sort:e,type:7,course_id:s.id,offline_course:{id:t.id,title:t.title,begin_time:g()(t.dateRange.startTime).valueOf(),end_time:g()(t.dateRange.endTime).valueOf(),attachment:t.attachment.map(x=>x.id),course_duration:t.course_duration||"",lecturer_id:t.teacher.id,is_lecturer_confirm:!!t.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!t.teacher.is_lecturer_subsidy,address:t.address,introduction:t.introduction,is_open_offline_assessment:t.assess.is_open_offline_assessment,is_open_upload:t.other.is_open_upload,is_open_schedule:!1,remind_type:t.remind.remind_type,advance_minute:t.remind.advance_minute?Number(t.remind.advance_minute):0,is_lecturer_remind:t.remind.is_lecturer_remind,is_student_remind:t.remind.is_student_remind,is_director_remind:t.remind.is_director_remind,is_lecturer_student_evaluate:t.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:t.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:t.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:t.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:t.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:t.evaluate.student_course_evaluate_content,assessment_total_score:t.assess.assessment_total_score,assessment_pass_score:t.assess.assessment_pass_score},resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"AddInvestigate":return{sort:e,type:9,course_id:s.id||"",questionnaire_id:s.questionnaire.id,resource_lock:s.resource_lock||!1,title:s.name,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"AddPracticeTest":return{type:10,courseSort:e,sort:e,flag:4,course_id:s.id,title:s.data.title,content:s.data.content||s.data.address,resources:s.data.attachment.map(x=>({resourceId:x.id})),scoreSetting:{scoreSwitch:s.data.mark.isFull?"on":"off",score:s.data.mark.value},workflowJson:D(s.data.supervisor),job_type:s.data.job_type,resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"AddJobEvaluation":return{sort:e,flag:6,type:11,evaluation:{id:s.id||"",title:s.data.title,product_id:s.data.evaluationTools.product_id,model_id:s.data.evaluationTools.model_id},resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"Attendance":return{sort:e,type:13,course_id:s.id,sign:{id:t.id,type:13,title:t.title,directors:t.directors.map(x=>typeof x=="object"&&(x.id||x.user_id)?x.id||x.user_id:x),name:t.name||"--",qrcode_type:t.qrcode_type,sign_in_begin_time:t.sign_in_begin_time,sign_in_end_time:t.sign_in_end_time,sign_out_begin_time:t.sign_out_begin_time,sign_out_end_time:t.sign_out_end_time,relate_course:t.relate_course,relate_course_list:t.relate_course_list,remind_directors:t.remind_directors,advance_minute:t.advance_minute,qy_we_chat_vo:t.qy_we_chat_vo,address:t.address,longitude:t.longitude,latitude:t.latitude,address_detail:t.address_detail,sign_range:t.sign_range},resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf()};case"AddAssessment":return{sort:e,type:14,course_id:s.id,resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf(),evaluateVo:{id:t.id,name:t.name,requirement:t.requirement,resource_id:t.resource_id,is_lock:t.is_lock,begin_time_unlock:t.begin_time_unlock,end_time_unlock:t.end_time_unlock,is_self_evaluate:t.is_self_evaluate,questionnaire_id:t.questionnaire_id,evaluate_form_title:t.evaluate_form_title,before_start_day:t.before_start_day,before_start_repeat:t.before_start_repeat,before_start_un_remind:t.before_start_un_remind,before_end_day:t.before_end_day,before_end_repeat:t.before_end_repeat,before_end_un_remind:t.before_end_un_remind,after_end_day:t.after_end_day,after_end_repeat:t.after_end_repeat,after_end_un_remind:t.after_end_un_remind,is_passed_standards:t.is_passed_standards,is_passed_option_three:t.is_passed_option_three,pass_standard_conditions:t.pass_standard_conditions,pass_standards_number:t.pass_standards_number,creator_user:t.creator_user}};case"AddPracticeBank":return{sort:e,type:17,course_id:s.id,resource_name:s.title,resource_lock:s.resource_lock||!1,unlocking_time:_==="unlock_mode"?null:g()(s.unlocking_time).valueOf(),practice:{title:s.data.title,question_bank_list:s.data.randomQuestion.bankQuesitonVoList.map(x=>x.id),pass_line:Number(s.data.stand)}};default:return null}})}));return C},W=function(_,C){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;function m(e){return e.fill_blank_count>0||e.short_answer_count>0}var s=_.map((e,t)=>{var T=e.resources.filter(n=>n.type==6||n.type==15).length,M=e.resources.filter(n=>n.type==17).length,r=e.resources.filter(n=>n.type==10).length;return{id:e.id,key:"".concat(new Date().getTime()).concat(t),desc:e.content,name:e.stage_name,inOrder:e.is_order,Standard:{progressCheck:e.progress>0,progress:e.progress||100,examCheck:e.exam_times>0,examNum:e.exam_times||T,bankCheck:e.practice_times>0,bankNum:e.practice_times||M,practiceCheck:e.operation_times>0,practiceNum:e.operation_times||r,jobEvaluationCheck:e.finish_evaluation==="true"},reward:{getScore:e.is_get_score?e.is_get_score:"",getScoreChecked:e.is_get_score>0,certificateId:e.certificate_id||"",certificateChecked:e.certificate_id!==0,certificateName:e.certificate_name,certificateImage:e.preview_url},hourClassId:e.id,hourClassStartTime:e.start_time,hourClassEndTime:e.end_time,list:e.resources.map(n=>{var u=n.exam;switch(n.type){case 1:return{id:n.course_id,name:n.resource_name,type:p&&n.biz_type==="imageText"?"twCourse":"course",icon:n.biz_type==="imageText"?o.e1.h5:o.e1.crs,componentName:"CourseSelector",duration:n.duration,data:n,unlocking_time:n.unlocking_time,lab_resource_id:n.lab_resource_id,lab_resource_name:n.lab_resource_name,lab_selected_id:n.lab_resource_id,resource_lock:n.resource_lock};case 3:{var a;return n.content_type==="article"||n.content_type==="link"?a=o.e1.h5:a=o.e1[n.contentType]||o.e1[n.content_type],{id:n.course_id,name:n.resource_name,type:"courseware",icon:a,componentName:"CoursewareSelector",duration:n.duration,status:n.resource_status,originalType:n.content_type==="article"||n.content_type==="link"?"h5":n.content_type||n.contentType,data:n,unlocking_time:n.unlocking_time,lab_resource_id:n.lab_resource_id,lab_resource_name:n.lab_resource_name,lab_selected_id:n.lab_resource_id,resource_lock:n.resource_lock}}case 6:return{id:n.course_id,name:u.title,type:"ex",icon:o.e1.ex,componentName:"AddExam",duration:u.exam_duration*60,data:{id:u.id,title:u.title,examDuration:u.exam_duration,summary:u.summary,isOpenDrawQuestions:u.proportionalExamVos&&u.proportionalExamVos.length>0,proportional:u.proportionalExamVos&&(u.proportionalExamVos.length>0?y(u.proportionalExamVos,u.question_bank_vos):u.question_mode===2?h(u.question_bank_vos):[])||[],cheatFlag:{isChecked:!!u.cheat_flag,switchNum:u.cut_screen_count===-1?null:u.cut_screen_count,faceRecognition:u.face_recognition},reExam:{show_result:u.show_result,isChecked:u.repeat_exam,userJoin:C?!1:u.user_join==="true",notAllowed:{end:u.answer_parsing},allowed:{reRule:u.re_exam_rule,record:u.score_rule,end:u.answer_parsing,reNum:u.re_exam_rule===2?u.re_exam_number:1,viewRule:u.view_rule}},markType:{checkedValue:u.mark_type===1?1:2,artificialDisabled:u.mark_type===1&&!m(u),fillBlank:{checked:(u.mark_type===2||u.mark_type===3)&&u.fill_blank_count,disabled:!u.fill_blank_count},shortAnswer:{checked:(u.mark_type===2||u.mark_type===4)&&u.short_answer_count,disabled:!u.short_answer_count},anonymousMarking:u.anonymous_marking==="true"},questionsMode:u.question_mode,knowledgePoints:u.show_knowledge==="show"?1:2,passLine:u.pass_line,fixedQuestion:u.question_mode===1?{id:u.paper_id,name:u.paper_name,tableList:{fillBlankCount:u.fill_blank_count,fillBlankScore:u.fill_blank_unit_score,multipleCount:u.multiple_count,multipleScore:u.multiple_unit_score,shortAnswerCount:u.short_answer_count,shortAnswerScore:u.short_answer_unit_score,singleCount:u.single_count,singleScore:u.single_unit_score,totalCount:u.total_count,totalScore:u.total_score,trueOrFalseCount:u.true_or_false_count,trueOrFalseScore:u.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:u.question_mode===2?{bankQuesitonVoList:u.question_bank_vos.map(J=>{var Z=J.fill_blank_count,ae=J.multiple_count,Y=J.short_answer_count,q=J.single_count,Q=J.total_count,re=J.true_or_false_count,_e={fillBlankCount:Z,shortAnswerCount:Y,multipleCount:ae,singleCount:q,totalCount:Q,trueOrFalseCount:re};return{id:J.id,name:J.name,data:Object.assign(J,_e),fillBlankCount:Z,shortAnswerCount:Y,multipleCount:ae,singleCount:q,totalCount:Q,trueOrFalseCount:re}}),bankQuesitonInfo:{fillBlankCount:u.fill_blank_count,fillBlankScore:u.fill_blank_unit_score,fillBlankType:+u.fillBlankType,multipleCount:u.multiple_count,multipleScore:u.multiple_unit_score,shortAnswerCount:u.short_answer_count,shortAnswerScore:u.short_answer_unit_score,shortAnswerType:+u.shortAnswerType,singleCount:u.single_count,singleScore:u.single_unit_score,trueOrFalseCount:u.true_or_false_count,trueOrFalseScore:u.true_or_false_unit_score,multipleMissedScore:u.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 7:return{id:C?"":n.offlineCourseEditVo.id,name:n.offlineCourseEditVo.title,key:n.offlineCourseEditVo.id,type:"xx",componentName:"OfflineTrain",icon:o.e1.xx,data:(0,c.Z)({},$(n.offlineCourseEditVo,C)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 9:return{id:n.course_id,name:n.title||n.resource_name,type:"investigate",icon:o.e1.questionnaire,componentName:"AddInvestigate",data:n,questionnaire:{id:n.questionnaire_id,name:n.resource_name},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 10:return{id:n.course_id,name:n.title,type:"sc",icon:o.e1.sc,componentName:"AddPracticeTest",data:P(n,"operationResources"),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 11:return{id:n.evaluation.id,name:n.evaluation.title,productId:n.evaluation.product_id,modelId:n.evaluation.model_id,type:"jobEvaluation",icon:o.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:n.evaluation.title,evaluationTools:{product_id:n.evaluation.product_id,model_id:n.evaluation.model_id}},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 13:return{id:n.course_sign_vo.id,name:n.course_sign_vo.name,type:"attendance",componentName:"Attendance",icon:o.e1.attendance,data:(0,c.Z)({},z(n.course_sign_vo,C)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 14:return{id:n.evaluate?n.evaluate.id:"",name:n.evaluate?n.evaluate.name:"",type:"assess",componentName:"AddAssessment",icon:o.e1.assess,data:(0,c.Z)({},se(n.evaluate)),resource_lock:n.resource_lock,unlocking_time:n.unlocking_time};case 15:{var w=(0,b.Qm)()._store,O=w.getState(),N=O.user,x=(0,l.AC)({data:n.exam_plan_detail_v1,user:{id:N.id,name:N.name,creator:!0}});return{id:n.exam_plan_detail_v1.id,name:n.exam_plan_detail_v1.title,type:"ex",icon:o.e1.ex,componentName:"AddNewExam",unlocking_time:n.unlocking_time,resource_lock:n.resource_lock,duration:n.exam_plan_detail_v1.exam_duration*60,data:x}}case 16:return{id:C?"":n.course_id,name:n.title,key:n.course_id,type:"liveClass",componentName:"LiveClass",icon:o.e1.liveClass,data:(0,c.Z)({},le(n)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 17:var ee=(0,l.S8)(n.practice);return{id:n.course_id,name:n.resource_name,type:"practice",componentName:"AddPracticeBank",unlocking_time:n.unlocking_time,resource_lock:n.resource_lock,data:ee};default:return null}})}});return s},v=i=>{var _=i.map((C,p)=>({content:C.desc,stage_name:C.name,order:"".concat(C.inOrder),sort:p+1,course:C.list.map((m,s)=>{var e=m.data;switch(m.componentName){case"CoursewareSelector":return{course_id:m.id,course_sort:s,course_type:3,flag:1};case"CourseSelector":return{course_id:m.id,course_sort:s,course_type:1,flag:1};case"AddExam":return{flag:2,type:"ex",course_sort:s,course_id:m.id,title:e.title,cheat_flag:e.cheatFlag.isChecked?1:0,exam_duration:e.examDuration,face_recognition:e.cheatFlag.faceRecognition,summary:e.summary,mark_type:S(e.markType),paper_id:e.questionsMode===1?e.fixedQuestion.id:"",paper_title:e.questionsMode===1?e.fixedQuestion.name:"",pass_line:e.passLine,question_bank_list:e.questionsMode===1?"":e.randomQuestion.bankQuesitonVoList.map(N=>N.id).join(","),question_mode:e.questionsMode,show_knowledge:e.knowledgePoints===1?"show":"hide",s_repeat_exam:"".concat(e.reExam.isChecked),multiple_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:e.questionsMode===1?e.fixedQuestion.tableList.totalScore:"",answer_parsing:e.reExam.isChecked?e.reExam.allowed.end:e.reExam.notAllowed.end,passing_score:e.questionsMode===1?Number(e.fixedQuestion.tableList.totalScore*e.passLine/100).toFixed(1):60,cut_screen_count:e.cheatFlag.switchNum!==null?e.cheatFlag.switchNum:-1,re_exam_rule:e.reExam.allowed.reRule,re_exam_number:e.reExam.allowed.reRule===2?e.reExam.allowed.reNum:0,score_rule:e.reExam.allowed.record,view_rule:e.reExam.allowed.viewRule,proportional:e.questionsMode===2&&e.isOpenDrawQuestions?e.proportional:[],anonymous_marking:"".concat(e.markType.anonymousMarking),show_result:e.reExam.show_result};case"AddNewExam":var t=m.data,T=t.paperInfo,M=t.exam_times,r=t.cut_screen_times,n=t.random_order,u=t.mark_setting,a=t.result_visible,w=t.face_recognition,O=(0,U.Z)(t,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_type:15,flag:15,type:"ex",course_sort:s,course_id:m.id,new_exam:(0,c.Z)((0,c.Z)((0,c.Z)({},O),(0,l.jJ)(w)),{},{paper_id:T.id,answer_rule:M.answer_rule,exam_count:M.exam_count||1,cut_screen_rule:r.cut_screen_rule,cut_screen_count:r.cut_screen_count||1,cut_screen_interval:r.cut_screen_interval||0,random_question:n.random_question,random_options:n.random_options,mark_type:u.mark_type,mark_question_type:{fill_blank:u.mark_type===l.lt.MANUAL?u.fill_blank:!1,short_answer:u.mark_type===l.lt.MANUAL?u.short_answer:!1},anonymous_marking:u.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...u.marker_list.map(N=>typeof N=="string"?N:N.id)],result_view_rule:a.result_view_rule,answer_parsing:a.answer_parsing,ranking_list_view_rule:a.ranking_list_view_rule,show_result:a.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddInvestigate":return{course_id:m.id,course_type:9,flag:9,course_sort:s,investigate:{id:m.id,title:m.name,questionnaire_id:m.questionnaire.id}};default:return null}})}));return _},L=i=>{function _(p){return p.fill_blank_count>0||p.short_answer_count>0}var C=i.map((p,m)=>({key:"".concat(new Date().getTime()).concat(m),desc:p.content,name:p.stage_name,inOrder:p.is_order,list:p.course_mapping_list.map(s=>{var e=s;switch(s.flag){case 1:return{id:s.course_id,name:s.name,type:s.course_type===1?"course":"courseware",icon:o.e1[s.type==="imageText"?"h5":s.contentType==="audio/mp3"?"mp3":s.type],originalType:s.type,componentName:s.course_type===1?"CourseSelector":"CoursewareSelector",status:s.course_type===1?"":s.status,duration:s.duration,data:s};case 2:return{id:s.course_id,name:e.title,type:"ex",icon:o.e1.ex,componentName:"AddExam",duration:e.exam_duration*60,data:{title:e.title,examDuration:e.exam_duration,summary:e.summary,isOpenDrawQuestions:e.proportionalExamVos&&e.proportionalExamVos.length>0,proportional:e.proportionalExamVos&&(e.proportionalExamVos.length>0?y(e.proportionalExamVos,e.bank_quesiton_list):e.question_mode===2?h(e.bank_quesiton_list):[])||[],cheatFlag:{isChecked:!!e.cheat_flag,switchNum:e.cut_screen_count===-1?null:e.cut_screen_count,faceRecognition:e.face_recognition},reExam:{show_result:e.show_result,isChecked:e.s_repeat_exam==="true",notAllowed:{end:e.answer_parsing},allowed:{reRule:e.re_exam_rule,record:e.score_rule,end:e.answer_parsing,reNum:e.re_exam_rule===2?e.re_exam_number:1,viewRule:e.view_rule}},markType:{checkedValue:e.mark_type===1?1:2,artificialDisabled:e.mark_type===1&&!_(e),fillBlank:{checked:(e.mark_type===2||e.mark_type===3)&&e.fill_blank_count,disabled:!e.fill_blank_count},shortAnswer:{checked:(e.mark_type===2||e.mark_type===4)&&e.short_answer_count,disabled:!e.short_answer_count},anonymousMarking:e.anonymous_marking==="true"},questionsMode:e.question_mode,knowledgePoints:e.show_knowledge==="show"?1:2,passLine:e.pass_line,fixedQuestion:e.question_mode===1?{id:e.paper_id,name:e.paper_title,tableList:{fillBlankCount:e.fill_blank_count,fillBlankScore:e.fill_blank_unit_score,multipleCount:e.multiple_count,multipleScore:e.multiple_unit_score,shortAnswerCount:e.short_answer_count,shortAnswerScore:e.short_answer_unit_score,singleCount:e.single_count,singleScore:e.single_unit_score,totalCount:e.paper_question_numbers,totalScore:e.total_score,trueOrFalseCount:e.true_or_false_count,trueOrFalseScore:e.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:e.question_mode===2?{bankQuesitonVoList:e.bank_quesiton_list.map(n=>{var u=n.fill_blank_count,a=n.multiple_count,w=n.short_answer_count,O=n.single_count,N=n.total_count,x=n.true_or_false_count,ee={fillBlankCount:u,shortAnswerCount:w,multipleCount:a,singleCount:O,totalCount:N,trueOrFalseCount:x};return{id:n.id,name:n.name,data:Object.assign(n,ee),fillBlankCount:u,shortAnswerCount:w,multipleCount:a,singleCount:O,totalCount:N,trueOrFalseCount:x}}),bankQuesitonInfo:{fillBlankCount:e.fill_blank_count,fillBlankScore:e.fill_blank_unit_score,fillBlankType:+e.fill_blank_type||1,multipleCount:e.multiple_count,multipleScore:e.multiple_unit_score,shortAnswerCount:e.short_answer_count,shortAnswerScore:e.short_answer_unit_score,shortAnswerType:+e.short_answer_type||1,singleCount:e.single_count,singleScore:e.single_unit_score,trueOrFalseCount:e.true_or_false_count,trueOrFalseScore:e.true_or_false_unit_score,multipleMissedScore:e.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}}};case 9:return{id:s.course_id,name:s.title,type:"investigate",icon:o.e1.questionnaire,componentName:"AddInvestigate",data:s,questionnaire:{id:s.questionnaire_id,name:s.name}};case 15:{var t=(0,b.Qm)()._store,T=t.getState(),M=T.user,r=(0,l.AC)({data:s.exam_plan_detail_v1,user:{id:M.id,name:M.name,creator:!0}});return{id:s.exam_plan_detail_v1.id,name:s.exam_plan_detail_v1.title,type:"ex",icon:o.e1.ex,componentName:"AddNewExam",duration:s.exam_plan_detail_v1.exam_duration*60,data:r}}default:return null}})}));return C},A=function(_){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _.map((p,m)=>{var s=C.find(e=>e.stage_index-1===m);return p.list.map((e,t)=>{var T;s&&(T=s.resource_error_vos.find(r=>r.resource_index===t));var M=e.type;if(e.resource_type)switch(e.resource_type){case 1:M="course";break;case 2:case 3:M="courseware";break;case 6:case 15:M="ex";break;case 7:M="xx";break;case 9:M="questionnaire";break;case 13:M="attendance";break;case 14:M="assess";break;default:break}if(e.componentName)switch(e.componentName){case"CourseSelector":M="course";break;case"CoursewareSelector":M="courseware";break;case"AddNewExam":case"AddExam":M="ex";break;case"OfflineTrain":M="xx";break;case"Attendance":M="attendance";break;case"QuestionnaireSelector":case"AddInvestigate":M="questionnaire";break;case"AddPracticeTest":M="practicalIndustry";break;case"AddAssessment":M="assess";break;default:break}switch(M){case"course":e.resourceErrTip=T?T.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u88AB\u5220\u9664":T.resource_status==="un_released"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u300A".concat(T.resource_name,"\u300B\u672A\u53D1\u5E03\uFF0C\u8BF7\u542F\u7528\u540E\u518D\u7F16\u8F91"):"":"";break;case"courseware":e.resourceErrTip=T&&T.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u4EF6\u88AB\u5220\u9664":"";break;case"ex":e.resourceErrTip=T?T.resource_status==="bank_deleted"?"\u5F15\u7528\u7684\u9898\u5E93\u88AB\u5220\u9664":T.resource_status==="paper_deleted"?"\u5F15\u7528\u7684\u8BD5\u5377\u88AB\u5220\u9664":T.resource_status==="bank_missing"?"\u5F15\u7528\u7684\u9898\u5E93\u8BD5\u9898\u4E0D\u8DB3":"":"";break;case"xx":e.resourceErrTip=T&&T.resource_status==="time_expired"?"\u7EBF\u4E0B\u8BFE\u5DF2\u8FC7\u671F":"";break;case"questionnaire":e.resourceErrTip=T?T.resource_status==="deleted"?"\u5F15\u7528\u7684\u95EE\u5377\u88AB\u5220\u9664":T.resource_status==="un_released"?"\u5F15\u7528\u7684\u95EE\u5377\u672A\u53D1\u5E03":"":"";break;case"practicalIndustry":e.resourceErrTip=T&&T.resource_status==="operation_resource_deleted"?te.Z.t("component.practicalDeleteTip"):"";break;default:break}return null}),null}),_},$=(i,_)=>({id:_?"":i.id,title:i.title,edit_status:i.edit_status,status:i.status,department_id:i.department_id||"",dateRange:{startTime:i.begin_time,endTime:i.end_time},address:i.address,course_duration:i.course_duration,has_lecturer_student_data:_?!1:i.has_lecturer_student_data,has_student_lecturer_data:_?!1:i.has_student_lecturer_data,has_student_course_data:_?!1:i.has_student_course_data,has_lecturer_assess_student_data:_?!1:i.has_lecturer_assess_student_data,teacher:{id:i.lecturer_id,name:i.lecturer_name,is_lecturer_confirm:i.is_lecturer_confirm,is_lecturer_subsidy:i.is_lecturer_subsidy,teacher_sync_user_id:i.teacher_sync_user_id,lecturer_name:i.lecturer_name,teacher_sync_source_type:i.teacher_sync_source_type,type:i.teacher_sync_type,teacher_sync_type:i.teacher_sync_type},introduction:i.introduction,attachment:i.attachment||[],other:{is_open_schedule:i.is_open_schedule,is_open_upload:i.is_open_upload},remind:{remind_type:i.remind_type||"offline_course",advance_minute:i.advance_minute,is_lecturer_remind:i.is_lecturer_remind,is_student_remind:i.is_student_remind,is_director_remind:i.is_director_remind},evaluate:{is_lecturer_student_evaluate:i.is_lecturer_student_evaluate,is_student_lecturer_evaluate:i.is_student_lecturer_evaluate,is_student_course_evaluate:i.is_student_course_evaluate,lecturer_student_evaluate_content:i.lecturer_student_evaluate_content?(0,c.Z)((0,c.Z)({},i.lecturer_student_evaluate_content),{},{passing_score:Number(i.lecturer_student_evaluate_content.passing_score),total_score:Number(i.lecturer_student_evaluate_content.total_score)}):{evaluate_type:"score",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_lecturer_evaluate_content:i.student_lecturer_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_course_evaluate_content:i.student_course_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""}},assess:{is_open_offline_assessment:i.is_open_offline_assessment,assessment_total_score:i.assessment_total_score,assessment_pass_score:i.assessment_pass_score},user_has_attendanted:_?!1:i.user_has_attendanted}),z=(i,_)=>{var C=[];return _?i.attendance_course_vo.forEach(p=>{C.push((0,c.Z)((0,c.Z)({},p),{},{course_id:"",course_key:p.course_id}))}):C=i.attendance_course_vo,{courseId:i.courseId,directors:i.director?i.director.map(p=>p):i.directors,id:_?"":i.id,name:i.name,qrcode_type:i.qrcode_type,relate_course_list:C,sign_in_begin_time:i.sign_in_begin_time?(0,E.p6)(i.sign_in_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_in_end_time:i.sign_in_end_time?(0,E.p6)(i.sign_in_end_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_begin_time:i.sign_out_begin_time?(0,E.p6)(i.sign_out_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_end_time:i.sign_out_end_time?(0,E.p6)(i.sign_out_end_time,"yyyy-MM-dd hh:mm:ss"):"",source_type:i.source_type,remind_directors:i.remind_directors,advance_minute:i.advance_minute,user_has_attendanted:_?!1:i.user_has_attendanted,relate_course:i.relate_course,address:i.address,longitude:i.longitude,latitude:i.latitude,address_detail:i.address_detail,sign_range:i.sign_range}};function B(i){return Object.prototype.toString.call(i)==="[object Object]"}function ie(i){return i.replace(/[A-Z]/g,_=>"_".concat(_.toLowerCase()))}function H(i){if(!B(i))return i;for(var _={},C=Object.keys(i),p=0,m=C;p<m.length;p++){var s=m[p],e=i[s];s=ie(s),_[s]=B(e)?H(e):e}return _}var se=i=>{var _=H(i),C=_.id,p=_.name,m=_.requirement,s=_.resource_id,e=_.is_self_evaluate,t=_.is_lock,T=_.begin_time_unlock,M=_.end_time_unlock,r=_.questionnaire_id,n=_.evaluate_form_title,u=_.before_start_day,a=_.before_start_repeat,w=_.before_start_un_remind,O=_.before_end_day,N=_.before_end_repeat,x=_.before_end_un_remind,ee=_.after_end_day,J=_.after_end_repeat,Z=_.after_end_un_remind,ae=_.is_passed_standards,Y=_.is_passed_option_three,q=_.pass_standard_conditions,Q=_.pass_standards_number,re=_.creator_user;return{id:C,name:p,requirement:m,resource_id:s,is_lock:t,begin_time_unlock:T,end_time_unlock:M,is_self_evaluate:e,questionnaire_id:r,evaluate_form_title:n,before_start_day:u,before_start_repeat:a,before_start_un_remind:w,before_end_day:O,before_end_repeat:N,before_end_un_remind:x,after_end_day:ee,after_end_repeat:J,after_end_un_remind:Z,is_passed_standards:ae,is_passed_option_three:Y,pass_standard_conditions:q,pass_standards_number:Q,creator_user:re}},le=i=>({courseId:i.course_id,duration:i.duration,teacherName:i.live_lesson.teacher_name,startTime:i.live_lesson.live_start_time,endTime:i.live_lesson.live_end_time})},16084:function(oe,V,d){"use strict";var U=d(77883),c=d(21888),F=d(63185),g=d(9676),te=d(12924),b=d.n(te),j=d(91768),E=d(28216),o=d(80991),l=d(38642),h=d(43859);class y extends b().Component{constructor(){super(...arguments);this.state={blackList:{JobEvaluationBut:(0,l.eY)("MANAGEMENT_JOBEVALUATION_BUT")}},this.checkProgress=k=>{var f=k.target.checked,D=this.props.value;D.progress.isChecked=f,this.props.onFieldChange(D)},this.inputProgress=k=>{var f=this.props.value;f.progress.progress=k,this.props.onFieldChange(f)},this.checkExam=k=>{var f=k.target.checked,D=this.props.value;D.exam.isChecked=f,this.props.onFieldChange(D)},this.inputTimes=k=>{var f=this.props.value;f.exam.times=k,this.props.onFieldChange(f)},this.checkOperation=k=>{var f=k.target.checked,D=this.props.value;D.operation.isChecked=f,this.props.onFieldChange(D)},this.inputOperationTimes=k=>{var f=this.props.value;f.operation.times=k,this.props.onFieldChange(f)},this.checkJobEvaluation=k=>{var f=k.target.checked,D=this.props.value;D.jobEvaluation.isChecked=f,this.props.onFieldChange(D)}}UNSAFE_componentWillReceiveProps(k){if(this.props.jobEvaluationCount!==k.jobEvaluationCount&&k.jobEvaluationCount>0){var f=k.value;f.jobEvaluation.isChecked=!0,k.onFieldChange(f)}}render(){var k=this.props,f=k.value,D=k.examCount,X=k.courseCount,G=k.operationCount,P=k.isPreview,I=k.t,W=k.shouldRenderedOperationCount,v=k.jobEvaluationCount,L=k.completeJobEvaluation,A=k.qyShield,$=f.progress,z=f.exam,B=f.operation,ie=f.jobEvaluation,H=this.state.blackList;return b().createElement("div",{className:"qualified-standard"},b().createElement("div",{className:"qualified-standard-title"},I("learning.learningAddSecPassTitle"),b().createElement("span",{className:"qualified-standard-sub"},I("learning.learningAddSecPassTitleTip"))),b().createElement("div",{className:"qualified-standard-item"},b().createElement(g.Z,{disabled:X<1||P,className:"qualified-standard-checkbox",checked:X<1?!1:$.isChecked,onChange:this.checkProgress},I("learning.learningAddProgressRequire")),b().createElement(c.Z,{value:$.progress,disabled:!$.isChecked||X<1||P,onChange:this.inputProgress,className:"qualified-standard-number",min:1,max:100,precision:0}),b().createElement("span",{className:"qualified-standard-tip"},I("learning.learningAddProgressRequireTip"))),b().createElement("div",{className:"qualified-standard-item"},b().createElement(g.Z,{className:"qualified-standard-checkbox",disabled:D<1||P,checked:D<1?!1:z.isChecked,onChange:this.checkExam},I("learning.learningAddPassRequire")),b().createElement(c.Z,{value:z.times,disabled:!z.isChecked||D<1||P,className:"qualified-standard-number",onChange:this.inputTimes,min:1,max:D>0?D:999,precision:0}),b().createElement("span",{className:"qualified-standard-tip"},I("learning.learningAddPassRequireTip"))),W&&b().createElement("div",{className:"qualified-standard-item"},b().createElement(g.Z,{className:"qualified-standard-checkbox",disabled:G<1||P,checked:G<1?!1:B.isChecked,onChange:this.checkOperation},I("learning.learningAddOperationRequire")),b().createElement(c.Z,{value:B.times,disabled:!B.isChecked||G<1||P,className:"qualified-standard-number",onChange:this.inputOperationTimes,min:1,max:G>0?G:999,precision:0}),b().createElement("span",{className:"qualified-standard-tip"},I("learning.learningAddOperationRequireTip"))),H.JobEvaluationBut&&L&&A==="false"&&b().createElement("div",{className:"qualified-standard-item"},b().createElement(g.Z,{className:"qualified-standard-checkbox",disabled:v<1||P,checked:v>0?ie.isChecked:!1,onChange:this.checkJobEvaluation},I("learning.completeJobEvaluation"))))}}var S=R=>{var k=R.user;return{user:k,qyShield:k.qyShield}};V.Z=(0,E.$j)(S)((0,h.Z)((0,o.$j)((0,j.Z)()(y))))},69069:function(oe,V,d){"use strict";var U=d(77883),c=d(21888),F=d(57663),g=d(71577),te=d(47673),b=d(4107),j=d(63185),E=d(9676),o=d(12924),l=d.n(o),h=d(91768),y=d(28216),S=d(80991),R=d(49101),k=d(43859),f=d(93117),D=d(10237),X=d(37055),G=I=>({qyShield:I.user.qyShield});class P extends l().Component{constructor(W){super(W);this.getScoreRule=()=>{var v=X.ZP.EditStudyTask.getScoreRule(),L=this.props.value;D.WY.get({url:v}).then(A=>{if(A.data.data.hasRule){var $=A.data.data.studyScore,z=$[0],B=z.finishScore,ie=z.unFinishScore;L.score.reward=B,L.score.deduction=ie,this.props.onFieldChange(L)}})},this.handleSelectCertificate=()=>{var v=this.state.certificateConfig,L=this.props.value;v.visible=!0,v.defaultChecked=[{id:L.certificate.id,name:L.certificate.name}],this.setState({certificateConfig:v})},this.cancelSelectCertificate=()=>{var v=this.state.certificateConfig;v.visible=!1,this.setState({certificateConfig:v})},this.sureSelectCertificate=v=>{this.cancelSelectCertificate();var L=this.props.value;L.certificate.id=v[0].id,L.certificate.name=v[0].name,this.props.onFieldChange(L)},this.checkScoreReward=v=>{var L=v.target.checked,A=this.props.value;A.score.isCheckedReward=L,this.props.onFieldChange(A)},this.checkScoreDeduction=v=>{var L=v.target.checked,A=this.props.value;A.score.isCheckedDeduction=L,this.props.onFieldChange(A)},this.checkCerti=v=>{var L=v.target.checked,A=this.props.value;A.certificate.isChecked=L,this.props.onFieldChange(A)},this.inputReward=v=>{var L=this.props.value;L.score.reward=v,this.props.onFieldChange(L)},this.inputDeduction=v=>{var L=this.props.value;L.score.deduction=v,this.props.onFieldChange(L)},this.state={certificateConfig:{visible:!1,defaultChecked:[],onCancel:this.cancelSelectCertificate,onOk:this.sureSelectCertificate}}}componentDidMount(){var W=this.props.value;!W.score.isCheckedReward&&!W.score.isCheckedDeduction&&this.getScoreRule()}render(){var W=this.state.certificateConfig,v=this.props,L=v.value,A=v.isPreview,$=v.tipType,z=$===void 0?"":$,B=v.t,ie=v.formik,H=ie.errors,se=ie.touched,le=L.certificate,i=L.score;return l().createElement("div",{className:"study-reward task"},l().createElement("div",{className:"study-reward-title"},B("learning.learningAddSecRewardTitle"),l().createElement("span",{className:"study-reward-sub"},B("learning.learningAddSecRewardTitleTip"))),l().createElement("div",{className:"study-reward-item"},l().createElement(E.Z,{className:"study-reward-checkbox",disabled:A,checked:le.isChecked,onChange:this.checkCerti},B("learning.learningAddRewardCert")),l().createElement(b.Z,{value:le.name,disabled:!0,className:se.reward&&H.reward&&H.reward.certificateChecked?"status-error study-reward-number":"study-reward-number"}),l().createElement(g.Z,{type:"link",icon:l().createElement(R.Z,null),disabled:!le.isChecked||A,onClick:this.handleSelectCertificate},B("learning.learningAddRewardCertSelect"))),l().createElement("div",{className:"study-reward-item"},l().createElement(E.Z,{className:"study-reward-checkbox",checked:i.isCheckedReward,disabled:A,onChange:this.checkScoreReward},B("learning.learningAddRewardPassScore")),l().createElement(c.Z,{value:i.reward,disabled:!i.isCheckedReward||A,onChange:this.inputReward,min:0,max:999,precision:0,className:se.reward&&H.reward&&H.reward.scoreRewardChecked?"status-error":""}),l().createElement("span",{className:"study-reward-tip"},B(z==="project"?"learning.learningAddRewardPassScoreProjectTip":"learning.learningAddRewardPassScoreTip"))),l().createElement("div",{className:"study-reward-item"},l().createElement(E.Z,{className:"study-reward-checkbox",disabled:A,checked:i.isCheckedDeduction,onChange:this.checkScoreDeduction},B("learning.learningAddRewardunPassScore")),l().createElement(c.Z,{value:i.deduction,disabled:!i.isCheckedDeduction||A,onChange:this.inputDeduction,min:0,max:999,precision:0,className:se.reward&&H.reward&&H.reward.scoreDeductionChecked?"status-error":""}),l().createElement("span",{className:"study-reward-tip"},B(z==="project"?"learning.learningAddRewardunPassScoreProjectTip":"learning.learningAddRewardunPassScoreTip"))),se.reward&&H.reward&&l().createElement("span",{style:{paddingLeft:"16px"},className:"tip_error_msg"},H.reward.msg),l().createElement(f.Z,W))}}V.Z=(0,k.Z)((0,S.$j)((0,y.$j)(G)((0,h.Z)()(P))))},44659:function(oe,V,d){"use strict";var U=d(77576),c=d(59314),F=d(22385),g=d(31097),te=d(77883),b=d(21888),j=d(63185),E=d(9676),o=d(12924),l=d.n(o),h=d(28216),y=d(91768),S=d(17780),R=d(43859),k=d(16239),f=d(84874),D=d(38642);class X extends l().Component{constructor(){super(...arguments);this.state={blackList:{jobEvaluationSwitch:(0,D.eY)("STUDYTIME_JOBEVALUATION_SWITCH"),faceKnowTipFlag:(0,D.eY)("STUDYTIMELIMT_EXAM_FACE_KNOW")},whiteList:{faceVideoSourceFlag:(0,D.UI)("STUDYTIMELIMT_VIDEO_FACE_KNOW")}},this.renderText=()=>{var P=this.props.t;return l().createElement("div",null,l().createElement("p",{className:"title"},P("course.documentStudyLimitTip1")),l().createElement("p",{className:"title"},P("course.documentStudyLimitTip2")))},this.handleCheck=P=>{var I=P.target.checked,W=this.props.value;W.isChecked=I,this.props.onFieldChange(W)},this.handleInput=P=>{var I=this.props.value;I.limit=P,this.props.onFieldChange(I)},this.handleSwitch=P=>{var I=this.props.value;I.faceRecognition=P,this.props.onFieldChange(I)},this.handleMediaSwitch=P=>{var I=this.props.value;I.videoFaceRecognition=P,this.props.onFieldChange(I)},this.handleJobSwitch=P=>{var I=this.props.value;I.jobEvaluationResults=P,this.props.onFieldChange(I)}}render(){var P=this.props,I=P.value,W=P.isPreview,v=P.t,L=P.appType,A=P.isShowJobInput,$=P.jobEvaluationCount,z=P.componentType,B=P.isEdit,ie=P.qyShield,H=this.state,se=H.blackList,le=H.whiteList;return l().createElement("div",{className:"study-time-limit"},l().createElement("div",{className:"study-time-limit-title"},v("learning.learningAddSecSetTitle"),l().createElement("span",{className:"study-time-limit-sub"},v("learning.learningAddSecSetTitleTip"))),l().createElement("div",{className:"study-time-limit-input"},l().createElement(E.Z,{checked:I.isChecked,onChange:this.handleCheck,disabled:W||B,className:I.isChecked?"study-time-limit-checked":""},v("learning.learningAddSecSetTitleInfo")),l().createElement(b.Z,{size:"middle",value:I.limit,disabled:!I.isChecked||W,onChange:this.handleInput,className:"study-time-limit-number",min:1,max:9999,precision:0}),l().createElement("span",{className:"study-time-limit-standard"}),v("course.secByPage"),l().createElement(g.Z,{placement:"top",title:this.renderText},l().createElement("span",null,l().createElement(f.Z,{iconClass:"icon-f-tipe"}))),I.isChecked?null:l().createElement("span",{className:"study-time-limit-tip"},v("course.documentStudyLimitTip"))),se.jobEvaluationSwitch&&A&&ie==="false"&&l().createElement("div",{className:"study-time-limit-jobInput"},$<1?l().createElement(c.Z,{defaultChecked:!1,checked:!1,disabled:!0,id:1}):l().createElement(c.Z,{checked:I.jobEvaluationResults,onChange:this.handleJobSwitch,disabled:W,id:2}),l().createElement("span",{className:"item-margin"}," ",v("learning.openJobEvaluationResults")," "),l().createElement("span",{className:"study-time-limit-tip"},v("learning.jobEvaluationResultsTip"))),(0,S.xX)()||L==="wx_app"||L==="fs_app"||!k.Z[(0,k.c)()].showCl||z==="authentication"||!se.faceKnowTipFlag?null:l().createElement("div",{className:"study-time-limit-input"},l().createElement(c.Z,{defaultChecked:I.faceRecognition,onChange:this.handleSwitch,disabled:W}),l().createElement("span",{className:"item-margin"}," ",v("exam.faceKnow")," "),l().createElement("span",{className:"study-time-limit-tip"},v("exam.faceKnowTip"))),le.faceVideoSourceFlag?l().createElement("div",{className:"study-time-limit-input"},l().createElement(c.Z,{defaultChecked:I.videoFaceRecognition,onChange:this.handleMediaSwitch,disabled:W}),l().createElement("span",{className:"item-margin"}," ",v("exam.faceVideoSource")," "),l().createElement("span",{className:"study-time-limit-tip"},v("exam.faceVideoSourceTip"))):null)}}V.Z=(0,h.$j)(G=>({appType:G.user.appType,themeColor:G.advancedSetting.themeColor,qyShield:G.user.qyShield}))((0,R.Z)((0,y.Z)()(X)))},6998:function(oe,V,d){"use strict";var U=d(47673),c=d(4107),F=d(12924),g=d.n(F),te=d(43859),b=d(80991),j=d(10237),E=d(37055);class o extends g().Component{constructor(){var h;super(...arguments);h=this,this.handleChange=y=>{var S=y.target.value;this.props.onChange(S)},this.handleBlur=()=>{var y=this.props.formType;switch(y){case"task":this.checkTaskName();break;case"project":this.checkProjectName();break;case"employee":this.checkTaskName(2);break;default:break}},this.checkTaskName=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,S=E.ZP.EditStudyTask.checkTaskTitle(),R=h.props,k=R.value,f=R.formik,D=R.t,X={edit:y,trainName:k};j.WY.get({url:S,params:X}).then(G=>{G.data.code!==0&&(f.setFieldError("title",D("learning.learningAddTitleRepeatTip")),f.setFieldTouched("title",!0,!1))})},this.checkProjectName=()=>{var y=E.ZP.EditStudyProject.checkProjectName(),S=this.props,R=S.value,k=S.formik,f=S.t,D={title:R};j.WY.post({url:y,data:D}).then(X=>{X.data.checked!=="true"&&(k.setFieldError("title",f("learning.learningAddTitleRepeatTip")),k.setFieldTouched("title",!0,!1))}).catch(X=>{X.response.data.code==="enterpriseapi.542001"&&(k.setFieldError("title",f("learning.learningAddTitleRepeatTip")),k.setFieldTouched("title",!0,!1))})}}render(){var h=this.props,y=h.value,S=h.isPreview,R=h.placeholder;return g().createElement(c.Z,{style:{width:"350px"},value:y,disabled:S,placeholder:R,onChange:this.handleChange})}}V.Z=(0,te.Z)((0,b.$j)(o))},25501:function(oe,V,d){"use strict";var U=d(12924),c=d.n(U),F=d(91768),g=d(24144),te=d(84874),b=d(43859);class j extends c().Component{constructor(){super(...arguments);this.onChange=o=>{var l=o.fileList;this.props.onChange(l)}}render(){var o=this.props,l=o.value,h=o.isPreview,y=o.t;return c().createElement("div",{className:"ding_QR_code_upload_image_field"},c().createElement("div",{className:"ding_QR_code_upload_container"},c().createElement(g.ZM,{fileList:l,uploadConfig:{maxCount:1,fileList:l,disabled:h},size:{value:2,unit:"MB"},onUploadedListChange:this.onChange,render:S=>(0,g.iM)(S)})),c().createElement("div",{className:"ding_QR_code_upload_image_field_tip"},c().createElement(te.Z,{iconClass:"icon-icon_attentionx1",size:"14px"}),y("learning.learningAddACTip")))}}V.Z=(0,b.Z)((0,F.Z)()(j))},40767:function(oe,V,d){"use strict";d.d(V,{g:function(){return U},c:function(){return c}});var U={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},c={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:20}}}},89135:function(oe,V,d){"use strict";var U=d(88986),c=d(78138),F=d.n(c),g=d(6793),te=d(2396),b=d(3407),j=(0,g.me)(),E=b.Z[j].learning.validation;V.Z={multiText:o=>{var l;return(0,te.$s)((0,g.fy)(o))>256&&(l=E.multiTextTip),l},title:o=>((0,g.fy)(o)?"":E.learningAddItemTitleNull)||((0,g.fy)(o).length>60?E.learningAddItemTitleLimit:""),dateRange:(o,l,h)=>{var y;if((!o.startTime||!o.endTime)&&(y=E.learningAddItemDateRangeNull),!h){var S="YYYY-MM-DD HH:mm";l.forEach(R=>{(F()(F()(R.data.dateRange.startTime).format(S)).valueOf()<(0,g.jZ)(F()(o.startTime).format(S))||F()(F()(R.data.dateRange.startTime).format("YYYY-MM-DD HH:mm")).valueOf()>(0,g.jZ)(F()(o.endTime).format(S))||F()(F()(R.data.dateRange.endTime).format(S)).valueOf()<=(0,g.jZ)(F()(o.startTime).format(S))||F()(F()(R.data.dateRange.endTime).format(S)).valueOf()>(0,g.jZ)(F()(o.endTime).format(S)))&&(y=E.learningAddItemDateRangeOnsite)})}return y},qualifiedStandardExceptWork:(o,l,h)=>{var y;return o&&(h===0&&l===0||!o.progress.isChecked&&!o.exam.isChecked||h===0&&!o.exam.isChecked)&&(y=E.learningAddItemPass),y},qualifiedStandardInOperation:(o,l,h,y,S)=>{var R;return o&&(h===0&&l===0&&y===0&&S===0||!o.progress.isChecked&&!o.exam.isChecked&&!o.operation.isChecked&&o.jobEvaluation&&!o.jobEvaluation.isChecked)&&(R=E.learningAddItemPass),R},checkStandardInOperation:(o,l,h,y)=>{var S;return o&&(h===0&&l===0&&y===0||!o.progress.isChecked&&!o.exam.isChecked&&!o.operation.isChecked||o.progress.isChecked&&!o.progress.progress||l!==0&&o.exam.isChecked&&!o.exam.times||y!==0&&o.operation.isChecked&&!o.operation.times)&&(S=E.learningAddItemPass),S},qualifiedStandard:(o,l,h,y,S)=>{var R;return o&&(h===0&&l===0&&y===0&&S===0||!o.progress.isChecked&&!o.exam.isChecked&&!o.operation.isChecked&&!o.jobEvaluation.isChecked||o.progress.isChecked&&!o.progress.progress||l!==0&&!o.exam.isChecked||l!==0&&o.exam.isChecked&&!o.exam.times||y!==0&&!o.operation.isChecked||y!==0&&o.operation.isChecked&&!o.operation.times)&&(R=E.learningAddItemPass),R},reward:o=>{var l={};return(!o||o.certificate.isChecked&&!o.certificate.id)&&(l=(0,U.Z)((0,U.Z)({},l),{},{certificateChecked:!0,msg:E.learningAddItemRewardCert})),o.score.isCheckedDeduction&&!o.score.deduction&&(l=(0,U.Z)((0,U.Z)({},l),{},{scoreDeductionChecked:!0,msg:E.learningAddItemRewardunPass})),o.score.isCheckedReward&&!o.score.reward&&(l=(0,U.Z)((0,U.Z)({},l),{},{scoreRewardChecked:!0,msg:E.learningAddItemRewardPass})),Object.keys(l).length?l:""},checkTerm:o=>{var l=o.number,h;return(!te.fA.positiveInteger.test(l)||l<1||l>100)&&(h=E.learningAddItemTerm),h},studyLimit:o=>{var l;return o.isChecked&&!o.limit?l=E.learningTimeTip:o.limit>9999&&(l=E.learningTimeBeyondTip),l},originPrice:o=>{var l;return parseFloat(o)===0?l=E.originalPriceTip:parseFloat(o)>99999&&(l=E.maxOriginPriceTip),l},discountPrice:(o,l)=>{var h;return o===""||parseFloat(o)===0?h=E.discountPriceTip:parseFloat(o)>99999?h=E.maxDiscountPriceTip:parseFloat(l)<=parseFloat(o)&&(h=E.diffPriceTip),h},registerRange:o=>{var l;return(!o.startTime||!o.endTime)&&(l=E.learningAddItemDateRangeNull),(0,g.jZ)(o.startTime)>=(0,g.jZ)(o.endTime)&&(l=E.learningAddItemDateRangeLimit),l},dateValidateCourse:(o,l)=>{var h;return(!o.startTime||!o.endTime)&&(h=E.learningAddItemDateRangeNull),(0,g.jZ)(o.startTime)>=(0,g.jZ)(o.endTime)&&(h=E.learningAddItemDateRangeLimit),(0,g.jZ)(o.startTime)<(0,g.jZ)(l.endTime)&&(h=E.learningCourseTime),h},inputValidateNumber:(o,l)=>{var h="";return(0,g.fy)(o)?(l&&Number(o)>=Number(l)&&(h=b.Z[j].learning.validation.priceLimit),Number(o)>99999&&(h=b.Z[j].validation.maxNum99999),Number(o)<.01&&(h=b.Z[j].validation.minNum),h):(h=b.Z[j].validation.pleaseEnter,h)},applyTip:o=>{var l;return o.isNeedApply==="need"&&o.enrollAudit==="automatic_audit"&&o.enrollLimit&&o.limitCount===""&&(l=E.applyPeopleTip),l},taskPrice:o=>{var l=o.price,h=o.isPaid,y;return h&&(l===""||parseFloat(l)===0?y=E.taskPriceTip:parseFloat(l)>99999&&(y=E.maxPriceTip)),y}}},36902:function(oe,V,d){"use strict";d.r(V),d.d(V,{default:function(){return r}});var U=d(12924),c=d.n(U),F=d(20228),g=d(11382),te=d(57663),b=d(71577),j=d(62029),E=d(71194),o=d(57016),l=d(34792),h=d(48086),y=d(28216),S=d(91768),R=d(76651),k=d(73340),f=d(80991),D=d(57068),X=d(6998),G=d(25501),P=d(44659),I=d(69069),W=d(16084),v=d(89135),L=d(40767),A=d(41222),$=d(10237),z=d(37055),B=d(62615),ie=d(52670),H=d(53009),se=d(6793),le=d(17994),i=d(70075),_=d(4408),C=d(38642),p=d(86726);function m(n){return n.map(u=>{var a=u;return a.name=a.user_name,a.id=a.user_id,a})}function s(n){return n.map(u=>({id:u.id,name:u.title,type:"course",icon:z.e1[u.type],originalType:u.type,componentName:"CourseSelector",status:"0",duration:u.duration,data:u}))}var e=n=>({user:n.user,documentStudyLimit:n.advancedSetting.documentStudyLimit,publishRange:n.postTalentAssessment.publishRange,courseList:n.postTalentAssessment.courseList,userList:n.postTalentAssessment.userList,planId:n.postTalentAssessment.planId,isOpen:n.user.JobEvaluationOpen});class t extends c().Component{constructor(u){super(u);this.scrollTop=()=>{var a=document.getElementsByClassName("batchstudytask-edit")[0];a.scrollTop=0},this.submit=(a,w)=>{var O=this.props.t,N=this.state,x=N.editTaskId,ee=N.taskStatus,J=x?z.ZP.EditStudyTask.editTask():z.ZP.EditStudyTask.addTask(),Z=a.title,ae=a.dateRange,Y=a.summary,q=a.qrcode,Q=a.stages,re=a.employeeRange,_e=a.studyLimit,de=a.qualifiedStandard,ce=a.reward,me=a.supervisor,pe=a.stagePass,K=a.deptIds,ue=a.trainObject,ke=a.budget,Ee=(0,A.Qz)(Q),ge={title:Z,beginTime:(0,se.jZ)(ae.startTime),endTime:(0,se.jZ)(ae.endTime),summary:Y,dept_ids:K,train_object:ue,budget:ke,dingImgUrl:q[0]?q[0].url:"",departmentIds:re.rangeList.dept.map(ne=>ne.id).join(","),supervisor_department_ids:[],groupIds:re.rangeList.group.map(ne=>ne.id).join(","),isGetScore:!0,isNoticeAll:re.rangeType===2?0:1,planCertificateId:ce.certificate.isChecked?ce.certificate.id:"",postIds:re.rangeList.post.map(ne=>ne.id).join(","),progress:Ee>0&&de.progress.isChecked?de.progress.progress:0,studyScore:{finishScore:ce.score.isCheckedReward?ce.score.reward:0,unFinishScore:ce.score.isCheckedDeduction?ce.score.deduction:0},studyTimeLimit:_e.isChecked?_e.limit:0,faceRecognition:_e.faceRecognition===!0?"on":"off",supervisorId:me.supervisorUserList.map(ne=>ne.id).join(","),supervisorPaper:me.isChecked,authorityRange:me.authScopeIsChecked,times:de.exam.isChecked?de.exam.times:"",operationTimes:de.operation.isChecked?de.operation.times:"",userIds:re.rangeList.user.map(ne=>ne.id).join(","),stageJson:(0,H.TD)(Q,!!x,"study"),stagePass:pe,finishEvaluation:(0,A.S1)(Q)>0?de.jobEvaluation.isChecked:!1,openEvaluationResult:(0,A.S1)(Q)>0?_e.jobEvaluationResults:!1,scheduleSetting:"free_mode",action:"published"};x&&(ge.id=x,ge.planStatus=ee),$.WY.post({url:J,data:ge}).then(ne=>{if(ne.data.code===0)h.default.success(O(x?"common.saveSuccess":"common.releaseSuccess")),w.setSubmitting(!1),this.setReleaseStudyPlan(re.rangeList.user.map(he=>he.id)),R.m8.goBack();else if(ne.data.code===111){var Ce=ne.data.data.stageError,fe=Ce[0],ve=fe.stageIndex,ye=fe.resourceIndexs;(0,le.R)({name:"stages",errMsg:"".concat(this.props.t("formItem.stageTaskPanelTitle")).concat(ve,": ").concat(Q[ve-1].list[ye[0]].name," ").concat(this.props.t("common.rsNonExistent")),actions:w})}else if(ne.data.code===2){var Te=ne.data.data.courseList,be=Te.map(he=>he.summary);h.default.error(be.join(",")+O("learning.batchAddErrorTip")),w.setSubmitting(!1)}else w.setSubmitting(!1)}).catch(()=>{w.setSubmitting(!1)})},this.cancelEdit=()=>{var a=this.props.t;o.Z.confirm({title:a("common.tip"),content:a("learning.batchAddOnCancel"),onOk:()=>{this.linkToList()}})},this.linkToList=()=>{R.m8.goBack()},this.state={editTaskId:"",requested:!1,taskStatusEdit:-1,canEditFields:["title","dateRange","qrcode","stages","employeeRange","studyLimit","qualifiedStandard","reward","supervisor","stagePass"],taskStatus:"",showForm:!0,appType:localStorage.appType,blackList:{batchtaskformAc:(0,C.eY)("BATCHTASKFORM_LEARNING_ADD_AC")}}}componentDidMount(){this.setState({requested:!0})}setReleaseStudyPlan(u){var a=z.ZP.PostTalentEvaluation.setReleaseStudyPlan(this.props.planId),w={user_ids:u};$.WY.post({url:a,data:w})}render(){var u=this.state,a=u.requested,w=u.editTaskId,O=u.canEditFields,N=u.taskStatusEdit,x=u.showForm,ee=u.appType,J=u.blackList,Z=this.props,ae=Z.prefixCls,Y=Z.isPreview,q=Z.t,Q=Z.isOpen,re=Z.userList,_e=Z.courseList,de=D.parse(R.m8.location.search),ce=de.id,me=Q?["courseware","course","imageTextCourse","exam","offline","investigate","practice","jobEvaluation"]:["courseware","course","imageTextCourse","exam","offline","investigate","practice"],pe=(0,p.e)("evaluationTool",this.props.user.modules);return c().createElement("div",{className:ae},c().createElement(_.Z,{title:q("documentTitle.addTasks")}),c().createElement("div",{className:"".concat(ae,"__content")},a&&x&&re.length!==0&&_e.length!==0?c().createElement(f.J9,{initialValues:{title:"",dateRange:{startTime:null,endTime:null},summary:"",createUserId:"",qrcode:[],stages:[{key:"".concat(new Date().getTime()),name:"".concat(this.props.t("formItem.stageTaskPanelTitle"),"1"),desc:"",list:s(this.props.courseList),inOrder:!1}],employeeRange:{rangeType:2,rangeList:{dept:[],post:[],group:[],user:m(this.props.userList)}},studyLimit:{isChecked:this.props.documentStudyLimit!=0,limit:this.props.documentStudyLimit,faceRecognition:!!this.props.faceRecognition,jobEvaluationResults:!!this.props.jobEvaluationResults},qualifiedStandard:{progress:{isChecked:!0,progress:100},exam:{isChecked:!1,times:1},operation:{isChecked:!1,times:1},jobEvaluation:{isChecked:!1}},reward:{certificate:{isChecked:!1,id:"",name:""},score:{isCheckedReward:!1,isCheckedDeduction:!1,reward:0,deduction:0}},supervisor:{supervisorUserList:[],isChecked:!0,visibleAuthScope:!0,authScopeIsChecked:!1},stagePass:!1},onSubmit:this.submit,render:K=>c().createElement(f.l0,{className:"cl-form"},c().createElement("h1",{className:"cl-form-htitle"},"".concat(q("learning.learningBatchAddTitle"))),c().createElement("div",{className:"cl-form__sectitle"},q("learning.basicInformation")),c().createElement(f.gN,(0,j.Z)({name:"title",label:q("learning.learningAddName"),required:!0,defaultValue:K.values.title,validate:ue=>v.Z.title(ue),component:X.Z,isPreview:Y||O.indexOf("title")===-1,formType:"task",placeholder:q("learning.learningAddItemTitlePlaceholder")},L.g)),c().createElement(f.gN,(0,j.Z)({component:B.E2,displayType:"Custom",name:"dateRange",label:q("learning.learningAddValidity"),required:!0,disabled:Y||O.indexOf("dateRange")===-1,onlyChangeEndTime:!Y&&O.indexOf("dateRange-end")!==-1,defaultFieldList:K.values.dateRange,dateRangeLimit:K.values.dateRangeLimit,validate:ue=>v.Z.dateRange(ue,(0,A.VB)(K.values.stages))},L.g)),c().createElement(f.gN,(0,j.Z)({name:"summary",label:q("learning.taskSummary"),component:i.Z,rows:5,maxLength:150,type:"text",placeholder:q("learning.validation.taskSummaryTip"),style:{width:"550px"}},L.g)),J.batchtaskformAc&&ee==="e_app"?c().createElement(f.gN,(0,j.Z)({name:"qrcode",label:q("learning.learningAddAC"),component:G.Z},L.g,{isPreview:Y||O.indexOf("qrcode")===-1})):null,c().createElement("p",{className:"cl-form__divide padding"}),c().createElement("div",{className:"cl-form__sectitle"},q("learning.learningAddSecStage")),c().createElement(f.gN,{component:B.Vi,isHasToolEva:pe,displayType:"Custom",name:"stages",required:!0,editable:!w,validate:ie.NW,taskStatusEdit:N,isPreview:Y||O.indexOf("stages")===-1,defaultFieldList:K.values.stages,createUserId:K.values.createUserId,resourceType:me,jobEvaluationCount:(0,A.S1)(K.values.stages)}),c().createElement(f.gN,{component:B._e,name:"stagePass",isPreview:Y||O.indexOf("stagePass")===-1}),c().createElement("p",{className:"cl-form__divide padding"}),c().createElement(f.gN,{component:B.ww,displayType:"Custom",name:"employeeRange",mode:["part"],defaultFieldList:K.values.employeeRange,validate:ie.FI,disabled:!0,disabledAdd:!0}),c().createElement("p",{className:"cl-form__divide padding"}),c().createElement("div",{className:"cl-form__sectitle"},q("learning.learningAddSecSetting")),c().createElement(f.gN,{component:P.Z,displayType:"Custom",name:"studyLimit",isShowJobInput:Q,isPreview:Y||O.indexOf("studyLimit")===-1,validate:ue=>v.Z.studyLimit(ue),jobEvaluationCount:(0,A.S1)(K.values.stages)}),c().createElement(f.gN,{component:W.Z,displayType:"Custom",examCount:(0,A.z2)(K.values.stages),courseCount:(0,A.Qz)(K.values.stages),operationCount:(0,A.GM)(K.values.stages),jobEvaluationCount:(0,A.S1)(K.values.stages),name:"qualifiedStandard",shouldRenderedOperationCount:!0,completeJobEvaluation:Q,isPreview:Y||O.indexOf("qualifiedStandard")===-1,validate:ue=>v.Z.qualifiedStandard(ue,(0,A.z2)(K.values.stages),(0,A.Qz)(K.values.stages),(0,A.GM)(K.values.stages))}),c().createElement(f.gN,{component:I.Z,displayType:"Custom",name:"reward",validate:v.Z.reward,isPreview:Y||O.indexOf("reward")===-1,customError:!0}),c().createElement(f.gN,{component:B.i0,displayType:"Custom",name:"supervisor",disabled:Y||O.indexOf("supervisor")===-1,defaultFieldList:K.values.supervisor,createUserId:K.values.createUserId}),c().createElement(B.I,null),c().createElement("div",{className:"cl-form-fixed-footer"},c().createElement("div",{className:"cl-form-fixed-footer__container"},Y?null:c().createElement(b.Z,{className:"form-page-container-bottom-btn",loading:K.isSubmitting,type:"primary",htmlType:"submit"},q(ce?"common.save":"common.release")),c().createElement(b.Z,{className:"form-page-container-bottom-btn",onClick:this.cancelEdit},q("common.cancel")))))}):c().createElement(g.Z,null)),c().createElement(k.NL,{message:()=>(this.props.dispatch({type:"postTalentAssessment/clearStudyPlanPeopleInfos"}),!0)}))}}t.defaultProps={prefixCls:"batchstudytask-edit",isPreview:!1};var T=(0,y.$j)(e)((0,S.Z)()(t));class M extends c().Component{render(){return c().createElement(T,{isPreview:!1})}}var r=M},17994:function(oe,V,d){"use strict";d.d(V,{R:function(){return c}});var U=d(62615),c=F=>{var g=F.name,te=F.errMsg,b=F.actions;b.setFieldError(g,te),b.setSubmitting(!1),U.I.scrollTo(g)}}}]);
