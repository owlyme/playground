(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[5531],{4408:function(C,E,s){"use strict";var h=s(12924),r=s.n(h),_=s(28216),p=s(17780),w=s(38642),l=e=>({userInfo:e.user}),m=e=>{var c=e.title;return(0,p.xX)()&&setTimeout(()=>{document.title=c},0),(0,h.useEffect)(()=>{if(c&&document.title!==c&&setTimeout(()=>{document.title=c},0),(0,w.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var I=document.querySelector(".zoom-report");I&&(I.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[c]),r().createElement(r().Fragment,null)};m.defautProps={title:""},E.Z=(0,_.$j)(l)(m)},72387:function(C,E,s){"use strict";var h=s(12924),r=s.n(h),_=s(84874);class p extends r().PureComponent{constructor(l){super(l);this.onPrev=()=>{var m=this.state.activeIndex;this.setState({activeIndex:m<=0?0:m-1})},this.onNext=()=>{var m=this.props.imgList,e=this.state.activeIndex;this.setState({activeIndex:m.length<=e+1?e:e+1})},this.state={activeIndex:l.defaultActive}}componentDidUpdate(l){l.visible!==this.props.visible&&this.props.visible&&this.setState({activeIndex:this.props.defaultActive})}render(){var l=this.props,m=l.visible,e=l.imgList,c=this.state.activeIndex;return r().createElement("div",{className:"preview-img-mask",style:{display:m?"block":"none"}},r().createElement("div",{className:"preview-img-bg"},r().createElement("div",{className:"preview-img"},r().createElement("img",{src:e[c]}),r().createElement("span",{className:"preview-img-close",onClick:this.props.onClose},r().createElement(_.Z,{iconClass:"iconf-close"})))),c>=1?r().createElement("span",{className:"preview-img-left",onClick:this.onPrev},r().createElement(_.Z,{iconClass:"iconf-arrow-left",size:"20px"})):null,c<=e.length-2?r().createElement("span",{className:"preview-img-right",onClick:this.onNext},r().createElement(_.Z,{iconClass:"iconf-arrow-right",size:"20px"})):null)}}p.defaultProps={visible:!1,imgList:[],defaultActive:0,onClose:()=>{}},E.Z=p},41978:function(C,E,s){"use strict";s.r(E);var h=s(22385),r=s(31097),_=s(57663),p=s(71577),w=s(34792),l=s(48086),m=s(12924),e=s.n(m),c=s(28216),I=s(91768),M=s(57068),O=s(76651),g=s(37055),D=s(10237),x=s(4408),B=s(72387),L=()=>({});class T extends e().Component{constructor(o){super(o);this.getPaperInfo=()=>{var t=this.state.paperId,a=g.ZP.ViewPaper.getPaperInfo(),i={id:t};D.WY.get({url:a,params:i}).then(n=>{this.setState({paperInfo:n.data})})},this.handleClosePreview=()=>{this.setState({showPreview:!1})},this.previewImg=(t,a)=>{this.setState({imageList:t,showPreview:!0,defaultActiveImg:a})},this.handleCancel=()=>{O.m8.push("/knowledgeBase/examResources/paper")},this.handleDownload=t=>{t.currentTarget.blur();var a=g.ZP.ViewPaper.download();a="".concat(a,"?access_token=").concat(window.localStorage.getItem("token"),"&id=").concat(this.state.paperId),window.location.href=a},this.handlePreviewItemImg=t=>{this.previewImg([t],0)},this.renderQuestionTitle=(t,a,i)=>{var n=this.props.t,v=[n("examing.single"),n("examing.multiple"),n("examing.tof"),n("examing.blank"),n("examing.describe")];return e().createElement("div",{className:"question-item-title"},e().createElement("div",null,a+1,". \u3010",v[t.type-1],"\u3011 ",i||t.title,e().createElement("span",{className:"question-item-score"},"(",t.score,n("examing.scoreLabel"),")")),t.titleImageList?e().createElement("div",{className:"question-item-title-img"},t.titleImageList.map((u,f)=>e().createElement("img",{src:u,key:f,onClick:()=>this.previewImg(t.titleImageList,f),alt:""}))):null)},this.renderRadioQuestion=(t,a)=>e().createElement("div",{className:"view-paper-list-item question-item",key:t.id},this.renderQuestionTitle(t,a),e().createElement("div",{className:"question-item-options"},t.answer.map((i,n)=>e().createElement("div",{key:n,className:"question-item-options-item__container"},e().createElement("div",{className:"question-item-options-item"},i.optionOrder,". ",i.title,i.isAnswer?e().createElement("span",{className:"is-correct-answer"},"(",this.props.t("learning.questionAddOptionSubName"),")"):null),i.answerImage?e().createElement("div",{className:"question-item-options-item__container__img-box",onClick:()=>this.handlePreviewItemImg(i.answerImage)},e().createElement("img",{src:i.answerImage,alt:""})):null)))),this.renderBlankQuestion=(t,a)=>{var i=new RegExp(/\[\[.*?\]\]/g,"g"),n=t.title.replace(i,"(____)");return e().createElement("div",{className:"view-paper-list-item question-item",key:t.id},this.renderQuestionTitle(t,a,n),e().createElement("div",{className:"question-item-options"},t.answer.map((v,u)=>e().createElement("div",{className:"question-item-options-item",key:u},this.props.t("examing.blankLabel"),u+1,"\uFF1A ",v.title))))},this.renderDescribeQuestion=(t,a)=>e().createElement("div",{className:"view-paper-list-item question-item",key:t.id},this.renderQuestionTitle(t,a),e().createElement("div",{className:"question-item-options"},t.answer.map((i,n)=>e().createElement("div",{className:"question-item-options-item",key:n},this.props.t("examing.describeLabel"),n+1,"\uFF1A ",i.title)))),this.handleExportBlankPaper=()=>{var t=this.state.paperId,a=g.ZP.PaperManager.exportBlankPaper(t),i={id:t};D.WY.get({url:a,params:i}).then(n=>{n.data.code===200&&l.default.success(this.props.t("study.compoundSucceed")),this.getDownloadingNumber()}).catch(n=>{var v=n.response.data.code;v==="examapi.0013"&&this.setState({canExportBlankPaper:!1,exportBlankPaperTip:"\u8BE5\u8BD5\u5377\u6B63\u5728\u751F\u6210\u4E14\u65F6\u95F4\u8DDD\u73B0\u5728\u4E0D\u8D85\u8FC710\u5206\u949F"})})},this.canExportBlankPaper=()=>{var t=this.state.paperId,a=g.ZP.PaperManager.canExportBlankPaper(t);D.WY.get({url:a}).then(i=>{this.setState({canExportBlankPaper:i.data.code===200})}).catch(i=>{var n=i.response.data.code;this.setState({canExportBlankPaper:!1,exportBlankPaperTip:n==="examapi.0012"?"\u8BD5\u5377\u56FE\u7247\u5927\u4E8E100,\u6682\u4E0D\u652F\u6301\u5BFC\u51FA":"\u8BE5\u8BD5\u5377\u6B63\u5728\u751F\u6210\u4E14\u65F6\u95F4\u8DDD\u73B0\u5728\u4E0D\u8D85\u8FC710\u5206\u949F"})})},this.getDownloadingNumber=()=>{var t=g.ZP.downLoadCenter.getDownLoadingCount();D.WY.get({url:t,params:{}}).then(a=>{sessionStorage.setItem("downloadingCount",a.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:a.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.state={paperId:"",paperInfo:{questionInfo:[]},showPreview:!1,imageList:[],defaultActiveImg:0,canExportBlankPaper:!0,exportBlankPaperTip:""}}componentDidMount(){var o=M.parse(this.props.history.location.search),t=o.paperId;this.setState({paperId:t},()=>{this.getPaperInfo(),this.canExportBlankPaper(),this.getDownloadingNumber()})}render(){var o=this.props.t,t=this.state,a=t.paperInfo,i=t.showPreview,n=t.imageList,v=t.defaultActiveImg,u=t.canExportBlankPaper,f=t.exportBlankPaperTip;return e().createElement("div",{className:"view-paper",onContextMenu:d=>(d.preventDefault(),!1)},e().createElement(x.Z,{title:o("documentTitle.previewPaper")}),e().createElement("div",{className:"view-paper-container"},e().createElement("div",{className:"view-paper-top"},e().createElement("h3",{className:"view-paper-top-title"},a.title),e().createElement("p",{className:"view-paper-top-summary"},a.summary),e().createElement("div",{className:"view-paper-top-score"},e().createElement("span",null,o("myExamTask.totalScore"),"\uFF1A",a.totalScore,o("examing.scoreLabel")),e().createElement("span",null,o("myExamTask.qualified"),"\uFF1A",a.passingScore,o("examing.scoreLabel")))),e().createElement("div",{className:"view-paper-list"},a.questionInfo.map((d,P)=>{switch(d.type){case 1:return this.renderRadioQuestion(d,P);case 2:return this.renderRadioQuestion(d,P);case 3:return this.renderRadioQuestion(d,P);case 4:return this.renderBlankQuestion(d,P);case 5:return this.renderDescribeQuestion(d,P);default:return""}})),e().createElement("div",{className:"view-paper-bottom"},e().createElement("div",{className:"view-paper-bottom-btn"},e().createElement(r.Z,{title:f,visible:!u},e().createElement(p.Z,{type:"primary",onClick:this.handleExportBlankPaper,disabled:!u},o("exam.exportBlankPaper"))),e().createElement(p.Z,{type:"primary",onClick:this.handleDownload},o("personal.download")),e().createElement(p.Z,{onClick:this.handleCancel},o("common.return"))))),e().createElement(B.Z,{visible:i,imgList:n,defaultActive:v,onClose:this.handleClosePreview}))}}E.default=(0,c.$j)(L)((0,I.Z)()(T))}}]);
