(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[2704],{18914:function(h,_,i){"use strict";var D=i(22385),E=i(31097),P=i(88986),c=i(12924),p=i.n(c);class g extends p().Component{constructor(){super(...arguments);this.state={visible:!1},this.handleVisibleChange=n=>{this.container.clientWidth<this.container.scrollWidth&&this.setState({visible:n})}}render(){var n=(0,P.Z)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block",width:this.props.width},this.props.style);return p().createElement(E.Z,{title:this.props.title,onVisibleChange:this.handleVisibleChange},p().createElement("div",{ref:o=>{this.container=o},style:n},this.props.children))}}_.Z=g},99023:function(h,_,i){"use strict";i.r(_);var D=i(57663),E=i(71577),P=i(47673),c=i(4107),p=i(34792),g=i(48086),Z=i(71194),n=i(57016),o=i(88986),f=i(12924),s=i.n(f),L=i(28216),C=i(76651),w=i(84874),I=i(49147),u=i(98489),y=i(84717),b=i(83940),B=i(91768),v=i(18914);class T extends f.Component{constructor(){super(...arguments);this.state={resetPasswordData:{mobile:"",new_password:"",new_password_flag:!0,affirm_Password:"",affirm_Password_flag:!0,verification_code:"",verifyFlag:!1,verifyTime:60,passwordType1:"text",passwordType2:"text",passwordDisabled1:!0,passwordDisabled2:!0},colour:localStorage.getItem("themeColor")},this.handleInputName=t=>{var r=this.state.resetPasswordData,e=t.target.value;this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{mobile:e})})},this.clearName=()=>{var t=this.state.resetPasswordData;this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},t),{},{mobile:""})})},this.handleInputVerify=t=>{var r=this.state.resetPasswordData;this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{verification_code:t.target.value})})},this.handleInputNewPass=t=>{var r=this.state.resetPasswordData;if(t.target.value.length===0){this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{new_password:t.target.value,passwordType1:"text",passwordDisabled1:!0})});return}this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{new_password:t.target.value,passwordType1:"password"})})},this.passwordDisabled1=()=>{var t=this.state.resetPasswordData;this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},t),{},{passwordDisabled1:!1})})},this.passwordType1=()=>{var t=this.state.resetPasswordData;this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},t),{},{passwordType1:t.passwordType1==="password"?"text":"password"})})},this.handleInputAffirmPass=t=>{var r=this.state.resetPasswordData;if(t.target.value.length===0){this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{affirm_Password:t.target.value,passwordType2:"text",passwordDisabled2:!0})});return}this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{affirm_Password:t.target.value,passwordType2:"password"})})},this.passwordType2=()=>{var t=this.state.resetPasswordData;this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},t),{},{passwordType2:t.passwordType2==="password"?"text":"password"})})},this.passwordDisabled2=()=>{var t=this.state.resetPasswordData;this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},t),{},{passwordDisabled2:!1})})},this.getResetVerification=()=>{var t=this.state,r=t.resetPasswordData,e=t.colour,m=(0,u.gG)(this.state.resetPasswordData.mobile),a=this.props.t;return m?(n.Z.warning({title:a("registerLogin.passwordResetFailed"),content:m,centered:!0,okText:a("common.ok"),okButtonProps:{style:e?{background:e,borderColor:e}:{}}}),!1):(this.state.resetPasswordData.verifyFlag&&g.default.warning(a("registerLogin.doNotSubmitRepeatedly")),(0,y.g2)({action_type:"reset_password",login_mobile:r.mobile}).then(()=>{this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{verifyFlag:!0})}),this.startVerificationTime()}).catch(l=>{n.Z.warning({title:a("registerLogin.sendFailed"),content:I.Z[l.response.data.code].content,centered:!0,okText:a("common.ok"),okButtonProps:{style:e?{background:e,borderColor:e}:{}}})}))},this.startVerificationTime=()=>{var t=null;t=setInterval(()=>{var r=this.state.resetPasswordData,e=r.verifyTime-1;if(e===0){clearInterval(this.state.VerificationTime),this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{verifyFlag:!1,verifyTime:60})});return}this.setState({resetPasswordData:(0,o.Z)((0,o.Z)({},r),{},{verifyTime:e})})},1e3),this.setState({VerificationTime:t})},this.resetSubmit=()=>{var t=this.state,r=t.resetPasswordData,e=t.colour,m=(0,u.gG)(r.mobile),a=this.props.t;if(m)return n.Z.warning({title:a("registerLogin.passwordResetFailed"),content:m,centered:!0,okText:a("common.ok"),okButtonProps:{style:e?{background:e,borderColor:e}:{}}}),!1;var l=(0,u.pF)(r.verification_code);if(l)return n.Z.warning({title:a("registerLogin.passwordResetFailed"),content:l,centered:!0,okText:a("common.ok"),okButtonProps:{style:e?{background:e,borderColor:e}:{}}}),!1;var d=(0,u.ZX)(a("registerLogin.new"),r.new_password);if(d)return n.Z.warning({title:a("registerLogin.passwordResetFailed"),content:d,centered:!0,okText:a("common.ok"),okButtonProps:{style:e?{background:e,borderColor:e}:{}}}),!1;var O=(0,u.ZX)(a("localStorage.onSure"),r.affirm_Password);return O?(n.Z.warning({title:a("registerLogin.passwordResetFailed"),content:O,centered:!0,okText:a("common.ok"),okButtonProps:{style:e?{background:e,borderColor:e}:{}}}),!1):r.new_password!==r.affirm_Password?(n.Z.warning({title:a("registerLogin.passwordResetFailed"),content:a("registerLogin.passwordsInconsistent"),centered:!0,okText:a("common.ok"),okButtonProps:{style:e?{background:e,borderColor:e}:{}}}),!1):(this.setState({resetPasswordData:(0,o.Z)({},r)}),(0,y.Xs)({login_mobile:r.mobile,password:(0,b.v)(r.new_password),encrypt:1,verification_code:r.verification_code}).then(()=>{g.default.success(a("registerLogin.passwordResetTips")),setTimeout(()=>{C.m8.goBack()},2e3)}))},this.renderColor=t=>t?{color:t}:{}}render(){var t=this.props,r=t.prefixCls,e=t.t,m=this.state,a=m.resetPasswordData,l=m.colour;return s().createElement("div",{className:r},s().createElement("div",{className:"".concat(r,"__wrapper")},s().createElement("div",{className:"".concat(r,"__return"),onClick:()=>C.m8.goBack()},s().createElement(w.Z,{iconClass:"icon-f-close",color:"#D0D4E3"})),s().createElement("div",{className:"".concat(r,"__wrapper__title")},e("account.resetPasswords")),s().createElement("div",{className:"register-form"},s().createElement("div",{className:"register-form-item"},s().createElement(v.Z,{title:e("registerLogin.accountNumber")},s().createElement("p",{className:"register-form-item-name"},e("registerLogin.accountNumber"))),s().createElement("div",{className:"reset-item-verify"},s().createElement(c.Z,{type:"text",placeholder:e("registerLogin.enterPhoneNumberOrEmail"),value:a.mobile,onInput:d=>this.handleInputName(d),maxLength:50}),a.mobile!==""&&s().createElement("div",{onClick:()=>this.clearName(),className:"register-form-clear"},s().createElement(w.Z,{iconClass:"icon-qingchu",color:"#D0D4E3"})))),s().createElement("div",{className:"register-form-item"},s().createElement(v.Z,{title:e("registerLogin.verificationCode")},s().createElement("p",{className:"register-form-item-name"},e("registerLogin.verificationCode"))),s().createElement("div",{className:"reset-item-verify"},s().createElement(c.Z,{placeholder:e("registerLogin.inputVerificationCode"),value:a.verification_code,onInput:d=>this.handleInputVerify(d),maxLength:"6"}),s().createElement("div",{onClick:()=>this.getResetVerification(),className:"reset-item-verify-box"},a.verifyFlag?s().createElement("p",{className:"reset-item-verify-num",style:this.renderColor(l)},a.verifyTime,"s"):s().createElement("p",{className:"reset-item-verify-tips",style:this.renderColor(l)},e("registerLogin.getVerificationCode"))))),s().createElement("div",{className:"register-form-item"},s().createElement(v.Z,{title:e("registerLogin.newPassword")},s().createElement("p",{className:"register-form-item-name"},e("registerLogin.newPassword"))),s().createElement("div",{className:"reset-item-verify"},s().createElement(c.Z,{type:a.passwordType1,placeholder:e("account.validatePassword"),value:a.new_password,onChange:d=>this.handleInputNewPass(d),maxLength:"20",onClick:()=>this.passwordDisabled1()}),a.new_password!==""&&s().createElement("div",{onClick:()=>this.passwordType1(),className:"register-form-clear"},s().createElement(w.Z,{iconClass:"icon-FView",color:"#D0D4E3"})))),s().createElement("div",{className:"register-form-item"},s().createElement(v.Z,{title:e("registerLogin.confirmPassword")},s().createElement("p",{className:"register-form-item-name"},e("registerLogin.confirmPassword"))),s().createElement("div",{className:"reset-item-verify"},s().createElement(c.Z,{type:a.passwordType2,placeholder:e("registerLogin.againEnterPassword"),value:a.affirm_Password,onChange:d=>this.handleInputAffirmPass(d),maxLength:"20",onClick:()=>this.passwordDisabled2()}),a.affirm_Password!==""&&s().createElement("div",{onClick:()=>this.passwordType2(),className:"register-form-clear"},s().createElement(w.Z,{iconClass:"icon-FView",color:"#D0D4E3"}))))),s().createElement("div",{className:"register-form-btn",onClick:()=>this.resetSubmit()},s().createElement(E.Z,{type:l?"default":"primary",style:l?{background:l,borderColor:l,color:"#fff"}:{}},e("common.ok")))))}}T.defaultProps={prefixCls:"reset-password-container"},_.default=(0,L.$j)(M=>({user:M.user}))((0,B.Z)()(T))},83940:function(h,_,i){"use strict";i.d(_,{v:function(){return E}});var D=i(75216);function E(P){var c=new D.Z,p="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCwp-dZYUGEJ8ixBevMmANELzri9jUet_m5AR8VkrktzuZZ0B0X-F-DYiYWmSn0_2MSWRxtiVU7d2ZzPYodBelubnH3YgxcOKJ8ILaLlCkWZd30L68MAO3JG65NWIgCDq9d0BFiOY6XzRFav2E5-u33hVk1jWspTlgL9ylaEB5ynQIDAQAB";c.setPublicKey(p);var g=c.encrypt(P);return g}}}]);
