(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[6242],{30311:function(Ie,oe,e){"use strict";var D=e(22385),t=e(31097),Y=e(12924),u=e.n(Y),T=e(8812),l=e(28216),L=R=>{var W=(0,l.v9)(K=>{var F=K.advancedSetting;return{themeColor:F.themeColor}}),O=W.themeColor;return u().createElement(t.Z,{placement:"top",title:R.name},u().createElement("span",{className:"cl-table__cell-arrow",onClick:R.onClick},u().createElement("span",{style:{color:O}},R.name),u().createElement("span",{className:"cl-table__cell-arrow-icon"},u().createElement(T.Z,null))))};oe.Z=L},30389:function(Ie,oe,e){"use strict";e.d(oe,{Z:function(){return Z}});var D=e(62029),t=e(20228),Y=e(11382),u=e(12924),T=e.n(u),l=e(91768),L=e(80991),R={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},W=e(62615),O=e(52670);class K extends T().Component{render(){var h=this.props,i=h.values,f=h.mode,I=h.onlyChooseDept,m=h.reserveUser,A=h.t,r=h.orgProps,S=h.rangeAuth,a=h.projectId,n=h.onCancel,w=h.onlyCreateUser;return T().createElement(L.l0,{className:"cl-form"},T().createElement(L.gN,(0,D.Z)({component:W.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:A("common.visibleRange"),defaultFieldList:i.employeeRange,validate:O.FI,mode:f,rangeAuth:S,onlyChooseDept:I,onlyCreateUser:w,orgProps:r,reserveUser:m,projectId:a,onCancel:n,qwTicketShow:!0},R)))}}var F=(0,l.Z)()(K),te=e(18329),B=e(34773);class M extends T().Component{constructor(){super(...arguments);this.initRefFormik=h=>{this.refFormik=h},this.handleBeforeCreate=()=>{var h=this.refFormik;h.submitForm(),h.runValidations().then(i=>{if(!Object.keys(i).length){var f=h.state.values.employeeRange,I=(0,B.b)(f.rangeList),m={qyWeChatVo:f.qyWeChatVo,id:this.props.actionId,isAll:f.rangeType,groupIds:f.rangeType===2?I.groupIds.join(","):"",departmentIds:f.rangeType===2?I.deptIds.join(","):"",userIds:f.rangeType===2?I.userIds.join(","):"",postIds:f.rangeType===2?I.postIds.join(","):"",clusterIds:f.rangeType===2?I.clusterIds.join(","):"",qy_we_chat_vo:f.qyWeChatVo};this.props.onCreate(m)}})},this.handleBeforeCancel=()=>{var h=this.props.onCancel;h()}}render(){var h=this.props,i=h.visible,f=h.initialParams,I=h.isLoading,m=h.tipInfo,A=h.mode,r=h.onlyChooseDept,S=h.reserveUser,a=S===void 0?[]:S,n=h.t,w=h.title,c=h.orgProps,g=h.rangeAuth,o=h.projectId,v=h.onCancel,C=h.onlyCreateUser,x=h.size;return I?T().createElement(Y.Z,{size:"large"}):T().createElement(te.ZP,{wrapClassName:"cl-employee-selector-modal",visible:i,title:w||n("component.changeUser"),okText:n("common.ok"),cancelText:n("common.cancel"),size:x,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},I?T().createElement(Y.Z,{size:"large"}):T().createElement(L.J9,{ref:this.initRefFormik,initialValues:f,render:_=>T().createElement(F,(0,D.Z)({},_,{mode:A,rangeAuth:g,orgProps:c,onlyChooseDept:r,onlyCreateUser:C,reserveUser:a,projectId:o,onCancel:v}))}),m&&T().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},m))}}M.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var Z=(0,l.Z)()(M)},64549:function(Ie,oe,e){"use strict";var D=e(12924),t=e.n(D),Y=e(28216),u=e(84874),T=L=>({guideStatus:L.advancedSetting.guideStatus,isNewUser:L.advancedSetting.isNewUser});class l extends t().Component{constructor(){super(...arguments);this.state={guideIndex:0,showGuide:this.props.renderGuide},this.onNextStep=()=>{var R=this.state.guideIndex,W=this.props.guidePageProps;if(R>=W.length-1){this.onCloseGuide();return}this.setState({guideIndex:R+1})},this.onCloseGuide=()=>{this.setState({showGuide:!1},()=>{this.props.closeGuide&&this.props.closeGuide()}),this.props.isNewUser==="true"&&this.props.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),this.updateAllStatus()},this.updateAllStatus=()=>{localStorage.setItem("guideStatus","false"),this.props.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})},this.renderRightItem=R=>t().createElement(t().Fragment,null,t().createElement("div",{className:"clguide-popover__content"},t().createElement("span",{onClick:this.onCloseGuide},t().createElement(u.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})),t().createElement("div",{className:"clguide-popover__content__text"},R.contentText),t().createElement("div",{className:"clguide-popover__content__button",onClick:this.onNextStep},R.buttonText)),t().createElement("div",{className:"clguide-popover__righttriangle"}),R.typeText&&t().createElement("div",{className:" clguide-popover__circle"},R.typeText)),this.renderLeftItem=R=>t().createElement(t().Fragment,null,t().createElement("div",{className:" clguide-popover__circle"},R.typeText),t().createElement("div",{className:"clguide-popover__lefttriangle"}),t().createElement("div",{className:"clguide-popover__content"},t().createElement("span",{onClick:this.onCloseGuide},t().createElement(u.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})),t().createElement("div",{className:"clguide-popover__content__text"},R.contentText),t().createElement("div",{className:"clguide-popover__content__button",onClick:this.onNextStep},R.buttonText)))}render(){var R=this.state,W=R.guideIndex,O=R.showGuide,K=this.props,F=K.className,te=K.guideStatus,B=K.guidePageProps,M=B===void 0?[]:B,Z=K.direction,d=Z===void 0?"right":Z,h=K.showDownloadBtn;return!O&&!te?null:t().createElement("div",{className:"clguide-popover-container"},O&&te==="true"&&t().createElement("div",{className:"clguide-popover-mask"}),O&&te==="true"&&W===0&&M.length?t().createElement("div",{className:"".concat(F,"_next clguide-popover ").concat(h?"":"right")},d==="left"?this.renderLeftItem(M[0]):this.renderRightItem(M[0])):null,O&&te==="true"&&W===1&&M.length?t().createElement("div",{className:"".concat(F,"_know clguide-popover")},d==="left"?this.renderLeftItem(M[1]):this.renderRightItem(M[1])):null)}}oe.Z=(0,Y.$j)(T)(l)},74525:function(Ie,oe,e){"use strict";var D=e(57361),t=e(34792),Y=e(48086),u=e(9754),T=e.n(u),l=e(12924),L=e.n(l),R=e(91768),W=e(28216),O=e(92592),K=e(5430),F=e(10237),te=e(84874),B=e(16239),M=e(38642),Z=e(28963);class d extends L().Component{constructor(i){var f;super(i);f=this,this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.initCode=()=>{var I=this.props,m=I.type,A=I.isProjectShare,r=I.isCommodityExchange,S=I.userInfo;["wx","weixin"].includes(m)?m==="weixin"&&S.appId==="9005"?this.initOtherCode():this.initWXCode():A&&m==="ding"?this.getProjectShareUrl():r&&m==="ding"?this.getCommodityExchangeUrl():m==="fullWebLink"?this.initOtherCode(this.props.option.scene):this.initOtherCode()},this.getCommodityExchangeUrl=()=>{var I=this.props,m=I.t,A=I.appType,r=I.orderId,S=this.props.option.scene,a=localStorage.getItem("uid");if(!B.Z[(0,B.c)()].showCl||A!=="e_app"){var n={deliverUserId:a,orderId:r,flag:"exchange"};O.toDataURL(JSON.stringify(n),{width:500}).then(o=>{this.setState({img:o})}).catch(()=>{Y.default.error(m("integralMall.qrCodeFailed"))})}else{var w="/pages/messageRedirect/messageRedirect?".concat(S),c=encodeURIComponent(w),g="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/appId=".concat(this.appId,"&pVersion=1&miniAppId=").concat(this.miniAppId,"&packageType=1&page=").concat(c,"&corpId=").concat(this.props.userInfo.corpId);this.getShortLink(g).then(o=>{O.toDataURL(o.data.short_link,{width:500}).then(v=>{this.setState({img:v})}).catch(()=>{Y.default.error(m("integralMall.qrCodeFailed"))})})}},this.getProjectShareUrl=()=>{var I=this.props.option.scene,m=encodeURIComponent("/pages/messageRedirect/messageRedirect?".concat(I)),A="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(m);this.getShortLink(A).then(r=>{this.initOtherCode(r.data.short_link)})},this.getShortLink=I=>F.WY.post({url:K.ZP.Common.getQrUrl(),data:{link:I}}),this.initWXCode=(0,D.Z)(T().mark(function I(){var m,A,r,S;return T().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return m=f.props.option,A=m.scene,r=m.flag,n.next=3,F.WY.post({url:K.ZP.createWxCode(),data:{flag:r,scene:"".concat(A,"&enterpriseId=").concat(K.ZP.enterpriseId),enterprise_id:K.ZP.enterpriseId}});case 3:S=n.sent,f.setState({img:S.data.wx_code,linkUrl:"data:image/png;base64,".concat(S.data.wx_code)});case 5:case"end":return n.stop()}},I)})),this.initOtherCode=function(){var I=(0,D.Z)(T().mark(function m(A){var r,S,a,n;return T().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=f.props,S=r.type,a=r.fsUrl,c.t0=A,c.t0){c.next=6;break}return c.next=5,f.handleScanCode();case 5:c.t0=c.sent;case 6:n=c.t0,S==="fs"&&a&&(n=a),f.setState({linkUrl:n}),O.toDataURL(n,{width:500}).then(g=>{f.setState({img:g})}).catch(()=>{Y.default.error(f.props.t("personal.failedGenerateCode"))});case 10:case"end":return c.stop()}},m)}));return function(m){return I.apply(this,arguments)}}(),this.handleScanCode=(0,D.Z)(T().mark(function I(){var m,A,r,S,a,n,w,c,g,o,v,C,x,_,j,Q,U,V;return T().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(m=f.props,A=m.type,r=m.userInfo,S=m.universalFn,a=f.state.wxH5Url,n=f.props.option,w=n.scene,c=n.pc_url,g=c===void 0?"":c,o=n.mobile_url,v=o===void 0?"":o,C=n.pc_type,x=C===void 0?"":C,_=n.mobile_type,j=_===void 0?"":_,Q=encodeURIComponent("/pages/messageRedirect/messageRedirect?"),U=encodeURIComponent(w),!S){z.next=12;break}return z.next=8,f.getShortLink((0,M.jr)({pc_url:g,mobile_url:v,pc_type:x,mobile_type:j}));case 8:return V=z.sent,z.abrupt("return",(0,Z.fZ)(V.data.short_link));case 12:z.t0=A,z.next=z.t0==="app"?15:z.t0==="ding"?16:z.t0==="fs"?17:z.t0==="weixin"?18:19;break;case 15:return z.abrupt("return","".concat(w,"&fromApp=true"));case 16:return z.abrupt("return","dingtalk://dingtalkclient/action/open_micro_app?corpId=".concat(r.corpId,"&appId=").concat(f.appId,"&miniAppId=").concat(f.miniAppId,"&packageType=1&pVersion=1&page=").concat(Q+U));case 17:return z.abrupt("return","https://applink.feishu.cn/client/web_app/open?appId=".concat("cli_a0aa5e0fe5f8500d","&path=").concat(encodeURIComponent("/index.html"),"&").concat(w,"&appType=lark"));case 18:return z.abrupt("return","".concat(a,"/#/pages/login/login-we-com/index?appType=weCom&corp=").concat(r.corpId,"&").concat(w));case 19:return z.abrupt("return","");case 20:case"end":return z.stop()}},I)})),this.saveQrcode=()=>{var I=this.state.img,m=this.props,A=m.type,r=m.t,S=m.userInfo,a=document.createElement("a");a.download=r("setting.Qrcode")+new Date().getTime(),a.href=A==="wx"||A==="weixin"&&S.appId!=="9005"?"data:image/png;base64,".concat(I):I,document.body.appendChild(a),a.click(),document.body.removeChild(a)},this.generatePoster=I=>{var m=I.linkUrl,A=I.type,r=I.activeKey,S=I.option,a=this.props.universalFn;typeof a=="function"&&a({linkUrl:m,type:A,activeKey:r,option:S})},this.state={img:"",linkUrl:"",wxH5Url:"https://mobile.coolcollege.cn"}}componentDidMount(){this.initCode()}componentDidUpdate(i){i.option.scene!==this.props.option.scene&&this.initCode()}render(){var i=this.props,f=i.type,I=i.tip,m=i.extraTip,A=i.t,r=i.canSave,S=i.refreshQrCode,a=i.label,n=i.saveText,w=n===void 0?"":n,c=i.downloadAsBtn,g=i.userInfo,o=i.universalFn,v=i.activeKey,C=i.option,x=this.state,_=x.img,j=x.linkUrl,Q=localStorage.getItem("themeColor")||"#465dcd";return _?L().createElement("div",{className:"qr-code-content"},a?L().createElement("div",{className:"label-text"},a,":"):null,L().createElement("div",{className:"qr-code-div ".concat(a?"left":"")},f==="wx"||f==="weixin"&&g.appId!=="9005"?L().createElement("img",{src:"data:image/png;base64,".concat(_),alt:""}):L().createElement("img",{src:_,alt:""}),I?L().createElement("div",{className:"tip-text"},I):null,m?L().createElement("div",{className:"tip-text"},m):null,r?L().createElement("div",{className:"save_qrcode ".concat(c?"save-btn":""),style:{color:Q},onClick:()=>this.saveQrcode()},c?null:L().createElement(te.Z,{iconClass:"icon-f-download",size:"14px"}),w||A("personal.saveCode")):null,o&&!S?L().createElement("div",{className:"save_qrcode",style:{color:Q},onClick:()=>this.generatePoster({linkUrl:j,type:f,activeKey:v,option:C})},A("personal.saveCodePoster")):null,S?L().createElement("div",{className:"save_qrcode",style:{color:Q},onClick:()=>S()},L().createElement(te.Z,{iconClass:"iconf-switch",size:"14px"}),A("personal.refreshCodeTip")):null)):L().createElement("div",{className:"qr-code-placeholder"})}}oe.Z=(0,W.$j)(h=>{var i=h.user;return{userInfo:i,appType:i.appType,corpId:i.corpId}})((0,R.Z)()(d))},66708:function(Ie,oe,e){"use strict";var D=e(93485),t=e(33565),Y=e(57361),u=e(18106),T=e(88108),l=e(9754),L=e.n(l),R=e(12924),W=e.n(R),O=e(91768),K=e(28216),F=e(89366),te=e(48194),B=e(74525),M=e(77779),Z=e.n(M),d=e(6793),h=T.Z.TabPane;class i extends W().Component{constructor(m){var A;super(m);A=this,this.initAppTypeScan=(0,Y.Z)(L().mark(function S(){var a,n,w,c,g,o,v,C,x,_,j;return L().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,Promise.all([(0,te.q)(),(0,te.$)()]);case 2:a=U.sent,n=(0,t.Z)(a,2),w=n[0],c=n[1],g=w.data.sync_organizes,o=c.data.list,v=!1,C=(0,D.Z)(o),U.prev=10,C.s();case 12:if((x=C.n()).done){U.next=19;break}if(_=x.value,_.type!=="wechat_applet_setting"){U.next=17;break}return v=_.switch_status==="OPEN",U.abrupt("break",19);case 17:U.next=12;break;case 19:U.next=24;break;case 21:U.prev=21,U.t0=U.catch(10),C.e(U.t0);case 24:return U.prev=24,C.f(),U.finish(24);case 27:j=A.props.universalFn?A.filterOrganizes(g):A.filterCode(g),v&&j.push("wx"),A.setState({scanTypes:j});case 30:case"end":return U.stop()}},S,null,[[10,21,24,27]])})),this.filterCode=S=>{var a=[...S],n=this.props.option;return a=a.map(w=>["third_oa_app","seeyon_app"].includes(w)?"ding":w),n&&n.flag==="exam_task"?[...new Set([...a])].filter(w=>w==="fs"):[...new Set([...a,"app"])]},this.filterOrganizes=S=>{var a=[...S],n=this.props.option;a=a.map(c=>["third_oa_app","seeyon_app"].includes(c)?"ding":c);var w=new Set([...a]);return w.size===1&&w.has("app")?n&&n.flag==="exam_task"?[...w].filter(c=>c==="fs"):[...w]:(w.delete("app"),n&&n.flag==="exam_task"?[...w].filter(c=>c==="fs"):[...w])};var r=m.t;this.state={scanTypes:[],commonTitle:{ding:r("common.sanCodeCommon"),fs:r("common.sanCodeCommon"),weixin:r("common.sanCodeCommon"),app:r("common.sanCodeCommon"),wx:r("common.weChatApplets")},tabTitle:{ding:r("common.dingDingSanCode"),fs:r("common.fsScanCode"),weixin:r("common.WeComSanCode"),app:r("common.appScanCode"),wx:r("common.wxScanCode")}}}componentDidMount(){this.initAppTypeScan()}UNSAFE_componentWillReceiveProps(){this.initAppTypeScan()}render(){var m=this.state,A=m.tabTitle,r=m.commonTitle,S=m.scanTypes,a=this.props,n=a.option,w=a.tip,c=a.t,g=a.extraTip,o=a.canSave,v=a.refreshQrCode,C=a.isCommodityExchange,x=a.type,_=a.center,j=_===void 0?!0:_,Q=a.label,U=Q===void 0?"":Q,V=a.saveText,fe=a.downloadAsBtn,z=fe===void 0?!1:fe,b=a.transfer,se=b===void 0?!1:b,q=a.source_type,_e=a.universalFn,Se=a.activeKey;return W().createElement("div",{className:"".concat(Z()["scan-code-box"]," ").concat(x==="card"?Z()["card-tabs"]:"")},S.length===1?W().createElement(B.Z,{universalFn:_e,activeKey:Se,type:S[0],option:n,tip:(0,d.ZT)(c(w),_e?r[S[0]]:A[S[0]]),extraTip:g,canSave:o,fsUrl:n.fsUrl,refreshQrCode:v,isCommodityExchange:C,label:U,saveText:V,downloadAsBtn:z}):W().createElement(T.Z,{defaultActiveKey:"1",centered:j,type:x},S.map((ue,y)=>{var N=y+1;return W().createElement(h,{tab:_e?r[ue]:A[ue],key:N},se&&W().createElement("div",{className:Z()["scan-code-transfer"]},W().createElement(F.Z,null),W().createElement("span",null,c("course.onlyScope",{source_type:c(q==="study_project"?"lineClass.project":"lineClass.task")}))),W().createElement(B.Z,{universalFn:_e,activeKey:Se,type:ue,option:n,tip:(0,d.ZT)(c(w),_e?r[ue]:A[ue]),extraTip:g,canSave:o,fsUrl:n.fsUrl,refreshQrCode:v,isCommodityExchange:C,label:U,saveText:V,downloadAsBtn:z}))})))}}i.defaultProps={option:{flag:"",scene:""},tip:"",extraTip:"",canSave:!0,refreshQrCode:null};var f=I=>({appType:I.user.appType});oe.Z=(0,K.$j)(f)((0,O.Z)()(i))},25439:function(Ie,oe,e){"use strict";e.d(oe,{Z:function(){return gt}});var D=e(57338),t=e(83107),Y=e(77883),u=e(21888),T=e(48736),l=e(27049),L=e(22385),R=e(31097),W=e(88983),O=e(47933),K=e(77576),F=e(59314),te=e(20228),B=e(11382),M=e(49111),Z=e(19650),d=e(57663),h=e(71577),i=e(88986),f=e(34792),I=e(48086),m=e(57361),A=e(33565),r=e(9754),S=e.n(r),a=e(12924),n=e.n(a),w=e(91768),c=e(7145),g=e.n(c),o=e(28216),v=e(78138),C=e.n(v),x=e(9715),_=e(86585),j=e(14965),Q=e(11448),U=e(43358),V=e(34041),fe=e(59250),z=e(13013),b=e(62029),se=e(54549),q=e(57254),_e=e(43061),Se=(0,a.createContext)({}),ue=()=>(0,a.useContext)(Se),y=e(60667),N=e(59676),ce=he=>{var le=he.id,xe=he.name,et=he.source_type,Qe=he.onRemove,Ne=lt=>{lt.preventDefault(),lt.stopPropagation(),Qe(le)};return n().createElement("div",{className:"label-span-tag-render"},n().createElement(y.Z,{type:et,name:xe,value:le,dataType:"departmentName"}),n().createElement("span",{className:"label-span-close",onClick:Ne},n().createElement(se.Z,null)))},re=he=>{var le=he.onChange,xe=he.type,et=xe===void 0?"department":xe,Qe=he.value,Ne=Qe===void 0?[]:Qe,lt=he.placeholder,Dt=he.status,mt=ue(),wt=mt.filterAuth,Ue=mt.isOnlyPost,Me=(0,a.useState)(!1),it=(0,A.Z)(Me,2),tt=it[0],Zt=it[1],Ot=we=>{var ft=Ne.findIndex(ot=>ot.id===we);le(g()(Ne,{$splice:[[ft,1]]}))},Et=we=>{Zt(we)},Ke="drop-down-selector";return n().createElement("div",{className:Ke},n().createElement(z.Z,{overlayClassName:"".concat(Ke,"__drop-down"),trigger:["click"],getPopupContainer:we=>we.parentElement,onVisibleChange:Et,overlay:n().createElement(N.Z,{businessStyle:{height:300},searchWidth:!1,filterAuth:wt,haveAuth:!1,checkable:!0,isOnlyPost:Ue,showSearch:tt,businessType:et,hasCheckList:Ne,onCheck:we=>{le(we)},onSelect:we=>{le(we)}})},n().createElement("div",{className:"".concat(Ke,"__select-wrapper")},n().createElement("div",{className:"".concat(Ke,"__select-selector select-selector__").concat(Dt)},Ne.length===0&&n().createElement("span",{className:"".concat(Ke,"__placeholder")},lt),Ne.map(we=>n().createElement(ce,(0,b.Z)({key:we.id},we,{onRemove:Ot})))),n().createElement(q.Z,null),Ne.length>0&&n().createElement(_e.Z,{onClick:we=>{we.stopPropagation(),le([])}}))))},ie=re,de=e(37055),H=e(10237);function Te(){var he=de.ZP.advancedSetting.getSettingStatusByType("user_view");return H.WY.get({url:he})}function qe(){var he=de.ZP.choose.userGroup();return H.WY.get({url:he,params:{page_size:"100000"}})}function At(){var he=de.ZP.choose.userCluster();return H.WY.get({url:he,params:{page_size:"100000"}})}function xt(){var he=de.ZP.choose.userRoles();return H.WY.get({url:he,params:{page_size:"100000"}})}function Ut(he){var le=de.ZP.autoAssigned.getRuleData();return H.WY.get({url:le,params:he})}function xa(he){var le=de.ZP.autoAssigned.saveRuleData();return H.WY.post({url:le,data:he})}function Ua(he){var le=he.column_key,xe=he.keyword,et=de.ZP.autoAssigned.getCustomIndexOptions(),Qe={column_key:le,keyword:xe};return H.WY.get({url:et,params:Qe})}var wa=e(81211),Xt=e(23279),Ba=e.n(Xt);function Na(he){var le=he.field,xe=he.debounceTimeout,et=xe===void 0?800:xe,Qe=(0,wa.Z)(he,["field","debounceTimeout"]),Ne=(0,a.useState)(!1),lt=(0,A.Z)(Ne,2),Dt=lt[0],mt=lt[1],wt=(0,a.useState)([]),Ue=(0,A.Z)(wt,2),Me=Ue[0],it=Ue[1],tt=(0,a.useRef)(0),Zt=(0,a.useMemo)(()=>{var Ot=function(){var Et=(0,m.Z)(S().mark(function Ke(we){var ft,ot,Bt,Nt,St,pt;return S().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(ft=we.trim(),ft){$e.next=3;break}return $e.abrupt("return");case 3:return tt.current+=1,ot=tt.current,it([]),mt(!0),$e.prev=7,Bt={keyword:ft,column_key:le},$e.next=11,Ua(Bt);case 11:if(Nt=$e.sent,St=Nt.data.data,ot===tt.current){$e.next=15;break}return $e.abrupt("return");case 15:pt=St.map(kt=>(0,i.Z)((0,i.Z)({},kt),{},{label:kt.value})),it(pt),$e.next=21;break;case 19:$e.prev=19,$e.t0=$e.catch(7);case 21:mt(!1);case 22:case"end":return $e.stop()}},Ke,null,[[7,19]])}));return function(we){return Et.apply(this,arguments)}}();return Ba()(Ot,et)},[et]);return n().createElement(V.Z,(0,b.Z)({filterOption:!1,onSearch:Zt,notFoundContent:Dt?n().createElement(B.Z,{size:"small"}):null},Qe,{options:Me}))}var ka=Na,zt=e(84874),qt={validateStatus:"success",errorMsg:null},ja=(he,le)=>{var xe=he.t,et=he.allFields,Qe=he.checkedValue,Ne=he.values,lt=he.onMove,Dt=he.onChange;(0,a.useImperativeHandle)(le,()=>({validate:na,resetValidate:sa}));var mt={};et.forEach(X=>{mt[X]=qt});var wt=(0,a.useState)(mt),Ue=(0,A.Z)(wt,2),Me=Ue[0],it=Ue[1],tt=(0,a.useState)([]),Zt=(0,A.Z)(tt,2),Ot=Zt[0],Et=Zt[1],Ke=(0,a.useState)([]),we=(0,A.Z)(Ke,2),ft=we[0],ot=we[1],Bt=(0,a.useState)([]),Nt=(0,A.Z)(Bt,2),St=Nt[0],pt=Nt[1];(0,a.useEffect)(()=>{et.forEach(X=>{Me[X]||it((0,i.Z)((0,i.Z)({},Me),{},{[X]:qt}))})},[et]),(0,a.useEffect)(()=>{ta(),$e(),kt()},[]);var ta=function(){var X=(0,m.Z)(S().mark(function Pe(){var He,Fe;return S().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,qe();case 2:He=Le.sent,Fe=He.data,Et(Fe.data.list||[]);case 5:case"end":return Le.stop()}},Pe)}));return function(){return X.apply(this,arguments)}}(),$e=function(){var X=(0,m.Z)(S().mark(function Pe(){var He,Fe;return S().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,At();case 2:He=Le.sent,Fe=He.data,ot(Fe.data.list||[]);case 5:case"end":return Le.stop()}},Pe)}));return function(){return X.apply(this,arguments)}}(),kt=function(){var X=(0,m.Z)(S().mark(function Pe(){var He,Fe;return S().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,xt();case 2:He=Le.sent,Fe=He.data,pt(Fe.data.list||[]);case 5:case"end":return Le.stop()}},Pe)}));return function(){return X.apply(this,arguments)}}(),Tt=X=>X==="user_groups"?Ot:X==="ding_groups"?ft:X==="roles"?St:[],It=X=>!(!X||Array.isArray(X)&&!X.length),ya=X=>{var Pe=[{required:!0,message:xe("common.selectP",{name:X.label.toLowerCase()})}];return X.components==="EXTEND_COLUMN"&&Pe.push({max:5,message:xe("autoAssign.atMost",{max:5,label:X.label.toLowerCase()})}),(X.components==="TREE_SELECT"||X.components==="COMMON_SELECT")&&Pe.push({max:50,message:xe("autoAssign.atMost",{max:50,label:X.label.toLowerCase()})}),Pe},aa=(X,Pe)=>{it(g()(Me,{$merge:{[Pe.value]:st(X,Pe)}}))},st=(X,Pe)=>{for(var He=ya(Pe),Fe=qt,_t=0;_t<He.length;_t++){var Le=He[_t];if(Le.required&&!It(X)){Fe={validateStatus:"error",errorMsg:Le.message};break}if(Le.max&&X.length>Le.max){Fe={validateStatus:"error",errorMsg:Le.message};break}}return Fe},na=()=>{var X=!1,Pe={};return Qe.forEach(He=>{var Fe=st(Ne[He.value],He);Pe[He.value]=Fe,Fe.errorMsg&&(X=!0)}),it(g()(Me,{$merge:Pe})),X},sa=X=>{it(g()(Me,{$merge:{[X]:qt}}))},Mt=(X,Pe)=>{aa(X,Pe),Dt(X,Pe.value)};return n().createElement("div",{className:"automatically-assigned-form"},Qe.map(X=>n().createElement(Z.Z,{key:X.value,size:22},n().createElement(_.Z.Item,{label:n().createElement(R.Z,{title:X.label},X.label),validateStatus:Me[X.value].validateStatus,help:n().createElement("div",null,Me[X.value].errorMsg)},X.components==="TREE_SELECT"&&n().createElement(ie,{placeholder:xe("common.selectP",{name:X.label.toLowerCase()}),type:X.value==="depts"?"department":"post",value:Ne[X.value]||[],onChange:Pe=>Mt(Pe,X),status:Me[X.value].validateStatus}),X.components==="COMMON_SELECT"&&n().createElement(V.Z,{mode:"multiple",allowClear:!0,showArrow:!0,placeholder:xe("common.selectP",{name:X.label.toLowerCase()}),getPopupContainer:Pe=>Pe.parentElement,optionFilterProp:"children",value:Ne[X.value]||[],onChange:Pe=>Mt(Pe,X)},Tt(X.value).map(Pe=>n().createElement(V.Z.Option,{key:Pe.id,value:Pe.id},X.value==="roles"?Pe.role_name:Pe.name))),X.components==="DATE_RANGE"&&n().createElement(Q.Z.RangePicker,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:Pe=>Mt(Pe,X),value:Ne[X.value]||[],style:{width:"100%"},placeholder:[xe("common.beginTime"),xe("common.endTime")]}),X.components==="EXTEND_COLUMN"&&n().createElement(ka,{placeholder:xe("autoAssign.enter"),mode:"multiple",field:X.value,filterOption:!1,value:Ne[X.value]||[],onChange:Pe=>Mt(Pe,X)})),Qe.length>1&&n().createElement(R.Z,{title:xe("common.remove"),overlayStyle:{width:60}},n().createElement("span",{className:"automatically-assigned-form__move",onClick:()=>{lt(X)}},n().createElement(zt.Z,{iconClass:"icon-a--",color:"rgba(0, 0, 0, 0.25)"}))))))},Gt=(0,w.Z)("translation",{withRef:!0})((0,a.forwardRef)(ja)),Wa=e(40646),dt=he=>{var le=he.t,xe=he.userId,et=he.isOpenTrainingCamp,Qe=he.visible,Ne=he.onClose,lt=he.resourceId,Dt=he.resourceName,mt=he.resourceType,wt=(0,a.useState)([{label:le("setting.deptLabel"),toolTip:le("setting.deptLabel"),value:"depts",components:"TREE_SELECT",disabled:!1},{label:le("setting.postLabel"),toolTip:le("setting.postLabel"),value:"posts",components:"TREE_SELECT",disabled:!1},{label:le("component.userGroup"),toolTip:le("component.userGroup"),value:"user_groups",components:"COMMON_SELECT",disabled:!1},{label:le("searchInputPlaceholder.roles"),toolTip:le("searchInputPlaceholder.roles"),value:"roles",components:"COMMON_SELECT",disabled:!1}]),Ue=(0,A.Z)(wt,2),Me=Ue[0],it=Ue[1],tt={isActive:!1,condition:"union",dispatch:"now",customDay:1,studyTerm:3,checkedValue:[Me[0]],formData:{}},Zt=(0,a.useState)(!0),Ot=(0,A.Z)(Zt,2),Et=Ot[0],Ke=Ot[1],we=(0,a.useState)(!1),ft=(0,A.Z)(we,2),ot=ft[0],Bt=ft[1],Nt=(0,a.useState)([]),St=(0,A.Z)(Nt,2),pt=St[0],ta=St[1],$e=(0,a.useState)(Me),kt=(0,A.Z)($e,2),Tt=kt[0],It=kt[1],ya=(0,a.useState)(tt.isActive),aa=(0,A.Z)(ya,2),st=aa[0],na=aa[1],sa=(0,a.useState)(tt.condition),Mt=(0,A.Z)(sa,2),X=Mt[0],Pe=Mt[1],He=(0,a.useState)(tt.dispatch),Fe=(0,A.Z)(He,2),_t=Fe[0],Le=Fe[1],Ka=(0,a.useState)(tt.customDay),Kt=(0,A.Z)(Ka,2),Pa=Kt[0],Oa=Kt[1],$a=(0,a.useState)(tt.studyTerm),Sa=(0,A.Z)($a,2),De=Sa[0],Ct=Sa[1],Ta=(0,a.useState)(tt.checkedValue),Da=(0,A.Z)(Ta,2),at=Da[0],Qt=Da[1],Za=(0,a.useState)({}),da=(0,A.Z)(Za,2),ht=da[0],We=da[1],Fa=(0,a.useState)(!1),Ia=(0,A.Z)(Fa,2),ra=Ia[0],la=Ia[1],Ma=(0,a.useState)(40),La=(0,A.Z)(Ma,2),Va=La[0],Ya=La[1],Jt=(0,a.useRef)();(0,a.useEffect)(()=>{za()},[]),(0,a.useEffect)(()=>{et&&it(g()(Me,{$splice:[[3,0,{label:le("component.useCluster"),toolTip:le("component.useCluster"),value:"ding_groups",components:"COMMON_SELECT",disabled:!1}]]}))},[et]),(0,a.useEffect)(()=>{It(Me)},[Me]),(0,a.useEffect)(()=>{!Qe||Ha()},[Qe]);var Ha=function(){var $=(0,m.Z)(S().mark(function ae(){var J,me,Ce,ne,Oe,Ee,Ae,yt,ze,Je,ct,ut,ia,oa,$t;return S().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Ke(!0),J={resource_id:lt,resource_type:mt},Pt.next=4,Ut(J);case 4:if(me=Pt.sent,Ce=me.data,ne=Ce.success,Oe=Ce.data,!(ne==="false"||!Oe)){Pt.next=12;break}return Ra(tt),Bt(!1),Ke(!1),Pt.abrupt("return");case 12:Ke(!1),Bt(!0),Ee=Oe.rule_info,Ae=Ee.is_active,yt=Ee.relationship,ze=Ee.is_begin_dispatch,Je=Ee.study_term,ct=Ee.conditions,yt==="join"&&It(g()(g()([],{$push:Me}),{$push:pt})),ut={},Object.keys(ct).forEach(nt=>{switch(nt){case"column_list":ct.column_list.forEach(jt=>{ut[jt.column_key]=jt.column_value.split(",")});break;case"join_time":ut[nt]=[C()(Number(ct[nt].join_start)),C()(Number(ct[nt].join_end))];break;case"user_groups":case"roles":case"ding_groups":ut[nt]=ct[nt].map(jt=>jt.id);break;default:ut[nt]=ct[nt];break}}),ia=[...Me,...pt],oa=ia.filter(nt=>Object.keys(ut).includes(nt.value)),$t={isActive:!!Ae,condition:yt,dispatch:ze?"custom":"now",customDay:ze||1,studyTerm:Je,checkedValue:oa,formData:ut},Ra($t);case 22:case"end":return Pt.stop()}},ae)}));return function(){return $.apply(this,arguments)}}(),Ra=$=>{na($.isActive),Pe($.condition),Le($.dispatch),Oa($.customDay),Ct($.studyTerm),Qt($.checkedValue),We($.formData),la(!1)},za=function(){var $=(0,m.Z)(S().mark(function ae(){var J,me,Ce,ne;return S().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,Te();case 2:J=Ee.sent,me=J.data,Ce=me.action_list[0].param.keyValue,ne=[{label:le("setting.joinTime"),toolTip:le("setting.joinTime"),value:"join_time",components:"DATE_RANGE",disabled:!1}],Ce.forEach(Ae=>{ne.push({label:Ae.columnValue,toolTip:Ae.columnValue,value:Ae.columnKey,components:"EXTEND_COLUMN",disabled:!1})}),ta(g()(pt,{$set:ne}));case 8:case"end":return Ee.stop()}},ae)}));return function(){return $.apply(this,arguments)}}(),Ga=function(){var $=(0,m.Z)(S().mark(function ae(){var J,me,Ce;return S().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(st){Oe.next=6;break}if(ot){Oe.next=4;break}return Ne(),Oe.abrupt("return");case 4:return ee({resource_id:lt,resource_name:Dt,resource_type:mt,is_active:0,create_id:ot?"":xe,update_id:ot?xe:""}),Oe.abrupt("return");case 6:if(!Jt.current.validate()){Oe.next=8;break}return Oe.abrupt("return");case 8:J=Object.create(null),me=at.filter(Ee=>Ee.components==="EXTEND_COLUMN"),me.length&&(J.column_list=me.map(Ee=>({column_key:Ee.value,column_value:ht[Ee.value].join(",")}))),at.forEach(Ee=>{switch(Ee.value){case"depts":J.depts=ht.depts.map(Ae=>({id:Ae.id,name:Ae.name,source_type:Ae.source_type}));break;case"posts":J.posts=ht.posts.map(Ae=>({id:Ae.id,name:Ae.name}));break;case"join_time":J.join_time={join_start:ht.join_time.length>0?C()(ht.join_time[0]).valueOf():"",join_end:ht.join_time.length>0?C()(ht.join_time[1]).valueOf():""};break;case"user_groups":case"roles":case"ding_groups":J[Ee.value]=ht[Ee.value].map(Ae=>({id:Ae}));break;default:break}}),Ce={resource_id:lt,resource_name:Dt,resource_type:mt,is_active:1,relationship:X,is_begin_dispatch:_t==="now"?0:Pa,study_term:De,conditions:J,create_id:ot?"":xe,update_id:ot?xe:""},ee(Ce);case 14:case"end":return Oe.stop()}},ae)}));return function(){return $.apply(this,arguments)}}(),ee=function(){var $=(0,m.Z)(S().mark(function ae(J){var me,Ce,ne;return S().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,xa(J);case 2:if(me=Ee.sent,Ce=me.data,ne=Ce.success,ne!=="false"){Ee.next=7;break}return Ee.abrupt("return");case 7:I.default.success(le("common.submitSuccess")),Ne();case 9:case"end":return Ee.stop()}},ae)}));return function(J){return $.apply(this,arguments)}}(),s=$=>{var ae=$.checked,J=$.value;if(ae)Qt(g()(at,{$push:Tt.filter(me=>me.value===J)})),We(g()(ht,{$unset:[J]})),Jt.current.resetValidate(J);else{if(at.length===1)return;Qt(g()(at,{$set:at.filter(me=>me.value!==J)}))}};(0,a.useEffect)(()=>{if(It(g()(Tt,{$set:Tt.map(ae=>(ae.disabled=!1,ae))})),at.length===1){var $=Tt.findIndex(ae=>ae.value===at[0].value);It(g()(Tt,{[$]:{$toggle:["disabled"]}}))}},[at]),(0,a.useEffect)(()=>{if(la(!1),X==="join"){It(g()(g()([],{$push:Me}),{$push:pt}));var $=JSON.parse(JSON.stringify(at));Qt(g()(at,{$set:$}))}else{It(g()(Tt,{$set:Me}));var ae=Me.map(Ce=>Ce.value),J=at.filter(Ce=>ae.includes(Ce.value));if(!J.length){J.push(Me[0]);var me=Me[0].value;We(g()(ht,{$unset:[me]})),Jt.current&&Jt.current.resetValidate(me)}Qt(g()(at,{$set:J}))}},[X,pt]);var P=(0,a.useCallback)($=>{$!==null&&Ya($.clientHeight)},[Tt]),k=($,ae)=>{We((0,i.Z)((0,i.Z)({},ht),{},{[ae]:$}))},G="automatically-assigned-drawer";return n().createElement(t.Z,{title:le("autoAssign.autoAssign"),className:G,width:716,onClose:Ne,maskClosable:!1,visible:Qe,footer:n().createElement(Z.Z,null,n().createElement(h.Z,{onClick:Ne},le("common.cancel")),n().createElement(h.Z,{onClick:Ga,type:"primary"},le("common.ok")))},n().createElement("div",{className:"".concat(G,"__tip")},le("autoAssign.autoAssignTip")),Et&&n().createElement(B.Z,{className:"".concat(G,"__center")}),n().createElement("div",{style:{display:Et?"none":"block"}},n().createElement("div",{className:"".concat(G,"__common-item")},n().createElement("div",{className:"flex-item-content"},n().createElement("div",{className:"".concat(G,"__common-item__label")},le("autoAssign.autoAssign"),"\uFF1A"),n().createElement(F.Z,{checked:st,checkedChildren:le("autoAssign.open"),unCheckedChildren:le("autoAssign.close"),onChange:$=>{na($)}})),n().createElement("div",{className:"".concat(G,"__common-item__tip")},le("autoAssign.assignTip"))),st&&n().createElement("div",null,n().createElement("div",{className:"".concat(G,"__common-item flex-item-content")},n().createElement("div",{className:"".concat(G,"__common-item__label")},le("autoAssign.condition"),"\uFF1A"),n().createElement(Z.Z,null,n().createElement(O.ZP.Group,{value:X,buttonStyle:"solid",onChange:$=>{Pe($.target.value)}},n().createElement(O.ZP.Button,{value:"union"},le("autoAssign.union")),n().createElement(O.ZP.Button,{value:"join"},le("autoAssign.join"))),n().createElement(R.Z,{overlayStyle:{maxWidth:422},title:n().createElement(n().Fragment,null,n().createElement("div",null,le("autoAssign.unionDesc")),n().createElement("div",null,le("autoAssign.joinDesc")))},n().createElement("span",{className:"cl-pointer"},n().createElement(zt.Z,{iconClass:"icon-shuoming",color:"rgba(0, 0, 0, 0.45)"}))))),n().createElement(l.Z,null),n().createElement("div",{className:"".concat(G,"__condition")},n().createElement("div",{className:"".concat(G,"__part-title")},le("autoAssign.conditionAdd")),n().createElement("div",{className:"".concat(G,"__condition__tag"),style:{height:ra?"auto":36}},n().createElement("div",{className:"".concat(G,"__condition__tag__group")},n().createElement(Wa.l,{ref:P,labelClassName:"".concat(G,"__condition__tag__group__item"),values:at.map($=>$.value),options:Tt,onChange:s,showTooltip:!0})),Va>40&&n().createElement(Z.Z,{size:6,className:"".concat(G,"__condition__tag__unfold"),onClick:()=>{la(!ra)}},n().createElement("span",null,le(ra?"autoAssign.hide":"autoAssign.more")),n().createElement(zt.Z,{iconClass:ra?"icon-Line_Up":"icon-Line_down",size:12}))),n().createElement(Gt,{ref:Jt,allFields:[...Me,...pt].map($=>$.value),values:ht,checkedValue:at,onMove:$=>{s({checked:!1,value:$.value})},onChange:k})),n().createElement(l.Z,{style:{marginTop:0}}),n().createElement("div",null,n().createElement("div",{className:"".concat(G,"__part-title")},le("autoAssign.assignSetting")),n().createElement("div",{className:"".concat(G,"__common-item")},n().createElement("div",{className:"flex-item-content"},n().createElement("div",{className:"".concat(G,"__common-item__label")},le("autoAssign.assignTime"),"\uFF1A"),n().createElement(O.ZP.Group,{value:_t,buttonStyle:"solid",onChange:$=>{Le($.target.value)}},n().createElement(O.ZP.Button,{value:"now"},le("autoAssign.inForce")),n().createElement(O.ZP.Button,{value:"custom"},le("autoAssign.custom"))),_t==="custom"&&n().createElement(Z.Z,{style:{marginLeft:12}},n().createElement(u.Z,{precision:0,min:1,max:999,value:Pa,onChange:$=>{Oa($)}}),n().createElement("span",null,le("autoAssign.customSuffix")))),n().createElement("div",{className:"".concat(G,"__common-item__tip")},n().createElement("span",null,le("autoAssign.customTip")),n().createElement(R.Z,{title:le("autoAssign.assignTimeTip")},n().createElement("span",{className:"cl-pointer"},n().createElement(zt.Z,{iconClass:"icon-shuoming",color:"rgba(0, 0, 0, 0.45)"}))))),n().createElement("div",{className:"".concat(G,"__common-item flex-item-content")},n().createElement("div",{className:"".concat(G,"__common-item__label")},le("autoAssign.learning"),"\uFF1A"),n().createElement(Z.Z,null,n().createElement(u.Z,{precision:0,min:1,max:999,value:De,onChange:$=>{Ct($)}}),n().createElement("span",null,le("common.day")),n().createElement(R.Z,{title:le("autoAssign.learningTip")},n().createElement("span",{className:"cl-pointer"},n().createElement(zt.Z,{iconClass:"icon-shuoming",color:"rgba(0, 0, 0, 0.45)"})))))))))},ea=he=>({userId:he.user.id,isOpenTrainingCamp:he.publicVariable.isOpenTrainingCamp}),gt=(0,o.$j)(ea)((0,w.Z)()(dt))},63848:function(Ie,oe,e){"use strict";var D=e(36877),t=e(32969),Y=e(12924),u=e.n(Y),T=e(91768),l=e(56130);class L extends u().PureComponent{constructor(){super(...arguments);this.onChange=(W,O)=>{this.props.onChange(W,O)}}render(){var W=this.props,O=W.value,K=W.classify,F=W.showLabel,te=W.className,B=W.t,M=W.style;return u().createElement("div",{className:"classify-cascader ".concat(te)},F?u().createElement("span",{className:"classify-cascader-label"},B("component.selectClassifyLabel")):null,u().createElement(t.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(te),options:K,onChange:this.onChange,placeholder:B("component.selectClassifyLabel"),value:O,style:M,loadData:this.props.loadData}))}}L.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},oe.Z=(0,l.Z)((0,T.Z)()(L))},51697:function(Ie,oe,e){"use strict";var D=e(22385),t=e(31097),Y=e(33565),u=e(12924),T=e.n(u),l=e(28216),L=e(84874),R=O=>{var K=O.title,F=O.visible,te=O.placement,B=te===void 0?"top":te,M=O.children,Z=M===void 0?null:M,d=O.isNewUser,h=d===void 0?"":d,i=O.closeGuide,f=O.guideStatus,I=(0,u.useState)(!1),m=(0,Y.Z)(I,2),A=m[0],r=m[1],S=w=>T().createElement("div",{className:"guide-tooltip-title"},w,T().createElement("span",{onClick:a},T().createElement(L.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,u.useEffect)(()=>{r(F)},[F]);var a=w=>{if(w.stopPropagation(),w.preventDefault(),r(!1),i){i();return}h==="true"&&O.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),n()},n=()=>{localStorage.setItem("guideStatus","false"),O.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return T().createElement(t.Z,{title:S(K),placement:B,visible:A&&f==="true"&&K},Z)},W=O=>({guideStatus:O.advancedSetting.guideStatus,isNewUser:O.advancedSetting.isNewUser});oe.Z=(0,l.$j)(W)(R)},95771:function(Ie,oe,e){"use strict";var D=e(62029),t=e(66456),Y=e(55313),u=e(33565),T=e(12924),l=e.n(T),L=e(91768),R=e(18329),W=e(60667),O=e(37055),K=e(10237),F={size:"medium",destroyOnClose:!0,maskClosable:!1,footer:null};function te(B){var M=B.visible,Z=B.title,d=B.from,h=B.detail,i=B.sourceType,f=B.onCancel,I=B.t,m=(0,T.useState)([]),A=(0,u.Z)(m,2),r=A[0],S=A[1],a=[{title:I("historicRecords.teacherName"),dataIndex:"lecturer_name",key:"lecturer_name",render:(w,c)=>l().createElement(W.Z,{dataType:"userName",value:c.teacher_sync_user_id,name:c.lecturer_name,type:c.teacher_sync_source_type})},{title:I("course.courseDetailName"),dataIndex:"course_name",key:"course_name",width:300}];d==="lecturerAveScore"&&a.push({title:I("learning.questionnaireAddToolScore"),dataIndex:"average_score",key:"average_score"}),(0,T.useEffect)(()=>{M&&n()},[M]);function n(){var w=d==="lecturerAveScore"?O.ZP.StudyTaskList.lecturerScoresList(h.id):O.ZP.StudyTaskList.lecturerList(h.id),c={source_type:i};K.WY.get({url:w,params:c}).then(g=>{S(g.data.data)})}return l().createElement(R.ZP,(0,D.Z)({},F,{title:Z,onCancel:f,visible:M}),l().createElement("div",null,l().createElement(Y.Z,{bordered:!0,size:"middle",columns:a,dataSource:r,pagination:!1})))}oe.Z=(0,L.Z)()(te)},86955:function(Ie,oe,e){"use strict";e.d(oe,{Z:function(){return g}});var D=e(62029),t=e(22385),Y=e(31097),u=e(34792),T=e(48086),l=e(12924),L=e.n(l),R=e(91768),W=e(80991),O=e(88983),K=e(47933),F=e(57361),te=e(32157),B=e(75869),M=e(9754),Z=e.n(M),d=e(43859),h=e(10237),i=e(37055),f=B.Z.TreeNode;class I extends L().Component{constructor(v){var C;super(v);C=this,this.getEnterpriseCourseList=(0,F.Z)(Z().mark(function x(){var _;return Z().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,h.WY.get({url:i.ZP.EnterpriseCourse.getEnterpriseCourseList({courseId:C.props.projectId})});case 2:_=Q.sent,C.setState({courses:_.data.courses});case 4:case"end":return Q.stop()}},x)})),this.getProjectInfo=(0,F.Z)(Z().mark(function x(){var _,j;return Z().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return _=C.props.projectId,U.next=3,h.WY.get({url:i.ZP.StudyProjectList.getProjectInfo(_)});case 3:j=U.sent,C.setState({stageList:j.data.stages});case 5:case"end":return U.stop()}},x)})),this.onChange=x=>{var _=x.target.value;this.props.formik.setFieldValue("push_type",_)},this.renderTreeNodes=x=>x.map(_=>L().createElement(f,{title:_.resource_name,dataRef:_,key:_.course_id,isLeaf:!0})),this.onCheckProject=(x,_)=>{var j=[],Q=[];_.checkedNodes.forEach(U=>{U.isLeaf&&Q.push(U.key),U.isLeaf||j.push(U.key)}),this.setFieldValue(j,Q)},this.onCheckCourse=(x,_)=>{var j=[];_.checkedNodes.forEach(Q=>{j.push(Q.key)}),this.setFieldValue([],j)},this.setFieldValue=(x,_)=>{var j=this.props.resourceType;j==="course"?(this.props.formik.setFieldValue("stage_ids",""),this.props.formik.setFieldValue("course_ids",_.join(","))):(this.props.formik.setFieldValue("stage_ids",x.join(",")),this.props.formik.setFieldValue("course_ids",_.join(",")))},this.treeContent=()=>{var x=this.state,_=x.stageList,j=x.courses,Q=this.props.resourceType;return Q==="course"?L().createElement(B.Z,{checkable:!0,onCheck:this.onCheckCourse},j.map(U=>L().createElement(f,{title:U.name,key:U.id,isLeaf:!0}))):L().createElement(B.Z,{checkable:!0,onCheck:this.onCheckProject,defaultExpandAll:!0},_.map(U=>L().createElement(f,{title:U.stage_name,key:U.id,isLeaf:!1},this.renderTreeNodes(U.resources))))},this.options=[{label:v.t("learning.allContent"),value:"is_all"},{label:v.t("learning.pointContent"),value:"appoint"}],this.state={stageList:[],courses:[]}}componentDidMount(){var v=this.props.resourceType;v==="course"?this.getEnterpriseCourseList():this.getProjectInfo()}render(){var v=this.props.value;return L().createElement("div",null,L().createElement(K.ZP.Group,{options:this.options,onChange:this.onChange,value:v}),v==="appoint"&&this.treeContent())}}var m=(0,d.Z)((0,W.$j)((0,R.Z)()(I))),A=e(84874),r=e(18329),S=e(62615),a=e(52670),n={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:16}}},w={push_type:"is_all",employeeRange:{rangeType:"",rangeList:{dept:[],post:[],group:[],user:[]}}};class c extends L().Component{constructor(v){super(v);this.onCancel=()=>{var C=this.props.onCancel;C&&this.props.onCancel()},this.onOk=()=>{this.formRef.submitForm()},this.renderTitle=()=>{var C=this.props,x=C.title,_=C.type,j=C.t,Q="";return x?Q=x:Q=_==="course"?"".concat(j("learning.learningProjectPushMsg")).concat(j("common.courseLabel")):j("learning.learningProjectPushTitle"),Q},this.initRef=C=>{this.formRef=C},this.submit=C=>{var x=this.props,_=x.projectId,j=x.t,Q=x.type,U=C.employeeRange,V=C.course_ids,fe=C.stage_ids,z=U.rangeList,b=z.user,se=z.dept,q=z.post,_e=z.group,Se="",ue={user_ids:b.map(y=>y.id).join(","),department_ids:se.map(y=>y.id).join(","),group_ids:_e.map(y=>y.id).join(","),post_ids:q.map(y=>y.id).join(","),push_type:C.push_type,qy_we_chat_vo:U.qyWeChatVo};Q==="course"?(Se=i.ZP.CourseManageList.pushMessage(_),ue.resource_ids=V):(Se=i.ZP.StudyProjectList.pushMessage(_),ue.course_ids=V,ue.stage_ids=fe),h.WY.post({url:Se,data:ue}).then(y=>{y.data.result==="true"&&(T.default.success(j("learning.learningProjectPushSuc")),this.onCancel())})},this.state={},this.validate={checkPushType(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],j;return C==="appoint"&&!x.length&&!_.length&&(j="\u8BF7\u9009\u62E9\u8D44\u6E90"),j}},this.modalConfig={title:this.renderTitle(),size:"medium",okText:v.t("learning.learningProjectPushMoment"),cancelText:v.t("common.cancel"),destroyOnClose:!0,bodyStyle:{padding:0},maskClosable:!1}}render(){var v=this.props,C=v.t,x=v.projectId,_=v.type,j=L().createElement("span",null,C("learning.learningProjectPushObj"),L().createElement(Y.Z,{title:C("learning.learningProjectPushMsgTip")},L().createElement("span",{style:{color:"#d9dbe4"}},L().createElement(A.Z,{iconClass:"icon-icon_attentionx1",size:"14px"}))));return L().createElement(r.ZP,(0,D.Z)({},this.modalConfig,{visible:this.props.visible,onCancel:this.onCancel,onOk:this.onOk}),L().createElement("div",{className:"assign-project"},L().createElement(W.J9,{ref:this.initRef,initialValues:w,onSubmit:this.submit,render:Q=>L().createElement(W.l0,{className:"cl-form"},L().createElement(W.gN,(0,D.Z)({label:C("learning.learningProjectPushContent"),required:!0,name:"push_type",value:Q.values.push_type,component:m,projectId:x,resourceType:_,validate:U=>this.validate.checkPushType(U,Q.values.stage_ids,Q.values.course_ids)},n)),L().createElement(W.gN,(0,D.Z)({label:j,required:!0,component:S.ww,showSectitle:!1,displayType:"Custom",name:"employeeRange",defaultFieldList:Q.values.employeeRange,validate:a.FI,mode:["part"],qwTicketShow:!0},n)))})))}}c.defaultProps={visible:!1,projectId:"",onCancel:()=>{}};var g=(0,R.Z)()(c)},59857:function(Ie,oe,e){"use strict";var D=e(22385),t=e(31097),Y=e(12924),u=e.n(Y);class T extends u().Component{render(){var L=this.props,R=L.name,W=L.full_name,O=L.maxWidth;return u().createElement(t.Z,{title:W},u().createElement("span",{className:"component-resource-category",style:{maxWidth:O||"160px"}},R))}}oe.Z=T},54792:function(Ie,oe,e){"use strict";var D=e(62029),t=e(63185),Y=e(9676),u=e(47673),T=e(4107),l=e(88986),L=e(12924),R=e.n(L),W=e(91768),O=e(59239),K=e(55446),F=e.n(K),te=e(18329),B=e(2396);class M extends R().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var h=this.props,i=h.form,f=h.id,I=h.onCreate,m=this.state.isChecked;i.validateFields((A,r)=>{if(!A){var S=(0,l.Z)({},r);m||(S.value=0);var a=(0,l.Z)((0,l.Z)({},S),{},{id:f});I(a),setTimeout(()=>{i.resetFields()},100)}})},this.handleBeforeCancel=()=>{var h=this.props,i=h.form,f=h.onCancel;f(),setTimeout(()=>{i.resetFields()},100)},this.checkScore=(h,i,f)=>{var I=this.props.t,m=this.state.isChecked;if(m&&(0,B.kh)(i)){f(I("component.setScoreRuleTip"));return}f()},this.handleCheckChange=h=>{this.setState({isChecked:h.target.checked})},this.renderItem=()=>{var h=this.props,i=h.form,f=h.initialValue,I=h.labelTxt,m=this.state.isChecked,A=i.getFieldDecorator,r={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},S=m?A("value",{initialValue:f,rules:[{validator:this.checkScore}]})(R().createElement(T.Z,{maxLength:30,placeholder:""})):null,a=R().createElement(R().Fragment,null,R().createElement(Y.Z,{checked:m,onChange:this.handleCheckChange},I));return R().createElement(O.Z.Item,(0,D.Z)({label:a},r),S)}}componentDidUpdate(h){this.props.visible&&this.props.visible!==h.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var h=this.props,i=h.visible,f=h.title,I=h.prefixCls;return R().createElement(te.ZP,{size:"small",visible:i,title:f,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},R().createElement(O.Z,{className:"".concat(I),layout:"horizontal",colon:!1},this.renderItem(),R().createElement("div",{className:"".concat(I,"__children")},this.props.children)))}}M.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var Z=O.Z.create({name:"ClSetupBoxInModal"})(M);oe.Z=(0,W.Z)()(Z)},18884:function(Ie,oe,e){"use strict";var D=e(57338),t=e(83107),Y=e(57663),u=e(71577),T=e(47673),l=e(4107),L=e(62029),R=e(81211),W=e(34792),O=e(48086),K=e(57361),F=e(18106),te=e(88108),B=e(9754),M=e.n(B),Z=e(12924),d=e.n(Z),h=e(91768),i=e(40847),f=e(99946),I=e(70548),m=e.n(I),A=e(79),r=e(66708),S=e(38642),a=te.Z.TabPane;class n extends d().Component{constructor(c){var g;super(c);g=this,this.onFormMounted=o=>{this.AddFormInstance=o},this.handleCancelShare=()=>{var o=this.props.onCancel;o&&o()},this.getVisitorConfig=(0,K.Z)(M().mark(function o(){var v,C,x;return M().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,A.L)(localStorage.getItem("enterpriseId"));case 2:v=j.sent,C=v.data,x=v.status,x===200&&(C.open_visitor_page==="true"?g.setState({visitorIsOpen:!0,pcDomain:C.pc_domain||""}):g.setState({visitorIsOpen:!1}));case 6:case"end":return j.stop()}},o)})),this.handleCopy=()=>{var o=document.getElementById("share-link");o.select(),document.execCommand("Copy"),O.default.success(this.props.t("live.copySuccess"))},this.renderContent=()=>{var o=this.props,v=o.t,C=o.tabsTitle,x=o.isProjectShare,_=(0,R.Z)(o,["t","tabsTitle","isProjectShare"]),j=this.state,Q=j.active,U=j.visitorIsOpen,V=j.pcDomain,fe=j.shareUrl;return U?d().createElement(te.Z,{defaultActiveKey:Q,onChange:this.handleTabs},d().createElement(a,{tab:C[0]||v("tutorial.student"),key:"0"},d().createElement("p",{className:m()["share-tip"]},d().createElement(i.Z,{className:m()["info-icon"]}),v("common.traineeShareTip")),d().createElement(r.Z,(0,L.Z)({type:"card",center:!1,label:v("setting.Qrcode"),saveText:v("shareInfo.downloadCode"),downloadAsBtn:!0},_)),fe&&!x&&d().createElement("div",{className:m()["url-share"]},d().createElement("label",null,v("common.urlAddress"),":"),d().createElement("div",{className:m()["right-content"]},d().createElement(l.Z,{className:m()["share-url-input"],readOnly:!0,value:fe,id:"share-link"}),d().createElement(u.Z,{type:"primary",className:m()["copy-btn"],onClick:this.handleCopy},v("registerLogin.copyLink")),d().createElement("span",{className:m()["share-tip"]},v("common.shareTip"))))),_.option&&_.option.flag==="exam_task"?null:d().createElement(a,{tab:C[1]||v("common.tourist"),key:"1"},d().createElement(f.Z,(0,L.Z)({onFormMounted:this.onFormMounted,handleVisitorTabs:this.visitorTabs,pcDomain:V},_)))):d().createElement(Z.Fragment,null,d().createElement("p",{className:m()["share-tip"]},d().createElement(i.Z,{className:m()["info-icon"]}),v("common.traineeShareTip")),d().createElement(r.Z,(0,L.Z)({type:"card",center:!1,label:v("setting.Qrcode"),saveText:v("shareInfo.downloadCode"),downloadAsBtn:!0},_)),fe&&!x&&d().createElement("div",{className:m()["url-share"]},d().createElement("label",null,v("common.urlAddress"),":"),d().createElement("div",{className:m()["right-content"]},d().createElement(l.Z,{className:m()["share-url-input"],readOnly:!0,value:fe,id:"share-link"}),d().createElement(u.Z,{type:"primary",className:m()["copy-btn"],onClick:this.handleCopy},v("registerLogin.copyLink")),d().createElement("span",{className:m()["share-tip"]},v("common.shareTip")))))},this.state={active:0,visitorIsOpen:!1,pcDomain:"",shareUrl:""}}componentDidMount(){this.getVisitorConfig()}componentDidUpdate(c){var g=this.props.option;if(c.option.flag!==g.flag&&g.flag==="share_course_enterprise"){var o=(0,S.dU)(),v=localStorage.getItem("enterpriseId");this.setState({shareUrl:"".concat("https://mobile.coolcollege.cn","/assets-share-link.html?env=").concat(o,"&eid=").concat(v,"&").concat(g.scene,"&msgSource=shareLink")})}}render(){var c=this.props,g=c.title,o=c.visible;return d().createElement(t.Z,{title:g,className:m()["share-modal"],width:560,onClose:this.handleCancelShare,visible:o,destroyOnClose:!0,footerStyle:{textAlign:"right"},bodyStyle:{paddingTop:10,paddingLeft:30,paddingRight:30}},this.renderContent())}}n.defaultProps={visible:!0,title:"",onCancel:()=>{},tip:"",record:{},option:{flag:"",scene:""},tabsTitle:["",""]},oe.Z=(0,h.Z)()(n)},41194:function(Ie,oe,e){"use strict";var D=e(47673),t=e(4107),Y=e(57663),u=e(71577),T=e(34792),l=e(48086),L=e(12924),R=e.n(L),W=e(91768),O=e(92592),K=e(87797),F=e.n(K);class te extends R().Component{constructor(M){super(M);this.handleDownload=()=>{var Z=document.getElementById("code_canvas"),d=this.state.codeUrl,h=new Image;h.crossOrigin="anonymous",h.src=d,h.onload=()=>{var i=Z.getContext("2d");i.textAlign="center",i.fillStyle="#fff",i.fillRect(0,0,750,886),i.drawImage(h,185,217,381,381),i.font="42px bold serif",i.fillStyle="#4F4F4F";var f=Z.toDataURL("image/jpeg"),I=document.createElement("a");I.setAttribute("href",f),I.setAttribute("download","".concat(this.props.t("setting.Qrcode"),".jpg")),document.body.insertAdjacentElement("beforeend",I),I.click(),I.remove()}},this.handleCopy=()=>{var Z=this.props.id,d=document.getElementById(Z||"visitor-link");d.select(),document.execCommand("Copy"),l.default.success(this.props.t("live.copySuccess"))},this.state={codeUrl:""}}componentDidMount(){this.props.shareUrl&&O.toDataURL(this.props.shareUrl,{width:500}).then(M=>{this.setState({codeUrl:M})}).catch(()=>{l.default.error(this.props.t("integralMall.qrCodeFailed"))})}componentDidUpdate(M){M.shareUrl!==this.props.shareUrl&&this.props.shareUrl&&O.toDataURL(this.props.shareUrl,{width:500}).then(Z=>{this.setState({codeUrl:Z})}).catch(()=>{l.default.error(this.props.t("integralMall.qrCodeFailed"))})}render(){var M=this.props,Z=M.shareUrl,d=M.t,h=M.notShowQrCode,i=M.urlLabel,f=M.id,I=this.state.codeUrl;return R().createElement(L.Fragment,null,h?null:R().createElement("div",{className:F()["visitor-qrCode-share"]},R().createElement("label",null,d("setting.Qrcode"),":"),R().createElement("div",{className:F()["qrCode-section"]},R().createElement("img",{className:F()["qrCode-img"],src:I,alt:""}),R().createElement("canvas",{className:F()["code-canvas"],id:"code_canvas",width:750,height:886}),R().createElement(u.Z,{type:"primary",className:F()["download-btn"],onClick:this.handleDownload},d("shareInfo.downloadCode")))),R().createElement("div",{className:F()["visitor-url-share"]},R().createElement("label",null,i||d("common.urlAddress"),":"),R().createElement("div",{className:F()["right-content"]},R().createElement(t.Z,{className:F()["share-url-input"],readOnly:!0,value:Z,id:f||"visitor-link"}),R().createElement(u.Z,{type:"primary",className:F()["copy-btn"],onClick:this.handleCopy},d("registerLogin.copyLink")),R().createElement("span",{className:F()["share-tip"]},d("common.shareTip")))))}}te.defaultProps={shareUrl:"",notShowQrCode:!1,urlLabel:"",id:"visitor-link"},oe.Z=(0,W.Z)()(te)},79:function(Ie,oe,e){"use strict";e.d(oe,{L:function(){return Y}});var D=e(5430),t=e(10237);function Y(u){var T=D.ZP.visitors.getVisitorSetting(u);return t.WY.get({url:T})}},99946:function(Ie,oe,e){"use strict";var D=e(12924),t=e.n(D),Y=e(91768),u=e(40847),T=e(41194),l=e(51431),L=e.n(l);class R extends t().Component{constructor(O){super(O);this.handleVisitorTabs=K=>{var F=this.props.handleVisitorTabs;F&&F(K)},this.state={shareUrl:"",excludeDomains:["localhost","127.0.0.1"]}}componentDidMount(){var O=this.state.excludeDomains,K=this.props,F=K.option,te=K.pcDomain,B=te||window.location.hostname||document.domain||"",M=window.location.port,Z=localStorage.getItem("enterpriseId");B&&O.indexOf(B)<0?this.setState({shareUrl:"https://".concat(B,"/#/visitor?").concat(F.scene,"&enterpriseId=").concat(Z)}):this.setState({shareUrl:"http://".concat(B,":").concat(M,"/#/visitor?").concat(F.scene,"&enterpriseId=").concat(Z)})}render(){var O=this.props,K=O.t,F=O.tip,te=O.onlyUrl,B=O.urlLabel,M=O.id,Z=this.state.shareUrl;return t().createElement("div",{className:L()["visitor-share-content"]},t().createElement("p",{className:L()["share-tip"]},t().createElement(u.Z,{className:L()["info-icon"]}),F||K("common.visitorShareTip")),t().createElement(T.Z,{id:M,shareUrl:te||Z,urlLabel:B}))}}R.defaultProps={record:{},shareUrl:"",tip:"",urlLabel:"",id:""},oe.Z=(0,Y.Z)()(R)},78509:function(Ie,oe,e){"use strict";var D=e(62029),t=e(66456),Y=e(55313),u=e(33565),T=e(12924),l=e.n(T),L=e(91768),R=e(18329),W=e(37055),O=e(10237),K=e(38642),F={zaraFlag:(0,K.UI)("ZARA_H5")},te={size:"medium",destroyOnClose:!0,maskClosable:!1,footer:null};function B(M){var Z=M.t,d=M.visible,h=M.detail,i=M.sourceType,f=M.onCancel,I=M.title,m=(0,T.useState)([]),A=(0,u.Z)(m,2),r=A[0],S=A[1],a=[{title:Z("documentTitle.matter"),dataIndex:"resource",key:"resource"},{title:Z("common.courseLabel"),dataIndex:"course_normal",key:"course_normal"},{title:Z("live.live"),dataIndex:"live_course",key:"live_course"},{title:Z("course.graphicDetailTitle"),dataIndex:"course_graphic",key:"course_graphic"},{title:Z("common.exam"),dataIndex:"exam",key:"exam"},{title:Z("setting.practice"),dataIndex:"practice",key:"practice"},{title:Z("common.offline"),dataIndex:"offline",key:"offline"},{title:Z("questionn.investigate"),dataIndex:"research",key:"research"},{title:Z("component.practiceExam"),dataIndex:"operation",key:"operation"},{title:Z("learning.jobEvaluation"),dataIndex:"evaluation",key:"evaluation"},{title:Z("component.attendance"),dataIndex:"sign",key:"sign"}];F.zaraFlag&&a.push({title:Z("assessment.assess"),dataIndex:"evaluate",key:"evaluate",render:w=>w||0}),(0,T.useEffect)(()=>{d&&n()},[d]);function n(){var w=F.zaraFlag?W.ZP.StudyProjectWithAssessment.coursesAmountList(h.id):W.ZP.StudyTaskList.coursesAmountList(h.id),c={source_type:i};O.WY.get({url:w,params:c}).then(g=>{S([g.data.data])})}return l().createElement(R.ZP,(0,D.Z)({},te,{title:I||Z("validation.stage"),onCancel:f,visible:d}),l().createElement("div",null,l().createElement(Y.Z,{bordered:!0,size:"middle",columns:a,dataSource:r,pagination:!1})))}oe.Z=(0,L.Z)()(B)},11449:function(Ie,oe,e){"use strict";e.d(oe,{Z:function(){return w}});var D=e(88986),t=e(33565),Y=e(12924),u=e.n(Y),T=e(3115),l=e(49111),L=e(19650),R=e(62029),W=e(57663),O=e(71577),K=e(91768),F=e(28216),te=e(37055),B=e(10237);function M(c){var g=te.ZP.getHelpContentByMenuKey(),o={key:c};return B.WY.get({url:g,params:o})}var Z=e(74228),d=e.n(Z),h=e(1164),i=e(76466),f=e(38642);class I extends u().Component{constructor(g){var o;super(g);o=this,this.getHelpContentByMenuKey=()=>{var v=this.props.defaultMenuKey;M(v).then(C=>{var x=C.data,_=x.help_url,j=x.video_url;this.setState({videoUrl:j,helpUrl:_})})},this.handleOpenHelpUrl=v=>{if((0,f.ve)()){window.open(v,"_blank");return}h.Z.targetTo({path:v,isExternalLink:!0})},this.handleOpenVideo=function(v){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.props.t("helpCenter.video");o.setState(x=>({resourcePlayInfo:(0,D.Z)((0,D.Z)({},x.resourcePlayInfo),{},{resourceInfo:{originUrl:v,source:{FD:v,OD:v},contentType:"mp4"}}),previewInfo:(0,D.Z)((0,D.Z)({},x.previewInfo),{},{title:C,visible:!0,onCancel:o.handleCancelPreview})}))},this.handleCancelPreview=()=>{var v=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,D.Z)((0,D.Z)({},v),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:g.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var g=this.state,o=g.helpUrl,v=g.resourcePlayInfo,C=g.previewInfo,x=g.videoUrl,_=this.props.t;return u().createElement("div",{className:d().helpCenter},x&&u().createElement(O.Z,{type:"link",className:d()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(x)},_("helpCenter.video")),o&&u().createElement(O.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(o)},_("helpCenter.tutorial")),u().createElement(i.Z,(0,R.Z)({},v,{previewInfo:C})))}}var m=c=>({defaultMenuKey:c.currentRoute.menuKey});I.defaultProps={defaultMenuKey:""};var A=(0,F.$j)(m)((0,K.Z)()(I));function r(c){var g=c.extra,o=localStorage.getItem("dingPersonnel"),v=sessionStorage.getItem("dingPersonnel");return u().createElement(L.Z,null,g,o!=="dingPersonnel"&&v!=="dingPersonnel"&&(0,f.eY)("COMMONEXTRA_HELP_CENTER")&&u().createElement(A,null))}var S=r,a=e(4408);function n(c){var g=(0,Y.useState)({helpCenter:(0,f.eY)("HEAD_HELP_CENTER_BUT")}),o=(0,t.Z)(g,1),v=o[0],C=c.pageContainerParams,x=C===void 0?{}:C,_=c.noPadding,j=_===void 0?!1:_,Q=c.isPersonal,U=Q===void 0?!1:Q,V=c.pageTitle,fe=c.className,z=fe===void 0?"":fe,b={extra:v.helpCenter?u().createElement(S,{extra:x.extra}):x.extra},se=(0,D.Z)((0,D.Z)({},x),b);return u().createElement("div",{className:"page-container-content ".concat(j?"page-container-noPadding":""," ").concat(U?"page-container-content_personal_background":""," ").concat(z)},V&&u().createElement(a.Z,{title:V}),U?u().createElement(T.Z,null,c.children):u().createElement(T.Z,se,c.children))}var w=n},404:function(Ie,oe,e){"use strict";e.d(oe,{Z:function(){return c}});var D=e(62029),t=e(57663),Y=e(71577),u=e(88986),T=e(12924),l=e.n(T),L=e(91768),R=e(20228),W=e(11382),O=e(34792),K=e(48086),F=e(80991),te=e(49010),B=e(77444),M=e(10237),Z=e(37055),d=e(18329);class h extends l().Component{constructor(){super(...arguments);this.initRefFormik=o=>{this._refFormik=o},this.state={initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}},isLoading:!0},this.getSingleApproval=()=>{var o=this.props.operationId,v=Z.ZP.PostAbility.queryAuthApprovels(o);M.WY.get({url:v}).then(C=>{var x=[],_=C.data;_.type==="multilevel"&&_.approvers.map(j=>x.push(j)),this.setState({initialValues:{supervisor:{or:_.type==="or"?[...C.data.approvers[0]]:[],multilevel:x,lead:"",type:_.type}},isLoading:!1})})},this.handleBeforeCreate=()=>{var o=this._refFormik;o.submitForm(),o.runValidations().then(v=>{if(!Object.keys(v).length){var C=o.state.values.supervisor,x=localStorage.getItem("authorityType"),_=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1,j=[],Q=[];if(C.type==="multilevel"){var U=C.multilevel;U.forEach(z=>{var b=[];z.forEach(se=>{b.push({id:se.id})}),j.push(b)}),_&&x==="1"&&U.forEach(z=>{var b=[];b.push(z[0].qyWeChatVo),Q.push(b)})}else if(C.type==="or"){var V=[];C.or.map(z=>{V.push({id:z.id})}),j.push(V),_&&x==="1"&&(Q=[[C.qy_we_chat_vo]])}else j=[],Q=[];var fe={type:C.type,operation_ids:this.props.operationId,approvers:j,qy_we_approve_users:Q};this.submit(fe)}})},this.submit=o=>{M.WY.post({url:Z.ZP.PostAbility.updateApprover(),data:o}).then(v=>{v.data&&(K.default.success(this.props.t("study.updateSuccess")),this.onCancel())})},this.onCancel=()=>{this.setState({initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}}},()=>{this.props.cancelSettingApprover()})}}componentDidUpdate(o){this.props.visible&&this.props.visible!==o.visible&&this.props.operationId&&(this.setState({isLoading:!0,initialValues:{supervisor:{or:[],multilevel:[],lead:"",type:"or"}}}),this.props.isSingle?this.getSingleApproval():this.setState({isLoading:!1}))}render(){var o=this.state,v=o.initialValues,C=o.isLoading,x=this.props,_=x.visible,j=x.t,Q=x.createUserId,U=x.isHasTutor;return l().createElement(d.ZP,{visible:_,title:j("authentication.abilityDetailSecSupervisionTitle"),onCancel:this.onCancel,onOk:this.handleBeforeCreate,size:"medium"},C?l().createElement(W.Z,{size:"large"}):_&&l().createElement("div",{className:"auth-people"},l().createElement(F.J9,{ref:this.initRefFormik,initialValues:v,onSubmit:this.submit,render:V=>l().createElement(F.l0,{className:"cl-form"},l().createElement(F.gN,{component:te.Z,isHasTutor:U,displayType:"Custom",name:"supervisor",createUserId:Q,defaultFieldList:V.values.supervisor,validate:B.Z.checkSupervisor,mode:"dialog"}))})))}}var i=(0,L.Z)()(h),f=e(22385),I=e(31097),m=e(28216),A=e(36202),r=e(60667);class S extends l().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("personal.practicalName"),dataIndex:"title",key:"title"},{title:this.props.t("authentication.abilityDetailApprover"),dataIndex:"approvers_list",key:"approvers_list",width:250,render:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],C=Array.isArray(v)?[...v]:[];return l().createElement(I.Z,null,l().createElement("div",{className:"cl-text-ellipsis",style:{width:230}},C.map((x,_)=>Array.isArray(x)?l().createElement(l().Fragment,null,x.map((j,Q)=>l().createElement(T.Fragment,{key:x.id},l().createElement(r.Z,{dataType:"userName",value:j.sync_user_id,name:j.name,type:j.source_type||x.sourceType}),Q*_!=x.length*C.length-1&&","))):l().createElement(T.Fragment,{key:x.id},l().createElement(r.Z,{dataType:"userName",value:x.sync_user_id,name:x.name,type:x.source_type||x.sourceType}),_!==C.length-1&&","))))}},{title:this.props.t("common.operate"),width:80,key:"operate",render:o=>l().createElement("div",{className:"cl-table__cell-action"},l().createElement("span",{className:"cl-pointer",onClick:()=>this.props.settingApprover(o)},this.props.t("common.edit")))}]}render(){var o=this.props,v=o.list,C=v===void 0?[]:v,x=o.loading,_=o.selectedRowKeys,j=_===void 0?[]:_,Q=o.onSelectChange,U=o.toolBarRender,V={selectedRowKeys:j,onChange:Q};return l().createElement("section",{className:"auth-people__content__table"},l().createElement(A.f,{bordered:!0,columns:this.columns,rowSelection:V,rowKey:"id",dataSource:C,pagination:!1,loading:x,toolBarRender:U,tableUUID:"eebd1b51-6aad-436e-be45-a4fc2e1e858d"}))}}var a=g=>{var o=g.user;return{user:o,qyShield:o.qyShield}},n=(0,m.$j)(a)((0,L.Z)()(S));class w extends l().Component{constructor(){super(...arguments);this.state={params:{entity_type:"",entity_id:""},tableLoading:!0,tableList:[],settingApproverProps:{operationId:[],createUserId:"",isSingle:!1,visible:!1,isHasTutor:this.props.isHasTutor},selectedRowKeys:[]},this.initTableList=()=>{this.setState({tableLoading:!0}),M.WY.post({url:Z.ZP.PostAbility.queryAuthWorkList(),data:this.state.params}).then(o=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:o.data.operations})},300)})},this.handleSelectChange=o=>{this.setState({selectedRowKeys:o})},this.multiSettingApprover=()=>{var o=this.state.selectedRowKeys;this.setState(v=>({settingApproverProps:(0,u.Z)((0,u.Z)({},v.settingApproverProps),{},{visible:!0,isSingle:!1,operationId:o})}))},this.settingApprover=o=>{this.setState(v=>({settingApproverProps:(0,u.Z)((0,u.Z)({},v.settingApproverProps),{},{visible:!0,isSingle:!0,operationId:[o.id],createUserId:this.props.createUserId})}))},this.cancelSettingApprover=()=>{this.initTableList(),this.setState(o=>({settingApproverProps:(0,u.Z)((0,u.Z)({},o.settingApproverProps),{},{visible:!1,operationId:[]})})),this.setState({selectedRowKeys:[]})},this.onCancel=()=>{this.props.closeApprovalList()},this.renderRightRow=()=>{var o=this.props.t,v=this.state.selectedRowKeys;return l().createElement("div",{className:"auth-people__content__query"},l().createElement(Y.Z,{type:"primary",onClick:this.multiSettingApprover,disabled:v.length===0},o("personal.batchEdit")))}}componentDidUpdate(o){if(this.props.visible&&this.props.visible!==o.visible&&this.props.entityId){var v=this.props,C=v.entityId,x=v.entityType;this.setState({params:{entity_type:x,entity_id:C},tableList:[]},()=>{this.initTableList()})}}render(){var o=this.props,v=o.visible,C=o.t,x=o.isHasTutor,_=this.state,j=_.tableList,Q=_.tableLoading,U=_.settingApproverProps,V=_.selectedRowKeys;return l().createElement(d.ZP,{visible:v,title:C("authentication.editApprovals"),onCancel:this.onCancel,footer:null,size:"large"},l().createElement("div",{className:"auth-people"},v?l().createElement(l().Fragment,null,l().createElement("div",{className:"auth-people__content"},l().createElement(n,{loading:Q,list:j,selectedRowKeys:V,onSelectChange:this.handleSelectChange,settingApprover:this.settingApprover,toolBarRender:this.renderRightRow}),l().createElement(i,(0,D.Z)({},U,{isHasTutor:x,cancelSettingApprover:this.cancelSettingApprover})))):null))}}var c=(0,L.Z)()(w)},77444:function(Ie,oe,e){"use strict";var D=e(6793),t=e(3407),Y=(0,D.me)(),u=t.Z[Y].authentication.validation;oe.Z={title:T=>(0,D.fy)(T)?(0,D.fy)(T).length>60?u.abilityDetailNameLimit:"":u.abilityDetailNameNull,summary:T=>{var l;return T?(0,D.fy)(T).length>500&&(l=t.Z[Y].validation.limitedFiveHundred):l=u.abilityDetailSummaryNull,l},certificate:T=>{var l;return T.id||(l=u.abilityDetailIssueNull),l},checkSupervisor:T=>{var l,L=T.multilevel,R=T.type;if(R==="multilevel")if(L.length<2)l=u.abilityDetailSupervisionNull;else{var W={},O=[];L.forEach((K,F)=>{if(K.length===0){l=(0,D.ZT)("".concat(u.abilityDetailSupervisionStepNull),F+1);return}if(K.length>5){l=(0,D.ZT)("".concat(u.abilityDetailSupervisionStepLimit),F+1);return}K.forEach(te=>{O.push(te)})}),O.forEach(K=>{W[K.id]?l=u.abilityDetailSupervisionRepeat:W[K.id]=!0})}return l}}},72456:function(Ie,oe,e){"use strict";var D=e(49111),t=e(19650),Y=e(57663),u=e(71577),T=e(12924),l=e.n(T),L=e(28216),R=e(91768),W=e(84391),O=e(90631),K=e(49101),F=e(76651),te=e(31945),B=e(1164),M=e(51697),Z=h=>{var i=h.user,f=h.currentRoute,I=h.advancedSetting;return{currentPath:f.path,allAuthRoutes:f.allAuthRoutes,userLng:i.lng,themeColor:I.themeColor,qyShield:i.qyShield}};class d extends l().Component{constructor(){super(...arguments);this.handleDownload=()=>{this.props.onDownload()},this.handleImport=()=>{this.props.onImport()},this.handleCreate=()=>{var i=this.props.tabLink;F.m8.push(i)},this.renderActionBtn=()=>{var i=this.props,f=i.prefixCls,I=i.actionText,m=i.t,A=i.tabLink,r=i.showBtn,S=i.renderActionBtn,a=i.newPage,n=i.popOverProps,w=n===void 0?[]:n,c=i.renderGuide,g=c===void 0?!1:c,o=i.showDownloadBtn,v=o===void 0?!1:o,C=i.showImportBtn,x=C===void 0?!1:C,_=i.showCreateBtn,j=_===void 0?!0:_,Q=i.rowReverse,U=Q===void 0?!1:Q,V="".concat(f,"__action");if(!r&&S&&typeof S=="function")return l().createElement("div",{className:V},S());if(!r||!I)return null;var fe=w.length?w[0].contentText:"";return l().createElement("div",{className:"".concat(V," ").concat(U&&"row-reverse")},l().createElement(t.Z,{size:16},v&&l().createElement(u.Z,{icon:l().createElement(W.Z,null),onClick:this.handleDownload},m("common.exportData")),x&&l().createElement(u.Z,{icon:l().createElement(O.Z,null),onClick:this.handleImport},m("exam.importTemplate")),j&&a&&l().createElement(B.Z,{to:A},l().createElement(M.Z,{visible:fe&&g,placement:"topLeft",title:fe},l().createElement(u.Z,{type:"primary",id:"create-project-button",icon:l().createElement(K.Z,null)},I))),j&&!a&&l().createElement(u.Z,{type:"primary",id:"create-project-button",icon:l().createElement(K.Z,null),onClick:this.handleCreate},I)))},this.renderQueryRow=()=>{var i=this.props,f=i.queryRowParams,I=i.queryRowList,m=i.queryRowSelectedCourseIds,A=i.queryRowSelectedProjectIds,r=i.queryRowOnForceRender,S=i.queryRowOnClassifyChange,a=i.queryRowOnTypeChange,n=i.queryRowOnCourseTypeChange,w=i.queryRowAllowActions,c=i.showNum,g=c===void 0?1:c;return l().createElement(te.Z,{params:f,list:I,selectedCourseIds:m,selectedProjectIds:A,onForceRender:r,onClassifyChange:S,onTypeChange:a,onCourseTypeChange:n,allowActions:w,showNum:g,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var i=this.props,f=i.t,I=i.extraBtnSelectedRowKeys,m=i.extraBtnHandleMultiVisibleRange;return l().createElement(u.Z,{disabled:I.length===0,onClick:m},f("courseManage.setTheVisibility"))}}render(){var i=this.props,f=i.prefixCls,I=i.wrapCls,m=i.showRenderQueryRow,A=i.showRendeExtraBtn;return l().createElement(l().Fragment,null,l().createElement("div",{className:"render_other"},l().createElement("header",{className:"".concat(f," ").concat(I)},l().createElement("section",{className:"".concat(f,"__radiocol")},this.renderActionBtn(),m&&this.renderQueryRow(),A&&this.rendeExtraBtn()))))}}d.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showSearch:!0,showBtn:!0,newPage:!0,searchStylesProps:{},selectList:[],renderActionBtn:()=>null},oe.Z=(0,L.$j)(Z)((0,R.Z)()(d))},27550:function(Ie,oe,e){"use strict";var D=e(57663),t=e(71577),Y=e(63185),u=e(9676),T=e(43358),l=e(34041),L=e(88983),R=e(47933),W=e(12924),O=e.n(W),K=e(28216),F=e(91768),te=e(49101),B=e(84391),M=e(1164),Z=e(48479),d=e(2971),h=e(45601),i=e(7249),f=e(64549),I=e(31945),m=r=>{var S=r.user,a=r.currentRoute,n=r.advancedSetting;return{currentPath:a.path,allAuthRoutes:a.allAuthRoutes,userLng:S.lng,themeColor:n.themeColor}};class A extends O().Component{constructor(S){super(S);this.setPlaceholder=()=>{var a=this.props,n=a.currentPath,w=a.allAuthRoutes,c=a.userLng,g=this.state.language,o=w[n];if(!!o){var v=g[c].searchInputPlaceholder,C="";o.menuKey==="studyTemplate"||o.menuKey==="examTemplate"?C=v.template:o.menuKey==="management"||o.menuKey==="employee"||o.menuKey==="obligatory"||o.menuKey==="elective"||o.menuKey==="plan"||o.menuKey==="evaluation"||o.menuKey==="myEvaluationPlan"?C=v.task:C=v[o.menuKey],this.setState({currentPlaceholder:C})}},this.handleRadiosChange=a=>{this.props.onRadiosChange(a.target.value)},this.handleSelectChange=a=>{this.props.onSelectChange(a)},this.handleSearch=a=>{this.props.onSearch(a)},this.handleChange=a=>{this.props.onCheckboxChange(a.target.checked)},this.handleDownload=()=>{this.props.onDownload()},this.renderRadios=()=>{var a=this.props,n=a.prefixCls,w=a.radioList,c=a.defaultRadioValue,g=a.radioValue;if(!w.length)return null;var o=c||w[0].value,v="".concat(n,"__radios");return O().createElement("div",{className:v},typeof g!="undefined"?O().createElement(R.ZP.Group,{defaultValue:o,value:g,onChange:this.handleRadiosChange},w.map(C=>O().createElement(R.ZP.Button,{key:C.value,value:C.value},C.name))):O().createElement(R.ZP.Group,{defaultValue:o,onChange:this.handleRadiosChange},w.map(C=>O().createElement(R.ZP.Button,{key:C.value,value:C.value},C.name))))},this.renderSelect=()=>{var a=this.props,n=a.prefixCls,w=a.selectList,c=a.defaultSelectValue;if(!w.length)return null;var g=c||w[0].value,o="".concat(n,"__select");return O().createElement("div",{className:o},O().createElement(l.Z,{defaultValue:g,onChange:this.handleSelectChange,getPopupContainer:()=>document.getElementsByClassName("cl-listQueryRow__select")[0],style:{minWidth:100}},w.map(v=>O().createElement(l.Z.Option,{key:v.value,value:v.value},v.name))))},this.renderOther=()=>{var a=this.props,n=a.prefixCls,w=a.renderOther,c=a.showOther,g="".concat(n,"__other");if(c&&w&&typeof w=="function")return O().createElement("div",{className:g},w())},this.renderCheckbox=()=>{var a=this.props,n=a.prefixCls,w=a.t,c=a.label,g=a.showCheckbox,o=a.renderActionSelect,v="".concat(n,"__checkbox");return!g&&o&&typeof o=="function"?O().createElement("div",{className:v},o()):g?O().createElement("div",{className:v},O().createElement(u.Z,{onChange:this.handleChange},c||w("common.myCreated"))):null},this.renderSearch=()=>{var a=this.props,n=a.prefixCls,w=a.showSearch,c=a.inputPlaceholder,g=a.maxLength,o=g===void 0?400:g,v="".concat(n,"__search");if(!w)return null;var C=this.state.currentPlaceholder;return c?O().createElement("div",{className:v},O().createElement(Z.Z,{onSearch:this.handleSearch,placeholder:c,width:272,maxLength:o})):O().createElement("div",{className:v},O().createElement(Z.Z,{onSearch:this.handleSearch,placeholder:C,width:272,maxLength:o}))},this.renderActionBtn=()=>{var a=this.props,n=a.prefixCls,w=a.actionText,c=a.t,g=a.tabLink,o=a.showBtn,v=a.renderActionBtn,C=a.popOverProps,x=C===void 0?[]:C,_=a.renderGuide,j=_===void 0?!1:_,Q=a.showDownloadBtn,U=Q===void 0?!1:Q,V=a.guideClassName,fe=V===void 0?"guide-popover":V,z=a.themeColor,b="".concat(n,"__action");return!o&&v&&typeof v=="function"?O().createElement("div",{className:b},v()):!o||!w?null:O().createElement("div",{className:b},O().createElement(M.Z,{to:g},O().createElement(t.Z,{type:"primary",icon:O().createElement(te.Z,null)},w)),O().createElement(f.Z,{className:fe,renderGuide:j,guidePageProps:x,direction:"left",showDownloadBtn:U}),U&&O().createElement(t.Z,{style:{marginLeft:"8px",color:z,border:"1px solid ".concat(z)},icon:O().createElement(B.Z,null),onClick:this.handleDownload},c("common.exportData")))},this.renderQueryRow=()=>{var a=this.props,n=a.queryRowParams,w=a.queryRowList,c=a.queryRowSelectedCourseIds,g=a.queryRowSelectedProjectIds,o=a.queryRowOnForceRender,v=a.queryRowOnClassifyChange,C=a.queryRowOnTypeChange,x=a.queryRowOnCourseTypeChange,_=a.queryRowAllowActions;return O().createElement(I.Z,{params:n,list:w,selectedCourseIds:c,selectedProjectIds:g,onForceRender:o,onClassifyChange:v,onTypeChange:C,onCourseTypeChange:x,allowActions:_,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var a=this.props,n=a.t,w=a.extraBtnSelectedRowKeys,c=a.extraBtnHandleMultiVisibleRange;return O().createElement(t.Z,{disabled:w.length===0,onClick:c},n("courseManage.setTheVisibility"))},this.state={language:{zh_cn:h.Z,en_us:d.Z,zh_hk:i.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(S){S.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var S=this.props,a=S.prefixCls,n=S.wrapCls,w=S.showRenderRadios,c=w===void 0?!0:w,g=S.showRenderQueryRow,o=S.showRendeExtraBtn,v=S.showRenderSelect;return O().createElement(O().Fragment,null,O().createElement("div",{className:"render_other"},this.renderOther(),O().createElement("header",{className:"".concat(a," ").concat(n)},O().createElement("section",{className:"".concat(a,"__radiocol")},this.renderActionBtn(),g&&this.renderQueryRow(),o&&this.rendeExtraBtn()),O().createElement("section",{className:"".concat(a,"__searchcol")},this.renderCheckbox(),c&&this.renderRadios(),v&&this.renderSelect(),this.renderSearch()))))}}A.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showRadioList:!0,showCheckbox:!0,showSearch:!0,showBtn:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{}},oe.Z=(0,K.$j)(m)((0,F.Z)()(A))},90734:function(Ie,oe,e){"use strict";e.d(oe,{Tq:function(){return Y},MI:function(){return u},bp:function(){return R},DD:function(){return W},hM:function(){return O},HE:function(){return K},yt:function(){return B},yy:function(){return M},$W:function(){return Z}});var D=e(37055),t=e(10237);function Y(d){return t.WY.get({url:D.ZP.lineClass.getOfflineCourseBasicById(d)})}function u(d){var h=d.type,i=d.planId,f=d.departmentId,I=f===void 0?"":f,m=d.postId,A=m===void 0?"":m,r=d.keyword,S=r===void 0?"":r,a=d.courseId,n=d.pageNumber,w=d.pageSize,c=d.signId,g=c===void 0?"":c,o=d.source,v=d.userIds;return t.WY.get({url:D.ZP.lineClass.getMonitorUserList(g),params:{plan_id:i,course_id:a,department_id:I,post_id:A,keyword:S,page_number:n,page_size:w,sign_id:g,source:o,type:h,userIds:v}})}function T(d){return request.get({url:CONFIG.lineClass.getOfflineCourseSignAnalysis(d)})}function l(d){return request.get({url:CONFIG.lineClass.getOfflineSignSetting(d)})}function L(d){var h=d.courseId,i=d.signId,f=d.userId;return request.post({url:CONFIG.lineClass.offlineMarkLeave(h,i),params:{user_id:f}})}function R(){return t.WY.get({url:D.ZP.Common.getServerTime()})}function W(d){var h=d.integral,i=d.courseId,f=d.subsidy,I=d.is_lecturer_subsidy,m=d.lectureId;return t.WY.post({url:D.ZP.lineClass.commitCourseStatement(i),data:{integral:h,subsidy:f,is_lecturer_subsidy:I,lecture_id:m}})}function O(d){var h=d.courseId,i=d.actual_cost,f=d.summary,I=d.summary_attachment_id_list;return t.WY.post({url:D.ZP.lineClass.commitOfflineCourseSummary(h),data:{actual_cost:i,summary:f,summary_attachment_id_list:I}})}function K(d){var h=d.courseId,i=d.lecturer_id;return t.WY.get({url:D.ZP.lineClass.getOfflineCourseSummary(h),param:{lecturer_id:i}})}function F(d){return request.get({url:CONFIG.lineClass.getOfflineDetail(d)})}function te(d){return request.get({url:CONFIG.lineClass.getEvaluateDataByOffline(d)})}function B(d){var h=d.courseId,i=d.type,f=d.evaluate_id,I=d.evaluate_type,m=d.lecturer_id,A=d.post_id,r=d.department_id,S=d.keyword,a=d.page_number,n=d.page_size,w=d.userIds;return t.WY.get({url:D.ZP.lineClass.getEvaluateDetailDataList(h),params:{type:i,evaluate_id:f,evaluate_type:I,lecturer_id:m,post_id:A,department_id:r,keyword:S,page_number:a,page_size:n,userIds:w}})}function M(){return t.WY.post({url:D.ZP.lineClass.studyProjectsImportConfirm()})}function Z(d,h,i){return t.WY.post({url:D.ZP.lineClass.attendanceConform(d,h,i)})}},31945:function(Ie,oe,e){"use strict";e.d(oe,{Z:function(){return fe}});var D=e(88983),t=e(47933),Y=e(20228),u=e(11382),T=e(62029),l=e(30887),L=e(99210),R=e(59250),W=e(13013),O=e(57663),K=e(71577),F=e(63185),te=e(9676),B=e(71194),M=e(57016),Z=e(88986),d=e(34792),h=e(48086),i=e(43358),f=e(34041),I=e(12924),m=e.n(I),A=e(28216),r=e(91768),S=e(57254),a=e(18329);class n extends m().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var b=this.props,se=b.visible,q=b.courseList,_e=b.t;return m().createElement(a.ZP,{visible:se,title:_e("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},m().createElement("div",{className:"referenceWithOtherCourses"},m().createElement("div",{className:"referenceWithOtherCourses__tip"},_e("course.deleteCourseTip")),q.map((Se,ue)=>m().createElement("div",{className:"referenceWithOtherCourses__item",key:ue},q.length>1?"".concat(ue+1,"\u3001"):null," ",Se))))}}var w=(0,r.Z)()(n),c=e(10237),g=e(63848),o=e(58546),v=e(30389),C=e(54792),x=e(86726),_=e(37055),j=f.Z.Option,Q={setClassify:_.ZP.CourseManageList.setClassify,setScore:_.ZP.CourseManageList.setScore,setBatchEmployee:_.ZP.CourseManageList.setBatchEmployee,deleteCourse:_.ZP.CourseManageList.deleteCourse,exportCourseView:_.ZP.CourseManageList.exportCourseView,syncCourse:_.ZP.CourseManageList.syncCourse},U=z=>({qyShield:z.user.qyShield});class V extends m().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=b=>{this.props.onClassifyChange(b)},this.handleChangeType=b=>{this.props.onTypeChange(b)},this.handleChangeCourseType=b=>{this.props.onCourseTypeChange(b)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=b=>{var se=b.node,q=this.props,_e=q.selectedCourseIds,Se=q.selectedProjectIds,ue=q.onForceRender,y=q.t,N=se.id;N&&c.qg.post({url:Q.setClassify(),data:{course_ids:_e.join(","),project_ids:Se.join(","),classify_id:N}}).then(()=>{h.default.success(y("course.setCourseClassifySuccess")),ue()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(b=>({scoreProps:(0,Z.Z)((0,Z.Z)({},b.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(b=>({scoreProps:(0,Z.Z)((0,Z.Z)({},b.scoreProps),{},{visible:!1})}))},this.handleScoreOk=b=>{var se=b.value;if(se===0){this.handleScoreCancel();return}var q=this.props,_e=q.selectedCourseIds,Se=q.selectedProjectIds,ue=q.onForceRender,y=q.t;c.qg.post({url:Q.setScore(),data:{course_ids:_e.join(","),project_ids:Se.join(","),credit:se}}).then(()=>{h.default.success(y("course.setCourseScoreSuccess")),ue()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(b=>({employeeProps:(0,Z.Z)((0,Z.Z)({},b.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=b=>{var se=this.props,q=se.selectedCourseIds,_e=se.selectedProjectIds,Se=se.onForceRender,ue=se.t,y=b.isAll,N=b.departmentIds,ce=b.groupIds,re=b.postIds,ie=b.userIds,de=b.qy_we_chat_vo;c.WY.post({url:Q.setBatchEmployee(),data:{course_ids:q.join(","),project_ids:_e.join(","),department_ids:N,group_ids:ce,is_all:y,post_ids:re,user_ids:ie,qy_we_chat_vo:de}}).then(()=>{h.default.success(ue("personal.batchSetRangeSuccess")),Se()}),this.handleEmployeeCancel()},this.showReferenceCourseList=b=>{this.setState(se=>({showReferenceCourseListProps:(0,Z.Z)((0,Z.Z)({},se.showReferenceCourseListProps),{},{visible:!se.showReferenceCourseListProps.visible,courseList:b||[]})}))},this.actionDelete=()=>{var b=this.props,se=b.selectedCourseIds,q=b.selectedProjectIds,_e=b.list,Se=b.onForceRender,ue=b.t,y=0,N=0,ce=[];if(_e.forEach(re=>{se.includes(re.course_id)&&(re.reference_plan_count>0&&(N+=1),re.reference_plan_count>0&&ce.push(re.title),re.can_delete==="true"&&(y+=1))}),N>0)this.showReferenceCourseList(ce);else if(y!==se.length)h.default.warning(ue("personal.deletePlatformCourseTip"));else{if(q.length>0){h.default.warning(ue("personal.deleteProjectCourseTip"));return}M.Z.confirm({title:ue("common.tip"),content:ue("common.confirmDeleteTitle"),onOk(){c.qg.post({url:Q.deleteCourse(),data:{enterpriseId:_.ZP.enterpriseId,ids:se.join(","),project_ids:q.join(",")}}).then(re=>{var ie=re.data,de=ie.code,H=ie.msg;h.default["".concat(de===0?"success":"warning")](H),de===0&&Se()})}})}},this.actionSyncSetting=()=>{this.setState(b=>({asyncProps:(0,Z.Z)((0,Z.Z)({},b.asyncProps),{},{visible:!0})}))},this.onAsyncChange=b=>{this.setState(se=>({asyncProps:(0,Z.Z)((0,Z.Z)({},se.asyncProps),{},{value:b.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var b=this.props,se=b.selectedCourseIds,q=b.selectedProjectIds,_e=b.onForceRender,Se=b.t,ue=this.state.asyncProps;c.qg.post({url:Q.syncCourse(),data:{course_ids:se.join(","),project_ids:q.join(","),syncProgress:ue.value}}).then(y=>{var N=y.data,ce=N.code,re=N.msg;ce===0?(h.default.success(Se("setting.setUpSucceed")),_e()):h.default.warning(re)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var b=this.props,se=b.selectedCourseIds,q=b.selectedProjectIds,_e=b.onForceRender,Se=b.t;if(se.concat(q).length>20){h.default.warning(Se("courseManage.exportMoreTip"));return}var ue=Q.exportCourseView(),y={course_Ids:se.join(","),project_Ids:q.join(",")};c.WY.get({url:ue,params:y}).then(N=>{N.data.code===200&&h.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),_e(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var b=_.ZP.downLoadCenter.getDownLoadingCount();c.WY.get({url:b,params:{}}).then(se=>{sessionStorage.setItem("downloadingCount",se.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:se.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=b=>{this.props.onCheckboxChange(b.target.checked)},this.handleSharingQueryRowCheckboxChange=b=>{this.props.onSharingCheckboxChange(b.target.checked)},this.renderCondition=()=>{var b=this.props,se=b.prefixCls,q=b.params,_e=b.qyShield,Se=b.t,ue=q.classify_id?q.classify_id.split(","):[];return m().createElement("div",{className:"".concat(se,"__condition")},this.props.extraDom&&this.props.extraDom(),m().createElement(g.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:ue,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),m().createElement(f.Z,{value:q.type,className:"cl-search-normal-width",onChange:this.handleChangeType},m().createElement(j,{value:""},this.props.t("courseManage.allOrigin")),m().createElement(j,{value:"original"},this.props.t("courseManage.originalCourse")),m().createElement(j,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),m().createElement(j,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:m().createElement(f.Z,{value:q.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},m().createElement(j,{value:"all"},this.props.t("courseManage.allType")),m().createElement(j,{value:"course"},this.props.t("common.courseLabel")),m().createElement(j,{value:"microCourse"},this.props.t("common.microCourse")),m().createElement(j,{value:"project"},this.props.t("leftMenuLists.studyProject"))),m().createElement(te.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},Se("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&_e==="false"?m().createElement(te.Z,{onChange:this.handleSharingQueryRowCheckboxChange},Se("common.sharing")):null)},this.renderActions=()=>{var b=this.props,se=b.prefixCls,q=b.selectedCourseIds,_e=b.selectedProjectIds,Se=b.showNum,ue=Se===void 0?1:Se,y=this.props.allowActions,N=(0,x.H3)("delete",y),ce=(0,x.H3)("adjustment_classification",y),re=(0,x.H3)("set_visible",y),ie=(0,x.H3)("export",y),de=(0,x.H3)("set_score",y),H=(0,x.H3)("progressSync",y),Te=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:ce},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:ie},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:de},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:re},{name:this.props.t("common.delete"),type:"actionDelete",isShow:N},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:H}],qe=Te.filter(Ut=>Ut.isShow),At=[],xt=[];if(qe.length)ue?(At=[...qe.slice(0,ue)],xt=[...qe.slice(ue)]):xt=[...qe];else return null;return m().createElement("div",{className:"".concat(se,"__action")},At.map(Ut=>m().createElement(K.Z,{style:{marginRight:"8px"},key:Ut.type,disabled:!(q.length+_e.length),onClick:this[Ut.type]},Ut.name)),xt.length?m().createElement(W.Z,{disabled:!(q.length+_e.length),overlay:this.renderMoreButton({buttons:xt})},m().createElement(K.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",m().createElement(S.Z,null))):"")}}renderMoreButton(b){var se=b.buttons,q=this.props,_e=q.selectedCourseIds,Se=q.selectedProjectIds;return m().createElement(L.Z,{onClick:ue=>{var y=ue.key;this[y]()}},se.map(ue=>ue.isShow?m().createElement(L.Z.Item,{key:ue.type,disabled:!(_e.length+Se.length)},m().createElement("span",{className:"cl-pointer"},ue.name)):null))}render(){var b=this.props,se=b.prefixCls,q=b.t,_e=b.showRenderCondition,Se=_e===void 0?!0:_e,ue=b.showRenderActions,y=ue===void 0?!0:ue,N=this.state,ce=N.classifyProps,re=N.scoreProps,ie=N.employeeProps,de=N.showReferenceCourseListProps,H=N.asyncProps;return m().createElement("div",{className:se},Se&&this.renderCondition(),y&&this.renderActions(),m().createElement(o.Z,(0,T.Z)({},ce,{title:q("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),m().createElement(C.Z,(0,T.Z)({},re,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),ie.visible&&m().createElement(v.Z,(0,T.Z)({},ie,{title:q("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:q("component.chooseVisibleScope")},isLoading:!ie.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),H.visible&&m().createElement(a.ZP,{wrapClassName:"cl-async-selector-modal",visible:H.visible,title:q("common.scheduleSyncSetting"),okText:q("common.ok"),cancelText:q("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},H.visible?m().createElement("div",{className:"".concat(se,"__async")},m().createElement("p",null," ",q("common.scheduleSyncSettingTip")),m().createElement(t.ZP.Group,{onChange:this.onAsyncChange,value:H.value},m().createElement(t.ZP,{value:0},q("common.outSync")),m().createElement(t.ZP,{value:1},q("common.synchronization")))):m().createElement(u.Z,{size:"large"})),m().createElement(w,(0,T.Z)({},de,{showReferenceCourseList:this.showReferenceCourseList})))}}V.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var fe=(0,r.Z)()((0,A.$j)(U)(V))},76288:function(Ie,oe,e){"use strict";e.r(oe),e.d(oe,{default:function(){return Ga}});var D=e(12924),t=e.n(D),Y=e(91768),u=e(62029),T=e(88983),l=e(47933),L=e(57663),R=e(71577),W=e(48736),O=e(27049),K=e(49111),F=e(19650),te=e(47673),B=e(4107),M=e(59250),Z=e(13013),d=e(54029),h=e(62529),i=e(22385),f=e(31097),I=e(57361),m=e(30887),A=e(99210),r=e(88986),S=e(34792),a=e(48086),n=e(33565),w=e(14965),c=e(11448),g=e(43358),o=e(34041),v=e(71194),C=e(57016),x=e(9754),_=e.n(x),j=e(61378),Q=e(68628),U=e(57254),V=e(76651),fe=e(78138),z=e.n(fe),b=e(28216),se=e(57068),q=e(77576),_e=e(59314),Se=e(402),ue=e(99545),y=e(80991),N=e(57119),ce=e(77883),re=e(21888),ie=e(89222),de=e.n(ie),H=ee=>{var s=ee.t,P=ee.form,k=P.values.enroll,G=P.setFieldValue,$=k.enroll_audit,ae=k.is_enroll_limit,J=k.limit_count,me=[{label:s("shareInfo.signManualApprove"),value:"manual_audit"},{label:s("shareInfo.signAutomaticApprove"),value:"automatic_audit"}],Ce=ne=>{G("enroll",(0,r.Z)((0,r.Z)({},k),ne))};return t().createElement(F.Z,{direction:"vertical"},t().createElement(F.Z,null,t().createElement(l.ZP.Group,{options:me,onChange:ne=>{Ce({enroll_audit:ne.target.value,is_enroll_limit:"close",limit_count:""})},value:$,optionType:"button",buttonStyle:"solid"}),t().createElement(f.Z,{placement:"right",title:()=>t().createElement(F.Z,{direction:"vertical"},t().createElement("span",null,s("trainingProject.manualApproveTip")),t().createElement("span",null,s("trainingProject.automaticApproveTip")),t().createElement("span",null,s("trainingProject.approveTip")))},t().createElement(Q.Z,null))),$==="automatic_audit"&&t().createElement(F.Z,null,t().createElement("div",null,s("trainingProject.limitText")),t().createElement(_e.Z,{checked:ae==="open",onChange:ne=>{Ce({is_enroll_limit:ne?"open":"close",limit_count:""})}}),ae==="open"&&t().createElement("div",{className:de()["application-setting-approval-inputNumber"]},t().createElement(re.Z,{min:1,max:1e5,precision:0,value:J,onChange:ne=>{Ce({limit_count:ne})}}),t().createElement("span",{className:de()["application-setting-approval-inputNumber__unit"]},"\u4EBA"))))},Te=(0,Y.Z)()(H),qe=e(88281),At=e.n(qe),xt=e(87722),Ut=ee=>{var s=ee.t,P=ee.form,k=P.setFieldValue,G=P.values,$=G.taskMonitor,ae=G.taskMonitor,J=ae.add_task_control,me=ae.dateRange,Ce=Ee=>{var Ae=Ee.dateStrings;k("taskMonitor",(0,r.Z)((0,r.Z)({},$),{},{dateRange:{startTime:Ae[0],endTime:Ae[1]}}))},ne=Ee=>{k("taskMonitor",(0,r.Z)((0,r.Z)({},$),{},{add_task_control:Ee?"open":"closed"}))},Oe=Ee=>Ee&&Ee<z()().subtract(1,"days").endOf("day");return t().createElement("div",{className:At()["application-setting-task-box"]},t().createElement(F.Z,null,t().createElement(_e.Z,{defaultChecked:J==="open",onChange:ne}),t().createElement(f.Z,{placement:"right",title:s("trainingProject.taskMonitoring")},t().createElement(Q.Z,null))),J==="open"&&t().createElement("div",{className:At()["application-setting-task-box-date"]},t().createElement("span",{className:At()["application-setting-task-box-date-label"]},s("personal.taskRange"),"\uFF1A"),t().createElement("div",{className:At()["application-setting-task-box-date-box"]},t().createElement(xt.Z,{defaultValue:[me.startTime,me.endTime],onCustomChange:Ce,showTime:!0,customerShowTime:!0,noRange:!0,disabledDate:Oe,format:"YYYY-MM-DD HH:mm"}))))},xa=(0,Y.Z)()(Ut),Ua=ee=>{var s=ee.t,P=ee.form,k=P.values.enrollment,G=P.setFieldValue,$=ee.onChangePeriodType,ae=Je=>Je&&Je<z()().subtract(1,"days").endOf("day"),J=k.startTime,me=k.endTime,Ce=(0,D.useState)(J?"customDeadline":"noLimit"),ne=(0,n.Z)(Ce,2),Oe=ne[0],Ee=ne[1],Ae=[{label:s("trainingProject.noLimit"),value:"noLimit"},{label:s("trainingProject.customDeadline"),value:"customDeadline"}],yt=Je=>{Ee(Je),$(Je),G("enrollment",{startTime:null,endTime:null})},ze=Je=>{var ct=Je.dateStrings;G("enrollment",{startTime:ct[0],endTime:ct[1]})};return t().createElement(F.Z,{direction:"vertical"},t().createElement(F.Z,null,t().createElement(l.ZP.Group,{options:Ae,onChange:Je=>{yt(Je.target.value)},value:Oe,optionType:"button",buttonStyle:"solid"})),Oe==="customDeadline"&&t().createElement(F.Z,null,t().createElement(xt.Z,{defaultValue:[J,me],onCustomChange:ze,showTime:!0,customerShowTime:!0,ranges:{["".concat(s("component.recentWeek"))]:[z()(),z()().add(7,"days")],["".concat(s("component.recentMonth"))]:[z()(),z()().add(30,"days")],["".concat(s("component.recentThreeMonth"))]:[z()(),z()().add(3,"months")]},disabledDate:ae,format:"YYYY-MM-DD HH:mm",startEndFormat:{start:"YYYY-MM-DD HH:mm:00",end:"YYYY-MM-DD HH:mm:59"}})))},wa=(0,Y.Z)()(Ua),Xt=e(43859),Ba=(0,Xt.Z)(Te),Na=(0,Xt.Z)(xa),ka=(0,Xt.Z)(wa),zt=e(8466),qt=e.n(zt),ja=e(7584),Gt=e(18329),Wa=e(2396),dt=e(17042),ea=e(38642),gt=e(6793),he=C.Z.confirm,le={labelAlign:"right",labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:17},sm:{span:17}}},xe=ue.Z.Text,et={zaraFlag:(0,ea.UI)("ZARA_H5")},Qe=ee=>{var s=ee.t,P=ee.visible,k=ee.onCancel,G=ee.onOk,$=ee.title,ae=ee.course_id,J=ee.enroll_id,me=(0,D.useRef)(),Ce=(0,D.useState)({}),ne=(0,n.Z)(Ce,2),Oe=ne[0],Ee=ne[1],Ae=(0,D.useState)(!1),yt=(0,n.Z)(Ae,2),ze=yt[0],Je=yt[1],ct=(0,D.useState)("noLimit"),ut=(0,n.Z)(ct,2),ia=ut[0],oa=ut[1];(0,D.useEffect)(()=>{J?$t():Ee({isOpen:!1,enrollment:{startTime:null,endTime:null},enroll:{enroll_audit:"manual_audit",is_enroll_limit:!1,limit_count:""},taskMonitor:{add_task_control:!1,dateRange:{startTime:null,endTime:null}},title:$})},[$]),(0,D.useEffect)(()=>{J&&$t()},[]);var $t=function(){var Be=(0,I.Z)(_().mark(function Ze(){var Ge,Re;return _().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.next=2,(0,dt.ZO)({enroll_id:J});case 2:Ge=Xe.sent,Re=Ge.data.data,Je(Re.status==="open"),Ee((0,r.Z)((0,r.Z)({},Oe),{},{isOpen:Re.status==="open",enrollment:{startTime:Re.enrollment_begin_time?(0,gt.p6)(Re.enrollment_begin_time,"yyyy-MM-dd hh:mm"):null,endTime:Re.enrollment_end_time?(0,gt.p6)(Re.enrollment_end_time,"yyyy-MM-dd hh:mm"):null},enroll:{enroll_audit:Re.enroll_audit,is_enroll_limit:Re.enroll_limit?"open":"close",limit_count:Re.limit_count},taskMonitor:{add_task_control:Re.add_task_control?"open":"close",dateRange:{startTime:(0,gt.p6)(Re.begin_time,"yyyy-MM-dd hh:mm"),endTime:(0,gt.p6)(Re.end_time,"yyyy-MM-dd hh:mm")}},title:$}));case 6:case"end":return Xe.stop()}},Ze)}));return function(){return Be.apply(this,arguments)}}(),ca=function(){var Be=(0,I.Z)(_().mark(function Ze(Ge){var Re,ke,Xe,Ft,Wt,Vt,Yt,vt,pa,ha;return _().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(Re=Ge.enrollment,ke=Ge.enroll,Xe=Ge.taskMonitor,Ft=Xe.add_task_control,Wt=Xe.dateRange,Vt=ke.enroll_audit,Yt=ke.is_enroll_limit,vt=ke.limit_count,pa={enrollment_begin_time:Re.startTime,enrollment_end_time:Re.endTime,enroll_audit:Vt,is_enroll_limit:Yt==="open"?1:0,limit_count:vt||0,add_task_control:Ft,begin_time:Wt.startTime?nt(Wt.startTime,"start"):"",end_time:Wt.endTime?nt(Wt.endTime,"end"):""},!J){rt.next=10;break}return rt.next=7,(0,dt.P7)({enroll_id:J,submitForm:pa});case 7:rt.t0=rt.sent,rt.next=13;break;case 10:return rt.next=12,(0,dt.rO)({course_id:ae,submitForm:pa});case 12:rt.t0=rt.sent;case 13:ha=rt.t0,ha.data.code==="200000"&&(a.default.success(s(J?"trainingProject.applicationSetting.editSuccess":"trainingProject.applicationSetting.success")),G(),k());case 15:case"end":return rt.stop()}},Ze)}));return function(Ge){return Be.apply(this,arguments)}}(),Pt=()=>{ze?me.current.submitForm():k()},nt=(Be,Ze)=>z()(Be).format("YYYY-MM-DD HH:mm:".concat(Ze==="start"?"00":"59")),jt=Be=>{var Ze;if(ia==="noLimit")return Ze;var Ge=nt(new Date,"start");return!Be.startTime||!Be.endTime?Ze=s("validation.dateRange"):z()(Be.endTime).valueOf()<z()(Ge).valueOf()&&(Ze=s("examination.endTimeTips")),Ze},ma=Be=>{var Ze=me.current.state.values.enrollment,Ge=Be.add_task_control,Re=Be.dateRange,ke,Xe=nt(new Date,"start");return Ge==="open"&&(!Re.startTime||!Re.endTime?ke=s("validation.dateRange"):Ze.startTime&&Ze.endTime&&z()(Re.startTime).valueOf()<z()(Ze.startTime).valueOf()?ke=s("learning.validation.startTimeEndTimeError"):Ze.startTime&&Ze.endTime&&z()(Re.endTime).valueOf()<z()(Xe)&&(ke=s("examination.endTimeTips"))),ke},ba=Be=>{var Ze=Be.enroll_audit,Ge=Be.is_enroll_limit,Re=Be.limit_count,ke;return Ze==="automatic_audit"&&Ge==="open"&&!Re&&(ke=s("trainingProject.setLimitText")),ke},Qa=Be=>{var Ze=Be,Ge=G,Re=ke=>{!ke&&ke!==ze&&J?he({title:s("trainingProject.applicationSetting.closeRegister"),icon:t().createElement(N.Z,null),content:s("trainingProject.applicationSetting.closeRegisterTips"),onOk:function(){var Xe=(0,I.Z)(_().mark(function Wt(){var Vt;return _().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.next=2,(0,dt.L6)({enroll_id:J});case 2:Vt=vt.sent,Vt.data.code==="200000"&&a.default.info(s("trainingProject.applyClose")),Je(ke),Ze.onChange(ke),Ge();case 7:case"end":return vt.stop()}},Wt)}));function Ft(){return Xe.apply(this,arguments)}return Ft}(),onCancel(){}}):(Je(ke),Ze.onChange(ke))};return t().createElement(t().Fragment,null,t().createElement(_e.Z,{checked:ze,onChange:Re}),t().createElement("div",null,t().createElement(xe,{type:"secondary",style:{fontSize:"12px"}},s("trainingProject.applicationSetting.description"))))};return t().createElement(Gt.ZP,{title:s("shareInfo.signSetting"),visible:P,onCancel:k,onOk:Pt},t().createElement("div",{className:qt()["application-setting"]},Oe.title&&t().createElement(y.J9,{ref:me,initialValues:Oe,onSubmit:ca,render:Be=>t().createElement(y.l0,null,t().createElement(y.gN,(0,u.Z)({name:"isOpen",label:s("learning.registerSetting"),component:(0,Xt.Z)(Qa)},le)),ze&&t().createElement(t().Fragment,null,t().createElement(y.gN,(0,u.Z)({name:"title",label:s("employeeSummary.projectName"),isPreview:!0,component:ja.Z,defaultValue:Be.values.title,type:"text",validate:Ze=>(0,Wa.QK)(Ze,s("course.courseDetailNamePlaceholder")),title:$},le)),t().createElement(y.gN,(0,u.Z)({component:ka,name:"enrollment",fieldName:"enrollment",label:s("trainingProject.registrationDeadline"),required:!0,normalDisplay:!0,defaultFieldList:Be.values.enrollment,startEndFormat:{start:"YYYY-MM-DD HH:mm:00",end:"YYYY-MM-DD HH:mm:59"},validate:jt,onChangePeriodType:Ze=>{oa(Ze)}},le,{style:{width:"100%"}})),t().createElement(y.gN,(0,u.Z)({component:Ba,name:"enroll",label:s("trainingProject.registrationApproval"),required:!0,normalDisplay:!0,validate:ba},le)),et.zaraFlag?null:t().createElement(y.gN,(0,u.Z)({component:Na,name:"taskMonitor",label:s("trainingProject.addingTaskMonitoring"),normalDisplay:!0},le,{validate:Ze=>ma(Ze),style:{width:"100%"}}))))})))},Ne=(0,Y.Z)()(Qe),lt=e(12739),Dt=ee=>t().createElement(Gt.ZP,{title:ee.t("myExamTask.marking"),visible:ee.visible,footer:null,onCancel:ee.onCancel},t().createElement(lt.Z,ee)),mt=(0,Y.Z)()(Dt),wt=e(57285),Ue=e.n(wt),Me=e(58546),it=e(1164),tt=e(81211),Zt=e(27550),Ot=e(64262),Et=e(10237),Ke=e(37055),we=e(95664),ft=e(36202);class ot extends t().Component{constructor(){super(...arguments);this.columns=[{title:this.props.t("exam.thUserName"),dataIndex:"user_name",key:"user_name",width:88,className:"".concat(this.props.prefixCls,"__namecell")},{title:this.props.t("exam.thSubordinate"),dataIndex:"department_name",key:"department_name",width:160,render:(s,P)=>{var k=P.department_name;return t().createElement(f.Z,{title:k},t().createElement("div",{className:"cl-text-ellipsis",style:{width:160}},k))}},{title:this.props.t("learning.registrationTime"),dataIndex:"create_time",key:"create_time",width:144,render:(s,P)=>{var k=P.create_time;return(0,gt.p6)(k,"yyyy-MM-dd hh:mm:ss")}},{title:this.props.t("learning.approvalResult"),dataIndex:"status",key:"status",width:88,render:(s,P)=>{var k=P.status,G=null,$="#D9DBE4";return k==="wait"?G=this.props.t("learning.waitApproval"):k==="reject"?(G=this.props.t("common.refused"),$="#CF3C3C"):k==="pass"&&(G=this.props.t("common.passed"),$="#8BBF64"),t().createElement("span",{style:{color:$}},G)}},{title:this.props.t("learning.approval"),key:"operate",width:96,render:(s,P)=>{var k=this.props.prefixCls;return t().createElement("div",{className:"".concat(k,"__operate")},t().createElement("span",{className:"".concat(k,"__operate__button"),style:{color:P.status==="pass"||P.assignment?"#BEBEBE":"#516AE6"},onClick:()=>this.handleSingleOperate({type:"pass",record:P})},this.props.t("common.pass")),t().createElement("span",{disabled:P.assignment===!0,className:"".concat(k,"__operate__button"),style:{color:P.status==="reject"||P.assignment?"#BEBEBE":"#516AE6"},onClick:()=>this.handleSingleOperate({type:"reject",record:P})},this.props.t("common.refuse")))}}],this.handleSingleOperate=s=>{var P=s.type,k=s.record;if(!(P===k.status||k.assignment)){var G=this.props.onSingleOperate;G&&G({type:P,record:k})}},this.handleTableChange=s=>{this.props.onTableChange(s)},this.handleSelectChange=(s,P)=>{var k=this.props,G=k.customSelectedRows,$=k.changeSelectedRows,ae=[...G];P?ae.push(s):ae.splice(ae.findIndex(J=>J.user_id===s.user_id),1),$(ae)},this.handleSelectAllChange=(s,P)=>{var k=this.props,G=k.customSelectedRows,$=k.changeSelectedRows,ae=[...G],J=[];if(s)J=[...(0,gt.Cj)(ae.concat(P),"user_id")];else{var me=P.map(Ce=>Ce.user_id);ae.forEach(Ce=>{me.includes(Ce.user_id)&&J.push(Ce)})}$(J)},this.handleRefresh=()=>{this.props.onRefresh()}}render(){var s=this.props,P=s.prefixCls,k=s.list,G=k===void 0?[]:k,$=s.loading,ae=s.paginationParams,J=ae===void 0?{}:ae,me=s.customSelectedRows,Ce=me===void 0?[]:me,ne=s.toolBarRender,Oe=s.headerTitle,Ee=s.t,Ae={selectedRowKeys:Ce.map(ze=>ze.user_id),onSelect:this.handleSelectChange,onSelectAll:this.handleSelectAllChange,getCheckboxProps:ze=>({disabled:ze.assignment===!0})},yt=()=>{var ze=()=>{this.props.changeSelectedRows([])};return t().createElement("a",{onClick:ze},Ee("common.deselectAll"))};return t().createElement("section",{className:P},t().createElement(ft.f,{bordered:!0,columns:this.columns,rowKey:"user_id",rowSelection:Ae,dataSource:G,pagination:!1,loading:$,toolBarRender:ne,headerTitle:Oe,tableAlertOptionRender:yt,tableUUID:"33b6ee86-676c-4c07-88c6-1226077a8104"}),t().createElement(we.Z,{showRenderRefresh:!0,totalNum:J.total,totalPage:J.totalPage,current:J.current,defaultPageSize:J.pageSize,onChange:this.handleTableChange,onRefresh:this.handleRefresh}))}}ot.defaultProps={prefixCls:"apply_management__custom__table__content__table"};var Bt=(0,Y.Z)()(ot),Nt=o.Z.Option,St={getTableList:Ke.ZP.Common.getEnrollmentsList,batchOperate:Ke.ZP.Common.batchOperate,singleOperate:Ke.ZP.Common.singleOperate};class pt extends t().Component{constructor(s){super(s);this.initTableList=()=>{var P=this.props.enrollId;this.setState({tableLoading:!0}),Et.WY.get({url:St.getTableList(P),params:this.state.params}).then(k=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:k.data.list,tableTotal:Number(k.data.total),tablePageTotal:k.data.pages})},300)})},this.handleQueryRowSearch=P=>{this.resetPagination().then(()=>{this.setState(k=>({params:(0,r.Z)((0,r.Z)({},k.params),{},{keyword:P})}),()=>{this.initTableList()})})},this.handleChangePagination=P=>{this.setState(k=>({params:(0,r.Z)((0,r.Z)({},k.params),{},{page_number:P})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(P=>{this.setState(k=>({params:(0,r.Z)((0,r.Z)({},k.params),{},{page_number:1,page_size:10})}),()=>{P()})}),this.handleTreeSelectChange=P=>{this.setState(k=>({params:(0,r.Z)((0,r.Z)({},k.params),{},{department_id:P})}),()=>{this.initTableList()})},this.handleChangeChooseStatus=P=>{this.resetPagination().then(()=>{this.setState(k=>({params:(0,r.Z)((0,r.Z)({},k.params),{},{status:P})}),()=>{this.initTableList()})})},this.handleChangeSelectedRows=P=>{this.setState({customSelectedRows:[...P]})},this.handleBatchOperate=P=>{var k=this.state.customSelectedRows;if(!!k.length){var G=this.props.enrollId,$=St.batchOperate(G),ae=k.map(J=>J.user_id);Et.WY.post({url:$,data:{status:P,user_ids:ae}}).then(()=>{this.initTableList(),this.setState({customSelectedRows:[]})}).catch(J=>{var me=J.response.data,Ce=me.code,ne=me.message;Ce==="enterpriseapi.542004"&&a.default.error(ne)})}},this.handleSingleOperate=P=>{var k=P.type,G=P.record,$=this.props.enrollId,ae=St.singleOperate($);Et.WY.post({url:ae,data:{status:k,user_id:G.user_id}}).then(J=>{J.data.result==="false"?a.default.error(J.data.msg):this.initTableList()}).catch(J=>{var me=J.response.data,Ce=me.code,ne=me.message;Ce==="enterpriseapi.542004"&&a.default.error(ne)})},this.handleRefresh=()=>{this.initTableList()},this.renderLeftRow=()=>{var P=this.props,k=P.prefixCls,G=P.t,$=this.state.selectList;return t().createElement("div",{className:"".concat(k,"__header")},t().createElement("div",{className:"".concat(k,"__header__left")},t().createElement(o.Z,{style:{width:145},allowClear:!0,className:"".concat(k,"__header__select"),placeholder:G("learning.approvalPlaceholder"),optionFilterProp:"children",onChange:this.handleChangeChooseStatus,filterOption:(ae,J)=>J.props.children.toLowerCase().indexOf(ae.toLowerCase())>=0},$.map(ae=>t().createElement(Nt,{key:ae.status,value:ae.status},ae.name))),t().createElement(Ot.Z,{parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,className:"".concat(k,"__header__select"),handleTreeSelectChange:this.handleTreeSelectChange})))},this.renderRightRow=()=>{var P=this.props,k=P.prefixCls,G=P.t;return t().createElement("div",{className:"".concat(k,"__header")},t().createElement(Zt.Z,{showCheckbox:!1,showSearch:!0,showBtn:!1,radioList:[],inputPlaceholder:G("common.searchNamePlaceholder"),onSearch:this.handleQueryRowSearch}))},this.state={params:{status:"",department_id:"",keyword:"",type:1,page_number:1,page_size:10},tableLoading:!0,tableList:[],tableTotal:0,tablePageTotal:0,selectList:[{status:"wait",name:s.t("learning.waitApproval")},{status:"reject",name:s.t("common.refused")},{status:"pass",name:s.t("common.passed")}],customSelectedRows:[]}}componentDidMount(){this.initTableList()}render(){var s=this.props,P=s.prefixCls,k=s.t,G=this.state,$=G.tableTotal,ae=G.tablePageTotal,J=G.tableList,me=G.tableLoading,Ce=G.params,ne=G.customSelectedRows,Oe={total:$,totalPage:ae,current:Ce.page_number,pageSize:Ce.page_size};return t().createElement("div",{className:P},t().createElement("div",{className:"".concat(P,"__operate")},t().createElement("span",{className:"".concat(P,"__operate__button"),style:{color:ne.length?"#516AE6":"#BEBEBE"},onClick:()=>this.handleBatchOperate("pass")},k("learning.batchThrough")),t().createElement("span",{className:"".concat(P,"__operate__button"),style:{color:ne.length?"#516AE6":"#BEBEBE"},onClick:()=>this.handleBatchOperate("reject")},k("learning.batchRefused"))),t().createElement("div",{className:"".concat(P,"__content")},t().createElement(Bt,{loading:me,paginationParams:Oe,customSelectedRows:ne,list:J,changeSelectedRows:this.handleChangeSelectedRows,onTableChange:this.handleChangePagination,onSingleOperate:this.handleSingleOperate,onRefresh:this.handleRefresh,toolBarRender:this.renderRightRow,headerTitle:this.renderLeftRow()})))}}pt.defaultProps={prefixCls:"apply_management__custom__table"};var ta=(0,Y.Z)()(pt);class $e extends t().Component{constructor(){super(...arguments);this.handleCancel=()=>{var s=this.props.onCancel;s()}}render(){var s=this.props,P=s.visible,k=s.t,G=(0,tt.Z)(s,["visible","t"]);return t().createElement(Gt.ZP,{visible:P,className:"study-project-list-sign-up",destroyOnClose:!0,title:k("learning.registrationManagement"),footer:null,onCancel:this.handleCancel},t().createElement(ta,G))}}var kt=(0,Y.Z)()($e),Tt=e(66456),It=e(55313),ya=e(43185),aa=e(53251),st=e(84874),na=e(90734),sa=e(97593);class Mt extends t().Component{constructor(s){super(s);this.onOk=()=>{var P=this.props.t;this.state.fileList.length&&(0,na.yy)().then(k=>{k.data.code===-1?a.default.error(P("lineClass.fileOverdue")):k.data.code===2?a.default.error(P("lineClass.exceptionsParsing")):k.data.code===3?a.default.error(P("lineClass.systemError")):k.data.code===4?a.default.error(P("lineClass.importing")):this.props.onExportSuccess()})},this.onCancel=()=>{this.props.onCancel()},this.onDownloadTemplate=()=>{window.location.href="".concat(Ke.ZP.lineClass.studyProjectTemplate(),"?access_token=").concat(window.localStorage.getItem("token"))},this.beforeUpload=()=>{var P=this.state.modalConfig;P.okButtonProps.disabled=!0,this.setState({modalConfig:P})},this.fileChangeUpload=P=>{var k=this.props.t,G=this.state.modalConfig;if(P.file.status==="done"){P.file.response.result==="false"?(this.setState({errorList:P.file.response.error_msg_list}),a.default.error("".concat(P.file.name," ").concat(k("setting.uploadFail")))):P.file.response.result==="true"&&(G.okButtonProps.disabled=!1,this.setState({modalConfig:G,errorList:[]}),a.default.success("".concat(P.file.name," ").concat(k("setting.uploadSuccess"))));var $=[{key:P.file.uid,file_name:P.file.response.original_file_name,failed_count:P.file.response.failed_count||0}];this.setState({fileList:$})}else P.file.status==="error"&&a.default.error("".concat(P.file.name," ").concat(k("setting.uploadFail")))},this.handleExportResource=()=>{(0,sa.N)({page:"resourceSettings",props:this.props})},this.handleExportUser=()=>{window.location.href="".concat(Ke.ZP.lineClass.userInfoDownload(),"?access_token=").concat(window.localStorage.getItem("token"))},this.state={errorList:[],fileList:[],modalConfig:{size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,okButtonProps:{disabled:!0}},uploadConfig:{name:"file",action:Ke.ZP.lineClass.studyProjectsImport,showUploadList:!1,data:{access_token:window.localStorage.getItem("token")},beforeUpload:this.beforeUpload,onChange:this.fileChangeUpload,accept:".xlsx"}}}componentDidUpdate(s){s.visible!==this.props.visible&&this.props.visible&&this.setState({errorList:[],fileList:[]})}render(){var s=this.state,P=s.uploadConfig,k=s.fileList,G=s.errorList,$=s.modalConfig,ae=this.props,J=ae.prefixCls,me=ae.t,Ce=ae.visible,ne=[{title:me("component.fileName"),dataIndex:"file_name",key:"uuid"},{title:me("component.failedLabel"),dataIndex:"failed_count"}];return t().createElement(Gt.ZP,(0,u.Z)({},$,{title:me("exam.importTemplate"),visible:Ce,onCancel:this.onCancel,onOk:this.onOk}),t().createElement("div",{className:J},t().createElement("div",{className:"import-question-import"},t().createElement(R.Z,{className:"import-question-import-btn",onClick:this.onDownloadTemplate},t().createElement(st.Z,{iconClass:"icon-icon_donwloadx1"}),me("component.downloadTem")),t().createElement(R.Z,{className:"resource-export-btn",onClick:this.handleExportResource},t().createElement(st.Z,{iconClass:"icon-icon_donwloadx1"}),me("lineClass.resourceExport")),t().createElement(R.Z,{onClick:this.handleExportUser},t().createElement(st.Z,{iconClass:"icon-icon_donwloadx1"}),me("lineClass.peopleExport")),t().createElement(aa.Z,(0,u.Z)({className:"import-question-import-btn right"},P),t().createElement(R.Z,{type:"primary"},t().createElement(st.Z,{iconClass:"icon-import"}),me("component.importLabel")))),t().createElement("div",{className:"import-question-table"},t().createElement(It.Z,{dataSource:k,columns:ne,bordered:!0,rowKey:Oe=>Oe.new_file_name,size:"middle",pagination:!1}),G.length>0?t().createElement("div",{className:"show-error-message"},t().createElement("div",{className:"tips"},t().createElement(st.Z,{iconClass:"icon-tishi"}),t().createElement("span",null,me("component.errorTips"),"\uFF1A")),t().createElement("div",{className:"error-content"},G.map((Oe,Ee)=>t().createElement("div",{key:Ee},Oe)))):null)))}}Mt.defaultProps={prefixCls:"additional-record-export"};var X=(0,b.$j)()((0,Y.Z)()(Mt)),Pe=e(78509),He=e(95771),Fe=e(18884),_t=e(404),Le=e(99367),Ka=e(48479),Kt=e(30311),Pa=e(30389),Oa=e(86955),$a=e(43720),Sa=e(72456),De=e(86726),Ct=e(5430),Ta=e(98233),Da=e(63848),at=e(59857),Qt=e(25439),Za=e(14923),da=e(31916),ht=e(12579),We=e.n(ht),Fa=ee=>{var s=ee.t,P=ee.visible,k=ee.onCancel,G=ee.options,$=G===void 0?{}:G,ae=J=>{$[J]&&typeof $[J]=="function"&&$[J]()};return t().createElement(Gt.ZP,{title:"",wrapClassName:We()["guide-dialog"],visible:P,width:550,footer:t().createElement(R.Z,{onClick:k},s("common.cancel")),onCancel:k,destroyOnClose:!0},t().createElement("div",{className:We()["operate-guide"]},t().createElement("div",{className:We().tip},t().createElement(st.Z,{color:"#52C41A ",iconClass:"icon-yikanshipin",size:"16px"}),t().createElement("span",{className:We().title},s("trainingProject.operateGuide.publishSucceed"))),t().createElement("div",{className:We().reminder},s("trainingProject.operateGuide.guideTip"),"\uFF1A"),$.task_assign?t().createElement("div",{className:We()["guide-item"],onClick:()=>{ae("assignAction")}},t().createElement("div",{className:We().image},t().createElement("img",{alt:"",src:"https://oss.coolcollege.cn/1842593698886586368.png"})),t().createElement("div",{className:We().infos},t().createElement("h1",null,s("trainingProject.operateGuide.assignTipTitle")),t().createElement("p",null,s("trainingProject.operateGuide.assignTipSubTitle"))),t().createElement("div",{className:We().arrow},t().createElement(st.Z,{iconClass:"icon-Line_right",size:"8px"}))):null,$.aotomatic_allot?t().createElement("div",{className:We()["guide-item"],onClick:()=>{ae("autoAssignAction")}},t().createElement("div",{className:We().image},t().createElement("img",{alt:"",src:"https://oss.coolcollege.cn/1843003201377406976.png"})),t().createElement("div",{className:We().infos},t().createElement("h1",null,s("trainingProject.operateGuide.autoAssignTipTitle")),t().createElement("p",null,s("trainingProject.operateGuide.autoAssignTipSubTitle"))),t().createElement("div",{className:We().arrow},t().createElement(st.Z,{iconClass:"icon-Line_right",size:"8px"}))):null,$.enroll?t().createElement("div",{className:We()["guide-item"],onClick:()=>{ae("enrollAction")}},t().createElement("div",{className:We().image},t().createElement("img",{alt:"",src:"https://oss.coolcollege.cn/1843003246453592064.png"})),t().createElement("div",{className:We().infos},t().createElement("h1",null,s("trainingProject.operateGuide.enrollTipTitle")),t().createElement("p",null,s("trainingProject.operateGuide.enrollTipSubTitle"))),t().createElement("div",{className:We().arrow},t().createElement(st.Z,{iconClass:"icon-Line_right",size:"8px"}))):null))},Ia=(0,Y.Z)()(Fa);function ra(ee){var s=ee.data,P=ee.type,k=ee.t,G;return P==="delete"?G=(0,gt.ZT)(k("personnelDevelope.deletePostInfo"),k("common.delete")):G=(0,gt.ZT)(k("personnelDevelope.deletePostInfo"),k("course.cancelRelease")),t().createElement(t().Fragment,null,t().createElement("div",null,G),t().createElement("div",null,k("common.post"),"\uFF1A",s))}var la=C.Z.confirm,Ma=o.Z.Option,La=c.Z.RangePicker,Va=ee=>{var s=ee.t,P=(0,De.V9)("studyProject",ee.modules),k={qrCodeFlag:(0,ea.eY)("STUDY_PROJECT_QRCODE_BTN")},G={zaraFlag:(0,ea.UI)("ZARA_H5")},$=se.parse(V.m8.location.search),ae=$.study_project,J=$.fromWorkScope,me=(0,D.useState)({page_number:1,page_size:10,status:"",keyword:ae||"",classify_id:"",begin_time:"",end_time:"",scope:J||"all",department_id:"",time_type:"createTime"}),Ce=(0,n.Z)(me,2),ne=Ce[0],Oe=Ce[1],Ee=(0,D.useState)([]),Ae=(0,n.Z)(Ee,2),yt=Ae[0],ze=Ae[1],Je=(0,D.useState)({disabled_count:0,draft_count:0,normal_count:0,total_count:0}),ct=(0,n.Z)(Je,2),ut=ct[0],ia=ct[1],oa=(0,D.useState)({visible:!1,enrollId:""}),$t=(0,n.Z)(oa,2),ca=$t[0],Pt=$t[1],nt=(0,D.useState)({visible:!1,detail:{}}),jt=(0,n.Z)(nt,2),ma=jt[0],ba=jt[1],Qa=(0,D.useState)({from:"",visible:!1,detail:{},title:""}),Be=(0,n.Z)(Qa,2),Ze=Be[0],Ge=Be[1],Re=(0,D.useState)({visible:!1,courseId:"",from:"trainingProjectList"}),ke=(0,n.Z)(Re,2),Xe=ke[0],Ft=ke[1],Wt=(0,D.useState)([]),Vt=(0,n.Z)(Wt,2),Yt=Vt[0],vt=Vt[1],pa=(0,D.useState)({visible:!1,projectId:[],initialParams:{}}),ha=(0,n.Z)(pa,2),Lt=ha[0],rt=ha[1],kn=(0,D.useState)({title:s("trainingProject.push")+s("trainingProject.trainProject"),visible:!1,projectId:""}),nn=(0,n.Z)(kn,2),jn=nn[0],sn=nn[1],Wn=(0,D.useState)({projectName:"",planId:"",visible:!1}),rn=(0,n.Z)(Wn,2),va=rn[0],ln=rn[1],Kn=(0,D.useState)({visible:!1,resourceType:"study_project",resourceId:"",resourceName:""}),on=(0,n.Z)(Kn,2),$n=on[0],cn=on[1],Fn=(0,D.useState)({visible:!1,course_id:"",title:"",enroll_id:""}),un=(0,n.Z)(Fn,2),Ja=un[0],dn=un[1],Vn=(0,D.useState)({visible:!1,title:s("common.share"),isProjectShare:!0,tip:"",option:{scene:"",flag:"study_project"}}),mn=(0,n.Z)(Vn,2),Xa=mn[0],pn=mn[1],Yn=(0,D.useState)({visible:!1,modalTitle:s("eTouch.scheduleRemind"),ruleTip:t().createElement("div",null,t().createElement("div",null,s("eTouch.repeatRuleTip")),t().createElement("div",null,s("eTouch.repeatRuleTip1")),t().createElement("div",null,s("eTouch.repeatRuleTip2")),t().createElement("div",null,s("eTouch.repeatRuleTip3"))),label:{switchTitle:s("eTouch.scheduleRemind"),loopCycle:s("eTouch.loopExecution"),endLoop:s("eTouch.endLoopPushLabel"),loopType:s("eTouch.loopType")},scenes:"reminder",type:"studyProject",period_type:"study_project_reminder"}),hn=(0,n.Z)(Yn,2),ga=hn[0],vn=hn[1],Hn=(0,D.useState)({visible:!1,scenes:"timedTask",type:"studyProject",modalTitle:s("eTouch.repeatAssignmentLatest"),ruleTip:s("eTouch.repeatRule"),period_type:"study_project_timed"}),gn=(0,n.Z)(Hn,2),Ea=gn[0],En=gn[1],zn=(0,D.useState)(!1),fn=(0,n.Z)(zn,2),Gn=fn[0],qa=fn[1],Qn=(0,D.useState)({entityType:"study_project",entityId:"",createUserId:"",visible:!1}),_n=(0,n.Z)(Qn,2),Cn=_n[0],yn=_n[1],Jn=(0,D.useState)(!1),Pn=(0,n.Z)(Jn,2),On=Pn[0],fa=Pn[1],Xn=(0,D.useState)({}),Sn=(0,n.Z)(Xn,2),en=Sn[0],qn=Sn[1],es=(0,D.useState)(!1),Tn=(0,n.Z)(es,2),ts=Tn[0],tn=Tn[1],_a=(0,D.useRef)(),ua=null;(0,D.useEffect)(()=>{ee.dispatch({type:"publicVariable/getHasMenusPermissions",payload:{flag:"TrainingCamp"}})},[]),(0,D.useEffect)(()=>{Rt()},[ne]),(0,D.useEffect)(()=>()=>{ua&&ua.exit()},[]);var as=()=>{tn(!1)},ns=p=>{var E=p.node;(0,dt.Nk)({classify_id:E.id,project_ids:Yt.join(",")}).then(ye=>{tn(!1),ye.data.message==="success"&&(vt([]),a.default.success(s("personal.setCourseClassifySuccess")),Rt())})},Rt=()=>{var p=(0,r.Z)((0,r.Z)({},ne),{},{date_type:ne.begin_time&&ne.end_time?ne.date_type:null});_a.current&&_a.current.load(p)},ss=p=>{var E=p.data,ye=E.extend,pe=ye===void 0?{}:ye,je=E.list;ia({disabled_count:pe?pe.disabled_count:0,draft_count:pe?pe.draft_count:0,normal_count:pe?pe.normal_count:0,total_count:pe?pe.total_count:0}),Ws(je),Ks();var Ye=se.parse(V.m8.location.search),be=Ye.from,ge=be===void 0?"":be;if(ge==="draft"){var ve=JSON.parse(sessionStorage.getItem("guideInfo"));if(sessionStorage.removeItem("guideInfo"),(0,De.H3)("task_assign",P)||(0,De.H3)("aotomatic_allot",P)||(0,De.H3)("enroll",P)){fa(!0),qn(ve);var bt=se.parse(V.m8.location.search);delete bt.from,V.m8.replace("".concat(V.m8.location.pathname,"?").concat(se.stringify(bt)))}else a.default.success(s("trainingProject.addEdit.publishSuccess"))}else if(ge==="create"){a.default.success(s("trainingProject.addEdit.publishSuccess"));var Ht=se.parse(V.m8.location.search);delete Ht.from,V.m8.replace("".concat(V.m8.location.pathname,"?").concat(se.stringify(Ht)))}},rs=p=>(p.page_size!=ne.page_size&&Oe((0,r.Z)((0,r.Z)({},ne),{},{page_size:p.page_size})),(0,dt.wk)((0,r.Z)((0,r.Z)({},ne),p))),ls=(p,E)=>t().createElement(A.Z,{onClick:ye=>Ve(ye,E)},p.map(ye=>{var pe=ye.name,je=ye.disabled,Ye=ye.key;return t().createElement(A.Z.Item,{style:{textAlign:"left"},key:Ye,disabled:je},pe)})),is=function(){var p=(0,I.Z)(_().mark(function E(ye){var pe,je,Ye,be;return _().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return pe=ee.dispatch,je=ee.userInfo.id,Ye={user_id:je},ve.next=4,(0,dt.Vq)({taskId:ye,params:Ye});case 4:be=ve.sent,pe({type:"subsidyCourseInfo/saveIsSubsidyCourse",payload:{isSubsidyCourse:be.data.is_subsidy_course}});case 6:case"end":return ve.stop()}},E)}));return function(ye){return p.apply(this,arguments)}}(),Dn=p=>{var E=p.record,ye=p.isMultiple,pe=ye===void 0?!1:ye,je=E.id;pe?rt((0,r.Z)((0,r.Z)({},Lt),{},{visible:!0,projectId:Yt.map(Ye=>Ye.replace(/normal|disabled|draft/,"")),initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[]}}}})):(localStorage.isSubsidyEnterprise==="true"&&is(je),(0,dt.B7)(je).then(Ye=>{var be=Ye.data,ge=be.is_all,ve=be.department_list,bt=be.post_list,Ht=be.group_list,Ca=ee.isSubsidyCourse,an=Ye.data.user_list,Vs=Ca&&localStorage.isSubsidyEnterprise==="true";Vs&&(an=an.filter(Ys=>Ys.id!=="10")),rt((0,r.Z)((0,r.Z)({},Lt),{},{visible:!0,projectId:[je],initialParams:{employeeRange:{rangeType:ge,rangeList:{dept:ve||[],post:bt||[],group:Ht||[],user:an||[]}}}}))}))},Zn=()=>{var p=ee.dispatch;rt((0,r.Z)((0,r.Z)({},Lt),{},{visible:!1,projectId:""})),p({type:"subsidyCourseInfo/saveIsSubsidyCourse",payload:{isSubsidyCourse:!1}})},os=p=>{var E=p.isAll,ye=p.departmentIds,pe=p.groupIds,je=p.postIds,Ye=p.userIds,be=p.qy_we_chat_vo,ge=ee.t,ve=Lt.projectId.length>1,bt={is_all:E,user_ids:Ye,department_ids:ye,group_ids:pe,post_ids:je,qy_we_chat_vo:be};ve&&(bt.project_ids=Lt.projectId.join(","));var Ht=ve?(0,dt.Hg)({data:bt}):(0,dt.s4)({data:bt,projectId:Lt.projectId[0]});Ht.then(Ca=>{Ca.data.update==="true"&&(a.default.success(ge("setting.setUpSucceed")),ve&&vt([]),Rt())}),Zn()},Ve=(p,E)=>{switch(p.key){case"project_data":V.m8.push(Ta.uk.monitorDetail({id:E.course_id,projectId:E.id,origin:"list"}));break;case"edit":if(E.subsidy_project)return a.default.info(s("gzSubsidy.noEdit")),!1;E.status==="normal"||E.status==="disabled"?C.Z.confirm({title:s("trainingProject.confirmEdit"),content:s("trainingProject.editContent"),onOk:()=>{V.m8.push("/training/learning/project/add?id=".concat(E.id,"&origin=list"))}}):V.m8.push("/training/learning/project/add?id=".concat(E.id,"&origin=list"));break;case"taskAssignment":ln(pe=>(0,r.Z)((0,r.Z)({},pe),{},{projectName:E.title,planId:E.id,visible:!0}));break;case"autoAssign":cn(pe=>(0,r.Z)((0,r.Z)({},pe),{},{resourceId:E.course_id,resourceName:E.title,visible:!0}));break;case"campManagement":V.m8.push("/knowledgeBase/learningResources/studyProject/aiTrain?projectId=".concat(E.id));break;case"apply":dn((0,r.Z)((0,r.Z)({},Ja),{},{visible:!0,course_id:E.course_id,title:E.title,enroll_id:E.enroll_id}));break;case"push":sn({visible:!0,projectId:E.id});break;case"share":pn((0,r.Z)((0,r.Z)({},Xa),{},{visible:!0,option:{scene:"projectId=".concat(E.course_id,"&flag=study_project"),flag:"study_project"}}));break;case"status":if(E.status==="draft")return V.m8.push("/training/learning/project/add?id=".concat(E.id,"&origin=list")),!1;var ye=()=>{(0,dt.eZ)({isChecked:E.status!=="normal",id:E.id}).then(()=>{a.default.success(E.status==="normal"?s("course.cancelPublishSuccess"):s("common.releaseSuccess")),Rt()}).catch(pe=>{console.error(pe)})};E.status==="normal"?la({title:s("setting.remind"),content:s("trainingProject.unpublish"),onOk(){ye()}}):ye();break;case"copy":V.m8.push("/training/learning/project/add?id=".concat(E.id,"&origin=list&type=copy")),a.default.success(s("exam.copySucceed"));break;case"visible":Dn({record:E});break;case"delete":la({title:s("trainingProject.deleteListTip"),content:s("trainingProject.deleteListContent"),icon:t().createElement(Q.Z,{style:{color:"red"}}),onOk(){(0,dt.kM)(E.id).then(pe=>{pe.data.code==="542031"?C.Z.warning({title:s("common.tip"),content:ra({data:pe.data.data,type:"delete",t:s}),okText:s("course.know")}):a.default.success(s("common.deleteSuccess")),vt([]),Rt()}).catch(pe=>{console.error(pe)})}});break;case"editApprovals":yn((0,r.Z)((0,r.Z)({},Cn),{},{visible:!0,entityType:"study_project",entityId:E.id,createUserId:E.create_user}));break;case"schedule":vn(pe=>(0,r.Z)((0,r.Z)({},pe),{},{planId:E.course_id,title:E.title,isOpenLoop:!0,visible:!0}));break;case"setLoop":En(pe=>(0,r.Z)((0,r.Z)({},pe),{},{planId:E.course_id,title:E.title,isOpenLoop:E.circular_enabled==="true"||E.circular_enabled===!0,visible:!0}));break;default:break}},cs=()=>{var p=[{name:s("common.all"),value:"all"},{name:s("workbench.myCreation"),value:"my"},{name:s("workbench.myCharge"),value:"responsible_by_me"}];return t().createElement(o.Z,{value:ne.scope,style:{width:245,marginLeft:16},onChange:us},p.map(E=>t().createElement(Ma,{key:E.value,value:E.value,disabled:E.value==="responsible_by_me"},E.name)))},us=p=>{Oe((0,r.Z)((0,r.Z)({},ne),{},{scope:p}))},In={normal:s("courseManage.published"),normalBadge:"#3FC929",disabled:s("courseManage.unPublished"),disabledBadge:"#EF8F2C",draft:s("personal.draft"),draftBadge:"#A6A6A6"},ds={query:p=>rs(p),columns:[{title:s("employeeSummary.projectName"),key:"title",fixed:ee.appType==="wx_app"?!1:"left",width:186,render:(p,E)=>{var ye=E.id,pe=E.circular_enabled;return t().createElement(it.Z,{to:"/training/trainingProject/manageView?id=".concat(ye,"&from=manage&tab=1&origin=list"),target:"self"},t().createElement(f.Z,{placement:"topLeft",title:p},t().createElement("div",{className:"".concat(Ue()["title-container"]," name-content-list")},t().createElement("span",{className:"".concat(Ue().title," cl-text-ellipsis")},p||"--"),(pe==="true"||pe===!0)&&t().createElement("span",{className:Ue()["label-tip"]},s("examination.loop")))))}},{title:s("learning.learningProjectAddCategory"),dataIndex:"classify_name",key:"classify_name",width:100,render:(p,E)=>t().createElement(at.Z,{maxWidth:"160px",name:E.classify_name,full_name:E.classify_path_name})},{title:s("lineClass.organizationDepartment"),key:"department_name",width:170,render:(p,E)=>{var ye=E.department_name,pe=E.department_name_all;return t().createElement(f.Z,{placement:"topLeft",title:pe},t().createElement("div",{className:"cl-text-ellipsis ".concat(ye&&Ue()["department_name-box"])},ye||"--"))}},{title:s("live.publishStatus"),key:"status",width:110,render:p=>t().createElement(h.Z,{color:In["".concat(p,"Badge")],text:In[p]})},{title:s("learning.learningProjectRegisterNumber"),key:"enroll_user_count",width:82,render:(p,E)=>E.need_enroll==="true"?E.enroll_manage==="true"&&E.enroll_user_count>0?t().createElement(Kt.Z,{name:E.enroll_user_count,onClick:()=>{_s(E)}}):E.enroll_user_count:"--"},{title:s("training.training_content"),key:"stage_course_num",width:88,render:(p,E)=>p>0?t().createElement(Kt.Z,{name:E.stage_course_num,onClick:()=>ys(E)}):"--"},{title:s("lineClass.lecturerNum"),key:"lecturer_num",width:88,render:(p,E)=>p>0?t().createElement(Kt.Z,{name:E.lecturer_num,onClick:()=>Os(E)}):"--"},{title:s("lineClass.lecturerAveScore"),key:"lecturer_ave_score",width:116,render:(p,E)=>p>0?t().createElement(Kt.Z,{name:p,onClick:()=>Ss(E)}):"--"},{title:s("myExamTask.marking"),key:"pending_count",width:104,render:(p,E)=>p?t().createElement(Kt.Z,{name:p,onClick:()=>{Ds(E.course_mapping_list,E)}}):"--"},{title:s("lineClass.totalTrainingTime"),key:"total_training_time",width:122,render:p=>"".concat(p).concat(s("common.minutes"))},{title:s("lineClass.onlineTrainingTime"),key:"online_training_time",width:136,render:p=>"".concat(p).concat(s("common.minutes"))},{title:s("lineClass.offlineTrainingTime"),key:"offline_training_time",width:136,render:p=>"".concat(p).concat(s("common.minutes"))},{title:ee.t("common.creator"),key:"create_user_name",width:116,render:p=>t().createElement(f.Z,{placement:"topLeft",title:p},t().createElement("div",{className:"cl-text-ellipsis",style:{width:116}},p||"--"))},{title:s("common.createTime"),key:"create_time",sorter:(p,E)=>p.create_time-E.create_time,render:p=>(0,gt.p6)(p,"yyyy-MM-dd hh:mm"),width:177},{title:s("trainingProject.updateOne"),key:"update_user_name",width:106,render:p=>t().createElement(f.Z,{placement:"topLeft",title:p},t().createElement("div",{className:"cl-text-ellipsis",style:{width:106}},p||"--"))},{title:s("common.updateTime"),key:"update_time",sorter:(p,E)=>p.update_time-E.update_time,render:p=>(0,gt.p6)(p,"yyyy-MM-dd hh:mm"),width:147},{title:s("common.operate"),key:"operate1",fixed:"right",render:(p,E)=>{var ye=[{name:s("common.data"),visible:(0,De.H3)("project_data",P),key:"project_data",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"project_data"},E)}},{name:s("common.edit"),visible:(0,De.H3)("edit",P),disabled:String(E.is_visit_looker)==="true",key:"edit",handleClick:ge=>{var ve=ge.key;String(E.is_visit_looker)!=="true"&&Ve({key:ve||"edit"},E)}},{name:s("common.release"),visible:(0,De.H3)("publish/cancel_publish",P)&&(E.status==="disabled"||E.status==="draft"),key:"status",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"status"},E)}},{name:s("trainingProject.taskAssignment"),visible:E.status==="normal"&&(0,De.H3)("task_assign",P),key:"taskAssignment",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"taskAssignment"},E)}},{name:s("autoAssign.autoAssign"),visible:E.status==="normal"&&(0,De.H3)("aotomatic_allot",P),key:"autoAssign",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"autoAssign"},E)}},{name:s("eTouch.repeatAssignmentLatest"),key:"setLoop",visible:(0,De.H3)("set_cycle_plan",P),disabled:E.status!=="normal",disabledTip:s("examination.publishOperateTip"),width:"50px",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"setLoop"})}},{name:s("learning.manageAiTrain"),visible:E.status==="normal"&&(0,De.H3)("camp_management",P)&&ee.qyShield==="false"&&ee.appType==="e_app",key:"campManagement",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"campManagement"},E)}},{name:s("trainingProject.apply"),visible:E.status==="normal"&&(0,De.H3)("enroll",P),key:"apply",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"apply"},E)}},{name:s("common.copy"),visible:(0,De.H3)("copy",P),key:"copy",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"copy"},E)}},{name:s("common.visibleRange"),visible:(0,De.H3)("set_visible",P),key:"visible",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"visible"},E)}},{name:s("trainingProject.pushNotifications"),visible:(0,De.H3)("push_remind",P)&&E.status==="normal",key:"push",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"push"},E)}},{name:s("authentication.editApprovals"),visible:E.total_operation_count>0,key:"editApprovals",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"editApprovals"},E)}},{name:s("common.share"),visible:(0,De.H3)("qr_code",P)&&E.status==="normal"&&k.qrCodeFlag&&ee.appType!=="fs_app",key:"share",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"share"},E)}},{name:s("learning.setScheduleRemind"),visible:(0,De.H3)("progress_notice",P)&&E.status==="normal",key:"schedule",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"schedule"},E)}},{name:s("courseManage.cancelPublished"),visible:(0,De.H3)("publish/cancel_publish",P)&&E.status==="normal",key:"status",handleClick:ge=>{var ve=ge.key;Ve({key:ve||"status"},E)}},{name:s("common.delete"),key:"delete",visible:(0,De.H3)("delete",P),disabled:E.status==="published"||String(E.is_visit_looker)==="true",handleClick:ge=>{var ve=ge.key;E.status!=="published"&&Ve({key:ve||"delete"},E)}}],pe=2,je=ye.filter(ge=>ge.visible),Ye=[],be=[];return je.length>2?(be=[...je.slice(0,pe)],Ye=[...je.slice(pe)]):be=je,t().createElement("div",{className:Ue()["table-cell-action"]},be.map(ge=>{var ve=ge.name,bt=ge.disabled,Ht=ge.handleClick,Ca=ge.key;return t().createElement("span",{key:Ca,className:"".concat(Ue()["mutual-button"]," ").concat(bt?Ue().disabled:"cl-pointer"),onClick:Ht},ve)}),Ye.length>0&&t().createElement(Z.Z,{overlay:ls(Ye,E)},t().createElement("span",{className:"cl-pointer operate-content-list"},s("common.more"),t().createElement(U.Z,null))))}}].filter(p=>p.visible!==!1)},ms=(p,E)=>{E[1]&&E[0]?Oe((0,r.Z)((0,r.Z)({},ne),{},{begin_time:E[0],end_time:E[1]})):Oe((0,r.Z)((0,r.Z)({},ne),{},{begin_time:null,end_time:null}))},Mn=ut.disabled_count,ps=ut.draft_count,Ln=ut.normal_count,Rn=ut.total_count,bn=(0,ea.UI)("STUDY_PROJECT_PERSONAL_DRAFT")?[{name:"".concat(s("common.all"),"(").concat(Rn,")"),value:""},{name:"".concat(s("courseManage.published"),"(").concat(Ln,")"),value:"normal"},{name:"".concat(s("courseManage.unPublished"),"(").concat(Mn,")"),value:"disabled"}]:[{name:"".concat(s("common.all"),"(").concat(Rn,")"),value:""},{name:"".concat(s("courseManage.published"),"(").concat(Ln,")"),value:"normal"},{name:"".concat(s("courseManage.unPublished"),"(").concat(Mn,")"),value:"disabled"},{name:"".concat(s("personal.draft"),"(").concat(ps,")"),value:"draft"}],hs=p=>{ze(p),Oe((0,r.Z)((0,r.Z)({},ne),{},{classify_id:[...p].pop()}))},vs=()=>t().createElement(F.Z,{size:16,wrap:!0,className:Ue()["list-header-filter-top"]},t().createElement(B.Z.Group,{compact:!0},t().createElement(o.Z,{defaultValue:"create",style:{width:120},onChange:Es},t().createElement(Ma,{value:"create"},s("examination.createTime"))),t().createElement(La,{disabled:[!1,!1],defaultValue:[null,null],format:"YYYY-MM-DD",onChange:ms,ranges:{["".concat(s("component.lastWeek"))]:[z()().subtract(7,"day"),z()()],["".concat(s("component.lastMonth"))]:[z()().subtract(30,"day"),z()()],["".concat(s("component.lastThreeMonth"))]:[z()().subtract(3,"month"),z()()]}})),t().createElement(Da.Z,{onChange:hs,value:yt,showLabel:!1}),t().createElement(Ot.Z,{className:"cl-search-normal-width",parentId:"",placeholder:s("lineClass.selectDept"),checkable:!1,asyncLoad:!0,treeSelect:!0,handleTreeSelectChange:gs}),cs(),t().createElement(Ka.Z,{onSearch:p=>{Oe((0,r.Z)((0,r.Z)({},ne),{},{keyword:p}))},placeholder:s("trainingProject.listSearchHolder"),width:272,maxLength:400})),gs=p=>{Oe((0,r.Z)((0,r.Z)({},ne),{},{department_id:p}))},Es=p=>{Oe((0,r.Z)((0,r.Z)({},ne),{},{date_type:p}))},fs=p=>{Oe((0,r.Z)((0,r.Z)({},ne),{},{status:p.target.value}))},_s=p=>{var E=p.enroll_manage,ye=p.enroll_id;E==="true"&&Pt((0,r.Z)((0,r.Z)({},ca),{},{visible:!0,enrollId:ye}))},Cs=()=>{Pt((0,r.Z)((0,r.Z)({},ca),{},{visible:!1,enrollId:""}))},ys=p=>{p.stage_course_num!==0&&ba((0,r.Z)((0,r.Z)({},ma),{},{visible:!0,detail:p}))},Ps=()=>{ba((0,r.Z)((0,r.Z)({},ma),{},{visible:!1,detail:{}}))},Os=p=>{p.lecturer_num!==0&&Ge({visible:!0,detail:p,title:s("component.lecturer"),from:"lecturerNum"})},Ss=p=>{p.lecturer_ave_score!==0&&Ge({visible:!0,detail:p,title:s("lecturerPage.lecturerStar"),from:"lecturerAveScore"})},Ts=()=>{Ge({visible:!1,detail:{},title:"",from:""})},Ds=function(){var p=(0,I.Z)(_().mark(function E(ye,pe){var je;return _().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(!(ye.length===1&&pe.reading_operation!=="has_operation")){be.next=3;break}return a.default.warning(s("examination.cannotMark")),be.abrupt("return");case 3:if(ye.length!==1){be.next=10;break}return be.next=6,(0,Ta.Md)(ye[0].course_type===15,(0,r.Z)((0,r.Z)({},ye[0]),{},{id:ye[0].course_id,status:"pending",from:"projectNew"}));case 6:je=be.sent,ye[0].course_type===15?it.Z.targetTo({path:je}):V.m8.push(je),be.next=11;break;case 10:Ft((0,r.Z)((0,r.Z)({},Xe),{},{visible:!0,courseId:pe.course_id,from:"trainingProjectList"}));case 11:case"end":return be.stop()}},E)}));return function(ye,pe){return p.apply(this,arguments)}}(),Zs=()=>{Ft({visible:!1})},Is=()=>{Ft((0,r.Z)((0,r.Z)({},Xe),{},{visible:!1}))},Ms=()=>{qa(!0)},Ls=()=>{var p=ee.t;qa(!1),a.default.success(p("lineClass.importingWait")),Rt()},Rs=()=>{var p=ne.keyword,E=ne.classify_id,ye=ne.begin_time,pe=ne.end_time,je=ne.time_type,Ye=ne.status,be=ne.scope,ge=ne.department_id,ve="?access_token=".concat(window.localStorage.getItem("token"),"&keyword=").concat(p,"&classify_id=").concat(E||"")+"&begin_time=".concat(ye,"&end_time=").concat(pe,"&time_type=").concat(je)+"&status=".concat(Ye,"&scope=").concat(be,"&department_id=").concat(ge);(0,sa.N)({page:"studyProject",props:ee,query:ve})},bs=p=>{var E=p.key;E==="range"?Dn({record:{},isMultiple:!0}):tn(!0)},As=()=>{var p=Yt.length===0;return t().createElement(A.Z,{onClick:bs},t().createElement(A.Z.Item,{key:"classify",disabled:p},p?t().createElement(f.Z,{title:s("trainingProject.checkProjectTip")},s("trainingProject.resourceClass")):s("trainingProject.resourceClass")),t().createElement(A.Z.Item,{key:"range",disabled:p},p?t().createElement(f.Z,{title:s("trainingProject.checkProjectTip")},s("trainingProject.visibleRange")):s("trainingProject.visibleRange")))},xs=()=>{var p=[{typeText:ee.t("study.newProject"),contentText:ee.t("newUserGuidance.createStudyProjectIntro"),buttonText:ee.t("lecturerPage.know")}],E=se.parse(V.m8.location.search),ye=E.renderGuide,pe=ye===void 0?!1:ye;return t().createElement(F.Z,{split:t().createElement(O.Z,{type:"vertical",style:{height:"20px"}}),size:16},(0,De.H3)("set_visible",P)&&t().createElement(Z.Z,{overlay:As},t().createElement(R.Z,null,s("common.batchOperation"),t().createElement(U.Z,null))),t().createElement(Sa.Z,{showBtn:(0,De.H3)("add",P),actionText:ee.t("common.add"),tabLink:"/training/learning/project/add",newPage:!1,popOverProps:p,renderGuide:pe,onDownload:Rs,showRendeExtraBtn:!1,showDownloadBtn:!0,showImportBtn:(0,De.H3)("add",P),onImport:Ms,target:"self",rowReverse:!0}))},Us=()=>t().createElement(F.Z,null,t().createElement(R.Z,{onClick:()=>{vt([])}},s("component.cancelSelect"))),ws=(0,D.useState)(""),An=(0,n.Z)(ws,2),Aa=An[0],Bs=An[1],Ns=(0,D.useState)(""),xn=(0,n.Z)(Ns,2),Un=xn[0],ks=xn[1],js=(0,D.useState)(""),wn=(0,n.Z)(js,2),Bn=wn[0],Ws=wn[1],Ks=()=>{Aa!==!1&&((0,da.YQ)({userId:ee.userId,type:12}).then(p=>{Bs(p)}),(0,da.YQ)({userId:ee.userId,type:17}).then(p=>{ks(p)}))};(0,D.useEffect)(()=>{_a.current&&Aa&&$s(),_a.current&&Un&&!Aa&&Fs()},[Aa,Un]);var $s=()=>{var p=[];(0,De.H3)("add",P)&&p.push({title:s("trainingProject.createProject"),element:document.getElementById("create-project-button"),intro:s("trainingProject.guideView.add"),position:"bottom"}),Bn.length&&(p.push({title:s("trainingProject.guideView.viewDetail"),element:document.querySelector(".name-content-list"),intro:s("trainingProject.guideView.viewDetailRule"),position:"bottom"}),(0,De.H3)("task_assign",P)&&p.push({title:s("trainingProject.taskAssignment"),element:document.querySelector(".operate-content-list"),intro:s("trainingProject.guideView.taskAssign"),position:"bottom"}),(0,De.H3)("enroll",P)&&p.push({title:s("trainingProject.apply"),element:document.querySelector(".operate-content-list"),intro:s("trainingProject.guideView.signUp"),position:"bottom"})),p.length&&(ua=(0,j.Z)("#pro-wrap"),ua.setOptions({prevLabel:s("evaluation.prev"),nextLabel:s("evaluation.next"),doneLabel:s("trainingProject.guideView.know"),exitOnOverlayClick:!1,disableInteraction:!0,hidePrev:!0,steps:p}).start(),Nn())},Nn=()=>{var p=document.querySelectorAll(".introjs-overlay");if(p&&p.length>1)for(var E=1,ye=p.length;E<ye;E++){var pe=p[E];pe.parentElement.removeChild(pe)}},Fs=()=>{var p=[];Bn.length&&(0,De.H3)("progress_notice",P)&&p.push({title:s("learning.setScheduleRemind"),element:document.querySelector(".operate-content-list"),intro:s("learning.setScheduleRemindTip"),position:"bottom"}),p.length&&(ua=(0,j.Z)("#pro-wrap"),ua.setOptions({prevLabel:s("evaluation.prev"),nextLabel:s("evaluation.next"),doneLabel:s("trainingProject.guideView.know"),exitOnOverlayClick:!1,disableInteraction:!0,hidePrev:!0,steps:p}).start(),Nn())};return t().createElement(t().Fragment,null,t().createElement("div",{className:Ue()["list-header"]},t().createElement("div",{className:Ue()["list-header-left"]},t().createElement(l.ZP.Group,{defaultValue:bn[0],value:ne.status,onChange:fs},bn.map(p=>t().createElement(l.ZP.Button,{key:p.value,value:p.value},p.name)))),t().createElement("div",{className:Ue()["list-header-right"]},xs())),t().createElement(F.Z,{className:Ue()["list-header-filter"]}),t().createElement(Le.Z,{className:Ue()["list-table"],uniKey:"studyProject",uuid:"bcb80210-09ed-43f4-a189-486987b3b7a6",ref:_a,queryParams:ds,pagination:!0,headerTitle:vs(),scroll:{scrollToFirstRowOnChange:!0,x:"max-content",y:"100%"},rowSelection:{selectedRowKeys:Yt,onChange:p=>{vt(p)}},footerRightRender:Us,loadComplete:ss,tableAlertRender:()=>!1,tableAlertOptionRender:()=>!1}),t().createElement(X,{visible:Gn,onExportSuccess:Ls,onCancel:()=>{qa(!1)}}),t().createElement(kt,(0,u.Z)({},ca,{onCancel:Cs})),t().createElement(Pe.Z,(0,u.Z)({},ma,{title:s("training.training_content"),sourceType:"study_project",onCancel:Ps})),t().createElement(He.Z,(0,u.Z)({},Ze,{sourceType:"study_project",onCancel:Ts})),Xe.visible&&t().createElement(mt,(0,u.Z)({},Xe,{onCancel:Zs,onOk:Is})),Lt.visible&&t().createElement(Pa.Z,(0,u.Z)({},Lt,{title:s("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:s("component.chooseVisibleScope")},isLoading:!Lt.visible,onCancel:Zn,onCreate:os,size:"large"})),t().createElement(Oa.Z,(0,u.Z)({},jn,{onCancel:()=>{sn({visible:!1,projectId:""})}})),Ja.visible&&t().createElement(Ne,(0,u.Z)({},Ja,{onCancel:()=>{dn({visible:!1,course_id:"",title:"",enroll_id:""})},onOk:Rt})),t().createElement(Fe.Z,(0,u.Z)({},Xa,{onCancel:()=>{pn((0,r.Z)((0,r.Z)({},Xa),{},{visible:!1}))}})),va.visible&&t().createElement($a.Z,(0,u.Z)({wholeLoad:!0,isTaskAssignment:!0,periodOptions:["timeFrame"],customerShowTime:!0},va,{title:s("trainingProject.taskAssignment"),onOperateSuccessCallback:()=>{Rt()},apiUrl:G.zaraFlag?Ct.bS.assign_custom_task({planId:va.planId}):Ct.bS.assign_task({planId:va.planId}),zaraEvaluateUrl:Ct.bS.assignCustomEvaluate({planId:va.planId}),onCancel:()=>{ln(p=>(0,r.Z)((0,r.Z)({},p),{},{visible:!1,projectName:""}))}})),t().createElement(Qt.Z,(0,u.Z)({},$n,{onClose:()=>{cn(p=>(0,r.Z)((0,r.Z)({},p),{},{visible:!1}))}})),t().createElement(_t.Z,(0,u.Z)({},Cn,{isHasTutor:!0,closeApprovalList:()=>{yn({visible:!1})}})),Ea.visible&&t().createElement(Za.Z,(0,u.Z)({},Ea,{getAssignSettingApiUrl:Ct.OB.examTask.getLastLoopTaskSetting({planId:Ea.planId}),closeSettingApiUrl:Ct.OB.examTask.closeLoopTask({planId:Ea.planId}),loopTaskAssignApiUrl:Ct.OB.examTask.loopTaskAssign({planId:Ea.planId}),onOperateSuccessCallback:()=>{Rt()},onCancel:()=>{En(p=>(0,r.Z)((0,r.Z)({},p),{},{visible:!1}))}})),ga.visible&&t().createElement(Za.Z,(0,u.Z)({},ga,{getAssignSettingApiUrl:Ct.OB.examTask.getLastLoopTaskSetting({planId:ga.planId}),closeSettingApiUrl:Ct.OB.examTask.closeLoopTask({planId:ga.planId}),loopTaskAssignApiUrl:Ct.OB.examTask.loopTaskAssign({planId:ga.planId}),onOperateSuccessCallback:()=>{Rt()},onCancel:()=>{vn(p=>(0,r.Z)((0,r.Z)({},p),{},{visible:!1}))}})),On&&t().createElement(Ia,{visible:On,options:{task_assign:(0,De.H3)("task_assign",P),aotomatic_allot:(0,De.H3)("aotomatic_allot",P),enroll:(0,De.H3)("enroll",P),assignAction:()=>{fa(!1),Ve({key:"taskAssignment"},en)},autoAssignAction:()=>{fa(!1),Ve({key:"autoAssign"},en)},enrollAction:()=>{fa(!1),Ve({key:"apply"},en)}},onCancel:()=>{fa(!1)}}),t().createElement(Me.Z,{visible:ts,title:s("personal.chooseClassify"),onCancel:as,onOk:ns}))},Ya=ee=>({modules:ee.user.modules,userId:ee.user.id||window.localStorage.getItem("uid"),isAdmin:ee.user.isAdmin,appType:ee.user.appType,qyShield:ee.user.qyShield}),Jt=(0,b.$j)(Ya)((0,Y.Z)()(Va)),Ha=e(11449),Ra=e(4408),za=ee=>{var s=ee.t;return t().createElement(t().Fragment,null,t().createElement("div",{id:"pro-wrap",style:{position:"relative"}},t().createElement(Ha.Z,{pageContainerParams:{header:{title:s("trainingProject.trainProject")}},pageTitle:s("trainingProject.trainProject")},t().createElement(Ra.Z,{title:s("trainingProject.trainProject")}),t().createElement("div",{style:{backgroundColor:"#fff"}},t().createElement(Jt,null)))))},Ga=(0,Y.Z)()(za)},12739:function(Ie,oe,e){"use strict";var D=e(33565),t=e(57361),Y=e(88986),u=e(22385),T=e(31097),l=e(9754),L=e.n(l),R=e(12924),W=e.n(R),O=e(91768),K=e(76651),F=e(28216),te=e(57068),B=e(15337),M=e.n(B),Z=e(1164),d=e(99367),h=e(45796),i=e(30311),f=e(98233),I=e(38642),m=e(35085),A=r=>{var S=r.t,a=r.from,n=r.courseId,w=r.projectInfo,c=w===void 0?{}:w,g=(0,R.useRef)(),o=(0,F.v9)(U=>{var V=U.advancedSetting;return{themeColor:V.themeColor}}),v=o.themeColor,C={query:U=>x(U),columns:[{title:S("exam.testName"),dataIndex:"title",width:300,key:"id",render:(U,V)=>W().createElement(T.Z,{title:V.title},W().createElement("div",{style:{color:v,width:300},className:"cl-text-ellipsis cl-pointer",onClick:()=>{j(V)}},V.title))},{title:"".concat(S("exam.examinee"),"/").concat(S("exam.passed"),"/").concat(S("exam.failed")),dataIndex:"exam_count",key:"exam_count",width:180,visible:a!=="trainingProjectList",render:(U,V)=>{var fe="".concat(V.exam_count,"/").concat(V.qualified_count,"/").concat(V.unqualified_count);return V.exam_count&&a!=="trainingProjectList"?W().createElement(i.Z,{name:fe,onClick:()=>j(V)}):fe}},{title:S("exam.absent"),width:130,dataIndex:"unexam_count",key:"unexam_count",visible:a!=="trainingProjectList"},{title:S("exam.toBeGraded"),width:120,dataIndex:"pending_count",key:"pending_count",render:(U,V)=>V.pending_count>0&&V.reading_operation==="has_operation"&&a!=="trainingProjectList"?W().createElement(i.Z,{name:V.pending_count,onClick:()=>_(V)}):V.pending_count},{title:"".concat(S("common.joinRate"),"/").concat(S("common.examPassRate"),"/").concat(S("common.missRate")),dataIndex:"participation_rate",key:"participation_rate",width:240,visible:a!=="trainingProjectList",render:(U,V)=>W().createElement("div",null,W().createElement("span",null,V.participation_rate),"/",W().createElement("span",null,V.pass_rate),"/",W().createElement("span",null,V.absence_rate))},{title:S("exam.operate"),key:"operate",width:localStorage.getItem("lng")==="en_us"?210:100,fixed:"right",buttons:[{visible:()=>a!=="trainingProjectList",name:S("common.monitor"),handleClick:U=>j(U)},{name:S("trainingProject.markingPapers"),disabled:U=>!(U.pending_count>0&&U.reading_operation==="has_operation"),handleClick:U=>_(U)},{name:S("common.share"),visible:U=>a!=="trainingProjectList"&&c&&c.study_project&&c.study_project.status==="normal"&&(U.new_exam==="true"||U.new_exam===!0),handleClick:U=>Q(U)}]}].filter(U=>U.visible!==!1)},x=U=>{var V=a==="trainingProjectList"?n:K.m8.location.query.id;return(0,h.LP)((0,Y.Z)((0,Y.Z)({},U),{},{id:V,is_pending:a==="trainingProjectList"}))},_=function(){var U=(0,t.Z)(L().mark(function V(fe){var z,b;return L().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(fe.pending_count!==0){q.next=2;break}return q.abrupt("return");case 2:return z=a==="trainingProjectList"?n:K.m8.location.query.id,q.next=5,(0,f.Md)(fe.new_exam,{id:fe.id,taskId:z,status:"pending",from:"projectNew"});case 5:b=q.sent,fe.new_exam?Z.Z.targetTo({path:b}):K.m8.push(b);case 7:case"end":return q.stop()}},V)}));return function(fe){return U.apply(this,arguments)}}(),j=function(){var U=(0,t.Z)(L().mark(function V(fe){var z,b,se,q,_e;return L().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return z=K.m8.location.query,b=z.id,se=z.projectId,q=a==="trainingProjectList"?n:b,ue.next=4,(0,f.OV)(fe.new_exam,(0,Y.Z)((0,Y.Z)({},fe),{},{taskId:q,projectId:se,from:"project",taskType:"project"}));case 4:_e=ue.sent,K.m8.push(_e);case 6:case"end":return ue.stop()}},V)}));return function(fe){return U.apply(this,arguments)}}(),Q=function(){var U=(0,t.Z)(L().mark(function V(fe){var z,b,se,q,_e,Se,ue,y,N,ce,re,ie;return L().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=fe.title,b=fe.id,se=K.m8.location.query.projectId,H.next=4,(0,I.Kb)((0,m.Wl)({planId:b}));case 4:if(q=H.sent,_e=(0,D.Z)(q,2),Se=_e[1],ue=te.stringify({source:"studyProject",type:"exam",id:se,course_id:b}),y={title:z,from:"exam",path:(0,I.jr)({pc_url:"/share-transit?".concat(ue),mobile_url:"/share-transit?".concat(ue),pc_type:"student",mobile_type:"h5"})},!Se){H.next=15;break}if(N=Se.data,ce=N.code,re=N.data,ie=re.exam_duration,!(ce==="200000"&&ie)){H.next=15;break}return W().$share.show({detail:(0,Y.Z)((0,Y.Z)({},y),{},{site1:{label:S("exam.examTime"),value:"".concat(ie).concat(S("pk.min"))}})}),H.abrupt("return");case 15:W().$share.show({detail:y});case 16:case"end":return H.stop()}},V)}));return function(fe){return U.apply(this,arguments)}}();return W().createElement("div",{className:M().exam},W().createElement(d.Z,{uniKey:"Exam",uuid:"a3f069b5-4c7c-43f0-bfce-02102c0c55bc",ref:g,queryParams:C,pagination:!0}))};oe.Z=(0,O.Z)()(A)},45796:function(Ie,oe,e){"use strict";e.d(oe,{PN:function(){return O},xu:function(){return F},Zj:function(){return te},Cz:function(){return B},yN:function(){return M},yI:function(){return Z},y$:function(){return d},MZ:function(){return h},CS:function(){return i},dC:function(){return f},LP:function(){return m},fH:function(){return r},EH:function(){return a},gm:function(){return w},FG:function(){return c},tr:function(){return g},U1:function(){return v},wf:function(){return C},CG:function(){return x},Jp:function(){return _},FD:function(){return Q},BT:function(){return V},v1:function(){return z},QM:function(){return se},cH:function(){return _e},Z:function(){return Se},gu:function(){return ue}});var D=e(88986),t=e(57361),Y=e(9754),u=e.n(Y),T=e(5430),l=e(10237),L=e(37055),R=e(38642),W={zaraFlag:(0,R.UI)("ZARA_H5")};function O(y,N){return K.apply(this,arguments)}function K(){return K=(0,t.Z)(u().mark(function y(N,ce){var re,ie;return u().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return re=W.zaraFlag?T.lk.projectCustomUserMonitor(N):T.lk.projectUserMonitor(N),H.next=3,l.WY.get({url:re,params:(0,D.Z)((0,D.Z)({},ce),{},{sort:ce.sort?ce.sort==="ascend"?"asc":"desc":""})});case 3:if(ie=H.sent,ie.status!==200){H.next=6;break}return H.abrupt("return",{data:{code:"200000",data:(0,D.Z)((0,D.Z)({},ie.data.monitor_list),{},{summarizing:ie.data.summarizing}),info:ie.data}});case 6:return H.abrupt("return",ie);case 7:case"end":return H.stop()}},y)})),K.apply(this,arguments)}function F(y,N){var ce=W.zaraFlag?T.lk.taskCustomDelay(y):T.lk.taskDelay(y);return l.WY.post({url:ce,data:N})}function te(y,N){var ce=T.lk.taskDelayAll(y);return l.WY.post({url:ce,data:N})}function B(y,N){var ce=W.zaraFlag?T.lk.taskUserCustomDelete(y):T.lk.taskUserDelete(y);return l.WY.post({url:ce,data:N})}function M(y){var N=T.lk.sendUrgeStudyMessage(y);return l.WY.get({url:N})}function Z(y,N){var ce=L.ZP.StudyTaskList.coursesAmountList(y);return l.WY.get({url:ce,params:N})}function d(y){var N=y.projectId,ce=y.page_number,re=y.page_size;return l.WY.get({url:T.lk.getProjectTaskCourseListUrl(N),params:{page_number:ce,page_size:re}})}function h(y){var N=y.train_type,ce=y.sourceId,re=y.page_number,ie=y.page_size,de=y.sourceType;return l.WY.get({url:T.lk.getOfflineListBySourceId(ce),params:{source_type:de,page_number:re,page_size:ie,train_type:N}})}function i(y){var N=y.sourceId,ce=y.sourceType;return l.WY.get({url:L.ZP.lineClass.getOfflineListCountBySourceId(N),params:{source_type:ce}})}function f(y){return I.apply(this,arguments)}function I(){return I=(0,t.Z)(u().mark(function y(N){var ce,re,ie,de;return u().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return ce=N.id,re=N.page_number,ie=N.page_size,Te.next=3,l.WY.get({url:T.lk.questionnaireMonitor(ce),params:{page_number:re,page_size:ie}});case 3:if(de=Te.sent,de.status!==200){Te.next=6;break}return Te.abrupt("return",{data:{code:"200000",data:(0,D.Z)({},de.data)}});case 6:return Te.abrupt("return",de);case 7:case"end":return Te.stop()}},y)})),I.apply(this,arguments)}function m(y){return A.apply(this,arguments)}function A(){return A=(0,t.Z)(u().mark(function y(N){var ce,re,ie,de,H;return u().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return ce=N.id,re=N.page_number,ie=N.page_size,de=N.is_pending,qe.next=3,l.WY.get({url:T.lk.examMonitor(ce),params:{page_number:re,page_size:ie,is_pending:de}});case 3:if(H=qe.sent,H.status!==200){qe.next=6;break}return qe.abrupt("return",{data:{code:"200000",data:(0,D.Z)({},H.data)}});case 6:return qe.abrupt("return",H);case 7:case"end":return qe.stop()}},y)})),A.apply(this,arguments)}function r(y){return S.apply(this,arguments)}function S(){return S=(0,t.Z)(u().mark(function y(N){var ce,re,ie;return u().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return ce=N.entity_type,re=N.entity_id,H.next=3,l.WY.post({url:T.lk.getWorksData(),data:{entity_type:ce,entity_id:re}});case 3:if(ie=H.sent,ie.status!==200){H.next=6;break}return H.abrupt("return",{data:{code:"200000",data:{list:ie.data.operations}}});case 6:return H.abrupt("return",ie);case 7:case"end":return H.stop()}},y)})),S.apply(this,arguments)}function a(y,N){return n.apply(this,arguments)}function n(){return n=(0,t.Z)(u().mark(function y(N,ce){var re,ie,de;return u().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return re=ce.source_type,ie=ce.course_id,Te.next=3,l.WY.get({url:T.lk.getAttendanceData(N),params:{source_type:re,course_id:ie}});case 3:if(de=Te.sent,de.status!==200){Te.next=6;break}return Te.abrupt("return",{data:{code:"200000",data:{list:de.data.data}}});case 6:return Te.abrupt("return",de);case 7:case"end":return Te.stop()}},y)})),n.apply(this,arguments)}function w(y){return l.WY.get({url:T.lk.getStuAttendanceInfo(y),params:{}})}function c(y){return l.WY.get({url:T.lk.evaluationDetail(y),params:{}})}function g(y,N){return o.apply(this,arguments)}function o(){return o=(0,t.Z)(u().mark(function y(N,ce){var re,ie;return u().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,l.WY.get({url:T.lk.getEvaluationList(N),params:ce});case 2:if(re=H.sent,re.status!==200){H.next=7;break}return ie=re.data.list,ie&&ie.length>0?re.data.list.forEach(Te=>{Te.key=Te.user_id}):re.data.list=[],H.abrupt("return",{data:{code:"200000",data:(0,D.Z)({},re.data)}});case 7:case"end":return H.stop()}},y)})),o.apply(this,arguments)}function v(y,N){return l.WY.get({url:T.lk.shouldViewReportByUserId(y,N)})}function C(y,N){var ce=T.lk.urgeRemind(y);return l.WY.post({url:ce,data:{userIds:N||[]}})}function x(y){var N=T.lk.urgeImprove(y);return l.WY.get({url:N})}function _(y,N){return j.apply(this,arguments)}function j(){return j=(0,t.Z)(u().mark(function y(N,ce){var re,ie;return u().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return re=T.lk.getStudyProjectPaymentList(N),H.next=3,l.WY.get({url:re,params:ce});case 3:if(ie=H.sent,ie.status!==200){H.next=6;break}return H.abrupt("return",{data:{code:"200000",data:ie.data}});case 6:return H.abrupt("return",ie);case 7:case"end":return H.stop()}},y)})),j.apply(this,arguments)}function Q(y,N){return U.apply(this,arguments)}function U(){return U=(0,t.Z)(u().mark(function y(N,ce){var re,ie,de;return u().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return re=L.ZP.StudyTaskMonitor.getAssessData(N),Te.next=3,l.WY.get({url:re,params:ce});case 3:if(ie=Te.sent,de=ie.data,String(de.code)!=="0"){Te.next=7;break}return Te.abrupt("return",{data:{code:"200000",data:de.data}});case 7:return Te.abrupt("return",ie);case 8:case"end":return Te.stop()}},y)})),U.apply(this,arguments)}function V(y,N){return fe.apply(this,arguments)}function fe(){return fe=(0,t.Z)(u().mark(function y(N,ce){var re,ie;return u().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return re=T.lk.getLiveClassList(N),H.next=3,l.WY.get({url:re,params:ce});case 3:if(ie=H.sent,ie.data.code!==2e5){H.next=6;break}return H.abrupt("return",{data:{code:"200000",data:ie.data.data}});case 6:return H.abrupt("return",ie);case 7:case"end":return H.stop()}},y)})),fe.apply(this,arguments)}function z(y,N){return b.apply(this,arguments)}function b(){return b=(0,t.Z)(u().mark(function y(N,ce){var re;return u().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return re=T.lk.taskCertificate(N),de.next=3,l.WY.post({url:re,data:ce});case 3:return de.abrupt("return",de.sent);case 4:case"end":return de.stop()}},y)})),b.apply(this,arguments)}function se(y,N){return q.apply(this,arguments)}function q(){return q=(0,t.Z)(u().mark(function y(N,ce){var re;return u().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return re=T.lk.getPracticeAnalysisData(N),de.abrupt("return",l.WY.get({url:re,params:ce}));case 2:case"end":return de.stop()}},y)})),q.apply(this,arguments)}function _e(y){var N=L.ZP.OrgDialog.getUserByName();return l.WY.get({url:N,params:y})}function Se(y){var N=L.ZP.OrgDialog.getAllWeChatUsers(y.courseId);return l.WY.get({url:N,params:y})}function ue(y){var N=T.lk.saveGroupChatIdByqy();return l.WY.post({url:N,params:y})}},17042:function(Ie,oe,e){"use strict";e.d(oe,{B:function(){return W},bH:function(){return O},NU:function(){return K},lc:function(){return F},QA:function(){return te},x8:function(){return B},wA:function(){return M},wk:function(){return Z},eZ:function(){return h},kM:function(){return i},B7:function(){return f},Vq:function(){return I},Hg:function(){return m},s4:function(){return A},L6:function(){return r},rO:function(){return S},ZO:function(){return a},P7:function(){return n},Nk:function(){return w}});var D=e(57361),t=e(9754),Y=e.n(t),u=e(10237),T=e(37055),l=e(5430),L=e(38642),R={zaraFlag:(0,L.UI)("ZARA_H5")};function W(c){var g=R.zaraFlag?l.m1.addProjectWithEvaluate():l.m1.addProject();return u.WY.post({url:g,data:c})}function O(c){var g=R.zaraFlag?l.m1.editProjectWithEvaluate(c.sign):l.m1.editProject(c.sign);return u.WY.post({url:g,data:c})}function K(c){var g=l.m1.getProjectInfo(c);return u.WY.get({url:g})}function F(c){var g=l.m1.getAssessmentProjectInfo(c);return u.WY.get({url:g})}function te(c){var g=c.project_id;return u.WY.get({url:T.ZP.ahLaboratory.getLabSelectList(),params:{project_id:g}})}function B(){return u.WY.get({url:T.ZP.ahLaboratory.getLaboratoryList()})}function M(c){return u.WY.post({url:T.ZP.ahLaboratory.addLabSelectList(),data:{project_lab_mapping_list:c}})}function Z(c){return d.apply(this,arguments)}function d(){return d=(0,D.Z)(Y().mark(function c(g){var o,v,C;return Y().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return o=l.bS.getTrainingProjectList(),_.next=3,u.WY.get({url:o,params:g});case 3:return v=_.sent,C={},v.status===200&&(C={data:{code:"200000",data:v.data}}),_.abrupt("return",C);case 7:case"end":return _.stop()}},c)})),d.apply(this,arguments)}function h(c){var g=c.isChecked,o=c.id,v={type:g?"normal":"disabled"},C=R.zaraFlag?l.ZP.StudyProjectList.changeCustomStatus(o):l.ZP.StudyProjectList.changeStatus(o);return u.WY.post({url:C,data:v})}function i(c){var g=R.zaraFlag?l.bS.deleteCustomTrainingProject({id:c}):l.bS.deleteTrainingProject({id:c});return u.WY.post({url:g})}function f(c){var g=l.ZP.StudyProjectList.queryVisible(c);return u.WY.get({url:g})}function I(c){var g=c.taskId,o=c.params,v=l.ZP.subsidyGz.subsidyCourseSetting(g);return u.WY.get({url:v,params:o})}function m(c){var g=c.data,o=l.ZP.StudyProjectList.multipleSetScope();return u.WY.post({url:o,data:g})}function A(c){var g=c.projectId,o=c.data,v=l.ZP.StudyProjectList.setViewScope(g);return u.WY.post({url:v,data:o})}function r(c){var g=c.enroll_id,o=l.bS.enrollment.close({enroll_id:g});return u.WY.post({url:o})}function S(c){var g=c.course_id,o=c.submitForm,v=l.bS.enrollment.open({course_id:g});return u.WY.post({url:v,data:o})}function a(c){var g=c.enroll_id,o=l.bS.enrollment.get({enroll_id:g});return u.WY.get({url:o})}function n(c){var g=c.enroll_id,o=c.submitForm,v=l.bS.enrollment.edit({enroll_id:g});return u.WY.post({url:v,data:o})}function w(c){var g=l.ZP.StudyProjectList.multipleSetClassify();return u.WY.post({url:g,data:c})}},67479:function(Ie,oe,e){"use strict";e.d(oe,{D:function(){return R},W:function(){return O}});var D=e(57361),t=e(9754),Y=e.n(t),u=e(57068),T=e(31916),l=e(38642),L=e(5430);function R(K){return W.apply(this,arguments)}function W(){return W=(0,D.Z)(Y().mark(function K(F){var te,B,M,Z,d;return Y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,T.uH)();case 3:if(te=i.sent,te!=="old"){i.next=6;break}return i.abrupt("return",!1);case 6:return i.next=8,(0,T.fP)(F);case 8:if(B=i.sent,M=B.data,Z=M.code,d=M.data,Z!=="200000"){i.next=14;break}return i.abrupt("return",d.exam_type==="new");case 14:i.next=20;break;case 16:return i.prev=16,i.t0=i.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",i.t0),i.abrupt("return",!1);case 20:case"end":return i.stop()}},K,null,[[0,16]])})),W.apply(this,arguments)}var O={examing:function(){var K=(0,D.Z)(Y().mark(function te(B){var M,Z,d;return Y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return M="",Z=B.pageFrom==="ding_myExamTask"?(0,l.lz)(L.ZP.enterpriseId,"student"):"",i.next=4,R(B.exam_id);case 4:return d=i.sent,d?M="".concat(Z,"/training/examination/new-exam/examing?").concat(u.stringify(B)):M="".concat(Z,"/training/examination/exam/personal?").concat(u.stringify(B)),i.abrupt("return",M);case 7:case"end":return i.stop()}},te)}));function F(te){return K.apply(this,arguments)}return F}(),parse:K=>"/training/examination/new-exam/parse?".concat(u.stringify(K)),examData:K=>"/training/examination/exam-data?exam_id=".concat(K.exam_id,"&task_id=").concat(K.task_id),marking:K=>"/training/examination/new-exam/marking?".concat(u.stringify(K))}},98233:function(Ie,oe,e){"use strict";e.d(oe,{nn:function(){return L},OV:function(){return O},Md:function(){return F},uk:function(){return l}});var D=e(57361),t=e(9754),Y=e.n(t),u=e(57068),T=e(67479),l={edit:B=>"/training/learning/project/add?".concat(u.stringify(B)),monitorDetail:B=>{var M=B.id,Z=B.projectId,d=B.origin,h=B.tab;return"/training/trainingProject/monitor?id=".concat(M,"&projectId=").concat(Z,"&origin=").concat(d,"&tab=").concat(h)},traineeView:B=>"/training/trainingProject/traineeView?".concat(u.stringify(B)),manageView:B=>"/training/trainingProject/manageView?".concat(u.stringify(B)),previewView:B=>"/training/trainingProject/previewView?".concat(u.stringify(B))};function L(B){var M=B.origin,Z=B.search,d=Z===void 0?"":Z,h={project:"/knowledgeBase/project/examination/newPlan/detail?".concat(d),learning:"/training/learning/examination/newPlan/detail?".concat(d),employee:"/training/employee/examination/newPlan/detail?".concat(d),exam:"/training/examination/newPlan/detail?".concat(d)};return h[M]||"/training/examination/newPlan/detail?".concat(d)}function R(B,M){if(B){var Z=u.stringify({id:M.id,title:M.title,origin:M.taskType,taskId:M.projectId});return L({origin:M.taskType,search:Z})}var d=u.stringify({id:M.id,taskId:M.taskId,from:M.from,taskType:M.taskType,projectId:M.projectId});return"/training/learning/project/monitor/exam?".concat(d)}function W(B,M){return B?T.W.marking({exam_id:M.id,status:M.status,markScene:"manage"}):"/training/examination/plan/testPaper?id=".concat(M.id,"&from=").concat(M.from,"&taskId=").concat(M.taskId)}function O(){return K.apply(this,arguments)}function K(){return K=(0,D.Z)(Y().mark(function B(){var M,Z,d,h=arguments;return Y().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(M=h.length>0&&h[0]!==void 0?h[0]:"unKnow",Z=h.length>1?h[1]:void 0,M!=="unKnow"){f.next=7;break}return f.next=5,(0,T.D)(Z.id);case 5:return d=f.sent,f.abrupt("return",R(d,Z));case 7:return f.abrupt("return",R(M,Z));case 8:case"end":return f.stop()}},B)})),K.apply(this,arguments)}function F(){return te.apply(this,arguments)}function te(){return te=(0,D.Z)(Y().mark(function B(){var M,Z,d,h=arguments;return Y().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(M=h.length>0&&h[0]!==void 0?h[0]:"unKnow",Z=h.length>1?h[1]:void 0,M!=="unKnow"){f.next=7;break}return f.next=5,(0,T.D)(Z.id);case 5:return d=f.sent,f.abrupt("return",W(d,Z));case 7:return f.abrupt("return",W(M,Z));case 8:case"end":return f.stop()}},B)})),te.apply(this,arguments)}}}]);
