(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[2512],{26096:function(oe,J,e){"use strict";var A=e(30887),g=e(99210),X=e(62029),c=e(22385),N=e(31097),z=e(12924),p=e.n(z),m=e(71967),T=e.n(m),f=e(1164),K=D=>D.type==="more"?D.disabled?p().createElement(g.Z.Item,(0,X.Z)({},D,{key:D.key,disabled:!0}),D.tooltip?p().createElement(N.Z,{title:D.tooltip},p().createElement("p",{className:"cl-dropdown-menuitem"},D.title)):p().createElement("p",{className:"cl-dropdown-menuitem"},D.title)):D.link?p().createElement(g.Z.Item,(0,X.Z)({},D,{key:D.key}),p().createElement(f.Z,{to:D.link},p().createElement("p",{className:"cl-dropdown-menuitem"},D.title))):p().createElement(g.Z.Item,(0,X.Z)({},D,{key:D.key}),p().createElement("p",{className:"cl-dropdown-menuitem",onClick:D.click},D.title)):D.disabled?D.tooltip?p().createElement(p().Fragment,{key:D.key},p().createElement(N.Z,{title:D.tooltip},p().createElement("span",{className:"".concat(T().pointer," ").concat(T().disabled)},D.title))):p().createElement(p().Fragment,{key:D.key},p().createElement("span",{className:"".concat(T().pointer," ").concat(T().disabled)},D.title)):D.link?p().createElement(p().Fragment,{key:D.key},p().createElement(f.Z,{to:D.link},p().createElement("span",{className:"cl-pointer ".concat(T().pointer)},D.title))):p().createElement(p().Fragment,{key:D.key},p().createElement("span",{className:"cl-pointer ".concat(T().pointer),onClick:D.click},D.title));J.Z=K},54624:function(oe,J,e){"use strict";e.d(J,{Z:function(){return H}});var A=e(47673),g=e(4107),X=e(12924),c=e.n(X),N=e(91768),z=e(80991),p=e(54549),m=e(49101),T=e(62029),f=e(59250),K=e(13013),D=e(30887),w=e(99210),V=e(43185),$=e(53251),B=e(57663),Q=e(71577),o=e(88986),b=e(57361),L=e(34792),s=e(48086),n=e(9754),r=e.n(n),d=e(28216),l=e(73566),t=e(49146),v=e(74262),u=e(40938),E=e(6793),_=e(54531),P=e(10237),Z=e(84874),W=e(1164),F=e(37055),Y=e(10780),ee=e(43967),se=e(76466),ne=5,ce=S=>({uploaderList:S.uploader.list,uploadSucceedItem:S.uploader.uploadSucceedItem,uploadComponentType:S.uploader.uploadComponentType,appType:S.user.appType,dingUserId:S.user.account,corpId:S.user.corpId}),ue=S=>{if(S.icon)return S.icon;var C=S.name.split(".").pop(),y=F.e1[C];return y||"iconf-matter-picture"};class ie extends c().Component{constructor(C){var y;super(C);y=this,this.handleBeforeUpload=a=>{var h=this.props,I=h.t,M=h.value;if(a.type.indexOf("image")<0)return s.default.warning(I("component.stageAddFileFormatTip")),!1;this.props.onChange(M.concat(a))},this.handleOnChange=a=>{var h=a.file,I=this.props,M=I.value,U=I.t;h.status==="done"?this.props.onChange(M.filter(x=>x.id!==h.id).concat(h.response.data)):h.status==="error"&&(s.default.error("".concat(h.name," ").concat(U("course.courseDetailCoverFailure"))),this.props.onChange(M.filter(x=>x.id!==h.id)))},this.handleRemove=a=>{var h=this.props.value;this.props.onChange(h.filter(I=>I.id!==a.id))},this.handleUploadFile=()=>{this.setState({showFileSelector:!0})},this.handleSelectedCancel=()=>{this.setState({showFileSelector:!1})},this.handleSelectedAttachment=a=>{var h=this.props,I=h.t,M=h.value,U=M.map(k=>k.id),x=a.filter(k=>!U.includes(k.id)),q=M.length;if(x.length>ne-q){s.default.warning((0,E.ZT)(I("component.stageAddFileTip"),5));return}this.handleSelectedCancel(),x=x.map(k=>(k.size=k.data.size,k)),this.props.onChange(M.concat(x))},this.handleChooseFiles=a=>{var h=this.props,I=h.t,M=h.value,U=h.uploaderList,x=h.uploadComponentId,q=h.notLibrary,k=h.hasZip,j=k===void 0?"":k,ae=(0,ee.Y5)(U);if(a.target.files.length+ae.length+M.length>5){s.default.warning((0,E.ZT)(I("component.stageAddFileTip"),5));return}this.props.dispatch({type:"uploader/chooseFiles",payload:{choosedFiles:a.target.files,dispatch:this.props.dispatch,uploadComponentType:x,notLibrary:q,hasZip:j==="true"}}),a.target.value=null,a.target.files=null},this.handlePreview=a=>{var h=this.props.t;if(!dd.version&&a.biz_type===3){s.default.info(h("practiceOperation.dingFileTip"));return}if(a.biz_type!==3){this.handlePreviewSystemFile(a);return}var I=F.ZP.DingSpaceId.getSpaceId(),M={corpId:this.props.corpId,userId:this.props.account,fileids:a.url,timeStamp:Date.parse(new Date)};P.WY.get({url:I,params:M}).then(U=>{U.data.code===0?this.ddSpacePreview(a):s.default.info(U.data.msg)}).catch(U=>{s.default.error(U.data)})},this.handlePreviewDingFile=(0,b.Z)(r().mark(function a(){var h,I,M,U,x,q,k,j;return r().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return h=y.props,I=h.corpId,M=h.dingUserId,U=h.value,x=h.t,re.next=3,(0,_.Cz)({corpId:I,userId:M});case 3:q=re.sent,k=te=>{(0,t.jz)(te,3).then(le=>{if(le.data.code===0){var de=(0,t.GY)(le.data,y.props);de&&de.length>0&&y.props.onChange(U.concat(de))}}).catch(le=>console.error(le))},j=te=>{s.default.warn("".concat(x("learning.dingSelectError"),": ").concat(JSON.parse(te)))},(0,_.yZ)({space:{spaceId:q,corpId:I,max:5},types:["space"],onSuccess:k,onFail:j});case 7:case"end":return re.stop()}},a)})),this.dealWatchType=a=>{var h=F.Yq.findIndex(ae=>a.type.toLowerCase().includes(ae))>-1,I=a.content_type.indexOf("video")>-1,M=F.Ss.indexOf(a.content_type)>-1,U=a.type.indexOf("image")>-1||a.type.indexOf("picture")>-1||a.content_type.indexOf("image")>-1||a.content_type.indexOf("picture")>-1,x=a.content_type.indexOf("html")>-1,q=a.content_type.indexOf("scorm")>-1,k=a.content_type.indexOf("h5")>-1,j="";return k?j="article":h?j="doc":I||M?j="video":U?j="image":x?j="html":q&&(j="scorm"),j},this.handlePreviewSystemFile=a=>{var h=this.state.previewInfo,I=this.dealWatchType(a),M=F.Ss.indexOf(a.content_type)>-1;if(I==="scorm"){var U=a.url.split("//"),x=U[1].split("/"),q=[U[0],x[0]].join("//"),k="".concat(q,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(a.url));W.Z.targetTo({path:k,isExternalLink:!0});return}if(I==="article"){var j=a.content_type,ae=a.url,re=j==="h5/link";re?W.Z.targetTo({path:ae,isExternalLink:!0}):W.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(a.id)});return}var te={mode:"preview",watchType:I};I==="doc"?Object.assign(te,{resourceInfo:{type:"",docType:a.type,aliUrl:a.path,url:a.url,docTitle:a.name,playId:a.videoId||a.video_id,storageType:a.storage_type}}):I==="image"?Object.assign(te,{resourceInfo:{url:a.url,playId:a.videoId||a.video_id,storageType:a.storage_type}}):I==="html"?Object.assign(te,{resourceInfo:{url:a.url}}):Object.assign(te,{resourceInfo:{source:{FD:a.url,OD:a.path},originUrl:a.url,contentType:M?"mp3":a.type,playId:a.videoId||a.video_id,storageType:a.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:te,previewInfo:(0,o.Z)((0,o.Z)({},h),{},{title:a.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var a=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,o.Z)((0,o.Z)({},a),{},{visible:!1})})},this.ddSpacePreview=a=>{var h={spaceId:a.path,fileId:a.url,fileName:a.name,fileSize:a.size,fileType:a.type};(0,_.DR)(h)},this.renderFileListItem=(a,h,I)=>c().createElement("div",{className:"file-list-item-coach",key:a.id||a.uid},c().createElement("span",{className:"file-list-item-coach__index"},I+1),c().createElement(Z.Z,{iconClass:ue(a),size:"16px"}),c().createElement("div",{className:"file-list-item-coach__info"},c().createElement("span",{className:"name"},a.name),a.id&&c().createElement("span",{className:"size"},a.size/1e3,"KB"),!a.id&&c().createElement("span",{className:"size"},"\u4E0A\u4F20\u4E2D")),h?c().createElement(Q.Z,{type:"link",className:"file-list-item-coach__remove-btn",onClick:()=>{this.handleRemove(a)}},c().createElement(Z.Z,{iconClass:"icon-icon_close",size:"12px"})):c().createElement("div",{style:{width:12}})),this.handleCancelUpload=()=>{this.setState({uploadVisible:!1})},this.uploadSuccess=a=>{var h=this.props,I=h.t,M=h.value;if(a.length+M.length>5){s.default.warning((0,E.ZT)(I("component.stageAddFileTip"),5));return}var U=a.map(x=>{var q=F.Ss.indexOf(x.originalType)>-1;return{id:x.id,name:x.name,duration:x.duration,type:x.type,originalType:x.type,icon:F.e1[q?"mp3":x.type],status:x.status,size:x.size}});this.props.onChange(this.props.value.concat(U)),this.setState({uploadVisible:!1})},this.state={showFileSelector:!1,UploadConfig:{data:{access_token:localStorage.token},action:F.ZP.PostAbility.operateAttachmentUpload(),beforeUpload:this.handleBeforeUpload,accept:".jpg,.jpeg,.png,.gif",showUploadList:!1,onChange:this.handleOnChange},uploadVisible:!1,resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},isDingDiskChoose:!1,previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}}}componentDidMount(){var C=this;return(0,b.Z)(r().mark(function y(){var a;return r().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return(0,_.TN)(),I.next=3,(0,t.uj)("operation");case 3:a=I.sent,C.setState({isDingDiskChoose:a});case 5:case"end":return I.stop()}},y)}))()}UNSAFE_componentWillReceiveProps(C){if((0,ee.Of)(C,this.props)){var y=C.uploadSucceedItem,a=y.id,h=y.name,I=y.contentType,M=y.type,U=y.duration,x=y.status,q=y.size;if(C.uploadComponentType!==C.uploadComponentId)return;var k=F.Ss.indexOf(I)>-1,j={id:a,name:h,duration:U,type:M,originalType:M,icon:F.e1[k?"mp3":M],status:x,size:q};this.props.onChange(this.props.value.concat([j]))}}render(){var C=this.props,y=C.t,a=C.value,h=C.removeable,I=C.preview,M=C.resourceTip,U=C.canSelectCourse,x=C.notLibrary,q=C.hasZip,k=q===void 0?"":q,j=this.state,ae=j.UploadConfig,re=j.showFileSelector,te=j.uploadVisible,le=j.isDingDiskChoose,de=j.resourcePlayInfo,pe=j.previewInfo,me=c().createElement(w.Z,null,c().createElement(w.Z.Item,null,c().createElement($.Z,ae,y("component.practiceUploadPicBtnText"))),c().createElement(w.Z.Item,null,x?c().createElement("div",{className:"practice-attachment__upload__button"},y("component.practiceUploadFileBtnText"),c().createElement("input",{className:"file-input",multiple:!0,type:"file",onChange:this.handleChooseFiles})):c().createElement("div",{className:"practice-attachment__upload__button",onClick:()=>this.setState({uploadVisible:!0})},y("component.practiceUploadFileBtnText"))));return c().createElement("div",{className:"practice-attachment"},!I&&c().createElement("div",null,c().createElement(Y.Z,{visible:re,defaultChecked:a,onCancel:this.handleSelectedCancel,onOk:this.handleSelectedAttachment,excludeType:"h5",showPrivate:!1}),c().createElement("div",{className:"practice-attachment-row"},c().createElement("span",null,y("component.practiceAttachment"),":"),c().createElement("div",null,c().createElement("div",null,c().createElement(K.Z,{overlay:me,disabled:a.length===5},c().createElement(Q.Z,{disabled:a.length===5,icon:c().createElement(m.Z,null)},y("component.localUpload"))),U?c().createElement(Q.Z,{className:"practice-attachment__choose-courseware",icon:c().createElement(m.Z,null),disabled:a.length===5,onClick:this.handleUploadFile},y("component.coursewareLibSelect")):null,dd&&dd.version&&le?c().createElement(Q.Z,{className:"practice-attachment__ding-upload-button",icon:c().createElement(l.Z,null),disabled:a.length===5,onClick:this.handlePreviewDingFile},y("learning.dingSelect")):null),c().createElement("div",{className:"tip"},M||y(k==="true"?"component.practiceUploadTipZip":"component.practiceUploadTipRange"))))),c().createElement("div",{className:"file-list"},a.map((he,ve)=>this.renderFileListItem(he,h,ve))),x?c().createElement(u.Z,{params:{classifyId:0,bizType:1},hasZip:k}):c().createElement(v.Z,{visible:te,title:this.props.t("common.storage"),onCancel:this.handleCancelUpload,onSuccess:he=>this.uploadSuccess(he),params:{classifyId:0,bizType:0},notLibrary:x,hasZip:k}),c().createElement(se.Z,(0,T.Z)({},de,{previewInfo:pe})))}}ie.defaultProps={removeable:!1,attachment:[],preview:!1,resourceTip:"",canSelectCourse:!0,notLibrary:!1};var i=(0,d.$j)(ce)((0,N.Z)()(ie)),R=e(43859),O=g.Z.TextArea;class G extends c().Component{constructor(){super(...arguments);this.handleChange=C=>{var y=C.target.value;this.props.onFieldChange(y)},this.changContent=(C,y)=>{var a=C.target.value,h=[...this.props.value];h[y].content=a,this.props.onFieldChange(h)},this.changeFile=(C,y)=>{for(var a=[...this.props.value],h=0,I=a;h<I.length;h++){var M=I[h];if(y===M.id){M.resources=C;break}}this.props.onFieldChange(a)},this.addStep=()=>{var C=this.props.value;this.props.onFieldChange(C.concat([{content:"",resources:[],id:new Date().getTime()}]))},this.delItem=C=>{var y=[...this.props.value];y.splice(C,1),this.props.onFieldChange(y)}}render(){var C=this.props,y=C.value,a=C.t,h=C.formik,I=C.canEdit,M=C.maxLength,U=C.areaPlaceHolder,x=C.resourceTip,q=C.canSelectCourse,k=C.notLibrary,j=C.hasZip,ae=j===void 0?"":j,re=h.errors;return c().createElement("div",{className:"radio-mentor-form"},y.map((te,le)=>c().createElement("div",{key:te.id,className:"step-item"},c().createElement("div",{className:"step-title"},c().createElement("p",{className:"step-content"},(0,E.ZT)("".concat(a("practiceOperation.stepByStep")),le+1)),y.length>1&&c().createElement(p.Z,{onClick:()=>this.delItem(le)})),c().createElement(O,{maxLength:M,disabled:!I,rows:4,placeholder:U||a("tutorial.textDesc"),value:te.content,onChange:de=>this.changContent(de,le)}),c().createElement(i,{notLibrary:k,canSelectCourse:q,resourceTip:x,uploadComponentId:te.id,removeable:I,hasZip:ae,preview:!I,onChange:de=>this.changeFile(de,te.id),value:te.resources}),re&&re.stepList&&re.stepList[le]&&c().createElement("p",{className:"step-content-error"},a("tutorial.textDescRequire")))),I?c().createElement("div",{className:"step-add-btn",onClick:this.addStep},c().createElement(m.Z,null),c().createElement("span",null,a("tutorial.addSteps"))):null)}}G.defaultProps={maxLength:800,areaPlaceHolder:"",resourceTip:"",canSelectCourse:!0,notLibrary:!1};var H=(0,R.Z)((0,z.$j)((0,N.Z)()(G)))},4751:function(oe,J,e){"use strict";e.d(J,{Z:function(){return l}});var A=e(62029),g=e(57663),X=e(71577),c=e(88986),N=e(34792),z=e(48086),p=e(12924),m=e.n(p),T=e(91768),f=e(55446),K=e(28216),D=e(93485),w=e(33565),V=e(80991),$=e(6793),B=e(54624),Q={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}};class o extends m().Component{constructor(){super(...arguments);this.initRef=v=>{this.formRef=v},this.validate=v=>{var u={},E=(0,D.Z)(v.entries()),_;try{for(E.s();!(_=E.n()).done;){var P=_.value,Z=(0,w.Z)(P,2),W=Z[0],F=Z[1];(!F.content||(0,$.fy)(F.content).length===0)&&(F.resources&&F.resources.filter(Y=>Y.id).length===0||!F.resources)&&(u[W]=!0)}}catch(Y){E.e(Y)}finally{E.f()}return Object.keys(u).length?u:""}}componentDidMount(){this.props.onFormMounted(this.formRef)}render(){var v=this.props,u=v.initData,E=v.t,_=v.canEdit;return m().createElement("div",{className:"coach-task-form"},m().createElement("div",{className:"step-title-content"},m().createElement("p",{className:"step-title"},u.title),m().createElement("div",{className:"step-content-text"},m().createElement("p",{className:"task-desc"},E("tutorial.require"),"\uFF1A"),m().createElement("p",{className:"more-text"},u.content))),m().createElement(V.J9,{ref:this.initRef,initialValues:u,onSubmit:this.props.onSubmit,render:P=>m().createElement(V.l0,null,m().createElement(V.gN,(0,A.Z)({name:"stepList",label:"",required:!0,defaultValue:P.values.stepList,validate:this.validate,component:B.Z,displayType:"Custom",canEdit:_,customError:!0},Q)))}))}}o.defaultProps={initData:{},onFormMounted:()=>{},canEdit:!0};var b=(0,K.$j)()((0,T.Z)()(o)),L=e(37055),s=e(18329),n=e(10237);class r extends m().Component{constructor(v){super(v);this.getInitData=u=>{var E=this.props.userInfo;if(u.baseData&&u.baseData.userList&&u.baseData.userList.length>0){var _=L.ZP.tutor.getCoachDetail({tutorialsId:u.baseData.tutorialsId,tutorUserId:E.id,userId:u.baseData.userList[0]});n.WY.get({url:_,params:{status:"single"}}).then(P=>{P.data.code===0?u.baseData.userList.length>1?this.setState({initData:{title:P.data.data.title,content:P.data.data.content,stepList:[{content:"",resources:[],id:new Date().getTime()}]},showForm:!0}):this.setState({initData:{title:P.data.data.title,content:P.data.data.content,stepList:P.data.data.steps&&P.data.data.steps.length>0?P.data.data.steps:[{content:"",resources:[],id:new Date().getTime()}]},showForm:!0}):z.default.error(P.data.msg)})}},this.onCancel=()=>{this.setState({showForm:!1}),this.props.onCancel&&this.props.onCancel()},this.onOk=u=>{var E=this.props.canEdit;if(!E){this.setState({showForm:!1}),this.props.onOk&&this.props.onOk();return}this.setState({commitStatus:u},()=>{this.AddFormInstance.submitForm()})},this.onFormMounted=u=>{this.AddFormInstance=u},this.submit=u=>{var E=this.props,_=E.baseData,P=E.userInfo,Z=E.t,W=this.state,F=W.isLoading,Y=W.commitStatus;if(!F){var ee={user_ids:_.userList,status:Y==="save"?"0":"1",steps:u.stepList.map((ne,ce)=>({content:ne.content?(0,$.fy)(ne.content):ne.content,step:ce+1,resources:ne.resources.map((ue,ie)=>({resource_id:ue.id,sort:ie+1}))}))},se=L.ZP.tutor.commitCoach({userId:P.id,tutorialsId:_.tutorialsId});this.setState({isLoading:!0}),n.WY.post({url:se,data:(0,c.Z)({},ee)}).then(ne=>{this.setState({isLoading:!1}),ne.data.code===0&&(z.default.success(Z(Y==="save"?"common.saveSuccess":"common.submitSuccess")),this.setState({showForm:!1}),this.props.onOk&&this.props.onOk(Y!=="save"))}).catch(()=>{this.setState({isLoading:!1})})}},this.renderModalFooter=()=>{var u=this.props,E=u.t,_=u.onlyCommit,P=this.props.canEdit;return m().createElement("div",{className:"coach-task-modal-footer"},m().createElement(X.Z,{onClick:this.onCancel},E("common.cancel")),P?m().createElement(m().Fragment,null,_?null:m().createElement(X.Z,{type:"primary",onClick:()=>this.onOk("save")},E("common.save")),m().createElement(X.Z,{type:"primary",onClick:()=>this.onOk("submit")},E("common.submit"))):null)},this.state={showForm:!1,initData:{stepList:[{content:"",resources:[],id:new Date().getTime()}]},isLoading:!1,commitStatus:"save"},this.formRef=null}UNSAFE_componentWillReceiveProps(v){v.visible!==this.props.visible&&v.visible&&this.getInitData(v)}render(){var v=this.props,u=v.t,E=v.visible,_=v.canEdit,P=v.title,Z={title:P||u("tutorial.submitCounselingContent"),okText:u("common.ok"),cancelText:u("common.cancel"),size:"medium",destroyOnClose:!0,maskClosable:!1,footerType:"custom"};return m().createElement(s.ZP,(0,A.Z)({},Z,{visible:E,onCancel:this.onCancel,onOk:this.onOk,renderCustomFooter:this.renderModalFooter}),m().createElement("div",{className:"add-task-coaching"},this.state.showForm?m().createElement(b,{onFormMounted:this.onFormMounted,onSubmit:this.submit,initData:this.state.initData,canEdit:_}):null))}}var d=t=>({userInfo:t.user}),l=(0,K.$j)(d)((0,T.Z)()(r))},30389:function(oe,J,e){"use strict";e.d(J,{Z:function(){return B}});var A=e(62029),g=e(20228),X=e(11382),c=e(12924),N=e.n(c),z=e(91768),p=e(80991),m={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},T=e(62615),f=e(52670);class K extends N().Component{render(){var o=this.props,b=o.values,L=o.mode,s=o.onlyChooseDept,n=o.reserveUser,r=o.t,d=o.orgProps,l=o.rangeAuth,t=o.projectId,v=o.onCancel,u=o.onlyCreateUser;return N().createElement(p.l0,{className:"cl-form"},N().createElement(p.gN,(0,A.Z)({component:T.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:r("common.visibleRange"),defaultFieldList:b.employeeRange,validate:f.FI,mode:L,rangeAuth:l,onlyChooseDept:s,onlyCreateUser:u,orgProps:d,reserveUser:n,projectId:t,onCancel:v,qwTicketShow:!0},m)))}}var D=(0,z.Z)()(K),w=e(18329),V=e(34773);class $ extends N().Component{constructor(){super(...arguments);this.initRefFormik=o=>{this.refFormik=o},this.handleBeforeCreate=()=>{var o=this.refFormik;o.submitForm(),o.runValidations().then(b=>{if(!Object.keys(b).length){var L=o.state.values.employeeRange,s=(0,V.b)(L.rangeList),n={qyWeChatVo:L.qyWeChatVo,id:this.props.actionId,isAll:L.rangeType,groupIds:L.rangeType===2?s.groupIds.join(","):"",departmentIds:L.rangeType===2?s.deptIds.join(","):"",userIds:L.rangeType===2?s.userIds.join(","):"",postIds:L.rangeType===2?s.postIds.join(","):"",clusterIds:L.rangeType===2?s.clusterIds.join(","):"",qy_we_chat_vo:L.qyWeChatVo};this.props.onCreate(n)}})},this.handleBeforeCancel=()=>{var o=this.props.onCancel;o()}}render(){var o=this.props,b=o.visible,L=o.initialParams,s=o.isLoading,n=o.tipInfo,r=o.mode,d=o.onlyChooseDept,l=o.reserveUser,t=l===void 0?[]:l,v=o.t,u=o.title,E=o.orgProps,_=o.rangeAuth,P=o.projectId,Z=o.onCancel,W=o.onlyCreateUser,F=o.size;return s?N().createElement(X.Z,{size:"large"}):N().createElement(w.ZP,{wrapClassName:"cl-employee-selector-modal",visible:b,title:u||v("component.changeUser"),okText:v("common.ok"),cancelText:v("common.cancel"),size:F,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},s?N().createElement(X.Z,{size:"large"}):N().createElement(p.J9,{ref:this.initRefFormik,initialValues:L,render:Y=>N().createElement(D,(0,A.Z)({},Y,{mode:r,rangeAuth:_,orgProps:E,onlyChooseDept:d,onlyCreateUser:W,reserveUser:t,projectId:P,onCancel:Z}))}),n&&N().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},n))}}$.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var B=(0,z.Z)()($)},64549:function(oe,J,e){"use strict";var A=e(12924),g=e.n(A),X=e(28216),c=e(84874),N=p=>({guideStatus:p.advancedSetting.guideStatus,isNewUser:p.advancedSetting.isNewUser});class z extends g().Component{constructor(){super(...arguments);this.state={guideIndex:0,showGuide:this.props.renderGuide},this.onNextStep=()=>{var m=this.state.guideIndex,T=this.props.guidePageProps;if(m>=T.length-1){this.onCloseGuide();return}this.setState({guideIndex:m+1})},this.onCloseGuide=()=>{this.setState({showGuide:!1},()=>{this.props.closeGuide&&this.props.closeGuide()}),this.props.isNewUser==="true"&&this.props.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),this.updateAllStatus()},this.updateAllStatus=()=>{localStorage.setItem("guideStatus","false"),this.props.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})},this.renderRightItem=m=>g().createElement(g().Fragment,null,g().createElement("div",{className:"clguide-popover__content"},g().createElement("span",{onClick:this.onCloseGuide},g().createElement(c.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})),g().createElement("div",{className:"clguide-popover__content__text"},m.contentText),g().createElement("div",{className:"clguide-popover__content__button",onClick:this.onNextStep},m.buttonText)),g().createElement("div",{className:"clguide-popover__righttriangle"}),m.typeText&&g().createElement("div",{className:" clguide-popover__circle"},m.typeText)),this.renderLeftItem=m=>g().createElement(g().Fragment,null,g().createElement("div",{className:" clguide-popover__circle"},m.typeText),g().createElement("div",{className:"clguide-popover__lefttriangle"}),g().createElement("div",{className:"clguide-popover__content"},g().createElement("span",{onClick:this.onCloseGuide},g().createElement(c.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})),g().createElement("div",{className:"clguide-popover__content__text"},m.contentText),g().createElement("div",{className:"clguide-popover__content__button",onClick:this.onNextStep},m.buttonText)))}render(){var m=this.state,T=m.guideIndex,f=m.showGuide,K=this.props,D=K.className,w=K.guideStatus,V=K.guidePageProps,$=V===void 0?[]:V,B=K.direction,Q=B===void 0?"right":B,o=K.showDownloadBtn;return!f&&!w?null:g().createElement("div",{className:"clguide-popover-container"},f&&w==="true"&&g().createElement("div",{className:"clguide-popover-mask"}),f&&w==="true"&&T===0&&$.length?g().createElement("div",{className:"".concat(D,"_next clguide-popover ").concat(o?"":"right")},Q==="left"?this.renderLeftItem($[0]):this.renderRightItem($[0])):null,f&&w==="true"&&T===1&&$.length?g().createElement("div",{className:"".concat(D,"_know clguide-popover")},Q==="left"?this.renderLeftItem($[1]):this.renderRightItem($[1])):null)}}J.Z=(0,X.$j)(N)(z)},16598:function(oe,J,e){"use strict";var A=e(59250),g=e(13013),X=e(30887),c=e(99210),N=e(62029),z=e(12924),p=e.n(z),m=e(57254),T=e(91768),f=e(26096),K=(w,V)=>{var $=w.map(B=>p().createElement(f.Z,(0,N.Z)({},B,{type:V,key:B.key||B.type})));return V==="more"?p().createElement(c.Z,null,$):$},D=w=>{var V=w.buttons,$=w.t,B=w.visibleNum,Q=V.filter(s=>s.visible),o=B||1,b=[],L=[];if(Q.length<=o)L=[...Q];else if(Q.length>o)L=[...Q.slice(0,o)],b=[...Q.slice(o)];else return"/";return p().createElement("div",{className:"cl-table__cell-action"},K(L),L.some(s=>s.visible)&&b.some(s=>s.visible)?p().createElement(p().Fragment,null,p().createElement("span",{className:"cl-pointer-divide"}),p().createElement(g.Z,{overlay:K(b,"more")},p().createElement("span",{className:"cl-pointer"},$("common.more")," ",p().createElement(m.Z,null)))):null)};D.defaultProps={visibleNum:1},J.Z=(0,T.Z)()(D)},63848:function(oe,J,e){"use strict";var A=e(36877),g=e(32969),X=e(12924),c=e.n(X),N=e(91768),z=e(56130);class p extends c().PureComponent{constructor(){super(...arguments);this.onChange=(T,f)=>{this.props.onChange(T,f)}}render(){var T=this.props,f=T.value,K=T.classify,D=T.showLabel,w=T.className,V=T.t,$=T.style;return c().createElement("div",{className:"classify-cascader ".concat(w)},D?c().createElement("span",{className:"classify-cascader-label"},V("component.selectClassifyLabel")):null,c().createElement(g.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(w),options:K,onChange:this.onChange,placeholder:V("component.selectClassifyLabel"),value:f,style:$,loadData:this.props.loadData}))}}p.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},J.Z=(0,z.Z)((0,N.Z)()(p))},54792:function(oe,J,e){"use strict";var A=e(62029),g=e(63185),X=e(9676),c=e(47673),N=e(4107),z=e(88986),p=e(12924),m=e.n(p),T=e(91768),f=e(59239),K=e(55446),D=e.n(K),w=e(18329),V=e(2396);class $ extends m().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var o=this.props,b=o.form,L=o.id,s=o.onCreate,n=this.state.isChecked;b.validateFields((r,d)=>{if(!r){var l=(0,z.Z)({},d);n||(l.value=0);var t=(0,z.Z)((0,z.Z)({},l),{},{id:L});s(t),setTimeout(()=>{b.resetFields()},100)}})},this.handleBeforeCancel=()=>{var o=this.props,b=o.form,L=o.onCancel;L(),setTimeout(()=>{b.resetFields()},100)},this.checkScore=(o,b,L)=>{var s=this.props.t,n=this.state.isChecked;if(n&&(0,V.kh)(b)){L(s("component.setScoreRuleTip"));return}L()},this.handleCheckChange=o=>{this.setState({isChecked:o.target.checked})},this.renderItem=()=>{var o=this.props,b=o.form,L=o.initialValue,s=o.labelTxt,n=this.state.isChecked,r=b.getFieldDecorator,d={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},l=n?r("value",{initialValue:L,rules:[{validator:this.checkScore}]})(m().createElement(N.Z,{maxLength:30,placeholder:""})):null,t=m().createElement(m().Fragment,null,m().createElement(X.Z,{checked:n,onChange:this.handleCheckChange},s));return m().createElement(f.Z.Item,(0,A.Z)({label:t},d),l)}}componentDidUpdate(o){this.props.visible&&this.props.visible!==o.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var o=this.props,b=o.visible,L=o.title,s=o.prefixCls;return m().createElement(w.ZP,{size:"small",visible:b,title:L,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},m().createElement(f.Z,{className:"".concat(s),layout:"horizontal",colon:!1},this.renderItem(),m().createElement("div",{className:"".concat(s,"__children")},this.props.children)))}}$.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var B=f.Z.create({name:"ClSetupBoxInModal"})($);J.Z=(0,T.Z)()(B)},27550:function(oe,J,e){"use strict";var A=e(57663),g=e(71577),X=e(63185),c=e(9676),N=e(43358),z=e(34041),p=e(88983),m=e(47933),T=e(12924),f=e.n(T),K=e(28216),D=e(91768),w=e(49101),V=e(84391),$=e(1164),B=e(48479),Q=e(2971),o=e(45601),b=e(7249),L=e(64549),s=e(31945),n=d=>{var l=d.user,t=d.currentRoute,v=d.advancedSetting;return{currentPath:t.path,allAuthRoutes:t.allAuthRoutes,userLng:l.lng,themeColor:v.themeColor}};class r extends f().Component{constructor(l){super(l);this.setPlaceholder=()=>{var t=this.props,v=t.currentPath,u=t.allAuthRoutes,E=t.userLng,_=this.state.language,P=u[v];if(!!P){var Z=_[E].searchInputPlaceholder,W="";P.menuKey==="studyTemplate"||P.menuKey==="examTemplate"?W=Z.template:P.menuKey==="management"||P.menuKey==="employee"||P.menuKey==="obligatory"||P.menuKey==="elective"||P.menuKey==="plan"||P.menuKey==="evaluation"||P.menuKey==="myEvaluationPlan"?W=Z.task:W=Z[P.menuKey],this.setState({currentPlaceholder:W})}},this.handleRadiosChange=t=>{this.props.onRadiosChange(t.target.value)},this.handleSelectChange=t=>{this.props.onSelectChange(t)},this.handleSearch=t=>{this.props.onSearch(t)},this.handleChange=t=>{this.props.onCheckboxChange(t.target.checked)},this.handleDownload=()=>{this.props.onDownload()},this.renderRadios=()=>{var t=this.props,v=t.prefixCls,u=t.radioList,E=t.defaultRadioValue,_=t.radioValue;if(!u.length)return null;var P=E||u[0].value,Z="".concat(v,"__radios");return f().createElement("div",{className:Z},typeof _!="undefined"?f().createElement(m.ZP.Group,{defaultValue:P,value:_,onChange:this.handleRadiosChange},u.map(W=>f().createElement(m.ZP.Button,{key:W.value,value:W.value},W.name))):f().createElement(m.ZP.Group,{defaultValue:P,onChange:this.handleRadiosChange},u.map(W=>f().createElement(m.ZP.Button,{key:W.value,value:W.value},W.name))))},this.renderSelect=()=>{var t=this.props,v=t.prefixCls,u=t.selectList,E=t.defaultSelectValue;if(!u.length)return null;var _=E||u[0].value,P="".concat(v,"__select");return f().createElement("div",{className:P},f().createElement(z.Z,{defaultValue:_,onChange:this.handleSelectChange,getPopupContainer:()=>document.getElementsByClassName("cl-listQueryRow__select")[0],style:{minWidth:100}},u.map(Z=>f().createElement(z.Z.Option,{key:Z.value,value:Z.value},Z.name))))},this.renderOther=()=>{var t=this.props,v=t.prefixCls,u=t.renderOther,E=t.showOther,_="".concat(v,"__other");if(E&&u&&typeof u=="function")return f().createElement("div",{className:_},u())},this.renderCheckbox=()=>{var t=this.props,v=t.prefixCls,u=t.t,E=t.label,_=t.showCheckbox,P=t.renderActionSelect,Z="".concat(v,"__checkbox");return!_&&P&&typeof P=="function"?f().createElement("div",{className:Z},P()):_?f().createElement("div",{className:Z},f().createElement(c.Z,{onChange:this.handleChange},E||u("common.myCreated"))):null},this.renderSearch=()=>{var t=this.props,v=t.prefixCls,u=t.showSearch,E=t.inputPlaceholder,_=t.maxLength,P=_===void 0?400:_,Z="".concat(v,"__search");if(!u)return null;var W=this.state.currentPlaceholder;return E?f().createElement("div",{className:Z},f().createElement(B.Z,{onSearch:this.handleSearch,placeholder:E,width:272,maxLength:P})):f().createElement("div",{className:Z},f().createElement(B.Z,{onSearch:this.handleSearch,placeholder:W,width:272,maxLength:P}))},this.renderActionBtn=()=>{var t=this.props,v=t.prefixCls,u=t.actionText,E=t.t,_=t.tabLink,P=t.showBtn,Z=t.renderActionBtn,W=t.popOverProps,F=W===void 0?[]:W,Y=t.renderGuide,ee=Y===void 0?!1:Y,se=t.showDownloadBtn,ne=se===void 0?!1:se,ce=t.guideClassName,ue=ce===void 0?"guide-popover":ce,ie=t.themeColor,i="".concat(v,"__action");return!P&&Z&&typeof Z=="function"?f().createElement("div",{className:i},Z()):!P||!u?null:f().createElement("div",{className:i},f().createElement($.Z,{to:_},f().createElement(g.Z,{type:"primary",icon:f().createElement(w.Z,null)},u)),f().createElement(L.Z,{className:ue,renderGuide:ee,guidePageProps:F,direction:"left",showDownloadBtn:ne}),ne&&f().createElement(g.Z,{style:{marginLeft:"8px",color:ie,border:"1px solid ".concat(ie)},icon:f().createElement(V.Z,null),onClick:this.handleDownload},E("common.exportData")))},this.renderQueryRow=()=>{var t=this.props,v=t.queryRowParams,u=t.queryRowList,E=t.queryRowSelectedCourseIds,_=t.queryRowSelectedProjectIds,P=t.queryRowOnForceRender,Z=t.queryRowOnClassifyChange,W=t.queryRowOnTypeChange,F=t.queryRowOnCourseTypeChange,Y=t.queryRowAllowActions;return f().createElement(s.Z,{params:v,list:u,selectedCourseIds:E,selectedProjectIds:_,onForceRender:P,onClassifyChange:Z,onTypeChange:W,onCourseTypeChange:F,allowActions:Y,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var t=this.props,v=t.t,u=t.extraBtnSelectedRowKeys,E=t.extraBtnHandleMultiVisibleRange;return f().createElement(g.Z,{disabled:u.length===0,onClick:E},v("courseManage.setTheVisibility"))},this.state={language:{zh_cn:o.Z,en_us:Q.Z,zh_hk:b.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(l){l.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var l=this.props,t=l.prefixCls,v=l.wrapCls,u=l.showRenderRadios,E=u===void 0?!0:u,_=l.showRenderQueryRow,P=l.showRendeExtraBtn,Z=l.showRenderSelect;return f().createElement(f().Fragment,null,f().createElement("div",{className:"render_other"},this.renderOther(),f().createElement("header",{className:"".concat(t," ").concat(v)},f().createElement("section",{className:"".concat(t,"__radiocol")},this.renderActionBtn(),_&&this.renderQueryRow(),P&&this.rendeExtraBtn()),f().createElement("section",{className:"".concat(t,"__searchcol")},this.renderCheckbox(),E&&this.renderRadios(),Z&&this.renderSelect(),this.renderSearch()))))}}r.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showRadioList:!0,showCheckbox:!0,showSearch:!0,showBtn:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{}},J.Z=(0,K.$j)(n)((0,D.Z)()(r))},31945:function(oe,J,e){"use strict";e.d(J,{Z:function(){return ue}});var A=e(88983),g=e(47933),X=e(20228),c=e(11382),N=e(62029),z=e(30887),p=e(99210),m=e(59250),T=e(13013),f=e(57663),K=e(71577),D=e(63185),w=e(9676),V=e(71194),$=e(57016),B=e(88986),Q=e(34792),o=e(48086),b=e(43358),L=e(34041),s=e(12924),n=e.n(s),r=e(28216),d=e(91768),l=e(57254),t=e(18329);class v extends n().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var i=this.props,R=i.visible,O=i.courseList,G=i.t;return n().createElement(t.ZP,{visible:R,title:G("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},n().createElement("div",{className:"referenceWithOtherCourses"},n().createElement("div",{className:"referenceWithOtherCourses__tip"},G("course.deleteCourseTip")),O.map((H,S)=>n().createElement("div",{className:"referenceWithOtherCourses__item",key:S},O.length>1?"".concat(S+1,"\u3001"):null," ",H))))}}var u=(0,d.Z)()(v),E=e(10237),_=e(63848),P=e(58546),Z=e(30389),W=e(54792),F=e(86726),Y=e(37055),ee=L.Z.Option,se={setClassify:Y.ZP.CourseManageList.setClassify,setScore:Y.ZP.CourseManageList.setScore,setBatchEmployee:Y.ZP.CourseManageList.setBatchEmployee,deleteCourse:Y.ZP.CourseManageList.deleteCourse,exportCourseView:Y.ZP.CourseManageList.exportCourseView,syncCourse:Y.ZP.CourseManageList.syncCourse},ne=ie=>({qyShield:ie.user.qyShield});class ce extends n().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=i=>{this.props.onClassifyChange(i)},this.handleChangeType=i=>{this.props.onTypeChange(i)},this.handleChangeCourseType=i=>{this.props.onCourseTypeChange(i)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=i=>{var R=i.node,O=this.props,G=O.selectedCourseIds,H=O.selectedProjectIds,S=O.onForceRender,C=O.t,y=R.id;y&&E.qg.post({url:se.setClassify(),data:{course_ids:G.join(","),project_ids:H.join(","),classify_id:y}}).then(()=>{o.default.success(C("course.setCourseClassifySuccess")),S()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(i=>({scoreProps:(0,B.Z)((0,B.Z)({},i.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(i=>({scoreProps:(0,B.Z)((0,B.Z)({},i.scoreProps),{},{visible:!1})}))},this.handleScoreOk=i=>{var R=i.value;if(R===0){this.handleScoreCancel();return}var O=this.props,G=O.selectedCourseIds,H=O.selectedProjectIds,S=O.onForceRender,C=O.t;E.qg.post({url:se.setScore(),data:{course_ids:G.join(","),project_ids:H.join(","),credit:R}}).then(()=>{o.default.success(C("course.setCourseScoreSuccess")),S()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(i=>({employeeProps:(0,B.Z)((0,B.Z)({},i.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=i=>{var R=this.props,O=R.selectedCourseIds,G=R.selectedProjectIds,H=R.onForceRender,S=R.t,C=i.isAll,y=i.departmentIds,a=i.groupIds,h=i.postIds,I=i.userIds,M=i.qy_we_chat_vo;E.WY.post({url:se.setBatchEmployee(),data:{course_ids:O.join(","),project_ids:G.join(","),department_ids:y,group_ids:a,is_all:C,post_ids:h,user_ids:I,qy_we_chat_vo:M}}).then(()=>{o.default.success(S("personal.batchSetRangeSuccess")),H()}),this.handleEmployeeCancel()},this.showReferenceCourseList=i=>{this.setState(R=>({showReferenceCourseListProps:(0,B.Z)((0,B.Z)({},R.showReferenceCourseListProps),{},{visible:!R.showReferenceCourseListProps.visible,courseList:i||[]})}))},this.actionDelete=()=>{var i=this.props,R=i.selectedCourseIds,O=i.selectedProjectIds,G=i.list,H=i.onForceRender,S=i.t,C=0,y=0,a=[];if(G.forEach(h=>{R.includes(h.course_id)&&(h.reference_plan_count>0&&(y+=1),h.reference_plan_count>0&&a.push(h.title),h.can_delete==="true"&&(C+=1))}),y>0)this.showReferenceCourseList(a);else if(C!==R.length)o.default.warning(S("personal.deletePlatformCourseTip"));else{if(O.length>0){o.default.warning(S("personal.deleteProjectCourseTip"));return}$.Z.confirm({title:S("common.tip"),content:S("common.confirmDeleteTitle"),onOk(){E.qg.post({url:se.deleteCourse(),data:{enterpriseId:Y.ZP.enterpriseId,ids:R.join(","),project_ids:O.join(",")}}).then(h=>{var I=h.data,M=I.code,U=I.msg;o.default["".concat(M===0?"success":"warning")](U),M===0&&H()})}})}},this.actionSyncSetting=()=>{this.setState(i=>({asyncProps:(0,B.Z)((0,B.Z)({},i.asyncProps),{},{visible:!0})}))},this.onAsyncChange=i=>{this.setState(R=>({asyncProps:(0,B.Z)((0,B.Z)({},R.asyncProps),{},{value:i.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var i=this.props,R=i.selectedCourseIds,O=i.selectedProjectIds,G=i.onForceRender,H=i.t,S=this.state.asyncProps;E.qg.post({url:se.syncCourse(),data:{course_ids:R.join(","),project_ids:O.join(","),syncProgress:S.value}}).then(C=>{var y=C.data,a=y.code,h=y.msg;a===0?(o.default.success(H("setting.setUpSucceed")),G()):o.default.warning(h)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var i=this.props,R=i.selectedCourseIds,O=i.selectedProjectIds,G=i.onForceRender,H=i.t;if(R.concat(O).length>20){o.default.warning(H("courseManage.exportMoreTip"));return}var S=se.exportCourseView(),C={course_Ids:R.join(","),project_Ids:O.join(",")};E.WY.get({url:S,params:C}).then(y=>{y.data.code===200&&o.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),G(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var i=Y.ZP.downLoadCenter.getDownLoadingCount();E.WY.get({url:i,params:{}}).then(R=>{sessionStorage.setItem("downloadingCount",R.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:R.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=i=>{this.props.onCheckboxChange(i.target.checked)},this.handleSharingQueryRowCheckboxChange=i=>{this.props.onSharingCheckboxChange(i.target.checked)},this.renderCondition=()=>{var i=this.props,R=i.prefixCls,O=i.params,G=i.qyShield,H=i.t,S=O.classify_id?O.classify_id.split(","):[];return n().createElement("div",{className:"".concat(R,"__condition")},this.props.extraDom&&this.props.extraDom(),n().createElement(_.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:S,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),n().createElement(L.Z,{value:O.type,className:"cl-search-normal-width",onChange:this.handleChangeType},n().createElement(ee,{value:""},this.props.t("courseManage.allOrigin")),n().createElement(ee,{value:"original"},this.props.t("courseManage.originalCourse")),n().createElement(ee,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),n().createElement(ee,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:n().createElement(L.Z,{value:O.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},n().createElement(ee,{value:"all"},this.props.t("courseManage.allType")),n().createElement(ee,{value:"course"},this.props.t("common.courseLabel")),n().createElement(ee,{value:"microCourse"},this.props.t("common.microCourse")),n().createElement(ee,{value:"project"},this.props.t("leftMenuLists.studyProject"))),n().createElement(w.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},H("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&G==="false"?n().createElement(w.Z,{onChange:this.handleSharingQueryRowCheckboxChange},H("common.sharing")):null)},this.renderActions=()=>{var i=this.props,R=i.prefixCls,O=i.selectedCourseIds,G=i.selectedProjectIds,H=i.showNum,S=H===void 0?1:H,C=this.props.allowActions,y=(0,F.H3)("delete",C),a=(0,F.H3)("adjustment_classification",C),h=(0,F.H3)("set_visible",C),I=(0,F.H3)("export",C),M=(0,F.H3)("set_score",C),U=(0,F.H3)("progressSync",C),x=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:a},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:I},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:M},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:h},{name:this.props.t("common.delete"),type:"actionDelete",isShow:y},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:U}],q=x.filter(ae=>ae.isShow),k=[],j=[];if(q.length)S?(k=[...q.slice(0,S)],j=[...q.slice(S)]):j=[...q];else return null;return n().createElement("div",{className:"".concat(R,"__action")},k.map(ae=>n().createElement(K.Z,{style:{marginRight:"8px"},key:ae.type,disabled:!(O.length+G.length),onClick:this[ae.type]},ae.name)),j.length?n().createElement(T.Z,{disabled:!(O.length+G.length),overlay:this.renderMoreButton({buttons:j})},n().createElement(K.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",n().createElement(l.Z,null))):"")}}renderMoreButton(i){var R=i.buttons,O=this.props,G=O.selectedCourseIds,H=O.selectedProjectIds;return n().createElement(p.Z,{onClick:S=>{var C=S.key;this[C]()}},R.map(S=>S.isShow?n().createElement(p.Z.Item,{key:S.type,disabled:!(G.length+H.length)},n().createElement("span",{className:"cl-pointer"},S.name)):null))}render(){var i=this.props,R=i.prefixCls,O=i.t,G=i.showRenderCondition,H=G===void 0?!0:G,S=i.showRenderActions,C=S===void 0?!0:S,y=this.state,a=y.classifyProps,h=y.scoreProps,I=y.employeeProps,M=y.showReferenceCourseListProps,U=y.asyncProps;return n().createElement("div",{className:R},H&&this.renderCondition(),C&&this.renderActions(),n().createElement(P.Z,(0,N.Z)({},a,{title:O("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),n().createElement(W.Z,(0,N.Z)({},h,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),I.visible&&n().createElement(Z.Z,(0,N.Z)({},I,{title:O("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:O("component.chooseVisibleScope")},isLoading:!I.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),U.visible&&n().createElement(t.ZP,{wrapClassName:"cl-async-selector-modal",visible:U.visible,title:O("common.scheduleSyncSetting"),okText:O("common.ok"),cancelText:O("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},U.visible?n().createElement("div",{className:"".concat(R,"__async")},n().createElement("p",null," ",O("common.scheduleSyncSettingTip")),n().createElement(g.ZP.Group,{onChange:this.onAsyncChange,value:U.value},n().createElement(g.ZP,{value:0},O("common.outSync")),n().createElement(g.ZP,{value:1},O("common.synchronization")))):n().createElement(c.Z,{size:"large"})),n().createElement(u,(0,N.Z)({},M,{showReferenceCourseList:this.showReferenceCourseList})))}}ce.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var ue=(0,d.Z)()((0,r.$j)(ne)(ce))},8421:function(oe,J,e){"use strict";e.r(J);var A=e(66456),g=e(55313),X=e(54029),c=e(62529),N=e(57663),z=e(71577),p=e(88986),m=e(12924),T=e.n(m),f=e(28216),K=e(76651),D=e(91768),w=e(57068),V=e(1164),$=e(4408),B=e(4751),Q=e(6793),o=e(27550),b=e(16598),L=e(37781);class s extends T().Component{constructor(){super(...arguments);this.state={searchParam:{page_size:10,page_number:1,total:0,keyword:"",status:"unfinished"},tutorialsId:"",tutorTitle:"",dataSource:[],currentSelectKeys:[],coachTaskDialogVisible:!1,canEdit:!0,isLoading:!1,chooseUserIdList:[]},this.getUserList=()=>{var r=this.state,d=r.tutorialsId,l=r.searchParam;this.setState({isLoading:!0}),(0,L.O$)((0,p.Z)({tutorialsId:d},l)).then(t=>{this.setState({isLoading:!1,dataSource:t.data.data})})},this.handleSearch=r=>{var d=this.state.searchParam;this.setState({searchParam:(0,p.Z)((0,p.Z)({},d),{},{keyword:r})},()=>{this.getUserList()})},this.renderColumn=()=>{var r=this.props.t,d=this.state.searchParam;return d.status==="finished"?[{title:r("tutorial.tutorStudent"),dataIndex:"name"},{title:r("questionn.department"),dataIndex:"departments",width:450},{title:r("tutorial.coachingTime"),dataIndex:"tutor_create_time",render:l=>l?(0,Q.p6)(l):"--"},{title:r("tutorial.studentAssessment"),dataIndex:"evaluation_status",render:l=>{if(!l)return"--";if(l==="evaluated")return r("tutorial.haveEvaluation");if(l==="unevaluated")return r("tutorial.waitEvaluate")}},{title:r("tutorial.evaluateTime"),dataIndex:"apprentice_create_time",render:l=>l?(0,Q.p6)(l):"--"},{title:r("common.operate"),dataIndex:"",width:150,render:(l,t)=>{var v=[{title:r("tutorial.learnDetails"),visible:!0,click:()=>this.showUserTaskDetail(t)},{title:r("tutorial.viewTutorial"),visible:!0,click:()=>this.viewTutorial(t)}];return T().createElement(b.Z,{buttons:v})}}]:[{title:r("tutorial.tutorStudent"),dataIndex:"name"},{title:r("questionn.department"),dataIndex:"departments",width:600},{title:r("tutorial.tutorShip")+r("personal.status"),dataIndex:"status",render:l=>{if(l==="init")return r("tutorial.notTutoring");if(l==="save")return r("personal.draft");if(l==="submit")return r("practiceOperation.submitted")}},{title:r("common.operate"),dataIndex:"",width:200,render:(l,t)=>{var v=[{title:r("tutorial.learnDetails"),visible:!0,click:()=>this.showUserTaskDetail(t)},{title:r("common.submit")+r("tutorial.coach"),visible:t.status!=="submit",click:()=>this.showCoachTaskDialog(t.user_id)}];return T().createElement(b.Z,{buttons:v})}}]},this.showUserTaskDetail=r=>{var d=w.parse(K.m8.location.search),l=d.planId;V.Z.targetTo({path:"/training/learning/task/myObligatoryTaskView?fromPage=myObligatoryTask&id=".concat(l,"&userId=").concat(r.user_id),projectType:"student"})},this.viewTutorial=r=>{var d=w.parse(K.m8.location.search),l=d.tutorialsId;V.Z.targetTo({path:"/coachingTask/detail/result?tutorialsId=".concat(l,"&userId=").concat(r.user_id),projectType:"student"})},this.rowSelection=r=>{this.setState({currentSelectKeys:r})},this.handleStatusChange=r=>{var d=this.state.searchParam;this.setState({searchParam:(0,p.Z)((0,p.Z)({},d),{},{status:r}),currentSelectKeys:[]},()=>{this.getUserList()})},this.onSelectChange=r=>{this.setState({currentSelectKeys:r})},this.showCoachTaskDialog=r=>{this.setState({coachTaskDialogVisible:!0,chooseUserIdList:[r]})},this.judgeCoachTaskDialog=()=>{var r=this.state.currentSelectKeys;this.setState({coachTaskDialogVisible:!0,chooseUserIdList:r})},this.addCoachTaskStatus=r=>{var d=this.state,l=d.chooseUserIdList,t=d.searchParam,v=w.parse(K.m8.location.search),u=v.tutorialsId;this.setState({coachTaskDialogVisible:!1,currentSelectKeys:[],searchParam:(0,p.Z)((0,p.Z)({},t),{},{status:r?"finished":t.status})},()=>{this.getUserList()}),r&&l.length===1&&V.Z.targetTo({path:"/coachingTask/detail/result?tutorialsId=".concat(u,"&userId=").concat(l[0]),projectType:"student"})}}componentDidMount(){var r=this.state.searchParam,d=w.parse(K.m8.location.search),l=d.title,t=d.tutorialsId,v=d.status;this.setState({tutorTitle:l,tutorialsId:t,searchParam:(0,p.Z)((0,p.Z)({},r),{},{status:v||"unfinished"})},()=>{this.getUserList()})}render(){var r=this.props,d=r.prefixCls,l=r.t,t=this.state,v=t.chooseUserIdList,u=t.dataSource,E=t.currentSelectKeys,_=t.tutorTitle,P=t.isLoading,Z=t.searchParam,W=t.coachTaskDialogVisible,F=t.canEdit,Y=this.renderColumn();return T().createElement("div",{className:d},T().createElement($.Z,{title:l("leftMenuLists.coachingTask")}),T().createElement("div",{className:"".concat(d,"__item-title")},T().createElement("span",{className:"".concat(d,"__item-title__title")},_)),T().createElement("div",{className:"".concat(d,"__content")},T().createElement("div",{className:"".concat(d,"__content__search")},T().createElement(o.Z,{showBtn:!1,renderActionBtn:()=>T().createElement(c.Z,{count:E.length},T().createElement(z.Z,{type:"primary",disabled:E.length===0,onClick:this.judgeCoachTaskDialog},l("tutorial.batchSubmission"))),radioList:[{value:"unfinished",name:l("tutorial.waitingTutoring")},{value:"finished",name:l("tutorial.hasBeenTutoring")}],radioValue:Z.status,onRadiosChange:this.handleStatusChange,onSearch:this.handleSearch,inputPlaceholder:l("searchInputPlaceholder.name"),showCheckbox:!1})),T().createElement("div",{className:"".concat(d,"__content__table")},T().createElement(g.Z,{columns:Y,dataSource:u,pagination:!1,loading:P,rowKey:ee=>ee.user_id,rowSelection:Z.status==="unfinished"?{columnWidth:50,selectedRowKeys:E,getCheckboxProps:ee=>({disabled:ee.status==="submit"}),onChange:this.onSelectChange}:!1}))),T().createElement(B.Z,{visible:W,onCancel:()=>this.setState({coachTaskDialogVisible:!1}),onOk:this.addCoachTaskStatus,baseData:{tutorialsId:this.state.tutorialsId,userList:v},canEdit:F}))}}s.defaultProps={prefixCls:"coach-task"},J.default=(0,f.$j)()((0,D.Z)()(s))},37781:function(oe,J,e){"use strict";e.d(J,{Q_:function(){return X},O$:function(){return c},PQ:function(){return N},zv:function(){return z},Vu:function(){return p},Qd:function(){return m},t3:function(){return T},Tw:function(){return f},kV:function(){return K},W5:function(){return D},MA:function(){return w},Mm:function(){return V},pF:function(){return $},ZK:function(){return B},iT:function(){return Q},Nf:function(){return o},hB:function(){return b},GK:function(){return L}});var A=e(37055),g=e(10237);function X(s){var n=s.tutorialsId,r=s.tutorUserId,d=s.userId,l=A.ZP.tutor.getCoachDetail({tutorialsId:n,tutorUserId:r,userId:d});return g.WY.get({url:l,params:{status:"single"}})}function c(s){var n=s.tutorialsId,r=s.status,d=s.keyword,l=A.ZP.tutor.getUserListByCoach(n);return g.WY.get({url:l,params:{status:r,keyword:d}})}function N(s){var n=A.ZP.tutor.queryTutor(s);return g.WY.get({url:n})}function z(s){var n=s.tutorId,r=s.user_id,d=s.gender,l=s.level_id,t=s.department_id,v=s.description,u=s.avatar,E=A.ZP.tutor.editTutor(n);return g.WY.post({url:E,data:{user_id:r,gender:d,level_id:l,description:v,department_id:t,avatar:u}})}function p(s){var n=s.user_id,r=s.gender,d=s.level_id,l=s.description,t=s.avatar,v=s.department_id,u=A.ZP.tutor.addTutor();return g.WY.post({url:u,data:{user_id:n,gender:r,level_id:d,description:l,department_id:v,avatar:t}})}function m(s){var n=s.keyword,r=n===void 0?"":n,d=A.ZP.tutor.levelList();return g.WY.get({url:d,params:{keyword:r}})}function T(s){var n=s.name,r=s.standard,d=A.ZP.tutor.addLevel();return g.WY.post({url:d,data:{name:n,standard:r}})}function f(s){var n=s.id,r=s.name,d=s.standard,l=A.ZP.tutor.editLevel(n);return g.WY.post({url:l,data:{id:n,name:r,standard:d}})}function K(s){var n=s.resourceId,r=s.type,d=A.ZP.tagsInformation.resourceQueryTags();return g.WY.get({url:d,params:{type:r,resourceId:n,isNewTag:!0}})}function D(s){var n=s.tutorId,r=s.keyword,d=s.page_size,l=s.page_number,t=A.ZP.tutor.apprenticeList(n);return g.WY.get({url:t,params:{keyword:r,page_size:d,page_number:l}})}function w(s){var n=A.ZP.tutor.deleteApprentice(s);return g.WY.post({url:n})}function V(s){var n=s.tutorId,r=s.user_ids,d=A.ZP.tutor.addApprentice(n);return g.WY.post({url:d,data:{user_ids:r}})}function $(s){var n=A.ZP.tutor.deleteLevel(s);return g.WY.post({url:n})}function B(s){var n=s.source_id,r=s.destination_id,d=A.ZP.tutor.sortLevel(n);return g.WY.post({url:d,data:{source_id:n,destination_id:r}})}function Q(s){var n=s.tutorId,r=s.status,d=A.ZP.tutor.updateStatusTutor(n);return g.WY.post({url:d,data:{status:r}})}function o(s){var n=s.keyword,r=s.status,d=s.department_id,l=s.page_number,t=s.page_size,v=A.ZP.tutor.listTutor();return g.WY.get({url:v,params:{keyword:n,status:r,department_id:d,page_number:l,page_size:t}})}function b(s){var n=s.source_id,r=s.destination_id,d=A.ZP.tutor.updateSortTutor(n);return g.WY.post({url:d,data:{source_id:n,destination_id:r}})}function L(s){var n=A.ZP.tutor.deleteTutor(s);return g.WY.post({url:n})}}}]);
