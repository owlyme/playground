(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[6857],{67620:function(Oe,ie,s){"use strict";var ee=s(34792),de=s(48086),me=s(12924),te=s.n(me),H=s(19222),G=s.n(H),N=s(32407),L=s(37055),pe=L.ZP.Common.editorUpload(),A="cl_editor_toolbar_default",C="cl_editor_content_default";class ve extends me.Component{constructor(p){super(p);this.initEditor=()=>{this.editor=new(G())(".".concat(this.props.toolbarCls),".".concat(this.props.contentCls)),this.editor.config.zIndex=10,this.editor.config.onfocus=()=>{var t=document.querySelector(".".concat(this.props.contentCls));t&&(t.style.minHeight=this.props.contentHeight,t.style.height="auto")},this.editor.config.onblur=()=>{var t=document.querySelector(".".concat(this.props.contentCls));t&&(t.style.height=this.props.contentHeight)},this.editor.config.menus=this.props.controls,this.editor.config.placeholder=this.props.placeholderContent||N.Z.t("component.pleaseEnterText"),this.editor.config.onchange=t=>{this.props.onChange&&this.props.onChange(t)},this.editor.config.onchangeTimeout=300,this.editor.config.uploadImgServer=pe,this.editor.config.uploadImgMaxLength=5,this.editor.config.uploadImgParams={access_token:window.localStorage.getItem("token")},this.editor.config.uploadFileName="files",this.editor.config.uploadImgHooks={customInsert(t,Q){var U=Q.data;U.forEach(Z=>{t(Z)})}},this.editor.config.pasteTextHandle=function(t){return~t.indexOf("<!--[if gte mso 9]><xml>")||~t.indexOf("<spanyes")?"\u7C98\u8D34\u5185\u5BB9\u6709\u4E71\u7801\uFF0C\u8BF7\u4F7F\u7528ctrl+shift+v\u6765\u7C98\u8D34\u5185\u5BB9(mac\u8BF7\u4F7F\u7528command+shift+v)":t},this.editor.config.focus=!1,this.editor.config.uploadImgMaxSize=3*1024*1024,this.editor.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp"],this.editor.config.showLinkImg=!1,this.editor.config.customAlert=function(t,Q){switch(Q){case"success":de.default.success(t);break;case"info":de.default.info(t);break;case"warning":de.default.warning(t);break;case"error":de.default.error(t);break;default:de.default.info(t);break}},this.editor.create(),this.editor.txt.html("".concat(this.props.placeholder))},this.getHtml=()=>this.editor.txt.html(),this.getText=()=>this.editor.txt.text(),this.setHtml=t=>this.editor.txt.html(t),this.editor=null}componentDidMount(){this.initEditor()}render(){var p=this.props.toolbarCls?"".concat(this.props.toolbarCls," cl_editor_toolbar"):"".concat(A," cl_editor_toolbar"),t=this.props.contentCls?"".concat(this.props.contentCls," cl_editor_content"):"".concat(C," cl_editor_content");return te().createElement(te().Fragment,null,te().createElement("div",{className:p}),te().createElement("div",{className:t,style:{height:this.props.contentHeight,minHeight:this.props.contentHeight}}))}}ve.defaultProps={controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],placeholder:"\u5185\u5BB9\u7F16\u8F91\u533A\u57DF",toolbarCls:A,contentCls:C,contentHeight:"300px",placeholderContent:""},ie.Z=ve},52758:function(Oe,ie,s){"use strict";s.r(ie),s.d(ie,{default:function(){return ho}});var ee=s(20228),de=s(11382),me=s(49111),te=s(19650),H=s(57663),G=s(71577),N=s(34792),L=s(48086),pe=s(71194),A=s(57016),C=s(88986),ve=s(35556),Ae=s(27220),p=s(12924),t=s.n(p),Q=s(28216),U=s(91768),Z=s(80991),ke=s(76651),tt=s(57068),Tt=s(21193),je=s.n(Tt),k=s(62029),ua=s(18446),Ft=s.n(ua),he=s(72538),I={background_url:"3.mp4",character_url:"woman_1.png",fontFamily:"\u601D\u6E90\u9ED1\u4F53",fontSize:"46px",fontColor:"#000000",soundVoice:"aijia",soundVolume:"50",soundSpeechRate:"0"},da=s(70777),Be=s.n(da),Ra=s(22385),zt=s(31097),j=s(33565),Zt=s(26726),Vt=s.n(Zt),Qe=s(37055),nt=s(10237);function $t(a){var o=a.config_type,e=Qe.ZP.CourseManageList.aiImageConfigList();return nt.WY.get({url:e,params:{config_type:o}})}function ma(a){var o=a.idList,e=Qe.ZP.CourseManageList.deleteAiImage();return nt.WY.put({url:e,data:{id_list:o}})}function Wt(a){var o=Qe.ZP.CourseManageList.getFileText();return nt.WY.post({url:o,data:a})}function pa(a){var o=Qe.ZP.GuidePage.userGuideCheck();return nt.WY.get({url:o,params:a})}function Cr(a){var o=CONFIG.GuidePage.userGuideConfirm();return request.post({url:o,params:a})}var fe=s(43185),it=s(53251),ha=s(49101),fa=s(94184),Ht=s.n(fa),va=s(51509),pt=s.n(va),ga=a=>{var o=a.visible,e=a.t,r=a.onOk,n=a.onCancel,i=()=>{r&&r()},l=()=>t().createElement("div",null,t().createElement(G.Z,{type:"primary",onClick:i},e("course.know")));return t().createElement(p.Fragment,null,t().createElement(A.Z,{title:e("course.instructionsModalTitle"),visible:o,onOk:i,onCancel:n,width:532,className:pt().instructionsModal,footer:l(),destroyOnClose:!0,centered:!0},t().createElement("div",{className:pt().contentInfo},e("course.instructionsContent")),t().createElement("div",{className:pt().exampleImg}),t().createElement("div",{className:pt().tip},t().createElement("div",{className:pt().title},e("course.instructionsTipTitle")),t().createElement("div",{className:pt().info},e("course.instructionsTipInfo")))))};ga.defaultProps={visible:!1,onOk:()=>{}};var Gt=(0,Q.$j)()((0,U.Z)()(ga)),La=s(90336),He=s.n(La),Da=s(66126),Yt=s(31955),Ct=s(57361),Xt=s(81211),Ca=s(9754),Ge=s.n(Ca);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var At=function(a,o){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])},At(a,o)};function ya(a,o){At(a,o);function e(){this.constructor=a}a.prototype=o===null?Object.create(o):(e.prototype=o.prototype,new e)}var Ee=function(){return Ee=Object.assign||function(o){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=e[i])}return o},Ee.apply(this,arguments)};function Ma(a,o){var e={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&o.indexOf(r)<0&&(e[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)o.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(e[r[n]]=a[r[n]]);return e}function Oa(a,o,e,r){var n=arguments.length,i=n<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,o,e,r);else for(var u=a.length-1;u>=0;u--)(l=a[u])&&(i=(n<3?l(i):n>3?l(o,e,i):l(o,e))||i);return n>3&&i&&Object.defineProperty(o,e,i),i}function Fa(a,o){return function(e,r){o(e,r,a)}}function za(a,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,o)}function Aa(a,o,e,r){function n(i){return i instanceof e?i:new e(function(l){l(i)})}return new(e||(e=Promise))(function(i,l){function u(h){try{d(r.next(h))}catch(b){l(b)}}function m(h){try{d(r.throw(h))}catch(b){l(b)}}function d(h){h.done?i(h.value):n(h.value).then(u,m)}d((r=r.apply(a,o||[])).next())})}function Ye(a,o){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(d){return function(h){return m([d,h])}}function m(d){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,n=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){e.label=d[1];break}if(d[0]===6&&e.label<i[1]){e.label=i[1],i=d;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(d);break}i[2]&&e.ops.pop(),e.trys.pop();continue}d=o.call(a,e)}catch(h){d=[6,h],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Kt=Object.create?function(a,o,e,r){r===void 0&&(r=e),Object.defineProperty(a,r,{enumerable:!0,get:function(){return o[e]}})}:function(a,o,e,r){r===void 0&&(r=e),a[r]=o[e]};function ka(a,o){for(var e in a)e!=="default"&&!Object.prototype.hasOwnProperty.call(o,e)&&Kt(o,a,e)}function Jt(a){var o=typeof Symbol=="function"&&Symbol.iterator,e=o&&a[o],r=0;if(e)return e.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&r>=a.length&&(a=void 0),{value:a&&a[r++],done:!a}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ea(a,o){var e=typeof Symbol=="function"&&a[Symbol.iterator];if(!e)return a;var r=e.call(a),n,i=[],l;try{for(;(o===void 0||o-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(u){l={error:u}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(l)throw l.error}}return i}function ja(){for(var a=[],o=0;o<arguments.length;o++)a=a.concat(Ea(arguments[o]));return a}function Ba(){for(var a=0,o=0,e=arguments.length;o<e;o++)a+=arguments[o].length;for(var r=Array(a),n=0,o=0;o<e;o++)for(var i=arguments[o],l=0,u=i.length;l<u;l++,n++)r[n]=i[l];return r}function wt(a){return this instanceof wt?(this.v=a,this):new wt(a)}function Ua(a,o,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(a,o||[]),n,i=[];return n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n;function l(g){r[g]&&(n[g]=function(R){return new Promise(function(T,w){i.push([g,R,T,w])>1||u(g,R)})})}function u(g,R){try{m(r[g](R))}catch(T){b(i[0][3],T)}}function m(g){g.value instanceof wt?Promise.resolve(g.value.v).then(d,h):b(i[0][2],g)}function d(g){u("next",g)}function h(g){u("throw",g)}function b(g,R){g(R),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Va(a){var o,e;return o={},r("next"),r("throw",function(n){throw n}),r("return"),o[Symbol.iterator]=function(){return this},o;function r(n,i){o[n]=a[n]?function(l){return(e=!e)?{value:wt(a[n](l)),done:n==="return"}:i?i(l):l}:i}}function $a(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=a[Symbol.asyncIterator],e;return o?o.call(a):(a=typeof Jt=="function"?Jt(a):a[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=a[i]&&function(l){return new Promise(function(u,m){l=a[i](l),n(u,m,l.done,l.value)})}}function n(i,l,u,m){Promise.resolve(m).then(function(d){i({value:d,done:u})},l)}}function Wa(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a}var Ne=Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o};function v(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var e in a)e!=="default"&&Object.prototype.hasOwnProperty.call(a,e)&&Kt(o,a,e);return Ne(o,a),o}function f(a){return a&&a.__esModule?a:{default:a}}function c(a,o){if(!o.has(a))throw new TypeError("attempted to get private field on non-instance");return o.get(a)}function E(a,o,e){if(!o.has(a))throw new TypeError("attempted to set private field on non-instance");return o.set(a,e),e}var y=s(52796),S=s.n(y);function ge(a,o,e,r,n,i){i===void 0&&(i=0);var l=Pt(a,o,i),u=l.width,m=l.height,d=Math.min(u,e),h=Math.min(m,r);return d>h*n?{width:h*n,height:h}:{width:d,height:d/n}}function O(a){return a.width>a.height?a.width/a.naturalWidth:a.height/a.naturalHeight}function Ze(a,o,e,r,n){n===void 0&&(n=0);var i=Pt(o.width,o.height,n),l=i.width,u=i.height;return{x:Re(a.x,l,e.width,r),y:Re(a.y,u,e.height,r)}}function Re(a,o,e,r){var n=o*r/2-e/2;return _t(a,-n,n)}function xe(a,o){return Math.sqrt(Math.pow(a.y-o.y,2)+Math.pow(a.x-o.x,2))}function at(a,o){return Math.atan2(o.y-a.y,o.x-a.x)*180/Math.PI}function st(a,o,e,r,n,i,l){i===void 0&&(i=0),l===void 0&&(l=!0);var u=l?Qt:kt,m=Pt(o.width,o.height,i),d=Pt(o.naturalWidth,o.naturalHeight,i),h={x:u(100,((m.width-e.width/n)/2-a.x/n)/m.width*100),y:u(100,((m.height-e.height/n)/2-a.y/n)/m.height*100),width:u(100,e.width/m.width*100/n),height:u(100,e.height/m.height*100/n)},b=Math.round(u(d.width,h.width*d.width/100)),g=Math.round(u(d.height,h.height*d.height/100)),R=d.width>=d.height*r,T=R?{width:Math.round(g*r),height:g}:{width:b,height:Math.round(b/r)},w=Ee(Ee({},T),{x:Math.round(u(d.width-T.width,h.x*d.width/100)),y:Math.round(u(d.height-T.height,h.y*d.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:w}}function Qt(a,o){return Math.min(a,Math.max(0,o))}function kt(a,o){return o}function It(a,o,e,r,n,i){var l=Pt(o.width,o.height,e),u=_t(r.width/l.width*(100/a.width),n,i),m={x:u*l.width/2-r.width/2-l.width*u*(a.x/100),y:u*l.height/2-r.height/2-l.height*u*(a.y/100)};return{crop:m,zoom:u}}function yr(a,o,e){var r=O(o);return e.height>e.width?e.height/(a.height*r):e.width/(a.width*r)}function Er(a,o,e,r,n,i){e===void 0&&(e=0);var l=Pt(o.naturalWidth,o.naturalHeight,e),u=_t(yr(a,o,r),n,i),m=r.height>r.width?r.height/a.height:r.width/a.width,d={x:((l.width-a.width)/2-a.x)*m,y:((l.height-a.height)/2-a.y)*m};return{crop:d,zoom:u}}function Ha(a,o){return{x:(o.x+a.x)/2,y:(o.y+a.y)/2}}function Sr(a){return a*Math.PI/180}function Pt(a,o,e){var r=Sr(e);return{width:Math.abs(Math.cos(r)*a)+Math.abs(Math.sin(r)*o),height:Math.abs(Math.sin(r)*a)+Math.abs(Math.cos(r)*o)}}function _t(a,o,e){return Math.min(Math.max(a,o),e)}function qt(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return a.filter(function(e){return typeof e=="string"&&e.length>0}).join(" ").trim()}var xr=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,br=1,Tr=3,Zr=function(a){ya(o,a);function o(){var e=a!==null&&a.apply(this,arguments)||this;return e.imageRef=t().createRef(),e.videoRef=t().createRef(),e.containerRef=null,e.styleRef=null,e.containerRect=null,e.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},e.dragStartPosition={x:0,y:0},e.dragStartCrop={x:0,y:0},e.lastPinchDistance=0,e.lastPinchRotation=0,e.rafDragTimeout=null,e.rafPinchTimeout=null,e.wheelTimer=null,e.state={cropSize:null,hasWheelJustStarted:!1},e.preventZoomSafari=function(r){return r.preventDefault()},e.cleanEvents=function(){document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onDragStopped),document.removeEventListener("touchmove",e.onTouchMove),document.removeEventListener("touchend",e.onDragStopped)},e.clearScrollEvent=function(){e.containerRef&&e.containerRef.removeEventListener("wheel",e.onWheel),e.wheelTimer&&clearTimeout(e.wheelTimer)},e.onMediaLoad=function(){var r=e.computeSizes();r&&(e.emitCropData(),e.setInitialCrop(r)),e.props.onMediaLoaded&&e.props.onMediaLoaded(e.mediaSize)},e.setInitialCrop=function(r){if(e.props.initialCroppedAreaPercentages){var n=It(e.props.initialCroppedAreaPercentages,e.mediaSize,e.props.rotation,r,e.props.minZoom,e.props.maxZoom),i=n.crop,l=n.zoom;e.props.onCropChange(i),e.props.onZoomChange&&e.props.onZoomChange(l)}else if(e.props.initialCroppedAreaPixels){var u=Er(e.props.initialCroppedAreaPixels,e.mediaSize,e.props.rotation,r,e.props.minZoom,e.props.maxZoom),i=u.crop,l=u.zoom;e.props.onCropChange(i),e.props.onZoomChange&&e.props.onZoomChange(l)}},e.computeSizes=function(){var r,n,i,l,u,m,d=e.imageRef.current||e.videoRef.current;if(d&&e.containerRef){e.containerRect=e.containerRef.getBoundingClientRect();var h=e.containerRect.width/e.containerRect.height,b=((r=e.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=e.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,g=((i=e.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((l=e.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,R=d.offsetWidth<b||d.offsetHeight<g,T=b/g,w=void 0;if(R)switch(e.props.objectFit){default:case"contain":w=h>T?{width:e.containerRect.height*T,height:e.containerRect.height}:{width:e.containerRect.width,height:e.containerRect.width/T};break;case"horizontal-cover":w={width:e.containerRect.width,height:e.containerRect.width/T};break;case"vertical-cover":w={width:e.containerRect.height*T,height:e.containerRect.height};break;case"auto-cover":w=b>g?{width:e.containerRect.width,height:e.containerRect.width/T}:{width:e.containerRect.height*T,height:e.containerRect.height};break}else w={width:d.offsetWidth,height:d.offsetHeight};e.mediaSize=Ee(Ee({},w),{naturalWidth:b,naturalHeight:g}),e.props.setMediaSize&&e.props.setMediaSize(e.mediaSize);var F=e.props.cropSize?e.props.cropSize:ge(e.mediaSize.width,e.mediaSize.height,e.containerRect.width,e.containerRect.height,e.props.aspect,e.props.rotation);return(((u=e.state.cropSize)===null||u===void 0?void 0:u.height)!==F.height||((m=e.state.cropSize)===null||m===void 0?void 0:m.width)!==F.width)&&e.props.onCropSizeChange&&e.props.onCropSizeChange(F),e.setState({cropSize:F},e.recomputeCropPosition),e.props.setCropSize&&e.props.setCropSize(F),F}},e.onMouseDown=function(r){r.preventDefault(),document.addEventListener("mousemove",e.onMouseMove),document.addEventListener("mouseup",e.onDragStopped),e.onDragStart(o.getMousePoint(r))},e.onMouseMove=function(r){return e.onDrag(o.getMousePoint(r))},e.onTouchStart=function(r){e.props.onTouchRequest&&!e.props.onTouchRequest(r)||(document.addEventListener("touchmove",e.onTouchMove,{passive:!1}),document.addEventListener("touchend",e.onDragStopped),r.touches.length===2?e.onPinchStart(r):r.touches.length===1&&e.onDragStart(o.getTouchPoint(r.touches[0])))},e.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?e.onPinchMove(r):r.touches.length===1&&e.onDrag(o.getTouchPoint(r.touches[0]))},e.onDragStart=function(r){var n,i,l=r.x,u=r.y;e.dragStartPosition={x:l,y:u},e.dragStartCrop=Ee({},e.props.crop),(i=(n=e.props).onInteractionStart)===null||i===void 0||i.call(n)},e.onDrag=function(r){var n=r.x,i=r.y;e.rafDragTimeout&&window.cancelAnimationFrame(e.rafDragTimeout),e.rafDragTimeout=window.requestAnimationFrame(function(){if(!!e.state.cropSize&&!(n===void 0||i===void 0)){var l=n-e.dragStartPosition.x,u=i-e.dragStartPosition.y,m={x:e.dragStartCrop.x+l,y:e.dragStartCrop.y+u},d=e.props.restrictPosition?Ze(m,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):m;e.props.onCropChange(d)}})},e.onDragStopped=function(){var r,n;e.cleanEvents(),e.emitCropData(),(n=(r=e.props).onInteractionEnd)===null||n===void 0||n.call(r)},e.onWheel=function(r){if(!(e.props.onWheelRequest&&!e.props.onWheelRequest(r))){r.preventDefault();var n=o.getMousePoint(r),i=S()(r).pixelY,l=e.props.zoom-i*e.props.zoomSpeed/200;e.setNewZoom(l,n,{shouldUpdatePosition:!0}),e.state.hasWheelJustStarted||e.setState({hasWheelJustStarted:!0},function(){var u,m;return(m=(u=e.props).onInteractionStart)===null||m===void 0?void 0:m.call(u)}),e.wheelTimer&&clearTimeout(e.wheelTimer),e.wheelTimer=window.setTimeout(function(){return e.setState({hasWheelJustStarted:!1},function(){var u,m;return(m=(u=e.props).onInteractionEnd)===null||m===void 0?void 0:m.call(u)})},250)}},e.getPointOnContainer=function(r){var n=r.x,i=r.y;if(!e.containerRect)throw new Error("The Cropper is not mounted");return{x:e.containerRect.width/2-(n-e.containerRect.left),y:e.containerRect.height/2-(i-e.containerRect.top)}},e.getPointOnMedia=function(r){var n=r.x,i=r.y,l=e.props,u=l.crop,m=l.zoom;return{x:(n+u.x)/m,y:(i+u.y)/m}},e.setNewZoom=function(r,n,i){var l=(i===void 0?{}:i).shouldUpdatePosition,u=l===void 0?!0:l;if(!(!e.state.cropSize||!e.props.onZoomChange)){var m=e.getPointOnContainer(n),d=e.getPointOnMedia(m),h=_t(r,e.props.minZoom,e.props.maxZoom),b={x:d.x*h-m.x,y:d.y*h-m.y};if(u){var g=e.props.restrictPosition?Ze(b,e.mediaSize,e.state.cropSize,h,e.props.rotation):b;e.props.onCropChange(g)}e.props.onZoomChange(h)}},e.getCropData=function(){if(!e.state.cropSize)return null;var r=e.props.restrictPosition?Ze(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;return st(r,e.mediaSize,e.state.cropSize,e.getAspect(),e.props.zoom,e.props.rotation,e.props.restrictPosition)},e.emitCropData=function(){var r=e.getCropData();if(!!r){var n=r.croppedAreaPercentages,i=r.croppedAreaPixels;e.props.onCropComplete&&e.props.onCropComplete(n,i),e.props.onCropAreaChange&&e.props.onCropAreaChange(n,i)}},e.emitCropAreaChange=function(){var r=e.getCropData();if(!!r){var n=r.croppedAreaPercentages,i=r.croppedAreaPixels;e.props.onCropAreaChange&&e.props.onCropAreaChange(n,i)}},e.recomputeCropPosition=function(){if(!!e.state.cropSize){var r=e.props.restrictPosition?Ze(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;e.props.onCropChange(r),e.emitCropData()}},e}return o.prototype.componentDidMount=function(){window.addEventListener("resize",this.computeSizes),this.containerRef&&(this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.preventZoomSafari),this.containerRef.addEventListener("gesturechange",this.preventZoomSafari)),this.props.disableAutomaticStylesInjection||(this.styleRef=document.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=xr,document.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef)},o.prototype.componentWillUnmount=function(){var e;window.removeEventListener("resize",this.computeSizes),this.containerRef&&(this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.containerRef.removeEventListener("gesturechange",this.preventZoomSafari)),this.styleRef&&((e=this.styleRef.parentNode)===null||e===void 0||e.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()},o.prototype.componentDidUpdate=function(e){var r,n,i,l,u,m,d,h,b;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():((r=e.cropSize)===null||r===void 0?void 0:r.height)!==((n=this.props.cropSize)===null||n===void 0?void 0:n.height)||((i=e.cropSize)===null||i===void 0?void 0:i.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((u=e.crop)===null||u===void 0?void 0:u.x)!==((m=this.props.crop)===null||m===void 0?void 0:m.x)||((d=e.crop)===null||d===void 0?void 0:d.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&((b=this.videoRef.current)===null||b===void 0||b.load())},o.prototype.getAspect=function(){var e=this.props,r=e.cropSize,n=e.aspect;return r?r.width/r.height:n},o.prototype.onPinchStart=function(e){var r=o.getTouchPoint(e.touches[0]),n=o.getTouchPoint(e.touches[1]);this.lastPinchDistance=xe(r,n),this.lastPinchRotation=at(r,n),this.onDragStart(Ha(r,n))},o.prototype.onPinchMove=function(e){var r=this,n=o.getTouchPoint(e.touches[0]),i=o.getTouchPoint(e.touches[1]),l=Ha(n,i);this.onDrag(l),this.rafPinchTimeout&&window.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=window.requestAnimationFrame(function(){var u=xe(n,i),m=r.props.zoom*(u/r.lastPinchDistance);r.setNewZoom(m,l,{shouldUpdatePosition:!1}),r.lastPinchDistance=u;var d=at(n,i),h=r.props.rotation+(d-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=d})},o.prototype.render=function(){var e=this,r=this.props,n=r.image,i=r.video,l=r.mediaProps,u=r.transform,m=r.crop,d=m.x,h=m.y,b=r.rotation,g=r.zoom,R=r.cropShape,T=r.showGrid,w=r.style,F=w.containerStyle,le=w.cropAreaStyle,_=w.mediaStyle,ae=r.classes,M=ae.containerClassName,x=ae.cropAreaClassName,q=ae.mediaClassName,D=r.objectFit;return t().createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(B){return e.containerRef=B},"data-testid":"container",style:F,className:qt("reactEasyCrop_Container",M)},n?t().createElement("img",Ee({alt:"",className:qt("reactEasyCrop_Image",D==="contain"&&"reactEasyCrop_Contain",D==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",D==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",D==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),q)},l,{src:n,ref:this.imageRef,style:Ee(Ee({},_),{transform:u||"translate("+d+"px, "+h+"px) rotate("+b+"deg) scale("+g+")"}),onLoad:this.onMediaLoad})):i&&t().createElement("video",Ee({autoPlay:!0,loop:!0,muted:!0,className:qt("reactEasyCrop_Video",D==="contain"&&"reactEasyCrop_Contain",D==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",D==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",D==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),q)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Ee(Ee({},_),{transform:u||"translate("+d+"px, "+h+"px) rotate("+b+"deg) scale("+g+")"}),controls:!1}),(Array.isArray(i)?i:[{src:i}]).map(function(ce){return t().createElement("source",Ee({key:ce.src},ce))})),this.state.cropSize&&t().createElement("div",{style:Ee(Ee({},le),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:qt("reactEasyCrop_CropArea",R==="round"&&"reactEasyCrop_CropAreaRound",T&&"reactEasyCrop_CropAreaGrid",x)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Tr,minZoom:br,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},o.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},o.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},o}(t().Component),wr=Zr,Ue="img-crop",Sa=1,jt=.1,xa=0,ba=1,Ga=-180,Ya=180,Ir=(0,p.forwardRef)((a,o)=>{var e=a.cropperRef,r=a.image,n=a.aspect,i=a.shape,l=a.grid,u=a.zoom,m=a.zoomVal,d=a.setZoomVal,h=a.minZoom,b=a.maxZoom,g=a.rotateVal,R=a.setRotateVal,T=a.cropperProps,w=a.cropStyle,F=(0,p.useState)({x:0,y:0}),le=(0,j.Z)(F,2),_=le[0],ae=le[1],M=(0,p.useState)({width:0,height:0}),x=(0,j.Z)(M,2),q=x[0],D=x[1],ce=(0,p.useRef)({width:0,height:0,x:0,y:0}),B=(0,p.useCallback)(we=>{var Y=we.width,X=we.height,be=X*n;Y>be?D({width:be,height:X}):D({width:Y,height:Y/n})},[n]),Fe=(0,p.useCallback)((we,Y)=>{ce.current=Y},[]);return(0,p.useImperativeHandle)(o,()=>({cropPixelsRef:ce}),[]),t().createElement(p.Fragment,null,t().createElement(wr,(0,k.Z)({},T,{ref:e,image:r,crop:_,cropSize:q,onCropChange:ae,aspect:n,cropShape:i,showGrid:l,zoomWithScroll:u,zoom:m,rotation:g,onZoomChange:d,onRotationChange:R,minZoom:h,maxZoom:b,onMediaLoaded:B,onCropComplete:Fe,style:w,classes:{containerClassName:"".concat(Ue,"-container"),mediaClassName:"".concat(Ue,"-media")}})))}),Pr=(0,p.memo)(Ir),Xa=(0,p.forwardRef)((a,o)=>{var e=a.aspect,r=e===void 0?1:e,n=a.shape,i=n===void 0?"rect":n,l=a.grid,u=l===void 0?!1:l,m=a.quality,d=m===void 0?1:m,h=a.fillColor,b=h===void 0?"white":h,g=a.zoom,R=g===void 0?!0:g,T=a.rotate,w=T===void 0?!1:T,F=a.initZoom,le=a.minZoom,_=le===void 0?1:le,ae=a.maxZoom,M=ae===void 0?3:ae,x=a.cropStyle,q=a.modalTitle,D=a.modalWidth,ce=a.modalOk,B=a.modalCancel,Fe=a.onModalOk,we=a.onModalCancel,Y=a.otherFooter,X=a.reUpload,be=a.uploadId,Ve=a.beforeCrop,Se=a.onUploadFail,rt=a.cropperProps,Le=a.children,vt=a.topChildren,K=a.t,V=(0,p.useRef)({});V.current.onModalOk=Fe,V.current.onModalCancel=we,V.current.beforeCrop=Ve,V.current.onUploadFail=Se;var ze=(0,p.useState)(""),Ie=(0,j.Z)(ze,2),Xe=Ie[0],_e=Ie[1],Et=(0,p.useState)(F||Sa),z=(0,j.Z)(Et,2),$=z[0],ue=z[1],St=(0,p.useState)(xa),qe=(0,j.Z)(St,2),Ke=qe[0],$e=qe[1],De=(0,p.useRef)(),lt=(0,p.useRef)(),We=(0,p.useRef)(),Lt=(0,p.useRef)(),Dt=(0,p.useMemo)(()=>{var Te=Array.isArray(Le)?Le[0]:Le,re=Te.props,Pe=re.beforeUpload,ot=re.accept,W=(0,Xt.Z)(re,["beforeUpload","accept"]);lt.current=Pe;var P=(0,C.Z)((0,C.Z)({},W),{},{accept:ot||"image/*",beforeUpload:(J,oe)=>new Promise(function(){var ct=(0,Ct.Z)(Ge().mark(function Me(ut,bt){var dt;return Ge().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(ye.t0=V.current.beforeCrop,!ye.t0){ye.next=5;break}return ye.next=4,V.current.beforeCrop(J,oe);case 4:ye.t0=!ye.sent;case 5:if(!ye.t0){ye.next=8;break}return bt(),ye.abrupt("return");case 8:De.current=J,We.current=Je=>{var et,mt;(et=(mt=V.current).onModalOk)===null||et===void 0||et.call(mt,Je),ut(Je)},Lt.current=Je=>{var et,mt;(et=(mt=V.current).onUploadFail)===null||et===void 0||et.call(mt,Je),bt(Je)},dt=new FileReader,dt.addEventListener("load",()=>typeof dt.result=="string"&&_e(dt.result)),dt.readAsDataURL(J);case 14:case"end":return ye.stop()}},Me)}));return function(Me,ut){return ct.apply(this,arguments)}}())});return(0,C.Z)((0,C.Z)({},Te),{},{props:P})},[Le]),Mt=(0,p.useRef)({}),xt=(0,p.useMemo)(()=>{var Te={width:D,okText:ce,cancelText:B};return Object.keys(Te).forEach(re=>{Te[re]||delete Te[re]}),Te},[B,ce,D]),ra=()=>{_e(""),ue(F||Sa),$e(xa)},oa=(0,p.useCallback)(()=>{var Te,re;(Te=(re=V.current).onModalCancel)===null||Te===void 0||Te.call(re),ra()},[]),Ut=(0,p.useCallback)((0,Ct.Z)(Ge().mark(function Te(){var re,Pe,ot,W,P,J,oe,ct,Me,ut,bt,dt,sa,ye,Je,et,mt,ur,dr,mr,la,Pa,pr,hr,fr;return Ge().wrap(function(Na){for(;;)switch(Na.prev=Na.next){case 0:ra(),re=document.createElement("canvas"),Pe=re.getContext("2d"),ot=document.querySelector(".".concat(Ue,"-media")),console.log("easyCropRef.current.cropPixelsRef.current===",Mt.current.cropPixelsRef.current),W=Mt.current.cropPixelsRef.current,P=W.width,J=W.height,oe=W.x,ct=W.y,w&&Ke!==xa?(Me=ot.naturalWidth,ut=ot.naturalHeight,bt=Ke*(Math.PI/180),dt=Math.abs(Math.sin(bt)),sa=Math.abs(Math.cos(bt)),ye=Me*sa+ut*dt,Je=ut*sa+Me*dt,re.width=ye,re.height=Je,Pe.fillStyle=b,Pe.fillRect(0,0,ye,Je),et=ye/2,mt=Je/2,Pe.translate(et,mt),Pe.rotate(bt),Pe.translate(-et,-mt),ur=(ye-Me)/2,dr=(Je-ut)/2,Pe.drawImage(ot,0,0,Me,ut,ur,dr,Me,ut),mr=Pe.getImageData(0,0,ye,Je),re.width=P,re.height=J,Pe.putImageData(mr,-oe,-ct)):(re.width=P,re.height=J,Pe.fillStyle=b,Pe.fillRect(0,0,P,J),Pe.drawImage(ot,oe,ct,P,J,0,0,P,J)),la=De.current,Pa=la.type,pr=la.name,hr=la.uid,fr=function(){var fo=(0,Ct.Z)(Ge().mark(function vr(gr){var Ot,gt,ca;return Ge().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(Ot=Object.assign(new File([gr],pr,{type:Pa}),{uid:hr}),typeof lt.current=="function"){ne.next=3;break}return ne.abrupt("return",We.current(Ot));case 3:if(gt=lt.current(Ot,[Ot]),!(typeof gt!="boolean"&&!gt)){ne.next=7;break}return console.error("beforeUpload must return a boolean or Promise"),ne.abrupt("return");case 7:if(gt!==!0){ne.next=9;break}return ne.abrupt("return",We.current(Ot));case 9:if(gt!==!1){ne.next=11;break}return ne.abrupt("return",Lt.current(new Error("not upload")));case 11:if(!(gt&&gt instanceof Promise)){ne.next=24;break}return ne.prev=12,ne.next=15,gt;case 15:if(ca=ne.sent,!(ca instanceof File||ca instanceof Blob)){ne.next=18;break}return ne.abrupt("return",We.current(ca));case 18:We.current(Ot),ne.next=24;break;case 21:ne.prev=21,ne.t0=ne.catch(12),Lt.current(ne.t0);case 24:case"end":return ne.stop()}},vr,null,[[12,21]])}));return function(gr){return fo.apply(this,arguments)}}(),re.toBlob(fr,Pa,d);case 10:case"end":return Na.stop()}},Te)})),[b,d,w]),na=()=>{var Te=document.getElementById(be);Te.click()},ia=()=>t().createElement(p.Fragment,null,t().createElement("div",{className:"".concat(Ue,"-modal-footer")},t().createElement("div",{className:"".concat(Ue,"-modal-footer-tip")},Y),t().createElement("div",{className:"".concat(Ue,"-modal-footer-btns")},t().createElement(te.Z,null,t().createElement(G.Z,{onClick:oa},K("common.cancel")),t().createElement(G.Z,{type:"primary",onClick:Ut},K("common.ok"))))));return t().createElement(p.Fragment,null,Dt,Xe&&t().createElement(A.Z,(0,k.Z)({visible:!0,wrapClassName:"".concat(Ue,"-modal"),title:q||K("common.crop"),maskClosable:!1,destroyOnClose:!0,onOk:Ut,onCancel:oa,footer:ia()},xt),vt,t().createElement(Pr,{ref:Mt,cropperRef:o,image:Xe,aspect:r,shape:i,grid:u,zoom:R,zoomVal:$,setZoomVal:ue,rotateVal:Ke,setRotateVal:$e,rotate:w,minZoom:_,maxZoom:M,cropperProps:rt,cropStyle:x}),R&&t().createElement("section",{className:"".concat(Ue,"-control ").concat(Ue,"-control-zoom")},t().createElement("button",{onClick:()=>ue($-jt),disabled:$-jt<_},"\uFF0D"),t().createElement(Yt.Z,{min:_,max:M,step:jt,value:$,onChange:ue}),t().createElement("button",{onClick:()=>ue($+jt),disabled:$+jt>M},"\uFF0B")),w&&t().createElement("section",{className:"".concat(Ue,"-control ").concat(Ue,"-control-rotate")},t().createElement("button",{onClick:()=>$e(Ke-ba),disabled:Ke===Ga},"\u21BA"),t().createElement(Yt.Z,{min:Ga,max:Ya,step:ba,value:Ke,onChange:$e}),t().createElement("button",{onClick:()=>$e(Ke+ba),disabled:Ke===Ya},"\u21BB")),X&&t().createElement("section",{className:"".concat(Ue,"-control ").concat(Ue,"-control-reUpload")},t().createElement(G.Z,{type:"link",onClick:na},K("component.reUpload")))))});Xa.defaultProps={aspect:1,shape:"react",grid:!1,quality:1,fillColor:"white",zoom:!0,rotate:!1,reUpload:!1,initZoom:Sa,minZoom:1,maxZoom:3,cropStyle:{},modalWidth:520};var Nr=(0,U.Z)()(Xa),Ta=s(24144),Nt=s(84874),Rr=s(91648),Ka=a=>{var o=a.t,e=a.userInfo,r=a.className,n=a.disabled,i=a.config_type,l=a.uploadTip,u=a.uploadText,m=a.tooltipContent,d=a.imageStyle,h=a.imgSize,b=a.onRefreshList,g=a.uploadCallback,R=a.corpConfig,T=["jpg","jpeg","png"],w=(0,p.useState)(!1),F=(0,j.Z)(w,2),le=F[0],_=F[1],ae=(0,p.useState)(!0),M=(0,j.Z)(ae,2),x=M[0],q=M[1],D="upload-".concat((0,Rr.Z)()),ce=K=>{if(T.indexOf(K.name.split(".").pop().toLowerCase())<0)return L.default.error(o("component.imgTypeError")),!1;if(h&&h.value&&h.unit){var V=h.value,ze=h.unit,Ie=ze.toLowerCase()==="kb"?K.size/1024<V:K.size/1024/1024<V;if(!Ie)return L.default.error("".concat(o("component.imgUploadLimit")).concat(V).concat(ze,"!")),!1}return!0},B=K=>{var V=K.file,ze=new FormData;ze.append("file",V),ze.append("access_token",localStorage.getItem("token")),(0,Ta.Pd)(ze).then(Ie=>{if(Ie.success==="true"){var Xe=Ie.data,_e=Xe.file_new_name,Et=Xe.server,z="".concat(Et,"/").concat(_e);g?g(z):(0,Ta.$Y)({url_list:[z],config_type:i}).then($=>{$.success==="true"&&b($.data)})}}).catch(Ie=>{Fe({error:Ie,data:{fileList:[{fileName:V.name}]}})})},Fe=K=>{L.default.error(K)},we=()=>{pa({userId:e.id,type:998}).then(K=>{var V=K.data.data,ze=V.guide_view,Ie=V.is_new_enterprise,Xe=ze&&!Ie;if(Xe)_(Xe),q(!1);else{q(!0);var _e=document.getElementById(D);setTimeout(()=>{_e.click()},0)}})},Y=K=>{if(K.stopPropagation(),K.preventDefault(),!n)if(R.showGuideCheck)we();else{var V=document.getElementById(D);V.click()}},X=()=>t().createElement("div",{className:He().uploadText,id:D},t().createElement(ha.Z,{className:He().uploadIcon,style:{fontSize:"16px"}}),u||"",l&&t().createElement("div",{className:He().uploadTip},l||null)),be={accept:".jpg,.jpeg,.png",listType:"picture-card",showUploadList:!1,beforeUpload:ce,customRequest:B,disabled:n},Ve={aspect:4/3,resizeAndDrag:!0,modalTitle:o("course.clipModalTitle"),reUpload:!0,uploadId:D},Se=()=>{if(!x){var K=document.getElementById(D);K.click()}q(!0),_(!1)},rt=()=>{q(!0),_(!0)},Le=i==="portrait"?t().createElement("span",{onClick:rt,className:He().instructions},t().createElement(Nt.Z,{iconClass:"icon-shuoming"}),o("course.instructions")):null,vt=i==="portrait"?t().createElement("div",{className:He().uploadCropTop},o("course.instructionsContent")):null;return t().createElement(p.Fragment,null,t().createElement("div",{className:Ht()(r,He().themeBox,He().uploadBox),disabled:be.disabled,style:d.style||{width:"162px",height:"124px"}},t().createElement(zt.Z,{title:m},t().createElement(Nr,(0,k.Z)({},Ve,R,{otherFooter:Le,topChildren:vt}),t().createElement(it.Z,(0,k.Z)({},be,{className:He().themeContent}),X())),t().createElement("div",{className:He().themeMask,onClick:Y})),t().createElement(Gt,{visible:le,onOk:Se,onCancel:Se})))};Ka.defaultProps={className:"",disabled:!1,config_type:"",imageStyle:{},imgSize:{},corpConfig:{}};var Lr=a=>({userInfo:a.user,showImgGuide:a.courseManagement.showImgGuide}),Ja=(0,Q.$j)(Lr)((0,U.Z)()(Ka)),Dr=s(8576),Ce=s.n(Dr),Qa=a=>{var o=a.t,e=a.className,r=a.imageStyle,n=a.isManage,i=a.disabled,l=a.checked,u=a.info,m=a.onSelect,d=a.onDelete,h=()=>{n||i||m&&m(u)},b=()=>{d&&d(u)},g=()=>{var T=u.url.split(".");return T[T.length-1]==="gif"},R=()=>{var T=r.style||{width:"162px",height:"124px"},w=(0,C.Z)({},T);return!n&&l?(0,C.Z)((0,C.Z)({},w),{},{borderColor:localStorage.getItem("themeColor")||"#465dcd",backgroundColor:"#FFFFFF"}):w};return t().createElement(p.Fragment,null,t().createElement("div",{key:u.id||u.url,className:Ht()(e,Ce().themeBox,n?"":Ce().hoverBox),style:R(),onClick:h},t().createElement("div",{className:Ce().themeContent},t().createElement("img",{className:Ce().img,src:u.url}),g(u)&&t().createElement("span",{className:Ce().animateFlag},o("course.animate")),n&&!u.is_default&&t().createElement("span",{className:Ce().deleteIcon,onClick:b}))))};Qa.defaultProps={className:"",info:{},isManage:!1,disabled:!1,checked:!1,imageStyle:{}};var _a=(0,U.Z)()(Qa),Mr=s(50361),Rt=s.n(Mr),qa=a=>{var o=a.visible,e=a.title,r=a.t,n=a.bgList,i=a.disabled,l=a.defaultLen,u=a.isManage,m=a.curObj,d=a.modalBoxClassName,h=a.modalWidth,b=a.imageStyle,g=a.bgManageUploadTip,R=a.uploadConfig,T=a.onCancel,w=a.onSelect,F=a.onRefresh,le=(0,Xt.Z)(a,["visible","title","t","bgList","disabled","defaultLen","isManage","curObj","modalBoxClassName","modalWidth","imageStyle","bgManageUploadTip","uploadConfig","onCancel","onSelect","onRefresh"]),_=(0,p.useState)((0,C.Z)({},m)),ae=(0,j.Z)(_,2),M=ae[0],x=ae[1],q=(0,p.useState)([]),D=(0,j.Z)(q,2),ce=D[0],B=D[1],Fe=(0,p.useState)([]),we=(0,j.Z)(Fe,2),Y=we[0],X=we[1],be=(0,p.useState)([]),Ve=(0,j.Z)(be,2),Se=Ve[0],rt=Ve[1],Le=20;(0,p.useEffect)(()=>{B(u?Rt()(n.filter(z=>!z.is_default)):Rt()(n))},[n,u]),(0,p.useEffect)(()=>{x((0,C.Z)({},m))},[m]),(0,p.useEffect)(()=>{X(Rt()(ce))},[ce]),(0,p.useEffect)(()=>{rt(Y.filter(z=>!z.needDelete)||[])},[Y]);var vt=function(){var z=(0,Ct.Z)(Ge().mark(function $(){var ue,St,qe;return Ge().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:u?(ue=Y.filter(De=>De.needUpload).map(De=>De.url)||[],St=Y.filter(De=>De.needDelete).map(De=>De.id)||[],qe=[],ue.length&&qe.push((0,Ta.$Y)({url_list:ue,config_type:R.config_type})),St.length&&qe.push(ma({idList:St})),qe.length?Promise.all(qe).then(De=>{var lt=!1;De.forEach(We=>{We.success==="false"&&(lt=!0,L.default.error(We.message))}),lt||(F(ue.length?De[0].data:[],Y.filter(We=>We.needDelete)),T())}):V()):(w(M,!0),K());case 1:case"end":return $e.stop()}},$)}));return function(){return z.apply(this,arguments)}}(),K=()=>{if(u){var z=Y.filter(ue=>ue.needUpload).map(ue=>ue.url)||[],$=Y.filter(ue=>ue.needDelete).map(ue=>ue.id)||[];z.length||$.length?A.Z.confirm({title:r("course.leaveTipTitle"),content:r("course.leaveTip",{configType:e}),okText:r("common.ok"),cancelText:r("common.cancel"),onOk:()=>{V()},onCancel(){}}):V()}else V()},V=()=>{X(Rt()(ce)),T()},ze=z=>{x((0,C.Z)({},z))},Ie=z=>{z.id?X(Rt()(Y.map($=>($.id===z.id&&($.needDelete=!0),(0,C.Z)({},$))))):X(Rt()(Y.filter($=>$.url!==z.url)))},Xe=z=>{var $={url:z,needUpload:!0};X([$,...Y])},_e=z=>Le-Se.length<=l?z?r("course.uploadManageTooltip",{num:Le-l}):r("course.uploadTooltip",{num:Le-l,configType:e}):null,Et=localStorage.getItem("themeColor")||"#516ae6";return t().createElement(p.Fragment,null,t().createElement(A.Z,{title:"".concat(r(u?"course.management":"course.select")).concat(e),visible:o,onCancel:K,onOk:vt,width:h||728,className:Ce().bgSelectModal,destroyOnClose:!0},u&&t().createElement("div",{className:Ce().bgUploadTip},g),t().createElement("div",{className:Ce().bgContent},u&&t().createElement("div",{className:Ce()[d]},t().createElement(Ja,(0,k.Z)({uploadTip:t().createElement("span",null,r("course.bgModalUploadTip"),"\xA0",t().createElement("span",{style:{color:Et}},Le-Se.length-l>0?Le-Se.length-l:0),"\xA0",r("course.uploadUnit"))},R,le,{tooltipContent:_e(!0),disabled:i||Le-Se.length<=l,uploadCallback:Xe}))),Se.map(z=>t().createElement(_a,(0,k.Z)({key:z.id||z.url,className:Ce()[d],info:z,isManage:u,imageStyle:b,checked:M.id===z.id,onSelect:$=>ze($),onDelete:Ie,disabled:i},le))))))};qa.defaultProps={visible:!1,isManage:!1,bgList:[],onCancel:()=>{},onSelect:()=>{},onRefresh:()=>{}};var Or=(0,Q.$j)()((0,U.Z)()(qa)),er=a=>{var o=a.t,e=a.value,r=a.defaultValue,n=a.config_type,i=a.disabled,l=a.defaultLen,u=a.themeTip,m=a.imgSize,d=a.title,h=a.manageModalConfig,b=a.corpConfig,g=a.onChange,R=a.onChangeUrlObj,T=(0,p.useState)([]),w=(0,j.Z)(T,2),F=w[0],le=w[1],_=(0,p.useState)([]),ae=(0,j.Z)(_,2),M=ae[0],x=ae[1],q=(0,p.useState)(!1),D=(0,j.Z)(q,2),ce=D[0],B=D[1],Fe=(0,p.useState)(!1),we=(0,j.Z)(Fe,2),Y=we[0],X=we[1],be=(0,p.useState)({}),Ve=(0,j.Z)(be,2),Se=Ve[0],rt=Ve[1],Le=(0,p.useState)({}),vt=(0,j.Z)(Le,2),K=vt[0],V=vt[1],ze=(0,p.useState)("themeContent"),Ie=(0,j.Z)(ze,2),Xe=Ie[0],_e=Ie[1],Et=(0,p.useState)("imageBox"),z=(0,j.Z)(Et,2),$=z[0],ue=z[1],St=(0,p.useState)({}),qe=(0,j.Z)(St,2),Ke=qe[0],$e=qe[1],De=(0,p.useState)(!1),lt=(0,j.Z)(De,2),We=lt[0],Lt=lt[1],Dt=20;(0,p.useEffect)(()=>{Mt(!0),oa()},[]),(0,p.useEffect)(()=>{var W=F.find(P=>P.is_default?P.default_enum===e:P.url===e);R(W||{})},[e,F]),(0,p.useEffect)(()=>{e===r&&We&&xt(M,e)},[e,r,We]);var Mt=W=>{$t({config_type:n}).then(P=>{var J=P.success;J==="true"&&(le(P.data||[]),W&&xt(P.data,e))})},xt=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[...M],J=arguments.length>1?arguments[1]:void 0;if(!(!P||!P.length)){var oe=P.find(Me=>Me.is_default?Me.default_enum===J:Me.url===J);if(oe)ra(P,oe),$e((0,C.Z)({},oe));else{var ct=P.find(Me=>Me.default_enum===r);x(P),g(r),$e((0,C.Z)({},ct))}}},ra=(W,P)=>{var J=W.filter(oe=>oe.id!==P.id);x([P,...J])},oa=()=>{switch(n){case"portrait":rt({style:{width:"82px",height:"82px"}}),V({style:{width:"92px",height:"92px"}}),_e("portraitContent"),ue("portraitBox");break;default:rt({}),_e("themeContent"),ue("imageBox");break}},Ut=W=>{B(!ce),X(W)},na=function(P){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,oe=P.is_default?P.default_enum:P.url;Lt(oe!==r),g(oe),J?xt(M,oe):$e((0,C.Z)({},P))},ia=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Mt();var oe=[...P,...M];J.length&&(oe=Vt()(J,oe,"id")),P.length?(g(P[0].url),xt(oe,P[0].url)):Vt()([Ke],J,"id").length?x(oe):(g(r),xt(oe,r))},Te=W=>{var P=W.url,J=W.default_enum,oe=W.is_default,ct=oe?J:P;return e===ct},re=M.length<=l,Pe=W=>M.length>=Dt?W?o("course.uploadManageTooltip",{num:Dt-l}):o("course.uploadTooltip",{num:Dt-l,configType:d}):null,ot={config_type:n,onRefreshList:ia,imageStyle:Se,corpConfig:(0,C.Z)({},b),imgSize:m,disabled:i||M.length>=Dt};return t().createElement(p.Fragment,null,t().createElement("div",{className:Ce().themeContainer},t().createElement("div",{className:Ce().themeBtns},t().createElement(zt.Z,{title:re?o(n==="background"?"course.bgImgManageBtnTooltip":"course.portraitImgManageBtnTooltip"):null},t().createElement("span",{className:Ce().themeBtn,disabled:re||i,onClick:()=>!re&&Ut(!0)},t().createElement(Nt.Z,{iconClass:"icon-shezhi1"}),o("course.management"))),t().createElement("span",{type:"link",className:Ce().themeBtn,disabled:i,onClick:()=>!i&&Ut(!1)},o("common.more"))),t().createElement("div",{className:Ce()[Xe]},t().createElement(Ja,(0,k.Z)({className:Ce()[$]},ot,{tooltipContent:Pe(!1)})),M.map(W=>t().createElement(_a,{key:W.id,info:W,disabled:i,className:Ce()[$],checked:Te(W),imageStyle:Se,onSelect:na}))),t().createElement("div",{className:Ce().themeTip},u||o("course.themeBackgroundTip")),t().createElement(Or,(0,k.Z)({visible:ce,uploadConfig:(0,C.Z)((0,C.Z)({},ot),{},{imageStyle:K}),disabled:i,defaultLen:l},h,{title:d,curObj:Ke,bgList:M,isManage:Y,modalBoxClassName:$,onCancel:()=>B(!1),onSelect:na,onRefresh:ia,imageStyle:K}))))};er.defaultProps={value:"",config_type:"background",defaultLen:8};var Fr=(0,Z.$j)((0,U.Z)()(er)),zr=s(81786),ht=s.n(zr),Ar=a=>{var o=a.item,e=a.value,r=a.disabled,n=a.onChange,i=(0,p.useState)(!1),l=(0,j.Z)(i,2),u=l[0],m=l[1],d=localStorage.getItem("themeColor")||"#465dcd",h=g=>{r||(n({voice:g.default_enum}),m(!0))},b=g=>g.default_enum===e.voice?{borderColor:d}:{};return t().createElement("div",{className:ht().voiceContainer,style:b(o),onClick:()=>h(o)},t().createElement("div",{className:ht().voiceContent},t().createElement("img",{className:ht().img,src:o.icon}),t().createElement("div",{className:ht().voiceName},o.name),t().createElement("div",{className:ht().videoBtnBox,style:o.default_enum===e.voice?{border:"2px solid ".concat(d),padding:0}:{padding:"2px"}},t().createElement("div",{className:ht().videoBtn},o.default_enum===e.voice?t().createElement(Nt.Z,{iconClass:"icon-shengyinbofang",color:d,size:"12px"}):t().createElement(Nt.Z,{iconClass:"icon-shengyin-2",color:"#767883",size:"12px"})))),o.default_enum===e.voice&&t().createElement("audio",{autoPlay:u},t().createElement("source",{src:o.url}),"\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 audio \u5143\u7D20\u3002"))},tr=a=>{var o=(0,p.useState)([]),e=(0,j.Z)(o,2),r=e[0],n=e[1];(0,p.useEffect)(()=>{i()},[]);var i=()=>{$t({config_type:"voice"}).then(l=>{var u=l.data,m=l.success;m==="true"&&n(u)})};return t().createElement(p.Fragment,null,t().createElement("div",{className:ht().figureContainer},t().createElement("div",{className:ht().figureContent},r.map(l=>t().createElement(Ar,(0,k.Z)({key:l.id,item:l},a))))))};tr.defaultProps={value:{},disabled:!1,onChange:()=>{}};var kr=(0,Z.$j)((0,U.Z)()(tr)),vo=s(47673),jr=s(4107),Br=s(90631),Ur=s(75501),yt=s.n(Ur),Vr=jr.Z.TextArea,$r=["txt","doc","docx"],Za=!1,Wr=a=>{var o=a.t,e=a.value,r=e===void 0?"":e,n=a.onChange,i=a.disabled,l=(0,p.useState)(!1),u=(0,j.Z)(l,2),m=u[0],d=u[1],h=function(){var T=(0,Ct.Z)(Ge().mark(function w(F){var le,_,ae,M,x,q,D;return Ge().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(le=F.name.split(".").pop(),_=$r.indexOf(le.toLocaleLowerCase())>-1,_){B.next=5;break}return L.default.error(o("course.uploadFieldTypeTip")),B.abrupt("return",!1);case 5:if(ae=F.size/1024/1024<2,ae){B.next=9;break}return L.default.error(o("course.uploadFieldSizeTip")),B.abrupt("return",!1);case 9:return M=new FormData,M.append("file",F),M.append("access_token",window.localStorage.getItem("token")),d(!0),B.next=15,Wt(M);case 15:x=B.sent,q=x.success,D=x.data,q==="true"&&(Za?Za=!1:D?n(D):L.default.warning(o("course.uploadFileNullTip")),d(!1));case 18:case"end":return B.stop()}},w)}));return function(F){return T.apply(this,arguments)}}(),b=T=>{var w=T.target?T.target.value:"";n&&n(w)},g=()=>{d(!1),Za=!0},R={name:"file",accept:".txt, .doc, .docx",showUploadList:!1,beforeUpload:h};return t().createElement(p.Fragment,null,t().createElement("div",{className:yt().aiContentContainer},t().createElement(it.Z,(0,k.Z)({},R,{className:yt().importBtn,disabled:i}),t().createElement(zt.Z,{placement:"topRight",title:"".concat(o("course.aiCourseContentImportTip"))},t().createElement("span",{className:yt().importText},t().createElement(Br.Z,null),"\xA0",o("course.aiCourseContentImportText")))),t().createElement(Vr,{required:!0,value:r,disabled:i,autoSize:{maxRows:8,minRows:6},placeholder:o("course.aiCourseContentPlaceHolder"),onChange:b}),t().createElement("span",{className:yt().dataCount},t().createElement("span",{style:r.length>1e3?{color:"#F03A3A"}:{}},r.length),"/1000"),t().createElement(A.Z,{visible:m,title:null,onCancel:g,className:yt().loadingModal,footer:null},t().createElement("div",{className:yt().loadingText},t().createElement(Nt.Z,{iconClass:"icon-loading-xs"}),t().createElement("span",{style:{marginLeft:"16px"}},o("course.importLoadingModalTitle"))),t().createElement("div",{className:yt().lodingBtns},t().createElement(G.Z,{onClick:g},o("common.cancel"))))))},Hr=(0,Z.$j)((0,U.Z)()(Wr)),go=s(43358),wa=s(34041),ar=s(39098),Gr=s(7573),se=s.n(Gr),Yr=s(91302),rr=wa.Z.Option,or=a=>{var o=a.t,e=a.value,r=a.onChange,n=a.aiInfo,i=n===void 0?{}:n,l=a.disabled,u=(0,p.useState)(!1),m=(0,j.Z)(u,2),d=m[0],h=m[1],b=Yr.d8,g=[{fontSize:"16px",lineHeight:"22px",name:o("course.font16"),size:"42px",top:"27px",height:"86px"},{fontSize:"18px",lineHeight:"23px",name:o("course.font18"),size:"46px",top:"25px",height:"92px"},{fontSize:"20px",lineHeight:"25px",name:o("course.font20"),size:"50px",top:"33px",height:"75px"},{fontSize:"22px",lineHeight:"26px",name:o("course.font22"),size:"54px",top:"31px",height:"79px"},{fontSize:"24px",lineHeight:"28px",name:o("course.font24"),size:"58px",top:"29px",height:"83px"},{fontSize:"26px",lineHeight:"29px",name:o("course.font26"),size:"62px",top:"27px",height:"88px"}],R=["#000000","#ffffff","#3277ff","#34c759","#ff3b30","#ff9500","#5856d6","#af52de","#816540"],T=(x,q)=>{if(!l){var D=x;r((0,C.Z)((0,C.Z)({},e),{},{[q]:D}))}},w=()=>{l||h(!d)},F=x=>{x.hex&&T(x.hex,"font_color")},le=()=>t().createElement("div",{className:se().sketchColorBox},t().createElement("div",{className:se().sketchColorBoxMask,onClick:w}),t().createElement(ar.xS,{color:e.font_color,onChange:F})),_=localStorage.getItem("themeColor")||"#465dcd",ae=()=>e.font_color&&!R.includes(e.font_color)?{borderColor:_}:{},M=()=>{var x=g.find(q=>q.size===e.font_size);return{fontSize:x.fontSize,fontFamily:e.font_weight,color:e.font_color,lineHeight:x.lineHeight,height:x.height,top:x.top}};return t().createElement(p.Fragment,null,t().createElement("div",{className:se().previewContainer},t().createElement("div",{className:se().previewContent,style:{backgroundImage:"url(".concat(i.background_url||"",")")}},t().createElement("div",{className:se().content,style:M()},i.content||o("course.defaultAiContentEg")),t().createElement("div",{className:se().previewFigure,style:{backgroundImage:"url(".concat(i.character_url||"",")")}})),t().createElement("div",{className:se().previewForm},t().createElement("div",{className:se().previewFormItem},t().createElement("div",{className:se().label},o("course.fontStyle")),t().createElement(wa.Z,{value:e.font_weight,disabled:l,onChange:x=>T(x,"font_weight")},b.map(x=>t().createElement(rr,{value:x.value,key:x.value},o(x.label))))),t().createElement("div",{className:se().previewFormItem},t().createElement("div",{className:se().label},o("course.fontSize")),t().createElement(wa.Z,{value:e.font_size,disabled:l,onChange:x=>T(x,"font_size")},g.map(x=>t().createElement(rr,{value:x.size,key:x.size},x.name)))),t().createElement("div",{className:se().previewFormItem},t().createElement("div",{className:se().label},o("course.fontColor")),t().createElement("div",{className:se().fontColorBox},t().createElement("div",{className:se().sketchColor},R.map(x=>t().createElement("div",{className:se().colorBox,key:x,onClick:()=>T(x,"font_color"),style:e.font_color.toLowerCase()===x.toLowerCase()?{borderColor:_}:{}},t().createElement("div",{className:se().color,style:{backgroundColor:"".concat(x)}}))),t().createElement("div",{className:se().colorBox,style:ae()},t().createElement("div",{className:se().color,onClick:w},t().createElement("img",{alt:"",src:"".concat("https://oss.coolcollege.cn","/1826339476444680192.png")}))),d?le():null),t().createElement("div",{className:se().huePickerBox},t().createElement(ar.A8,{className:se().huePicker,color:e.font_color,onChange:F})))))))};or.defaultProps={value:{},onChange:()=>{},aiInfo:{}};var Xr=(0,Z.$j)((0,U.Z)()(or)),ea=s(43859),nr=(0,ea.Z)(Fr),Kr=(0,ea.Z)(kr),Jr=(0,ea.Z)(Hr),Qr=(0,ea.Z)(Xr),_r=s(7584),Ia=s(2396);class ir extends t().Component{constructor(o){super(o);this.handleAiInfo=(r,n)=>{this.setState(i=>({aiInfo:(0,C.Z)((0,C.Z)({},i.aiInfo),{},{[n]:r.url})}))},this.validateContent=r=>r.length<20?this.props.t("course.aiCourseContentPlaceHolder"):r.length>1e3?this.props.t("course.aiCourseContent1000"):(0,Ia.QK)(r,this.props.t("course.aiCourseContentPlaceHolder")),this.handleRestoreDefault=()=>{var r=this.props,n=r.restoreDefault,i=r.canEdit;i&&n()};var e=o.values;this.state={aiInfo:{background_url:e.background_url,character_url:e.character_url,sound:e.sound,font:e.font,content:e.content}}}componentDidMount(){}componentDidUpdate(o){if(!Ft()(o.values,this.props.values)){var e=o.values.background_url!==this.props.values.background_url?this.props.values.background_url:this.state.aiInfo.background_url,r=o.values.character_url!==this.props.values.character_url?this.props.values.character_url:this.state.aiInfo.character_url;this.setState({aiInfo:{background_url:e,character_url:r,sound:this.props.values.sound,font:this.props.values.font,content:this.props.values.content}})}}render(){var o=this.props,e=o.t,r=o.values,n=o.canEdit,i=this.state.aiInfo;return t().createElement(p.Fragment,null,t().createElement("div",{className:Be().contentContainer},t().createElement("div",{className:Be().formBox},t().createElement(Z.gN,(0,k.Z)({component:_r.Z,name:"title",label:e("course.courseDetailName"),required:!0,type:"text",value:r.title,showCount:!0,colon:!1,LimitLength:60,maxLength:60,placeholder:e("course.courseDetailNamePlaceholder"),validate:l=>(0,Ia.QK)(l,e("course.courseDetailNamePlaceholder"))},he.K5)),t().createElement(Z.gN,(0,k.Z)({component:nr,name:"background_url",label:e("course.themeBackground"),config_type:"background",value:r.background_url,defaultValue:I.background_url,onChangeUrlObj:l=>this.handleAiInfo(l,"background_url"),title:e("course.themeBackground"),manageModalConfig:{bgManageUploadTip:e("course.themeBackgroundTip")},imgSize:{value:5,unit:"MB"},disabled:!n,corpConfig:{zoom:!1,modalWidth:674,cropStyle:{containerStyle:{height:"484px"}}}},he.K5)),t().createElement(Z.gN,(0,k.Z)({component:nr,name:"character_url",label:e("course.figureImage"),config_type:"portrait",imgSize:{value:5,unit:"MB"},disabled:!n,themeTip:e("course.themeFigureTip"),value:r.character_url,defaultValue:I.character_url,onChangeUrlObj:l=>this.handleAiInfo(l,"character_url"),defaultLen:4,title:e("course.figureImage"),manageModalConfig:{modalWidth:540,bgManageUploadTip:e("course.themeFigureTip")},corpConfig:{aspect:1/1,zoom:!0,initZoom:1.5,modalWidth:432,modalTitle:e("course.figureImageCrop"),cropStyle:{containerStyle:{height:"324px"},cropAreaStyle:{backgroundImage:"url(".concat("https://oss.coolcollege.cn","/1831869353977581568.png)")}},showGuideCheck:!0}},he.K5)),t().createElement(Z.gN,(0,k.Z)({component:Kr,name:"sound",label:e("course.voiceType"),disabled:!n,value:r.sound},he.K5)),t().createElement(Z.gN,(0,k.Z)({component:Jr,name:"content",required:!0,disabled:!n,label:e("course.aiCourseContent"),validate:l=>this.validateContent(l),value:r.content},he.K5))),t().createElement("div",{className:Be().previewBox},t().createElement(Z.gN,(0,k.Z)({component:Qr,name:"font",label:e("course.aiCoursePreview"),value:r.font,aiInfo:i},he.K5,{disabled:!n})),t().createElement("div",{className:Be().restoreDefault,disabled:!n,onClick:this.handleRestoreDefault},t().createElement(Nt.Z,{iconClass:"iconf-switch","font-size":"12px"}),e("course.aiCourseRestoreDefault")))))}}ir.defaultProps={values:{}};var qr=a=>({userInfo:a.user,showImgGuide:a.courseManagement.showImgGuide}),eo=(0,Q.$j)(qr)((0,U.Z)()(ir)),ft=s(29284),to=s(19858),ao=s(15035),Bt=s.n(ao),ta=s(62615),ro=s(52670);class oo extends t().Component{constructor(o){super(o);this.state={}}render(){var o=this.props,e=o.t,r=o.values,n={resourceType:"course",tagHandleType:"create",resourceId:""};return t().createElement(p.Fragment,null,t().createElement("div",{className:Bt().courseInfoContainer},t().createElement("div",{className:Bt().courseBox},t().createElement("div",{className:Bt().courseBoxTitle},e("course.courseInfoSetting")),t().createElement(Z.gN,(0,k.Z)({component:ta.Y9,displayType:"Custom",name:"covers",label:e("course.courseDetailCover"),required:!0},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ta.O,displayType:"Custom",name:"courseClassify",label:e("course.courseDetailCategory"),isObj:!0,required:!0,validate:i=>(0,Ia.QK)(i.id,e("course.courseDetailCategoryPlaceholder")),defaultValue:r.courseClassify},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ft.J$,name:"teacher",label:e("course.courseDetailLecture"),displayType:"Custom",defaultFieldList:r.teacher},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ta.QS,displayType:"Custom",name:"tagGroup",label:e("common.detailTag"),defaultFieldList:n},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ft.Rv,displayType:"Custom",name:"introduction",label:e("course.courseDetailIntro"),defaultFieldList:r.introduction},he.I4))),t().createElement("div",{className:Bt().courseBox},t().createElement("div",{className:Bt().courseBoxTitle},e("course.courseRuleSetting")),t().createElement(Z.gN,(0,k.Z)({component:ft._D,name:"studyType",label:e("course.courseStudyType"),type:"text",defaultValue:r.studyType},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ft.gg,name:"original",label:e("course.courseDetailOriginal"),type:"text",defaultValue:r.original},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ft.yX,label:e("course.courseDetailRewardScore"),displayType:"Custom",name:"credit",defaultFieldList:r.credit,validate:to.H4},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ft.UW,name:"download",label:e("course.courseDetailDownload"),type:"text",defaultValue:r.download},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ft.lL,name:"commentSwitch",label:e("course.courseCommentTitle"),type:"text",defaultValue:r.commentSwitch},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ft.RQ,name:"syncProgress",label:e("common.scheduleSync"),type:"text",defaultValue:r.syncProgress},he.I4)),t().createElement(Z.gN,(0,k.Z)({component:ta.ww,displayType:"Custom",name:"employeeRange",mode:["all","part","private"],showSectitle:!1,qwTicketShow:!0,label:e("common.visibleRange"),defaultFieldList:r.employeeRange,validate:ro.FI},he.I4)))))}}var no=(0,Q.$j)()((0,U.Z)()(oo)),sr=s(38642),io=s(11449),so=s(4408),lo=s(34773),lr=s(6793),cr=s(28531),co=s(73704),uo=Ae.Z.Step,mo=a=>({uploaderList:a.uploader.list,uploadSucceedItem:a.uploader.uploadSucceedItem,documentStudyLimit:a.advancedSetting.documentStudyLimit,userInfo:a.user,themeColor:a.advancedSetting.themeColor}),aa={getScoreRule:Qe.ZP.CourseManagement.getScoreRule,addCourse:Qe.ZP.CourseManagement.addCourse,editCourse:Qe.ZP.CourseManagement.editCourse,getCourseInfo:Qe.ZP.CourseManagement.getCourseInfo};class po extends t().Component{constructor(o){super(o);this.initParams=e=>{nt.WY.get({url:aa.getCourseInfo({id:e})}).then(r=>{var n=r.data,i=JSON.parse(n.aiContent),l={title:(0,lr.fy)(n.title),background_url:i.background_url,character_url:i.character_url,sound:i.sound,content:i.content,font:i.font,covers:{coverType:n.coverType,cover:n.cover,baseCover:n.baseCover},teacher:{name:n.teacherId!=0?n.teacherName:"",id:n.teacherId.toString(),type:n.teacher_type,lecturer_sync_user_id:n.teacher_sync_user_id,lecturer_source_type:n.teacher_source_type},original:n.original?1:0,studyType:n.studyType?n.studyType:"",introduction:{desc:n.introduction},download:n.download?1:0,commentSwitch:n.commentSwitch?1:0,finishStandardStr:n.finishStandardStr||"all",credit:{checked:!!n.credit,score:n.credit},courseClassify:{id:n.courseClassify,name:n.courseClassifyName},employeeRange:{rangeType:n.isAll,qyWeChatVo:"",rangeList:{dept:n.departmentList||[],post:n.postList||[],group:n.groupList||[],user:n.userList||[]}},relationPlan:n.relationPlan||!1,syncProgress:n.syncProgress?1:0};this.setState({initData:l,isLoading:!1})})},this.getScoreRule=()=>{nt.WY.get({url:aa.getScoreRule()}).then(e=>{this.setState({initData:(0,C.Z)((0,C.Z)({},this.state.initData),{},{credit:(0,C.Z)((0,C.Z)({},this.state.initData.credit),{},{score:e.data.data.courseScoreList?e.data.data.courseScoreList[0].score:0})}),isLoading:!1})})},this.handleCancel=()=>{var e=this.props.t;A.Z.confirm({content:e("course.cancelTipContent"),okText:e("common.ok"),cancelText:e("common.cancel"),zIndex:3e3,onOk:()=>{var r=tt.parse(ke.m8.location.search),n=r.history;setTimeout(()=>{n==="myCreate"?(0,sr.eJ)({url:"/personal/profile?tab=mycreate",actionType:"replace"}):ke.m8.replace("/knowledgeBase/learningResources/courseManage")},1e3)}})},this.handleNext=()=>(this.formRef.setSubmitting(!0),this.formRef.validateForm().then(e=>{Object.keys(e).length===0&&this.saveCourse("draft","next"),this.dealNormalError(e),this.formRef.setSubmitting(!1)})),this.saveCourse=(e,r)=>{this.setState({isSubmitting:!0});var n=this.state.courseId,i=this.formRef.state.values,l=i.title,u=i.background_url,m=i.character_url,d=i.sound,h=i.content,b=i.font,g=i.courseClassify,R=i.covers,T=i.credit,w=i.download,F=i.commentSwitch,le=i.finishStandardStr,_=i.introduction,ae=i.original,M=i.tagGroup,x=i.employeeRange,q=i.teacher,D=i.studyType,ce=i.syncProgress,B=M?M.tagsNameList:[],Fe=(0,lo.b)(x.rangeList),we={id:n,title:(0,lr.fy)(l),introduction:_.desc,coverType:R.coverType,cover:R.cover,baseCover:R.baseCover,teacherId:q.id,courseClassify:g.id||"999",original:ae,isAll:x.rangeType,qy_we_chat_vo:x.qyWeChatVo,groupIds:x.rangeType==2?Fe.groupIds.join(","):"",departmentIds:x.rangeType==2?Fe.deptIds.join(","):"",userIds:x.rangeType==2?Fe.userIds.join(","):"",postIds:x.rangeType==2?Fe.postIds.join(","):"",download:w,commentSwitch:F,finishStandardStr:le,studyTimeLimit:0,credit:T.checked?T.score:0,init_type:e,studyType:D,syncProgress:ce,aiContent:JSON.stringify({background_url:u,character_url:m,sound:(0,C.Z)((0,C.Z)({},d),{},{volume:I.soundVolume,speech_rate:I.soundSpeechRate}),content:h,font:b})},Y;n?Y=aa.editCourse():Y=aa.addCourse(),nt.qg.post({url:Y,data:(0,C.Z)({},we)}).then(X=>{if(this.setState({isSubmitting:!1}),n){var be={tags:B,resourceId:X.data.data.course[0].course_id,resourceType:"course"};(0,cr.tB)(be)}else if(B&&B.length){var Ve={tags:B,resourceId:X.data.data.course[0].course_id,resourceType:"course"};(0,cr.tB)(Ve)}e==="draft"?(this.formRef.setSubmitting(!1),this.setState(Se=>({current:r==="next"?Se.current+1:Se.current-1,courseId:X.data.data.course[0].course_id}))):X.data.code===0&&(L.default.success(this.props.t("common.saveSuccess")),this.setState({temData:we}),this.funCheckApproval(X.data.data))}).catch(X=>{var be;console.error("err",X);var Ve=X==null||(be=X.response)===null||be===void 0?void 0:be.data,Se=Ve.code,rt=this.props.t;Se==="enterpriseapi.030610"?this.formRef.setSubmitting(!1):(L.default.error("".concat(rt("course.releaseFailedTip"))),setTimeout(()=>{this.formRef.setSubmitting(!1)},1e3)),this.setState({isSubmitting:!1})})},this.saveSuccessJump=()=>{setTimeout(()=>{this.formRef.setSubmitting(!1);var e=tt.parse(ke.m8.location.search),r=e.from;r==="myCreate"?(0,sr.eJ)({url:"/personal/profile?tab=mycreate",actionType:"replace"}):(L.default.success(this.props.t("course.createAiCourseSuccessTip")),ke.m8.replace("/knowledgeBase/learningResources/courseManage"))},1e3)},this.funCheckApproval=e=>{var r=e.state,n=e.approval_template;r?this.setState({approvalModal:{isShowApprovalModal:!0,defaultTemplate:n,content:{courseId:this.state.courseId,classifyType:"course"}}}):this.saveSuccessJump()},this.handleCloseApproval=e=>{this.setState({approvalModal:{isShowApprovalModal:!1,content:{},defaultTemplate:{}}}),e==="submit"&&this.saveSuccessJump()},this.scrollToAnchor=e=>{if(e){var r=document.getElementById(e);r&&r.scrollIntoView()}},this.dealNormalError=e=>{for(var r in e)e[r]&&this.formRef.setFieldTouched(r,!0);this.scrollToAnchor(Object.keys(e)[0])},this.handlePrev=()=>{this.formRef.setSubmitting(!0),this.saveCourse("draft","prev")},this.handleSubmit=()=>(this.formRef.setSubmitting(!0),this.formRef.validateForm().then(e=>{Object.keys(e).length===0&&this.saveCourse("release"),this.dealNormalError(e),this.formRef.setSubmitting(!1)})),this.restoreDefault=()=>{var e=this.formRef.state.values;this.formRef.setValues((0,C.Z)((0,C.Z)({},e),{},{background_url:I.background_url,character_url:I.character_url,sound:{voice:I.soundVoice,volume:I.soundVolume,speech_rate:I.soundSpeechRate},font:{font_size:I.fontSize,font_color:I.fontColor,font_weight:I.fontFamily}}))},this.steps=[{title:this.props.t("course.courseContent"),content:e=>{var r=e.values;return t().createElement(eo,{values:r,canEdit:this.state.canEdit,restoreDefault:this.restoreDefault})}},{title:this.props.t("course.courseContentInfo"),content:e=>t().createElement(no,{values:e.values})}],this.getTitle=()=>{var e=tt.parse(ke.m8.location.search),r=e.courseId,n=this.props.t;return n(r?"documentTitle.editOnlineCourse":"documentTitle.newOnlineCourse")},this.renderFooter=()=>{var e=this.state,r=e.current,n=e.isSubmitting,i=this.props.t;return t().createElement(t().Fragment,null,t().createElement(te.Z,null,r<this.steps.length-1&&t().createElement(G.Z,{onClick:this.handleCancel},i("common.cancel")),r<this.steps.length-1&&t().createElement(G.Z,{type:"primary",onClick:this.handleNext,loading:n},i("common.saveAndNext")),r>0&&t().createElement(G.Z,{style:{margin:"0 8px"},onClick:this.handlePrev,loading:n},i("common.prev")),r===this.steps.length-1&&t().createElement(G.Z,{type:"primary",onClick:this.handleSubmit,loading:n},i("common.release"))))},this.initRef=e=>{this.formRef=e},this.state={current:0,isLoading:!0,initData:{title:"",background_url:I.background_url,character_url:I.character_url,sound:{voice:I.soundVoice,volume:I.soundVolume,speech_rate:I.soundSpeechRate},content:"",font:{font_size:I.fontSize,font_color:I.fontColor,font_weight:I.fontFamily},covers:{coverType:1,cover:"",baseCover:""},courseClassify:{id:void 0,name:void 0},teacher:{id:"",name:""},introduction:{desc:""},studyType:"",original:1,credit:{checked:!1,score:0},download:0,commentSwitch:1,syncProgress:0,employeeRange:{rangeType:3,qyWeChatVo:"",rangeList:{dept:[],post:[],group:[],user:[]}}},courseId:"",canEdit:!0,isSubmitting:!1,approvalModal:{isShowApprovalModal:!1,content:{},defaultTemplate:{}},temData:{}}}componentDidMount(){var o=tt.parse(ke.m8.location.search),e=o.courseId,r=o.canEdit,n=r===void 0?"true":r;e?this.setState(()=>({courseId:e,canEdit:n!=="false"}),()=>{this.initParams(e)}):this.getScoreRule()}render(){var o=this.state,e=o.current,r=o.initData,n=o.isLoading,i=o.approvalModal,l=o.courseId,u=o.temData,m=i.isShowApprovalModal,d=i.content,h=i.defaultTemplate;return n?t().createElement("div",{className:je().editAiCourseLoading},t().createElement(de.Z,{size:"large"})):t().createElement(io.Z,{className:"".concat(je().editAiCourseLayout),pageContainerParams:{header:{title:this.getTitle()}}},t().createElement(so.Z,{title:this.getTitle()}),t().createElement(t().Fragment,null,t().createElement("div",{className:je().editAiCourseContainer},t().createElement(Ae.Z,{current:e,className:je().steps},this.steps.map(b=>t().createElement(uo,{key:b.title,title:b.title}))),t().createElement("div",{className:je().stepContent},t().createElement(Z.J9,{ref:this.initRef,initialValues:r,onSubmit:this.handleSubmit,render:b=>t().createElement(Z.l0,{className:je().courseForm},this.steps[e].content(b))})),t().createElement("div",{className:je().stepsAction},this.renderFooter())),m&&t().createElement(co.Z,{haveContent:!1,defaultTemplate:h,show:m,setShow:()=>this.handleCloseApproval(),submitRefresh:()=>this.handleCloseApproval("submit"),businessId:l,bizType:"course_task",title:u.title,content:d})))}}var ho=(0,Q.$j)(mo)((0,U.Z)()(po))},29284:function(Oe,ie,s){"use strict";s.d(ie,{lL:function(){return Wa},kI:function(){return Va},yX:function(){return wt},UW:function(){return Ua},Rv:function(){return ja},gg:function(){return Jt},_z:function(){return Kt},mh:function(){return Ba},RQ:function(){return $a},J$:function(){return ka},_D:function(){return Ea}});var ee=s(62029),de=s(62350),me=s(75443),te=s(22385),H=s(31097),G=s(57663),N=s(71577),L=s(88986),pe=s(57361),A=s(34792),C=s(48086),ve=s(9754),Ae=s.n(ve),p=s(12924),t=s.n(p),Q=s(91768),U=s(94184),Z=s.n(U),ke=s(28216),tt=s(76651),Tt=s(57068),je=s(80991),k=s(36546),ua=s(44289),Ft=s(1164),he=s(76466),I=s(84874),da=s(86458),Be=s(37055),Ra=s(74262),zt=s(10780),j=s(6793),Zt=s(86726),Vt=Ne=>({userInfo:Ne.user,documentStudyLimit:Ne.advancedSetting.documentStudyLimit});class Qe extends t().Component{constructor(v){var f;super(v);f=this,this.handleSelectCourseware=()=>{this.props.defaultFieldList.length>=50?C.default.warning(this.props.t("course.courseDetailResourceLimit")):this.setState({visible:!0})},this.handleUploadFileSuccess=c=>{var E=this.state,y=E.uploadShow,S=E.list,ge=this.props.defaultFieldList,O=[...S,...c];if(ge.length+c.length>50){C.default.warning(this.props.t("course.courseDetailResourceLimit"));return}Object.assign(y,{visible:!1}),this.setState({uploadShow:y,list:O},()=>{this.triggerChange(O)})},this.handleUploadClose=()=>{var c=this.state.uploadShow;Object.assign(c,{visible:!1}),this.setState({uploadShow:c})},this.handleChooseFiles=(0,pe.Z)(Ae().mark(function c(){var E,y,S;return Ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return E=f.props.t,O.next=3,(0,j.x8)("quota_source_book",E("course.sourceValidateLimit",{courseType:E("documentTitle.matter")}));case 3:if(y=O.sent,!y){O.next=6;break}return O.abrupt("return");case 6:S=f.state.uploadShow,Object.assign(S,{visible:!0}),f.setState({uploadShow:S});case 9:case"end":return O.stop()}},c)})),this.handleOk=c=>{var E=[...this.state.list].concat(c),y=(0,j.Cj)(E);if(y.length>50){C.default.warning(this.props.t("course.courseDetailResourceLimit"));return}this.setState({list:y,visible:!1},()=>{this.triggerChange(y)})},this.handleCancel=()=>{this.setState({visible:!1})},this.handleAddArticle=()=>{Ft.Z.targetTo({path:"/training/resourceManage/library/articleDetail?classifyId=0"})},this.triggerChange=c=>{this.props.formik.setFieldValue("resource",c);var E=0;E+=c.filter(y=>["h5","txt","doc","docx","xls","xlsx","pdf","ppt","pptx"].indexOf(y.type)>0).length,this.props.formik.setFieldValue("studyLimit",(0,L.Z)((0,L.Z)({},this.props.formik.values.studyLimit),{},{checked:this.props.documentStudyLimit!==0&&E>0}))},this.dealWatchType=c=>{var E=Be.Yq.findIndex(at=>c.type.toLowerCase().includes(at))>-1,y=Be.WB.indexOf(c.type.toLowerCase())>-1,S=Be.SR.indexOf(c.type.toLowerCase())>-1||c.contentType.indexOf("html")>-1,ge=c.contentType.indexOf("scorm")>-1,O=c.contentType.indexOf("video")>-1,Ze=Be.Ss.indexOf(c.contentType)>-1,Re=c.contentType.indexOf("h5")>-1,xe="";return Re?xe="article":E?xe="doc":O||Ze?xe="video":y?xe="image":S?xe="html":ge&&(xe="scorm"),xe},this.handlePreview=c=>{var E=c.item,y=this.state.previewInfo,S=E.data||E,ge=S.status===1||S.status===2;if(ge){C.default.warning(this.props.t("resourceLibrary.transcodingPlayerTip"));return}var O=this.dealWatchType(S),Ze=Be.Ss.indexOf(S.contentType)>-1;if(S.type==="mp4"&&S.aiUpgradeStatus==="finish"){tt.m8.push({pathname:"/training/resourceManage/library/videoPreview",search:Tt.stringify({id:S.id})});return}if(O==="article"){var Re=S.contentType,xe=S.url,at=Re==="h5/link";at?Ft.Z.targetTo({path:xe,isExternalLink:!0}):Ft.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(S.id)});return}var st={mode:"preview",watchType:O};O==="doc"?Object.assign(st,{resourceInfo:{type:"",docType:S.type,aliUrl:S.path,url:S.url,docTitle:S.name,playId:S.videoId||S.video_id,storageType:S.storage_type}}):O==="image"?Object.assign(st,{resourceInfo:{url:S.url,playId:S.videoId||S.video_id,storageType:S.storage_type}}):O==="html"?Object.assign(st,{resourceInfo:{url:S.url}}):Object.assign(st,{resourceInfo:{source:{FD:S.url,OD:S.path},originUrl:S.url,contentType:Ze?"mp3":S.type,playId:S.videoId||S.video_id,storageType:S.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:st,previewInfo:(0,L.Z)((0,L.Z)({},y),{},{title:S.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var c=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,L.Z)((0,L.Z)({},c),{},{visible:!1})})},this.handleDelete=c=>{var E=[...this.state.list],y=E.findIndex(S=>S.id===c);y>-1&&E.splice(y,1),this.setState({list:E}),this.triggerChange(E)},this.handleDND=(c,E)=>{var y=this.state.list,S=y[c];y.splice(c,1),y.splice(E,0,S),this.setState({list:y})},this.generateCourseSelecorList=c=>{var E=[];return c.forEach(y=>{y.componentName==="CoursewareSelector"&&E.push({id:y.id,name:y.name,componentName:"CoursewareSelector",data:y.data,icon:Be.e1[y.type],type:y.type,duration:y.data.duration})}),E},this.renderTitle=()=>{var c=(0,Zt.V9)("courseManage",this.props.userInfo.modules),E=(0,Zt.H3)("make_interactive_video",c),y=this.props,S=y.prefixCls,ge=y.formik,O=y.t,Ze=y.userInfo,Re=this.state.list,xe=Ze.appType,at=ge.values.relationPlan,st=localStorage.getItem("themeColor")||"#465dcd",Qt=0;return Re.forEach(kt=>{var It=kt.data?kt.data:kt;It.contentType.includes("video")&&It.status&&It.status===3&&It.privatization==="public"&&(Qt+=1)}),t().createElement("h1",{className:"".concat(S,"__title")},O("course.courseDetailResource"),at?null:this.renderHeaderAction(),Qt>0&&E&&xe!=="wx_app"&&t().createElement(H.Z,{placement:"top",title:O("course.interactiveVideoEdit")},t().createElement(N.Z,{className:"text-btn interactiveInter",style:{color:st},onClick:()=>this.props.handleSubmit("")},O("course.createInteractiveVideo"))))},this.renderHeaderAction=()=>{var c=this.props.t;return t().createElement("div",{className:"action-container"},t().createElement(N.Z,{type:"primary",className:"qa-course-library-selection-button",onClick:this.handleSelectCourseware},t().createElement(I.Z,{iconClass:"iconf-course-library",color:"#fff",size:"14px"}),c("course.courseDetailResourceCS")),t().createElement(N.Z,{type:"primary",className:"qa-local-upload-button",onClick:this.handleChooseFiles},t().createElement(I.Z,{iconClass:"iconf-folder",color:"#fff",size:"14px"}),c("course.courseDetailResourceUP")))},this.renderContent=()=>{var c=this.props.prefixCls,E=this.state.list;return t().createElement("ul",{className:"".concat(c,"__content")},E.map((y,S)=>this.renderItem(y,S)))},this.renderTooltip=c=>{var E=this.props.t;return c.status===3&&(c.type==="mp4"||c.type==="mp3")?t().createElement("span",{className:"item__duration"},(0,j.xj)(c.duration)):c.status&&c.status!==3?t().createElement("span",{className:"resource-item-duration"},"--:--:--",t().createElement(H.Z,{placement:"top",title:E("course.transcodingStudyLimit")},t().createElement("span",null,t().createElement(I.Z,{iconClass:"icon-f-tipe",color:"#9C9C9F"})))):t().createElement("span",{className:"item__duration"},"--:--:--",t().createElement(H.Z,{placement:"top",title:this.getTitle(c)},t().createElement("span",null,t().createElement(I.Z,{iconClass:"icon-f-tipe",color:"#9C9C9F"}))))},this.getTitleTip=c=>{var E=this.props.t,y=c.data?c.data.privatization:c.privatization;return y!=="public"?E("course.interactiveVideoDisabledC"):c.status!==3?E("course.interactiveVideoDisabledB"):""},this.renderInteractiveVideo=c=>{var E=(0,Zt.V9)("courseManage",this.props.userInfo.modules),y=(0,Zt.H3)("make_interactive_video",E),S=this.props.t,ge=c.data?c.data.contentType:c.contentType,O=c.data?c.data.privatization:c.privatization,Ze=c.data?c.data.isInteract:c.isInteract;return ge.includes("video")&&c.status&&c.status===3&&O==="public"&&y?t().createElement(H.Z,{placement:"top",title:S("course.interactiveVideoEdit")},t().createElement("span",{className:"interactiveInter interactiveSuccess",onClick:()=>this.props.handleSubmit(c.id)},t().createElement(I.Z,{color:"#4D67E9",iconClass:Ze?"icon-yikanshipin1":"icon-hudongshipin",size:"16px"}))):ge.includes("video")&&y&&(c.status&&c.status===3||O!=="public")?t().createElement(H.Z,{placement:"top",title:this.getTitleTip(c)},t().createElement("span",{className:"interactiveInter interactiveFail"},t().createElement(I.Z,{color:"#E1E0E5",iconClass:"icon-hudongshipin",size:"16px"}))):""},this.getTitle=c=>{var E=this.props.t;return c.type==="h5"?E("course.ArticleStudyLimit"):c.type==="html"||c.type==="jpg"||c.type==="jpeg"||c.type==="png"||c.type==="scorm"?E("common.notSupportSetTime"):E("course.documentStudyLimitTip3")},this.renderItem=(c,E)=>{var y=this.props,S=y.prefixCls,ge=y.formik,O=y.t,Ze=y.userInfo,Re=ge.values.relationPlan,xe=Ze.appType,at=Z()(["".concat(S,"__content__list item ").concat(Re?"item-disabled":"")]);return c.type=Be.Ss.indexOf(c.contentType)>-1?"mp3":c.type,t().createElement(da.Z,{id:c.id,key:c.id,title:c.title,content:c.content,index:E,disabled:Re,onDND:this.handleDND},t().createElement("li",{className:at,key:c.id},t().createElement(I.Z,{iconClass:Be.e1[c.type],size:"16px"}),t().createElement("span",{className:"item__title",onClick:()=>this.handlePreview({item:c})},c.name),this.renderTooltip(c),Re?t().createElement("span",{className:"item__action"},xe!=="wx_app"&&this.renderInteractiveVideo(c)):t().createElement("span",{className:"item__action"},xe!=="wx_app"&&this.renderInteractiveVideo(c),t().createElement(me.Z,{title:O("common.confirmDeleteTitle"),onConfirm:()=>this.handleDelete(c.id)},t().createElement("span",{className:"item__action__delete"},t().createElement(I.Z,{iconClass:"iconf-clear",size:"16px"}))),t().createElement("span",{className:"item__action__drag"},localStorage.getItem("dingPersonnel")!=="dingPersonnel"&&t().createElement(I.Z,{iconClass:"iconf-move",size:"19px"})))))},this.state={list:v.defaultFieldList,visible:!1,uploadShow:{visible:!1,title:this.props.t("common.storage"),onSuccess:c=>this.handleUploadFileSuccess(c),onCancel:()=>this.handleUploadClose()},resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}}}render(){var v=this.props.prefixCls,f=this.state,c=f.visible,E=f.list,y=f.uploadShow,S=f.resourcePlayInfo,ge=f.previewInfo;return t().createElement("section",{className:"".concat(v)},this.renderTitle(),this.renderContent(),t().createElement(Ra.Z,(0,ee.Z)({isAllowLocal:!0,params:{classifyId:0,bizType:0}},y)),t().createElement(zt.Z,{visible:c,defaultChecked:this.generateCourseSelecorList(E),onOk:this.handleOk,onCancel:this.handleCancel,excludeType:"h5"}),t().createElement(he.Z,(0,ee.Z)({},S,{previewInfo:ge})))}}Qe.defaultProps={prefixCls:"resource"};var nt=(0,ke.$j)(Vt)((0,k.Z5)(ua.ZP)((0,je.$j)((0,Q.Z)()(Qe)))),$t=s(31151),ma=s(60667);class Wt extends t().Component{constructor(){super(...arguments);this.state={visible:!1},this.handleSelectTeacher=()=>{this.setState({visible:!0})},this.handleCancel=()=>{this.setState({visible:!1})},this.handleOk=v=>{var f=v.id,c=v.name,E=v.data;this.props.formik.setFieldValue("teacher",{id:f,name:c,lecturer_sync_user_id:E.lecturer_sync_user_id,lecturer_source_type:E.lecturer_source_type,type:E.type}),this.handleCancel()},this.handleDelete=()=>{this.props.formik.setFieldValue("teacher",{id:0,name:""})}}render(){var v=this.props,f=v.prefixCls,c=v.defaultFieldList,E=c.id,y=c.name,S=c.lecturer_sync_user_id,ge=c.lecturer_source_type,O=c.type,Ze={id:E,name:y,data:{}},Re=localStorage.getItem("themeColor")||"#516AE6";return t().createElement("div",{className:f},y?t().createElement("span",{className:"".concat(f,"__name")},O==="inside"?t().createElement(ma.Z,{dataType:"userName",value:S,name:y,type:ge}):y,t().createElement("span",{className:"".concat(f,"__name__delete"),onClick:this.handleDelete},t().createElement(I.Z,{iconClass:"icon-guanbi1"}))):null,t().createElement("span",{className:"".concat(f,"__add"),style:{borderColor:Re,color:Re},onClick:this.handleSelectTeacher},t().createElement(I.Z,{iconClass:"iconf-add-man"})),t().createElement($t.Z,{visible:this.state.visible,selected:Ze,onOk:this.handleOk,onCancel:this.handleCancel}))}}Wt.defaultProps={prefixCls:"teacher"};var pa=(0,je.$j)(Wt),Cr=s(88983),fe=s(47933),it=s(81211);class ha extends t().Component{render(){var v=this.props,f=v.t,c=(0,it.Z)(v,["t"]);return t().createElement(fe.ZP.Group,(0,ee.Z)({name:"originalGroup"},c),t().createElement(fe.ZP,{value:1},f("course.courseDetailOriginalTrue"),t().createElement(H.Z,{title:f("course.courseDetailOriginalTrueTip")},t().createElement("span",{style:{marginLeft:"5px"}},t().createElement(I.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))),t().createElement(fe.ZP,{value:0},f("course.courseDetailOriginalFalse"),t().createElement(H.Z,{title:f("course.courseDetailOriginalFalseTip")},t().createElement("span",{style:{marginLeft:"5px"}},t().createElement(I.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))))}}var fa=(0,Q.Z)()(ha),Ht=s(67620);class va extends t().Component{constructor(v){super(v);this.handleChange=f=>{var c=f;this.setState({introduction:c}),this.triggerChange(c)},this.triggerChange=f=>{this.props.formik.setFieldValue("introduction",{desc:f})},this.getHtml=()=>{var f=this.editorInstance.getHtml();return f},this.state={introduction:v.defaultFieldList.desc}}render(){return t().createElement(Ht.Z,{ref:v=>this.editorInstance=v,toolbarCls:this.props.toolbarCls,contentCls:this.props.contentCls,placeholder:this.state.introduction,onChange:this.handleChange,controls:["head","bold","fontSize","fontName","italic","underline","strikeThrough","image","undo","redo"]})}}var pt=(0,je.$j)(va),ga=s(63185),Gt=s(9676),La=s(77883),He=s(21888);class Da extends t().Component{constructor(){super(...arguments);this.renderText=()=>{var v=this.props.t;return t().createElement("div",null,t().createElement("p",{className:"title"},v("course.documentStudyLimitTip1")),t().createElement("p",{className:"title"},v("course.documentStudyLimitTip2")))},this.handleChangeCheckbox=v=>{var f=v.target.checked;this.props.formik.setFieldValue("studyLimit",{checked:f,limit:this.props.defaultFieldList.limit})},this.handleChangeInput=v=>{this.props.formik.setFieldValue("studyLimit",{checked:this.props.defaultFieldList.checked,limit:v})},this.renderInput=()=>{var v=this.props,f=v.defaultFieldList,c=v.t;return t().createElement("span",null,t().createElement(He.Z,{precision:0,min:1,max:9999,value:f.limit,disabled:!f.checked,onChange:this.handleChangeInput}),t().createElement("span",{style:{margin:"0 8px"}},c("course.secByPage"),t().createElement(H.Z,{placement:"top",title:this.renderText},t().createElement("span",null,t().createElement(I.Z,{iconClass:"icon-f-tipe"}))),f.checked?null:t().createElement("span",{style:{marginLeft:"8px"}},c("course.documentStudyLimitTip"))))}}render(){var v=this.props,f=v.defaultFieldList,c=v.shouldSetStudyLimit,E=v.t;return t().createElement(t().Fragment,null,t().createElement(Gt.Z,{onChange:this.handleChangeCheckbox,checked:f.checked,disabled:!c},E("course.documentLearningTime")),this.renderInput())}}var Yt=(0,je.$j)((0,Q.Z)()(Da));class Ct extends t().Component{constructor(){super(...arguments);this.handleChangeChecbox=v=>{var f=v.target.checked;this.props.formik.setFieldValue("credit",{checked:f,score:this.props.defaultFieldList.score})},this.handleChangeInput=v=>{this.props.formik.setFieldValue("credit",{checked:this.props.defaultFieldList.checked,score:v})},this.renderInput=()=>{var v=this.props.defaultFieldList;return t().createElement("span",null,t().createElement(He.Z,{precision:0,min:0,max:999,value:v.score,disabled:!v.checked,onChange:this.handleChangeInput}),this.props.t("course.courseDetailRewardUnit"))}}render(){var v=this.props.defaultFieldList;return t().createElement(t().Fragment,null,t().createElement(Gt.Z,{onChange:this.handleChangeChecbox,checked:v.checked},this.props.t("common.credit")),this.renderInput())}}var Xt=(0,je.$j)((0,Q.Z)()(Ct));class Ca extends t().Component{render(){var v=this.props,f=v.t,c=(0,it.Z)(v,["t"]);return t().createElement(fe.ZP.Group,(0,ee.Z)({name:"downloadGroup"},c),t().createElement(fe.ZP,{value:0},f("course.courseDetailDownloadForbidden")),t().createElement(fe.ZP,{value:1},f("course.courseDetailDownloadAllow")))}}var Ge=(0,Q.Z)()(Ca);class At extends t().Component{render(){var v=this.props,f=v.t,c=(0,it.Z)(v,["t"]),E=tt.m8.location.query.courseId;return t().createElement(t().Fragment,null,t().createElement(fe.ZP.Group,(0,ee.Z)({name:"completeCourseGroup"},c,{disabled:E}),t().createElement(fe.ZP,{value:"all"},f("course.courseDetailCompleteAll")),t().createElement(fe.ZP,{value:"onlyOne"},f("course.courseDetailCompleteAny")),t().createElement(H.Z,{title:f("course.courseDetailTip")},t().createElement("span",{className:"stydyTypeTip"},t().createElement(I.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))),t().createElement("span",null,f("course.courseDetailInfo")))}}var ya=(0,Q.Z)()(At);class Ee extends t().Component{render(){var v=this.props,f=v.t,c=(0,it.Z)(v,["t"]);return t().createElement(fe.ZP.Group,(0,ee.Z)({name:"studyType"},c),t().createElement(fe.ZP,{value:""},f("course.courseStudyTypeDefault"),t().createElement(H.Z,{title:f("course.courseStudyTypeDefaultTip")},t().createElement("span",{className:"stydyTypeTip"},t().createElement(I.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))),t().createElement(fe.ZP,{value:"requiredCourse"},f("course.courseStudyTypeTrue"),t().createElement(H.Z,{title:f("course.courseStudyTypeTrueTip")},t().createElement("span",{className:"stydyTypeTip"},t().createElement(I.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))),t().createElement(fe.ZP,{value:"notRequiredCourse"},f("course.courseStudyTypeFalse"),t().createElement(H.Z,{title:f("course.courseStudyTypeFalseTip")},t().createElement("span",{className:"stydyTypeTip"},t().createElement(I.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"})))))}}var Ma=(0,Q.Z)()(Ee);class Oa extends t().Component{render(){var v=this.props,f=v.t,c=(0,it.Z)(v,["t"]);return t().createElement(fe.ZP.Group,(0,ee.Z)({name:"downloadGroup"},c),t().createElement(fe.ZP,{value:0},f("common.outSync")),t().createElement(fe.ZP,{value:1},f("common.synchronization")),t().createElement(H.Z,{title:f("common.scheduleSyncTip")},t().createElement("span",{className:"stydyTypeTip"},t().createElement(I.Z,{iconClass:"iconf-tipe",color:"#D5D8DE",size:"14px"}))))}}var Fa=(0,Q.Z)()(Oa);class za extends t().Component{render(){var v=this.props,f=v.t,c=(0,it.Z)(v,["t"]);return t().createElement(fe.ZP.Group,(0,ee.Z)({name:"commentSwitch"},c),t().createElement(fe.ZP,{value:0},f("common.unactivated")),t().createElement(fe.ZP,{value:1},f("common.open")))}}var Aa=(0,Q.Z)()(za),Ye=s(43859),Kt=(0,Ye.Z)(nt),ka=(0,Ye.Z)(pa),Jt=(0,Ye.Z)(fa),Ea=(0,Ye.Z)(Ma),ja=(0,Ye.Z)(pt),Ba=(0,Ye.Z)(Yt),wt=(0,Ye.Z)(Xt),Ua=(0,Ye.Z)(Ge),Va=(0,Ye.Z)(ya),$a=(0,Ye.Z)(Fa),Wa=(0,Ye.Z)(Aa)},72538:function(Oe,ie,s){"use strict";s.d(ie,{I4:function(){return ee},K5:function(){return me}});var ee={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},de={labelCol:{xs:{span:0},sm:{span:0}},wrapperCol:{xs:{span:24},sm:{span:24}}},me={labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},te={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:18,offset:3}}}},19858:function(Oe,ie,s){"use strict";s.d(ie,{$h:function(){return N},H4:function(){return L},T9:function(){return pe}});var ee=s(6793),de=s(2396),me=s(3407),te=(0,ee.me)(),H=me.Z[te].course.validation,G=me.Z[te].integralMall,N=A=>A.length?"":H.courseDetailResourceNull,L=A=>{var C,ve=A.score,Ae=Number.isNaN(ve)||!(ve>=0&&ve<1e3);return A.checked&&Ae&&(C=H.courseDetailRewardScore),C},pe=A=>{var C,ve=A.limit,Ae=Number.isNaN(ve)||!ve||!(ve>0&&ve<=9999)||!de.fA.score.test(ve);return A.checked&&Ae&&(C=G.durationLimit),C}},52796:function(Oe,ie,s){Oe.exports=s(10643)},13264:function(Oe){"use strict";var ie=!!(typeof window!="undefined"&&window.document&&window.document.createElement),s={canUseDOM:ie,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:ie&&!!(window.addEventListener||window.attachEvent),canUseViewport:ie&&!!window.screen,isInWorker:!ie};Oe.exports=s},13300:function(Oe){var ie=!1,s,ee,de,me,te,H,G,N,L,pe,A,C,ve,Ae,p;function t(){if(!ie){ie=!0;var U=navigator.userAgent,Z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(U),ke=/(Mac OS X)|(Windows)|(Linux)/.exec(U);if(C=/\b(iPhone|iP[ao]d)/.exec(U),ve=/\b(iP[ao]d)/.exec(U),pe=/Android/i.exec(U),Ae=/FBAN\/\w+;/i.exec(U),p=/Mobile/i.exec(U),A=!!/Win64/.exec(U),Z){s=Z[1]?parseFloat(Z[1]):Z[5]?parseFloat(Z[5]):NaN,s&&document&&document.documentMode&&(s=document.documentMode);var tt=/(?:Trident\/(\d+.\d+))/.exec(U);H=tt?parseFloat(tt[1])+4:s,ee=Z[2]?parseFloat(Z[2]):NaN,de=Z[3]?parseFloat(Z[3]):NaN,me=Z[4]?parseFloat(Z[4]):NaN,me?(Z=/(?:Chrome\/(\d+\.\d+))/.exec(U),te=Z&&Z[1]?parseFloat(Z[1]):NaN):te=NaN}else s=ee=de=te=me=NaN;if(ke){if(ke[1]){var Tt=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(U);G=Tt?parseFloat(Tt[1].replace("_",".")):!0}else G=!1;N=!!ke[2],L=!!ke[3]}else G=N=L=!1}}var Q={ie:function(){return t()||s},ieCompatibilityMode:function(){return t()||H>s},ie64:function(){return Q.ie()&&A},firefox:function(){return t()||ee},opera:function(){return t()||de},webkit:function(){return t()||me},safari:function(){return Q.webkit()},chrome:function(){return t()||te},windows:function(){return t()||N},osx:function(){return t()||G},linux:function(){return t()||L},iphone:function(){return t()||C},mobile:function(){return t()||C||ve||pe||p},nativeApp:function(){return t()||Ae},android:function(){return t()||pe},ipad:function(){return t()||ve}};Oe.exports=Q},96534:function(Oe,ie,s){"use strict";var ee=s(13264),de;ee.canUseDOM&&(de=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function me(te,H){if(!ee.canUseDOM||H&&!("addEventListener"in document))return!1;var G="on"+te,N=G in document;if(!N){var L=document.createElement("div");L.setAttribute(G,"return;"),N=typeof L[G]=="function"}return!N&&de&&te==="wheel"&&(N=document.implementation.hasFeature("Events.wheel","3.0")),N}Oe.exports=me},10643:function(Oe,ie,s){"use strict";var ee=s(13300),de=s(96534),me=10,te=40,H=800;function G(N){var L=0,pe=0,A=0,C=0;return"detail"in N&&(pe=N.detail),"wheelDelta"in N&&(pe=-N.wheelDelta/120),"wheelDeltaY"in N&&(pe=-N.wheelDeltaY/120),"wheelDeltaX"in N&&(L=-N.wheelDeltaX/120),"axis"in N&&N.axis===N.HORIZONTAL_AXIS&&(L=pe,pe=0),A=L*me,C=pe*me,"deltaY"in N&&(C=N.deltaY),"deltaX"in N&&(A=N.deltaX),(A||C)&&N.deltaMode&&(N.deltaMode==1?(A*=te,C*=te):(A*=H,C*=H)),A&&!L&&(L=A<1?-1:1),C&&!pe&&(pe=C<1?-1:1),{spinX:L,spinY:pe,pixelX:A,pixelY:C}}G.getEventType=function(){return ee.firefox()?"DOMMouseScroll":de("wheel")?"wheel":"mousewheel"},Oe.exports=G}}]);
