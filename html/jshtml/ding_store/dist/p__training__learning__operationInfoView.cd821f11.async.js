(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[2741],{54624:function(re,k,e){"use strict";e.d(k,{Z:function(){return o}});var H=e(47673),g=e(4107),J=e(12924),l=e.n(J),u=e(91768),t=e(80991),c=e(54549),R=e(49101),$=e(62029),m=e(59250),v=e(13013),h=e(30887),_=e(99210),T=e(43185),O=e(53251),A=e(57663),C=e(71577),L=e(88986),E=e(57361),W=e(34792),F=e(48086),x=e(9754),X=e.n(x),n=e(28216),I=e(73566),z=e(49146),b=e(74262),G=e(40938),a=e(6793),M=e(54531),d=e(10237),S=e(84874),w=e(1164),V=e(37055),Y=e(10780),q=e(43967),ne=e(76466),ie=5,se=D=>({uploaderList:D.uploader.list,uploadSucceedItem:D.uploader.uploadSucceedItem,uploadComponentType:D.uploader.uploadComponentType,appType:D.user.appType,dingUserId:D.user.account,corpId:D.user.corpId}),r=D=>{if(D.icon)return D.icon;var i=D.name.split(".").pop(),y=V.e1[i];return y||"iconf-matter-picture"};class P extends l().Component{constructor(i){var y;super(i);y=this,this.handleBeforeUpload=s=>{var p=this.props,f=p.t,N=p.value;if(s.type.indexOf("image")<0)return F.default.warning(f("component.stageAddFileFormatTip")),!1;this.props.onChange(N.concat(s))},this.handleOnChange=s=>{var p=s.file,f=this.props,N=f.value,Z=f.t;p.status==="done"?this.props.onChange(N.filter(B=>B.id!==p.id).concat(p.response.data)):p.status==="error"&&(F.default.error("".concat(p.name," ").concat(Z("course.courseDetailCoverFailure"))),this.props.onChange(N.filter(B=>B.id!==p.id)))},this.handleRemove=s=>{var p=this.props.value;this.props.onChange(p.filter(f=>f.id!==s.id))},this.handleUploadFile=()=>{this.setState({showFileSelector:!0})},this.handleSelectedCancel=()=>{this.setState({showFileSelector:!1})},this.handleSelectedAttachment=s=>{var p=this.props,f=p.t,N=p.value,Z=N.map(Q=>Q.id),B=s.filter(Q=>!Z.includes(Q.id)),ae=N.length;if(B.length>ie-ae){F.default.warning((0,a.ZT)(f("component.stageAddFileTip"),5));return}this.handleSelectedCancel(),B=B.map(Q=>(Q.size=Q.data.size,Q)),this.props.onChange(N.concat(B))},this.handleChooseFiles=s=>{var p=this.props,f=p.t,N=p.value,Z=p.uploaderList,B=p.uploadComponentId,ae=p.notLibrary,Q=p.hasZip,ee=Q===void 0?"":Q,pe=(0,q.Y5)(Z);if(s.target.files.length+pe.length+N.length>5){F.default.warning((0,a.ZT)(f("component.stageAddFileTip"),5));return}this.props.dispatch({type:"uploader/chooseFiles",payload:{choosedFiles:s.target.files,dispatch:this.props.dispatch,uploadComponentType:B,notLibrary:ae,hasZip:ee==="true"}}),s.target.value=null,s.target.files=null},this.handlePreview=s=>{var p=this.props.t;if(!dd.version&&s.biz_type===3){F.default.info(p("practiceOperation.dingFileTip"));return}if(s.biz_type!==3){this.handlePreviewSystemFile(s);return}var f=V.ZP.DingSpaceId.getSpaceId(),N={corpId:this.props.corpId,userId:this.props.account,fileids:s.url,timeStamp:Date.parse(new Date)};d.WY.get({url:f,params:N}).then(Z=>{Z.data.code===0?this.ddSpacePreview(s):F.default.info(Z.data.msg)}).catch(Z=>{F.default.error(Z.data)})},this.handlePreviewDingFile=(0,E.Z)(X().mark(function s(){var p,f,N,Z,B,ae,Q,ee;return X().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return p=y.props,f=p.corpId,N=p.dingUserId,Z=p.value,B=p.t,le.next=3,(0,M.Cz)({corpId:f,userId:N});case 3:ae=le.sent,Q=oe=>{(0,z.jz)(oe,3).then(ce=>{if(ce.data.code===0){var de=(0,z.GY)(ce.data,y.props);de&&de.length>0&&y.props.onChange(Z.concat(de))}}).catch(ce=>console.error(ce))},ee=oe=>{F.default.warn("".concat(B("learning.dingSelectError"),": ").concat(JSON.parse(oe)))},(0,M.yZ)({space:{spaceId:ae,corpId:f,max:5},types:["space"],onSuccess:Q,onFail:ee});case 7:case"end":return le.stop()}},s)})),this.dealWatchType=s=>{var p=V.Yq.findIndex(pe=>s.type.toLowerCase().includes(pe))>-1,f=s.content_type.indexOf("video")>-1,N=V.Ss.indexOf(s.content_type)>-1,Z=s.type.indexOf("image")>-1||s.type.indexOf("picture")>-1||s.content_type.indexOf("image")>-1||s.content_type.indexOf("picture")>-1,B=s.content_type.indexOf("html")>-1,ae=s.content_type.indexOf("scorm")>-1,Q=s.content_type.indexOf("h5")>-1,ee="";return Q?ee="article":p?ee="doc":f||N?ee="video":Z?ee="image":B?ee="html":ae&&(ee="scorm"),ee},this.handlePreviewSystemFile=s=>{var p=this.state.previewInfo,f=this.dealWatchType(s),N=V.Ss.indexOf(s.content_type)>-1;if(f==="scorm"){var Z=s.url.split("//"),B=Z[1].split("/"),ae=[Z[0],B[0]].join("//"),Q="".concat(ae,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(s.url));w.Z.targetTo({path:Q,isExternalLink:!0});return}if(f==="article"){var ee=s.content_type,pe=s.url,le=ee==="h5/link";le?w.Z.targetTo({path:pe,isExternalLink:!0}):w.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(s.id)});return}var oe={mode:"preview",watchType:f};f==="doc"?Object.assign(oe,{resourceInfo:{type:"",docType:s.type,aliUrl:s.path,url:s.url,docTitle:s.name,playId:s.videoId||s.video_id,storageType:s.storage_type}}):f==="image"?Object.assign(oe,{resourceInfo:{url:s.url,playId:s.videoId||s.video_id,storageType:s.storage_type}}):f==="html"?Object.assign(oe,{resourceInfo:{url:s.url}}):Object.assign(oe,{resourceInfo:{source:{FD:s.url,OD:s.path},originUrl:s.url,contentType:N?"mp3":s.type,playId:s.videoId||s.video_id,storageType:s.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:oe,previewInfo:(0,L.Z)((0,L.Z)({},p),{},{title:s.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var s=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,L.Z)((0,L.Z)({},s),{},{visible:!1})})},this.ddSpacePreview=s=>{var p={spaceId:s.path,fileId:s.url,fileName:s.name,fileSize:s.size,fileType:s.type};(0,M.DR)(p)},this.renderFileListItem=(s,p,f)=>l().createElement("div",{className:"file-list-item-coach",key:s.id||s.uid},l().createElement("span",{className:"file-list-item-coach__index"},f+1),l().createElement(S.Z,{iconClass:r(s),size:"16px"}),l().createElement("div",{className:"file-list-item-coach__info"},l().createElement("span",{className:"name"},s.name),s.id&&l().createElement("span",{className:"size"},s.size/1e3,"KB"),!s.id&&l().createElement("span",{className:"size"},"\u4E0A\u4F20\u4E2D")),p?l().createElement(C.Z,{type:"link",className:"file-list-item-coach__remove-btn",onClick:()=>{this.handleRemove(s)}},l().createElement(S.Z,{iconClass:"icon-icon_close",size:"12px"})):l().createElement("div",{style:{width:12}})),this.handleCancelUpload=()=>{this.setState({uploadVisible:!1})},this.uploadSuccess=s=>{var p=this.props,f=p.t,N=p.value;if(s.length+N.length>5){F.default.warning((0,a.ZT)(f("component.stageAddFileTip"),5));return}var Z=s.map(B=>{var ae=V.Ss.indexOf(B.originalType)>-1;return{id:B.id,name:B.name,duration:B.duration,type:B.type,originalType:B.type,icon:V.e1[ae?"mp3":B.type],status:B.status,size:B.size}});this.props.onChange(this.props.value.concat(Z)),this.setState({uploadVisible:!1})},this.state={showFileSelector:!1,UploadConfig:{data:{access_token:localStorage.token},action:V.ZP.PostAbility.operateAttachmentUpload(),beforeUpload:this.handleBeforeUpload,accept:".jpg,.jpeg,.png,.gif",showUploadList:!1,onChange:this.handleOnChange},uploadVisible:!1,resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},isDingDiskChoose:!1,previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}}}componentDidMount(){var i=this;return(0,E.Z)(X().mark(function y(){var s;return X().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(0,M.TN)(),f.next=3,(0,z.uj)("operation");case 3:s=f.sent,i.setState({isDingDiskChoose:s});case 5:case"end":return f.stop()}},y)}))()}UNSAFE_componentWillReceiveProps(i){if((0,q.Of)(i,this.props)){var y=i.uploadSucceedItem,s=y.id,p=y.name,f=y.contentType,N=y.type,Z=y.duration,B=y.status,ae=y.size;if(i.uploadComponentType!==i.uploadComponentId)return;var Q=V.Ss.indexOf(f)>-1,ee={id:s,name:p,duration:Z,type:N,originalType:N,icon:V.e1[Q?"mp3":N],status:B,size:ae};this.props.onChange(this.props.value.concat([ee]))}}render(){var i=this.props,y=i.t,s=i.value,p=i.removeable,f=i.preview,N=i.resourceTip,Z=i.canSelectCourse,B=i.notLibrary,ae=i.hasZip,Q=ae===void 0?"":ae,ee=this.state,pe=ee.UploadConfig,le=ee.showFileSelector,oe=ee.uploadVisible,ce=ee.isDingDiskChoose,de=ee.resourcePlayInfo,ve=ee.previewInfo,me=l().createElement(_.Z,null,l().createElement(_.Z.Item,null,l().createElement(O.Z,pe,y("component.practiceUploadPicBtnText"))),l().createElement(_.Z.Item,null,B?l().createElement("div",{className:"practice-attachment__upload__button"},y("component.practiceUploadFileBtnText"),l().createElement("input",{className:"file-input",multiple:!0,type:"file",onChange:this.handleChooseFiles})):l().createElement("div",{className:"practice-attachment__upload__button",onClick:()=>this.setState({uploadVisible:!0})},y("component.practiceUploadFileBtnText"))));return l().createElement("div",{className:"practice-attachment"},!f&&l().createElement("div",null,l().createElement(Y.Z,{visible:le,defaultChecked:s,onCancel:this.handleSelectedCancel,onOk:this.handleSelectedAttachment,excludeType:"h5",showPrivate:!1}),l().createElement("div",{className:"practice-attachment-row"},l().createElement("span",null,y("component.practiceAttachment"),":"),l().createElement("div",null,l().createElement("div",null,l().createElement(v.Z,{overlay:me,disabled:s.length===5},l().createElement(C.Z,{disabled:s.length===5,icon:l().createElement(R.Z,null)},y("component.localUpload"))),Z?l().createElement(C.Z,{className:"practice-attachment__choose-courseware",icon:l().createElement(R.Z,null),disabled:s.length===5,onClick:this.handleUploadFile},y("component.coursewareLibSelect")):null,dd&&dd.version&&ce?l().createElement(C.Z,{className:"practice-attachment__ding-upload-button",icon:l().createElement(I.Z,null),disabled:s.length===5,onClick:this.handlePreviewDingFile},y("learning.dingSelect")):null),l().createElement("div",{className:"tip"},N||y(Q==="true"?"component.practiceUploadTipZip":"component.practiceUploadTipRange"))))),l().createElement("div",{className:"file-list"},s.map((ue,he)=>this.renderFileListItem(ue,p,he))),B?l().createElement(G.Z,{params:{classifyId:0,bizType:1},hasZip:Q}):l().createElement(b.Z,{visible:oe,title:this.props.t("common.storage"),onCancel:this.handleCancelUpload,onSuccess:ue=>this.uploadSuccess(ue),params:{classifyId:0,bizType:0},notLibrary:B,hasZip:Q}),l().createElement(ne.Z,(0,$.Z)({},de,{previewInfo:ve})))}}P.defaultProps={removeable:!1,attachment:[],preview:!1,resourceTip:"",canSelectCourse:!0,notLibrary:!1};var U=(0,n.$j)(se)((0,u.Z)()(P)),te=e(43859),K=g.Z.TextArea;class j extends l().Component{constructor(){super(...arguments);this.handleChange=i=>{var y=i.target.value;this.props.onFieldChange(y)},this.changContent=(i,y)=>{var s=i.target.value,p=[...this.props.value];p[y].content=s,this.props.onFieldChange(p)},this.changeFile=(i,y)=>{for(var s=[...this.props.value],p=0,f=s;p<f.length;p++){var N=f[p];if(y===N.id){N.resources=i;break}}this.props.onFieldChange(s)},this.addStep=()=>{var i=this.props.value;this.props.onFieldChange(i.concat([{content:"",resources:[],id:new Date().getTime()}]))},this.delItem=i=>{var y=[...this.props.value];y.splice(i,1),this.props.onFieldChange(y)}}render(){var i=this.props,y=i.value,s=i.t,p=i.formik,f=i.canEdit,N=i.maxLength,Z=i.areaPlaceHolder,B=i.resourceTip,ae=i.canSelectCourse,Q=i.notLibrary,ee=i.hasZip,pe=ee===void 0?"":ee,le=p.errors;return l().createElement("div",{className:"radio-mentor-form"},y.map((oe,ce)=>l().createElement("div",{key:oe.id,className:"step-item"},l().createElement("div",{className:"step-title"},l().createElement("p",{className:"step-content"},(0,a.ZT)("".concat(s("practiceOperation.stepByStep")),ce+1)),y.length>1&&l().createElement(c.Z,{onClick:()=>this.delItem(ce)})),l().createElement(K,{maxLength:N,disabled:!f,rows:4,placeholder:Z||s("tutorial.textDesc"),value:oe.content,onChange:de=>this.changContent(de,ce)}),l().createElement(U,{notLibrary:Q,canSelectCourse:ae,resourceTip:B,uploadComponentId:oe.id,removeable:f,hasZip:pe,preview:!f,onChange:de=>this.changeFile(de,oe.id),value:oe.resources}),le&&le.stepList&&le.stepList[ce]&&l().createElement("p",{className:"step-content-error"},s("tutorial.textDescRequire")))),f?l().createElement("div",{className:"step-add-btn",onClick:this.addStep},l().createElement(R.Z,null),l().createElement("span",null,s("tutorial.addSteps"))):null)}}j.defaultProps={maxLength:800,areaPlaceHolder:"",resourceTip:"",canSelectCourse:!0,notLibrary:!1};var o=(0,te.Z)((0,t.$j)((0,u.Z)()(j)))},61981:function(re,k,e){"use strict";e.d(k,{Z:function(){return T}});var H=e(88983),g=e(47933),J=e(93485),l=e(57663),u=e(71577),t=e(12924),c=e.n(t),R=e(91768),$=e(18329),m=e(10237),v=e(37055);function h(O){var A=v.ZP.tutor.listTutor();return m.WY.get({url:A,params:{filter_user_quit:"true",user_id:O,filter_user_tutor:"true",status:"on"}})}class _ extends c().Component{constructor(A){super(A);this.initTutorData=C=>{h(C.userId).then(L=>{L.data.data.list&&this.setState({tutorList:L.data.data.list,selectTutorId:C.value||""})})},this.renderFooter=()=>c().createElement(u.Z,{key:"submit",type:"primary",onClick:this.handleOk},this.props.t("common.submit")),this.changeTutor=C=>{this.setState({selectTutorId:C.target.value})},this.onOk=()=>{var C=this.props.onOk,L=this.state,E=L.selectTutorId,W=L.tutorList,F="",x=(0,J.Z)(W),X;try{for(x.s();!(X=x.n()).done;){var n=X.value;if(n.user_id===E){F=n.user_name;break}}}catch(I){x.e(I)}finally{x.f()}C&&C(E,F)},this.onCancel=()=>{var C=this.props.onCancel;this.setState({tutorList:[],selectTutorId:""}),C&&C()},this.renderTip=()=>{var C=this.state.tutorList,L=this.props,E=L.t,W=L.model;if(C.length===0)return E("tutorial.noTutor");if(W==="resource_evaluation")return E("tutorial.noEvaluation");if(W==="evaluation")return E("tutorial.tutorCommitAssess");if(W==="operation")return E("tutorial.noApproverEvaluation")},this.state={prefixCls:"coach-tutor-modal",tutorList:[],selectTutorId:""}}UNSAFE_componentWillReceiveProps(A){A.visible!==this.props.visible&&A.visible&&this.initTutorData(A),A.visible!==this.props.visible&&!A.visible&&this.setState({tutorList:[],selectTutorId:""})}render(){var A=this.state,C=A.prefixCls,L=A.tutorList,E=A.selectTutorId,W=this.props,F=W.t,x=W.visible,X=W.title;return c().createElement($.ZP,{className:"".concat(C),visible:x,title:X||F("tutorial.chooseTutor"),size:"small",onCancel:this.onCancel,onOk:this.onOk},c().createElement("div",{className:"choose-tutor-content"},c().createElement("div",{className:"tutor-list"},c().createElement("div",{className:"tutor-tip"},this.renderTip()),L.length>0?c().createElement(g.ZP.Group,{onChange:this.changeTutor,value:E},L.map(n=>c().createElement(g.ZP,{value:n.user_id,key:n.user_id},c().createElement("div",{className:"radio-item"},c().createElement("img",{src:n.avatar||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png"),alt:""}),c().createElement("div",{className:"radio-item-text"},c().createElement("div",{className:"radio-item-name"},c().createElement("span",{title:n.user_name,className:"user-name"},n.user_name),c().createElement("img",{src:n.gender==="female"?"".concat("https://oss.coolcollege.cn","/1790706776073703424.png"):"".concat("https://oss.coolcollege.cn","/1790706775494889472.png"),alt:"",className:"user-name__sex-img"})),c().createElement("span",{title:n.department_name,className:"user-post"},n.department_name)))))):null)))}}_.defaultProps={visible:!1,onCancel:()=>{},onOk:()=>{},value:""};var T=(0,R.Z)()(_)},47503:function(re,k,e){"use strict";var H=e(13062),g=e(71230),J=e(89032),l=e(15746),u=e(12924),t=e.n(u),c=e(91768),R=e(84874),$=e(75876),m=e.n($),v=e(97256),h=e.n(v);function _(T){var O=T.t,A=T.list,C=A===void 0?[]:A,L=T.isFold,E=L===void 0?!1:L,W=T.isMust,F=W===void 0?!0:W,x=T.joint,X=x===void 0?!0:x,n=T.signType,I=n===void 0?"":n,z=T.max,b=z===void 0?2:z,G=T.edit,a=G===void 0?!0:G,M=T.onAll,d=T.onAdd,S=T.onRemove;function w(Y){return Y==="all"?"+":Y==="any"?"/":">"}function V(Y){if(Y){var q=Y.name||Y.user_name;if(q)return q.substring(q.length-2)}return"--"}return t().createElement(g.Z,{className:"".concat(h().approver," ").concat(E?h().fold:null),gutter:[0,20]},E&&C.length>b&&t().createElement(l.Z,{className:h().all,onClick:()=>M()},t().createElement("div",{className:h().top},t().createElement("div",{className:h().left},t().createElement("div",{className:h().head},t().createElement(R.Z,{className:h().friendsIcon,iconClass:"iconf-group",size:"22px",color:"#fff"}))),t().createElement("div",{className:h().right},t().createElement("span",{className:h().joint},w(I)))),t().createElement("div",{className:h().bottom},t().createElement("p",{className:h().name},O("personnelDevelope.LookAtAll")))),C&&C.map((Y,q)=>t().createElement(l.Z,{className:E&&C.length>b&&q<C.length-b?h().hide:null,key:Y.id,title:Y.name||Y.user_name},t().createElement("div",{className:h().top},t().createElement("div",{className:h().left},Y.avatar?t().createElement("img",{className:h().avatar,width:"36",height:"36",src:Y.avatar,alt:""}):t().createElement("div",{className:h().head},a&&t().createElement("div",{className:h().remove,onClick:()=>S(q)},t().createElement("img",{src:m(),width:"100%",height:"100%"})),V(Y))),a||!a&&C.length>1&&q!==C.length-1?t().createElement("div",{className:h().right},X&&t().createElement("span",{className:h().joint},w(I))):null),t().createElement("div",{className:h().bottom},t().createElement("p",{className:h().name},Y.name||Y.user_name)))),a&&t().createElement(l.Z,{className:h().add,onClick:()=>d(C)},t().createElement("div",{className:h().top},t().createElement("div",{className:h().left},t().createElement("div",{className:h().head},E&&F&&C.length===0&&t().createElement("div",{className:h().remove,style:{backgroundColor:"#fff"}},t().createElement("span",{className:h().must},"*")),t().createElement(R.Z,{iconClass:"iconf-add",className:h().plusIcon,size:"18px"}))))))}k.Z=(0,c.Z)()(_)},59024:function(re,k,e){"use strict";var H=e(87593),g=e(37636),J=e(33565),l=e(12924),u=e.n(l),t=e(91768),c=e(45555),R=e.n(c),$=e(47503),m=e(18329),v=e(6793),h=e(56932);function _(T){var O=T.approvalData,A=T.t,C=(0,l.useState)(!1),L=(0,J.Z)(C,2),E=L[0],W=L[1],F=(0,l.useState)(""),x=(0,J.Z)(F,2),X=x[0],n=x[1],I={approval_going:A("common.pending"),approval_pass:A("common.passed"),approval_reject:A("common.refused"),approval_revoked:A("approval.revoked")},z={approval_going:"rgba(0,0,0,.25)",approval_pass:"#8bbf64",approval_reject:"#f03a3a",approval_revoked:"#ffbd74"};function b(d,S){var w=h;return S&&d===1&&(w=S),u().createElement("img",{className:R().avatar,width:"26",height:"26",src:w,alt:""})}function G(d){var S=[];return d.forEach(w=>{S.push(w.user_name)}),S.join("\u3001")}function a(d){n(d),W(!0)}function M(d,S){return u().createElement(g.Z.Item,{key:d.user_id,color:z[d.status],dot:b(d.users.length,d.users.length?d.users[0].avatar:"")},u().createElement("div",{className:R().title},u().createElement("span",{className:R().approval},d.status==="approval_revoked"?A("approval.revoked"):A("authentication.abilityDetailApprover")),d.users&&d.users.length&&d.users[0].approval_time?u().createElement("span",{className:R().time},(0,v.p6)(d.users[0].approval_time)):null),d.auto_pass==="true"?u().createElement("span",null,A("approval.autoPass")):u().createElement(u().Fragment,null,d.users.length>1?u().createElement("div",null,d.sign_type==="all"?A("approval.allApproval",{param:d.users.length}):A("approval.anyApproval",{param:d.users.length}),u().createElement("span",{className:R()[d.status]},"\uFF08",I[d.status]||"","\uFF09")):null,u().createElement("div",null,u().createElement("span",null,d.users.length>1?u().createElement($.Z,{onAll:()=>{a(S)},signType:d.sign_type,edit:!1,isFold:!0,list:d.users,max:5}):u().createElement("span",null,G(d.users))),(d.status==="approval_pass"||d.status==="approval_reject"||d.users.length===1)&&u().createElement(u().Fragment,null,u().createElement("span",{style:{color:z[d.status]}},"\uFF08",I[d.status]||"","\uFF09"),u().createElement("span",null,d.users[0].extend_info&&typeof d.users[0].extend_info.score=="number"?d.users[0].extend_info.score+A("common.score"):""))),(d.status==="approval_pass"||d.status==="approval_reject")&&u().createElement("div",{className:R().remarkMessage},d.users[0].form_msg)))}return u().createElement("div",null,u().createElement(g.Z,{className:R().approvalList},O.list.length&&O.list[0].users.length&&u().createElement(g.Z.Item,{color:"#8bbf64",dot:b(1,O.list.length&&O.list[0].users.length?O.list[0].users[0].avatar:"")},u().createElement("div",{className:R().title},u().createElement("span",{className:R().approval},A("practiceOperation.initiateApproval")),u().createElement("span",{className:R().time},(0,v.p6)(O.list[0].users[0].approval_time))),u().createElement("div",null,O.list[0].users[0].user_name)),O.list.map((d,S)=>S!==0?M(d,S):null)),u().createElement(m.ZP,{visible:E,title:A("authentication.abilityDetailApprover"),footer:null,onCancel:()=>W(!1)},E&&u().createElement($.Z,{isFold:!1,list:O.list[X].users,signType:O.list[X].sign_type,edit:!1,max:4})))}k.Z=(0,t.Z)()(_)},12532:function(re,k,e){"use strict";e.d(k,{zm:function(){return J},B3:function(){return l},xx:function(){return u},XJ:function(){return R},ph:function(){return $}});var H=e(37055),g=e(10237);function J(v){var h=v.status,_=v.bizType,T=v.title,O=v.createUserId,A=v.pageNumber,C=v.pageSize,L=H.ZP.approval.getWorkflowList();return g.WY.get({url:L,params:{status:h,biz_type:_,title:T,create_user_id:O,page_number:A,page_size:C}})}function l(v){var h=v.type,_=v.status,T=v.bizType,O=v.title,A=v.createUserId,C=v.pageNumber,L=v.pageSize,E=H.ZP.approval.getWorkflowListWaitDone();return g.WY.post({url:E,data:{app_id:"cool",eid:H.ZP.enterpriseId,uid:H.ZP.userId,f_status:_,task_status:h,task_type:"workflow",business_type:T,task_name:O,user_ids:A?[A]:[],page_number:C,page_size:L}})}function u(v){return g.WY.post({url:H.ZP.approval.withdrawApproval(v)})}function t(v){return request.post({url:CONFIG.approval.passApproval(v),data:{suggest:v.suggest}})}function c(v){return request.post({url:CONFIG.approval.rejectApproval(v),data:{suggest:v.suggest}})}function R(v){return g.WY.post({url:H.ZP.approval.executeApproval(v),data:{app_id:"cool",eid:H.ZP.enterpriseId,uid:H.ZP.userId,proposal:v.suggest,personnel_id:v.personnel_id,exe_result:v.exeResult,task_id:v.taskId}})}function $(v){return g.WY.get({url:H.ZP.approval.getApprovalInfos(v)})}function m(v){var h=v.instanceId,_=v.biz_type;return request.get({url:CONFIG.trainingConfig.getBusinessId(h),params:{biz_type:_}})}},41285:function(re,k,e){"use strict";e.d(k,{Z:function(){return ie}});var H=e(62029),g=e(57663),J=e(71577),l=e(34792),u=e(48086),t=e(12924),c=e.n(t),R=e(91768),$=e(55446),m=e(28216),v=e(88986),h=e(93485),_=e(33565),T=e(80991),O=e(2287),A=e(2323),C=e(49101),L=e(43859),E=e(61981);class W extends c().Component{constructor(){super(...arguments);this.state={coachModel:"operation",showSelectCoachTutorDialog:!1},this.selectCoachTutorPeople=(r,P)=>{this.setState({showSelectCoachTutorDialog:!1}),this.props.onFieldChange({tutor_user_id:r,tutor_user_name:P})}}render(){var r=this.props,P=r.value,U=r.t,te=r.userId,K=r.otherUserId,j=this.state,o=j.showSelectCoachTutorDialog,D=j.coachModel,i=K||te;return c().createElement("div",null,P.tutor_user_id?c().createElement("span",{className:"select-tutor-approver-name"},P.tutor_user_name||""):null,c().createElement(J.Z,{onClick:()=>this.setState({showSelectCoachTutorDialog:!0}),icon:c().createElement(C.Z,null)}),c().createElement(E.Z,{model:D,value:P.tutor_user_id,title:U("authentication.abilityDetailSecAddApprover"),userId:i,visible:o,onOk:this.selectCoachTutorPeople,onCancel:()=>this.setState({showSelectCoachTutorDialog:!1})}))}}var F=se=>{var r=se.user;return{lng:r.lng,userId:r.id}},x=(0,m.$j)(F)((0,L.Z)((0,T.$j)((0,R.Z)()(W)))),X=e(6793),n=e(10237),I=e(37055),z=e(1164),b=e(76466),G=e(54531),a=e(84874),M=e(54624),d={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}},S=se=>{var r=I.Ss.indexOf(se.content_type)>-1,P=se.type;se.content_type==="scorm"&&(P="scorm"),r&&(P="mp3");var U=I.e1[P];return U||"iconf-matter-picture"};class w extends c().Component{constructor(){super(...arguments);this.state={resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}},this.initRef=r=>{this.formRef=r},this.validate=r=>{var P={},U=(0,h.Z)(r.entries()),te;try{for(U.s();!(te=U.n()).done;){var K=te.value,j=(0,_.Z)(K,2),o=j[0],D=j[1];(!D.content||(0,X.fy)(D.content).length===0)&&(D.resources&&D.resources.filter(i=>i.id).length===0||!D.resources)&&(P[o]=!0)}}catch(i){U.e(i)}finally{U.f()}return Object.keys(P).length?P:""},this.validateApprover=r=>{var P=this.props.t,U="";return r.tutor_user_id||(U=P("tutorial.selectApprover")),U},this.handlePreview=r=>{var P=this.props,U=P.appType,te=P.t;if(U==="wx_app"&&r.biz_type===3){u.default.info("\u8BE5\u9644\u4EF6\u7531\u9489\u76D8\u4E0A\u4F20\uFF0C\u65E0\u6CD5\u9884\u89C8\uFF0C\u8BF7\u5728\u9489\u9489\u5BA2\u6237\u7AEF\u6253\u5F00\u9884\u89C8");return}if(r.status!==3){u.default.info(te("resourceLibrary.transcodingPlayerTip"));return}if(!((r.type==="zip"||r.type==="rar")&&r.storage_type!=="DING_PAN")){if(U==="app"){this.handlePreviewSystemFile(r);return}if(!dd.version&&r.biz_type===3){u.default.info(te("practiceOperation.dingFileTip"));return}if(r.biz_type!==3){this.handlePreviewSystemFile(r);return}var K=I.ZP.DingSpaceId.getSpaceId(),j={corpId:this.props.corpId,userId:this.props.account,fileids:r.url,timeStamp:Date.parse(new Date)};n.WY.get({url:K,params:j}).then(o=>{o.data.code===0?this.ddSpacePreview(r):u.default.info(o.data.msg)}).catch(o=>{u.default.error(o.data)})}},this.dealWatchType=r=>{var P=I.Yq.findIndex(y=>r.type.toLowerCase().includes(y))>-1,U=r.content_type.indexOf("video")>-1,te=I.Ss.indexOf(r.content_type)>-1,K=r.content_type.indexOf("image")>-1||r.type.indexOf("image")>-1||r.content_type.indexOf("picture")>-1||r.type.indexOf("picture")>-1,j=r.content_type.indexOf("h5")>-1,o=r.content_type==="html",D=r.content_type==="scorm",i="";return j?i="article":P?i="doc":U||te?i="video":K?i="image":o?i="html":D&&(i="scorm"),i},this.handlePreviewSystemFile=r=>{var P=this.state.previewInfo,U=this.dealWatchType(r),te=I.Ss.indexOf(r.content_type)>-1;if(U==="article"){var K=r.content_type,j=r.url,o=K==="h5/link";o?z.Z.targetTo({path:j,isExternalLink:!0}):z.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(r.id)});return}if(U==="scorm"){var D=r.url.split("//"),i=D[1].split("/"),y=[D[0],i[0]].join("//"),s="".concat(y,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(r.url));z.Z.targetTo({path:s,isExternalLink:!0});return}var p={mode:"preview",watchType:U};U==="doc"?Object.assign(p,{resourceInfo:{type:"",docType:r.type,aliUrl:r.path,url:r.url,docTitle:r.name,playId:r.videoId||r.video_id,storageType:r.storage_type}}):U==="image"?Object.assign(p,{resourceInfo:{url:r.url,playId:r.videoId||r.video_id,storageType:r.storage_type}}):U==="html"?Object.assign(p,{resourceInfo:{url:r.url}}):Object.assign(p,{resourceInfo:{source:{FD:r.url,OD:r.path},originUrl:r.url,contentType:te?"mp3":r.type,playId:r.videoId||r.video_id,storageType:r.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:p,previewInfo:(0,v.Z)((0,v.Z)({},P),{},{title:r.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var r=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,v.Z)((0,v.Z)({},r),{},{visible:!1})})},this.ddSpacePreview=r=>{var P={spaceId:r.path,fileId:r.url,fileName:r.name,fileSize:r.size,fileType:r.type};(0,G.DR)(P)},this.renderItemView=r=>c().createElement("div",{className:"file-list-item-resource",key:r.id||r.uid,onClick:()=>{this.handlePreview(r)}},c().createElement(a.Z,{iconClass:S(r),size:"22px"}),c().createElement("div",{className:"info"},c().createElement("span",{className:"name"},r.name),c().createElement("div",{className:"size-and-download"},r.id&&c().createElement("span",{className:"size"},r.size/1024>1024?"".concat((r.size/1024/1024).toFixed(1),"MB"):"".concat((r.size/1024).toFixed(1),"KB")),(0,O.a)(r)&&c().createElement("span",{className:"download-text"},c().createElement(A.Z,{item:r})))))}componentDidMount(){this.props.onFormMounted(this.formRef),(0,G.TN)()}render(){var r=this.props,P=r.initData,U=r.t,te=r.canEdit,K=r.otherUserId,j=this.state,o=j.resourcePlayInfo,D=j.previewInfo;return c().createElement("div",{className:"coach-task-form"},c().createElement("div",{className:"step-title-content"},c().createElement("p",{className:"step-title"},P.title),c().createElement("div",{className:"step-content-text"},c().createElement("p",{className:"task-desc"},U("component.practiceRequire"),"\uFF1A"),c().createElement("p",{className:"more-text"},P.content)),P.resourceList.length===0?null:c().createElement("div",{className:"step-content-text"},c().createElement("p",{className:"task-desc"},U("practiceOperation.annex"),"\uFF1A"),c().createElement("div",{className:"content-resource"},P.resourceList.map(i=>this.renderItemView(i))))),c().createElement(T.J9,{ref:this.initRef,initialValues:P,onSubmit:this.props.onSubmit,render:i=>c().createElement(T.l0,null,P.approval_type==="tutor"?c().createElement(T.gN,(0,H.Z)({name:"tutor",label:U("authentication.abilityDetailApprover"),defaultValue:i.values.tutor,validate:this.validateApprover,component:x,displayType:"Custom",otherUserId:K},d)):null,c().createElement(T.gN,(0,H.Z)({name:"stepList",label:"",required:!0,defaultValue:i.values.stepList,validate:this.validate,component:M.Z,notLibrary:!0,hasZip:"true",canSelectCourse:!1,maxLength:1200,areaPlaceHolder:U("tutorial.textDescOperationIndustry"),resourceTip:U("tutorial.resourceTip"),displayType:"Custom",canEdit:te,customError:!0},d)))}),c().createElement(b.Z,(0,H.Z)({},o,{previewInfo:D})))}}w.defaultProps={initData:{},onFormMounted:()=>{},canEdit:!0};var V=(0,m.$j)(se=>({corpId:se.user.corpId,account:se.user.account}))((0,R.Z)()(w)),Y=e(18329);class q extends c().Component{constructor(r){super(r);this.getInitData=P=>{var U=this.props.userInfo,te=P.otherUserId?I.ZP.operationInfo.getOperationCustomByUserAndTaskId({userId:P.otherUserId,operations:P.operationsId}):I.ZP.operationInfo.getOperationInfoByUserAndTaskId({userId:U.id,operations:P.operationsId});n.WY.get({url:te}).then(K=>{K.data.code===0?this.setState({initData:{title:K.data.data.title,content:K.data.data.content,operation_source:K.data.data.operation_source,resourceList:K.data.data.resources||[],stepList:K.data.data.steps&&K.data.data.steps.length>0?K.data.data.steps:[{content:"",resources:[],id:new Date().getTime()}],approval_type:K.data.data.approval_type,tutor:{tutor_user_id:K.data.data.tutor_user_id||"",tutor_user_name:K.data.data.tutor_user_name||""}},showForm:!0}):u.default.error(K.data.msg)})},this.onCancel=()=>{this.setState({showForm:!1}),this.props.onCancel&&this.props.onCancel()},this.onOk=P=>{var U=this.props.canEdit;if(!U){this.setState({showForm:!1}),this.props.onOk&&this.props.onOk();return}this.setState({commitStatus:P},()=>{this.AddFormInstance.submitForm()})},this.onFormMounted=P=>{this.AddFormInstance=P},this.onSubmit=P=>{var U=this.props,te=U.userInfo,K=U.t,j=U.otherUserId,o=this.state,D=o.isLoading,i=o.commitStatus,y=o.initData;if(!D){var s={steps:P.stepList.map((f,N)=>({content:f.content?(0,X.fy)(f.content):f.content,step:N+1,resources:f.resources.filter(Z=>Z.id).map((Z,B)=>({resourceId:Z.id,sort:B+1}))}))};if(P.approval_type==="tutor"&&!P.tutor.tutor_user_id){u.default.error(K("tutorial.selectApprover"));return}var p=j?I.ZP.operationInfo.saveOperationCustomContent({userId:j,operations:this.props.operationsId}):I.ZP.operationInfo.saveOperationIndustryContent({userId:te.id,operations:this.props.operationsId});this.setState({isLoading:!0}),n.WY.post({url:p,data:{approval_user:P.approval_type==="tutor"?P.tutor.tutor_user_id:"",operation:s.steps,operation_source:y.operation_source},params:{status:i==="save"?"0":"1"}}).then(f=>{this.setState({isLoading:!1}),f.data.code===0&&(u.default.success(K(i==="save"?"common.saveSuccess":"common.submitSuccess")),this.setState({showForm:!1}),this.props.onOk&&this.props.onOk(i!=="save"))}).catch(()=>{this.setState({isLoading:!1})})}},this.renderModalFooter=()=>{var P=this.props,U=P.t,te=P.onlyCommit,K=this.props.canEdit;return c().createElement("div",{className:"coach-task-modal-footer"},c().createElement(J.Z,{onClick:this.onCancel},U("common.cancel")),K?c().createElement(c().Fragment,null,te?null:c().createElement(J.Z,{type:"primary",onClick:()=>this.onOk("save")},U("common.save")),c().createElement(J.Z,{type:"primary",onClick:()=>this.onOk("submit")},U("common.submit"))):null)},this.state={showForm:!1,initData:{resourceList:[],operation_source:"study",stepList:[{content:"",resources:[],id:new Date().getTime()}],tutor:{tutor_user_id:"",tutor_user_name:""}},isLoading:!1,commitStatus:"save"},this.formRef=null}UNSAFE_componentWillReceiveProps(r){r.visible!==this.props.visible&&r.visible&&this.getInitData(r)}render(){var r=this.props,P=r.t,U=r.visible,te=r.canEdit,K=r.title,j=r.otherUserId,o={title:K||P("common.submit")+P("component.practiceExam"),okText:P("common.ok"),cancelText:P("common.cancel"),size:"medium",destroyOnClose:!0,maskClosable:!1,footerType:"custom"};return c().createElement(Y.ZP,(0,H.Z)({},o,{visible:U,onCancel:this.onCancel,onOk:this.onOk,renderCustomFooter:this.renderModalFooter}),c().createElement("div",{className:"add-task-coaching operation-industry"},this.state.showForm?c().createElement(V,{onFormMounted:this.onFormMounted,onSubmit:this.onSubmit,initData:this.state.initData,canEdit:te,otherUserId:j}):null))}}var ne=se=>({userInfo:se.user}),ie=(0,m.$j)(ne)((0,R.Z)()(q))},2323:function(re,k,e){"use strict";var H=e(22385),g=e(31097),J=e(12924),l=e.n(J),u=e(91768),t=e(90631),c=e(65202),R=e(2287);function $(m){var v=(0,c.p)(),h=m.item,_=m.t;return l().createElement(g.Z,{title:_("course.courseDetailDownload")},l().createElement(t.Z,{onClick:T=>(0,R.F)(T,h,m),style:{color:v,fontSize:"16px"}}))}k.Z=(0,u.Z)()($)},11050:function(re,k,e){"use strict";var H=e(57663),g=e(71577),J=e(62029),l=e(34792),u=e(48086),t=e(88986),c=e(18106),R=e(88108),$=e(12924),m=e.n($),v=e(91768),h=e(76651),_=e(57068),T=e(28216),O=e(41285),A=e(95558),C=e(24340),L=e(46971),E=e(41864),W=e(54531),F=e(37055),x=e(10237),X=e(76466),n=e(1164),I=R.Z.TabPane,z=G=>({corpId:G.user.corpId,account:G.user.account,enterpriseId:G.user.enterpriseId,appType:G.user.appType});class b extends m().Component{constructor(){super(...arguments);this.state={taskId:"",operationId:"",userId:"",taskType:"",renderList:!1,operationList:[],Info:{title:"",status:"",approval_time:"",content:"",score:"--",steps:[],approval_record:[]},operationIndustryProps:{visible:!1,operationsId:""},fromPage:"",resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}},this.getOperationList=()=>{var a=this.state.renderList;x.WY.post({url:F.ZP.operationInfo.getOperationList(),data:{entity_type:this.state.taskType,entity_id:this.state.taskId}}).then(M=>{this.setState({operationList:M.data.operations}),a&&M.data.operations[0]&&this.handleOperationChange(M.data.operations[0])})},this.initData=()=>{x.WY.get({url:F.ZP.operationInfo.getOperationInfo(this.state.operationId),params:{submit_user_id:this.state.userId}}).then(a=>{this.setState({Info:a.data.data})})},this.handleOperationChange=a=>{this.setState({operationId:a.id},()=>{this.initData()})},this.dealWatchType=a=>{var M=F.Yq.findIndex(ie=>a.type.toLowerCase().includes(ie))>-1,d=a.content_type.indexOf("video")>-1,S=F.Ss.indexOf(a.content_type)>-1,w=a.type.indexOf("image")>-1||a.type.indexOf("picture")>-1||a.content_type.indexOf("image")>-1||a.content_type.indexOf("picture")>-1,V=a.content_type.indexOf("html")>-1,Y=a.content_type.indexOf("scorm")>-1,q=a.content_type.indexOf("h5")>-1,ne="";return q?ne="article":M?ne="doc":d||S?ne="video":w?ne="image":V?ne="html":Y&&(ne="scorm"),ne},this.handlePreviewSystemFile=a=>{var M=this.state.previewInfo,d=this.dealWatchType(a),S=F.Ss.indexOf(a.content_type)>-1;if(d==="article"){var w=a.content_type,V=a.url,Y=w==="h5/link";Y?n.Z.targetTo({path:V,isExternalLink:!0}):n.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(a.id)});return}if(d==="scorm"){var q=a.url.split("//"),ne=q[1].split("/"),ie=[q[0],ne[0]].join("//"),se="".concat(ie,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(a.url));n.Z.targetTo({path:se,isExternalLink:!0});return}var r={mode:"preview",watchType:d};d==="doc"?Object.assign(r,{resourceInfo:{type:"",docType:a.type,aliUrl:a.path,url:a.url,docTitle:a.name,playId:a.videoId||a.video_id,storageType:a.storage_type}}):d==="image"?Object.assign(r,{resourceInfo:{url:a.url,playId:a.videoId||a.video_id,storageType:a.storage_type}}):d==="html"?Object.assign(r,{resourceInfo:{url:a.url}}):Object.assign(r,{resourceInfo:{source:{FD:a.url,OD:a.path},originUrl:a.url,contentType:S?"mp3":a.type,playId:a.videoId||a.video_id,storageType:a.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:r,previewInfo:(0,t.Z)((0,t.Z)({},M),{},{title:a.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var a=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,t.Z)((0,t.Z)({},a),{},{visible:!1})})},this.handlePreview=a=>{var M=this.props.appType;if(M==="wx_app"&&a.biz_type===3){u.default.info("\u8BE5\u9644\u4EF6\u7531\u9489\u76D8\u4E0A\u4F20\uFF0C\u65E0\u6CD5\u9884\u89C8\uFF0C\u8BF7\u5728\u9489\u9489\u5BA2\u6237\u7AEF\u6253\u5F00\u9884\u89C8");return}if(a.status!==3){u.default.info(this.props.t("resourceLibrary.transcodingPlayerTip"));return}if(!((a.type==="zip"||a.type==="rar")&&a.storage_type!=="DING_PAN")){if(M==="app"){this.handlePreviewSystemFile(a);return}if(!dd.version&&a.biz_type===3){u.default.info(this.props.t("practiceOperation.dingFileTip"));return}if(a.biz_type!==3){this.handlePreviewSystemFile(a);return}var d=F.ZP.DingSpaceId.getSpaceId(),S={corpId:this.props.corpId,userId:this.props.account,fileids:a.url,timeStamp:Date.parse(new Date)};x.WY.get({url:d,params:S}).then(w=>{w.data.code===0?this.ddSpacePreview(a):u.default.info(w.data.msg)}).catch(w=>{u.default.error(w.data)})}},this.ddSpacePreview=a=>{var M={spaceId:a.path,fileId:a.url,fileName:a.name,fileSize:a.size,fileType:a.type};(0,W.DR)(M)},this.renderOperationList=()=>{var a=this.state,M=a.operationList,d=a.operationId;return m().createElement(C.Z,{list:M,curr:d,onChange:this.handleOperationChange})},this.renderContent=()=>{var a=this.state,M=a.Info,d=a.isCheckReason,S=this.props,w=S.prefixCls,V=S.enterpriseId,Y=S.t;return m().createElement("div",null,m().createElement(A.Z,{Info:M,onPreview:this.handlePreview}),m().createElement("div",{className:"".concat(w,"-body job-work-content")},m().createElement(R.Z,{defaultActiveKey:d==="true"?"audit":"content"},m().createElement(I,{tab:V==="1074539867477774379"?"\u5B66\u5458\u95EE\u9898":Y("practiceOperation.workContent"),key:"content"},m().createElement(L.Z,(0,J.Z)({},M,{onPreview:this.handlePreview}))),m().createElement(I,{tab:V==="1074539867477774379"?"\u8001\u5E08\u89E3\u7B54":Y("practiceOperation.approvalResult"),key:"audit"},m().createElement(E.Z,(0,J.Z)({},M,{approvalRecord:[M.approval_record],onPreview:this.handlePreview}))))))},this.handleResubmitOperation=()=>{var a=this.state.operationId;this.setState({operationIndustryProps:{visible:!0,operationsId:a}})},this.onCloseOperationIndustry=()=>{var a=this.state.operationIndustryProps;this.setState({operationIndustryProps:(0,t.Z)((0,t.Z)({},a),{},{visible:!1})})},this.handleAddOperationIndustry=()=>{var a=this.state.renderList;this.onCloseOperationIndustry(),a?this.getOperationList():this.initData()}}UNSAFE_componentWillMount(){var a=_.parse(h.m8.location.search),M=a.taskId,d=a.userId,S=a.operationId,w=a.taskType,V=a.page,Y=a.renderList,q=Y===void 0?!1:Y,ne=a.isCheckReason,ie=ne===void 0?!1:ne;this.setState({userId:d,operationId:S,taskId:M,taskType:w,renderList:q,fromPage:V,isCheckReason:ie},()=>{q?this.getOperationList():this.initData(),(0,W.TN)()})}render(){var a=this.props,M=a.prefixCls,d=a.t,S=this.state,w=S.renderList,V=S.operationIndustryProps,Y=S.Info,q=S.fromPage,ne=S.resourcePlayInfo,ie=S.previewInfo,se=this.props.match.path;return m().createElement(m().Fragment,null,m().createElement("div",{className:"operation-view operation-view-single ".concat(se.indexOf("personal")>-1?"operation-view_personal_background operation-view-padding":"")},m().createElement("div",{className:"".concat(M," operation-info-training ").concat(w?"":"operation-full"," ").concat(se.indexOf("personal")>-1?"personal_css":"")},w?m().createElement("div",{className:"operation-list"},this.renderOperationList()):null,m().createElement("div",{className:"operation-detail"},this.renderContent())),Y.status===2&&q==="analysis"&&m().createElement("div",{className:"fixed-resubmit-content"},m().createElement("div",null,m().createElement(g.Z,{onClick:this.handleResubmitOperation,type:"primary"},d("learning.reSubmit")))),m().createElement(O.Z,{visible:V.visible,onCancel:this.onCloseOperationIndustry,onOk:this.handleAddOperationIndustry,operationsId:V.operationsId,canEdit:!0}),m().createElement(X.Z,(0,J.Z)({},ne,{previewInfo:ie}))))}}b.defaultProps={prefixCls:"operation-info"},k.Z=(0,T.$j)(z)((0,v.Z)()(b))},41864:function(re,k,e){"use strict";var H=e(87593),g=e(37636),J=e(13254),l=e(14277),u=e(12924),t=e.n(u),c=e(91768),R=e(2323),$=e(2287),m=e(84874),v=e(37055),h=e(6793),_=e(56932),T=e.n(_),O=e(60667),A=localStorage,C=A.appType,L=n=>{var I=v.Ss.indexOf(n.content_type)>-1,z=n.type;n.content_type==="scorm"&&(z="scorm"),I&&(z="mp3");var b=v.e1[z];return b||"iconf-matter-picture"},E=(n,I)=>t().createElement("div",{className:"file-list-item",key:n.id||n.uid,onClick:()=>{I.onPreview(n)}},t().createElement(m.Z,{iconClass:L(n),size:"22px"}),t().createElement("div",{className:"info"},t().createElement("span",{className:"name"},t().createElement(O.Z,{dataType:"userName",value:n.sync_user_id,name:n.name,type:n.source_type})),t().createElement("div",{className:"size-and-download"},n.id&&t().createElement("span",{className:"size"},n.size/1024>1024?"".concat((n.size/1024/1024).toFixed(1),"MB"):"".concat((n.size/1024).toFixed(1),"KB")),(0,$.a)(n)&&t().createElement("span",{className:"download-text"},t().createElement(R.Z,{item:n}))))),W=(n,I)=>{var z=n.split("%s"),b=[];return b.push(z[0]),I.length>1&&I.splice(2),I.forEach((G,a)=>{if(a>0){var M=a<I.length-1;b.push(t().createElement("span",null,t().createElement(O.Z,{dataType:"userName",value:G.sync_user_id,name:G.name,type:G.source_type}),M?"\u3001":""))}}),b.push(z[1]),b.map((G,a)=>t().createElement("span",{key:a},G))},F=(n,I,z)=>{var b=!!(n.resources&&n.resources.length),G=n.user_list.length>1?W("".concat(I.t("practiceOperation.orApproval")),n.user_list):"",a=I.score_setting.score_switch==="on"&&(n.node_type==="pass"||n.node_type==="reject");return t().createElement("div",{className:"item audit-item",key:n.id},n.node_type==="pass"||n.node_type==="reject"?t().createElement("img",{className:"avatar",width:"26",height:"26",src:n.approval_user_avatar||T(),alt:""}):t().createElement("img",{className:"avatar",width:"26",height:"26",src:n.user_list[0].approval_user_avatar||T(),alt:""}),t().createElement("div",{style:{flex:1}},t().createElement("div",{className:"wrapper"},n.node_type==="creation"||n.node_type==="pass"||n.node_type==="reject"?t().createElement(t().Fragment,null,t().createElement("span",{className:"name"},n.approver_user_name?t().createElement(O.Z,{dataType:"userName",value:n.approver_sync_user_id,name:n.approver_user_name,type:n.approver_sync_source_type}):I.t("practiceOperation.me")),t().createElement("span",{className:"suggestion"},n.node_type==="creation"&&t().createElement("span",{style:{color:"rgb(255, 160, 0)"}},I.t("practiceOperation.initiateApproval")),n.node_type==="pass"&&t().createElement("span",{style:{color:"#8BBF64"}},I.t("common.pass")),n.node_type==="reject"&&t().createElement("span",{style:{color:"#D24343"}},I.t("common.reject"))),a&&t().createElement("span",{className:"mark"},"(",n.score,I.t("practiceOperation.score"),")"),t().createElement("span",{className:"time"},(0,h.p6)(n.update_time))):null,n.node_type==="pending"&&t().createElement("span",null,I.t("practiceOperation.wait"),t().createElement(O.Z,{dataType:"userName",value:n.user_list[0].sync_user_id,name:n.user_list[0].name,type:n.user_list[0].source_type}),G,I.t("learning.approval")),n.node_type==="un_pending"&&t().createElement("span",null,t().createElement(O.Z,{dataType:"userName",value:n.user_list[0].sync_user_id,name:n.user_list[0].name,type:n.user_list[0].source_type}),G),n.node_type==="leave"&&I.t("practiceOperation.waitAdmin")),t().createElement("div",{className:"".concat(z?"":"audit-item-dashed")},t().createElement("div",{className:"desc operation-pre-text"},n.opinion),b&&t().createElement("div",{className:"qualified-standard"},t().createElement("div",{className:"qualified-standard-title"},t().createElement("span",{className:"qualified-standard-title-bold"},"".concat(I.t("practiceOperation.annex"),"(").concat(n.resources.length).concat(I.t("practiceOperation.items"),")")),!dd.version&&C==="e_app"&&t().createElement("span",null," \uFF08",I.t("practiceOperation.dingFileTip"),"\uFF09")),t().createElement("div",{className:"qualified-standard-item"},t().createElement("div",{className:"file-list"},n.resources.map(M=>E(M,I))))))))},x=(n,I,z)=>{var b=I.score_setting.score_switch==="on"&&(n.operation==="pass"||n.operation==="reject");return t().createElement("div",{className:"item audit-item",key:n.id},n.operation==="pass"||n.operation==="reject"?t().createElement("img",{className:"avatar",width:"26",height:"26",src:n.approval_user_avatar||T(),alt:""}):t().createElement("img",{className:"avatar",width:"26",height:"26",src:n.user_list[0].approval_user_avatar||T(),alt:""}),t().createElement("div",{style:{flex:1}},t().createElement("div",{className:"wrapper"},n.operation==="creation"||n.operation==="pass"||n.operation==="reject"?t().createElement(t().Fragment,null,t().createElement("span",{className:"name"},t().createElement(O.Z,{dataType:"userName",value:n.sync_user_id,name:n.user_name,type:n.sync_source_type})),t().createElement("span",{className:"suggestion"},n.operation==="pass"&&t().createElement("span",{style:{color:"#8BBF64"}},I.t("common.pass")),n.operation==="reject"&&t().createElement("span",{style:{color:"#D24343"}},I.t("common.reject"))),b&&t().createElement("span",{className:"mark"},"(",n.score,I.t("practiceOperation.score"),")"),t().createElement("span",{className:"time"},(0,h.p6)(n.create_time))):null),t().createElement("div",{className:"".concat(z?"":"audit-item-dashed")},t().createElement("div",{className:"desc operation-pre-text"},n.opinion),n.resources&&t().createElement("div",{className:"qualified-standard"},t().createElement("div",{className:"qualified-standard-title"},t().createElement("span",{className:"qualified-standard-title-bold"},"".concat(I.t("practiceOperation.annex"),"(").concat(n.resources.length).concat(I.t("practiceOperation.items"))),!dd.version&&C==="e_app"&&t().createElement("span",null," \uFF08",I.t("practiceOperation.dingFileTip"),"\uFF09")),t().createElement("div",{className:"qualified-standard-item"},t().createElement("div",{className:"file-list"},n.resources.map(G=>E(G,I))))))))},X=n=>{var I=n.approvalRecord,z=I===void 0?[]:I,b=n.status,G=n.approvalStatus,a=G===void 0?"1":G;return b===0?t().createElement("div",{className:"operation-audit"},t().createElement(l.Z,{description:n.t("practiceOperation.notApproval")})):t().createElement("div",{className:"operation-audit"},z.map((M,d)=>t().createElement("div",{className:"operation-audit-item ".concat(d>0?"active":""),key:d.toString()},t().createElement(g.Z,null,a==="1"&&M&&M.map((S,w)=>F(S,n,M.length-1===w)),a==="2"&&M&&M.map((S,w)=>x(S,n,M.length-1===w))))))};k.Z=(0,c.Z)()(X)},46971:function(re,k,e){"use strict";var H=e(13254),g=e(14277),J=e(48736),l=e(27049),u=e(12924),t=e.n(u),c=e(91768),R=e(28216),$=e(2323),m=e(2287),v=e(6793),h=e(37055),_=e(84874),T=E=>{var W=h.Ss.indexOf(E.content_type)>-1,F=E.type;E.content_type==="scorm"&&(F="scorm"),W&&(F="mp3");var x=h.e1[F];return x||"iconf-matter-picture"},O=E=>({enterpriseId:E.user.enterpriseId}),A=(E,W)=>t().createElement("div",{className:"file-list-item",key:E.id||E.uid,onClick:()=>{W.onPreview(E)}},t().createElement(_.Z,{iconClass:T(E),size:"22px"}),t().createElement("div",{className:"info"},t().createElement("span",{className:"name"},E.name),t().createElement("div",{className:"size-and-download"},E.id&&t().createElement("span",{className:"size"},E.size/1024>1024?"".concat((E.size/1024/1024).toFixed(1),"MB"):"".concat((E.size/1024).toFixed(1),"KB")),(0,m.a)(E)&&t().createElement("span",{className:"download-text"},t().createElement($.Z,{item:E}))))),C=(E,W)=>{var F=W.enterpriseId,x=W.noUseEnterprise,X=!!E.resources.length,n=localStorage,I=n.appType;return t().createElement("div",{className:"item",key:E.id},t().createElement("div",{className:"index"},!x&&F==="1074539867477774379"?"\u95EE\u9898".concat(E.step):(0,v.ZT)("".concat(W.t("practiceOperation.stepByStep")),E.step)),t().createElement("div",{className:"content operation-pre-text"},E.content),X&&t().createElement("div",{className:"qualified-standard"},t().createElement("div",{className:"qualified-standard-title"},t().createElement("span",{className:"qualified-standard-title-bold"},"".concat(W.t("practiceOperation.annex"),"(").concat(E.resources.length).concat(W.t("practiceOperation.items"),")")),!dd.version&&I==="e_app"&&t().createElement("span",null," \uFF08",W.t("practiceOperation.dingFileTip"),"\uFF09")),t().createElement("div",{className:"qualified-standard-item"},t().createElement("div",{className:"file-list"},E.resources.map(z=>A(z,W))))),t().createElement(l.Z,null))},L=E=>{var W=E.steps,F=W===void 0?[]:W,x=E.status;return x===0?t().createElement("div",{className:"operation-content"},t().createElement(g.Z,{description:E.t("practiceOperation.noSubmitted")})):t().createElement("div",{className:"operation-content"},F.map(X=>C(X,E)))};k.Z=(0,R.$j)(O)((0,c.Z)()(L))},24340:function(re,k,e){"use strict";var H=e(13254),g=e(14277),J=e(12924),l=e.n(J),u=e(91768),t=e(28216),c=m=>({enterpriseId:m.user.enterpriseId}),R=(m,v)=>{var h=localStorage.getItem("themeColor")||"#516AE6";return l().createElement("div",{className:"item",style:m.id===v.curr?{color:h}:{},onClick:_=>{v.onChange(m)}},m.title)},$=m=>{var v=m.list,h=m.enterpriseId,_=m.t;return l().createElement("div",{className:"cl-list-content"},l().createElement("div",{className:"cl-list-content__header"},l().createElement("span",null,h==="1074539867477774379"?"\u4E92\u52A8\u4EFB\u52A1":_("practiceOperation.selectWork"))),l().createElement("div",{className:"cl-list-content__content"},v.length===0?l().createElement(g.Z,{image:g.Z.PRESENTED_IMAGE_SIMPLE}):v.map(T=>R(T,m))))};k.Z=(0,t.$j)(c)((0,u.Z)()($))},95558:function(re,k,e){"use strict";var H=e(12924),g=e.n(H),J=e(91768),l=e(28216),u=e(2287),t=e(2323),c=e(37055),R=e(84874),$=e(6793),m=e(60667),v=e(11050),h=T=>({corpId:T.user.corpId,account:T.user.account,enterpriseId:T.user.enterpriseId});class _ extends g().Component{constructor(){super(...arguments);this.getIconType=O=>{var A=c.Ss.indexOf(O.content_type)>-1,C=O.type;O.content_type==="scorm"&&(C="scorm"),A&&(C="mp3");var L=c.e1[C];return L||"iconf-matter-picture"},this.renderAttachment=O=>g().createElement("div",{className:"file-list-item",key:O.id||O.uid,onClick:()=>this.props.onPreview(O)},g().createElement(R.Z,{iconClass:this.getIconType(O),size:"22px"}),g().createElement("div",{className:"info"},g().createElement("span",{className:"name"},O.name),g().createElement("div",{className:"size-and-download"},O.id&&g().createElement("span",{className:"size"},O.size/1024>1024?"".concat((O.size/1024/1024).toFixed(1),"MB"):"".concat((O.size/1024).toFixed(1),"KB")),(0,u.a)(O)&&g().createElement("span",{className:"download-text"},g().createElement(t.Z,{item:O})))))}render(){var O=this.props,A=O.Info,C=O.enterpriseId,L=O.t;return g().createElement("div",{style:{padding:"0 32px"}},g().createElement("div",{className:"job-work-header"},g().createElement("div",{className:"job-work-header__title"},g().createElement("span",{className:"job-work-header__title__name"},A.title),g().createElement("div",{className:"job-work-header__title__status"},A.status===3&&g().createElement("span",{style:{background:"#8BBF64",borderColor:"#8BBF64"}},L("common.pass")),A.status===2&&g().createElement("span",{style:{background:"#D24343",borderColor:"#D24343"}},L("common.reject")),A.status===1&&g().createElement("span",{style:{color:"rgba(0, 0, 0, 0.65)"}},L("common.pending")))),g().createElement("div",{style:{display:"flex",marginBottom:8}},g().createElement("span",{className:"job-work-header__content"},g().createElement("span",{className:"job-work-header__content__title"},L("practiceOperation.from")),"\uFF1A",g().createElement(m.Z,{dataType:"userName",value:A.user_sync_id,name:A.create_user,type:A.source_type})),g().createElement("span",{className:"job-work-header__content"},g().createElement("span",{className:"job-work-header__content__title"},L("practiceOperation.averageScore")),"\uFF1A",A.score||"--")),g().createElement("span",{className:"job-work-header__content"},g().createElement("span",{className:"job-work-header__content__title"},L("personal.submitTime")),"\uFF1A",A.submit_time?(0,$.p6)(A.submit_time):"--"),g().createElement("div",{style:{marginBottom:8}}),g().createElement("span",{className:"job-work-header__content job-work-header__pre__content"},g().createElement("span",{className:"job-work-header__content__title"},C==="1074539867477774379"?"\u4E92\u52A8\u8303\u56F4":L("practiceOperation.workRequirements")),"\uFF1A",g().createElement("div",null,A.content)),g().createElement("div",{style:{marginBottom:8}})),g().createElement("div",{className:"job-work-header__file-list"},A.resources&&A.resources.map(E=>this.renderAttachment(E))))}}k.Z=(0,l.$j)(h)((0,J.Z)()(_))},2287:function(re,k,e){"use strict";e.d(k,{a:function(){return R},F:function(){return $}});var H=e(34792),g=e(48086),J=e(57361),l=e(9754),u=e.n(l),t=e(37055),c=e(67230),R=m=>{var v=t.Yq.indexOf(m.type.toLowerCase())>-1,h=t.iH.indexOf(m.type.toLowerCase())>-1,_=t.Iq.indexOf(m.type.toLowerCase())>-1,T=m.type.indexOf("image")>-1||m.type.indexOf("picture")>-1||m.content_type.indexOf("image")>-1||m.content_type.indexOf("picture")>-1,O=m.biz_type!==3;return(v||h||T||_)&&O},$=function(){var m=(0,J.Z)(u().mark(function v(h,_,T){var O,A,C,L,E,W,F,x,X,n,I,z,b;return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h.stopPropagation(),O=T.t,A=_.url,C=_.type,L=_.status,E=_.storage_type,W=_.video_id,F=_.id,x="",X=_.type.indexOf("image")>-1||_.type.indexOf("picture")>-1||_.content_type.indexOf("image")>-1||_.content_type.indexOf("picture")>-1,L!==3){a.next=32;break}if(E!=="ALIBABA_PRIVATE"){a.next=19;break}if(C!=="mp4"){a.next=13;break}return a.next=10,(0,c.y5)(W);case 10:x=a.sent,a.next=16;break;case 13:return a.next=15,(0,c.J7)(W);case 15:x=a.sent;case 16:x?(x.indexOf("http://")>-1&&(x=x.replace("http://","https://")),window.location.href=x):g.default.info(O("personal.fileNoDown")),a.next=30;break;case 19:if(C!=="mp4"){a.next=29;break}return a.next=22,(0,c.km)(F);case 22:n=a.sent,I=n.success,z=n.data,I==="true"&&(x=z),x?(x.indexOf("http://")>-1&&(x=x.replace("http://","https://")),window.location.href=x):g.default.info(O("personal.fileNoDown")),a.next=30;break;case 29:X?(b=new XMLHttpRequest,b.open("GET",_.url,!0),b.responseType="blob",b.onload=M=>{M.stopPropagation();var d=window.URL.createObjectURL(b.response),S=document.createElement("a");S.href=d,S.download=_.name,S.click()},b.send()):window.location.href=A;case 30:a.next=33;break;case 32:g.default.info(O("course.transcodingTips"));case 33:case"end":return a.stop()}},v)}));return function(h,_,T){return m.apply(this,arguments)}}()},13963:function(re,k,e){"use strict";e.r(k),e.d(k,{default:function(){return K}});var H=e(3515),g=e(86288),J=e(57663),l=e(71577),u=e(12924),t=e.n(u),c=e(76651),R=e(91768),$=e(11050),m=e(62029),v=e(34792),h=e(48086),_=e(88986),T=e(18106),O=e(88108),A=e(57068),C=e(28216),L=e(95558),E=e(24340),W=e(46971),F=e(13254),x=e(14277),X=e(13062),n=e(71230),I=e(89032),z=e(15746),b=e(33565),G=e(12532),a=e(59024);function M(j){var o=j.instance_id,D=j.t,i=(0,u.useState)(null),y=(0,b.Z)(i,2),s=y[0],p=y[1];return(0,u.useEffect)(()=>{function f(N){(0,G.ph)(N).then(Z=>{Z.data.code==="200000"&&p(Z.data.data)})}o&&f(o)},[o]),t().createElement("div",{className:"hls-operation-approval"},o&&s?t().createElement(n.Z,null,t().createElement(z.Z,{span:24},t().createElement(a.Z,{approvalData:s}))):t().createElement(x.Z,{description:j.t("practiceOperation.noSubmitted")}))}var d=(0,R.Z)()(M),S=e(54531),w=e(37055),V=e(10237),Y=e(76466),q=e(1164),ne=O.Z.TabPane,ie=j=>({corpId:j.user.corpId,account:j.user.account,enterpriseId:j.user.enterpriseId,appType:j.user.appType});class se extends t().Component{constructor(){super(...arguments);this.state={taskId:"",operationId:"",userId:"",taskType:"",renderList:!1,operationList:[],Info:{title:"",status:"",approval_time:"",content:"",score:"--",steps:[],approval_record:[]},operationIndustryProps:{visible:!1,operationsId:""},fromPage:"",resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}},this.getOperationList=()=>{var o=this.state.renderList;V.WY.post({url:w.ZP.operationInfo.customGetOperationList(),data:{entity_type:this.state.taskType,entity_id:this.state.taskId,user_id:this.state.userId}}).then(D=>{this.setState({operationList:D.data.operations}),o&&D.data.operations[0]&&this.handleOperationChange(D.data.operations[0])})},this.initData=()=>{V.WY.get({url:w.ZP.operationInfo.customGetOperationInfo(this.state.operationId),params:{submit_user_id:this.state.userId}}).then(o=>{this.setState({Info:o.data.data})})},this.handleOperationChange=o=>{this.setState({operationId:o.id},()=>{this.initData()})},this.dealWatchType=o=>{var D=w.Yq.findIndex(B=>o.type.toLowerCase().includes(B))>-1,i=o.content_type.indexOf("video")>-1,y=w.Ss.indexOf(o.content_type)>-1,s=o.type.indexOf("image")>-1||o.type.indexOf("picture")>-1||o.content_type.indexOf("image")>-1||o.content_type.indexOf("picture")>-1,p=o.content_type.indexOf("html")>-1,f=o.content_type.indexOf("scorm")>-1,N=o.content_type.indexOf("h5")>-1,Z="";return N?Z="article":D?Z="doc":i||y?Z="video":s?Z="image":p?Z="html":f&&(Z="scorm"),Z},this.handlePreviewSystemFile=o=>{var D=this.state.previewInfo,i=this.dealWatchType(o),y=w.Ss.indexOf(o.content_type)>-1;if(i==="article"){var s=o.content_type,p=o.url,f=s==="h5/link";f?q.Z.targetTo({path:p,isExternalLink:!0}):q.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(o.id)});return}if(i==="scorm"){var N=o.url.split("//"),Z=N[1].split("/"),B=[N[0],Z[0]].join("//"),ae="".concat(B,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(o.url));q.Z.targetTo({path:ae,isExternalLink:!0});return}var Q={mode:"preview",watchType:i};i==="doc"?Object.assign(Q,{resourceInfo:{type:"",docType:o.type,aliUrl:o.path,url:o.url,docTitle:o.name,playId:o.videoId||o.video_id,storageType:o.storage_type}}):i==="image"?Object.assign(Q,{resourceInfo:{url:o.url,playId:o.videoId||o.video_id,storageType:o.storage_type}}):i==="html"?Object.assign(Q,{resourceInfo:{url:o.url}}):Object.assign(Q,{resourceInfo:{source:{FD:o.url,OD:o.path},originUrl:o.url,contentType:y?"mp3":o.type,playId:o.videoId||o.video_id,storageType:o.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:Q,previewInfo:(0,_.Z)((0,_.Z)({},D),{},{title:o.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var o=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,_.Z)((0,_.Z)({},o),{},{visible:!1})})},this.handlePreview=o=>{var D=this.props.appType;if(D==="wx_app"&&o.biz_type===3){h.default.info("\u8BE5\u9644\u4EF6\u7531\u9489\u76D8\u4E0A\u4F20\uFF0C\u65E0\u6CD5\u9884\u89C8\uFF0C\u8BF7\u5728\u9489\u9489\u5BA2\u6237\u7AEF\u6253\u5F00\u9884\u89C8");return}if(o.status!==3){h.default.info(this.props.t("resourceLibrary.transcodingPlayerTip"));return}if(D==="app"){this.handlePreviewSystemFile(o);return}if(!((o.type==="zip"||o.type==="rar")&&o.storage_type!=="DING_PAN")){if(!dd.version&&o.biz_type===3){h.default.info(this.props.t("practiceOperation.dingFileTip"));return}if(o.biz_type!==3){this.handlePreviewSystemFile(o);return}var i=w.ZP.DingSpaceId.getSpaceId(),y={corpId:this.props.corpId,userId:this.props.account,fileids:o.url,timeStamp:Date.parse(new Date)};V.WY.get({url:i,params:y}).then(s=>{s.data.code===0?this.ddSpacePreview(o):h.default.info(s.data.msg)}).catch(s=>{h.default.error(s.data)})}},this.ddSpacePreview=o=>{var D={spaceId:o.path,fileId:o.url,fileName:o.name,fileSize:o.size,fileType:o.type};(0,S.DR)(D)},this.renderOperationList=()=>{var o=this.state,D=o.operationList,i=o.operationId;return t().createElement(E.Z,{list:D,curr:i,onChange:this.handleOperationChange})},this.renderContent=()=>{var o=this.state,D=o.Info,i=o.isCheckReason,y=o.instanceId,s=this.props,p=s.prefixCls,f=s.enterpriseId,N=s.t;return t().createElement("div",null,t().createElement(L.Z,{Info:D,onPreview:this.handlePreview}),t().createElement("div",{className:"".concat(p,"-body job-work-content")},t().createElement(O.Z,{defaultActiveKey:i==="true"?"audit":"content"},t().createElement(ne,{tab:N("practiceOperation.workContent"),key:"content"},t().createElement(W.Z,(0,m.Z)({},D,{onPreview:this.handlePreview}))),t().createElement(ne,{tab:N("practiceOperation.approvalResult"),key:"audit"},t().createElement(d,D)))))}}UNSAFE_componentWillMount(){var o=A.parse(c.m8.location.search),D=o.taskId,i=o.userId,y=o.operationId,s=o.taskType,p=o.page,f=o.renderList,N=f===void 0?!1:f,Z=o.isCheckReason,B=Z===void 0?!1:Z;this.setState({userId:i,operationId:y,taskId:D,taskType:s,renderList:N,fromPage:p,isCheckReason:B},()=>{N?this.getOperationList():this.initData(),(0,S.TN)()})}render(){var o=this.props,D=o.prefixCls,i=o.t,y=this.state,s=y.renderList,p=y.operationIndustryProps,f=y.Info,N=y.fromPage,Z=y.resourcePlayInfo,B=y.previewInfo,ae=this.props.match.path;return t().createElement(t().Fragment,null,t().createElement("div",{className:"operation-view operation-view-single ".concat(ae.indexOf("personal")>-1?"operation-view_personal_background operation-view-padding":"")},t().createElement("div",{className:"".concat(D," operation-info-training ").concat(s?"":"operation-full"," ").concat(ae.indexOf("personal")>-1?"personal_css":"")},s?t().createElement("div",{className:"operation-list"},this.renderOperationList()):null,t().createElement("div",{className:"operation-detail"},this.renderContent())),t().createElement(Y.Z,(0,m.Z)({},Z,{previewInfo:B}))))}}se.defaultProps={prefixCls:"operation-info"};var r=(0,C.$j)(ie)((0,R.Z)()(se)),P=e(4408),U=e(38642);function te(j){var o=j.t,D=j.location,i=D.query,y=i.goBackUrl,s=i.customViewFlag,p=()=>{c.m8.push(decodeURIComponent(y))},f=()=>t().createElement(g.Z,{offsetBottom:0},t().createElement("footer",{className:"operation-info-view-footer"},t().createElement(l.Z,{onClick:p},o("common.return"))));return t().createElement(t().Fragment,null,t().createElement(P.Z,{title:o("component.practiceExamDetail")}),(0,U.UI)("PRIVACY_HLS_APPROVAL_MANAGE")&&String(s)==="true"?t().createElement(r,j):t().createElement($.Z,j),y&&f())}var K=(0,R.Z)()(te)},56932:function(re){re.exports="data:image/png;base64,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"},75876:function(re){re.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAADN0lEQVRYCc2YW2sTQRTHZ8c0zaUJtAbTNMVn8fLgg6B4S+0Wa0EKIqhPfgk/ht9DfRFEqBVXE/RBwQcfvOCzNLaR2kLSXJrGXfPfMstkMjuz5mbmZXdnzjn/XyZnZ+asQXpsa9bbk/ZB6wQxnOOO7cwjjEGNDeIYP+hE6PuKeeVbL6GNf3Fat/LLtfr+vUZjf7HZbGZVvuFwuBiJTL6ORScfLZsL6ypbfiwQ0ItXb66XK9WH9XrjNO8c9D4ajXxJJuIPbixde6nzUQJZ1of0bmX7cbVWz+kCBRmPx6KF6UTqrmmeL/nZ+wJZVuHc1s7us9ZBK+Pn3Et/aCK0OTszvWqauY8yfyrrXLPyt39u/y4MGgZaiInY0JBpd80QZgYO9h87JnMYVB89QmtzqaM5caY6gJAzWzubn4YxM7Ifcvj3Zc7yOdXxlyGBRwUDQGhBk4f1gPBqD+pt4gV099CENrPzgLDOsE6/63w2Q5LJhN9wVz9ss3OzXf1iB6/tAmEF1i16gFm8epGsriwR3OsabGBr5i5poaANBsR0gbAd6ATKlT1i2zahlJKFyxeUUICBDWzhU9mr6sITxuACYW/SeZTLFZJ/914LJcLAB766xhgM7Nq/SqWvOgc2LhPcKG66w6ox5q+6HkunT1H3CKGyEsYgLpupfmEgA5YQzjOCpvaRQbE8wRWN5QyA2axpg/EGbRbKDld8f5B7BsUSvW+YtihYvHUoCMSwbRziONQ9dvagJOYMmyndkqCSas9ykeIMrDKSjYkwyBlZost8lX04j+NArjQSBmUwyCcxp3qZKbBQVAc4kAu60kc/GGbcDxQYwOImNaoDFtTvio2SvebIF79XWwYVZENmDC4QShU/ENafTEwFXmdEqMRUnIXxvTIG78T45Onzz0F2fGyyQfYmKGNm8EMAqGook+7cunkGNt46hLpJ5YQxBA4KA3vY6mBgx2t7QCjiUDfBYJQNmnwB6QEBAkUcDt6jAoIWNHm9DiCc/lHEoUThjYZxD43DgrGziu0AgjDqpFRq5v4woRAbGmJNBn3vLcMD3/5XKe0LBLix+tjAz9bYfI7hoXA/Nh+sRDA8D+uT3l/AsANQDiRx1QAAAABJRU5ErkJggg=="}}]);
