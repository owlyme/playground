(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[6763],{53009:function(ne,V,o){"use strict";o.d(V,{TD:function(){return k},$S:function(){return M},aI:function(){return G},Bg:function(){return O},tT:function(){return U},XN:function(){return T},YK:function(){return P},$x:function(){return Z}});var W=o(81211),_=o(88986),B=o(78138),p=o.n(B),J=o(78001),A=o(76651),F=o(38642),v=o(6793),l=o(37055),d=o(75205);function C(s){return s.map(c=>({name:c.name,id:c.id,proportion:0,disabled:c.totalCount===0||c.total_count===0}))}function b(s,c){return c.map((w,g)=>(0,_.Z)((0,_.Z)({},s[g]),{},{disabled:w.total_count===0}))}var f=s=>{var c=0,w=s.checkedValue,g=s.fillBlank,m=s.shortAnswer;return w===2?g.checked&&!m.checked?c=3:!g.checked&&m.checked?c=4:c=2:c=1,c},D=s=>{for(var c in s)s[(0,F.FI)(c)]=s[c];return s},k=(s,c,w,g,m,r)=>{var e=s.map((t,E)=>{var h=t.list.map((i,n)=>{var u,a=i.data,S={};switch(i.componentName){case"CoursewareSelector":S={courseId:i.id,courseSort:n,courseType:3,flag:1,mappingId:i.mappingId?i.mappingId:""};break;case"CourseSelector":S={courseId:i.id,courseSort:n,courseType:1,flag:1,mappingId:i.mappingId?i.mappingId:""};break;case"AddExam":S={courseSort:n,title:a.title,type:"ex",cheatFlag:a.cheatFlag.isChecked?1:0,faceRecognition:a.cheatFlag.faceRecognition,examDuration:a.examDuration,summary:a.summary,flag:2,mappingId:i.mappingId?i.mappingId:"",courseId:i.id,markType:f(a.markType),paperId:a.questionsMode===1?a.fixedQuestion.id:"",paperTitle:a.questionsMode===1?a.fixedQuestion.name:"",passLine:a.passLine,questionBankList:a.questionsMode===1?"":a.randomQuestion.bankQuesitonVoList.map(j=>j.id).join(","),questionMode:a.questionsMode,showKnowledge:a.knowledgePoints===1?"show":"hide",repeatExam:a.reExam.isChecked,multipleCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleCount,multipleUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleScore,fillBlankCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.fillBlankCount,fillBlankUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.fillBlankScore,fillBlankType:a.questionsMode===1?1:a.randomQuestion.bankQuesitonInfo.fillBlankType,shortAnswerCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.shortAnswerCount,shortAnswerUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.shortAnswerScore,shortAnswerType:a.questionsMode===1?1:a.randomQuestion.bankQuesitonInfo.shortAnswerType,singleCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.singleCount,singleUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.singleScore,trueOrFalseCount:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.trueOrFalseCount,trueOrFalseUnitScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multipleMissedScore:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleMissedScore,totalScore:a.questionsMode===1?a.fixedQuestion.tableList.totalScore:"",answerParsing:a.reExam.isChecked?a.reExam.allowed.end:a.reExam.notAllowed.end,passingScore:a.questionsMode===1?Number(a.fixedQuestion.tableList.totalScore*a.passLine/100).toFixed(1):60,cutScreenCount:a.cheatFlag.switchNum!==null?a.cheatFlag.switchNum:-1,reExamRule:a.reExam.allowed.reRule,reExamNumber:a.reExam.allowed.reRule===2?a.reExam.allowed.reNum:0,scoreRule:a.reExam.allowed.record,viewRule:a.reExam.allowed.viewRule,proportional:a.questionsMode===2&&a.isOpenDrawQuestions?a.proportional:[],anonymousMarking:"".concat(a.markType.anonymousMarking),show_result:a.reExam.show_result};break;case"AddNewExam":var I=i.data,y=I.paperInfo,L=I.exam_times,z=I.cut_screen_times,x=I.random_order,Q=I.mark_setting,X=I.result_visible,te=I.face_recognition,se=(0,W.Z)(I,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);S={courseSort:n,flag:15,courseType:15,type:"ex",courseId:i.id,mappingId:i.mappingId?i.mappingId:"",new_exam:(0,_.Z)((0,_.Z)((0,_.Z)({},se),(0,d.jJ)(te)),{},{paper_id:y.id,answer_rule:L.answer_rule,exam_count:L.exam_count||1,cut_screen_rule:z.cut_screen_rule,cut_screen_count:z.cut_screen_count||1,cut_screen_interval:z.cut_screen_interval||0,random_question:x.random_question,random_options:x.random_options,mark_type:Q.mark_type,mark_question_type:{fill_blank:Q.mark_type===d.lt.MANUAL?Q.fill_blank:!1,short_answer:Q.mark_type===d.lt.MANUAL?Q.short_answer:!1},anonymous_marking:Q.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...Q.marker_list.map(j=>typeof j=="string"?j:j.id)],result_view_rule:X.result_view_rule,answer_parsing:X.answer_parsing,ranking_list_view_rule:X.ranking_list_view_rule,show_result:X.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};break;case"OfflineTrain":S={courseSort:n,flag:3,id:c&&!m?i.id:"",type:"xx",mappingId:i.mappingId?i.mappingId:"",title:a.title,begin_time:p()(a.dateRange.startTime).valueOf(),end_time:p()(a.dateRange.endTime).valueOf(),attachment:a.attachment.map(j=>j.id),course_duration:a.course_duration||"",lecturer_id:a.teacher.id,is_lecturer_confirm:!!a.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!a.teacher.is_lecturer_subsidy,address:a.address,introduction:a.introduction,is_open_offline_assessment:a.assess.is_open_offline_assessment,is_open_upload:a.other.is_open_upload,is_open_schedule:!1,remind_type:a.remind.remind_type,advance_minute:a.remind.advance_minute?Number(a.remind.advance_minute):0,is_lecturer_remind:a.remind.is_lecturer_remind,is_student_remind:a.remind.is_student_remind,is_lecturer_student_evaluate:a.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:a.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:a.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:a.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:a.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:a.evaluate.student_course_evaluate_content,assessment_total_score:a.assess.assessment_total_score,assessment_pass_score:a.assess.assessment_pass_score};break;case"AddInvestigate":w==="study"?S={courseSort:n,courseType:9,flag:4,id:i.id,questionnaireId:i.questionnaire.id,title:i.name,type:"questionnaire",mappingId:i.mappingId?i.mappingId:""}:S={courseId:i.id,courseType:9,flag:9,courseSort:n,investigate:{id:i.id,title:i.name,questionnaire_id:i.questionnaire.id}};break;case"AddPracticeTest":S={courseType:10,courseSort:n,flag:w==="study"?5:4,type:"sc",id:i.id,title:i.data.title,content:i.data.content||i.data.address,resources:i.data.attachment.map(j=>({resourceId:j.id})),scoreSetting:{scoreSwitch:i.data.mark.isFull?"on":"off",score:i.data.mark.value},workflowJson:i.data.workFlowTemplateId?{}:R(i.data.supervisor),mappingId:i.mappingId?i.mappingId:"",job_type:i.data.job_type,workFlowTemplateId:i.data.workFlowTemplateId};break;case"AddJobEvaluation":S={courseSort:n,flag:6,title:i.data.title,productId:i.data.evaluationTools.product_id,modelId:i.data.evaluationTools.model_id,id:i.id||"",mappingId:i.mappingId?i.mappingId:""};break;case"Attendance":S={courseSort:n,flag:13,id:c&&!m?i.id:"",type:"attendance",mappingId:i.mappingId?i.mappingId:"",title:a.title,directors:a.directors.map(j=>typeof j=="object"&&(j.id||j.user_id)?j.id||j.user_id:j),name:a.name,qrcode_type:a.qrcode_type||"statics",sign_in_begin_time:a.sign_in_begin_time?p()(a.sign_in_begin_time).valueOf():"",sign_in_end_time:a.sign_in_end_time?p()(a.sign_in_end_time).valueOf():"",sign_out_begin_time:a.sign_out_begin_time?p()(a.sign_out_begin_time).valueOf():"",sign_out_end_time:a.sign_out_end_time?p()(a.sign_out_end_time).valueOf():"",relate_course:a.relate_course,relate_course_list:((u=a.relate_course_list)===null||u===void 0?void 0:u.length)>0?a.relate_course_list:[],remind_directors:a.remind_directors,advance_minute:a.advance_minute||0,qy_we_chat_vo:a.qy_we_chat_vo,address:a.address,longitude:a.longitude,latitude:a.latitude,address_detail:a.address_detail,sign_range:a.sign_range};break;case"AddAssessment":S=(0,_.Z)((0,_.Z)({},D(i.data)),{},{tutorId:r,courseSort:n,courseType:14,flag:14});break;default:break}return g==="unlock_mode"&&a.unlockingTime&&(S.unlockingTime=p()(a.unlockingTime).valueOf()),S.resource_lock=i.resource_lock||!1,S});return{content:t.desc,stageName:t.name,isOrder:t.inOrder,stageSort:E+1,stageId:c?t.stageId:"",startTime:g==="unlock_mode"&&t.studyTime?p()(t.studyTime[0]).valueOf():null,endTime:g==="unlock_mode"&&t.studyTime?p()(t.studyTime[1]).valueOf():null,course:h}});return e},M=s=>{var c=s.map((w,g)=>({content:w.desc,stage_name:w.name,is_order:w.inOrder,stage_sort:g+1,stage_id:w.stageId,resources:w.list.map((m,r)=>{var e=m.data;switch(m.componentName){case"CoursewareSelector":return{course_id:m.id,course_sort:r,course_type:3,flag:1,mappingId:m.mappingId};case"AddMentorCoaching":return{course_id:m.id,tutorials:{id:m.id,title:e.title,content:e.content,model:e.model,tutor_model:e.tutor_model,evaluation_type:e.evaluation_type,user_id:e.user_id||"",user_name:e.user_name||""},course_sort:r,course_type:12,flag:7,mappingId:m.mappingId};case"CourseSelector":return{course_id:m.id,course_sort:r,course_type:1,flag:1,mappingId:m.mappingId};case"AddExam":return{exam:{id:m.id,title:e.title,cheat_flag:e.cheatFlag.isChecked?1:0,exam_duration:e.examDuration,face_recognition:e.cheatFlag.faceRecognition,summary:e.summary,mark_type:f(e.markType),paper_id:e.questionsMode===1?e.fixedQuestion.id:"",paper_name:e.questionsMode===1?e.fixedQuestion.name:"",pass_line:e.passLine,question_banks:e.questionsMode===1?"":e.randomQuestion.bankQuesitonVoList.map(y=>y.id),question_mode:e.questionsMode,show_knowledge:e.knowledgePoints===1?"show":"hide",repeat_exam:e.reExam.isChecked,multiple_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.shortAnswerType,short_answer_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerScore,single_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleScore,multiple_missed_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleMissedScore,true_or_false_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseScore,total_score:e.questionsMode===1?e.fixedQuestion.tableList.totalScore:"",answer_parsing:e.reExam.isChecked?e.reExam.allowed.end:e.reExam.notAllowed.end,passing_score:e.questionsMode===1?Number(e.fixedQuestion.tableList.totalScore*e.passLine/100).toFixed(1):60,cut_screen_count:e.cheatFlag.switchNum!==null?e.cheatFlag.switchNum:-1,re_exam_rule:e.reExam.allowed.reRule,re_exam_number:e.reExam.allowed.reRule===2?e.reExam.allowed.reNum:0,score_rule:e.reExam.allowed.record,view_rule:e.reExam.allowed.viewRule,proportional:e.questionsMode===2&&e.isOpenDrawQuestions?e.proportional:[],anonymous_marking:"".concat(e.markType.anonymousMarking),show_result:e.reExam.show_result},flag:2,course_sort:r,course_id:m.id,course_type:6,mappingId:m.mappingId};case"AddNewExam":var t=m.data,E=t.paperInfo,h=t.exam_times,i=t.cut_screen_times,n=t.random_order,u=t.mark_setting,a=t.result_visible,S=t.face_recognition,I=(0,W.Z)(t,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_sort:r,flag:15,type:"ex",course_id:m.id,course_type:15,mappingId:m.mappingId?m.mappingId:"",new_exam:(0,_.Z)((0,_.Z)((0,_.Z)({},I),(0,d.jJ)(S)),{},{paper_id:E.id,answer_rule:h.answer_rule,exam_count:h.exam_count||1,cut_screen_rule:i.cut_screen_rule,cut_screen_count:i.cut_screen_count||1,cut_screen_interval:i.cut_screen_interval||0,random_question:n.random_question,random_options:n.random_options,mark_type:u.mark_type,mark_question_type:{fill_blank:u.mark_type===d.lt.MANUAL?u.fill_blank:!1,short_answer:u.mark_type===d.lt.MANUAL?u.short_answer:!1},anonymous_marking:u.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...u.marker_list.map(y=>typeof y=="string"?y:y.id)],result_view_rule:a.result_view_rule,answer_parsing:a.answer_parsing,ranking_list_view_rule:a.ranking_list_view_rule,show_result:a.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddPracticeTest":return{operation:{id:m.id,title:m.data.title,content:m.data.content||m.data.address,type:"sc",resources:m.data.attachment.map(y=>({resourceId:y.id})),score_setting:{scoreSwitch:m.data.mark.isFull?"on":"off",score:m.data.mark.value},workflow_json:R(m.data.supervisor),sort:r,job_type:m.data.job_type},course_type:10,course_sort:r,flag:5,mappingId:m.mappingId};case"AddInvestigate":return{course_id:m.id,course_type:9,flag:4,course_sort:r,investigate:{id:m.id,title:m.name,questionnaire_id:m.questionnaire.id}};default:return null}})}));return c};function R(s){var c=[];if(s.type==="multilevel"){var w=s.multilevel;w.forEach(g=>{var m=[];g.forEach(r=>{m.push(r.id)}),c.push(m.join(","))})}else s.type==="or"?(s.or.forEach(g=>{c.push(g.id)}),c=[c.join(",")]):c=[];return{type:s.type,userIds:c}}var G=s=>{function c(r){if(r.questionMode===1){if(r.paperVo.fillBlankCount>0||r.paperVo.shortAnswerCount>0)return!0}else if(r.fillBlankCount>0||r.shortAnswerCount>0)return!0;return!1}function w(r){if(r.questionMode===1){if(r.paperVo.fillBlankCount>0)return!0}else if(r.fillBlankCount>0)return!0;return!1}function g(r){if(r.questionMode===1){if(r.paperVo.shortAnswerCount>0)return!0}else if(r.shortAnswerCount>0)return!0;return!1}var m=s.map((r,e)=>({key:"".concat(new Date().getTime()).concat(e),desc:r.content,name:r.stageName,inOrder:r.isOrder,stageId:r.id,studyTime:r.startTime?[p()(r.startTime),p()(r.endTime)]:["",""],list:r.courseMappingList.map(t=>{var E,h,i=t.planExamVos,n={},u,a;switch(t.flag){case 1:t.contentType==="audio/mp3"||t.contentType==="audio/mpeg"||t.contentType==="audio"?(a="mp3",u="mp3"):(a=t.type,u=t.type==="imageText"?"h5":t.type),n={id:t.courseId,name:t.name,type:t.courseType===1?"course":"courseware",icon:l.e1[u],originalType:a,componentName:t.courseType===1?"CourseSelector":"CoursewareSelector",status:t.courseType===1?"0":t.status,duration:t.duration,data:t,mappingId:t.mappingId};break;case 2:n={id:t.id,name:t.name,type:"ex",icon:l.e1.ex,componentName:"AddExam",duration:i.examDuration*60,data:{title:i.title,examDuration:i.examDuration,summary:i.summary,isOpenDrawQuestions:i.proportionalExamVos&&i.proportionalExamVos.length>0,proportional:i.proportionalExamVos&&(i.proportionalExamVos.length>0?b(i.proportionalExamVos,i.bankQuesitonVoList):i.questionMode===2?C(i.bankQuesitonVoList):[])||[],cheatFlag:{isChecked:!!i.cheatFlag,switchNum:i.cutScreenCount===-1?null:i.cutScreenCount,faceRecognition:i.faceRecognition},reExam:{show_result:i.show_result,isChecked:i.repeatExam,userJoin:i.user_join==="true",notAllowed:{end:i.answerParsing},allowed:{reRule:i.reExamRule,record:i.scoreRule,end:i.answerParsing,reNum:i.reExamRule===2?i.reExamNumber:1,viewRule:i.viewRule}},markType:{checkedValue:i.markType===1?1:2,artificialDisabled:i.markType===1&&!c(i),fillBlank:{checked:(i.markType===2||i.markType===3)&&w(i),disabled:!w(i)},shortAnswer:{checked:(i.markType===2||i.markType===4)&&g(i),disabled:!g(i)},anonymousMarking:i.anonymous_marking==="true"},questionsMode:i.questionMode,knowledgePoints:i.showKnowledge==="show"?1:2,passLine:i.passLine,fixedQuestion:i.questionMode===1?{id:i.paperVo.id,name:i.paperVo.title,tableList:{fillBlankCount:i.paperVo.fillBlankCount,fillBlankScore:i.paperVo.fillBlankScore,multipleCount:i.paperVo.multipleCount,multipleScore:i.paperVo.multipleScore,shortAnswerCount:i.paperVo.shortAnswerCount,shortAnswerScore:i.paperVo.shortAnswerScore,singleCount:i.paperVo.singleCount,singleScore:i.paperVo.singleScore,totalCount:i.paperVo.totalCount,totalScore:i.paperVo.totalScore,trueOrFalseCount:i.paperVo.trueOrFalseCount,trueOrFalseScore:i.paperVo.trueOrFalseScore}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:i.questionMode===2?{bankQuesitonVoList:i.bankQuesitonVoList.map(Q=>({id:Q.id,name:Q.name,data:Q})),bankQuesitonInfo:{fillBlankCount:i.fillBlankCount,fillBlankScore:i.fillBlankUnitScore,fillBlankType:+i.fillBlankType||1,multipleCount:i.multipleCount,multipleScore:i.multipleUnitScore,shortAnswerCount:i.shortAnswerCount,shortAnswerScore:i.shortAnswerUnitScore,shortAnswerType:+i.shortAnswerType||1,singleCount:i.singleCount,singleScore:i.singleUnitScore,trueOrFalseCount:i.trueOrFalseCount,trueOrFalseScore:i.trueOrFalseUnitScore,multipleMissedScore:i.multipleMissedScore}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},mappingId:t.mappingId,isExamEdit:t.isExamEdit};break;case 3:var S=t.offline_course_vo;n={id:t.id,name:t.name,type:"xx",componentName:"OfflineTrain",icon:l.e1.xx,data:(0,_.Z)({},$(S)),mappingId:t.mappingId};break;case 4:case 5:if(t.type==="sc"||t.type==="operation"){n={id:t.id,name:t.title,type:"sc",icon:l.e1.sc,componentName:"AddPracticeTest",data:(0,F.UI)("PRIVACY_HLS_APPROVAL_MANAGE")?H(t):N(t),mappingId:t.mappingId};break}n={id:t.courseId,name:t.title||t.name,type:"investigate",icon:l.e1.questionnaire,componentName:"AddInvestigate",data:t,mappingId:t.mappingId,questionnaire:{id:t.questionnaireId,name:t.name}};break;case 6:n={id:t.evaluation.id,name:t.evaluation.title,productId:t.evaluation.product_id,modelId:t.evaluation.model_id,type:"jobEvaluation",icon:l.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:t.evaluation.title,evaluationTools:{product_id:t.evaluation.product_id,model_id:t.evaluation.model_id}},mappingId:t.mappingId};break;case 7:n={id:t.id,name:t.tutorials.title,type:"tutor",icon:l.e1.tutor,componentName:"AddMentorCoaching",data:(0,_.Z)((0,_.Z)({},t.tutorials),{},{tutor_model:t.tutorials.tutorModel,evaluation_type:t.tutorials.evaluationType,user_id:t.tutorials.userId,user_name:t.tutorials.userName}),mappingId:t.mappingId};break;case 9:n={id:t.courseId,name:t.title,type:"investigate",icon:l.e1.questionnaire,componentName:"AddInvestigate",data:t,questionnaire:{id:t.questionnaireId,name:t.name}};break;case 13:var I=t.course_sign_vo;n={id:t.id,name:t.name,type:"attendance",componentName:"Attendance",icon:l.e1.attendance,data:(0,_.Z)({},K(I)),mappingId:t.mappingId};break;case 14:n={id:(t==null||(E=t.evaluate)===null||E===void 0?void 0:E.id)||"",name:(t==null||(h=t.evaluate)===null||h===void 0?void 0:h.name)||"",type:"assess",componentName:"AddAssessment",icon:l.e1.assess,data:(0,_.Z)({},ae(t.evaluate)),resource_lock:t.resource_lock};break;case 15:{var y=(0,A.Qm)()._store,L=y.getState(),z=L.user,x=(0,d.AC)({data:t.exam_plan_detail_v1,user:{id:z.id,name:z.name,creator:!0}});n={id:t.exam_plan_detail_v1.id,name:t.exam_plan_detail_v1.title,type:"ex",icon:l.e1.ex,componentName:"AddNewExam",duration:t.exam_plan_detail_v1.exam_duration*60,data:x,mappingId:t.mappingId,isExamEdit:t.isExamEdit}}default:break}return n.data&&(n.data.unlockingTime=t.unlockingTime?p()(t.unlockingTime):""),n.resource_lock=t.resource_lock,n})}));return m};function H(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources";return s.supervisor={lead:"",multilevel:[],or:[],type:"or"},s.mark={isFull:s.scoreSetting.score_switch==="on",value:s.scoreSetting.score_switch==="on"?s.scoreSetting.score:100},s.attachment=s[c],s}function N(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources",w=[],g=[];return s.workflowJson.type==="or"?s.workflowJson.nodeList[0].forEach(m=>{w.push({type:2,id:m.id,name:m.name,show:!0,unionid:m.unionid,user_id:m.sync_user_id,source_type:m.source_type||m.sourceType})}):s.workflowJson.type==="multilevel"&&s.workflowJson.nodeList.forEach(m=>{m.forEach(r=>{r.user_id=r.sync_user_id}),g.push(m)}),s.supervisor={or:w,multilevel:g,lead:"",type:s.workflowJson.type},s.mark={isFull:s.scoreSetting.score_switch==="on",value:s.scoreSetting.score_switch==="on"?s.scoreSetting.score:100},s.attachment=s[c],s}var O=(s,c)=>{var w=s.map((g,m)=>({id:g.id?g.id:"",content:g.desc,stage_name:g.name,is_order:c==="free_mode"?!1:g.inOrder,sort:m+1,progress:g.Standard.progressCheck?g.Standard.progress:"",exam_times:g.Standard.examCheck?g.Standard.examNum:"",practice_times:g.Standard.bankCheck?g.Standard.bankNum:"",operation_times:g.Standard.practiceCheck?g.Standard.practiceNum:"",finish_evaluation:g.Standard.jobEvaluationCheck?"true":"false",is_get_score:g.reward.getScoreChecked?g.reward.getScore:"",certificate_id:g.reward.certificateChecked?g.reward.certificateId:"",resources:g.list.map((r,e)=>{var t=r.data;switch(r.componentName){case"CoursewareSelector":return{course_id:r.id,replaced_old_id:r.replaced_old_id===r.id?"":r.replaced_old_id,sort:e,type:3,lab_resource_id:r.lab_resource_id,lab_resource_name:r.lab_resource_name,resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"ClNewUpload":case"CourseSelector":return{course_id:r.id,replaced_old_id:r.replaced_old_id||"",sort:e,type:1,lab_resource_id:r.lab_resource_id,lab_resource_name:r.lab_resource_name,resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"LiveClass":return{course_id:r.id,replaced_old_id:r.replaced_old_id||"",sort:e,type:16,lab_resource_id:r.lab_resource_id,lab_resource_name:r.lab_resource_name,resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"AddExam":return{type:6,sort:e,course_id:r.id,exam:{title:t.title,cheat_flag:t.cheatFlag.isChecked?1:0,exam_duration:t.examDuration,face_recognition:t.cheatFlag.faceRecognition,summary:t.summary,mark_type:f(t.markType),paper_id:t.questionsMode===1?t.fixedQuestion.id:"",pass_line:t.passLine,question_banks:t.questionsMode===1?[]:t.randomQuestion.bankQuesitonVoList.map(L=>L.id),question_mode:t.questionsMode,show_knowledge:t.knowledgePoints===1?"show":"hide",repeat_exam:t.reExam.isChecked,multiple_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:t.questionsMode===1?t.fixedQuestion.tableList.totalScore:"",answer_parsing:t.reExam.isChecked?t.reExam.allowed.end:t.reExam.notAllowed.end,passing_score:t.questionsMode===1?Number(t.fixedQuestion.tableList.totalScore*t.passLine/100).toFixed(1):60,cut_screen_count:t.cheatFlag.switchNum!==null?t.cheatFlag.switchNum:-1,re_exam_rule:t.reExam.allowed.reRule,re_exam_number:t.reExam.allowed.reRule===2?t.reExam.allowed.reNum:0,score_rule:t.reExam.allowed.record,view_rule:t.reExam.allowed.viewRule,proportional:t.questionsMode===2&&t.isOpenDrawQuestions?t.proportional:[],anonymous_marking:"".concat(t.markType.anonymousMarking),show_result:t.reExam.show_result},resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"AddNewExam":var E=r.data,h=E.paperInfo,i=E.exam_times,n=E.cut_screen_times,u=E.random_order,a=E.mark_setting,S=E.result_visible,I=E.face_recognition,y=(0,W.Z)(E,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{type:15,sort:e,course_id:r.id,new_exam:(0,_.Z)((0,_.Z)((0,_.Z)({},y),(0,d.jJ)(I)),{},{paper_id:h.id,answer_rule:i.answer_rule,exam_count:i.exam_count||1,cut_screen_rule:n.cut_screen_rule,cut_screen_count:n.cut_screen_count||1,cut_screen_interval:n.cut_screen_interval||0,random_question:u.random_question,random_options:u.random_options,mark_type:a.mark_type,mark_question_type:{fill_blank:a.mark_type===d.lt.MANUAL?a.fill_blank:!1,short_answer:a.mark_type===d.lt.MANUAL?a.short_answer:!1},anonymous_marking:a.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...a.marker_list.map(L=>typeof L=="string"?L:L.id)],result_view_rule:S.result_view_rule,answer_parsing:S.answer_parsing,ranking_list_view_rule:S.ranking_list_view_rule,show_result:S.show_result,reward_rule:null,authority_range:null,supervisor_mark:null}),resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"OfflineTrain":return{sort:e,type:7,course_id:r.id,offline_course:{id:t.id,title:t.title,begin_time:p()(t.dateRange.startTime).valueOf(),end_time:p()(t.dateRange.endTime).valueOf(),attachment:t.attachment.map(L=>L.id),course_duration:t.course_duration||"",lecturer_id:t.teacher.id,is_lecturer_confirm:!!t.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!t.teacher.is_lecturer_subsidy,address:t.address,introduction:t.introduction,is_open_offline_assessment:t.assess.is_open_offline_assessment,is_open_upload:t.other.is_open_upload,is_open_schedule:!1,remind_type:t.remind.remind_type,advance_minute:t.remind.advance_minute?Number(t.remind.advance_minute):0,is_lecturer_remind:t.remind.is_lecturer_remind,is_student_remind:t.remind.is_student_remind,is_director_remind:t.remind.is_director_remind,is_lecturer_student_evaluate:t.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:t.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:t.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:t.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:t.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:t.evaluate.student_course_evaluate_content,assessment_total_score:t.assess.assessment_total_score,assessment_pass_score:t.assess.assessment_pass_score},resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"AddInvestigate":return{sort:e,type:9,course_id:r.id||"",questionnaire_id:r.questionnaire.id,resource_lock:r.resource_lock||!1,title:r.name,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"AddPracticeTest":return{type:10,courseSort:e,sort:e,flag:4,course_id:r.id,title:r.data.title,content:r.data.content||r.data.address,resources:r.data.attachment.map(L=>({resourceId:L.id})),scoreSetting:{scoreSwitch:r.data.mark.isFull?"on":"off",score:r.data.mark.value},workflowJson:R(r.data.supervisor),job_type:r.data.job_type,resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"AddJobEvaluation":return{sort:e,flag:6,type:11,evaluation:{id:r.id||"",title:r.data.title,product_id:r.data.evaluationTools.product_id,model_id:r.data.evaluationTools.model_id},resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"Attendance":return{sort:e,type:13,course_id:r.id,sign:{id:t.id,type:13,title:t.title,directors:t.directors.map(L=>typeof L=="object"&&(L.id||L.user_id)?L.id||L.user_id:L),name:t.name||"--",qrcode_type:t.qrcode_type,sign_in_begin_time:t.sign_in_begin_time,sign_in_end_time:t.sign_in_end_time,sign_out_begin_time:t.sign_out_begin_time,sign_out_end_time:t.sign_out_end_time,relate_course:t.relate_course,relate_course_list:t.relate_course_list,remind_directors:t.remind_directors,advance_minute:t.advance_minute,qy_we_chat_vo:t.qy_we_chat_vo,address:t.address,longitude:t.longitude,latitude:t.latitude,address_detail:t.address_detail,sign_range:t.sign_range},resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf()};case"AddAssessment":return{sort:e,type:14,course_id:r.id,resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf(),evaluateVo:{id:t.id,name:t.name,requirement:t.requirement,resource_id:t.resource_id,is_lock:t.is_lock,begin_time_unlock:t.begin_time_unlock,end_time_unlock:t.end_time_unlock,is_self_evaluate:t.is_self_evaluate,questionnaire_id:t.questionnaire_id,evaluate_form_title:t.evaluate_form_title,before_start_day:t.before_start_day,before_start_repeat:t.before_start_repeat,before_start_un_remind:t.before_start_un_remind,before_end_day:t.before_end_day,before_end_repeat:t.before_end_repeat,before_end_un_remind:t.before_end_un_remind,after_end_day:t.after_end_day,after_end_repeat:t.after_end_repeat,after_end_un_remind:t.after_end_un_remind,is_passed_standards:t.is_passed_standards,is_passed_option_three:t.is_passed_option_three,pass_standard_conditions:t.pass_standard_conditions,pass_standards_number:t.pass_standards_number,creator_user:t.creator_user}};case"AddPracticeBank":return{sort:e,type:17,course_id:r.id,resource_name:r.title,resource_lock:r.resource_lock||!1,unlocking_time:c==="unlock_mode"?null:p()(r.unlocking_time).valueOf(),practice:{title:r.data.title,question_bank_list:r.data.randomQuestion.bankQuesitonVoList.map(L=>L.id),pass_line:Number(r.data.stand)}};default:return null}})}));return w},U=function(c,w){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;function m(e){return e.fill_blank_count>0||e.short_answer_count>0}var r=c.map((e,t)=>{var E=e.resources.filter(n=>n.type==6||n.type==15).length,h=e.resources.filter(n=>n.type==17).length,i=e.resources.filter(n=>n.type==10).length;return{id:e.id,key:"".concat(new Date().getTime()).concat(t),desc:e.content,name:e.stage_name,inOrder:e.is_order,Standard:{progressCheck:e.progress>0,progress:e.progress||100,examCheck:e.exam_times>0,examNum:e.exam_times||E,bankCheck:e.practice_times>0,bankNum:e.practice_times||h,practiceCheck:e.operation_times>0,practiceNum:e.operation_times||i,jobEvaluationCheck:e.finish_evaluation==="true"},reward:{getScore:e.is_get_score?e.is_get_score:"",getScoreChecked:e.is_get_score>0,certificateId:e.certificate_id||"",certificateChecked:e.certificate_id!==0,certificateName:e.certificate_name,certificateImage:e.preview_url},hourClassId:e.id,hourClassStartTime:e.start_time,hourClassEndTime:e.end_time,list:e.resources.map(n=>{var u=n.exam;switch(n.type){case 1:return{id:n.course_id,name:n.resource_name,type:g&&n.biz_type==="imageText"?"twCourse":"course",icon:n.biz_type==="imageText"?l.e1.h5:l.e1.crs,componentName:"CourseSelector",duration:n.duration,data:n,unlocking_time:n.unlocking_time,lab_resource_id:n.lab_resource_id,lab_resource_name:n.lab_resource_name,lab_selected_id:n.lab_resource_id,resource_lock:n.resource_lock};case 3:{var a;return n.content_type==="article"||n.content_type==="link"?a=l.e1.h5:a=l.e1[n.contentType]||l.e1[n.content_type],{id:n.course_id,name:n.resource_name,type:"courseware",icon:a,componentName:"CoursewareSelector",duration:n.duration,status:n.resource_status,originalType:n.content_type==="article"||n.content_type==="link"?"h5":n.content_type||n.contentType,data:n,unlocking_time:n.unlocking_time,lab_resource_id:n.lab_resource_id,lab_resource_name:n.lab_resource_name,lab_selected_id:n.lab_resource_id,resource_lock:n.resource_lock}}case 6:return{id:n.course_id,name:u.title,type:"ex",icon:l.e1.ex,componentName:"AddExam",duration:u.exam_duration*60,data:{id:u.id,title:u.title,examDuration:u.exam_duration,summary:u.summary,isOpenDrawQuestions:u.proportionalExamVos&&u.proportionalExamVos.length>0,proportional:u.proportionalExamVos&&(u.proportionalExamVos.length>0?b(u.proportionalExamVos,u.question_bank_vos):u.question_mode===2?C(u.question_bank_vos):[])||[],cheatFlag:{isChecked:!!u.cheat_flag,switchNum:u.cut_screen_count===-1?null:u.cut_screen_count,faceRecognition:u.face_recognition},reExam:{show_result:u.show_result,isChecked:u.repeat_exam,userJoin:w?!1:u.user_join==="true",notAllowed:{end:u.answer_parsing},allowed:{reRule:u.re_exam_rule,record:u.score_rule,end:u.answer_parsing,reNum:u.re_exam_rule===2?u.re_exam_number:1,viewRule:u.view_rule}},markType:{checkedValue:u.mark_type===1?1:2,artificialDisabled:u.mark_type===1&&!m(u),fillBlank:{checked:(u.mark_type===2||u.mark_type===3)&&u.fill_blank_count,disabled:!u.fill_blank_count},shortAnswer:{checked:(u.mark_type===2||u.mark_type===4)&&u.short_answer_count,disabled:!u.short_answer_count},anonymousMarking:u.anonymous_marking==="true"},questionsMode:u.question_mode,knowledgePoints:u.show_knowledge==="show"?1:2,passLine:u.pass_line,fixedQuestion:u.question_mode===1?{id:u.paper_id,name:u.paper_name,tableList:{fillBlankCount:u.fill_blank_count,fillBlankScore:u.fill_blank_unit_score,multipleCount:u.multiple_count,multipleScore:u.multiple_unit_score,shortAnswerCount:u.short_answer_count,shortAnswerScore:u.short_answer_unit_score,singleCount:u.single_count,singleScore:u.single_unit_score,totalCount:u.total_count,totalScore:u.total_score,trueOrFalseCount:u.true_or_false_count,trueOrFalseScore:u.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:u.question_mode===2?{bankQuesitonVoList:u.question_bank_vos.map(x=>{var Q=x.fill_blank_count,X=x.multiple_count,te=x.short_answer_count,se=x.single_count,j=x.total_count,oe=x.true_or_false_count,le={fillBlankCount:Q,shortAnswerCount:te,multipleCount:X,singleCount:se,totalCount:j,trueOrFalseCount:oe};return{id:x.id,name:x.name,data:Object.assign(x,le),fillBlankCount:Q,shortAnswerCount:te,multipleCount:X,singleCount:se,totalCount:j,trueOrFalseCount:oe}}),bankQuesitonInfo:{fillBlankCount:u.fill_blank_count,fillBlankScore:u.fill_blank_unit_score,fillBlankType:+u.fillBlankType,multipleCount:u.multiple_count,multipleScore:u.multiple_unit_score,shortAnswerCount:u.short_answer_count,shortAnswerScore:u.short_answer_unit_score,shortAnswerType:+u.shortAnswerType,singleCount:u.single_count,singleScore:u.single_unit_score,trueOrFalseCount:u.true_or_false_count,trueOrFalseScore:u.true_or_false_unit_score,multipleMissedScore:u.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 7:return{id:w?"":n.offlineCourseEditVo.id,name:n.offlineCourseEditVo.title,key:n.offlineCourseEditVo.id,type:"xx",componentName:"OfflineTrain",icon:l.e1.xx,data:(0,_.Z)({},$(n.offlineCourseEditVo,w)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 9:return{id:n.course_id,name:n.title||n.resource_name,type:"investigate",icon:l.e1.questionnaire,componentName:"AddInvestigate",data:n,questionnaire:{id:n.questionnaire_id,name:n.resource_name},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 10:return{id:n.course_id,name:n.title,type:"sc",icon:l.e1.sc,componentName:"AddPracticeTest",data:N(n,"operationResources"),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 11:return{id:n.evaluation.id,name:n.evaluation.title,productId:n.evaluation.product_id,modelId:n.evaluation.model_id,type:"jobEvaluation",icon:l.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:n.evaluation.title,evaluationTools:{product_id:n.evaluation.product_id,model_id:n.evaluation.model_id}},unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 13:return{id:n.course_sign_vo.id,name:n.course_sign_vo.name,type:"attendance",componentName:"Attendance",icon:l.e1.attendance,data:(0,_.Z)({},K(n.course_sign_vo,w)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 14:return{id:n.evaluate?n.evaluate.id:"",name:n.evaluate?n.evaluate.name:"",type:"assess",componentName:"AddAssessment",icon:l.e1.assess,data:(0,_.Z)({},ae(n.evaluate)),resource_lock:n.resource_lock,unlocking_time:n.unlocking_time};case 15:{var S=(0,A.Qm)()._store,I=S.getState(),y=I.user,L=(0,d.AC)({data:n.exam_plan_detail_v1,user:{id:y.id,name:y.name,creator:!0}});return{id:n.exam_plan_detail_v1.id,name:n.exam_plan_detail_v1.title,type:"ex",icon:l.e1.ex,componentName:"AddNewExam",unlocking_time:n.unlocking_time,resource_lock:n.resource_lock,duration:n.exam_plan_detail_v1.exam_duration*60,data:L}}case 16:return{id:w?"":n.course_id,name:n.title,key:n.course_id,type:"liveClass",componentName:"LiveClass",icon:l.e1.liveClass,data:(0,_.Z)({},ie(n)),unlocking_time:n.unlocking_time,resource_lock:n.resource_lock};case 17:var z=(0,d.S8)(n.practice);return{id:n.course_id,name:n.resource_name,type:"practice",componentName:"AddPracticeBank",unlocking_time:n.unlocking_time,resource_lock:n.resource_lock,data:z};default:return null}})}});return r},T=s=>{var c=s.map((w,g)=>({content:w.desc,stage_name:w.name,order:"".concat(w.inOrder),sort:g+1,course:w.list.map((m,r)=>{var e=m.data;switch(m.componentName){case"CoursewareSelector":return{course_id:m.id,course_sort:r,course_type:3,flag:1};case"CourseSelector":return{course_id:m.id,course_sort:r,course_type:1,flag:1};case"AddExam":return{flag:2,type:"ex",course_sort:r,course_id:m.id,title:e.title,cheat_flag:e.cheatFlag.isChecked?1:0,exam_duration:e.examDuration,face_recognition:e.cheatFlag.faceRecognition,summary:e.summary,mark_type:f(e.markType),paper_id:e.questionsMode===1?e.fixedQuestion.id:"",paper_title:e.questionsMode===1?e.fixedQuestion.name:"",pass_line:e.passLine,question_bank_list:e.questionsMode===1?"":e.randomQuestion.bankQuesitonVoList.map(y=>y.id).join(","),question_mode:e.questionsMode,show_knowledge:e.knowledgePoints===1?"show":"hide",s_repeat_exam:"".concat(e.reExam.isChecked),multiple_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:e.questionsMode===1?1:e.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:e.questionsMode===1?"":e.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:e.questionsMode===1?e.fixedQuestion.tableList.totalScore:"",answer_parsing:e.reExam.isChecked?e.reExam.allowed.end:e.reExam.notAllowed.end,passing_score:e.questionsMode===1?Number(e.fixedQuestion.tableList.totalScore*e.passLine/100).toFixed(1):60,cut_screen_count:e.cheatFlag.switchNum!==null?e.cheatFlag.switchNum:-1,re_exam_rule:e.reExam.allowed.reRule,re_exam_number:e.reExam.allowed.reRule===2?e.reExam.allowed.reNum:0,score_rule:e.reExam.allowed.record,view_rule:e.reExam.allowed.viewRule,proportional:e.questionsMode===2&&e.isOpenDrawQuestions?e.proportional:[],anonymous_marking:"".concat(e.markType.anonymousMarking),show_result:e.reExam.show_result};case"AddNewExam":var t=m.data,E=t.paperInfo,h=t.exam_times,i=t.cut_screen_times,n=t.random_order,u=t.mark_setting,a=t.result_visible,S=t.face_recognition,I=(0,W.Z)(t,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_type:15,flag:15,type:"ex",course_sort:r,course_id:m.id,new_exam:(0,_.Z)((0,_.Z)((0,_.Z)({},I),(0,d.jJ)(S)),{},{paper_id:E.id,answer_rule:h.answer_rule,exam_count:h.exam_count||1,cut_screen_rule:i.cut_screen_rule,cut_screen_count:i.cut_screen_count||1,cut_screen_interval:i.cut_screen_interval||0,random_question:n.random_question,random_options:n.random_options,mark_type:u.mark_type,mark_question_type:{fill_blank:u.mark_type===d.lt.MANUAL?u.fill_blank:!1,short_answer:u.mark_type===d.lt.MANUAL?u.short_answer:!1},anonymous_marking:u.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...u.marker_list.map(y=>typeof y=="string"?y:y.id)],result_view_rule:a.result_view_rule,answer_parsing:a.answer_parsing,ranking_list_view_rule:a.ranking_list_view_rule,show_result:a.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddInvestigate":return{course_id:m.id,course_type:9,flag:9,course_sort:r,investigate:{id:m.id,title:m.name,questionnaire_id:m.questionnaire.id}};default:return null}})}));return c},P=s=>{function c(g){return g.fill_blank_count>0||g.short_answer_count>0}var w=s.map((g,m)=>({key:"".concat(new Date().getTime()).concat(m),desc:g.content,name:g.stage_name,inOrder:g.is_order,list:g.course_mapping_list.map(r=>{var e=r;switch(r.flag){case 1:return{id:r.course_id,name:r.name,type:r.course_type===1?"course":"courseware",icon:l.e1[r.type==="imageText"?"h5":r.contentType==="audio/mp3"?"mp3":r.type],originalType:r.type,componentName:r.course_type===1?"CourseSelector":"CoursewareSelector",status:r.course_type===1?"":r.status,duration:r.duration,data:r};case 2:return{id:r.course_id,name:e.title,type:"ex",icon:l.e1.ex,componentName:"AddExam",duration:e.exam_duration*60,data:{title:e.title,examDuration:e.exam_duration,summary:e.summary,isOpenDrawQuestions:e.proportionalExamVos&&e.proportionalExamVos.length>0,proportional:e.proportionalExamVos&&(e.proportionalExamVos.length>0?b(e.proportionalExamVos,e.bank_quesiton_list):e.question_mode===2?C(e.bank_quesiton_list):[])||[],cheatFlag:{isChecked:!!e.cheat_flag,switchNum:e.cut_screen_count===-1?null:e.cut_screen_count,faceRecognition:e.face_recognition},reExam:{show_result:e.show_result,isChecked:e.s_repeat_exam==="true",notAllowed:{end:e.answer_parsing},allowed:{reRule:e.re_exam_rule,record:e.score_rule,end:e.answer_parsing,reNum:e.re_exam_rule===2?e.re_exam_number:1,viewRule:e.view_rule}},markType:{checkedValue:e.mark_type===1?1:2,artificialDisabled:e.mark_type===1&&!c(e),fillBlank:{checked:(e.mark_type===2||e.mark_type===3)&&e.fill_blank_count,disabled:!e.fill_blank_count},shortAnswer:{checked:(e.mark_type===2||e.mark_type===4)&&e.short_answer_count,disabled:!e.short_answer_count},anonymousMarking:e.anonymous_marking==="true"},questionsMode:e.question_mode,knowledgePoints:e.show_knowledge==="show"?1:2,passLine:e.pass_line,fixedQuestion:e.question_mode===1?{id:e.paper_id,name:e.paper_title,tableList:{fillBlankCount:e.fill_blank_count,fillBlankScore:e.fill_blank_unit_score,multipleCount:e.multiple_count,multipleScore:e.multiple_unit_score,shortAnswerCount:e.short_answer_count,shortAnswerScore:e.short_answer_unit_score,singleCount:e.single_count,singleScore:e.single_unit_score,totalCount:e.paper_question_numbers,totalScore:e.total_score,trueOrFalseCount:e.true_or_false_count,trueOrFalseScore:e.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:e.question_mode===2?{bankQuesitonVoList:e.bank_quesiton_list.map(n=>{var u=n.fill_blank_count,a=n.multiple_count,S=n.short_answer_count,I=n.single_count,y=n.total_count,L=n.true_or_false_count,z={fillBlankCount:u,shortAnswerCount:S,multipleCount:a,singleCount:I,totalCount:y,trueOrFalseCount:L};return{id:n.id,name:n.name,data:Object.assign(n,z),fillBlankCount:u,shortAnswerCount:S,multipleCount:a,singleCount:I,totalCount:y,trueOrFalseCount:L}}),bankQuesitonInfo:{fillBlankCount:e.fill_blank_count,fillBlankScore:e.fill_blank_unit_score,fillBlankType:+e.fill_blank_type||1,multipleCount:e.multiple_count,multipleScore:e.multiple_unit_score,shortAnswerCount:e.short_answer_count,shortAnswerScore:e.short_answer_unit_score,shortAnswerType:+e.short_answer_type||1,singleCount:e.single_count,singleScore:e.single_unit_score,trueOrFalseCount:e.true_or_false_count,trueOrFalseScore:e.true_or_false_unit_score,multipleMissedScore:e.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}}};case 9:return{id:r.course_id,name:r.title,type:"investigate",icon:l.e1.questionnaire,componentName:"AddInvestigate",data:r,questionnaire:{id:r.questionnaire_id,name:r.name}};case 15:{var t=(0,A.Qm)()._store,E=t.getState(),h=E.user,i=(0,d.AC)({data:r.exam_plan_detail_v1,user:{id:h.id,name:h.name,creator:!0}});return{id:r.exam_plan_detail_v1.id,name:r.exam_plan_detail_v1.title,type:"ex",icon:l.e1.ex,componentName:"AddNewExam",duration:r.exam_plan_detail_v1.exam_duration*60,data:i}}default:return null}})}));return w},Z=function(c){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return c.map((g,m)=>{var r=w.find(e=>e.stage_index-1===m);return g.list.map((e,t)=>{var E;r&&(E=r.resource_error_vos.find(i=>i.resource_index===t));var h=e.type;if(e.resource_type)switch(e.resource_type){case 1:h="course";break;case 2:case 3:h="courseware";break;case 6:case 15:h="ex";break;case 7:h="xx";break;case 9:h="questionnaire";break;case 13:h="attendance";break;case 14:h="assess";break;default:break}if(e.componentName)switch(e.componentName){case"CourseSelector":h="course";break;case"CoursewareSelector":h="courseware";break;case"AddNewExam":case"AddExam":h="ex";break;case"OfflineTrain":h="xx";break;case"Attendance":h="attendance";break;case"QuestionnaireSelector":case"AddInvestigate":h="questionnaire";break;case"AddPracticeTest":h="practicalIndustry";break;case"AddAssessment":h="assess";break;default:break}switch(h){case"course":e.resourceErrTip=E?E.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u88AB\u5220\u9664":E.resource_status==="un_released"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u300A".concat(E.resource_name,"\u300B\u672A\u53D1\u5E03\uFF0C\u8BF7\u542F\u7528\u540E\u518D\u7F16\u8F91"):"":"";break;case"courseware":e.resourceErrTip=E&&E.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u4EF6\u88AB\u5220\u9664":"";break;case"ex":e.resourceErrTip=E?E.resource_status==="bank_deleted"?"\u5F15\u7528\u7684\u9898\u5E93\u88AB\u5220\u9664":E.resource_status==="paper_deleted"?"\u5F15\u7528\u7684\u8BD5\u5377\u88AB\u5220\u9664":E.resource_status==="bank_missing"?"\u5F15\u7528\u7684\u9898\u5E93\u8BD5\u9898\u4E0D\u8DB3":"":"";break;case"xx":e.resourceErrTip=E&&E.resource_status==="time_expired"?"\u7EBF\u4E0B\u8BFE\u5DF2\u8FC7\u671F":"";break;case"questionnaire":e.resourceErrTip=E?E.resource_status==="deleted"?"\u5F15\u7528\u7684\u95EE\u5377\u88AB\u5220\u9664":E.resource_status==="un_released"?"\u5F15\u7528\u7684\u95EE\u5377\u672A\u53D1\u5E03":"":"";break;case"practicalIndustry":e.resourceErrTip=E&&E.resource_status==="operation_resource_deleted"?J.Z.t("component.practicalDeleteTip"):"";break;default:break}return null}),null}),c},$=(s,c)=>({id:c?"":s.id,title:s.title,edit_status:s.edit_status,status:s.status,department_id:s.department_id||"",dateRange:{startTime:s.begin_time,endTime:s.end_time},address:s.address,course_duration:s.course_duration,has_lecturer_student_data:c?!1:s.has_lecturer_student_data,has_student_lecturer_data:c?!1:s.has_student_lecturer_data,has_student_course_data:c?!1:s.has_student_course_data,has_lecturer_assess_student_data:c?!1:s.has_lecturer_assess_student_data,teacher:{id:s.lecturer_id,name:s.lecturer_name,is_lecturer_confirm:s.is_lecturer_confirm,is_lecturer_subsidy:s.is_lecturer_subsidy,teacher_sync_user_id:s.teacher_sync_user_id,lecturer_name:s.lecturer_name,teacher_sync_source_type:s.teacher_sync_source_type,type:s.teacher_sync_type,teacher_sync_type:s.teacher_sync_type},introduction:s.introduction,attachment:s.attachment||[],other:{is_open_schedule:s.is_open_schedule,is_open_upload:s.is_open_upload},remind:{remind_type:s.remind_type||"offline_course",advance_minute:s.advance_minute,is_lecturer_remind:s.is_lecturer_remind,is_student_remind:s.is_student_remind,is_director_remind:s.is_director_remind},evaluate:{is_lecturer_student_evaluate:s.is_lecturer_student_evaluate,is_student_lecturer_evaluate:s.is_student_lecturer_evaluate,is_student_course_evaluate:s.is_student_course_evaluate,lecturer_student_evaluate_content:s.lecturer_student_evaluate_content?(0,_.Z)((0,_.Z)({},s.lecturer_student_evaluate_content),{},{passing_score:Number(s.lecturer_student_evaluate_content.passing_score),total_score:Number(s.lecturer_student_evaluate_content.total_score)}):{evaluate_type:"score",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_lecturer_evaluate_content:s.student_lecturer_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_course_evaluate_content:s.student_course_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""}},assess:{is_open_offline_assessment:s.is_open_offline_assessment,assessment_total_score:s.assessment_total_score,assessment_pass_score:s.assessment_pass_score},user_has_attendanted:c?!1:s.user_has_attendanted}),K=(s,c)=>{var w=[];return c?s.attendance_course_vo.forEach(g=>{w.push((0,_.Z)((0,_.Z)({},g),{},{course_id:"",course_key:g.course_id}))}):w=s.attendance_course_vo,{courseId:s.courseId,directors:s.director?s.director.map(g=>g):s.directors,id:c?"":s.id,name:s.name,qrcode_type:s.qrcode_type,relate_course_list:w,sign_in_begin_time:s.sign_in_begin_time?(0,v.p6)(s.sign_in_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_in_end_time:s.sign_in_end_time?(0,v.p6)(s.sign_in_end_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_begin_time:s.sign_out_begin_time?(0,v.p6)(s.sign_out_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_end_time:s.sign_out_end_time?(0,v.p6)(s.sign_out_end_time,"yyyy-MM-dd hh:mm:ss"):"",source_type:s.source_type,remind_directors:s.remind_directors,advance_minute:s.advance_minute,user_has_attendanted:c?!1:s.user_has_attendanted,relate_course:s.relate_course,address:s.address,longitude:s.longitude,latitude:s.latitude,address_detail:s.address_detail,sign_range:s.sign_range}};function q(s){return Object.prototype.toString.call(s)==="[object Object]"}function ee(s){return s.replace(/[A-Z]/g,c=>"_".concat(c.toLowerCase()))}function Y(s){if(!q(s))return s;for(var c={},w=Object.keys(s),g=0,m=w;g<m.length;g++){var r=m[g],e=s[r];r=ee(r),c[r]=q(e)?Y(e):e}return c}var ae=s=>{var c=Y(s),w=c.id,g=c.name,m=c.requirement,r=c.resource_id,e=c.is_self_evaluate,t=c.is_lock,E=c.begin_time_unlock,h=c.end_time_unlock,i=c.questionnaire_id,n=c.evaluate_form_title,u=c.before_start_day,a=c.before_start_repeat,S=c.before_start_un_remind,I=c.before_end_day,y=c.before_end_repeat,L=c.before_end_un_remind,z=c.after_end_day,x=c.after_end_repeat,Q=c.after_end_un_remind,X=c.is_passed_standards,te=c.is_passed_option_three,se=c.pass_standard_conditions,j=c.pass_standards_number,oe=c.creator_user;return{id:w,name:g,requirement:m,resource_id:r,is_lock:t,begin_time_unlock:E,end_time_unlock:h,is_self_evaluate:e,questionnaire_id:i,evaluate_form_title:n,before_start_day:u,before_start_repeat:a,before_start_un_remind:S,before_end_day:I,before_end_repeat:y,before_end_un_remind:L,after_end_day:z,after_end_repeat:x,after_end_un_remind:Q,is_passed_standards:X,is_passed_option_three:te,pass_standard_conditions:se,pass_standards_number:j,creator_user:oe}},ie=s=>({courseId:s.course_id,duration:s.duration,teacherName:s.live_lesson.teacher_name,startTime:s.live_lesson.live_start_time,endTime:s.live_lesson.live_end_time})},16084:function(ne,V,o){"use strict";var W=o(77883),_=o(21888),B=o(63185),p=o(9676),J=o(12924),A=o.n(J),F=o(91768),v=o(28216),l=o(80991),d=o(38642),C=o(43859);class b extends A().Component{constructor(){super(...arguments);this.state={blackList:{JobEvaluationBut:(0,d.eY)("MANAGEMENT_JOBEVALUATION_BUT")}},this.checkProgress=k=>{var M=k.target.checked,R=this.props.value;R.progress.isChecked=M,this.props.onFieldChange(R)},this.inputProgress=k=>{var M=this.props.value;M.progress.progress=k,this.props.onFieldChange(M)},this.checkExam=k=>{var M=k.target.checked,R=this.props.value;R.exam.isChecked=M,this.props.onFieldChange(R)},this.inputTimes=k=>{var M=this.props.value;M.exam.times=k,this.props.onFieldChange(M)},this.checkOperation=k=>{var M=k.target.checked,R=this.props.value;R.operation.isChecked=M,this.props.onFieldChange(R)},this.inputOperationTimes=k=>{var M=this.props.value;M.operation.times=k,this.props.onFieldChange(M)},this.checkJobEvaluation=k=>{var M=k.target.checked,R=this.props.value;R.jobEvaluation.isChecked=M,this.props.onFieldChange(R)}}UNSAFE_componentWillReceiveProps(k){if(this.props.jobEvaluationCount!==k.jobEvaluationCount&&k.jobEvaluationCount>0){var M=k.value;M.jobEvaluation.isChecked=!0,k.onFieldChange(M)}}render(){var k=this.props,M=k.value,R=k.examCount,G=k.courseCount,H=k.operationCount,N=k.isPreview,O=k.t,U=k.shouldRenderedOperationCount,T=k.jobEvaluationCount,P=k.completeJobEvaluation,Z=k.qyShield,$=M.progress,K=M.exam,q=M.operation,ee=M.jobEvaluation,Y=this.state.blackList;return A().createElement("div",{className:"qualified-standard"},A().createElement("div",{className:"qualified-standard-title"},O("learning.learningAddSecPassTitle"),A().createElement("span",{className:"qualified-standard-sub"},O("learning.learningAddSecPassTitleTip"))),A().createElement("div",{className:"qualified-standard-item"},A().createElement(p.Z,{disabled:G<1||N,className:"qualified-standard-checkbox",checked:G<1?!1:$.isChecked,onChange:this.checkProgress},O("learning.learningAddProgressRequire")),A().createElement(_.Z,{value:$.progress,disabled:!$.isChecked||G<1||N,onChange:this.inputProgress,className:"qualified-standard-number",min:1,max:100,precision:0}),A().createElement("span",{className:"qualified-standard-tip"},O("learning.learningAddProgressRequireTip"))),A().createElement("div",{className:"qualified-standard-item"},A().createElement(p.Z,{className:"qualified-standard-checkbox",disabled:R<1||N,checked:R<1?!1:K.isChecked,onChange:this.checkExam},O("learning.learningAddPassRequire")),A().createElement(_.Z,{value:K.times,disabled:!K.isChecked||R<1||N,className:"qualified-standard-number",onChange:this.inputTimes,min:1,max:R>0?R:999,precision:0}),A().createElement("span",{className:"qualified-standard-tip"},O("learning.learningAddPassRequireTip"))),U&&A().createElement("div",{className:"qualified-standard-item"},A().createElement(p.Z,{className:"qualified-standard-checkbox",disabled:H<1||N,checked:H<1?!1:q.isChecked,onChange:this.checkOperation},O("learning.learningAddOperationRequire")),A().createElement(_.Z,{value:q.times,disabled:!q.isChecked||H<1||N,className:"qualified-standard-number",onChange:this.inputOperationTimes,min:1,max:H>0?H:999,precision:0}),A().createElement("span",{className:"qualified-standard-tip"},O("learning.learningAddOperationRequireTip"))),Y.JobEvaluationBut&&P&&Z==="false"&&A().createElement("div",{className:"qualified-standard-item"},A().createElement(p.Z,{className:"qualified-standard-checkbox",disabled:T<1||N,checked:T>0?ee.isChecked:!1,onChange:this.checkJobEvaluation},O("learning.completeJobEvaluation"))))}}var f=D=>{var k=D.user;return{user:k,qyShield:k.qyShield}};V.Z=(0,v.$j)(f)((0,C.Z)((0,l.$j)((0,F.Z)()(b))))},69069:function(ne,V,o){"use strict";var W=o(77883),_=o(21888),B=o(57663),p=o(71577),J=o(47673),A=o(4107),F=o(63185),v=o(9676),l=o(12924),d=o.n(l),C=o(91768),b=o(28216),f=o(80991),D=o(49101),k=o(43859),M=o(93117),R=o(10237),G=o(37055),H=O=>({qyShield:O.user.qyShield});class N extends d().Component{constructor(U){super(U);this.getScoreRule=()=>{var T=G.ZP.EditStudyTask.getScoreRule(),P=this.props.value;R.WY.get({url:T}).then(Z=>{if(Z.data.data.hasRule){var $=Z.data.data.studyScore,K=$[0],q=K.finishScore,ee=K.unFinishScore;P.score.reward=q,P.score.deduction=ee,this.props.onFieldChange(P)}})},this.handleSelectCertificate=()=>{var T=this.state.certificateConfig,P=this.props.value;T.visible=!0,T.defaultChecked=[{id:P.certificate.id,name:P.certificate.name}],this.setState({certificateConfig:T})},this.cancelSelectCertificate=()=>{var T=this.state.certificateConfig;T.visible=!1,this.setState({certificateConfig:T})},this.sureSelectCertificate=T=>{this.cancelSelectCertificate();var P=this.props.value;P.certificate.id=T[0].id,P.certificate.name=T[0].name,this.props.onFieldChange(P)},this.checkScoreReward=T=>{var P=T.target.checked,Z=this.props.value;Z.score.isCheckedReward=P,this.props.onFieldChange(Z)},this.checkScoreDeduction=T=>{var P=T.target.checked,Z=this.props.value;Z.score.isCheckedDeduction=P,this.props.onFieldChange(Z)},this.checkCerti=T=>{var P=T.target.checked,Z=this.props.value;Z.certificate.isChecked=P,this.props.onFieldChange(Z)},this.inputReward=T=>{var P=this.props.value;P.score.reward=T,this.props.onFieldChange(P)},this.inputDeduction=T=>{var P=this.props.value;P.score.deduction=T,this.props.onFieldChange(P)},this.state={certificateConfig:{visible:!1,defaultChecked:[],onCancel:this.cancelSelectCertificate,onOk:this.sureSelectCertificate}}}componentDidMount(){var U=this.props.value;!U.score.isCheckedReward&&!U.score.isCheckedDeduction&&this.getScoreRule()}render(){var U=this.state.certificateConfig,T=this.props,P=T.value,Z=T.isPreview,$=T.tipType,K=$===void 0?"":$,q=T.t,ee=T.formik,Y=ee.errors,ae=ee.touched,ie=P.certificate,s=P.score;return d().createElement("div",{className:"study-reward task"},d().createElement("div",{className:"study-reward-title"},q("learning.learningAddSecRewardTitle"),d().createElement("span",{className:"study-reward-sub"},q("learning.learningAddSecRewardTitleTip"))),d().createElement("div",{className:"study-reward-item"},d().createElement(v.Z,{className:"study-reward-checkbox",disabled:Z,checked:ie.isChecked,onChange:this.checkCerti},q("learning.learningAddRewardCert")),d().createElement(A.Z,{value:ie.name,disabled:!0,className:ae.reward&&Y.reward&&Y.reward.certificateChecked?"status-error study-reward-number":"study-reward-number"}),d().createElement(p.Z,{type:"link",icon:d().createElement(D.Z,null),disabled:!ie.isChecked||Z,onClick:this.handleSelectCertificate},q("learning.learningAddRewardCertSelect"))),d().createElement("div",{className:"study-reward-item"},d().createElement(v.Z,{className:"study-reward-checkbox",checked:s.isCheckedReward,disabled:Z,onChange:this.checkScoreReward},q("learning.learningAddRewardPassScore")),d().createElement(_.Z,{value:s.reward,disabled:!s.isCheckedReward||Z,onChange:this.inputReward,min:0,max:999,precision:0,className:ae.reward&&Y.reward&&Y.reward.scoreRewardChecked?"status-error":""}),d().createElement("span",{className:"study-reward-tip"},q(K==="project"?"learning.learningAddRewardPassScoreProjectTip":"learning.learningAddRewardPassScoreTip"))),d().createElement("div",{className:"study-reward-item"},d().createElement(v.Z,{className:"study-reward-checkbox",disabled:Z,checked:s.isCheckedDeduction,onChange:this.checkScoreDeduction},q("learning.learningAddRewardunPassScore")),d().createElement(_.Z,{value:s.deduction,disabled:!s.isCheckedDeduction||Z,onChange:this.inputDeduction,min:0,max:999,precision:0,className:ae.reward&&Y.reward&&Y.reward.scoreDeductionChecked?"status-error":""}),d().createElement("span",{className:"study-reward-tip"},q(K==="project"?"learning.learningAddRewardunPassScoreProjectTip":"learning.learningAddRewardunPassScoreTip"))),ae.reward&&Y.reward&&d().createElement("span",{style:{paddingLeft:"16px"},className:"tip_error_msg"},Y.reward.msg),d().createElement(M.Z,U))}}V.Z=(0,k.Z)((0,f.$j)((0,b.$j)(H)((0,C.Z)()(N))))},44659:function(ne,V,o){"use strict";var W=o(77576),_=o(59314),B=o(22385),p=o(31097),J=o(77883),A=o(21888),F=o(63185),v=o(9676),l=o(12924),d=o.n(l),C=o(28216),b=o(91768),f=o(17780),D=o(43859),k=o(16239),M=o(84874),R=o(38642);class G extends d().Component{constructor(){super(...arguments);this.state={blackList:{jobEvaluationSwitch:(0,R.eY)("STUDYTIME_JOBEVALUATION_SWITCH"),faceKnowTipFlag:(0,R.eY)("STUDYTIMELIMT_EXAM_FACE_KNOW")},whiteList:{faceVideoSourceFlag:(0,R.UI)("STUDYTIMELIMT_VIDEO_FACE_KNOW")}},this.renderText=()=>{var N=this.props.t;return d().createElement("div",null,d().createElement("p",{className:"title"},N("course.documentStudyLimitTip1")),d().createElement("p",{className:"title"},N("course.documentStudyLimitTip2")))},this.handleCheck=N=>{var O=N.target.checked,U=this.props.value;U.isChecked=O,this.props.onFieldChange(U)},this.handleInput=N=>{var O=this.props.value;O.limit=N,this.props.onFieldChange(O)},this.handleSwitch=N=>{var O=this.props.value;O.faceRecognition=N,this.props.onFieldChange(O)},this.handleMediaSwitch=N=>{var O=this.props.value;O.videoFaceRecognition=N,this.props.onFieldChange(O)},this.handleJobSwitch=N=>{var O=this.props.value;O.jobEvaluationResults=N,this.props.onFieldChange(O)}}render(){var N=this.props,O=N.value,U=N.isPreview,T=N.t,P=N.appType,Z=N.isShowJobInput,$=N.jobEvaluationCount,K=N.componentType,q=N.isEdit,ee=N.qyShield,Y=this.state,ae=Y.blackList,ie=Y.whiteList;return d().createElement("div",{className:"study-time-limit"},d().createElement("div",{className:"study-time-limit-title"},T("learning.learningAddSecSetTitle"),d().createElement("span",{className:"study-time-limit-sub"},T("learning.learningAddSecSetTitleTip"))),d().createElement("div",{className:"study-time-limit-input"},d().createElement(v.Z,{checked:O.isChecked,onChange:this.handleCheck,disabled:U||q,className:O.isChecked?"study-time-limit-checked":""},T("learning.learningAddSecSetTitleInfo")),d().createElement(A.Z,{size:"middle",value:O.limit,disabled:!O.isChecked||U,onChange:this.handleInput,className:"study-time-limit-number",min:1,max:9999,precision:0}),d().createElement("span",{className:"study-time-limit-standard"}),T("course.secByPage"),d().createElement(p.Z,{placement:"top",title:this.renderText},d().createElement("span",null,d().createElement(M.Z,{iconClass:"icon-f-tipe"}))),O.isChecked?null:d().createElement("span",{className:"study-time-limit-tip"},T("course.documentStudyLimitTip"))),ae.jobEvaluationSwitch&&Z&&ee==="false"&&d().createElement("div",{className:"study-time-limit-jobInput"},$<1?d().createElement(_.Z,{defaultChecked:!1,checked:!1,disabled:!0,id:1}):d().createElement(_.Z,{checked:O.jobEvaluationResults,onChange:this.handleJobSwitch,disabled:U,id:2}),d().createElement("span",{className:"item-margin"}," ",T("learning.openJobEvaluationResults")," "),d().createElement("span",{className:"study-time-limit-tip"},T("learning.jobEvaluationResultsTip"))),(0,f.xX)()||P==="wx_app"||P==="fs_app"||!k.Z[(0,k.c)()].showCl||K==="authentication"||!ae.faceKnowTipFlag?null:d().createElement("div",{className:"study-time-limit-input"},d().createElement(_.Z,{defaultChecked:O.faceRecognition,onChange:this.handleSwitch,disabled:U}),d().createElement("span",{className:"item-margin"}," ",T("exam.faceKnow")," "),d().createElement("span",{className:"study-time-limit-tip"},T("exam.faceKnowTip"))),ie.faceVideoSourceFlag?d().createElement("div",{className:"study-time-limit-input"},d().createElement(_.Z,{defaultChecked:O.videoFaceRecognition,onChange:this.handleMediaSwitch,disabled:U}),d().createElement("span",{className:"item-margin"}," ",T("exam.faceVideoSource")," "),d().createElement("span",{className:"study-time-limit-tip"},T("exam.faceVideoSourceTip"))):null)}}V.Z=(0,C.$j)(H=>({appType:H.user.appType,themeColor:H.advancedSetting.themeColor,qyShield:H.user.qyShield}))((0,D.Z)((0,b.Z)()(G)))},82224:function(ne,V,o){"use strict";var W=o(22385),_=o(31097),B=o(63185),p=o(9676),J=o(88986),A=o(12924),F=o.n(A),v=o(91768),l=o(80991),d=o(84387);class C extends F().Component{constructor(f){super(f);this.handleChangeSubDept=D=>{var k=D.target.checked;this.props.formik.setFieldValue("target",(0,J.Z)((0,J.Z)({},this.props.defaultFieldList),{},{checkedSubDept:k}))},this.handleChangeNewEmployee=D=>{var k=D.target.checked;this.props.formik.setFieldValue("target",(0,J.Z)((0,J.Z)({},this.props.defaultFieldList),{},{checkedNewEmployee:k}))},this.state={visible:!1}}render(){var f=this.props,D=f.defaultFieldList,k=f.isPreview,M=f.t;return F().createElement("section",null,F().createElement("div",{className:"cl-form__secbox__content"},F().createElement(p.Z,{checked:D.checkedSubDept,onChange:this.handleChangeSubDept,disabled:k},M("learning.learningEmployeeAddSecAssignmentLabel")),F().createElement(_.Z,{title:M("learning.learningEmployeeAddSecAssignmentTip")},F().createElement(d.Z,null)),F().createElement(p.Z,{checked:D.checkedNewEmployee,onChange:this.handleChangeNewEmployee,disabled:k},M("learning.learningEmployeeAddSecOtherAssignmentLabel")),F().createElement(_.Z,{title:M("learning.learningEmployeeAddSecOtherAssignmentTip")},F().createElement(d.Z,null))))}}C.defaultProps={prefixCls:"employee-target-formitem"},V.Z=(0,l.$j)((0,v.Z)()(C))},2881:function(ne,V,o){"use strict";var W=o(77883),_=o(21888),B=o(12924),p=o.n(B),J=o(91768),A=o(80991),F=o(43859);class v extends p().Component{constructor(){super(...arguments);this.handleChange=d=>{this.props.formik.setFieldValue("term",{number:d})}}render(){var d=this.props.t;return p().createElement(p().Fragment,null,p().createElement(_.Z,{precision:0,min:1,max:9999,disabled:this.props.isPreview,value:this.props.defaultFieldList.number,onChange:this.handleChange}),p().createElement("span",{style:{marginLeft:"10px"}},d("learning.learningEmployeeAddTermUnit")),p().createElement("span",{className:"infotext"},d("learning.learningEmployeeAddTermTip")))}}V.Z=(0,A.$j)((0,F.Z)((0,J.Z)()(v)))},6998:function(ne,V,o){"use strict";var W=o(47673),_=o(4107),B=o(12924),p=o.n(B),J=o(43859),A=o(80991),F=o(10237),v=o(37055);class l extends p().Component{constructor(){var C;super(...arguments);C=this,this.handleChange=b=>{var f=b.target.value;this.props.onChange(f)},this.handleBlur=()=>{var b=this.props.formType;switch(b){case"task":this.checkTaskName();break;case"project":this.checkProjectName();break;case"employee":this.checkTaskName(2);break;default:break}},this.checkTaskName=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,f=v.ZP.EditStudyTask.checkTaskTitle(),D=C.props,k=D.value,M=D.formik,R=D.t,G={edit:b,trainName:k};F.WY.get({url:f,params:G}).then(H=>{H.data.code!==0&&(M.setFieldError("title",R("learning.learningAddTitleRepeatTip")),M.setFieldTouched("title",!0,!1))})},this.checkProjectName=()=>{var b=v.ZP.EditStudyProject.checkProjectName(),f=this.props,D=f.value,k=f.formik,M=f.t,R={title:D};F.WY.post({url:b,data:R}).then(G=>{G.data.checked!=="true"&&(k.setFieldError("title",M("learning.learningAddTitleRepeatTip")),k.setFieldTouched("title",!0,!1))}).catch(G=>{G.response.data.code==="enterpriseapi.542001"&&(k.setFieldError("title",M("learning.learningAddTitleRepeatTip")),k.setFieldTouched("title",!0,!1))})}}render(){var C=this.props,b=C.value,f=C.isPreview,D=C.placeholder;return p().createElement(_.Z,{style:{width:"350px"},value:b,disabled:f,placeholder:D,onChange:this.handleChange})}}V.Z=(0,J.Z)((0,A.$j)(l))},40767:function(ne,V,o){"use strict";o.d(V,{g:function(){return W},c:function(){return _}});var W={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},_={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:20}}}},89135:function(ne,V,o){"use strict";var W=o(88986),_=o(78138),B=o.n(_),p=o(6793),J=o(2396),A=o(3407),F=(0,p.me)(),v=A.Z[F].learning.validation;V.Z={multiText:l=>{var d;return(0,J.$s)((0,p.fy)(l))>256&&(d=v.multiTextTip),d},title:l=>((0,p.fy)(l)?"":v.learningAddItemTitleNull)||((0,p.fy)(l).length>60?v.learningAddItemTitleLimit:""),dateRange:(l,d,C)=>{var b;if((!l.startTime||!l.endTime)&&(b=v.learningAddItemDateRangeNull),!C){var f="YYYY-MM-DD HH:mm";d.forEach(D=>{(B()(B()(D.data.dateRange.startTime).format(f)).valueOf()<(0,p.jZ)(B()(l.startTime).format(f))||B()(B()(D.data.dateRange.startTime).format("YYYY-MM-DD HH:mm")).valueOf()>(0,p.jZ)(B()(l.endTime).format(f))||B()(B()(D.data.dateRange.endTime).format(f)).valueOf()<=(0,p.jZ)(B()(l.startTime).format(f))||B()(B()(D.data.dateRange.endTime).format(f)).valueOf()>(0,p.jZ)(B()(l.endTime).format(f)))&&(b=v.learningAddItemDateRangeOnsite)})}return b},qualifiedStandardExceptWork:(l,d,C)=>{var b;return l&&(C===0&&d===0||!l.progress.isChecked&&!l.exam.isChecked||C===0&&!l.exam.isChecked)&&(b=v.learningAddItemPass),b},qualifiedStandardInOperation:(l,d,C,b,f)=>{var D;return l&&(C===0&&d===0&&b===0&&f===0||!l.progress.isChecked&&!l.exam.isChecked&&!l.operation.isChecked&&l.jobEvaluation&&!l.jobEvaluation.isChecked)&&(D=v.learningAddItemPass),D},checkStandardInOperation:(l,d,C,b)=>{var f;return l&&(C===0&&d===0&&b===0||!l.progress.isChecked&&!l.exam.isChecked&&!l.operation.isChecked||l.progress.isChecked&&!l.progress.progress||d!==0&&l.exam.isChecked&&!l.exam.times||b!==0&&l.operation.isChecked&&!l.operation.times)&&(f=v.learningAddItemPass),f},qualifiedStandard:(l,d,C,b,f)=>{var D;return l&&(C===0&&d===0&&b===0&&f===0||!l.progress.isChecked&&!l.exam.isChecked&&!l.operation.isChecked&&!l.jobEvaluation.isChecked||l.progress.isChecked&&!l.progress.progress||d!==0&&!l.exam.isChecked||d!==0&&l.exam.isChecked&&!l.exam.times||b!==0&&!l.operation.isChecked||b!==0&&l.operation.isChecked&&!l.operation.times)&&(D=v.learningAddItemPass),D},reward:l=>{var d={};return(!l||l.certificate.isChecked&&!l.certificate.id)&&(d=(0,W.Z)((0,W.Z)({},d),{},{certificateChecked:!0,msg:v.learningAddItemRewardCert})),l.score.isCheckedDeduction&&!l.score.deduction&&(d=(0,W.Z)((0,W.Z)({},d),{},{scoreDeductionChecked:!0,msg:v.learningAddItemRewardunPass})),l.score.isCheckedReward&&!l.score.reward&&(d=(0,W.Z)((0,W.Z)({},d),{},{scoreRewardChecked:!0,msg:v.learningAddItemRewardPass})),Object.keys(d).length?d:""},checkTerm:l=>{var d=l.number,C;return(!J.fA.positiveInteger.test(d)||d<1||d>100)&&(C=v.learningAddItemTerm),C},studyLimit:l=>{var d;return l.isChecked&&!l.limit?d=v.learningTimeTip:l.limit>9999&&(d=v.learningTimeBeyondTip),d},originPrice:l=>{var d;return parseFloat(l)===0?d=v.originalPriceTip:parseFloat(l)>99999&&(d=v.maxOriginPriceTip),d},discountPrice:(l,d)=>{var C;return l===""||parseFloat(l)===0?C=v.discountPriceTip:parseFloat(l)>99999?C=v.maxDiscountPriceTip:parseFloat(d)<=parseFloat(l)&&(C=v.diffPriceTip),C},registerRange:l=>{var d;return(!l.startTime||!l.endTime)&&(d=v.learningAddItemDateRangeNull),(0,p.jZ)(l.startTime)>=(0,p.jZ)(l.endTime)&&(d=v.learningAddItemDateRangeLimit),d},dateValidateCourse:(l,d)=>{var C;return(!l.startTime||!l.endTime)&&(C=v.learningAddItemDateRangeNull),(0,p.jZ)(l.startTime)>=(0,p.jZ)(l.endTime)&&(C=v.learningAddItemDateRangeLimit),(0,p.jZ)(l.startTime)<(0,p.jZ)(d.endTime)&&(C=v.learningCourseTime),C},inputValidateNumber:(l,d)=>{var C="";return(0,p.fy)(l)?(d&&Number(l)>=Number(d)&&(C=A.Z[F].learning.validation.priceLimit),Number(l)>99999&&(C=A.Z[F].validation.maxNum99999),Number(l)<.01&&(C=A.Z[F].validation.minNum),C):(C=A.Z[F].validation.pleaseEnter,C)},applyTip:l=>{var d;return l.isNeedApply==="need"&&l.enrollAudit==="automatic_audit"&&l.enrollLimit&&l.limitCount===""&&(d=v.applyPeopleTip),d},taskPrice:l=>{var d=l.price,C=l.isPaid,b;return C&&(d===""||parseFloat(d)===0?b=v.taskPriceTip:parseFloat(d)>99999&&(b=v.maxPriceTip)),b}}},48222:function(ne,V,o){"use strict";o.r(V),o.d(V,{default:function(){return e}});var W=o(12924),_=o.n(W),B=o(91768),p=o(57663),J=o(71577),A=o(20136),F=o(55241),v=o(62029),l=o(34792),d=o(48086),C=o(28216),b=o(76651),f=o(80991),D=o(57068),k=o(40847),M=o(6998),R=o(44659),G=o(69069),H=o(16084),N=o(2881),O=o(82224),U=o(89135),T=o(40767),P=o(41222),Z=o(10237),$=o(37055),K=o(62615),q=o(52670),ee=o(53009),Y=o(6793),ae=o(17994),ie=o(70075),s=o(86726),c=o(4408),w=t=>({documentStudyLimit:t.advancedSetting.documentStudyLimit});class g extends _().Component{constructor(E){super(E);this.initialValues={departmentName:"",title:"",term:{number:0},summary:"",classify:"999",syncProgress:"false",createUserId:"",stages:[{key:"".concat(new Date().getTime()),name:"".concat(this.props.t("formItem.stageTaskPanelTitle"),"1"),desc:"",list:[],inOrder:!1}],studyLimit:{isChecked:this.props.documentStudyLimit!=0,limit:this.props.documentStudyLimit,faceRecognition:!!this.props.faceRecognition},qualifiedStandard:{progress:{isChecked:!0,progress:100},exam:{isChecked:!1,times:1},operation:{isChecked:!1,times:1}},reward:{certificate:{isChecked:!1,id:"",name:""},score:{isCheckedReward:!1,isCheckedDeduction:!1,reward:0,deduction:0}},target:{checkedSubDept:!0,checkedNewEmployee:!1},employeeRange:{rangeType:"",rangeList:{dept:[],post:[],group:[],user:[]}},supervisor:{supervisorUserList:[],isChecked:!0},stagePass:!1},this.getTaskInfo=()=>{var h=$.ZP.EmployeeEdit.getTaskInfo(),i={id:this.state.pageParams.editTaskId};Z.WY.get({url:h,params:i}).then(n=>{var u,a=n.data,S=a.supervisorId.split(","),I=a.supervisorUserName.split(",");S=S.map((y,L)=>({type:2,id:y,name:I[L],show:!0})),this.initialValues={title:a.trainName,term:{number:a.trainLimit},createUserId:a.createUser,datePicker:(0,Y.k7)(a.effectTime),syncProgress:a.syncProgress,summary:a.summary,classify:a.classify_id,classifyName:a.classify_name,stages:(0,ee.aI)(a.stageList),employeeRange:{rangeType:(u=a.departmentList)!==null&&u!==void 0&&u.length&&a.departmentList[0].id==="1"?1:2,rangeList:{dept:a.departmentList||[],post:a.postList||[],group:a.groupList||[],user:a.userList||[]}},studyLimit:{isChecked:a.studyTimeLimit!==0,limit:a.studyTimeLimit!==0?a.studyTimeLimit:0,faceRecognition:a.faceRecognition==="on"},qualifiedStandard:{progress:{isChecked:a.progress!==0,progress:a.progress!==0?a.progress:100},exam:{isChecked:a.times!==0,times:a.times!==0?a.times:1},operation:{isChecked:a.operationTimes!==0,times:a.operationTimes!==0?a.operationTimes:1}},reward:{certificate:{isChecked:a.certificateId!==0,id:a.certificateId!==0?a.certificateId:"",name:a.certificateId!==0?a.certificateName:""},score:{isCheckedReward:!!(a.planStudyScore&&a.planStudyScore.finishScore),reward:a.planStudyScore&&a.planStudyScore.finishScore?a.planStudyScore.finishScore:0,isCheckedDeduction:!!(a.planStudyScore&&a.planStudyScore.unFinishScore),deduction:a.planStudyScore&&a.planStudyScore.unFinishScore?a.planStudyScore.unFinishScore:0}},target:{checkedSubDept:a.overrideSubDept===1,checkedNewEmployee:a.newEmployee},supervisor:{supervisorUserList:S,isChecked:a.supervisorPaper},stagePass:a.stagePass},this.setState({requested:!0})})},this.initRef=h=>{this.formRef=h},this.submit=(h,i)=>{var n=this.state.pageParams,u=n.editTaskId,a=n.type,S=n.planId,I=a==="edit"?$.ZP.EmployeeEdit.editTask():$.ZP.EmployeeEdit.addTask(),y=h.title,L=h.summary,z=h.datePicker,x=h.stages,Q=h.studyLimit,X=h.qualifiedStandard,te=h.reward,se=h.supervisor,j=h.term,oe=h.target,le=h.employeeRange,_e=h.stagePass,me=h.classify,pe=z instanceof Object?z.valueOf():Date.parse(z.replace(/\-/g,"/")),ge=(0,P.Qz)(x),de={trainName:(0,Y.fy)(y),trainLimit:j.number,summary:L,classify_id:me,effectTimeNew:pe,stageJson:JSON.stringify((0,ee.TD)(x,!!u,"study")),departmentIds:le.rangeType===1?"1":le.rangeList.dept.map(re=>re.id).join(","),postIds:le.rangeType===1?"":le.rangeList.post.map(re=>re.id).join(","),progress:ge>0&&X.progress.isChecked?X.progress.progress:0,certificateId:te.certificate.isChecked?te.certificate.id:"",supervisorId:se.supervisorUserList.map(re=>re.id).join(","),times:X.exam.isChecked?X.exam.times:"",operationTimes:X.operation.isChecked?X.operation.times:"",supervisorPaper:se.isChecked,overrideSubDept:oe.checkedSubDept?1:0,newEmployee:oe.checkedNewEmployee,studyTimeLimit:Q.isChecked?Q.limit:0,faceRecognition:Q.faceRecognition===!0?"on":"off",isGetScore:!0,studyScore:JSON.stringify({finishScore:te.score.isCheckedReward?te.score.reward:0,unFinishScore:te.score.isCheckedDeduction?te.score.deduction:0}),stagePass:_e};u&&(de.id=u,de.planId=S,de.status=2),Z.qg.post({url:I,data:de}).then(re=>{if(re.data.code===0)d.default.success(u?this.props.t("common.saveSuccess"):this.props.t("common.releaseSuccess")),i.setSubmitting(!1),this.linkToList();else if(re.data.code===111){var he=re.data.data.stageError,ue=he[0],ce=ue.stageIndex,fe=ue.resourceIndexs;(0,ae.R)({name:"stages",errMsg:"".concat(this.props.t("formItem.stageTaskPanelTitle")).concat(ce,": ").concat(x[ce-1].list[fe[0]].name," ").concat(this.props.t("common.rsNonExistent")),actions:i})}else i.setSubmitting(!1)}).catch(()=>{i.setSubmitting(!1)})},this.cancelEdit=()=>{this.linkToList()},this.linkToList=()=>{b.m8.push("/training/learning/task/employee")},this.getTotalHour=h=>{var i=0,n="--";return h&&h.forEach(u=>{u.list.forEach(a=>{a.duration&&(a.type=="course"||(a.originalType=="mp4"||a.originalType=="mp3")&&a.status==3||a.type=="ex")&&(i+=Number(a.duration))})}),i<60&&i>0?n="".concat(i,"\u79D2"):i>60&&(n="".concat(Math.ceil(i/60),"\u5206\u949F")),n},this.tip=()=>_().createElement("div",null,_().createElement("p",null,this.props.t("courseManage.estimatedStandard")),_().createElement("p",null,this.props.t("courseManage.estimatedStandard1")),_().createElement("p",null,this.props.t("courseManage.estimatedStandard2")),_().createElement("p",null,this.props.t("courseManage.estimatedStandard3")),_().createElement("p",null,this.props.t("courseManage.estimatedStandard4"))),this.state={allowActions:(0,s.V9)("classify",JSON.parse(localStorage.getItem("modules"))),pageParams:{type:"add",departmentId:"",departmentName:"",editTaskId:"",planId:""},requested:!1}}componentDidMount(){var E=D.parse(b.m8.location.search),h=E.editTaskId,i=E.type,n=i===void 0?"add":i,u=E.departmentId,a=E.departmentName,S=E.planId;n==="edit"?this.setState({pageParams:{type:n,departmentId:u,departmentName:a,editTaskId:h,planId:S}},this.getTaskInfo):this.setState({pageParams:{type:n,departmentId:u,departmentName:a,editTaskId:h,planId:S}},()=>{this.setState({requested:!0})})}newMethod(){return 2}render(){var E=this.state,h=E.requested,i=E.pageParams,n=E.allowActions,u=this.props,a=u.prefixCls,S=u.isPreview,I=S===void 0?!1:S,y=u.t,L=i.editTaskId,z=I?"".concat(y("common.preview")).concat(y("learning.learningEmployeeAddTitle")):L?"".concat(y("common.edit")).concat(y("learning.learningEmployeeAddTitle")):"".concat(y("common.add")).concat(y("learning.learningEmployeeAddTitle"));return _().createElement("div",{className:a},I&&_().createElement(c.Z,{title:y("documentTitle.previewNewEmployeeTask")}),!I&&L&&_().createElement(c.Z,{title:y("documentTitle.editNewEmployeeTask")}),_().createElement("div",{className:"".concat(a,"__content")},h?_().createElement(f.J9,{ref:this.initRef,initialValues:this.initialValues,onSubmit:this.submit,render:x=>_().createElement(f.l0,{className:"cl-form"},_().createElement("h1",{className:"cl-form-htitle"},z),_().createElement("div",{className:"cl-form__sectitle"},y("learning.basicInformation")),_().createElement(f.gN,(0,v.Z)({name:"title",label:y("study.trainName"),required:!0,defaultValue:x.values.title,validate:Q=>U.Z.title(Q),component:M.Z,isPreview:I,formType:"employee",placeholder:y("learning.learningEmployeeAddNamePlaceholder")},T.g)),_().createElement(f.gN,(0,v.Z)({component:N.Z,displayType:"Custom",name:"term",label:y("learning.learningEmployeeAddTerm"),required:!0,defaultFieldList:x.values.term,validate:Q=>U.Z.checkTerm(Q),isPreview:I},T.g)),_().createElement(f.gN,(0,v.Z)({component:K.Mt,displayType:"Custom",name:"datePicker",label:y("learning.learningEmployeeAddValidity"),required:!0,defaultFieldList:x.values.datePicker,validate:q.Pe,isPreview:I},T.g)),_().createElement(f.gN,(0,v.Z)({name:"classify",label:y("learning.learningProjectAddCategory"),displayType:"Custom",defaultValue:x.values.classify,component:K.O,classifyName:x.values.classifyName,unclassified:!0,showAdd:(0,s.H3)("add",n)},T.g)),_().createElement(f.gN,(0,v.Z)({name:"summary",label:y("learning.taskSummary"),component:ie.Z,rows:5,maxLength:150,type:"text",placeholder:y("learning.validation.taskSummaryTip"),style:{width:"550px"}},T.g)),_().createElement("p",{className:"cl-form__divide padding"}),_().createElement("div",{className:"cl-form__sectitle"},y("learning.learningAddSecStage")),_().createElement(f.gN,{component:K.Vi,displayType:"Custom",name:"stages",required:!0,validate:q.NW,isHasTutor:!0,isPreview:I,resourceType:["courseware","course","exam","practice","tutor","investigate"],defaultFieldList:x.values.stages,courseSelectorFilterQuota:!0,anonymousMarking:!0,multipleMissedScore:!0}),_().createElement(f.gN,{component:K._e,name:"stagePass",isPreview:I}),_().createElement(f.gN,{component:K.Pk,name:"syncProgress",isPreview:I}),_().createElement("div",{className:"estimated-hour"},this.props.t("courseManage.estimatedHours"),"\uFF1A",this.getTotalHour(x.values.stages),_().createElement(F.Z,{placement:"top",content:()=>this.tip()},_().createElement(k.Z,{className:"estimated-icon"}))),_().createElement(f.gN,{component:K.ww,displayType:"Custom",name:"employeeRange",defaultFieldList:x.values.employeeRange,validate:q.FI,secTitle:y("learning.learningEmployeeAddSecAssignment"),onlyDept:!0,onlyPost:!0,partLabel:y("common.deptAndPost"),disabled:I}),_().createElement(f.gN,(0,v.Z)({component:O.Z,displayType:"Custom",name:"target",required:!0,defaultFieldList:x.values.target,isPreview:I},T.g)),_().createElement("div",{className:"cl-form__sectitle"},y("learning.learningAddSecSetting")),_().createElement(f.gN,{component:R.Z,displayType:"Custom",name:"studyLimit",isPreview:I,validate:Q=>U.Z.studyLimit(Q)}),_().createElement(f.gN,{component:H.Z,displayType:"Custom",examCount:(0,P.z2)(x.values.stages),courseCount:(0,P.Qz)(x.values.stages),operationCount:(0,P.GM)(x.values.stages),name:"qualifiedStandard",shouldRenderedOperationCount:!0,isPreview:I,validate:Q=>U.Z.checkStandardInOperation(Q,(0,P.z2)(x.values.stages),(0,P.Qz)(x.values.stages),(0,P.GM)(x.values.stages))}),_().createElement(f.gN,{component:G.Z,displayType:"Custom",name:"reward",validate:U.Z.reward,isPreview:I,customError:!0}),_().createElement(f.gN,{component:K.i0,displayType:"Custom",name:"supervisor",disabled:I,defaultFieldList:x.values.supervisor,createUserId:x.values.createUserId}),_().createElement(K.I,null),_().createElement("div",{className:"cl-form-fixed-footer"},_().createElement("div",{className:"cl-form-fixed-footer__container"},I?null:_().createElement(J.Z,{className:"qa-new-stuff-training-publish-button",loading:x.isSubmitting,type:"primary",htmlType:"submit"},y(L?"common.save":"common.release")),_().createElement(J.Z,{onClick:this.cancelEdit},y("common.cancel")))))}):null))}}g.defaultProps={prefixCls:"employeetask-edit",isPreview:!1};var m=(0,C.$j)(w)((0,B.Z)()(g));class r extends _().Component{render(){return _().createElement(m,{isPreview:!0})}}var e=(0,B.Z)()(r)},17994:function(ne,V,o){"use strict";o.d(V,{R:function(){return _}});var W=o(62615),_=B=>{var p=B.name,J=B.errMsg,A=B.actions;A.setFieldError(p,J),A.setSubmitting(!1),W.I.scrollTo(p)}}}]);
