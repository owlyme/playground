(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[7493],{93620:function(O,i,t){"use strict";t.r(i);var f=t(20228),_=t(11382),D=t(34792),r=t(48086),d=t(12924),l=t.n(d),E=t(28216),h=t(76651),g=t(91768),c=t(91302),u=t(38642);class p extends d.Component{constructor(){super(...arguments);this.gotoProject=(o,a)=>{o===c.mF&&(a==="WX"&&window.open("#/index-auth-default","_blank"),h.m8.push("/index-auth-default")),o===c.is&&(a==="WX"&&window.open("#/index-auth-companyTab","_blank"),h.m8.push("/index-auth-companyTab"))},this.wxLogin=()=>{this.props.dispatch({type:"user/setLoginMode",payload:{loginMode:"WX_LOGIN"}});var o=window.location.href.match(/code=[\w\-]*/)?window.location.href.match(/code=[\w\-]*/)[0]:"",a=o.substring(o.indexOf("=")+1),e=window.location.href.match(/state=(\w*)/)[1],n=e.split("WXCropId")[1],M=this.props.t;this.props.dispatch({type:"user/fetchUserInfo",loginType:"WX_LOGIN",loginData:{code:a,corpId:n}}).then(s=>{this.gotoProject(s,"WX")}).catch(s=>{console.log(s),r.default.error(M("registerLogin.loginFailure"))})},this.login=()=>{this.props.dispatch({type:"user/setLoginMode",payload:{loginMode:"SCAN"}});var o=window.location.href.match(/code=(\w*)/)[1],a=window.location.href.match(/state=(\w*)/)[1],e=this.props.t;this.props.dispatch({type:"user/fetchUserInfo",loginType:"SCAN",loginData:{code:o,state:a}}).then(n=>{this.gotoProject(n,"other")}).catch(n=>{console.log(n),r.default.error(e("registerLogin.loginFailure"))})}}componentDidMount(){var o=window.location.href.match(/state=(\w*)/)[1];o.indexOf("WXCropId")>-1?this.wxLogin():this.login()}render(){return l().createElement("div",{className:(0,u.SL)()?"login-container gray":"login-container"},l().createElement(_.Z,{size:"large"}))}}i.default=(0,E.$j)()((0,g.Z)()(p))}}]);
