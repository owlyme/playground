(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[4011],{73636:function(I,D,a){"use strict";a.r(D);var M=a(20228),v=a(11382),g=a(34792),o=a(48086),P=a(57361),p=a(9754),f=a.n(p),O=a(12924),l=a.n(O),C=a(28216),n=a(91768),m=a(76651),u=a(57068),_=a(67479),s=a(32407);class t extends O.Component{constructor(E){var e;super(E);e=this,this.tokenLogin=(0,P.Z)(f().mark(function L(){var d,h,c,T;return f().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(d=u.parse(m.m8.location.search),h=d.accessToken,c=d.lng,!h){r.next=19;break}return e.setState({loading:!0}),r.prev=4,r.next=7,e.tokenInfo();case 7:return c&&(localStorage.lng=c,e.props.dispatch({type:"user/changeLanguage",lng:c}),s.Z.changeLanguage(c)),r.next=10,_.W.examing(d);case 10:T=r.sent,window.location.replace(T),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(4),o.default.error(e.props.t("login.loginError"));case 17:r.next=20;break;case 19:e.setState({loading:!1});case 20:case"end":return r.stop()}},L,null,[[4,14]])})),this.tokenInfo=()=>{var L=u.parse(m.m8.location.search),d=L.accessToken;return this.props.dispatch({type:"user/fetchUserInfo",loginType:"TOKEN_LOGIN",payload:{access_token:d}})},this.state={loading:!0}}componentDidMount(){this.tokenLogin()}render(){var E=this.props.prefixCls;return this.state.loading?l().createElement("div",{className:"".concat(E,"__loading")},l().createElement(v.Z,{size:"large"})):l().createElement("div",{className:"".concat(E,"__loading")},"\u6388\u6743\u5931\u8D25")}}t.defaultProps={prefixCls:"token_login"},D.default=(0,C.$j)(i=>({user:i.user,isLogin:i.user.isLogin}))((0,n.Z)()(t))},67479:function(I,D,a){"use strict";a.d(D,{D:function(){return O},W:function(){return C}});var M=a(57361),v=a(9754),g=a.n(v),o=a(57068),P=a(31916),p=a(38642),f=a(5430);function O(n){return l.apply(this,arguments)}function l(){return l=(0,M.Z)(g().mark(function n(m){var u,_,s,t,i;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,P.uH)();case 3:if(u=e.sent,u!=="old"){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,(0,P.fP)(m);case 8:if(_=e.sent,s=_.data,t=s.code,i=s.data,t!=="200000"){e.next=14;break}return e.abrupt("return",i.exam_type==="new");case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",e.t0),e.abrupt("return",!1);case 20:case"end":return e.stop()}},n,null,[[0,16]])})),l.apply(this,arguments)}var C={examing:function(){var n=(0,M.Z)(g().mark(function u(_){var s,t,i;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s="",t=_.pageFrom==="ding_myExamTask"?(0,p.lz)(f.ZP.enterpriseId,"student"):"",e.next=4,O(_.exam_id);case 4:return i=e.sent,i?s="".concat(t,"/training/examination/new-exam/examing?").concat(o.stringify(_)):s="".concat(t,"/training/examination/exam/personal?").concat(o.stringify(_)),e.abrupt("return",s);case 7:case"end":return e.stop()}},u)}));function m(u){return n.apply(this,arguments)}return m}(),parse:n=>"/training/examination/new-exam/parse?".concat(o.stringify(n)),examData:n=>"/training/examination/exam-data?exam_id=".concat(n.exam_id,"&task_id=").concat(n.task_id),marking:n=>"/training/examination/new-exam/marking?".concat(o.stringify(n))}}}]);
