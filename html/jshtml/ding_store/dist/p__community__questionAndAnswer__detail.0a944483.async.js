(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3744],{90565:function(z,Z,e){"use strict";e.d(Z,{Z:function(){return B}});var P=e(62029),C=e(88986),A=e(12924),p=e.n(A),E=e(85589),y=e.n(E),D=e(48033),_=e(59081),L=e(65454),M=e(13129);class B extends p().Component{constructor(){super(...arguments);this.state={editorState:y().createEditorState(this.props.editorState||null),showCourseSelector:!1},this.handleChange=O=>{this.setState({editorState:O})},this.blockRendererFn=(O,x)=>{var d=null,$=O.getEntityAt(0);if(!$)return null;var a=x.editorState.getCurrentContent(),j=a.getEntity($),I=j.getType(),Y=j.getData(),F=(0,C.Z)((0,C.Z)({},x),{},{block:O,mediaData:Y,entityKey:$});return I==="DOC"&&(d={component:()=>p().createElement(D.Z,(0,P.Z)({},F,{editable:!1}))}),I==="CUSTOMER_AUDIO"&&(d={component:()=>p().createElement(_.Z,(0,P.Z)({},F,{editable:!1}))}),I==="CUSTOMER_VIDEO"&&(d={component:()=>p().createElement(L.Z,(0,P.Z)({},F,{editable:!1}))}),I==="CUSTOMER_IMAGE"&&(d={component:()=>p().createElement(M.Z,F),editable:!1}),d}}render(){var O=this.props.prefixCls,x=[];return p().createElement("div",{className:"cl-h5-article ".concat(O)},p().createElement(y(),{ref:d=>this.editorInstance=d,value:this.state.editorState,readOnly:!0,controls:x,blockRendererFn:this.blockRendererFn}))}}B.defaultProps={prefixCls:"cl-h5-article-preview"}},27114:function(z,Z,e){"use strict";var P=e(62029),C=e(12924),A=e.n(C),p=e(38642),E=y=>{var D=()=>{(0,p.eJ)({url:"".concat(y.to)})};return A().createElement("a",(0,P.Z)({onClick:()=>D()},y),y.children)};Z.Z=E},77699:function(z,Z,e){"use strict";var P=e(62029),C=e(88986),A=e(33565),p=e(12924),E=e.n(p),y=e(76466);function D(_){var L=_.data,M=L.imgs,B=L.content,S=(0,p.useState)({mode:"preview",watchType:"image",resourceInfo:{}}),O=(0,A.Z)(S,2),x=O[0],d=O[1],$=(0,p.useState)({visible:!1,destroyOnClose:!0,title:"picture",onCancel:()=>{}}),a=(0,A.Z)($,2),j=a[0],I=a[1],Y=()=>{d({mode:"preview",watchType:"image",resourceInfo:{}}),I({visible:!1,destroyOnClose:!0,title:"picture",onCancel:()=>{}})},F=N=>{d({mode:"preview",watchType:"image",resourceInfo:{url:M[N]}}),I((0,C.Z)((0,C.Z)({},j),{},{title:"picture",visible:!0,onCancel:Y}))},H=B.split("<br/>");return E().createElement("div",{className:"detail-img-item-container"},E().createElement("div",{className:"detail-img-item-content"},H.map((N,J)=>E().createElement("div",{key:J.toString()},N))),M.length>0&&E().createElement("div",{className:"detail-img-item-list"},M.map((N,J)=>E().createElement("div",{className:"detail-img-item-box",key:J.toString()},E().createElement("img",{onClick:()=>F(J),className:"detail-img-item",key:J.toString(),src:N})))),E().createElement(y.Z,(0,P.Z)({},x,{previewInfo:j})))}Z.Z=D},22294:function(z,Z,e){"use strict";var P=e(57663),C=e(71577),A=e(12924),p=e.n(A),E=e(38642);class y extends A.Component{constructor(_){super(_);this.state={}}backCommunityHome(){(0,E.eJ)({url:"/community"})}render(){var _=this.props.isShowHeader;return p().createElement("div",{className:"layer-layout-box"},_&&p().createElement("div",{className:"layer-layout-box-header"},p().createElement(C.Z,{onClick:this.backCommunityHome,type:"primary"},"\u8FD4\u56DE\u9996\u9875")),p().createElement("div",{className:"layer-layout-container"},this.props.children))}}y.defaultProps={isShowHeader:!1},Z.Z=y},85540:function(z,Z,e){"use strict";e.r(Z),e.d(Z,{default:function(){return ye}});var P=e(62029),C=e(49111),A=e(19650),p=e(57663),E=e(71577),y=e(13254),D=e(14277),_=e(71194),L=e(57016),M=e(88986),B=e(34792),S=e(48086),O=e(57361),x=e(9754),d=e.n(x),$=e(12924),a=e.n($),j=e(73340),I=e(76651),Y=e(91768),F=e(57068),H=e(84874),N=e(10237),J=e(4408),K=e(37055),ae=e(88311),G=e(80991),ne=e(62615),se=e(52670),re={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}};class ie extends $.Component{constructor(i){super(i);this.onSubmit=r=>{var n=this.props.handleAnswer;n&&n(r)},this.state={}}render(){var i=this.props,r=i.showSubmit,n=r===void 0?!1:r,s=i.t;return a().createElement(G.J9,{ref:m=>{this.initRef=m},initialValues:null,onSubmit:m=>this.onSubmit(m),render:m=>a().createElement(G.l0,{className:"cl-form cl-notice-form answer_question-editor"},a().createElement(G.gN,(0,P.Z)({component:ne.h,displayType:"Custom",name:"h5Article",showPrivate:!1,defaultFieldList:null,scrollDOMSelector:".layer-layout-box",topHeight:128,validate:se.rn},re)),a().createElement("div",{style:{height:"50px",justifyContent:"flex-end",display:n?"flex":"none"}},a().createElement(E.Z,{htmlType:"submit",type:"primary"},s("community.submitAnswer"))))})}}var le=(0,G.$j)((0,Y.Z)()(ie)),k=e(90565),V=e(38642),ge=e(13062),oe=e(71230),_e=e(94233),q=e(67869);class me extends $.Component{constructor(i){super(i);this.state={}}render(){var i=this.props,r=i.name,n=i.time,s=i.avatar;return a().createElement("div",null,a().createElement(oe.Z,null,a().createElement(A.Z,{size:8,align:"center"},a().createElement(q.C,{size:36,src:s||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png")}),a().createElement("div",null,a().createElement("span",{className:"detail_name"},r),a().createElement("div",{className:"detail_time"},(0,V.pi)(n))))))}}var ce=me,ue=e(91072),Ce=e(71153),de=e(60331),Ee=e(85384),ee=e(77699);class pe extends $.Component{constructor(i){var r;super(i);r=this,this.changeTopStatus=function(){var n=(0,O.Z)(d().mark(function s(m){var c,l,u,o,v,h;return d().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return c=m.isTop===1?0:1,l=I.m8.location.query,u=l.id,f.next=5,(0,Ee.No)(u,m.id,c);case 5:o=f.sent,v=o.data,v.code===0&&(h=r.props.getAnswerList,h());case 8:case"end":return f.stop()}},s)}));return function(s){return n.apply(this,arguments)}}(),this.state={}}render(){var i,r=this.props,n=r.detail,s=r.t,m=r.isFromManage,c=r.handleStar,l=r.delAnswer,u=r.index,o=n.content?(i=JSON.parse(n.content))===null||i===void 0?void 0:i.content:"",v=localStorage.getItem("uid")===n.author.id,h=localStorage.getItem("themeColor")||"#516AE6";return a().createElement("div",{className:"detail_list_content"},m&&a().createElement(a().Fragment,null,n.isTop!==1?a().createElement(E.Z,{className:"top-answer-btn",type:"primary",onClick:()=>this.changeTopStatus(n,1)},s("community.prePosition")):a().createElement(E.Z,{className:"top-answer-btn",type:"primary",onClick:()=>this.changeTopStatus(n,0)},s("community.cancelPrePosition"))),(m||v)&&a().createElement(E.Z,{type:"primary",className:"del-answer-btn",onClick:()=>l(n.id)},s("community.deleteAnswer")),a().createElement("div",{className:"detail_list_profile"},a().createElement(q.C,{size:"40",src:n.author.avatar||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png")}),a().createElement("div",{className:"profile-name"},a().createElement("span",null,n.author.name,a().createElement("span",{className:"answer-tips"},s("community.answerThisQuestion"))),a().createElement("span",null,(0,V.pi)(n.lastDate))),n.isTop===1&&a().createElement(de.Z,{color:"blue",className:"profile-preTop"},s("community.prePosition"))),o&&(typeof o=="object"?a().createElement(ee.Z,{data:o}):a().createElement(k.Z,{editorState:o,prefixCls:"detail_list_html"})),a().createElement(E.Z,{type:"link",onClick:()=>c(n.id,n.stared,u),style:{color:n.stared?h:"rgba(0, 0, 0, 0.25)",padding:"0"},icon:a().createElement(H.Z,{iconClass:"icon-dianzan",size:"14px"})},n.stars))}}var ve=(0,Y.Z)()(pe),he=e(88962),fe=e(22294);class te extends $.Component{constructor(i){var r;super(i);r=this,this.getAnswerList=(0,O.Z)(d().mark(function n(){var s,m,c,l,u;return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return s=I.m8.location.query,m=r.state.params,c=K.ZP.community.getAnswerList(s.id),v.next=5,N.WY.get({url:c,params:m});case 5:l=v.sent,u=l.data,u.code===0?r.setState({answerList:u.data.content,totalAnswers:u.data.totalElements}):S.default.error(u.msg||t("community.isError"));case 8:case"end":return v.stop()}},n)})),this.handleAnswerQuestion=function(){var n=(0,O.Z)(d().mark(function s(m){var c,l,u,o,v,h,T,f;return d().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return c=m.h5Article,l=c===void 0?"":c,u=I.m8.location.query,o=r.props.t,v=r.state.params,h=K.ZP.community.postAnswerDate(u.id),g.next=7,N.WY.post({url:h,data:{content:JSON.stringify({type:"pc",content:l}),userId:localStorage.getItem("uid"),userName:localStorage.getItem("name")}});case 7:T=g.sent,f=T.data,f.code===0?r.setState({isAnswer:!1},()=>{r.getQuestionDetail(),r.getAnswerList(),S.default.success(f.data.integralInfo)}):S.default.error(f.msg||o("common.releaseFailure"));case 10:case"end":return g.stop()}},s)}));return function(s){return n.apply(this,arguments)}}(),this.handleAddUsersOk=function(){var n=(0,O.Z)(d().mark(function s(m){var c,l,u,o,v,h,T,f;return d().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(c=r.state.org,l=r.props.t,u=I.m8.location.query,o=K.ZP.community.invitationAnswer(u.id),v=m.dept.map(U=>U.id),h=m.user.map(U=>U.id),!(v.length===0&&h.length===0)){g.next=9;break}return r.handleAddUsersCancel(),g.abrupt("return");case 9:return g.next=11,N.WY.post({url:o,data:{departIds:v,userIds:h}});case 11:T=g.sent,f=T.data,f.code===0?(r.setState({org:(0,M.Z)((0,M.Z)({},c),{},{initData:m,visible:!1})}),S.default.success(l("community.invitation"))):S.default.error(f.msg||l("community.isError"));case 14:case"end":return g.stop()}},s)}));return function(s){return n.apply(this,arguments)}}(),this.handleAddUsersCancel=()=>{var n=this.state.org;this.setState({org:(0,M.Z)((0,M.Z)({},n),{},{visible:!1})})},this.loadMore=()=>{var n=this.state.params,s=n.size;this.setState({params:(0,M.Z)((0,M.Z)({},n),{},{size:s+10})},()=>{this.getAnswerList()})},this.delAnswer=function(){var n=(0,O.Z)(d().mark(function s(m){var c,l,u,o,v,h;return d().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:c=r.state.questionId,l=r.props,u=l.t,o=l.isFromManage,v=K.ZP.community.deleteAnswer(c,m),h=o?{admin:!0}:{},L.Z.confirm({title:u("common.tip"),content:u("course.sureToDelete"),okText:u("common.ok"),cancelText:u("common.cancel"),onOk:function(){var R=(0,O.Z)(d().mark(function U(){var w,W;return d().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,N.WY.delete({url:v,params:h});case 2:w=b.sent,W=w.data,W.code===0?(r.getAnswerList(),r.getQuestionDetail(),S.default.success(u("common.deleteSuccess"))):S.default.error(W.msg||u("common.deleteFailure"));case 5:case"end":return b.stop()}},U)}));function g(){return R.apply(this,arguments)}return g}()});case 5:case"end":return f.stop()}},s)}));return function(s){return n.apply(this,arguments)}}(),this.handleStar=function(){var n=(0,O.Z)(d().mark(function s(m,c,l){var u,o,v,h,T,f,R,g,U;return d().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return u=r.props.t,o=r.state,v=o.questionId,h=o.answerList,T=h[l].stars,f=c?K.ZP.community.postUnStarCount(v,m):K.ZP.community.postStarCount(v,m),W.next=6,N.WY.post({url:f});case 6:R=W.sent,g=R.data,g.code===0?(U=(0,M.Z)((0,M.Z)({},h[l]),{},{stared:!c,stars:c?T-1:T+1}),h.splice(l,1,U),r.setState({answerList:h},()=>{S.default.success(c?u("community.unstarTips"):g.data)})):S.default.error(g.msg||u("community.isError"));case 9:case"end":return W.stop()}},s)}));return function(s,m,c){return n.apply(this,arguments)}}(),this.state={isAnswer:!1,topicList:[],questionList:[],author:"",content:"",title:"",answerCount:0,answerList:[],org:{title:i.t("community.inviteAnswer"),visible:!1,filterAuthOpen:!0,displayType:["user","dept"],onlyUser:!0,onlyDept:!1,asyncDeptTree:!1,initData:{user:[]}},questionId:"",params:{size:10,page:0},totalAnswers:0}}componentDidMount(){this.getQuestionList(),this.getQuestionDetail(),this.getAnswerList()}getQuestionList(){var i=this;return(0,O.Z)(d().mark(function r(){var n,s,m,c,l;return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=K.ZP.community.getQuestionList(),s={page:0,size:5},o.next=4,N.WY.get({url:n,params:s});case 4:m=o.sent,c=m.data,c.code===0?i.setState({questionList:((l=c.data)===null||l===void 0?void 0:l.content)||[]}):S.default.error(c.msg||t("community.isError"));case 7:case"end":return o.stop()}},r)}))()}getQuestionDetail(){var i=this;return(0,O.Z)(d().mark(function r(){var n,s,m,c,l;return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=F.parse(i.props.location.search),s=n.id,m=K.ZP.community.getQuestionDetail(s),o.next=4,N.WY.get({url:m});case 4:c=o.sent,l=c.data,l.code===0?i.setState({author:l.data.author,content:l.data.content,title:l.data.title,lastDate:l.data.lastDate,answerCount:l.data.answerCount,questionId:s,topicList:l.data.topic}):S.default.error(l.msg||t("community.isError"));case 7:case"end":return o.stop()}},r)}))()}handleDelete(){var i=I.m8.location.query,r=i.id,n=this.props,s=n.t,m=n.isFromManage;L.Z.confirm({title:s("common.tip"),content:s("course.sureToDelete"),okText:s("common.ok"),cancelText:s("common.cancel"),onOk:function(){var c=(0,O.Z)(d().mark(function u(){var o,v,h,T;return d().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return o=K.ZP.community.deleteQuestion(r),v=m?{admin:!0}:{},R.next=4,N.WY.delete({url:o,params:v});case 4:h=R.sent,T=h.data,T.code===0?(m?I.m8.goBack():(0,V.eJ)({url:"/community/myCenter"}),S.default.success(s("common.deleteSuccess"))):S.default.error(T.msg||s("common.deleteFailure"));case 7:case"end":return R.stop()}},u)}));function l(){return c.apply(this,arguments)}return l}()})}handleAnswerStatus(){this.setState({isAnswer:!this.state.isAnswer})}handleInvitation(){var i=this.state.org;this.setState({org:(0,M.Z)((0,M.Z)({},i),{},{visible:!0})})}render(){var i=this.state,r=i.isAnswer,n=i.questionList,s=i.author,m=i.content,c=i.title,l=i.lastDate,u=i.answerCount,o=i.answerList,v=i.totalAnswers,h=i.org,T=i.questionId,f=i.topicList,R=f===void 0?[]:f,g=this.props,U=g.isFromManage,w=g.t;if(!c)return a().createElement(D.Z,{image:D.Z.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:80},description:a().createElement("span",null,w("community.getQuestionErrorTips"))},a().createElement(E.Z,{type:"primary",onClick:()=>I.m8.goBack()},w("common.return")));var W=m?JSON.parse(m).content:"";return a().createElement(fe.Z,null,a().createElement("div",{className:"question_detail_container"},a().createElement(J.Z,{title:w("documentTitle.questionDetail")}),a().createElement("div",{className:"question_detail_content"},a().createElement("div",{className:"question_content_body"},a().createElement(ce,{name:s.name,time:l,avatar:s.avatar}),a().createElement("h1",{className:"detail_title"},c),U&&a().createElement(E.Z,{type:"primary",className:"btn-back",onClick:()=>{I.m8.goBack()}},w("common.return")),a().createElement(ue.Z,{list:R,type:"QUESTION"}),W&&(typeof W=="object"?a().createElement(ee.Z,{data:W}):a().createElement(k.Z,{editorState:W,prefixCls:"question_content_editor"})),a().createElement("div",null,a().createElement(A.Z,null,!U&&a().createElement(E.Z,{type:"primary",className:"question_content_options_writeAnswer",onClick:()=>this.handleAnswerStatus()},w("community.writeAnswer")),!U&&a().createElement(E.Z,{type:"default",onClick:()=>this.handleInvitation(),className:"question_content_options_inviteAnswer"},w("community.inviteAnswer")),(U||(s==null?void 0:s.id)===localStorage.getItem("uid"))&&a().createElement(E.Z,{type:"default",onClick:()=>this.handleDelete()},w("community.deleteQuestion")),a().createElement("span",{className:"question_content_options_answerCount"},a().createElement(H.Z,{iconClass:"icon-huidawenti",size:"16px",color:"#666"})," ".concat(u).concat(w("community.answerCount")))))),a().createElement("div",{className:"question_detail_list"},a().createElement("div",{className:"question_detail_list_left"},r&&a().createElement("div",{className:"question_detail_list_answer"},a().createElement(le,{handleAnswer:Q=>this.handleAnswerQuestion(Q),showSubmit:!0})),o.length>0?a().createElement(a().Fragment,null,o.map((Q,b)=>a().createElement(ve,{isFromManage:U,delAnswer:this.delAnswer,handleStar:this.handleStar,key:Q.id,detail:Q,index:b,getAnswerList:this.getAnswerList})),v>o.length?a().createElement("div",{className:"load-more-action",onClick:this.loadMore},a().createElement(H.Z,{iconClass:"icon-f-arrow-under",size:"16px",color:"#666"}),a().createElement("span",null,w("community.openMoreAnswers"))):a().createElement("div",{className:"no-more-answer"},a().createElement("span",null,w("community.noMoreAnswers")))):a().createElement("div",{className:"detail_list_content"},a().createElement(D.Z,null))),!U&&a().createElement("div",{className:"question_detail_list_right"},a().createElement("div",null,a().createElement("div",{className:"detail_list_recommend"},w("community.relatedQuestion")),a().createElement("ul",null,n.map(Q=>a().createElement(he.Z,{key:Q.id,item:Q})))))),a().createElement(ae.Z,(0,P.Z)({},h,{maxDeptUserCount:5,maxUserCount:5,beyondLimitTip:w("community.inviteCountLimit"),onOk:this.handleAddUsersOk,onCancel:this.handleAddUsersCancel})))))}}te.defaultProps={isFromManage:!1};var ye=(0,Y.Z)()((0,j.EN)(te))},88962:function(z,Z,e){"use strict";var P=e(12924),C=e.n(P),A=e(91768),p=e(38642);function E(y){var D=y.t,_=y.item,L=()=>{(0,p.eJ)({url:"/community/questionDetail?id=".concat(_.id)}),window.location.reload()};return C().createElement("li",{className:"question_list_item"},C().createElement("p",{className:"question_list_item_top",onClick:L},_.title),C().createElement("p",{className:"question_list_item_bottom"},_.answerCount||0,D("community.answerCount")))}Z.Z=(0,A.Z)()(E)},91072:function(z,Z,e){"use strict";var P=e(71153),C=e(60331),A=e(12924),p=e.n(A),E=e(84874),y=e(27114);function D(_){var L=_.list,M=_.type;return p().createElement("div",{style:{marginBottom:"12px"}},L.length>0&&L.map(B=>p().createElement(y.Z,{to:"/community/topicDetail?type=".concat(M,"&tagName=").concat(B),key:B},p().createElement(C.Z,{style:{border:"none",borderRadius:"10px",cursor:"pointer"}},p().createElement(E.Z,{iconClass:"icon-icon_huati",color:"#1890FF",fontSize:"14px"}),p().createElement("span",{style:{fontSize:"14px",color:"#1890FF",marginLeft:"5px"}},B)))))}Z.Z=D},85384:function(z,Z,e){"use strict";e.d(Z,{Fx:function(){return A},No:function(){return p},O6:function(){return E}});var P=e(37055),C=e(10237);function A(y,D){var _=P.ZP.community.setArticleTop(y,D);return C.WY.put({url:_,data:{}})}function p(y,D,_){var L=P.ZP.community.setAnswerTop(y,D,_);return C.WY.put({url:L,data:{}})}function E(y,D,_){var L=P.ZP.community.setCommentTop(y,D,_);return C.WY.put({url:L,data:{}})}}}]);
