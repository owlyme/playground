(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[4144],{4408:function(be,he,r){"use strict";var F=r(12924),m=r.n(F),_=r(28216),W=r(17780),j=r(38642),Q=y=>({userInfo:y.user}),J=y=>{var A=y.title;return(0,W.xX)()&&setTimeout(()=>{document.title=A},0),(0,F.useEffect)(()=>{if(A&&document.title!==A&&setTimeout(()=>{document.title=A},0),(0,j.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var d=document.querySelector(".zoom-report");d&&(d.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[A]),m().createElement(m().Fragment,null)};J.defautProps={title:""},he.Z=(0,_.$j)(Q)(J)},1164:function(be,he,r){"use strict";var F=r(12924),m=r.n(F),_=r(76651),W=r(38642),j=r(91302),Q=J=>{var y=navigator.userAgent.toLocaleLowerCase(),A=localStorage.getItem("enterpriseId"),d=(0,W.lz)(A,J.projectType),U=localStorage.getItem("dingPersonnel"),R=j.bl.includes(U),V=J.target;function S(D){if(V==="self"&&(D.preventDefault(),_.m8.push(J.to)),R){if(J.projectType==="student"){window.location.href="".concat(d,"/").concat(J.to);return}_.m8.push(J.to);return}if(dd.version){D.preventDefault();var a="";J.to.includes("?")?a="".concat(d).concat(J.to,"&ddtab=true"):a="".concat(d).concat(J.to,"?ddtab=true"),dd.biz.util.openLink({url:a})}else y.indexOf("lark")!==-1&&(window.location.href="".concat(d).concat(J.to))}return m().createElement("a",{rel:"noreferrer",href:"".concat(J.projectType==="student"?"".concat(d).concat(J.to):"#".concat(J.to)),className:"".concat(J.wrapCls," cl-pointer"),target:y.indexOf("lark")!==-1||R?"_self":J.target||"_blank",onClick:S},J.children)};Q.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},Q.targetTo=J=>{var y=J.path,A=J.from,d=J.isExternalLink,U=d===void 0?!1:d,R=J.isAsync,V=R===void 0?!1:R,S=J.openName,D=S===void 0?"_blank":S,a=J.projectType,z=a===void 0?"manage":a,B=J.ddTab,oe=B===void 0?!0:B,ie,ee=localStorage.getItem("dingPersonnel"),De=j.bl.includes(ee),ce=navigator.userAgent.toLocaleLowerCase(),ke=localStorage.getItem("enterpriseId"),re=(0,W.lz)(ke,z),H=localStorage.getItem("appType"),q=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var fe="";if(ie=U?"":re,De&&!U){if(z==="student"){window.location.href="".concat(re).concat(y);return}_.m8.push(y);return}y.includes("?")?fe="".concat(ie).concat(y,"&ddtab=").concat(oe):fe="".concat(ie).concat(y,"?ddtab=").concat(oe),dd.biz.util.openLink({url:fe})}else if(ce.indexOf("lark")!==-1)ie=U?"":re,window.location.href="".concat(ie).concat(y);else if(H==="wx_app"&&q&&U&&A==="imgText")ie=U?"":z==="student"?"".concat(re):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(ie).concat(y)});else if(ie=U?"":z==="student"?"".concat(re):"#",V){var ye=window.open("","_blank");setTimeout(()=>{ye.location="".concat(ie).concat(y)},100)}else window.open("".concat(ie).concat(y),D)},he.Z=Q},87312:function(be,he,r){"use strict";var F=r(12924),m=r.n(F),_=r(91768),W=j=>{var Q=j.t;return m().createElement("div",{className:j.className?"".concat(j.className," no-result"):"no-result"},m().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1789886702513426432.png"),className:"no-data-img",alt:""}),m().createElement("p",{className:"no-data-tip"},j.tipText||Q("common.empty")))};he.Z=(0,_.Z)()(W)},88311:function(be,he,r){"use strict";r.d(he,{Z:function(){return Pe}});var F=r(62029),m=r(47673),_=r(4107),W=r(33565),j=r(57361),Q=r(34792),J=r(48086),y=r(88986),A=r(43358),d=r(34041),U=r(18106),R=r(88108),V=r(9754),S=r.n(V),D=r(12924),a=r.n(D),z=r(91768),B=r(77043),oe=r.n(B),ie=r(20228),ee=r(11382),De=r(18721),ce=r.n(De),ke=r(51975),re=r(37055),H={breadNav:[{value:"",label:""}],checkOne:()=>{},checkAll:()=>{},nextLevel:()=>{},changeLevel:()=>{}},q=a().createContext(H),fe={searchResult:[],deptList:[],groupList:[],postList:[],deptUser:[],groupUser:[],postUser:[],clusterList:[],classList:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],initTypeList:()=>{},initTypeUser:()=>{},toggleDisplayItem:()=>{},toggleDisplayList:()=>{},checkListOne:()=>{},checkUserOne:()=>{},removeCheckedUser:()=>{},changeLevel:()=>{},hidePosts:!1,initHidePostsStatus:()=>{},clearSelectedAll:()=>{}},ye=a().createContext(fe),Ce=r(36017),Te=r(35247),Ee=r(60667);class Re extends a().Component{constructor(){super(...arguments);this.changeLevel=(g,u,t,s)=>{g.preventDefault(),this.props.contextData.changeLevel(u,t,s)}}render(){var g=this.props.contextData.breadNav.map((u,t)=>a().createElement(Te.Z.Item,{key:u.value},a().createElement("span",{className:"bread-nav-item",onClick:s=>this.changeLevel(s,u.value,t,!(ce()(u,"authorized")&&u.authorized==="true"))},a().createElement(Ee.Z,{dataType:"departmentName",value:u.value,name:u.label,type:u.sourceType}))));return a().createElement("div",{className:"bread-nav"},a().createElement(Te.Z,null,g))}}Re.defaultProps={contextData:{breadNav:[]},changeLevel:()=>{}};var We=Re,Ve=r(63185),Ne=r(9676),ze=r(88983),Ke=r(47933),Ye=r(22385),Me=r(31097),Je=r(57119),Ue=r(84874),dt=r(20136),tt=r(55241),gt=r(13062),at=r(71230),ft=r(89032),rt=r(15746),Xe=r(28216),He=r(80430),Ae=r(10237);function yt(){var L=CONFIG.Role.getUserManageRange();return request.get({url:L})}function pt(L){var g=re.ZP.OrgDialog.getDeptInfoUrl({departmentId:L.departmentId});return delete L.departmentId,Ae.WY.get({url:g,params:L})}function ut(L){var g=re.ZP.OrgDialog.getDeptUsersUrl({departmentId:L.departmentId});return delete L.departmentId,Ae.WY.get({url:g,params:L})}function st(L){var g=re.ZP.OrgDialog.getUserDetailUrl();return Ae.WY.get({url:g,params:L})}function nt(L){var g=re.ZP.OrgDialog.getScopeUsersAndDeptsUrl({departmentId:L.departmentId});return delete L.departmentId,Ae.WY.get({url:g,params:L})}function ht(L){var g=re.ZP.OrgDialog.postDeleteCacheUrl({cacheId:L.cacheId});return delete L.cacheId,Ae.WY.post({url:g,params:L})}var _e,it,ot=(_e=(0,Xe.$j)(L=>{var g=L.user;return{enterpriseName:g.enterpriseName}}),_e(it=class extends a().Component{constructor(){super(...arguments);this.state={loading:!0,cardInfoFinal:this.props.cardInfo},this.renderTitle=()=>{var g=this.props,u=g.cardInfo,t=g.prefixCls,s=g.enterpriseName,h=u.source_type,l=u.user_id,e=u.name;return a().createElement("div",{className:"".concat(t,"__header")},a().createElement("div",{className:"".concat(t,"__header-name")},a().createElement(Ee.Z,{type:h,value:l,name:e,dataType:"userName"})),a().createElement("div",{className:"".concat(t,"__header-corp")},s||"/"))},this.renderContent=()=>{var g=this.props,u=g.prefixCls,t=g.t,s=this.state.cardInfoFinal,h=s.user_id,l=s.job_number,e=s.post_names,f=e===void 0?[]:e,T=s.department_infos,w=T===void 0?[]:T,X=()=>!(w instanceof Array)||w.length===0?"/":a().createElement(He.Z,{list:w,displayAll:!0,isBlock:!0}),x=()=>!(f instanceof Array)||f.length===0?"/":f.map(ae=>a().createElement("div",{key:ae},ae)),se=[{lable:"ID",value:h},{lable:t("personal.jobNumber"),value:l||"/"},{lable:t("setting.postLabel"),value:x()},{lable:t("learnRecord.department"),value:X()}];return a().createElement("div",{className:"".concat(u,"__body")},se.map(ae=>a().createElement(at.Z,{className:"".concat(u,"__body-item"),key:ae.value},a().createElement(rt.Z,{className:"".concat(u,"__body-item-lable")},ae.lable),a().createElement(rt.Z,{className:"".concat(u,"__body-item-value")},ae.value||"/"))))}}render(){var g=this.props,u=g.children,t=g.prefixCls,s=this.state,h=s.loading,l=s.cardInfoFinal;return a().createElement(tt.Z,{overlayClassName:t,placement:"rightTop",title:this.renderTitle,content:h?a().createElement("div",{className:"".concat(t,"__body")},a().createElement(ee.Z,null)):this.renderContent,onVisibleChange:e=>{e&&(l.detailInfo===!1?st({user_id:l.id}).then(f=>{this.setState({loading:!1,cardInfoFinal:(0,y.Z)((0,y.Z)((0,y.Z)({},l),f.data),{},{detailInfo:!0})})}).catch(f=>{console.error(f)}):this.setState({loading:!1}))},mouseEnterDelay:.5},u)}})||it);ot.defaultProps={prefixCls:"user-card-popover",cardInfo:{}};var $e=(0,z.Z)()(ot),Ct=["cluster","class"];class qe extends a().Component{constructor(){super(...arguments);this.checkOne=g=>{g.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=g=>{g.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var g=this.props,u=g.cardInfo,t=g.type,s=g.t;return u.authorized==="false"&&t==="dept"?a().createElement(Me.Z,{title:s("orgDialog.scopedAuthorize")},a().createElement(Je.Z,{style:{marginLeft:"4px"}})):null}}render(){var g=this.props,u=g.t,t=g.cardInfo,s=t===void 0?{}:t,h=g.hidePosts,l=g.type,e=g.userCount,f=null;return this.props.hasNext?(f=a().createElement("div",{className:"next-level"},!(h&&l==="post")&&e>-1?a().createElement("span",{className:"next-level-count"},"(",e,")"):null,Ct.includes(l)?a().createElement("span",null):a().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},a().createElement(Ue.Z,{iconClass:"icon-xiaji1"}),u("component.nextLevel"))),this.props.single?a().createElement("div",{className:"org-tree-item"},a().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),f):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&a().createElement("div",{className:"org-tree-item"},a().createElement(Ne.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),f)):a().createElement("div",{className:"org-tree-item"},this.props.single?a().createElement(Ke.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement($e,{cardInfo:s},this.props.title)):a().createElement($e,{cardInfo:s},a().createElement(Ne.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title)))}}qe.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var mt=(0,z.Z)()(qe),Ge=["cluster","class"];class G extends a().Component{constructor(){super(...arguments);this.checkOne=g=>{g.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=g=>{g.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var g=this.props,u=g.cardInfo,t=g.type,s=g.t;return u.authorized==="false"&&t==="dept"?a().createElement(Me.Z,{title:s("orgDialog.scopedAuthorize")},a().createElement(Je.Z,{style:{marginLeft:"4px"}})):null}}render(){var g=this.props,u=g.t,t=g.cardInfo,s=t===void 0?{}:t,h=g.hidePosts,l=g.type,e=g.userCount,f=null;return this.props.hasNext?(f=a().createElement("div",{className:"next-level"},a().createElement("span",{className:"next-level-belle"},!(h&&l==="post")&&e>-1?a().createElement("span",{className:"next-level-count"},"(",e,")"):null,Ge.includes(l)?a().createElement("span",null):a().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},a().createElement(Ue.Z,{iconClass:"icon-xiaji1"}),u("component.nextLevel")))),this.props.single?a().createElement("div",{className:"org-tree-item"},a().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),f):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&a().createElement("div",{className:"org-tree-item"},a().createElement(Ne.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),f)):a().createElement("div",{className:"org-tree-item"},this.props.single?a().createElement(Ke.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement($e,{cardInfo:s},a().createElement("span",{className:"org-tree-item-title"},this.props.title))):a().createElement($e,{cardInfo:s},a().createElement(Ne.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},a().createElement("span",{className:"org-tree-item-title"},this.props.title))))}}G.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var E=(0,z.Z)()(G),b=r(38642),K=["cluster","class"];class le extends a().Component{constructor(g){super(g);this.checkAll=(u,t)=>{u.preventDefault(),this.props.contextData.checkAll(t)},this.getIsCheckAll=()=>{var u=[].concat(this.context["".concat(this.props.dataTypeKey,"List")],K.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")]);if(u.length===0)return!1;var t=u.findIndex(s=>!s.isChecked);return t===-1},this.renderDeptName=(u,t)=>t==="dept"?a().createElement(Ee.Z,{type:u.source_type,value:u.id,name:u.name,dataType:"departmentName"}):u.name,this.renderName=u=>a().createElement(Ee.Z,{type:u.source_type,value:u.user_id,name:u.name,dataType:"userName"}),this.state={isShowCheckAllEle:!0,whiteList:{belleFlag:(0,b.UI)("BELLE_CUSTOMER_WHITE")}}}render(){var g=this.state,u=g.isShowCheckAllEle,t=g.whiteList,s=this.props,h=s.t,l=s.dataTypeKey,e=s.disableHidden,f=s.scrollFlag,T=this.context,w=T.maxDeptUserCount,X=T.hidePosts,x=T.onlyPost,se=T.onlyUser,ae=T.single,ne=[],$=this.context["".concat(this.props.dataTypeKey,"List")].map(Y=>(ne.push(a().createElement("div",{className:"title-item",key:Y.id},this.renderDeptName(Y,l))),t.belleFlag&&f?a().createElement(E,{type:l,key:Y.id,cardInfo:Y,hasNext:!0,checkable:w&&(Y==null?void 0:Y.userCount)>w?!1:!(x&&Y.post_type==="post_group"||se),single:ae,userCount:Y.userCount,isChecked:!!Y.isChecked,itemId:Y.id,title:this.renderDeptName(Y,l),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!Y.children,hidePosts:X,disableHidden:e}):a().createElement(mt,{type:l,key:Y.id,cardInfo:Y,hasNext:!0,checkable:w&&(Y==null?void 0:Y.userCount)>w?!1:!(x&&Y.post_type==="post_group"||se),single:ae,userCount:Y.userCount,isChecked:!!Y.isChecked,itemId:Y.id,title:this.renderDeptName(Y,l),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!Y.children,hidePosts:X,disableHidden:e}))),de=[],xe=K.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")].map(Y=>(de.push(a().createElement("div",{className:"title-item",key:Y.id},this.renderName(Y,l))),t.belleFlag&&f?a().createElement(E,{key:Y.id,hasNext:!1,title:this.renderName(Y),isChecked:!!Y.isChecked,itemId:Y.id,cardInfo:Y,checkable:!(Y.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:e}):a().createElement(mt,{key:Y.id,hasNext:!1,title:this.renderName(Y),isChecked:!!Y.isChecked,itemId:Y.id,cardInfo:Y,checkable:!(Y.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:e}))),Fe=this.getIsCheckAll(),je=a().createElement("div",{className:"org-tree-item"},a().createElement(Ne.Z,{checked:Fe,defaultChecked:!0,onClick:Y=>this.checkAll(Y,!Fe)},h("common.all")));return a().createElement("div",{className:"".concat(this.context.oneDisplayType?"org-tree more-height":"org-tree"," ").concat(t.belleFlag&&f?"org-tree-belle":"")},!this.context.single&&this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&$.length===0&&xe.length>0&&u||!this.context.single&&!this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&($.length>0||xe.length>0)&&u?je:null,t.belleFlag&&f&&a().createElement("div",{className:"belle-title-scroll"},ne,de),$,xe)}}le.contextType=ye,le.defaultProps={dataTypeKey:"dept",contextData:{},disableHidden:!1,scrollFlag:!1};var Ie=(0,z.Z)()(le),ve=r(25547),Se="999",Le=1,Be=["clusterList","classList"];class we extends a().Component{constructor(g,u){var t;super(g);t=this,this.getClusterList=()=>{var s=re.ZP.OrgDialog.getClusterList(),h={keyword:""};Ae.WY.get({url:s,params:h}).then(l=>{this.context.initTypeList("clusterList","checkedCluster",l.data.data.map(e=>({name:e.name,userCount:e.user_count,id:e.id,parentId:[""]})))})},this.getClassList=()=>{this.context.initTypeList("classList","checkedClass",[{name:"\u6D4B\u8BD52",userCount:2,id:"2",parentId:[""]},{name:"\u6D4B\u8BD54",userCount:1,id:"41",parentId:[""]}])},this.flatTreeData=(s,h)=>(s.children.forEach(l=>{l.children&&(h[l.id]=l.children,this.flatTreeData(l,h))}),h),this.getDeptList=function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise((l,e)=>{var f=t.state.cacheId;pt({departmentId:s,cache_id:f,filter_auth:h&&!t.props.filterAuthOpen}).then(T=>{var w=T.data.children||[];w.forEach(x=>{x.parentId=T.data.id,x.userCount=x.user_count,x.name=x.department_name,x.all_name=a().createElement("span",null,t.state.contextData.breadNav.map(se=>a().createElement("span",{key:se.value},se.label,"/")),x.department_name)});var X=[];t.context.asyncDeptTree?X=w:X=t.flatTreeData(T.data,{[T.data.id]:w}),t.setState({deptList:X}),t.context.initTypeList("deptList","checkedDept",w),l(T.data)}).catch(T=>{console.error(T),e(T)})})},this.getDeptUserList=function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,l=t.state.cacheId;ut({departmentId:s,cache_id:l,filter_auth:h&&!t.props.filterAuthOpen}).then(e=>{e.data&&e.data.forEach(f=>{f.name=f.user_name,f.detailInfo=!1}),t.context.initTypeUser("deptUser",e.data)}).catch(e=>{console.error(e)})},this.getGroupList=()=>{var s=re.ZP.Organization.getGroupList(),h={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ae.WY.get({url:s,params:h}).then(l=>{l.data.groups=l.data.groups||[],l.data.groups.forEach(e=>{e.parentId=this.state.contextData.breadNav.map(f=>f.value),e.userCount=e.user_count,e.name=e.group_name}),this.setState({groupList:l.data.groups}),this.context.initTypeList("groupList","checkedGroup",l.data.groups)})},this.getGroupUserList=s=>{var h=re.ZP.Organization.getGroupUserList({groupId:s}),l={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ae.WY.get({url:h,params:l}).then(e=>{e.data.users&&e.data.users.forEach(f=>{f.name=f.user_name,f.parentId=this.state.contextData.breadNav.map(T=>T.value)}),this.context.initTypeUser("groupUser",e.data.users)})},this.getPostList=s=>{var h=re.ZP.Organization.getPostTree(),l={filter_auth:!this.props.filterAuthOpen,post_id:s,user_type:this.context.userType};Ae.WY.get({url:h,params:l}).then(e=>{e.data.posts=e.data.posts||[],e.data.posts.forEach(f=>{f.parentId=this.state.contextData.breadNav.map(T=>T.value),f.userCount=f.user_count,f.name=f.post_name}),this.setState({postList:e.data.posts}),this.context.initTypeList("postList","checkedPost",e.data.posts),this.context.initHidePostsStatus(e.data.hide_posts==="true")})},this.getPostUserList=s=>{var h=re.ZP.Organization.getPostUserList({postId:s}),l={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Ae.WY.get({url:h,params:l}).then(e=>{e.data.users&&e.data.users.forEach(f=>{f.name=f.user_name,f.parentId=this.state.contextData.breadNav.map(T=>T.value)}),this.context.initTypeUser("postUser",e.data.users)})},this.getUserList=function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;t.props.type==="dept"?t.getDeptUserList(s,h):t.props.type==="group"?t.getGroupUserList(s):t.getPostUserList(s)},this.checkOne=(s,h,l)=>{var e=this.state.checkedCount;if(h==="list"){var f=this.context[this.state.listType].find(w=>w.id===s);f.isChecked=l,f.all_name&&typeof f.all_name=="object"&&delete f.all_name,e=l?e+1:e-1,this.context.checkListOne(f,this.state.checkedListType,this.state.listType)}else if(h==="user"){var T=this.context[this.state.checkedUserType].find(w=>w.id===s);T.isChecked=l,e=l?e+1:e-1,this.context.checkUserOne(T,this.state.checkedUserType)}this.updateCheckedCount(e)},this.updateCheckedCount=s=>{this.setState({checkedCount:s})},this.checkAll=function(){var s=(0,j.Z)(S().mark(function h(l){var e,f,T,w,X,x,se,ae,ne,$,de,xe,Fe,je,Y;return S().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(e=t.state,f=e.contextData,T=e.cacheId,w=[...f.breadNav].reverse(),X=(0,W.Z)(w,1),x=X[0],se=x.value,ae=[...t.context[t.state.checkedListType]],ne=x.authorized==="false",$={departments:[],users:[]},!ne){lt.next=12;break}return lt.next=9,nt({departmentId:se,cache_id:T});case 9:de=lt.sent,xe=de.data,$={departments:xe.departments.map(me=>(me.isChecked=l,me.name=me.department_name,me.parentId=me.parent_ids.split("/"),me.parentAuthorize=!1,me.userCount=me.user_count,me)),users:xe.users.map(me=>(me.isChecked=l,me.name=me.user_name,me.parentAuthorize=!1,me))};case 12:Fe=t.context[t.state.listType].map(me=>{me.isChecked=l,t.props.type!=="dept"&&ae.forEach(ct=>{ct.parentId.indexOf("".concat(me.id))!==-1&&(ct.isChecked=!1)});var et=ae.findIndex(ct=>ct.id===me.id);return et!==-1?ae[et].isChecked=l:ae.push(me),me}),je=[],t.context.checkedUser.forEach(me=>{if(t.props.type!=="dept"){if(typeof me.parentId!="undefined"&&me.parentId.indexOf("".concat(se))!==-1&&me.parentId[me.parentId.length-1]!==se)return}else{var et=typeof me.parentId!="undefined"?me.parentId:me.department_ids||[];if(et.indexOf(se)!==-1)return}je.push(me)}),Y=Be.includes(t.state.listType)?[]:t.context[t.state.checkedUserType].map(me=>{me.isChecked=l;var et=je.findIndex(ct=>ct.id===me.id);return et!==-1?je[et].isChecked=l:je.push(me),me}),t.context.toggleDisplayList(t.state.checkedListType,oe()($.departments,ae,"id"),t.state.listType,Fe,t.state.checkedUserType,Y,oe()($.users,je,"id")),t.setState({checkedCount:l?(Be.includes(t.state.listType)?0:t.context[t.state.checkedUserType].length)+t.context[t.state.listType].length:0});case 18:case"end":return lt.stop()}},h)}));return function(h){return s.apply(this,arguments)}}(),this.nextLevel=(s,h,l)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var e=[...this.state.contextData.breadNav,{value:s.id,label:h,authorized:s.authorized}];this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:e})},()=>{this.props.type==="post"?this.nextPostLevel(s.id,l):this.props.type==="dept"?this.nextDeptLevel(s.id,!(ce()(s,"authorized")&&s.authorized==="true")):this.context.initTypeList("groupList","checkedGroup",[]),this.getUserList(s.id===Se?Le:s.id,!(ce()(s,"authorized")&&s.authorized==="true"))})},this.nextDeptLevel=(s,h)=>{if(this.context.asyncDeptTree)this.getDeptList(s,h);else{var l=this.state.deptList[s];typeof l!="undefined"&&l.forEach(e=>{e.parentId=this.state.contextData.breadNav.map(f=>f.value),e.userCount=e.user_count,e.name=e.department_name}),this.context.initTypeList("deptList","checkedDept",l||[])}},this.nextPostLevel=(s,h)=>{if(h){var l=(0,ve.lK)(this.state.postList,s),e=l.children.map(f=>(f.name=f.post_name,f.parentId=this.state.contextData.breadNav.concat([s]).map(T=>T.value),f.userCount=f.user_count,f));this.context.initTypeList("postList","checkedPost",e)}},this.changeLevel=(s,h,l)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var e=this.props.type==="group"?[this.state.contextData.breadNav[0]]:this.state.contextData.breadNav.slice(0,h+1);this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:e}),isSearch:!1},()=>{this.props.type==="dept"?this.changeDeptLevel(s,l):this.props.type==="group"?this.changeGroupLevel(s):this.props.type==="cluster"?this.getClusterList():this.props.type==="class"?this.getClassList():this.changePostLevel(s)})},this.changeDeptLevel=function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.context.asyncDeptTree)t.getDeptList(s,h);else{var l=t.state.deptList[s];l.forEach(e=>{e.parentId=t.state.contextData.breadNav.map(f=>f.value),e.userCount=e.user_count,e.name=e.department_name}),t.context.initTypeList("deptList","checkedDept",l)}t.getDeptUserList(s===Se?Le:s,h)},this.changePostLevel=s=>{var h=s==="1"?this.state.postList:(0,ve.lK)(this.state.postList,s).children,l=h.map(e=>(e.name=e.post_name,e.parentId=this.state.contextData.breadNav.concat([s]).map(f=>f.value),e.userCount=e.user_count,e));this.context.initTypeList("postList","checkedPost",l),s!=="1"&&this.getPostUserList(s===Se?Le:s)},this.changeGroupLevel=s=>{s||(this.context.initTypeUser("groupUser",[]),this.context.initTypeList("groupList","checkedGroup",this.state.groupList))},this.state={postList:[],deptList:[],groupList:[],clusterList:[],classList:[],contextData:{breadNav:[this.props.defaultBreadNav],checkOne:this.checkOne,checkAll:this.checkAll,nextLevel:this.nextLevel,changeLevel:this.changeLevel},checkedCount:0,listType:"".concat(this.props.type,"List"),checkedListType:"checked".concat(this.props.type.charAt(0).toUpperCase()).concat(this.props.type.substr(1)),checkedUserType:"".concat(this.props.type,"User"),isSearch:!1,searchResult:[],loadDept:!1,loadUser:!1,cacheId:u.cacheId}}componentDidMount(){this.props.type!=="group"?this.props.type==="dept"?this.getDeptList("1").then(g=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{breadNav:[{value:g.id,label:g.department_name,sourceType:g.source_type,authorized:g.authorized}]})}),this.getDeptUserList("1")}):this.getPostList("1"):this.getGroupList(1),this.props.type==="cluster"&&this.getClusterList(),this.props.type==="class"&&this.getClassList()}render(){return a().createElement(q.Provider,{value:this.state.contextData},a().createElement("div",{className:"org-display-container org-display-dept"},a().createElement(Ze,null),this.props.type==="dept"&&(this.state.loadDept||this.state.loadUser)?a().createElement("div",{className:"dept-loading"},a().createElement(ee.Z,null)):null,a().createElement(Qe,{dataTypeKey:this.props.type,disableHidden:this.props.disableHidden,scrollFlag:this.props.scrollFlag})))}}we.contextType=ye;var Ze=(0,ke.l)(q,We),Qe=(0,ke.l)(q,Ie);we.defaultProps={defaultBreadNav:{value:"",label:"\u9177\u6E32\u79D1\u6280"},queryType:1,type:"dept",filterAuthOpen:!1,disableHidden:!1,scrollFlag:!1};var Oe=we,vt=r(57663),Et=r(71577),pe=r(54549);class o extends a().Component{constructor(){super(...arguments);this.removeItem=(g,u,t,s)=>{g.preventDefault(),u.isChecked=!1,s==="user"?this.context.removeCheckedUser(u):this.context.checkListOne(u,t,"".concat(s,"List"))},this.displayName=(g,u)=>{var t={user:"userName",dept:"departmentName"}[g]||"",s={user:u.unionid||u.user_id||u.userId,dept:u.id}[g]||u.id;return a().createElement(Ee.Z,{value:s,name:u.name,type:u.source_type||u.sourceType,dataType:t})},this.displayItem=g=>{var u=this.context,t=u.hidePosts,s=u.showUserCount,h="checked".concat(g.charAt(0).toUpperCase()).concat(g.substr(1)),l=this.context[h].map(e=>e.isChecked&&e.authorized!=="false"?a().createElement(Me.Z,{key:e.id,placement:"top",title:e.all_name||"",getPopupContainer:()=>document.querySelector(".checked-display-container")},a().createElement("div",{className:"display-item",key:e.id},this.displayName(g,e),g==="user"||t&&g==="post"?"":s&&e.userCount>-1?"(".concat(e.userCount,")"):"",e.reserve?null:a().createElement("span",{className:"display-item-close",onClick:f=>this.removeItem(f,e,h,g)},a().createElement(pe.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))):null);return l},this.handleClearSelected=()=>{this.context.clearSelectedAll()}}render(){var g=this.props.t,u=["dept","group","post","user","cluster","class"].map(t=>this.displayItem(t));return a().createElement("div",{className:"checked-display-container"},a().createElement("div",{className:"checked-display-container-header"},a().createElement("span",null,g("orgDialog.selected"),":"),a().createElement(Et.Z,{type:"link",onClick:this.handleClearSelected},g("orgDialog.clearAll"))),u)}}o.contextType=ye;var c=(0,z.Z)()(o),i=r(67222),n=r(6793),p=_.Z.Search;class v extends a().Component{constructor(g){var u;super(g);u=this,this.onChange=t=>{var s=this.props.appType,h=localStorage.getItem("qyWechatBook");if(t.preventDefault(),this.setState({value:t.target.value}),!(!t.target.value&&!this.props.showCancel)&&!this.props.disableChange){var l=s==="wx_app"&&h==="true";!(0,b.eY)("ORG_DIALOG_SEARCH")||l||(0,n.Ds)(this.debounceChange,500)()}},this.handleSearch=(t,s)=>{s.preventDefault(),!(!t&&!this.props.showCancel)&&this.extendReturn(t)},this.debounceChange=()=>{this.extendReturn(this.state.value)},this.extendReturn=function(){var t=(0,j.Z)(S().mark(function s(h){var l,e,f,T,w,X,x,se,ae;return S().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(l=u.props,e=l.appType,f=l.selectType,T=l.appId,w=localStorage.getItem("qyWechatBook"),X="",x=e==="wx_app"&&w==="true"&&T==="9005",!(h&&f==="user"&&x)){$.next=17;break}return $.prev=5,$.next=8,(0,i.F_)(h);case 8:se=$.sent,ae=se.data,ae.success&&(X=ae.data),$.next=17;break;case 13:$.prev=13,$.t0=$.catch(5),console.error($.t0),X="";case 17:u.props.onSearch(h,X);case 18:case"end":return $.stop()}},s,null,[[5,13]])}));return function(s){return t.apply(this,arguments)}}(),this.state={value:""}}render(){var g=this.props,u=g.t,t=g.selectType;return a().createElement("div",{className:"top-search"},a().createElement(p,{placeholder:u(t==="user"?"component.searchStudent":t==="dept"?"component.searchDepartment":t==="post"?"component.searchPost":t==="cluster"?"component.searchCluster":t==="class"?"component.searchClass":"setting.searchGroup"),value:this.state.value,onSearch:this.handleSearch,allowClear:!0,onChange:this.onChange}))}}var C=(0,Xe.$j)(L=>({appType:L.user.appType,appId:L.user.appId}))((0,z.Z)()(v)),P=r(87312);class I extends D.Component{constructor(){super(...arguments);this.checkedAll=(g,u)=>{this.props.checkedAll(u)},this.getIsCheckedAll=()=>{var g=this.props.list,u=[].concat(g);if(u.length===0)return!1;var t=u.findIndex(s=>!s.isChecked);return t===-1},this.checkUser=(g,u)=>{u.isChecked=!u.isChecked,this.context.checkUserOne(u,"checkedUser")},this.checkSingleUser=(g,u)=>{u.isChecked=!0,this.context.checkUserOne(u,"checkedUser")},this.checkDept=(g,u)=>{u.isChecked=!u.isChecked,this.context.checkListOne(u,"checkedDept","deptList")},this.checkPost=(g,u)=>{u.isChecked=!u.isChecked,this.context.checkListOne(u,"checkedPost","postList")},this.checkGroup=(g,u)=>{u.isChecked=!u.isChecked,this.context.checkListOne(u,"checkedGroup","groupList")},this.checkedCluster=(g,u)=>{u.isChecked=!u.isChecked,this.context.checkListOne(u,"checkedCluster","clusterList")}}renderList(){var g=this.props,u=g.userListType,t=g.list,s=g.t,h=g.isSingle,l=g.hidePosts;return u==="user"&&!h?t.map(e=>a().createElement("div",{className:"search-result-item",key:e.id,onClick:f=>{this.checkUser(f,e)}},a().createElement(Ne.Z,{checked:e.isChecked},a().createElement($e,{cardInfo:e},a().createElement("span",{className:"user-names"},a().createElement(Ee.Z,{dataType:"userName",value:e.user_id,name:e.user_name,type:e.source_type}))),e.department_names&&e.department_names.length>0?a().createElement("span",{className:"user-dept"},a().createElement(He.Z,{sourceType:e.source_type,list:e.leaf_department_ids,nameList:e.department_names})):null))):u==="user"&&h?t.map(e=>a().createElement("div",{className:"search-result-item",key:e.id,onClick:f=>{this.checkSingleUser(f,e)}},a().createElement("div",{className:"user-name"},a().createElement($e,{cardInfo:e},a().createElement(Ee.Z,{dataType:"userName",value:e.user_id,name:e.user_name,type:e.source_type}))),e.department_names&&e.department_names.length>0?a().createElement("span",{className:"user-name-dept"},a().createElement(He.Z,{sourceType:e.source_type,list:e.leaf_department_ids,nameList:e.department_names})):null)):u==="dept"?t.map(e=>a().createElement("div",{className:"search-result-dept-item",key:e.id,onClick:f=>{this.checkDept(f,e)}},a().createElement(Ne.Z,{checked:e.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},a().createElement(Ee.Z,{dataType:"departmentName",value:e.id,name:e.department_name,type:e.source_type})),e.path&&e.path.length>0?a().createElement(Me.Z,{title:e.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement(He.Z,{list:e.department_infos||[],displayAll:!0}))):null)),a().createElement("div",{className:"department-right"},"(",e.userCount,s("common.userUnit"),")"))):u==="post"?t.map(e=>a().createElement("div",{className:"search-result-dept-item",key:e.id,onClick:f=>{this.checkPost(f,e)}},a().createElement(Ne.Z,{checked:e.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},e.name),e.path&&e.path.length>0?a().createElement(Me.Z,{title:e.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement("span",null,e.path.join(">")))):null)),!l&&a().createElement("div",{className:"department-right"},"(",e.userCount,s("common.userUnit"),")"))):u==="group"?t.map(e=>a().createElement("div",{className:"search-result-dept-item",key:e.id,onClick:f=>{this.checkGroup(f,e)}},a().createElement(Ne.Z,{checked:e.isChecked,className:"department-left"},a().createElement("div",{className:"department-left-department"},a().createElement("div",{className:"user-name"},e.name),e.path&&e.path.length>0?a().createElement(Me.Z,{title:e.path.join(">"),mouseEnterDelay:.8},a().createElement("span",{className:"user-name-dept"},a().createElement("span",null,e.path.join(">")))):null)),a().createElement("div",{className:"department-right"},"(",e.userCount,s("common.userUnit"),")"))):u==="cluster"?t.map(e=>a().createElement("div",{className:"search-result-dept-item",key:e.id,onClick:f=>{this.checkedCluster(f,e)}},a().createElement(Ne.Z,{checked:e.isChecked,className:"department-left"},a().createElement("span",{className:"user-name"},e.name)),a().createElement("div",{className:"department-right"},"(",e.userCount,s("common.userUnit"),")"))):null}render(){var g=this.props,u=g.t,t=g.isSingle,s=this.getIsCheckedAll(),h=a().createElement("div",{className:"search-result-all"},a().createElement(Ne.Z,{checked:s,onClick:l=>this.checkedAll(l,!s)},u("common.all")));return a().createElement("div",{className:"search-result-container more-height"},this.props.list.length>0?a().createElement(a().Fragment,null,!t&&h,this.renderList()):a().createElement(P.Z,{tipText:u("component.searchUserEmpty")}))}}I.contextType=ye,I.defaultProps={list:[]};var O=(0,z.Z)()(I),Z=r(18329),M=r(65202),k=r(91648),N=R.Z.TabPane,te=d.Z.Option,ue={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0 20px"},maskClosable:!1};class ge extends a().Component{constructor(g){var u;super(g);u=this,this.onCancel=()=>{var t=this.props.onCancel;this.setState({showCancel:!1}),t&&this.props.onCancel()},this.onOk=()=>{var t=this.props.onOk,s=this.state.contextData;this.setState({showCancel:!1});var h=0;if(t){var l=[];s.checkedDept.map(x=>(h+=x.isChecked?x.user_count:0,x.isChecked&&x.authorized!=="false"?l.push((0,y.Z)((0,y.Z)({},x),{},{renderType:"dept"})):null));var e=[];s.checkedPost.map(x=>(h+=x.isChecked?x.user_count:0,x.isChecked?e.push((0,y.Z)((0,y.Z)({},x),{},{renderType:"post"})):null));var f=[];s.checkedGroup.map(x=>(h+=x.isChecked?x.user_count:0,x.isChecked?f.push((0,y.Z)((0,y.Z)({},x),{},{renderType:"group"})):null));var T=[];s.checkedUser.map(x=>{if(!x.reserve)return h+=x.isChecked?1:0,x.isChecked?T.push((0,y.Z)((0,y.Z)({},x),{},{renderType:"user"})):null});var w=[];s.checkedCluster.map(x=>{if(!x.reserve)return h+=x.isChecked?1:0,x.isChecked?w.push((0,y.Z)((0,y.Z)({},x),{},{renderType:"cluster"})):null});var X=[];if(s.checkedClass.map(x=>{if(!x.reserve)return h+=x.isChecked?1:0,x.isChecked?X.push((0,y.Z)((0,y.Z)({},x),{},{renderType:"class"})):null}),h>this.props.maxUserCount){J.default.warn(this.props.beyondLimitTip);return}t({dept:l,post:e,group:f,user:T,cluster:w,classes:X})}},this.getListParentId=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];s.forEach(se=>{se.isChecked=!0,se.parentId=[""],se.userCount=se.userCount||se.user_count||0});var T=t.map(se=>se.id),w=l.map(se=>se.id);if(T||w){var X=re.ZP.OrgDialog.getDeptParent(),x={query_type:1,dept_ids:T,user_ids:w};Ae.WY.post({url:X,data:(0,y.Z)({},x)}).then(se=>{var ae=se.data.data;t.forEach(ne=>{ne.isChecked=!0;var $=ae.find(de=>de.id===ne.id)||{path:[]};ne.parentId=$.path[0]?$.path[0].split("/").slice(1):[],ne.userCount=$.user_count||ne.userCount||ne.user_count||0}),h.forEach(ne=>{ne.isChecked=!0;var $=ae.find(de=>de.id===ne.id)||{path:[]};ne.parentId=$.path[0]?$.path[0].split("/").slice(1):[],ne.userCount=ne.userCount||ne.user_count||0}),l.forEach(ne=>{ne.isChecked=!0;var $=[];ae.forEach(de=>{de.id===ne.id&&de.path.map(xe=>{$.push(...xe.split("/").slice(1))})}),ne.parentId=Array.from(new Set($))}),e.forEach(ne=>{ne.isChecked=!0;var $=ae.find(de=>de.id===ne.id)||{path:[]};ne.parentId=$.path[0]?$.path[0].split("/").slice(1):[],ne.userCount=ne.userCount||ne.user_count||0}),f.forEach(ne=>{ne.isChecked=!0;var $=ae.find(de=>de.id===ne.id)||{path:[]};ne.parentId=$.path[0]?$.path[0].split("/").slice(1):[],ne.userCount=ne.userCount||ne.user_count||0}),u.setState({contextData:(0,y.Z)((0,y.Z)({},u.state.contextData),{},{checkedDept:t,checkedGroup:s,checkedPost:h,checkedUser:l,checkedCluster:e,checkedClass:f})})})}else s.length>0?u.setState({contextData:(0,y.Z)((0,y.Z)({},u.state.contextData),{},{checkedGroup:s})}):u.setState({contextData:(0,y.Z)((0,y.Z)({},u.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[]})})},this.initHidePostsStatus=t=>{var s=this.state.contextData;this.setState({contextData:(0,y.Z)((0,y.Z)({},s),{},{hidePosts:t})})},this.initTypeList=(t,s,h)=>{h.forEach(l=>{var e=this.findItemIndex(l.id,s);e===-1?l.isChecked=!1:l.isChecked=this.state.contextData[s][e].isChecked}),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[t]:h})})},this.initTypeUser=(t,s)=>{var h=s||[...this.state.contextData[t]],l=this.props.reserveUser;h.forEach(e=>{var f=this.findItemIndex(e.id,"checkedUser");l.findIndex(T=>T.id===e.id)!==-1&&(e.reserve=!0),f===-1?e.isChecked=!1:e.isChecked=this.state.contextData.checkedUser[f].isChecked}),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[t]:h})})},this.toggleDisplayItem=(t,s)=>{var h=this.findItemIndex(t.id,s);return h===-1?s.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[s]:this.checkListParentId(s,t),checkedUser:t.isChecked?this.checkParentId(this.state.contextData.checkedUser,t.id):this.state.contextData.checkedUser}:{[s]:[...this.state.contextData[s],t]}:s.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[s]:this.checkListParentId(s,t),checkedUser:t.isChecked?this.checkParentId(this.state.contextData.checkedUser,t.id):this.state.contextData.checkedUser}:{checkedUser:this.getNewList(t,"checkedUser",!0),[s]:this.getNewList(t,s)}},this.toggleDisplayList=(t,s,h,l,e,f,T)=>{this.deleteAllName(s),this.deleteAllName(l),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[t]:s,[h]:l,[e]:f,checkedUser:T})})},this.deleteAllName=t=>{t.map(s=>(s.all_name&&typeof s.all_name=="object"&&delete s.all_name,s))},this.checkUserOne=(t,s)=>{this.props.single?this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedUser:[t],[s]:s==="checkedUser"?[t]:this.getSingleUserList(t,s)})}):this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),this.toggleDisplayItem(t,s))})},this.dealAuthorizedFalseChecked=function(){var t=(0,j.Z)(S().mark(function s(h){var l,e,f,T,w,X,x,se,ae;return S().wrap(function($){for(;;)switch($.prev=$.next){case 0:return l=u.state.contextData,e=l.cacheId,f=l.checkedDept,T=l.checkedUser,w={checkedDept:[],checkedUser:[]},$.prev=2,$.next=5,nt({departmentId:h.id,cache_id:e});case 5:X=$.sent,x=X.data,se=x.departments,ae=x.users,se.push(h),se.map(de=>(de.isChecked=!0,de.name=de.department_name,de.parentId=de.parent_ids.split("/"),de.parentAuthorize=!1,de.userCount=de.user_count,de)),ae.map(de=>(de.isChecked=!0,de.name=de.user_name,de.parentAuthorize=!1,u.toggleDisplayItem(de,"deptUser"),de)),w=(0,y.Z)((0,y.Z)({},w),{},{checkedUser:oe()(ae,T,"id"),checkedDept:oe()(se,f,"id")}),$.next=16;break;case 13:$.prev=13,$.t0=$.catch(2),console.error("\u83B7\u53D6\u90E8\u95E8\u7BA1\u8F96\u8303\u56F4\u51FA\u9519",$.t0);case 16:return $.abrupt("return",w);case 17:case"end":return $.stop()}},s,null,[[2,13]])}));return function(s){return t.apply(this,arguments)}}(),this.dealAuthorizedFalseUnChecked=t=>{var s=this.state.contextData,h=s.checkedDept,l=s.checkedUser,e=s.deptUser,f=[],T=h.filter(X=>X.parent_ids.split("/").indexOf(t.id)===-1),w=l.filter(X=>{var x=X.department_ids.indexOf(t.id)===-1;return x||f.push(X.id),x});return{checkedDept:T,checkedUser:w,deptUser:f.length>0?e.map(X=>(f.indexOf(X.id)>-1&&(X.isChecked=!1),X)):e}},this.checkListOne=function(){var t=(0,j.Z)(S().mark(function s(h,l,e){var f;return S().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(f={checkedDept:[],checkedUser:[]},!(h.authorized==="false"&&l==="checkedDept")){w.next=12;break}if(!h.isChecked){w.next=8;break}return w.next=5,u.dealAuthorizedFalseChecked(h);case 5:w.t0=w.sent,w.next=9;break;case 8:w.t0=u.dealAuthorizedFalseUnChecked(h);case 9:f=w.t0,w.next=14;break;case 12:h.parentAuthorize===!1&&h.isChecked===!1&&u.unCheckedParentDept(h,l),f=(0,y.Z)({[e]:u.getNewList(h,e,!1)},u.toggleDisplayItem(h,l));case 14:u.setState({contextData:(0,y.Z)((0,y.Z)({},u.state.contextData),f)});case 15:case"end":return w.stop()}},s)}));return function(s,h,l){return t.apply(this,arguments)}}(),this.removeCheckedUser=t=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedUser:this.getNewList(t,"checkedUser"),deptUser:this.getNewList(t,"deptUser"),postUser:this.getNewList(t,"postUser"),groupUser:this.getNewList(t,"groupUser"),searchResult:this.getNewList(t,"searchResult")})})},this.unCheckedParentDept=(t,s)=>{var h=this.state.contextData.checkedDept,l=h.filter(T=>T.authorized==="false"&&s==="checkedUser"?t.department_ids.indexOf(T.id)>-1:s==="checkedDept"?t.parentId.indexOf(T.id)>-1:!1),e=(0,W.Z)(l,1),f=e[0];f&&(f.isChecked=!1,this.toggleDisplayItem(f,"checkedDept"),this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedDept:l})}))},this.checkListParentId=(t,s)=>{var h=[...this.state.contextData[t]],l=this.findItemIndex(s.id,t);return h.forEach(e=>{e.id!==s.id&&e.parentId.indexOf("".concat(s.id))!==-1?e.isChecked=!1:e.id===s.id&&(e.isChecked=s.isChecked)}),l===-1&&h.push(s),h},this.checkParentId=(t,s)=>{var h=[];return t.forEach(l=>{var e=typeof l.parentId!="undefined"?l.parentId:l.department_ids||[];e.indexOf(s)===-1&&h.push(l)}),h},this.getNewList=(t,s,h)=>{var l=[...this.state.contextData[s]],e=this.findItemIndex(t.id,s);return e===-1?h&&l.push(t):l[e].isChecked=t.isChecked,l},this.getSingleUserList=(t,s)=>{var h=[...this.state.contextData[s]];return h.forEach(l=>{l.id===t.id?l.isChecked=t.isChecked:l.isChecked=!1}),h},this.findItemIndex=(t,s)=>this.state.contextData[s].findIndex(h=>h.id===t),this.clearTabPanelList=(t,s)=>{this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[t]:[],[s]:[]})})},this.getTabs=()=>{var t=[],s,h,l=this.props,e=l.t,f=l.filterAuthOpen,T=l.disableHidden,w=l.scrollFlag,X=this.state.contextData,x=X.canUseGroups,se=X.canUseClass;return this.state.displayType.forEach(ae=>{switch(ae){case"dept":t.push({label:e("component.orgDialogDeptLabel"),key:"dept",defaultBreadNav:{value:"",label:"",sourceType:""},queryType:1});break;case"group":t.push({label:e("component.orgDialogGroupLabel"),key:"group",queryType:2,defaultBreadNav:{value:"",label:e("component.userGroup")}});break;case"post":t.push({label:e("component.orgDialogPostLabel"),key:"post",defaultBreadNav:{value:"1",label:e("common.post")},queryType:3});break;case"cluster":x&&t.push({label:e("component.orgDialogClusterLabel"),key:"cluster",defaultBreadNav:{value:"",label:""},queryType:4});break;case"class":se&&t.push({label:e("component.orgDialogClassLabel"),key:"class",defaultBreadNav:{value:"",label:""},queryType:5});break}}),t.length===1?h=a().createElement(Oe,{defaultBreadNav:t[0].defaultBreadNav,queryType:t[0].queryType,type:t[0].key,filterAuthOpen:f,disableHidden:T,scrollFlag:w}):(s=t.map(ae=>a().createElement(N,{tab:ae.label,key:ae.key},a().createElement(Oe,{defaultBreadNav:ae.defaultBreadNav,queryType:ae.queryType,type:ae.key,filterAuthOpen:f,disableHidden:T,scrollFlag:w}))),h=a().createElement(R.Z,null,s)),h},this.handleSearch=(t,s)=>{var h=this.state.selectType;h==="user"?this.getUserList(t,s):h==="dept"?this.getDeptList(t):h==="post"?this.getPostList(t):h==="cluster"?this.getClusterResult(t):h==="class"?this.getClassResult(t):this.getGroupList(t)},this.getClusterResult=t=>{var s=re.ZP.OrgDialog.getClusterList(),h={keyword:t};Ae.WY.get({url:s,params:h}).then(l=>{this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedCluster",l.data.data.map(e=>({name:e.name,userCount:e.user_count,id:e.id,parentId:[""]})))})},this.getUserList=(t,s)=>{var h=re.ZP.OrgDialog.getUserByName(),l={user_name:s===""?t:"",filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType,userIds:s};Ae.WY.get({url:h,params:l}).then(e=>{e.data.users&&e.data.users.forEach(f=>{f.name=f.user_name}),this.setState({showCancel:!0}),this.initTypeUser("searchResult",e.data.users||[])})},this.getDeptList=t=>{var s=re.ZP.Organization.queryDept(),h={department_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ae.WY.get({url:s,params:h}).then(l=>{l.data.departments&&l.data.departments.forEach(e=>{e.name=e.department_name,e.parentId=e.parent_ids?e.parent_ids.split("/"):[],e.userCount=e.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedDept",l.data.departments||[])})},this.getPostList=t=>{var s=re.ZP.Organization.addPost(),h={post_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ae.WY.get({url:s,params:h}).then(l=>{l.data.posts&&l.data.posts.forEach(e=>{e.name=e.post_name,e.parentId=e.parent_id?e.parent_id.split("/"):[],e.userCount=e.user_count}),this.setState({hidePosts:l.data.hide_posts,showCancel:!0}),this.initTypeList("searchResult","checkedPost",l.data.posts||[])})},this.getGroupList=t=>{var s=re.ZP.Organization.getGroupList(),h={group_name:t,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Ae.WY.get({url:s,params:h}).then(l=>{l.data.groups&&l.data.groups.forEach(e=>{e.name=e.group_name,e.parentId=e.parent_id?e.parent_id.split("/"):[],e.userCount=e.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedGroup",l.data.groups||[])})},this.checkAllResult=t=>{var s=this.state,h=s.selectType,l=s.contextData,e="checked".concat(h.charAt(0).toUpperCase()).concat(h.substr(1)),f=[...l[e]],T=l.searchResult.map(X=>{X.isChecked=t;var x=f.findIndex(se=>se.id===X.id);return x!==-1?f[x].isChecked=t:f.push(X),X}),w=f;this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{[e]:w,searchResult:T})})},this.clearSelectedAll=()=>{var t=this.state.contextData,s=t.checkedDept,h=t.checkedGroup,l=t.checkedPost,e=t.checkedUser,f=t.checkedCluster,T=t.checkedClass,w=t.deptList,X=t.groupList,x=t.postList,se=t.clusterList,ae=t.classList,ne=t.deptUser,$=t.groupUser,de=t.postUser,xe=Fe=>(Fe.forEach(je=>{je.isChecked=!1}),Fe);this.setState({contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],deptList:s.length>0?xe(w):w,groupList:h.length>0?xe(X):X,postList:l.length>0?xe(x):x,clusterList:f.length>0?xe(se):se,classList:T.length>0?xe(ae):ae,deptUser:e.length>0?xe(ne):ne,groupUser:e.length>0?xe($):$,postUser:e.length>0?xe(de):de})})},this.handleCancel=()=>{this.setState({showCancel:!1})},this.handleSelectChange=t=>{this.setState({selectType:t,contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{searchResult:[]})})},this.state={title:g.title||g.t("component.chooseAssignScope"),displayType:g.displayType?g.displayType:["dept"],selectType:"user",showCancel:!1,hidePosts:!1,contextData:{showUserCount:g.showUserCount,deptList:[],groupList:[],postList:[],clusterList:[],classList:[],deptUser:[],groupUser:[],postUser:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[],onlyUser:g.onlyUser,onlyDept:g.onlyDept,onlyPost:g.onlyPost,canUseGroups:g.useGroups,canUseClass:g.useClass,single:g.single,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,userType:this.props.userType,initTypeList:this.initTypeList,initTypeUser:this.initTypeUser,toggleDisplayItem:this.toggleDisplayItem,toggleDisplayList:this.toggleDisplayList,checkListOne:this.checkListOne,checkUserOne:this.checkUserOne,removeCheckedUser:this.removeCheckedUser,clearTabPanelList:this.clearTabPanelList,maxDeptUserCount:g.maxDeptUserCount,hidePosts:!1,initHidePostsStatus:this.initHidePostsStatus,cacheId:(0,k.Z)(),clearSelectedAll:this.clearSelectedAll}}}componentDidUpdate(g){if(g.visible!==this.props.visible&&this.props.visible){var u=this.props.initData,t=u.dept,s=u.group,h=u.post,l=u.user,e=u.cluster,f=u.classes;console.warn(l,"user");var T=this.props,w=T.reserveUser,X=T.t,x=T.onlyDept,se=T.onlyPost;w.forEach(ae=>{ae.reserve=!0}),this.setState({title:this.props.title||X("component.chooseAssignScope"),displayType:this.props.displayType?this.props.displayType:["dept"],selectType:se?"post":x?"dept":"user",contextData:(0,y.Z)((0,y.Z)({},this.state.contextData),{},{deptList:[],groupList:[],postList:[],deptUser:[],clusterList:[],classList:[],groupUser:[],postUser:[],searchResult:[],onlyUser:this.props.onlyUser,onlyDept:this.props.onlyDept,canUseGroups:this.props.useGroups,canUseClass:this.props.useClass,onlyPost:this.props.onlyPost,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,cacheId:(0,k.Z)()})},()=>{this.getListParentId(t,s,h,l.concat(w),e,f)})}}componentWillUnmount(){ht({cacheId:this.state.contextData.cacheId}).then(()=>{console.warn("\u6E05\u9664\u7F13\u5B58\u6210\u529F")}).catch(g=>{console.error("\u6E05\u9664\u7F13\u5B58\u5931\u8D25",g)})}render(){var g=this.getTabs(),u=this.props,t=u.t,s=u.onlyUser,h=u.onlyDept,l=u.onlyPost,e=u.displayType,f=u.useGroups,T=u.useClass,w=u.onlyChoosePost,X=(0,M.p)(),x=this.state,se=x.showCancel,ae=x.selectType,ne=x.hidePosts;return ue.okText=this.props.okText||t("common.ok"),a().createElement(Z.ZP,(0,F.Z)({},ue,this.props.modalConfig,{visible:this.props.visible,title:this.state.title,wrapClassName:[this.props.className,"cl-org-modal"],onCancel:this.onCancel,onOk:this.onOk}),a().createElement(ye.Provider,{value:this.state.contextData},a().createElement("div",{className:"cl-org"},a().createElement("div",{className:"cl-org-left"},this.props.visible?a().createElement("div",{className:"cl-org-left__top"},a().createElement(_.Z.Group,{compact:!0},a().createElement(d.Z,{className:"cl-org-left__top__select",value:ae,style:{width:80},onChange:this.handleSelectChange},a().createElement(te,{value:"user",disabled:h||l||w},t("authGroup.userLabel")),a().createElement(te,{value:"dept",disabled:s||w},t("setting.deptLabel")),a().createElement(te,{value:"post",disabled:!l&&(h||s)||e.length===1},t("common.post")),a().createElement(te,{value:"group",disabled:h||s||e.length===1||w},t("component.userGroup")),f?a().createElement(te,{value:"cluster"},t("component.useCluster")):null,T?a().createElement(te,{value:"class"},t("component.useClass")):null),a().createElement(C,{selectType:ae,onSearch:this.handleSearch,showCancel:se,disableChange:this.props.disableChange})),se?a().createElement("div",{className:"cl-org-left__top__cancel",onClick:this.handleCancel,style:{color:X}},t("common.cancel")):null):null,se?a().createElement(O,{isSingle:this.props.single,list:this.state.contextData.searchResult,userListType:ae,checkedAll:this.checkAllResult,hidePosts:ne}):g),a().createElement("div",{className:"cl-org-right"},a().createElement(c,null)))))}}ge.defaultProps={visible:!0,showUserCount:!0,displayType:["dept","group","post","cluster","class"],initData:{dept:[],post:[],group:[],user:[],cluster:[],classes:[]},reserveUser:[],onlyUser:!1,onlyDept:!1,onlyPost:!1,useGroups:!1,useClass:!1,asyncDeptTree:!0,userType:"active",single:!1,maxUserCount:Infinity,filterAuthOpen:!1,disableHidden:!1,beyondLimitTip:"",onOk:()=>{},modalConfig:{},maxDeptUserCount:0,onlyChoosePost:!1,scrollFlag:!1};var Pe=(0,z.Z)()(ge)},99891:function(be,he,r){"use strict";var F=r(12924),m=r.n(F),_=r(28216),W=r(91768),j=r(37055),Q=r(10237),J=r(60667);class y extends m().PureComponent{constructor(U){super(U);this.getWaterMarkText=R=>{var V=this.props.userInfo,S=V.jobNumber,D=localStorage.getItem("waterMarkPostName"),a=[],z=R.find(oe=>oe.type==="content_setting"),B=R.find(oe=>oe.type==="content_custom");return z.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),B.param.checked==="true"&&B.param.comment[0]!==""&&this.setState({commentText:B.param.comment[0]}),z.param.comment.indexOf("position")!==-1&&D&&D!==""&&a.push("".concat(D)),z.param.comment.indexOf("jobnumber")!==-1&&S&&S!==""&&a.push("".concat(S)),a.join("-")},this.getWaterMarkApplication=R=>{var V=this.props.scenes,S=R.find(D=>D.type==="application_scenario");S.param.comment.indexOf(V)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=R=>{var V=R.find(S=>S.type==="dispersive");this.setState({isDispersive:V.param.checked==="true"})},this.getDynamicSet=()=>{var R=j.ZP.advancedSetting.dynamicWaterMarkNew(),V={access_token:window.localStorage.getItem("token")};Q.WY.get({url:R,params:V}).then(S=>{var D=JSON.parse(S.data.actions);this.setState({waterMarkText:this.getWaterMarkText(D),actions:D}),this.getWaterMarkApplication(D),this.getWaterIsDispersive(D)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var U=localStorage.getItem("waterMarkPostName");U===""||U===null?this.getPostName():this.getDynamicSet()}getPostName(){var U=j.ZP.advancedSetting.getPostName();Q.WY.get({url:U}).then(R=>{localStorage.setItem("waterMarkPostName",R.data.post_names[0]||""),this.getDynamicSet()})}render(){var U=this.state,R=U.showWaterMark,V=U.waterMarkCount,S=U.isUserName,D=U.isDispersive,a=U.waterMarkText,z=U.actions,B=U.commentText,oe=this.props.userInfo,ie=oe.name,ee=oe.unionid,De=oe.sourceType;return m().createElement("div",{className:"common-watermark"},R&&new Array(V).fill(0).map((ce,ke)=>m().createElement("div",{key:ke,className:"common-watermark-item ".concat(D?"isDispersive":"")},m().createElement("span",{className:"common-watermark-item-content"},B!==""&&m().createElement("span",{className:"item-part"},B),S&&m().createElement("span",null,B!==""&&m().createElement("span",null,"-"),m().createElement(J.Z,{dataType:"userName",value:ee,name:ie,type:De})),m().createElement("span",{className:"item-part"},(S||B!=="")&&a!==""&&m().createElement("span",null,"-"),a)))))}}var A=d=>({userInfo:d.user});he.Z=(0,_.$j)(A)((0,W.Z)()(y))},80430:function(be,he,r){"use strict";var F=r(12924),m=r.n(F),_=r(60667),W=j=>{var Q=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},V=R.department_ids.split("/"),S=R.department_names.split("/"),D=V.map((a,z)=>m().createElement(_.Z,{key:a,dataType:"departmentName",value:a,name:S[z],type:R.source_type}));return m().createElement(m().Fragment,null,D.map((a,z)=>m().createElement("span",{key:a},a,z===S.length-1?"":"/")))},J=U=>m().createElement(_.Z,{dataType:"departmentName",value:U.department_id,name:U.department_name,type:U.source_type}),y=()=>{var U=j.list,R=U===void 0?[]:U,V=j.isBlock;if(!R.length)return null;var S=R.map(D=>Q(D));return S.length&&S.length>1?m().createElement(m().Fragment,null,S.map((D,a)=>V?m().createElement("div",{key:D},D):m().createElement("span",{key:D},D,a===S.length-1?"":"\uFF0C"))):m().createElement(m().Fragment,null,S[0]||"")},A=()=>{var U=j.list,R=j.nameList,V=j.sourceType,S=j.isBlock,D=U.map((a,z)=>J({department_id:a,department_name:R[z],source_type:V}));return m().createElement(m().Fragment,null,D.map((a,z)=>S?m().createElement("div",{key:a},a):m().createElement("span",{key:a},a,z===D.length-1?"":"\uFF0C")))},d=()=>j.displayAll?y():A();return d()};W.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},he.Z=W},60667:function(be,he,r){"use strict";r.d(he,{Z:function(){return y}});var F=r(33565),m=r(12924),_=r.n(m),W=r(28216);function j(A){var d=A.type,U=A.openid,R=A.from,V=(0,m.useRef)(null);return(0,m.useLayoutEffect)(()=>{R==="vue"?window.parent.WWOpenData.bind(V.current):WWOpenData.bind(V.current)}),_().createElement("ww-open-data",{ref:V,type:d,openid:U})}var Q=A=>{var d=A.wxWorkApiFlag,U=A.appType,R=A.from,V=(0,m.useState)(!1),S=(0,F.Z)(V,2),D=S[0],a=S[1];(0,m.useEffect)(()=>{var oe=localStorage.getItem("qyWechatBook");(U!=="wx_app"||d||oe==="false"||R==="vue"||R==="taro")&&a(!0)},[d,U,R]);var z=(0,m.useCallback)(()=>{var oe=A.type,ie=A.value,ee=A.name,De=ee===void 0?"":ee;switch(console.warn(A,"props"),oe){case"wx_sync":{var ce=A.dataType;return ie?_().createElement(j,{from:R,type:ce,openid:ie}):De}default:return De}},[A]),B=()=>{var oe=A.name,ie=A.dataType,ee=localStorage.getItem("qyWechatBook");if(ie===""||ee==="false")return oe;if(R==="vue"||R==="taro")return z();switch(A.appType){case"wx_app":return z();default:return oe}};return D?B():A.name};Q.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var J=A=>({appType:A.user.appType,wxWorkApiFlag:A.user.wxWorkApiFlag}),y=(0,W.$j)(J)(Q)},76466:function(be,he,r){"use strict";r.d(he,{Z:function(){return Et}});var F=r(20228),m=r(11382),_=r(57663),W=r(71577),j=r(62029),Q=r(57361),J=r(9754),y=r.n(J),A=r(12924),d=r.n(A),U=r(91512),R=r(68654),V=r(91768),S=r(4412),D=r.n(S);class a extends d().Component{render(){var o=this.props.t;return d().createElement("div",{className:"net-preview"},d().createElement("div",{className:"net-preview-center"},d().createElement("img",{src:D(),alt:"picture"}),d().createElement("h2",null,o("localStorage.tip")),d().createElement("p",null,o("localStorage.banPreview"))))}}var z=(0,V.Z)()(a),B=r(88986),oe=r(34792),ie=r(48086),ee=r(28216),De=r(21594),ce=r(41225),ke=r(10237),re=(pe,o)=>(0,B.Z)({id:pe||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},o),H=re;class q extends A.Component{constructor(){super(...arguments);this.setupPlayer=o=>{var c=this.props,i=c.onVideoReady,n=i===void 0?()=>{}:i,p=c.playerConfig,v=c.contentType;o&&o==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,B.Z)((0,B.Z)({},p),{},{contentType:v==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:p.source,autoplay:p.autoplay,width:p.width,id:p.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:C=>{C.on("sourceloaded",P=>{var I=P.paramData,O=I.desc,Z=I.definition;C.getComponent("VideoQuality")&&C.getComponent("VideoQuality").setCurrentQuality(O,Z,p.id)}),C.on("ready",()=>{n()}),this.playerInstance=C,this.setPlayerConfig()}}))}}componentDidUpdate(o){o.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(o){this.player&&this.player.seek(o)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(o){this.player.setSpeed(o)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var o=this.props,c=o.onPlay,i=c===void 0?()=>{}:c,n=o.onTimeUpDate,p=n===void 0?()=>{}:n,v=o.onEnd,C=v===void 0?()=>{}:v,P=o.onPause,I=P===void 0?()=>{}:P,O=o.onError,Z=O===void 0?()=>{}:O,M=this.playerInstance;M.on("play",()=>{i()}),M.on("pause",()=>{I()}),M.on("timeupdate",k=>{p(k)}),M.on("ended",()=>{C()}),M.on("error",(0,Q.Z)(y().mark(function k(){return y().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:Z();case 1:case"end":return te.stop()}},k)})))}render(){var o=this.props.playerConfig;return d().createElement("div",{className:"common-video-player-container"},d().createElement("div",{id:o.id}))}}q.playerInstance=null,q.defaultProps={playerConfig:H(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var fe=q,ye=(pe,o)=>(0,B.Z)({id:pe||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},o),Ce=ye;class Te extends A.Component{constructor(){super(...arguments);this.setupPlayer=o=>{o&&o==="resetPlayer"&&this.player.dispose();var c=this.props,i=c.playerConfig,n=c.onVideoReady,p=n===void 0?()=>{}:n;this.player=new Aliplayer(i,v=>{v.on("sourceloaded",C=>{var P=C.paramData,I=P.desc,O=P.definition;v.getComponent("VideoQuality")&&v.getComponent("VideoQuality").setCurrentQuality(I,O,i.id)})}),this.player.on("ready",()=>{p()})},this.setPlayerConfig=()=>{var o=this.props,c=o.onPlay,i=c===void 0?()=>{}:c,n=o.onTimeUpDate,p=n===void 0?()=>{}:n,v=o.onEnd,C=v===void 0?()=>{}:v,P=o.onPause,I=P===void 0?()=>{}:P,O=o.onError,Z=O===void 0?()=>{}:O;this.player.on("play",()=>{i()}),this.player.on("pause",()=>{I()}),this.player.on("timeupdate",M=>{p(M)}),this.player.on("ended",()=>{C()}),this.player.on("error",(0,Q.Z)(y().mark(function M(){return y().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:Z();case 1:case"end":return N.stop()}},M)})))},this.getPlayerContent=o=>{this.playerContainer=o}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(o){o.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(o){this.player.seek(o)}exitFull(){var o=this.player.fullscreenService;o&&o.isFullScreen&&o.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var o=this.props.playerConfig;return d().createElement("div",{className:"common-video-player-container"},d().createElement("div",{id:o.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}Te.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:Ce()};var Ee=Te;class Re{constructor(o){this.hasCreated=!1,this.definition="",this.getQuality=o}createEl(o,c){var i=c._options&&c._options.language,n=c._el.id;this.isEn=i&&i==="en-us";var p=(0,De.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),v=(0,De.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),C=document.querySelector("#".concat(n," .prism-controlbar"));C.appendChild(p),o.appendChild(v)}setCurrentQuality(o,c,i){var n=document.querySelector("#".concat(i," .current-quality"));n.innerText=o,n.dataset.def=c,this.definition=c;var p=document.querySelector("#".concat(i," .quality-list")),v=p.querySelector(".current");v&&(v.className="");var C=p.querySelector('li[data-def="'.concat(c,'"]'));C&&(C.className="current")}created(o){this._urls=o._urls;var c=o._el.id,i=document.querySelector("#".concat(c," .current-quality")),n=document.querySelector("#".concat(c," .quality-list")),p=document.querySelector("#".concat(c," .quality-modal")),v=this._urls.map(I=>'<li data-def="'.concat(I.definition,'">').concat(I.desc,"</li>"));if(n.innerHTML=v.join(""),this.hasCreated==!1&&this.definition){var C=n.querySelector('li[data-def="'.concat(this.definition,'"]'));C.className="current"}this.hasCreated=!0;var P=null;i.onclick=()=>{n.style.display="block"},i.onmouseleave=()=>{P=setTimeout(()=>{n.style.display="none"},100)},n.onmouseenter=()=>{clearTimeout(P)},n.onmouseleave=()=>{n.style.display="none"},n.onclick=I=>{var O=I.target,Z=O.dataset.def,M=O.innerText;if(Z&&O.className!=="current"){var k=this._urls.find(N=>N.definition===Z);o.loadByUrl(k.Url,o.getCurrentTime(),!0,!0),this.setCurrentQuality(k.desc,k.definition,c),p.style.display="block",p.querySelector("span.current-quality-tag").innerText=k.desc}this.getQuality(Z,M)}}ready(o){var c=o._el.id,i=document.querySelector("#".concat(c," .quality-modal"));i.style.display="none";var n=document.querySelector("#".concat(c," .prism-setting-item.prism-setting-quality"));n&&n.classList.add("player-hidden")}}class We{createEl(o,c){var i=c._el.id,n=(0,De.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),p=document.querySelector("#".concat(i," .prism-controlbar"));p.appendChild(n)}ready(o){var c=o._el.id,i=document.querySelector("#".concat(c," .current-rate")),n=document.querySelector("#".concat(c," .rate-list")),p=null,v=document.querySelector("#".concat(c," .prism-setting-item.prism-setting-speed"));v&&v.classList.add("player-hidden"),i.onclick=()=>{n.style.display="block"},i.onmouseleave=()=>{p=setTimeout(()=>{n.style.display="none"},100)},n.onmouseenter=()=>{clearTimeout(p)},n.onmouseleave=()=>{n.style.display="none"},n.onclick=C=>{var P=C.target,I=P.dataset.rate;if(I){if(o.setSpeed(I),P.className!=="current"){var O=n.querySelector(".current");O&&(O.className=""),P.className="current"}n.style.display="none",i.innerText="".concat(I,"x")}}}}var Ve=r(69164),Ne=r(37055);function ze(pe){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=Ne.ZP.local.getLocalUrl(pe);return ke.WY.get({url:c,params:o})}var Ke=r(91648),Ye=r(18329),Me=r(38642),Je=r(9849),Ue=r(99891);class dt extends A.Component{constructor(o){super();this.WaterMarkText=o,this.html=document.getElementsByClassName("common-watermark")}createEl(o){setTimeout(()=>{o.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var tt=dt,gt=pe=>({userInfo:pe.user});class at extends A.Component{constructor(o){var c;super(o);c=this,this.onVideoReady=i=>{var n=this.props,p=n.resourceInfo,v=n.mode,C=n.autoPlay,P=n.t,I=p.storageType;i==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(i),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(v==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),v==="preview"&&C&&this.play.play()):I==="ALIBABA_PRIVATE"||I==="LOCAL"?this.updateSource("resetPlayer"):(ke.WY.logger({keyword:"video",moduleName:"video-play",msg:P("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var i=this.props,n=i.draggable,p=i.mode,v=i.t,C=i.studyInfo,P=i.needCurrentTime,I=i.onCurrentTime,O=I===void 0?()=>{}:I,Z=C.studyType,M=C.studyId,k=C.resourceId,N=this.state,te=N.showPreventHang,ue=N.dragSwitch,ge=N.showRandomAlert,Pe=N.randomAlertDialogVisible,L=this.playingVideo,g=L.oneTime,u=L.popupWindowCount,t=L.maxPlayTime,s=L.progress,h=L.auditionLength,l=L.auditionType,e=L.duration,f=L.recentStart,T=this.play.getCurrentTime(),w=(te==="OPEN"||ge==="OPEN")&&u>0;if(P&&O(T),h>0&&l===2&&T>h&&(this.play.seek(h),ie.default.warning(v("component.haveALookOverTip")),this.play.pause()),p==="learn"&&w){var X=e-g*u;if(u>0&&T>X)if(this.play.pause(),ge==="OPEN"){if(!Pe){var x=(0,Ke.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:x},()=>{(0,ce.qp)({popupId:x,planId:M,resourceId:k,type:"popup_start"})}),this.play.exitFull()}}else te==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((n||s===100)&&(T>0&&(this.playingVideo.recentStart=T),!((Z==="enterprise"||Z==="studyProject")&&ue==="OPEN")))return!1;T>t?T-f>2?(this.playingVideo.recentStart=t,this.play.seek(t),ie.default.warning(v("component.preventFastWatchTip"))):(this.playingVideo.recentStart=T,this.playingVideo.maxPlayTime=T):T>0&&T>this.playingVideo.recentStart&&(this.playingVideo.recentStart=T)},this.onPlay=()=>{var i=this.props,n=i.mode,p=i.onPlay,v=p===void 0?()=>{}:p;v();var C=this;n==="learn"&&!C.timer&&(C.timer=setTimeout(function P(){C.saveProgress(),clearTimeout(C.timer),C.timer=setTimeout(P,2e4)},2e4))},this.onPause=()=>{var i=this.props,n=i.studyInfo,p=i.mode,v=n.studyType;clearTimeout(this.timer),this.timer=null,p==="learn"&&(v==="platform"||v==="enterprise"||v==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var i=this.props.mode;i==="learn"&&this.saveProgress()},this.onError=i=>{var n=this.props.resourceInfo,p=n.storageType;(p==="ALIBABA_PRIVATE"||p==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var i=this.props.mode;this.initPlayVideo(),i==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var i=this.state,n=i.showPreventHang,p=i.showRandomAlert,v=this.props,C=v.t,P=v.playingVideo,I=v.studyInfo,O=v.autoPlay,Z=P.recentStart,M=P.duration,k=P.progress,N=I.studyType,te=(n==="OPEN"||p==="OPEN")&&(N==="studyTask"||N==="enterprise"||N==="studyProject")&&k<100;te?(p==="OPEN"?this.setState({promptMessage:C("component.preventAlertTip"),dialogVisible:!0}):n==="OPEN"&&this.setState({promptMessage:C("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):O&&(this.play.play(),Math.ceil(Z)<parseInt(M)&&this.play.seek(Z))},this.playerShowPreventHang=()=>{var i=this.playingVideo,n=i.duration,p=i.recentStart,v=0;n>0&&n<180?(v=n/2,this.playingVideo.oneTime=v,p>=v?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):n>=180&&n<600?(v=n/3,this.playingVideo.oneTime=v,p>=2*v?this.playingVideo.popupWindowCount=0:p>=v?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(v=n/4,this.playingVideo.oneTime=v,p>=3*v?this.playingVideo.popupWindowCount=0:p>=2*v?this.playingVideo.popupWindowCount=1:p>=v?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var i=this.props,n=i.playingVideo,p=i.mode;if(p==="learn"){this.playingVideo=(0,B.Z)({},n);var v=n.duration,C=n.progress;this.playingVideo.hasFinished=parseInt(C)===100,this.playingVideo.maxPlayTime=parseInt(v)*parseInt(C)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,Q.Z)(y().mark(function i(){var n,p,v,C,P,I,O,Z,M,k,N,te,ue,ge,Pe,L,g,u,t,s,h,l,e,f;return y().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(n=c.state,p=n.speedSwitch,v=n.dragSwitch,C=n.whiteList,P=c.props,I=P.resourceInfo,O=P.showQuality,Z=I.contentType,M=I.storageType,k=I.source,N=I.playId,te=I.playerId,ue=I.showFullScreen,ge=ue===void 0?!0:ue,Pe=Ce(te),Pe.components=[],L=typeof k=="object"&&k.hasOwnProperty("FD")&&k.FD.indexOf("m3u8")===-1,O&&L&&Z!=="mp3"&&(M&&M==="PUBLIC_CLOUD"||!M)&&Pe.components.push({name:"VideoQuality",type:Re,args:[()=>{c.play.pause(),c.playingVideo.readyCount=0}]}),p==="OPEN"&&Pe.components.push({name:"VideoRate",type:We}),ge&&(g=Pe.skinLayout.find(X=>X.name==="controlBar"),g&&g.children.splice(g.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),Pe.components.push({name:"VideoWaterMark",type:tt}),u=k.FD,t=k.OD,u.indexOf("http://")>-1&&(u=u.replace("http://","https://")),t.indexOf("http://")>-1&&(t=t.replace("http://","https://")),s=C.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",k.OD=t&&t.indexOf(s)>-1&&t.indexOf(".mp4")>-1?t:u,k.FD=u,h=typeof k!="string"?JSON.stringify(k):k,Pe.source=h,v==="OPEN"&&(Pe.disableSeek=!0),M!=="ALIBABA_PRIVATE"){w.next=32;break}return w.next=22,(0,ce.BR)(N);case 22:if(l=w.sent,!l){w.next=28;break}Pe.source=l,Pe.vodRetry=1,w.next=30;break;case 28:return c.setState({showPrivateVodError:!0}),w.abrupt("return");case 30:w.next=38;break;case 32:if(M!=="LOCAL"){w.next=38;break}return w.next=35,ze(N);case 35:e=w.sent,f=e.data,f.code===0&&(Pe.source="".concat(k.FD,"?auth_key=").concat(f.data.auth_key),Pe.vodRetry=1);case 38:c.setState({playerConfig:Pe});case 39:case"end":return w.stop()}},i)})),this.updateSource=function(){var i=(0,Q.Z)(y().mark(function n(p){var v,C,P,I,O,Z,M,k;return y().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(v=c.state.playerConfig,C=c.props.resourceInfo,P=C.storageType,I=C.source,O=C.playId,c.playingVideo.readyCount=0,P!=="ALIBABA_PRIVATE"){te.next=16;break}return te.next=7,(0,ce.BR)(O);case 7:if(Z=te.sent,!Z){te.next=12;break}Object.assign(v,{source:Z,vodRetry:1}),te.next=14;break;case 12:return c.setState({showPrivateVodError:!0}),te.abrupt("return");case 14:te.next=22;break;case 16:if(P!=="LOCAL"){te.next=22;break}return te.next=19,ze(O);case 19:M=te.sent,k=M.data,k.code===0&&Object.assign(v,{source:"".concat(I.FD,"?auth_key=").concat(k.data.auth_key),vodRetry:1});case 22:c.setState({playerConfig:v},()=>{c.play.setupPlayer(p)});case 23:case"end":return te.stop()}},n)}));return function(n){return i.apply(this,arguments)}}(),this.saveProgress=()=>{var i=this.props,n=i.studyInfo,p=i.userInfo,v=p.isLogin,C=p.enterpriseId,P=p.id,I=this.playingVideo,O=I.recentStart,Z=I.duration,M=I.hasFinished,k=Math.ceil(+O);k>Number(Z)&&(k=Number(Z));var N=Math.ceil(k/+Z*100);if((N>100||M)&&(N=100),v){var te=this.playingVideo,ue=te.auditionType,ge=te.auditionLength;if(ge>0&&ue===2){var Pe=Math.ceil(ge/Z*100);Pe<=N&&(N=Pe,k=ge)}(0,ce.sH)({studyInfo:n,progress:N,recent_start:k,enterpriseId:C,userId:P}).then(L=>{L&&L.data&&(0,Ve.Z)(L.data.integral_info||"")})}},this.getInfoFromSettings=(0,Q.Z)(y().mark(function i(){var n,p,v,C,P,I,O,Z,M;return y().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return n=c.props.studyInfo,p=n.studyType,v=n.projectId,N.next=4,(0,ce.Gw)();case 4:if(C=N.sent,P=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],I=(0,De.RG)(C,P),p!=="studyProject"){N.next=14;break}return N.next=10,(0,Je.NU)({id:v});case 10:O=N.sent,Z=O.status,M=O.data,Z===200&&(I.showPreventHang=M.prevent_cut_screen?"OPEN":"CLOSED",I.speedSwitch=M.speed_play?"OPEN":"CLOSED",I.dragSwitch=M.prevent_drag?"OPEN":"CLOSED");case 14:c.setState(I,()=>{c.dealVideoConfig()});case 15:case"end":return N.stop()}},i)})),this.dealAudioPoster=()=>{var i=this.props.resourceInfo.contentType,n=i===void 0?"":i;this.setState({showAudioPoster:n==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var i=this.state.showAudioPoster,n=this.play.playerContainer;i&&n&&(n.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),n.style.backgroundSize="cover")},this.getPlayInstance=i=>{this.play=i},this.handleOk=()=>{this.setState({dialogVisible:!1});var i=this.state.btnType,n=this.playingVideo.recentStart,p=this.props.t;i==="know"?(this.play.play(),this.play.seek(n),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:p("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,Q.Z)(y().mark(function i(){var n,p,v,C;return y().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:n=c.props.studyInfo,p=n.studyId,v=n.resourceId,C=c.state.randomAlertUUID,(0,ce.qp)({popupId:C,planId:p,resourceId:v,type:"popup_end"}).then(()=>{c.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),c.playingVideo.popupWindowCount-=1,c.play.play();case 6:case"end":return I.stop()}},i)})),this.renderFooter=()=>{var i=this.state.btnType,n=this.props.t;return d().createElement(W.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(i)},n(i==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var i=this.props.t;return d().createElement(W.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},i("common.ok"))},this.state={playerConfig:Ce(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:o.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:o.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:o.t("component.randomAlertTip"),randomAlertModal:{title:o.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,Me.UI)("CL_VIDEO_BAIYING_COM_CN")}},o.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(o){var c=typeof o.resourceInfo.source!="string"?JSON.stringify(o.resourceInfo.source):o.resourceInfo.source,i=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;c!==i&&i!==""&&this.initInfo()}componentWillUnmount(){var o=this.props.mode;o==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var o=this.state,c=o.playerConfig,i=o.showPrivateVodError,n=o.dialogVisible,p=o.dialogModal,v=o.promptMessage,C=o.randomAlertDialogVisible,P=o.randomAlertModal,I=o.randomAlertTip,O=o.encryptedSwitch,Z=this.props,M=Z.resourceInfo,k=Z.t,N=O==="OPEN"?fe:Ee;return d().createElement(A.Fragment,null,d().createElement(N,(0,j.Z)({ref:this.getPlayInstance},M,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:c,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),d().createElement(Ye.ZP,(0,j.Z)({visible:n},p,{footer:this.renderFooter()}),d().createElement("div",{className:"video-business-prompt"},v)),d().createElement(Ye.ZP,(0,j.Z)({visible:C},P,{footer:this.renderRandomFooter()}),d().createElement("div",{className:"video-player-container__prompt"},I)),i&&d().createElement("div",{className:"video-business-vod-error"},k("privateCloud.docReadError")),d().createElement(Ue.Z,{scenes:"video"}))}}var ft=(0,ee.$j)(gt,null,null,{forwardRef:!0})((0,V.Z)("translation",{withRef:!0})(at)),rt=r(94184),Xe=r.n(rt),He=r(84874),Ae=pe=>({userInfo:pe.user}),yt={getPravateDocUrl:Ne.ZP.localStorage.getPravateDocUrl};function pt(pe){return JSON.stringify(pe,(o,c)=>(typeof c=="function"&&(c=c.toString()),c))}function ut(pe){var o=parseInt(parseInt(pe,10)/60,10),c=parseInt(parseInt(pe,10)%60,10);return o<10&&(o="0".concat(o)),c<10&&(c="0".concat(c)),"".concat(o,":").concat(c)}class st extends A.Component{constructor(o){var c;super(o);c=this,this.messageFun=i=>{var n=this.props,p=n.docType,v=n.progress,C=n.studyTimeLimit,P=n.studyTime,I=this.state,O=I.jumpPageTag,Z=I.totalTime,M=I.timeRemaining,k=this.state.previewDocData,N={};try{N=JSON.parse(i.data)}catch(te){return}switch(N.action){case"preview.ready":this.initDocData();break;case"preview.meta":k.totalPage=N.data.pc||1,k.currentPage=1,this.setState({previewDocData:k},()=>{this.reportStatusInterval()}),C>0?(this.saveProgress(v,P||"1",N.data.pc||1),this.setState({showCountDownContainer:!0})):p==="xlsx"||p==="xls"||k.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(v,P||"1",N.data.pc||1),C>0&&v<100?(this.setState({showCountDown:!0}),p==="xlsx"||p==="xls"?Z=C:Z=C*N.data.pc,M=parseInt(Z*(1-v/100),10),this.setState({timeRemaining:M,totalTime:Z},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(O){O=!1,this.setState({jumpPageTag:O});return}k.currentPage=N.data.pageIndex+1,this.setState({previewDocData:k}),C||this.saveProgress(Math.ceil(k.currentPage/k.totalPage*100),k.currentPage,k.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":ie.default.error(N.data.result);break;default:break}},this.initDocData=(0,Q.Z)(y().mark(function i(){var n,p,v,C,P,I,O,Z,M,k,N,te,ue,ge;return y().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(c.setState({isShowPrivateError:!1}),n=c.props,p=n.docType,v=n.userInfo,C=n.documentWatermarkSettings,P=n.storageType,I=n.privateDocId,O=v.name,Z=v.jobNumber,M=v.position,k="",N={},P!=="ALIBABA_PRIVATE"){L.next=18;break}return L.prev=6,te=yt.getPravateDocUrl(I),L.next=10,ke.WY.get({url:te});case 10:ue=L.sent,ge=ue.data,ge.code===0?N=ge.data||{}:c.setState({isShowPrivateError:!0}),L.next=18;break;case 15:L.prev=15,L.t0=L.catch(6),c.setState({isShowPrivateError:!0});case 18:if(C.indexOf("name")>-1&&(k="".concat(k+O," ")),C.indexOf("position")>-1&&(k="".concat(k+M," ")),C.indexOf("jobnumber")>-1&&(k+=Z),k.length>0?window.sendMessage("preview.init",(0,B.Z)({wmType:1,wmValue:k,wmColor:"rgba(192, 192, 192, 0.4)"},N)):window.sendMessage("preview.init",(0,B.Z)({},N)),p!=="xlsx"&&p!=="ppt"&&p!=="pptx"&&p!=="xls"?c.setState({pageOperateContainerVisible:!0}):c.setState({pageOperateContainerVisible:!1}),!(p==="ppt"||p==="pptx")){L.next=29;break}L.t1=window,L.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},L.t1.sendMessage.call(L.t1,"setConfig",L.t2),L.next=32;break;case 29:L.t3=window,L.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},L.t3.sendMessage.call(L.t3,"setConfig",L.t4);case 32:case"end":return L.stop()}},i,null,[[6,15]])})),this.handleJumpPage=i=>{var n=this.state.previewDocData;n.currentPage=i,this.setState({jumpPageTag:!0,previewDocData:n});var p=i/n.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(p),i,n.totalPage),window.sendMessage("logic.toPage",{pageIndex:i-1})},this.redirectPage=()=>{var i=this.props,n=i.studyTimeLimit,p=i.studyTime,v=0;n===0&&(v=p-1>0?p-1:0),window.sendMessage("logic.toPage",{pageIndex:v})},this.docCountDown=()=>{var i=this.state.timeRemaining,n=this.state,p=n.totalTime,v=n.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{i-=1,this.setState({timeRemaining:i}),i<1&&(this.saveProgress(100,0,v.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var C=(p-i)/p*100;i<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(C),i,v.totalPage)},2e4)},this.saveProgress=(i,n,p)=>{var v=this.props.onSaveProgress;v&&v(i,n,p)},this.reportStatusInterval=()=>{var i=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var n=this.state.previewDocData.currentPage;i&&i({currentPage:n})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=i=>{this.docReader=i},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(o,c)=>{var i=this.docReader.contentWindow;i.postMessage(pt({action:o,data:c}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var o=this.props,c=o.t,i=o.storageType,n=o.privateDocId,p=this.props.aliUrl,v=this.state,C=v.previewDocData,P=v.pageOperateContainerVisible,I=v.timeRemaining,O=v.showCountDown,Z=v.showCountDownContainer,M=v.showPageOperateContainer,k=v.isShowPrivateError;return i==="ALIBABA_PRIVATE"&&(p="https://preview.imm.aliyuncs.com/index.html?docId=".concat(n)),d().createElement("div",{className:"doc-reader-container"},d().createElement("div",{className:"ali-doc-container",style:{paddingBottom:P?"56px":"0"}},d().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:p,id:"aliyunPreview",ref:this.dealPreviewRef}),Z?d().createElement("div",{className:"ali-doc-container__countdown"},O?d().createElement("div",null,d().createElement(He.Z,{iconClass:"iconf-tipe",size:"16px"}),c("component.docStillStudy"),d().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",ut(I)," "),c("component.canDone")):d().createElement("div",null,d().createElement(He.Z,{iconClass:"iconf-tipe",size:"16px"}),c("component.docHasFinish"))):null,P?d().createElement("div",{className:"ali-doc__operate"},d().createElement("div",{className:Xe()(["ali-doc__operate__content",M?"":"ali-doc__operate__hide-content"])},d().createElement("div",{className:"ali-doc__operate__pagination"},d().createElement("div",{className:"ali-doc__operate__pagination__pages"},C.currentPage," / ",C.totalPage),d().createElement("div",{className:"ali-doc__operate__pagination__toggle"},d().createElement("div",{className:"ali-doc__operate__pagination__choose"},d().createElement("span",null,c("component.choosePage"),d().createElement(He.Z,{iconClass:"iconf-arrow-under",size:"14px"})),d().createElement("div",{className:"ali-doc__operate__page-list-container"},d().createElement("div",{className:"ali-doc__operate__choose-page"},c("component.fastChoosePage")),d().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:C.totalPage})).map((N,te)=>d().createElement("li",{key:N,onClick:()=>this.handleJumpPage(te+1)},te+1))))),d().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},c("common.collapse"))))),d().createElement("div",{className:Xe()("ali-doc__operate__unfold",M?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},c("common.expand"))):null,k&&d().createElement("div",{className:"ali-doc__error"},c("privateCloud.docReadError"))),d().createElement(Ue.Z,{scenes:"document"}))}}st.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var nt=(0,ee.$j)(Ae)((0,V.Z)()(st)),ht=pe=>({userInfo:pe.user}),_e="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),it="".concat("https://doc.coolcollege.cn");class ot extends d().Component{constructor(o){var c;super(o);c=this,this.onSaveProgress=(i,n,p)=>{var v=this.props,C=v.mode,P=v.studyInfo,I=v.userInfo,O=I.enterpriseId,Z=I.id;C==="learn"&&(0,ce.sH)({studyInfo:P,progress:i,page_count:p,recent_start:n,enterpriseId:O,userId:Z}).then(M=>{M&&M.data&&(0,Ve.Z)(M.data.integral_info||"")})},this.messageFun=function(){var i=(0,Q.Z)(y().mark(function n(p){var v,C,P,I,O,Z;return y().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p.data!=="local-resource"){k.next=9;break}if(v=c.props.resourceInfo,C=v.storageType,P=v.playId,!(C&&C==="LOCAL")){k.next=9;break}return k.next=6,ze(P);case 6:I=k.sent,O=I.data,O.code===0&&(Z=document.getElementById("local-resource-box"),Z.contentWindow.postMessage({msg:"local-auth-key",authKey:O.data.auth_key},"*"));case 9:case"end":return k.stop()}},n)}));return function(n){return i.apply(this,arguments)}}(),this.getInfoFromSettings=(0,Q.Z)(y().mark(function i(){var n,p,v;return y().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,ce.Gw)();case 2:n=P.sent,p=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],v=(0,De.RG)(n,p),c.setState(v,()=>{c.initDocPage(c.props)});case 6:case"end":return P.stop()}},i)})),this.initDocPage=(0,Q.Z)(y().mark(function i(){var n,p,v,C,P,I,O,Z,M,k,N,te,ue,ge,Pe,L,g,u,t,s,h,l,e,f,T,w,X,x,se,ae,ne,$,de,xe,Fe=arguments;return y().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(n=Fe.length>0&&Fe[0]!==void 0?Fe[0]:{},p=n.resourceInfo,v=n.mode,C=n.studyInfo,P=n.userInfo,I=c.state.documentPlayerMode,O=p.docType,Z=p.docTitle,M=p.url,k=p.studyTimeLimit,N=p.studyTime,te=p.aliUrl,ue=p.progress,ge=p.storageType,Pe=p.playId,L=C.studyType,g=C.courseId,u=C.studyId,t=C.resourceId,s=P.enterpriseId,h=P.id,l=P.isLogin,e=P.token,f=I==="compat"&&te.indexOf("preview.imm.aliyun")>-1||ge==="ALIBABA_PRIVATE",!f){Y.next=11;break}c.setState({showAliReader:!0}),Y.next=31;break;case 11:if(T=(0,ce.sH)({enterpriseId:s,userId:h,token:e,studyInfo:C},!0),w=L==="studyTask"?2:1,X=Ne.ZP.SaveProgress.reportStatusInterval(C),x={isSaveProgress:l&&v==="learn"&&T,isSaveRecord:!1,access_token:e,userId:h,hostUrl:_e,courseId:g,resourceId:t,courseType:1,planId:u,studyTimeLimit:k,studyTime:N,saveProgressUrl:T,type:"eapp",progress:ue,saveRecordProgressUrl:X,actionType:w},!(ge&&ge==="LOCAL")){Y.next=26;break}return Y.next=18,ze(Pe);case 18:if(se=Y.sent,ae=se.data,ae.code!==0){Y.next=25;break}x.auth_key=ae.data.auth_key,x.url=M,Y.next=26;break;case 25:return Y.abrupt("return");case 26:ne=JSON.stringify(x),$="".concat(Z,".").concat(O).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),de="".concat(it,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(ne),"&furl=").concat(M,"?attname=").concat($),ge&&ge==="LOCAL"&&(xe="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),de="".concat(xe,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(ne),"&furl=").concat(M,"?attname=").concat($)),c.setState({encodeUrl:de});case 31:case"end":return Y.stop()}},i)})),this.handleReportStatusInterval=i=>{var n=i.currentPage,p=this.props,v=p.resourceInfo,C=p.mode,P=p.studyInfo,I=p.userInfo,O=v.type,Z=P.courseId,M=P.studyId,k=P.resourceId,N=I.enterpriseId,te=I.id,ue=I.isLogin,ge="",Pe="",L=0,g=!1;switch(O){case"enterprise":L=1,g=!0;break;case"study":ge=M,L=2,g=!0;break;case"project":Pe=M,L=1,g=!0;break;default:break}if(!(!g||!ue)){var u={plan_id:ge,enterprise_id:N,user_id:te,course_id:Z,project_course_id:Pe,resource_id:k,current_page:n,action_type:L,send_time:Date.parse(new Date)};C==="learn"&&(0,ce.Xc)(P,u)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(o){this.initDocPage(o)}render(){var o=this.props.resourceInfo,c=this.state,i=c.encodeUrl,n=c.documentWatermarkSettings,p=c.showAliReader,v=o.docType,C=o.type,P=o.studyTimeLimit,I=o.studyTime,O=o.aliUrl,Z=o.progress,M=o.storageType,k=o.playId;return p?d().createElement(nt,{privateDocId:k,storageType:M,aliUrl:O,docType:v,progress:Z,studyTime:I,studyTimeLimit:P,documentWatermarkSettings:n,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:C}):d().createElement("div",{className:"doc-reader-container"},d().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:i,frameBorder:"0",allowFullScreen:!0}),d().createElement(Ue.Z,{scenes:"document"}))}}var $e=(0,ee.$j)(ht)(ot),Ct=r(38979),qe=r(90706),mt=r(12968),Ge=r(44208),G=r(60667),E=pe=>({userInfo:pe.user});class b extends d().Component{constructor(){var o;super(...arguments);o=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var c=this.props,i=c.studyInfo,n=c.mode,p=c.userInfo,v=p.enterpriseId,C=p.id;n==="learn"&&(0,De.Gp)({studyInfo:i,enterpriseId:v,userId:C})},this.getInfoFromSettings=(0,Q.Z)(y().mark(function c(){var i,n,p;return y().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,ce.Gw)();case 2:i=C.sent,n=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],p=(0,De.RG)(i,n),o.setState(p,()=>{o.renderWatermark()});case 6:case"end":return C.stop()}},c)})),this.renderWatermark=()=>{var c=this.props.userInfo,i=this.state.imageWatermark,n=c.name,p=c.unionid,v=c.sourceType,C=c.jobNumber,P=c.position,I=[];i.indexOf("name")>-1&&I.push(d().createElement(G.Z,{dataType:"userName",value:p,name:n,type:v})),i.indexOf("position")>-1&&I.push(d().createElement("span",null,P)),i.indexOf("jobnumber")>-1&&I.push(d().createElement("span",null,C)),i.length>0&&this.setState({watermark:I.map((O,Z)=>d().createElement("span",{key:Z},O))})},this.handleError=c=>{var i=this.props.onError;i&&i(c)},this.getImageUrl=(0,Q.Z)(y().mark(function c(){var i,n,p,v,C,P,I,O,Z,M;return y().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(i=o.props,n=i.resourceInfo,p=i.t,v=n.playId,C=n.url,P=n.storageType,I=C,!P){N.next=21;break}if(P!=="ALIBABA_PRIVATE"){N.next=15;break}return N.next=7,(0,ce.J7)(v);case 7:if(O=N.sent,!O){N.next=12;break}I=O,N.next=13;break;case 12:return N.abrupt("return",ie.default.info(p("privateCloud.docReadError")));case 13:N.next=21;break;case 15:if(P!=="LOCAL"){N.next=21;break}return N.next=18,ze(v);case 18:Z=N.sent,M=Z.data,M.code===0&&(I="".concat(C,"?auth_key=").concat(M.data.auth_key));case 21:o.setState({imageUrl:[I]},()=>{var te=o.state.imageUrl,ue="image-business",ge=document.querySelectorAll(".".concat(ue,"-image img"));ge.forEach((Pe,L)=>{Pe.onerror=()=>{o.handleError(te[L])}})});case 22:case"end":return N.stop()}},c)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var o="image-business",c=this.props.resourceInfo,i=c.preview,n=i===void 0?!1:i,p=this.state,v=p.watermark,C=p.imageUrl;return d().createElement("div",{className:o},d().createElement(Ue.Z,{scenes:"image"}),d().createElement(qe.Z,{className:"".concat(o,"-carousel")},C.map((P,I)=>d().createElement("div",{className:"".concat(o,"-image"),key:I.toString()},d().createElement(Ge.Z,{src:P,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:n})))))}}b.defaultProps={prefixCls:"watch-image-page"};var K=(0,ee.$j)(E)((0,V.Z)()(b)),le=pe=>({userInfo:pe.user});class Ie extends d().Component{constructor(){var o;super(...arguments);o=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,Q.Z)(y().mark(function c(){var i,n,p;return y().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,ce.Gw)();case 2:i=C.sent,n=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],p=(0,De.RG)(i,n),o.setState(p,()=>{o.renderWatermark()});case 6:case"end":return C.stop()}},c)})),this.renderWatermark=()=>{var c=this.props.userInfo,i=this.state.htmlWatermark,n=c.name,p=c.unionid,v=c.sourceType,C=c.jobNumber,P=c.position,I=[];i.indexOf("name")>-1&&I.push(d().createElement(G.Z,{dataType:"userName",value:p,name:n,type:v})),i.indexOf("position")>-1&&I.push(d().createElement("span",null,P)),i.indexOf("jobnumber")>-1&&I.push(d().createElement("span",null,C)),i.length>0&&this.setState({watermark:I.map((O,Z)=>d().createElement("span",{key:Z},O))})},this.saveProgress=()=>{var c=this.props,i=c.studyInfo,n=c.mode,p=c.userInfo,v=p.enterpriseId,C=p.id;n==="learn"&&(0,De.Gp)({studyInfo:i,enterpriseId:v,userId:C})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var o="html-business",c=this.props.resourceInfo,i=c.url,n=this.state.watermark;return d().createElement("div",{className:o},d().createElement("div",{className:"".concat(o,"__html-watermark")},n),d().createElement("iframe",{title:"html",className:"".concat(o,"_iframe"),src:i}))}}var ve=(0,ee.$j)(le)((0,V.Z)()(Ie)),Se=r(57068),Le=r(1164),Be=pe=>({userInfo:pe.user});class we extends d().PureComponent{constructor(){super(...arguments);this.getHost=o=>{var c=o.split("//"),i=c[1].split("/");return[c[0],i[0]].join("//")},this.getScormUrl=()=>{var o=this.props,c=o.studyInfo,i=o.mode,n=o.userInfo,p=o.resourceInfo,v=o.from,C=n.enterpriseId,P=n.id,I=p.url,O=this.getHost(I);if(i==="learn"){var Z=(0,B.Z)({userId:P,enterpriseId:C,access_token:localStorage.token,from:v,scormUrl:encodeURIComponent(I),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},c);return"".concat(O).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(Se.stringify(Z))}return"".concat(O,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(I))},this.handleOpenScormLink=o=>{Le.Z.targetTo({path:o,isExternalLink:!0})}}render(){var o=this.props.t,c="scorm-business",i=this.getScormUrl(),n=(0,Me.UI)("SCORM_EXTERNAL_WATCH");return d().createElement("div",{className:c},n?d().createElement("div",{className:"".concat(c,"_scorm")},d().createElement("img",{className:"".concat(c,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),d().createElement("h5",null,o("resourcePlay.scormTip")),d().createElement(W.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(i)},o("resourceLibrary.h5LinkPlayButton"))):d().createElement("iframe",{title:"scorm",className:"".concat(c,"_iframe"),src:i}))}}var Ze=(0,ee.$j)(Be)((0,V.Z)()(we));class Qe extends d().Component{render(){var o=this.props,c=o.visible,i=o.title,n=o.onCancel,p=o.t,v=d().createElement("span",null,i);return d().createElement(Ye.ZP,{visible:c,title:v,onCancel:n,footer:null},d().createElement("div",{className:"ban-preview"},d().createElement("div",{className:"ban-preview-center"},d().createElement("img",{src:D(),alt:"picture"}),d().createElement("h2",null,p("localStorage.tip")),d().createElement("p",null,p("localStorage.banPreview"))),d().createElement("hr",null),d().createElement(W.Z,{type:"primary",className:"know",onClick:n},p("localStorage.onKnow"))))}}var Oe=(0,V.Z)()(Qe);class vt extends A.Component{constructor(){var o;super(...arguments);o=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=c=>{var i=this.props.previewInfo,n=i.onCancel;this.onCancel(),n(c)},this.onGetVideoBusiness=c=>{var i=this.props.onRef,n=i===void 0?()=>{}:i;this.videoBusiness=c,n(c)},this.onFullScreen=()=>{var c=this.state.fullScreen;this.setState({fullScreen:!c})},this.handleJudgeNetwork=(0,Q.Z)(y().mark(function c(){var i,n,p,v,C,P,I,O,Z,M,k,N=arguments;return y().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(i=N.length>0&&N[0]!==void 0?N[0]:null,n=o.props,p=n.resourceInfo,v=n.watchType,C=p.storageType,P=p.playId,I=p.originUrl,O=v==="image"||v==="video"||v==="doc",Z=null,i?Z=i:I?Z=I:Z=p.url,!(O&&Z&&P&&C&&C==="LOCAL")){ue.next=22;break}return ue.prev=7,ue.next=10,(0,ce.NY)(P);case 10:return M=ue.sent,ue.next=13,(0,ce.Hy)(Z,M);case 13:k=ue.sent,k?o.setState({showBan:"no"}):o.setState({showBan:"yes"}),ue.next=20;break;case 17:ue.prev=17,ue.t0=ue.catch(7),o.setState({showBan:"yes"});case 20:ue.next=23;break;case 22:o.setState({showBan:"no"});case 23:case"end":return ue.stop()}},c,null,[[7,17]])})),this.renderOuter=()=>{var c=this.props,i=c.prefixCls,n=c.watchType,p=c.onCurrentTime,v=p===void 0?()=>{}:p;return d().createElement("div",{className:"".concat(i,"-outer")},n==="video"&&d().createElement(ft,(0,j.Z)({onCurrentTime:v,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),n==="doc"&&d().createElement($e,this.props),n==="image"&&d().createElement(K,(0,j.Z)({onError:this.handleJudgeNetwork},this.props)),n==="html"&&d().createElement(ve,this.props),n==="scorm"&&d().createElement(Ze,this.props))},this.renderFooter=()=>{var c=this.props,i=c.resourceInfo.storageType,n=c.t,p=this.state.showBan,v=p!==""&&p==="yes";return i&&i!=="PUBLIC_CLOUD"&&v?d().createElement(W.Z,{type:"primary",className:"know",onClick:this.onCancelModel},n("localStorage.onKnow")):null}}componentDidMount(){var o=this.props.mode;o==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(o){o.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var o=this.state,c=o.showBan,i=o.fullScreen,n=this.props,p=n.mode,v=n.previewWay,C=n.previewInfo,P=n.prefixCls,I=n.t,O=n.showEnlarge,Z=n.footer,M=Z===void 0?null:Z,k=C.visible,N=C.destroyOnClose,te=C.title,ue=c!==""&&c==="yes",ge=c!==""&&c==="no";return d().createElement(A.Fragment,null,p==="preview"&&v==="popups"&&d().createElement(Ye.ZP,{destroyOnClose:N,visible:k,title:te,onCancel:this.onCancelModel,footer:M||this.renderFooter(),wrapClassName:"".concat(P,"-resource ").concat(i?"".concat(P,"-full"):"")},O&&d().createElement("div",{className:"".concat(P,"-resource-out-icon"),onClick:this.onFullScreen},i?d().createElement(U.Z,{className:"".concat(P,"-resource-icon")}):d().createElement(R.Z,{className:"".concat(P,"-resource-icon")})),d().createElement("div",{className:"".concat(P,"-inner")},!k&&d().createElement(m.Z,{size:"large"}),k&&ge&&this.renderOuter(),ue&&d().createElement(z,null))),(p==="learn"||v==="page")&&ge&&this.renderOuter(),(p==="learn"||v==="page")&&d().createElement(Oe,{visible:ue,title:te||I("questionn.warmHint"),onCancel:this.onCancel}))}}vt.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var Et=(0,V.Z)("translation",{withRef:!0})(vt)},41225:function(be,he,r){"use strict";r.d(he,{Hy:function(){return Q},NY:function(){return J},Gw:function(){return y},sH:function(){return U},BR:function(){return A},qp:function(){return R},Xc:function(){return V},J7:function(){return d}});var F=r(57361),m=r(9754),_=r.n(m),W=r(10237),j=r(37055),Q=function(){var S=(0,F.Z)(_().mark(function D(){var a,z,B,oe,ie,ee,De,ce=arguments;return _().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return a=ce.length>0&&ce[0]!==void 0?ce[0]:"",z=ce.length>1&&ce[1]!==void 0?ce[1]:"",B="",a.startsWith("http")?(oe=a.split("//")[1].trim(),ie=oe.split("/")[0],B="https://".concat(ie,"/cms/ticket")):(ee=a.split("/")[0],B="https://".concat(ee,"/cms/ticket")),re.prev=4,re.next=7,W.ZQ.get({url:B,params:{ticket:z}});case 7:if(De=re.sent,!(De.status===200||De.status===403)){re.next=10;break}return re.abrupt("return",Promise.resolve(!0));case 10:return re.abrupt("return",Promise.resolve(!1));case 13:return re.prev=13,re.t0=re.catch(4),re.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return re.stop()}},D,null,[[4,13]])}));return function(){return S.apply(this,arguments)}}(),J=function(){var S=(0,F.Z)(_().mark(function D(a){var z,B;return _().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,W.ZQ.get({url:j.ZP.local.getTicket(a)});case 2:if(z=ie.sent,B=z.data,B.code!==0){ie.next=6;break}return ie.abrupt("return",Promise.resolve(B.data.ticket));case 6:return ie.abrupt("return",Promise.resolve(""));case 7:case"end":return ie.stop()}},D)}));return function(a){return S.apply(this,arguments)}}(),y=function(){var S=(0,F.Z)(_().mark(function D(){var a;return _().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,W.WY.get({url:j.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return a=B.sent,B.abrupt("return",a.data.list);case 4:case"end":return B.stop()}},D)}));return function(){return S.apply(this,arguments)}}(),A=function(){var S=(0,F.Z)(_().mark(function D(a){var z,B,oe;return _().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,W.WY.get({url:j.ZP.localStorage.getPravateVideoUrl(a)});case 2:if(z=ee.sent,z.data.code!==0){ee.next=6;break}return B=z.data.data.videoPlayInfo,oe=B===void 0?"":B,ee.abrupt("return",oe);case 6:return ee.abrupt("return","");case 7:case"end":return ee.stop()}},D)}));return function(a){return S.apply(this,arguments)}}(),d=function(){var S=(0,F.Z)(_().mark(function D(a){var z,B,oe;return _().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return z=j.ZP.localStorage.getPravateDocUrl(a),ee.prev=1,ee.next=4,W.WY.get({url:z});case 4:if(B=ee.sent,oe=B.data,!(oe.code===0&&oe.data)){ee.next=8;break}return ee.abrupt("return",oe.data.docResourceDownloadUrl||"");case 8:return ee.abrupt("return","");case 11:return ee.prev=11,ee.t0=ee.catch(1),ee.abrupt("return","");case 14:case"end":return ee.stop()}},D,null,[[1,11]])}));return function(a){return S.apply(this,arguments)}}(),U=function(D){var a=D.studyInfo,z=D.progress,B=D.recent_start,oe=D.page_count,ie=D.enterpriseId,ee=D.userId,De=D.token,ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ke,re=a.studyType;if(re==="studyTask"&&(ke=j.ZP.SaveProgress.studySaveProgress(a)),(re==="course"||re==="enterprise")&&(ke=j.ZP.SaveProgress.enterpriseCourseSaveProgress(a)),re==="studyProject"&&(ke=j.ZP.SaveProgress.projectSaveProgress(a)),re==="platform"&&(ke="".concat(j.ZP.SaveProgress.platformCourseSaveProgress(a))),(ce||re==="platform")&&(ke+="?enterprise_id=".concat(ie,"&user_id=").concat(ee)),ce)return ke+="&access_token=".concat(De||localStorage.getItem("token")),ke;var H={progress:z,recent_start:B,tempTime:Date.parse(new Date)};return oe&&(H.page_count=oe),a.evaluationId&&(H.evaluation_id=a.evaluationId),W.WY.post({url:ke,data:H})},R=S=>{var D=S.popupId,a=S.planId,z=S.resourceId,B=S.type;return W.WY.post({url:j.ZP.TaskStudyRecord.setRandomPopupRecord(a),data:{course_id:z,terminal_type:"PC",popup_id:D,type:B}})},V=(S,D)=>{var a=j.ZP.SaveProgress.reportStatusInterval(S);return W.WY.post({url:a,data:D})}},21594:function(be,he,r){"use strict";r.d(he,{pu:function(){return j},RG:function(){return Q},Gp:function(){return J},O8:function(){return y}});var F=r(88986),m=r(69164),_=r(38642),W=r(41225),j=A=>{var d="";switch(A){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":d="studyTask";break;case"enterprise":d="enterprise";break;case"courseProject":d="studyProject";break;case"platform":case"purchased":d="platform";break;default:break}return d},Q=(A,d)=>{var U={};return d.forEach(R=>{var V=A.find(B=>B.type===R.type);if(V)if(R.type==="document_duration_limit"){var S=V.action_list,D=S.find(B=>B.type==="random_popup_verification");!(0,_.UI)("RANDOM_POPUP_VERIFY")||!D?U[R.name]="CLOSE":U[R.name]=D.param.checked==="true"?"OPEN":"CLOSE"}else if(R.type==="document_player"){var a=JSON.parse(V.actions);a.forEach(B=>{B.param.checked==="true"&&(U[R.name]=B.type)})}else if(R.type==="dynamic_watermark"){var z=V.action_list;z.forEach(B=>{B.type===R.resourceType&&B.param.checked==="true"&&(U[R.name]=B.param.comment)})}else U[R.name]=V.switch_status}),U},J=A=>{(0,W.sH)((0,F.Z)({progress:100,recent_start:1},A)).then(d=>{d&&d.data&&(0,m.Z)(d.data.integral_info||"")})},y=A=>{var d=document.createElement("div");return d.innerHTML=A,d.childNodes[0]}},51975:function(be,he,r){"use strict";r.d(he,{l:function(){return W}});var F=r(62029),m=r(12924),_=r.n(m),W=(j,Q)=>function(y){return _().createElement(j.Consumer,null,A=>_().createElement(Q,(0,F.Z)({},y,{contextData:A})))}},11449:function(be,he,r){"use strict";r.d(he,{Z:function(){return fe}});var F=r(88986),m=r(33565),_=r(12924),W=r.n(_),j=r(3115),Q=r(49111),J=r(19650),y=r(62029),A=r(57663),d=r(71577),U=r(91768),R=r(28216),V=r(37055),S=r(10237);function D(ye){var Ce=V.ZP.getHelpContentByMenuKey(),Te={key:ye};return S.WY.get({url:Ce,params:Te})}var a=r(74228),z=r.n(a),B=r(1164),oe=r(76466),ie=r(38642);class ee extends W().Component{constructor(Ce){var Te;super(Ce);Te=this,this.getHelpContentByMenuKey=()=>{var Ee=this.props.defaultMenuKey;D(Ee).then(Re=>{var We=Re.data,Ve=We.help_url,Ne=We.video_url;this.setState({videoUrl:Ne,helpUrl:Ve})})},this.handleOpenHelpUrl=Ee=>{if((0,ie.ve)()){window.open(Ee,"_blank");return}B.Z.targetTo({path:Ee,isExternalLink:!0})},this.handleOpenVideo=function(Ee){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.props.t("helpCenter.video");Te.setState(We=>({resourcePlayInfo:(0,F.Z)((0,F.Z)({},We.resourcePlayInfo),{},{resourceInfo:{originUrl:Ee,source:{FD:Ee,OD:Ee},contentType:"mp4"}}),previewInfo:(0,F.Z)((0,F.Z)({},We.previewInfo),{},{title:Re,visible:!0,onCancel:Te.handleCancelPreview})}))},this.handleCancelPreview=()=>{var Ee=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,F.Z)((0,F.Z)({},Ee),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:Ce.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var Ce=this.state,Te=Ce.helpUrl,Ee=Ce.resourcePlayInfo,Re=Ce.previewInfo,We=Ce.videoUrl,Ve=this.props.t;return W().createElement("div",{className:z().helpCenter},We&&W().createElement(d.Z,{type:"link",className:z()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(We)},Ve("helpCenter.video")),Te&&W().createElement(d.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(Te)},Ve("helpCenter.tutorial")),W().createElement(oe.Z,(0,y.Z)({},Ee,{previewInfo:Re})))}}var De=ye=>({defaultMenuKey:ye.currentRoute.menuKey});ee.defaultProps={defaultMenuKey:""};var ce=(0,R.$j)(De)((0,U.Z)()(ee));function ke(ye){var Ce=ye.extra,Te=localStorage.getItem("dingPersonnel"),Ee=sessionStorage.getItem("dingPersonnel");return W().createElement(J.Z,null,Ce,Te!=="dingPersonnel"&&Ee!=="dingPersonnel"&&(0,ie.eY)("COMMONEXTRA_HELP_CENTER")&&W().createElement(ce,null))}var re=ke,H=r(4408);function q(ye){var Ce=(0,_.useState)({helpCenter:(0,ie.eY)("HEAD_HELP_CENTER_BUT")}),Te=(0,m.Z)(Ce,1),Ee=Te[0],Re=ye.pageContainerParams,We=Re===void 0?{}:Re,Ve=ye.noPadding,Ne=Ve===void 0?!1:Ve,ze=ye.isPersonal,Ke=ze===void 0?!1:ze,Ye=ye.pageTitle,Me=ye.className,Je=Me===void 0?"":Me,Ue={extra:Ee.helpCenter?W().createElement(re,{extra:We.extra}):We.extra},dt=(0,F.Z)((0,F.Z)({},We),Ue);return W().createElement("div",{className:"page-container-content ".concat(Ne?"page-container-noPadding":""," ").concat(Ke?"page-container-content_personal_background":""," ").concat(Je)},Ye&&W().createElement(H.Z,{title:Ye}),Ke?W().createElement(j.Z,null,ye.children):W().createElement(j.Z,dt,ye.children))}var fe=q},26078:function(be,he,r){"use strict";r.r(he),r.d(he,{default:function(){return mt}});var F=r(12924),m=r.n(F),_=r(91768),W=r(11449),j=r(4408),Q=r(20136),J=r(55241),y=r(22385),A=r(31097),d=r(20228),U=r(11382),R=r(71194),V=r(57016),S=r(34792),D=r(48086),a=r(47673),z=r(4107),B=r(94184),oe=r.n(B),ie=r(246),ee=r.n(ie),De=r(57663),ce=r(71577),ke=r(59239),re=r(55446),H=r(18329),q=ke.Z.create({name:"form_in_modal"})(class extends m().Component{render(){var G=this.props,E=G.visible,b=G.onCancel,K=G.onCreate,le=G.form,Ie=G.title,ve=G.authGroupName,Se=G.t,Le=le.getFieldDecorator;return m().createElement(H.ZP,{size:"small",visible:E,title:Ie,onCancel:b,onOk:K,footer:[m().createElement(ce.Z,{key:"submit",type:"primary",onClick:K},Se("common.save"))]},m().createElement(ke.Z,{layout:"vertical"},m().createElement(ke.Z.Item,{label:Se("authGroup.label")},Le("authGroupName",{initialValue:ve})(m().createElement(z.Z,{maxLength:10,minLength:1,placeholder:""})))))}}),fe=(0,_.Z)()(q),ye=r(84874),Ce=r(37055),Te=r(10237),Ee=z.Z.Search,Re={getList:Ce.ZP.AuthGroup.getList,addAuthGroup:Ce.ZP.AuthGroup.addAuthGroup,editAuthGroup:Ce.ZP.AuthGroup.editAuthGroup,deleteAuthGroup:Ce.ZP.AuthGroup.deleteAuthGroup};class We extends m().Component{constructor(){var G;super(...arguments);G=this,this.state={list:[],activeListItemId:"",formVisible:!1,editData:{name:"",id:""},isLoading:!1,hasMore:!0,keyword:"",isClearPageNum:!1},this.getList=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;G.setState({isLoading:!0});var K=E||1,le=G.state.keyword;Te.qg.post({url:Re.getList({pageNumber:K,pageSize:30}),params:{noQueryParams:!0},data:{group_name:le}}).then(Ie=>{var ve=Ie.data.data?Ie.data.data.list||[]:[],Se=G.state.activeListItemId;ve.length&&b&&K===1&&(Se=ve[0].auth_group_id,G.props.onChangeAuthGroupId(Se)),G.setState({list:K===1?ve:G.state.list.concat(ve),isLoading:!1,isClearPageNum:!1,hasMore:ve.length===30,activeListItemId:Se})})},this.searchChange=E=>{var b=E.target.value;this.setState({keyword:b,isClearPageNum:!0},()=>{this.getList()})},this.saveFormRef=E=>{this.formRef=E},this.handleAdd=()=>{this.setState({formVisible:!0,editData:{id:"",name:""}})},this.handleCancel=()=>{this.setState({formVisible:!1})},this.handleCreate=()=>{var E=this.formRef.props.form;E.validateFields((b,K)=>{if(!b){if(K.authGroupName.length===0){D.default.warning("\u8BF7\u8F93\u5165\u6743\u9650\u7EC4\u540D\u79F0\uFF0C\u6700\u591A10\u4E2A\u5B57");return}this.state.editData.id?this.editAuthGroup(K.authGroupName):this.addAuthGroup(K.authGroupName)}})},this.addAuthGroup=E=>{var b=Re.addAuthGroup(),K={auth_group_name:E};Te.WY.post({url:b,params:{noQueryParams:!0},data:K}).then(le=>{le.data.data?(this.setState({isClearPageNum:!0},()=>{this.getList()}),this.handleCancel(),D.default.success("\u4FDD\u5B58\u6210\u529F")):D.default.warning("\u4E0E\u73B0\u6709\u6743\u9650\u7EC4\u91CD\u590D\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\u3002")})},this.editAuthGroup=E=>{var b=Re.editAuthGroup({authGroupId:this.state.editData.id}),K={auth_group_name:E};Te.WY.post({url:b,params:{noQueryParams:!0},data:K}).then(le=>{le.data.data?(this.setState({isClearPageNum:!0},()=>{this.getList(1,!1)}),this.handleCancel(),D.default.success("\u4FDD\u5B58\u6210\u529F")):D.default.warning("\u4E0E\u73B0\u6709\u6743\u9650\u7EC4\u91CD\u590D\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\u3002")})},this.handleRename=E=>{var b=this.state.editData;b.id=E.auth_group_id,b.name=E.auth_group_name,this.setState({editData:b,formVisible:!0})},this.confirmDelete=E=>{var b=Re.deleteAuthGroup(),K={auth_group_ids:[E.auth_group_id]};Te.WY.post({url:b,params:{noQueryParams:!0},data:K}).then(()=>{this.setState({isClearPageNum:!0},()=>{this.getList()})})},this.handleDelete=E=>{var b=this.props.t;V.Z.confirm({title:b("common.delete"),content:b("authGroup.removeTip"),onOk:()=>{this.confirmDelete(E)}})},this.handleSelectItem=E=>{this.setState({activeListItemId:E.auth_group_id}),this.props.onChangeAuthGroupId(E.auth_group_id)},this.renderPopoverContent=E=>{var b=this.props.t,K=m().createElement("div",null,m().createElement("span",{className:"cl-block cl-padded cl-text-center cl-hover",style:{cursor:"pointer"},onClickCapture:le=>this.handleRename(E,le)},b("common.edit")),m().createElement("span",{className:"cl-block cl-padded cl-text-center cl-hover",style:{cursor:"pointer"},onClickCapture:le=>this.handleDelete(E,le)},b("common.delete")));return K}}componentDidMount(){this.getList()}render(){var G=this.props.t,E=this.state,b=E.list,K=E.activeListItemId,le=E.formVisible,Ie=E.editData,ve=E.isLoading,Se=E.hasMore,Le=E.isClearPageNum,Be=E.keyword,we=localStorage.getItem("themeColor")||"#516ae6";return m().createElement("div",{className:"auth-group-container__list"},m().createElement(Ee,{placeholder:G("authGroup.searchGroup"),allowClear:!0,value:Be,onChange:this.searchChange}),m().createElement("h1",{className:"auth-group-container__list__add",onClick:this.handleAdd},m().createElement(ye.Z,{iconClass:"icon-icon_addx"}),G("authGroup.addGroup")),!Le&&m().createElement("div",{className:"auth-group-container__list__set set"},m().createElement(ee(),{pageStart:1,initialLoad:!1,loadMore:Ze=>this.getList(Ze),hasMore:!ve&&Se,useWindow:!1,loader:ve?m().createElement("div",{className:"question-selector-loading"},m().createElement(U.Z,null)):null},m().createElement("ul",null,b.map(Ze=>{var Qe=K===Ze.auth_group_id,Oe=oe()(["set__item",Qe?"active":""]);return m().createElement("li",{className:Oe,style:Qe?{color:we}:{},key:Ze.auth_group_id,onClick:()=>{this.handleSelectItem(Ze)}},m().createElement(A.Z,{title:""},m().createElement("span",{className:"set__item__title"},Ze.auth_group_name)),m().createElement(J.Z,{key:Ze.auth_group_id,content:this.renderPopoverContent(Ze),placement:"bottom",trigger:"hover"},m().createElement("span",{className:"set__item__icon"},m().createElement(ye.Z,{iconClass:"icon-icon_morex"}))))})))),le&&m().createElement(fe,{wrappedComponentRef:this.saveFormRef,visible:le,title:Ie.name?G("authGroup.editGroup"):G("authGroup.addGroup"),authGroupName:Ie.name,onCancel:this.handleCancel,onCreate:this.handleCreate}))}}var Ve=(0,_.Z)()(We),Ne=r(62029),ze=r(66456),Ke=r(55313),Ye=r(62350),Me=r(75443),Je=r(57361),Ue=r(88986),dt=r(18106),tt=r(88108),gt=r(9754),at=r.n(gt),ft=r(28216),rt=r(49101),Xe=r(73171),He=r(6793),Ae=r(60667),yt=r(80430),pt=z.Z.Search;class ut extends m().Component{constructor(){super(...arguments);this.state={list:[],total:0,pageNum:1,pageSize:20,isLoading:!1,keyword:""},this.getUserList=()=>{var G=Ce.ZP.Organization.getDeptUser({deptId:this.props.deptId}),E=this.state,b=E.keyword,K=E.pageNum,le=E.pageSize,Ie={recursion:!0,filter_auth:!0,user_type:"active",keyword:b,type:"user_name",page_number:K,page_size:le};this.setState({isLoading:!0}),Te.WY.get({url:G,params:Ie}).then(ve=>{this.setState({isLoading:!1,list:ve.data.list,total:ve.data.total})})},this.searchChange=G=>{var E=G.target.value;this.setState({keyword:E})},this.search=G=>{this.setState({keyword:G,pageNum:1},()=>{this.getUserList()})},this.handleTableChange=G=>{this.setState({pageNum:G.current,pageSize:G.pageSize},()=>{this.getUserList()})},this.tableColumns=()=>{var G=this.props.t;return[{title:G("common.userName"),dataIndex:"user_name",render:(E,b)=>{var K=b.user_id,le=b.source_type;return m().createElement(Ae.Z,{type:le,value:K,name:E,dataType:"userName"})}},{title:G("common.department"),dataIndex:"department_names",onCell:()=>({style:{minWidth:127,whiteSpace:"nowrap",wordBreak:"breakAll",overflow:"hidden",textOverflow:"ellipsis",maxWidth:227}}),render:(E,b)=>{var K=b.leaf_department_ids,le=b.source_type;return m().createElement(A.Z,{title:E},m().createElement("div",{className:"cl-text-ellipsis",style:{width:140}},m().createElement(yt.Z,{list:K,nameList:E,sourceType:le,displayAll:!1})))}},{title:G("component.belongPost"),dataIndex:"post_names",onCell:()=>({style:{minWidth:127,whiteSpace:"nowrap",wordBreak:"breakAll",overflow:"hidden",textOverflow:"ellipsis",maxWidth:227}}),render:E=>E?E.join("\uFF0C"):""},{title:G("setting.syncTime"),dataIndex:"create_time",width:150,render:E=>(0,He.p6)(E,"yyyy-MM-dd")}]}}componentDidUpdate(G){G.visible!==this.props.visible&&this.props.visible&&this.getUserList()}render(){var G=this.props.t,E=this.state,b=E.list,K=E.isLoading,le=E.total,Ie=E.pageNum,ve=E.pageSize,Se=this.tableColumns(),Le=(0,Ue.Z)((0,Ue.Z)({},Ce.XE.INITIAL_PAGINATION),{},{total:le,current:Ie,pageSize:ve});return m().createElement(H.ZP,{visible:this.props.visible,title:G("authGroup.viewUserTitle"),footer:null,onCancel:this.props.onCancel},m().createElement("div",{className:"view-dept-user"},m().createElement("div",{className:"view-dept-user-search"},m().createElement(pt,{placeholder:G("common.searchNamePlaceholder"),allowClear:!0,onChange:this.searchChange,onSearch:this.search})),m().createElement(Ke.Z,{bordered:!0,size:"middle",columns:Se,rowKey:"id",dataSource:b,loading:K,pagination:Le,onChange:this.handleTableChange})))}}var st=(0,_.Z)()(ut),nt=r(67222),ht=r(88311),_e=tt.Z.TabPane,it=z.Z.Search,ot=Ge=>({userId:Ge.user.id,appType:Ge.user.appType,appId:Ge.user.appId});class $e extends m().Component{constructor(){var G;super(...arguments);G=this,this.state={list:[],total:0,pageNum:1,pageSize:20,keyword:"",userIds:"",isLoading:!1,selectedRowKeys:[],tab:"dept",org:{visible:!1,initData:{dept:[],group:[],post:[],user:[]}},viewUserDeptId:"",viewUserVisible:!1},this.onSelectChange=E=>{this.setState({selectedRowKeys:E})},this.onChangeTab=E=>{this.setState({pageNum:1,pageSize:20,tab:E},()=>{this.getRelateList()})},this.getRelateList=()=>{var E=this.props.authGroupId;if(!!E){var b=this.state.tab,K=this.state,le=K.pageNum,Ie=K.pageSize,ve=K.keyword,Se=K.userIds,Le=Ce.ZP.AuthGroup.getAuthGroupRelate({authGroupId:E,pageNum:le,pageSize:Ie,type:b==="dept"?"department":"user"});Te.WY.get({url:Le,params:{noQueryParams:!0,relate_name:ve,userIds:Se}}).then(Be=>{var we=Be.data.data;this.setState({list:we.list||[],total:we.total})})}},this.handleTableChange=E=>{this.setState({pageNum:E.current,pageSize:E.pageSize,selectedRowKeys:[]},()=>{this.getRelateList()})},this.handleAddUsers=()=>{var E=this.state,b=E.org,K=E.tab;this.setState({org:(0,Ue.Z)((0,Ue.Z)({},b),{},{onlyDept:K==="dept",onlyUser:K==="user",visible:!0})})},this.handleAddUsersCancel=()=>{var E=this.state.org;this.setState({org:(0,Ue.Z)((0,Ue.Z)({},E),{},{visible:!1})})},this.handleAddUsersOk=E=>{var b=this.state,K=b.org,le=b.tab;this.setState({org:(0,Ue.Z)((0,Ue.Z)({},K),{},{visible:!1})});var Ie=E.dept,ve=Ie===void 0?[]:Ie,Se=E.user,Le=Se===void 0?[]:Se,Be=[];le==="dept"?Be=ve.map(we=>({relateId:we.id,relateName:we.name,relateType:"department",relateIdType:"".concat(we.id,"department"),createUser:this.props.userId})):Be=Le.map(we=>({relateId:we.id,relateName:we.name,relateType:"user",relateIdType:"".concat(we.id,"user"),createUser:this.props.userId})),Be.length>0&&this.addAuthGroupRelation(Be)},this.addAuthGroupRelation=E=>{var b=Ce.ZP.AuthGroup.addRelate({authGroupId:this.props.authGroupId});Te.WY.post({url:b,params:{noQueryParams:!0},data:E}).then(()=>{this.setState({pageSize:20,pageNum:1},()=>{this.getRelateList()})})},this.batchRemove=()=>{var E=this.props.t,b=this.state,K=b.selectedRowKeys,le=b.list;K.length>0&&V.Z.confirm({title:E("common.delete"),content:E("common.confirmDeleteTitle"),okText:this.props.t("common.ok"),cancelText:this.props.t("common.cancel"),onOk:()=>{var Ie=le.filter(ve=>K.indexOf(ve.relate_id)!==-1);this.removeRelate(Ie)}})},this.removeRelate=E=>{var b=Ce.ZP.AuthGroup.removeRelate({authGroupId:this.props.authGroupId}),K=E.map(le=>le.relate_id_type);Te.WY.post({url:b,params:{noQueryParams:!0},data:{relate_id_type:K}}).then(()=>{this.setState({pageSize:20,pageNum:1,selectedRowKeys:[]},()=>{this.getRelateList()})})},this.viewDeptUser=E=>{this.setState({viewUserDeptId:E.relate_id,viewUserVisible:!0})},this.hiddenViewDeptUser=()=>{this.setState({viewUserDeptId:"",viewUserVisible:!1})},this.handleSearch=function(){var E=(0,Je.Z)(at().mark(function b(K){var le,Ie,ve,Se,Le,Be,we,Ze;return at().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(le=G.props,Ie=le.appType,ve=le.appId,Se=localStorage.getItem("qyWechatBook"),Le="",Be=Ie==="wx_app"&&Se==="true"&&ve==="9005",!(K&&Be)){Oe.next=16;break}return Oe.prev=5,Oe.next=8,(0,nt.F_)(K);case 8:we=Oe.sent,Ze=we.data,Ze.success&&(Le=Ze.data),Oe.next=16;break;case 13:Oe.prev=13,Oe.t0=Oe.catch(5),Le="";case 16:G.setState({pageNum:1,keyword:Le===""?K:"",userIds:Le},()=>{G.getRelateList()});case 17:case"end":return Oe.stop()}},b,null,[[5,13]])}));return function(b){return E.apply(this,arguments)}}(),this.searchChange=E=>{var b=E.target.value,K=this.props.appType,le=localStorage.getItem("qyWechatBook"),Ie=K==="wx_app"&&le==="true";this.setState({pageNum:1,keyword:b},()=>{Ie||this.getRelateList()})},this.tableColumns=()=>{var E=this.state.tab,b=this.props.t;return E==="dept"?[{title:b("authGroup.deptName"),dataIndex:"relate_name"},{title:b("common.operate"),width:120,render:K=>m().createElement("div",{className:"cl-table__cell-action"},m().createElement(Me.Z,{title:b("common.confirmDeleteTitle"),onConfirm:()=>this.removeRelate([K]),okText:this.props.t("common.ok"),cancelText:this.props.t("common.cancel")},m().createElement("span",{className:"cl-pointer"},b("common.delete"))),m().createElement("span",{className:"cl-pointer-divide"}),m().createElement("span",{className:"cl-pointer",onClick:()=>this.viewDeptUser(K)},b("authGroup.viewUser")))}]:[{title:b("common.userName"),dataIndex:"relate_name"},{title:b("common.operate"),width:80,render:K=>m().createElement("div",{className:"cl-table__cell-action"},m().createElement(Me.Z,{title:b("common.confirmDeleteTitle"),onConfirm:()=>this.removeRelate([K]),okText:this.props.t("common.ok"),cancelText:this.props.t("common.cancel")},m().createElement("span",{className:"cl-pointer"},b("common.delete"))))}]}}componentDidUpdate(G){G.authGroupId!==this.props.authGroupId&&this.setState({pageSize:20,pageNum:1},()=>{this.getRelateList()})}render(){var G=this.props.t,E=this.state,b=E.list,K=E.total,le=E.pageNum,Ie=E.pageSize,ve=E.isLoading,Se=E.selectedRowKeys,Le=E.org,Be=E.viewUserVisible,we=E.viewUserDeptId,Ze=E.tab,Qe=(0,Ue.Z)((0,Ue.Z)({},Ce.XE.INITIAL_PAGINATION),{},{total:K,current:le,pageSize:Ie}),Oe={selectedRowKeys:Se,onChange:this.onSelectChange},vt=this.tableColumns();return m().createElement("div",{className:"auth-group-container__content"},m().createElement(tt.Z,{activeKey:Ze,onChange:this.onChangeTab,tabBarExtraContent:m().createElement("div",{className:"tip-info"},G(Ze==="dept"?"authGroup.deptTip":"authGroup.userTip"))},m().createElement(_e,{tab:G("common.departmentLabel"),key:"dept"}),m().createElement(_e,{tab:G("authGroup.userLabel"),key:"user"})),m().createElement("div",{className:"auth-group-table-operate"},m().createElement("div",{className:"right-operate"},m().createElement("div",null,m().createElement(ce.Z,{type:"primary",icon:m().createElement(rt.Z,null),onClick:this.handleAddUsers},G("common.add")),m().createElement(ce.Z,{style:{marginLeft:8},icon:m().createElement(Xe.Z,null),onClick:this.batchRemove,disabled:Se.length<=0},G("common.delete"))),Ze==="user"&&m().createElement(it,{className:"search-input",onSearch:this.handleSearch,style:{width:272},onChange:this.searchChange,allowClear:!0,placeholder:G("common.searchNamePlaceholder")}))),m().createElement("div",{className:"auth-group-table-table"},m().createElement(Ke.Z,{size:"middle",columns:vt,rowKey:"relate_id",dataSource:b,pagination:Qe,loading:ve,onChange:this.handleTableChange,rowSelection:Oe})),m().createElement(ht.Z,(0,Ne.Z)({},Le,{title:G("common.select"),onOk:this.handleAddUsersOk,onCancel:this.handleAddUsersCancel})),m().createElement(st,{visible:Be,deptId:we,onCancel:this.hiddenViewDeptUser}))}}var Ct=(0,ft.$j)(ot)((0,_.Z)()($e));class qe extends m().Component{constructor(){super(...arguments);this.state={authGroupId:""},this.handleChange=G=>{this.setState({authGroupId:G})}}render(){var G=this.props,E=G.prefixCls,b=G.t,K=this.state.authGroupId;return m().createElement(W.Z,{pageContainerParams:{header:{title:b("leftMenuLists.authGroup")}}},m().createElement(j.Z,{title:this.props.t("leftMenuLists.authGroup")}),m().createElement("div",{className:E},m().createElement("div",{className:"".concat(E,"__main-content")},m().createElement(Ve,{onChangeAuthGroupId:this.handleChange}),m().createElement(Ct,{authGroupId:K}))))}}qe.defaultProps={prefixCls:"auth-group-container"};var mt=(0,_.Z)()(qe)},9849:function(be,he,r){"use strict";r.d(he,{Ej:function(){return j},kL:function(){return Q},T:function(){return J},NU:function(){return y},FL:function(){return A},fn:function(){return d},bm:function(){return U},jY:function(){return R},Vs:function(){return V},li:function(){return S},Nl:function(){return D},YF:function(){return a},Q6:function(){return z},zW:function(){return B},Zv:function(){return oe},Qg:function(){return ie},qc:function(){return ee},Ve:function(){return ce},rS:function(){return ke},Rh:function(){return re}});var F=r(10237),m=r(37055),_=r(38642),W={zaraFlag:(0,_.UI)("ZARA_H5")};function j(H,q){var fe=m.ZP.StudyProjectList.startStudy(H);return F.WY.post({url:fe,data:q})}function Q(H){var q=m.ZP.Common.enroll(H);return F.WY.post({url:q})}function J(H,q){var fe=H.courseId,ye=m.ZP.StudyProjectList.studyProject(fe);return F.WY.get({url:ye,params:q})}function y(H){var q=H.id,fe=W.zaraFlag?m.m1.getAssessmentProjectInfo(q):m.m1.getProjectInfo(q);return F.WY.get({url:fe})}function A(H){var q=H.courseId,fe=m.ZP.EnterpriseCourse.addScanCount(q);return F.WY.post({url:fe})}function d(){var H=m.ZP.StudyProjectList.getAccountInfo();return F.WY.get({url:H})}function U(H){var q=m.ZP.StudyProjectList.projectCertiUrl(H);return F.WY.get({url:q})}function R(H){var q=H.courseId,fe=m.ZP.Courses.like(q);return F.WY.post({url:fe})}function V(H){var q=m.ZP.EnterpriseCourse.addCommentAndScore();return F.qg.post({url:q,data:H})}function S(H){var q=m.ZP.EnterpriseCourse.getCourseComments();return F.WY.get({url:q,params:H})}function D(H){var q=m.ZP.EnterpriseCourse.addCommentAndScore();return F.qg.post({url:q,data:H})}function a(H){var q=m.ZP.EnterpriseCourse.deleteComment();return F.qg.post({url:q,data:H})}function z(H,q){var fe=m.ZP.StudyProjectList.projectStudyRecord(H);return F.WY.get({url:fe,params:q})}function B(H){var q=m.ZP.DingSpaceId.getSpaceId();return F.WY.get({url:q,params:H})}function oe(H,q){var fe=m.ZP.PlatformCourse.learningUrl(H);return F.WY.get({url:fe,params:q})}function ie(H){var q=m.ZP.MyExamTask.examIntro({examId:H});return F.WY.get({url:q})}function ee(H){var q=m.ZP.MyExamTask.examCheckStatus({examId:H});return F.WY.get({url:q})}function De(H,q){var fe=CONFIG.Common.getOperateLog(H);return formDataRequest.get({url:fe,params:q})}function ce(H,q){var fe=W.zaraFlag?m.ZP.StudyProjectList.changeCustomStatus(H):m.ZP.StudyProjectList.changeStatus(H);return F.WY.post({url:fe,data:q})}function ke(H){var q=m.ZP.StudyProjectList.getProjectReward(H);return F.WY.get({url:q})}function re(H){var q=m.ZP.subsidyGz.subsidyCourseSetting(H);return F.WY.get({url:q})}},91648:function(be,he,r){"use strict";r.d(he,{Z:function(){return F}});function F(m,_){var W,j,Q,J,W;if(j="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),W=[],Q=void 0,_=_||j.length,m)for(Q=0;Q<m;)W[Q]=j[0|Math.random()*_],Q++;else for(J=void 0,W[8]=W[13]=W[18]=W[23]="-",W[14]="4",Q=0;Q<36;)W[Q]||(J=0|Math.random()*16,W[Q]=j[Q===19?J&3|8:J]),Q++;return W.join("")}},69164:function(be,he,r){"use strict";var F=r(34792),m=r(48086);function _(W){W&&W.length>0&&m.default.success(W)}he.Z=_},65202:function(be,he,r){"use strict";r.d(he,{p:function(){return F}});function F(){return localStorage.getItem("themeColor")||"#516AE6"}},25547:function(be,he,r){"use strict";r.d(he,{Yd:function(){return _},VX:function(){return j},lK:function(){return Q},NP:function(){return J}});var F=r(88986),m=r(93485);function _(y,A,d){var U=0;function R(V,S){for(var D=0;D<V.length;D++){var a=V[D];if(a[y]===A){U=S;break}else a.children instanceof Array&&a.children.length&&R(a.children,S+1)}}return R(d,1),U}function W(y){var A=1;function d(U,R){U.forEach(V=>{R>A&&(A=R),V.children&&V.children.length>0&&d(V.children,R+1)})}return d(y,1),A}function j(y,A,d){y.forEach((U,R,V)=>{if(U.id===A)return d(U,R,V);if(U.children)return j(U.children,A,d)})}function Q(y,A){var d;function U(R){var V=(0,m.Z)(R),S;try{for(V.s();!(S=V.n()).done;){var D=S.value;if(D.id==A){d={id:D.id,name:D.name,children:D.children,parentId:D.parentId};break}D.children&&D.children instanceof Array&&D.children.length>0&&U(D.children)}}catch(a){V.e(a)}finally{V.f()}}return U(y),d?(0,F.Z)((0,F.Z)({},d),{},{children:d.children instanceof Array?d.children:[]}):{children:[],id:"",name:""}}var J=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",R=[...A];function V(S){Object.keys(d).forEach(D=>{var a=D,z=d[D];S[z]=S[a],S[U]=S[U]&&S[U]instanceof Array?[...S[U]]:[],S[U].length?S[U].forEach(B=>{V(B)}):delete S[U]})}return R.forEach(S=>V(S)),R}},4412:function(be){be.exports="data:image/png;base64,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"}}]);
