(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3032],{53009:function(et,we,n){"use strict";n.d(we,{TD:function(){return F},$S:function(){return x},aI:function(){return U},Bg:function(){return Ce},tT:function(){return Se},XN:function(){return V},YK:function(){return Ze},$x:function(){return ke}});var B=n(81211),K=n(88986),ce=n(78138),p=n.n(ce),E=n(78001),O=n(76651),Y=n(38642),ye=n(6793),W=n(37055),oe=n(75205);function le(o){return o.map(f=>({name:f.name,id:f.id,proportion:0,disabled:f.totalCount===0||f.total_count===0}))}function g(o,f){return f.map((w,T)=>(0,K.Z)((0,K.Z)({},o[T]),{},{disabled:w.total_count===0}))}var e=o=>{var f=0,w=o.checkedValue,T=o.fillBlank,b=o.shortAnswer;return w===2?T.checked&&!b.checked?f=3:!T.checked&&b.checked?f=4:f=2:f=1,f},j=o=>{for(var f in o)o[(0,Y.FI)(f)]=o[f];return o},F=(o,f,w,T,b,s)=>{var t=o.map((a,X)=>{var ie=a.list.map((c,l)=>{var v,d=c.data,_e={};switch(c.componentName){case"CoursewareSelector":_e={courseId:c.id,courseSort:l,courseType:3,flag:1,mappingId:c.mappingId?c.mappingId:""};break;case"CourseSelector":_e={courseId:c.id,courseSort:l,courseType:1,flag:1,mappingId:c.mappingId?c.mappingId:""};break;case"AddExam":_e={courseSort:l,title:d.title,type:"ex",cheatFlag:d.cheatFlag.isChecked?1:0,faceRecognition:d.cheatFlag.faceRecognition,examDuration:d.examDuration,summary:d.summary,flag:2,mappingId:c.mappingId?c.mappingId:"",courseId:c.id,markType:e(d.markType),paperId:d.questionsMode===1?d.fixedQuestion.id:"",paperTitle:d.questionsMode===1?d.fixedQuestion.name:"",passLine:d.passLine,questionBankList:d.questionsMode===1?"":d.randomQuestion.bankQuesitonVoList.map(ge=>ge.id).join(","),questionMode:d.questionsMode,showKnowledge:d.knowledgePoints===1?"show":"hide",repeatExam:d.reExam.isChecked,multipleCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.multipleCount,multipleUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.multipleScore,fillBlankCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.fillBlankCount,fillBlankUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.fillBlankScore,fillBlankType:d.questionsMode===1?1:d.randomQuestion.bankQuesitonInfo.fillBlankType,shortAnswerCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.shortAnswerCount,shortAnswerUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.shortAnswerScore,shortAnswerType:d.questionsMode===1?1:d.randomQuestion.bankQuesitonInfo.shortAnswerType,singleCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.singleCount,singleUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.singleScore,trueOrFalseCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.trueOrFalseCount,trueOrFalseUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multipleMissedScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.multipleMissedScore,totalScore:d.questionsMode===1?d.fixedQuestion.tableList.totalScore:"",answerParsing:d.reExam.isChecked?d.reExam.allowed.end:d.reExam.notAllowed.end,passingScore:d.questionsMode===1?Number(d.fixedQuestion.tableList.totalScore*d.passLine/100).toFixed(1):60,cutScreenCount:d.cheatFlag.switchNum!==null?d.cheatFlag.switchNum:-1,reExamRule:d.reExam.allowed.reRule,reExamNumber:d.reExam.allowed.reRule===2?d.reExam.allowed.reNum:0,scoreRule:d.reExam.allowed.record,viewRule:d.reExam.allowed.viewRule,proportional:d.questionsMode===2&&d.isOpenDrawQuestions?d.proportional:[],anonymousMarking:"".concat(d.markType.anonymousMarking),show_result:d.reExam.show_result};break;case"AddNewExam":var xe=c.data,be=xe.paperInfo,J=xe.exam_times,Ue=xe.cut_screen_times,Oe=xe.random_order,Ke=xe.mark_setting,Pe=xe.result_visible,ut=xe.face_recognition,rt=(0,B.Z)(xe,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);_e={courseSort:l,flag:15,courseType:15,type:"ex",courseId:c.id,mappingId:c.mappingId?c.mappingId:"",new_exam:(0,K.Z)((0,K.Z)((0,K.Z)({},rt),(0,oe.jJ)(ut)),{},{paper_id:be.id,answer_rule:J.answer_rule,exam_count:J.exam_count||1,cut_screen_rule:Ue.cut_screen_rule,cut_screen_count:Ue.cut_screen_count||1,cut_screen_interval:Ue.cut_screen_interval||0,random_question:Oe.random_question,random_options:Oe.random_options,mark_type:Ke.mark_type,mark_question_type:{fill_blank:Ke.mark_type===oe.lt.MANUAL?Ke.fill_blank:!1,short_answer:Ke.mark_type===oe.lt.MANUAL?Ke.short_answer:!1},anonymous_marking:Ke.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...Ke.marker_list.map(ge=>typeof ge=="string"?ge:ge.id)],result_view_rule:Pe.result_view_rule,answer_parsing:Pe.answer_parsing,ranking_list_view_rule:Pe.ranking_list_view_rule,show_result:Pe.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};break;case"OfflineTrain":_e={courseSort:l,flag:3,id:f&&!b?c.id:"",type:"xx",mappingId:c.mappingId?c.mappingId:"",title:d.title,begin_time:p()(d.dateRange.startTime).valueOf(),end_time:p()(d.dateRange.endTime).valueOf(),attachment:d.attachment.map(ge=>ge.id),course_duration:d.course_duration||"",lecturer_id:d.teacher.id,is_lecturer_confirm:!!d.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!d.teacher.is_lecturer_subsidy,address:d.address,introduction:d.introduction,is_open_offline_assessment:d.assess.is_open_offline_assessment,is_open_upload:d.other.is_open_upload,is_open_schedule:!1,remind_type:d.remind.remind_type,advance_minute:d.remind.advance_minute?Number(d.remind.advance_minute):0,is_lecturer_remind:d.remind.is_lecturer_remind,is_student_remind:d.remind.is_student_remind,is_lecturer_student_evaluate:d.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:d.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:d.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:d.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:d.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:d.evaluate.student_course_evaluate_content,assessment_total_score:d.assess.assessment_total_score,assessment_pass_score:d.assess.assessment_pass_score};break;case"AddInvestigate":w==="study"?_e={courseSort:l,courseType:9,flag:4,id:c.id,questionnaireId:c.questionnaire.id,title:c.name,type:"questionnaire",mappingId:c.mappingId?c.mappingId:""}:_e={courseId:c.id,courseType:9,flag:9,courseSort:l,investigate:{id:c.id,title:c.name,questionnaire_id:c.questionnaire.id}};break;case"AddPracticeTest":_e={courseType:10,courseSort:l,flag:w==="study"?5:4,type:"sc",id:c.id,title:c.data.title,content:c.data.content||c.data.address,resources:c.data.attachment.map(ge=>({resourceId:ge.id})),scoreSetting:{scoreSwitch:c.data.mark.isFull?"on":"off",score:c.data.mark.value},workflowJson:c.data.workFlowTemplateId?{}:i(c.data.supervisor),mappingId:c.mappingId?c.mappingId:"",job_type:c.data.job_type,workFlowTemplateId:c.data.workFlowTemplateId};break;case"AddJobEvaluation":_e={courseSort:l,flag:6,title:c.data.title,productId:c.data.evaluationTools.product_id,modelId:c.data.evaluationTools.model_id,id:c.id||"",mappingId:c.mappingId?c.mappingId:""};break;case"Attendance":_e={courseSort:l,flag:13,id:f&&!b?c.id:"",type:"attendance",mappingId:c.mappingId?c.mappingId:"",title:d.title,directors:d.directors.map(ge=>typeof ge=="object"&&(ge.id||ge.user_id)?ge.id||ge.user_id:ge),name:d.name,qrcode_type:d.qrcode_type||"statics",sign_in_begin_time:d.sign_in_begin_time?p()(d.sign_in_begin_time).valueOf():"",sign_in_end_time:d.sign_in_end_time?p()(d.sign_in_end_time).valueOf():"",sign_out_begin_time:d.sign_out_begin_time?p()(d.sign_out_begin_time).valueOf():"",sign_out_end_time:d.sign_out_end_time?p()(d.sign_out_end_time).valueOf():"",relate_course:d.relate_course,relate_course_list:((v=d.relate_course_list)===null||v===void 0?void 0:v.length)>0?d.relate_course_list:[],remind_directors:d.remind_directors,advance_minute:d.advance_minute||0,qy_we_chat_vo:d.qy_we_chat_vo,address:d.address,longitude:d.longitude,latitude:d.latitude,address_detail:d.address_detail,sign_range:d.sign_range};break;case"AddAssessment":_e=(0,K.Z)((0,K.Z)({},j(c.data)),{},{tutorId:s,courseSort:l,courseType:14,flag:14});break;default:break}return T==="unlock_mode"&&d.unlockingTime&&(_e.unlockingTime=p()(d.unlockingTime).valueOf()),_e.resource_lock=c.resource_lock||!1,_e});return{content:a.desc,stageName:a.name,isOrder:a.inOrder,stageSort:X+1,stageId:f?a.stageId:"",startTime:T==="unlock_mode"&&a.studyTime?p()(a.studyTime[0]).valueOf():null,endTime:T==="unlock_mode"&&a.studyTime?p()(a.studyTime[1]).valueOf():null,course:ie}});return t},x=o=>{var f=o.map((w,T)=>({content:w.desc,stage_name:w.name,is_order:w.inOrder,stage_sort:T+1,stage_id:w.stageId,resources:w.list.map((b,s)=>{var t=b.data;switch(b.componentName){case"CoursewareSelector":return{course_id:b.id,course_sort:s,course_type:3,flag:1,mappingId:b.mappingId};case"AddMentorCoaching":return{course_id:b.id,tutorials:{id:b.id,title:t.title,content:t.content,model:t.model,tutor_model:t.tutor_model,evaluation_type:t.evaluation_type,user_id:t.user_id||"",user_name:t.user_name||""},course_sort:s,course_type:12,flag:7,mappingId:b.mappingId};case"CourseSelector":return{course_id:b.id,course_sort:s,course_type:1,flag:1,mappingId:b.mappingId};case"AddExam":return{exam:{id:b.id,title:t.title,cheat_flag:t.cheatFlag.isChecked?1:0,exam_duration:t.examDuration,face_recognition:t.cheatFlag.faceRecognition,summary:t.summary,mark_type:e(t.markType),paper_id:t.questionsMode===1?t.fixedQuestion.id:"",paper_name:t.questionsMode===1?t.fixedQuestion.name:"",pass_line:t.passLine,question_banks:t.questionsMode===1?"":t.randomQuestion.bankQuesitonVoList.map(be=>be.id),question_mode:t.questionsMode,show_knowledge:t.knowledgePoints===1?"show":"hide",repeat_exam:t.reExam.isChecked,multiple_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.shortAnswerType,short_answer_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerScore,single_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleScore,multiple_missed_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleMissedScore,true_or_false_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseScore,total_score:t.questionsMode===1?t.fixedQuestion.tableList.totalScore:"",answer_parsing:t.reExam.isChecked?t.reExam.allowed.end:t.reExam.notAllowed.end,passing_score:t.questionsMode===1?Number(t.fixedQuestion.tableList.totalScore*t.passLine/100).toFixed(1):60,cut_screen_count:t.cheatFlag.switchNum!==null?t.cheatFlag.switchNum:-1,re_exam_rule:t.reExam.allowed.reRule,re_exam_number:t.reExam.allowed.reRule===2?t.reExam.allowed.reNum:0,score_rule:t.reExam.allowed.record,view_rule:t.reExam.allowed.viewRule,proportional:t.questionsMode===2&&t.isOpenDrawQuestions?t.proportional:[],anonymous_marking:"".concat(t.markType.anonymousMarking),show_result:t.reExam.show_result},flag:2,course_sort:s,course_id:b.id,course_type:6,mappingId:b.mappingId};case"AddNewExam":var a=b.data,X=a.paperInfo,ie=a.exam_times,c=a.cut_screen_times,l=a.random_order,v=a.mark_setting,d=a.result_visible,_e=a.face_recognition,xe=(0,B.Z)(a,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_sort:s,flag:15,type:"ex",course_id:b.id,course_type:15,mappingId:b.mappingId?b.mappingId:"",new_exam:(0,K.Z)((0,K.Z)((0,K.Z)({},xe),(0,oe.jJ)(_e)),{},{paper_id:X.id,answer_rule:ie.answer_rule,exam_count:ie.exam_count||1,cut_screen_rule:c.cut_screen_rule,cut_screen_count:c.cut_screen_count||1,cut_screen_interval:c.cut_screen_interval||0,random_question:l.random_question,random_options:l.random_options,mark_type:v.mark_type,mark_question_type:{fill_blank:v.mark_type===oe.lt.MANUAL?v.fill_blank:!1,short_answer:v.mark_type===oe.lt.MANUAL?v.short_answer:!1},anonymous_marking:v.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...v.marker_list.map(be=>typeof be=="string"?be:be.id)],result_view_rule:d.result_view_rule,answer_parsing:d.answer_parsing,ranking_list_view_rule:d.ranking_list_view_rule,show_result:d.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddPracticeTest":return{operation:{id:b.id,title:b.data.title,content:b.data.content||b.data.address,type:"sc",resources:b.data.attachment.map(be=>({resourceId:be.id})),score_setting:{scoreSwitch:b.data.mark.isFull?"on":"off",score:b.data.mark.value},workflow_json:i(b.data.supervisor),sort:s,job_type:b.data.job_type},course_type:10,course_sort:s,flag:5,mappingId:b.mappingId};case"AddInvestigate":return{course_id:b.id,course_type:9,flag:4,course_sort:s,investigate:{id:b.id,title:b.name,questionnaire_id:b.questionnaire.id}};default:return null}})}));return f};function i(o){var f=[];if(o.type==="multilevel"){var w=o.multilevel;w.forEach(T=>{var b=[];T.forEach(s=>{b.push(s.id)}),f.push(b.join(","))})}else o.type==="or"?(o.or.forEach(T=>{f.push(T.id)}),f=[f.join(",")]):f=[];return{type:o.type,userIds:f}}var U=o=>{function f(s){if(s.questionMode===1){if(s.paperVo.fillBlankCount>0||s.paperVo.shortAnswerCount>0)return!0}else if(s.fillBlankCount>0||s.shortAnswerCount>0)return!0;return!1}function w(s){if(s.questionMode===1){if(s.paperVo.fillBlankCount>0)return!0}else if(s.fillBlankCount>0)return!0;return!1}function T(s){if(s.questionMode===1){if(s.paperVo.shortAnswerCount>0)return!0}else if(s.shortAnswerCount>0)return!0;return!1}var b=o.map((s,t)=>({key:"".concat(new Date().getTime()).concat(t),desc:s.content,name:s.stageName,inOrder:s.isOrder,stageId:s.id,studyTime:s.startTime?[p()(s.startTime),p()(s.endTime)]:["",""],list:s.courseMappingList.map(a=>{var X,ie,c=a.planExamVos,l={},v,d;switch(a.flag){case 1:a.contentType==="audio/mp3"||a.contentType==="audio/mpeg"||a.contentType==="audio"?(d="mp3",v="mp3"):(d=a.type,v=a.type==="imageText"?"h5":a.type),l={id:a.courseId,name:a.name,type:a.courseType===1?"course":"courseware",icon:W.e1[v],originalType:d,componentName:a.courseType===1?"CourseSelector":"CoursewareSelector",status:a.courseType===1?"0":a.status,duration:a.duration,data:a,mappingId:a.mappingId};break;case 2:l={id:a.id,name:a.name,type:"ex",icon:W.e1.ex,componentName:"AddExam",duration:c.examDuration*60,data:{title:c.title,examDuration:c.examDuration,summary:c.summary,isOpenDrawQuestions:c.proportionalExamVos&&c.proportionalExamVos.length>0,proportional:c.proportionalExamVos&&(c.proportionalExamVos.length>0?g(c.proportionalExamVos,c.bankQuesitonVoList):c.questionMode===2?le(c.bankQuesitonVoList):[])||[],cheatFlag:{isChecked:!!c.cheatFlag,switchNum:c.cutScreenCount===-1?null:c.cutScreenCount,faceRecognition:c.faceRecognition},reExam:{show_result:c.show_result,isChecked:c.repeatExam,userJoin:c.user_join==="true",notAllowed:{end:c.answerParsing},allowed:{reRule:c.reExamRule,record:c.scoreRule,end:c.answerParsing,reNum:c.reExamRule===2?c.reExamNumber:1,viewRule:c.viewRule}},markType:{checkedValue:c.markType===1?1:2,artificialDisabled:c.markType===1&&!f(c),fillBlank:{checked:(c.markType===2||c.markType===3)&&w(c),disabled:!w(c)},shortAnswer:{checked:(c.markType===2||c.markType===4)&&T(c),disabled:!T(c)},anonymousMarking:c.anonymous_marking==="true"},questionsMode:c.questionMode,knowledgePoints:c.showKnowledge==="show"?1:2,passLine:c.passLine,fixedQuestion:c.questionMode===1?{id:c.paperVo.id,name:c.paperVo.title,tableList:{fillBlankCount:c.paperVo.fillBlankCount,fillBlankScore:c.paperVo.fillBlankScore,multipleCount:c.paperVo.multipleCount,multipleScore:c.paperVo.multipleScore,shortAnswerCount:c.paperVo.shortAnswerCount,shortAnswerScore:c.paperVo.shortAnswerScore,singleCount:c.paperVo.singleCount,singleScore:c.paperVo.singleScore,totalCount:c.paperVo.totalCount,totalScore:c.paperVo.totalScore,trueOrFalseCount:c.paperVo.trueOrFalseCount,trueOrFalseScore:c.paperVo.trueOrFalseScore}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:c.questionMode===2?{bankQuesitonVoList:c.bankQuesitonVoList.map(Ke=>({id:Ke.id,name:Ke.name,data:Ke})),bankQuesitonInfo:{fillBlankCount:c.fillBlankCount,fillBlankScore:c.fillBlankUnitScore,fillBlankType:+c.fillBlankType||1,multipleCount:c.multipleCount,multipleScore:c.multipleUnitScore,shortAnswerCount:c.shortAnswerCount,shortAnswerScore:c.shortAnswerUnitScore,shortAnswerType:+c.shortAnswerType||1,singleCount:c.singleCount,singleScore:c.singleUnitScore,trueOrFalseCount:c.trueOrFalseCount,trueOrFalseScore:c.trueOrFalseUnitScore,multipleMissedScore:c.multipleMissedScore}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},mappingId:a.mappingId,isExamEdit:a.isExamEdit};break;case 3:var _e=a.offline_course_vo;l={id:a.id,name:a.name,type:"xx",componentName:"OfflineTrain",icon:W.e1.xx,data:(0,K.Z)({},C(_e)),mappingId:a.mappingId};break;case 4:case 5:if(a.type==="sc"||a.type==="operation"){l={id:a.id,name:a.title,type:"sc",icon:W.e1.sc,componentName:"AddPracticeTest",data:(0,Y.UI)("PRIVACY_HLS_APPROVAL_MANAGE")?Z(a):q(a),mappingId:a.mappingId};break}l={id:a.courseId,name:a.title||a.name,type:"investigate",icon:W.e1.questionnaire,componentName:"AddInvestigate",data:a,mappingId:a.mappingId,questionnaire:{id:a.questionnaireId,name:a.name}};break;case 6:l={id:a.evaluation.id,name:a.evaluation.title,productId:a.evaluation.product_id,modelId:a.evaluation.model_id,type:"jobEvaluation",icon:W.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:a.evaluation.title,evaluationTools:{product_id:a.evaluation.product_id,model_id:a.evaluation.model_id}},mappingId:a.mappingId};break;case 7:l={id:a.id,name:a.tutorials.title,type:"tutor",icon:W.e1.tutor,componentName:"AddMentorCoaching",data:(0,K.Z)((0,K.Z)({},a.tutorials),{},{tutor_model:a.tutorials.tutorModel,evaluation_type:a.tutorials.evaluationType,user_id:a.tutorials.userId,user_name:a.tutorials.userName}),mappingId:a.mappingId};break;case 9:l={id:a.courseId,name:a.title,type:"investigate",icon:W.e1.questionnaire,componentName:"AddInvestigate",data:a,questionnaire:{id:a.questionnaireId,name:a.name}};break;case 13:var xe=a.course_sign_vo;l={id:a.id,name:a.name,type:"attendance",componentName:"Attendance",icon:W.e1.attendance,data:(0,K.Z)({},y(xe)),mappingId:a.mappingId};break;case 14:l={id:(a==null||(X=a.evaluate)===null||X===void 0?void 0:X.id)||"",name:(a==null||(ie=a.evaluate)===null||ie===void 0?void 0:ie.name)||"",type:"assess",componentName:"AddAssessment",icon:W.e1.assess,data:(0,K.Z)({},G(a.evaluate)),resource_lock:a.resource_lock};break;case 15:{var be=(0,O.Qm)()._store,J=be.getState(),Ue=J.user,Oe=(0,oe.AC)({data:a.exam_plan_detail_v1,user:{id:Ue.id,name:Ue.name,creator:!0}});l={id:a.exam_plan_detail_v1.id,name:a.exam_plan_detail_v1.title,type:"ex",icon:W.e1.ex,componentName:"AddNewExam",duration:a.exam_plan_detail_v1.exam_duration*60,data:Oe,mappingId:a.mappingId,isExamEdit:a.isExamEdit}}default:break}return l.data&&(l.data.unlockingTime=a.unlockingTime?p()(a.unlockingTime):""),l.resource_lock=a.resource_lock,l})}));return b};function Z(o){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources";return o.supervisor={lead:"",multilevel:[],or:[],type:"or"},o.mark={isFull:o.scoreSetting.score_switch==="on",value:o.scoreSetting.score_switch==="on"?o.scoreSetting.score:100},o.attachment=o[f],o}function q(o){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources",w=[],T=[];return o.workflowJson.type==="or"?o.workflowJson.nodeList[0].forEach(b=>{w.push({type:2,id:b.id,name:b.name,show:!0,unionid:b.unionid,user_id:b.sync_user_id,source_type:b.source_type||b.sourceType})}):o.workflowJson.type==="multilevel"&&o.workflowJson.nodeList.forEach(b=>{b.forEach(s=>{s.user_id=s.sync_user_id}),T.push(b)}),o.supervisor={or:w,multilevel:T,lead:"",type:o.workflowJson.type},o.mark={isFull:o.scoreSetting.score_switch==="on",value:o.scoreSetting.score_switch==="on"?o.scoreSetting.score:100},o.attachment=o[f],o}var Ce=(o,f)=>{var w=o.map((T,b)=>({id:T.id?T.id:"",content:T.desc,stage_name:T.name,is_order:f==="free_mode"?!1:T.inOrder,sort:b+1,progress:T.Standard.progressCheck?T.Standard.progress:"",exam_times:T.Standard.examCheck?T.Standard.examNum:"",practice_times:T.Standard.bankCheck?T.Standard.bankNum:"",operation_times:T.Standard.practiceCheck?T.Standard.practiceNum:"",finish_evaluation:T.Standard.jobEvaluationCheck?"true":"false",is_get_score:T.reward.getScoreChecked?T.reward.getScore:"",certificate_id:T.reward.certificateChecked?T.reward.certificateId:"",resources:T.list.map((s,t)=>{var a=s.data;switch(s.componentName){case"CoursewareSelector":return{course_id:s.id,replaced_old_id:s.replaced_old_id===s.id?"":s.replaced_old_id,sort:t,type:3,lab_resource_id:s.lab_resource_id,lab_resource_name:s.lab_resource_name,resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"ClNewUpload":case"CourseSelector":return{course_id:s.id,replaced_old_id:s.replaced_old_id||"",sort:t,type:1,lab_resource_id:s.lab_resource_id,lab_resource_name:s.lab_resource_name,resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"LiveClass":return{course_id:s.id,replaced_old_id:s.replaced_old_id||"",sort:t,type:16,lab_resource_id:s.lab_resource_id,lab_resource_name:s.lab_resource_name,resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"AddExam":return{type:6,sort:t,course_id:s.id,exam:{title:a.title,cheat_flag:a.cheatFlag.isChecked?1:0,exam_duration:a.examDuration,face_recognition:a.cheatFlag.faceRecognition,summary:a.summary,mark_type:e(a.markType),paper_id:a.questionsMode===1?a.fixedQuestion.id:"",pass_line:a.passLine,question_banks:a.questionsMode===1?[]:a.randomQuestion.bankQuesitonVoList.map(J=>J.id),question_mode:a.questionsMode,show_knowledge:a.knowledgePoints===1?"show":"hide",repeat_exam:a.reExam.isChecked,multiple_count:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:a.questionsMode===1?1:a.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:a.questionsMode===1?1:a.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:a.questionsMode===1?"":a.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:a.questionsMode===1?a.fixedQuestion.tableList.totalScore:"",answer_parsing:a.reExam.isChecked?a.reExam.allowed.end:a.reExam.notAllowed.end,passing_score:a.questionsMode===1?Number(a.fixedQuestion.tableList.totalScore*a.passLine/100).toFixed(1):60,cut_screen_count:a.cheatFlag.switchNum!==null?a.cheatFlag.switchNum:-1,re_exam_rule:a.reExam.allowed.reRule,re_exam_number:a.reExam.allowed.reRule===2?a.reExam.allowed.reNum:0,score_rule:a.reExam.allowed.record,view_rule:a.reExam.allowed.viewRule,proportional:a.questionsMode===2&&a.isOpenDrawQuestions?a.proportional:[],anonymous_marking:"".concat(a.markType.anonymousMarking),show_result:a.reExam.show_result},resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"AddNewExam":var X=s.data,ie=X.paperInfo,c=X.exam_times,l=X.cut_screen_times,v=X.random_order,d=X.mark_setting,_e=X.result_visible,xe=X.face_recognition,be=(0,B.Z)(X,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{type:15,sort:t,course_id:s.id,new_exam:(0,K.Z)((0,K.Z)((0,K.Z)({},be),(0,oe.jJ)(xe)),{},{paper_id:ie.id,answer_rule:c.answer_rule,exam_count:c.exam_count||1,cut_screen_rule:l.cut_screen_rule,cut_screen_count:l.cut_screen_count||1,cut_screen_interval:l.cut_screen_interval||0,random_question:v.random_question,random_options:v.random_options,mark_type:d.mark_type,mark_question_type:{fill_blank:d.mark_type===oe.lt.MANUAL?d.fill_blank:!1,short_answer:d.mark_type===oe.lt.MANUAL?d.short_answer:!1},anonymous_marking:d.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...d.marker_list.map(J=>typeof J=="string"?J:J.id)],result_view_rule:_e.result_view_rule,answer_parsing:_e.answer_parsing,ranking_list_view_rule:_e.ranking_list_view_rule,show_result:_e.show_result,reward_rule:null,authority_range:null,supervisor_mark:null}),resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"OfflineTrain":return{sort:t,type:7,course_id:s.id,offline_course:{id:a.id,title:a.title,begin_time:p()(a.dateRange.startTime).valueOf(),end_time:p()(a.dateRange.endTime).valueOf(),attachment:a.attachment.map(J=>J.id),course_duration:a.course_duration||"",lecturer_id:a.teacher.id,is_lecturer_confirm:!!a.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!a.teacher.is_lecturer_subsidy,address:a.address,introduction:a.introduction,is_open_offline_assessment:a.assess.is_open_offline_assessment,is_open_upload:a.other.is_open_upload,is_open_schedule:!1,remind_type:a.remind.remind_type,advance_minute:a.remind.advance_minute?Number(a.remind.advance_minute):0,is_lecturer_remind:a.remind.is_lecturer_remind,is_student_remind:a.remind.is_student_remind,is_director_remind:a.remind.is_director_remind,is_lecturer_student_evaluate:a.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:a.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:a.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:a.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:a.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:a.evaluate.student_course_evaluate_content,assessment_total_score:a.assess.assessment_total_score,assessment_pass_score:a.assess.assessment_pass_score},resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"AddInvestigate":return{sort:t,type:9,course_id:s.id||"",questionnaire_id:s.questionnaire.id,resource_lock:s.resource_lock||!1,title:s.name,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"AddPracticeTest":return{type:10,courseSort:t,sort:t,flag:4,course_id:s.id,title:s.data.title,content:s.data.content||s.data.address,resources:s.data.attachment.map(J=>({resourceId:J.id})),scoreSetting:{scoreSwitch:s.data.mark.isFull?"on":"off",score:s.data.mark.value},workflowJson:i(s.data.supervisor),job_type:s.data.job_type,resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"AddJobEvaluation":return{sort:t,flag:6,type:11,evaluation:{id:s.id||"",title:s.data.title,product_id:s.data.evaluationTools.product_id,model_id:s.data.evaluationTools.model_id},resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"Attendance":return{sort:t,type:13,course_id:s.id,sign:{id:a.id,type:13,title:a.title,directors:a.directors.map(J=>typeof J=="object"&&(J.id||J.user_id)?J.id||J.user_id:J),name:a.name||"--",qrcode_type:a.qrcode_type,sign_in_begin_time:a.sign_in_begin_time,sign_in_end_time:a.sign_in_end_time,sign_out_begin_time:a.sign_out_begin_time,sign_out_end_time:a.sign_out_end_time,relate_course:a.relate_course,relate_course_list:a.relate_course_list,remind_directors:a.remind_directors,advance_minute:a.advance_minute,qy_we_chat_vo:a.qy_we_chat_vo,address:a.address,longitude:a.longitude,latitude:a.latitude,address_detail:a.address_detail,sign_range:a.sign_range},resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf()};case"AddAssessment":return{sort:t,type:14,course_id:s.id,resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf(),evaluateVo:{id:a.id,name:a.name,requirement:a.requirement,resource_id:a.resource_id,is_lock:a.is_lock,begin_time_unlock:a.begin_time_unlock,end_time_unlock:a.end_time_unlock,is_self_evaluate:a.is_self_evaluate,questionnaire_id:a.questionnaire_id,evaluate_form_title:a.evaluate_form_title,before_start_day:a.before_start_day,before_start_repeat:a.before_start_repeat,before_start_un_remind:a.before_start_un_remind,before_end_day:a.before_end_day,before_end_repeat:a.before_end_repeat,before_end_un_remind:a.before_end_un_remind,after_end_day:a.after_end_day,after_end_repeat:a.after_end_repeat,after_end_un_remind:a.after_end_un_remind,is_passed_standards:a.is_passed_standards,is_passed_option_three:a.is_passed_option_three,pass_standard_conditions:a.pass_standard_conditions,pass_standards_number:a.pass_standards_number,creator_user:a.creator_user}};case"AddPracticeBank":return{sort:t,type:17,course_id:s.id,resource_name:s.title,resource_lock:s.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:p()(s.unlocking_time).valueOf(),practice:{title:s.data.title,question_bank_list:s.data.randomQuestion.bankQuesitonVoList.map(J=>J.id),pass_line:Number(s.data.stand)}};default:return null}})}));return w},Se=function(f,w){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;function b(t){return t.fill_blank_count>0||t.short_answer_count>0}var s=f.map((t,a)=>{var X=t.resources.filter(l=>l.type==6||l.type==15).length,ie=t.resources.filter(l=>l.type==17).length,c=t.resources.filter(l=>l.type==10).length;return{id:t.id,key:"".concat(new Date().getTime()).concat(a),desc:t.content,name:t.stage_name,inOrder:t.is_order,Standard:{progressCheck:t.progress>0,progress:t.progress||100,examCheck:t.exam_times>0,examNum:t.exam_times||X,bankCheck:t.practice_times>0,bankNum:t.practice_times||ie,practiceCheck:t.operation_times>0,practiceNum:t.operation_times||c,jobEvaluationCheck:t.finish_evaluation==="true"},reward:{getScore:t.is_get_score?t.is_get_score:"",getScoreChecked:t.is_get_score>0,certificateId:t.certificate_id||"",certificateChecked:t.certificate_id!==0,certificateName:t.certificate_name,certificateImage:t.preview_url},hourClassId:t.id,hourClassStartTime:t.start_time,hourClassEndTime:t.end_time,list:t.resources.map(l=>{var v=l.exam;switch(l.type){case 1:return{id:l.course_id,name:l.resource_name,type:T&&l.biz_type==="imageText"?"twCourse":"course",icon:l.biz_type==="imageText"?W.e1.h5:W.e1.crs,componentName:"CourseSelector",duration:l.duration,data:l,unlocking_time:l.unlocking_time,lab_resource_id:l.lab_resource_id,lab_resource_name:l.lab_resource_name,lab_selected_id:l.lab_resource_id,resource_lock:l.resource_lock};case 3:{var d;return l.content_type==="article"||l.content_type==="link"?d=W.e1.h5:d=W.e1[l.contentType]||W.e1[l.content_type],{id:l.course_id,name:l.resource_name,type:"courseware",icon:d,componentName:"CoursewareSelector",duration:l.duration,status:l.resource_status,originalType:l.content_type==="article"||l.content_type==="link"?"h5":l.content_type||l.contentType,data:l,unlocking_time:l.unlocking_time,lab_resource_id:l.lab_resource_id,lab_resource_name:l.lab_resource_name,lab_selected_id:l.lab_resource_id,resource_lock:l.resource_lock}}case 6:return{id:l.course_id,name:v.title,type:"ex",icon:W.e1.ex,componentName:"AddExam",duration:v.exam_duration*60,data:{id:v.id,title:v.title,examDuration:v.exam_duration,summary:v.summary,isOpenDrawQuestions:v.proportionalExamVos&&v.proportionalExamVos.length>0,proportional:v.proportionalExamVos&&(v.proportionalExamVos.length>0?g(v.proportionalExamVos,v.question_bank_vos):v.question_mode===2?le(v.question_bank_vos):[])||[],cheatFlag:{isChecked:!!v.cheat_flag,switchNum:v.cut_screen_count===-1?null:v.cut_screen_count,faceRecognition:v.face_recognition},reExam:{show_result:v.show_result,isChecked:v.repeat_exam,userJoin:w?!1:v.user_join==="true",notAllowed:{end:v.answer_parsing},allowed:{reRule:v.re_exam_rule,record:v.score_rule,end:v.answer_parsing,reNum:v.re_exam_rule===2?v.re_exam_number:1,viewRule:v.view_rule}},markType:{checkedValue:v.mark_type===1?1:2,artificialDisabled:v.mark_type===1&&!b(v),fillBlank:{checked:(v.mark_type===2||v.mark_type===3)&&v.fill_blank_count,disabled:!v.fill_blank_count},shortAnswer:{checked:(v.mark_type===2||v.mark_type===4)&&v.short_answer_count,disabled:!v.short_answer_count},anonymousMarking:v.anonymous_marking==="true"},questionsMode:v.question_mode,knowledgePoints:v.show_knowledge==="show"?1:2,passLine:v.pass_line,fixedQuestion:v.question_mode===1?{id:v.paper_id,name:v.paper_name,tableList:{fillBlankCount:v.fill_blank_count,fillBlankScore:v.fill_blank_unit_score,multipleCount:v.multiple_count,multipleScore:v.multiple_unit_score,shortAnswerCount:v.short_answer_count,shortAnswerScore:v.short_answer_unit_score,singleCount:v.single_count,singleScore:v.single_unit_score,totalCount:v.total_count,totalScore:v.total_score,trueOrFalseCount:v.true_or_false_count,trueOrFalseScore:v.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:v.question_mode===2?{bankQuesitonVoList:v.question_bank_vos.map(Oe=>{var Ke=Oe.fill_blank_count,Pe=Oe.multiple_count,ut=Oe.short_answer_count,rt=Oe.single_count,ge=Oe.total_count,vt=Oe.true_or_false_count,Tt={fillBlankCount:Ke,shortAnswerCount:ut,multipleCount:Pe,singleCount:rt,totalCount:ge,trueOrFalseCount:vt};return{id:Oe.id,name:Oe.name,data:Object.assign(Oe,Tt),fillBlankCount:Ke,shortAnswerCount:ut,multipleCount:Pe,singleCount:rt,totalCount:ge,trueOrFalseCount:vt}}),bankQuesitonInfo:{fillBlankCount:v.fill_blank_count,fillBlankScore:v.fill_blank_unit_score,fillBlankType:+v.fillBlankType,multipleCount:v.multiple_count,multipleScore:v.multiple_unit_score,shortAnswerCount:v.short_answer_count,shortAnswerScore:v.short_answer_unit_score,shortAnswerType:+v.shortAnswerType,singleCount:v.single_count,singleScore:v.single_unit_score,trueOrFalseCount:v.true_or_false_count,trueOrFalseScore:v.true_or_false_unit_score,multipleMissedScore:v.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},unlocking_time:l.unlocking_time,resource_lock:l.resource_lock};case 7:return{id:w?"":l.offlineCourseEditVo.id,name:l.offlineCourseEditVo.title,key:l.offlineCourseEditVo.id,type:"xx",componentName:"OfflineTrain",icon:W.e1.xx,data:(0,K.Z)({},C(l.offlineCourseEditVo,w)),unlocking_time:l.unlocking_time,resource_lock:l.resource_lock};case 9:return{id:l.course_id,name:l.title||l.resource_name,type:"investigate",icon:W.e1.questionnaire,componentName:"AddInvestigate",data:l,questionnaire:{id:l.questionnaire_id,name:l.resource_name},unlocking_time:l.unlocking_time,resource_lock:l.resource_lock};case 10:return{id:l.course_id,name:l.title,type:"sc",icon:W.e1.sc,componentName:"AddPracticeTest",data:q(l,"operationResources"),unlocking_time:l.unlocking_time,resource_lock:l.resource_lock};case 11:return{id:l.evaluation.id,name:l.evaluation.title,productId:l.evaluation.product_id,modelId:l.evaluation.model_id,type:"jobEvaluation",icon:W.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:l.evaluation.title,evaluationTools:{product_id:l.evaluation.product_id,model_id:l.evaluation.model_id}},unlocking_time:l.unlocking_time,resource_lock:l.resource_lock};case 13:return{id:l.course_sign_vo.id,name:l.course_sign_vo.name,type:"attendance",componentName:"Attendance",icon:W.e1.attendance,data:(0,K.Z)({},y(l.course_sign_vo,w)),unlocking_time:l.unlocking_time,resource_lock:l.resource_lock};case 14:return{id:l.evaluate?l.evaluate.id:"",name:l.evaluate?l.evaluate.name:"",type:"assess",componentName:"AddAssessment",icon:W.e1.assess,data:(0,K.Z)({},G(l.evaluate)),resource_lock:l.resource_lock,unlocking_time:l.unlocking_time};case 15:{var _e=(0,O.Qm)()._store,xe=_e.getState(),be=xe.user,J=(0,oe.AC)({data:l.exam_plan_detail_v1,user:{id:be.id,name:be.name,creator:!0}});return{id:l.exam_plan_detail_v1.id,name:l.exam_plan_detail_v1.title,type:"ex",icon:W.e1.ex,componentName:"AddNewExam",unlocking_time:l.unlocking_time,resource_lock:l.resource_lock,duration:l.exam_plan_detail_v1.exam_duration*60,data:J}}case 16:return{id:w?"":l.course_id,name:l.title,key:l.course_id,type:"liveClass",componentName:"LiveClass",icon:W.e1.liveClass,data:(0,K.Z)({},H(l)),unlocking_time:l.unlocking_time,resource_lock:l.resource_lock};case 17:var Ue=(0,oe.S8)(l.practice);return{id:l.course_id,name:l.resource_name,type:"practice",componentName:"AddPracticeBank",unlocking_time:l.unlocking_time,resource_lock:l.resource_lock,data:Ue};default:return null}})}});return s},V=o=>{var f=o.map((w,T)=>({content:w.desc,stage_name:w.name,order:"".concat(w.inOrder),sort:T+1,course:w.list.map((b,s)=>{var t=b.data;switch(b.componentName){case"CoursewareSelector":return{course_id:b.id,course_sort:s,course_type:3,flag:1};case"CourseSelector":return{course_id:b.id,course_sort:s,course_type:1,flag:1};case"AddExam":return{flag:2,type:"ex",course_sort:s,course_id:b.id,title:t.title,cheat_flag:t.cheatFlag.isChecked?1:0,exam_duration:t.examDuration,face_recognition:t.cheatFlag.faceRecognition,summary:t.summary,mark_type:e(t.markType),paper_id:t.questionsMode===1?t.fixedQuestion.id:"",paper_title:t.questionsMode===1?t.fixedQuestion.name:"",pass_line:t.passLine,question_bank_list:t.questionsMode===1?"":t.randomQuestion.bankQuesitonVoList.map(be=>be.id).join(","),question_mode:t.questionsMode,show_knowledge:t.knowledgePoints===1?"show":"hide",s_repeat_exam:"".concat(t.reExam.isChecked),multiple_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:t.questionsMode===1?1:t.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:t.questionsMode===1?"":t.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:t.questionsMode===1?t.fixedQuestion.tableList.totalScore:"",answer_parsing:t.reExam.isChecked?t.reExam.allowed.end:t.reExam.notAllowed.end,passing_score:t.questionsMode===1?Number(t.fixedQuestion.tableList.totalScore*t.passLine/100).toFixed(1):60,cut_screen_count:t.cheatFlag.switchNum!==null?t.cheatFlag.switchNum:-1,re_exam_rule:t.reExam.allowed.reRule,re_exam_number:t.reExam.allowed.reRule===2?t.reExam.allowed.reNum:0,score_rule:t.reExam.allowed.record,view_rule:t.reExam.allowed.viewRule,proportional:t.questionsMode===2&&t.isOpenDrawQuestions?t.proportional:[],anonymous_marking:"".concat(t.markType.anonymousMarking),show_result:t.reExam.show_result};case"AddNewExam":var a=b.data,X=a.paperInfo,ie=a.exam_times,c=a.cut_screen_times,l=a.random_order,v=a.mark_setting,d=a.result_visible,_e=a.face_recognition,xe=(0,B.Z)(a,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_type:15,flag:15,type:"ex",course_sort:s,course_id:b.id,new_exam:(0,K.Z)((0,K.Z)((0,K.Z)({},xe),(0,oe.jJ)(_e)),{},{paper_id:X.id,answer_rule:ie.answer_rule,exam_count:ie.exam_count||1,cut_screen_rule:c.cut_screen_rule,cut_screen_count:c.cut_screen_count||1,cut_screen_interval:c.cut_screen_interval||0,random_question:l.random_question,random_options:l.random_options,mark_type:v.mark_type,mark_question_type:{fill_blank:v.mark_type===oe.lt.MANUAL?v.fill_blank:!1,short_answer:v.mark_type===oe.lt.MANUAL?v.short_answer:!1},anonymous_marking:v.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...v.marker_list.map(be=>typeof be=="string"?be:be.id)],result_view_rule:d.result_view_rule,answer_parsing:d.answer_parsing,ranking_list_view_rule:d.ranking_list_view_rule,show_result:d.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddInvestigate":return{course_id:b.id,course_type:9,flag:9,course_sort:s,investigate:{id:b.id,title:b.name,questionnaire_id:b.questionnaire.id}};default:return null}})}));return f},Ze=o=>{function f(T){return T.fill_blank_count>0||T.short_answer_count>0}var w=o.map((T,b)=>({key:"".concat(new Date().getTime()).concat(b),desc:T.content,name:T.stage_name,inOrder:T.is_order,list:T.course_mapping_list.map(s=>{var t=s;switch(s.flag){case 1:return{id:s.course_id,name:s.name,type:s.course_type===1?"course":"courseware",icon:W.e1[s.type==="imageText"?"h5":s.contentType==="audio/mp3"?"mp3":s.type],originalType:s.type,componentName:s.course_type===1?"CourseSelector":"CoursewareSelector",status:s.course_type===1?"":s.status,duration:s.duration,data:s};case 2:return{id:s.course_id,name:t.title,type:"ex",icon:W.e1.ex,componentName:"AddExam",duration:t.exam_duration*60,data:{title:t.title,examDuration:t.exam_duration,summary:t.summary,isOpenDrawQuestions:t.proportionalExamVos&&t.proportionalExamVos.length>0,proportional:t.proportionalExamVos&&(t.proportionalExamVos.length>0?g(t.proportionalExamVos,t.bank_quesiton_list):t.question_mode===2?le(t.bank_quesiton_list):[])||[],cheatFlag:{isChecked:!!t.cheat_flag,switchNum:t.cut_screen_count===-1?null:t.cut_screen_count,faceRecognition:t.face_recognition},reExam:{show_result:t.show_result,isChecked:t.s_repeat_exam==="true",notAllowed:{end:t.answer_parsing},allowed:{reRule:t.re_exam_rule,record:t.score_rule,end:t.answer_parsing,reNum:t.re_exam_rule===2?t.re_exam_number:1,viewRule:t.view_rule}},markType:{checkedValue:t.mark_type===1?1:2,artificialDisabled:t.mark_type===1&&!f(t),fillBlank:{checked:(t.mark_type===2||t.mark_type===3)&&t.fill_blank_count,disabled:!t.fill_blank_count},shortAnswer:{checked:(t.mark_type===2||t.mark_type===4)&&t.short_answer_count,disabled:!t.short_answer_count},anonymousMarking:t.anonymous_marking==="true"},questionsMode:t.question_mode,knowledgePoints:t.show_knowledge==="show"?1:2,passLine:t.pass_line,fixedQuestion:t.question_mode===1?{id:t.paper_id,name:t.paper_title,tableList:{fillBlankCount:t.fill_blank_count,fillBlankScore:t.fill_blank_unit_score,multipleCount:t.multiple_count,multipleScore:t.multiple_unit_score,shortAnswerCount:t.short_answer_count,shortAnswerScore:t.short_answer_unit_score,singleCount:t.single_count,singleScore:t.single_unit_score,totalCount:t.paper_question_numbers,totalScore:t.total_score,trueOrFalseCount:t.true_or_false_count,trueOrFalseScore:t.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:t.question_mode===2?{bankQuesitonVoList:t.bank_quesiton_list.map(l=>{var v=l.fill_blank_count,d=l.multiple_count,_e=l.short_answer_count,xe=l.single_count,be=l.total_count,J=l.true_or_false_count,Ue={fillBlankCount:v,shortAnswerCount:_e,multipleCount:d,singleCount:xe,totalCount:be,trueOrFalseCount:J};return{id:l.id,name:l.name,data:Object.assign(l,Ue),fillBlankCount:v,shortAnswerCount:_e,multipleCount:d,singleCount:xe,totalCount:be,trueOrFalseCount:J}}),bankQuesitonInfo:{fillBlankCount:t.fill_blank_count,fillBlankScore:t.fill_blank_unit_score,fillBlankType:+t.fill_blank_type||1,multipleCount:t.multiple_count,multipleScore:t.multiple_unit_score,shortAnswerCount:t.short_answer_count,shortAnswerScore:t.short_answer_unit_score,shortAnswerType:+t.short_answer_type||1,singleCount:t.single_count,singleScore:t.single_unit_score,trueOrFalseCount:t.true_or_false_count,trueOrFalseScore:t.true_or_false_unit_score,multipleMissedScore:t.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}}};case 9:return{id:s.course_id,name:s.title,type:"investigate",icon:W.e1.questionnaire,componentName:"AddInvestigate",data:s,questionnaire:{id:s.questionnaire_id,name:s.name}};case 15:{var a=(0,O.Qm)()._store,X=a.getState(),ie=X.user,c=(0,oe.AC)({data:s.exam_plan_detail_v1,user:{id:ie.id,name:ie.name,creator:!0}});return{id:s.exam_plan_detail_v1.id,name:s.exam_plan_detail_v1.title,type:"ex",icon:W.e1.ex,componentName:"AddNewExam",duration:s.exam_plan_detail_v1.exam_duration*60,data:c}}default:return null}})}));return w},ke=function(f){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return f.map((T,b)=>{var s=w.find(t=>t.stage_index-1===b);return T.list.map((t,a)=>{var X;s&&(X=s.resource_error_vos.find(c=>c.resource_index===a));var ie=t.type;if(t.resource_type)switch(t.resource_type){case 1:ie="course";break;case 2:case 3:ie="courseware";break;case 6:case 15:ie="ex";break;case 7:ie="xx";break;case 9:ie="questionnaire";break;case 13:ie="attendance";break;case 14:ie="assess";break;default:break}if(t.componentName)switch(t.componentName){case"CourseSelector":ie="course";break;case"CoursewareSelector":ie="courseware";break;case"AddNewExam":case"AddExam":ie="ex";break;case"OfflineTrain":ie="xx";break;case"Attendance":ie="attendance";break;case"QuestionnaireSelector":case"AddInvestigate":ie="questionnaire";break;case"AddPracticeTest":ie="practicalIndustry";break;case"AddAssessment":ie="assess";break;default:break}switch(ie){case"course":t.resourceErrTip=X?X.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u88AB\u5220\u9664":X.resource_status==="un_released"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u300A".concat(X.resource_name,"\u300B\u672A\u53D1\u5E03\uFF0C\u8BF7\u542F\u7528\u540E\u518D\u7F16\u8F91"):"":"";break;case"courseware":t.resourceErrTip=X&&X.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u4EF6\u88AB\u5220\u9664":"";break;case"ex":t.resourceErrTip=X?X.resource_status==="bank_deleted"?"\u5F15\u7528\u7684\u9898\u5E93\u88AB\u5220\u9664":X.resource_status==="paper_deleted"?"\u5F15\u7528\u7684\u8BD5\u5377\u88AB\u5220\u9664":X.resource_status==="bank_missing"?"\u5F15\u7528\u7684\u9898\u5E93\u8BD5\u9898\u4E0D\u8DB3":"":"";break;case"xx":t.resourceErrTip=X&&X.resource_status==="time_expired"?"\u7EBF\u4E0B\u8BFE\u5DF2\u8FC7\u671F":"";break;case"questionnaire":t.resourceErrTip=X?X.resource_status==="deleted"?"\u5F15\u7528\u7684\u95EE\u5377\u88AB\u5220\u9664":X.resource_status==="un_released"?"\u5F15\u7528\u7684\u95EE\u5377\u672A\u53D1\u5E03":"":"";break;case"practicalIndustry":t.resourceErrTip=X&&X.resource_status==="operation_resource_deleted"?E.Z.t("component.practicalDeleteTip"):"";break;default:break}return null}),null}),f},C=(o,f)=>({id:f?"":o.id,title:o.title,edit_status:o.edit_status,status:o.status,department_id:o.department_id||"",dateRange:{startTime:o.begin_time,endTime:o.end_time},address:o.address,course_duration:o.course_duration,has_lecturer_student_data:f?!1:o.has_lecturer_student_data,has_student_lecturer_data:f?!1:o.has_student_lecturer_data,has_student_course_data:f?!1:o.has_student_course_data,has_lecturer_assess_student_data:f?!1:o.has_lecturer_assess_student_data,teacher:{id:o.lecturer_id,name:o.lecturer_name,is_lecturer_confirm:o.is_lecturer_confirm,is_lecturer_subsidy:o.is_lecturer_subsidy,teacher_sync_user_id:o.teacher_sync_user_id,lecturer_name:o.lecturer_name,teacher_sync_source_type:o.teacher_sync_source_type,type:o.teacher_sync_type,teacher_sync_type:o.teacher_sync_type},introduction:o.introduction,attachment:o.attachment||[],other:{is_open_schedule:o.is_open_schedule,is_open_upload:o.is_open_upload},remind:{remind_type:o.remind_type||"offline_course",advance_minute:o.advance_minute,is_lecturer_remind:o.is_lecturer_remind,is_student_remind:o.is_student_remind,is_director_remind:o.is_director_remind},evaluate:{is_lecturer_student_evaluate:o.is_lecturer_student_evaluate,is_student_lecturer_evaluate:o.is_student_lecturer_evaluate,is_student_course_evaluate:o.is_student_course_evaluate,lecturer_student_evaluate_content:o.lecturer_student_evaluate_content?(0,K.Z)((0,K.Z)({},o.lecturer_student_evaluate_content),{},{passing_score:Number(o.lecturer_student_evaluate_content.passing_score),total_score:Number(o.lecturer_student_evaluate_content.total_score)}):{evaluate_type:"score",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_lecturer_evaluate_content:o.student_lecturer_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_course_evaluate_content:o.student_course_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""}},assess:{is_open_offline_assessment:o.is_open_offline_assessment,assessment_total_score:o.assessment_total_score,assessment_pass_score:o.assessment_pass_score},user_has_attendanted:f?!1:o.user_has_attendanted}),y=(o,f)=>{var w=[];return f?o.attendance_course_vo.forEach(T=>{w.push((0,K.Z)((0,K.Z)({},T),{},{course_id:"",course_key:T.course_id}))}):w=o.attendance_course_vo,{courseId:o.courseId,directors:o.director?o.director.map(T=>T):o.directors,id:f?"":o.id,name:o.name,qrcode_type:o.qrcode_type,relate_course_list:w,sign_in_begin_time:o.sign_in_begin_time?(0,ye.p6)(o.sign_in_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_in_end_time:o.sign_in_end_time?(0,ye.p6)(o.sign_in_end_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_begin_time:o.sign_out_begin_time?(0,ye.p6)(o.sign_out_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_end_time:o.sign_out_end_time?(0,ye.p6)(o.sign_out_end_time,"yyyy-MM-dd hh:mm:ss"):"",source_type:o.source_type,remind_directors:o.remind_directors,advance_minute:o.advance_minute,user_has_attendanted:f?!1:o.user_has_attendanted,relate_course:o.relate_course,address:o.address,longitude:o.longitude,latitude:o.latitude,address_detail:o.address_detail,sign_range:o.sign_range}};function h(o){return Object.prototype.toString.call(o)==="[object Object]"}function S(o){return o.replace(/[A-Z]/g,f=>"_".concat(f.toLowerCase()))}function k(o){if(!h(o))return o;for(var f={},w=Object.keys(o),T=0,b=w;T<b.length;T++){var s=b[T],t=o[s];s=S(s),f[s]=h(t)?k(t):t}return f}var G=o=>{var f=k(o),w=f.id,T=f.name,b=f.requirement,s=f.resource_id,t=f.is_self_evaluate,a=f.is_lock,X=f.begin_time_unlock,ie=f.end_time_unlock,c=f.questionnaire_id,l=f.evaluate_form_title,v=f.before_start_day,d=f.before_start_repeat,_e=f.before_start_un_remind,xe=f.before_end_day,be=f.before_end_repeat,J=f.before_end_un_remind,Ue=f.after_end_day,Oe=f.after_end_repeat,Ke=f.after_end_un_remind,Pe=f.is_passed_standards,ut=f.is_passed_option_three,rt=f.pass_standard_conditions,ge=f.pass_standards_number,vt=f.creator_user;return{id:w,name:T,requirement:b,resource_id:s,is_lock:a,begin_time_unlock:X,end_time_unlock:ie,is_self_evaluate:t,questionnaire_id:c,evaluate_form_title:l,before_start_day:v,before_start_repeat:d,before_start_un_remind:_e,before_end_day:xe,before_end_repeat:be,before_end_un_remind:J,after_end_day:Ue,after_end_repeat:Oe,after_end_un_remind:Ke,is_passed_standards:Pe,is_passed_option_three:ut,pass_standard_conditions:rt,pass_standards_number:ge,creator_user:vt}},H=o=>({courseId:o.course_id,duration:o.duration,teacherName:o.live_lesson.teacher_name,startTime:o.live_lesson.live_start_time,endTime:o.live_lesson.live_end_time})},34522:function(et,we,n){"use strict";var B=n(88986),K=n(57361),ce=n(9754),p=n.n(ce),E=n(12924),O=n.n(E),Y=n(28216),ye=n(80991),W=n(43859),oe=n(84874),le=n(31151),g=n(60667);class e extends O().Component{constructor(x){var i;super(x);i=this,this.onSelectTeacher=function(){var U=(0,K.Z)(p().mark(function Z(q){var Ce,Se,V,Ze,ke;return p().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(Ce=i.props,Se=Ce.onHiddenDialog,V=Ce.onFieldChange,Ze=Ce.beforeSelected,!Ze){y.next=7;break}return y.next=4,Ze(q);case 4:if(ke=y.sent,ke){y.next=7;break}return y.abrupt("return");case 7:Se&&Se(),i.setState({teacherSelectorVisible:!1}),V&&V((0,B.Z)((0,B.Z)({},q),{},{name:q.lecturer_name,lecturer_name:q.lecturer_name,type:q.teacher_sync_type,lecturer_sync_user_id:q.teacher_sync_user_id,lecturer_source_type:q.teacher_sync_source_type}));case 10:case"end":return y.stop()}},Z)}));return function(Z){return U.apply(this,arguments)}}(),this.onCancelSelectTeacher=()=>{var U=this.props.onHiddenDialog;U&&U(),this.setState({teacherSelectorVisible:!1})},this.onCancelSelected=()=>{var U=this.props.onFieldChange;U&&U("")},this.onShowSelectTeacher=()=>{var U=this.props.onShowDialog;U&&U(),this.setState({teacherSelectorVisible:!0})},this.state={teacherSelectorVisible:!1}}render(){var x=this.state.teacherSelectorVisible,i=this.props.value,U=this.props,Z=U.disabled,q=U.canCancel,Ce=U.isInternal,Se=localStorage.getItem("themeColor")||"#516AE6";return O().createElement("div",{className:"offline-train-form-teacher"},i.name?q&&!Z?O().createElement("span",{className:"teacher_name_with_delete",style:{color:Se},onClick:this.onCancelSelected},O().createElement("span",{className:"teacher_name"},i.type==="inside"?O().createElement(g.Z,{dataType:"userName",value:i.lecturer_sync_user_id,name:i.lecturer_name||i.name,type:i.lecturer_source_type}):i.name),O().createElement("span",{className:"icon_container"},O().createElement(oe.Z,{iconClass:"icon-f-close",size:"10px"}))):O().createElement("span",{className:"offline-train-form-teacher_name",style:{color:Se}},i.type==="inside"?O().createElement(g.Z,{dataType:"userName",value:i.lecturer_sync_user_id,name:i.lecturer_name||i.name,type:i.lecturer_source_type}):i.name):null,Z?O().createElement("span",{className:"add-teacher-btn add-teacher-btn-disabled"},O().createElement(oe.Z,{iconClass:"iconf-add-man"})):O().createElement("span",{className:"add-teacher-btn add-teacher-btn_able",style:{color:Se,borderColor:Se},onClick:this.onShowSelectTeacher},O().createElement(oe.Z,{iconClass:"iconf-add-man"})),O().createElement(le.Z,{visible:x,selected:i,isInternal:Ce,onOk:this.onSelectTeacher,onCancel:this.onCancelSelectTeacher}),Ce&&O().createElement("span",{className:"internal-teacher-tip",style:{marginLeft:"20px"}},this.props.t("live.onlyInner")))}}e.defaultProps={value:void 0,disabled:!1,canCancel:!1,isInternal:!1};var j=F=>{var x=F.user;return{user:x}};we.Z=(0,Y.$j)(j)((0,W.Z)((0,ye.$j)(e)))},52536:function(et,we,n){"use strict";var B=n(57361),K=n(9754),ce=n.n(K),p=n(12924),E=n.n(p),O=n(91768),Y=n(80991),ye=n(52544),W=n.n(ye),oe=n(60667),le=n(57482),g=n(64262),e=n(43859),j=n(84874),F=n(56130);class x extends E().PureComponent{constructor(Z){var q;super(Z);q=this,this.onFocus=()=>{this.setState({open:!this.state.open})},this.onBlurChange=()=>{setTimeout(()=>{this.setState({open:!1})},100)},this.handleTreeSelectChange=(Ce,Se)=>{this.queryDepartmentName(Ce),this.setState({open:!this.state.open}),this.props.onFieldChange(Ce)},this.queryDepartmentName=function(){var Ce=(0,B.Z)(ce().mark(function Se(V){var Ze;return ce().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,le.Yy)(V);case 2:Ze=C.sent,Ze.data.code===0&&q.setState({deptName:Ze.data.data});case 4:case"end":return C.stop()}},Se)}));return function(Se){return Ce.apply(this,arguments)}}(),this.hideDropDown=Ce=>{Ce.stopPropagation();var Se=document.getElementsByClassName("edit-org")[0],V=document.getElementsByClassName("org-edit-select")[0],Ze=Ce.clientX,ke=Ce.clientY;if(!(!V||V.offsetLeft<=0)){var C=V.offsetLeft,y=V.offsetTop-Se.offsetHeight,h=V.offsetLeft+V.offsetWidth,S=V.offsetTop+V.offsetHeight;(Ze<C||Ze>h||ke<y||ke>S)&&this.onBlurChange()}},this.clearContent=Ce=>{Ce.stopPropagation(),this.setState({deptName:null}),this.props.onFieldChange("")},this.state={open:!1,deptName:null}}componentDidMount(){document.addEventListener("click",this.hideDropDown),this.props.value&&this.queryDepartmentName(this.props.value)}componentWillUnmount(){document.removeEventListener("click",this.hideDropDown)}render(){var Z=this.props,q=Z.value,Ce=Z.selectWidth,Se=Ce===void 0?308:Ce,V=Z.disabled,Ze=Z.asyncLoad,ke=Ze===void 0?!0:Ze,C=Z.placeholder,y=Z.t,h=this.state,S=h.open,k=h.deptName;return E().createElement("div",{className:"".concat(W()["org-tree-select"]," edit-org")},E().createElement("div",{className:W()["input-wrap"],onClick:this.onFocus,style:{width:"".concat(Se,"px")}},E().createElement("span",{className:W()["input-wrap-name"]},k?E().createElement(oe.Z,{type:k.source_type,value:k.id,name:k.name,dataType:"departmentName"}):E().createElement("span",{className:W()["placeholder-tips"]},C||y("component.chooseDeptTip"))),E().createElement("span",{className:W()["arrow-up-down"]},E().createElement(j.Z,{iconClass:"".concat(S?"iconf-arrow-up":"iconf-arrow-under")})),k&&E().createElement("span",{className:W()["input-close-icon"],onClick:this.clearContent},E().createElement(j.Z,{iconClass:"icon-icon_close",color:"rgba(0,0,0,.25)",size:"12px"}))),E().createElement(g.Z,{className:"offline-input-width",width:Se,parentId:"",checkable:!1,asyncLoad:ke,disabled:V,defaultValue:q,treeSelect:!0,open:S,handleTreeSelectChange:this.handleTreeSelectChange,dropdownClassName:"org-edit-select"}))}}x.defaultProps={defaultValue:"",refreshData:!1};var i=(0,F.Z)((0,O.Z)()(x));we.Z=(0,e.Z)((0,Y.$j)((0,F.Z)((0,O.Z)()(x))))},31970:function(et,we,n){"use strict";var B=n(47673),K=n(4107),ce=n(62029),p=n(81211),E=n(12924),O=n.n(E),Y=n(91768),ye=n(80991),W=n(43859);class oe extends O().Component{constructor(){super(...arguments);this.handleChange=g=>{var e=this.clearNoNum(g.target.value);this.props.onChange(e)},this.clearNoNum=g=>(g=g.replace(/[^\d]/g,""),g.indexOf(".")<0&&g!==""&&(g=parseFloat(g)),g)}render(){var g=this.props,e=g.value,j=g.disabled,F=g.t,x=g.maxLength,i=g.placeholder,U=g.renderAssist,Z=(0,p.Z)(g,["value","disabled","t","maxLength","placeholder","renderAssist"]);return O().createElement(E.Fragment,null,O().createElement(K.Z,(0,ce.Z)({},Z,{size:"middle",value:e,disabled:j,onChange:this.handleChange,onBlur:this.handleBlur,maxLength:x,className:"payment-inner-inputNumber",placeholder:i||F("learning.learnUpgrade.pleaseEnter")})),U&&U())}}we.Z=(0,W.Z)((0,Y.Z)()((0,ye.$j)(oe)))},57482:function(et,we,n){"use strict";n.d(we,{Wz:function(){return O},B3:function(){return Y},um:function(){return ye},Lj:function(){return W},S7:function(){return oe},n_:function(){return le},Kh:function(){return g},n4:function(){return e},DM:function(){return j},Wg:function(){return F},Uw:function(){return x},Or:function(){return i},XA:function(){return U},v7:function(){return Z},MM:function(){return q},qX:function(){return V},Yy:function(){return ke}});var B=n(57361),K=n(9754),ce=n.n(K),p=n(37055),E=n(10237),O=function(){var C=(0,B.Z)(ce().mark(function y(h){var S;return ce().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return S=p.ZP.trainingConfig.getAnnualPlanList(),G.abrupt("return",E.WY.get({url:S,params:h}));case 2:case"end":return G.stop()}},y)}));return function(h){return C.apply(this,arguments)}}(),Y=function(){var C=(0,B.Z)(ce().mark(function y(h){var S;return ce().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return S=p.ZP.trainingConfig.addAnnualPlan(),G.abrupt("return",E.WY.post({url:S,data:h}));case 2:case"end":return G.stop()}},y)}));return function(h){return C.apply(this,arguments)}}(),ye=C=>{var y=p.ZP.trainingConfig.editAnnualPlan();return E.WY.post({url:y,data:C})},W=C=>{var y=p.ZP.trainingConfig.unPublishAnnualPlan(C);return E.WY.put({url:y})},oe=C=>{var y=p.ZP.trainingConfig.unPublishPlan(C);return E.WY.put({url:y})},le=C=>{var y=p.ZP.trainingConfig.deleteAnnualPlan(C);return E.WY.delete({url:y})},g=C=>{var y=p.ZP.trainingConfig.deletePlan(C);return E.WY.delete({url:y})},e=C=>{var y=p.ZP.trainingConfig.addPlan();return E.WY.post({url:y,data:C})},j=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"month",h=arguments.length>1?arguments[1]:void 0,S={month:p.ZP.trainingConfig.getPlan(h),annual:p.ZP.trainingConfig.getAnnualPlan(h),exec:p.ZP.trainingConfig.execDetail(h),demand:p.ZP.trainingConfig.getTrainingDemandsDetail(h)};return E.WY.get({url:S[y]||S.month})},F=C=>{var y=p.ZP.trainingConfig.associateTask();return E.WY.post({url:y,data:C})},x=C=>{var y=p.ZP.trainingConfig.unBindPlan(C);return E.WY.post({url:y})},i=C=>{var y=p.ZP.trainingConfig.execDetail(C);return E.WY.get({url:y})},U=C=>{var y=p.ZP.trainingConfig.commitPlan(C);return E.WY.post({url:y})},Z=C=>{var y=p.ZP.trainingConfig.deleteDetail(C);return E.WY.delete({url:y})},q=C=>{var y=p.ZP.trainingConfig.editPlan(C.plan_id);return E.WY.post({url:y,data:C})},Ce=C=>{var y=CONFIG.trainingConfig.exportPlan();return request.get({url:y,params:C})},Se=C=>{var y=CONFIG.trainingConfig.exportAnnualPlan(C);return request.get({url:y})};function V(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=p.ZP.trainingConfig.getPlanList();return E.WY.get({url:y,params:C})}var Ze=C=>{var y=CONFIG.trainingConfig.getBusinessId(C.instanceId);return request.get({url:y,params:C})},ke=C=>{var y=p.ZP.trainingConfig.getDepartmentName(C);return E.WY.get({url:y})}},50658:function(et,we,n){"use strict";n.d(we,{Z:function(){return e}});var B=n(36017),K=n(35247),ce=n(12924),p=n.n(ce),E=n(91768),O=n(76651),Y=n(78001),ye={list:{name:Y.Z.t("trainingProject.trainingProjectList"),path:"knowledgeBase/learningResources/studyProject"},add:{name:Y.Z.t("trainingProject.addEdit.addTraining"),path:"/training/learning/project/add"},edit:{name:Y.Z.t("trainingProject.addEdit.editTraining"),path:"/training/learning/project/add"},monitor:{name:Y.Z.t("common.data"),path:"/training/trainingProject/monitor"},view:{name:Y.Z.t("trainingProject.trainingProjectView"),path:"/training/trainingProject/manageView"},preview:{name:Y.Z.t("trainingProject.trainingProjectPreview"),path:"/training/trainingProject/manageView"},onLineClass:{name:Y.Z.t("leftMenuLists.courseManagemention"),path:"/knowledgeBase/learningResources/courseManage"}},W=n(50163),oe=n.n(W),le=n(84874),g=j=>{var F=j.origin,x=F===void 0?"list":F,i=j.current,U=x&&x!=="undefined"?ye[x]:ye.list,Z=U.name,q=O.m8.location,Ce=()=>{O.m8.go(-1)},Se=()=>{x==="list"?O.m8.push("/knowledgeBase/learningResources/studyProject"):O.m8.go(-1)};return p().createElement("div",{className:oe()["breadcrumb-router-box"]},p().createElement(K.Z,null,p().createElement("span",{className:oe()["back-router"],onClick:Ce},p().createElement(le.Z,{iconClass:"icon-fanhui",size:"14px"})),p().createElement(K.Z.Item,null,p().createElement("span",{className:oe()["breadcrumb-item"],onClick:Se},Z)),p().createElement(K.Z.Item,null,p().createElement("span",{className:oe()["breadcrumb-item-current"]},i?ye[i].name:ye[q.pathname.split("/training/trainingProject")[1]].name))))},e=(0,E.Z)()(g)},52636:function(et,we,n){"use strict";var B=n(12924),K=n.n(B),ce=K().createContext(null);we.Z=ce},67304:function(et,we,n){"use strict";n.r(we),n.d(we,{default:function(){return wn}});var B=n(17462),K=n(1474),ce=n(57663),p=n(71577),E=n(88986),O=n(57361),Y=n(33565),ye=n(35556),W=n(27220),oe=n(9754),le=n.n(oe),g=n(12924),e=n.n(g),j=n(91768),F=n(7085),x=n(76651),i=n(57068),U=n(28216),Z=n(77707),q=n.n(Z),Ce=n(48736),Se=n(27049),V=n(62029),Ze=n(34792),ke=n(48086),C=n(71194),y=n(57016),h=n(80991),S=n(68628),k=n(64334),G=n(29857),H=n.n(G),o=n(7584),f=n(70075),w=n(52636),T=n(28531),b=n(2396),s=n(62615),t=n(84874),a=n(17042),X=n(31970),ie=n(40572),c=n(52536),l=n(34522),v=n(52670),d={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:20}}},_e=(r,u)=>{var m=r.t,_=(0,g.useRef)(null),L=(0,g.useContext)(w.Z),N=L.state,P=L.dispatch,Q=(0,g.useState)(!1),I=(0,Y.Z)(Q,2),ue=I[0],te=I[1],ee=(0,g.useState)(!0),Ee=(0,Y.Z)(ee,2),re=Ee[0],z=Ee[1],fe=i.parse(x.m8.location.search),ae=fe.id,ve=fe.type,he=(0,g.useState)(-1),Ie=(0,Y.Z)(he,2),pe=Ie[0],Fe=Ie[1];(0,g.useImperativeHandle)(u,()=>({handleSubmitSave:R=>{R>=0?Fe(R):_.current.submitForm()},handleCancelEdit:()=>{ae?y.Z.confirm({title:m("trainingProject.addEdit.leaveTitle"),content:e().createElement("div",{className:H()["confirm-content"]},m("trainingProject.addEdit.leaveContent")),okText:m("common.ok"),cancelText:m("common.cancel"),icon:e().createElement(S.Z,{style:{color:"#1890ff"}}),onOk:()=>{x.m8.go(-1)},onCancel:()=>{}}):x.m8.push("/knowledgeBase/learningResources/studyProject")},getFormikValue:()=>_.current.state.values})),(0,g.useEffect)(()=>{pe>=0&&_.current.submitForm()},[pe]),(0,g.useEffect)(()=>{document.getElementById("training-project-first-box")&&(document.getElementById("training-project-first-box").scrollTop=0)},[]),(0,g.useEffect)(()=>{ae?N.initialValues.id&&te(!0):te(!0),N.initialValues&&(N.initialValues.lecturerInfo&&N.initialValues.lecturerInfo.id!="0"||N.initialValues.budget)&&z(!1)},[N.initialValues]);var He=R=>{var Te=(0,k.z2)(R.stages),A=(0,k.NK)(R.stages),ne=(0,k.Qz)(R.stages),me=(0,k.GM)(R.stages),se=(0,k.S1)(R.stages);return{progress:{isChecked:ne>0||R.qualifiedStandard.progress.isChecked?R.qualifiedStandard.progress.isChecked:ne>0,progress:ne>0&&R.qualifiedStandard.progress.progress?R.qualifiedStandard.progress.progress:100},exam:{isChecked:Te>0,times:Te>0&&R.qualifiedStandard.exam.times?R.qualifiedStandard.exam.times:Te},bank:{isChecked:A>0,times:A>0&&R.qualifiedStandard.bank.times?R.qualifiedStandard.bank.times:A},operation:{isChecked:me>0,times:me>0&&R.qualifiedStandard.operation.times?R.qualifiedStandard.operation.times:me},jobEvaluation:{isChecked:se>0||R.qualifiedStandard.jobEvaluation.isChecked?R.qualifiedStandard.jobEvaluation.isChecked:se>0}}},Ae=R=>{pe<0&&P({type:"setLoading",payload:!0}),pe!==-1?pe===1?P({type:"setStepStatusSecond",payload:!0}):pe===2&&P({type:"setStepStatusThree",payload:!0}):P({type:"setStepStatusSecond",payload:!0});var Te={sign:ae?ve==="copy"?!1:ae:!1,save_step:"base_info",copy:ve==="copy"};Te.id=Te.sign||N.projectId||"";var A=R.tagGroup?R.tagGroup.tagsNameList:[];Te.base_info={title:R.title,lecturer_id:R.lecturerInfo.id,summary:R.summary,classify:R.classify,dept_ids:R.deptIds,budget:R.budget,cover:R.covers.coverType===1?R.covers.baseCover:R.covers.cover,base_cover:R.covers.baseCover,cover_type:R.covers.coverType,ding_img_url:R.qrcode[0]?R.qrcode[0].url:""};var ne=Te.sign?a.bH:a.B;ne(Te).then(me=>{if(me.data.result==="true"){if(me.data.id&&(P({type:"setProjectId",payload:me.data.id}),P({type:"setCourseId",payload:me.data.course_id})),A&&A.length){var se={tags:A,resourceId:ae||me.data.id,resourceType:"project"};(0,T.tB)(se)}P(pe===2?{type:"updateInfoData",payload:(0,E.Z)((0,E.Z)({},R),{},{qualifiedStandard:He(R)})}:{type:"updateInfoData",payload:R}),pe>=0?(P({type:"setCurrent",payload:pe}),pe>N.nowStage&&P({type:"setNowStage",payload:pe})):(setTimeout(()=>{P({type:"setCurrent",payload:N.current+1}),N.nowStage===N.current&&P({type:"setNowStage",payload:N.current+1})},200),ae?ke.default.success(m("trainingProject.addEdit.saveContext")):ke.default.success(m("trainingProject.addEdit.saveDrafts")))}else ke.default.error(m("trainingProject.addEdit.contentSaveFailure"));pe<0&&P({type:"setLoading",payload:!1}),P({type:"setStepStatusSecond",payload:!1}),P({type:"setStepStatusThree",payload:!1}),Fe(-1)}).catch(me=>{if(me.response){var se=me.response.data,M=se.code,$=se.message;M==="enterpriseapi.542003"?ke.default.error(m("learning.validation.resourceAddErrorTip")):M==="enterpriseapi.542004"&&ke.default.error($)}P({type:"setLoading",payload:!1}),P({type:"setStepStatusSecond",payload:!1}),P({type:"setStepStatusThree",payload:!1})})},Je=()=>{z(!re)},Xe={resourceType:"project",resourceId:ae||N.projectId||null};return e().createElement("div",{className:H()["cl-form-first-box"],id:"training-project-first-box"},ue?e().createElement(h.J9,{ref:_,initialValues:N.initialValues,onSubmit:Ae,render:R=>e().createElement(h.l0,{className:H()["cl-form"]},e().createElement(h.gN,(0,V.Z)({component:o.Z,name:"title",label:m("trainingProject.addEdit.learningProjectAddName"),required:!0,style:{width:"550px"},defaultValue:R.values.title,type:"text",LimitLength:60,char:!0,formItemClassName:H()["cl-form_list-item"],placeholder:m("trainingProject.addEdit.learningProjectAddNamePlaceholder"),validate:Te=>(0,b.QK)(Te,m("common.input",{name:m("trainingProject.addEdit.learningProjectAddName")}))},d)),e().createElement(h.gN,(0,V.Z)({component:s.Y9,displayType:"Custom",name:"covers",label:m("trainingProject.addEdit.courseCreatePanelFTCover"),required:!0,formItemClassName:H()["cl-form_list-item"]},d)),e().createElement(h.gN,(0,V.Z)({name:"classify",label:m("trainingProject.addEdit.learningProjectAddCategory"),displayType:"Custom",required:!0,className:H()["classify-tree-select-box"],component:ie.Z,classifyName:R.values.classify_name,value:R.values.classify,formItemClassName:H()["cl-form_list-item"],placeholder:m("trainingProject.addEdit.classifyNull"),validate:v.ZE},d)),e().createElement(h.gN,(0,V.Z)({name:"deptIds",label:m("trainingProject.addEdit.organizationDepartment"),displayType:"Custom",selectWidth:550,defaultValue:R.values.deptIds,formItemClassName:H()["cl-form_list-item"],placeholder:m("trainingProject.addEdit.selectDept"),component:c.Z},d)),e().createElement(h.gN,(0,V.Z)({name:"summary",label:m("trainingProject.addEdit.projectSummary"),component:f.Z,autoSize:!1,LimitLength:1e3,char:!0,type:"text",formItemClassName:H()["cl-form_list-item"],placeholder:m("trainingProject.addEdit.validation.contentLimitTip"),style:{width:"550px",height:"48px"}},d)),e().createElement(Se.Z,{orientation:"left",plain:!0,className:H()["training-project-divider"]},e().createElement("span",{className:H()["training-project-name"],onClick:()=>Je()},m("trainingProject.addEdit.moreSetting"),re?e().createElement(t.Z,{size:"14px",iconClass:"iconf-arrow-under"}):e().createElement(t.Z,{size:"14px",iconClass:"iconf-arrow-up"}))),re?null:e().createElement(e().Fragment,null,e().createElement(h.gN,(0,V.Z)({name:"lecturerInfo",label:m("component.lecturer"),displayType:"Custom",defaultValue:R.values.lecturerInfo,canCancel:!0,formItemClassName:H()["cl-form_list-item"],component:l.Z},d)),e().createElement(h.gN,(0,V.Z)({name:"budget",label:m("trainingProject.addEdit.budgetExpenditure"),component:X.Z,maxLength:9,style:{width:"280px"},placeholder:m("trainingProject.addEdit.validation.freeTip"),formItemClassName:H()["cl-form_list-item"],renderAssist:()=>e().createElement("span",{style:{marginLeft:"10px"}},m("trainingProject.addEdit.moneyUnit"))},d)),e().createElement(h.gN,(0,V.Z)({component:s.QS,displayType:"Custom",name:"tagGroup",selectWidth:"550px",formItemClassName:H()["cl-form_list-item"],label:m("trainingProject.addEdit.detailTag"),defaultFieldList:Xe},d))),e().createElement(s.I,null))}):null)},xe=(0,j.Z)("translation",{withRef:!0})((0,g.forwardRef)(_e)),be=n(34316),J=n.n(be),Ue=n(86726),Oe=n(53009),Ke=n(88983),Pe=n(47933),ut=n(95854),rt=n.n(ut),ge=n(43859),vt=r=>{var u=r.t,m=r.name,_=r.value,L=r.isPreview,N=(0,g.useContext)(w.Z),P=N.dispatch,Q=I=>{r.onFieldChange(I.target.value),P({type:"updateInfoData",payload:{[m]:I.target.value}})};return e().createElement("div",{className:rt()["switch-reward"]},e().createElement(Pe.ZP.Group,{disabled:L,onChange:Q,defaultValue:_,buttonStyle:"solid"},e().createElement(Pe.ZP.Button,{value:"free"},u("trainingProject.addEdit.freeSchema")),e().createElement(Pe.ZP.Button,{value:"map"},u("trainingProject.addEdit.recruitModel"))),_==="free"?e().createElement("div",{className:rt()["switch-reward-tip"]},u("trainingProject.addEdit.freeSchemaTip")):e().createElement("div",{className:rt()["switch-reward-tip"]},u("trainingProject.addEdit.recruitModelTip")))},Tt=(0,ge.Z)((0,j.Z)()(vt)),xn=n(12968),Ht=n(44208),zt=n(99189),_t=n.n(zt),Yt=r=>{var u=r.t,m=r.value,_=r.name,L=r.isPreview,N=(0,g.useContext)(w.Z),P=N.dispatch,Q=(0,g.useState)("normal"),I=(0,Y.Z)(Q,2),ue=I[0],te=I[1],ee=(0,g.useState)(""),Ee=(0,Y.Z)(ee,2),re=Ee[0],z=Ee[1],fe=[{value:"star",label:u("trainingProject.addEdit.universe"),path:"".concat("https://oss.coolcollege.cn","/1805135310212960256.png")},{value:"desert",label:u("trainingProject.addEdit.DesertOasis"),path:"".concat("https://oss.coolcollege.cn","/1805135433466777600.png")}];(0,g.useEffect)(()=>{te(m==="normal"?m:"map"),z(m==="normal"?"":m)},[]);var ae=(0,g.useCallback)(he=>{te(he),he==="normal"?(r.onFieldChange(he),P({type:"updateInfoData",payload:{[_]:he}})):re?re&&(z(re),r.onFieldChange(re),P({type:"updateInfoData",payload:{[_]:re}})):(z("star"),r.onFieldChange("star"),P({type:"updateInfoData",payload:{[_]:"star"}}))},[P,re,_,r]),ve=(0,g.useCallback)(he=>{z(he),r.onFieldChange(he),P({type:"updateInfoData",payload:{[_]:he}})},[P,_,r]);return e().createElement("div",{className:"".concat(_t()["switch-reward"])},e().createElement("div",{className:_t()["switch-reward-item"]},e().createElement(Pe.ZP.Group,{disabled:L,onChange:he=>ae(he.target.value),value:ue,buttonStyle:"solid"},e().createElement(Pe.ZP.Button,{value:"normal"},u("trainingProject.addEdit.listStyleMap")),e().createElement(Pe.ZP.Button,{value:"map"},u("trainingProject.addEdit.mapStyleMap")))),ue==="map"&&e().createElement(Pe.ZP.Group,{disabled:L,onChange:he=>ve(he.target.value),size:"small",className:_t().mapModeItem,value:re},fe.map(he=>e().createElement("div",{className:_t()["radio-item-box"],key:he.value},e().createElement(Pe.ZP,{className:_t().radioItem,value:he.value},e().createElement("span",{className:_t()["radio-item-title"]},he.label),e().createElement("div",{className:_t()["radio-item-image"]},e().createElement(Ht.Z,{preview:!1,width:270,src:he.path})))))))},Jt=(0,ge.Z)((0,h.$j)((0,j.Z)()(Yt))),In=n(22385),ct=n(31097),Tn=n(77883),it=n(21888),Xt=n(32129),ht=n.n(Xt),lt=n(6793),pt=n(3407),ea=(0,lt.me)(),ta=pt.Z[ea].learning.validation,aa=r=>{var u=r.t,m=r.name,_=r.value,L=r.stagesList,N=(0,g.useContext)(w.Z),P=N.state,Q=N.dispatch,I=P.stagesIndex,ue=(0,g.useState)(!1),te=(0,Y.Z)(ue,2),ee=te[0],Ee=te[1],re=(0,g.useState)(""),z=(0,Y.Z)(re,2),fe=z[0],ae=z[1];(0,g.useEffect)(()=>{I&&ee&&ve(L)},[I]),(0,g.useEffect)(()=>{ae(_),setTimeout(()=>{Ee(!0)},1e3)},[]);var ve=pe=>{var Fe=0;pe&&pe.forEach(He=>{He.list.forEach(Ae=>{Ae.duration&&(Ae.type==="course"||(Ae.originalType==="mp4"||Ae.originalType==="mp3")&&Ae.status===3||Ae.type==="ex")&&(Fe+=Number(Ae.duration))})}),Fe>0?Ie(Math.ceil(Fe/60)):Ie(0)},he=e().createElement("div",null,e().createElement("div",null,u("trainingProject.addEdit.estimatePeriod")),e().createElement("div",null,u("trainingProject.addEdit.videoStatistics")),e().createElement("div",null,u("trainingProject.addEdit.audioStatistics")),e().createElement("div",null,u("trainingProject.addEdit.examStatistics")),e().createElement("div",null,u("trainingProject.addEdit.donEstimate"))),Ie=pe=>{ae(pe),r.onFieldChange(pe),Q({type:"updateInfoData",payload:{[m]:pe}})};return e().createElement("div",{className:ht()["setting-item"]},e().createElement(it.Z,{className:ht()["setting-item-number"],value:fe||0,onChange:Ie,min:0,max:999999,precision:0}),e().createElement("span",{className:ht()["setting-item-tip"]},u("common.minutes")),e().createElement(ct.Z,{placement:"right",title:he,overlayClassName:ht()["tooltip-overlay"]},e().createElement("span",{className:ht()["toolTip-span"]},e().createElement(S.Z,{style:{fontSize:"16px",color:"rgba(0, 0, 0, 0.45)"}}))))},na=r=>{var u;return r===""&&(u=ta.learningTimeTip),u},ra=(0,ge.Z)((0,h.$j)((0,j.Z)()(aa))),Nn=n(77576),st=n(59314),ia=n(56626),Nt=n.n(ia),sa=r=>{var u=r.t,m=r.value,_=r.name,L=(0,g.useContext)(w.Z),N=L.dispatch,P=Q=>{r.onFieldChange(Q),N({type:"updateInfoData",payload:{[_]:Q}})};return e().createElement("div",{className:Nt()["stage-pass"]},e().createElement(st.Z,{checkedChildren:u("customFields.open"),unCheckedChildren:u("customFields.close"),checked:m,onChange:P}),e().createElement(ct.Z,{placement:"right",title:u("trainingProject.stagePassTip"),overlayClassName:Nt()["tooltip-overlay"]},e().createElement("span",{className:Nt()["toolTip-span"]},e().createElement(S.Z,{style:{fontSize:"16px",color:"rgba(0, 0, 0, 0.45)"}}))))},oa=(0,ge.Z)((0,h.$j)((0,j.Z)()(sa))),dt=n(38642),la=n(31916),jn=n(63185),yt=n(9676),da=n(24854),Le=n.n(da),ua=(0,lt.me)(),Ft=pt.Z[ua].learning.validation,ca=r=>{var u;return r&&(!r.progress.isChecked&&!r.exam.isChecked&&!r.bank.isChecked&&!r.operation.isChecked&&!r.jobEvaluation.isChecked&&(u=Ft.learningProjectPassTip),(r.progress.isChecked&&!r.progress.progress||r.exam.isChecked&&!r.exam.times||r.bank.isChecked&&!r.bank.times||r.operation.isChecked&&!r.operation.times)&&(u=Ft.learningAddItemPass)),u},ma=r=>{var u=(0,dt.eY)("MANAGEMENT_JOBEVALUATION_BUT"),m=r.user.JobEvaluationOpen,_=r.value,L=r.name,N=r.isPreview,P=r.t,Q=r.formValue,I=r.shouldRenderedOperationCount,ue=(0,g.useContext)(w.Z),te=ue.dispatch,ee=(0,k.z2)(Q.stages),Ee=(0,k.NK)(Q.stages),re=(0,k.Qz)(Q.stages),z=(0,k.GM)(Q.stages),fe=(0,k.S1)(Q.stages),ae=i.parse(x.m8.location.search),ve=ae.id,he=!ve||Q.save_step!=="settings",Ie=(0,g.useState)(he),pe=(0,Y.Z)(Ie,2),Fe=pe[0],He=pe[1],Ae=_.progress,Je=_.exam,Xe=_.bank,R=_.operation,Te=_.jobEvaluation;(0,g.useEffect)(()=>{setTimeout(()=>{He(!0)},1e3)},[]);var A=($,Ge)=>{var Re=$.target.checked;switch(Ge){case"progress":_.progress.isChecked=Re;break;case"exam":_.exam.isChecked=Re;break;case"bank":_.bank.isChecked=Re;break;case"operation":_.operation.isChecked=Re;break;case"jobEvaluation":_.jobEvaluation.isChecked=Re;break;default:break}r.onFieldChange(_),te({type:"updateInfoData",payload:{[L]:_}})},ne=$=>{Fe&&(_.progress.progress=$,r.onFieldChange(_),te({type:"updateInfoData",payload:{[L]:_}}))},me=$=>{Fe&&(_.exam.times=$,r.onFieldChange(_),te({type:"updateInfoData",payload:{[L]:_}}))},se=$=>{Fe&&(_.bank.times=$,r.onFieldChange(_),te({type:"updateInfoData",payload:{[L]:_}}))},M=$=>{Fe&&(_.operation.times=$,r.onFieldChange(_),te({type:"updateInfoData",payload:{[L]:_}}))};return e().createElement("div",{className:Le()["qualified-standard"]},(re>0||re===0&&ee===0&&Ee===0&&z===0&&fe===0)&&e().createElement("div",{className:Le()["qualified-standard-item"]},e().createElement(yt.Z,{className:Le()["label-checkbox-button"],checked:Ae.isChecked,onChange:$=>A($,"progress")},P("component.learningProgress")),e().createElement("span",{className:Le()["qualified-standard-title"]},P("trainingProject.addEdit.reach")),e().createElement(it.Z,{value:Ae.progress,disabled:!Ae.isChecked||N,onChange:ne,className:Le()["qualified-standard-number"],min:0,max:100,precision:0}),e().createElement("span",{className:Le()["qualified-standard-tip"]},"%")),ee>0&&e().createElement("div",{className:Le()["qualified-standard-item"]},e().createElement(yt.Z,{className:Le()["label-checkbox-button"],checked:Je.isChecked,onChange:$=>A($,"exam")},P("common.exam")),e().createElement("span",{className:Le()["qualified-standard-title"]},P("trainingProject.addEdit.pass")),e().createElement(it.Z,{disabled:!Je.isChecked||N,className:Le()["qualified-standard-number"],value:Je.times,onChange:me,min:0,max:ee,precision:0}),e().createElement("span",{className:Le()["qualified-standard-tip"]},P("common.examUnit"))),Ee>0&&e().createElement("div",{className:Le()["qualified-standard-item"]},e().createElement(yt.Z,{className:Le()["label-checkbox-button"],checked:Xe.isChecked,onChange:$=>A($,"bank")},P("trainingProject.addEdit.practiceBank")),e().createElement("span",{className:Le()["qualified-standard-title"]},P("study.employeePass")),e().createElement(it.Z,{disabled:!Xe.isChecked||N,className:Le()["qualified-standard-number"],value:Xe.times,onChange:se,min:1,max:Ee,precision:0}),e().createElement("span",{className:Le()["qualified-standard-tip"]},P("common.examUnit"))),I&&z>0&&e().createElement("div",{className:Le()["qualified-standard-item"]},e().createElement(yt.Z,{className:Le()["label-checkbox-button"],checked:R.isChecked,onChange:$=>A($,"operation")},P("common.operation")),e().createElement("span",{className:Le()["qualified-standard-title"]},P("trainingProject.addEdit.pass")),e().createElement(it.Z,{value:R.times,disabled:!R.isChecked||N,className:Le()["qualified-standard-number"],onChange:M,min:0,max:z,precision:0}),e().createElement("span",{className:Le()["qualified-standard-tip"]},P("common.examUnit"))),u&&m&&fe>0&&e().createElement("div",{className:Le()["qualified-standard-item"]},e().createElement(yt.Z,{className:Le()["label-checkbox-button"],checked:Te.isChecked,onChange:$=>A($,"jobEvaluation")},P("learning.jobEvaluation"))),e().createElement("div",{className:Le()["qualified-standard-item-tip"]},P("trainingProject.addEdit.qualifiedStandardTip")))},_a=r=>{var u=r.user;return{user:u}},pa=(0,U.$j)(_a)((0,ge.Z)((0,j.Z)()(ma))),ga=n(55846),qe=n.n(ga),fa=n(93117),jt=n(10237),Zt=n(37055),Bt=n(75205),va=(0,lt.me)(),Ut=pt.Z[va].learning.validation,ha=r=>{var u=r.value,m=r.name,_=r.isPreview,L=r.t,N=r.formik,P=N.errors,Q=N.touched,I=(0,g.useState)({visible:!1,defaultChecked:[]}),ue=(0,Y.Z)(I,2),te=ue[0],ee=ue[1],Ee=(0,g.useState)({width:0,height:0}),re=(0,Y.Z)(Ee,2),z=re[0],fe=re[1],ae=(0,g.useContext)(w.Z),ve=ae.dispatch;(0,g.useEffect)(()=>{u&&!u.score.isCheckedReward&&he()},[he]);var he=(0,g.useCallback)(()=>{var ne=Zt.ZP.EditStudyTask.getScoreRule(),me=r.value;jt.WY.get({url:ne}).then(se=>{if(se.data.data.hasRule){var M=se.data.data.studyScore,$=M[0].finishScore;me.score.reward=$,r.onFieldChange(me),ve({type:"updateInfoData",payload:{[m]:me}})}})},[r]),Ie=()=>{ee((0,E.Z)((0,E.Z)({},te),{},{visible:!0,defaultChecked:[{id:u.certificate.id,name:u.certificate.name,previewUrl:u.certificate.previewUrl}]}))},pe=()=>{ee((0,E.Z)((0,E.Z)({},te),{},{visible:!1}))};(0,g.useEffect)(()=>{u.certificate.previewUrl&&He(u.certificate.previewUrl)},[u.certificate.previewUrl]);var Fe=ne=>{pe(),u.certificate.id=ne[0].id,u.certificate.name=ne[0].name,u.certificate.previewUrl=ne[0].previewUrl,r.onFieldChange(u),ve({type:"updateInfoData",payload:{[m]:u}})},He=ne=>{(0,Bt.FX)(ne).then(me=>{fe(me)})},Ae=ne=>{u.score.isCheckedReward=ne,r.onFieldChange(u),ve({type:"updateInfoData",payload:{[m]:u}})},Je=ne=>{u.certificate.isChecked=ne,r.onFieldChange(u),ve({type:"updateInfoData",payload:{[m]:u}})},Xe=ne=>{u.score.reward=ne,r.onFieldChange(u),ve({type:"updateInfoData",payload:{[m]:u}})},R=()=>{u.certificate.id="",u.certificate.name="",u.certificate.previewUrl="",r.onFieldChange(u),ve({type:"updateInfoData",payload:{[m]:u}})},Te=u.certificate,A=u.score;return e().createElement("div",{className:qe()["study-reward"]},e().createElement("div",{className:qe()["study-reward-item"]},e().createElement("span",{className:qe()["study-reward-switch-title"]},L("trainingProject.addEdit.rewardCredits")),e().createElement(st.Z,{className:qe()["study-reward-checkbox"],defaultChecked:A.isCheckedReward,disabled:_,checkedChildren:L("trainingProject.addEdit.open"),unCheckedChildren:L("trainingProject.addEdit.close"),onChange:Ae}),A.isCheckedReward&&e().createElement(e().Fragment,null,e().createElement(it.Z,{value:A.reward,disabled:_,onChange:Xe,min:0,max:999,precision:0,className:Q.reward&&P.reward&&P.reward.scoreRewardChecked?qe()["status-error"]:""}),e().createElement("span",{className:qe()["study-reward-tip"]},L("trainingProject.addEdit.credit")))),e().createElement("div",{className:qe()["study-reward-item"]},e().createElement("span",{className:qe()["study-reward-switch-title"]},L("trainingProject.addEdit.awardCertificate")),e().createElement(st.Z,{className:qe()["study-reward-checkbox"],defaultChecked:Te.isChecked,checkedChildren:L("trainingProject.addEdit.open"),unCheckedChildren:L("trainingProject.addEdit.close"),disabled:_,onChange:Je}),Te.isChecked&&e().createElement(e().Fragment,null,Te.id?e().createElement("div",{className:qe()["study-reward-list"]},e().createElement("img",{src:Te.previewUrl,alt:"image",className:z.height>z.width?qe().vertical:qe().transverse}),e().createElement("div",{className:qe()["operate-container"]},e().createElement("span",{className:qe()["operate-item"],onClick:Ie},L("common.replace")),e().createElement("span",{className:qe()["operate-item"],onClick:R},L("common.delete")))):e().createElement(p.Z,{type:"link",icon:e().createElement(t.Z,{iconClass:"iconf-craditranking",size:"14px"}),disabled:_,className:qe()["study-reward-button"],onClick:Ie},L("trainingProject.addEdit.learningAddRewardCertSelect")))),Q.qualifiedReward&&P.qualifiedReward&&e().createElement("div",{style:{lineHeight:"18px"},className:qe().tip_error_msg},P.qualifiedReward.msg),e().createElement(fa.Z,(0,V.Z)({},te,{onCancel:pe,onOk:Fe})))},ya=r=>{var u={};return(!r||r.certificate.isChecked&&!r.certificate.id)&&(u=(0,E.Z)((0,E.Z)({},u),{},{certificateChecked:!0,msg:Ut.learningAddItemRewardCert})),r.score.isCheckedReward&&!r.score.reward&&(u=(0,E.Z)((0,E.Z)({},u),{},{scoreRewardChecked:!0,msg:Ut.qualifiedCredits})),Object.keys(u).length?u:""},Ea=(0,ge.Z)((0,h.$j)((0,j.Z)()(ha))),Ca=n(4358),gt=n.n(Ca),ka=(0,lt.me)(),Sa=pt.Z[ka].learning.validation,ba=r=>{var u=r.t,m=r.name,_=r.value,L=r.isPreview,N=r.onFieldChange,P=r.formik,Q=P.errors,I=P.touched,ue=(0,g.useContext)(w.Z),te=ue.dispatch;(0,g.useEffect)(()=>{_.isCheckedDeduction||ee()},[ee]);var ee=(0,g.useCallback)(()=>{var z=Zt.ZP.EditStudyTask.getScoreRule();jt.WY.get({url:z}).then(fe=>{if(fe.data.data.hasRule){var ae=fe.data.data.studyScore,ve=ae[0].unFinishScore;_.deduction=ve,N(_),te({type:"updateInfoData",payload:{[m]:_}})}})},[te,m,N,_]),Ee=z=>{_.isCheckedDeduction=z,N(_),te({type:"updateInfoData",payload:{[m]:_}})},re=z=>{_.deduction=z,N(_),te({type:"updateInfoData",payload:{[m]:_}})};return e().createElement("div",{className:gt()["study-reward"]},e().createElement("div",{className:gt()["study-reward-item"]},e().createElement(st.Z,{className:gt()["study-reward-checkbox"],checked:_.isCheckedDeduction,checkedChildren:u("trainingProject.addEdit.open"),unCheckedChildren:u("trainingProject.addEdit.close"),disabled:L,onChange:Ee}),_.isCheckedDeduction&&e().createElement(e().Fragment,null,e().createElement(it.Z,{value:_.deduction,disabled:L,onChange:re,min:0,max:999,precision:0,className:I.notReward&&Q.notReward&&Q.notReward.scoreDeductionChecked?gt()["status-error"]:""}),e().createElement("span",{className:gt()["study-reward-tip"]},u("trainingProject.addEdit.credit")))),e().createElement("div",{className:gt()["study-reward-bottom-tip"]},u("trainingProject.addEdit.disqualificationTips")),I.notReward&&Q.notReward&&e().createElement("div",{style:{lineHeight:"18px"},className:gt().tip_error_msg},Q.notReward.msg))},Pa=r=>{var u={};return r.isCheckedDeduction&&!r.deduction&&(u=(0,E.Z)((0,E.Z)({},u),{},{scoreDeductionChecked:!0,msg:Sa.learningCheckDuringDate})),Object.keys(u).length?u:""},wa=(0,ge.Z)((0,h.$j)((0,j.Z)()(ba))),ft={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:20}}},xa=(r,u)=>{var m=r.t,_=r.isOpen,L=r.userInfo,N=["questionsMode","passLine","drawQuestionsSwitch","weightInput"],P=(0,g.useRef)(),Q=(0,dt.UI)("ZARA_H5"),I=(0,g.useState)(!1),ue=(0,Y.Z)(I,2),te=ue[0],ee=ue[1],Ee=(0,g.useContext)(w.Z),re=Ee.state,z=Ee.dispatch,fe=re.initialValues,ae=(0,g.useState)([]),ve=(0,Y.Z)(ae,2),he=ve[0],Ie=ve[1],pe=(0,g.useState)(!0),Fe=(0,Y.Z)(pe,2),He=Fe[0],Ae=Fe[1],Je=(0,g.useState)(-1),Xe=(0,Y.Z)(Je,2),R=Xe[0],Te=Xe[1],A=i.parse(x.m8.location.search),ne=A.id,me=A.type,se=(0,g.useState)(!1),M=(0,Y.Z)(se,2),$=M[0],Ge=M[1];(0,g.useEffect)(()=>{document.getElementById("training-project-second-box")&&(document.getElementById("training-project-second-box").scrollTop=0),ot(),Re(),Ge(!!(0,Ue.e)("evaluationTool",L.modules))},[]);var Re=function(){var D=(0,O.Z)(le().mark(function Me(){var We;return le().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,(0,la.uH)();case 2:We=Ve.sent,Ae(We==="new");case 4:case"end":return Ve.stop()}},Me)}));return function(){return D.apply(this,arguments)}}(),ot=()=>{(0,dt.UI)("PROJECT_UPGRADE_GET_LAB_LIST")&&((0,a.x8)().then(D=>{Ie(D.data.data)}),(0,a.QA)({project_id:ne||re.projectId}).then(D=>{Qe(D.data)}))},Qe=D=>{var Me=fe.stages;D&&D.length&&Me&&Me.length&&Me.forEach((We,tt)=>{if(We.list&&We.list.length){var Ve=tt+1;We.list.forEach($e=>{for(var Ne=$e.data&&$e.data.course_id||"",at=0;at<D.length;at++){var nt=D[at];if(String(nt.stageId)===String(Ve)&&String(nt.courseId)===String(Ne)){$e.lab_resource_id=nt.labResourceId,$e.lab_resource_name=nt.labResourceName,$e.lab_selected_id=nt.labResourceId;break}}})}})};(0,g.useEffect)(()=>(fe.classify&&ee(!0),()=>{r.dispatch({type:"studyProject/updateCheckResult",payload:{error:!0}}),r.dispatch({type:"studyProject/updateCheckIndex",payload:0})}),[fe]),(0,g.useImperativeHandle)(u,()=>({handleSubmitSave:D=>{D>=0?Te(D):r.dispatch({type:"studyProject/updateCheckIndex",payload:r.checkIndex+1})},getFormikValue:()=>P.current.state.values})),(0,g.useEffect)(()=>{R>=0&&r.dispatch({type:"studyProject/updateCheckIndex",payload:r.checkIndex+1})},[R]),(0,g.useEffect)(()=>{r.checkResult&&!r.checkResult.error&&P.current&&(P.current.submitForm(),r.dispatch({type:"studyProject/updateCheckResult",payload:{error:!0}}),r.dispatch({type:"studyProject/updateCheckIndex",payload:0}))},[r.checkResult]);var Pt=D=>{z({type:"setStagesIndex"});var Me=(0,k.z2)(D),We=(0,k.NK)(D),tt=(0,k.Qz)(D),Ve=(0,k.GM)(D),$e=(0,k.S1)(D),Ne=fe.qualifiedStandard;Ne.exam.isChecked=Me>0,Ne.exam.times=Me,Ne.bank.isChecked=We>0,Ne.bank.times=We,Ne.progress.isChecked=tt>0,Ne.operation.isChecked=Ve>0,Ne.operation.times=Ve,Ne.jobEvaluation.isChecked=$e>0,P.current.setFieldValue("qualifiedStandard",Ne)},ze=(D,Me,We)=>{var tt=fe.stages;tt.map(Ve=>{var $e=Ve.list;return $e&&$e.length&&$e.map(Ne=>(Ne.id===We&&(Ne.lab_resource_id=D,Ne.lab_resource_name=Me.children,Ne.lab_selected_id=D),Ne)),Ve}),P.current.setFieldValue("stages",tt)},St=D=>{R<0&&z({type:"setLoading",payload:!0}),z({type:"setStepStatusThree",payload:!0});var Me={sign:ne?me==="copy"?!1:ne:!1,save_step:"stage_content",copy:me==="copy"};Me.id=Me.sign||re.projectId||"";var We=D.studyMode==="free"?"free_mode":"unlock_mode",tt=D.stagePass?"true":"false";Me.stage_content={stages:(0,Oe.Bg)(D.stages,We),style_type:D.style_type,study_model:We,study_duration:D.studyTime||0,stage_pass:D.studyMode==="free"?"false":tt,study_project_criterion:{progress:D.qualifiedStandard.progress.isChecked?D.qualifiedStandard.progress.progress:"",times:D.qualifiedStandard.exam.isChecked?D.qualifiedStandard.exam.times:"",practice_times:D.qualifiedStandard.bank.isChecked?D.qualifiedStandard.bank.times:"",operation_times:D.qualifiedStandard.operation.isChecked?D.qualifiedStandard.operation.times:"",finish_evaluation:D.qualifiedStandard.jobEvaluation.isChecked?"true":"false",certificate_id:D.qualifiedReward.certificate.isChecked?D.qualifiedReward.certificate.id:"",is_get_score:!0,study_score:{finish_score:D.qualifiedReward.score.isCheckedReward?D.qualifiedReward.score.reward:0,unfinish_score:D.notReward.isCheckedDeduction?D.notReward.deduction:0}}};var Ve=Me.sign?a.bH:a.B;if(Ve(Me).then(Ne=>{Ne.data.result==="true"?(D.stages.forEach(at=>{at.list.forEach(nt=>{nt.replaced_old_id&&(nt.replaced_old_id="")})}),z({type:"updateInfoData",payload:D}),R>=0?(z({type:"setCurrent",payload:R}),R>re.nowStage&&z({type:"setNowStage",payload:R})):(setTimeout(()=>{z({type:"setCurrent",payload:re.current+1}),re.nowStage===re.current&&z({type:"setNowStage",payload:re.current+1})},200),ke.default.success(m("trainingProject.addEdit.saveContext")))):ke.default.error(m("trainingProject.addEdit.contentSaveFailure")),R<0&&z({type:"setLoading",payload:!1}),z({type:"setStepStatusThree",payload:!1}),Te(-1)}).catch(Ne=>{if(Ne.response){var at=Ne.response.data,nt=at.code,$t=at.message;nt==="enterpriseapi.542003"?(ke.default.error(m("learning.validation.resourceAddErrorTip")),P.current.setFieldValue("stages",(0,Oe.$x)(D.stages,JSON.parse($t).stage_error_list||[]))):nt==="enterpriseapi.542004"&&ke.default.error($t)}z({type:"setLoading",payload:!1}),z({type:"setStepStatusThree",payload:!1})}),(0,dt.UI)("PROJECT_UPGRADE_GET_LAB_LIST")){var $e=wt(Me.stage_content.stages);$e&&$e.length&&(0,a.wA)($e)}},wt=D=>{for(var Me=[],We=0;We<D.length;We++)for(var tt=D[We],Ve=tt.resources,$e=tt.sort,Ne=0;Ne<Ve.length;Ne++){var at=Ve[Ne];Me.push({project_id:re.projectId,course_id:at.course_id,stage_id:$e,lab_resource_id:at.lab_resource_id,lab_name:at.lab_resource_name})}return Me},Dt=(0,g.useState)(["courseware","imageTextCourse",He?"newExam":"exam",Q?"":"practiceBank","offline","investigate","course",_?"jobEvaluation":"","practice","attendance",Q?"assess":"","liveClass"]),xt=(0,Y.Z)(Dt,2),Be=xt[0],It=xt[1];return(0,g.useEffect)(()=>{var D=["courseware","imageTextCourse",He?"newExam":"exam",Q?"":"practiceBank","offline","investigate","course",_?"jobEvaluation":"","practice","attendance",Q?"assess":"","liveClass"];It([...D])},[_,He,Q]),e().createElement("div",{id:"training-project-second-box"},te?e().createElement(h.J9,{ref:P,initialValues:fe,onSubmit:St,render:D=>e().createElement(h.l0,{className:J()["cl-form"]},e().createElement("div",{className:J()["content-box-form-stages"]},e().createElement(h.gN,{component:s.OE,displayType:"Custom",name:"stages",required:!0,customError:!0,isHasTutor:!0,taskStatusEdit:-1,formValue:D.values,stageResourceError:[],examProps:{disabledFields:N},createUserId:D.values.createUserId,onStageChange:Pt,resourceType:Be,deleteModal:!!ne,jobEvaluationEdit:!!ne,jobEvaluationCount:(0,k.S1)(D.values.stages),laboratoryList:he,handleEvent:ze,isResourceLock:!0,anonymousMarking:!0,multipleMissedScore:!0,formItemClassName:J()["cl-form_list-item"],isStageHasRewardAStandard:!0,evaluateAssign:re.evaluateAssign,isHasToolEva:$,from:"trainingProject"})),e().createElement("div",{className:J()["content-box-form-config"]},e().createElement("div",{className:J()["study-config-name"]},m("trainingProject.addEdit.contentConfig")),e().createElement("div",{className:J()["study-config-content"]},e().createElement(h.gN,(0,V.Z)({component:Tt,displayType:"Custom",name:"studyMode",label:m("trainingProject.addEdit.modeSelect"),formItemClassName:J()["cl-form_list-item"]},ft)),D.values.studyMode==="map"&&e().createElement(h.gN,(0,V.Z)({component:oa,name:"stagePass",displayType:"Custom",formItemClassName:J()["cl-form-margin-bottom"],label:m("component.stageBreak")},ft)),!Q&&e().createElement(h.gN,(0,V.Z)({component:Jt,displayType:"Custom",name:"style_type",formItemClassName:J()["cl-form_list-item"],label:m("trainingProject.addEdit.mapStyle")},ft)),e().createElement(h.gN,(0,V.Z)({component:ra,name:"studyTime",displayType:"Custom",formItemClassName:J()["cl-form-margin-bottom"],validate:na,stagesList:D.values.stages,label:m("trainingProject.addEdit.studyTime")},ft)))),e().createElement("div",{className:"".concat(J()["content-box-form-config"]," ").concat(J()["content-box-form-config-bottom"])},e().createElement("div",{className:J()["study-config-name"]},m("trainingProject.addEdit.setQualified")),e().createElement("div",{className:J()["study-config-content"]},e().createElement(h.gN,(0,V.Z)({component:pa,displayType:"Custom",required:!0,label:m("trainingProject.addEdit.learningAddSecPassTitle"),formValue:D.values,name:"qualifiedStandard",shouldRenderedOperationCount:!(0,dt.UI)("PROJECT_UPGRADE_QUALIFIED"),formItemClassName:"".concat(J()["cl-form_list-item"]," ").concat(J()["cl-form_list-item-margin"]),validate:ca},ft)),e().createElement(h.gN,(0,V.Z)({component:Ea,displayType:"Custom",name:"qualifiedReward",label:m("trainingProject.addEdit.learningAddSecRewardTitle"),validate:ya,tipType:"project",customError:!0,formItemClassName:"".concat(J()["cl-form_list-item"]," ").concat(J()["cl-form_list-item-Reward"])},ft)),e().createElement(h.gN,(0,V.Z)({component:wa,displayType:"Custom",name:"notReward",label:m("trainingProject.addEdit.learningAddRewardunPass"),validate:Pa,tipType:"project",customError:!0,formItemClassName:J()["cl-form-margin-bottom"]},ft)))),e().createElement(s.I,null))}):null)},Ia=r=>({isOpen:r.user.JobEvaluationOpen,userInfo:r.user,checkIndex:r.studyProject.checkIndex,checkResult:r.studyProject.checkResult}),Ta=(0,U.$j)(Ia,null,null,{forwardRef:!0})((0,j.Z)("translation",{withRef:!0})((0,g.forwardRef)(xa))),Zn=n(98858),Qt=n(4914),Na=n(19451),de=n.n(Na),ja=n(7717),je=n.n(ja),bt=(0,lt.me)(),Za=r=>{var u=r.t,m=r.value,_=r.name,L=r.isPreview,N=r.formik,P=N.errors,Q=N.touched,I=r.stagesList,ue=r.showFaceRecognition,te=(0,g.useContext)(w.Z),ee=te.dispatch,Ee=ae=>{m.faceRecognition=ae,r.onFieldChange(m),ee({type:"updateInfoData",payload:{[_]:m}})},re=ae=>{m.preventCutScreen=ae,r.onFieldChange(m),ee({type:"updateInfoData",payload:{[_]:m}})},z=ae=>{m.preventDrag=ae,r.onFieldChange(m),ee({type:"updateInfoData",payload:{[_]:m}})},fe=ae=>{m.speedPlay=ae,r.onFieldChange(m),ee({type:"updateInfoData",payload:{[_]:m}})};return e().createElement("div",{className:je()["study-reward"]},ue?e().createElement("div",{className:je()["study-reward-item"]},e().createElement("span",{className:"".concat(je()["study-reward-switch-title"]," ").concat(bt==="en_us"?je()["study-reward-switch-title-en"]:"")},u("trainingProject.addEdit.faceKnow")),e().createElement(st.Z,{className:je()["study-reward-checkbox"],defaultChecked:m.faceRecognition,checkedChildren:u("trainingProject.addEdit.open"),unCheckedChildren:u("trainingProject.addEdit.close"),disabled:L,onChange:Ee}),e().createElement(ct.Z,{placement:"right",title:u("trainingProject.addEdit.PCNotSupported"),overlayClassName:je()["tooltip-overlay"]},e().createElement("span",{className:je()["toolTip-span"]},e().createElement(S.Z,{style:{fontSize:"16px",color:"rgba(0, 0, 0, 0.45)"}})))):null,(0,k.MB)(I)>0?e().createElement(e().Fragment,null,e().createElement("div",{className:je()["study-reward-item"]},e().createElement("span",{className:"".concat(je()["study-reward-switch-title"]," ").concat(bt==="en_us"?je()["study-reward-switch-title-en"]:"")},u("trainingProject.addEdit.hangUp")),e().createElement(st.Z,{className:je()["study-reward-checkbox"],defaultChecked:m.preventCutScreen,checkedChildren:u("trainingProject.addEdit.open"),unCheckedChildren:u("trainingProject.addEdit.close"),disabled:L,onChange:re}),e().createElement("span",{className:je()["study-reward-switch-tip"]},u("trainingProject.addEdit.openHangUp"))),e().createElement("div",{className:je()["study-reward-item"]},e().createElement("span",{className:"".concat(je()["study-reward-switch-title"]," ").concat(bt==="en_us"?je()["study-reward-switch-title-en"]:"")},u("trainingProject.addEdit.dragUp")),e().createElement(st.Z,{className:je()["study-reward-checkbox"],defaultChecked:m.preventDrag,checkedChildren:u("trainingProject.addEdit.open"),unCheckedChildren:u("trainingProject.addEdit.close"),disabled:L,onChange:z}),e().createElement("span",{className:je()["study-reward-switch-tip"]},u("trainingProject.addEdit.preventDrag"))),e().createElement("div",{className:"".concat(je()["study-reward-item"]," ").concat(je()["study-reward-item-bottom"])},e().createElement("span",{className:"".concat(je()["study-reward-switch-title"]," ").concat(bt==="en_us"?je()["study-reward-switch-title-en"]:"")},u("trainingProject.addEdit.speedPlayback")),e().createElement(st.Z,{className:je()["study-reward-checkbox"],defaultChecked:m.speedPlay,checkedChildren:u("trainingProject.addEdit.open"),unCheckedChildren:u("trainingProject.addEdit.close"),disabled:L,onChange:fe}),e().createElement(ct.Z,{placement:"right",title:u("trainingProject.addEdit.speedPlayTip"),overlayClassName:je()["tooltip-overlay"]},e().createElement("span",{className:je()["toolTip-span"]},e().createElement(S.Z,{style:{fontSize:"16px",color:"rgba(0, 0, 0, 0.45)"}}))))):null,Q.reward&&P.reward&&e().createElement("span",{style:{paddingLeft:"16px"},className:je().tip_error_msg},P.reward.msg))},Oa=r=>({isOpenTrainingCamp:r.publicVariable.isOpenTrainingCamp}),La=(0,U.$j)(Oa)((0,ge.Z)((0,h.$j)((0,j.Z)()(Za)))),Ma=n(49909),mt=n.n(Ma),Aa=(0,lt.me)(),Ra=pt.Z[Aa].learning.validation,Da=r=>{var u=r.t,m=r.name,_=r.value,L=r.isPreview,N=(0,g.useContext)(w.Z),P=N.dispatch,Q=te=>{_.isChecked=te.target.value,te.target.value&&(_.limit=_.limit||1),r.onFieldChange(_),P({type:"updateInfoData",payload:{[m]:_}})},I=te=>{_.limit=te,r.onFieldChange(_),P({type:"updateInfoData",payload:{[m]:_}})},ue=e().createElement("div",null,e().createElement("div",null,u("trainingProject.addEdit.learningPageViewedTip2")),e().createElement("div",null,u("trainingProject.addEdit.learningPageViewedTip")));return e().createElement("div",{className:mt()["switch-reward"]},e().createElement("div",{className:mt()["switch-reward-item"]},e().createElement(Pe.ZP.Group,{disabled:L,onChange:Q,defaultValue:_.isChecked,buttonStyle:"solid"},e().createElement(Pe.ZP.Button,{value:!0},u("trainingProject.addEdit.learningAddSecSetTitleInfo")),e().createElement(Pe.ZP.Button,{value:!1},u("trainingProject.addEdit.learningPageViewed"))),e().createElement(ct.Z,{placement:"right",title:ue,overlayClassName:mt()["tooltip-overlay"]},e().createElement("span",{className:mt()["toolTip-span"]},e().createElement(S.Z,{style:{fontSize:"16px",color:"rgba(0, 0, 0, 0.45)"}}))),_.isChecked?e().createElement("div",{className:mt()["study-time-limit"]},e().createElement("span",{className:mt()["study-time-limit-tip"]},u("trainingProject.addEdit.browsingTimeReaches")),e().createElement(it.Z,{size:"middle",value:_.limit,disabled:L,onChange:I,className:mt()["study-time-limit-number"],min:1,max:9999,precision:0}),e().createElement("span",{className:mt()["study-time-limit-tip-standard"]},u("trainingProject.addEdit.secByPageFinish"))):null))},Fa=r=>{var u;return r.isChecked&&!r.limit&&(u=Ra.learningTimeTip),u},Ba=(0,ge.Z)((0,h.$j)((0,j.Z)()(Da))),Ua=n(65778),Et=n.n(Ua),Qa=r=>{var u=r.t,m=r.value,_=r.name,L=r.tipHTML,N=r.isPreview,P=r.showHTML,Q=(0,g.useContext)(w.Z),I=Q.dispatch,ue=te=>{r.onFieldChange(te),I({type:"updateInfoData",payload:{[_]:te}})};return e().createElement("div",{className:Et()["switch-reward"]},e().createElement("div",{className:Et()["switch-reward-item"]},e().createElement(st.Z,{className:Et()["switch-reward-checkbox"],checked:m,checkedChildren:u("trainingProject.addEdit.open"),unCheckedChildren:u("trainingProject.addEdit.close"),disabled:N,onChange:ue}),P?L:e().createElement(ct.Z,{placement:"right",title:L,overlayClassName:Et()["tooltip-overlay"]},e().createElement("span",{className:Et()["toolTip-span"]},e().createElement(S.Z,{style:{fontSize:"16px",color:"rgba(0, 0, 0, 0.45)"}})))))},Ct=(0,ge.Z)((0,h.$j)((0,j.Z)()(Qa))),Wa=n(6939),Ot=n.n(Wa),Va=r=>{var u=r.t,m=r.name,_=r.value,L=r.isPreview,N=(0,g.useContext)(w.Z),P=N.dispatch,Q=I=>{r.onFieldChange(I.target.value),P({type:"updateInfoData",payload:{[m]:I.target.value}})};return e().createElement("div",{className:Ot()["switch-reward"]},e().createElement("div",{className:Ot()["switch-reward-item"]},e().createElement(Pe.ZP.Group,{disabled:L,onChange:Q,defaultValue:_,buttonStyle:"solid",className:Ot()["switch-reward-Group"]},e().createElement(Pe.ZP.Button,{value:"pass"},u("trainingProject.addEdit.marginal")),e().createElement(Pe.ZP.Button,{value:"done"},u("trainingProject.addEdit.handPaper")))))},Ka=(0,ge.Z)((0,h.$j)((0,j.Z)()(Va))),qa=n(50684),Lt=n.n(qa),Ga=n(40646),Wt=n(7653),$a=r=>{var u,m,_=r.value,L=r.name,N=r.disabled,P=N===void 0?!1:N,Q=r.createUserId,I=Q===void 0?"":Q,ue=r.t,te=r.qwTicketShow,ee=r.formik,Ee=(0,g.useContext)(w.Z),re=Ee.state,z=Ee.dispatch,fe=((u=ee.values)===null||u===void 0||(m=u.projectView)===null||m===void 0?void 0:m.projectViewUserList.map(Ie=>Ie.id))||[],ae=(Ie,pe)=>{pe?(r.onFieldChange((0,E.Z)((0,E.Z)({},_),{},{supervisorUserList:Ie,qyWeChatVo:pe})),z({type:"updateInfoData",payload:{[L]:(0,E.Z)((0,E.Z)({},_),{},{supervisorUserList:Ie,qyWeChatVo:pe})}})):(r.onFieldChange((0,E.Z)((0,E.Z)({},_),{},{supervisorUserList:Ie})),z({type:"updateInfoData",payload:{[L]:(0,E.Z)((0,E.Z)({},_),{},{supervisorUserList:Ie})}}))},ve=Ie=>{var pe=Ie.includes("withCoord");r.onFieldChange((0,E.Z)((0,E.Z)({},_),{},{isChecked:pe})),z({type:"updateInfoData",payload:{[L]:(0,E.Z)((0,E.Z)({},_),{},{isChecked:pe})}})},he=[];return _.isChecked&&he.push("withCoord"),e().createElement("div",{className:Lt()["add-supervision"]},e().createElement("div",{className:Lt()["add-supervision-list"]},e().createElement(Wt.Z,{onChange:ae,createUserId:I,addBtnText:ue("trainingProject.addEdit.addSynergy"),defaultChecked:_.supervisorUserList,disabled:P,qwTicketShow:te,filterUserListIds:fe})),e().createElement("div",{className:Lt()["add-supervision-footer"]},(0,k.z2)(re.initialValues.stages)>0?e().createElement(Ga.t,{defaultValue:he,options:[{label:ue("trainingProject.addEdit.withCoordinator"),value:"withCoord"}],onChange:ve}):null))},Ha=(0,ge.Z)((0,h.$j)((0,j.Z)()($a))),za=n(29173),Vt=n.n(za),Ya=r=>{var u,m,_=r.value,L=r.name,N=r.disabled,P=N===void 0?!1:N,Q=r.t,I=r.qwTicketShow,ue=r.tipHTML,te=r.formik,ee=r.copyType,Ee=(0,g.useContext)(w.Z),re=Ee.dispatch,z=((u=te.values)===null||u===void 0||(m=u.supervisor)===null||m===void 0?void 0:m.supervisorUserList.map(ae=>ae.id))||[],fe=(ae,ve)=>{ve?(r.onFieldChange((0,E.Z)((0,E.Z)({},_),{},{projectViewUserList:ae,qyWeChatVo:ve})),re({type:"updateInfoData",payload:{[L]:(0,E.Z)((0,E.Z)({},_),{},{projectViewUserList:ae,qyWeChatVo:ve})}})):(r.onFieldChange((0,E.Z)((0,E.Z)({},_),{},{projectViewUserList:ae})),re({type:"updateInfoData",payload:{[L]:(0,E.Z)((0,E.Z)({},_),{},{projectViewUserList:ae})}}))};return e().createElement("div",{className:Vt()["add-supervision"]},e().createElement("div",{className:Vt()["add-supervision-list"]},e().createElement(Wt.Z,{onChange:fe,createUserId:"",addBtnText:Q("trainingProject.addEdit.addProjectView"),defaultChecked:ee==="copy"?[]:_?_.projectViewUserList:[],disabled:P,qwTicketShow:I,tipHtml:ue,reserveUser:[],filterUserListIds:z,notCreator:!0})))},Ja=(0,ge.Z)((0,h.$j)((0,j.Z)()(Ya))),Xa=n(31448),Mt=n.n(Xa),en=r=>{var u=r.value,m=r.name,_=r.t,L=(0,g.useState)(!1),N=(0,Y.Z)(L,2),P=N[0],Q=N[1],I=(0,g.useContext)(w.Z),ue=I.dispatch,te=z=>{var fe=z.target.value;Q(fe),r.onFieldChange((0,E.Z)((0,E.Z)({},u),{},{authScopeIsChecked:fe})),ue({type:"updateInfoData",payload:{[m]:(0,E.Z)((0,E.Z)({},u),{},{authScopeIsChecked:fe})}})},ee=u.authScopeIsChecked,Ee=ee===void 0?!1:ee;(0,g.useEffect)(()=>{Q(!!Ee)},[]);var re=e().createElement("div",null,e().createElement("div",null,_("trainingProject.addEdit.jurisdictionTip")),e().createElement("div",null,_("trainingProject.addEdit.teachingTip")),e().createElement("div",null,_("trainingProject.addEdit.subordinateTip")));return e().createElement("div",{className:Mt()["add-supervision"]},e().createElement(Pe.ZP.Group,{onChange:te,value:P},e().createElement(Pe.ZP,{className:Mt()["check-authScope"],value:!0},e().createElement(ct.Z,{placement:"top",overlayStyle:{maxWidth:422},title:re},_("trainingProject.addEdit.viewDataTip"))),e().createElement(Pe.ZP,{className:Mt()["check-authScope"],value:!1},_("trainingProject.addEdit.viewDataAllTip"))))},tn=(0,ge.Z)((0,h.$j)((0,j.Z)()(en))),an=n(50378),De=n.n(an),Kt=n(1164),nn=(0,lt.me)(),kt=pt.Z[nn].learning.validation,rn=r=>{var u=(0,U.v9)(ve=>{var he=ve.advancedSetting;return{themeColor:he.themeColor}}),m=u.themeColor,_=r.t,L=r.name,N=r.value,P=r.isPreview,Q=r.formik,I=Q.errors,ue=Q.touched,te=(0,g.useContext)(w.Z),ee=te.dispatch,Ee=ve=>{N.isfree=!ve,r.onFieldChange(N),ee({type:"updateInfoData",payload:{[L]:N}})},re=ve=>{N.discountPrice=ve,r.onFieldChange(N),ee({type:"updateInfoData",payload:{[L]:N}})},z=ve=>{N.originPrice=ve,r.onFieldChange(N),ee({type:"updateInfoData",payload:{[L]:N}})},fe=()=>{Kt.Z.targetTo({path:"/enterprise/systemSetup/paymentSettings/accountSetting"})},ae=localStorage.getItem("isAdmin");return e().createElement("div",{className:De()["switch-reward"]},e().createElement("div",{className:De()["switch-reward-item"]},e().createElement(st.Z,{className:De()["switch-reward-checkbox"],defaultChecked:!N.isfree,checkedChildren:_("trainingProject.addEdit.open"),unCheckedChildren:_("trainingProject.addEdit.close"),disabled:P,onChange:Ee}),ae==="true"&&e().createElement("div",{className:De()["switch-reward-box-top"]},e().createElement("span",{className:De()["switch-reward-tip"]},_("trainingProject.addEdit.openPayStudyFree")),e().createElement("span",{className:De()["switch-reward-link"],style:{color:m},onClick:fe},_("trainingProject.addEdit.accountSetting")),e().createElement("span",{className:De()["switch-reward-tip"]},_("trainingProject.addEdit.accountBinding"))),N.isfree?null:e().createElement(e().Fragment,null,e().createElement("div",{className:De()["qualified-standard-item"]},e().createElement("span",{className:De()["qualified-standard-title"]},e().createElement("span",{className:De()["qualified-standard-title-required"]},"*"),_("trainingProject.addEdit.originalPrice")),e().createElement(it.Z,{value:N.discountPrice,disabled:P,className:De()["qualified-standard-number"],onChange:re,min:0,max:99999,precision:2}),e().createElement("span",{className:De()["qualified-standard-tip"]},_("trainingProject.addEdit.moneyUnit")),ue.paySetting&&I.paySetting&&I.paySetting.msg&&I.paySetting.discountPrice&&e().createElement("div",{className:De().tip_error_msg},I.paySetting.msg)),e().createElement("div",{className:"".concat(De()["qualified-standard-item"]," ").concat(De()["margin-bottom-none"])},e().createElement("span",{className:De()["qualified-standard-title"]},_("trainingProject.addEdit.discountPrice")),e().createElement(it.Z,{value:N.originPrice,disabled:P,className:De()["qualified-standard-number"],onChange:z,min:0,max:99999,precision:2}),e().createElement("span",{className:De()["qualified-standard-tip"]},_("trainingProject.addEdit.moneyUnit")),e().createElement("span",{className:De()["qualified-standard-hint"]},_("trainingProject.addEdit.originalCost")),ue.paySetting&&I.paySetting&&I.paySetting.msg&&I.paySetting.originPrice&&e().createElement("div",{className:De().tip_error_msg},I.paySetting.msg)))))},sn=r=>{var u={};return!r.isfree&&r.discountPrice<=0?u={originPrice:!1,discountPrice:!0,msg:kt.discountPriceTip}:!r.isfree&&parseFloat(r.discountPrice)>99999?u={originPrice:!1,discountPrice:!0,msg:kt.maxDiscountPriceTip}:!r.isfree&&parseFloat(r.originPrice)<=parseFloat(r.discountPrice)?u={originPrice:!1,discountPrice:!0,msg:kt.diffPriceTip}:!r.isfree&&parseFloat(r.originPrice)===0?u={originPrice:!0,discountPrice:!1,msg:kt.originalPriceTip}:!r.isfree&&parseFloat(r.originPrice)>99999&&(u={originPrice:!0,discountPrice:!1,msg:kt.maxOriginPriceTip}),Object.keys(u).length?u:""},on=(0,ge.Z)((0,h.$j)((0,j.Z)()(rn))),ln=n(68314),At=n.n(ln),dn=r=>{var u=r.t,m=r.name,_=r.value,L=r.isPreview,N=(0,g.useContext)(w.Z),P=N.dispatch,Q=I=>{r.onFieldChange(I.target.value),P({type:"updateInfoData",payload:{[m]:I.target.value}})};return e().createElement("div",{className:At()["switch-reward"]},e().createElement("div",{className:At()["switch-reward-item"]},e().createElement(Pe.ZP.Group,{disabled:L,onChange:Q,defaultValue:_,buttonStyle:"solid",className:At()["switch-reward-Group"]},e().createElement(Pe.ZP.Button,{value:"done"},u("trainingProject.addEdit.jobSubmit")),e().createElement(Pe.ZP.Button,{value:"pass"},u("trainingProject.addEdit.approved")))))},un=(0,ge.Z)((0,h.$j)((0,j.Z)()(dn))),cn=n(48194),Ye={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:20}}},mn=(r,u)=>{var m=r.t,_=r.isOpenTrainingCamp,L=r.userInfo,N=i.parse(x.m8.location.search),P=N.type,Q=(0,g.useRef)(),I=(0,g.useContext)(w.Z),ue=I.state,te=I.dispatch,ee=ue.initialValues,Ee=ue.course_id,re=(0,g.useState)(!1),z=(0,Y.Z)(re,2),fe=z[0],ae=z[1],ve=(0,g.useState)([]),he=(0,Y.Z)(ve,2),Ie=he[0],pe=he[1],Fe=localStorage.appType==="e_app"?_:!1;(0,g.useImperativeHandle)(u,()=>({handleSubmitSave:()=>{Q.current.submitForm()},getFormikValue:()=>Q.current.state.values})),(0,g.useEffect)(()=>{He(),document.getElementById("training-project-three-box")&&(document.getElementById("training-project-three-box").scrollTop=0)},[]),(0,g.useEffect)(()=>{ee.classify&&ae(!0)},[ee]);var He=function(){var M=(0,O.Z)(le().mark(function $(){var Ge,Re,ot,Qe;return le().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,(0,dt.Kb)((0,cn.q)());case 2:if(Ge=ze.sent,Re=(0,Y.Z)(Ge,2),ot=Re[0],Qe=Re[1],!ot){ze.next=8;break}return ze.abrupt("return");case 8:Qe&&Qe.data&&Qe.data.sync_organizes&&pe(Qe.data.sync_organizes||[]);case 9:case"end":return ze.stop()}},$)}));return function(){return M.apply(this,arguments)}}(),Ae=M=>{var $,Ge;te({type:"setLoading",payload:!0});var Re=i.parse(x.m8.location.search),ot=Re.id,Qe=Re.type,Pt=Re.postSource,ze={sign:ot?Qe==="copy"?!1:ot:!1,save_step:"settings",copy:Qe==="copy"};ze.id=ze.sign||ue.projectId||"";var St="",wt=localStorage.getItem("authorityType"),Dt=L.loginMode;Dt==="WE_COM"&&!M.supervisor.qyWeChatVo&&(wt==="0"?St=JSON.stringify({userList:M.supervisor.supervisorUserList,departmentList:[]}):wt==="1"&&(St=JSON.stringify({userList:M.supervisor.supervisorUserList,selectedUserCount:1}))),ze.settings={study_time_limit:M.studyLimit.isChecked?M.studyLimit.limit:0,face_recognition:M.antiCheating.faceRecognition===!0?"on":"off",is_all:M.employeeRange.rangeType,user_ids:M.employeeRange.rangeList.user.map(Be=>Be.id).join(","),department_ids:M.employeeRange.rangeList.dept.map(Be=>Be.id).join(","),group_ids:M.employeeRange.rangeList.group.map(Be=>Be.id).join(","),post_ids:M.employeeRange.rangeList.post.map(Be=>Be.id).join(","),supervisor_ids:M.supervisor.qyWeChatVo?[]:M.supervisor.supervisorUserList.map(Be=>Be.id),supervisor_paper:M.supervisor.isChecked,authority_range:M.supervisor.authScopeIsChecked?"true":"false",supervisor_department_ids:[],looker:($=M.projectView)!==null&&$!==void 0&&(Ge=$.projectViewUserList)!==null&&Ge!==void 0&&Ge.length?M.projectView.projectViewUserList.map(Be=>Be.id):[],open_evaluation_result:M.jobEvaluationResults?"true":"false",is_free:M.paySetting.isfree,official_price:M.paySetting.originPrice||"",preferential_price:M.paySetting.discountPrice||"",open_learning_group:M.dingGroup?"true":"false",exam_lock:M.exam_lock,job_lock:M.job_lock,sync_progress:M.syncProgress?"true":"false",open_transfer_student:M.open_transfer_student,prevent_cut_screen:M.antiCheating.preventCutScreen,prevent_drag:M.antiCheating.preventDrag,speed_play:M.antiCheating.speedPlay,course_download:M.course_download,qy_we_chat_vo:M.employeeRange.qyWeChatVo,qy_we_supe_vo:M.supervisor.qyWeChatVo||St};var xt=ze.sign?a.bH:a.B;xt(ze).then(Be=>{Be.data.result==="true"?(te({type:"updateInfoData",payload:M}),Pt==="postStudyInfo"?Xe(M.title,Be.data.id,M.projectStatus):Je(Be.data.id,M.projectStatus)):ke.default.error(m("trainingProject.addEdit.contentSaveFailure")),te({type:"setLoading",payload:!1})}).catch(Be=>{if(Be.response){var It=Be.response.data,D=It.code,Me=It.message;D==="enterpriseapi.542003"?ke.default.error(m("learning.validation.resourceAddErrorTip")):(D==="enterpriseapi.542004"||D==="542056")&&ke.default.error(Me)}te({type:"setLoading",payload:!1})})},Je=(M,$)=>{$==="draft"?(sessionStorage.setItem("guideInfo",JSON.stringify({id:M,title:ee.title,course_id:Ee,enroll_id:""})),x.m8.push("/knowledgeBase/learningResources/studyProject?from=draft")):x.m8.push("/knowledgeBase/learningResources/studyProject?from=create"),M&&localStorage.getItem(M)&&localStorage.removeItem(M)},Xe=(M,$,Ge)=>{var Re=i.parse(x.m8.location.search),ot=Re.post_id,Qe=Re.postFromPage;y.Z.confirm({title:"\u300A".concat(M,"\u300B").concat(m("learning.learningProjectSubmitTitle")),content:m("personnelDevelope.returnLearningScheme"),okText:m("common.ok"),cancelText:m("common.cancel"),onOk:()=>{x.m8.replace("/talentedDevelopment/postTrainPlan/postCollocation/add?post_id=".concat(ot,"&projectId=").concat($,"&postFromPage=").concat(Qe,"&postSource=postStudyInfo"))},onCancel:()=>{Je($,Ge)}})},R=(0,g.useState)(!1),Te=(0,Y.Z)(R,2),A=Te[0],ne=Te[1],me=()=>{ne(!1)},se=(0,g.useMemo)(()=>(0,Bt.Ks)({orgTypes:Ie,type:"face"})?_:!1,[Ie,_]);return e().createElement("div",{id:"training-project-three-box"},fe?e().createElement(h.J9,{ref:Q,initialValues:ee,onSubmit:Ae,render:M=>e().createElement(h.l0,{className:de()["cl-form"]},e().createElement("div",{className:de()["form-content-box"]},e().createElement("div",{className:de()["cl-form__sectitle-name"]},m("common.visibleRange")),e().createElement("div",{className:de()["form-content"]},e().createElement(h.gN,(0,V.Z)({component:s.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:m("common.visibleRange"),defaultFieldList:M.values.employeeRange,validate:v.FI,mode:["all","part","private"],qwTicketShow:!0,orgProps:{title:m("component.chooseVisibleScope")},formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-bottom"])},Ye)),(0,k.LH)(ee.stages)>0?e().createElement(h.gN,(0,V.Z)({component:Ct,displayType:"Custom",name:"open_transfer_student",label:m("trainingProject.addEdit.transfer"),showHTML:!0,tipHTML:e().createElement("div",{className:de()["tip-content"]},m("trainingProject.addEdit.openTransferPark")),formItemClassName:de()["cl-form_list-item"]},Ye)):null)),e().createElement("div",{className:de()["form-content-box"]},e().createElement("div",{className:de()["cl-form__sectitle-name"]},m("trainingProject.addEdit.learnToSet")),e().createElement("div",{className:"".concat(de()["form-content"]," ").concat(de()["form-content-setting"])},se||(0,k.MB)(M.values.stages)>0?e().createElement(h.gN,(0,V.Z)({component:La,showFaceRecognition:se,displayType:"Custom",name:"antiCheating",label:e().createElement(ct.Z,{placement:"bottomLeft",title:e().createElement(e().Fragment,null,e().createElement("span",{style:{paddingRight:"30px"}},m("trainingProject.addEdit.bootPromptRulesTip")),e().createElement("span",{style:{cursor:"pointer"},onClick:me},"\xD7")),getPopupContainer:()=>document.getElementById("page-form"),trigger:"click",color:"#000000b3",visible:A},e().createElement("span",null,m("trainingProject.addEdit.antiCheating"))),stagesList:M.values.stages,formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-antiCheating"])},Ye)):null,(0,k.tk)(ee.stages)>0?e().createElement(h.gN,(0,V.Z)({component:Ba,displayType:"Custom",name:"studyLimit",validate:Fa,label:m("trainingProject.addEdit.documentLearning"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-studyLimit"])},Ye)):null,((0,k.z2)(ee.stages)>0||(0,k.Hh)(ee.stages)>0)&&ee.studyMode==="map"?e().createElement(Qt.Z,{title:""},e().createElement(Qt.Z.Item,{label:m("trainingProject.addEdit.clearSettings")},(0,k.z2)(ee.stages)>0&&ee.studyMode==="map"?e().createElement(h.gN,(0,V.Z)({component:Ka,displayType:"Custom",name:"exam_lock",label:m("trainingProject.addEdit.examLockCondition"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-lock"])},Ye)):null,(0,k.Hh)(ee.stages)>0&&ee.studyMode==="map"?e().createElement(h.gN,(0,V.Z)({component:un,displayType:"Custom",name:"job_lock",label:m("trainingProject.addEdit.jobLockCondition"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-lock"])},Ye)):null)):null,(0,k.S1)(ee.stages)>0?e().createElement(h.gN,(0,V.Z)({component:Ct,displayType:"Custom",name:"jobEvaluationResults",label:m("trainingProject.addEdit.testResult"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-bottom"]),tipHTML:e().createElement("div",{className:de()["tip-content"]},m("trainingProject.addEdit.openTestResult"))},Ye)):null,e().createElement(h.gN,(0,V.Z)({component:Ct,displayType:"Custom",name:"syncProgress",label:m("trainingProject.addEdit.scheduleSync"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-bottom"]),tipHTML:e().createElement("div",{className:de()["tip-content"]},m("trainingProject.addEdit.openLearningProgress"))},Ye)),Fe?e().createElement(h.gN,(0,V.Z)({component:Ct,displayType:"Custom",name:"dingGroup",label:m("trainingProject.addEdit.learningCommunity"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-bottom"]),tipHTML:e().createElement("div",{className:de()["tip-content"]},m("trainingProject.addEdit.openLearningCommunity"))},Ye)):null,(0,dt.UI)("ZARA_H5")?null:e().createElement(h.gN,(0,V.Z)({component:Ct,displayType:"Custom",name:"course_download",label:m("trainingProject.addEdit.courseDownload"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-bottom"]),tipHTML:e().createElement("div",{className:de()["tip-content"]},m("trainingProject.addEdit.courseDownloadTip"))},Ye)))),e().createElement("div",{className:de()["form-content-box"]},e().createElement("div",{className:de()["cl-form__sectitle-name"]},m("trainingProject.addEdit.moreSetting")),e().createElement("div",{className:"".concat(de()["form-content"]," ").concat(de()["form-content-margin-none"])},e().createElement(h.gN,(0,V.Z)({component:Ha,displayType:"Custom",name:"supervisor",label:m("trainingProject.addEdit.projectCoordination"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-supervisor"]),createUserId:M.values.createUserId,qwTicketShow:!0},Ye)),e().createElement(h.gN,(0,V.Z)({component:Ja,displayType:"Custom",name:"projectView",label:m("trainingProject.addEdit.projectViewer"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-supervisor"]),qwTicketShow:!0,tipHTML:e().createElement("div",{className:de()["tip-content"]},m("trainingProject.addEdit.projectViewerTip")),copyType:P},Ye)),e().createElement(h.gN,(0,V.Z)({component:tn,displayType:"Custom",name:"supervisor",label:m("trainingProject.dataMonitor"),formItemClassName:"".concat(de()["cl-form_list-item"]," ").concat(de()["cl-form-margin-supervisor"]),createUserId:M.values.createUserId},Ye)),(0,dt.eY)("DINGTALK_ENTERPRISE_LOCK")&&_&&e().createElement(h.gN,(0,V.Z)({component:on,displayType:"Custom",name:"paySetting",label:m("trainingProject.addEdit.payLearning"),validate:sn,customError:!0,formItemClassName:de()["cl-form_list-item"]},Ye)))),e().createElement(s.I,null))}):null)},_n=r=>({userInfo:r.user,isOpenTrainingCamp:r.publicVariable.isOpenTrainingCamp}),pn=(0,U.$j)(_n,null,null,{forwardRef:!0})((0,j.Z)("translation",{withRef:!0})((0,g.forwardRef)(mn))),gn=(0,lt.me)(),fn=pt.Z[gn].trainingProject,vn=(0,x.Qm)()._store,hn=vn.getState(),qt=hn.advancedSetting,yn={id:"",title:"",covers:{coverType:1,cover:"",baseCover:""},lecturerInfo:{name:"",id:0,lecturer_type:"",sync_lecturer_id:"",lecturer_source_type:""},classify:"",deptIds:"",budget:0,syncProgress:!1,summary:"",qrcode:[],dingGroup:!1,exam_lock:"pass",job_lock:"done",style_type:"normal",createUserId:"",studyMode:"free",employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}},stages:[{key:"".concat(new Date().getTime()),name:"".concat(fn.addEdit.stageTaskPanelTitle,"1"),desc:"",list:[],inOrder:!0,Standard:{progressCheck:!1,progress:100,examCheck:!1,examNum:0,bankCheck:!1,bankNum:0,practiceCheck:!1,practiceNum:0,jobEvaluationCheck:!1},reward:{getScoreChecked:!1,getScore:0,certificateChecked:!1,certificateId:"",certificateName:"",certificateImage:""}}],studyTime:"",stagePass:!0,studyLimit:{isChecked:!0,limit:Number(qt.documentStudyLimit)?Number(qt.documentStudyLimit):1},jobEvaluationResults:!1,antiCheating:{faceRecognition:!1,preventCutScreen:!1,preventDrag:!1,speedPlay:!1},qualifiedStandard:{progress:{isChecked:!1,progress:100},exam:{isChecked:!1,times:0},bank:{isChecked:!1,times:0},operation:{isChecked:!1,times:0},jobEvaluation:{isChecked:!1}},qualifiedReward:{certificate:{isChecked:!1,id:"",name:"",previewUrl:""},score:{isCheckedReward:!1,reward:0}},notReward:{isCheckedDeduction:!1,deduction:0},supervisor:{supervisorUserList:[],isChecked:!0,authScopeIsChecked:!0},paySetting:{isfree:!0,originPrice:"",discountPrice:""},projectStatus:"draft",open_transfer_student:!1,save_step:"",course_download:!1},Gt=n(18361),En=n(4408),Cn=n(50658),kn=n(98233),Sn=n(47444),Rt=W.Z.Step,bn=r=>{var u=r.t,m=(0,g.useRef)(null),_=(0,g.useRef)(null),L=(0,g.useRef)(null),N=(0,dt.UI)("ZARA_H5"),P=(0,g.useReducer)(Gt.I,Gt.E),Q=(0,Y.Z)(P,2),I=Q[0],ue=Q[1],te=(0,g.useState)(!1),ee=(0,Y.Z)(te,2),Ee=ee[0],re=ee[1],z=i.parse(x.m8.location.search),fe=z.id,ae=z.type;(0,g.useEffect)(()=>{var A=i.parse(x.m8.location.search),ne=A.id;return ne?Ie(ne):ue({type:"setInfoData",payload:JSON.parse(JSON.stringify(yn))}),r.dispatch({type:"publicVariable/getHasMenusPermissions",payload:{flag:"TrainingCamp"}}),()=>{var me=I.projectId||ne||"";me&&localStorage.getItem(me)&&localStorage.removeItem(me)}},[]);var ve=function(){var A=(0,O.Z)(le().mark(function ne(me){var se,M,$,Ge,Re;return le().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return se=r.dispatch,M=r.userInfo,$=Zt.ZP.subsidyGz.subsidyCourseSetting(me),Ge={user_id:M.id},Qe.next=5,jt.WY.get({url:$,params:Ge});case 5:Re=Qe.sent,se({type:"subsidyCourseInfo/saveIsSubsidyCourse",payload:{isSubsidyCourse:Re.data.is_subsidy_course}});case 7:case"end":return Qe.stop()}},ne)}));return function(me){return A.apply(this,arguments)}}(),he=A=>A.map(ne=>(0,E.Z)((0,E.Z)({},ne),{},{resources:ne.resources.map(me=>me.type===6?(0,E.Z)((0,E.Z)({},me),{},{exam:(0,E.Z)((0,E.Z)({},me.exam),{},{id:"",user_join:"false"})}):me)})),Ie=(0,g.useCallback)(A=>{localStorage.isSubsidyEnterprise==="true"&&ve(A);var ne=N?a.lc:a.NU;ne(A).then(me=>{var se=me.data,M=r.userInfo;se.operationTimes||(se.operationTimes=se.operation_times);var $=(0,Sn.B)({value:"copy+".concat(se.title),LimitLength:60,char:!0});se.title=ae==="copy"?$:se.title,se.evaluate_assign=ae==="copy"?"non_assign":se.evaluate_assign,se.supervisor_user_names=ae==="copy"?[M.name]:se.supervisor_user_names,se.supervisor_ids=ae==="copy"?[M.id]:se.supervisor_ids,se.status=ae==="copy"?"draft":se.status,se.stages=ae==="copy"?he(se.stages):se.stages,ue({type:"handleProjectData",payload:se});var Ge={base_info:0,stage_content_draft:1,stage_content:1,settings:2,settings_draft:2}[se.save_step]||0;ue({type:"setNowStage",payload:ae==="copy"?0:Ge}),ae!=="copy"&&(ue({type:"setCurrent",payload:1}),se.status==="normal"&&setTimeout(()=>{re(!0)},100))})},[N]),pe=A=>{if(A<I.current){var ne;m.current&&I.current===0?ne=m.current.getFormikValue():_.current&&I.current===1?ne=_.current.getFormikValue():L.current&&I.current===2&&(ne=L.current.getFormikValue()),ue({type:"updateInfoData",payload:ne}),ue({type:"setCurrent",payload:A})}else m.current&&I.current===0?m.current.handleSubmitSave(A):_.current&&I.current===1&&_.current.handleSubmitSave(A)},Fe=()=>{m.current&&I.current===0&&m.current.handleCancelEdit()},He=(0,lt.E5)(()=>{m.current&&I.current===0?m.current.handleSubmitSave():_.current&&I.current===1?_.current.handleSubmitSave():L.current&&I.current===2&&L.current.handleSubmitSave()},500),Ae=()=>{var A=L.current.getFormikValue(),ne=i.parse(x.m8.location.search),me=ne.id,se=I.projectId||me||"",M={id:se,create_user:A.createUserId,face_recognition:A.antiCheating.faceRecognition===!0?"on":"off",is_all:A.employeeRange.rangeType,user_ids:A.employeeRange.rangeList.user.map($=>$.id).join(","),department_ids:A.employeeRange.rangeList.dept.map($=>$.id).join(","),group_ids:A.employeeRange.rangeList.group.map($=>$.id).join(","),post_ids:A.employeeRange.rangeList.post.map($=>$.id).join(","),department_list:A.employeeRange.rangeList.dept.map($=>({name:$.name})),post_list:A.employeeRange.rangeList.post,group_list:A.employeeRange.rangeList.group,user_list:A.employeeRange.rangeList.user,supervisor_ids:A.supervisor.supervisorUserList.map($=>$.id),supervisor_user_names:A.supervisor.supervisorUserList.map($=>$.name),supervisor_paper:A.supervisor.isChecked,authority_range:A.supervisor.authScopeIsChecked?"true":"false",supervisor_department_ids:[],open_evaluation_result:A.jobEvaluationResults?"true":"false",is_free:A.paySetting.isfree,official_price_str:A.paySetting.originPrice,preferential_price_str:A.paySetting.discountPrice,open_learning_group:A.dingGroup?"true":"false",exam_lock:A.exam_lock,job_lock:A.job_lock,sync_progress:A.syncProgress?"true":"false",open_transfer_student:A.open_transfer_student,prevent_cut_screen:A.antiCheating.preventCutScreen,prevent_drag:A.antiCheating.preventDrag,speed_play:A.antiCheating.speedPlay,study_time_limit:A.studyLimit.isChecked?A.studyLimit.limit:0,course_download:A.courseDownload};localStorage.setItem(se,JSON.stringify(M)),Kt.Z.targetTo({path:kn.uk.previewView({id:se,from:"preview"})})},Je=()=>{pe(I.current-1)},Xe=()=>e().createElement("div",{className:q()["cl-form-fixed-footer"]},e().createElement("div",{className:q()["cl-form-fixed-footer__container"]},I.current===0?e().createElement(p.Z,{onClick:Fe},u("common.cancel")):null,I.current!==0?e().createElement(p.Z,{onClick:Je},u("trainingProject.addEdit.prev")):null,I.current===2?e().createElement(p.Z,{onClick:Ae},u("trainingProject.addEdit.preview")):null,e().createElement(p.Z,{loading:I.submitLoading,className:q()["publish-btn"],type:"primary",onClick:He},I.current===2?u("trainingProject.addEdit.publish"):u("trainingProject.addEdit.saveAndNext")))),R=(0,g.useMemo)(()=>{if(Ee)return e().createElement(K.Z,{className:q()["form-page-container-alert"],message:u("trainingProject.addEdit.saveEditNextTip"),type:"info",closeText:u("trainingProject.guideView.know"),showIcon:!0})},[Ee,u]),Te=u(fe?"common.edit":"common.add");return e().createElement(e().Fragment,null,e().createElement(En.Z,{title:Te+u("trainingProject.addEdit.learningProjectAddTitle")}),e().createElement(w.Z.Provider,{value:{state:I,dispatch:ue}},e().createElement("div",{className:q()["form-page-container"]},e().createElement(Cn.Z,{current:fe?"edit":"add"}),R,e().createElement("div",{className:q()["form-page-container-content"],id:"page-form"},e().createElement("div",{className:q()["form-page-container-steps"]},e().createElement(W.Z,{current:I.current,onChange:pe},e().createElement(Rt,{status:I.stepStatusFirst?"wait":"",title:u("trainingProject.addEdit.projectInfo"),icon:I.stepStatusFirst?e().createElement(F.Z,null):null}),e().createElement(Rt,{status:I.stepStatusSecond?"wait":"",title:u("trainingProject.addEdit.projectContent"),icon:I.stepStatusSecond?e().createElement(F.Z,null):null}),e().createElement(Rt,{status:I.stepStatusThree?"wait":"",title:u("trainingProject.addEdit.projectRule"),icon:I.stepStatusThree?e().createElement(F.Z,null):null,disabled:I.nowStage!==2}))),e().createElement("div",{className:q()["content-box"]},I.current===0&&e().createElement(xe,{ref:m}),I.current===1&&e().createElement(Ta,{ref:_}),I.current===2&&e().createElement(pn,{ref:L}))),Xe())))},Pn=r=>({userInfo:r.user}),wn=(0,U.$j)(Pn)((0,j.Z)()(bn))},18361:function(et,we,n){"use strict";n.d(we,{I:function(){return j},E:function(){return F}});var B=n(88986),K=n(76651),ce=n(64334),p=n(53009),E=n(3407),O=n(6793),Y=(0,O.me)(),ye=E.Z[Y].trainingProject,W=(0,K.Qm)()._store,oe=W.getState(),le=oe.advancedSetting,g=oe.user,e=(x,i)=>{var U=i.supervisor_ids,Z=i.look_users||[],q=g.loginMode,Ce=g.appId;if(q==="WE_COM"||q==="WX"&&Ce==="9005"){var Se=i.supervisor_source_types,V=i.supervisor_sync_user_ids,Ze=i.supervisor_user_names;U=U.map((H,o)=>({type:2,show:!0,id:H,name:Ze[o],userId:V[o],unionid:V[o],sourceType:Se[o]}))}else{var ke=i.supervisor_user_names;U=U.map((H,o)=>({type:2,id:H,name:ke[o],show:!0}))}var C=(0,p.$x)((0,p.tT)(i.stages,!1,!0),i.stage_error_list.length>0?i.stage_error_list:[]),y=(0,ce.z2)(C),h=(0,ce.NK)(C),S=(0,ce.Qz)(C),k=(0,ce.GM)(C),G=(0,ce.S1)(C);return{id:i.id||"",title:i.title,covers:{coverType:+i.cover_type,baseCover:i.base_cover,cover:i.cover},lecturerInfo:{name:i.lecturer_name,id:i.lecturer_id,lecturer_type:i.lecturer_type,sync_lecturer_id:i.sync_lecturer_id,lecturer_source_type:i.lecturer_source_type},classify:i.classify,deptIds:i.dept_ids,budget:i.budget,classify_name:i.classify_name,createUserId:i.create_user,summary:i.summary,exam_lock:i.save_step==="settings"&&i.exam_lock||"pass",job_lock:i.save_step==="settings"&&i.job_lock||"done",style_type:i.style_type||"normal",syncProgress:i.save_step==="settings"?i.sync_progress==="true":!1,qrcode:i.ding_img_url?[{uid:"erer",url:i.ding_img_url,name:"",status:"done"}]:[],dingGroup:i.save_step==="settings"?i.open_learning_group:!1,stages:C.length?C:[{key:"".concat(new Date().getTime()),name:"".concat(ye.addEdit.stageTaskPanelTitle,"1"),desc:"",list:[],inOrder:!0,Standard:{progressCheck:!1,progress:100,examCheck:!1,examNum:0,bankCheck:!1,bankNum:0,practiceCheck:!1,practiceNum:0,jobEvaluationCheck:!1},reward:{getScoreChecked:!1,getScore:0,certificateChecked:!1,certificateId:"",certificateName:"",certificateImage:""}}],studyLimit:{isChecked:i.save_step==="settings"?i.study_time_limit!==0:!0,limit:i.save_step==="settings"?Number(i.study_time_limit):Number(le.documentStudyLimit)?Number(le.documentStudyLimit):1},jobEvaluationResults:i.save_step==="settings"?i.open_evaluation_result==="true":!1,antiCheating:{faceRecognition:i.save_step==="settings"?i.face_recognition==="on":!1,preventCutScreen:i.save_step==="settings"?i.prevent_cut_screen:!1,preventDrag:i.save_step==="settings"?i.prevent_drag:!1,speedPlay:i.save_step==="settings"?i.speed_play:!1},qualifiedStandard:{progress:{isChecked:i.progress?S>0:!1,progress:i.progress||100},exam:{isChecked:i.times?y>0:!1,times:i.times||y},bank:{isChecked:i.practice_times?h>0:!1,times:i.practice_times||h},bank:{isChecked:i.save_step==="settings"?i.practice_times!==0&&h>0:h>0,times:i.save_step==="settings"?i.practice_times:h},operation:{isChecked:i.operation_times?k>0:!1,times:i.operation_times||k},jobEvaluation:{isChecked:i.finish_evaluation==="true"?G>0:!1}},qualifiedReward:{certificate:{isChecked:+i.certificate_id!=0||!1,id:+i.certificate_id!=0?i.certificate_id:"",name:+i.certificate_id!=0?i.certificate_name:"",previewUrl:+i.certificate_id!=0?i.certificate_url:""},score:{isCheckedReward:!!(i.study_score&&i.study_score.finish_score)||!1,reward:i.study_score&&i.study_score.finish_score?i.study_score.finish_score:0}},notReward:{isCheckedDeduction:!!(i.study_score&&i.study_score.unfinish_score)||!1,deduction:i.study_score&&i.study_score.unfinish_score?i.study_score.unfinish_score:0},supervisor:{supervisorUserList:U,isChecked:i.save_step==="settings"?i.supervisor_paper===null?!0:i.supervisor_paper:!0,visibleAuthScope:!0,authScopeIsChecked:i.save_step==="settings"?i.authority_range==="true":!0},projectView:{projectViewUserList:Z},studyMode:i.study_model==="unlock_mode"?"map":"free",employeeRange:{rangeType:i.save_step==="settings"?i.is_all:3,rangeList:{dept:i.save_step==="settings"?i.department_list:[],post:i.save_step==="settings"?i.post_list:[],group:i.save_step==="settings"?i.group_list:[],user:i.save_step==="settings"?i.user_list:[]}},studyTime:i.study_duration,stagePass:i.stage_pass==="true"||i.stage_pass==="false"?i.stage_pass==="true":!0,paySetting:{isfree:i.save_step==="settings"&&i.is_free!==null?i.is_free:!0,originPrice:i.is_free!==null?i.is_free||i.official_price_str==="0.00"?"":i.official_price_str:"",discountPrice:i.is_free!==null?i.is_free||i.preferential_price_str==="0.00"?"":i.preferential_price_str:""},projectStatus:i.status,open_transfer_student:i.save_step==="settings"?i.open_transfer_student:!1,save_step:i.save_step,course_download:i.course_download}},j=(x,i)=>{var U=i.type,Z=i.payload;switch(U){case"setCurrent":return(0,B.Z)((0,B.Z)({},x),{},{current:Z});case"setProjectId":return(0,B.Z)((0,B.Z)({},x),{},{projectId:Z});case"setStagesIndex":return(0,B.Z)((0,B.Z)({},x),{},{stagesIndex:x.stagesIndex+1});case"setNowStage":return(0,B.Z)((0,B.Z)({},x),{},{nowStage:Z});case"handleProjectData":return(0,B.Z)((0,B.Z)({},x),{},{initialValues:e(x,Z),evaluateAssign:Z.evaluate_assign&&Z.evaluate_assign==="assign"});case"setInfoData":return(0,B.Z)((0,B.Z)({},x),{},{initialValues:Z});case"updateInfoData":return(0,B.Z)((0,B.Z)({},x),{},{initialValues:Object.assign(x.initialValues,Z)});case"setLoading":return(0,B.Z)((0,B.Z)({},x),{},{submitLoading:Z});case"setStepStatusFirst":return(0,B.Z)((0,B.Z)({},x),{},{stepStatusFirst:Z});case"setStepStatusSecond":return(0,B.Z)((0,B.Z)({},x),{},{stepStatusSecond:Z});case"setStepStatusThree":return(0,B.Z)((0,B.Z)({},x),{},{stepStatusThree:Z});case"setStudyProjectInfo":return(0,B.Z)((0,B.Z)({},x),{},{studyProjectInfo:Z});case"setCourseId":return(0,B.Z)((0,B.Z)({},x),{},{course_id:Z});default:throw new Error}},F={current:0,stepStatusFirst:!1,stepStatusSecond:!1,stepStatusThree:!1,submitLoading:!1,nowStage:0,projectId:"",course_id:"",stagesIndex:0,initialValues:{},studyProjectInfo:{study_project:{}},evaluateAssign:!1}},17042:function(et,we,n){"use strict";n.d(we,{B:function(){return W},bH:function(){return oe},NU:function(){return le},lc:function(){return g},QA:function(){return e},x8:function(){return j},wA:function(){return F},wk:function(){return x},eZ:function(){return U},kM:function(){return Z},B7:function(){return q},Vq:function(){return Ce},Hg:function(){return Se},s4:function(){return V},L6:function(){return Ze},rO:function(){return ke},ZO:function(){return C},P7:function(){return y},Nk:function(){return h}});var B=n(57361),K=n(9754),ce=n.n(K),p=n(10237),E=n(37055),O=n(5430),Y=n(38642),ye={zaraFlag:(0,Y.UI)("ZARA_H5")};function W(S){var k=ye.zaraFlag?O.m1.addProjectWithEvaluate():O.m1.addProject();return p.WY.post({url:k,data:S})}function oe(S){var k=ye.zaraFlag?O.m1.editProjectWithEvaluate(S.sign):O.m1.editProject(S.sign);return p.WY.post({url:k,data:S})}function le(S){var k=O.m1.getProjectInfo(S);return p.WY.get({url:k})}function g(S){var k=O.m1.getAssessmentProjectInfo(S);return p.WY.get({url:k})}function e(S){var k=S.project_id;return p.WY.get({url:E.ZP.ahLaboratory.getLabSelectList(),params:{project_id:k}})}function j(){return p.WY.get({url:E.ZP.ahLaboratory.getLaboratoryList()})}function F(S){return p.WY.post({url:E.ZP.ahLaboratory.addLabSelectList(),data:{project_lab_mapping_list:S}})}function x(S){return i.apply(this,arguments)}function i(){return i=(0,B.Z)(ce().mark(function S(k){var G,H,o;return ce().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return G=O.bS.getTrainingProjectList(),w.next=3,p.WY.get({url:G,params:k});case 3:return H=w.sent,o={},H.status===200&&(o={data:{code:"200000",data:H.data}}),w.abrupt("return",o);case 7:case"end":return w.stop()}},S)})),i.apply(this,arguments)}function U(S){var k=S.isChecked,G=S.id,H={type:k?"normal":"disabled"},o=ye.zaraFlag?O.ZP.StudyProjectList.changeCustomStatus(G):O.ZP.StudyProjectList.changeStatus(G);return p.WY.post({url:o,data:H})}function Z(S){var k=ye.zaraFlag?O.bS.deleteCustomTrainingProject({id:S}):O.bS.deleteTrainingProject({id:S});return p.WY.post({url:k})}function q(S){var k=O.ZP.StudyProjectList.queryVisible(S);return p.WY.get({url:k})}function Ce(S){var k=S.taskId,G=S.params,H=O.ZP.subsidyGz.subsidyCourseSetting(k);return p.WY.get({url:H,params:G})}function Se(S){var k=S.data,G=O.ZP.StudyProjectList.multipleSetScope();return p.WY.post({url:G,data:k})}function V(S){var k=S.projectId,G=S.data,H=O.ZP.StudyProjectList.setViewScope(k);return p.WY.post({url:H,data:G})}function Ze(S){var k=S.enroll_id,G=O.bS.enrollment.close({enroll_id:k});return p.WY.post({url:G})}function ke(S){var k=S.course_id,G=S.submitForm,H=O.bS.enrollment.open({course_id:k});return p.WY.post({url:H,data:G})}function C(S){var k=S.enroll_id,G=O.bS.enrollment.get({enroll_id:k});return p.WY.get({url:G})}function y(S){var k=S.enroll_id,G=S.submitForm,H=O.bS.enrollment.edit({enroll_id:k});return p.WY.post({url:H,data:G})}function h(S){var k=O.ZP.StudyProjectList.multipleSetClassify();return p.WY.post({url:k,data:S})}},67479:function(et,we,n){"use strict";n.d(we,{D:function(){return ye},W:function(){return oe}});var B=n(57361),K=n(9754),ce=n.n(K),p=n(57068),E=n(31916),O=n(38642),Y=n(5430);function ye(le){return W.apply(this,arguments)}function W(){return W=(0,B.Z)(ce().mark(function le(g){var e,j,F,x,i;return ce().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.prev=0,Z.next=3,(0,E.uH)();case 3:if(e=Z.sent,e!=="old"){Z.next=6;break}return Z.abrupt("return",!1);case 6:return Z.next=8,(0,E.fP)(g);case 8:if(j=Z.sent,F=j.data,x=F.code,i=F.data,x!=="200000"){Z.next=14;break}return Z.abrupt("return",i.exam_type==="new");case 14:Z.next=20;break;case 16:return Z.prev=16,Z.t0=Z.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",Z.t0),Z.abrupt("return",!1);case 20:case"end":return Z.stop()}},le,null,[[0,16]])})),W.apply(this,arguments)}var oe={examing:function(){var le=(0,B.Z)(ce().mark(function e(j){var F,x,i;return ce().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return F="",x=j.pageFrom==="ding_myExamTask"?(0,O.lz)(Y.ZP.enterpriseId,"student"):"",Z.next=4,ye(j.exam_id);case 4:return i=Z.sent,i?F="".concat(x,"/training/examination/new-exam/examing?").concat(p.stringify(j)):F="".concat(x,"/training/examination/exam/personal?").concat(p.stringify(j)),Z.abrupt("return",F);case 7:case"end":return Z.stop()}},e)}));function g(e){return le.apply(this,arguments)}return g}(),parse:le=>"/training/examination/new-exam/parse?".concat(p.stringify(le)),examData:le=>"/training/examination/exam-data?exam_id=".concat(le.exam_id,"&task_id=").concat(le.task_id),marking:le=>"/training/examination/new-exam/marking?".concat(p.stringify(le))}},98233:function(et,we,n){"use strict";n.d(we,{nn:function(){return Y},OV:function(){return oe},Md:function(){return g},uk:function(){return O}});var B=n(57361),K=n(9754),ce=n.n(K),p=n(57068),E=n(67479),O={edit:j=>"/training/learning/project/add?".concat(p.stringify(j)),monitorDetail:j=>{var F=j.id,x=j.projectId,i=j.origin,U=j.tab;return"/training/trainingProject/monitor?id=".concat(F,"&projectId=").concat(x,"&origin=").concat(i,"&tab=").concat(U)},traineeView:j=>"/training/trainingProject/traineeView?".concat(p.stringify(j)),manageView:j=>"/training/trainingProject/manageView?".concat(p.stringify(j)),previewView:j=>"/training/trainingProject/previewView?".concat(p.stringify(j))};function Y(j){var F=j.origin,x=j.search,i=x===void 0?"":x,U={project:"/knowledgeBase/project/examination/newPlan/detail?".concat(i),learning:"/training/learning/examination/newPlan/detail?".concat(i),employee:"/training/employee/examination/newPlan/detail?".concat(i),exam:"/training/examination/newPlan/detail?".concat(i)};return U[F]||"/training/examination/newPlan/detail?".concat(i)}function ye(j,F){if(j){var x=p.stringify({id:F.id,title:F.title,origin:F.taskType,taskId:F.projectId});return Y({origin:F.taskType,search:x})}var i=p.stringify({id:F.id,taskId:F.taskId,from:F.from,taskType:F.taskType,projectId:F.projectId});return"/training/learning/project/monitor/exam?".concat(i)}function W(j,F){return j?E.W.marking({exam_id:F.id,status:F.status,markScene:"manage"}):"/training/examination/plan/testPaper?id=".concat(F.id,"&from=").concat(F.from,"&taskId=").concat(F.taskId)}function oe(){return le.apply(this,arguments)}function le(){return le=(0,B.Z)(ce().mark(function j(){var F,x,i,U=arguments;return ce().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(F=U.length>0&&U[0]!==void 0?U[0]:"unKnow",x=U.length>1?U[1]:void 0,F!=="unKnow"){q.next=7;break}return q.next=5,(0,E.D)(x.id);case 5:return i=q.sent,q.abrupt("return",ye(i,x));case 7:return q.abrupt("return",ye(F,x));case 8:case"end":return q.stop()}},j)})),le.apply(this,arguments)}function g(){return e.apply(this,arguments)}function e(){return e=(0,B.Z)(ce().mark(function j(){var F,x,i,U=arguments;return ce().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(F=U.length>0&&U[0]!==void 0?U[0]:"unKnow",x=U.length>1?U[1]:void 0,F!=="unKnow"){q.next=7;break}return q.next=5,(0,E.D)(x.id);case 5:return i=q.sent,q.abrupt("return",W(i,x));case 7:return q.abrupt("return",W(F,x));case 8:case"end":return q.stop()}},j)})),e.apply(this,arguments)}},4914:function(et,we,n){"use strict";n.d(we,{Z:function(){return ke}});var B=n(96156),K=n(28481),ce=n(90484),p=n(12924),E=n(94184),O=n.n(E),Y=n(37419),ye=n(24308),W=n(10899),oe=n(65632);function le(C){return C!=null}var g=function(y){var h=y.itemPrefixCls,S=y.component,k=y.span,G=y.className,H=y.style,o=y.bordered,f=y.label,w=y.content,T=y.colon,b=S;if(o){var s;return p.createElement(b,{className:O()((s={},(0,B.Z)(s,"".concat(h,"-item-label"),le(f)),(0,B.Z)(s,"".concat(h,"-item-content"),le(w)),s),G),style:H,colSpan:k},le(f)?f:w)}return p.createElement(b,{className:O()("".concat(h,"-item"),G),style:H,colSpan:k},p.createElement("div",{className:"".concat(h,"-item-container")},f&&p.createElement("span",{className:O()("".concat(h,"-item-label"),(0,B.Z)({},"".concat(h,"-item-no-colon"),!T))},f),w&&p.createElement("span",{className:O()("".concat(h,"-item-content"))},w)))},e=g;function j(C,y,h){var S=y.colon,k=y.prefixCls,G=y.bordered,H=h.component,o=h.type,f=h.showLabel,w=h.showContent;return C.map(function(T,b){var s=T.props,t=s.label,a=s.children,X=s.prefixCls,ie=X===void 0?k:X,c=s.className,l=s.style,v=s.span,d=v===void 0?1:v,_e=T.key;return typeof H=="string"?p.createElement(e,{key:"".concat(o,"-").concat(_e||b),className:c,style:l,span:d,colon:S,component:H,itemPrefixCls:ie,bordered:G,label:f?t:null,content:w?a:null}):[p.createElement(e,{key:"label-".concat(_e||b),className:c,style:l,span:1,colon:S,component:H[0],itemPrefixCls:ie,bordered:G,label:t}),p.createElement(e,{key:"content-".concat(_e||b),className:c,style:l,span:d*2-1,component:H[1],itemPrefixCls:ie,bordered:G,content:a})]})}var F=function(y){var h=y.prefixCls,S=y.vertical,k=y.row,G=y.index,H=y.bordered;return S?p.createElement(p.Fragment,null,p.createElement("tr",{key:"label-".concat(G),className:"".concat(h,"-row")},j(k,y,{component:"th",type:"label",showLabel:!0})),p.createElement("tr",{key:"content-".concat(G),className:"".concat(h,"-row")},j(k,y,{component:"td",type:"content",showContent:!0}))):p.createElement("tr",{key:G,className:"".concat(h,"-row")},j(k,y,{component:H?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0}))},x=F,i=function(y){var h=y.children;return h},U=i,Z=n(96159),q={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function Ce(C,y){if(typeof C=="number")return C;if((0,ce.Z)(C)==="object")for(var h=0;h<ye.c4.length;h++){var S=ye.c4[h];if(y[S]&&C[S]!==void 0)return C[S]||q[S]}return 3}function Se(C,y,h){var S=C;return(y===void 0||y>h)&&(S=(0,Z.Tm)(C,{span:h}),(0,W.Z)(y===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),S}function V(C,y){var h=(0,Y.Z)(C).filter(function(H){return H}),S=[],k=[],G=y;return h.forEach(function(H,o){var f,w=(f=H.props)===null||f===void 0?void 0:f.span,T=w||1;if(o===h.length-1){k.push(Se(H,w,G)),S.push(k);return}T<G?(G-=T,k.push(H)):(k.push(Se(H,T,G)),S.push(k),G=y,k=[])}),S}function Ze(C){var y,h=C.prefixCls,S=C.title,k=C.extra,G=C.column,H=G===void 0?q:G,o=C.colon,f=o===void 0?!0:o,w=C.bordered,T=C.layout,b=C.children,s=C.className,t=C.style,a=C.size,X=p.useContext(oe.E_),ie=X.getPrefixCls,c=X.direction,l=ie("descriptions",h),v=p.useState({}),d=(0,K.Z)(v,2),_e=d[0],xe=d[1],be=Ce(H,_e);p.useEffect(function(){var Ue=ye.ZP.subscribe(function(Oe){(0,ce.Z)(H)==="object"&&xe(Oe)});return function(){ye.ZP.unsubscribe(Ue)}},[]);var J=V(b,be);return p.createElement("div",{className:O()(l,(y={},(0,B.Z)(y,"".concat(l,"-").concat(a),a&&a!=="default"),(0,B.Z)(y,"".concat(l,"-bordered"),!!w),(0,B.Z)(y,"".concat(l,"-rtl"),c==="rtl"),y),s),style:t},(S||k)&&p.createElement("div",{className:"".concat(l,"-header")},S&&p.createElement("div",{className:"".concat(l,"-title")},S),k&&p.createElement("div",{className:"".concat(l,"-extra")},k)),p.createElement("div",{className:"".concat(l,"-view")},p.createElement("table",null,p.createElement("tbody",null,J.map(function(Ue,Oe){return p.createElement(x,{key:Oe,index:Oe,colon:f,prefixCls:l,vertical:T==="vertical",bordered:w,row:Ue})})))))}Ze.Item=U;var ke=Ze},98858:function(et,we,n){"use strict";var B=n(38166),K=n.n(B),ce=n(75282),p=n.n(ce)}}]);
