(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[4324],{95664:function(Ne,oe,e){"use strict";var F=e(14781),O=e(53431),$=e(12924),b=e.n($),N=e(91768),M=e(84874);class R extends b().Component{render(){var L=this.props,n=L.prefixCls,d=L.showRenderRefresh,f=L.totalNum,m=L.totalPage,g=L.onRefresh,C=L.onChange,t=L.defaultPageSize,w=L.current,V=L.t,A=L.onShowSizeChange,D=A===void 0?()=>{}:A;return b().createElement("div",{className:n},b().createElement("span",{className:"".concat(n,"__info")},d&&b().createElement("span",{className:"".concat(n,"__info__refresh"),onClick:g},b().createElement(M.Z,{iconClass:"iconf-switch",color:"#535B6E",size:"14px"})),V("component.totalLabel"),b().createElement("b",null,m),V("component.pageLabel"),"\uFF0C",b().createElement("b",null,f),V("component.dataItems")),f?b().createElement(O.Z,{size:"small",total:f,onChange:C,current:w,defaultPageSize:t,showSizeChanger:!1,onShowSizeChange:D}):null)}}R.defaultProps={prefixCls:"cl-modal-pagination",showRenderRefresh:!0,totalNum:0,totalPage:0,defaultPageSize:12,current:1,onRefresh:()=>{},onChange:()=>{}},oe.Z=(0,N.Z)()(R)},4408:function(Ne,oe,e){"use strict";var F=e(12924),O=e.n(F),$=e(28216),b=e(17780),N=e(38642),M=c=>({userInfo:c.user}),R=c=>{var L=c.title;return(0,b.xX)()&&setTimeout(()=>{document.title=L},0),(0,F.useEffect)(()=>{if(L&&document.title!==L&&setTimeout(()=>{document.title=L},0),(0,N.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var n=document.querySelector(".zoom-report");n&&(n.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[L]),O().createElement(O().Fragment,null)};R.defautProps={title:""},oe.Z=(0,$.$j)(M)(R)},1164:function(Ne,oe,e){"use strict";var F=e(12924),O=e.n(F),$=e(76651),b=e(38642),N=e(91302),M=R=>{var c=navigator.userAgent.toLocaleLowerCase(),L=localStorage.getItem("enterpriseId"),n=(0,b.lz)(L,R.projectType),d=localStorage.getItem("dingPersonnel"),f=N.bl.includes(d),m=R.target;function g(C){if(m==="self"&&(C.preventDefault(),$.m8.push(R.to)),f){if(R.projectType==="student"){window.location.href="".concat(n,"/").concat(R.to);return}$.m8.push(R.to);return}if(dd.version){C.preventDefault();var t="";R.to.includes("?")?t="".concat(n).concat(R.to,"&ddtab=true"):t="".concat(n).concat(R.to,"?ddtab=true"),dd.biz.util.openLink({url:t})}else c.indexOf("lark")!==-1&&(window.location.href="".concat(n).concat(R.to))}return O().createElement("a",{rel:"noreferrer",href:"".concat(R.projectType==="student"?"".concat(n).concat(R.to):"#".concat(R.to)),className:"".concat(R.wrapCls," cl-pointer"),target:c.indexOf("lark")!==-1||f?"_self":R.target||"_blank",onClick:g},R.children)};M.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},M.targetTo=R=>{var c=R.path,L=R.from,n=R.isExternalLink,d=n===void 0?!1:n,f=R.isAsync,m=f===void 0?!1:f,g=R.openName,C=g===void 0?"_blank":g,t=R.projectType,w=t===void 0?"manage":t,V=R.ddTab,A=V===void 0?!0:V,D,E=localStorage.getItem("dingPersonnel"),S=N.bl.includes(E),U=navigator.userAgent.toLocaleLowerCase(),B=localStorage.getItem("enterpriseId"),i=(0,b.lz)(B,w),z=localStorage.getItem("appType"),W=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var ie="";if(D=d?"":i,S&&!d){if(w==="student"){window.location.href="".concat(i).concat(c);return}$.m8.push(c);return}c.includes("?")?ie="".concat(D).concat(c,"&ddtab=").concat(A):ie="".concat(D).concat(c,"?ddtab=").concat(A),dd.biz.util.openLink({url:ie})}else if(U.indexOf("lark")!==-1)D=d?"":i,window.location.href="".concat(D).concat(c);else if(z==="wx_app"&&W&&d&&L==="imgText")D=d?"":w==="student"?"".concat(i):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(D).concat(c)});else if(D=d?"":w==="student"?"".concat(i):"#",m){var se=window.open("","_blank");setTimeout(()=>{se.location="".concat(D).concat(c)},100)}else window.open("".concat(D).concat(c),C)},oe.Z=M},87312:function(Ne,oe,e){"use strict";var F=e(12924),O=e.n(F),$=e(91768),b=N=>{var M=N.t;return O().createElement("div",{className:N.className?"".concat(N.className," no-result"):"no-result"},O().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1789886702513426432.png"),className:"no-data-img",alt:""}),O().createElement("p",{className:"no-data-tip"},N.tipText||M("common.empty")))};oe.Z=(0,$.Z)()(b)},88311:function(Ne,oe,e){"use strict";e.d(oe,{Z:function(){return Ze}});var F=e(62029),O=e(47673),$=e(4107),b=e(33565),N=e(57361),M=e(34792),R=e(48086),c=e(88986),L=e(43358),n=e(34041),d=e(18106),f=e(88108),m=e(9754),g=e.n(m),C=e(12924),t=e.n(C),w=e(91768),V=e(77043),A=e.n(V),D=e(20228),E=e(11382),S=e(18721),U=e.n(S),B=e(51975),i=e(37055),z={breadNav:[{value:"",label:""}],checkOne:()=>{},checkAll:()=>{},nextLevel:()=>{},changeLevel:()=>{}},W=t().createContext(z),ie={searchResult:[],deptList:[],groupList:[],postList:[],deptUser:[],groupUser:[],postUser:[],clusterList:[],classList:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],initTypeList:()=>{},initTypeUser:()=>{},toggleDisplayItem:()=>{},toggleDisplayList:()=>{},checkListOne:()=>{},checkUserOne:()=>{},removeCheckedUser:()=>{},changeLevel:()=>{},hidePosts:!1,initHidePostsStatus:()=>{},clearSelectedAll:()=>{}},se=t().createContext(ie),Ce=e(36017),fe=e(35247),ue=e(60667);class ce extends t().Component{constructor(){super(...arguments);this.changeLevel=(T,y,s,r)=>{T.preventDefault(),this.props.contextData.changeLevel(y,s,r)}}render(){var T=this.props.contextData.breadNav.map((y,s)=>t().createElement(fe.Z.Item,{key:y.value},t().createElement("span",{className:"bread-nav-item",onClick:r=>this.changeLevel(r,y.value,s,!(U()(y,"authorized")&&y.authorized==="true"))},t().createElement(ue.Z,{dataType:"departmentName",value:y.value,name:y.label,type:y.sourceType}))));return t().createElement("div",{className:"bread-nav"},t().createElement(fe.Z,null,T))}}ce.defaultProps={contextData:{breadNav:[]},changeLevel:()=>{}};var K=ce,Q=e(63185),G=e(9676),pe=e(88983),ye=e(47933),ke=e(22385),Le=e(31097),Ae=e(57119),we=e(84874),Ke=e(20136),ze=e(55241),Ve=e(13062),be=e(71230),Qe=e(89032),He=e(15746),Ie=e(28216),Ye=e(80430),Be=e(10237);function Xe(){var q=CONFIG.Role.getUserManageRange();return request.get({url:q})}function We(q){var T=i.ZP.OrgDialog.getDeptInfoUrl({departmentId:q.departmentId});return delete q.departmentId,Be.WY.get({url:T,params:q})}function st(q){var T=i.ZP.OrgDialog.getDeptUsersUrl({departmentId:q.departmentId});return delete q.departmentId,Be.WY.get({url:T,params:q})}function rt(q){var T=i.ZP.OrgDialog.getUserDetailUrl();return Be.WY.get({url:T,params:q})}function nt(q){var T=i.ZP.OrgDialog.getScopeUsersAndDeptsUrl({departmentId:q.departmentId});return delete q.departmentId,Be.WY.get({url:T,params:q})}function yt(q){var T=i.ZP.OrgDialog.postDeleteCacheUrl({cacheId:q.cacheId});return delete q.cacheId,Be.WY.post({url:T,params:q})}var dt,ut,pt=(dt=(0,Ie.$j)(q=>{var T=q.user;return{enterpriseName:T.enterpriseName}}),dt(ut=class extends t().Component{constructor(){super(...arguments);this.state={loading:!0,cardInfoFinal:this.props.cardInfo},this.renderTitle=()=>{var T=this.props,y=T.cardInfo,s=T.prefixCls,r=T.enterpriseName,P=y.source_type,h=y.user_id,a=y.name;return t().createElement("div",{className:"".concat(s,"__header")},t().createElement("div",{className:"".concat(s,"__header-name")},t().createElement(ue.Z,{type:P,value:h,name:a,dataType:"userName"})),t().createElement("div",{className:"".concat(s,"__header-corp")},r||"/"))},this.renderContent=()=>{var T=this.props,y=T.prefixCls,s=T.t,r=this.state.cardInfoFinal,P=r.user_id,h=r.job_number,a=r.post_names,k=a===void 0?[]:a,X=r.department_infos,ee=X===void 0?[]:X,ge=()=>!(ee instanceof Array)||ee.length===0?"/":t().createElement(Ye.Z,{list:ee,displayAll:!0,isBlock:!0}),ae=()=>!(k instanceof Array)||k.length===0?"/":k.map(De=>t().createElement("div",{key:De},De)),_e=[{lable:"ID",value:P},{lable:s("personal.jobNumber"),value:h||"/"},{lable:s("setting.postLabel"),value:ae()},{lable:s("learnRecord.department"),value:ge()}];return t().createElement("div",{className:"".concat(y,"__body")},_e.map(De=>t().createElement(be.Z,{className:"".concat(y,"__body-item"),key:De.value},t().createElement(He.Z,{className:"".concat(y,"__body-item-lable")},De.lable),t().createElement(He.Z,{className:"".concat(y,"__body-item-value")},De.value||"/"))))}}render(){var T=this.props,y=T.children,s=T.prefixCls,r=this.state,P=r.loading,h=r.cardInfoFinal;return t().createElement(ze.Z,{overlayClassName:s,placement:"rightTop",title:this.renderTitle,content:P?t().createElement("div",{className:"".concat(s,"__body")},t().createElement(E.Z,null)):this.renderContent,onVisibleChange:a=>{a&&(h.detailInfo===!1?rt({user_id:h.id}).then(k=>{this.setState({loading:!1,cardInfoFinal:(0,c.Z)((0,c.Z)((0,c.Z)({},h),k.data),{},{detailInfo:!0})})}).catch(k=>{console.error(k)}):this.setState({loading:!1}))},mouseEnterDelay:.5},y)}})||ut);pt.defaultProps={prefixCls:"user-card-popover",cardInfo:{}};var at=(0,w.Z)()(pt),Ct=["cluster","class"];class ht extends t().Component{constructor(){super(...arguments);this.checkOne=T=>{T.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=T=>{T.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var T=this.props,y=T.cardInfo,s=T.type,r=T.t;return y.authorized==="false"&&s==="dept"?t().createElement(Le.Z,{title:r("orgDialog.scopedAuthorize")},t().createElement(Ae.Z,{style:{marginLeft:"4px"}})):null}}render(){var T=this.props,y=T.t,s=T.cardInfo,r=s===void 0?{}:s,P=T.hidePosts,h=T.type,a=T.userCount,k=null;return this.props.hasNext?(k=t().createElement("div",{className:"next-level"},!(P&&h==="post")&&a>-1?t().createElement("span",{className:"next-level-count"},"(",a,")"):null,Ct.includes(h)?t().createElement("span",null):t().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},t().createElement(we.Z,{iconClass:"icon-xiaji1"}),y("component.nextLevel"))),this.props.single?t().createElement("div",{className:"org-tree-item"},t().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),k):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&t().createElement("div",{className:"org-tree-item"},t().createElement(G.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title),this.renderToolTips(),k)):t().createElement("div",{className:"org-tree-item"},this.props.single?t().createElement(ye.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},t().createElement(at,{cardInfo:r},this.props.title)):t().createElement(at,{cardInfo:r},t().createElement(G.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},this.props.title)))}}ht.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var Et=(0,w.Z)()(ht),it=["cluster","class"];class Fe extends t().Component{constructor(){super(...arguments);this.checkOne=T=>{T.preventDefault(),this.props.contextData.checkOne(this.props.itemId,this.props.hasNext?"list":"user",!this.props.isChecked)},this.nextLevel=T=>{T.preventDefault(),!this.props.isChecked&&this.props.contextData.nextLevel(this.props.cardInfo,this.props.title,this.props.hasNextPost)},this.renderToolTips=()=>{var T=this.props,y=T.cardInfo,s=T.type,r=T.t;return y.authorized==="false"&&s==="dept"?t().createElement(Le.Z,{title:r("orgDialog.scopedAuthorize")},t().createElement(Ae.Z,{style:{marginLeft:"4px"}})):null}}render(){var T=this.props,y=T.t,s=T.cardInfo,r=s===void 0?{}:s,P=T.hidePosts,h=T.type,a=T.userCount,k=null;return this.props.hasNext?(k=t().createElement("div",{className:"next-level"},t().createElement("span",{className:"next-level-belle"},!(P&&h==="post")&&a>-1?t().createElement("span",{className:"next-level-count"},"(",a,")"):null,it.includes(h)?t().createElement("span",null):t().createElement("span",{className:this.props.isChecked?"next-level-label disabled":"next-level-label",onClick:this.nextLevel},t().createElement(we.Z,{iconClass:"icon-xiaji1"}),y("component.nextLevel")))),this.props.single?t().createElement("div",{className:"org-tree-item"},t().createElement("span",{checked:this.props.isChecked,disabled:!this.props.checkable,className:"org-tree-item-name"},t().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),k):(!this.props.disableHidden||this.props.disableHidden&&this.props.checkable)&&t().createElement("div",{className:"org-tree-item"},t().createElement(G.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},t().createElement("span",{className:"org-tree-item-title"},this.props.title)),this.renderToolTips(),k)):t().createElement("div",{className:"org-tree-item"},this.props.single?t().createElement(ye.ZP,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},t().createElement(at,{cardInfo:r},t().createElement("span",{className:"org-tree-item-title"},this.props.title))):t().createElement(at,{cardInfo:r},t().createElement(G.Z,{checked:this.props.isChecked,disabled:!this.props.checkable,onClick:this.checkOne,className:"org-tree-item-name"},t().createElement("span",{className:"org-tree-item-title"},this.props.title))))}}Fe.defaultProps={hasNext:!1,isChecked:!1,itemId:"",title:"",hasNextPost:!1,userCount:0,checkable:!0,hidePosts:!1,disableHidden:!1};var mt=(0,w.Z)()(Fe),lt=e(38642),vt=["cluster","class"];class Ge extends t().Component{constructor(T){super(T);this.checkAll=(y,s)=>{y.preventDefault(),this.props.contextData.checkAll(s)},this.getIsCheckAll=()=>{var y=[].concat(this.context["".concat(this.props.dataTypeKey,"List")],vt.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")]);if(y.length===0)return!1;var s=y.findIndex(r=>!r.isChecked);return s===-1},this.renderDeptName=(y,s)=>s==="dept"?t().createElement(ue.Z,{type:y.source_type,value:y.id,name:y.name,dataType:"departmentName"}):y.name,this.renderName=y=>t().createElement(ue.Z,{type:y.source_type,value:y.user_id,name:y.name,dataType:"userName"}),this.state={isShowCheckAllEle:!0,whiteList:{belleFlag:(0,lt.UI)("BELLE_CUSTOMER_WHITE")}}}render(){var T=this.state,y=T.isShowCheckAllEle,s=T.whiteList,r=this.props,P=r.t,h=r.dataTypeKey,a=r.disableHidden,k=r.scrollFlag,X=this.context,ee=X.maxDeptUserCount,ge=X.hidePosts,ae=X.onlyPost,_e=X.onlyUser,De=X.single,Te=[],me=this.context["".concat(this.props.dataTypeKey,"List")].map(ve=>(Te.push(t().createElement("div",{className:"title-item",key:ve.id},this.renderDeptName(ve,h))),s.belleFlag&&k?t().createElement(mt,{type:h,key:ve.id,cardInfo:ve,hasNext:!0,checkable:ee&&(ve==null?void 0:ve.userCount)>ee?!1:!(ae&&ve.post_type==="post_group"||_e),single:De,userCount:ve.userCount,isChecked:!!ve.isChecked,itemId:ve.id,title:this.renderDeptName(ve,h),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!ve.children,hidePosts:ge,disableHidden:a}):t().createElement(Et,{type:h,key:ve.id,cardInfo:ve,hasNext:!0,checkable:ee&&(ve==null?void 0:ve.userCount)>ee?!1:!(ae&&ve.post_type==="post_group"||_e),single:De,userCount:ve.userCount,isChecked:!!ve.isChecked,itemId:ve.id,title:this.renderDeptName(ve,h),contextData:this.props.contextData,hasNextPost:this.props.dataTypeKey==="post"&&!!ve.children,hidePosts:ge,disableHidden:a}))),xe=[],$e=vt.includes(this.props.dataTypeKey)?[]:this.context["".concat(this.props.dataTypeKey,"User")].map(ve=>(xe.push(t().createElement("div",{className:"title-item",key:ve.id},this.renderName(ve,h))),s.belleFlag&&k?t().createElement(mt,{key:ve.id,hasNext:!1,title:this.renderName(ve),isChecked:!!ve.isChecked,itemId:ve.id,cardInfo:ve,checkable:!(ve.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:a}):t().createElement(Et,{key:ve.id,hasNext:!1,title:this.renderName(ve),isChecked:!!ve.isChecked,itemId:ve.id,cardInfo:ve,checkable:!(ve.reserve||this.context.onlyDept),single:this.context.single,contextData:this.props.contextData,type:this.props.dataTypeKey,disableHidden:a}))),et=this.getIsCheckAll(),tt=t().createElement("div",{className:"org-tree-item"},t().createElement(G.Z,{checked:et,defaultChecked:!0,onClick:ve=>this.checkAll(ve,!et)},P("common.all")));return t().createElement("div",{className:"".concat(this.context.oneDisplayType?"org-tree more-height":"org-tree"," ").concat(s.belleFlag&&k?"org-tree-belle":"")},!this.context.single&&this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&me.length===0&&$e.length>0&&y||!this.context.single&&!this.context.onlyUser&&!this.context.onlyDept&&!this.context.onlyPost&&(me.length>0||$e.length>0)&&y?tt:null,s.belleFlag&&k&&t().createElement("div",{className:"belle-title-scroll"},Te,xe),me,$e)}}Ge.contextType=se,Ge.defaultProps={dataTypeKey:"dept",contextData:{},disableHidden:!1,scrollFlag:!1};var de=(0,w.Z)()(Ge),Y=e(25547),_="999",H=1,he=["clusterList","classList"];class Pe extends t().Component{constructor(T,y){var s;super(T);s=this,this.getClusterList=()=>{var r=i.ZP.OrgDialog.getClusterList(),P={keyword:""};Be.WY.get({url:r,params:P}).then(h=>{this.context.initTypeList("clusterList","checkedCluster",h.data.data.map(a=>({name:a.name,userCount:a.user_count,id:a.id,parentId:[""]})))})},this.getClassList=()=>{this.context.initTypeList("classList","checkedClass",[{name:"\u6D4B\u8BD52",userCount:2,id:"2",parentId:[""]},{name:"\u6D4B\u8BD54",userCount:1,id:"41",parentId:[""]}])},this.flatTreeData=(r,P)=>(r.children.forEach(h=>{h.children&&(P[h.id]=h.children,this.flatTreeData(h,P))}),P),this.getDeptList=function(r){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise((h,a)=>{var k=s.state.cacheId;We({departmentId:r,cache_id:k,filter_auth:P&&!s.props.filterAuthOpen}).then(X=>{var ee=X.data.children||[];ee.forEach(ae=>{ae.parentId=X.data.id,ae.userCount=ae.user_count,ae.name=ae.department_name,ae.all_name=t().createElement("span",null,s.state.contextData.breadNav.map(_e=>t().createElement("span",{key:_e.value},_e.label,"/")),ae.department_name)});var ge=[];s.context.asyncDeptTree?ge=ee:ge=s.flatTreeData(X.data,{[X.data.id]:ee}),s.setState({deptList:ge}),s.context.initTypeList("deptList","checkedDept",ee),h(X.data)}).catch(X=>{console.error(X),a(X)})})},this.getDeptUserList=function(r){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,h=s.state.cacheId;st({departmentId:r,cache_id:h,filter_auth:P&&!s.props.filterAuthOpen}).then(a=>{a.data&&a.data.forEach(k=>{k.name=k.user_name,k.detailInfo=!1}),s.context.initTypeUser("deptUser",a.data)}).catch(a=>{console.error(a)})},this.getGroupList=()=>{var r=i.ZP.Organization.getGroupList(),P={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Be.WY.get({url:r,params:P}).then(h=>{h.data.groups=h.data.groups||[],h.data.groups.forEach(a=>{a.parentId=this.state.contextData.breadNav.map(k=>k.value),a.userCount=a.user_count,a.name=a.group_name}),this.setState({groupList:h.data.groups}),this.context.initTypeList("groupList","checkedGroup",h.data.groups)})},this.getGroupUserList=r=>{var P=i.ZP.Organization.getGroupUserList({groupId:r}),h={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Be.WY.get({url:P,params:h}).then(a=>{a.data.users&&a.data.users.forEach(k=>{k.name=k.user_name,k.parentId=this.state.contextData.breadNav.map(X=>X.value)}),this.context.initTypeUser("groupUser",a.data.users)})},this.getPostList=r=>{var P=i.ZP.Organization.getPostTree(),h={filter_auth:!this.props.filterAuthOpen,post_id:r,user_type:this.context.userType};Be.WY.get({url:P,params:h}).then(a=>{a.data.posts=a.data.posts||[],a.data.posts.forEach(k=>{k.parentId=this.state.contextData.breadNav.map(X=>X.value),k.userCount=k.user_count,k.name=k.post_name}),this.setState({postList:a.data.posts}),this.context.initTypeList("postList","checkedPost",a.data.posts),this.context.initHidePostsStatus(a.data.hide_posts==="true")})},this.getPostUserList=r=>{var P=i.ZP.Organization.getPostUserList({postId:r}),h={filter_auth:!this.props.filterAuthOpen,user_type:this.context.userType};Be.WY.get({url:P,params:h}).then(a=>{a.data.users&&a.data.users.forEach(k=>{k.name=k.user_name,k.parentId=this.state.contextData.breadNav.map(X=>X.value)}),this.context.initTypeUser("postUser",a.data.users)})},this.getUserList=function(r){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s.props.type==="dept"?s.getDeptUserList(r,P):s.props.type==="group"?s.getGroupUserList(r):s.getPostUserList(r)},this.checkOne=(r,P,h)=>{var a=this.state.checkedCount;if(P==="list"){var k=this.context[this.state.listType].find(ee=>ee.id===r);k.isChecked=h,k.all_name&&typeof k.all_name=="object"&&delete k.all_name,a=h?a+1:a-1,this.context.checkListOne(k,this.state.checkedListType,this.state.listType)}else if(P==="user"){var X=this.context[this.state.checkedUserType].find(ee=>ee.id===r);X.isChecked=h,a=h?a+1:a-1,this.context.checkUserOne(X,this.state.checkedUserType)}this.updateCheckedCount(a)},this.updateCheckedCount=r=>{this.setState({checkedCount:r})},this.checkAll=function(){var r=(0,N.Z)(g().mark(function P(h){var a,k,X,ee,ge,ae,_e,De,Te,me,xe,$e,et,tt,ve;return g().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(a=s.state,k=a.contextData,X=a.cacheId,ee=[...k.breadNav].reverse(),ge=(0,b.Z)(ee,1),ae=ge[0],_e=ae.value,De=[...s.context[s.state.checkedListType]],Te=ae.authorized==="false",me={departments:[],users:[]},!Te){ft.next=12;break}return ft.next=9,nt({departmentId:_e,cache_id:X});case 9:xe=ft.sent,$e=xe.data,me={departments:$e.departments.map(Me=>(Me.isChecked=h,Me.name=Me.department_name,Me.parentId=Me.parent_ids.split("/"),Me.parentAuthorize=!1,Me.userCount=Me.user_count,Me)),users:$e.users.map(Me=>(Me.isChecked=h,Me.name=Me.user_name,Me.parentAuthorize=!1,Me))};case 12:et=s.context[s.state.listType].map(Me=>{Me.isChecked=h,s.props.type!=="dept"&&De.forEach(gt=>{gt.parentId.indexOf("".concat(Me.id))!==-1&&(gt.isChecked=!1)});var ct=De.findIndex(gt=>gt.id===Me.id);return ct!==-1?De[ct].isChecked=h:De.push(Me),Me}),tt=[],s.context.checkedUser.forEach(Me=>{if(s.props.type!=="dept"){if(typeof Me.parentId!="undefined"&&Me.parentId.indexOf("".concat(_e))!==-1&&Me.parentId[Me.parentId.length-1]!==_e)return}else{var ct=typeof Me.parentId!="undefined"?Me.parentId:Me.department_ids||[];if(ct.indexOf(_e)!==-1)return}tt.push(Me)}),ve=he.includes(s.state.listType)?[]:s.context[s.state.checkedUserType].map(Me=>{Me.isChecked=h;var ct=tt.findIndex(gt=>gt.id===Me.id);return ct!==-1?tt[ct].isChecked=h:tt.push(Me),Me}),s.context.toggleDisplayList(s.state.checkedListType,A()(me.departments,De,"id"),s.state.listType,et,s.state.checkedUserType,ve,A()(me.users,tt,"id")),s.setState({checkedCount:h?(he.includes(s.state.listType)?0:s.context[s.state.checkedUserType].length)+s.context[s.state.listType].length:0});case 18:case"end":return ft.stop()}},P)}));return function(P){return r.apply(this,arguments)}}(),this.nextLevel=(r,P,h)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var a=[...this.state.contextData.breadNav,{value:r.id,label:P,authorized:r.authorized}];this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{breadNav:a})},()=>{this.props.type==="post"?this.nextPostLevel(r.id,h):this.props.type==="dept"?this.nextDeptLevel(r.id,!(U()(r,"authorized")&&r.authorized==="true")):this.context.initTypeList("groupList","checkedGroup",[]),this.getUserList(r.id===_?H:r.id,!(U()(r,"authorized")&&r.authorized==="true"))})},this.nextDeptLevel=(r,P)=>{if(this.context.asyncDeptTree)this.getDeptList(r,P);else{var h=this.state.deptList[r];typeof h!="undefined"&&h.forEach(a=>{a.parentId=this.state.contextData.breadNav.map(k=>k.value),a.userCount=a.user_count,a.name=a.department_name}),this.context.initTypeList("deptList","checkedDept",h||[])}},this.nextPostLevel=(r,P)=>{if(P){var h=(0,Y.lK)(this.state.postList,r),a=h.children.map(k=>(k.name=k.post_name,k.parentId=this.state.contextData.breadNav.concat([r]).map(X=>X.value),k.userCount=k.user_count,k));this.context.initTypeList("postList","checkedPost",a)}},this.changeLevel=(r,P,h)=>{this.context.clearTabPanelList(this.state.listType,this.state.checkedUserType);var a=this.props.type==="group"?[this.state.contextData.breadNav[0]]:this.state.contextData.breadNav.slice(0,P+1);this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{breadNav:a}),isSearch:!1},()=>{this.props.type==="dept"?this.changeDeptLevel(r,h):this.props.type==="group"?this.changeGroupLevel(r):this.props.type==="cluster"?this.getClusterList():this.props.type==="class"?this.getClassList():this.changePostLevel(r)})},this.changeDeptLevel=function(r){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(s.context.asyncDeptTree)s.getDeptList(r,P);else{var h=s.state.deptList[r];h.forEach(a=>{a.parentId=s.state.contextData.breadNav.map(k=>k.value),a.userCount=a.user_count,a.name=a.department_name}),s.context.initTypeList("deptList","checkedDept",h)}s.getDeptUserList(r===_?H:r,P)},this.changePostLevel=r=>{var P=r==="1"?this.state.postList:(0,Y.lK)(this.state.postList,r).children,h=P.map(a=>(a.name=a.post_name,a.parentId=this.state.contextData.breadNav.concat([r]).map(k=>k.value),a.userCount=a.user_count,a));this.context.initTypeList("postList","checkedPost",h),r!=="1"&&this.getPostUserList(r===_?H:r)},this.changeGroupLevel=r=>{r||(this.context.initTypeUser("groupUser",[]),this.context.initTypeList("groupList","checkedGroup",this.state.groupList))},this.state={postList:[],deptList:[],groupList:[],clusterList:[],classList:[],contextData:{breadNav:[this.props.defaultBreadNav],checkOne:this.checkOne,checkAll:this.checkAll,nextLevel:this.nextLevel,changeLevel:this.changeLevel},checkedCount:0,listType:"".concat(this.props.type,"List"),checkedListType:"checked".concat(this.props.type.charAt(0).toUpperCase()).concat(this.props.type.substr(1)),checkedUserType:"".concat(this.props.type,"User"),isSearch:!1,searchResult:[],loadDept:!1,loadUser:!1,cacheId:y.cacheId}}componentDidMount(){this.props.type!=="group"?this.props.type==="dept"?this.getDeptList("1").then(T=>{this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{breadNav:[{value:T.id,label:T.department_name,sourceType:T.source_type,authorized:T.authorized}]})}),this.getDeptUserList("1")}):this.getPostList("1"):this.getGroupList(1),this.props.type==="cluster"&&this.getClusterList(),this.props.type==="class"&&this.getClassList()}render(){return t().createElement(W.Provider,{value:this.state.contextData},t().createElement("div",{className:"org-display-container org-display-dept"},t().createElement(Se,null),this.props.type==="dept"&&(this.state.loadDept||this.state.loadUser)?t().createElement("div",{className:"dept-loading"},t().createElement(E.Z,null)):null,t().createElement(je,{dataTypeKey:this.props.type,disableHidden:this.props.disableHidden,scrollFlag:this.props.scrollFlag})))}}Pe.contextType=se;var Se=(0,B.l)(W,K),je=(0,B.l)(W,de);Pe.defaultProps={defaultBreadNav:{value:"",label:"\u9177\u6E32\u79D1\u6280"},queryType:1,type:"dept",filterAuthOpen:!1,disableHidden:!1,scrollFlag:!1};var Je=Pe,qe=e(57663),ot=e(71577),Oe=e(54549);class u extends t().Component{constructor(){super(...arguments);this.removeItem=(T,y,s,r)=>{T.preventDefault(),y.isChecked=!1,r==="user"?this.context.removeCheckedUser(y):this.context.checkListOne(y,s,"".concat(r,"List"))},this.displayName=(T,y)=>{var s={user:"userName",dept:"departmentName"}[T]||"",r={user:y.unionid||y.user_id||y.userId,dept:y.id}[T]||y.id;return t().createElement(ue.Z,{value:r,name:y.name,type:y.source_type||y.sourceType,dataType:s})},this.displayItem=T=>{var y=this.context,s=y.hidePosts,r=y.showUserCount,P="checked".concat(T.charAt(0).toUpperCase()).concat(T.substr(1)),h=this.context[P].map(a=>a.isChecked&&a.authorized!=="false"?t().createElement(Le.Z,{key:a.id,placement:"top",title:a.all_name||"",getPopupContainer:()=>document.querySelector(".checked-display-container")},t().createElement("div",{className:"display-item",key:a.id},this.displayName(T,a),T==="user"||s&&T==="post"?"":r&&a.userCount>-1?"(".concat(a.userCount,")"):"",a.reserve?null:t().createElement("span",{className:"display-item-close",onClick:k=>this.removeItem(k,a,P,T)},t().createElement(Oe.Z,{style:{fontSize:"8px",color:"#afb5d2"}})))):null);return h},this.handleClearSelected=()=>{this.context.clearSelectedAll()}}render(){var T=this.props.t,y=["dept","group","post","user","cluster","class"].map(s=>this.displayItem(s));return t().createElement("div",{className:"checked-display-container"},t().createElement("div",{className:"checked-display-container-header"},t().createElement("span",null,T("orgDialog.selected"),":"),t().createElement(ot.Z,{type:"link",onClick:this.handleClearSelected},T("orgDialog.clearAll"))),y)}}u.contextType=se;var p=(0,w.Z)()(u),l=e(67222),o=e(6793),v=$.Z.Search;class I extends t().Component{constructor(T){var y;super(T);y=this,this.onChange=s=>{var r=this.props.appType,P=localStorage.getItem("qyWechatBook");if(s.preventDefault(),this.setState({value:s.target.value}),!(!s.target.value&&!this.props.showCancel)&&!this.props.disableChange){var h=r==="wx_app"&&P==="true";!(0,lt.eY)("ORG_DIALOG_SEARCH")||h||(0,o.Ds)(this.debounceChange,500)()}},this.handleSearch=(s,r)=>{r.preventDefault(),!(!s&&!this.props.showCancel)&&this.extendReturn(s)},this.debounceChange=()=>{this.extendReturn(this.state.value)},this.extendReturn=function(){var s=(0,N.Z)(g().mark(function r(P){var h,a,k,X,ee,ge,ae,_e,De;return g().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(h=y.props,a=h.appType,k=h.selectType,X=h.appId,ee=localStorage.getItem("qyWechatBook"),ge="",ae=a==="wx_app"&&ee==="true"&&X==="9005",!(P&&k==="user"&&ae)){me.next=17;break}return me.prev=5,me.next=8,(0,l.F_)(P);case 8:_e=me.sent,De=_e.data,De.success&&(ge=De.data),me.next=17;break;case 13:me.prev=13,me.t0=me.catch(5),console.error(me.t0),ge="";case 17:y.props.onSearch(P,ge);case 18:case"end":return me.stop()}},r,null,[[5,13]])}));return function(r){return s.apply(this,arguments)}}(),this.state={value:""}}render(){var T=this.props,y=T.t,s=T.selectType;return t().createElement("div",{className:"top-search"},t().createElement(v,{placeholder:y(s==="user"?"component.searchStudent":s==="dept"?"component.searchDepartment":s==="post"?"component.searchPost":s==="cluster"?"component.searchCluster":s==="class"?"component.searchClass":"setting.searchGroup"),value:this.state.value,onSearch:this.handleSearch,allowClear:!0,onChange:this.onChange}))}}var x=(0,Ie.$j)(q=>({appType:q.user.appType,appId:q.user.appId}))((0,w.Z)()(I)),j=e(87312);class Z extends C.Component{constructor(){super(...arguments);this.checkedAll=(T,y)=>{this.props.checkedAll(y)},this.getIsCheckedAll=()=>{var T=this.props.list,y=[].concat(T);if(y.length===0)return!1;var s=y.findIndex(r=>!r.isChecked);return s===-1},this.checkUser=(T,y)=>{y.isChecked=!y.isChecked,this.context.checkUserOne(y,"checkedUser")},this.checkSingleUser=(T,y)=>{y.isChecked=!0,this.context.checkUserOne(y,"checkedUser")},this.checkDept=(T,y)=>{y.isChecked=!y.isChecked,this.context.checkListOne(y,"checkedDept","deptList")},this.checkPost=(T,y)=>{y.isChecked=!y.isChecked,this.context.checkListOne(y,"checkedPost","postList")},this.checkGroup=(T,y)=>{y.isChecked=!y.isChecked,this.context.checkListOne(y,"checkedGroup","groupList")},this.checkedCluster=(T,y)=>{y.isChecked=!y.isChecked,this.context.checkListOne(y,"checkedCluster","clusterList")}}renderList(){var T=this.props,y=T.userListType,s=T.list,r=T.t,P=T.isSingle,h=T.hidePosts;return y==="user"&&!P?s.map(a=>t().createElement("div",{className:"search-result-item",key:a.id,onClick:k=>{this.checkUser(k,a)}},t().createElement(G.Z,{checked:a.isChecked},t().createElement(at,{cardInfo:a},t().createElement("span",{className:"user-names"},t().createElement(ue.Z,{dataType:"userName",value:a.user_id,name:a.user_name,type:a.source_type}))),a.department_names&&a.department_names.length>0?t().createElement("span",{className:"user-dept"},t().createElement(Ye.Z,{sourceType:a.source_type,list:a.leaf_department_ids,nameList:a.department_names})):null))):y==="user"&&P?s.map(a=>t().createElement("div",{className:"search-result-item",key:a.id,onClick:k=>{this.checkSingleUser(k,a)}},t().createElement("div",{className:"user-name"},t().createElement(at,{cardInfo:a},t().createElement(ue.Z,{dataType:"userName",value:a.user_id,name:a.user_name,type:a.source_type}))),a.department_names&&a.department_names.length>0?t().createElement("span",{className:"user-name-dept"},t().createElement(Ye.Z,{sourceType:a.source_type,list:a.leaf_department_ids,nameList:a.department_names})):null)):y==="dept"?s.map(a=>t().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:k=>{this.checkDept(k,a)}},t().createElement(G.Z,{checked:a.isChecked,className:"department-left"},t().createElement("div",{className:"department-left-department"},t().createElement("div",{className:"user-name"},t().createElement(ue.Z,{dataType:"departmentName",value:a.id,name:a.department_name,type:a.source_type})),a.path&&a.path.length>0?t().createElement(Le.Z,{title:a.path.join(">"),mouseEnterDelay:.8},t().createElement("span",{className:"user-name-dept"},t().createElement(Ye.Z,{list:a.department_infos||[],displayAll:!0}))):null)),t().createElement("div",{className:"department-right"},"(",a.userCount,r("common.userUnit"),")"))):y==="post"?s.map(a=>t().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:k=>{this.checkPost(k,a)}},t().createElement(G.Z,{checked:a.isChecked,className:"department-left"},t().createElement("div",{className:"department-left-department"},t().createElement("div",{className:"user-name"},a.name),a.path&&a.path.length>0?t().createElement(Le.Z,{title:a.path.join(">"),mouseEnterDelay:.8},t().createElement("span",{className:"user-name-dept"},t().createElement("span",null,a.path.join(">")))):null)),!h&&t().createElement("div",{className:"department-right"},"(",a.userCount,r("common.userUnit"),")"))):y==="group"?s.map(a=>t().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:k=>{this.checkGroup(k,a)}},t().createElement(G.Z,{checked:a.isChecked,className:"department-left"},t().createElement("div",{className:"department-left-department"},t().createElement("div",{className:"user-name"},a.name),a.path&&a.path.length>0?t().createElement(Le.Z,{title:a.path.join(">"),mouseEnterDelay:.8},t().createElement("span",{className:"user-name-dept"},t().createElement("span",null,a.path.join(">")))):null)),t().createElement("div",{className:"department-right"},"(",a.userCount,r("common.userUnit"),")"))):y==="cluster"?s.map(a=>t().createElement("div",{className:"search-result-dept-item",key:a.id,onClick:k=>{this.checkedCluster(k,a)}},t().createElement(G.Z,{checked:a.isChecked,className:"department-left"},t().createElement("span",{className:"user-name"},a.name)),t().createElement("div",{className:"department-right"},"(",a.userCount,r("common.userUnit"),")"))):null}render(){var T=this.props,y=T.t,s=T.isSingle,r=this.getIsCheckedAll(),P=t().createElement("div",{className:"search-result-all"},t().createElement(G.Z,{checked:r,onClick:h=>this.checkedAll(h,!r)},y("common.all")));return t().createElement("div",{className:"search-result-container more-height"},this.props.list.length>0?t().createElement(t().Fragment,null,!s&&P,this.renderList()):t().createElement(j.Z,{tipText:y("component.searchUserEmpty")}))}}Z.contextType=se,Z.defaultProps={list:[]};var ne=(0,w.Z)()(Z),re=e(18329),le=e(65202),J=e(91648),te=f.Z.TabPane,Ee=n.Z.Option,Ue={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0 20px"},maskClosable:!1};class Re extends t().Component{constructor(T){var y;super(T);y=this,this.onCancel=()=>{var s=this.props.onCancel;this.setState({showCancel:!1}),s&&this.props.onCancel()},this.onOk=()=>{var s=this.props.onOk,r=this.state.contextData;this.setState({showCancel:!1});var P=0;if(s){var h=[];r.checkedDept.map(ae=>(P+=ae.isChecked?ae.user_count:0,ae.isChecked&&ae.authorized!=="false"?h.push((0,c.Z)((0,c.Z)({},ae),{},{renderType:"dept"})):null));var a=[];r.checkedPost.map(ae=>(P+=ae.isChecked?ae.user_count:0,ae.isChecked?a.push((0,c.Z)((0,c.Z)({},ae),{},{renderType:"post"})):null));var k=[];r.checkedGroup.map(ae=>(P+=ae.isChecked?ae.user_count:0,ae.isChecked?k.push((0,c.Z)((0,c.Z)({},ae),{},{renderType:"group"})):null));var X=[];r.checkedUser.map(ae=>{if(!ae.reserve)return P+=ae.isChecked?1:0,ae.isChecked?X.push((0,c.Z)((0,c.Z)({},ae),{},{renderType:"user"})):null});var ee=[];r.checkedCluster.map(ae=>{if(!ae.reserve)return P+=ae.isChecked?1:0,ae.isChecked?ee.push((0,c.Z)((0,c.Z)({},ae),{},{renderType:"cluster"})):null});var ge=[];if(r.checkedClass.map(ae=>{if(!ae.reserve)return P+=ae.isChecked?1:0,ae.isChecked?ge.push((0,c.Z)((0,c.Z)({},ae),{},{renderType:"class"})):null}),P>this.props.maxUserCount){R.default.warn(this.props.beyondLimitTip);return}s({dept:h,post:a,group:k,user:X,cluster:ee,classes:ge})}},this.getListParentId=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];r.forEach(_e=>{_e.isChecked=!0,_e.parentId=[""],_e.userCount=_e.userCount||_e.user_count||0});var X=s.map(_e=>_e.id),ee=h.map(_e=>_e.id);if(X||ee){var ge=i.ZP.OrgDialog.getDeptParent(),ae={query_type:1,dept_ids:X,user_ids:ee};Be.WY.post({url:ge,data:(0,c.Z)({},ae)}).then(_e=>{var De=_e.data.data;s.forEach(Te=>{Te.isChecked=!0;var me=De.find(xe=>xe.id===Te.id)||{path:[]};Te.parentId=me.path[0]?me.path[0].split("/").slice(1):[],Te.userCount=me.user_count||Te.userCount||Te.user_count||0}),P.forEach(Te=>{Te.isChecked=!0;var me=De.find(xe=>xe.id===Te.id)||{path:[]};Te.parentId=me.path[0]?me.path[0].split("/").slice(1):[],Te.userCount=Te.userCount||Te.user_count||0}),h.forEach(Te=>{Te.isChecked=!0;var me=[];De.forEach(xe=>{xe.id===Te.id&&xe.path.map($e=>{me.push(...$e.split("/").slice(1))})}),Te.parentId=Array.from(new Set(me))}),a.forEach(Te=>{Te.isChecked=!0;var me=De.find(xe=>xe.id===Te.id)||{path:[]};Te.parentId=me.path[0]?me.path[0].split("/").slice(1):[],Te.userCount=Te.userCount||Te.user_count||0}),k.forEach(Te=>{Te.isChecked=!0;var me=De.find(xe=>xe.id===Te.id)||{path:[]};Te.parentId=me.path[0]?me.path[0].split("/").slice(1):[],Te.userCount=Te.userCount||Te.user_count||0}),y.setState({contextData:(0,c.Z)((0,c.Z)({},y.state.contextData),{},{checkedDept:s,checkedGroup:r,checkedPost:P,checkedUser:h,checkedCluster:a,checkedClass:k})})})}else r.length>0?y.setState({contextData:(0,c.Z)((0,c.Z)({},y.state.contextData),{},{checkedGroup:r})}):y.setState({contextData:(0,c.Z)((0,c.Z)({},y.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[]})})},this.initHidePostsStatus=s=>{var r=this.state.contextData;this.setState({contextData:(0,c.Z)((0,c.Z)({},r),{},{hidePosts:s})})},this.initTypeList=(s,r,P)=>{P.forEach(h=>{var a=this.findItemIndex(h.id,r);a===-1?h.isChecked=!1:h.isChecked=this.state.contextData[r][a].isChecked}),this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{[s]:P})})},this.initTypeUser=(s,r)=>{var P=r||[...this.state.contextData[s]],h=this.props.reserveUser;P.forEach(a=>{var k=this.findItemIndex(a.id,"checkedUser");h.findIndex(X=>X.id===a.id)!==-1&&(a.reserve=!0),k===-1?a.isChecked=!1:a.isChecked=this.state.contextData.checkedUser[k].isChecked}),this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{[s]:P})})},this.toggleDisplayItem=(s,r)=>{var P=this.findItemIndex(s.id,r);return P===-1?r.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[r]:this.checkListParentId(r,s),checkedUser:s.isChecked?this.checkParentId(this.state.contextData.checkedUser,s.id):this.state.contextData.checkedUser}:{[r]:[...this.state.contextData[r],s]}:r.match(/checkedPost|checkedDept|checkedGroup|checkedCluster|checkedClass/)?{[r]:this.checkListParentId(r,s),checkedUser:s.isChecked?this.checkParentId(this.state.contextData.checkedUser,s.id):this.state.contextData.checkedUser}:{checkedUser:this.getNewList(s,"checkedUser",!0),[r]:this.getNewList(s,r)}},this.toggleDisplayList=(s,r,P,h,a,k,X)=>{this.deleteAllName(r),this.deleteAllName(h),this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{[s]:r,[P]:h,[a]:k,checkedUser:X})})},this.deleteAllName=s=>{s.map(r=>(r.all_name&&typeof r.all_name=="object"&&delete r.all_name,r))},this.checkUserOne=(s,r)=>{this.props.single?this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{checkedUser:[s],[r]:r==="checkedUser"?[s]:this.getSingleUserList(s,r)})}):this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),this.toggleDisplayItem(s,r))})},this.dealAuthorizedFalseChecked=function(){var s=(0,N.Z)(g().mark(function r(P){var h,a,k,X,ee,ge,ae,_e,De;return g().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return h=y.state.contextData,a=h.cacheId,k=h.checkedDept,X=h.checkedUser,ee={checkedDept:[],checkedUser:[]},me.prev=2,me.next=5,nt({departmentId:P.id,cache_id:a});case 5:ge=me.sent,ae=ge.data,_e=ae.departments,De=ae.users,_e.push(P),_e.map(xe=>(xe.isChecked=!0,xe.name=xe.department_name,xe.parentId=xe.parent_ids.split("/"),xe.parentAuthorize=!1,xe.userCount=xe.user_count,xe)),De.map(xe=>(xe.isChecked=!0,xe.name=xe.user_name,xe.parentAuthorize=!1,y.toggleDisplayItem(xe,"deptUser"),xe)),ee=(0,c.Z)((0,c.Z)({},ee),{},{checkedUser:A()(De,X,"id"),checkedDept:A()(_e,k,"id")}),me.next=16;break;case 13:me.prev=13,me.t0=me.catch(2),console.error("\u83B7\u53D6\u90E8\u95E8\u7BA1\u8F96\u8303\u56F4\u51FA\u9519",me.t0);case 16:return me.abrupt("return",ee);case 17:case"end":return me.stop()}},r,null,[[2,13]])}));return function(r){return s.apply(this,arguments)}}(),this.dealAuthorizedFalseUnChecked=s=>{var r=this.state.contextData,P=r.checkedDept,h=r.checkedUser,a=r.deptUser,k=[],X=P.filter(ge=>ge.parent_ids.split("/").indexOf(s.id)===-1),ee=h.filter(ge=>{var ae=ge.department_ids.indexOf(s.id)===-1;return ae||k.push(ge.id),ae});return{checkedDept:X,checkedUser:ee,deptUser:k.length>0?a.map(ge=>(k.indexOf(ge.id)>-1&&(ge.isChecked=!1),ge)):a}},this.checkListOne=function(){var s=(0,N.Z)(g().mark(function r(P,h,a){var k;return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(k={checkedDept:[],checkedUser:[]},!(P.authorized==="false"&&h==="checkedDept")){ee.next=12;break}if(!P.isChecked){ee.next=8;break}return ee.next=5,y.dealAuthorizedFalseChecked(P);case 5:ee.t0=ee.sent,ee.next=9;break;case 8:ee.t0=y.dealAuthorizedFalseUnChecked(P);case 9:k=ee.t0,ee.next=14;break;case 12:P.parentAuthorize===!1&&P.isChecked===!1&&y.unCheckedParentDept(P,h),k=(0,c.Z)({[a]:y.getNewList(P,a,!1)},y.toggleDisplayItem(P,h));case 14:y.setState({contextData:(0,c.Z)((0,c.Z)({},y.state.contextData),k)});case 15:case"end":return ee.stop()}},r)}));return function(r,P,h){return s.apply(this,arguments)}}(),this.removeCheckedUser=s=>{this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{checkedUser:this.getNewList(s,"checkedUser"),deptUser:this.getNewList(s,"deptUser"),postUser:this.getNewList(s,"postUser"),groupUser:this.getNewList(s,"groupUser"),searchResult:this.getNewList(s,"searchResult")})})},this.unCheckedParentDept=(s,r)=>{var P=this.state.contextData.checkedDept,h=P.filter(X=>X.authorized==="false"&&r==="checkedUser"?s.department_ids.indexOf(X.id)>-1:r==="checkedDept"?s.parentId.indexOf(X.id)>-1:!1),a=(0,b.Z)(h,1),k=a[0];k&&(k.isChecked=!1,this.toggleDisplayItem(k,"checkedDept"),this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{checkedDept:h})}))},this.checkListParentId=(s,r)=>{var P=[...this.state.contextData[s]],h=this.findItemIndex(r.id,s);return P.forEach(a=>{a.id!==r.id&&a.parentId.indexOf("".concat(r.id))!==-1?a.isChecked=!1:a.id===r.id&&(a.isChecked=r.isChecked)}),h===-1&&P.push(r),P},this.checkParentId=(s,r)=>{var P=[];return s.forEach(h=>{var a=typeof h.parentId!="undefined"?h.parentId:h.department_ids||[];a.indexOf(r)===-1&&P.push(h)}),P},this.getNewList=(s,r,P)=>{var h=[...this.state.contextData[r]],a=this.findItemIndex(s.id,r);return a===-1?P&&h.push(s):h[a].isChecked=s.isChecked,h},this.getSingleUserList=(s,r)=>{var P=[...this.state.contextData[r]];return P.forEach(h=>{h.id===s.id?h.isChecked=s.isChecked:h.isChecked=!1}),P},this.findItemIndex=(s,r)=>this.state.contextData[r].findIndex(P=>P.id===s),this.clearTabPanelList=(s,r)=>{this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{[s]:[],[r]:[]})})},this.getTabs=()=>{var s=[],r,P,h=this.props,a=h.t,k=h.filterAuthOpen,X=h.disableHidden,ee=h.scrollFlag,ge=this.state.contextData,ae=ge.canUseGroups,_e=ge.canUseClass;return this.state.displayType.forEach(De=>{switch(De){case"dept":s.push({label:a("component.orgDialogDeptLabel"),key:"dept",defaultBreadNav:{value:"",label:"",sourceType:""},queryType:1});break;case"group":s.push({label:a("component.orgDialogGroupLabel"),key:"group",queryType:2,defaultBreadNav:{value:"",label:a("component.userGroup")}});break;case"post":s.push({label:a("component.orgDialogPostLabel"),key:"post",defaultBreadNav:{value:"1",label:a("common.post")},queryType:3});break;case"cluster":ae&&s.push({label:a("component.orgDialogClusterLabel"),key:"cluster",defaultBreadNav:{value:"",label:""},queryType:4});break;case"class":_e&&s.push({label:a("component.orgDialogClassLabel"),key:"class",defaultBreadNav:{value:"",label:""},queryType:5});break}}),s.length===1?P=t().createElement(Je,{defaultBreadNav:s[0].defaultBreadNav,queryType:s[0].queryType,type:s[0].key,filterAuthOpen:k,disableHidden:X,scrollFlag:ee}):(r=s.map(De=>t().createElement(te,{tab:De.label,key:De.key},t().createElement(Je,{defaultBreadNav:De.defaultBreadNav,queryType:De.queryType,type:De.key,filterAuthOpen:k,disableHidden:X,scrollFlag:ee}))),P=t().createElement(f.Z,null,r)),P},this.handleSearch=(s,r)=>{var P=this.state.selectType;P==="user"?this.getUserList(s,r):P==="dept"?this.getDeptList(s):P==="post"?this.getPostList(s):P==="cluster"?this.getClusterResult(s):P==="class"?this.getClassResult(s):this.getGroupList(s)},this.getClusterResult=s=>{var r=i.ZP.OrgDialog.getClusterList(),P={keyword:s};Be.WY.get({url:r,params:P}).then(h=>{this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedCluster",h.data.data.map(a=>({name:a.name,userCount:a.user_count,id:a.id,parentId:[""]})))})},this.getUserList=(s,r)=>{var P=i.ZP.OrgDialog.getUserByName(),h={user_name:r===""?s:"",filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType,userIds:r};Be.WY.get({url:P,params:h}).then(a=>{a.data.users&&a.data.users.forEach(k=>{k.name=k.user_name}),this.setState({showCancel:!0}),this.initTypeUser("searchResult",a.data.users||[])})},this.getDeptList=s=>{var r=i.ZP.Organization.queryDept(),P={department_name:s,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Be.WY.get({url:r,params:P}).then(h=>{h.data.departments&&h.data.departments.forEach(a=>{a.name=a.department_name,a.parentId=a.parent_ids?a.parent_ids.split("/"):[],a.userCount=a.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedDept",h.data.departments||[])})},this.getPostList=s=>{var r=i.ZP.Organization.addPost(),P={post_name:s,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Be.WY.get({url:r,params:P}).then(h=>{h.data.posts&&h.data.posts.forEach(a=>{a.name=a.post_name,a.parentId=a.parent_id?a.parent_id.split("/"):[],a.userCount=a.user_count}),this.setState({hidePosts:h.data.hide_posts,showCancel:!0}),this.initTypeList("searchResult","checkedPost",h.data.posts||[])})},this.getGroupList=s=>{var r=i.ZP.Organization.getGroupList(),P={group_name:s,filter_auth:!this.props.filterAuthOpen,user_type:this.props.userType};Be.WY.get({url:r,params:P}).then(h=>{h.data.groups&&h.data.groups.forEach(a=>{a.name=a.group_name,a.parentId=a.parent_id?a.parent_id.split("/"):[],a.userCount=a.user_count}),this.setState({showCancel:!0}),this.initTypeList("searchResult","checkedGroup",h.data.groups||[])})},this.checkAllResult=s=>{var r=this.state,P=r.selectType,h=r.contextData,a="checked".concat(P.charAt(0).toUpperCase()).concat(P.substr(1)),k=[...h[a]],X=h.searchResult.map(ge=>{ge.isChecked=s;var ae=k.findIndex(_e=>_e.id===ge.id);return ae!==-1?k[ae].isChecked=s:k.push(ge),ge}),ee=k;this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{[a]:ee,searchResult:X})})},this.clearSelectedAll=()=>{var s=this.state.contextData,r=s.checkedDept,P=s.checkedGroup,h=s.checkedPost,a=s.checkedUser,k=s.checkedCluster,X=s.checkedClass,ee=s.deptList,ge=s.groupList,ae=s.postList,_e=s.clusterList,De=s.classList,Te=s.deptUser,me=s.groupUser,xe=s.postUser,$e=et=>(et.forEach(tt=>{tt.isChecked=!1}),et);this.setState({contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],deptList:r.length>0?$e(ee):ee,groupList:P.length>0?$e(ge):ge,postList:h.length>0?$e(ae):ae,clusterList:k.length>0?$e(_e):_e,classList:X.length>0?$e(De):De,deptUser:a.length>0?$e(Te):Te,groupUser:a.length>0?$e(me):me,postUser:a.length>0?$e(xe):xe})})},this.handleCancel=()=>{this.setState({showCancel:!1})},this.handleSelectChange=s=>{this.setState({selectType:s,contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{searchResult:[]})})},this.state={title:T.title||T.t("component.chooseAssignScope"),displayType:T.displayType?T.displayType:["dept"],selectType:"user",showCancel:!1,hidePosts:!1,contextData:{showUserCount:T.showUserCount,deptList:[],groupList:[],postList:[],clusterList:[],classList:[],deptUser:[],groupUser:[],postUser:[],checkedDept:[],checkedGroup:[],checkedPost:[],checkedUser:[],checkedCluster:[],checkedClass:[],searchResult:[],onlyUser:T.onlyUser,onlyDept:T.onlyDept,onlyPost:T.onlyPost,canUseGroups:T.useGroups,canUseClass:T.useClass,single:T.single,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,userType:this.props.userType,initTypeList:this.initTypeList,initTypeUser:this.initTypeUser,toggleDisplayItem:this.toggleDisplayItem,toggleDisplayList:this.toggleDisplayList,checkListOne:this.checkListOne,checkUserOne:this.checkUserOne,removeCheckedUser:this.removeCheckedUser,clearTabPanelList:this.clearTabPanelList,maxDeptUserCount:T.maxDeptUserCount,hidePosts:!1,initHidePostsStatus:this.initHidePostsStatus,cacheId:(0,J.Z)(),clearSelectedAll:this.clearSelectedAll}}}componentDidUpdate(T){if(T.visible!==this.props.visible&&this.props.visible){var y=this.props.initData,s=y.dept,r=y.group,P=y.post,h=y.user,a=y.cluster,k=y.classes;console.warn(h,"user");var X=this.props,ee=X.reserveUser,ge=X.t,ae=X.onlyDept,_e=X.onlyPost;ee.forEach(De=>{De.reserve=!0}),this.setState({title:this.props.title||ge("component.chooseAssignScope"),displayType:this.props.displayType?this.props.displayType:["dept"],selectType:_e?"post":ae?"dept":"user",contextData:(0,c.Z)((0,c.Z)({},this.state.contextData),{},{deptList:[],groupList:[],postList:[],deptUser:[],clusterList:[],classList:[],groupUser:[],postUser:[],searchResult:[],onlyUser:this.props.onlyUser,onlyDept:this.props.onlyDept,canUseGroups:this.props.useGroups,canUseClass:this.props.useClass,onlyPost:this.props.onlyPost,asyncDeptTree:this.props.asyncDeptTree,oneDisplayType:this.props.displayType?this.props.displayType.length<=1:!0,cacheId:(0,J.Z)()})},()=>{this.getListParentId(s,r,P,h.concat(ee),a,k)})}}componentWillUnmount(){yt({cacheId:this.state.contextData.cacheId}).then(()=>{console.warn("\u6E05\u9664\u7F13\u5B58\u6210\u529F")}).catch(T=>{console.error("\u6E05\u9664\u7F13\u5B58\u5931\u8D25",T)})}render(){var T=this.getTabs(),y=this.props,s=y.t,r=y.onlyUser,P=y.onlyDept,h=y.onlyPost,a=y.displayType,k=y.useGroups,X=y.useClass,ee=y.onlyChoosePost,ge=(0,le.p)(),ae=this.state,_e=ae.showCancel,De=ae.selectType,Te=ae.hidePosts;return Ue.okText=this.props.okText||s("common.ok"),t().createElement(re.ZP,(0,F.Z)({},Ue,this.props.modalConfig,{visible:this.props.visible,title:this.state.title,wrapClassName:[this.props.className,"cl-org-modal"],onCancel:this.onCancel,onOk:this.onOk}),t().createElement(se.Provider,{value:this.state.contextData},t().createElement("div",{className:"cl-org"},t().createElement("div",{className:"cl-org-left"},this.props.visible?t().createElement("div",{className:"cl-org-left__top"},t().createElement($.Z.Group,{compact:!0},t().createElement(n.Z,{className:"cl-org-left__top__select",value:De,style:{width:80},onChange:this.handleSelectChange},t().createElement(Ee,{value:"user",disabled:P||h||ee},s("authGroup.userLabel")),t().createElement(Ee,{value:"dept",disabled:r||ee},s("setting.deptLabel")),t().createElement(Ee,{value:"post",disabled:!h&&(P||r)||a.length===1},s("common.post")),t().createElement(Ee,{value:"group",disabled:P||r||a.length===1||ee},s("component.userGroup")),k?t().createElement(Ee,{value:"cluster"},s("component.useCluster")):null,X?t().createElement(Ee,{value:"class"},s("component.useClass")):null),t().createElement(x,{selectType:De,onSearch:this.handleSearch,showCancel:_e,disableChange:this.props.disableChange})),_e?t().createElement("div",{className:"cl-org-left__top__cancel",onClick:this.handleCancel,style:{color:ge}},s("common.cancel")):null):null,_e?t().createElement(ne,{isSingle:this.props.single,list:this.state.contextData.searchResult,userListType:De,checkedAll:this.checkAllResult,hidePosts:Te}):T),t().createElement("div",{className:"cl-org-right"},t().createElement(p,null)))))}}Re.defaultProps={visible:!0,showUserCount:!0,displayType:["dept","group","post","cluster","class"],initData:{dept:[],post:[],group:[],user:[],cluster:[],classes:[]},reserveUser:[],onlyUser:!1,onlyDept:!1,onlyPost:!1,useGroups:!1,useClass:!1,asyncDeptTree:!0,userType:"active",single:!1,maxUserCount:Infinity,filterAuthOpen:!1,disableHidden:!1,beyondLimitTip:"",onOk:()=>{},modalConfig:{},maxDeptUserCount:0,onlyChoosePost:!1,scrollFlag:!1};var Ze=(0,w.Z)()(Re)},72387:function(Ne,oe,e){"use strict";var F=e(12924),O=e.n(F),$=e(84874);class b extends O().PureComponent{constructor(M){super(M);this.onPrev=()=>{var R=this.state.activeIndex;this.setState({activeIndex:R<=0?0:R-1})},this.onNext=()=>{var R=this.props.imgList,c=this.state.activeIndex;this.setState({activeIndex:R.length<=c+1?c:c+1})},this.state={activeIndex:M.defaultActive}}componentDidUpdate(M){M.visible!==this.props.visible&&this.props.visible&&this.setState({activeIndex:this.props.defaultActive})}render(){var M=this.props,R=M.visible,c=M.imgList,L=this.state.activeIndex;return O().createElement("div",{className:"preview-img-mask",style:{display:R?"block":"none"}},O().createElement("div",{className:"preview-img-bg"},O().createElement("div",{className:"preview-img"},O().createElement("img",{src:c[L]}),O().createElement("span",{className:"preview-img-close",onClick:this.props.onClose},O().createElement($.Z,{iconClass:"iconf-close"})))),L>=1?O().createElement("span",{className:"preview-img-left",onClick:this.onPrev},O().createElement($.Z,{iconClass:"iconf-arrow-left",size:"20px"})):null,L<=c.length-2?O().createElement("span",{className:"preview-img-right",onClick:this.onNext},O().createElement($.Z,{iconClass:"iconf-arrow-right",size:"20px"})):null)}}b.defaultProps={visible:!1,imgList:[],defaultActive:0,onClose:()=>{}},oe.Z=b},36202:function(Ne,oe,e){"use strict";e.d(oe,{f:function(){return V}});var F=e(62029),O=e(57361),$=e(33565),b=e(9754),N=e.n(b),M=e(12924),R=e.n(M),c=e(28175),L=e(41647),n=e(93485);function d(A){var D={};if(A.length===0)return D;var E=(0,n.Z)(A),S;try{for(E.s();!(S=E.n()).done;){var U=S.value,B=U,i=B.field,z=B.fixed,W=B.order,ie=B.show;ie?ie==="true"||ie===!0?D[i]={fixed:z,order:W,show:!0}:D[i]={fixed:z,order:W,show:!1}:D[i]={fixed:z,order:W,show:!0}}}catch(se){E.e(se)}finally{E.f()}return D}function f(A){var D=[],E=Object.entries(A);if(E.length===0)return D;for(var S=0,U=E;S<U.length;S++){var B=U[S],i=(0,$.Z)(B,2),z=i[0],W=i[1],ie=W.fixed,se=W.order,Ce=W.show;D.push({field:z,show:Ce,fixed:ie,order:se})}return D}var m=e(38642),g=(A,D)=>{var E=(0,M.useState)(A),S=(0,$.Z)(E,2),U=S[0],B=S[1];return(0,M.useEffect)(()=>{var i=setTimeout(()=>{B(A)},D);return()=>{clearTimeout(i)}},[A,D]),U},C=g;function t(A,D){var E=useRef(D);useEffect(()=>{E.current=D},[D]),useEffect(()=>{var S=U=>{var B,i;console.warn(A.current,"node.current",U.target),!((B=(i=A.current)===null||i===void 0?void 0:i.contains(U.target))!==null&&B!==void 0?B:!1)&&E.current&&E.current()};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[A])}var w=!1;function V(A){var D=(0,M.useState)({}),E=(0,$.Z)(D,2),S=E[0],U=E[1],B=A.prefixCls,i=A.rowKey,z=A.columnEmptyText,W=A.pagination,ie=A.headerTitle,se=A.toolBarRender,Ce=A.size,fe=A.loading,ue=fe===void 0?!1:fe,ce=A.tableUUID;ce||console.error("tableUUID is required!!!"),(0,M.useEffect)(()=>{function G(ye){return pe.apply(this,arguments)}function pe(){return pe=(0,O.Z)(N().mark(function ye(ke){var Le,Ae,we,Ke,ze,Ve,be,Qe;return N().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,(0,m.Kb)((0,L.U)(ke));case 2:if(Le=Ie.sent,Ae=(0,$.Z)(Le,2),we=Ae[0],Ke=Ae[1],!we){Ie.next=8;break}return Ie.abrupt("return");case 8:ze=Ke.data,Ve=ze.data,be=Ve.fields,Qe=d(be)||{},Qe&&(w=!1,U(Qe));case 13:case"end":return Ie.stop()}},ye)})),pe.apply(this,arguments)}return ce&&G(ce),()=>{w=!1}},[ce]);var K=C(S,1e3);(0,M.useEffect)(()=>{!w||(0,L.I)(ce,f(S))},[K]);function Q(G){w=!0,U(G)}return R().createElement("div",{className:"SampleProTable_container ".concat(A.className)},R().createElement(c.ZP,(0,F.Z)({size:Ce||"middle",rowKey:i||"id",columnEmptyText:z||!1,pagination:W||!1,options:{density:!1,fullScreen:!1,reload:!1,setting:!0},search:!1,loading:ue,headerTitle:ie||"",toolBarRender:se||null,columnsStateMap:S,onColumnsStateChange:Q},A,{className:"".concat(B,"-table")})))}},41647:function(Ne,oe,e){"use strict";e.d(oe,{I:function(){return $},U:function(){return b}});var F=e(37055),O=e(10237);function $(N){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],R=F.ZP.tableHeader.save(),c={fields:M,key:N};return O.WY.post({url:R,data:c})}function b(N){var M=F.ZP.tableHeader.get(N);return O.WY.get({url:M})}},99891:function(Ne,oe,e){"use strict";var F=e(12924),O=e.n(F),$=e(28216),b=e(91768),N=e(37055),M=e(10237),R=e(60667);class c extends O().PureComponent{constructor(d){super(d);this.getWaterMarkText=f=>{var m=this.props.userInfo,g=m.jobNumber,C=localStorage.getItem("waterMarkPostName"),t=[],w=f.find(A=>A.type==="content_setting"),V=f.find(A=>A.type==="content_custom");return w.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),V.param.checked==="true"&&V.param.comment[0]!==""&&this.setState({commentText:V.param.comment[0]}),w.param.comment.indexOf("position")!==-1&&C&&C!==""&&t.push("".concat(C)),w.param.comment.indexOf("jobnumber")!==-1&&g&&g!==""&&t.push("".concat(g)),t.join("-")},this.getWaterMarkApplication=f=>{var m=this.props.scenes,g=f.find(C=>C.type==="application_scenario");g.param.comment.indexOf(m)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=f=>{var m=f.find(g=>g.type==="dispersive");this.setState({isDispersive:m.param.checked==="true"})},this.getDynamicSet=()=>{var f=N.ZP.advancedSetting.dynamicWaterMarkNew(),m={access_token:window.localStorage.getItem("token")};M.WY.get({url:f,params:m}).then(g=>{var C=JSON.parse(g.data.actions);this.setState({waterMarkText:this.getWaterMarkText(C),actions:C}),this.getWaterMarkApplication(C),this.getWaterIsDispersive(C)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var d=localStorage.getItem("waterMarkPostName");d===""||d===null?this.getPostName():this.getDynamicSet()}getPostName(){var d=N.ZP.advancedSetting.getPostName();M.WY.get({url:d}).then(f=>{localStorage.setItem("waterMarkPostName",f.data.post_names[0]||""),this.getDynamicSet()})}render(){var d=this.state,f=d.showWaterMark,m=d.waterMarkCount,g=d.isUserName,C=d.isDispersive,t=d.waterMarkText,w=d.actions,V=d.commentText,A=this.props.userInfo,D=A.name,E=A.unionid,S=A.sourceType;return O().createElement("div",{className:"common-watermark"},f&&new Array(m).fill(0).map((U,B)=>O().createElement("div",{key:B,className:"common-watermark-item ".concat(C?"isDispersive":"")},O().createElement("span",{className:"common-watermark-item-content"},V!==""&&O().createElement("span",{className:"item-part"},V),g&&O().createElement("span",null,V!==""&&O().createElement("span",null,"-"),O().createElement(R.Z,{dataType:"userName",value:E,name:D,type:S})),O().createElement("span",{className:"item-part"},(g||V!=="")&&t!==""&&O().createElement("span",null,"-"),t)))))}}var L=n=>({userInfo:n.user});oe.Z=(0,$.$j)(L)((0,b.Z)()(c))},10513:function(Ne,oe,e){"use strict";var F=e(88983),O=e(47933),$=e(22385),b=e(31097),N=e(47673),M=e(4107),R=e(62029),c=e(57663),L=e(71577),n=e(34792),d=e(48086),f=e(12924),m=e.n(f),g=e(28216),C=e(91768),t=e(76651),w=e(59239),V=e(68628),A=e(20560),D=e(18329),E=e(88311),S=e(37055),U=e(10237),B=e(55446),i=e.n(B),z=e(84874),W=e(60667),ie=e(26885),se={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:16}}};class Ce extends m().Component{constructor(ce){var K;super(ce);K=this,this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{this.save(this.props.saveAndToAdd)},this.onClassifyChange=(Q,G)=>{var pe=this.state.formError;pe.classify=!1,this.setState({classify:Q,classifyName:G.name,formError:pe})},this.onShowOrgDialog=()=>{var Q=this.state.orgDialogConfig;if(!Q.visible){var G=localStorage.getItem("authorityType"),pe=this.props.user,ye=pe.appType,ke=pe.loginMode;ye==="wx_app"&&ke==="WE_COM"&&G==="1"?this.handleSelectWx():(Q.visible=!0,this.setState({orgDialogConfig:Q}))}},this.handleSelectWx=()=>{var Q=this.props.user,G=this.state.dept.map(ye=>ye.unionid),pe=this.state.user.map(ye=>ye.unionid||ye.userId||ye.user_id||ye.openUserId);(0,ie.Sk)({userIds:pe,deptIds:G}).then(ye=>{(0,ie.$f)({result:ye,user:Q,rangeType:"onlyDeptUser"}).then(ke=>{var Le=ke.qyWeChatVo,Ae=ke.rangeList;this.setState({qyWeChatVo:Le},()=>{this.addUserCbk(Ae)})})}).catch(()=>{this.cancelOrgDialog()})},this.getQuestionBankInfo=()=>{var Q=this.props.editQuestionBankId,G=S.ZP.AddQuestionBank.getQuestionBankInfo(),pe={id:Q};U.WY.get({url:G,params:pe}).then(ye=>{this.initEditInfo(ye.data.data)})},this.initEditInfo=Q=>{this.setState({classify:Q.courseClassify,classifyName:Q.classifyName,name:Q.name,scope:Q.isAll,dept:Q.departmentList.map(G=>({id:G.id,name:G.name,user_count:G.userCount,sourceType:G.sourceType})),user:Q.userList.map(G=>({id:G.id,name:G.name,userId:G.userId,sourceType:G.sourceType}))})},this.save=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(K.validate()){var G=K.state,pe=G.classify,ye=G.scope,ke=G.dept,Le=G.user,Ae=G.isClick,we=G.qyWeChatVo,Ke=K.initRef.state.value,ze=K.props,Ve=ze.isEdit,be=ze.editQuestionBankId,Qe=ze.t,He=Ve?S.ZP.AddQuestionBank.editQuestionBank():S.ZP.AddQuestionBank.add(),Ie={access_token:window.localStorage.getItem("token"),courseClassify:pe,name:Ke,isAll:ye,departmentIds:ke.map(Xe=>Xe.id).join(","),userIds:Le.map(Xe=>Xe.id).join(","),saveAndToAdd:Q},Ye=localStorage.getItem("authorityType"),Be=K.props.user.appType;Be==="wx_app"&&Ye==="1"&&(Ie.qy_we_chat_vo=we),Ve&&(Ie.id=be),Ae&&(K.setState({isClick:!1}),U.qg.post({url:He,data:Ie}).then(Xe=>{Xe.data.code===0&&(d.default.success(Qe(Ve?"component.editQuestionBankSuccess":"component.addQuestionBankSuccess")),K.props.onOk({id:Xe.data.data}),Q&&t.m8.push("/training/examination/questionBank?id=".concat(Xe.data.data,"&name=").concat(Ke)))}).finally(()=>{setTimeout(()=>{K.setState({isClick:!0})},100)}))}},this.validate=()=>{var Q=this.state,G=Q.classify,pe=Q.scope,ye=Q.dept,ke=Q.user,Le=Q.formError,Ae=this.initRef.state.value,we=!0;return G.length===0&&(Le.classify=!0,we=!1),Ae.length===0?(Le.nameError=this.props.t("component.pleaseInputBankName"),we=!1):Le.nameError="",pe===2&&ye.length===0&&ke.length===0&&(Le.scope=!0,we=!1),this.setState({formError:Le}),we},this.handleScopeChange=Q=>{var G=Q.target.value,pe=this.state.formError;pe.scope=!1,this.setState({scope:G,dept:[],user:[],formError:pe})},this.cancelOrgDialog=()=>{var Q=this.state.orgDialogConfig;Q.visible=!1,this.setState({orgDialogConfig:Q,qyWeChatVo:""})},this.addUserCbk=Q=>{var G=this.state.orgDialogConfig;G.visible=!1,this.setState({orgDialogConfig:G,dept:Q.dept,user:Q.user})},this.removeDept=Q=>{var G=this.state.dept;G.splice(Q,1),this.setState({dept:G})},this.removeUser=Q=>{var G=this.state,pe=G.user,ye=G.qyWeChatVo,ke=localStorage.getItem("authorityType"),Le=this.props.user.appType;if(pe.splice(Q,1),Le==="wx_app"&&ke==="1"){var Ae=JSON.parse(ye);Ae.userList.splice(Q,1),Ae.selectedUserCount-=1,this.setState({user:pe,qyWeChatVo:JSON.stringify(Ae)})}else this.setState({user:pe})},this.getSetting=()=>{U.WY.get({url:S.ZP.advancedSetting.getSettingStatusByType("jurisdiction_setting"),params:{}}).then(Q=>{this.setState({resourceViewRange:JSON.parse(Q.data.actions)[1].param.checked==="true"})})},this.inputRef=Q=>{this.initRef=Q},this.state={classify:"",classifyName:"",name:"",scope:1,orgDialogConfig:{title:ce.t("component.chooseVisibleScope"),visible:!1,onOk:this.addUserCbk,displayType:["dept"],onCancel:this.cancelOrgDialog},dept:[],user:[],formError:{},resourceViewRange:!1,isClick:!0,qyWeChatVo:""}}componentDidUpdate(ce){var K=this.props,Q=K.visible,G=K.isEdit;ce.visible!==Q&&Q&&this.setState({classify:"",classifyName:"",name:"",scope:1,dept:[],user:[],formError:{},qyWeChatVo:""},()=>{this.getSetting(),G&&this.getQuestionBankInfo()})}render(){var ce=this.state,K=ce.name,Q=ce.scope,G=ce.classify,pe=ce.classifyName,ye=ce.orgDialogConfig,ke=ce.dept,Le=ce.user,Ae=ce.formError,we=ce.resourceViewRange,Ke=this.props,ze=Ke.isEdit,Ve=Ke.saveAndToAdd,be=Ke.t,Qe=localStorage.getItem("authorityType"),He=this.props.user,Ie=He.appType,Ye=He.loginMode,Be={okText:be("common.ok"),cancelText:be("common.cancel"),size:"medium",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1},Xe=m().createElement("div",null,m().createElement(L.Z,{type:"primary",onClick:()=>this.save(!1)},be("common.save")),m().createElement(L.Z,{type:"primary",onClick:this.onOk},be("component.saveAndAddQuestion")));return Ve?Be.footer=Xe:Be.footer&&delete Be.footer,m().createElement(D.ZP,(0,R.Z)({title:be(ze?"component.editQuestionBank":"component.addQuestionBank")},Be,{visible:this.props.visible,bodyMask:ye.visible,onCancel:this.onCancel,onOk:this.onOk}),m().createElement("div",{className:"add-question-bank"},m().createElement(w.Z,{className:"add-question-bank-form"},m().createElement(w.Z.Item,(0,R.Z)({label:be("component.questionBankClassify"),required:!0,validateStatus:Ae.classify?"error":"",help:Ae.classify?be("component.pleaseChooseClassify"):""},se),m().createElement(A.Z,{classifyName:pe,value:G,onFieldChange:this.onClassifyChange})),m().createElement(w.Z.Item,(0,R.Z)({label:be("component.questionBankName"),required:!0,validateStatus:Ae.nameError?"error":"",help:Ae.nameError},se),m().createElement(M.Z,{className:"add-question-bank-name",ref:this.inputRef,placeholder:be("component.pleaseInputBankName"),defaultValue:K,maxLength:225})),m().createElement(w.Z.Item,(0,R.Z)({label:be("common.visibleRange"),validateStatus:Ae.scope?"error":"",help:Ae.scope?be("component.setQuestionBankScopeTip"):""},se),m().createElement(O.ZP.Group,{onChange:this.handleScopeChange,value:Q},m().createElement(O.ZP,{value:1},be("common.allCompany"),we&&m().createElement(b.Z,{title:be("setting.selectPeopleTip")},m().createElement("span",null,m().createElement(V.Z,null)))),m().createElement(O.ZP,{value:2,onClick:this.onShowOrgDialog},be("common.deptAndStu")),m().createElement(O.ZP,{value:3},be("common.onlySeenOwn")))),Q===2&&ke.length>0?m().createElement("div",{className:"add-question-bank-dept"},m().createElement("div",{className:"dept-label"},be("common.selectedGroups")),m().createElement("div",{className:"dept-list"},ke.map((We,st)=>m().createElement("div",{key:We.id,className:"dept-list-item"},m().createElement(W.Z,{dataType:"departmentName",value:We.id,name:We.department_name||We.name,type:We.source_type||We.sourceType}),m().createElement("span",{className:"icon",onClick:()=>this.removeDept(st)},m().createElement(z.Z,{iconClass:"icon-guanbi1",size:"10px"})))))):null,Q===2&&Le.length>0?m().createElement("div",{className:"add-question-bank-dept"},m().createElement("div",{className:"dept-label"},be("common.selectedUsers")),m().createElement("div",{className:"dept-list"},Le.map((We,st)=>{var rt=Ie==="wx_app"&&Qe==="1"?We.unionId||We.userId||We.user_id||We.openUserId:We.user_id||(We==null?void 0:We.userId),nt=Ie==="wx_app"&&Qe==="1"&&Ye==="WE_COM"?"wx_sync":We.source_type||We.sourceType;return m().createElement("span",{key:We.id,className:"dept-list-item"},ze?m().createElement(W.Z,{dataType:"userName",value:rt,name:We.name,type:nt}):m().createElement(W.Z,{dataType:"userName",value:rt,name:We.user_name,type:nt}),m().createElement("span",{className:"icon",onClick:()=>this.removeUser(st)},m().createElement(z.Z,{iconClass:"icon-guanbi1",size:"10px"})))}))):null),m().createElement(E.Z,(0,R.Z)({},ye,{initData:{dept:ke,user:Le}}))))}}var fe=ue=>{var ce=ue.user;return{user:ce}};oe.Z=(0,g.$j)(fe)((0,C.Z)()(Ce))},58546:function(Ne,oe,e){"use strict";var F=e(12924),O=e.n(F),$=e(91768),b=e(18329),N=e(89560),M=e(37055),R=e(10237),c=e(25547),L=e(44881),n={getResourceClassify:M.ZP.Classify.getResourceClassify};class d extends O().Component{constructor(){var m;super(...arguments);m=this,this.state={treeData:[],node:{},selectedKeys:[]},this.loadData=g=>{var C=this.props.authType;return new Promise(t=>{var w=g.id;setTimeout(()=>{var V=M.ZP.Classify.getResourceClassify(),A=w;R.WY.get({url:V,params:{parent_id:A,auth_type:C}}).then(D=>{if(!(!D.data||g.dataRef.children)){var E=(0,L.P)(D.data.list,C);g.dataRef.children=E,this.setState({treeData:[...this.state.treeData]})}}),t()},300)})},this.getList=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=m.props,t=C.selectedKeys,w=C.authType,V=C.selectedNames;R.WY.get({url:n.getResourceClassify(),params:{parent_id:0,auth_type:w}}).then(A=>{var D=A.data.list,E=(0,L.P)(D,w),S=g?[{courseCount:0,createTime:0,createUser:"",id:"0",label:"\u5168\u90E8",level:0,name:"\u5168\u90E8",orderId:0,parentId:"-1",value:"0",children:E}]:E;m.setState({treeData:S,node:{id:t[0],name:V[0]},selectedKeys:t})})},this.handleClickNode=g=>{this.setState({node:g,selectedKeys:[g.id]})},this.handleOk=()=>{var g=this.state,C=g.node,t=g.treeData,w=g.selectedKeys;this.props.onOk({id:this.props.id,node:Object.keys(C).length>0?C:(0,c.lK)(t,w[0])})}}componentDidUpdate(m){this.props.visible&&this.props.visible!==m.visible&&this.getList(this.props.isRoot)}render(){var m=this.props,g=m.visible,C=m.title,t=m.prefixCls,w=m.onCancel,V=m.selectedNames,A=m.t,D=m.isRoot,E=this.state,S=E.treeData,U=E.selectedKeys;return O().createElement(b.ZP,{size:"small",visible:g,title:C,okText:A("common.ok"),cancelText:A("common.cancel"),onCancel:w,onOk:this.handleOk,destroyOnClose:!0},O().createElement("div",{className:"".concat(t)},O().createElement("header",{className:"".concat(t,"__title")},A("component.currentClassify"),": ",O().createElement("span",null,V)),O().createElement("div",{className:"".concat(t,"__content")},S.length?O().createElement(N.Z,{list:S,isRoot:D,selectedKeys:U,loadData:this.loadData,onSelect:this.handleClickNode}):null)))}}d.defaultProps={prefixCls:"cl-category-selector",id:"",visible:!1,title:"SelectCategory",selectedKeys:[],selectedNames:[],onCancel:()=>{},onOk:()=>{},isRoot:!1,authType:"edit"},oe.Z=(0,$.Z)()(d)},80430:function(Ne,oe,e){"use strict";var F=e(12924),O=e.n(F),$=e(60667),b=N=>{var M=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{department_ids:[],department_names:[]},m=f.department_ids.split("/"),g=f.department_names.split("/"),C=m.map((t,w)=>O().createElement($.Z,{key:t,dataType:"departmentName",value:t,name:g[w],type:f.source_type}));return O().createElement(O().Fragment,null,C.map((t,w)=>O().createElement("span",{key:t},t,w===g.length-1?"":"/")))},R=d=>O().createElement($.Z,{dataType:"departmentName",value:d.department_id,name:d.department_name,type:d.source_type}),c=()=>{var d=N.list,f=d===void 0?[]:d,m=N.isBlock;if(!f.length)return null;var g=f.map(C=>M(C));return g.length&&g.length>1?O().createElement(O().Fragment,null,g.map((C,t)=>m?O().createElement("div",{key:C},C):O().createElement("span",{key:C},C,t===g.length-1?"":"\uFF0C"))):O().createElement(O().Fragment,null,g[0]||"")},L=()=>{var d=N.list,f=N.nameList,m=N.sourceType,g=N.isBlock,C=d.map((t,w)=>R({department_id:t,department_name:f[w],source_type:m}));return O().createElement(O().Fragment,null,C.map((t,w)=>g?O().createElement("div",{key:t},t):O().createElement("span",{key:t},t,w===C.length-1?"":"\uFF0C")))},n=()=>N.displayAll?c():L();return n()};b.defaultProps={list:[],nameList:[],sourceType:"",displayAll:!1,isBlock:!1},oe.Z=b},60667:function(Ne,oe,e){"use strict";e.d(oe,{Z:function(){return c}});var F=e(33565),O=e(12924),$=e.n(O),b=e(28216);function N(L){var n=L.type,d=L.openid,f=L.from,m=(0,O.useRef)(null);return(0,O.useLayoutEffect)(()=>{f==="vue"?window.parent.WWOpenData.bind(m.current):WWOpenData.bind(m.current)}),$().createElement("ww-open-data",{ref:m,type:n,openid:d})}var M=L=>{var n=L.wxWorkApiFlag,d=L.appType,f=L.from,m=(0,O.useState)(!1),g=(0,F.Z)(m,2),C=g[0],t=g[1];(0,O.useEffect)(()=>{var A=localStorage.getItem("qyWechatBook");(d!=="wx_app"||n||A==="false"||f==="vue"||f==="taro")&&t(!0)},[n,d,f]);var w=(0,O.useCallback)(()=>{var A=L.type,D=L.value,E=L.name,S=E===void 0?"":E;switch(console.warn(L,"props"),A){case"wx_sync":{var U=L.dataType;return D?$().createElement(N,{from:f,type:U,openid:D}):S}default:return S}},[L]),V=()=>{var A=L.name,D=L.dataType,E=localStorage.getItem("qyWechatBook");if(D===""||E==="false")return A;if(f==="vue"||f==="taro")return w();switch(L.appType){case"wx_app":return w();default:return A}};return C?V():L.name};M.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var R=L=>({appType:L.user.appType,wxWorkApiFlag:L.user.wxWorkApiFlag}),c=(0,b.$j)(R)(M)},20560:function(Ne,oe,e){"use strict";var F=e(62029),O=e(49111),$=e(19650),b=e(57663),N=e(71577),M=e(71153),R=e(60331),c=e(22385),L=e(31097),n=e(88986),d=e(12924),f=e.n(d),m=e(91768),g=e(80991),C=e(56130),t=e(58546);class w extends f().Component{constructor(A){super(A);this.handleChange=(D,E)=>{if(this.props.isObj)this.props.formik.setFieldValue("courseClassify",{id:D,name:E.name});else{var S=this.props.formik;if(S&&S.setValues){var U=S.values;S.setValues((0,n.Z)((0,n.Z)({},U),{},{classifyName:E.name}))}this.props.onFieldChange(D,E)}},this.handleClear=()=>{this.setState({id:"",name:"",categoryConfig:(0,n.Z)((0,n.Z)({},this.state.categoryConfig),{},{selectedKeys:[],selectedNames:[]})},()=>{this.handleChange("",{})})},this.handleSetCategory=D=>{var E=D.node;this.setState({id:E.id,name:E.name,categoryConfig:(0,n.Z)((0,n.Z)({},this.state.categoryConfig),{},{selectedKeys:[E.id],selectedNames:[E.name]})},()=>{this.handleChange(E.id,E),this.handleCategoryModal(!1)})},this.handleCategoryModal=D=>{this.setState({categoryConfig:(0,n.Z)((0,n.Z)({},this.state.categoryConfig),{},{visible:D})})},this.state={id:"",name:"",categoryConfig:{selectedKeys:[],selectedNames:[],visible:!1,onCancel:()=>this.handleCategoryModal(!1),onOk:this.handleSetCategory}}}static getDerivedStateFromProps(A,D){if(A.value!==D.value){var E=A.isObj,S=A.value,U=A.classifyName;return E&&typeof S!="string"?{id:S.id,name:S.id==="999"?"\u672A\u5F52\u7C7B":S.name,categoryConfig:(0,n.Z)((0,n.Z)({},D.categoryConfig),{},{selectedKeys:[S.id],selectedNames:[S.id==="999"?"\u672A\u5F52\u7C7B":S.name]})}:{id:S,name:S==="999"?"\u672A\u5F52\u7C7B":U,categoryConfig:(0,n.Z)((0,n.Z)({},D.categoryConfig),{},{selectedKeys:[S],selectedNames:[S==="999"?"\u672A\u5F52\u7C7B":U]})}}return null}render(){var A=this.state,D=A.id,E=A.categoryConfig,S=A.name,U=this.props.t;return f().createElement("div",{className:"classify-select-action",id:"courseClassify"},f().createElement($.Z,null,(D||S)&&f().createElement(R.Z,{closable:!0,onClose:this.handleClear},f().createElement(L.Z,{title:S||D},f().createElement("span",{className:"classify-select-action-label"},S||D))),f().createElement(N.Z,{onClick:()=>this.handleCategoryModal(!0)},U("course.chooseCategory"))),f().createElement(t.Z,(0,F.Z)({},E,{title:U("course.adjustClassify"),authType:"edit"})))}}w.defaultProps={showAdd:!1,isObj:!1},oe.Z=(0,g.$j)((0,C.Z)((0,m.Z)()(w)))},48479:function(Ne,oe,e){"use strict";var F=e(62029),O=e(57361),$=e(47673),b=e(4107),N=e(9754),M=e.n(N),R=e(12924),c=e.n(R),L=e(91768),n=e(94184),d=e.n(n),f=e(28216),m=e(84874),g=e(67222),C=e(2396),t=b.Z.Search;class w extends c().Component{constructor(A){var D;super(A);D=this,this.clear=()=>{this.setState({searchValue:""})},this.renderEnterButton=()=>c().createElement(m.Z,{iconClass:"icon-icon_serarchx1"}),this.handleSearch=function(){var E=(0,O.Z)(M().mark(function S(U){var B,i,z,W,ie,se,Ce,fe,ue;return M().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(B=D.props,i=B.appType,z=B.exChange,W=B.appId,ie=localStorage.getItem("qyWechatBook"),se="",Ce=i==="wx_app"&&ie==="true"&&z&&W==="9005",!(U&&Ce)){K.next=17;break}return K.prev=5,K.next=8,(0,g.F_)(U);case 8:fe=K.sent,ue=fe.data,ue.success?se=ue.data:se="",K.next=17;break;case 13:K.prev=13,K.t0=K.catch(5),console.error(K.t0),se="";case 17:D.props.onSearch(U,se);case 18:case"end":return K.stop()}},S,null,[[5,13]])}));return function(S){return E.apply(this,arguments)}}(),this.handleChange=E=>{var S=E.target.value,U=E.type,B=S;this.props.LimitLength&&(0,C.$s)(S)>this.props.LimitLength&&(B=S.substring(0,(0,C.rw)(S,this.props.LimitLength))),this.setState({searchValue:B});var i=!1;this.props.onSearch&&(U==="click"&&(i=!0),this.props.immediate&&U==="change"&&(i=!0)),i&&this.handleSearch(S)},this.state={searchValue:""}}componentDidMount(){this.props.onRef&&this.props.onRef(this)}componentWillReceiveProps(A){A.onRef&&A.onRef(this)}render(){var A=this.state.searchValue,D=this.props,E=D.prefixCls,S=D.placeholder,U=D.width,B=D.maxLength,i=B===void 0?400:B,z=D.height,W=D.immediate,ie=D.value,se=d()(["".concat(E)]),Ce={width:U,height:z},fe={};return ie&&(fe.value=ie),c().createElement(t,(0,F.Z)({className:se,style:Ce,value:A,placeholder:S,onSearch:this.handleSearch,onChange:this.handleChange,maxLength:i,allowClear:!0,defaultValue:ie,immediate:W.toString()},fe))}}w.defaultProps={prefixCls:"cl-search-input",placeholder:"Search",value:null,onSearch:()=>{},onChange:()=>{},immediate:!1,onRef:()=>{}},oe.Z=(0,f.$j)(V=>({appType:V.user.appType,appId:V.user.appId}))((0,L.Z)()(w))},89560:function(Ne,oe,e){"use strict";var F=e(62029),O=e(32157),$=e(75869),b=e(12924),N=e.n(b),M=e(84874),R=e(25547),c=$.Z.TreeNode;class L extends N().Component{constructor(){super(...arguments);this.state={defaultExpandedKeys:[]},this.handleSelect=(d,f)=>{var m=f.node,g=m.props,C=g.eventKey,t=g.dataLable,w=g.children;this.props.onSelect({id:C,name:t,children:w})},this.renderTreeNodes=d=>d.map(f=>f.children?N().createElement(c,{key:f.id,dataRef:f,disabled:f.disabled||!1,title:this.renderTreeNodeTitle(f),dataLable:f.label},this.renderTreeNodes(f.children)):N().createElement(c,(0,F.Z)({key:f.id,title:this.renderTreeNodeTitle(f)},f,{dataRef:f,dataLable:f.label,disabled:f.disabled||!1}))),this.renderTreeNodeTitle=d=>{var f=this.props,m=f.prefixCls,g=f.renderIcon,C=g()||N().createElement("span",{className:"".concat(m,"__row__icon")},N().createElement(M.Z,{iconClass:"icon-icon_donex1"}));return N().createElement("span",{className:"".concat(m,"__row")},N().createElement("span",{className:"".concat(m,"__row__label"),title:d.label},d.label),C)}}static getDerivedStateFromProps(d,f){var m=d.list,g=d.selectedKeys,C=d.isRoot;if(!C){var t=f.defaultExpandedKeys;t.push((0,R.lK)(m,g[0]).parentId);var w=Array.from(new Set(t.filter(A=>A!==void 0)));return{defaultExpandedKeys:w}}var V=[0];return{defaultExpandedKeys:V}}render(){var d=this.props,f=d.prefixCls,m=d.list,g=d.selectedKeys,C=d.className,t=d.height,w=this.state.defaultExpandedKeys;return N().createElement("div",{className:"".concat(f," ").concat(C)},N().createElement($.Z,{blockNode:!0,defaultExpandedKeys:w,height:t,selectedKeys:g,onSelect:this.handleSelect,loadData:this.props.loadData},this.renderTreeNodes(m)))}}L.defaultProps={prefixCls:"cl-tree",list:[],selectedKeys:[],renderIcon:()=>null,onSelect:()=>{}},oe.Z=L},40238:function(Ne,oe,e){"use strict";var F=e(66456),O=e(55313),$=e(43185),b=e(53251),N=e(88983),M=e(47933),R=e(62029),c=e(57663),L=e(71577),n=e(88986),d=e(34792),f=e(48086),m=e(43358),g=e(34041),C=e(12924),t=e.n(C),w=e(91768),V=e(59239),A=e(55446),D=e.n(A),E=e(84874),S=e(10237),U=e(37055),B=e(18329),i=e(10513),z={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1},W=V.Z.Item,ie=g.Z.Option,se={labelCol:{xs:{span:2},sm:{span:2}},wrapperCol:{xs:{span:16},sm:{span:16}}};class Ce extends t().Component{constructor(ue){var ce;super(ue);ce=this,this.onSearch=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";ce.getQuestionLib(K)},this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{var K=this.state,Q=K.selectedLib,G=K.importedList,pe=K.fileType,ye=this.props,ke=ye.t,Le=ye.withAddQuestionBank,Ae=ye.questionBankId,we=ye.isMultiple;if(Le&&!Q){this.setState({showLibErrorTip:!0});return}if(G.length===0){f.default.error(ke("component.noImportQuestionTip"));return}var Ke=U.ZP.ImportQuestion.commit(),ze={access_token:window.localStorage.getItem("token"),questionBankId:Q||Ae,newfileName:G.map(Ve=>Ve.newfileName).join(","),fileType:pe,isMultiple:we};S.qg.post({url:Ke,data:ze}).then(Ve=>{f.default.success(ke("component.successImportQuestionTip")),this.props.onOk(Ve.data.data)})},this.onDownloadTemplate=()=>{var K=this.state.fileType,Q=this.props.isMultiple,G=Q===void 0?!1:Q;window.location.href="".concat(U.ZP.ImportQuestion.downloadTemplate(),"?access_token=").concat(window.localStorage.getItem("token"),"&fileType=").concat(K,"&isMultiple=").concat(G)},this.onSelectQuestionLib=K=>{this.setState({selectedLib:K,showLibErrorTip:!1})},this.onShowAddQuestionBank=()=>{var K=this.state.addQuestionBankConfig;K.visible=!0,this.setState({addQuestionBankConfig:K})},this.getQuestionLib=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Q=ce.props.withAddQuestionBank;if(Q){var G=U.ZP.QuestionSelector.getQuestionLib(),pe={pageSize:100,pageNumber:1,keyword:K};S.WY.get({url:G,params:pe}).then(ye=>{ce.setState({questionLibList:ye.data.data.list})})}},this.beforeUpload=K=>{var Q=this.props.t,G=K.size/1024/1024<2;return G||f.default.error(Q("component.templateImportLimitTip")),G},this.fileUpload=K=>{K.file&&K.file.response&&K.file.response.code===0?this.setState({importedList:[K.file.response.data],uploadErrMsg:[]}):K.file&&K.file.response&&K.file.response.code===101?this.setState({uploadErrMsg:[K.file.response.data]}):K.file&&K.file.response&&K.file.response.data.errorMessages&&this.setState({uploadErrMsg:K.file.response.data.errorMessages})},this.cancelAddQuestionBank=()=>{var K=this.state.addQuestionBankConfig;K.visible=!1,this.setState({addQuestionBankConfig:K})},this.addQuestionBankCbk=K=>{var Q=K.id,G=this.state.addQuestionBankConfig;G.visible=!1,this.setState({selectedLib:Q,addQuestionBankConfig:G}),this.getQuestionLib()},this.handleChangeFileType=K=>{var Q=this.props.isMultiple,G="".concat(U.ZP.ImportQuestion.import(),"?fileType=").concat(K.target.value,"&isMultiple=").concat(Q);this.setState(pe=>({fileType:K.target.value,uploadConfig:(0,n.Z)((0,n.Z)({},pe.uploadConfig),{},{action:G})}))},this.renderAddQuestionBank=()=>{var K=this.props,Q=K.t,G=K.withAddQuestionBank,pe=this.state,ye=pe.showLibErrorTip,ke=pe.questionLibList,Le=pe.addQuestionBankConfig,Ae=pe.selectedLib;return G&&t().createElement(t().Fragment,null,t().createElement("div",{className:"import-question-lib"},t().createElement(W,(0,R.Z)({required:!0,label:Q("component.choosedQuestionLib"),validateStatus:ye?"error":"",help:ye?Q("component.chooseQuestionLibTip"):""},se),t().createElement(g.Z,{placeholder:Q("component.pleaseChoose"),showSearch:!0,allowClear:!0,value:Ae,onSearch:this.onSearch,className:"import-question-lib-select",onChange:this.onSelectQuestionLib,filterOption:(we,Ke)=>Ke.props.children.toLowerCase().indexOf(we.toLowerCase())>=0},ke.map(we=>t().createElement(ie,{key:we.id,value:we.id},we.name))),t().createElement(L.Z,{className:"import-question-lib-add",onClick:this.onShowAddQuestionBank},t().createElement(E.Z,{iconClass:"icon-icon_addx"}),Q("component.addQuestionBank")))),t().createElement(i.Z,Le))},this.state={selectedLib:"",showLibErrorTip:!1,questionLibList:[],importedList:[],uploadConfig:{name:"file",action:"".concat(U.ZP.ImportQuestion.import(),"?fileType=excel&isMultiple=").concat(this.props.isMultiple),showUploadList:!1,data:{access_token:window.localStorage.getItem("token")},beforeUpload:this.beforeUpload,onChange:this.fileUpload},uploadErrMsg:[],addQuestionBankConfig:{visible:!1,onCancel:this.cancelAddQuestionBank,onOk:this.addQuestionBankCbk},fileType:"excel"},this.questionTableColumn=[{title:ue.t("component.fileName"),dataIndex:"fileName",key:"newfileName"},{title:ue.t("component.successLabel"),dataIndex:"rightCount"},{title:ue.t("component.failedLabel"),dataIndex:"errorCount"}]}componentDidUpdate(ue){var ce=this.props.visible;ue.visible!==ce&&ce&&this.setState({selectedLib:"",questionLibList:[],importedList:[],showLibErrorTip:!1,uploadErrMsg:[]},()=>{this.getQuestionLib()})}render(){var ue=this.props.t,ce=this.state,K=ce.importedList,Q=ce.uploadConfig,G=ce.uploadErrMsg,pe=ce.addQuestionBankConfig,ye=ce.fileType;return t().createElement(B.ZP,(0,R.Z)({},z,{title:ue("component.importQuestionLabel"),visible:this.props.visible,bodyMask:pe.visible,onCancel:this.onCancel,onOk:this.onOk}),t().createElement("div",{className:"import-question"},this.renderAddQuestionBank(),t().createElement(W,(0,R.Z)({},se,{required:!0,label:ue("component.fileType")}),t().createElement(M.ZP.Group,{className:"import-question-filetype",onChange:this.handleChangeFileType,value:ye},t().createElement(M.ZP,{value:"excel"},"Excel"),t().createElement(M.ZP,{value:"word"},"Word"))),t().createElement("div",{className:"import-question-import"},t().createElement(L.Z,{className:"import-question-import-btn",onClick:this.onDownloadTemplate},t().createElement(E.Z,{iconClass:"icon-icon_donwloadx1"}),ue("component.downloadTem")),t().createElement("span",{className:"import-question-import-tip"},ue("component.templateImportTip")),t().createElement(b.Z,(0,R.Z)({className:"import-question-import-btn right"},Q),t().createElement(L.Z,{type:"primary"},t().createElement(E.Z,{iconClass:"icon-import"}),K.length===0?ue("component.importLabel"):ue("employeeSummary.reImport")))),t().createElement("div",{className:"import-question-table"},t().createElement(O.Z,{dataSource:K,columns:this.questionTableColumn,bordered:!0,rowKey:ke=>ke.newfileName,size:"middle",pagination:!1})),G.length>0?t().createElement("div",{className:"import-question-tip"},t().createElement("p",null,t().createElement(E.Z,{iconClass:"icon-tishi"}),ue("component.errorTips"),":"),G.map((ke,Le)=>t().createElement("p",{key:Le},ke))):null))}}Ce.defaultProps={visible:!1,questionBankId:"",onCancel:()=>{},onOk:()=>{},withAddQuestionBank:!1,isMultiple:!1},oe.Z=(0,w.Z)()(Ce)},76466:function(Ne,oe,e){"use strict";e.d(oe,{Z:function(){return ot}});var F=e(20228),O=e(11382),$=e(57663),b=e(71577),N=e(62029),M=e(57361),R=e(9754),c=e.n(R),L=e(12924),n=e.n(L),d=e(91512),f=e(68654),m=e(91768),g=e(4412),C=e.n(g);class t extends n().Component{render(){var u=this.props.t;return n().createElement("div",{className:"net-preview"},n().createElement("div",{className:"net-preview-center"},n().createElement("img",{src:C(),alt:"picture"}),n().createElement("h2",null,u("localStorage.tip")),n().createElement("p",null,u("localStorage.banPreview"))))}}var w=(0,m.Z)()(t),V=e(88986),A=e(34792),D=e(48086),E=e(28216),S=e(21594),U=e(41225),B=e(10237),i=(Oe,u)=>(0,V.Z)({id:Oe||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},u),z=i;class W extends L.Component{constructor(){super(...arguments);this.setupPlayer=u=>{var p=this.props,l=p.onVideoReady,o=l===void 0?()=>{}:l,v=p.playerConfig,I=p.contentType;u&&u==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,V.Z)((0,V.Z)({},v),{},{contentType:I==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:v.source,autoplay:v.autoplay,width:v.width,id:v.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:x=>{x.on("sourceloaded",j=>{var Z=j.paramData,ne=Z.desc,re=Z.definition;x.getComponent("VideoQuality")&&x.getComponent("VideoQuality").setCurrentQuality(ne,re,v.id)}),x.on("ready",()=>{o()}),this.playerInstance=x,this.setPlayerConfig()}}))}}componentDidUpdate(u){u.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(u){this.player&&this.player.seek(u)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(u){this.player.setSpeed(u)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var u=this.props,p=u.onPlay,l=p===void 0?()=>{}:p,o=u.onTimeUpDate,v=o===void 0?()=>{}:o,I=u.onEnd,x=I===void 0?()=>{}:I,j=u.onPause,Z=j===void 0?()=>{}:j,ne=u.onError,re=ne===void 0?()=>{}:ne,le=this.playerInstance;le.on("play",()=>{l()}),le.on("pause",()=>{Z()}),le.on("timeupdate",J=>{v(J)}),le.on("ended",()=>{x()}),le.on("error",(0,M.Z)(c().mark(function J(){return c().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:re();case 1:case"end":return Ee.stop()}},J)})))}render(){var u=this.props.playerConfig;return n().createElement("div",{className:"common-video-player-container"},n().createElement("div",{id:u.id}))}}W.playerInstance=null,W.defaultProps={playerConfig:z(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var ie=W,se=(Oe,u)=>(0,V.Z)({id:Oe||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},u),Ce=se;class fe extends L.Component{constructor(){super(...arguments);this.setupPlayer=u=>{u&&u==="resetPlayer"&&this.player.dispose();var p=this.props,l=p.playerConfig,o=p.onVideoReady,v=o===void 0?()=>{}:o;this.player=new Aliplayer(l,I=>{I.on("sourceloaded",x=>{var j=x.paramData,Z=j.desc,ne=j.definition;I.getComponent("VideoQuality")&&I.getComponent("VideoQuality").setCurrentQuality(Z,ne,l.id)})}),this.player.on("ready",()=>{v()})},this.setPlayerConfig=()=>{var u=this.props,p=u.onPlay,l=p===void 0?()=>{}:p,o=u.onTimeUpDate,v=o===void 0?()=>{}:o,I=u.onEnd,x=I===void 0?()=>{}:I,j=u.onPause,Z=j===void 0?()=>{}:j,ne=u.onError,re=ne===void 0?()=>{}:ne;this.player.on("play",()=>{l()}),this.player.on("pause",()=>{Z()}),this.player.on("timeupdate",le=>{v(le)}),this.player.on("ended",()=>{x()}),this.player.on("error",(0,M.Z)(c().mark(function le(){return c().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:re();case 1:case"end":return te.stop()}},le)})))},this.getPlayerContent=u=>{this.playerContainer=u}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(u){u.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(u){this.player.seek(u)}exitFull(){var u=this.player.fullscreenService;u&&u.isFullScreen&&u.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var u=this.props.playerConfig;return n().createElement("div",{className:"common-video-player-container"},n().createElement("div",{id:u.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}fe.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:Ce()};var ue=fe;class ce{constructor(u){this.hasCreated=!1,this.definition="",this.getQuality=u}createEl(u,p){var l=p._options&&p._options.language,o=p._el.id;this.isEn=l&&l==="en-us";var v=(0,S.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),I=(0,S.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),x=document.querySelector("#".concat(o," .prism-controlbar"));x.appendChild(v),u.appendChild(I)}setCurrentQuality(u,p,l){var o=document.querySelector("#".concat(l," .current-quality"));o.innerText=u,o.dataset.def=p,this.definition=p;var v=document.querySelector("#".concat(l," .quality-list")),I=v.querySelector(".current");I&&(I.className="");var x=v.querySelector('li[data-def="'.concat(p,'"]'));x&&(x.className="current")}created(u){this._urls=u._urls;var p=u._el.id,l=document.querySelector("#".concat(p," .current-quality")),o=document.querySelector("#".concat(p," .quality-list")),v=document.querySelector("#".concat(p," .quality-modal")),I=this._urls.map(Z=>'<li data-def="'.concat(Z.definition,'">').concat(Z.desc,"</li>"));if(o.innerHTML=I.join(""),this.hasCreated==!1&&this.definition){var x=o.querySelector('li[data-def="'.concat(this.definition,'"]'));x.className="current"}this.hasCreated=!0;var j=null;l.onclick=()=>{o.style.display="block"},l.onmouseleave=()=>{j=setTimeout(()=>{o.style.display="none"},100)},o.onmouseenter=()=>{clearTimeout(j)},o.onmouseleave=()=>{o.style.display="none"},o.onclick=Z=>{var ne=Z.target,re=ne.dataset.def,le=ne.innerText;if(re&&ne.className!=="current"){var J=this._urls.find(te=>te.definition===re);u.loadByUrl(J.Url,u.getCurrentTime(),!0,!0),this.setCurrentQuality(J.desc,J.definition,p),v.style.display="block",v.querySelector("span.current-quality-tag").innerText=J.desc}this.getQuality(re,le)}}ready(u){var p=u._el.id,l=document.querySelector("#".concat(p," .quality-modal"));l.style.display="none";var o=document.querySelector("#".concat(p," .prism-setting-item.prism-setting-quality"));o&&o.classList.add("player-hidden")}}class K{createEl(u,p){var l=p._el.id,o=(0,S.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),v=document.querySelector("#".concat(l," .prism-controlbar"));v.appendChild(o)}ready(u){var p=u._el.id,l=document.querySelector("#".concat(p," .current-rate")),o=document.querySelector("#".concat(p," .rate-list")),v=null,I=document.querySelector("#".concat(p," .prism-setting-item.prism-setting-speed"));I&&I.classList.add("player-hidden"),l.onclick=()=>{o.style.display="block"},l.onmouseleave=()=>{v=setTimeout(()=>{o.style.display="none"},100)},o.onmouseenter=()=>{clearTimeout(v)},o.onmouseleave=()=>{o.style.display="none"},o.onclick=x=>{var j=x.target,Z=j.dataset.rate;if(Z){if(u.setSpeed(Z),j.className!=="current"){var ne=o.querySelector(".current");ne&&(ne.className=""),j.className="current"}o.style.display="none",l.innerText="".concat(Z,"x")}}}}var Q=e(69164),G=e(37055);function pe(Oe){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=G.ZP.local.getLocalUrl(Oe);return B.WY.get({url:p,params:u})}var ye=e(91648),ke=e(18329),Le=e(38642),Ae=e(9849),we=e(99891);class Ke extends L.Component{constructor(u){super();this.WaterMarkText=u,this.html=document.getElementsByClassName("common-watermark")}createEl(u){setTimeout(()=>{u.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var ze=Ke,Ve=Oe=>({userInfo:Oe.user});class be extends L.Component{constructor(u){var p;super(u);p=this,this.onVideoReady=l=>{var o=this.props,v=o.resourceInfo,I=o.mode,x=o.autoPlay,j=o.t,Z=v.storageType;l==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(l),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(I==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),I==="preview"&&x&&this.play.play()):Z==="ALIBABA_PRIVATE"||Z==="LOCAL"?this.updateSource("resetPlayer"):(B.WY.logger({keyword:"video",moduleName:"video-play",msg:j("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var l=this.props,o=l.draggable,v=l.mode,I=l.t,x=l.studyInfo,j=l.needCurrentTime,Z=l.onCurrentTime,ne=Z===void 0?()=>{}:Z,re=x.studyType,le=x.studyId,J=x.resourceId,te=this.state,Ee=te.showPreventHang,Ue=te.dragSwitch,Re=te.showRandomAlert,Ze=te.randomAlertDialogVisible,q=this.playingVideo,T=q.oneTime,y=q.popupWindowCount,s=q.maxPlayTime,r=q.progress,P=q.auditionLength,h=q.auditionType,a=q.duration,k=q.recentStart,X=this.play.getCurrentTime(),ee=(Ee==="OPEN"||Re==="OPEN")&&y>0;if(j&&ne(X),P>0&&h===2&&X>P&&(this.play.seek(P),D.default.warning(I("component.haveALookOverTip")),this.play.pause()),v==="learn"&&ee){var ge=a-T*y;if(y>0&&X>ge)if(this.play.pause(),Re==="OPEN"){if(!Ze){var ae=(0,ye.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:ae},()=>{(0,U.qp)({popupId:ae,planId:le,resourceId:J,type:"popup_start"})}),this.play.exitFull()}}else Ee==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((o||r===100)&&(X>0&&(this.playingVideo.recentStart=X),!((re==="enterprise"||re==="studyProject")&&Ue==="OPEN")))return!1;X>s?X-k>2?(this.playingVideo.recentStart=s,this.play.seek(s),D.default.warning(I("component.preventFastWatchTip"))):(this.playingVideo.recentStart=X,this.playingVideo.maxPlayTime=X):X>0&&X>this.playingVideo.recentStart&&(this.playingVideo.recentStart=X)},this.onPlay=()=>{var l=this.props,o=l.mode,v=l.onPlay,I=v===void 0?()=>{}:v;I();var x=this;o==="learn"&&!x.timer&&(x.timer=setTimeout(function j(){x.saveProgress(),clearTimeout(x.timer),x.timer=setTimeout(j,2e4)},2e4))},this.onPause=()=>{var l=this.props,o=l.studyInfo,v=l.mode,I=o.studyType;clearTimeout(this.timer),this.timer=null,v==="learn"&&(I==="platform"||I==="enterprise"||I==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var l=this.props.mode;l==="learn"&&this.saveProgress()},this.onError=l=>{var o=this.props.resourceInfo,v=o.storageType;(v==="ALIBABA_PRIVATE"||v==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var l=this.props.mode;this.initPlayVideo(),l==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var l=this.state,o=l.showPreventHang,v=l.showRandomAlert,I=this.props,x=I.t,j=I.playingVideo,Z=I.studyInfo,ne=I.autoPlay,re=j.recentStart,le=j.duration,J=j.progress,te=Z.studyType,Ee=(o==="OPEN"||v==="OPEN")&&(te==="studyTask"||te==="enterprise"||te==="studyProject")&&J<100;Ee?(v==="OPEN"?this.setState({promptMessage:x("component.preventAlertTip"),dialogVisible:!0}):o==="OPEN"&&this.setState({promptMessage:x("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):ne&&(this.play.play(),Math.ceil(re)<parseInt(le)&&this.play.seek(re))},this.playerShowPreventHang=()=>{var l=this.playingVideo,o=l.duration,v=l.recentStart,I=0;o>0&&o<180?(I=o/2,this.playingVideo.oneTime=I,v>=I?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):o>=180&&o<600?(I=o/3,this.playingVideo.oneTime=I,v>=2*I?this.playingVideo.popupWindowCount=0:v>=I?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(I=o/4,this.playingVideo.oneTime=I,v>=3*I?this.playingVideo.popupWindowCount=0:v>=2*I?this.playingVideo.popupWindowCount=1:v>=I?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var l=this.props,o=l.playingVideo,v=l.mode;if(v==="learn"){this.playingVideo=(0,V.Z)({},o);var I=o.duration,x=o.progress;this.playingVideo.hasFinished=parseInt(x)===100,this.playingVideo.maxPlayTime=parseInt(I)*parseInt(x)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,M.Z)(c().mark(function l(){var o,v,I,x,j,Z,ne,re,le,J,te,Ee,Ue,Re,Ze,q,T,y,s,r,P,h,a,k;return c().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(o=p.state,v=o.speedSwitch,I=o.dragSwitch,x=o.whiteList,j=p.props,Z=j.resourceInfo,ne=j.showQuality,re=Z.contentType,le=Z.storageType,J=Z.source,te=Z.playId,Ee=Z.playerId,Ue=Z.showFullScreen,Re=Ue===void 0?!0:Ue,Ze=Ce(Ee),Ze.components=[],q=typeof J=="object"&&J.hasOwnProperty("FD")&&J.FD.indexOf("m3u8")===-1,ne&&q&&re!=="mp3"&&(le&&le==="PUBLIC_CLOUD"||!le)&&Ze.components.push({name:"VideoQuality",type:ce,args:[()=>{p.play.pause(),p.playingVideo.readyCount=0}]}),v==="OPEN"&&Ze.components.push({name:"VideoRate",type:K}),Re&&(T=Ze.skinLayout.find(ge=>ge.name==="controlBar"),T&&T.children.splice(T.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),Ze.components.push({name:"VideoWaterMark",type:ze}),y=J.FD,s=J.OD,y.indexOf("http://")>-1&&(y=y.replace("http://","https://")),s.indexOf("http://")>-1&&(s=s.replace("http://","https://")),r=x.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",J.OD=s&&s.indexOf(r)>-1&&s.indexOf(".mp4")>-1?s:y,J.FD=y,P=typeof J!="string"?JSON.stringify(J):J,Ze.source=P,I==="OPEN"&&(Ze.disableSeek=!0),le!=="ALIBABA_PRIVATE"){ee.next=32;break}return ee.next=22,(0,U.BR)(te);case 22:if(h=ee.sent,!h){ee.next=28;break}Ze.source=h,Ze.vodRetry=1,ee.next=30;break;case 28:return p.setState({showPrivateVodError:!0}),ee.abrupt("return");case 30:ee.next=38;break;case 32:if(le!=="LOCAL"){ee.next=38;break}return ee.next=35,pe(te);case 35:a=ee.sent,k=a.data,k.code===0&&(Ze.source="".concat(J.FD,"?auth_key=").concat(k.data.auth_key),Ze.vodRetry=1);case 38:p.setState({playerConfig:Ze});case 39:case"end":return ee.stop()}},l)})),this.updateSource=function(){var l=(0,M.Z)(c().mark(function o(v){var I,x,j,Z,ne,re,le,J;return c().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(I=p.state.playerConfig,x=p.props.resourceInfo,j=x.storageType,Z=x.source,ne=x.playId,p.playingVideo.readyCount=0,j!=="ALIBABA_PRIVATE"){Ee.next=16;break}return Ee.next=7,(0,U.BR)(ne);case 7:if(re=Ee.sent,!re){Ee.next=12;break}Object.assign(I,{source:re,vodRetry:1}),Ee.next=14;break;case 12:return p.setState({showPrivateVodError:!0}),Ee.abrupt("return");case 14:Ee.next=22;break;case 16:if(j!=="LOCAL"){Ee.next=22;break}return Ee.next=19,pe(ne);case 19:le=Ee.sent,J=le.data,J.code===0&&Object.assign(I,{source:"".concat(Z.FD,"?auth_key=").concat(J.data.auth_key),vodRetry:1});case 22:p.setState({playerConfig:I},()=>{p.play.setupPlayer(v)});case 23:case"end":return Ee.stop()}},o)}));return function(o){return l.apply(this,arguments)}}(),this.saveProgress=()=>{var l=this.props,o=l.studyInfo,v=l.userInfo,I=v.isLogin,x=v.enterpriseId,j=v.id,Z=this.playingVideo,ne=Z.recentStart,re=Z.duration,le=Z.hasFinished,J=Math.ceil(+ne);J>Number(re)&&(J=Number(re));var te=Math.ceil(J/+re*100);if((te>100||le)&&(te=100),I){var Ee=this.playingVideo,Ue=Ee.auditionType,Re=Ee.auditionLength;if(Re>0&&Ue===2){var Ze=Math.ceil(Re/re*100);Ze<=te&&(te=Ze,J=Re)}(0,U.sH)({studyInfo:o,progress:te,recent_start:J,enterpriseId:x,userId:j}).then(q=>{q&&q.data&&(0,Q.Z)(q.data.integral_info||"")})}},this.getInfoFromSettings=(0,M.Z)(c().mark(function l(){var o,v,I,x,j,Z,ne,re,le;return c().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return o=p.props.studyInfo,v=o.studyType,I=o.projectId,te.next=4,(0,U.Gw)();case 4:if(x=te.sent,j=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],Z=(0,S.RG)(x,j),v!=="studyProject"){te.next=14;break}return te.next=10,(0,Ae.NU)({id:I});case 10:ne=te.sent,re=ne.status,le=ne.data,re===200&&(Z.showPreventHang=le.prevent_cut_screen?"OPEN":"CLOSED",Z.speedSwitch=le.speed_play?"OPEN":"CLOSED",Z.dragSwitch=le.prevent_drag?"OPEN":"CLOSED");case 14:p.setState(Z,()=>{p.dealVideoConfig()});case 15:case"end":return te.stop()}},l)})),this.dealAudioPoster=()=>{var l=this.props.resourceInfo.contentType,o=l===void 0?"":l;this.setState({showAudioPoster:o==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var l=this.state.showAudioPoster,o=this.play.playerContainer;l&&o&&(o.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),o.style.backgroundSize="cover")},this.getPlayInstance=l=>{this.play=l},this.handleOk=()=>{this.setState({dialogVisible:!1});var l=this.state.btnType,o=this.playingVideo.recentStart,v=this.props.t;l==="know"?(this.play.play(),this.play.seek(o),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:v("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,M.Z)(c().mark(function l(){var o,v,I,x;return c().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:o=p.props.studyInfo,v=o.studyId,I=o.resourceId,x=p.state.randomAlertUUID,(0,U.qp)({popupId:x,planId:v,resourceId:I,type:"popup_end"}).then(()=>{p.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),p.playingVideo.popupWindowCount-=1,p.play.play();case 6:case"end":return Z.stop()}},l)})),this.renderFooter=()=>{var l=this.state.btnType,o=this.props.t;return n().createElement(b.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(l)},o(l==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var l=this.props.t;return n().createElement(b.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},l("common.ok"))},this.state={playerConfig:Ce(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:u.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:u.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:u.t("component.randomAlertTip"),randomAlertModal:{title:u.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,Le.UI)("CL_VIDEO_BAIYING_COM_CN")}},u.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(u){var p=typeof u.resourceInfo.source!="string"?JSON.stringify(u.resourceInfo.source):u.resourceInfo.source,l=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;p!==l&&l!==""&&this.initInfo()}componentWillUnmount(){var u=this.props.mode;u==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var u=this.state,p=u.playerConfig,l=u.showPrivateVodError,o=u.dialogVisible,v=u.dialogModal,I=u.promptMessage,x=u.randomAlertDialogVisible,j=u.randomAlertModal,Z=u.randomAlertTip,ne=u.encryptedSwitch,re=this.props,le=re.resourceInfo,J=re.t,te=ne==="OPEN"?ie:ue;return n().createElement(L.Fragment,null,n().createElement(te,(0,N.Z)({ref:this.getPlayInstance},le,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:p,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),n().createElement(ke.ZP,(0,N.Z)({visible:o},v,{footer:this.renderFooter()}),n().createElement("div",{className:"video-business-prompt"},I)),n().createElement(ke.ZP,(0,N.Z)({visible:x},j,{footer:this.renderRandomFooter()}),n().createElement("div",{className:"video-player-container__prompt"},Z)),l&&n().createElement("div",{className:"video-business-vod-error"},J("privateCloud.docReadError")),n().createElement(we.Z,{scenes:"video"}))}}var Qe=(0,E.$j)(Ve,null,null,{forwardRef:!0})((0,m.Z)("translation",{withRef:!0})(be)),He=e(94184),Ie=e.n(He),Ye=e(84874),Be=Oe=>({userInfo:Oe.user}),Xe={getPravateDocUrl:G.ZP.localStorage.getPravateDocUrl};function We(Oe){return JSON.stringify(Oe,(u,p)=>(typeof p=="function"&&(p=p.toString()),p))}function st(Oe){var u=parseInt(parseInt(Oe,10)/60,10),p=parseInt(parseInt(Oe,10)%60,10);return u<10&&(u="0".concat(u)),p<10&&(p="0".concat(p)),"".concat(u,":").concat(p)}class rt extends L.Component{constructor(u){var p;super(u);p=this,this.messageFun=l=>{var o=this.props,v=o.docType,I=o.progress,x=o.studyTimeLimit,j=o.studyTime,Z=this.state,ne=Z.jumpPageTag,re=Z.totalTime,le=Z.timeRemaining,J=this.state.previewDocData,te={};try{te=JSON.parse(l.data)}catch(Ee){return}switch(te.action){case"preview.ready":this.initDocData();break;case"preview.meta":J.totalPage=te.data.pc||1,J.currentPage=1,this.setState({previewDocData:J},()=>{this.reportStatusInterval()}),x>0?(this.saveProgress(I,j||"1",te.data.pc||1),this.setState({showCountDownContainer:!0})):v==="xlsx"||v==="xls"||J.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(I,j||"1",te.data.pc||1),x>0&&I<100?(this.setState({showCountDown:!0}),v==="xlsx"||v==="xls"?re=x:re=x*te.data.pc,le=parseInt(re*(1-I/100),10),this.setState({timeRemaining:le,totalTime:re},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(ne){ne=!1,this.setState({jumpPageTag:ne});return}J.currentPage=te.data.pageIndex+1,this.setState({previewDocData:J}),x||this.saveProgress(Math.ceil(J.currentPage/J.totalPage*100),J.currentPage,J.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":D.default.error(te.data.result);break;default:break}},this.initDocData=(0,M.Z)(c().mark(function l(){var o,v,I,x,j,Z,ne,re,le,J,te,Ee,Ue,Re;return c().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(p.setState({isShowPrivateError:!1}),o=p.props,v=o.docType,I=o.userInfo,x=o.documentWatermarkSettings,j=o.storageType,Z=o.privateDocId,ne=I.name,re=I.jobNumber,le=I.position,J="",te={},j!=="ALIBABA_PRIVATE"){q.next=18;break}return q.prev=6,Ee=Xe.getPravateDocUrl(Z),q.next=10,B.WY.get({url:Ee});case 10:Ue=q.sent,Re=Ue.data,Re.code===0?te=Re.data||{}:p.setState({isShowPrivateError:!0}),q.next=18;break;case 15:q.prev=15,q.t0=q.catch(6),p.setState({isShowPrivateError:!0});case 18:if(x.indexOf("name")>-1&&(J="".concat(J+ne," ")),x.indexOf("position")>-1&&(J="".concat(J+le," ")),x.indexOf("jobnumber")>-1&&(J+=re),J.length>0?window.sendMessage("preview.init",(0,V.Z)({wmType:1,wmValue:J,wmColor:"rgba(192, 192, 192, 0.4)"},te)):window.sendMessage("preview.init",(0,V.Z)({},te)),v!=="xlsx"&&v!=="ppt"&&v!=="pptx"&&v!=="xls"?p.setState({pageOperateContainerVisible:!0}):p.setState({pageOperateContainerVisible:!1}),!(v==="ppt"||v==="pptx")){q.next=29;break}q.t1=window,q.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},q.t1.sendMessage.call(q.t1,"setConfig",q.t2),q.next=32;break;case 29:q.t3=window,q.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},q.t3.sendMessage.call(q.t3,"setConfig",q.t4);case 32:case"end":return q.stop()}},l,null,[[6,15]])})),this.handleJumpPage=l=>{var o=this.state.previewDocData;o.currentPage=l,this.setState({jumpPageTag:!0,previewDocData:o});var v=l/o.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(v),l,o.totalPage),window.sendMessage("logic.toPage",{pageIndex:l-1})},this.redirectPage=()=>{var l=this.props,o=l.studyTimeLimit,v=l.studyTime,I=0;o===0&&(I=v-1>0?v-1:0),window.sendMessage("logic.toPage",{pageIndex:I})},this.docCountDown=()=>{var l=this.state.timeRemaining,o=this.state,v=o.totalTime,I=o.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{l-=1,this.setState({timeRemaining:l}),l<1&&(this.saveProgress(100,0,I.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var x=(v-l)/v*100;l<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(x),l,I.totalPage)},2e4)},this.saveProgress=(l,o,v)=>{var I=this.props.onSaveProgress;I&&I(l,o,v)},this.reportStatusInterval=()=>{var l=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var o=this.state.previewDocData.currentPage;l&&l({currentPage:o})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=l=>{this.docReader=l},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(u,p)=>{var l=this.docReader.contentWindow;l.postMessage(We({action:u,data:p}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var u=this.props,p=u.t,l=u.storageType,o=u.privateDocId,v=this.props.aliUrl,I=this.state,x=I.previewDocData,j=I.pageOperateContainerVisible,Z=I.timeRemaining,ne=I.showCountDown,re=I.showCountDownContainer,le=I.showPageOperateContainer,J=I.isShowPrivateError;return l==="ALIBABA_PRIVATE"&&(v="https://preview.imm.aliyuncs.com/index.html?docId=".concat(o)),n().createElement("div",{className:"doc-reader-container"},n().createElement("div",{className:"ali-doc-container",style:{paddingBottom:j?"56px":"0"}},n().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:v,id:"aliyunPreview",ref:this.dealPreviewRef}),re?n().createElement("div",{className:"ali-doc-container__countdown"},ne?n().createElement("div",null,n().createElement(Ye.Z,{iconClass:"iconf-tipe",size:"16px"}),p("component.docStillStudy"),n().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",st(Z)," "),p("component.canDone")):n().createElement("div",null,n().createElement(Ye.Z,{iconClass:"iconf-tipe",size:"16px"}),p("component.docHasFinish"))):null,j?n().createElement("div",{className:"ali-doc__operate"},n().createElement("div",{className:Ie()(["ali-doc__operate__content",le?"":"ali-doc__operate__hide-content"])},n().createElement("div",{className:"ali-doc__operate__pagination"},n().createElement("div",{className:"ali-doc__operate__pagination__pages"},x.currentPage," / ",x.totalPage),n().createElement("div",{className:"ali-doc__operate__pagination__toggle"},n().createElement("div",{className:"ali-doc__operate__pagination__choose"},n().createElement("span",null,p("component.choosePage"),n().createElement(Ye.Z,{iconClass:"iconf-arrow-under",size:"14px"})),n().createElement("div",{className:"ali-doc__operate__page-list-container"},n().createElement("div",{className:"ali-doc__operate__choose-page"},p("component.fastChoosePage")),n().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:x.totalPage})).map((te,Ee)=>n().createElement("li",{key:te,onClick:()=>this.handleJumpPage(Ee+1)},Ee+1))))),n().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},p("common.collapse"))))),n().createElement("div",{className:Ie()("ali-doc__operate__unfold",le?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},p("common.expand"))):null,J&&n().createElement("div",{className:"ali-doc__error"},p("privateCloud.docReadError"))),n().createElement(we.Z,{scenes:"document"}))}}rt.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var nt=(0,E.$j)(Be)((0,m.Z)()(rt)),yt=Oe=>({userInfo:Oe.user}),dt="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),ut="".concat("https://doc.coolcollege.cn");class pt extends n().Component{constructor(u){var p;super(u);p=this,this.onSaveProgress=(l,o,v)=>{var I=this.props,x=I.mode,j=I.studyInfo,Z=I.userInfo,ne=Z.enterpriseId,re=Z.id;x==="learn"&&(0,U.sH)({studyInfo:j,progress:l,page_count:v,recent_start:o,enterpriseId:ne,userId:re}).then(le=>{le&&le.data&&(0,Q.Z)(le.data.integral_info||"")})},this.messageFun=function(){var l=(0,M.Z)(c().mark(function o(v){var I,x,j,Z,ne,re;return c().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(v.data!=="local-resource"){J.next=9;break}if(I=p.props.resourceInfo,x=I.storageType,j=I.playId,!(x&&x==="LOCAL")){J.next=9;break}return J.next=6,pe(j);case 6:Z=J.sent,ne=Z.data,ne.code===0&&(re=document.getElementById("local-resource-box"),re.contentWindow.postMessage({msg:"local-auth-key",authKey:ne.data.auth_key},"*"));case 9:case"end":return J.stop()}},o)}));return function(o){return l.apply(this,arguments)}}(),this.getInfoFromSettings=(0,M.Z)(c().mark(function l(){var o,v,I;return c().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,U.Gw)();case 2:o=j.sent,v=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],I=(0,S.RG)(o,v),p.setState(I,()=>{p.initDocPage(p.props)});case 6:case"end":return j.stop()}},l)})),this.initDocPage=(0,M.Z)(c().mark(function l(){var o,v,I,x,j,Z,ne,re,le,J,te,Ee,Ue,Re,Ze,q,T,y,s,r,P,h,a,k,X,ee,ge,ae,_e,De,Te,me,xe,$e,et=arguments;return c().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(o=et.length>0&&et[0]!==void 0?et[0]:{},v=o.resourceInfo,I=o.mode,x=o.studyInfo,j=o.userInfo,Z=p.state.documentPlayerMode,ne=v.docType,re=v.docTitle,le=v.url,J=v.studyTimeLimit,te=v.studyTime,Ee=v.aliUrl,Ue=v.progress,Re=v.storageType,Ze=v.playId,q=x.studyType,T=x.courseId,y=x.studyId,s=x.resourceId,r=j.enterpriseId,P=j.id,h=j.isLogin,a=j.token,k=Z==="compat"&&Ee.indexOf("preview.imm.aliyun")>-1||Re==="ALIBABA_PRIVATE",!k){ve.next=11;break}p.setState({showAliReader:!0}),ve.next=31;break;case 11:if(X=(0,U.sH)({enterpriseId:r,userId:P,token:a,studyInfo:x},!0),ee=q==="studyTask"?2:1,ge=G.ZP.SaveProgress.reportStatusInterval(x),ae={isSaveProgress:h&&I==="learn"&&X,isSaveRecord:!1,access_token:a,userId:P,hostUrl:dt,courseId:T,resourceId:s,courseType:1,planId:y,studyTimeLimit:J,studyTime:te,saveProgressUrl:X,type:"eapp",progress:Ue,saveRecordProgressUrl:ge,actionType:ee},!(Re&&Re==="LOCAL")){ve.next=26;break}return ve.next=18,pe(Ze);case 18:if(_e=ve.sent,De=_e.data,De.code!==0){ve.next=25;break}ae.auth_key=De.data.auth_key,ae.url=le,ve.next=26;break;case 25:return ve.abrupt("return");case 26:Te=JSON.stringify(ae),me="".concat(re,".").concat(ne).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),xe="".concat(ut,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(Te),"&furl=").concat(le,"?attname=").concat(me),Re&&Re==="LOCAL"&&($e="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),xe="".concat($e,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(Te),"&furl=").concat(le,"?attname=").concat(me)),p.setState({encodeUrl:xe});case 31:case"end":return ve.stop()}},l)})),this.handleReportStatusInterval=l=>{var o=l.currentPage,v=this.props,I=v.resourceInfo,x=v.mode,j=v.studyInfo,Z=v.userInfo,ne=I.type,re=j.courseId,le=j.studyId,J=j.resourceId,te=Z.enterpriseId,Ee=Z.id,Ue=Z.isLogin,Re="",Ze="",q=0,T=!1;switch(ne){case"enterprise":q=1,T=!0;break;case"study":Re=le,q=2,T=!0;break;case"project":Ze=le,q=1,T=!0;break;default:break}if(!(!T||!Ue)){var y={plan_id:Re,enterprise_id:te,user_id:Ee,course_id:re,project_course_id:Ze,resource_id:J,current_page:o,action_type:q,send_time:Date.parse(new Date)};x==="learn"&&(0,U.Xc)(j,y)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(u){this.initDocPage(u)}render(){var u=this.props.resourceInfo,p=this.state,l=p.encodeUrl,o=p.documentWatermarkSettings,v=p.showAliReader,I=u.docType,x=u.type,j=u.studyTimeLimit,Z=u.studyTime,ne=u.aliUrl,re=u.progress,le=u.storageType,J=u.playId;return v?n().createElement(nt,{privateDocId:J,storageType:le,aliUrl:ne,docType:I,progress:re,studyTime:Z,studyTimeLimit:j,documentWatermarkSettings:o,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:x}):n().createElement("div",{className:"doc-reader-container"},n().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:l,frameBorder:"0",allowFullScreen:!0}),n().createElement(we.Z,{scenes:"document"}))}}var at=(0,E.$j)(yt)(pt),Ct=e(38979),ht=e(90706),Et=e(12968),it=e(44208),Fe=e(60667),mt=Oe=>({userInfo:Oe.user});class lt extends n().Component{constructor(){var u;super(...arguments);u=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var p=this.props,l=p.studyInfo,o=p.mode,v=p.userInfo,I=v.enterpriseId,x=v.id;o==="learn"&&(0,S.Gp)({studyInfo:l,enterpriseId:I,userId:x})},this.getInfoFromSettings=(0,M.Z)(c().mark(function p(){var l,o,v;return c().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,U.Gw)();case 2:l=x.sent,o=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],v=(0,S.RG)(l,o),u.setState(v,()=>{u.renderWatermark()});case 6:case"end":return x.stop()}},p)})),this.renderWatermark=()=>{var p=this.props.userInfo,l=this.state.imageWatermark,o=p.name,v=p.unionid,I=p.sourceType,x=p.jobNumber,j=p.position,Z=[];l.indexOf("name")>-1&&Z.push(n().createElement(Fe.Z,{dataType:"userName",value:v,name:o,type:I})),l.indexOf("position")>-1&&Z.push(n().createElement("span",null,j)),l.indexOf("jobnumber")>-1&&Z.push(n().createElement("span",null,x)),l.length>0&&this.setState({watermark:Z.map((ne,re)=>n().createElement("span",{key:re},ne))})},this.handleError=p=>{var l=this.props.onError;l&&l(p)},this.getImageUrl=(0,M.Z)(c().mark(function p(){var l,o,v,I,x,j,Z,ne,re,le;return c().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(l=u.props,o=l.resourceInfo,v=l.t,I=o.playId,x=o.url,j=o.storageType,Z=x,!j){te.next=21;break}if(j!=="ALIBABA_PRIVATE"){te.next=15;break}return te.next=7,(0,U.J7)(I);case 7:if(ne=te.sent,!ne){te.next=12;break}Z=ne,te.next=13;break;case 12:return te.abrupt("return",D.default.info(v("privateCloud.docReadError")));case 13:te.next=21;break;case 15:if(j!=="LOCAL"){te.next=21;break}return te.next=18,pe(I);case 18:re=te.sent,le=re.data,le.code===0&&(Z="".concat(x,"?auth_key=").concat(le.data.auth_key));case 21:u.setState({imageUrl:[Z]},()=>{var Ee=u.state.imageUrl,Ue="image-business",Re=document.querySelectorAll(".".concat(Ue,"-image img"));Re.forEach((Ze,q)=>{Ze.onerror=()=>{u.handleError(Ee[q])}})});case 22:case"end":return te.stop()}},p)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var u="image-business",p=this.props.resourceInfo,l=p.preview,o=l===void 0?!1:l,v=this.state,I=v.watermark,x=v.imageUrl;return n().createElement("div",{className:u},n().createElement(we.Z,{scenes:"image"}),n().createElement(ht.Z,{className:"".concat(u,"-carousel")},x.map((j,Z)=>n().createElement("div",{className:"".concat(u,"-image"),key:Z.toString()},n().createElement(it.Z,{src:j,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:o})))))}}lt.defaultProps={prefixCls:"watch-image-page"};var vt=(0,E.$j)(mt)((0,m.Z)()(lt)),Ge=Oe=>({userInfo:Oe.user});class de extends n().Component{constructor(){var u;super(...arguments);u=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,M.Z)(c().mark(function p(){var l,o,v;return c().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,U.Gw)();case 2:l=x.sent,o=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],v=(0,S.RG)(l,o),u.setState(v,()=>{u.renderWatermark()});case 6:case"end":return x.stop()}},p)})),this.renderWatermark=()=>{var p=this.props.userInfo,l=this.state.htmlWatermark,o=p.name,v=p.unionid,I=p.sourceType,x=p.jobNumber,j=p.position,Z=[];l.indexOf("name")>-1&&Z.push(n().createElement(Fe.Z,{dataType:"userName",value:v,name:o,type:I})),l.indexOf("position")>-1&&Z.push(n().createElement("span",null,j)),l.indexOf("jobnumber")>-1&&Z.push(n().createElement("span",null,x)),l.length>0&&this.setState({watermark:Z.map((ne,re)=>n().createElement("span",{key:re},ne))})},this.saveProgress=()=>{var p=this.props,l=p.studyInfo,o=p.mode,v=p.userInfo,I=v.enterpriseId,x=v.id;o==="learn"&&(0,S.Gp)({studyInfo:l,enterpriseId:I,userId:x})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var u="html-business",p=this.props.resourceInfo,l=p.url,o=this.state.watermark;return n().createElement("div",{className:u},n().createElement("div",{className:"".concat(u,"__html-watermark")},o),n().createElement("iframe",{title:"html",className:"".concat(u,"_iframe"),src:l}))}}var Y=(0,E.$j)(Ge)((0,m.Z)()(de)),_=e(57068),H=e(1164),he=Oe=>({userInfo:Oe.user});class Pe extends n().PureComponent{constructor(){super(...arguments);this.getHost=u=>{var p=u.split("//"),l=p[1].split("/");return[p[0],l[0]].join("//")},this.getScormUrl=()=>{var u=this.props,p=u.studyInfo,l=u.mode,o=u.userInfo,v=u.resourceInfo,I=u.from,x=o.enterpriseId,j=o.id,Z=v.url,ne=this.getHost(Z);if(l==="learn"){var re=(0,V.Z)({userId:j,enterpriseId:x,access_token:localStorage.token,from:I,scormUrl:encodeURIComponent(Z),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},p);return"".concat(ne).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(_.stringify(re))}return"".concat(ne,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(Z))},this.handleOpenScormLink=u=>{H.Z.targetTo({path:u,isExternalLink:!0})}}render(){var u=this.props.t,p="scorm-business",l=this.getScormUrl(),o=(0,Le.UI)("SCORM_EXTERNAL_WATCH");return n().createElement("div",{className:p},o?n().createElement("div",{className:"".concat(p,"_scorm")},n().createElement("img",{className:"".concat(p,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),n().createElement("h5",null,u("resourcePlay.scormTip")),n().createElement(b.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(l)},u("resourceLibrary.h5LinkPlayButton"))):n().createElement("iframe",{title:"scorm",className:"".concat(p,"_iframe"),src:l}))}}var Se=(0,E.$j)(he)((0,m.Z)()(Pe));class je extends n().Component{render(){var u=this.props,p=u.visible,l=u.title,o=u.onCancel,v=u.t,I=n().createElement("span",null,l);return n().createElement(ke.ZP,{visible:p,title:I,onCancel:o,footer:null},n().createElement("div",{className:"ban-preview"},n().createElement("div",{className:"ban-preview-center"},n().createElement("img",{src:C(),alt:"picture"}),n().createElement("h2",null,v("localStorage.tip")),n().createElement("p",null,v("localStorage.banPreview"))),n().createElement("hr",null),n().createElement(b.Z,{type:"primary",className:"know",onClick:o},v("localStorage.onKnow"))))}}var Je=(0,m.Z)()(je);class qe extends L.Component{constructor(){var u;super(...arguments);u=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=p=>{var l=this.props.previewInfo,o=l.onCancel;this.onCancel(),o(p)},this.onGetVideoBusiness=p=>{var l=this.props.onRef,o=l===void 0?()=>{}:l;this.videoBusiness=p,o(p)},this.onFullScreen=()=>{var p=this.state.fullScreen;this.setState({fullScreen:!p})},this.handleJudgeNetwork=(0,M.Z)(c().mark(function p(){var l,o,v,I,x,j,Z,ne,re,le,J,te=arguments;return c().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(l=te.length>0&&te[0]!==void 0?te[0]:null,o=u.props,v=o.resourceInfo,I=o.watchType,x=v.storageType,j=v.playId,Z=v.originUrl,ne=I==="image"||I==="video"||I==="doc",re=null,l?re=l:Z?re=Z:re=v.url,!(ne&&re&&j&&x&&x==="LOCAL")){Ue.next=22;break}return Ue.prev=7,Ue.next=10,(0,U.NY)(j);case 10:return le=Ue.sent,Ue.next=13,(0,U.Hy)(re,le);case 13:J=Ue.sent,J?u.setState({showBan:"no"}):u.setState({showBan:"yes"}),Ue.next=20;break;case 17:Ue.prev=17,Ue.t0=Ue.catch(7),u.setState({showBan:"yes"});case 20:Ue.next=23;break;case 22:u.setState({showBan:"no"});case 23:case"end":return Ue.stop()}},p,null,[[7,17]])})),this.renderOuter=()=>{var p=this.props,l=p.prefixCls,o=p.watchType,v=p.onCurrentTime,I=v===void 0?()=>{}:v;return n().createElement("div",{className:"".concat(l,"-outer")},o==="video"&&n().createElement(Qe,(0,N.Z)({onCurrentTime:I,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),o==="doc"&&n().createElement(at,this.props),o==="image"&&n().createElement(vt,(0,N.Z)({onError:this.handleJudgeNetwork},this.props)),o==="html"&&n().createElement(Y,this.props),o==="scorm"&&n().createElement(Se,this.props))},this.renderFooter=()=>{var p=this.props,l=p.resourceInfo.storageType,o=p.t,v=this.state.showBan,I=v!==""&&v==="yes";return l&&l!=="PUBLIC_CLOUD"&&I?n().createElement(b.Z,{type:"primary",className:"know",onClick:this.onCancelModel},o("localStorage.onKnow")):null}}componentDidMount(){var u=this.props.mode;u==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(u){u.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var u=this.state,p=u.showBan,l=u.fullScreen,o=this.props,v=o.mode,I=o.previewWay,x=o.previewInfo,j=o.prefixCls,Z=o.t,ne=o.showEnlarge,re=o.footer,le=re===void 0?null:re,J=x.visible,te=x.destroyOnClose,Ee=x.title,Ue=p!==""&&p==="yes",Re=p!==""&&p==="no";return n().createElement(L.Fragment,null,v==="preview"&&I==="popups"&&n().createElement(ke.ZP,{destroyOnClose:te,visible:J,title:Ee,onCancel:this.onCancelModel,footer:le||this.renderFooter(),wrapClassName:"".concat(j,"-resource ").concat(l?"".concat(j,"-full"):"")},ne&&n().createElement("div",{className:"".concat(j,"-resource-out-icon"),onClick:this.onFullScreen},l?n().createElement(d.Z,{className:"".concat(j,"-resource-icon")}):n().createElement(f.Z,{className:"".concat(j,"-resource-icon")})),n().createElement("div",{className:"".concat(j,"-inner")},!J&&n().createElement(O.Z,{size:"large"}),J&&Re&&this.renderOuter(),Ue&&n().createElement(w,null))),(v==="learn"||I==="page")&&Re&&this.renderOuter(),(v==="learn"||I==="page")&&n().createElement(Je,{visible:Ue,title:Ee||Z("questionn.warmHint"),onCancel:this.onCancel}))}}qe.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var ot=(0,m.Z)("translation",{withRef:!0})(qe)},41225:function(Ne,oe,e){"use strict";e.d(oe,{Hy:function(){return M},NY:function(){return R},Gw:function(){return c},sH:function(){return d},BR:function(){return L},qp:function(){return f},Xc:function(){return m},J7:function(){return n}});var F=e(57361),O=e(9754),$=e.n(O),b=e(10237),N=e(37055),M=function(){var g=(0,F.Z)($().mark(function C(){var t,w,V,A,D,E,S,U=arguments;return $().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=U.length>0&&U[0]!==void 0?U[0]:"",w=U.length>1&&U[1]!==void 0?U[1]:"",V="",t.startsWith("http")?(A=t.split("//")[1].trim(),D=A.split("/")[0],V="https://".concat(D,"/cms/ticket")):(E=t.split("/")[0],V="https://".concat(E,"/cms/ticket")),i.prev=4,i.next=7,b.ZQ.get({url:V,params:{ticket:w}});case 7:if(S=i.sent,!(S.status===200||S.status===403)){i.next=10;break}return i.abrupt("return",Promise.resolve(!0));case 10:return i.abrupt("return",Promise.resolve(!1));case 13:return i.prev=13,i.t0=i.catch(4),i.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return i.stop()}},C,null,[[4,13]])}));return function(){return g.apply(this,arguments)}}(),R=function(){var g=(0,F.Z)($().mark(function C(t){var w,V;return $().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,b.ZQ.get({url:N.ZP.local.getTicket(t)});case 2:if(w=D.sent,V=w.data,V.code!==0){D.next=6;break}return D.abrupt("return",Promise.resolve(V.data.ticket));case 6:return D.abrupt("return",Promise.resolve(""));case 7:case"end":return D.stop()}},C)}));return function(t){return g.apply(this,arguments)}}(),c=function(){var g=(0,F.Z)($().mark(function C(){var t;return $().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,b.WY.get({url:N.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return t=V.sent,V.abrupt("return",t.data.list);case 4:case"end":return V.stop()}},C)}));return function(){return g.apply(this,arguments)}}(),L=function(){var g=(0,F.Z)($().mark(function C(t){var w,V,A;return $().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,b.WY.get({url:N.ZP.localStorage.getPravateVideoUrl(t)});case 2:if(w=E.sent,w.data.code!==0){E.next=6;break}return V=w.data.data.videoPlayInfo,A=V===void 0?"":V,E.abrupt("return",A);case 6:return E.abrupt("return","");case 7:case"end":return E.stop()}},C)}));return function(t){return g.apply(this,arguments)}}(),n=function(){var g=(0,F.Z)($().mark(function C(t){var w,V,A;return $().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return w=N.ZP.localStorage.getPravateDocUrl(t),E.prev=1,E.next=4,b.WY.get({url:w});case 4:if(V=E.sent,A=V.data,!(A.code===0&&A.data)){E.next=8;break}return E.abrupt("return",A.data.docResourceDownloadUrl||"");case 8:return E.abrupt("return","");case 11:return E.prev=11,E.t0=E.catch(1),E.abrupt("return","");case 14:case"end":return E.stop()}},C,null,[[1,11]])}));return function(t){return g.apply(this,arguments)}}(),d=function(C){var t=C.studyInfo,w=C.progress,V=C.recent_start,A=C.page_count,D=C.enterpriseId,E=C.userId,S=C.token,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,B,i=t.studyType;if(i==="studyTask"&&(B=N.ZP.SaveProgress.studySaveProgress(t)),(i==="course"||i==="enterprise")&&(B=N.ZP.SaveProgress.enterpriseCourseSaveProgress(t)),i==="studyProject"&&(B=N.ZP.SaveProgress.projectSaveProgress(t)),i==="platform"&&(B="".concat(N.ZP.SaveProgress.platformCourseSaveProgress(t))),(U||i==="platform")&&(B+="?enterprise_id=".concat(D,"&user_id=").concat(E)),U)return B+="&access_token=".concat(S||localStorage.getItem("token")),B;var z={progress:w,recent_start:V,tempTime:Date.parse(new Date)};return A&&(z.page_count=A),t.evaluationId&&(z.evaluation_id=t.evaluationId),b.WY.post({url:B,data:z})},f=g=>{var C=g.popupId,t=g.planId,w=g.resourceId,V=g.type;return b.WY.post({url:N.ZP.TaskStudyRecord.setRandomPopupRecord(t),data:{course_id:w,terminal_type:"PC",popup_id:C,type:V}})},m=(g,C)=>{var t=N.ZP.SaveProgress.reportStatusInterval(g);return b.WY.post({url:t,data:C})}},21594:function(Ne,oe,e){"use strict";e.d(oe,{pu:function(){return N},RG:function(){return M},Gp:function(){return R},O8:function(){return c}});var F=e(88986),O=e(69164),$=e(38642),b=e(41225),N=L=>{var n="";switch(L){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":n="studyTask";break;case"enterprise":n="enterprise";break;case"courseProject":n="studyProject";break;case"platform":case"purchased":n="platform";break;default:break}return n},M=(L,n)=>{var d={};return n.forEach(f=>{var m=L.find(V=>V.type===f.type);if(m)if(f.type==="document_duration_limit"){var g=m.action_list,C=g.find(V=>V.type==="random_popup_verification");!(0,$.UI)("RANDOM_POPUP_VERIFY")||!C?d[f.name]="CLOSE":d[f.name]=C.param.checked==="true"?"OPEN":"CLOSE"}else if(f.type==="document_player"){var t=JSON.parse(m.actions);t.forEach(V=>{V.param.checked==="true"&&(d[f.name]=V.type)})}else if(f.type==="dynamic_watermark"){var w=m.action_list;w.forEach(V=>{V.type===f.resourceType&&V.param.checked==="true"&&(d[f.name]=V.param.comment)})}else d[f.name]=m.switch_status}),d},R=L=>{(0,b.sH)((0,F.Z)({progress:100,recent_start:1},L)).then(n=>{n&&n.data&&(0,O.Z)(n.data.integral_info||"")})},c=L=>{var n=document.createElement("div");return n.innerHTML=L,n.childNodes[0]}},56130:function(Ne,oe,e){"use strict";var F=e(62029),O=e(12924),$=e.n(O),b=e(28216),N=e(37055),M=e(10237),R=e(44881),c=n=>{var d=n.studyProject.classify;return{classify:d}},L=n=>{var d=(0,b.$j)(c)(class extends $().Component{constructor(m){var g;super(m);g=this,this.updateData=C=>{var t=this.props.dispatch,w=C||[...this.state.classify];this.setState({classify:w}),t({type:"studyProject/updateClassify",classify:w})},this.getClassify=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=g.props,w=t.unclassified,V=w===void 0?!1:w,A=t.parent_id,D=A===void 0?0:A,E=t.auth_type,S=E===void 0?"query":E,U=N.ZP.Classify.getResourceClassify();M.WY.get({url:U,params:{include_unclassified:V,parent_id:D,auth_type:S,name:C}}).then(B=>{!B.data||g.updateData((0,R.P)(B.data.list,S))})},this.loadData=C=>{var t=this.props,w=t.unclassified,V=w===void 0?"":w,A=t.auth_type,D=A===void 0?"query":A,E=t.filter,S=t.dispatch,U=t.type,B=U===void 0?"":U;if(console.warn(D,"auth_type"),Array.isArray(C)){var i=C[C.length-1];i.loading=!0,setTimeout(()=>{var z=N.ZP.Classify.getResourceClassify(),W=i.id;M.WY.get({url:z,params:{include_unclassified:V,parent_id:W,auth_type:D}}).then(ie=>{!ie.data||i.children||(i.loading=!1,i.children=(0,R.P)(ie.data.list,D),this.updateData())})},1e3)}else return new Promise(z=>{var W=C.id;setTimeout(()=>{var ie=N.ZP.Classify.getResourceClassify(),se=W;M.WY.get({url:ie,params:{include_unclassified:V,parent_id:se,auth_type:D}}).then(Ce=>{if(!Ce.data){z();return}if(E&&Ce.data.list.length===0){var fe=this.state.classify.map(ce=>(E&&W===ce.id&&(ce.isLeaf=!0),ce));this.setState({classify:fe}),S({type:"studyProject/updateClassify",classify:fe});return}var ue=(0,R.P)(Ce.data.list,D);if(B==="tree"){C.dataRef.children=ue,this.setState({classify:[...this.state.classify]}),S({type:"studyProject/updateClassify",classify:[...this.state.classify]});return}this.updateData(this.state.classify.concat(ue))}),z()},300)})},this.state={classify:[]}}componentDidMount(){this.getClassify()}render(){return $().createElement(n,(0,F.Z)({classify:this.props.classify,refresh:this.getClassify,loadData:this.loadData},this.props))}});return d};oe.Z=L},51975:function(Ne,oe,e){"use strict";e.d(oe,{l:function(){return b}});var F=e(62029),O=e(12924),$=e.n(O),b=(N,M)=>function(c){return $().createElement(N.Consumer,null,L=>$().createElement(M,(0,F.Z)({},c,{contextData:L})))}},84009:function(Ne,oe,e){"use strict";var F=e(62029),O=e(12924),$=e.n(O),b=e(11092),N=e.n(b),M=e(6793),R=()=>c=>class extends $().Component{constructor(){super(...arguments);this.state={initTableClassName:""},this.handleTableSticky=()=>{var n=(0,b.findDOMNode)(this.pageRef);this.pageRef.tableRef.offsetTop+46<=n.parentNode.scrollTop?this.pageRef.tableRef.className.indexOf("fixed-table-thead")===-1&&(this.pageRef.tableRef.className="".concat(this.pageRef.tableRef.className," fixed-table-thead"),this.resetThTdWidth()):this.pageRef.tableRef.offsetTop>n.parentNode.scrollTop&&(this.pageRef.tableRef.className=this.state.initTableClassName)},this.resetThTdWidth=()=>{var n=this.pageRef.tableRef.getElementsByTagName("thead")[0];n.style.width="".concat(this.pageRef.tableRef.offsetWidth,"px");var d=n.childNodes[0];n.childNodes[1]&&(n.childNodes[1]="".concat(this.pageRef.tableRef.offsetWidth,"px")),d.style.width="".concat(this.pageRef.tableRef.offsetWidth,"px");var f=this.pageRef.tableRef.getElementsByTagName("tbody")[0].childNodes,m=!1;if(f&&f.length){try{var g=f[0].getAttribute("class");g==="ant-table-placeholder"&&(m=!0)}catch(w){console.log(w)}if(!m){var C=f[0].childNodes;if(C&&C.length){var t=C&&C.length&&Array.prototype.slice.call(C).map(w=>w.offsetWidth);d.childNodes&&d.childNodes.length&&Array.prototype.slice.call(d.childNodes).forEach((w,V)=>{w.style.width="".concat(t[V],"px")}),t.map(w=>w)}}}}}componentDidMount(){var n=(0,b.findDOMNode)(this.pageRef);this.setState({initTableClassName:this.pageRef.tableRef.className}),n.parentNode.addEventListener("scroll",this.handleTableSticky),window.addEventListener("resize",this.resetThTdWidth)}componentDidUpdate(){(0,M.P2)(this.handleTableSticky,500)()}componentWillUnmount(){var n=(0,b.findDOMNode)(this.pageRef);n.parentNode.removeEventListener("scroll",this.handleTableSticky),window.removeEventListener("resize",this.resetThTdWidth)}render(){return $().createElement(c,(0,F.Z)({ref:n=>this.pageRef=n},this.props))}};oe.Z=R},11449:function(Ne,oe,e){"use strict";e.d(oe,{Z:function(){return ie}});var F=e(88986),O=e(33565),$=e(12924),b=e.n($),N=e(3115),M=e(49111),R=e(19650),c=e(62029),L=e(57663),n=e(71577),d=e(91768),f=e(28216),m=e(37055),g=e(10237);function C(se){var Ce=m.ZP.getHelpContentByMenuKey(),fe={key:se};return g.WY.get({url:Ce,params:fe})}var t=e(74228),w=e.n(t),V=e(1164),A=e(76466),D=e(38642);class E extends b().Component{constructor(Ce){var fe;super(Ce);fe=this,this.getHelpContentByMenuKey=()=>{var ue=this.props.defaultMenuKey;C(ue).then(ce=>{var K=ce.data,Q=K.help_url,G=K.video_url;this.setState({videoUrl:G,helpUrl:Q})})},this.handleOpenHelpUrl=ue=>{if((0,D.ve)()){window.open(ue,"_blank");return}V.Z.targetTo({path:ue,isExternalLink:!0})},this.handleOpenVideo=function(ue){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fe.props.t("helpCenter.video");fe.setState(K=>({resourcePlayInfo:(0,F.Z)((0,F.Z)({},K.resourcePlayInfo),{},{resourceInfo:{originUrl:ue,source:{FD:ue,OD:ue},contentType:"mp4"}}),previewInfo:(0,F.Z)((0,F.Z)({},K.previewInfo),{},{title:ce,visible:!0,onCancel:fe.handleCancelPreview})}))},this.handleCancelPreview=()=>{var ue=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,F.Z)((0,F.Z)({},ue),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:Ce.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var Ce=this.state,fe=Ce.helpUrl,ue=Ce.resourcePlayInfo,ce=Ce.previewInfo,K=Ce.videoUrl,Q=this.props.t;return b().createElement("div",{className:w().helpCenter},K&&b().createElement(n.Z,{type:"link",className:w()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(K)},Q("helpCenter.video")),fe&&b().createElement(n.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(fe)},Q("helpCenter.tutorial")),b().createElement(A.Z,(0,c.Z)({},ue,{previewInfo:ce})))}}var S=se=>({defaultMenuKey:se.currentRoute.menuKey});E.defaultProps={defaultMenuKey:""};var U=(0,f.$j)(S)((0,d.Z)()(E));function B(se){var Ce=se.extra,fe=localStorage.getItem("dingPersonnel"),ue=sessionStorage.getItem("dingPersonnel");return b().createElement(R.Z,null,Ce,fe!=="dingPersonnel"&&ue!=="dingPersonnel"&&(0,D.eY)("COMMONEXTRA_HELP_CENTER")&&b().createElement(U,null))}var i=B,z=e(4408);function W(se){var Ce=(0,$.useState)({helpCenter:(0,D.eY)("HEAD_HELP_CENTER_BUT")}),fe=(0,O.Z)(Ce,1),ue=fe[0],ce=se.pageContainerParams,K=ce===void 0?{}:ce,Q=se.noPadding,G=Q===void 0?!1:Q,pe=se.isPersonal,ye=pe===void 0?!1:pe,ke=se.pageTitle,Le=se.className,Ae=Le===void 0?"":Le,we={extra:ue.helpCenter?b().createElement(i,{extra:K.extra}):K.extra},Ke=(0,F.Z)((0,F.Z)({},K),we);return b().createElement("div",{className:"page-container-content ".concat(G?"page-container-noPadding":""," ").concat(ye?"page-container-content_personal_background":""," ").concat(Ae)},ke&&b().createElement(z.Z,{title:ke}),ye?b().createElement(N.Z,null,se.children):b().createElement(N.Z,Ke,se.children))}var ie=W},28107:function(Ne,oe,e){"use strict";var F=e(66456),O=e(55313),$=e(22385),b=e(31097),N=e(57663),M=e(71577),R=e(71194),c=e(57016),L=e(88986),n=e(12924),d=e.n(n),f=e(91768),m=e(10237),g=e(37055),C=e(6793),t=e(18329),w=e(95664);class V extends d().Component{constructor(D){super(D);this.onCancel=()=>{var E=this.props,S=E.handleReferenceList,U=E.onReferenceList;S?S():U&&U()},this.onContinueEdit=()=>{var E=this.props.continueEdit;E&&E()},this.initTableList=(E,S)=>{var U=this.props,B=U.type,i=U.operation,z=U.resourceId,W=U.t,ie=this.state.resourceTypes,se=S||i;return this.setState({loading:!0}),m.WY.get({url:g.ZP.deleteResource.check(),params:(0,L.Z)((0,L.Z)({},this.state.params),{},{type:B,id:E||z})}).then(Ce=>{if(Ce.data.list&&Ce.data.list.length===0)return!0;if(Ce.data.total<2&&Ce.data.list.length>0){var fe=Ce.data.list[0],ue=fe.title,ce=fe.type_name,K=fe.create_user_name,Q="";return se==="continueEdit"?Q=(0,C.ZT)("".concat(W("component.continueEditReminderTip")),ie[B],"\u300A".concat(ue,"\u300B").concat(ce)):se==="forbiddenEdit"?Q=(0,C.ZT)("".concat(W("component.forbiddenEditReminderTip")),ie[B],"\u300A".concat(ue,"\u300B").concat(ce)):Q=(0,C.ZT)("".concat(W("component.deleteElseReminderTip")),ie[B],"\u300A".concat(ue,"\u300B(").concat(K?W("common.creator")+":"+K:"",")").concat(ce),W(se==="delete"?"common.delete":"course.cancelRelease")),se==="move"?(c.Z.confirm({title:W("common.tip"),content:(0,C.ZT)("".concat(W("component.forbiddenMoveReminderTip")),"\u300A".concat(ue,"\u300B").concat(ce)),okText:W("common.ok"),onOk:()=>{this.onCancel()},onCancel:()=>{this.onCancel()}}),!1):(se==="continueEdit"?c.Z.confirm({title:W("common.tip"),content:Q,okText:W("common.cancel"),cancelText:W("course.continueEdit"),onOk:()=>{this.onCancel()},onCancel:()=>{se==="continueEdit"&&this.props.continueEdit()}}):c.Z.info({title:W("common.tip"),content:Q,okText:W("common.ok"),onOk:()=>{this.onCancel()}}),!1)}setTimeout(()=>{this.setState({loading:!1,tableList:Ce.data.list,tableTotal:Ce.data.total,tableTotalPages:Ce.data.pages})},300)})},this.handleTableChange=E=>{var S=this.state.params;S.page_number=E,this.setState({params:S},()=>{this.initTableList()})},this.renderFooter=()=>{var E=this.props,S=E.t,U=E.operation;return d().createElement("div",null,U==="continueEdit"?d().createElement(M.Z,{type:"primary",onClick:this.onContinueEdit},S("course.continueEdit")):null,d().createElement(M.Z,{type:"primary",onClick:this.onCancel},S("common.ok")))},this.state={loading:!0,params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0,resourceTypes:{questionnaire:this.props.t("common.questionnaire"),classify:this.props.t("course.category"),paper:this.props.t("exam.paperAddTitle"),question:this.props.t("learning.questionAddTitle"),course:this.props.t("study.course"),resource:this.props.t("common.courseware"),lecturer:this.props.t("course.lecturer"),evaluationProduct:this.props.t("questionn.evaluationTool")}},this.columns=[{title:this.props.t("common.number"),dataIndex:"userId",width:30,render:(E,S,U)=>U+1},{title:this.props.t("common.name"),dataIndex:"title",width:420,render:E=>d().createElement(b.Z,{title:E},d().createElement("div",{className:"cl-text-ellipsis",style:{width:420}},E))},{title:this.props.t("study.type"),dataIndex:"type_name",width:120},{title:this.props.t("common.creator"),dataIndex:"create_user_name",width:30}]}componentDidMount(){var D=this.props.onRef;D&&D(this)}componentDidUpdate(D){var E=this.props.onRef;E||this.props.visible&&this.props.visible!==D.visible&&this.props.resourceId&&this.setState({params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0},()=>{this.initTableList()})}render(){var D=this.props,E=D.visible,S=D.type,U=D.operation,B=D.t,i=this.state,z=i.loading,W=i.params,ie=i.tableList,se=i.tableTotal,Ce=i.tableTotalPages,fe=i.resourceTypes;return d().createElement("div",null,se>1?d().createElement(t.ZP,{visible:E,title:U==="move"?"".concat(B("common.tip")):(0,C.ZT)("".concat(B("component.deleteReminder")),B(U==="delete"?"common.deletion":U==="cancelPublish"?"course.cancelRelease":"common.edit")),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},d().createElement("div",{className:"referenceWithOther"},d().createElement("div",{className:"referenceWithOther__tip"},U==="continueEdit"?"".concat(B("component.this")).concat(fe[S]).concat(B("component.continueEditReminderTip2")):U==="forbiddenEdit"?"".concat(B("component.pleaseNote")).concat(fe[S]).concat(B("component.forbiddenEditReminderTip2")):U==="move"?"".concat(B("component.forbiddenMoveTip")):(0,C.ZT)("".concat(B("component.deleteReminderTip")),fe[S],B(U==="delete"?"common.delete":"course.cancelRelease"))),d().createElement(O.Z,{bordered:!0,size:"middle",columns:this.columns,rowKey:"id",dataSource:ie,pagination:!1,loading:z}),d().createElement(w.Z,{defaultPageSize:10,totalNum:se,totalPage:Ce,current:W.page_number,showRenderRefresh:!1,onChange:this.handleTableChange}))):null)}}oe.Z=(0,f.Z)()(V)},72718:function(Ne,oe,e){"use strict";e.r(oe),e.d(oe,{default:function(){return vt}});var F=e(62029),O=e(14781),$=e(53431),b=e(63185),N=e(9676),M=e(59250),R=e(13013),c=e(57663),L=e(71577),n=e(22385),d=e(31097),f=e(30887),m=e(99210),g=e(57361),C=e(71194),t=e(57016),w=e(88986),V=e(34792),A=e(48086),D=e(43358),E=e(34041),S=e(9754),U=e.n(S),B=e(12924),i=e.n(B),z=e(90631),W=e(57254),ie=e(76651),se=e(91768),Ce=e(57068),fe=e(28216),ue=e(28107),ce=e(18329),K=e(10237),Q=e(37055),G=E.Z.Option;class pe extends i().Component{constructor(de){super(de);this.onSelectChange=Y=>{this.setState({selectQuestionBank:Y})},this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{var Y=this.state.selectQuestionBank;if(!Y){A.default.warning(this.props.t("validation.checkRandomdModeNull"));return}this.props.onOk(Y)},this.getQuestionLib=()=>{var Y=Q.ZP.QuestionBankDetail.getQuestionLib();K.WY.get({url:Y}).then(_=>{this.setState({questionLib:_.data.data})})},this.state={questionLib:[],selectQuestionBank:""}}componentDidMount(){this.getQuestionLib()}render(){var de=this.props.t,Y={title:de("exam.selectBank"),okText:de("common.ok"),cancelText:de("common.cancel"),size:"small",destroyOnClose:!0,maskClosable:!1},_=this.state.questionLib;return i().createElement(ce.ZP,(0,F.Z)({},Y,{visible:this.props.visible,onCancel:this.onCancel,onOk:this.onOk}),i().createElement("div",{className:"move-question"},de("exam.moveTo"),"\uFF1A",i().createElement(E.Z,{className:"move-question-select",onChange:this.onSelectChange},_.map((H,he)=>i().createElement(G,{value:H.id,key:he},H.name)))))}}pe.defaultProps={visible:!1,onCancel:()=>{},onOk:()=>{}};var ye=(0,se.Z)()(pe),ke=e(72387),Le=["component.singleSampleType","component.multipleSampleType","component.tofSampleType","component.blankSampleType","component.describeSampleType"],Ae=["component.questionSimple","component.questionGeneral","component.questionDifficult","component.questionHard"],we={title:"examination.previewQuestion",okText:"common.ok",cancelText:"common.cancel",size:"medium",destroyOnClose:!0,maskClosable:!1};class Ke extends i().Component{constructor(de){super(de);this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{this.props.onOk()},this.onClosePreview=()=>{this.setState({showPreview:!1})},this.onPreviewImg=(Y,_)=>{this.setState({imageList:Y,defaultActiveImg:_,showPreview:!0})},this.handlePreviewItemImg=Y=>{this.onPreviewImg([Y],0)},this.getQuestionInfo=()=>{var Y=this.props.questionId,_=Q.ZP.QuestionBankDetail.getQuestionInfo(),H={id:Y};K.WY.get({url:_,params:H}).then(he=>{he.data.code===0&&this.setState({questionInfo:he.data.data})})},this.renderOptions=()=>{var Y=this.state.questionInfo,_=this.props.t;return Y.type<4?i().createElement("div",{className:"view-question-info-options"},Y.answer.map((H,he)=>i().createElement("div",{key:he,className:"view-question-info-options-item__container"},i().createElement("div",{className:"view-question-info-options-item"},H.optionOrder,"\uFF1A ",H.title,H.isAnswer?i().createElement("span",{className:"is-correct-answer"},"(",_("learning.questionAddOptionSubName"),")"):null),H.answerImage?i().createElement("div",{className:"view-question-info-options-item__container__img-box",onClick:()=>this.handlePreviewItemImg(H.answerImage)},i().createElement("img",{src:H.answerImage,alt:""})):null))):i().createElement("div",{className:"view-question-info-options"},Y.answer.map((H,he)=>i().createElement("div",{className:"view-question-info-options-item",key:he},Y.type===4?_("examing.blankLabel"):_("examing.describeLabel"),he+1,"\uFF1A ",H.title)))},this.getBlankTitle=Y=>{var _=new RegExp(/\[\[.*?\]\]/g,"g");return Y.replace(_,"(____)")},this.state={questionInfo:{answer:[]},showPreview:!1,imageList:[],defaultActiveImg:0}}componentDidUpdate(de){de.visible!==this.props.visible&&this.props.visible&&this.getQuestionInfo()}render(){var de=this.state,Y=de.questionInfo,_=de.showPreview,H=de.imageList,he=de.defaultActiveImg,Pe=this.props.t;return i().createElement(ce.ZP,(0,F.Z)({},we,{title:Pe(we.title),okText:Pe(we.okText),cancelText:Pe(we.cancelText),visible:this.props.visible,onCancel:this.onCancel,onOk:this.onOk}),i().createElement("div",{className:"view-question",onContextMenu:Se=>(Se.preventDefault(),!1)},i().createElement("div",{className:"view-question-section"},i().createElement("div",{className:"view-question-info"},i().createElement("div",{className:"view-question-info-item"},i().createElement("span",{className:"view-question-info-label"},Pe("exam.paperAddthType"),"\uFF1A"),Pe(Le[Y.type-1])),i().createElement("div",{className:"view-question-info-item"},i().createElement("span",{className:"view-question-info-label"},Pe("exam.complexity"),"\uFF1A"),Pe(Ae[Y.difficulty-1]))),i().createElement("div",{className:"view-question-info"},i().createElement("span",{className:"view-question-info-label margin"},Pe("exam.paperAddthName"),"\uFF1A"),i().createElement("p",{className:"question-title"},Y.type===4?this.getBlankTitle(Y.title):Y.title),Y.titleImageList?i().createElement("div",{className:"question-item-title-img"},Y.titleImageList.map((Se,je)=>i().createElement("img",{src:Se,key:je,onClick:()=>this.onPreviewImg(Y.titleImageList,je),alt:""}))):null),i().createElement("div",{className:"view-question-info"},i().createElement("span",{className:"view-question-info-label margin"},Pe("exam.knowledgePoint"),"\uFF1A"),i().createElement("div",{className:"question-knowledge-point"},Y.knowledgePoint?Y.knowledgePoint.map(Se=>i().createElement("div",{className:"question-knowledge-point-item",key:Se.knowledgeId},Se.title)):""))),i().createElement("div",{className:"view-question-section"},i().createElement("div",{className:"view-question-info"},i().createElement("span",{className:"view-question-info-label margin"},Pe("learning.questionAddOptionName"),"\uFF1A"),this.renderOptions())),i().createElement("div",{className:"view-question-section"},i().createElement("div",{className:"view-question-info"},i().createElement("span",{className:"view-question-info-label margin"},Pe("learning.questionAddSecAnalysisName"),"\uFF1A"),i().createElement("p",null,Y.analysis),Y.analysisImageList?i().createElement("div",{className:"question-item-title-img"},Y.analysisImageList.map((Se,je)=>i().createElement("img",{alt:"",src:Se,key:je,onClick:()=>this.onPreviewImg(Y.analysisImageList,je)}))):null)),i().createElement(ke.Z,{visible:_,imgList:H,defaultActive:he,onClose:this.onClosePreview})))}}Ke.defaultProps={visible:!1,questionId:"",onCancel:()=>{},onOk:()=>{}};var ze=(0,se.Z)()(Ke);class Ve extends i().Component{constructor(){super(...arguments);this.onSureDelete=()=>{var de=this.props,Y=de.noReferedQuestionsIds,_=de.t;if(Y.length===0){this.props.onOk();return}t.Z.confirm({title:_("common.tip"),okText:_("common.ok"),cancelText:_("common.cancel"),content:_("common.confirmDeleteTitle"),mask:!0,centered:!0,onCancel:()=>{},onOk:()=>{var H=Q.ZP.QuestionBankDetail.deleteQuestion(),he={ids:Y.join(",")};K.qg.post({url:H,data:he}).then(Pe=>{Pe.data.code===0&&(A.default.success(_("course.removeSuccess")),this.props.onOk(!0))})}})}}render(){var de=this.props,Y=de.referQuestions,_=de.noReferedQuestionsIds,H=de.t,he={title:H("common.tip"),okText:H("common.ok"),cancelText:H("exam.deleteUnquotedQuestion"),cancelButtonProps:{type:"default"},size:"medium",destroyOnClose:!0,maskClosable:!1};return i().createElement(ce.ZP,(0,F.Z)({},he,{visible:this.props.visible,onOk:this.onSureDelete,onCancel:this.props.onCancel,okText:_.length>0?H("exam.deleteUnquotedQuestion"):H("common.ok"),cancelText:H("common.cancel")}),i().createElement("div",{className:"remove-question-tip"},i().createElement("h1",{className:"remove-question-tip-title"},H("exam.deleteQuotedQuestionWarn")),i().createElement("div",{className:"remove-question-tip-list"},Y.map((Pe,Se)=>i().createElement("div",{className:"remove-question-tip-item",key:Se},Se+1,"\u3001 ","\u3010".concat(Pe.type_name,"\u3011 ").concat(Pe.title))))))}}Ve.defaultProps={visible:!1,referQuestions:[],noReferedQuestionsIds:[],onCancel:()=>{},onOk:()=>{}};var be=(0,se.Z)()(Ve),Qe=e(86726),He=e(1164),Ie=Ge=>{var de=Ge.user;return{modules:de.modules,appType:de.appType}};class Ye extends i().PureComponent{constructor(de){super(de);this.onCheckEdit=()=>{var Y=this.props,_=Y.record,H=Y.questionBankId,he=Y.questionBankName;this.checkRefer(_.id,"continueEdit").then(Pe=>{if(Pe){var Se={path:"/training/examination/question/add?questionBankId=".concat(H,"&questionBankName=").concat(he,"&questionId=").concat(_.id)};He.Z.targetTo(Se);return}this.handleReferenceList(_.id,"continueEdit")})},this.onCheckDelete=()=>{var Y=this.props.t,_=this.props.record.id;this.checkRefer(_,"delete").then(H=>{if(H){t.Z.confirm({title:Y("common.tip"),okText:Y("common.ok"),cancelText:Y("common.cancel"),content:Y("common.confirmDeleteTitle"),onOk:this.removeQuestion,onCancel:()=>{}});return}this.handleReferenceList(_,"delete")})},this.checkRefer=(Y,_)=>this.referenceWithOtherListRef?this.referenceWithOtherListRef.initTableList(Y,_):new Promise.resolve,this.continueEdit=()=>{var Y=this.props,_=Y.record,H=Y.questionBankId,he=Y.questionBankName,Pe={path:"/training/examination/question/referedEdit?questionBankId=".concat(H,"&questionBankName=").concat(he,"&questionId=").concat(_.id)};He.Z.targetTo(Pe)},this.handleReferenceList=(Y,_)=>{this.setState(H=>({referenceWithOtherConfig:(0,w.Z)((0,w.Z)({},H.referenceWithOtherConfig),{},{visible:!H.referenceWithOtherConfig.visible,resourceId:Y||"",operation:_||""})}))},this.removeQuestion=()=>{var Y=Q.ZP.QuestionBankDetail.deleteQuestion(),_=this.props.record,H={access_token:window.localStorage.getItem("token"),ids:_.id};K.qg.post({url:Y,data:H}).then(he=>{he.data.code===0&&(A.default.success(this.props.t("personal.removeSuccess")),this.props.onRemoveQuestion())})},this.state={actions:(0,Qe.V9)("question",de.modules),referenceWithOtherConfig:{visible:!1,type:"question",operation:"",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList}},this.referenceWithOtherListRef=null}render(){var de=this.state,Y=de.actions,_=de.referenceWithOtherConfig;return i().createElement("div",{className:"cl-table__cell-action"},(0,Qe.H3)("edit",Y)?i().createElement("a",{className:"cl-pointer",onClick:this.onCheckEdit},this.props.t("common.edit")):null,i().createElement("span",{className:"cl-pointer-divide"}),(0,Qe.H3)("delete",Y)?i().createElement("a",{type:"link",className:"cl-pointer",onClick:this.onCheckDelete},this.props.t("common.delete")):null,i().createElement(ue.Z,(0,F.Z)({},_,{onReferenceList:this.handleReferenceList,continueEdit:this.continueEdit,onRef:H=>{this.referenceWithOtherListRef=H}})))}}Ye.defaultProps={record:{},questionBankId:"",onRemoveQuestion:()=>{}};var Be=(0,fe.$j)(Ie)((0,se.Z)()(Ye)),Xe=e(6793),We=e(36202),st=e(60667),rt=Ge=>{var de=Ge.user;return{lngType:de.lng}};class nt extends i().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var de=[{title:this.props.t("exam.paperAddthNamed"),dataIndex:"title",key:"title",render:(Y,_)=>{var H=_.type,he=_.typeName,Pe=this.props.t(Le[H-1])||he,Se=H===4?_.title.replace(`
`,"").replace(`\r
`,"").replace(/\[\[.*?\]\]/g,"____"):_.title;return this.props.shouldRenderPreview?i().createElement("span",{className:"question-title",onClick:()=>this.props.showViewQuestion(_.id)},"\u3010".concat(Pe,"\u3011 ").concat(Se)):i().createElement("span",null,"\u3010".concat(Pe,"\u3011 ").concat(Se))}},{title:this.props.t("exam.knowledgePointed"),dataIndex:"knowledgePoint",key:"knowledgePoint",width:200,render:Y=>Y?Y.map(_=>i().createElement("div",{className:"question-knowledge-point",key:_.knowledgeId,title:_.title},_.title)):""},{title:this.props.t("exam.complexity"),dataIndex:"difficulty",key:"difficulty",width:120,render:Y=>this.props.t(Ae[Y-1])},{title:this.props.t("common.createTime"),dataIndex:"createTime",key:"createTime",width:164,render:Y=>(0,Xe.p6)(Y,"yyyy.MM.dd hh:mm")},{title:this.props.t("common.creator"),width:106,dataIndex:"createUserName",key:"createUserName",render:(Y,_)=>this.props.lngType==="en_us"&&Y==="\u516C\u53F8"?"Company":i().createElement(st.Z,{dataType:"userName",value:_.creator_user_id,name:Y,type:_.creator_source_type})},{title:this.props.t("common.operate"),width:120,key:"operate",render:(Y,_)=>i().createElement(Be,{record:_,questionBankId:this.props.questionBankId,questionBankName:this.props.questionBankName,onEdit:this.props.onEdit,onRemoveQuestion:this.props.onRemoveQuestion})}];return de}}render(){var de=this.props,Y=de.isLoading,_=de.questionList,H=de.selectedRowKeys,he=de.toolBarRender,Pe=de.headerTitle,Se={selectedRowKeys:H,onChange:this.props.onSelectRow},je=this.getTableColumn();return i().createElement(We.f,{rowSelection:Se,dataSource:_,columns:je,rowKey:Je=>Je.id,pagination:!1,loading:Y,toolBarRender:he,headerTitle:Pe,tableUUID:"b0856d25-7c38-4641-888f-866dfa1eccc9"})}}var yt=(0,fe.$j)(rt)((0,se.Z)()(nt)),dt=e(31457),ut=e(84009),pt=e(48479),at=e(84874),Ct=e(40238),ht=e(11449),Et=e(84717),it=E.Z.Option,Fe={pageNumber:1,pageSize:20},mt=Ge=>{var de=Ge.user;return{modules:de.modules}};class lt extends i().Component{constructor(de){var Y;super(de);Y=this,this.onSearch=_=>{Fe.pageNumber=1,this.setState({keyword:_},()=>{this.getQuestionList()})},this.onChangeOnlySeeMe=_=>{var H=_.target.checked;Fe.pageNumber=1,this.setState({onlySeeMe:H},()=>{this.getQuestionList()})},this.onQuestionTypeChange=_=>{Fe.pageNumber=1,this.setState({questionType:_},()=>{this.getQuestionList()})},this.onSelectRow=(_,H)=>{var he=[];H.forEach(Pe=>{he.push(Pe.id)}),this.setState({selectedRowKeys:he}),this.selectedRows=H},this.onExport=()=>{var _=this.state.questionBankId,H=Q.ZP.QuestionBankDetail.export(_);H="".concat(H,"?access_token=").concat(window.localStorage.getItem("token")),K.WY.get({url:H}).then(he=>{he.data.code===0&&((0,dt.Pp)(this.props),A.default.success(this.props.t("study.compoundSucceed")))})},this.onImportQuestion=()=>{var _=this.state.importQuestionConfig;_.visible=!0,this.setState({importQuestionConfig:_})},this.onRemoveQuestion=()=>{Fe.pageNumber=1,this.getQuestionList()},this.onShowMoveQuestion=()=>{var _=this.state,H=_.moveQuestionConfig,he=_.questionBankId,Pe=_.referenceWithOtherConfig;this.checkRefer(he,"move").then(Se=>{Se?this.setState({moveQuestionConfig:(0,w.Z)((0,w.Z)({},H),{},{visible:!0})}):this.setState({referenceWithOtherConfig:(0,w.Z)((0,w.Z)({},Pe),{},{visible:!0,resourceId:he,operation:"move"})})})},this.onMultipleRemoveQuestion=()=>{var _=this.props.t,H=this.state.selectedRowKeys;if(H.length===0){A.default.warning(this.props.t("exam.beforeMoveQuestionTip"));return}this.checkDeleteRefer().then(he=>{var Pe=he.data.data,Se=Pe.referenced_questions,je=Pe.is_can_delete,Je=Pe.un_referenced_ids;if(je==="true")t.Z.confirm({title:_("common.tip"),okText:_("common.ok"),cancelText:_("common.cancel"),content:_("common.confirmDeleteTitle"),onOk:this.removeQuestion,onCancel:()=>{}});else{var qe=this.state.removeQuestionTipConfig;this.setState({removeQuestionTipConfig:(0,w.Z)((0,w.Z)({},qe),{},{visible:!0,referQuestions:Se,noReferedQuestionsIds:Je})})}})},this.getQuestionList=()=>{var _=Q.ZP.QuestionBankDetail.getQuestionList(),H=this.state,he=H.keyword,Pe=H.onlySeeMe,Se=H.questionBankId,je=H.questionType,Je=Fe.pageNumber,qe=Fe.pageSize,ot={keyword:he,onlySeeMe:Pe,questionBankId:Se,type:je,pageSize:qe,pageNumber:Je};this.setState({isLoading:!0}),K.WY.get({url:_,params:ot}).then(Oe=>{this.setState({isLoading:!1,questionList:Oe.data.list,questionTotal:Oe.data.total,selectedRowKeys:[]}),this.selectedRows=[]})},this.getImportVisible=(0,g.Z)(U().mark(function _(){var H,he;return U().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,(0,Et.UE)();case 2:H=Se.sent,he=H.data,he.code===2e5&&Y.setState({importVisible:he.data.isFree==="false"});case 5:case"end":return Se.stop()}},_)})),this.keywordChange=_=>{var H=_.target.value;this.setState({keyword:H})},this.pageChange=_=>{Fe.pageNumber=_,this.getQuestionList()},this.pageSizeChange=(_,H)=>{Fe.pageSize=H,this.getQuestionList()},this.linkToAdd=()=>{ie.m8.push("/training/examination/question/add?questionBankId=".concat(this.state.questionBankId))},this.cancelImportQuestion=()=>{var _=this.state.importQuestionConfig;_.visible=!1,this.setState({importQuestionConfig:_})},this.sureImportQuestion=()=>{var _=this.state.importQuestionConfig;_.visible=!1,Fe.pageNumber=1,this.setState({importQuestionConfig:_}),this.getQuestionList()},this.cancelMoveQuestion=()=>{var _=this.state.moveQuestionConfig;_.visible=!1,this.setState({moveQuestionConfig:_})},this.sureMoveQuestion=_=>{var H=Q.ZP.QuestionBankDetail.moveQuestion(),he=this.state.selectedRowKeys,Pe={questionIds:he.join(","),questionBankId:_};K.qg.post({url:H,data:Pe}).then(je=>{je.data.code===0&&(A.default.success(this.props.t("exam.movedSuccess")),Fe.pageNumber=1,this.getQuestionList())});var Se=this.state.moveQuestionConfig;Se.visible=!1,this.setState({moveQuestionConfig:Se})},this.hiddenRemoveQuestionTip=()=>{var _=this.state.removeQuestionTipConfig;_.visible=!1,this.setState({removeQuestionTipConfig:_})},this.removeQuestion=()=>{var _=Q.ZP.QuestionBankDetail.deleteQuestion(),H=this.state.selectedRowKeys,he={access_token:window.localStorage.getItem("token"),ids:H.join(",")};K.qg.post({url:_,data:he}).then(Pe=>{Pe.data.code===0&&(A.default.success(this.props.t("personal.removeSuccess")),this.onRemoveQuestion())})},this.checkDeleteRefer=()=>{var _=this.state.selectedRowKeys,H=Q.ZP.QuestionBankDetail.checkDeleteRefer();return K.WY.get({url:H,params:{question_ids:_.toString()}})},this.checkRefer=(_,H)=>this.referenceWithOtherListRef?this.referenceWithOtherListRef.initTableList(_,H):new Promise.resolve,this.showViewQuestion=_=>{var H=this.state.viewQuestionConfig;H.visible=!0,H.questionId=_,this.setState({viewQuestionConfig:H})},this.cancelViewQuestion=()=>{var _=this.state.viewQuestionConfig;_.visible=!1,this.setState({viewQuestionConfig:_})},this.removeQuestionCbk=_=>{this.hiddenRemoveQuestionTip(),_&&(Fe.pageNumber=1,this.setState({selectedRowKeys:[]}),this.getQuestionList())},this.handleReferenceList=()=>{this.setState(_=>({referenceWithOtherConfig:(0,w.Z)((0,w.Z)({},_.referenceWithOtherConfig),{},{visible:!_.referenceWithOtherConfig.visible,resourceId:"",operation:""})}))},this.handleMenuClick=_=>{switch(_){case"0":this.onExport();break;case"1":this.onMultipleRemoveQuestion();break;case"2":this.onShowMoveQuestion();break;default:}},this.renderLeftRow=()=>{var _=this.props.t,H=this.state,he=H.actions,Pe=H.selectedRowKeys,Se=H.questionBankId,je=H.questionBankName,Je=H.importVisible,qe=i().createElement(m.Z,{onClick:ot=>{var Oe=ot.key;return this.handleMenuClick(Oe)}},(0,Qe.H3)("export",he)&&i().createElement(m.Z.Item,{key:"0"},i().createElement("span",null,_("exam.exportQuestion"))),(0,Qe.H3)("delete",he)&&i().createElement(m.Z.Item,{key:"1",disabled:Pe.length===0},i().createElement(d.Z,{placement:"bottom",title:_("exam.deleteQuestionFromBankWarn"),mouseEnterDelay:.8},i().createElement("span",null,_("common.delete")))),i().createElement(m.Z.Item,{key:"2",disabled:Pe.length===0},i().createElement(d.Z,{placement:"bottom",title:_("exam.adjustBankWarn"),mouseEnterDelay:.8},i().createElement("span",null,_("exam.move")))));return i().createElement("div",null,(0,Qe.H3)("add",he)?i().createElement(He.Z,{to:"/training/examination/question/add?questionBankId=".concat(Se,"&questionBankName=").concat(je,"&timestamp=").concat(Date.parse(new Date))},i().createElement(L.Z,{type:"primary",className:"top-operate-add"},i().createElement(at.Z,{iconClass:"icon-icon_addx"}),this.props.t("exam.newQuestion"))):null,Je&&(0,Qe.H3)("template",he)?i().createElement(L.Z,{className:"top-operate-import primary-btn-color",onClick:this.onImportQuestion},i().createElement(z.Z,null),this.props.t("exam.importTemplate")):null,i().createElement(R.Z,{overlay:qe},i().createElement(L.Z,null,"".concat(_("common.more"),"  ").concat(_("common.operate")),i().createElement(W.Z,null))))},this.renderRightRow=()=>{var _=this.props.t;return i().createElement("div",null,i().createElement(pt.Z,{onSearch:this.onSearch,prefixCls:"question-detail-search",placeholder:_("searchInputPlaceholder.question")}))},this.state={questionBankId:"",questionBankName:"",actions:(0,Qe.V9)("question",de.modules),keyword:"",questionType:"",onlySeeMe:!1,questionList:[],questionTotal:0,selectedRowKeys:[],importQuestionConfig:{visible:!1,onCancel:this.cancelImportQuestion,onOk:this.sureImportQuestion},moveQuestionConfig:{visible:!1,onCancel:this.cancelMoveQuestion,onOk:this.sureMoveQuestion},removeQuestionTipConfig:{visible:!1,referQuestions:[],noReferedQuestionsIds:[],onCancel:this.hiddenRemoveQuestionTip,onOk:this.removeQuestionCbk},viewQuestionConfig:{visible:!1,questionId:"",onCancel:this.cancelViewQuestion,onOk:this.cancelViewQuestion},isLoading:!1,referenceWithOtherConfig:{visible:!1,type:"moveQuestion",operation:"move",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList},importVisible:!1},this.selectedRows=[]}componentWillMount(){this.getImportVisible()}componentDidMount(){var de=Ce.parse(ie.m8.location.search),Y=de.id,_=de.name;this.setState({questionBankId:Y,questionBankName:_},()=>{this.getQuestionList()})}componentWillUnmount(){Fe.pageNumber=1,Fe.pageSize=20}render(){var de=this.state,Y=de.questionList,_=de.questionTotal,H=de.onlySeeMe,he=de.actions,Pe=de.selectedRowKeys,Se=de.importQuestionConfig,je=de.moveQuestionConfig,Je=de.questionBankId,qe=de.questionBankName,ot=de.removeQuestionTipConfig,Oe=de.viewQuestionConfig,u=de.isLoading,p=de.referenceWithOtherConfig,l=(0,w.Z)((0,w.Z)({},Q.XE.INITIAL_PAGINATION),{},{current:Fe.pageNumber,total:_,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange}),o=this.props.t;return i().createElement(ht.Z,{pageContainerParams:{header:{title:"\u300A".concat(qe,"\u300B")}},pageTitle:o("leftMenuLists.questionBankDetails")},i().createElement("div",{className:"question-detail  sticky-table"},i().createElement("div",{className:"question-detail-container"},i().createElement("div",{className:"top-operate"},i().createElement("div",null,i().createElement(E.Z,{className:"select-question-type cl-search-normal-width",placeholder:o("component.chooseQuestionType"),allowClear:!0,onChange:this.onQuestionTypeChange},i().createElement(it,{value:1},o("common.single")),i().createElement(it,{value:2},o("common.multiple")),i().createElement(it,{value:3},o("common.tof")),i().createElement(it,{value:4},o("common.blank")),i().createElement(it,{value:5},o("common.describe"))),i().createElement(N.Z,{className:"question-detail-filter-checkbox",checked:H,onChange:this.onChangeOnlySeeMe},o("common.myCreated")))),i().createElement("div",{className:"question-detail-list"},i().createElement("div",{className:"question-detail-list-table",ref:v=>{this.tableRef=v}},i().createElement(yt,{isLoading:u,questionBankId:Je,questionBankName:qe,questionList:Y,shouldRenderPreview:(0,Qe.H3)("view",he),showViewQuestion:this.showViewQuestion,onEdit:this.onEdit,onRemoveQuestion:this.onRemoveQuestion,onSelectRow:this.onSelectRow,selectedRowKeys:Pe,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow})),_>Fe.pageSize||!l.hideOnSinglePage?i().createElement("div",{className:"question-detail-list-pagination"},i().createElement($.Z,l)):null)),i().createElement(Ct.Z,(0,F.Z)({},Se,{questionBankId:Je})),i().createElement(ye,je),i().createElement(be,ot),i().createElement(ze,Oe),i().createElement(ue.Z,(0,F.Z)({},p,{onReferenceList:this.handleReferenceList,onRef:v=>{this.referenceWithOtherListRef=v}}))))}}var vt=(0,fe.$j)(mt)((0,se.Z)()((0,ut.Z)()(lt)))},9849:function(Ne,oe,e){"use strict";e.d(oe,{Ej:function(){return N},kL:function(){return M},T:function(){return R},NU:function(){return c},FL:function(){return L},fn:function(){return n},bm:function(){return d},jY:function(){return f},Vs:function(){return m},li:function(){return g},Nl:function(){return C},YF:function(){return t},Q6:function(){return w},zW:function(){return V},Zv:function(){return A},Qg:function(){return D},qc:function(){return E},Ve:function(){return U},rS:function(){return B},Rh:function(){return i}});var F=e(10237),O=e(37055),$=e(38642),b={zaraFlag:(0,$.UI)("ZARA_H5")};function N(z,W){var ie=O.ZP.StudyProjectList.startStudy(z);return F.WY.post({url:ie,data:W})}function M(z){var W=O.ZP.Common.enroll(z);return F.WY.post({url:W})}function R(z,W){var ie=z.courseId,se=O.ZP.StudyProjectList.studyProject(ie);return F.WY.get({url:se,params:W})}function c(z){var W=z.id,ie=b.zaraFlag?O.m1.getAssessmentProjectInfo(W):O.m1.getProjectInfo(W);return F.WY.get({url:ie})}function L(z){var W=z.courseId,ie=O.ZP.EnterpriseCourse.addScanCount(W);return F.WY.post({url:ie})}function n(){var z=O.ZP.StudyProjectList.getAccountInfo();return F.WY.get({url:z})}function d(z){var W=O.ZP.StudyProjectList.projectCertiUrl(z);return F.WY.get({url:W})}function f(z){var W=z.courseId,ie=O.ZP.Courses.like(W);return F.WY.post({url:ie})}function m(z){var W=O.ZP.EnterpriseCourse.addCommentAndScore();return F.qg.post({url:W,data:z})}function g(z){var W=O.ZP.EnterpriseCourse.getCourseComments();return F.WY.get({url:W,params:z})}function C(z){var W=O.ZP.EnterpriseCourse.addCommentAndScore();return F.qg.post({url:W,data:z})}function t(z){var W=O.ZP.EnterpriseCourse.deleteComment();return F.qg.post({url:W,data:z})}function w(z,W){var ie=O.ZP.StudyProjectList.projectStudyRecord(z);return F.WY.get({url:ie,params:W})}function V(z){var W=O.ZP.DingSpaceId.getSpaceId();return F.WY.get({url:W,params:z})}function A(z,W){var ie=O.ZP.PlatformCourse.learningUrl(z);return F.WY.get({url:ie,params:W})}function D(z){var W=O.ZP.MyExamTask.examIntro({examId:z});return F.WY.get({url:W})}function E(z){var W=O.ZP.MyExamTask.examCheckStatus({examId:z});return F.WY.get({url:W})}function S(z,W){var ie=CONFIG.Common.getOperateLog(z);return formDataRequest.get({url:ie,params:W})}function U(z,W){var ie=b.zaraFlag?O.ZP.StudyProjectList.changeCustomStatus(z):O.ZP.StudyProjectList.changeStatus(z);return F.WY.post({url:ie,data:W})}function B(z){var W=O.ZP.StudyProjectList.getProjectReward(z);return F.WY.get({url:W})}function i(z){var W=O.ZP.subsidyGz.subsidyCourseSetting(z);return F.WY.get({url:W})}},91648:function(Ne,oe,e){"use strict";e.d(oe,{Z:function(){return F}});function F(O,$){var b,N,M,R,b;if(N="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=[],M=void 0,$=$||N.length,O)for(M=0;M<O;)b[M]=N[0|Math.random()*$],M++;else for(R=void 0,b[8]=b[13]=b[18]=b[23]="-",b[14]="4",M=0;M<36;)b[M]||(R=0|Math.random()*16,b[M]=N[M===19?R&3|8:R]),M++;return b.join("")}},44881:function(Ne,oe,e){"use strict";e.d(oe,{P:function(){return F}});var F=function($){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"query";return $.forEach(N=>{N.isLeaf=!N.has_children,N.value=N.id,N.pId=N.parent_id,N.label=N.name,N.key=N.id,N.title=N.name,b==="refer"&&(N.disabled=!N.allow_refer),b==="edit"&&(N.disabled=!N.allow_edit)}),$}},86726:function(Ne,oe,e){"use strict";e.d(oe,{V9:function(){return O},H3:function(){return $},e:function(){return b},F:function(){return N}});var F=e(93485);function O(M){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],c=[];function L(n,d){var f=(0,F.Z)(d),m;try{for(f.s();!(m=f.n()).done;){var g=m.value;if(g.key===n){c=g.actions;break}g.children instanceof Array&&g.children.length&&L(M,g.children)}}catch(C){f.e(C)}finally{f.f()}}return L(M,R),c}function $(M){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],c=R.find(L=>L.key===M)||{};return c.checked||!1}function b(M){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],c=!1;function L(n,d){var f=(0,F.Z)(d),m;try{for(f.s();!(m=f.n()).done;){var g=m.value;if(g.key===n){c=g.checked;break}g.children instanceof Array&&g.children.length&&L(M,g.children)}}catch(C){f.e(C)}finally{f.f()}}return L(M,R),c}function N(M){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],c="";function L(n,d){var f=(0,F.Z)(d),m;try{for(f.s();!(m=f.n()).done;){var g=m.value;if(g.key===n){c=g.id;break}g.children instanceof Array&&g.children.length&&L(M,g.children)}}catch(C){f.e(C)}finally{f.f()}}return L(M,R),c}},69164:function(Ne,oe,e){"use strict";var F=e(34792),O=e(48086);function $(b){b&&b.length>0&&O.default.success(b)}oe.Z=$},65202:function(Ne,oe,e){"use strict";e.d(oe,{p:function(){return F}});function F(){return localStorage.getItem("themeColor")||"#516AE6"}},25547:function(Ne,oe,e){"use strict";e.d(oe,{Yd:function(){return $},VX:function(){return N},lK:function(){return M},NP:function(){return R}});var F=e(88986),O=e(93485);function $(c,L,n){var d=0;function f(m,g){for(var C=0;C<m.length;C++){var t=m[C];if(t[c]===L){d=g;break}else t.children instanceof Array&&t.children.length&&f(t.children,g+1)}}return f(n,1),d}function b(c){var L=1;function n(d,f){d.forEach(m=>{f>L&&(L=f),m.children&&m.children.length>0&&n(m.children,f+1)})}return n(c,1),L}function N(c,L,n){c.forEach((d,f,m)=>{if(d.id===L)return n(d,f,m);if(d.children)return N(d.children,L,n)})}function M(c,L){var n;function d(f){var m=(0,O.Z)(f),g;try{for(m.s();!(g=m.n()).done;){var C=g.value;if(C.id==L){n={id:C.id,name:C.name,children:C.children,parentId:C.parentId};break}C.children&&C.children instanceof Array&&C.children.length>0&&d(C.children)}}catch(t){m.e(t)}finally{m.f()}}return d(c),n?(0,F.Z)((0,F.Z)({},n),{},{children:n.children instanceof Array?n.children:[]}):{children:[],id:"",name:""}}var R=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",f=[...L];function m(g){Object.keys(n).forEach(C=>{var t=C,w=n[C];g[w]=g[t],g[d]=g[d]&&g[d]instanceof Array?[...g[d]]:[],g[d].length?g[d].forEach(V=>{m(V)}):delete g[d]})}return f.forEach(g=>m(g)),f}},2396:function(Ne,oe,e){"use strict";e.d(oe,{fA:function(){return $},kh:function(){return b},kR:function(){return N},rw:function(){return R},$s:function(){return c},q_:function(){return L},QK:function(){return n}});var F=e(6793),O={limitWords(d,f){return{rules:[{max:d,message:"\u6700\u591A\u8F93\u5165".concat(d,"\u4E2A\u5B57")},{required:!0,message:f||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},limitTagsLength(d){return{rules:[{max:d,message:"\u6700\u591A\u8F93\u5165".concat(d,"\u4E2A\u6807\u7B7E")}]}},required(d){return{rules:[{required:!0,message:d||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},requiredWithValidator(d,f){return{rules:[{required:!0,message:d||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0,validator:f}]}}},$={score:/^\+?[0-9]*$/,positiveInteger:/^[1-9]\d*$/,examScore:/^[0-9]+([.]\d{1})?$/,url:/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/,httpsUrl:/(^https):\/\/([\w.]+\/?)\S*/,tagName:/^[\s]|[ ]$/gi},b=d=>isNaN(d)||!d||!(d>=0&&d<1e3)||!$.score.test(d),N=d=>isNaN(d)||!d||!(d>-1e3&&d<1e3),M=d=>isNaN(d)||!d||!(d>=0&&d<1e3)||!$.examScore.test(d),R=(d,f)=>{for(var m=0,g=0;g<d.length;g++){var C=d.charAt(g);if(C.match(/[^\x00-\xff]/ig)!=null?m+=1:m+=.5,m>f)return g}return 0},c=d=>{for(var f=0,m=0;m<d.length;m++){var g=d.charAt(m);g.match(/[^\x00-\xff]/ig)!=null?f+=1:f+=.5}return f},L=(d,f)=>{var m=d.target.value,g=d.target.dataset.originLength;if(d.target.dataset.originLength||(g=f,d.target.dataset.originLength=g),!!g){var C=c(m);C*1<f*1?d.target.setAttribute("maxLength",f*2):d.target.setAttribute("maxLength",f)}},n=(d,f)=>{var m="";return(!d||!(0,F.fy)(d))&&(m=f),m}},26885:function(Ne,oe,e){"use strict";e.d(oe,{mw:function(){return g},kr:function(){return C},w8:function(){return t},Sk:function(){return V},$f:function(){return A}});var F=e(34792),O=e(48086),$=e(88986),b=e(57361),N=e(9754),M=e.n(N),R=e(76651),c=e(78001),L=e(37055),n=e(10237),d=localStorage.getItem("corpId"),f=(D,E)=>{wx.config({beta:!0,debug:!1,appId:D.corpId||localStorage.getItem("corpId"),timestamp:D.timeStamp,nonceStr:D.nonceStr,signature:D.signature,jsApiList:["openDefaultBrowser","innerSaveWebPerformance"]}),wx.ready(()=>{E&&C()}),wx.error(S=>{console.log("error",S)})},m=(D,E)=>{wx.agentConfig({corpid:D.corpId,agentid:D.agentId,timestamp:D.timeStamp,nonceStr:D.nonceStr,signature:D.signature,jsApiList:["openDefaultBrowser","selectExternalContact","selectEnterpriseContact","selectPrivilegedContact","createChatWithMsg","openEnterpriseChat","openExistedChatWithMsg"],success:()=>{E("success"),(0,R.Qm)()._store.dispatch({type:"user/setWxWorkApiFlag",payload:{wxWorkApiFlag:(0,R.Qm)()._store.getState().user.wxWorkApiFlag+=1}})},fail:S=>{S.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},g=(D,E,S)=>{window.wx.openEnterpriseChat({userIds:D.join(";"),groupName:E.title,chatId:"",success:function(B){var i=B.chatId;window.wx.invoke("openExistedChatWithMsg",{chatId:i,msg:{msgtype:"link",link:{title:E.title,desc:E.desc,url:E.url,imgUrl:E.imgUrl}}},function(z){z.err_msg=="openExistedChatWithMsg:ok"&&S&&S(i)})},fail:function(B){B.errMsg.indexOf("function not exist")>-1&&alert("\u7248\u672C\u8FC7\u4F4E\u8BF7\u5347\u7EA7")}})},C=function(){var D=(0,b.Z)(M().mark(function E(S){var U,B,i,z,W,ie,se=arguments;return M().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return U=se.length>1&&se[1]!==void 0?se[1]:()=>{},B=L.ZP.util.getAppSignature(),i=window.location.href.split("#")[0],z=S||L.ZP.enterpriseId,fe.next=6,n.WY.get({url:B,params:{enterprise_id:z,url:i,batch_id:""}});case 6:W=fe.sent,ie=W.data,m(ie,U);case 9:case"end":return fe.stop()}},E)}));return function(S){return D.apply(this,arguments)}}(),t=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(navigator.userAgent.toLowerCase().indexOf("wxwork")>-1){var U=L.ZP.util.getCorpSignature(),B=window.location.href.split("#")[0];n.WY.get({url:U,params:{enterprise_id:L.ZP.enterpriseId,url:B,batch_id:S}}).then(i=>{var z=i.data;f(z,E)})}else E&&C()},w=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,S=CONFIG.util.getSignature(),U=window.location.href;request.get({url:S,params:{corpId:d,url:U,uuid:""}}).then(B=>{var i=B.data;f(i,E)})},V=D=>{var E=D.userIds,S=E===void 0?[]:E,U=D.deptIds,B=U===void 0?[]:U,i=D.mode,z=i===void 0?"multi":i;return new Promise((W,ie)=>{window.wx.invoke("selectPrivilegedContact",{fromDepartmentId:0,mode:z,selectedContextContact:0,selectedOpenUserIds:S||[],selectedTickets:B||[]},se=>{se.err_msg==="selectPrivilegedContact:ok"?(typeof se.result=="string"&&(se.result=JSON.parse(se.result)),W(se.result)):se.err_msg==="selectPrivilegedContact:cancel"&&ie("cancel")})})},A=D=>{var E=D.type,S=E===void 0?"employeeRange":E,U=D.result,B=U===void 0?{}:U,i=D.user,z=i===void 0?{}:i,W=D.reserveUser,ie=W===void 0?[]:W,se=D.rangeType,Ce=se===void 0?"all":se,fe=D.hasDefault,ue=fe===void 0?!0:fe;return new Promise(ce=>{var K=B.userList,Q=K===void 0?[]:K,G=B.selectedUserCount,pe=Q||[];if(S==="employeeRange"){var ye=z.unionid,ke="";!Q.length&&G?(ue&&(pe.push({id:ye,unionid:ye,openUserId:ye}),B.userList=[{id:ye,unionid:ye,openUserId:ye}],B.selectedUserCount+=1),ke=!0):ke=!1;var Le={dept:[],post:[],group:[],user:pe.map(Ie=>(0,$.Z)((0,$.Z)({},Ie),{},{unionid:Ie.openUserId,id:Ie.openUserId,user_id:Ie.openUserId,source_type:"wx_sync"})),classes:[],cluster:[]};Ce==="onlyDeptUser"&&(Le={dept:[],user:pe.map(Ie=>(0,$.Z)((0,$.Z)({},Ie),{},{unionid:Ie.openUserId,id:Ie.openUserId,user_id:Ie.openUserId,source_type:"wx_sync"}))});var Ae={isShowType:ke,qyWeChatVo:JSON.stringify(B),rangeList:Le},we=B.selectedUserCount-Le.user.length;we>0&&(ke&&ue?O.default.warning(c.Z.t("component.selectedErrorTips",{count:we})):O.default.warning(c.Z.t("component.selectedErrorTips2",{count:we}))),ce(Ae)}if(S==="supervision"){Q&&(pe.find(Ie=>Ie.openUserId===(ie[0].unionid||ie[0].user_id||ie[0].name))&&(B.selectedUserCount-=1),pe=pe.filter(Ie=>Ie.openUserId!==ie[0].unionid&&Ie.openUserId!==ie[0].user_id&&Ie.openUserId!==ie[0].name).map(Ie=>Ie));var Ke=pe.map(Ie=>(0,$.Z)((0,$.Z)({},Ie),{},{unionid:Ie.openUserId,id:Ie.openUserId,user_id:Ie.openUserId,source_type:"wx_sync"})),ze={qyWeChatVo:JSON.stringify(B),user:Ke},Ve=B.selectedUserCount-Ke.length;Ve>0&&O.default.warning(c.Z.t("component.selectedErrorTips2",{count:Ve})),ce(ze)}if(S==="normal"){var be=pe.map(Ie=>(0,$.Z)((0,$.Z)({},Ie),{},{unionid:Ie.openUserId,id:Ie.openUserId,user_id:Ie.openUserId,source_type:"wx_sync",qyWeChatVo:JSON.stringify(B)})),Qe={qyWeChatVo:JSON.stringify(B),user:be},He=B.selectedUserCount-be.length;He>0&&O.default.warning(c.Z.t("component.selectedErrorTips2",{count:He})),ce(Qe)}})}},4412:function(Ne){Ne.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAACPCAYAAAD0gYXiAAAW/ElEQVR4Xu2dCZAcV3mA/9fHaGZ2V9qVdlejvbQ7O7NaWdqNTbgxlmVbxkeME3AcHJwqKhCC44AJV0zZjg8ScwRDqLIMwUnsJEAKF4aCGEIigyVjAthQMTLWbcnyCmmtY6/Znav7vT/190yvenp7prtHM5Lm6NLUaHve1f/X//W6+zWD5lazEmA1O/LmwKEJr4ZPgia8JrwalkAND72peU14NSyBGh56U/N8wkNE6ZVXXrlIUZQrEPG5vr6+H/tsomLFm/A8iHJ6enowlUptYYxdwTm/HABWIaJZ89uqqn4sEokc8tBURYs04TmIc2ZmpiOTyVwmhLiCgAkhYlTMBObwnQaALwaDwfu7u7vnK0qoRGNNeDkogZmZmTdrmmZoFyL+rhBCLgbMCs8G8igAfHJgYODfGWOLqlktmA0JDxHZ9PT0GCJuAQCC9VZEbHGCYgJ00rpimggAzwohbhsaGvp5tcBRuw0Hb3p6+osAcBMiribhu0FxBJRKA2Q1wOWtBfVtZUnzvp7JZG5ft27db6sBsaHgzc7OXiuEeKIYtKJmUteBvTwBbM8BkPYeBPbKEQBZBn3zm0G77GJAVTHYOIFmjJEP/AwiPjA0NES+sWJbw8BDRHV2dvY3iDhSwmflANDn2KsAew4YwNj+l4Fls45CxxXLIft7l4N+0RggnHZzDifIywDw8Wg0+q1K0WsYeHNzcx/lnH++aNQ4MwewZz/A7gM5aHMJXzIWg32Quf4q4P1rSkWlwBjbAQC3RaPRX/vqwKFwQ8BLJBLdnPN9ALCiQOt+OwnwzLMAu/fnNK0Cm/a634Hs1ZeBaGtZYkpNbWSMcUT8J0S8Kx6Pnyi324aANzc391VE/LMCU6ZzwPu+ADB5vFzZFa2HywKQvfxiyL719QCKAkKIxbI2k70tHo9fWe4A6h7e9PT0RbIsP2fmbabZFD/6CcA3v1eu3DzVEys7IHPdFaBtGClmSlOyLK8sN5Cpe3hzc3M7EPGSAl+XmAdx52cBkilPEM60kB4bhPR1W4BHupZAFEJsGRkZebKcPuoaXjKZ/ENd1x+zBynia48D7vhZOfIquw5KDFI3vxOyF8QLTCgifjYej99eTsN1C29iYiLU0dGxWwixtgDexFHgn/oCgKj67NUSHtqFGyB50/WG9lkmtn8Vi8Ve24RnkcDCwsJdQoj77Ikz//yXAfccKEdWZ1xHtLZA4s4PLWaD+bGJYDDY3dfXd8pvB3Wpeclksg8R9wghjHjdBCh+tRP4Q4/6lVFFy89/+H2gR7rsacQfxeNxw7z72eoV3teEEO+2mCbArAbanZ8BODnlRz4VL5u+9nLIXPIGu+l8OBaLvd9vZ3UHT9O0N2Wz2Z/SlQOryeTffxLEt3/gVz4VL6+NRCH53nfZ4b0ci8WG/HZWV/AIWCqV+gUivq4gGZ6ZBe2TnwbIZPzKpyLlWVsLKBvXgzq2HpT1cTiSSoKQcqK3WId4LBbz5YzrCl4qlXoPIj5ii+ZAe/jrIP73uYqA8NSIqoIyGgN1/AIDmDzYD0ySFqtO7t4DyWWBgpSBMXbL8PDwVzy1ny9UN/BOnDjR1trauhcR11i1Thw8DNqn6BJeFTfGDEAmLALHAqfh2HuenZyEqVSqwHQyxh4fHh6+wc8o6wZeJpMZFULstqcG2fu/BGLfQT8y8VRW6u4EZWx9DtjGUZDaWkvWo3HxiaOgvbAb0ocnYObqSxfNZn7M08PDw52MsdMToS4jqRt4dJypVGoCEftMX0JCyX5uKyBdNTjDjbWEQdk4etoURrpdW+RT06C/sBu0nbsNaDgzmwPGGCT+5q9AhJYV+D1Jkt4QjUafdW243swmHU8mk3mEc/4eKzz+xJOgP/6EV3mcLqcqoKyLGT7L8FvRtQV+y6lBkUqDvmsvaDt3GbDEkWNF+03e/A7QxkYLTKckSXdEo9H7vQ623jSPcruvmfDom3xeli79uG0MQF7bn4sIyRSOxoFZggqn6sg56PsPgfbCLtB37gb9wEEA7s3qZd/4Gkj9wVX2iertsVhss9tQzd/rCh7dVJROp49RyrAIUAhIf/AOgIXkEpmwzpWgjl0A6vh6UDeuB2lFm7vf+u0k6C/sypnCXXsB6GakMjaxqgMSn7hl0Wzm/V4mHA6v7OnpWTpYhz7qCh4dXzqd/rUQYtxqOrWtj4L45fPAwqGc38oHGvKa1a5iF5QjGj4rZwpxasa1jtcCidtvBd6+vMDvAcDVsVjsh17aqEd4DyDiRwqumu89AIHWVlCGB139FqYzoO3al4O1czeIiarctQeiYwXMf+zPARWlwHQyxu4eHh6+r1HhXY2IPyhIGRLzEF7tHB0afuullw2fZfguSis49yK7MyqTooBlfL3d5yWDweBob2/vhJfG607zEDGcyWSmhBBGHG5qYFDTQW5fYciEH51cjAj1F/cCnqUr6iYQPToAyQ/8id3f0d/3Dg8P3+MFHJWpO3h0UKlU6ilENLJgUwPZ7n3An33eMIV46txdWaAcL3nbe4H35PytxUJMhEKhUa/BSj3DuwMA/tbq9/hzz4O29RGvJ3XVymlveA2kb7hmidYxxv54aGjoP/x0XJeal81mX885p6sLp4U0vwAZShlOP1fnR04VKYvBZZC8/VYQLWG71v00Go1e7LeTuoSHiHI6nT6BiB1W05S59wHAQ6/4lVHFymffvgWyl7zRrnVCkqTXr1279ld+O6pLeCSEdDr9OCK+w6p92reeAP7ENr8yqkh50bUKUh//AGD+0pDlOt6/DA4OvrecTuoZ3i2I+JDV74ld+4yJ6nOxpd93E/D1udv+LGOaC4VCI6tXry7rXvt6hhdDxP0F+Z6uQ/bL/wp0I9LZ3PhoDDLvf/eSG24B4K/Xrl37uXLHUrfw8qbzkBBi0BaSg9i9H/RvfAfwCD2FXN2NzGTmE7eA6O60wzswMDCwgTHm/OyYh2HVO7yHEfF99tsijL85B77jZ8C/818A8wseRFVeEX3TG0H7/dzVA+vdbLIsX9/b23tGD0vUO7y3AcB3rbMtNp8DuJAE/t3/BvHjZwAsT/OUh6qwFraEIXPHhwBDQeMH82khSZK29fX1lf10kNlLXcPLm86YEIIu6F1XMFltyQENwR6dBPHN7wH+Zs8ZccOOdhDrhkGsiwKPRwFaw3at04UQF65du/bFM+qoXqfHnISSTqe3cM7/AQAuWKJ9FpMmdu4yIMKrHp95DAVBjEQB1w0DrouB6Fppjyjtvu7B/v7+D54pOKpf95pnFRIiKqlUilKIv0fEZQUzMFZN5BzEj54BpJzQfrFVlgGjA4CjMYDRGIj+XgCJlXyU2RIwnaJn4vv7+ysyudpQ8EiIx48fv0SW5e2yLDNZNtbJKb6cBz3H950fAhw6DEA52mgMMD4EEAgUmELHgMg6NZf/P2PsL3t7eyuWaDYUPFr07dSpU78EgIsMs8MYKIoCkiQVXU/Ffithqb+dfmOMzQohtgPAtp6enq/Q8+iVMJkNZzZPnTpFz6V/1S48gkdaSDCLmVIf0DTG2M+FEE/SZ9++fc9u3rxZrxQwazvnjeY99dRTfYFAYGtbW9vbq3KgjEF3d7cBqUhAA5xzWL58+aImegFGVhcAdiGiAUuSpO1na/G48wLe9u3b3wQAtPRhpq2tzXiStdLbihf2Qks4DPCW1wFYnhswfd7x48cNeAS3vb0dWlpaigYhuq6nZVmmxXC2EbSurq7qT9U4COScw3v66affwzknX7BMVdXD1YCnpDLQ/eCjwNIZwN41ADdeBzASXRTH/Pw8zM3NFYgnEAhAR0cH0Dcl15lMBpLJ5MmTJ092ptNpMrGU/N+8efPms7ZEo53fOYP32GOPyd3d3TQp+xFzUNWC1/nDHbDsucIFh/CijQDvvAZ4+wqKQAumrqxCUlUVNE0zdmWz2cPz8/OLloEx9gIAXL9p06azvlDqOQtY7rnnHunSSy/9PgBcZRNUxTUveGIKVv3j152voCsKzNz2p7AQzk1fuW12ePnyJxljV27atOn/3OpX+vdzonkvvvhia3d3t7G4l3Wylv4UQhSMyWuobrZla48azIEz/hUu7GbUsUSY1vEUCfux4G7s/Pg553eOjY39XaXhuLV3TuAdP368VZKkxBJB2+Ybi4ErCsqlvh2O3/6LwW0oeKR5kUhkEZ5ViE55lpPQvOyjtszczX4ieKlvnvlOE9rW+rquN47m0ZrOU1NTxgPi9qklN9NlN7VeoLhpsFubbvUbFl4pWE5w/cAqVd/LSeK1PgB8eHR09EtuPqrSv58Tn0eaNz09nbGbSyfzWUkhu2mQV1Nqb4cxduu6deseqjQct/bOKTwnc1XM/7kJ1ouWlmrbS/1iJ1LDwvNiNq1lstksLCwsFCxAav5OZ+JKkEDqWuV40lLd2dn8c+GWO6cpqKFpMZpNcfN/Rfx0Y2nezMyMY8BSyqfpug4nT54sak2W/2YftP3nNsDNbwG45jKA4Onkm9qluuZsiVMjy5YtA5pR8QrQUq4x4fnxaclkcskcpAlB1nRYvfXfgCXyU41trYDXvw3gTa81rnRT3ZmZ0k+1kvaFw7l7TooBdNI8MpvxeLxxfN7s7OxiwOLVF5HZm5pyvoNg5Y5fQOjpXyxVqIFeEDdeB6+2BJeYWnth0rpgXluLBVNOY21IeG5BiFN0SLP/pEXWLTCXgE7SOt35InXihmtgbr3xLqeiG12QJa2zX1UvNkarBjYcvLm5uSWa5zWHo0s0dO3NFKCcWAApf+OsPemn5YG17s4lZtBuFgmaFxNeJJ1pLLNphVeOBpYRVJT0ZX5SFIeyjQfPtGHFkmcvmlhKW5yCCy9tepk8sJVpwiulgaUEWi5AL2ay1Alg+a2x4CUSicU8z4vw3cykn6kvN2iUtDu9haRYPURsLHjz8/OuAUu5c51e8jQ3gMVOliLW4dbh4eHGyfOs8Lxqnt2EeQkySmlsBes3FryFhQVD87wI0EmT/GhOJTW4SL+NCc+rLzuLkaNjvudysjQePK/5nR9z6SdiLbd/ez0KWBrK55HZdMvzKqVtXn2qnxzQaoqFEI0FL5lMlp0q+PGT5YLz0ofZNs1tDg4ONk60WQyeqY1+8iy73/RjZksFQ141seHgpVKponmek7n0E12WW9/Bl5nnkmMQY9HOxtI8Kzy/gUO5vrAUHC9a5lQ/f19oY8FLp9OeZ1is/qccDfSajpQDkNomszkwMFB/Pm9qaoqWIvwLXdcv0TSti3N+Qtf1n65Zs+bGcoVVqXnMUhrs5SSxBix1BY9WXkgmk1/inN+iaRqjm4esn56eHs/JcKWEXO5Mi1vECgD1pXnpdHor55w0rgCa+Xdvb6/r8hdO5s5LCF8Kkpf6fhP9uoKnadrFiPi0k8ZZ4fkVkh8zWyVIxj0u5rgpnaEPIj7POf/nVCr16IYNG87ak7JVuWOac/4NXddvKqZ1tJ80z9zcoJQC4TVSPVM/SbcF0scEZn7TvTQWiK/quv6h0dFR3+9/LchJPP5RFXhCiCOapvUWg0cH7GQ2ywVRbfNKa7XQx7zxqRRAIQQ9IHrH+vXrP+2RQdnFqgKPc57RdT1QSvP6+ow3pS2aIDftc9PSatUnaOaiAh7hEWQC+K4NGzZUVQOrAs9N8whqf3+/r4DFiw/zUsZPCkBlzTuoi4FzMp/5sq8yxmLV9IFVgefm88hsmprnxxd50S4v/tErZLvWlQBV4AstfvCD4+PjD5ZtF10qVgWel2hzYGDAVfO8gPCrSV7AmWVCoZDxWLSLjzNuALaXyWvfk+Pj41tqCh4N1i3Pc4JXbsBSLcjmKkhWMHZQJcAR0KPj4+Onw+oKU6yK5uUhlJxhIXhOAYsJ0OtsSLHyXudDS/XX2tq6RKtcYC1qIJVDxOzY2FjuxbBV2KoCj9Yq2bdvX08mkxlub2+/MhAI0HrKcSFEq6Zp85qm7R8cHHwNvXnkfNM26wllDVa8+jurliLiSVVVLxwZGTnKGDu9CEyFQFYU3sGDB1enUil68wMt8VTyjIvFYh+VJMlYMtgKsJQmeAluvPjAUoGPtT49bGn3eU6aV2wfALzIGKP1remugcOhUGh/NBot6wUYTrzPGN7+/fuXCSGGhBAxWZZLv3TVMoKWlpb+SCRyFyK2Wk2c3yvopcB7CU6c6pv7rMl5Mc1zSiFMmIyxR1VV/R+b4OcQ8SVJkg7F4/HF+3jKUcay4U1OTraQliHigBAiN+HnsplrXZqPZ7W2tna2t7dfyxgjB7jYhk+YdAwsv6xU7jt3hVSi/yO1i8AQkPYtlhUCpdw+WmcbGa23Y5RHkauX39/W1tZOV0j85nmIOK0oyq2SJKVMsViPX5IkwRh7hbQxEomU9WIH3/Bo6an5+flhxljkfFhgXJIkhTGmIKKa+5ZUxoTxjUjfqJLwcx+mInIFABWdiwCC8bsiBCpC5yrtFwiK4JoqBCgCudrR3t4XiUQu5JwzH34PJUn6dCAQ+InbCZ1bRwgnU6nUS34Tes/w6CCPHDkyiIg9jM7sEhvNoFg3Mj/Wrdjv9v3FurC2xzmXA4EAaYZKH0lSjf9LElOE0FXOCV4OKM+DBAEqMlS4pqkCqB6oIHiuDRSK4Ej7FeRC5ZyrkcjqkY6OjnUmwFLpApEAgIdVVf2GOX4vx0/HTqlFNBo9xBjztKyxJ3iTk5PdmUymPxAIOK/x63J6eYVlP0gPZy1ZSNIIVQimShKqTFEMCKRxBkSU6NvQQAOeAZOrKDFF17QAlWGkfQRRz50A9OEoVBBC4VxQGaW9fUV/Z+eqDRSIFcv7EPEUY+yBcDj8o3JO1vzkty7L8pFIJHLc7fhLwiNtm5yc7GOMeQ5E3Dqsxu9kOjmXVEniqiQRLPpwVbAcPGOSPA/UMKOcq8hIM3mA/i8AjH2L4AwN5CqBQ2qHG54zoUhysre3p0VRlI1CiGFd1+nlitOc85cA4KlgMEjvBvL0gno3OSBiIhKJHCmlhUXhHT16NBwOh1dns9lCm+fW6zn4nbEgkySNTFyAS5IqcQNeAFGoTJVU1ISqaVqAwOqY00oqC3mQBBck0JBDGplIyoxRADGvBINzKmNz4XD4rF1gtYovEAjoyWTy1WIvAXaER6+rnpqaoveqeDKr54DXki51XVYJoCzLAdJCxpgqRCaQ00IyfVyWJJkjIhdCaEJkNQA1raqBZCgkJ4U1RzkfDig/hlAohKFQaIoxtkSjl8BBxJZkMrmc6iaTSUd44XDYcbbALF/sd1MmfsvZZenUfjqdljVNUyUpJMOy/EmXAQyQYeRcDwaDi0FANfq3yqsax9/Z2TnLchZhcSuAMzExEWpvb28rBo0maq0brQHmZzPrF6tnHnSzf2el6e7unmOMLeaNi/DIDyQSiRV+YDTLnn0JtLW1kQYay80b8PKzE8tnZ2cdZ0oSiYSj+Wxrayswn2Y5r/vNQzfzxnyOtEQizf5Py7+lpYV3dHSQBhrTRXDo0KHgihUrqnbp4uyfn/XdI63bNjQ0lDbg0ZRXV1eX5yM+caLwxYBe65Zbzz6wctspt9752D+9r4gmY5Vjx47lVgm1bWvWrCkwi8eOHTNgF9vvmb7Hgs3+S8pfI3i0Oqjh6w4cOOBJrLFY4Qp6Zj37fk+NWQo1+/clf2Fonl8hN8ufHxIgeNK9995bMJq77777rI6u2X958q+Z6a+zejbVSGdNeDUCymmYTXhNeDUsgRoeelPzmvBqWAI1PPSm5jXh1bAEanjoTc1rwqthCdTw0Jua14RXwxKo4aE3Na8Jr4YlUMNDb2peE14NS6CGh97UvCa8GpZADQ+9qXlNeDUsgRoeelPzmvBqWAI1PPSm5jXh1bAEanjo/w+0S4IKs9Wq0AAAAABJRU5ErkJggg=="}}]);
