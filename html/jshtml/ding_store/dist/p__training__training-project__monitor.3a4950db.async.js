(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[6920],{53009:function(Bt,Pe,t){"use strict";t.d(Pe,{TD:function(){return j},$S:function(){return c},aI:function(){return Q},Bg:function(){return Z},tT:function(){return z},XN:function(){return R},YK:function(){return le},$x:function(){return H}});var _=t(81211),e=t(88986),D=t(78138),u=t.n(D),A=t(78001),g=t(76651),de=t(38642),L=t(6793),S=t(37055),h=t(75205);function ge(m){return m.map(f=>({name:f.name,id:f.id,proportion:0,disabled:f.totalCount===0||f.total_count===0}))}function V(m,f){return f.map((_e,W)=>(0,e.Z)((0,e.Z)({},m[W]),{},{disabled:_e.total_count===0}))}var T=m=>{var f=0,_e=m.checkedValue,W=m.fillBlank,B=m.shortAnswer;return _e===2?W.checked&&!B.checked?f=3:!W.checked&&B.checked?f=4:f=2:f=1,f},ae=m=>{for(var f in m)m[(0,de.FI)(f)]=m[f];return m},j=(m,f,_e,W,B,i)=>{var n=m.map((r,Y)=>{var G=r.list.map((s,o)=>{var p,d=s.data,X={};switch(s.componentName){case"CoursewareSelector":X={courseId:s.id,courseSort:o,courseType:3,flag:1,mappingId:s.mappingId?s.mappingId:""};break;case"CourseSelector":X={courseId:s.id,courseSort:o,courseType:1,flag:1,mappingId:s.mappingId?s.mappingId:""};break;case"AddExam":X={courseSort:o,title:d.title,type:"ex",cheatFlag:d.cheatFlag.isChecked?1:0,faceRecognition:d.cheatFlag.faceRecognition,examDuration:d.examDuration,summary:d.summary,flag:2,mappingId:s.mappingId?s.mappingId:"",courseId:s.id,markType:T(d.markType),paperId:d.questionsMode===1?d.fixedQuestion.id:"",paperTitle:d.questionsMode===1?d.fixedQuestion.name:"",passLine:d.passLine,questionBankList:d.questionsMode===1?"":d.randomQuestion.bankQuesitonVoList.map(be=>be.id).join(","),questionMode:d.questionsMode,showKnowledge:d.knowledgePoints===1?"show":"hide",repeatExam:d.reExam.isChecked,multipleCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.multipleCount,multipleUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.multipleScore,fillBlankCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.fillBlankCount,fillBlankUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.fillBlankScore,fillBlankType:d.questionsMode===1?1:d.randomQuestion.bankQuesitonInfo.fillBlankType,shortAnswerCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.shortAnswerCount,shortAnswerUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.shortAnswerScore,shortAnswerType:d.questionsMode===1?1:d.randomQuestion.bankQuesitonInfo.shortAnswerType,singleCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.singleCount,singleUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.singleScore,trueOrFalseCount:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.trueOrFalseCount,trueOrFalseUnitScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multipleMissedScore:d.questionsMode===1?"":d.randomQuestion.bankQuesitonInfo.multipleMissedScore,totalScore:d.questionsMode===1?d.fixedQuestion.tableList.totalScore:"",answerParsing:d.reExam.isChecked?d.reExam.allowed.end:d.reExam.notAllowed.end,passingScore:d.questionsMode===1?Number(d.fixedQuestion.tableList.totalScore*d.passLine/100).toFixed(1):60,cutScreenCount:d.cheatFlag.switchNum!==null?d.cheatFlag.switchNum:-1,reExamRule:d.reExam.allowed.reRule,reExamNumber:d.reExam.allowed.reRule===2?d.reExam.allowed.reNum:0,scoreRule:d.reExam.allowed.record,viewRule:d.reExam.allowed.viewRule,proportional:d.questionsMode===2&&d.isOpenDrawQuestions?d.proportional:[],anonymousMarking:"".concat(d.markType.anonymousMarking),show_result:d.reExam.show_result};break;case"AddNewExam":var C=s.data,k=C.paperInfo,F=C.exam_times,P=C.cut_screen_times,b=C.random_order,O=C.mark_setting,x=C.result_visible,oe=C.face_recognition,Re=(0,_.Z)(C,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);X={courseSort:o,flag:15,courseType:15,type:"ex",courseId:s.id,mappingId:s.mappingId?s.mappingId:"",new_exam:(0,e.Z)((0,e.Z)((0,e.Z)({},Re),(0,h.jJ)(oe)),{},{paper_id:k.id,answer_rule:F.answer_rule,exam_count:F.exam_count||1,cut_screen_rule:P.cut_screen_rule,cut_screen_count:P.cut_screen_count||1,cut_screen_interval:P.cut_screen_interval||0,random_question:b.random_question,random_options:b.random_options,mark_type:O.mark_type,mark_question_type:{fill_blank:O.mark_type===h.lt.MANUAL?O.fill_blank:!1,short_answer:O.mark_type===h.lt.MANUAL?O.short_answer:!1},anonymous_marking:O.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...O.marker_list.map(be=>typeof be=="string"?be:be.id)],result_view_rule:x.result_view_rule,answer_parsing:x.answer_parsing,ranking_list_view_rule:x.ranking_list_view_rule,show_result:x.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};break;case"OfflineTrain":X={courseSort:o,flag:3,id:f&&!B?s.id:"",type:"xx",mappingId:s.mappingId?s.mappingId:"",title:d.title,begin_time:u()(d.dateRange.startTime).valueOf(),end_time:u()(d.dateRange.endTime).valueOf(),attachment:d.attachment.map(be=>be.id),course_duration:d.course_duration||"",lecturer_id:d.teacher.id,is_lecturer_confirm:!!d.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!d.teacher.is_lecturer_subsidy,address:d.address,introduction:d.introduction,is_open_offline_assessment:d.assess.is_open_offline_assessment,is_open_upload:d.other.is_open_upload,is_open_schedule:!1,remind_type:d.remind.remind_type,advance_minute:d.remind.advance_minute?Number(d.remind.advance_minute):0,is_lecturer_remind:d.remind.is_lecturer_remind,is_student_remind:d.remind.is_student_remind,is_lecturer_student_evaluate:d.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:d.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:d.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:d.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:d.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:d.evaluate.student_course_evaluate_content,assessment_total_score:d.assess.assessment_total_score,assessment_pass_score:d.assess.assessment_pass_score};break;case"AddInvestigate":_e==="study"?X={courseSort:o,courseType:9,flag:4,id:s.id,questionnaireId:s.questionnaire.id,title:s.name,type:"questionnaire",mappingId:s.mappingId?s.mappingId:""}:X={courseId:s.id,courseType:9,flag:9,courseSort:o,investigate:{id:s.id,title:s.name,questionnaire_id:s.questionnaire.id}};break;case"AddPracticeTest":X={courseType:10,courseSort:o,flag:_e==="study"?5:4,type:"sc",id:s.id,title:s.data.title,content:s.data.content||s.data.address,resources:s.data.attachment.map(be=>({resourceId:be.id})),scoreSetting:{scoreSwitch:s.data.mark.isFull?"on":"off",score:s.data.mark.value},workflowJson:s.data.workFlowTemplateId?{}:l(s.data.supervisor),mappingId:s.mappingId?s.mappingId:"",job_type:s.data.job_type,workFlowTemplateId:s.data.workFlowTemplateId};break;case"AddJobEvaluation":X={courseSort:o,flag:6,title:s.data.title,productId:s.data.evaluationTools.product_id,modelId:s.data.evaluationTools.model_id,id:s.id||"",mappingId:s.mappingId?s.mappingId:""};break;case"Attendance":X={courseSort:o,flag:13,id:f&&!B?s.id:"",type:"attendance",mappingId:s.mappingId?s.mappingId:"",title:d.title,directors:d.directors.map(be=>typeof be=="object"&&(be.id||be.user_id)?be.id||be.user_id:be),name:d.name,qrcode_type:d.qrcode_type||"statics",sign_in_begin_time:d.sign_in_begin_time?u()(d.sign_in_begin_time).valueOf():"",sign_in_end_time:d.sign_in_end_time?u()(d.sign_in_end_time).valueOf():"",sign_out_begin_time:d.sign_out_begin_time?u()(d.sign_out_begin_time).valueOf():"",sign_out_end_time:d.sign_out_end_time?u()(d.sign_out_end_time).valueOf():"",relate_course:d.relate_course,relate_course_list:((p=d.relate_course_list)===null||p===void 0?void 0:p.length)>0?d.relate_course_list:[],remind_directors:d.remind_directors,advance_minute:d.advance_minute||0,qy_we_chat_vo:d.qy_we_chat_vo,address:d.address,longitude:d.longitude,latitude:d.latitude,address_detail:d.address_detail,sign_range:d.sign_range};break;case"AddAssessment":X=(0,e.Z)((0,e.Z)({},ae(s.data)),{},{tutorId:i,courseSort:o,courseType:14,flag:14});break;default:break}return W==="unlock_mode"&&d.unlockingTime&&(X.unlockingTime=u()(d.unlockingTime).valueOf()),X.resource_lock=s.resource_lock||!1,X});return{content:r.desc,stageName:r.name,isOrder:r.inOrder,stageSort:Y+1,stageId:f?r.stageId:"",startTime:W==="unlock_mode"&&r.studyTime?u()(r.studyTime[0]).valueOf():null,endTime:W==="unlock_mode"&&r.studyTime?u()(r.studyTime[1]).valueOf():null,course:G}});return n},c=m=>{var f=m.map((_e,W)=>({content:_e.desc,stage_name:_e.name,is_order:_e.inOrder,stage_sort:W+1,stage_id:_e.stageId,resources:_e.list.map((B,i)=>{var n=B.data;switch(B.componentName){case"CoursewareSelector":return{course_id:B.id,course_sort:i,course_type:3,flag:1,mappingId:B.mappingId};case"AddMentorCoaching":return{course_id:B.id,tutorials:{id:B.id,title:n.title,content:n.content,model:n.model,tutor_model:n.tutor_model,evaluation_type:n.evaluation_type,user_id:n.user_id||"",user_name:n.user_name||""},course_sort:i,course_type:12,flag:7,mappingId:B.mappingId};case"CourseSelector":return{course_id:B.id,course_sort:i,course_type:1,flag:1,mappingId:B.mappingId};case"AddExam":return{exam:{id:B.id,title:n.title,cheat_flag:n.cheatFlag.isChecked?1:0,exam_duration:n.examDuration,face_recognition:n.cheatFlag.faceRecognition,summary:n.summary,mark_type:T(n.markType),paper_id:n.questionsMode===1?n.fixedQuestion.id:"",paper_name:n.questionsMode===1?n.fixedQuestion.name:"",pass_line:n.passLine,question_banks:n.questionsMode===1?"":n.randomQuestion.bankQuesitonVoList.map(k=>k.id),question_mode:n.questionsMode,show_knowledge:n.knowledgePoints===1?"show":"hide",repeat_exam:n.reExam.isChecked,multiple_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:n.questionsMode===1?1:n.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_type:n.questionsMode===1?1:n.randomQuestion.bankQuesitonInfo.shortAnswerType,short_answer_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.shortAnswerScore,single_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.singleScore,multiple_missed_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.multipleMissedScore,true_or_false_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.trueOrFalseScore,total_score:n.questionsMode===1?n.fixedQuestion.tableList.totalScore:"",answer_parsing:n.reExam.isChecked?n.reExam.allowed.end:n.reExam.notAllowed.end,passing_score:n.questionsMode===1?Number(n.fixedQuestion.tableList.totalScore*n.passLine/100).toFixed(1):60,cut_screen_count:n.cheatFlag.switchNum!==null?n.cheatFlag.switchNum:-1,re_exam_rule:n.reExam.allowed.reRule,re_exam_number:n.reExam.allowed.reRule===2?n.reExam.allowed.reNum:0,score_rule:n.reExam.allowed.record,view_rule:n.reExam.allowed.viewRule,proportional:n.questionsMode===2&&n.isOpenDrawQuestions?n.proportional:[],anonymous_marking:"".concat(n.markType.anonymousMarking),show_result:n.reExam.show_result},flag:2,course_sort:i,course_id:B.id,course_type:6,mappingId:B.mappingId};case"AddNewExam":var r=B.data,Y=r.paperInfo,G=r.exam_times,s=r.cut_screen_times,o=r.random_order,p=r.mark_setting,d=r.result_visible,X=r.face_recognition,C=(0,_.Z)(r,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_sort:i,flag:15,type:"ex",course_id:B.id,course_type:15,mappingId:B.mappingId?B.mappingId:"",new_exam:(0,e.Z)((0,e.Z)((0,e.Z)({},C),(0,h.jJ)(X)),{},{paper_id:Y.id,answer_rule:G.answer_rule,exam_count:G.exam_count||1,cut_screen_rule:s.cut_screen_rule,cut_screen_count:s.cut_screen_count||1,cut_screen_interval:s.cut_screen_interval||0,random_question:o.random_question,random_options:o.random_options,mark_type:p.mark_type,mark_question_type:{fill_blank:p.mark_type===h.lt.MANUAL?p.fill_blank:!1,short_answer:p.mark_type===h.lt.MANUAL?p.short_answer:!1},anonymous_marking:p.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...p.marker_list.map(k=>typeof k=="string"?k:k.id)],result_view_rule:d.result_view_rule,answer_parsing:d.answer_parsing,ranking_list_view_rule:d.ranking_list_view_rule,show_result:d.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddPracticeTest":return{operation:{id:B.id,title:B.data.title,content:B.data.content||B.data.address,type:"sc",resources:B.data.attachment.map(k=>({resourceId:k.id})),score_setting:{scoreSwitch:B.data.mark.isFull?"on":"off",score:B.data.mark.value},workflow_json:l(B.data.supervisor),sort:i,job_type:B.data.job_type},course_type:10,course_sort:i,flag:5,mappingId:B.mappingId};case"AddInvestigate":return{course_id:B.id,course_type:9,flag:4,course_sort:i,investigate:{id:B.id,title:B.name,questionnaire_id:B.questionnaire.id}};default:return null}})}));return f};function l(m){var f=[];if(m.type==="multilevel"){var _e=m.multilevel;_e.forEach(W=>{var B=[];W.forEach(i=>{B.push(i.id)}),f.push(B.join(","))})}else m.type==="or"?(m.or.forEach(W=>{f.push(W.id)}),f=[f.join(",")]):f=[];return{type:m.type,userIds:f}}var Q=m=>{function f(i){if(i.questionMode===1){if(i.paperVo.fillBlankCount>0||i.paperVo.shortAnswerCount>0)return!0}else if(i.fillBlankCount>0||i.shortAnswerCount>0)return!0;return!1}function _e(i){if(i.questionMode===1){if(i.paperVo.fillBlankCount>0)return!0}else if(i.fillBlankCount>0)return!0;return!1}function W(i){if(i.questionMode===1){if(i.paperVo.shortAnswerCount>0)return!0}else if(i.shortAnswerCount>0)return!0;return!1}var B=m.map((i,n)=>({key:"".concat(new Date().getTime()).concat(n),desc:i.content,name:i.stageName,inOrder:i.isOrder,stageId:i.id,studyTime:i.startTime?[u()(i.startTime),u()(i.endTime)]:["",""],list:i.courseMappingList.map(r=>{var Y,G,s=r.planExamVos,o={},p,d;switch(r.flag){case 1:r.contentType==="audio/mp3"||r.contentType==="audio/mpeg"||r.contentType==="audio"?(d="mp3",p="mp3"):(d=r.type,p=r.type==="imageText"?"h5":r.type),o={id:r.courseId,name:r.name,type:r.courseType===1?"course":"courseware",icon:S.e1[p],originalType:d,componentName:r.courseType===1?"CourseSelector":"CoursewareSelector",status:r.courseType===1?"0":r.status,duration:r.duration,data:r,mappingId:r.mappingId};break;case 2:o={id:r.id,name:r.name,type:"ex",icon:S.e1.ex,componentName:"AddExam",duration:s.examDuration*60,data:{title:s.title,examDuration:s.examDuration,summary:s.summary,isOpenDrawQuestions:s.proportionalExamVos&&s.proportionalExamVos.length>0,proportional:s.proportionalExamVos&&(s.proportionalExamVos.length>0?V(s.proportionalExamVos,s.bankQuesitonVoList):s.questionMode===2?ge(s.bankQuesitonVoList):[])||[],cheatFlag:{isChecked:!!s.cheatFlag,switchNum:s.cutScreenCount===-1?null:s.cutScreenCount,faceRecognition:s.faceRecognition},reExam:{show_result:s.show_result,isChecked:s.repeatExam,userJoin:s.user_join==="true",notAllowed:{end:s.answerParsing},allowed:{reRule:s.reExamRule,record:s.scoreRule,end:s.answerParsing,reNum:s.reExamRule===2?s.reExamNumber:1,viewRule:s.viewRule}},markType:{checkedValue:s.markType===1?1:2,artificialDisabled:s.markType===1&&!f(s),fillBlank:{checked:(s.markType===2||s.markType===3)&&_e(s),disabled:!_e(s)},shortAnswer:{checked:(s.markType===2||s.markType===4)&&W(s),disabled:!W(s)},anonymousMarking:s.anonymous_marking==="true"},questionsMode:s.questionMode,knowledgePoints:s.showKnowledge==="show"?1:2,passLine:s.passLine,fixedQuestion:s.questionMode===1?{id:s.paperVo.id,name:s.paperVo.title,tableList:{fillBlankCount:s.paperVo.fillBlankCount,fillBlankScore:s.paperVo.fillBlankScore,multipleCount:s.paperVo.multipleCount,multipleScore:s.paperVo.multipleScore,shortAnswerCount:s.paperVo.shortAnswerCount,shortAnswerScore:s.paperVo.shortAnswerScore,singleCount:s.paperVo.singleCount,singleScore:s.paperVo.singleScore,totalCount:s.paperVo.totalCount,totalScore:s.paperVo.totalScore,trueOrFalseCount:s.paperVo.trueOrFalseCount,trueOrFalseScore:s.paperVo.trueOrFalseScore}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:s.questionMode===2?{bankQuesitonVoList:s.bankQuesitonVoList.map(O=>({id:O.id,name:O.name,data:O})),bankQuesitonInfo:{fillBlankCount:s.fillBlankCount,fillBlankScore:s.fillBlankUnitScore,fillBlankType:+s.fillBlankType||1,multipleCount:s.multipleCount,multipleScore:s.multipleUnitScore,shortAnswerCount:s.shortAnswerCount,shortAnswerScore:s.shortAnswerUnitScore,shortAnswerType:+s.shortAnswerType||1,singleCount:s.singleCount,singleScore:s.singleUnitScore,trueOrFalseCount:s.trueOrFalseCount,trueOrFalseScore:s.trueOrFalseUnitScore,multipleMissedScore:s.multipleMissedScore}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},mappingId:r.mappingId,isExamEdit:r.isExamEdit};break;case 3:var X=r.offline_course_vo;o={id:r.id,name:r.name,type:"xx",componentName:"OfflineTrain",icon:S.e1.xx,data:(0,e.Z)({},N(X)),mappingId:r.mappingId};break;case 4:case 5:if(r.type==="sc"||r.type==="operation"){o={id:r.id,name:r.title,type:"sc",icon:S.e1.sc,componentName:"AddPracticeTest",data:(0,de.UI)("PRIVACY_HLS_APPROVAL_MANAGE")?w(r):ie(r),mappingId:r.mappingId};break}o={id:r.courseId,name:r.title||r.name,type:"investigate",icon:S.e1.questionnaire,componentName:"AddInvestigate",data:r,mappingId:r.mappingId,questionnaire:{id:r.questionnaireId,name:r.name}};break;case 6:o={id:r.evaluation.id,name:r.evaluation.title,productId:r.evaluation.product_id,modelId:r.evaluation.model_id,type:"jobEvaluation",icon:S.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:r.evaluation.title,evaluationTools:{product_id:r.evaluation.product_id,model_id:r.evaluation.model_id}},mappingId:r.mappingId};break;case 7:o={id:r.id,name:r.tutorials.title,type:"tutor",icon:S.e1.tutor,componentName:"AddMentorCoaching",data:(0,e.Z)((0,e.Z)({},r.tutorials),{},{tutor_model:r.tutorials.tutorModel,evaluation_type:r.tutorials.evaluationType,user_id:r.tutorials.userId,user_name:r.tutorials.userName}),mappingId:r.mappingId};break;case 9:o={id:r.courseId,name:r.title,type:"investigate",icon:S.e1.questionnaire,componentName:"AddInvestigate",data:r,questionnaire:{id:r.questionnaireId,name:r.name}};break;case 13:var C=r.course_sign_vo;o={id:r.id,name:r.name,type:"attendance",componentName:"Attendance",icon:S.e1.attendance,data:(0,e.Z)({},y(C)),mappingId:r.mappingId};break;case 14:o={id:(r==null||(Y=r.evaluate)===null||Y===void 0?void 0:Y.id)||"",name:(r==null||(G=r.evaluate)===null||G===void 0?void 0:G.name)||"",type:"assess",componentName:"AddAssessment",icon:S.e1.assess,data:(0,e.Z)({},Xe(r.evaluate)),resource_lock:r.resource_lock};break;case 15:{var k=(0,g.Qm)()._store,F=k.getState(),P=F.user,b=(0,h.AC)({data:r.exam_plan_detail_v1,user:{id:P.id,name:P.name,creator:!0}});o={id:r.exam_plan_detail_v1.id,name:r.exam_plan_detail_v1.title,type:"ex",icon:S.e1.ex,componentName:"AddNewExam",duration:r.exam_plan_detail_v1.exam_duration*60,data:b,mappingId:r.mappingId,isExamEdit:r.isExamEdit}}default:break}return o.data&&(o.data.unlockingTime=r.unlockingTime?u()(r.unlockingTime):""),o.resource_lock=r.resource_lock,o})}));return B};function w(m){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources";return m.supervisor={lead:"",multilevel:[],or:[],type:"or"},m.mark={isFull:m.scoreSetting.score_switch==="on",value:m.scoreSetting.score_switch==="on"?m.scoreSetting.score:100},m.attachment=m[f],m}function ie(m){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"resources",_e=[],W=[];return m.workflowJson.type==="or"?m.workflowJson.nodeList[0].forEach(B=>{_e.push({type:2,id:B.id,name:B.name,show:!0,unionid:B.unionid,user_id:B.sync_user_id,source_type:B.source_type||B.sourceType})}):m.workflowJson.type==="multilevel"&&m.workflowJson.nodeList.forEach(B=>{B.forEach(i=>{i.user_id=i.sync_user_id}),W.push(B)}),m.supervisor={or:_e,multilevel:W,lead:"",type:m.workflowJson.type},m.mark={isFull:m.scoreSetting.score_switch==="on",value:m.scoreSetting.score_switch==="on"?m.scoreSetting.score:100},m.attachment=m[f],m}var Z=(m,f)=>{var _e=m.map((W,B)=>({id:W.id?W.id:"",content:W.desc,stage_name:W.name,is_order:f==="free_mode"?!1:W.inOrder,sort:B+1,progress:W.Standard.progressCheck?W.Standard.progress:"",exam_times:W.Standard.examCheck?W.Standard.examNum:"",practice_times:W.Standard.bankCheck?W.Standard.bankNum:"",operation_times:W.Standard.practiceCheck?W.Standard.practiceNum:"",finish_evaluation:W.Standard.jobEvaluationCheck?"true":"false",is_get_score:W.reward.getScoreChecked?W.reward.getScore:"",certificate_id:W.reward.certificateChecked?W.reward.certificateId:"",resources:W.list.map((i,n)=>{var r=i.data;switch(i.componentName){case"CoursewareSelector":return{course_id:i.id,replaced_old_id:i.replaced_old_id===i.id?"":i.replaced_old_id,sort:n,type:3,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"ClNewUpload":case"CourseSelector":return{course_id:i.id,replaced_old_id:i.replaced_old_id||"",sort:n,type:1,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"LiveClass":return{course_id:i.id,replaced_old_id:i.replaced_old_id||"",sort:n,type:16,lab_resource_id:i.lab_resource_id,lab_resource_name:i.lab_resource_name,resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"AddExam":return{type:6,sort:n,course_id:i.id,exam:{title:r.title,cheat_flag:r.cheatFlag.isChecked?1:0,exam_duration:r.examDuration,face_recognition:r.cheatFlag.faceRecognition,summary:r.summary,mark_type:T(r.markType),paper_id:r.questionsMode===1?r.fixedQuestion.id:"",pass_line:r.passLine,question_banks:r.questionsMode===1?[]:r.randomQuestion.bankQuesitonVoList.map(F=>F.id),question_mode:r.questionsMode,show_knowledge:r.knowledgePoints===1?"show":"hide",repeat_exam:r.reExam.isChecked,multiple_count:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:r.questionsMode===1?1:r.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:r.questionsMode===1?1:r.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:r.questionsMode===1?"":r.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:r.questionsMode===1?r.fixedQuestion.tableList.totalScore:"",answer_parsing:r.reExam.isChecked?r.reExam.allowed.end:r.reExam.notAllowed.end,passing_score:r.questionsMode===1?Number(r.fixedQuestion.tableList.totalScore*r.passLine/100).toFixed(1):60,cut_screen_count:r.cheatFlag.switchNum!==null?r.cheatFlag.switchNum:-1,re_exam_rule:r.reExam.allowed.reRule,re_exam_number:r.reExam.allowed.reRule===2?r.reExam.allowed.reNum:0,score_rule:r.reExam.allowed.record,view_rule:r.reExam.allowed.viewRule,proportional:r.questionsMode===2&&r.isOpenDrawQuestions?r.proportional:[],anonymous_marking:"".concat(r.markType.anonymousMarking),show_result:r.reExam.show_result},resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"AddNewExam":var Y=i.data,G=Y.paperInfo,s=Y.exam_times,o=Y.cut_screen_times,p=Y.random_order,d=Y.mark_setting,X=Y.result_visible,C=Y.face_recognition,k=(0,_.Z)(Y,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{type:15,sort:n,course_id:i.id,new_exam:(0,e.Z)((0,e.Z)((0,e.Z)({},k),(0,h.jJ)(C)),{},{paper_id:G.id,answer_rule:s.answer_rule,exam_count:s.exam_count||1,cut_screen_rule:o.cut_screen_rule,cut_screen_count:o.cut_screen_count||1,cut_screen_interval:o.cut_screen_interval||0,random_question:p.random_question,random_options:p.random_options,mark_type:d.mark_type,mark_question_type:{fill_blank:d.mark_type===h.lt.MANUAL?d.fill_blank:!1,short_answer:d.mark_type===h.lt.MANUAL?d.short_answer:!1},anonymous_marking:d.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...d.marker_list.map(F=>typeof F=="string"?F:F.id)],result_view_rule:X.result_view_rule,answer_parsing:X.answer_parsing,ranking_list_view_rule:X.ranking_list_view_rule,show_result:X.show_result,reward_rule:null,authority_range:null,supervisor_mark:null}),resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"OfflineTrain":return{sort:n,type:7,course_id:i.id,offline_course:{id:r.id,title:r.title,begin_time:u()(r.dateRange.startTime).valueOf(),end_time:u()(r.dateRange.endTime).valueOf(),attachment:r.attachment.map(F=>F.id),course_duration:r.course_duration||"",lecturer_id:r.teacher.id,is_lecturer_confirm:!!r.teacher.is_lecturer_confirm,is_lecturer_subsidy:!!r.teacher.is_lecturer_subsidy,address:r.address,introduction:r.introduction,is_open_offline_assessment:r.assess.is_open_offline_assessment,is_open_upload:r.other.is_open_upload,is_open_schedule:!1,remind_type:r.remind.remind_type,advance_minute:r.remind.advance_minute?Number(r.remind.advance_minute):0,is_lecturer_remind:r.remind.is_lecturer_remind,is_student_remind:r.remind.is_student_remind,is_director_remind:r.remind.is_director_remind,is_lecturer_student_evaluate:r.evaluate.is_lecturer_student_evaluate,is_student_lecturer_evaluate:r.evaluate.is_student_lecturer_evaluate,is_student_course_evaluate:r.evaluate.is_student_course_evaluate,lecturer_student_evaluate_content:r.evaluate.lecturer_student_evaluate_content,student_lecturer_evaluate_content:r.evaluate.student_lecturer_evaluate_content,student_course_evaluate_content:r.evaluate.student_course_evaluate_content,assessment_total_score:r.assess.assessment_total_score,assessment_pass_score:r.assess.assessment_pass_score},resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"AddInvestigate":return{sort:n,type:9,course_id:i.id||"",questionnaire_id:i.questionnaire.id,resource_lock:i.resource_lock||!1,title:i.name,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"AddPracticeTest":return{type:10,courseSort:n,sort:n,flag:4,course_id:i.id,title:i.data.title,content:i.data.content||i.data.address,resources:i.data.attachment.map(F=>({resourceId:F.id})),scoreSetting:{scoreSwitch:i.data.mark.isFull?"on":"off",score:i.data.mark.value},workflowJson:l(i.data.supervisor),job_type:i.data.job_type,resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"AddJobEvaluation":return{sort:n,flag:6,type:11,evaluation:{id:i.id||"",title:i.data.title,product_id:i.data.evaluationTools.product_id,model_id:i.data.evaluationTools.model_id},resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"Attendance":return{sort:n,type:13,course_id:i.id,sign:{id:r.id,type:13,title:r.title,directors:r.directors.map(F=>typeof F=="object"&&(F.id||F.user_id)?F.id||F.user_id:F),name:r.name||"--",qrcode_type:r.qrcode_type,sign_in_begin_time:r.sign_in_begin_time,sign_in_end_time:r.sign_in_end_time,sign_out_begin_time:r.sign_out_begin_time,sign_out_end_time:r.sign_out_end_time,relate_course:r.relate_course,relate_course_list:r.relate_course_list,remind_directors:r.remind_directors,advance_minute:r.advance_minute,qy_we_chat_vo:r.qy_we_chat_vo,address:r.address,longitude:r.longitude,latitude:r.latitude,address_detail:r.address_detail,sign_range:r.sign_range},resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf()};case"AddAssessment":return{sort:n,type:14,course_id:i.id,resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf(),evaluateVo:{id:r.id,name:r.name,requirement:r.requirement,resource_id:r.resource_id,is_lock:r.is_lock,begin_time_unlock:r.begin_time_unlock,end_time_unlock:r.end_time_unlock,is_self_evaluate:r.is_self_evaluate,questionnaire_id:r.questionnaire_id,evaluate_form_title:r.evaluate_form_title,before_start_day:r.before_start_day,before_start_repeat:r.before_start_repeat,before_start_un_remind:r.before_start_un_remind,before_end_day:r.before_end_day,before_end_repeat:r.before_end_repeat,before_end_un_remind:r.before_end_un_remind,after_end_day:r.after_end_day,after_end_repeat:r.after_end_repeat,after_end_un_remind:r.after_end_un_remind,is_passed_standards:r.is_passed_standards,is_passed_option_three:r.is_passed_option_three,pass_standard_conditions:r.pass_standard_conditions,pass_standards_number:r.pass_standards_number,creator_user:r.creator_user}};case"AddPracticeBank":return{sort:n,type:17,course_id:i.id,resource_name:i.title,resource_lock:i.resource_lock||!1,unlocking_time:f==="unlock_mode"?null:u()(i.unlocking_time).valueOf(),practice:{title:i.data.title,question_bank_list:i.data.randomQuestion.bankQuesitonVoList.map(F=>F.id),pass_line:Number(i.data.stand)}};default:return null}})}));return _e},z=function(f,_e){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;function B(n){return n.fill_blank_count>0||n.short_answer_count>0}var i=f.map((n,r)=>{var Y=n.resources.filter(o=>o.type==6||o.type==15).length,G=n.resources.filter(o=>o.type==17).length,s=n.resources.filter(o=>o.type==10).length;return{id:n.id,key:"".concat(new Date().getTime()).concat(r),desc:n.content,name:n.stage_name,inOrder:n.is_order,Standard:{progressCheck:n.progress>0,progress:n.progress||100,examCheck:n.exam_times>0,examNum:n.exam_times||Y,bankCheck:n.practice_times>0,bankNum:n.practice_times||G,practiceCheck:n.operation_times>0,practiceNum:n.operation_times||s,jobEvaluationCheck:n.finish_evaluation==="true"},reward:{getScore:n.is_get_score?n.is_get_score:"",getScoreChecked:n.is_get_score>0,certificateId:n.certificate_id||"",certificateChecked:n.certificate_id!==0,certificateName:n.certificate_name,certificateImage:n.preview_url},hourClassId:n.id,hourClassStartTime:n.start_time,hourClassEndTime:n.end_time,list:n.resources.map(o=>{var p=o.exam;switch(o.type){case 1:return{id:o.course_id,name:o.resource_name,type:W&&o.biz_type==="imageText"?"twCourse":"course",icon:o.biz_type==="imageText"?S.e1.h5:S.e1.crs,componentName:"CourseSelector",duration:o.duration,data:o,unlocking_time:o.unlocking_time,lab_resource_id:o.lab_resource_id,lab_resource_name:o.lab_resource_name,lab_selected_id:o.lab_resource_id,resource_lock:o.resource_lock};case 3:{var d;return o.content_type==="article"||o.content_type==="link"?d=S.e1.h5:d=S.e1[o.contentType]||S.e1[o.content_type],{id:o.course_id,name:o.resource_name,type:"courseware",icon:d,componentName:"CoursewareSelector",duration:o.duration,status:o.resource_status,originalType:o.content_type==="article"||o.content_type==="link"?"h5":o.content_type||o.contentType,data:o,unlocking_time:o.unlocking_time,lab_resource_id:o.lab_resource_id,lab_resource_name:o.lab_resource_name,lab_selected_id:o.lab_resource_id,resource_lock:o.resource_lock}}case 6:return{id:o.course_id,name:p.title,type:"ex",icon:S.e1.ex,componentName:"AddExam",duration:p.exam_duration*60,data:{id:p.id,title:p.title,examDuration:p.exam_duration,summary:p.summary,isOpenDrawQuestions:p.proportionalExamVos&&p.proportionalExamVos.length>0,proportional:p.proportionalExamVos&&(p.proportionalExamVos.length>0?V(p.proportionalExamVos,p.question_bank_vos):p.question_mode===2?ge(p.question_bank_vos):[])||[],cheatFlag:{isChecked:!!p.cheat_flag,switchNum:p.cut_screen_count===-1?null:p.cut_screen_count,faceRecognition:p.face_recognition},reExam:{show_result:p.show_result,isChecked:p.repeat_exam,userJoin:_e?!1:p.user_join==="true",notAllowed:{end:p.answer_parsing},allowed:{reRule:p.re_exam_rule,record:p.score_rule,end:p.answer_parsing,reNum:p.re_exam_rule===2?p.re_exam_number:1,viewRule:p.view_rule}},markType:{checkedValue:p.mark_type===1?1:2,artificialDisabled:p.mark_type===1&&!B(p),fillBlank:{checked:(p.mark_type===2||p.mark_type===3)&&p.fill_blank_count,disabled:!p.fill_blank_count},shortAnswer:{checked:(p.mark_type===2||p.mark_type===4)&&p.short_answer_count,disabled:!p.short_answer_count},anonymousMarking:p.anonymous_marking==="true"},questionsMode:p.question_mode,knowledgePoints:p.show_knowledge==="show"?1:2,passLine:p.pass_line,fixedQuestion:p.question_mode===1?{id:p.paper_id,name:p.paper_name,tableList:{fillBlankCount:p.fill_blank_count,fillBlankScore:p.fill_blank_unit_score,multipleCount:p.multiple_count,multipleScore:p.multiple_unit_score,shortAnswerCount:p.short_answer_count,shortAnswerScore:p.short_answer_unit_score,singleCount:p.single_count,singleScore:p.single_unit_score,totalCount:p.total_count,totalScore:p.total_score,trueOrFalseCount:p.true_or_false_count,trueOrFalseScore:p.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:p.question_mode===2?{bankQuesitonVoList:p.question_bank_vos.map(b=>{var O=b.fill_blank_count,x=b.multiple_count,oe=b.short_answer_count,Re=b.single_count,be=b.total_count,Et=b.true_or_false_count,Ft={fillBlankCount:O,shortAnswerCount:oe,multipleCount:x,singleCount:Re,totalCount:be,trueOrFalseCount:Et};return{id:b.id,name:b.name,data:Object.assign(b,Ft),fillBlankCount:O,shortAnswerCount:oe,multipleCount:x,singleCount:Re,totalCount:be,trueOrFalseCount:Et}}),bankQuesitonInfo:{fillBlankCount:p.fill_blank_count,fillBlankScore:p.fill_blank_unit_score,fillBlankType:+p.fillBlankType,multipleCount:p.multiple_count,multipleScore:p.multiple_unit_score,shortAnswerCount:p.short_answer_count,shortAnswerScore:p.short_answer_unit_score,shortAnswerType:+p.shortAnswerType,singleCount:p.single_count,singleScore:p.single_unit_score,trueOrFalseCount:p.true_or_false_count,trueOrFalseScore:p.true_or_false_unit_score,multipleMissedScore:p.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,fillBlankType:1,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,shortAnswerType:1,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}},unlocking_time:o.unlocking_time,resource_lock:o.resource_lock};case 7:return{id:_e?"":o.offlineCourseEditVo.id,name:o.offlineCourseEditVo.title,key:o.offlineCourseEditVo.id,type:"xx",componentName:"OfflineTrain",icon:S.e1.xx,data:(0,e.Z)({},N(o.offlineCourseEditVo,_e)),unlocking_time:o.unlocking_time,resource_lock:o.resource_lock};case 9:return{id:o.course_id,name:o.title||o.resource_name,type:"investigate",icon:S.e1.questionnaire,componentName:"AddInvestigate",data:o,questionnaire:{id:o.questionnaire_id,name:o.resource_name},unlocking_time:o.unlocking_time,resource_lock:o.resource_lock};case 10:return{id:o.course_id,name:o.title,type:"sc",icon:S.e1.sc,componentName:"AddPracticeTest",data:ie(o,"operationResources"),unlocking_time:o.unlocking_time,resource_lock:o.resource_lock};case 11:return{id:o.evaluation.id,name:o.evaluation.title,productId:o.evaluation.product_id,modelId:o.evaluation.model_id,type:"jobEvaluation",icon:S.e1.jobEvaluation,componentName:"AddJobEvaluation",data:{title:o.evaluation.title,evaluationTools:{product_id:o.evaluation.product_id,model_id:o.evaluation.model_id}},unlocking_time:o.unlocking_time,resource_lock:o.resource_lock};case 13:return{id:o.course_sign_vo.id,name:o.course_sign_vo.name,type:"attendance",componentName:"Attendance",icon:S.e1.attendance,data:(0,e.Z)({},y(o.course_sign_vo,_e)),unlocking_time:o.unlocking_time,resource_lock:o.resource_lock};case 14:return{id:o.evaluate?o.evaluate.id:"",name:o.evaluate?o.evaluate.name:"",type:"assess",componentName:"AddAssessment",icon:S.e1.assess,data:(0,e.Z)({},Xe(o.evaluate)),resource_lock:o.resource_lock,unlocking_time:o.unlocking_time};case 15:{var X=(0,g.Qm)()._store,C=X.getState(),k=C.user,F=(0,h.AC)({data:o.exam_plan_detail_v1,user:{id:k.id,name:k.name,creator:!0}});return{id:o.exam_plan_detail_v1.id,name:o.exam_plan_detail_v1.title,type:"ex",icon:S.e1.ex,componentName:"AddNewExam",unlocking_time:o.unlocking_time,resource_lock:o.resource_lock,duration:o.exam_plan_detail_v1.exam_duration*60,data:F}}case 16:return{id:_e?"":o.course_id,name:o.title,key:o.course_id,type:"liveClass",componentName:"LiveClass",icon:S.e1.liveClass,data:(0,e.Z)({},_t(o)),unlocking_time:o.unlocking_time,resource_lock:o.resource_lock};case 17:var P=(0,h.S8)(o.practice);return{id:o.course_id,name:o.resource_name,type:"practice",componentName:"AddPracticeBank",unlocking_time:o.unlocking_time,resource_lock:o.resource_lock,data:P};default:return null}})}});return i},R=m=>{var f=m.map((_e,W)=>({content:_e.desc,stage_name:_e.name,order:"".concat(_e.inOrder),sort:W+1,course:_e.list.map((B,i)=>{var n=B.data;switch(B.componentName){case"CoursewareSelector":return{course_id:B.id,course_sort:i,course_type:3,flag:1};case"CourseSelector":return{course_id:B.id,course_sort:i,course_type:1,flag:1};case"AddExam":return{flag:2,type:"ex",course_sort:i,course_id:B.id,title:n.title,cheat_flag:n.cheatFlag.isChecked?1:0,exam_duration:n.examDuration,face_recognition:n.cheatFlag.faceRecognition,summary:n.summary,mark_type:T(n.markType),paper_id:n.questionsMode===1?n.fixedQuestion.id:"",paper_title:n.questionsMode===1?n.fixedQuestion.name:"",pass_line:n.passLine,question_bank_list:n.questionsMode===1?"":n.randomQuestion.bankQuesitonVoList.map(k=>k.id).join(","),question_mode:n.questionsMode,show_knowledge:n.knowledgePoints===1?"show":"hide",s_repeat_exam:"".concat(n.reExam.isChecked),multiple_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.multipleCount,multiple_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.multipleScore,fill_blank_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.fillBlankCount,fill_blank_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.fillBlankScore,fill_blank_type:n.questionsMode===1?1:n.randomQuestion.bankQuesitonInfo.fillBlankType,short_answer_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.shortAnswerCount,short_answer_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.shortAnswerScore,short_answer_type:n.questionsMode===1?1:n.randomQuestion.bankQuesitonInfo.shortAnswerType,single_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.singleCount,single_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.singleScore,true_or_false_count:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.trueOrFalseCount,true_or_false_unit_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.trueOrFalseScore,multiple_missed_score:n.questionsMode===1?"":n.randomQuestion.bankQuesitonInfo.multipleMissedScore,total_score:n.questionsMode===1?n.fixedQuestion.tableList.totalScore:"",answer_parsing:n.reExam.isChecked?n.reExam.allowed.end:n.reExam.notAllowed.end,passing_score:n.questionsMode===1?Number(n.fixedQuestion.tableList.totalScore*n.passLine/100).toFixed(1):60,cut_screen_count:n.cheatFlag.switchNum!==null?n.cheatFlag.switchNum:-1,re_exam_rule:n.reExam.allowed.reRule,re_exam_number:n.reExam.allowed.reRule===2?n.reExam.allowed.reNum:0,score_rule:n.reExam.allowed.record,view_rule:n.reExam.allowed.viewRule,proportional:n.questionsMode===2&&n.isOpenDrawQuestions?n.proportional:[],anonymous_marking:"".concat(n.markType.anonymousMarking),show_result:n.reExam.show_result};case"AddNewExam":var r=B.data,Y=r.paperInfo,G=r.exam_times,s=r.cut_screen_times,o=r.random_order,p=r.mark_setting,d=r.result_visible,X=r.face_recognition,C=(0,_.Z)(r,["paperInfo","exam_times","cut_screen_times","random_order","mark_setting","result_visible","face_recognition"]);return{course_type:15,flag:15,type:"ex",course_sort:i,course_id:B.id,new_exam:(0,e.Z)((0,e.Z)((0,e.Z)({},C),(0,h.jJ)(X)),{},{paper_id:Y.id,answer_rule:G.answer_rule,exam_count:G.exam_count||1,cut_screen_rule:s.cut_screen_rule,cut_screen_count:s.cut_screen_count||1,cut_screen_interval:s.cut_screen_interval||0,random_question:o.random_question,random_options:o.random_options,mark_type:p.mark_type,mark_question_type:{fill_blank:p.mark_type===h.lt.MANUAL?p.fill_blank:!1,short_answer:p.mark_type===h.lt.MANUAL?p.short_answer:!1},anonymous_marking:p.anonymous_marking,exam_certificate_id:"",supervisor_list:[],marker_list:[...p.marker_list.map(k=>typeof k=="string"?k:k.id)],result_view_rule:d.result_view_rule,answer_parsing:d.answer_parsing,ranking_list_view_rule:d.ranking_list_view_rule,show_result:d.show_result,reward_rule:null,authority_range:null,supervisor_mark:null})};case"AddInvestigate":return{course_id:B.id,course_type:9,flag:9,course_sort:i,investigate:{id:B.id,title:B.name,questionnaire_id:B.questionnaire.id}};default:return null}})}));return f},le=m=>{function f(W){return W.fill_blank_count>0||W.short_answer_count>0}var _e=m.map((W,B)=>({key:"".concat(new Date().getTime()).concat(B),desc:W.content,name:W.stage_name,inOrder:W.is_order,list:W.course_mapping_list.map(i=>{var n=i;switch(i.flag){case 1:return{id:i.course_id,name:i.name,type:i.course_type===1?"course":"courseware",icon:S.e1[i.type==="imageText"?"h5":i.contentType==="audio/mp3"?"mp3":i.type],originalType:i.type,componentName:i.course_type===1?"CourseSelector":"CoursewareSelector",status:i.course_type===1?"":i.status,duration:i.duration,data:i};case 2:return{id:i.course_id,name:n.title,type:"ex",icon:S.e1.ex,componentName:"AddExam",duration:n.exam_duration*60,data:{title:n.title,examDuration:n.exam_duration,summary:n.summary,isOpenDrawQuestions:n.proportionalExamVos&&n.proportionalExamVos.length>0,proportional:n.proportionalExamVos&&(n.proportionalExamVos.length>0?V(n.proportionalExamVos,n.bank_quesiton_list):n.question_mode===2?ge(n.bank_quesiton_list):[])||[],cheatFlag:{isChecked:!!n.cheat_flag,switchNum:n.cut_screen_count===-1?null:n.cut_screen_count,faceRecognition:n.face_recognition},reExam:{show_result:n.show_result,isChecked:n.s_repeat_exam==="true",notAllowed:{end:n.answer_parsing},allowed:{reRule:n.re_exam_rule,record:n.score_rule,end:n.answer_parsing,reNum:n.re_exam_rule===2?n.re_exam_number:1,viewRule:n.view_rule}},markType:{checkedValue:n.mark_type===1?1:2,artificialDisabled:n.mark_type===1&&!f(n),fillBlank:{checked:(n.mark_type===2||n.mark_type===3)&&n.fill_blank_count,disabled:!n.fill_blank_count},shortAnswer:{checked:(n.mark_type===2||n.mark_type===4)&&n.short_answer_count,disabled:!n.short_answer_count},anonymousMarking:n.anonymous_marking==="true"},questionsMode:n.question_mode,knowledgePoints:n.show_knowledge==="show"?1:2,passLine:n.pass_line,fixedQuestion:n.question_mode===1?{id:n.paper_id,name:n.paper_title,tableList:{fillBlankCount:n.fill_blank_count,fillBlankScore:n.fill_blank_unit_score,multipleCount:n.multiple_count,multipleScore:n.multiple_unit_score,shortAnswerCount:n.short_answer_count,shortAnswerScore:n.short_answer_unit_score,singleCount:n.single_count,singleScore:n.single_unit_score,totalCount:n.paper_question_numbers,totalScore:n.total_score,trueOrFalseCount:n.true_or_false_count,trueOrFalseScore:n.true_or_false_unit_score}}:{id:"",name:"",tableList:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,totalCount:0,totalScore:0,trueOrFalseCount:0,trueOrFalseScore:0}},randomQuestion:n.question_mode===2?{bankQuesitonVoList:n.bank_quesiton_list.map(o=>{var p=o.fill_blank_count,d=o.multiple_count,X=o.short_answer_count,C=o.single_count,k=o.total_count,F=o.true_or_false_count,P={fillBlankCount:p,shortAnswerCount:X,multipleCount:d,singleCount:C,totalCount:k,trueOrFalseCount:F};return{id:o.id,name:o.name,data:Object.assign(o,P),fillBlankCount:p,shortAnswerCount:X,multipleCount:d,singleCount:C,totalCount:k,trueOrFalseCount:F}}),bankQuesitonInfo:{fillBlankCount:n.fill_blank_count,fillBlankScore:n.fill_blank_unit_score,fillBlankType:+n.fill_blank_type||1,multipleCount:n.multiple_count,multipleScore:n.multiple_unit_score,shortAnswerCount:n.short_answer_count,shortAnswerScore:n.short_answer_unit_score,shortAnswerType:+n.short_answer_type||1,singleCount:n.single_count,singleScore:n.single_unit_score,trueOrFalseCount:n.true_or_false_count,trueOrFalseScore:n.true_or_false_unit_score,multipleMissedScore:n.multiple_missed_score}}:{bankQuesitonVoList:[],bankQuesitonInfo:{fillBlankCount:0,fillBlankScore:0,multipleCount:0,multipleScore:0,shortAnswerCount:0,shortAnswerScore:0,singleCount:0,singleScore:0,trueOrFalseCount:0,trueOrFalseScore:0,multipleMissedScore:0}}}};case 9:return{id:i.course_id,name:i.title,type:"investigate",icon:S.e1.questionnaire,componentName:"AddInvestigate",data:i,questionnaire:{id:i.questionnaire_id,name:i.name}};case 15:{var r=(0,g.Qm)()._store,Y=r.getState(),G=Y.user,s=(0,h.AC)({data:i.exam_plan_detail_v1,user:{id:G.id,name:G.name,creator:!0}});return{id:i.exam_plan_detail_v1.id,name:i.exam_plan_detail_v1.title,type:"ex",icon:S.e1.ex,componentName:"AddNewExam",duration:i.exam_plan_detail_v1.exam_duration*60,data:s}}default:return null}})}));return _e},H=function(f){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return f.map((W,B)=>{var i=_e.find(n=>n.stage_index-1===B);return W.list.map((n,r)=>{var Y;i&&(Y=i.resource_error_vos.find(s=>s.resource_index===r));var G=n.type;if(n.resource_type)switch(n.resource_type){case 1:G="course";break;case 2:case 3:G="courseware";break;case 6:case 15:G="ex";break;case 7:G="xx";break;case 9:G="questionnaire";break;case 13:G="attendance";break;case 14:G="assess";break;default:break}if(n.componentName)switch(n.componentName){case"CourseSelector":G="course";break;case"CoursewareSelector":G="courseware";break;case"AddNewExam":case"AddExam":G="ex";break;case"OfflineTrain":G="xx";break;case"Attendance":G="attendance";break;case"QuestionnaireSelector":case"AddInvestigate":G="questionnaire";break;case"AddPracticeTest":G="practicalIndustry";break;case"AddAssessment":G="assess";break;default:break}switch(G){case"course":n.resourceErrTip=Y?Y.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u88AB\u5220\u9664":Y.resource_status==="un_released"?"\u5F15\u7528\u7684\u8BFE\u7A0B\u300A".concat(Y.resource_name,"\u300B\u672A\u53D1\u5E03\uFF0C\u8BF7\u542F\u7528\u540E\u518D\u7F16\u8F91"):"":"";break;case"courseware":n.resourceErrTip=Y&&Y.resource_status==="deleted"?"\u5F15\u7528\u7684\u8BFE\u4EF6\u88AB\u5220\u9664":"";break;case"ex":n.resourceErrTip=Y?Y.resource_status==="bank_deleted"?"\u5F15\u7528\u7684\u9898\u5E93\u88AB\u5220\u9664":Y.resource_status==="paper_deleted"?"\u5F15\u7528\u7684\u8BD5\u5377\u88AB\u5220\u9664":Y.resource_status==="bank_missing"?"\u5F15\u7528\u7684\u9898\u5E93\u8BD5\u9898\u4E0D\u8DB3":"":"";break;case"xx":n.resourceErrTip=Y&&Y.resource_status==="time_expired"?"\u7EBF\u4E0B\u8BFE\u5DF2\u8FC7\u671F":"";break;case"questionnaire":n.resourceErrTip=Y?Y.resource_status==="deleted"?"\u5F15\u7528\u7684\u95EE\u5377\u88AB\u5220\u9664":Y.resource_status==="un_released"?"\u5F15\u7528\u7684\u95EE\u5377\u672A\u53D1\u5E03":"":"";break;case"practicalIndustry":n.resourceErrTip=Y&&Y.resource_status==="operation_resource_deleted"?A.Z.t("component.practicalDeleteTip"):"";break;default:break}return null}),null}),f},N=(m,f)=>({id:f?"":m.id,title:m.title,edit_status:m.edit_status,status:m.status,department_id:m.department_id||"",dateRange:{startTime:m.begin_time,endTime:m.end_time},address:m.address,course_duration:m.course_duration,has_lecturer_student_data:f?!1:m.has_lecturer_student_data,has_student_lecturer_data:f?!1:m.has_student_lecturer_data,has_student_course_data:f?!1:m.has_student_course_data,has_lecturer_assess_student_data:f?!1:m.has_lecturer_assess_student_data,teacher:{id:m.lecturer_id,name:m.lecturer_name,is_lecturer_confirm:m.is_lecturer_confirm,is_lecturer_subsidy:m.is_lecturer_subsidy,teacher_sync_user_id:m.teacher_sync_user_id,lecturer_name:m.lecturer_name,teacher_sync_source_type:m.teacher_sync_source_type,type:m.teacher_sync_type,teacher_sync_type:m.teacher_sync_type},introduction:m.introduction,attachment:m.attachment||[],other:{is_open_schedule:m.is_open_schedule,is_open_upload:m.is_open_upload},remind:{remind_type:m.remind_type||"offline_course",advance_minute:m.advance_minute,is_lecturer_remind:m.is_lecturer_remind,is_student_remind:m.is_student_remind,is_director_remind:m.is_director_remind},evaluate:{is_lecturer_student_evaluate:m.is_lecturer_student_evaluate,is_student_lecturer_evaluate:m.is_student_lecturer_evaluate,is_student_course_evaluate:m.is_student_course_evaluate,lecturer_student_evaluate_content:m.lecturer_student_evaluate_content?(0,e.Z)((0,e.Z)({},m.lecturer_student_evaluate_content),{},{passing_score:Number(m.lecturer_student_evaluate_content.passing_score),total_score:Number(m.lecturer_student_evaluate_content.total_score)}):{evaluate_type:"score",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_lecturer_evaluate_content:m.student_lecturer_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""},student_course_evaluate_content:m.student_course_evaluate_content||{evaluate_type:"star",questionnaire_id:"",questionnaire_name:"",total_score:"",passing_score:""}},assess:{is_open_offline_assessment:m.is_open_offline_assessment,assessment_total_score:m.assessment_total_score,assessment_pass_score:m.assessment_pass_score},user_has_attendanted:f?!1:m.user_has_attendanted}),y=(m,f)=>{var _e=[];return f?m.attendance_course_vo.forEach(W=>{_e.push((0,e.Z)((0,e.Z)({},W),{},{course_id:"",course_key:W.course_id}))}):_e=m.attendance_course_vo,{courseId:m.courseId,directors:m.director?m.director.map(W=>W):m.directors,id:f?"":m.id,name:m.name,qrcode_type:m.qrcode_type,relate_course_list:_e,sign_in_begin_time:m.sign_in_begin_time?(0,L.p6)(m.sign_in_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_in_end_time:m.sign_in_end_time?(0,L.p6)(m.sign_in_end_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_begin_time:m.sign_out_begin_time?(0,L.p6)(m.sign_out_begin_time,"yyyy-MM-dd hh:mm:ss"):"",sign_out_end_time:m.sign_out_end_time?(0,L.p6)(m.sign_out_end_time,"yyyy-MM-dd hh:mm:ss"):"",source_type:m.source_type,remind_directors:m.remind_directors,advance_minute:m.advance_minute,user_has_attendanted:f?!1:m.user_has_attendanted,relate_course:m.relate_course,address:m.address,longitude:m.longitude,latitude:m.latitude,address_detail:m.address_detail,sign_range:m.sign_range}};function je(m){return Object.prototype.toString.call(m)==="[object Object]"}function pt(m){return m.replace(/[A-Z]/g,f=>"_".concat(f.toLowerCase()))}function he(m){if(!je(m))return m;for(var f={},_e=Object.keys(m),W=0,B=_e;W<B.length;W++){var i=B[W],n=m[i];i=pt(i),f[i]=je(n)?he(n):n}return f}var Xe=m=>{var f=he(m),_e=f.id,W=f.name,B=f.requirement,i=f.resource_id,n=f.is_self_evaluate,r=f.is_lock,Y=f.begin_time_unlock,G=f.end_time_unlock,s=f.questionnaire_id,o=f.evaluate_form_title,p=f.before_start_day,d=f.before_start_repeat,X=f.before_start_un_remind,C=f.before_end_day,k=f.before_end_repeat,F=f.before_end_un_remind,P=f.after_end_day,b=f.after_end_repeat,O=f.after_end_un_remind,x=f.is_passed_standards,oe=f.is_passed_option_three,Re=f.pass_standard_conditions,be=f.pass_standards_number,Et=f.creator_user;return{id:_e,name:W,requirement:B,resource_id:i,is_lock:r,begin_time_unlock:Y,end_time_unlock:G,is_self_evaluate:n,questionnaire_id:s,evaluate_form_title:o,before_start_day:p,before_start_repeat:d,before_start_un_remind:X,before_end_day:C,before_end_repeat:k,before_end_un_remind:F,after_end_day:P,after_end_repeat:b,after_end_un_remind:O,is_passed_standards:x,is_passed_option_three:oe,pass_standard_conditions:Re,pass_standards_number:be,creator_user:Et}},_t=m=>({courseId:m.course_id,duration:m.duration,teacherName:m.live_lesson.teacher_name,startTime:m.live_lesson.live_start_time,endTime:m.live_lesson.live_end_time})},25439:function(Bt,Pe,t){"use strict";t.d(Pe,{Z:function(){return Sa}});var _=t(57338),e=t(83107),D=t(77883),u=t(21888),A=t(48736),g=t(27049),de=t(22385),L=t(31097),S=t(88983),h=t(47933),ge=t(77576),V=t(59314),T=t(20228),ae=t(11382),j=t(49111),c=t(19650),l=t(57663),Q=t(71577),w=t(88986),ie=t(34792),Z=t(48086),z=t(57361),R=t(33565),le=t(9754),H=t.n(le),N=t(12924),y=t.n(N),je=t(91768),pt=t(7145),he=t.n(pt),Xe=t(28216),_t=t(78138),m=t.n(_t),f=t(9715),_e=t(86585),W=t(14965),B=t(11448),i=t(43358),n=t(34041),r=t(59250),Y=t(13013),G=t(62029),s=t(54549),o=t(57254),p=t(43061),d=(0,N.createContext)({}),X=()=>(0,N.useContext)(d),C=t(60667),k=t(59676),F=fe=>{var ce=fe.id,qe=fe.name,Zt=fe.source_type,Pt=fe.onRemove,gt=qt=>{qt.preventDefault(),qt.stopPropagation(),Pt(ce)};return y().createElement("div",{className:"label-span-tag-render"},y().createElement(C.Z,{type:Zt,name:qe,value:ce,dataType:"departmentName"}),y().createElement("span",{className:"label-span-close",onClick:gt},y().createElement(s.Z,null)))},P=fe=>{var ce=fe.onChange,qe=fe.type,Zt=qe===void 0?"department":qe,Pt=fe.value,gt=Pt===void 0?[]:Pt,qt=fe.placeholder,Ca=fe.status,ea=X(),_a=ea.filterAuth,ua=ea.isOnlyPost,ze=(0,N.useState)(!1),oa=(0,R.Z)(ze,2),Gt=oa[0],va=oa[1],Ta=kt=>{var Wt=gt.findIndex(Ht=>Ht.id===kt);ce(he()(gt,{$splice:[[Wt,1]]}))},ga=kt=>{va(kt)},Ct="drop-down-selector";return y().createElement("div",{className:Ct},y().createElement(Y.Z,{overlayClassName:"".concat(Ct,"__drop-down"),trigger:["click"],getPopupContainer:kt=>kt.parentElement,onVisibleChange:ga,overlay:y().createElement(k.Z,{businessStyle:{height:300},searchWidth:!1,filterAuth:_a,haveAuth:!1,checkable:!0,isOnlyPost:ua,showSearch:Gt,businessType:Zt,hasCheckList:gt,onCheck:kt=>{ce(kt)},onSelect:kt=>{ce(kt)}})},y().createElement("div",{className:"".concat(Ct,"__select-wrapper")},y().createElement("div",{className:"".concat(Ct,"__select-selector select-selector__").concat(Ca)},gt.length===0&&y().createElement("span",{className:"".concat(Ct,"__placeholder")},qt),gt.map(kt=>y().createElement(F,(0,G.Z)({key:kt.id},kt,{onRemove:Ta})))),y().createElement(o.Z,null),gt.length>0&&y().createElement(p.Z,{onClick:kt=>{kt.stopPropagation(),ce([])}}))))},b=P,O=t(37055),x=t(10237);function oe(){var fe=O.ZP.advancedSetting.getSettingStatusByType("user_view");return x.WY.get({url:fe})}function Re(){var fe=O.ZP.choose.userGroup();return x.WY.get({url:fe,params:{page_size:"100000"}})}function be(){var fe=O.ZP.choose.userCluster();return x.WY.get({url:fe,params:{page_size:"100000"}})}function Et(){var fe=O.ZP.choose.userRoles();return x.WY.get({url:fe,params:{page_size:"100000"}})}function Ft(fe){var ce=O.ZP.autoAssigned.getRuleData();return x.WY.get({url:ce,params:fe})}function Jt(fe){var ce=O.ZP.autoAssigned.saveRuleData();return x.WY.post({url:ce,data:fe})}function At(fe){var ce=fe.column_key,qe=fe.keyword,Zt=O.ZP.autoAssigned.getCustomIndexOptions(),Pt={column_key:ce,keyword:qe};return x.WY.get({url:Zt,params:Pt})}var Lt=t(81211),ia=t(23279),pa=t.n(ia);function Rt(fe){var ce=fe.field,qe=fe.debounceTimeout,Zt=qe===void 0?800:qe,Pt=(0,Lt.Z)(fe,["field","debounceTimeout"]),gt=(0,N.useState)(!1),qt=(0,R.Z)(gt,2),Ca=qt[0],ea=qt[1],_a=(0,N.useState)([]),ua=(0,R.Z)(_a,2),ze=ua[0],oa=ua[1],Gt=(0,N.useRef)(0),va=(0,N.useMemo)(()=>{var Ta=function(){var ga=(0,z.Z)(H().mark(function Ct(kt){var Wt,Ht,Ma,Be,Fe,wt;return H().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(Wt=kt.trim(),Wt){ft.next=3;break}return ft.abrupt("return");case 3:return Gt.current+=1,Ht=Gt.current,oa([]),ea(!0),ft.prev=7,Ma={keyword:Wt,column_key:ce},ft.next=11,At(Ma);case 11:if(Be=ft.sent,Fe=Be.data.data,Ht===Gt.current){ft.next=15;break}return ft.abrupt("return");case 15:wt=Fe.map(ka=>(0,w.Z)((0,w.Z)({},ka),{},{label:ka.value})),oa(wt),ft.next=21;break;case 19:ft.prev=19,ft.t0=ft.catch(7);case 21:ea(!1);case 22:case"end":return ft.stop()}},Ct,null,[[7,19]])}));return function(kt){return ga.apply(this,arguments)}}();return pa()(Ta,Zt)},[Zt]);return y().createElement(n.Z,(0,G.Z)({filterOption:!1,onSearch:va,notFoundContent:Ca?y().createElement(ae.Z,{size:"small"}):null},Pt,{options:ze}))}var at=Rt,Me=t(84874),Xt={validateStatus:"success",errorMsg:null},la=(fe,ce)=>{var qe=fe.t,Zt=fe.allFields,Pt=fe.checkedValue,gt=fe.values,qt=fe.onMove,Ca=fe.onChange;(0,N.useImperativeHandle)(ce,()=>({validate:rn,resetValidate:dn}));var ea={};Zt.forEach(re=>{ea[re]=Xt});var _a=(0,N.useState)(ea),ua=(0,R.Z)(_a,2),ze=ua[0],oa=ua[1],Gt=(0,N.useState)([]),va=(0,R.Z)(Gt,2),Ta=va[0],ga=va[1],Ct=(0,N.useState)([]),kt=(0,R.Z)(Ct,2),Wt=kt[0],Ht=kt[1],Ma=(0,N.useState)([]),Be=(0,R.Z)(Ma,2),Fe=Be[0],wt=Be[1];(0,N.useEffect)(()=>{Zt.forEach(re=>{ze[re]||oa((0,w.Z)((0,w.Z)({},ze),{},{[re]:Xt}))})},[Zt]),(0,N.useEffect)(()=>{dt(),ft(),ka()},[]);var dt=function(){var re=(0,z.Z)(H().mark(function Ae(){var $t,zt;return H().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,Re();case 2:$t=mt.sent,zt=$t.data,ga(zt.data.list||[]);case 5:case"end":return mt.stop()}},Ae)}));return function(){return re.apply(this,arguments)}}(),ft=function(){var re=(0,z.Z)(H().mark(function Ae(){var $t,zt;return H().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,be();case 2:$t=mt.sent,zt=$t.data,Ht(zt.data.list||[]);case 5:case"end":return mt.stop()}},Ae)}));return function(){return re.apply(this,arguments)}}(),ka=function(){var re=(0,z.Z)(H().mark(function Ae(){var $t,zt;return H().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,Et();case 2:$t=mt.sent,zt=$t.data,wt(zt.data.list||[]);case 5:case"end":return mt.stop()}},Ae)}));return function(){return re.apply(this,arguments)}}(),Yt=re=>re==="user_groups"?Ta:re==="ding_groups"?Wt:re==="roles"?Fe:[],Nt=re=>!(!re||Array.isArray(re)&&!re.length),La=re=>{var Ae=[{required:!0,message:qe("common.selectP",{name:re.label.toLowerCase()})}];return re.components==="EXTEND_COLUMN"&&Ae.push({max:5,message:qe("autoAssign.atMost",{max:5,label:re.label.toLowerCase()})}),(re.components==="TREE_SELECT"||re.components==="COMMON_SELECT")&&Ae.push({max:50,message:qe("autoAssign.atMost",{max:50,label:re.label.toLowerCase()})}),Ae},Ba=(re,Ae)=>{oa(he()(ze,{$merge:{[Ae.value]:Ya(re,Ae)}}))},Ya=(re,Ae)=>{for(var $t=La(Ae),zt=Xt,xa=0;xa<$t.length;xa++){var mt=$t[xa];if(mt.required&&!Nt(re)){zt={validateStatus:"error",errorMsg:mt.message};break}if(mt.max&&re.length>mt.max){zt={validateStatus:"error",errorMsg:mt.message};break}}return zt},rn=()=>{var re=!1,Ae={};return Pt.forEach($t=>{var zt=Ya(gt[$t.value],$t);Ae[$t.value]=zt,zt.errorMsg&&(re=!0)}),oa(he()(ze,{$merge:Ae})),re},dn=re=>{oa(he()(ze,{$merge:{[re]:Xt}}))},Fa=(re,Ae)=>{Ba(re,Ae),Ca(re,Ae.value)};return y().createElement("div",{className:"automatically-assigned-form"},Pt.map(re=>y().createElement(c.Z,{key:re.value,size:22},y().createElement(_e.Z.Item,{label:y().createElement(L.Z,{title:re.label},re.label),validateStatus:ze[re.value].validateStatus,help:y().createElement("div",null,ze[re.value].errorMsg)},re.components==="TREE_SELECT"&&y().createElement(b,{placeholder:qe("common.selectP",{name:re.label.toLowerCase()}),type:re.value==="depts"?"department":"post",value:gt[re.value]||[],onChange:Ae=>Fa(Ae,re),status:ze[re.value].validateStatus}),re.components==="COMMON_SELECT"&&y().createElement(n.Z,{mode:"multiple",allowClear:!0,showArrow:!0,placeholder:qe("common.selectP",{name:re.label.toLowerCase()}),getPopupContainer:Ae=>Ae.parentElement,optionFilterProp:"children",value:gt[re.value]||[],onChange:Ae=>Fa(Ae,re)},Yt(re.value).map(Ae=>y().createElement(n.Z.Option,{key:Ae.id,value:Ae.id},re.value==="roles"?Ae.role_name:Ae.name))),re.components==="DATE_RANGE"&&y().createElement(B.Z.RangePicker,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:Ae=>Fa(Ae,re),value:gt[re.value]||[],style:{width:"100%"},placeholder:[qe("common.beginTime"),qe("common.endTime")]}),re.components==="EXTEND_COLUMN"&&y().createElement(at,{placeholder:qe("autoAssign.enter"),mode:"multiple",field:re.value,filterOption:!1,value:gt[re.value]||[],onChange:Ae=>Fa(Ae,re)})),Pt.length>1&&y().createElement(L.Z,{title:qe("common.remove"),overlayStyle:{width:60}},y().createElement("span",{className:"automatically-assigned-form__move",onClick:()=>{qt(re)}},y().createElement(Me.Z,{iconClass:"icon-a--",color:"rgba(0, 0, 0, 0.25)"}))))))},Ut=(0,je.Z)("translation",{withRef:!0})((0,N.forwardRef)(la)),vt=t(40646),Ia=fe=>{var ce=fe.t,qe=fe.userId,Zt=fe.isOpenTrainingCamp,Pt=fe.visible,gt=fe.onClose,qt=fe.resourceId,Ca=fe.resourceName,ea=fe.resourceType,_a=(0,N.useState)([{label:ce("setting.deptLabel"),toolTip:ce("setting.deptLabel"),value:"depts",components:"TREE_SELECT",disabled:!1},{label:ce("setting.postLabel"),toolTip:ce("setting.postLabel"),value:"posts",components:"TREE_SELECT",disabled:!1},{label:ce("component.userGroup"),toolTip:ce("component.userGroup"),value:"user_groups",components:"COMMON_SELECT",disabled:!1},{label:ce("searchInputPlaceholder.roles"),toolTip:ce("searchInputPlaceholder.roles"),value:"roles",components:"COMMON_SELECT",disabled:!1}]),ua=(0,R.Z)(_a,2),ze=ua[0],oa=ua[1],Gt={isActive:!1,condition:"union",dispatch:"now",customDay:1,studyTerm:3,checkedValue:[ze[0]],formData:{}},va=(0,N.useState)(!0),Ta=(0,R.Z)(va,2),ga=Ta[0],Ct=Ta[1],kt=(0,N.useState)(!1),Wt=(0,R.Z)(kt,2),Ht=Wt[0],Ma=Wt[1],Be=(0,N.useState)([]),Fe=(0,R.Z)(Be,2),wt=Fe[0],dt=Fe[1],ft=(0,N.useState)(ze),ka=(0,R.Z)(ft,2),Yt=ka[0],Nt=ka[1],La=(0,N.useState)(Gt.isActive),Ba=(0,R.Z)(La,2),Ya=Ba[0],rn=Ba[1],dn=(0,N.useState)(Gt.condition),Fa=(0,R.Z)(dn,2),re=Fa[0],Ae=Fa[1],$t=(0,N.useState)(Gt.dispatch),zt=(0,R.Z)($t,2),xa=zt[0],mt=zt[1],Jn=(0,N.useState)(Gt.customDay),Ha=(0,R.Z)(Jn,2),Zn=Ha[0],mn=Ha[1],Pn=(0,N.useState)(Gt.studyTerm),wn=(0,R.Z)(Pn,2),pn=wn[0],On=wn[1],_n=(0,N.useState)(Gt.checkedValue),vn=(0,R.Z)(_n,2),ta=vn[0],$a=vn[1],Xn=(0,N.useState)({}),Mn=(0,R.Z)(Xn,2),fa=Mn[0],Ja=Mn[1],qn=(0,N.useState)(!1),Dn=(0,R.Z)(qn,2),sn=Dn[0],gn=Dn[1],er=(0,N.useState)(40),fn=(0,R.Z)(er,2),tr=fn[0],ar=fn[1],Xa=(0,N.useRef)();(0,N.useEffect)(()=>{rr()},[]),(0,N.useEffect)(()=>{Zt&&oa(he()(ze,{$splice:[[3,0,{label:ce("component.useCluster"),toolTip:ce("component.useCluster"),value:"ding_groups",components:"COMMON_SELECT",disabled:!1}]]}))},[Zt]),(0,N.useEffect)(()=>{Nt(ze)},[ze]),(0,N.useEffect)(()=>{!Pt||nr()},[Pt]);var nr=function(){var we=(0,z.Z)(H().mark(function Tt(){var yt,Qt,aa,Za,na,nt,ra,hn,qa,Nn,Ua,Wa,jn,Bn,Fn;return H().wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return Ct(!0),yt={resource_id:qt,resource_type:ea},Qa.next=4,Ft(yt);case 4:if(Qt=Qa.sent,aa=Qt.data,Za=aa.success,na=aa.data,!(Za==="false"||!na)){Qa.next=12;break}return An(Gt),Ma(!1),Ct(!1),Qa.abrupt("return");case 12:Ct(!1),Ma(!0),nt=na.rule_info,ra=nt.is_active,hn=nt.relationship,qa=nt.is_begin_dispatch,Nn=nt.study_term,Ua=nt.conditions,hn==="join"&&Nt(he()(he()([],{$push:ze}),{$push:wt})),Wa={},Object.keys(Ua).forEach(Pa=>{switch(Pa){case"column_list":Ua.column_list.forEach(ln=>{Wa[ln.column_key]=ln.column_value.split(",")});break;case"join_time":Wa[Pa]=[m()(Number(Ua[Pa].join_start)),m()(Number(Ua[Pa].join_end))];break;case"user_groups":case"roles":case"ding_groups":Wa[Pa]=Ua[Pa].map(ln=>ln.id);break;default:Wa[Pa]=Ua[Pa];break}}),jn=[...ze,...wt],Bn=jn.filter(Pa=>Object.keys(Wa).includes(Pa.value)),Fn={isActive:!!ra,condition:hn,dispatch:qa?"custom":"now",customDay:qa||1,studyTerm:Nn,checkedValue:Bn,formData:Wa},An(Fn);case 22:case"end":return Qa.stop()}},Tt)}));return function(){return we.apply(this,arguments)}}(),An=we=>{rn(we.isActive),Ae(we.condition),mt(we.dispatch),mn(we.customDay),On(we.studyTerm),$a(we.checkedValue),Ja(we.formData),gn(!1)},rr=function(){var we=(0,z.Z)(H().mark(function Tt(){var yt,Qt,aa,Za;return H().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,oe();case 2:yt=nt.sent,Qt=yt.data,aa=Qt.action_list[0].param.keyValue,Za=[{label:ce("setting.joinTime"),toolTip:ce("setting.joinTime"),value:"join_time",components:"DATE_RANGE",disabled:!1}],aa.forEach(ra=>{Za.push({label:ra.columnValue,toolTip:ra.columnValue,value:ra.columnKey,components:"EXTEND_COLUMN",disabled:!1})}),dt(he()(wt,{$set:Za}));case 8:case"end":return nt.stop()}},Tt)}));return function(){return we.apply(this,arguments)}}(),Ln=function(){var we=(0,z.Z)(H().mark(function Tt(){var yt,Qt,aa;return H().wrap(function(na){for(;;)switch(na.prev=na.next){case 0:if(Ya){na.next=6;break}if(Ht){na.next=4;break}return gt(),na.abrupt("return");case 4:return yn({resource_id:qt,resource_name:Ca,resource_type:ea,is_active:0,create_id:Ht?"":qe,update_id:Ht?qe:""}),na.abrupt("return");case 6:if(!Xa.current.validate()){na.next=8;break}return na.abrupt("return");case 8:yt=Object.create(null),Qt=ta.filter(nt=>nt.components==="EXTEND_COLUMN"),Qt.length&&(yt.column_list=Qt.map(nt=>({column_key:nt.value,column_value:fa[nt.value].join(",")}))),ta.forEach(nt=>{switch(nt.value){case"depts":yt.depts=fa.depts.map(ra=>({id:ra.id,name:ra.name,source_type:ra.source_type}));break;case"posts":yt.posts=fa.posts.map(ra=>({id:ra.id,name:ra.name}));break;case"join_time":yt.join_time={join_start:fa.join_time.length>0?m()(fa.join_time[0]).valueOf():"",join_end:fa.join_time.length>0?m()(fa.join_time[1]).valueOf():""};break;case"user_groups":case"roles":case"ding_groups":yt[nt.value]=fa[nt.value].map(ra=>({id:ra}));break;default:break}}),aa={resource_id:qt,resource_name:Ca,resource_type:ea,is_active:1,relationship:re,is_begin_dispatch:xa==="now"?0:Zn,study_term:pn,conditions:yt,create_id:Ht?"":qe,update_id:Ht?qe:""},yn(aa);case 14:case"end":return na.stop()}},Tt)}));return function(){return we.apply(this,arguments)}}(),yn=function(){var we=(0,z.Z)(H().mark(function Tt(yt){var Qt,aa,Za;return H().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,Jt(yt);case 2:if(Qt=nt.sent,aa=Qt.data,Za=aa.success,Za!=="false"){nt.next=7;break}return nt.abrupt("return");case 7:Z.default.success(ce("common.submitSuccess")),gt();case 9:case"end":return nt.stop()}},Tt)}));return function(yt){return we.apply(this,arguments)}}(),Rn=we=>{var Tt=we.checked,yt=we.value;if(Tt)$a(he()(ta,{$push:Yt.filter(Qt=>Qt.value===yt)})),Ja(he()(fa,{$unset:[yt]})),Xa.current.resetValidate(yt);else{if(ta.length===1)return;$a(he()(ta,{$set:ta.filter(Qt=>Qt.value!==yt)}))}};(0,N.useEffect)(()=>{if(Nt(he()(Yt,{$set:Yt.map(Tt=>(Tt.disabled=!1,Tt))})),ta.length===1){var we=Yt.findIndex(Tt=>Tt.value===ta[0].value);Nt(he()(Yt,{[we]:{$toggle:["disabled"]}}))}},[ta]),(0,N.useEffect)(()=>{if(gn(!1),re==="join"){Nt(he()(he()([],{$push:ze}),{$push:wt}));var we=JSON.parse(JSON.stringify(ta));$a(he()(ta,{$set:we}))}else{Nt(he()(Yt,{$set:ze}));var Tt=ze.map(aa=>aa.value),yt=ta.filter(aa=>Tt.includes(aa.value));if(!yt.length){yt.push(ze[0]);var Qt=ze[0].value;Ja(he()(fa,{$unset:[Qt]})),Xa.current&&Xa.current.resetValidate(Qt)}$a(he()(ta,{$set:yt}))}},[re,wt]);var sr=(0,N.useCallback)(we=>{we!==null&&ar(we.clientHeight)},[Yt]),ir=(we,Tt)=>{Ja((0,w.Z)((0,w.Z)({},fa),{},{[Tt]:we}))},jt="automatically-assigned-drawer";return y().createElement(e.Z,{title:ce("autoAssign.autoAssign"),className:jt,width:716,onClose:gt,maskClosable:!1,visible:Pt,footer:y().createElement(c.Z,null,y().createElement(Q.Z,{onClick:gt},ce("common.cancel")),y().createElement(Q.Z,{onClick:Ln,type:"primary"},ce("common.ok")))},y().createElement("div",{className:"".concat(jt,"__tip")},ce("autoAssign.autoAssignTip")),ga&&y().createElement(ae.Z,{className:"".concat(jt,"__center")}),y().createElement("div",{style:{display:ga?"none":"block"}},y().createElement("div",{className:"".concat(jt,"__common-item")},y().createElement("div",{className:"flex-item-content"},y().createElement("div",{className:"".concat(jt,"__common-item__label")},ce("autoAssign.autoAssign"),"\uFF1A"),y().createElement(V.Z,{checked:Ya,checkedChildren:ce("autoAssign.open"),unCheckedChildren:ce("autoAssign.close"),onChange:we=>{rn(we)}})),y().createElement("div",{className:"".concat(jt,"__common-item__tip")},ce("autoAssign.assignTip"))),Ya&&y().createElement("div",null,y().createElement("div",{className:"".concat(jt,"__common-item flex-item-content")},y().createElement("div",{className:"".concat(jt,"__common-item__label")},ce("autoAssign.condition"),"\uFF1A"),y().createElement(c.Z,null,y().createElement(h.ZP.Group,{value:re,buttonStyle:"solid",onChange:we=>{Ae(we.target.value)}},y().createElement(h.ZP.Button,{value:"union"},ce("autoAssign.union")),y().createElement(h.ZP.Button,{value:"join"},ce("autoAssign.join"))),y().createElement(L.Z,{overlayStyle:{maxWidth:422},title:y().createElement(y().Fragment,null,y().createElement("div",null,ce("autoAssign.unionDesc")),y().createElement("div",null,ce("autoAssign.joinDesc")))},y().createElement("span",{className:"cl-pointer"},y().createElement(Me.Z,{iconClass:"icon-shuoming",color:"rgba(0, 0, 0, 0.45)"}))))),y().createElement(g.Z,null),y().createElement("div",{className:"".concat(jt,"__condition")},y().createElement("div",{className:"".concat(jt,"__part-title")},ce("autoAssign.conditionAdd")),y().createElement("div",{className:"".concat(jt,"__condition__tag"),style:{height:sn?"auto":36}},y().createElement("div",{className:"".concat(jt,"__condition__tag__group")},y().createElement(vt.l,{ref:sr,labelClassName:"".concat(jt,"__condition__tag__group__item"),values:ta.map(we=>we.value),options:Yt,onChange:Rn,showTooltip:!0})),tr>40&&y().createElement(c.Z,{size:6,className:"".concat(jt,"__condition__tag__unfold"),onClick:()=>{gn(!sn)}},y().createElement("span",null,ce(sn?"autoAssign.hide":"autoAssign.more")),y().createElement(Me.Z,{iconClass:sn?"icon-Line_Up":"icon-Line_down",size:12}))),y().createElement(Ut,{ref:Xa,allFields:[...ze,...wt].map(we=>we.value),values:fa,checkedValue:ta,onMove:we=>{Rn({checked:!1,value:we.value})},onChange:ir})),y().createElement(g.Z,{style:{marginTop:0}}),y().createElement("div",null,y().createElement("div",{className:"".concat(jt,"__part-title")},ce("autoAssign.assignSetting")),y().createElement("div",{className:"".concat(jt,"__common-item")},y().createElement("div",{className:"flex-item-content"},y().createElement("div",{className:"".concat(jt,"__common-item__label")},ce("autoAssign.assignTime"),"\uFF1A"),y().createElement(h.ZP.Group,{value:xa,buttonStyle:"solid",onChange:we=>{mt(we.target.value)}},y().createElement(h.ZP.Button,{value:"now"},ce("autoAssign.inForce")),y().createElement(h.ZP.Button,{value:"custom"},ce("autoAssign.custom"))),xa==="custom"&&y().createElement(c.Z,{style:{marginLeft:12}},y().createElement(u.Z,{precision:0,min:1,max:999,value:Zn,onChange:we=>{mn(we)}}),y().createElement("span",null,ce("autoAssign.customSuffix")))),y().createElement("div",{className:"".concat(jt,"__common-item__tip")},y().createElement("span",null,ce("autoAssign.customTip")),y().createElement(L.Z,{title:ce("autoAssign.assignTimeTip")},y().createElement("span",{className:"cl-pointer"},y().createElement(Me.Z,{iconClass:"icon-shuoming",color:"rgba(0, 0, 0, 0.45)"}))))),y().createElement("div",{className:"".concat(jt,"__common-item flex-item-content")},y().createElement("div",{className:"".concat(jt,"__common-item__label")},ce("autoAssign.learning"),"\uFF1A"),y().createElement(c.Z,null,y().createElement(u.Z,{precision:0,min:1,max:999,value:pn,onChange:we=>{On(we)}}),y().createElement("span",null,ce("common.day")),y().createElement(L.Z,{title:ce("autoAssign.learningTip")},y().createElement("span",{className:"cl-pointer"},y().createElement(Me.Z,{iconClass:"icon-shuoming",color:"rgba(0, 0, 0, 0.45)"})))))))))},Ea=fe=>({userId:fe.user.id,isOpenTrainingCamp:fe.publicVariable.isOpenTrainingCamp}),Sa=(0,Xe.$j)(Ea)((0,je.Z)()(Ia))},83431:function(Bt,Pe,t){"use strict";var _=t(30887),e=t(99210),D=t(22385),u=t(31097),A=t(12924),g=t.n(A),de=t(91768),L=t(57119),S=t(28216),h=V=>{var T=V.user;return{loginMode:T.loginMode}};function ge(V){var T=V.onUrge,ae=V.onDing,j=V.t,c=localStorage,l=c.appType,Q=j(l==="wx_app"?"component.ordinaryUrgingWxTips":l==="fs_app"?"component.ordinaryUrgingFsTips":"component.ordinaryUrgingTips");return g().createElement(e.Z,null,g().createElement(e.Z.Item,{key:"1"},g().createElement(u.Z,{title:Q},g().createElement("div",{className:"urge-menu-item",onClick:T},g().createElement("span",{className:"urge-menu-item__text"},j("component.ordinaryUrging")),g().createElement(L.Z,null)))),l==="e_app"?g().createElement(e.Z.Item,{key:"2"},g().createElement(u.Z,{title:j("component.dingStudentsTips")},dd.version?g().createElement("div",{className:"urge-menu-item",onClick:ae},g().createElement("span",{className:"urge-menu-item__text"},j("component.dingStudents")),g().createElement(L.Z,null)):g().createElement("div",{className:"urge-menu-item__forbidden"},g().createElement("span",{className:"urge-menu-item__text"},j("component.dingStudents")),g().createElement(L.Z,null)))):null)}Pe.Z=(0,S.$j)(h)((0,de.Z)()(ge))},410:function(Bt,Pe,t){"use strict";t.d(Pe,{Z:function(){return F}});var _=t(62029),e=t(22385),D=t(31097),u=t(54029),A=t(62529),g=t(57663),de=t(71577),L=t(88986),S=t(33565),h=t(18106),ge=t(88108),V=t(12924),T=t.n(V),ae=t(91768),j=t(54549),c=t(78138),l=t.n(c),Q=t(28216),w=t(57068),ie=t(70018),Z=t(20228),z=t(11382),R=t(76586),le=t.n(R),H=t(6793),N=window.Plots.Line,y=P=>{var b=P.params,O=P.height,x=P.t,oe=(0,V.useRef)(),Re=(0,V.useState)(null),be=(0,S.Z)(Re,2),Et=be[0],Ft=be[1],Jt=(0,V.useState)(!0),At=(0,S.Z)(Jt,2),Lt=At[0],ia=At[1];(0,V.useEffect)(()=>{(0,ie.yZ)((0,L.Z)((0,L.Z)({},b),{},{page_number:1,page_size:30})).then(Rt=>{if(Rt.data.code&&Rt.data.code==="200000"){var at=(Rt.data.data.list||[]).reverse(),Me=at.map(la=>{var Ut=la.total_score;return Ut}),Xt={height:220,data:at,xField:"submit_time",yField:"score",point:{size:4,shape:"circle",color:"#516AE6"},yAxis:{tickCount:5,min:0,max:Math.max(...Me)},xAxis:{tickCount:at.length<=7?at.length:7,label:{formatter:la=>(0,H.p6)(+la,new Date(+la).getFullYear()===new Date().getFullYear()?"MM/dd":"yyyy/MM/dd")}},tooltip:{customContent:(la,Ut)=>{var vt=Ut.length>0&&"<div class=".concat(le()["custom-content-container"],`>
                  <div class=`).concat(le().top,`>
                    <span class=`).concat(le().score,">").concat(Ut[0].data.score," ").concat(x("common.examScoreUnit"),`</span>
                    `).concat(Ut[0].data.score_record_type==="latest"||Ut[0].data.score_record_type==="highest"?"<span class=".concat(le()["custom-content-flag"],">").concat(Ut[0].data.score_record_type==="latest"?x("myExamTask.newest"):x("myExamTask.highest"),"</span>"):"",`
                  </div>
                  <div class=`).concat(le().bottom,">").concat((0,H.p6)(+Ut[0].data.submit_time,new Date(+Ut[0].data.submit_time).getFullYear()===new Date().getFullYear()?"MM/dd hh:mm":"yyyy/MM/dd hh:mm"),`</div>
                </div>`);return vt}},smooth:!0};Ft(Xt)}}).finally(()=>{ia(!1)})},[b,x]);var pa=()=>{var Rt=oe.current.chart.filteredData,at=Rt.find(Ut=>{var vt=Ut.score_record_type;if(vt==="latest"||vt==="highest")return Ut});if(at){var Me=oe.current.chart.getXY(at),Xt=Me.x,la=Me.y;oe.current.chart.showTooltip({x:Xt,y:la})}};return T().createElement(z.Z,{spinning:Lt},T().createElement("div",{className:le()["record-chart-container"],style:{maxHeight:"".concat(O,"px")}},Et&&!Lt&&T().createElement(N,(0,_.Z)({},Et,{height:O-32,onReady:Rt=>{oe.current=Rt,pa(),Rt.on("mouseout",()=>{pa()})}}))))},je=(0,ae.Z)()(y),pt=t(9121),he=t.n(pt),Xe=t(99367),_t=t(38642),m=t(67479),f=t(1164),_e=t(97593),W=t(57338),B=t(83107),i=t(8965),n=t.n(i),r=t(12968),Y=t(44208),G=t(44963),s=t.n(G);function o(P){var b=P.t,O=P.examId,x=P.submitId,oe=P.userId,Re=(0,V.useRef)(),be=(0,Q.I0)(),Et=(0,V.useState)({status:"",examId:O,userId:oe,submitId:x}),Ft=(0,S.Z)(Et,1),Jt=Ft[0],At=(0,V.useState)({total_count:0,success_count:0,fail_count:0}),Lt=(0,S.Z)(At,2),ia=Lt[0],pa=Lt[1];(0,V.useEffect)(()=>{(0,ie.wg)({examId:O,submitId:x,userId:oe}).then(vt=>{var Ia=vt.data,Ea=Ia.code,Sa=Ia.data;if(Ea==="200000"){var fe=Sa.fail_count,ce=fe===void 0?0:fe,qe=Sa.success_count,Zt=qe===void 0?0:qe,Pt=Sa.total_count,gt=Pt===void 0?0:Pt;pa({total_count:gt,success_count:Zt,fail_count:ce})}})},[O,x,oe]);function Rt(vt){var Ia=(0,L.Z)({},vt);return(0,ie.G2)(Ia)}var at=()=>T().createElement(de.Z,{type:"primary",onClick:Xt},b("common.exportData")),Me=()=>{var vt=P.t,Ia=[{key:"total",name:vt("examination.faceRecognitionInExam.verifyCount"),num:ia.total_count,color:"rgb(0, 0, 0, 0.45)",backgroundColor:"#F8F9FB"},{key:"passed",name:vt("examination.faceRecognitionInExam.verifySuccess"),num:ia.success_count,color:"rgb(139, 191, 100)",backgroundColor:"rgb(139, 191, 100,0.2)"},{key:"failed",name:vt("examination.faceRecognitionInExam.verifyFailed"),num:ia.fail_count,color:"rgb(207, 60, 60)",backgroundColor:"rgb(207, 60, 60,0.2)"}];return Ia.map(Ea=>{var Sa=Ea.name,fe=Ea.num,ce=Ea.color,qe=Ea.backgroundColor,Zt=Ea.key;return T().createElement("span",{className:s()["type-item"],style:{backgroundColor:qe,color:ce},key:Zt},"".concat(Sa," : ").concat(fe))})};function Xt(){(0,_e.N)({page:"exportFaceRecognitionRecord",props:{dispatch:be,t:b},rest:{userId:oe,examId:O,submitId:x},query:"?".concat(w.stringify(Jt)),sendType:"get"})}var la=(0,V.useMemo)(()=>({success:{text:b("examination.faceRecognitionInExam.verifySuccess"),color:"#52C41A"},failed:{text:b("examination.faceRecognitionInExam.verifyFailed"),color:"#F5222D"}}),[b]),Ut=[{title:b("examination.faceRecognitionInExam.verifyTime"),key:"check_time",render:vt=>(0,H.p6)(+vt,"yyyy-MM-dd hh:mm")},{title:b("examination.faceRecognitionInExam.verifyImg"),key:"snapshot_url",render:vt=>T().createElement(Y.Z,{className:s()["snapshot-container"],width:28,height:28,src:vt})},{title:b("examination.faceRecognitionInExam.verifyResult"),key:"result",render:vt=>T().createElement("div",{className:s()["status-container"]},T().createElement("span",{className:s().status,style:{backgroundColor:la[vt].color}}),la[vt].text)}];return T().createElement("div",{className:s()["face-recognition-record-container"],style:P.style},T().createElement(Xe.Z,{ref:Re,uuid:"22A4178B-6803-9BC5-DFDB-F6CD6A90C4C8",queryParams:{columns:Ut,query:Rt},queryParam:Jt,pagination:!0,options:!1,scroll:{x:"max-content",y:"calc(100vh - 300px)"},tableAlertRender:()=>!1,headerTitle:Me(),toolBarRender:at}))}var p=(0,ae.Z)()(o);function d(P){var b=P.t,O=P.drawerTitle,x=P.onCloseDrawer,oe=P.examId,Re=P.submitId,be=P.userId,Et=()=>T().createElement("div",{className:n()["footer-container"]},T().createElement(de.Z,{type:"primary",onClick:x},b("common.close")));return T().createElement(B.Z,(0,_.Z)({title:O,placement:"right",width:716,bodyStyle:{padding:"0 24px 16px 24px"},onClose:x,footer:Et()},P),T().createElement("div",null,P.visible&&T().createElement(p,{examId:oe,submitId:Re,userId:be})))}var X=(0,ae.Z)()(d),C=ge.Z.TabPane;function k(P){var b=P.t,O=P.examId,x=P.taskId,oe=P.userId,Re=P.from,be=Re===void 0?"user":Re,Et=P.taskType,Ft=Et===void 0?"all":Et,Jt=P.renderExamRecordTabBarExtraContent,At=P.examRecordTabTitle,Lt=P.onCancel,ia=localStorage.getItem("themeColor")||"#465dcd",pa=(0,V.useRef)(),Rt=(0,Q.I0)(),at=(0,V.useState)({task_type:Ft,scene:be,examId:O,task_id:x,userId:oe}),Me=(0,S.Z)(at,1),Xt=Me[0],la=(0,V.useState)("examRecord"),Ut=(0,S.Z)(la,2),vt=Ut[0],Ia=Ut[1],Ea=(0,V.useState)(0),Sa=(0,S.Z)(Ea,2),fe=Sa[0],ce=Sa[1],qe=(0,V.useState)({examId:O,userId:oe,submitId:"",visible:!1}),Zt=(0,S.Z)(qe,2),Pt=Zt[0],gt=Zt[1],qt=(0,V.useState)(!1),Ca=(0,S.Z)(qt,2),ea=Ca[0],_a=Ca[1];(0,V.useEffect)(()=>{(0,ie.et)({examId:O}).then(Be=>{var Fe=Be.data,wt=Fe.data,dt=Fe.code;dt==="200000"&&_a(wt==="true")})},[O]);var ua={pending:{text:b("myExamTask.marking"),color:"#FFB56F"},passed:{text:b("myExamTask.qualified"),color:"#52C41A"},failed:{text:b("myExamTask.unqualified"),color:"#F5222D"},full:{text:b("examination.resultStatus.full"),color:"#417DC2"}};function ze(Be){var Fe=(0,L.Z)({},Be);return(0,ie.yZ)(Fe)}var oa=()=>T().createElement(de.Z,{type:"primary",onClick:Gt},b("common.exportData"));function Gt(){(0,_e.N)({page:"exportSubmitList",props:{dispatch:Rt,t:b},rest:{planId:O,userId:oe},query:"?".concat(w.stringify(Xt)),sendType:"get"})}function va(Be){var Fe=Be.exam_result,wt=Be.show_record,dt=Be.task_id,ft=Be.submit_id;wt==="true"&&Fe!=="pending"&&f.Z.targetTo({path:m.W.parse({exam_id:O,user_id:be==="manage"?oe:"",task_id:dt,submit_id:ft,scene:"manage"}),projectType:"student"})}var Ta={size:"small",showSizeChanger:!1,showTotal:Be=>b("examination.allTotal",{total:Be})},ga=[{title:b("examing.handoverTime"),width:"240px",key:"submit_time",render:(Be,Fe)=>T().createElement(T().Fragment,null,T().createElement("span",null,l()(Be*1).format(b("examination.dateFormate"))),(Fe.score_record_type==="latest"||Fe.score_record_type==="highest")&&T().createElement("span",{className:he()["latest-flag"]},Fe.score_record_type==="latest"?b("myExamTask.newest"):b("myExamTask.highest")))},{title:b("exam.examTime"),width:"100px",key:"answer_duration",render:Be=>T().createElement("span",null,Be?(0,_t.xj)(Be):"")},{title:b("examination.scoreAll"),width:"100px",key:"total_score",render:(Be,Fe)=>T().createElement("span",null,Fe.total_score,"/",Fe.score)},{title:b("examination.scoringRate"),key:"score_rate",width:"80px",render:(Be,Fe)=>T().createElement("span",null,Fe.score_rate)},{title:b("exam.examResult"),key:"exam_result",width:"100px",render:(Be,Fe)=>{var wt=Be;return Fe.total_score===Fe.score&&(wt="full"),T().createElement("div",null,T().createElement(A.Z,{color:ua[wt].color,text:ua[wt].text}))}}];be==="manage"&&ga.splice(4,0,{title:b("common.marker"),width:"100px",key:"mark_name",render:Be=>{var Fe=Be;return Be==="\u7CFB\u7EDF"&&(Fe=b("personal.system")),T().createElement(D.Z,{title:Fe},T().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},Fe||"--"))}}),ga.push({title:b("common.operate"),width:80,fixed:"right",key:"submit_id",render:(Be,Fe)=>{var wt=[{style:{color:Fe.show_record==="true"&&Fe.exam_result!=="pending"?ia:"#ccc",cursor:Fe.show_record==="true"&&Fe.exam_result!=="pending"?"pointer":"not-allowed"},visible:!0,label:b("examination.viewAnswerDetail"),onClick:dt=>{va(dt)}},{label:b("examination.face_recognition"),style:{color:ea?ia:"#c0c4cc",cursor:ea?"pointer":"not-allowed"},visible:!0,onClick:(dt,ft)=>{var ka=dt.submit_id;ft||gt(Yt=>(0,L.Z)((0,L.Z)({},Yt),{},{submitId:ka,visible:!0}))},disabled:!ea,disabledTip:b("examination.recordCharts.notFaceRecognitionTip")}];return T().createElement("div",{className:he()["exam-record-operate"]},wt.map(dt=>{var ft=dt.visible,ka=dt.label,Yt=dt.style,Nt=dt.disabledTip,La=dt.disabled,Ba=dt.onClick;if(ft)return T().createElement(D.Z,{title:La?Nt:""},T().createElement("span",{className:"".concat(Yt.btns),style:Yt,onClick:()=>{Ba(Fe,La)}},ka))}))}});var Ct=()=>{gt(Be=>(0,L.Z)((0,L.Z)({},Be),{},{visible:!1}))},kt=Be=>{var Fe=Be.data.total*1;ce(Fe)},Wt=(0,V.useMemo)(()=>T().createElement(je,{className:he()["record-chart-container"],params:Xt,height:450}),[Xt]),Ht=Be=>{Ia(Be)},Ma=()=>{if(be!=="manage"&&vt==="examRecord")return Jt&&Jt();if(be==="manage")return T().createElement("span",{onClick:Lt,style:{cursor:"pointer"}},T().createElement(j.Z,null))};return T().createElement("div",null,T().createElement(ge.Z,{onChange:Ht,activeKey:vt,tabBarExtraContent:Ma()},T().createElement(C,{tab:At||b("common.examRecord"),key:"examRecord"},vt==="examRecord"&&T().createElement("div",{className:he()["exam-record-wrap"]},T().createElement(Xe.Z,{ref:pa,uuid:"0bbb3a01-9767-491d-8948-f9befe6f81ce",queryParams:{columns:ga,query:ze},queryParam:Xt,pagination:Ta,options:!1,tableAlertRender:()=>!1,scroll:{x:"max-content",y:"330px"},loadComplete:kt,toolBarRender:be==="manage"?oa:null}))),fe>=3&&T().createElement(C,{tab:b("examination.recordCharts.title"),key:"recordChart"},vt==="recordChart"&&Wt)),T().createElement(X,(0,_.Z)({drawerTitle:b("exam.faceKnow")},Pt,{onCloseDrawer:Ct})))}var F=(0,ae.Z)()(k)},70018:function(Bt,Pe,t){"use strict";t.d(Pe,{TM:function(){return u},Ty:function(){return A},me:function(){return g},vU:function(){return de},NZ:function(){return L},C0:function(){return S},r7:function(){return h},lc:function(){return ge},lq:function(){return V},P8:function(){return T},yZ:function(){return ae},rh:function(){return j},li:function(){return c},i3:function(){return l},G2:function(){return Q},wg:function(){return w},et:function(){return ie}});var _=t(81211),e=t(10237),D=t(5430);function u(Z,z){var R=D.OB.examing.load(Z,z);return e.WY.post({url:R})}function A(Z,z){var R=D.OB.examing.save(Z);return e.WY.post({url:R,data:z})}function g(Z,z){var R=D.OB.examing.submit(Z);return e.WY.post({url:R,data:z})}function de(Z,z){var R=D.OB.examing.saveCut(Z);return e.WY.post({url:R,data:z})}function L(Z,z){var R=Z.examId,le=Z.submitId,H=Z.userId,N=D.OB.parse.list({examId:R,submitId:le,userId:H});return e.WY.get({url:N,params:z})}function S(Z,z){var R=Z.examId,le=Z.userId,H=D.OB.parse.info({examId:R,userId:le},z);return e.WY.get({url:H,params:z})}function h(Z){var z=Z.key,R=z===void 0?"":z,le=Z.msg,H=le===void 0?"":le,N=Z.data,y=N===void 0?{}:N;e.WY.logger({keyword:R,moduleName:"".concat(R,"-examing"),msg:H,data:y})}function ge(Z){var z=Z.examId,R=Z.page_size,le=Z.page_number,H=Z.type,N=D.OB.examData.rankingList(z);return e.WY.get({url:N,params:{page_size:R,page_number:le,type:H}})}function V(Z){var z=Z.examId,R=Z.task_id,le=Z.submit_id,H=le===void 0?"":le,N=D.OB.examData.examsResult(z);return e.WY.get({url:N,params:{task_id:R,submit_id:H}})}function T(Z){var z=D.OB.examData.certificateImage(Z);return e.WY.get({url:z})}function ae(Z){var z=Z.task_type,R=Z.task_id,le=Z.page_number,H=Z.page_size,N=Z.examId,y=Z.userId,je=Z.scene,pt=D.OB.examData.getRecordInfo(N,y);return e.WY.get({url:pt,params:{task_type:z,task_id:R,page_number:le,page_size:H,scene:je}})}function j(Z){var z=Z.status,R=Z.scene,le=Z.page_number,H=Z.page_size,N=Z.examId,y=D.OB.examMarking.getMarkUser(N);return e.WY.get({url:y,params:{status:z,scene:R,page_number:le,page_size:H}})}function c(Z,z){var R=D.OB.examMarking.submitMarking(Z);return e.WY.post({url:R,data:z})}function l(Z,z,R){var le=D.lk.getExamFromProject(Z,z);return e.WY.get({url:le,params:R})}function Q(Z){var z=Z.examId,R=Z.submitId,le=Z.userId,H=(0,_.Z)(Z,["examId","submitId","userId"]),N=D.OB.examData.faceRecognitionRecord({examId:z,submitId:R,userId:le});return e.WY.get({url:N,params:H})}function w(Z){var z=Z.examId,R=Z.submitId,le=Z.userId,H=D.OB.examData.faceRecognitionRecordStatistics({examId:z,submitId:R,userId:le});return e.WY.get({url:H})}function ie(Z){var z=Z.examId,R=D.OB.examData.hasFaceSnapshot({examId:z});return e.WY.get({url:R})}},78140:function(Bt,Pe,t){"use strict";t.d(Pe,{SP:function(){return A},zv:function(){return g},mc:function(){return de},O7:function(){return L},Ib:function(){return S},ZT:function(){return h},z2:function(){return ge},xu:function(){return V},$2:function(){return T},iy:function(){return ae},wL:function(){return j}});var _=t(88986),e=t(78138),D=t.n(e),u=t(2019);function A(c){var l=c.classify,Q=c.covers,w=c.employeeRange,ie=c.title,Z=c.liveType,z=c.splashImg,R=c.scene,le=c.memberCardType,H=w.rangeList,N=H.dept,y=H.group,je=H.post,pt=H.user,he=(0,_.Z)((0,_.Z)({title:ie,bizType:Z,liveType:Z,memberCardType:le,splashImg:z},Q),{},{courseClassify:l,startTime:c.datePicker instanceof Object?c.datePicker.valueOf():Date.parse(c.datePicker.replace(/\-/g,"/")),remindStatus:c.remindTime.open?"true":"false",minute:c.remindTime.time,chatStatus:c.ddGroup.switchValue?"create":"not",dingGroupName:c.ddGroup.groupName,teacherId:c.teacher.id,makePublic:"".concat(c.makePublic),introduction:c.introduction,picIntroductionUrl:c.picIntroductionUrl,studyType:c.studyType,tags:"",studyTimeLimit:c.studyLimit.checked?c.studyLimit.score:0,credit:c.credit.checked?c.credit.score:0,isAll:w.rangeType,departmentIds:N.map(Xe=>Xe.id).join(","),postIds:je.map(Xe=>Xe.id).join(","),groupIds:y.map(Xe=>Xe.id).join(","),userIds:pt.map(Xe=>Xe.id).join(","),syncProgress:c.syncProgress===0||c.syncProgress===!1?"false":"true",download:c.download===0||c.download===!1?"false":"true",commentSwitch:c.commentSwitch?1:0});return c.tagGroup&&Array.isArray(c.tagGroup.tagsNameList)&&(he.tags=c.tagGroup.tagsNameList.map(Xe=>Xe.tag_name).join(",")),Z==="poly_wei"&&(he.scene=R),he}function g(c){var l={title:c.title,covers:{coverType:c.coverType,cover:c.cover,baseCover:c.baseCover},bizType:c.liveType,liveType:c.liveType,datePicker:D()(parseInt(c.startTime)).format("YYYY-MM-DD HH:mm:ss"),classify:c.courseClassify,classifyName:c.classifyName,classify_name:c.classifyName,teacher:{name:c.teacherName||"",id:c.teacherId},makePublic:c.makePublic==="true",introduction:c.introduction,picIntroductionUrl:c.picIntroductionUrl,employeeRange:{rangeType:c.isAll,rangeList:{dept:c.departmentList||[],post:c.postList||[],group:c.groupList||[],user:c.userList||[]}},remindTime:{open:c.remindStatus==="true",time:"".concat(c.minute)},ddGroup:{switchValue:c.chatStatus==="create",groupName:c.dingGroupName},splashImg:c.splashImg,credit:{checked:c.credit!==0,score:c.credit===0?1:c.credit},studyLimit:{checked:c.studyTimeLimit!==0,score:c.studyTimeLimit===0?90:c.studyTimeLimit},complete:c.credit!==0&&c.studyTimeLimit!==0,studyType:c.studyType,syncProgress:c.syncProgress==="false"?0:1,download:c.download==="false"?0:1,commentSwitch:c.commentSwitch?1:0,memberCardType:c.memberCardType};return c.liveType==="poly_wei"&&(l.scene=c.scene||ae[0].value),l}function de(c){var l={endTime:Number(c.endTime),startTime:Number(c.startTime),updateTime:Number(c.updateTime)};return Object.assign(c,l)}var L=[{value:"",label:"live.allLiveChannel"},{value:"live_course",label:"live.liveCourse"},{value:"poly_wei",label:"live.polyWei"}],S=()=>[{value:"",label:"live.allLiveChannel",show:!0},{value:"live_course",label:"live.liveCourse",show:(0,u.Dp)()},{value:"poly_wei",label:"live.polyWei",show:!0}].filter(c=>c.show),h=c=>(0,u.Dp)()&&!c?[{value:"poly_wei",label:"live.polyWei"},{value:"live_course",label:"live.liveCourse"}]:c?[{value:"live_course",label:"live.liveCourse"}]:[{value:"poly_wei",label:"live.polyWei"}],ge=[{key:1,title:"live.innerLive",describe:"live.innerDescribe",active:!1},{key:2,title:"live.publicLive",describe:"live.publicDescribe",active:!1},{key:3,title:"live.normalMeeting",describe:"live.normalMeetingDescribe",active:!1}],V=[{value:"all",iconColor:"",label:"live.allLiveStatus"},{value:"prepartion",iconColor:"#0040FF",label:"common.notStarted"},{value:"live",iconColor:"#01DF3A",label:"live.liveing"},{value:"meeting",iconColor:"#01DF3A",label:"live.meeting"},{value:"expired",iconColor:"#BDBDBD",label:"ddLive.expired"}],T=[{value:"0",label:"live.remindA"},{value:"5",label:"live.remindB"},{value:"15",label:"live.remindC"},{value:"30",label:"live.remindD"},{value:"60",label:"live.remindE"},{value:"120",label:"live.remindF"},{value:"240",label:"live.remindG"}],ae=[{value:"ppt",label:"course.documentAndVideo"},{value:"alone",label:"course.pureVideo"}],j=[{value:"99",label:"live.allPublishStatus"},{value:"1",iconColor:"#0040FF",label:"courseManage.published"},{value:"0",iconColor:"#BDBDBD",label:"courseManage.unPublished"}]},945:function(Bt,Pe,t){"use strict";t.d(Pe,{Z:function(){return T}});var _=t(62029),e=t(88986),D=t(12924),u=t.n(D),A=t(91768),g=t(55285),de=t(37055),L=t(18329),S=t(95664),h=t(10237);function ge(ae){var j=de.ZP.StudyProjectList.getGoodsCountList();return h.WY.get({url:j,params:ae})}class V extends u().Component{constructor(j){super(j);this.onPageChange=c=>{var l=this.state.pageConfig;l.pageNumber=c,this.setState({pageConfig:l},()=>{this.getGoodsCountList()})},this.getGoodsCountList=()=>{var c=this.state.pageConfig,l={page_number:c.pageNumber,page_size:c.pageSize,enterprise_id:de.ZP.enterpriseId,order_id:this.props.order_id};ge(l).then(Q=>{c.totalNum=Q.data.total,c.totalPage=Q.data.pages;var w=Q.data.list;w.forEach(ie=>{var Z=(0,e.Z)({},ie);ie.user_info=Z}),this.setState({dataList:w,pageConfig:c})})},this.state={dataList:[],pageConfig:{pageNumber:1,pageSize:10}}}componentDidUpdate(j){j.visible!==this.props.visible&&this.props.visible&&this.setState({pageConfig:{pageNumber:1,pageSize:10}},()=>{this.getGoodsCountList()})}render(){var j=this.props.t,c=this.state,l=c.dataList,Q=c.pageConfig,w={title:"".concat(j("common.viewDetails")," (").concat(j("payment.allCounts")," ").concat(Q.totalNum,")"),size:"medium",destroyOnClose:!0,maskClosable:!1};return u().createElement(L.ZP,(0,_.Z)({},w,{visible:this.props.visible,onCancel:()=>this.props.onHiddenGoodsCount(),footer:null}),u().createElement(g.Z,{dataSource:l,bordered:!0,rowKey:ie=>ie.id,pagination:!1,tableUUID:"40960a22-bea1-4447-add3-52be72448e80"}),u().createElement(S.Z,{totalNum:Q.totalNum,totalPage:Q.totalPage,current:Q.pageNumber,defaultPageSize:10,showRenderRefresh:!1,onChange:this.onPageChange}))}}V.defaultProps={visible:!1,onHiddenGoodsCount:()=>{},onCancel:()=>{}};var T=(0,A.Z)()(V)},74221:function(Bt,Pe,t){"use strict";var _=t(13254),e=t(14277),D=t(13062),u=t(71230),A=t(89032),g=t(15746),de=t(20228),L=t(11382),S=t(12924),h=t.n(S),ge=t(91768),V=t(65914),T=t.n(V),ae=t(18329);class j extends h().Component{constructor(){super(...arguments);this.state={answerOption:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},this.onCancel=()=>{this.props.hideAssessModal()},this.renderAnswerTitle=(l,Q)=>{var w=Q.bgColor,ie=Q.name;return h().createElement("div",{className:"".concat(T()["topic-answer-title"]," ").concat(ie||""),style:{backgroundColor:w}},l)},this.renderFooter=()=>h().createElement("div",null)}render(){var l=this.props,Q=l.visible,w=l.t,ie=l.assessDetail,Z=l.loadingAssessDetail,z=ie||{},R=z.evaluateName,le=z.requirement,H=z.lists,N=this.state.answerOption;return h().createElement(ae.ZP,{size:"large",visible:Q,bodyStyle:{padding:"24px",height:620},title:w("leftMenuLists.evaluateTask"),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},h().createElement("div",{className:T()["assess-modal"]},Z?h().createElement("div",{className:T()["assess-loading"]},h().createElement(L.Z,null)):ie?h().createElement("span",null,h().createElement("div",{className:T().title},R),h().createElement("div",{className:T().introduce},le),h().createElement("div",{className:T().lists},H&&H.length?H.map(y=>h().createElement("div",{key:y.id,className:T()["lists-row"]},h().createElement("div",{className:T()["lists-row-topic"]}," ","".concat(y.topicTitle)," "),y.topicType==="1"&&h().createElement("div",null,h().createElement(u.Z,{gutter:[16,16]},h().createElement(g.Z,{span:14},y.topicOptions.length&&y.topicOptions.map((je,pt)=>h().createElement("div",{key:je.id,className:T()["topic-options"]},"".concat(N[pt],": ").concat(je.name)))),h().createElement(g.Z,{span:10,style:{background:"#F8F8FA"}},h().createElement(u.Z,{style:{height:"100%"}},h().createElement(g.Z,{span:12},h().createElement("div",{className:T()["topic-select"]},this.renderAnswerTitle(w("tutorial.tutor"),{bgColor:"#516AE6",name:""}),h().createElement("div",{className:T()["topic-select-text"],title:y.teacherSelectName},y.teacherSelectName))),h().createElement(g.Z,{span:12},h().createElement("div",{className:"".concat(T()["topic-select"]," ").concat(T()["topic-select-right"])},this.renderAnswerTitle(w("tutorial.student"),{bgColor:"#FAAD14",name:""}),h().createElement("div",{className:T()["topic-select-text"],title:y.studentSelectName},y.studentSelectName))))))),y.topicType==="2"&&h().createElement("div",{className:T()["topic-answer"]},h().createElement("div",{className:T()["topic-answer-content-teacher"]},this.renderAnswerTitle(w("tutorial.tutor"),{bgColor:"#516AE6",name:""}),h().createElement("div",{className:T()["topic-answer-text"]},y.teacherAnswers)),h().createElement("div",null,this.renderAnswerTitle(w("tutorial.student"),{bgColor:"#FAAD14",name:""}),h().createElement("div",{className:T()["topic-answer-text"]},y.studentAnswers))))):null)):h().createElement("div",{className:T()["assess-no-data"]},h().createElement(e.Z,null))))}}Pe.Z=(0,ge.Z)()(j)},50658:function(Bt,Pe,t){"use strict";t.d(Pe,{Z:function(){return T}});var _=t(36017),e=t(35247),D=t(12924),u=t.n(D),A=t(91768),g=t(76651),de=t(78001),L={list:{name:de.Z.t("trainingProject.trainingProjectList"),path:"knowledgeBase/learningResources/studyProject"},add:{name:de.Z.t("trainingProject.addEdit.addTraining"),path:"/training/learning/project/add"},edit:{name:de.Z.t("trainingProject.addEdit.editTraining"),path:"/training/learning/project/add"},monitor:{name:de.Z.t("common.data"),path:"/training/trainingProject/monitor"},view:{name:de.Z.t("trainingProject.trainingProjectView"),path:"/training/trainingProject/manageView"},preview:{name:de.Z.t("trainingProject.trainingProjectPreview"),path:"/training/trainingProject/manageView"},onLineClass:{name:de.Z.t("leftMenuLists.courseManagemention"),path:"/knowledgeBase/learningResources/courseManage"}},S=t(50163),h=t.n(S),ge=t(84874),V=ae=>{var j=ae.origin,c=j===void 0?"list":j,l=ae.current,Q=c&&c!=="undefined"?L[c]:L.list,w=Q.name,ie=g.m8.location,Z=()=>{g.m8.go(-1)},z=()=>{c==="list"?g.m8.push("/knowledgeBase/learningResources/studyProject"):g.m8.go(-1)};return u().createElement("div",{className:h()["breadcrumb-router-box"]},u().createElement(e.Z,null,u().createElement("span",{className:h()["back-router"],onClick:Z},u().createElement(ge.Z,{iconClass:"icon-fanhui",size:"14px"})),u().createElement(e.Z.Item,null,u().createElement("span",{className:h()["breadcrumb-item"],onClick:z},w)),u().createElement(e.Z.Item,null,u().createElement("span",{className:h()["breadcrumb-item-current"]},l?L[l].name:L[ie.pathname.split("/training/trainingProject")[1]].name))))},T=(0,A.Z)()(V)},52636:function(Bt,Pe,t){"use strict";var _=t(12924),e=t.n(_),D=e().createContext(null);Pe.Z=D},12739:function(Bt,Pe,t){"use strict";var _=t(33565),e=t(57361),D=t(88986),u=t(22385),A=t(31097),g=t(9754),de=t.n(g),L=t(12924),S=t.n(L),h=t(91768),ge=t(76651),V=t(28216),T=t(57068),ae=t(15337),j=t.n(ae),c=t(1164),l=t(99367),Q=t(45796),w=t(30311),ie=t(98233),Z=t(38642),z=t(35085),R=le=>{var H=le.t,N=le.from,y=le.courseId,je=le.projectInfo,pt=je===void 0?{}:je,he=(0,L.useRef)(),Xe=(0,V.v9)(i=>{var n=i.advancedSetting;return{themeColor:n.themeColor}}),_t=Xe.themeColor,m={query:i=>f(i),columns:[{title:H("exam.testName"),dataIndex:"title",width:300,key:"id",render:(i,n)=>S().createElement(A.Z,{title:n.title},S().createElement("div",{style:{color:_t,width:300},className:"cl-text-ellipsis cl-pointer",onClick:()=>{W(n)}},n.title))},{title:"".concat(H("exam.examinee"),"/").concat(H("exam.passed"),"/").concat(H("exam.failed")),dataIndex:"exam_count",key:"exam_count",width:180,visible:N!=="trainingProjectList",render:(i,n)=>{var r="".concat(n.exam_count,"/").concat(n.qualified_count,"/").concat(n.unqualified_count);return n.exam_count&&N!=="trainingProjectList"?S().createElement(w.Z,{name:r,onClick:()=>W(n)}):r}},{title:H("exam.absent"),width:130,dataIndex:"unexam_count",key:"unexam_count",visible:N!=="trainingProjectList"},{title:H("exam.toBeGraded"),width:120,dataIndex:"pending_count",key:"pending_count",render:(i,n)=>n.pending_count>0&&n.reading_operation==="has_operation"&&N!=="trainingProjectList"?S().createElement(w.Z,{name:n.pending_count,onClick:()=>_e(n)}):n.pending_count},{title:"".concat(H("common.joinRate"),"/").concat(H("common.examPassRate"),"/").concat(H("common.missRate")),dataIndex:"participation_rate",key:"participation_rate",width:240,visible:N!=="trainingProjectList",render:(i,n)=>S().createElement("div",null,S().createElement("span",null,n.participation_rate),"/",S().createElement("span",null,n.pass_rate),"/",S().createElement("span",null,n.absence_rate))},{title:H("exam.operate"),key:"operate",width:localStorage.getItem("lng")==="en_us"?210:100,fixed:"right",buttons:[{visible:()=>N!=="trainingProjectList",name:H("common.monitor"),handleClick:i=>W(i)},{name:H("trainingProject.markingPapers"),disabled:i=>!(i.pending_count>0&&i.reading_operation==="has_operation"),handleClick:i=>_e(i)},{name:H("common.share"),visible:i=>N!=="trainingProjectList"&&pt&&pt.study_project&&pt.study_project.status==="normal"&&(i.new_exam==="true"||i.new_exam===!0),handleClick:i=>B(i)}]}].filter(i=>i.visible!==!1)},f=i=>{var n=N==="trainingProjectList"?y:ge.m8.location.query.id;return(0,Q.LP)((0,D.Z)((0,D.Z)({},i),{},{id:n,is_pending:N==="trainingProjectList"}))},_e=function(){var i=(0,e.Z)(de().mark(function n(r){var Y,G;return de().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r.pending_count!==0){o.next=2;break}return o.abrupt("return");case 2:return Y=N==="trainingProjectList"?y:ge.m8.location.query.id,o.next=5,(0,ie.Md)(r.new_exam,{id:r.id,taskId:Y,status:"pending",from:"projectNew"});case 5:G=o.sent,r.new_exam?c.Z.targetTo({path:G}):ge.m8.push(G);case 7:case"end":return o.stop()}},n)}));return function(r){return i.apply(this,arguments)}}(),W=function(){var i=(0,e.Z)(de().mark(function n(r){var Y,G,s,o,p;return de().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return Y=ge.m8.location.query,G=Y.id,s=Y.projectId,o=N==="trainingProjectList"?y:G,X.next=4,(0,ie.OV)(r.new_exam,(0,D.Z)((0,D.Z)({},r),{},{taskId:o,projectId:s,from:"project",taskType:"project"}));case 4:p=X.sent,ge.m8.push(p);case 6:case"end":return X.stop()}},n)}));return function(r){return i.apply(this,arguments)}}(),B=function(){var i=(0,e.Z)(de().mark(function n(r){var Y,G,s,o,p,d,X,C,k,F,P,b;return de().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return Y=r.title,G=r.id,s=ge.m8.location.query.projectId,x.next=4,(0,Z.Kb)((0,z.Wl)({planId:G}));case 4:if(o=x.sent,p=(0,_.Z)(o,2),d=p[1],X=T.stringify({source:"studyProject",type:"exam",id:s,course_id:G}),C={title:Y,from:"exam",path:(0,Z.jr)({pc_url:"/share-transit?".concat(X),mobile_url:"/share-transit?".concat(X),pc_type:"student",mobile_type:"h5"})},!d){x.next=15;break}if(k=d.data,F=k.code,P=k.data,b=P.exam_duration,!(F==="200000"&&b)){x.next=15;break}return S().$share.show({detail:(0,D.Z)((0,D.Z)({},C),{},{site1:{label:H("exam.examTime"),value:"".concat(b).concat(H("pk.min"))}})}),x.abrupt("return");case 15:S().$share.show({detail:C});case 16:case"end":return x.stop()}},n)}));return function(r){return i.apply(this,arguments)}}();return S().createElement("div",{className:j().exam},S().createElement(l.Z,{uniKey:"Exam",uuid:"a3f069b5-4c7c-43f0-bfce-02102c0c55bc",ref:he,queryParams:m,pagination:!0}))};Pe.Z=(0,h.Z)()(R)},89159:function(Bt,Pe,t){"use strict";t.r(Pe),t.d(Pe,{default:function(){return Gr}});var _=t(12924),e=t.n(_),D=t(91768),u=t(76651),A=t(57361),g=t(33565),de=t(18106),L=t(88108),S=t(9754),h=t.n(S),ge=t(61378),V=t(71153),T=t(60331),ae=t(78138),j=t.n(ae),c=t(28216),l=t(55216),Q=t.n(l),w=t(14738),ie=t(98233),Z=t(52636),z=J=>{var a=(0,c.v9)(ve=>{var $=ve.advancedSetting;return{themeColor:$.themeColor}}),E=a.themeColor,Te=(0,_.useContext)(Z.Z),Ue=Te.state,xe=J.t,ue=Ue.studyProjectInfo.study_project,q=()=>{var ve=u.m8.location.query.projectId;u.m8.push(ie.uk.manageView({id:ve,origin:"monitor",from:"manage"}))};return e().createElement("div",{className:Q().baseInfo},ue.title&&e().createElement("div",{id:"title-monitoring-box",className:Q().projectTitle},e().createElement("span",{onClick:()=>{q()},className:Q()["title-name"]},ue.title),e().createElement("span",{onClick:()=>{q()},className:Q().viewDetails,style:{color:E}},xe("personal.viewDetails"))),e().createElement("div",{className:Q().flexInfo},e().createElement("span",null," ",e().createElement("span",{className:Q().label},xe("common.creator"),"\uFF1A"),ue.create_user_name),e().createElement("span",null,e().createElement("span",{className:Q().label},xe("common.createTime"),"\uFF1A"),j()(ue.create_time).format("YYYY-MM-DD HH:mm")),e().createElement("span",null,e().createElement("span",{className:Q().label},xe("live.publishStatus"),"\uFF1A"),e().createElement(T.Z,{color:w.aD[ue.status]},xe(w.Q_[ue.status])))))},R=(0,D.Z)()(z),le=t(62029),H=t(48736),N=t(27049),y=t(59250),je=t(13013),pt=t(30887),he=t(99210),Xe=t(49111),_t=t(19650),m=t(57663),f=t(71577),_e=t(47673),W=t(4107),B=t(88983),i=t(47933),n=t(34792),r=t(48086),Y=t(71194),G=t(57016),s=t(88986),o=t(34669),p=t(82833),d=t(22385),X=t(31097),C=t(54029),k=t(62529),F=t(14965),P=t(11448),b=t(43358),O=t(34041),x=t(57119),oe=t(57254),Re=t(84391),be=t(57068),Et=t(50361),Ft=t.n(Et),Jt=t(7145),At=t.n(Jt),Lt=t(77883),ia=t(21888),pa=t(37366),Rt=t.n(pa),at=t(6793),Me=t(45796),Xt=O.Z.Option,la=J=>{var a=J.t,E=J.visible,Te=J.userIds,Ue=J.onCancel,xe=J.onOk,ue=J.tip,q=ue===void 0?"":ue,ve=J.title,$=ve===void 0?"":ve,Oe=J.delayAll,ye=Oe===void 0?!1:Oe,ee=J.queryParam,De=ee===void 0?{}:ee,Ee=J.source,We=J.endTime,me=(0,_.useState)("end_time"),Qe=(0,g.Z)(me,2),Ne=Qe[0],rt=Qe[1],Ge=(0,_.useState)(""),lt=(0,g.Z)(Ge,2),It=lt[0],K=lt[1],se=(0,_.useState)(""),te=(0,g.Z)(se,2),Ze=te[0],Le=te[1],ht=Ce=>{rt(Ce)},ot=()=>{Ue()},Kt=()=>{if(Ne==="end_time"&&!It){r.default.error(a("common.selectP",{name:a("examination.delayEndTimeLabel")}));return}if(Ne==="automatic_delay"&&!Ze){r.default.error(a("common.input",{name:a("examination.autoDelayLabel")}));return}St()},St=function(){var Ce=(0,A.Z)(h().mark(function Ve(){var xt,Ke,Ye;return h().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(xt=u.m8.location.query.projectId,Ke={end_time:Ne==="end_time"?It.toString():"",delays_days:Ne==="automatic_delay"?Ze:"",user_ids:Te,type:Ne},ye){He.next=8;break}return He.next=5,(0,Me.xu)(xt,Ke);case 5:Ye=He.sent,He.next=11;break;case 8:return He.next=10,(0,Me.Zj)(xt,(0,s.Z)((0,s.Z)({},Ke),De));case 10:Ye=He.sent;case 11:Ye.data.code==="200000"?(r.default.success(a("study.operateSuccess")),xe()):r.default.error(Ye.data.message);case 12:case"end":return He.stop()}},Ve)}));return function(){return Ce.apply(this,arguments)}}(),ut=Ce=>{K(Ce.valueOf())},bt=Ce=>{Le(Ce)};return e().createElement("div",null,e().createElement(G.Z,{title:$||a("common.postpone"),visible:E,onCancel:ot,centered:!0,onOk:Kt},e().createElement("div",{className:Rt().delayWrap},Te.length===1&&Ee==="table"?e().createElement("div",{className:Rt().currentTime},a("trainingProject.delay.currentTime",{time:(0,at.p6)(We)})):"",q?e().createElement("div",{className:"delay_tip"},q):null,e().createElement(O.Z,{defaultValue:"end_time",style:{width:120},className:Rt().marginRight,onChange:ht},e().createElement(Xt,{value:"end_time"},a("examination.delayEndTimeLabel")),e().createElement(Xt,{value:"automatic_delay"},a("examination.autoDelayLabel"))),Ne==="end_time"?e().createElement(P.Z,{showTime:{format:"HH:mm",defaultValue:j()("00:00:59","HH:mm:ss")},format:"YYYY-MM-DD HH:mm",onChange:ut}):e().createElement(e().Fragment,null,e().createElement(ia.Z,{min:1,max:999,precision:0,onChange:bt,placeholder:a("examination.inputPlaceholder")}),e().createElement("span",{className:Rt().unit},a("common.day"))),Ee==="table"&&Te.length===1&&Ze&&Ze<=999&&We?e().createElement("div",{className:Rt().endTime},a("trainingProject.delay.endTime",{time:(0,at.p6)(We+Ze*864e5)})):"")))},Ut=(0,D.Z)()(la),vt=t(66456),Ia=t(55313),Ea=t(95856),Sa=t.n(Ea),fe=t(18329),ce=J=>{var a=J.t,E=J.certificateConfig,Te=J.onCancel,Ue={size:"medium",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,footer:null},xe=(0,_.useState)([]),ue=(0,g.Z)(xe,2),q=ue[0],ve=ue[1],$=[{title:a("common.number"),dataIndex:"event_id",key:"event_id",width:96,render:function(){for(var ee=arguments.length,De=new Array(ee),Ee=0;Ee<ee;Ee++)De[Ee]=arguments[Ee];var We=De[2];return e().createElement("span",null,We+1)}},{title:a("authentication.certificateDetailName"),dataIndex:"certificate_name",key:"certificate_name",width:360,render:(ye,ee)=>{var De=ee.certificate_name;return e().createElement(X.Z,{title:De},e().createElement("div",{className:"cl-text-ellipsis",style:{maxWidth:360,display:"inline-block"}},De||"--"))}},{title:a("certificateRankingList.earningTime"),dataIndex:"create_time",key:"create_time",render:(ye,ee)=>{var De=ee.create_time;return e().createElement("span",null,j()(De*1).format("YYYY-MM-DD HH:mm"))}}];(0,_.useEffect)(()=>{Oe()},[]);var Oe=function(){var ye=(0,A.Z)(h().mark(function ee(){var De,Ee,We,me;return h().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return De=E.record,Ee=De.user_id,We=De.eventIds,Ne.next=3,(0,Me.v1)(Ee,{eventIds:We});case 3:me=Ne.sent,me.code==="200000"&&ve(me.data);case 5:case"end":return Ne.stop()}},ee)}));return function(){return ye.apply(this,arguments)}}();return e().createElement("div",null,e().createElement(fe.ZP,(0,le.Z)({title:a("certificateRankingList.certificateDetails")},Ue,{visible:E.visible,onCancel:()=>{Te()}}),e().createElement("div",{className:Sa()["certificate-list"]},e().createElement(Ia.Z,{dataSource:q,columns:$,rowKey:ye=>ye.id,bordered:!0,scroll:q.length>10?{y:450,x:!0}:{},pagination:!1,size:"small"}))))},qe=(0,D.Z)()(ce),Zt=t(57338),Pt=t(83107),gt=t(63185),qt=t(9676),Ca=t(68855),ea=t(92484),_a=t.n(ea),ua=t(41647),ze=t(97593),oa=J=>{var a=J.t,E=J.allColumns,Te=J.tableUUID,Ue=J.visible,xe=J.onClose,ue=J.params,q=(0,_.useState)(E),ve=(0,g.Z)(q,2),$=ve[0],Oe=ve[1],ye=(0,c.I0)(),ee=()=>{typeof xe=="function"&&xe()},De=()=>{if($.length===0){r.default.destroy(),r.default.config({getContainer:()=>document.querySelector("[class*=record-export-excel]  .ant-drawer-content-wrapper"),rtl:!0}),r.default.warning(a("trainingProject.exportInfo.atLeast"));return}var me=ue.query,Qe=ue.page,Ne=ue.rest,rt=$.map(Ge=>Ge.key).join(",");me.export_column=rt,J.dispatch=ye,(0,ze.N)({query:me,page:Qe,props:J,rest:Ne,sendType:"post"}),ee()},Ee=(me,Qe)=>{var Ne=me.target.checked;Oe(Ne?rt=>[...rt,Qe]:rt=>rt.filter(Ge=>Ge.key!==Qe.key))},We=me=>{var Qe=me.target.checked;Oe(Qe?E:[])};return(0,_.useEffect)(()=>{function me(Ne){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,A.Z)(h().mark(function Ne(rt){var Ge,lt,It,K,se;return h().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ze.next=2,(0,ua.U)(rt);case 2:if(Ge=Ze.sent,lt=Ge.status,It=Ge.data,lt===200){Ze.next=7;break}return Ze.abrupt("return");case 7:K=It.data.fields,se=Ft()($),K.forEach(Le=>{if(Le.show&&Le.show==="false"){var ht=se.findIndex(ot=>ot.key===Le.field);ht===-1&&typeof(Le.field*1)=="number"&&(ht=Le.field*1),se[ht].show="false"}}),Oe(se.filter(Le=>Le.show!=="false"));case 11:case"end":return Ze.stop()}},Ne)})),Qe.apply(this,arguments)}Te&&me(Te)},[]),e().createElement(Pt.Z,{title:a("trainingProject.exportInfo.title"),onClose:ee,width:420,visible:Ue,destroyOnClose:!0,className:_a()["record-export-excel"],key:"right",footer:e().createElement(_t.Z,null,e().createElement(f.Z,{onClick:xe},a("common.cancel")),e().createElement(f.Z,{onClick:De,type:"primary"},a("common.ok")))},e().createElement(e().Fragment,null,e().createElement("div",{className:_a().tip},e().createElement(Ca.Z,{style:{color:"#FAAD14"}}),e().createElement("span",{className:_a().info},a("trainingProject.exportInfo.tip",{type:ue.query.study_type==="task"?a("trainingProject.taskMonitor"):a("trainingProject.selfStudyRecord")}))),e().createElement("div",{className:_a().list},e().createElement(qt.Z,{key:"all",value:"all",onChange:We,checked:$.length===E.length,indeterminate:$.length>0&&$.length!==E.length},a("eTouch.selectAll")),E.length?E.map(me=>e().createElement(qt.Z,{key:me.key,value:me.key,onChange:Qe=>{Ee(Qe,me)},checked:$.findIndex(Qe=>Qe.key===me.key)>-1},e().createElement(X.Z,{placement:"top",title:me.title},me.title))):null)))},Gt=(0,D.Z)()(oa),va=t(26885),Ta=t(67479),ga=t(410),Ct=t(86726),kt=t(47745),Wt=t(30311),Ht=t(5430),Ma=t(43720),Be=t(1164),Fe=t(27763),wt=t(98417),dt=t(38642),ft=t(54531),ka=t(83431),Yt=t(48479),Nt=t(99367),La=t(64262),Ba=t(64630),Ya=t(25439),rn=t(31916),dn=O.Z.Option,Fa=P.Z.RangePicker,re=J=>{var a=J.t,E=J.from,Te=J.modules,Ue=J.handleChangeData,xe=J.userId,ue=(0,Ct.V9)("studyProject",Te),q=u.m8.location.query,ve=q.id,$=q.projectId,Oe=localStorage.enterpriseId,ye=(0,_.useRef)(),ee=(0,_.useContext)(Z.Z),De=ee.state,Ee=(0,dt.UI)("RANDOM_POPUP_VERIFY"),We=(0,dt.UI)("ZARA_H5"),me=De.studyProjectInfo.study_project,Qe=window.navigator.userAgent,Ne=(0,_.useState)({record:{},visible:!1}),rt=(0,g.Z)(Ne,2),Ge=rt[0],lt=rt[1],It=(0,_.useState)({visible:!1,userId:"",record:{},studyType:"project"}),K=(0,g.Z)(It,2),se=K[0],te=K[1],Ze=(0,_.useState)({total_count:0,finished_count:0,unfinished_count:0,overdue_count:0}),Le=(0,g.Z)(Ze,2),ht=Le[0],ot=Le[1],Kt=(0,_.useState)(0),St=(0,g.Z)(Kt,2),ut=St[0],bt=St[1],Ce=(0,_.useState)([]),Ve=(0,g.Z)(Ce,2),xt=Ve[0],Ke=Ve[1],Ye=(0,_.useState)([]),et=(0,g.Z)(Ye,2),He=et[0],ca=et[1],Ka=(0,_.useState)("1"),wa=(0,g.Z)(Ka,2),ya=wa[0],za=wa[1],ba=(0,_.useState)({projectName:"",planId:"",visible:!1}),da=(0,g.Z)(ba,2),Va=da[0],Ga=da[1],Da=(0,_.useState)({visible:!1,resourceType:"study_project",resourceId:"",resourceName:""}),en=(0,g.Z)(Da,2),En=en[0],on=en[1],pe=(0,_.useState)({delayVisible:!1,delayUserIds:[],title:"",tip:""}),Je=(0,g.Z)(pe,2),st=Je[0],Ot=Je[1],ma=(0,_.useState)({order_by:"",sort:"",study_type:E,qualified_status:"",keyword:"",study_status:"",department_id:"",post_id:"",enrollment:"",group_id:"",join_type:"",task_begin_time:"",task_end_time:""}),Vt=(0,g.Z)(ma,2),it=Vt[0],Oa=Vt[1],lr=[{value:"1",label:a("common.departmentLabel")},{value:"2",label:a("common.postLabel")}],or=(0,_.useState)([]),Wn=(0,g.Z)(or,2),Qn=Wn[0],ur=Wn[1],cr=(0,_.useState)({visible:!1,planId:"",userId:"",planTitle:""}),Cn=(0,g.Z)(cr,2),kn=Cn[0],tn=Cn[1],Kn=(0,_.useState)({visible:!1,taskId:"",examId:"",userId:""}),Vn=(0,g.Z)(Kn,2),an=Vn[0],bn=Vn[1],dr=(0,_.useState)({visible:!1,allColumns:[]}),Yn=(0,g.Z)(dr,2),$n=Yn[0],zn=Yn[1],M=[{title:a("trainingProject.signUp"),dataIndex:"enrollment",key:"enrollment",width:100,filters:[{text:a("common.all"),value:"all"},{text:a("common.yes"),value:"true"},{text:a("common.no"),value:"false"}],filterMultiple:!1,render:(v,I)=>{var U=I.enrollment;return a(U===!0?"common.yes":"common.no")}},{title:a("trainingProject.filter.taskStartTime"),width:280,dataIndex:"task_begin_time",key:"task_begin_time",render:(v,I)=>{var U=I.task_begin_time;return e().createElement(e().Fragment,null,E==="task"?e().createElement("span",null,(0,at.p6)(Number(U),"yyyy-MM-dd hh:mm")):"")},sorter:!0},{title:a("trainingProject.filter.taskEndTime"),width:280,dataIndex:"task_end_time",key:"task_end_time",render:(v,I)=>{var U=I.task_end_time;return e().createElement(e().Fragment,null,E==="task"?e().createElement("span",null,(0,at.p6)(Number(U),"yyyy-MM-dd hh:mm")):"")},sorter:!0},{title:a("trainingProject.firstLearningTime"),width:140,dataIndex:"create_time",key:"create_time",sorter:!0,render:(v,I)=>{var U=I.create_time;return U?(0,at.p6)(Number(U),"yyyy-MM-dd hh:mm"):"--"}},{title:a("trainingProject.lastLearningTime"),width:140,dataIndex:"update_time",key:"update_time",sorter:!0,sortDirections:["ascend","descend"],render:(v,I)=>{var U=I.update_time;return U?(0,at.p6)(Number(U),"yyyy-MM-dd hh:mm"):"--"}},{title:a("trainingProject.isQualified"),dataIndex:"qualified_status",key:"qualified_status",width:100,filters:[{text:a("common.all"),value:"all"},{text:a("study.employeePass"),value:"true"},{text:a("study.employeeUnPass"),value:"false"}],filterMultiple:!1,render:(v,I)=>{var U=I.qualified_status;return a(U===!0?"study.employeePass":"study.employeeUnPass")}},{title:a("trainingProject.isTransferStudents"),dataIndex:"join_type",key:"join_type",width:130,filters:[{text:a("common.all"),value:"all"},{text:a("common.yes"),value:"transfer"},{text:a("common.no"),value:"other"}],filterMultiple:!1,render:(v,I)=>{var U=I.join_type;return a(U==="transfer"?"common.yes":"common.no")}},{title:a("common.status"),width:100,dataIndex:"project_status",key:"project_status",render:(v,I)=>{var U=I.project_status,Se="",ke="";switch(U){case"unfinished":Se=a("common.ongoing"),ke="#69A4E7";break;case"finished":Se=a("questionn.completed"),ke="#52C41A";break;case"overdue":Se=a("common.overdue"),ke="#FF4D4F";break;default:}return Se?e().createElement(k.Z,{color:ke,text:Se}):"--"}},{title:e().createElement("div",null,e().createElement("span",{style:{marginRight:"8px"}}," ",a("study.trainingProgress")),e().createElement(X.Z,{title:a("study.trainingProgressTip"),overlayStyle:{fontSize:12}},e().createElement(x.Z,{style:{color:"rgba(0,0,0,0.45)"}}))),width:150,dataIndex:"process",key:"process",sorter:!0,render:(v,I)=>{var U=I.process;return e().createElement(p.Z,{percent:+U,size:"small",status:U>=100?"success":"normal",strokeColor:U>=100?"#58D28B":""})}},{title:a("study.studyCompleted"),width:130,dataIndex:"study_progress",key:"study_progress",render:(v,I)=>{var U=I.study_count,Se=I.study_progress;return e().createElement("span",null,U===0?"--":"".concat(Se,"%"))}},{title:a("study.passedTime"),width:120,dataIndex:"exam_pass_count",key:"exam_pass_count",render:(v,I)=>{var U=I.exam_pass_count;return U+a("study.examTimes")}},{title:a("employeeSummary.getScores"),width:120,dataIndex:"credits",key:"credits",render:(v,I)=>{var U=I.credits;return U||"--"}},{title:a("personal.getCerti"),width:120,dataIndex:"certificate_count",key:"certificate_count",render:(v,I)=>e().createElement(e().Fragment,null,I.certificate_count!=="0"?e().createElement(Wt.Z,{name:I.certificate_count,onClick:()=>os(I)}):I.certificate_count)},{title:a("common.studyDuration"),dataIndex:"study_duration_str",key:"study_duration_str",width:110,render:(v,I)=>{var U=I.study_duration_str;return U||"--"}},{title:a("learning.learningOfflineTrainDuration"),dataIndex:"offlineTrainDurationStr",key:"offlineTrainDurationStr",width:110},{title:a("common.examDuration"),dataIndex:"exam_duration_str",key:"exam_duration_str",width:90,render:(v,I)=>{var U=I.exam_duration_str;return U||"--"}},{title:a("exam.examTime"),dataIndex:"exam_cast_duration_str",key:"exam_cast_duration_str",width:90,render:(v,I)=>{var U=I.exam_cast_duration_str;return U||"--"}},{title:a("common.operate"),fixed:"right",key:"operate",width:localStorage.getItem("lng")==="en_us"?E==="task"?250:280:E==="task"?180:240,visibleNum:2,buttons:[{disabled:v=>v.study_count<=0,name:a("common.studyRecord"),handleClick:v=>vr(v,"study")},{visible:()=>E==="task",name:a("common.postpone"),disabled:()=>me.status!=="normal",handleClick:v=>gr([v.user_id],!1,{source:"table",task_end_time:v.task_end_time})},{disabled:v=>!(v.exam_count>0&&v.exam_join_count>0&&v.exam_get_score_count>0),name:a("common.examRecord"),handleClick:v=>vr(v,"exam")},{disabled:v=>v.total_operation_count<=0,name:a(Oe==="1074539867477774379"?"leftMenuLists.operationRecord2":"leftMenuLists.operationRecord"),handleClick:v=>vr(v,"work")},{visible:()=>E==="task",name:a("common.delete"),handleClick:v=>fr([v.user_id])}]}];E==="self_study"&&M.splice(1,2);var ne=(0,_.useState)({query:v=>ja(v),columns:M,successBack:v=>{Dt(v)}}),Ie=(0,g.Z)(ne,2),$e=Ie[0],Mt=Ie[1];(0,_.useEffect)(()=>{(0,ft.TN)()},[]),(0,_.useEffect)(()=>(ha(),()=>{(0,ge.Z)().exit()}),ye),(0,_.useEffect)(()=>{In()},[it]);var Na=(v,I)=>(I===0?(v.ratioTitle=a("training.completion_rate"),v.firstTitle=a("personnelDevelope.quantityCompleted"),v.secondTitle=a("common.ongoing")):I===1?(v.ratioTitle=a("common.joinRate"),v.firstTitle=a("study.shouldPart"),v.secondTitle=a("component.tookPart")):(v.ratioTitle=a("common.passRate"),v.firstTitle=a("study.employeePass"),v.secondTitle=a("study.employeeUnPass")),v),Dt=v=>{var I=Object.values(v.summarizing).map((U,Se)=>{var ke={};for(var tt in U)switch(tt){case"finish_num":case"should_part_num":case"qualified_num":ke=Na((0,s.Z)((0,s.Z)({},ke),{},{firstNum:U[tt]}),Se);break;case"in_hand_num":case"actual_part_num":case"not_qualified_num":ke=Na((0,s.Z)((0,s.Z)({},ke),{},{secondNum:U[tt]}),Se);break;case"overdue_num":ke=(0,s.Z)((0,s.Z)({},ke),{},{overdueNum:U[tt],overdueTitle:a("common.overdue")});break;case"ratio":ke=Na((0,s.Z)((0,s.Z)({},ke),{},{ratio:U[tt]}),Se);break;default:break}return(0,s.Z)((0,s.Z)({},U),ke)});E==="task"?I.unshift(I.splice(1,1)[0]):I.splice(1,1),ur(I)},ha=function(){var v=(0,A.Z)(h().mark(function I(){var U;return h().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,(0,rn.YQ)({userId:xe,type:37});case 2:U=ke.sent,U&&un();case 4:case"end":return ke.stop()}},I)}));return function(){return v.apply(this,arguments)}}(),un=()=>{var v=[{title:a("trainingProject.viewSummaryDataTip"),element:document.querySelector(".project-summary-data"),intro:a("trainingProject.viewSummaryDataDesc"),position:"bottom"}];(0,ge.Z)().setOptions({doneLabel:a("trainingProject.guideView.know"),exitOnOverlayClick:!1,disableInteraction:!0,steps:v,hidePrev:!0}).start()},In=()=>{ye.current&&ye.current.load(it)},Sn=v=>{var I=v.course_id,U=v.user_id,Se=v.title,ke=v.course_type,tt=v.exam_task_id;if(ke===15){bn({visible:!0,taskId:tt,examId:I,userId:U});return}tn((0,s.Z)((0,s.Z)({},kn),{},{visible:!0,planId:I,userId:U,planTitle:Se}))},ja=v=>(0,Me.PN)(ve,(0,s.Z)((0,s.Z)((0,s.Z)({},it),v),{},{project_id:$})),mr=v=>{var I=[];v[0]&&(I=v[0].stages.map((U,Se)=>{var ke=[{title:a("study.stageProgress"),width:115,dataIndex:["stages",Se,"stage_progress"],key:"stage_progress",render:tt=>"".concat(tt,"%")}];return{title:U.stage_name,children:ke.concat(U.resources.map((tt,sa)=>E==="self_study"&&(We&&String(tt.course_type)==="14"||String(tt.courseType)==="14")?{}:{title:tt.resource_name,dataIndex:["stages",Se,"resources",sa],key:"resources",width:150,render:ct=>{if(ct.course_type===7)return e().createElement("span",null,ct.study_progress,"%");if(ct.courseType===11)return e().createElement("span",null,ct.studyProgress>=100?a("questionn.completed"):a("common.unFinish"));if(ct.course_type===10){var Aa=ct.operation_status===1?a("common.pending"):ct.operation_status===2?"".concat(a("common.reject")):ct.operation_status===3?"".concat(a("common.completed")):a("common.ongoing");return Aa}if(ct.course_type===17){var yr=ct.practiceUserVo,Tr=yr||{},xr=Tr.pass_status,Zr=Tr.pass_rate;return xr==="not"?a("questionPractice.notPractice"):xr==="pass"?"".concat(a("study.employeePass"),"(").concat(a("course.accuracy")).concat(Zr||0,")"):"".concat(a("study.employeeUnPass"),"(").concat(a("course.accuracy")).concat(Zr||0,")")}if(ct.course_type===6||ct.course_type===15){var nn=ct.status;if(nn==="inProgress")return a("common.ongoing");if(nn==="readying")return a("study.absent");if(nn==="absence")return a("myExamTask.absent");if(nn==="pending")return a("myExamTask.marking");if(nn==="passed"||nn==="failed"){var fs=a(nn==="passed"?"myExamTask.qualified":"myExamTask.unqualified"),Pr="".concat(ct.score," ").concat(a("common.minute"),"(").concat(fs,")");return ct.makeup_count>1?e().createElement(Wt.Z,{name:Pr,onClick:()=>Sn(ct)}):Pr}}else return e().createElement("span",null,ct.study_progress,"%")}}))}})),M.splice(E==="self_study"?12:13,0,...I),Mt((0,s.Z)((0,s.Z)({},$e),{},{columns:Ft()(M)}))},Tn=()=>{tn((0,s.Z)((0,s.Z)({},kn),{},{visible:!1,planId:"",userId:""}))},pr=v=>{Oa((0,s.Z)((0,s.Z)({},it),{},{study_status:v.target.value}))},Gn=v=>{za(v),Oa((0,s.Z)((0,s.Z)({},it),{},{department_id:"",post_id:"",group_id:""}))},xn=v=>{Oa((0,s.Z)((0,s.Z)({},it),{},{department_id:v,post_id:"",group_id:""}))},cn=v=>{Oa((0,s.Z)((0,s.Z)({},it),{},{post_id:v,department_id:"",group_id:""}))},Hn=(v,I)=>{Oa((0,s.Z)((0,s.Z)({},it),{},{task_begin_time:I[0]?(0,at.jZ)(I[0]):"",task_end_time:I[1]?(0,at.jZ)(I[1]):""}))},_r=v=>{ca(v)},vr=(v,I)=>{if(I==="study"){if(v.study_count<=0)return;te((0,s.Z)((0,s.Z)({},se),{},{visible:!0,userId:v.user_id,record:v}))}else if(I==="exam")v.exam_count>0&&v.exam_join_count>0&&Hr(v);else if(I==="work"){if(v.total_operation_count<=0)return;Be.Z.targetTo({path:"/training/operation/info?id=".concat(ve,"&taskId=").concat($,"&userId=").concat(v.user_id,"&taskType=study_project&renderList=true&page=monitor")})}},Hr=v=>{var I=v.stages,U=!1;if(I&&I.length&&I.forEach(Se=>{Se.resources.forEach(ke=>{ke.course_type===15&&ke.is_pass!==""&&(U=!0)})}),U){Be.Z.targetTo({path:Ta.W.parse({user_id:v.user_id,projectId:$,scene:"manage",from:"trainingProject"})});return}u.m8.push({pathname:"/training/examination/result",search:be.stringify({userId:v.user_id,planId:ve,pageFrom:"projectMonitor",repeatMarking:!0})})},kr=()=>{te((0,s.Z)((0,s.Z)({},se),{},{visible:!1}))},gr=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(!(!U&&I.length===0)){var ke={delayVisible:!0,delayUserIds:I||[],title:I.length>0?a("exam.batchDelay"):a("trainingProject.delay.allDelay"),tip:I.length>0?"":a("trainingProject.delay.allDelayTip"),queryParam:{department_id:it.department_id,study_status:it.study_status,post_id:it.post_id,keyword:it.keyword,task_begin_time:it.task_begin_time,task_end_time:it.task_end_time},delayAll:U};Se!==""&&(ke.source=Se.source,ke.endTime=Se.task_end_time,ke.title=a("trainingProject.delay.singleDelay")),U||delete ke.queryParam,Ot(ke)}},Jr=()=>{br(),In()},br=()=>{ca([]),Ot({delayVisible:!1,delayUserIds:[]})},fr=v=>{G.Z.confirm({title:a("trainingProject.deleteListTip"),content:a("trainingProject.deleteStudent"),onOk:function(){var I=(0,A.Z)(h().mark(function Se(){var ke;return h().wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:return sa.next=2,(0,Me.Cz)($,{user_ids:v});case 2:ke=sa.sent,ke.data.code==="200000"?(ca([]),r.default.success(a("study.operateSuccess")),Oa((0,s.Z)((0,s.Z)({},it),{},{page_number:1}))):r.default.error(ke.data.message);case 4:case"end":return sa.stop()}},Se)}));function U(){return I.apply(this,arguments)}return U}()})},Xr=function v(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2e3,ke=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(I.length>Se)(0,va.mw)(I.slice(0,Se),U,tt=>{var sa={chat_id:tt,enterprise_id:Oe,project_id:$,user_id:ke.id,title:me.title};(0,Me.gu)(sa).then(ct=>{ct.status===200&&ct.data?r.default.success(a("trainingProject.chat.chatCreateSuccess")):console.warn(ct,a("trainingProject.chat.SaveFailed")),v(I.slice(Se),U,Se,ke)})});else{if(I.length==1)return!0;(0,va.mw)(I,U,tt=>{var sa={chat_id:tt,enterprise_id:Oe,project_id:$,user_id:ke.id,title:me.title};(0,Me.gu)(sa).then(ct=>(ct.status===200&&ct.data?r.default.success(a("trainingProject.chat.chatCreateSuccess")):console.warn(ct,a("trainingProject.chat.SaveFailed")),!0))})}},qr=()=>{var v=J.user;G.Z.confirm({title:a("trainingProject.chat.createGroup"),content:e().createElement("div",null,e().createElement("div",null,a("trainingProject.chat.doCreateGroup")),e().createElement("div",null,a("trainingProject.chat.note")),e().createElement("div",null,a("trainingProject.chat.mostPeople")),e().createElement("div",null,a("trainingProject.chat.manyChat")),e().createElement("div",null,a("trainingProject.chat.customOrganization"))),onOk:()=>{var I={type:4,courseId:ve};(0,Me.Z)(I).then(U=>{if(U.status===200&&U.data){var Se=U.data;if(Se.length<2||Se.length==2&&Se.includes(v.id))return r.default.error(a("trainingProject.chat.failSelectTwo")),!1;var ke={title:me.title,desc:"".concat(v.name).concat(a("trainingProject.chat.trainForYou")),url:"".concat("https://mobile.coolcollege.cn","/#/pages/login/login-we-com/index?flag=study_project&id=").concat(me.course_id,"&taskId=").concat(me.id,"&projectId=").concat(me.course_id),imgUrl:me.base_cover};Se=Se.filter(tt=>tt!=v.unionid),Xr(Se,ke,2e3,v)}})}})},ys=v=>{var I=J.user;if(v.length<2||v.length==2&&v.includes(I.id))return r.default.error(a("trainingProject.chat.failSelectTwo")),!1;G.Z.confirm({title:a("trainingProject.chat.createGroup"),content:a("trainingProject.chat.doCreateGroup"),onOk:()=>{var U={filter_auth:!1,user_type:"active",userIds:v.join(",")};(0,Me.cH)(U).then(Se=>{if(Se.status===200&&Se.data){var ke=Se.data.users.map(sa=>sa.user_id),tt={title:me.title,desc:"".concat(I.name).concat(a("trainingProject.chat.trainForYou")),url:"".concat("https://mobile.coolcollege.cn","/#/pages/login/login-we-com/index?flag=study_project&id=").concat(me.course_id,"&taskId=").concat(me.id,"&projectId=").concat(me.course_id),imgUrl:me.base_cover};(0,va.mw)(ke,tt,sa=>{var ct={chat_id:sa,enterprise_id:Oe,project_id:$,user_id:I.id,title:me.title};(0,Me.gu)(ct).then(Aa=>{Aa.status===200&&Aa.data?r.default.success(a("trainingProject.chat.chatCreateSuccess")):console.warn(Aa,a("trainingProject.chat.SaveFailed"))})})}})}})},es=()=>{Ga(v=>(0,s.Z)((0,s.Z)({},v),{},{projectName:me.title,planId:$,visible:!0}))},ts=()=>{on(v=>(0,s.Z)((0,s.Z)({},v),{},{resourceId:me.course_id,resourceName:me.title,visible:!0}))},as=()=>{zn({visible:!1,allColumns:[],tableUUID:""})},ns=v=>{var I=Ft()(v).filter(U=>U.key!=="operate"||!U.key);return I.forEach(U=>{(typeof U.key=="undefined"||!U.key)&&(U.key="stage_name_".concat(U.title))}),I},Ir=()=>{ut!==0&&zn({visible:!0,allColumns:ns(ye.current.getColumns()),tableUUID:"0d24bab2-9e50-47a9-8d8a-6f9b9bc1f2f1",params:{query:(0,s.Z)((0,s.Z)({},it),{},{enroll_status:it.enrollment}),rest:{courseId:ve},page:"studyProjectMonitorExport"}})},rs=()=>{ut!==0&&Sr({type:1})},ss=()=>{ut!==0&&Sr({type:2})},Sr=v=>{var I=v.type;G.Z.confirm({title:a("common.tip"),content:Number(I)===2?a("study.confirmToExportFacePdf"):a("study.confirmToExportPdf"),onOk:()=>{var U=it.department_id,Se=it.keyword,ke=it.qualified_status,tt=it.study_status,sa=it.post_id,ct=it.group_id,Aa=0;switch(tt){case"unfinished":Aa=1;break;case"finished":Aa=2;break;case"overdue":Aa=3;break;default:Aa=0}var yr="?access_token=".concat(window.localStorage.getItem("token"),"&department_id=").concat(U,"&post_id=").concat(sa)+"&plan-id=".concat(ve,"&keyword=").concat(Se,"&task_status=").concat(Aa,"&qualified_status=").concat(ke,"&group_id=").concat(ct,"&type=").concat(I,"&plan_name=").concat(me.title);(0,ze.N)({page:"learningFaceMonitor",props:J,query:yr,rest:{taskId:ve}})}})},is=()=>{ut!==0&&G.Z.confirm({title:a("study.remind"),content:a("trainingProject.urgeTip"),zIndex:99999,onOk:function(){var v=(0,A.Z)(h().mark(function U(){var Se;return h().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.next=2,(0,Me.yN)($);case 2:Se=tt.sent,Se.data.code==="200000"?r.default.success(a("study.operateSuccess")):r.default.error(Se.data.message);case 4:case"end":return tt.stop()}},U)}));function I(){return v.apply(this,arguments)}return I}()})},ls=()=>{if(ut!==0){var v=sessionStorage.getItem("CL_E_APP_ID"),I=sessionStorage.getItem("CL_MINI_APP_ID"),U=encodeURIComponent("/pages/messageRedirect/messageRedirect?flag=study_project&projectId=".concat(ve)),Se="dingtalk://dingtalkclient/action/open_micro_app?&appId=".concat(v,"&miniAppId=").concat(I,"&page=").concat(U,"&corpId=$CORPID$"),ke=me.title,tt={users:xt,attachmentTitle:ke,text:(0,at.ZT)(a("trainingProject.dingTips"),ke),mobileUrl:Se};(0,ft.nb)(tt)}},os=v=>{lt({record:v,visible:!0})},us=v=>{ot({total_count:v.info.total_count,finished_count:v.info.finished_count,unfinished_count:v.info.unfinished_count,overdue_count:v.info.overdue_count}),v.data.total>0&&mr(v.data.list),bt(v.data.total),Ke(v.info.dingUserIds)},cs=v=>{var I={sort:"",order_by:""};if(v){var U=Object.keys(v)[0];I.sort=v[U],I.order_by=U}return I},ds=()=>{var v=[{label:a("common.all"),keyName:"total_count",value:""},{label:a("common.ongoing"),keyName:"unfinished_count",value:"unfinished"},{label:a("questionn.completed"),keyName:"finished_count",value:"finished"}];return E==="task"&&v.push({label:a("common.overdue"),keyName:"overdue_count",value:"overdue"}),e().createElement("div",{className:"displayFlex"},e().createElement(i.ZP.Group,{defaultValue:"",onChange:pr},v.map(I=>e().createElement(i.ZP.Button,{key:I.keyName,value:I.value},I.label,"(",ht[I.keyName],")"))),ps())},ms=()=>e().createElement(_t.Z,{size:12,wrap:!0},e().createElement(W.Z.Group,{compact:!0},e().createElement(O.Z,{placeholder:a("component.pleaseChoose"),defaultValue:ya,width:"120",onChange:Gn},lr.map(v=>e().createElement(dn,{value:v.value,key:v.value},v.label))),ya==="1"?e().createElement(La.Z,{parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,onTreeSelectChange:xn}):null,ya==="2"?e().createElement(Ba.Z,{disabled:!1,onChange:cn}):null),e().createElement(Yt.Z,{onSearch:v=>{Oa((0,s.Z)((0,s.Z)({},it),{},{keyword:v}))},width:200,placeholder:a("common.input",{name:a("common.userName")})}),E==="task"?e().createElement(W.Z.Group,{compact:!0},e().createElement(f.Z,null,a("learning.learningProjectTplTerm")),e().createElement(Fa,{onChange:Hn,showTime:{format:"HH:mm",defaultValue:j()("00:00:59","HH:mm:ss")},format:"YYYY-MM-DD HH:mm"})):null),ps=()=>{var v=J.user.appType;return e().createElement(_t.Z,{size:16},E==="task"&&(He.length?e().createElement(f.Z,{className:"primary-btn-color",disabled:!He.length,onClick:()=>fr(He)},a("study.batchDelete")):e().createElement(X.Z,{placement:"top",title:a("trainingProject.batchDelete")},e().createElement(f.Z,{className:"primary-btn-color",disabled:!He.length,onClick:()=>fr(He)},a("study.batchDelete")))),me.status==="normal"&&E==="task"?e().createElement(je.Z,{overlay:e().createElement(he.Z,null,e().createElement(he.Z.Item,{disabled:!He.length},e().createElement(X.Z,{title:a("trainingProject.batchDelay")},e().createElement("div",{onClick:()=>{ut*1!=0&&gr(He)},className:"delay_all_text"},e().createElement("span",{className:"batch-delay_text"},a("exam.batchDelay")),e().createElement(x.Z,null)))),e().createElement(he.Z.Item,{disabled:ut===0},e().createElement("div",{onClick:()=>{ut*1!=0&&gr([],!0)}},a("trainingProject.delay.allDelay"))))},e().createElement(f.Z,null,a("trainingProject.delay.delaySetting")," ",e().createElement(oe.Z,null))):null,v==="wx_app"&&Qe.includes("wxwork")&&E=="task"&&e().createElement(f.Z,{type:"primary",onClick:()=>qr()},a("trainingProject.chat.createGroup")),E==="task"&&e().createElement(N.Z,{type:"vertical",style:{height:"20px",borderColor:"#E9E9E9",margin:0}}),E==="task"&&e().createElement(je.Z,{disabled:ut===0,overlay:e().createElement(ka.Z,{onUrge:is,onDing:ls})},e().createElement(f.Z,null,a("study.remind")," ",e().createElement(oe.Z,null))),E==="task"&&me.status==="normal"&&((0,Ct.H3)("task_assign",ue)||(0,Ct.H3)("aotomatic_allot",ue))&&e().createElement(je.Z,{overlay:e().createElement(he.Z,null,(0,Ct.H3)("task_assign",ue)&&e().createElement(he.Z.Item,null,e().createElement("div",{onClick:()=>{es()}},a("trainingProject.taskAssignment"))),(0,Ct.H3)("aotomatic_allot",ue)&&e().createElement(he.Z.Item,null,e().createElement("div",{onClick:()=>{ts()}},a("autoAssign.autoAssign"))))},e().createElement(f.Z,null,a("trainingProject.assignSetting")," ",e().createElement(oe.Z,null))),_s())},_s=()=>{var v=(0,dt.UI)("STUDYTIMELIMT_VIDEO_FACE_KNOW");if(v){var I=e().createElement(he.Z,null,e().createElement(he.Z.Item,{key:"0"},e().createElement("div",{onClick:()=>{Ir()}},a("exam.exportLearnRecord"))),e().createElement(he.Z.Item,{key:"0"},e().createElement("div",{onClick:()=>{rs()}},a("exam.exportLearnRecordPdf"))),e().createElement(he.Z.Item,{key:"0"},e().createElement("div",{onClick:()=>{ss()}},a("exam.exportFaceSignPdf"))));return e().createElement(je.Z,{overlay:I,disabled:ut===0},e().createElement(f.Z,{type:"primary",icon:e().createElement(Re.Z,null)},a("common.exportData")))}return e().createElement(f.Z,{disabled:ut===0,type:ut===0?"default":"primary",onClick:()=>{Ir()}},e().createElement(Re.Z,null),a("common.exportData"))},vs=()=>e().createElement(_t.Z,{size:16},e().createElement(f.Z,{onClick:()=>{ca([])}},a("component.cancelSelect"))),gs=()=>{if(Qn.length!==0)return e().createElement("div",{className:"project-summary-data"},Qn.map((v,I)=>{var U=v.ratio.toString().split(".");return e().createElement("div",{className:E==="task"?"project-summary-item":"project-summary-item self_study",key:I.toString()},e().createElement("div",{className:"summary-item-content"},e().createElement("div",{className:"summary-item-child"},e().createElement("span",{className:"summary-item-title"},v.firstTitle),e().createElement("span",{className:"summary-item-number"},e().createElement("i",null,v.firstNum),e().createElement("strong",null,"\u4EBA"))),e().createElement("div",{className:"summary-line"}),e().createElement("div",{className:"summary-item-child"},e().createElement("span",{className:"summary-item-title"},v.secondTitle),e().createElement("span",{className:"summary-item-number"},e().createElement("i",null,v.secondNum),e().createElement("strong",null,"\u4EBA"))),e().createElement("div",{className:"summary-line"}),I===1&&E==="task"&&e().createElement(e().Fragment,null,e().createElement("div",{className:"summary-item-child"},e().createElement("span",{className:"summary-item-title"},v.overdueTitle),e().createElement("span",{className:"summary-item-number"},e().createElement("i",null,v.overdueNum),e().createElement("strong",null,"\u4EBA"))),e().createElement("div",{className:"summary-line"})),e().createElement("div",{className:"summary-item-child"},e().createElement("span",{className:"summary-item-title"},v.ratioTitle),e().createElement("span",{className:"summary-item-number"},e().createElement("i",null,U[0]),e().createElement("strong",null,U[1]?".".concat(U[1],"%"):"%")))))}))};return e().createElement("div",{className:"taskMonitor"},gs(),e().createElement("div",null,ds()),e().createElement(Nt.Z,{showUserInfo:!0,uniKey:"TaskMonitor",uuid:"0d24bab2-9e50-47a9-8d8a-6f9b9bc1f2f1",ref:ye,rowKey:"user_id",queryParams:$e,rowSelection:E==="self_study"?void 0:{selectedRowKeys:He,onChange:_r},onChangeData:Ue,sortFormate:cs,footerRightRender:vs,tableAlertRender:()=>!1,loadComplete:us,pagination:!0,headerTitle:ms()}),st.delayVisible&&e().createElement(Ut,{visible:st.delayVisible,userIds:st.delayUserIds,onOk:Jr,onCancel:br,title:st.title,tip:st.tip,queryParam:st.queryParam,delayAll:st.delayAll,source:st.source,endTime:st.endTime}),Ee?e().createElement(Fe.Z,(0,le.Z)({mainTaskInfo:me,generatePdf:!0},se,{onCancel:kr,taskId:ve,planType:"project"})):e().createElement(wt.Z,(0,le.Z)({mainTaskInfo:me,generatePdf:!0},se,{onCancel:kr,taskId:ve,planType:"project",from:E})),Va.visible&&e().createElement(Ma.Z,(0,le.Z)({isTaskAssignment:!0,wholeLoad:!0,periodOptions:["timeFrame"],customerShowTime:!0},Va,{title:a("trainingProject.taskAssignment"),onOperateSuccessCallback:()=>{In()},apiUrl:We?Ht.bS.assign_custom_task({planId:Va.planId}):Ht.bS.assign_task({planId:Va.planId}),zaraEvaluateUrl:Ht.bS.assignCustomEvaluate({planId:Va.planId}),onCancel:()=>{Ga(v=>(0,s.Z)((0,s.Z)({},v),{},{visible:!1,projectName:""}))}})),e().createElement(Ya.Z,(0,le.Z)({},En,{onClose:()=>{on(v=>(0,s.Z)((0,s.Z)({},v),{},{visible:!1}))}})),e().createElement(kt.Z,(0,le.Z)({},kn,{hideEveryExamGrade:Tn})),an.visible&&e().createElement(fe.ZP,{width:860,footer:null,closable:!1,visible:an.visible,bodyStyle:{padding:"0 16px 16px 16px"},onOk:()=>{bn(v=>At()(v,{visible:{$set:!1}}))}},e().createElement(ga.Z,{onCancel:()=>{bn(v=>At()(v,{visible:{$set:!1}}))},from:"manage",taskType:"normal",taskId:an.taskId,examId:an.examId,userId:an.userId})),Ge.visible&&e().createElement(qe,{certificateConfig:Ge,onCancel:()=>{lt({visible:!1,record:{}})}}),$n.visible&&e().createElement(Gt,(0,le.Z)({},$n,{onClose:as})))},Ae=J=>({modules:J.user.modules,user:J.user,userId:J.user.id}),$t=(0,c.$j)(Ae)((0,D.Z)()(re)),zt=t(945),xa=P.Z.RangePicker,mt=J=>{var a=J.t,E=(0,_.useRef)(),Te=(0,_.useContext)(Z.Z),Ue=Te.state,xe=(0,_.useState)({begin_time:"",end_time:"",keyword:"",depart_id:null}),ue=(0,g.Z)(xe,2),q=ue[0],ve=ue[1],$=(0,_.useState)({visible:!1,order_id:""}),Oe=(0,g.Z)($,2),ye=Oe[0],ee=Oe[1],De={query:()=>We(),columns:[{title:a("account.tradingHour"),width:120,dataIndex:"transaction_time",ellipsis:!0},{title:a("payment.orderNumber"),dataIndex:"order_id",width:120,ellipsis:!0},{title:a("payment.thirdPayNo"),width:120,dataIndex:"third_pay_no",ellipsis:!0},{title:a("payment.goodsCount"),width:100,dataIndex:"goods_count",render:(se,te)=>{var Ze=te.goods_count,Le=te.order_id;return Ze>0?e().createElement(Wt.Z,{name:Ze,onClick:()=>me(Le)}):0},ellipsis:!0},{title:a("payment.paymentChannel"),width:90,dataIndex:"pay_channel",ellipsis:!0},{title:a("dashboard.price"),width:90,dataIndex:"order_amount",ellipsis:!0},{title:a("study.result"),width:90,dataIndex:"order_amount",render:()=>a("component.successLabel"),ellipsis:!0}]},Ee=()=>{E.current&&E.current.load(q)},We=()=>{var se=u.m8.location.query.projectId;return(0,Me.Jp)(se,(0,s.Z)({},q))},me=se=>{ee({order_id:se,visible:!0})},Qe=()=>{G.Z.confirm({title:a("common.tip"),content:a("learning.payments.studyProjectExportTips"),onOk:Ne})},Ne=()=>{var se=u.m8.location.query.projectId,te=q.begin_time,Ze=q.end_time,Le=q.depart_id,ht=q.keyword,ot="?".concat(be.stringify({study_project_name:Ue.studyProjectInfo.study_project.title,begin_time:te,end_time:Ze,depart_id:Le,keyword:ht})),Kt={projectId:se};(0,ze.N)({page:"study_project_transaction_export",props:J,query:ot,rest:Kt})},rt=(se,te)=>{ve((0,s.Z)((0,s.Z)({},q),{},{begin_time:te[0],end_time:te[1]})),Ee()},Ge=se=>{ve((0,s.Z)((0,s.Z)({},q),{},{depart_id:se})),Ee()},lt=se=>{ve((0,s.Z)((0,s.Z)({},q),{},{keyword:se})),Ee()},It=()=>e().createElement(e().Fragment,null,e().createElement(f.Z,{className:"marginRight",type:"primary",icon:e().createElement(Re.Z,null),onClick:Qe},a("common.exportData")),e().createElement(xa,{onChange:rt})),K=()=>e().createElement(e().Fragment,null,e().createElement(La.Z,{treeSelect:!0,handleTreeSelectChange:Ge,checkable:!1,key:"two"}),e().createElement(Yt.Z,{placeholder:a("common.searchNamePlaceholder"),onSearch:se=>lt(se),key:"three"}));return e().createElement("div",{className:"transactionData"},e().createElement(Nt.Z,{showUserInfo:!0,uniKey:"TransactionData",uuid:"5f64d817-8dc3-487e-8690-7512675a46ee",ref:E,queryParams:De,pagination:!1,headerTitle:It(),toolBarRender:K}),e().createElement(zt.Z,(0,le.Z)({},ye,{onHiddenGoodsCount:()=>ee({visible:!1,order_id:""})})))},Jn=(0,D.Z)()(mt),Ha=t(60667),Zn=J=>{var a=J.t,E=(0,_.useRef)(),Te={page_number:1,page_size:20},Ue={query:ve=>xe(ve),columns:[{title:a("courseManage.courseTitle"),dataIndex:"course_name",key:"course_name",width:200,ellipsis:!0},{title:a("customFields.classify"),dataIndex:"course_classify_name",key:"course_classify_name"},{title:a("coursePanel.courseDuration"),dataIndex:"course_duration",key:"course_duration"},{title:a("component.lecturer"),dataIndex:"lecturer_name",key:"lecturer_name",render:(ve,$)=>e().createElement(Ha.Z,{dataType:"userName",value:$.lecturer_id,name:ve,type:$.lecturer_type})},{title:a("historicRecords.courseGrade"),dataIndex:"score",key:"score"},{title:a("dashboard.studyNum"),dataIndex:"study_user_count",key:"study_user_count"},{title:a("marketing.completeCount"),dataIndex:"finished_user_count",key:"finished_user_count"}]},xe=ve=>{var $=u.m8.location.query.projectId;return(0,Me.y$)((0,s.Z)((0,s.Z)({projectId:$},Te),ve))},ue=()=>{var ve=u.m8.location.query.projectId;G.Z.confirm({content:a("coursePanel.exportConfirm"),onOk:()=>{(0,ze.N)({page:"studyProjectCourseExport",rest:ve,props:J})}})},q=()=>e().createElement(e().Fragment,null,e().createElement(f.Z,{type:"primary",onClick:ue},a("common.exportData")," ",e().createElement(Re.Z,null)));return e().createElement("div",{className:"courseStatistics"},e().createElement(Nt.Z,{uniKey:"TaskMonitor",uuid:"12aba1ba-f449-4419-947b-f2b3ec8c133b",ref:E,queryParams:Ue,pagination:!0,toolBarRender:q}))},mn=(0,D.Z)()(Zn),Pn=t(96486),wn=t(45074),pn=t.n(wn),On=t(64462),_n=t(78140),vn=t(60333),ta=O.Z.Option,$a=_n.xu.concat({value:"end",iconColor:"#ADADAD",label:"common.ended"}),Xn=J=>{var a=J.t,E=(0,_.useRef)(),Te=(0,c.v9)(K=>{var se=K.user;return{modules:se.modules}}),Ue=Te.modules,xe=(0,_.useState)({pageNum:1,pageSize:20,keyword:"",liveStatus:"all",liveType:""}),ue=(0,g.Z)(xe,2),q=ue[0],ve=ue[1],$=(0,Ct.V9)("liveRoom",Ue);(0,_.useEffect)(()=>{Oe()},[q]);var Oe=()=>{E.current&&E.current.load(q)},ye={query:K=>Ne(K),columns:[{title:a("live.liveCourseName"),dataIndex:"title",width:300,key:"id"},{title:a("live.liveChannel"),dataIndex:"liveType",width:100,key:"liveType",render:K=>{var se;return a((se=_n.O7.find(te=>te.value===K))===null||se===void 0?void 0:se.label)}},{title:a("live.liveStatus"),dataIndex:"liveStatus",width:100,key:"liveStatus",render:K=>{var se=$a.find(te=>te.value===K);return e().createElement("div",null,e().createElement("span",{className:pn().icon,style:{borderColor:se?se.iconColor:"",background:se?se.iconColor:""}}),e().createElement("span",null,se?a(se.label):""))}},{title:a("live.liveTime"),dataIndex:"startTime",width:150,key:"startTime",render:(K,se)=>{var te=se.startTime;return te?j()(te*1).format("YYYY-MM-DD HH:mm"):"--"}},{title:a("component.lecturer"),dataIndex:"teacherName",width:100,key:"teacherName"},{title:a("learning.learningProjectAddCategory"),dataIndex:"classifyName",width:150,key:"classifyName",render:K=>e().createElement("div",null,K||a("course.courseCreatePanelFTCategoryNull"))},{title:a("course.viewers"),dataIndex:"uv",width:80,key:"uv"},{title:a("exam.operate"),key:"operate",width:localStorage.getItem("lng")==="en_us"?210:100,fixed:"right",buttons:[{visible:K=>(0,Ct.H3)("data",$)&&K.liveStatus==="end",name:a("common.monitor"),handleClick:K=>Qe(K)},{visible:K=>(0,Ct.H3)("start_live",$)&&K.liveStatus==="prepartion",name:a("live.startLive"),handleClick:K=>ee(K)},{visible:K=>(0,Ct.H3)("copy_start_live_link",$)&&(K.liveStatus==="prepartion"||K.liveStatus==="live")&&K.liveType==="poly_wei",name:a("registerLogin.copyLink"),handleClick:K=>me(K)}]}].filter(K=>K.visible!==!1)},ee=K=>{if(K.liveType==="poly_wei"){Ee(K);return}De(K)},De=function(){var K=(0,A.Z)(h().mark(function se(te){var Ze,Le,ht,ot,Kt;return h().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:Ze=te.courseId,Le=te.liveStatus,ht=te.liveUrl,ot=te.jumpUrl,Kt=navigator.userAgent,Kt.includes("DingTalk")?(0,vn.IR)({courseId:Ze}).then(bt=>{(0,Pn.get)(bt,"data.data.isCourseAnchor")?dd.biz.util.openLink({url:Le==="end"?ot:ht}):r.default.info(a("ddLive.anchorInfo"))}):r.default.info(a("ddLive.ddInfo"));case 3:case"end":return ut.stop()}},se)}));return function(te){return K.apply(this,arguments)}}(),Ee=K=>{(0,vn.IR)({courseId:K.courseId}).then(se=>{(0,Pn.get)(se,"data.data.isCourseAnchor")?(0,On.Vo)(K.courseId):r.default.info(a("ddLive.anchorInfo"))})},We=(K,se)=>{var te=localStorage.getItem("enterpriseId"),Ze="".concat((0,dt.lz)(te),"/live-broadcast-link?courseId=").concat(K.courseId,"&password=").concat(K.password,"&enterpriseId=").concat(te,"&playFlag=").concat(se);return Ze},me=K=>{var se=We(K,"external"),te=document.createElement("input");te.setAttribute("value",se),document.body.appendChild(te),te.select(),document.execCommand("Copy"),r.default.success(a("live.copySucceed")),document.body.removeChild(te)},Qe=K=>{var se=K.courseId;u.m8.push({pathname:"/training/learning/task/live/liveDetail",query:{courseId:se,from:"project",projectId:u.m8.location.query.id}})},Ne=K=>{var se=(0,s.Z)((0,s.Z)({},K),q);return se.liveStatus==="all"&&delete se.liveStatus,(0,Me.BT)(u.m8.location.query.projectId,se)},rt=K=>{ve((0,s.Z)((0,s.Z)({},q),{},{liveStatus:K,pageNum:1}))},Ge=K=>{ve((0,s.Z)((0,s.Z)({},q),{},{liveType:K,pageNum:1}))},lt=()=>e().createElement(e().Fragment,null,e().createElement(O.Z,{className:"cl-search-normal-width",placeholder:a("live.selectLiveStatus"),onChange:rt,defaultValue:q.liveStatus},$a.map(K=>e().createElement(ta,{key:K.value,value:K.value},a(K.label)))),e().createElement(O.Z,{className:"cl-search-normal-width",placeholder:a("live.selectChannel"),onChange:Ge,defaultValue:q.liveType,style:{marginLeft:15}},_n.O7.map(K=>e().createElement(ta,{key:K.value,value:K.value},a(K.label))))),It=()=>e().createElement(Yt.Z,{onSearch:K=>{ve((0,s.Z)((0,s.Z)({},q),{},{keyword:K}))},width:200,placeholder:a("live.searchPlaceHolder")});return e().createElement("div",{className:pn()["live-class"]},e().createElement(Nt.Z,{uniKey:"LiveClass",uuid:"f82ff752-62f6-428d-aca4-1ed6568c1dec",ref:E,queryParams:ye,toolBarRender:It,headerTitle:lt(),pagination:!0}))},Mn=(0,D.Z)()(Xn),fa=t(29208),Ja=t.n(fa),qn=t(27326),Dn=t.n(qn),sn=t(61120),gn=t.n(sn),er=t(52710),fn=t.n(er),tr=t(17676),ar=t(17762),Xa=t(83068),nr=t(83655),An=t(59169),rr=t(31196),Ln=t(48674),yn=t(43060),Rn=J=>{var a=e().createRef(),E=J.t,Te=(0,_.useRef)(),Ue=(0,_.useContext)(Z.Z),xe=Ue.state,ue=xe.studyProjectInfo.study_project,q=J.sourceType,ve=u.m8.location.query,$=ve.projectId,Oe=ve.id,ye=(0,_.useState)(!1),ee=(0,g.Z)(ye,2),De=ee[0],Ee=ee[1],We=(0,dt.UI)("PRINT_SIGNATURE"),me=(0,_.useState)({totalCount:0,unstarted:0,onGoingCount:0,endCount:0}),Qe=(0,g.Z)(me,2),Ne=Qe[0],rt=Qe[1],Ge=(0,_.useState)({type:"",visible:!1}),lt=(0,g.Z)(Ge,2),It=lt[0],K=lt[1],se=(0,_.useState)({visible:!1,type:"",id:""}),te=(0,g.Z)(se,2),Ze=te[0],Le=te[1],ht=(0,_.useState)({visible:!1,id:""}),ot=(0,g.Z)(ht,2),Kt=ot[0],St=ot[1],ut=(0,_.useState)({qrCodeVisible:!1,qrCodeDetail:{}}),bt=(0,g.Z)(ut,2),Ce=bt[0],Ve=bt[1],xt=(0,_.useState)(""),Ke=(0,g.Z)(xt,2),Ye=Ke[0],et=Ke[1],He=(0,_.useState)({sign_id:"",title:""}),ca=(0,g.Z)(He,2),Ka=ca[0],wa=ca[1],ya=(0,_.useState)(null),za=(0,g.Z)(ya,2),ba=za[0],da=za[1],Va=(0,_.useState)({sourceId:$,train_type:"",sourceType:q}),Ga=(0,g.Z)(Va,2),Da=Ga[0],en=Ga[1],En={query:M=>Je(M),columns:[{title:E("lineClassStudy.lineClassName"),dataIndex:"title",key:"title",fixed:"left",render:M=>e().createElement(X.Z,{title:M||"--"},e().createElement("div",{className:"cl-text-ellipsis",style:{width:180}},M||"--"))},{title:E("component.lecturer"),width:120,dataIndex:"lecturer_name",key:"lecturer_name",render:(M,ne)=>{var Ie=ne.teacher_sync_type,$e=ne.teacher_sync_user_id,Mt=ne.teacher_sync_source_type;return M&&Ie&&Ie==="inside"?e().createElement(Ha.Z,{dataType:"userName",value:$e,name:M,type:Mt}):e().createElement("span",null,M||"--")}},{title:E("lineClass.offlineTrainingDuration"),dataIndex:"course_duration_str",key:"course_duration_str",width:180,render:M=>M||"--"},{title:E("historicRecords.courseGrade"),dataIndex:"course_evaluate_message",key:"course_evaluate_message",width:90,render:(M,ne)=>ne.course_evaluate_message?ne.course_evaluate_message.evaluate_name==="0"?e().createElement("span",null,ne.course_evaluate_message.evaluate_name):e().createElement(Wt.Z,{name:M.evaluate_name,onClick:()=>Vt(ne)}):"--"},{title:E("lecturerPage.lecturerStar"),dataIndex:"lecturer_evaluate_message",key:"lecturer_evaluate_message",width:90,render:(M,ne)=>ne.lecturer_evaluate_message?ne.lecturer_evaluate_message.evaluate_name==="0"?e().createElement("span",null,ne.lecturer_evaluate_message.evaluate_name):e().createElement(Wt.Z,{name:M.evaluate_name,onClick:()=>it(ne)}):"--"},{title:E("lineClass.learningNum"),dataIndex:"accomplish_amount",key:"accomplish_amount",width:90,render:M=>M||"--"},{title:E("common.overdue"),width:90,dataIndex:"overdue_amount",key:"overdue_amount"},{title:E("common.completionRate"),width:90,dataIndex:"completion_rate",key:"completion_rate"},{title:E("lineClass.assessmentOffline"),width:700,dataIndex:["offline_assessment","have_score_amount"],key:"offline_assessment",children:[{title:E("lineClass.hasBeenRecorded"),width:180,render:(M,ne)=>{var Ie=Ja()(ne.offline_assessment,"have_score_amount",null);return!Ie||!ne.is_open_offline_assessment?"--":Ie}},{title:E("lineClass.toBeRecorded"),width:180,key:"offline_assessment",dataIndex:["offline_assessment","no_score_amount"],render:(M,ne)=>{var Ie=Ja()(ne.offline_assessment,"no_score_amount",null);return!Ie||!ne.is_open_offline_assessment?"--":Ie}}]},{title:E("lineClass.trainingAttachment"),width:90,key:"training_attachment",dataIndex:"training_attachment",render:(M,ne)=>ne.training_attachment?e().createElement(Wt.Z,{name:ne.training_attachment.amount,onClick:()=>Oa(ne.training_attachment.amount,ne.offline_course_id,"traning")}):"--"},{title:E("lineClass.activitiesAttachment"),width:90,key:"activity_attachment",dataIndex:"activity_attachment",render:(M,ne)=>ne.activity_attachment?e().createElement(Wt.Z,{name:ne.activity_attachment.amount,onClick:()=>Oa(ne.activity_attachment.amount,ne.activity_attachment.attachment_id,"activity")}):"--"},{title:E("learning.aiTrainTime"),width:180,render:(M,ne)=>ne.begin_time?e().createElement("span",null,j()(ne.begin_time).format("YYYY-MM-DD HH:mm"),"~",j()(ne.end_time).format("YYYY-MM-DD HH:mm")):"--"},{title:E("lineClass.classAddress"),dataIndex:"address",key:"address",width:120,render:M=>e().createElement(X.Z,{title:M||"--"},e().createElement("div",{className:"cl-text-ellipsis",style:{width:120}},M||"--"))},{title:E("common.operate"),width:120,fixed:"right",key:"operate",buttons:[{visible:!0,name:E("common.data"),handleClick:M=>or(M)},{visible:!0,disabled:M=>M.train_status!=="finished"||M.status!=="published",name:E("lineClass.curriculumSettlement"),handleClick:M=>Wn(M)},{visible:()=>ue.status==="normal",disabled:!1,name:E("common.share"),handleClick:M=>on(M)},{visible:!0,disabled:M=>!(M.status==="published"||M.status==="settled"),name:E("lineClass.summaryOfCourse"),handleClick:M=>lr(M)},{visible:!0,name:E("lineClassStudy.QRCode"),handleClick:M=>Qn(M)},{visible:We,name:E("common.printSignature"),handleClick:M=>ur(M)}]}]};(0,_.useEffect)(()=>{pe()},[Da]);var on=M=>{var ne=M.title,Ie=M.lecturer_name,$e=M.offline_course_id,Mt={title:ne,site1:{label:E("component.courseTime"),value:j()(M.begin_time).format("YYYY-MM-DD HH:mm")},site2:{label:E("common.endTime"),value:j()(M.end_time).format("YYYY-MM-DD HH:mm")},from:"offline",path:(0,dt.jr)({pc_url:"/share-transit?source=studyProject&type=offlineCourse&id=".concat($,"&course_id=").concat($e),mobile_url:"/share-transit?source=studyProject&type=offlineCourse&id=".concat($,"&course_id=").concat($e),pc_type:"student",mobile_type:"h5"})};Ie&&(Mt.lecture={name:Ie,avatar:"",id:"",source_type:""}),e().$share.show({detail:Mt})},pe=()=>{Te.current&&Te.current.load(Da)},Je=M=>(st(),(0,Me.MZ)((0,s.Z)((0,s.Z)({},M),Da))),st=function(){var M=(0,A.Z)(h().mark(function ne(){var Ie;return h().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Mt.next=2,(0,Me.CS)({sourceId:$,sourceType:q});case 2:Ie=Mt.sent,Ie.data.code==="200000"&&rt(Ie.data.data);case 4:case"end":return Mt.stop()}},ne)}));return function(){return M.apply(this,arguments)}}(),Ot=M=>{var ne=M.target.value;en((0,s.Z)((0,s.Z)({},Da),{},{train_type:ne}))},ma=()=>{G.Z.confirm({title:E("common.tip"),content:E("lineClass.confirmToExport"),onOk:()=>{var M="?source_type=".concat(q,"&train_type=").concat(Da.train_type);(0,ze.N)({page:"offlineCourseListExport",props:J,query:M,rest:{taskId:$}})}})},Vt=M=>{var ne=M.course_evaluate_message,Ie=M.lecturer_id,$e=M.offline_course_id;ne.evaluate_type==="star"&&ne.evaluate_name==="0"||K({visible:!0,evaluateType:ne.evaluate_type,id:ne.evaluate_id,visible:!0,courseId:$e,lecturerId:Ie,type:"course"})},it=M=>{var ne=M.lecturer_evaluate_message,Ie=M.lecturer_id,$e=M.offline_course_id;ne.evaluate_type==="star"&&ne.evaluate_name==="0"||K({visible:!0,evaluateType:ne.evaluate_type,id:ne.evaluate_id,courseId:$e,lecturerId:Ie,type:"lecturer"})},Oa=(M,ne,Ie)=>{!M||Le({visible:!0,type:Ie,id:ne})},lr=M=>{u.m8.push("/knowledgeBase/learningResources/lineClass/courseSummary?taskId=".concat($,"&courseId=").concat(M.offline_course_id,"&pId=").concat(Oe,"&fromType=project"))},or=M=>{if(q==="study_plan"){u.m8.push("/training/learning/task/lineClass/monitor?taskId=".concat($,"&courseId=").concat(M.offline_course_id,"&sourceType=").concat(q,"&signId=").concat(M.sign_id));return}u.m8.push("/knowledgeBase/learningResources/lineClass/monitor?taskId=".concat($,"&courseId=").concat(M.offline_course_id,"&sourceType=").concat(q,"&signId=").concat(M.sign_id))},Wn=M=>{St({visible:!0,id:M.offline_course_id})},Qn=M=>{Ve({qrCodeVisible:!0,qrCodeDetail:M})},ur=M=>{var ne=M.offline_course_id,Ie=M.sign_id,$e=M.title;et(ne),wa({sign_id:Ie,title:$e})},cr=()=>{et(null),wa({sign_id:"",title:""});var M=ba.selectStudents,ne=navigator.appVersion,Ie="DingTalk";if(ne.indexOf(Ie.toLowerCase())>-1){r.default.warn(E("printingIsNotSupported.printingIsNotSupported"));return}try{if(M){var $e=document.createElement("div"),Mt=document.body.innerHTML,Na=document.getElementById("printContainer");M.forEach(Dt=>{var ha=Cn(Na,$e,Dt),un=document.createElement("div");un.style.height="150px",$e.appendChild(un),$e.appendChild(ha)}),document.body.innerHTML=$e.innerHTML,window.print(),document.body.innerHTML=Mt,window.location.reload()}}catch(Dt){console.error(Dt)}},Cn=(M,ne,Ie)=>{var $e=M.cloneNode(!0);$e.id=Ie.id,$e["data-html2canvas-ignore"]=!0;var Mt=tn($e,"studentName"),Na=tn($e,"deptName"),Dt=tn($e,"postName");return Mt.forEach(ha=>{ha.innerHTML=Ie.name}),Na.forEach(ha=>{ha.innerHTML=Ie.dept_name}),Dt.forEach(ha=>{ha.innerHTML=Ie.post_name}),ne.appendChild($e),$e.style.width="100%",$e},kn=()=>{var M=ba.selectStudents,ne=new(Dn())("p","mm","a4");if(M){var Ie=document.createElement("div"),$e=document.getElementById("printContainer"),Mt=M.map((Na,Dt)=>{var ha=Cn($e,Ie,Na),un=tn(ha,"frontContentContainer");un.map(Sn=>{Sn.style.paddingTop="200px"}),document.body.appendChild(Ie),Ie.style.width="900px";var In=new Promise(Sn=>{gn()(ha,{allowTaint:!0,scale:1}).then(ja=>{var mr=ja.getContext("2d"),Tn=190,pr=277,Gn=Math.floor(pr*ja.width/Tn),xn=0,cn=document.createElement("canvas");cn.width=ja.width,cn.height=Math.min(Gn,ja.height-xn);var Hn=Tn*ja.height/ja.width,_r=(297-Hn)/2;cn.getContext("2d").putImageData(mr.getImageData(0,xn,ja.width,Math.min(Gn,ja.height-xn)),0,0),ne.addImage(cn.toDataURL("image/jpeg",1),"JPEG",10,_r,Tn,Hn),M.length-1!==Dt&&ne.addPage(),Sn(!0)})});return In});Promise.all(Mt).then(()=>{ne.save("".concat(Ka.title,".pdf")),document.body.removeChild(Ie)})}},tn=function M(ne,Ie){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ne.className&&ne.className.indexOf(Ie)>-1&&$e.push(ne),ne.childNodes.forEach(Mt=>{M(Mt,Ie,$e)}),$e},Kn=()=>{et(""),wa({sign_id:"",title:""}),da(null)},Vn=function(){var M=(0,A.Z)(h().mark(function ne(){var Ie,$e,Mt;return h().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(Dt.prev=0,!a){Dt.next=11;break}if(Ie=a.current,$e=Ie.getErrorMsg(),!$e){Dt.next=7;break}return r.default.error($e),Dt.abrupt("return");case 7:return Mt=(0,s.Z)((0,s.Z)({},Ie.printOptions),{},{userIds:Ie.selectStudents&&Ie.selectStudents.map(ha=>ha.id).join(",")}),Dt.next=10,(0,tr.wq)(Ye,Mt);case 10:da((0,s.Z)((0,s.Z)({},Ie.printOptions),{},{selectStudents:Ie.selectStudents,backContent:Ie.backContent}));case 11:Dt.next=16;break;case 13:Dt.prev=13,Dt.t0=Dt.catch(0),r.default.error(Dt.t0);case 16:case"end":return Dt.stop()}},ne,null,[[0,13]])}));return function(){return M.apply(this,arguments)}}(),an=()=>{Ee(!0)},bn=()=>{Ee(!1),en((0,s.Z)((0,s.Z)({},Da),{},{pageNumber:1}))},dr=()=>e().createElement(i.ZP.Group,{defaultValue:Da.train_type,onChange:Ot},e().createElement(i.ZP.Button,{value:""},E("common.all"),"\uFF08",Ne.totalCount||0,"\uFF09"),e().createElement(i.ZP.Button,{value:"unstarted"},E("common.notStarted"),"\uFF08",Ne.unstarted||0,"\uFF09"),e().createElement(i.ZP.Button,{value:"ongoing"},E("common.ongoing"),"\uFF08",Ne.onGoingCount||0,"\uFF09"),e().createElement(i.ZP.Button,{value:"finished"},E("common.ended"),"\uFF08",Ne.endCount||0,"\uFF09")),Yn=()=>e().createElement(e().Fragment,null,e().createElement(f.Z,{type:"primary",onClick:ma,className:fn().marginRight},E("common.exportData")," ",e().createElement(Re.Z,null)),e().createElement(f.Z,{type:"primary",onClick:an},E("lineClass.batchCollection"))),$n=()=>e().createElement("div",{className:"align-center"},ba?e().createElement(e().Fragment,null,e().createElement(f.Z,{onClick:()=>{da(null)}},E("common.cancel")),e().createElement(f.Z,{type:"primary",onClick:cr},E("lineClassStudy.printAll")),e().createElement(f.Z,{type:"primary",onClick:kn},E("lineClassStudy.downloadAll"))):e().createElement(e().Fragment,null,e().createElement(f.Z,{onClick:Kn},E("common.cancel")),e().createElement(f.Z,{type:"primary",onClick:Vn},E("lineClassStudy.printPreview")))),zn={mask:!0,width:700,title:E("lineClassStudy.QRCode"),footer:null,bodyStyle:{padding:0},destroyOnClose:!0,visible:Ce.qrCodeVisible,onCancel:()=>Ve({qrCodeVisible:!1,qrCodeDetail:{}})};return e().createElement("div",{className:fn().offlineClass},e().createElement(Nt.Z,{uniKey:"OfflineClass",uuid:"e6404705-238d-4edb-93f7-19366b2542b6",ref:Te,queryParams:En,pagination:!0,headerTitle:Yn(),toolBarRender:dr}),e().createElement(rr.Z,(0,le.Z)({exportVisibleHide:!0},It,{onCancel:()=>{K({visible:!1,type:""})}})),e().createElement(ar.Z,{title:Ze.type==="traning"?E("lineClass.trainingAttachment"):E("lineClass.activitiesAttachment"),visible:Ze.visible,fileId:Ze.id,onCancel:()=>{Le({visible:!1,id:"",type:""})}}),e().createElement(Xa.Z,{id:Kt.id,visible:Kt.visible,onCancel:()=>{St({id:"",visible:!1})}}),e().createElement(Ln.Z,{modalConfig:zn,detail:(0,s.Z)((0,s.Z)({},Ce.qrCodeDetail),{},{id:Ce.qrCodeDetail.sign_id,sign_address:Ce.qrCodeDetail.course_sign_config&&Ce.qrCodeDetail.course_sign_config.address,sign_address_detail:Ce.qrCodeDetail.course_sign_config&&Ce.qrCodeDetail.course_sign_config.address_detail,sign_range:Ce.qrCodeDetail.course_sign_config&&Ce.qrCodeDetail.course_sign_config.sign_range}),can_save:!1,universal:!0}),e().createElement(fe.ZP,{visible:Ye,title:E("common.printSignature"),width:"60%",onCancel:Kn,footer:$n()},ba?e().createElement(An.Z,{printConfig:ba}):e().createElement(nr.Z,{sourceType:q,t:E,ref:a,signId:Ka.sign_id,courseId:Ye,taskId:$})),e().createElement(yn.Z,{visible:De,onExportSuccess:()=>{bn()},onCancel:()=>{Ee(!1)},taskId:Oe,type:q}))},sr=(0,D.Z)()(Rn),ir=t(58168),jt=t.n(ir),we=J=>{var a=J.t,E=(0,_.useRef)(),Te=(0,_.useContext)(Z.Z),Ue=Te.state,xe=Ue.studyProjectInfo.study_project,ue={query:ye=>q(ye),columns:[{title:a("study.surveyName"),dataIndex:"title",key:"id"},{title:a("study.collectingResearch"),dataIndex:"investigate_count",key:"investigate_count",width:215,render:(ye,ee)=>ee.investigate_count>0?e().createElement(Wt.Z,{name:ee.investigate_count,onClick:()=>$(ee)}):ee.investigate_count},{title:a("common.creator"),width:106,dataIndex:"create_user",key:"create_user",render:(ye,ee)=>{var De=ee.creator_sync_user_id,Ee=ee.creator_sync_source_type;return e().createElement(Ha.Z,{dataType:"userName",value:De,name:ye,type:Ee})}},{title:a("study.releaseTime"),width:164,dataIndex:"update_time",key:"update_time",render:(ye,ee)=>{var De=ee.update_time;return(0,at.p6)(De,"yyyy-MM-dd hh:mm")}},{title:a("common.operate"),width:localStorage.getItem("lng")==="en_us"?180:160,key:"operate",buttons:[{disabled:ye=>ye.investigate_count<1,name:a("study.viewStatistics"),handleClick:ye=>ve(ye)},{visible:()=>xe.status==="normal",name:a("common.share"),handleClick:ye=>Oe(ye)}]}]},q=ye=>{var ee=u.m8.location.query.id;return(0,Me.dC)((0,s.Z)({id:ee},ye))},ve=ye=>{var ee=u.m8.location.query,De=ee.projectId,Ee=ee.id,We=Ue.studyProjectInfo.need_enroll,me=ye.investigate_count,Qe=ye.id;me<=0||u.m8.push("/training/learning/project/monitor/questionnairePaper?id=".concat(Qe,"&from=studyMonitor&planId=").concat(Ee,"&studyType=project&needEnroll=").concat(We,"&type=study_project&projectId=").concat(De))},$=ye=>{var ee=u.m8.location.query,De=ee.projectId,Ee=ee.id,We=Ue.studyProjectInfo.need_enroll;u.m8.push({pathname:"/training/learning/project/monitor/questionnaire",search:be.stringify({taskId:Ee,questionnaireId:ye.id,from:"investigate",needEnroll:We,projectId:De})})},Oe=ye=>{var ee=u.m8.location.query.projectId,De=ye.title,Ee=ye.id,We={title:De,from:"investigate",path:(0,dt.jr)({pc_url:"/share-transit?source=studyProject&type=questionnaire&id=".concat(ee,"&course_id=").concat(Ee),mobile_url:"/share-transit?source=studyProject&type=questionnaire&id=".concat(ee,"&course_id=").concat(Ee),pc_type:"student",mobile_type:"h5"})};e().$share.show({detail:We})};return e().createElement("div",{className:jt().survey},e().createElement(Nt.Z,{uniKey:"Survey",uuid:"c372e1e4-56e7-4642-9ab6-4d29ef3ffc26",ref:E,queryParams:ue,pagination:!0}))},Tt=(0,D.Z)()(we),yt=t(12739),Qt=t(87274),aa=J=>{var a=J.t,E=(0,_.useRef)(),Te=u.m8.location.query.id,Ue={query:q=>(0,Me.QM)(Te,q),columns:[{title:a("libraryPractice.practiceName"),dataIndex:"title",width:250,key:"title",fixed:"left",render:(q,ve)=>e().createElement(X.Z,{placement:"topLeft",title:ve.title},e().createElement("div",{className:"cl-text-ellipsis name-content-list",style:{width:250}},ve.title||""))},{title:a("common.joinRate"),dataIndex:"participation_rate",key:"participation_rate"},{title:a("common.passRate"),dataIndex:"pass_rate",key:"pass_rate"},{title:e().createElement("div",null,e().createElement("span",{style:{marginRight:"8px"}},a("component.shouldInvolved")),e().createElement(X.Z,{title:a("component.shouldInvolvedTip"),overlayStyle:{fontSize:12}},e().createElement(x.Z,{style:{color:"rgba(0,0,0,0.45)"}}))),dataIndex:"should_count",key:"should_count"},{title:a("component.tookPart"),dataIndex:"user_count",key:"user_count"},{title:a("component.hasQualified"),dataIndex:"pass_count",key:"pass_count"},{title:a("exam.operate"),key:"operate",fixed:"right",width:55,visibleNum:2,buttons:[{visible:!0,name:a("common.viewDetails"),disabled:!1,handleClick:q=>{u.m8.push({pathname:"/training/examination/practice/monitor",query:{id:q.id||"",biz_type:Qt.W}})}}]}]},xe=()=>e().createElement(f.Z,{type:"primary",style:{margin:"0 16px"},onClick:ue},e().createElement(Re.Z,null)," ",a("common.exportData")),ue=()=>{G.Z.confirm({content:a("trainingProject.assessment.exportConfirm"),onOk:()=>{(0,ze.N)({page:"studyProjectPracticeExport",rest:Te,props:J})}})};return e().createElement("div",null,e().createElement(Nt.Z,{uuid:"1AE78169-2064-13B8-5C42-7AA8E124785E",ref:E,queryParams:Ue,pagination:!0,toolBarRender:xe}))},Za=(0,D.Z)()(aa),na=t(97987),nt=t.n(na),ra=J=>{var a=J.t,E=(0,_.useRef)(),Te={query:()=>ue(),columns:[{title:a("practiceOperation.workTitle"),dataIndex:"title",key:"title"},{title:a("practiceOperation.shouldSubmit"),dataIndex:"total_count",key:"total_count",width:90},{title:a("practiceOperation.unsubmitted"),width:90,dataIndex:"not_submit_count",key:"not_submit_count"},{title:a("practiceOperation.submitted"),width:90,dataIndex:"already_submit_count",key:"already_submit_count"},{title:a("common.approved"),width:90,dataIndex:"pass_count",key:"pass_count"},{title:a("practiceOperation.fail"),width:90,dataIndex:"reject_count",key:"reject_count"},{title:a("personal.underReview"),width:90,dataIndex:"waiting_count",key:"waiting_count"},{title:a("exam.operate"),key:"operate",width:80,fixed:"right",buttons:[{name:a("common.viewDetails"),handleClick:q=>Ue(q)}]}]};(0,_.useEffect)(()=>{xe()},[]);var Ue=q=>{var ve=u.m8.location.query,$=ve.id,Oe=ve.projectId;u.m8.push("/training/learning/management/monitor/work?id=".concat($,"&taskId=").concat(Oe,"&taskType=study_project&operationId=").concat(q.id,"&title=").concat(q.title))},xe=()=>{E.current&&E.current.load()},ue=()=>{var q=u.m8.location.query.projectId;return(0,Me.fH)({entity_id:q,entity_type:"study_project"})};return e().createElement("div",{className:nt().work},e().createElement(Nt.Z,{uniKey:"Work",uuid:"25043e95-4471-48b3-aabf-e3d60dce7f6a",ref:E,queryParams:Te,pagination:!1}))},hn=(0,D.Z)()(ra),qa=t(68628),Nn=t(62461),Ua=t.n(Nn),Wa=t(41549),jn=t(22614),Bn=t(55839),Fn=t(84874),hr=t(61421),Qa=O.Z.Option,Pa=W.Z.Search,ln=J=>{var a=J.t,E=(0,_.useRef)(),Te=[{label:a("common.all"),value:""},{label:a("common.notStarted"),value:"un_start"},{label:a("questionn.completed"),value:"complete"},{label:a("common.ongoing"),value:"on_going"}],Ue=(0,_.useState)({page_number:1,page_size:10,keyword:"",promote_status:"",status:""}),xe=(0,g.Z)(Ue,2),ue=xe[0],q=xe[1],ve=(0,_.useContext)(Z.Z),$=ve.state,Oe=(0,_.useState)({}),ye=(0,g.Z)(Oe,2),ee=ye[0],De=ye[1],Ee=(0,_.useState)({type:"",planId:"",userId:""}),We=(0,g.Z)(Ee,2),me=We[0],Qe=We[1],Ne=(0,_.useState)(!1),rt=(0,g.Z)(Ne,2),Ge=rt[0],lt=rt[1],It=(0,_.useState)(!1),K=(0,g.Z)(It,2),se=K[0],te=K[1],Ze=(0,_.useState)(!1),Le=(0,g.Z)(Ze,2),ht=Le[0],ot=Le[1],Kt=(0,_.useState)({visible:!1,modalDataSource:[]}),St=(0,g.Z)(Kt,2),ut=St[0],bt=St[1],Ce=[{title:a("evaluation.assessmentDimensions"),key:"type",dataIndex:"type",render:pe=>{var Je="";switch(pe){case"self":Je=a("personnelDevelope.self");break;case"superior":Je=a("personnelDevelope.evaluationSuperior");break;case"subordinate":Je=a("evaluation.subordinate");break;case"sameLevel":Je=a("evaluation.sameLevel");break;default:break}return Je}},{title:a("tutorial.evaluator"),key:"name",dataIndex:"name"},{title:a("personnelDevelope.currentStatus"),key:"status",dataIndex:"status",render:pe=>a(pe==="finish"?"personnelDevelope.quantityCompleted":"common.unFinish")},{title:a("personnelDevelope.updateTime"),key:"update_time",dataIndex:"update_time",render:pe=>pe?(0,at.p6)(pe):"--"}],Ve={query:pe=>Ke(pe),columns:[{title:a("evaluationManage.evaluationStatus"),dataIndex:"status",key:"status",width:80,render:(pe,Je)=>{var st=be.parse(u.m8.location.search),Ot=st.tool_type;return Ot==="tool"||!Ot?e().createElement("span",null,a(pe===1?"questionn.completed":"common.unFinish")):e().createElement("a",{onClick:()=>{ca(Je)}},a(pe===1?"questionn.completed":"common.unFinish"))}},{title:a("evaluationManage.evaluationTimeComplete"),dataIndex:"commit_time",key:"commit_time",width:130,render:pe=>pe?(0,at.p6)(pe):"--"},{title:a("evaluationManage.upgradeStatus"),dataIndex:"process",key:"process",width:80,render:pe=>pe===0?a("common.notStarted"):pe>0&&pe<100?a("common.ongoing"):pe===100?a("questionn.completed"):"--"},{title:a("evaluationManage.upgradeCompleteTime"),dataIndex:"end_time",key:"end_time",width:120,render:pe=>pe?(0,at.p6)(pe):"--"},{title:a("common.operate"),width:160,key:"operate",fixed:"right",buttons:[{name:a("questionn.abilityReport"),handleClick:pe=>wa("report",pe)},{name:a("questionn.improvePlan"),handleClick:pe=>wa("liftingScheme",pe)}]}]};(0,_.useEffect)(()=>{Ka()},[]),(0,_.useEffect)(()=>{xt()},[ue]);var xt=()=>{E.current&&E.current.load(ue)},Ke=pe=>(0,Me.tr)($.studyProjectInfo.evaluation_id,(0,s.Z)((0,s.Z)({},ue),pe)),Ye=pe=>{q((0,s.Z)((0,s.Z)({},ue),{},{page_number:1,keyword:pe}))},et=pe=>{var Je=pe.target.value;q((0,s.Z)((0,s.Z)({},ue),{},{page_number:1,keyword:Je}))},He=pe=>{q((0,s.Z)((0,s.Z)({},ue),{},{page_number:1,status:pe.target.value}))},ca=pe=>{var Je=be.parse(u.m8.location.search),st=Je.id;(0,Bn.zP)(st,pe.user_id).then(Ot=>{bt({visible:!0,modalDataSource:Ot.data})})},Ka=function(){var pe=(0,A.Z)(h().mark(function Je(){var st;return h().wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return ma.next=2,(0,Me.FG)($.studyProjectInfo.evaluation_id);case 2:st=ma.sent,st.status===200&&De(st.data);case 4:case"end":return ma.stop()}},Je)}));return function(){return pe.apply(this,arguments)}}(),wa=(pe,Je)=>{var st=ee.version_type,Ot=Je.plan_id,ma=Je.user_id,Vt={type:pe,planId:Ot,userId:ma};Qe((0,s.Z)({},Vt)),ee.evaluation_tool_type!=="tool"?ya(Vt):(0,Me.U1)(Ot,ma).then(it=>{var Oa=it.data.look;st==="platform"?Oa==="true"?lt(!0):te(!0):ya(Vt)})},ya=pe=>{var Je=pe||me,st=Je.type,Ot=Je.planId,ma=Je.userId,Vt=ee.version_type,it=ee.evaluation_tool_type;u.m8.push("/training/questionn/postTalentAssessment/evaluationReport?planId=".concat(Ot,"&type=").concat(st,"&userId=").concat(ma,"&isBeta=").concat(Vt==="platform","&toolType=").concat(it))},za=pe=>{pe>0?ya():ba()},ba=()=>{te(!1),ot(!0)},da=()=>{ot(!1)},Va=pe=>{q((0,s.Z)((0,s.Z)({},ue),{},{page_number:1,promote_status:pe}))},Ga=function(){var pe=(0,A.Z)(h().mark(function Je(st){var Ot;return h().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:if(Ot="",st!=="promote"){Vt.next=7;break}return Vt.next=4,(0,Me.CG)(ee.id);case 4:Ot=Vt.sent,Vt.next=11;break;case 7:if(st!=="evaluation"){Vt.next=11;break}return Vt.next=10,(0,Me.wf)(ee.id);case 10:Ot=Vt.sent;case 11:Ot.data.code===0&&r.default.success(a("evaluation.sendSuccess"));case 12:case"end":return Vt.stop()}},Je)}));return function(st){return pe.apply(this,arguments)}}(),Da=()=>{var pe=ee.look_count;return e().createElement(G.Z,{title:a("questionn.warmHint"),visible:se,closable:!1,onOk:()=>{za(pe)},onCancel:()=>{te(!1)},cancelText:a("common.cancel"),okText:pe>0?a("questionn.confirmView"):a("questionn.upgradeImmediately")},e().createElement("div",{className:"evaluationReportOrLiftingSchemeModal_content"},e().createElement("p",null,"".concat(a("questionn.evaluationModalTipCanView")," 5 ").concat(a("common.unitfeng")," ").concat(a("questionn.evaluationModalTipName"))),e().createElement("p",null,"".concat(a("questionn.evaluationModalTipRemainTimes"),": ").concat(pe," ").concat(a("common.times"))),e().createElement("p",null,pe>0?a("questionn.evaluationModalTipUpgrade"):a("questionn.evaluationModalTipConfirmView"))))},en=()=>e().createElement(G.Z,{title:a("questionn.warmHint"),visible:Ge,closable:!1,onOk:()=>{ya()},onCancel:()=>{lt(!1)},cancelText:a("common.cancel"),okText:a("common.ok")},e().createElement("div",{className:"isLookModal_content"},e().createElement("p",null,me.type==="report"?"".concat(a("questionn.isLookTipsStart")).concat(a("questionn.abilityReport")).concat(a("questionn.isLookTipsEnd")):"".concat(a("questionn.isLookTipsStart")).concat(a("questionn.improvePlan")).concat(a("questionn.isLookTipsEnd"))))),En=()=>{var pe=ee.version_type,Je=ee.end_time,st=ee.term_type,Ot=new Date().getTime();return e().createElement(_t.Z,{size:12,wrap:!0},e().createElement(jn.Z,{isBeta:pe==="platform",id:ee.id,userIds:[],multiple:!0,btnType:"primary",tool:ee.evaluation_tool_type}),st==="custom"&&Je<Ot?null:e().createElement(f.Z,{className:"border-button",onClick:()=>Ga("evaluation")},a("evaluation.measurementUrge"),e().createElement(X.Z,{placement:"topLeft",title:a("evaluation.urgeText")},e().createElement(qa.Z,null))),st==="custom"&&Je<Ot?null:e().createElement(f.Z,{className:"border-button",onClick:()=>Ga("promote")},a("evaluation.urgedAscension"),e().createElement(X.Z,{placement:"topLeft",title:a("evaluation.urgeTextSuccess")},e().createElement(qa.Z,null))))},on=()=>{var pe=[{label:a("common.all"),value:""},{label:a("common.unFinish"),value:"un_complete"},{label:a("questionn.completed"),value:"complete"}];return e().createElement("div",{className:"PostTalentAssessment_left_functions"},e().createElement(_t.Z,{size:12,wrap:!0},e().createElement(i.ZP.Group,{options:pe,onChange:He,value:ue.status,optionType:"button"}),e().createElement(Pa,{className:"PostTalentAssessment-search",placeholder:a("searchInputPlaceholder.userName"),onSearch:Ye,onInput:et,allowClear:!0,style:{width:272}})))};return e().createElement("div",{className:Ua().work},e().createElement("div",{className:"content-row"},ee.evaluation_tool_type==="tool"&&ee.is_open==="true"&&ee.version_type==="platform"&&e().createElement(e().Fragment,null,e().createElement("div",{className:"beta_button",onClick:()=>{ba()}},e().createElement(Fn.Z,{iconClass:"icon-zhengshiban"}),e().createElement("span",{className:"button_text"},a("questionn.openNow")))),e().createElement(O.Z,{options:Te,onChange:Va,value:ue.promote_status,className:"PostTalentAssessment-select",allowClear:!0,placeholder:a("evaluationManage.pleaseSelectPromote")},Te&&Te.map((pe,Je)=>e().createElement(Qa,{value:pe.value,key:Je.toString()},pe.label)))),e().createElement(Nt.Z,{showUserInfo:!0,uniKey:"PostEvaluation",uuid:"98a39c9f-6820-4230-8e77-281b0015e7df",ref:E,queryParams:Ve,headerTitle:En(),toolBarRender:on,pagination:!0}),e().createElement(hr.Z,{visible:ht,onCancel:()=>{da()}}),e().createElement(Wa.Z,{title:a("personnelDevelope.evaluationStatus"),visible:ut.visible,onCancel:()=>bt((0,s.Z)((0,s.Z)({},ut),{},{visible:!1})),modalColumns:Ce,modalDataSource:ut.modalDataSource}),Da(),en())},wr=(0,D.Z)()(ln),Or=t(10237),Mr=t(37055),Dr=t(74221),Ar=J=>{var a=J.t,E=(0,_.useRef)(),Te=localStorage.getItem("lng"),Ue=(0,_.useState)({visible:!1,loadingAssessDetail:!0,assessDetail:{lists:[]}}),xe=(0,g.Z)(Ue,2),ue=xe[0],q=xe[1],ve=(0,_.useState)({source:"project",key_word:"",department_id:"",dept_name:"",post_id:"",post_name:"",assess_result:"",assess_type:"",page_size:10,page_number:1}),$=(0,g.Z)(ve,2),Oe=$[0],ye=$[1],ee=[{value:"1",label:a("common.departmentLabel")},{value:"2",label:a("common.postLabel")}],De=(0,_.useState)("1"),Ee=(0,g.Z)(De,2),We=Ee[0],me=Ee[1],Qe=[{value:"",label:a("tutorial.assessResultAll")},{value:"0",label:a("practiceReport.unpassCount")},{value:"1",label:a("practiceReport.passedCount")}],Ne=(0,_.useState)(""),rt=(0,g.Z)(Ne,2),Ge=rt[0],lt=rt[1],It={query:Ce=>bt(Ce),columns:[{title:a("common.userName"),width:Te==="en_us"?120:110,dataIndex:"userName",key:"userName"},{title:a("common.departmentLabel"),width:110,dataIndex:"department",key:"department"},{title:a("common.post"),width:150,dataIndex:"post",key:"post"},{title:a("study.assessType"),width:Te==="en_us"?130:100,dataIndex:"assessType",key:"assessType"},{title:a("study.assessName"),width:Te==="en_us"?120:88,dataIndex:"assessName",key:"assessName"},{title:a("study.assessResult"),width:Te==="en_us"?120:88,dataIndex:"assessResult",key:"assessResult",render:(Ce,Ve)=>{var xt=Ve.assessResult;return String(xt)==="true"?a("practiceReport.passedCount"):a("practiceReport.unpassCount")}},{title:a("personal.submitTime"),width:Te==="en_us"?120:88,dataIndex:"submitTime",key:"submitTime",render:(Ce,Ve)=>{var xt=Ve.submitTime,Ke=Ve.isSelfEvaluate;return String(Ke)==="true"?"".concat((0,at.p6)(xt,"yyyy-MM-dd hh:mm")):"-"}},{title:a("tutorial.evaluateTime"),width:Te==="en_us"?120:88,dataIndex:"assessTime",key:"assessTime",render:(Ce,Ve)=>{var xt=Ve.assessTime;return"".concat((0,at.p6)(xt,"yyyy-MM-dd hh:mm"))}},{title:a("common.operate"),key:"operate",width:161,fixed:"right",buttons:[{name:a("common.preview"),handleClick:Ce=>se(Ce)}]}]};(0,_.useEffect)(()=>{K()},[Oe]);var K=()=>{E.current&&E.current.load(Oe)},se=Ce=>{q((0,s.Z)((0,s.Z)({},ue),{},{loadingAssessDetail:!0,visible:!0})),te(Ce)},te=Ce=>{var Ve=Ce.id,xt=Mr.ZP.StudyTaskMonitor.getAssessDataDetail(Ve),Ke={id:Ve,zara_type:"study_task"};Or.WY.get({url:xt,params:Ke}).then(Ye=>{var et=Ye.data;if(Number(et.code)===0){var He=et.data?Ze(et.data):null;q((0,s.Z)((0,s.Z)({},ue),{},{visible:!0,loadingAssessDetail:!1,assessDetail:He}))}else q((0,s.Z)((0,s.Z)({},ue),{},{loadingAssessDetail:!1}))}).catch(()=>{q((0,s.Z)((0,s.Z)({},ue),{},{loadingAssessDetail:!1}))})},Ze=Ce=>{var Ve=Ce.questionnaire,xt=Ve.tutorQuestionVos,Ke=Ve.userQuestionVos,Ye=(0,s.Z)((0,s.Z)({},Ce),{},{lists:[]});return xt.length&&xt.forEach((et,He)=>{var ca={};if(et.type==="single"){var Ka="",wa="";if(et.options.forEach(da=>{et.answer.other===da.id&&(Ka=da.title),da.name=da.title}),Ke.length){var ya=Ke[He],za=ya.options.findIndex(da=>da.id===ya.answer.other);wa=ya.options[za].title}ca={id:et.id,topicType:"1",topicTitle:et.title,topicOptions:Ft()(et.options),teacherSelectName:Ka,studentSelectName:wa}}else if(et.type==="input"){var ba="";Ke.length&&Ke[He]&&(ba=Ke[He].answer.other),ca={id:et.id,topicTitle:et.title,topicType:"2",teacherAnswers:et.answer.other,studentAnswers:ba}}Ye.lists.push(ca)}),Ye},Le=()=>{q((0,s.Z)((0,s.Z)({},ue),{},{visible:!1}))},ht=Ce=>{me(Ce),ye((0,s.Z)((0,s.Z)({},Oe),{},{department_id:"",post_id:""}))},ot=Ce=>{ye((0,s.Z)((0,s.Z)({},Oe),{},{department_id:Ce,dept_name:"",post_id:"",post_name:""}))},Kt=Ce=>{ye((0,s.Z)((0,s.Z)({},Oe),{},{department_id:"",dept_name:"",post_id:Ce,post_name:""}))},St=Ce=>{lt(Ce),ye((0,s.Z)((0,s.Z)({},Oe),{},{assess_result:Ce}))},ut=()=>{var Ce=O.Z.Option;return e().createElement(_t.Z,{size:12,wrap:!0},e().createElement(W.Z.Group,{compact:!0},e().createElement(O.Z,{placeholder:a("component.pleaseChoose"),defaultValue:We,width:"120",onChange:ht},ee.map(Ve=>e().createElement(Ce,{value:Ve.value,key:Ve.value},Ve.label))),We==="1"?e().createElement(La.Z,{parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,onTreeSelectChange:ot}):null,We==="2"?e().createElement(Ba.Z,{disabled:!1,onChange:Kt}):null),e().createElement(O.Z,{placeholder:a("study.assessResult"),defaultValue:Ge,style:{width:100},onChange:St},Qe.map(Ve=>e().createElement(Ce,{value:Ve.value,key:Ve.value},Ve.label))),e().createElement(Yt.Z,{onSearch:Ve=>{ye((0,s.Z)((0,s.Z)({},Oe),{},{key_word:Ve}))},width:260,placeholder:a("tutorial.assessResultKeyword")}))},bt=Ce=>{var Ve=u.m8.location.query,xt=Ve.id,Ke=Ve.projectId,Ye=(0,Me.FD)(xt,(0,s.Z)((0,s.Z)({source_type:"assess",project_id:Ke},Oe),Ce));return(Ye==null?void 0:Ye.data)||Ye};return e().createElement("div",{className:"assess-panel-monitor"},e().createElement("div",{className:"assess-panel-monitor-filter"},e().createElement("div",{className:"assess-panel-monitor-filter-header"})),e().createElement("div",{className:"assess-panel-monitor-list"},e().createElement("div",{className:"assess-panel-monitor-list-table"},e().createElement(Nt.Z,{uniKey:"EvaluationAnalysis",uuid:"a3f069b5-4c7c-43f0-bfce-02102c0c55bd",ref:E,queryParams:It,pagination:!0,headerTitle:ut()}))),e().createElement(Dr.Z,(0,le.Z)({},ue,{hideAssessModal:Le})))},Lr=(0,D.Z)()(Ar),Rr=t(89306),Er=t.n(Rr),Nr=t(1657),jr=J=>{var a=J.t,E=(0,_.useRef)(),Te=u.m8.location.query,Ue=Te.id,xe=Te.projectId,ue=(0,_.useState)(!1),q=(0,g.Z)(ue,2),ve=q[0],$=q[1],Oe=(0,_.useState)({}),ye=(0,g.Z)(Oe,2),ee=ye[0],De=ye[1],Ee=(0,_.useState)(!1),We=(0,g.Z)(Ee,2),me=We[0],Qe=We[1],Ne=(0,_.useState)(!1),rt=(0,g.Z)(Ne,2),Ge=rt[0],lt=rt[1],It=(0,_.useState)(!1),K=(0,g.Z)(It,2),se=K[0],te=K[1],Ze={query:()=>ht(),columns:[{title:a("practiceOperation.attendanceName"),dataIndex:"name",key:"name",fixed:"left"},{title:a("practiceOperation.outlineName"),dataIndex:"course_title",key:"course_title",render:(Ke,Ye)=>e().createElement("span",null,Ye.course_title||"--")},{title:a("practiceOperation.lecturer"),dataIndex:"lecturer_name",key:"lecturer_name",render:(Ke,Ye)=>{var et=Ye.teacher_sync_type,He=Ye.teacher_sync_user_id,ca=Ye.teacher_sync_source_type;return Ke&&et&&et==="inside"?e().createElement(Ha.Z,{dataType:"userName",value:He,name:Ke,type:ca}):e().createElement("span",null,Ke||"--")}},{title:a("practiceOperation.classStartTime"),dataIndex:"course_begin_time",key:"course_begin_time",render:(Ke,Ye)=>{var et=Ye.course_begin_time?(0,at.p6)(Number(Ye.course_begin_time),"yyyy-MM-dd hh:mm"):"--",He=Ye.course_end_time?(0,at.p6)(Number(Ye.course_end_time),"yyyy-MM-dd hh:mm"):"--";return"".concat(et,"~").concat(He)}},{title:a("practiceOperation.shouldArrival"),dataIndex:"should_arrive_count",key:"should_arrive_count"},{title:a("practiceOperation.actualArrival"),dataIndex:"real_arrive_count",key:"real_arrive_count"},{title:a("practiceOperation.absent"),dataIndex:"absent_count",key:"absent_count"},{title:a("practiceOperation.vacate"),dataIndex:"leave_count",key:"leave_count"},{title:a("common.operate"),width:localStorage.getItem("lng")==="en_us"?280:180,fixed:"right",key:"operate",buttons:[{name:a("practiceOperation.attendanceView"),handleClick:Ke=>ot(Ke)},{name:a("practiceOperation.attendanceQr"),handleClick:Ke=>Kt(Ke)}]}]};(0,_.useEffect)(()=>{Le()},[]);var Le=()=>{E.current&&E.current.load()},ht=()=>(0,Me.EH)(xe,{source_type:"study_project",course_id:Ue}),ot=Ke=>{De(Ke),$(!0)},Kt=Ke=>{De(Ke),(0,Me.gm)(Ke.id).then(Ye=>{var et=Ye.data.data.open_transfer_student;Qe(!0),lt(et)})},St=()=>{var Ke=J.taskId,Ye=J.type,et=Ye==="study_plan"?Ke:xe,He="?access_token=".concat(window.localStorage.getItem("token"),"&source_type=").concat(Ye,"&course_id=").concat(Ue);(0,ze.N)({page:"signAnalysisExport",props:J,query:He,rest:et})},ut=()=>{te(!0)},bt=()=>{te(!1),Le()},Ce=()=>e().createElement(e().Fragment,null,e().createElement(f.Z,{type:"primary",onClick:St,className:Er().marginRight},a("common.exportData")," ",e().createElement(Re.Z,null)),e().createElement(f.Z,{type:"primary",onClick:ut},a("lineClass.batchCollection"))),Ve={mask:!0,width:900,title:a("practiceOperation.attendanceView"),footer:null,bodyStyle:{padding:"24px"},destroyOnClose:!0,visible:ve,onCancel:()=>{$(!1)}},xt={mask:!0,width:700,title:a("lineClassStudy.QRCode"),footer:null,bodyStyle:{padding:0},destroyOnClose:!0,visible:me,onCancel:()=>{Qe(!1)}};return e().createElement("div",{className:Er().attendance},e().createElement(Nt.Z,{uniKey:"Attendance",uuid:"7c14799c-21d1-492b-ba6b-8bcfd2a9353a",ref:E,queryParams:Ze,pagination:!1,headerTitle:Ce()}),e().createElement(fe.ZP,(0,le.Z)({},Ve,{visible:ve,onCancel:()=>{$(!1)},onOk:()=>{$(!1)}}),e().createElement("div",null,e().createElement(Nr.Z,{taskId:Ue,taskType:"attendance",record:ee,type:J.type,getAttendanceData:()=>{Le()}}))),e().createElement(Ln.Z,{modalConfig:xt,detail:(0,s.Z)((0,s.Z)({},ee),{},{title:ee.course_title,sign_address:ee.address,sign_address_detail:ee.address_detail}),open_transfer_student:!Ge,can_save:!1,universal:!0}),e().createElement(yn.Z,{visible:se,onExportSuccess:()=>{bt()},onCancel:()=>{te(!1)},taskId:Ue,type:J.type}))},Br=(0,D.Z)()(jr),Fr=t(15215),Ra=L.Z.TabPane,Ur=(0,dt.UI)("ZARA_H5"),Wr=J=>{var a=J.t,E=u.m8.location.query.tab,Te=(0,c.v9)(te=>{var Ze=te.user;return{user:Ze}}),Ue=Te.user,xe=(0,_.useContext)(Z.Z),ue=xe.state,q=(0,_.useState)({}),ve=(0,g.Z)(q,2),$=ve[0],Oe=ve[1],ye=(0,_.useState)("1"),ee=(0,g.Z)(ye,2),De=ee[0],Ee=ee[1];(0,_.useEffect)(()=>{var te=u.m8.location.query.projectId;Ur&&It(te),Qe(te)},[]);var We=te=>{switch(E){case"lineClass":te.offline>0&&Ee("3");break;default:}},me=te=>{if(!(te.course_normal>0)){if(te.live_course>0){Ee("2");return}if(te.offline>0){Ee("3");return}if(te.research>0){Ee("4");return}if(te.exam>0){Ee("5");return}if(te.practice>0){Ee("10");return}if(te.operation>0){Ee("6");return}var Ze=Ue.JobEvaluationOpen&&te.evaluation>0&&ue.studyProjectInfo.evaluation_id!==0&&ue.studyProjectInfo.evaluation_id!=="0";if(Ze){Ee("7");return}if(te.sign>0){Ee("8");return}if(Ge){Ee("9");return}}},Qe=function(){var te=(0,A.Z)(h().mark(function Ze(Le){var ht,ot;return h().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return ht={source_type:"study_project"},St.next=3,(0,Me.yI)(Le,ht);case 3:ot=St.sent,ot.data.code===0&&(Oe(ot.data.data),me(ot.data.data),E&&E!=="undefined"&&We(ot.data.data));case 5:case"end":return St.stop()}},Ze)}));return function(Le){return te.apply(this,arguments)}}(),Ne=(0,_.useState)(!1),rt=(0,g.Z)(Ne,2),Ge=rt[0],lt=rt[1],It=function(){var te=(0,A.Z)(h().mark(function Ze(Le){var ht,ot,Kt,St;return h().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.prev=0,ot=Ht.bS.assignCustomEvaluate({planId:Le}),bt.next=4,(0,Fr.Vl)(ot,{});case 4:Kt=bt.sent,St=Kt.data,St.code==="200000"&&((ht=St.data)===null||ht===void 0?void 0:ht.score_type)==="contains_evaluate"?lt(!0):lt(!1),bt.next=12;break;case 9:bt.prev=9,bt.t0=bt.catch(0),lt(!1);case 12:case"end":return bt.stop()}},Ze,null,[[0,9]])}));return function(Le){return te.apply(this,arguments)}}(),K=te=>{Ee(te)},se=Ue.JobEvaluationOpen&&$.evaluation>0&&ue.studyProjectInfo.evaluation_id!==0&&ue.studyProjectInfo.evaluation_id!=="0";return e().createElement("div",{className:"statisticalData"},$.course_normal>0||$.live_course>0||$.offline>0||$.research>0||$.exam>0||$.operation>0||$.sign>0||se||Ge||$.practice>0?e().createElement(L.Z,{destroyInactiveTabPane:!0,activeKey:De,onChange:K},$.course_normal>0&&e().createElement(Ra,{tab:a("coursePanel.courseStatistics"),key:"1"},e().createElement(mn,null)),$.live_course>0&&e().createElement(Ra,{tab:a("trainingProject.liveClass.liveClass"),key:"2"},e().createElement(Mn,null)),$.offline>0&&e().createElement(Ra,{tab:a("study.onsiteTraining"),key:"3"},e().createElement(sr,{sourceType:"study_project"})),$.research>0&&e().createElement(Ra,{tab:a("study.survey"),key:"4"},e().createElement(Tt,null)),$.exam>0&&e().createElement(Ra,{tab:a("study.examAnalysis"),key:"5"},e().createElement(yt.Z,{projectInfo:ue.studyProjectInfo})),$.practice>0&&e().createElement(Ra,{tab:a("trainingProject.practiceAnalysis"),key:"10"},e().createElement(Za,{tab:a("trainingProject.practiceAnalysis")})),$.operation>0&&e().createElement(Ra,{tab:a("study.workAnalysis"),key:"6"},e().createElement(hn,null)),se&&e().createElement(Ra,{tab:a("learning.jobEvaluation"),key:"7"},e().createElement(wr,null)),$.sign>0&&e().createElement(Ra,{tab:a("study.attendanceAnalysis"),key:"8"},e().createElement(Br,{type:"study_project"})),Ge&&e().createElement(Ra,{tab:a("study.assessAnalysis"),key:"9"},e().createElement(Lr,null))):e().createElement(mn,null))},Qr=(0,D.Z)()(Wr),Cr=t(18361),Un=L.Z.TabPane,Kr=J=>{var a=J.t,E=u.m8.location.query.tab,Te=(0,_.useReducer)(Cr.I,Cr.E),Ue=(0,g.Z)(Te,2),xe=Ue[0],ue=Ue[1],q=(0,_.useState)("1"),ve=(0,g.Z)(q,2),$=ve[0],Oe=ve[1];(0,_.useEffect)(()=>{ee(),E&&E!=="undefined"&&ye()},[]);var ye=()=>{switch(E){case"lineClass":Oe("3");break;default:}},ee=function(){var Ge=(0,A.Z)(h().mark(function lt(){var It,K,se,te;return h().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return It=u.m8.location.query,K=It.id,se=It.projectId,Le.next=3,(0,Me.PN)(K,{page_number:1,page_size:20,project_id:se});case 3:te=Le.sent,te.data.code==="200000"&&ue({type:"setStudyProjectInfo",payload:te.data.info});case 5:case"end":return Le.stop()}},lt)}));return function(){return Ge.apply(this,arguments)}}(),De=Ge=>{Oe(Ge)},Ee=(0,_.useState)(!1),We=(0,g.Z)(Ee,2),me=We[0],Qe=We[1],Ne=()=>{Qe(!0)};(0,_.useEffect)(()=>{xe.studyProjectInfo.study_project.title&&setTimeout(()=>{},500)},[me,xe.studyProjectInfo.study_project.title]);var rt=Ge=>{(0,ge.Z)().setOptions({prevLabel:"\u4E0A\u4E00\u6B65",nextLabel:"\u4E0B\u4E00\u6B65",doneLabel:"\u77E5\u9053\u4E86",exitOnOverlayClick:!1,disableInteraction:!0,steps:Ge}).start()};return e().createElement(Z.Z.Provider,{value:{state:xe,dispatch:ue}},e().createElement("div",{className:"dataMonitorWrap"},e().createElement(R,null),e().createElement("div",{className:"tabPanes"},e().createElement(L.Z,{activeKey:$,onChange:De},e().createElement(Un,{tab:e().createElement("span",{id:"monitoring-data-box"},a("trainingProject.taskMonitor")),key:"1"},$==="1"&&xe.studyProjectInfo.study_project.id&&e().createElement($t,{from:"task",key:"task",handleChangeData:Ne})),e().createElement(Un,{tab:e().createElement("span",{id:"study-record-data-box"},a("trainingProject.selfStudyRecord")),key:"2"},$==="2"&&xe.studyProjectInfo.study_project.id&&e().createElement($t,{from:"self_study",key:"self_study",handleChangeData:Ne})),e().createElement(Un,{tab:a("trainingProject.statisticalData"),key:"3"},e().createElement(Qr,null)),e().createElement(Un,{tab:a("trainingProject.transactionData"),key:"4"},e().createElement(Jn,null))))))},Vr=(0,D.Z)()(Kr),Yr=t(50658),$r=t(4408),zr=J=>{var a=J.t,E=u.m8.location.query.origin;return e().createElement(e().Fragment,null,e().createElement($r.Z,{title:a("trainingProject.dataMonitoring")}),e().createElement(Yr.Z,{current:"monitor",origin:E}),e().createElement(Vr,null))},Gr=(0,D.Z)()(zr)},45796:function(Bt,Pe,t){"use strict";t.d(Pe,{PN:function(){return h},xu:function(){return V},Zj:function(){return T},Cz:function(){return ae},yN:function(){return j},yI:function(){return c},y$:function(){return l},MZ:function(){return Q},CS:function(){return w},dC:function(){return ie},LP:function(){return z},fH:function(){return le},EH:function(){return N},gm:function(){return je},FG:function(){return pt},tr:function(){return he},U1:function(){return _t},wf:function(){return m},CG:function(){return f},Jp:function(){return _e},FD:function(){return B},BT:function(){return n},v1:function(){return Y},QM:function(){return s},cH:function(){return p},Z:function(){return d},gu:function(){return X}});var _=t(88986),e=t(57361),D=t(9754),u=t.n(D),A=t(5430),g=t(10237),de=t(37055),L=t(38642),S={zaraFlag:(0,L.UI)("ZARA_H5")};function h(C,k){return ge.apply(this,arguments)}function ge(){return ge=(0,e.Z)(u().mark(function C(k,F){var P,b;return u().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return P=S.zaraFlag?A.lk.projectCustomUserMonitor(k):A.lk.projectUserMonitor(k),x.next=3,g.WY.get({url:P,params:(0,_.Z)((0,_.Z)({},F),{},{sort:F.sort?F.sort==="ascend"?"asc":"desc":""})});case 3:if(b=x.sent,b.status!==200){x.next=6;break}return x.abrupt("return",{data:{code:"200000",data:(0,_.Z)((0,_.Z)({},b.data.monitor_list),{},{summarizing:b.data.summarizing}),info:b.data}});case 6:return x.abrupt("return",b);case 7:case"end":return x.stop()}},C)})),ge.apply(this,arguments)}function V(C,k){var F=S.zaraFlag?A.lk.taskCustomDelay(C):A.lk.taskDelay(C);return g.WY.post({url:F,data:k})}function T(C,k){var F=A.lk.taskDelayAll(C);return g.WY.post({url:F,data:k})}function ae(C,k){var F=S.zaraFlag?A.lk.taskUserCustomDelete(C):A.lk.taskUserDelete(C);return g.WY.post({url:F,data:k})}function j(C){var k=A.lk.sendUrgeStudyMessage(C);return g.WY.get({url:k})}function c(C,k){var F=de.ZP.StudyTaskList.coursesAmountList(C);return g.WY.get({url:F,params:k})}function l(C){var k=C.projectId,F=C.page_number,P=C.page_size;return g.WY.get({url:A.lk.getProjectTaskCourseListUrl(k),params:{page_number:F,page_size:P}})}function Q(C){var k=C.train_type,F=C.sourceId,P=C.page_number,b=C.page_size,O=C.sourceType;return g.WY.get({url:A.lk.getOfflineListBySourceId(F),params:{source_type:O,page_number:P,page_size:b,train_type:k}})}function w(C){var k=C.sourceId,F=C.sourceType;return g.WY.get({url:de.ZP.lineClass.getOfflineListCountBySourceId(k),params:{source_type:F}})}function ie(C){return Z.apply(this,arguments)}function Z(){return Z=(0,e.Z)(u().mark(function C(k){var F,P,b,O;return u().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return F=k.id,P=k.page_number,b=k.page_size,oe.next=3,g.WY.get({url:A.lk.questionnaireMonitor(F),params:{page_number:P,page_size:b}});case 3:if(O=oe.sent,O.status!==200){oe.next=6;break}return oe.abrupt("return",{data:{code:"200000",data:(0,_.Z)({},O.data)}});case 6:return oe.abrupt("return",O);case 7:case"end":return oe.stop()}},C)})),Z.apply(this,arguments)}function z(C){return R.apply(this,arguments)}function R(){return R=(0,e.Z)(u().mark(function C(k){var F,P,b,O,x;return u().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return F=k.id,P=k.page_number,b=k.page_size,O=k.is_pending,Re.next=3,g.WY.get({url:A.lk.examMonitor(F),params:{page_number:P,page_size:b,is_pending:O}});case 3:if(x=Re.sent,x.status!==200){Re.next=6;break}return Re.abrupt("return",{data:{code:"200000",data:(0,_.Z)({},x.data)}});case 6:return Re.abrupt("return",x);case 7:case"end":return Re.stop()}},C)})),R.apply(this,arguments)}function le(C){return H.apply(this,arguments)}function H(){return H=(0,e.Z)(u().mark(function C(k){var F,P,b;return u().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return F=k.entity_type,P=k.entity_id,x.next=3,g.WY.post({url:A.lk.getWorksData(),data:{entity_type:F,entity_id:P}});case 3:if(b=x.sent,b.status!==200){x.next=6;break}return x.abrupt("return",{data:{code:"200000",data:{list:b.data.operations}}});case 6:return x.abrupt("return",b);case 7:case"end":return x.stop()}},C)})),H.apply(this,arguments)}function N(C,k){return y.apply(this,arguments)}function y(){return y=(0,e.Z)(u().mark(function C(k,F){var P,b,O;return u().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return P=F.source_type,b=F.course_id,oe.next=3,g.WY.get({url:A.lk.getAttendanceData(k),params:{source_type:P,course_id:b}});case 3:if(O=oe.sent,O.status!==200){oe.next=6;break}return oe.abrupt("return",{data:{code:"200000",data:{list:O.data.data}}});case 6:return oe.abrupt("return",O);case 7:case"end":return oe.stop()}},C)})),y.apply(this,arguments)}function je(C){return g.WY.get({url:A.lk.getStuAttendanceInfo(C),params:{}})}function pt(C){return g.WY.get({url:A.lk.evaluationDetail(C),params:{}})}function he(C,k){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,e.Z)(u().mark(function C(k,F){var P,b;return u().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,g.WY.get({url:A.lk.getEvaluationList(k),params:F});case 2:if(P=x.sent,P.status!==200){x.next=7;break}return b=P.data.list,b&&b.length>0?P.data.list.forEach(oe=>{oe.key=oe.user_id}):P.data.list=[],x.abrupt("return",{data:{code:"200000",data:(0,_.Z)({},P.data)}});case 7:case"end":return x.stop()}},C)})),Xe.apply(this,arguments)}function _t(C,k){return g.WY.get({url:A.lk.shouldViewReportByUserId(C,k)})}function m(C,k){var F=A.lk.urgeRemind(C);return g.WY.post({url:F,data:{userIds:k||[]}})}function f(C){var k=A.lk.urgeImprove(C);return g.WY.get({url:k})}function _e(C,k){return W.apply(this,arguments)}function W(){return W=(0,e.Z)(u().mark(function C(k,F){var P,b;return u().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return P=A.lk.getStudyProjectPaymentList(k),x.next=3,g.WY.get({url:P,params:F});case 3:if(b=x.sent,b.status!==200){x.next=6;break}return x.abrupt("return",{data:{code:"200000",data:b.data}});case 6:return x.abrupt("return",b);case 7:case"end":return x.stop()}},C)})),W.apply(this,arguments)}function B(C,k){return i.apply(this,arguments)}function i(){return i=(0,e.Z)(u().mark(function C(k,F){var P,b,O;return u().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return P=de.ZP.StudyTaskMonitor.getAssessData(k),oe.next=3,g.WY.get({url:P,params:F});case 3:if(b=oe.sent,O=b.data,String(O.code)!=="0"){oe.next=7;break}return oe.abrupt("return",{data:{code:"200000",data:O.data}});case 7:return oe.abrupt("return",b);case 8:case"end":return oe.stop()}},C)})),i.apply(this,arguments)}function n(C,k){return r.apply(this,arguments)}function r(){return r=(0,e.Z)(u().mark(function C(k,F){var P,b;return u().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return P=A.lk.getLiveClassList(k),x.next=3,g.WY.get({url:P,params:F});case 3:if(b=x.sent,b.data.code!==2e5){x.next=6;break}return x.abrupt("return",{data:{code:"200000",data:b.data.data}});case 6:return x.abrupt("return",b);case 7:case"end":return x.stop()}},C)})),r.apply(this,arguments)}function Y(C,k){return G.apply(this,arguments)}function G(){return G=(0,e.Z)(u().mark(function C(k,F){var P;return u().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return P=A.lk.taskCertificate(k),O.next=3,g.WY.post({url:P,data:F});case 3:return O.abrupt("return",O.sent);case 4:case"end":return O.stop()}},C)})),G.apply(this,arguments)}function s(C,k){return o.apply(this,arguments)}function o(){return o=(0,e.Z)(u().mark(function C(k,F){var P;return u().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return P=A.lk.getPracticeAnalysisData(k),O.abrupt("return",g.WY.get({url:P,params:F}));case 2:case"end":return O.stop()}},C)})),o.apply(this,arguments)}function p(C){var k=de.ZP.OrgDialog.getUserByName();return g.WY.get({url:k,params:C})}function d(C){var k=de.ZP.OrgDialog.getAllWeChatUsers(C.courseId);return g.WY.get({url:k,params:C})}function X(C){var k=A.lk.saveGroupChatIdByqy();return g.WY.post({url:k,params:C})}},18361:function(Bt,Pe,t){"use strict";t.d(Pe,{I:function(){return ae},E:function(){return j}});var _=t(88986),e=t(76651),D=t(64334),u=t(53009),A=t(3407),g=t(6793),de=(0,g.me)(),L=A.Z[de].trainingProject,S=(0,e.Qm)()._store,h=S.getState(),ge=h.advancedSetting,V=h.user,T=(c,l)=>{var Q=l.supervisor_ids,w=l.look_users||[],ie=V.loginMode,Z=V.appId;if(ie==="WE_COM"||ie==="WX"&&Z==="9005"){var z=l.supervisor_source_types,R=l.supervisor_sync_user_ids,le=l.supervisor_user_names;Q=Q.map((_t,m)=>({type:2,show:!0,id:_t,name:le[m],userId:R[m],unionid:R[m],sourceType:z[m]}))}else{var H=l.supervisor_user_names;Q=Q.map((_t,m)=>({type:2,id:_t,name:H[m],show:!0}))}var N=(0,u.$x)((0,u.tT)(l.stages,!1,!0),l.stage_error_list.length>0?l.stage_error_list:[]),y=(0,D.z2)(N),je=(0,D.NK)(N),pt=(0,D.Qz)(N),he=(0,D.GM)(N),Xe=(0,D.S1)(N);return{id:l.id||"",title:l.title,covers:{coverType:+l.cover_type,baseCover:l.base_cover,cover:l.cover},lecturerInfo:{name:l.lecturer_name,id:l.lecturer_id,lecturer_type:l.lecturer_type,sync_lecturer_id:l.sync_lecturer_id,lecturer_source_type:l.lecturer_source_type},classify:l.classify,deptIds:l.dept_ids,budget:l.budget,classify_name:l.classify_name,createUserId:l.create_user,summary:l.summary,exam_lock:l.save_step==="settings"&&l.exam_lock||"pass",job_lock:l.save_step==="settings"&&l.job_lock||"done",style_type:l.style_type||"normal",syncProgress:l.save_step==="settings"?l.sync_progress==="true":!1,qrcode:l.ding_img_url?[{uid:"erer",url:l.ding_img_url,name:"",status:"done"}]:[],dingGroup:l.save_step==="settings"?l.open_learning_group:!1,stages:N.length?N:[{key:"".concat(new Date().getTime()),name:"".concat(L.addEdit.stageTaskPanelTitle,"1"),desc:"",list:[],inOrder:!0,Standard:{progressCheck:!1,progress:100,examCheck:!1,examNum:0,bankCheck:!1,bankNum:0,practiceCheck:!1,practiceNum:0,jobEvaluationCheck:!1},reward:{getScoreChecked:!1,getScore:0,certificateChecked:!1,certificateId:"",certificateName:"",certificateImage:""}}],studyLimit:{isChecked:l.save_step==="settings"?l.study_time_limit!==0:!0,limit:l.save_step==="settings"?Number(l.study_time_limit):Number(ge.documentStudyLimit)?Number(ge.documentStudyLimit):1},jobEvaluationResults:l.save_step==="settings"?l.open_evaluation_result==="true":!1,antiCheating:{faceRecognition:l.save_step==="settings"?l.face_recognition==="on":!1,preventCutScreen:l.save_step==="settings"?l.prevent_cut_screen:!1,preventDrag:l.save_step==="settings"?l.prevent_drag:!1,speedPlay:l.save_step==="settings"?l.speed_play:!1},qualifiedStandard:{progress:{isChecked:l.progress?pt>0:!1,progress:l.progress||100},exam:{isChecked:l.times?y>0:!1,times:l.times||y},bank:{isChecked:l.practice_times?je>0:!1,times:l.practice_times||je},bank:{isChecked:l.save_step==="settings"?l.practice_times!==0&&je>0:je>0,times:l.save_step==="settings"?l.practice_times:je},operation:{isChecked:l.operation_times?he>0:!1,times:l.operation_times||he},jobEvaluation:{isChecked:l.finish_evaluation==="true"?Xe>0:!1}},qualifiedReward:{certificate:{isChecked:+l.certificate_id!=0||!1,id:+l.certificate_id!=0?l.certificate_id:"",name:+l.certificate_id!=0?l.certificate_name:"",previewUrl:+l.certificate_id!=0?l.certificate_url:""},score:{isCheckedReward:!!(l.study_score&&l.study_score.finish_score)||!1,reward:l.study_score&&l.study_score.finish_score?l.study_score.finish_score:0}},notReward:{isCheckedDeduction:!!(l.study_score&&l.study_score.unfinish_score)||!1,deduction:l.study_score&&l.study_score.unfinish_score?l.study_score.unfinish_score:0},supervisor:{supervisorUserList:Q,isChecked:l.save_step==="settings"?l.supervisor_paper===null?!0:l.supervisor_paper:!0,visibleAuthScope:!0,authScopeIsChecked:l.save_step==="settings"?l.authority_range==="true":!0},projectView:{projectViewUserList:w},studyMode:l.study_model==="unlock_mode"?"map":"free",employeeRange:{rangeType:l.save_step==="settings"?l.is_all:3,rangeList:{dept:l.save_step==="settings"?l.department_list:[],post:l.save_step==="settings"?l.post_list:[],group:l.save_step==="settings"?l.group_list:[],user:l.save_step==="settings"?l.user_list:[]}},studyTime:l.study_duration,stagePass:l.stage_pass==="true"||l.stage_pass==="false"?l.stage_pass==="true":!0,paySetting:{isfree:l.save_step==="settings"&&l.is_free!==null?l.is_free:!0,originPrice:l.is_free!==null?l.is_free||l.official_price_str==="0.00"?"":l.official_price_str:"",discountPrice:l.is_free!==null?l.is_free||l.preferential_price_str==="0.00"?"":l.preferential_price_str:""},projectStatus:l.status,open_transfer_student:l.save_step==="settings"?l.open_transfer_student:!1,save_step:l.save_step,course_download:l.course_download}},ae=(c,l)=>{var Q=l.type,w=l.payload;switch(Q){case"setCurrent":return(0,_.Z)((0,_.Z)({},c),{},{current:w});case"setProjectId":return(0,_.Z)((0,_.Z)({},c),{},{projectId:w});case"setStagesIndex":return(0,_.Z)((0,_.Z)({},c),{},{stagesIndex:c.stagesIndex+1});case"setNowStage":return(0,_.Z)((0,_.Z)({},c),{},{nowStage:w});case"handleProjectData":return(0,_.Z)((0,_.Z)({},c),{},{initialValues:T(c,w),evaluateAssign:w.evaluate_assign&&w.evaluate_assign==="assign"});case"setInfoData":return(0,_.Z)((0,_.Z)({},c),{},{initialValues:w});case"updateInfoData":return(0,_.Z)((0,_.Z)({},c),{},{initialValues:Object.assign(c.initialValues,w)});case"setLoading":return(0,_.Z)((0,_.Z)({},c),{},{submitLoading:w});case"setStepStatusFirst":return(0,_.Z)((0,_.Z)({},c),{},{stepStatusFirst:w});case"setStepStatusSecond":return(0,_.Z)((0,_.Z)({},c),{},{stepStatusSecond:w});case"setStepStatusThree":return(0,_.Z)((0,_.Z)({},c),{},{stepStatusThree:w});case"setStudyProjectInfo":return(0,_.Z)((0,_.Z)({},c),{},{studyProjectInfo:w});case"setCourseId":return(0,_.Z)((0,_.Z)({},c),{},{course_id:w});default:throw new Error}},j={current:0,stepStatusFirst:!1,stepStatusSecond:!1,stepStatusThree:!1,submitLoading:!1,nowStage:0,projectId:"",course_id:"",stagesIndex:0,initialValues:{},studyProjectInfo:{study_project:{}},evaluateAssign:!1}},91052:function(Bt,Pe,t){"use strict";t.d(Pe,{x4:function(){return s},HT:function(){return N},zL:function(){return m},mH:function(){return T}});var _=t(7359),e=t(2829),D=t(12924),u=t.n(D),A=t(91768),g=t(67719),de=t(43866),L=t.n(de),S=t(84874),h=t(6793),ge=e.Z.Panel,V=p=>{var d=p.t,X=p.isCollapse,C=X===void 0?!1:X,k=p.isChildTitle,F=k===void 0?!1:k,P=p.tagName,b=p.iconClass,O=p.title,x=p.duration,oe=x===void 0?"":x,Re=p.renderPanelTitle,be=p.unlocking_time,Et=p.type,Ft=p.practice,Jt=()=>u().createElement("div",{className:"".concat(F?L()["single-source-title-child"]:L()["single-source-title"])},u().createElement("div",{className:L().title},b?u().createElement("div",{className:L().left},u().createElement("div",{className:L().icon},u().createElement(S.Z,{iconClass:b,size:"12px"}),u().createElement("span",null,d(P)))):null,O,"  ".concat(oe)),u().createElement("div",{className:L()["info-container"]},u().createElement("div",{className:L().title},u().createElement("div",{className:L().left})),be>0&&u().createElement("div",{className:"".concat(L().item," ").concat(L()["unlock-date"],"}}")},u().createElement(S.Z,{iconClass:"icon-jiesuoshijian",size:"12px"}),d("assessment.unlockTime"),"\uFF1A",(0,h.p6)(be,"yyyy-MM-dd hh:mm")),Et===17&&u().createElement("div",{className:"".concat(L().item," ").concat(L().standard,"}}")},d("common.qualificationCriteria"),"\uFF1A",d("questionPractice.correctRate"),Ft.pass_line,"%"))),At=()=>u().createElement(e.Z,{defaultActiveKey:["1"],bordered:!1,className:L()["source-collapse-title"],expandIcon:Lt=>u().createElement(g.Z,{type:Lt.isActive?"minus-square":"plus-square"})},u().createElement(ge,{header:Re(),key:"1",className:L()["source-collapse-panel"]},p.children));return u().createElement(u().Fragment,null,C?At():Jt())},T=(0,A.Z)("translation",{withRef:!0})(V),ae=t(62029),j=t(20228),c=t(11382),l=t(57361),Q=t(33565),w=t(9754),ie=t.n(w),Z=t(18329),z=t(9849),R=t(28529),le=t.n(R),H=p=>{var d=p.t,X=p.visible,C=p.certificate_id,k=p.onCancel,F=(0,D.useState)(""),P=(0,Q.Z)(F,2),b=P[0],O=P[1],x=u().useMemo(()=>({title:d("common.certificate"),footer:null,size:"small",destroyOnClose:!0,maskClosable:!1}),[]);return(0,D.useEffect)(()=>{if(!C)return;function oe(){return Re.apply(this,arguments)}function Re(){return Re=(0,l.Z)(ie().mark(function be(){var Et,Ft,Jt;return ie().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,(0,z.bm)(C);case 2:Et=Lt.sent,Ft=Et.status,Jt=Et.data,Ft===200&&O(Jt.preview_url);case 6:case"end":return Lt.stop()}},be)})),Re.apply(this,arguments)}oe()},[C]),u().createElement(Z.ZP,(0,ae.Z)({},x,{visible:X,onCancel:k}),u().createElement("div",{className:le().certificate},b?u().createElement("img",{src:b,alt:"certificate"}):u().createElement(c.Z,null)))},N=(0,A.Z)("translation",{withRef:!0})(H),y=t(34669),je=t(82833),pt=t(52636),he=t(38621),Xe=t.n(he),_t=p=>{var d=p.status,X=p.study_progress,C=p.isProgress,k=C===void 0?!0:C,F=(0,D.useContext)(pt.Z),P=F.state,b=P.projectInfo,O=b.is_start_study;return O!=="true"?null:u().createElement("div",{className:Xe().progress},k?u().createElement(je.Z,{percent:X,size:"small"}):"".concat(d))},m=_t,f=t(22385),_e=t(31097),W=t(34792),B=t(48086),i=t(76651),n=t(57068),r=t(79659),Y=t.n(r),G=p=>{var d=p.t,X=p.resource,C=p.stageItem,k=X.resource_quiz_vo,F=X.can_start_study,P=X.study_progress,b=(0,D.useContext)(pt.Z),O=b.state,x=b.dispatch,oe=O.projectInfo,Re=oe.enroll_status,be=()=>{if(F==="false"){B.default.warning(d("study.beginStudyBreakThroughTip"));return}if(C.is_order&&P<100)B.default.warning(d("study.beginStudyBreakThroughTip"));else{var At=k.answer_record_count,Lt=k.resource_id,ia=k.course_id,pa=At===0?"/course/quiz":"/course/quizParse";i.m8.push({pathname:pa,search:n.stringify({courseId:ia,resourceId:Lt,planId:X.course_id})})}},Et=()=>{x({type:"checkStudy",payload:{checking:!0,cb:be}})},Ft=()=>{var At="",Lt=k&&k instanceof Object&&k.question_count>0;if(Lt){var ia=C.is_order,pa=ia?F==="false"||P<100:F==="false",Rt=pa?"cl-primary cl-disabled":"cl-primary";At=u().createElement("span",{className:"".concat(Y().action," ").concat(Rt),onClick:Et},k.answer_record_count===0?d("component.InClassTest"):d("common.preview"))}return At},Jt=()=>{var At=u().createElement("div",{className:Y().action},p.children,Ft());return u().createElement(u().Fragment,null,Re==="pass"?At:u().createElement(_e.Z,{placement:"top",title:d("learning.failedRegistrationTips")},At))};return u().createElement(u().Fragment,null,Jt())},s=(0,A.Z)("translation",{withRef:!0})(G),o=t(72678)},87274:function(Bt,Pe,t){"use strict";t.d(Pe,{W:function(){return T}});var _=t(34792),e=t(48086),D=t(12924),u=t.n(D),A=t(91768),g=t(76651),de=t(57068),L=t(52636),S=t(9972),h=t(91052),ge=t(10815),V=t.n(ge),T="studyProjectPractice",ae=j=>{var c=j.t,l=j.resource,Q=j.stageItem,w=(0,D.useContext)(L.Z),ie=w.state,Z=w.dispatch,z=ie.params,R=ie.projectInfo,le=ie.triggerResource,H=(0,D.useMemo)(()=>(0,S.gj)(R,l),[R,l]),N=l.type,y=l.biz_type,je=l.resource_name,pt=l.course_id,he=l.can_start_study,Xe=l.content_type,_t=l.unlocking_time,m=l.practice,f=z.courseIds,_e=z.all_checked,W=z.from;(0,D.useEffect)(()=>{le.type===17&&i(!0)},[le]);var B=o=>{if(o.unlocking_time&&o.unlocking_time>new Date().getTime()){e.default.warning(c("trainingProject.timeNotStart"));return}if(o.can_start_study==="false"){e.default.warning(c("study.beginStudyBreakThroughTip"));return}g.m8.push({pathname:"/personal/questionPractice/detail",search:de.stringify({id:o.course_id,biz_type:T})})},i=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,d=p?le.resource:l;Z({type:"checkStudy",payload:{checking:!0,cb:()=>{B(d)},record:d}})},n=()=>{W==="trainee"&&i()},r=()=>{var o=f?f.split(","):[];return u().createElement(h.mH,{type:N,practice:m,from:W,lock:he==="false",tagName:(0,S.JR)(N,Xe,y).name,iconClass:(0,S.JR)(N,Xe,y).icon,title:je||"",isImportant:_e==="true"||o.indexOf(pt)!==-1,duration:"",unlocking_time:_t,onTitleClick:n})},Y=()=>{var o=c("questionPractice.startPractice"),p=m.practice_infos;if(Array.isArray(p)&&p.length>0){var d=p[0].pass_status;d!=="not"&&(o=c("questionPractice.continuePractice"))}return u().createElement(h.x4,{resource:l,stageItem:Q},u().createElement("span",{className:"".concat(V()["operate-container"]," ").concat(H),onClick:()=>{i()}},o))},G=(0,D.useCallback)(()=>{var o=m.practice_infos;if(Array.isArray(o)&&o.length>0){var p=o[0],d=p.pass_status,X=p.pass_rate;return d!=="not"?u().createElement(u().Fragment,null,u().createElement("span",{className:V().qualified},d==="pass"?"".concat(c("study.employeePass"),"(").concat(X||0,")"):"".concat(c("study.employeeUnPass"),"(").concat(X||0,")")),u().createElement("span",{className:V().success_rate},"\uFF08",c("questionPractice.correctRate"),o[0].pass_rate||0,"\uFF09")):u().createElement("span",{className:V().qualified},c("questionPractice.notPractice"))}return u().createElement("span",{className:V().qualified},c("questionPractice.notPractice"))},[m]),s=(0,D.useCallback)(()=>{var o=m.practice_infos,p="#c0c4cc";if(Array.isArray(o)&&o.length>0){var d=o[0].pass_status;d==="not"&&(p="#c0c4cc"),d==="pass"&&(p="#52C41A"),d==="failed"&&(p="#F5222D")}return u().createElement("span",{className:"".concat(V().status_icon),style:{background:p}})},[m]);return u().createElement(u().Fragment,null,r(),W==="trainee"&&u().createElement("div",{className:V()["status-container"]},s(),G()),W==="trainee"&&Y())};Pe.Z=(0,A.Z)("translation",{withRef:!0})(ae)},14738:function(Bt,Pe,t){"use strict";t.d(Pe,{KL:function(){return _},l6:function(){return e},ZP:function(){return D},Q_:function(){return u},aD:function(){return A},XS:function(){return g},dX:function(){return de}});var _={notStartSelfStudy:{label:"trainingProject.selfStudyNotStart",event:"register",type:"primary",disabled:!0},selfStudyTimeFinished:{label:"trainingProject.selfStudyTimeFinished",enroll_status:"register",disabled:!0,type:"default"},unlimited:{label:"common.register",event:"register",type:"primary"},limited:{label:"trainingProject.limitedPeopleCount",event:"register",count:!0,type:"primary"},reject:{label:"common.registerRefused",disabled:!0,type:"default"},wait:{label:"common.approving",enroll_status:"wait",disabled:!0,type:"default"},stop:{label:"common.quotaFull",enroll_status:"stop",disabled:!0,type:"default"}},e=[{label:"course.introduction",status:"introduction"},{label:"course.directory",status:"directory"},{label:"courseManage.comment",status:"comment"},{label:"common.studyRecord",status:"record"}],D=[{label:"course.introduction",status:"introduction"},{label:"course.directory",status:"directory"},{label:"trainingProject.rules",status:"rule"},{label:"study.log",status:"log"}],u={draft:"personal.draft",disabled:"courseManage.unPublished",normal:"courseManage.published"},A={draft:"default",disabled:"orange",normal:"success"},g={free_mode:"trainingProject.addEdit.freeSchema",unlock_mode:"trainingProject.addEdit.recruitModel"},de={normal:"trainingProject.addEdit.listStyleMap",desert:"trainingProject.addEdit.mapStyleMap",star:"trainingProject.addEdit.mapStyleMap"}},72678:function(Bt,Pe,t){"use strict";var _=t(49111),e=t(19650),D=t(59250),u=t(13013),A=t(57663),g=t(71577),de=t(30887),L=t(99210),S=t(22385),h=t(31097),ge=t(12924),V=t.n(ge),T=t(28216),ae=t(91768),j=t(50361),c=t.n(j),l=t(57254),Q=t(86726),w=t(69293),ie=t.n(w),Z=R=>{var le=R.t,H=R.visibleNum,N=R.buttons,y=R.onOperateHandles,je=R.record,pt=R.uniKey,he=R.modules,Xe=(0,Q.V9)(pt,he),_t=(i,n)=>i.filter(r=>{var Y=r.checkAuth||!1;return Y?(0,Q.H3)(r.key,Xe):!0}),m=(i,n)=>{var r=!1;switch(typeof i.disabled){case"function":r=i.disabled(n);break;case"boolean":r=i.disabled;break;default:r=!1;break}return r},f=(i,n,r)=>typeof n.tooltips=="object"?n.tooltips.normal&&!r?V().createElement(h.Z,{placement:"top",title:n.tooltips.normal},i):n.tooltips.disable&&r?V().createElement(h.Z,{placement:"top",title:n.tooltips.disable},i):i:i,_e=(i,n)=>{var r=i.item,Y=i.record;n||(y&&y({type:r.key,record:Y}),r.handleClick&&r.handleClick(Y))},W=(i,n)=>V().createElement(L.Z,null,i.map(r=>{var Y=m(r,n);return r.render?r.render(n):V().createElement(L.Z.Item,{key:r.key,disabled:Y,onClick:()=>_e({item:r,record:n},Y)},f(V().createElement("div",null,r.name),r,Y))})),B=()=>{var i=c()(N),n=i.filter(o=>typeof o.visible=="function"?o.visible():o.visible),r=H||2,Y=[],G=[];if(n.length>0){var s=_t(n,je);G=[...s.slice(0,r)],Y=[...s.slice(r)]}return Y.length===1&&(G=[...G,...Y],Y=[]),V().createElement("div",{className:ie()["operation-buttons"],id:"dropdown-project-button"},V().createElement(e.Z,{size:16},G.length?G.map(o=>{var p=m(o,je);return o.render?o.render(je):f(V().createElement(V().Fragment,null,V().createElement(g.Z,{key:o.key,type:o.type,icon:o.icon,disabled:p,onClick:()=>_e({item:o,record:je},p)},o.name)),o,p)}):null,Y.length?V().createElement(u.Z,{overlay:W(Y,je)},V().createElement(g.Z,{className:"cl-pointer"},le("common.more"),V().createElement(l.Z,null))):null))};return V().createElement(V().Fragment,null,B())},z=R=>({modules:R.user.modules,userId:R.user.id||window.localStorage.getItem("uid"),isAdmin:R.user.isAdmin,appType:R.user.appType});Pe.Z=(0,T.$j)(z,null,null,{forwardRef:!0})((0,ae.Z)("translation",{withRef:!0})(Z))},9972:function(Bt,Pe,t){"use strict";t.d(Pe,{UZ:function(){return e},gj:function(){return D},JR:function(){return u}});var _=t(37055),e=A=>{if(Object.keys(A).length===0)return!1;var g=A.is_free,de=A.have_purchased,L=A.type;return(A.enroll_status==="unlimited"||A.enroll_status==="limited")&&A.enrollment_end_time&&A.enrollment_end_time<new Date().getTime()<A.enrollment_begin_time||A.enroll_status==="pass"&&A.task_begin_time&&(A.task_begin_time>new Date().getTime()||new Date().getTime()>A.task_end_time)?!1:!!(L==="study_project"&&(de==="true"||g))},D=(A,g)=>{var de="cl-primary";return(g.can_start_study==="false"||A.enroll_status!=="pass"||!e(A))&&(de="cl-primary cl-disabled"),de};function u(A){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",L="",S="";switch(A){case 1:L="icon-kecheng2",S="common.courseLabel",de==="micro_course"&&(S="common.microCourse"),de==="imageText"&&(L="icon-tuwenke1",S="course.graphicDetailTitle");break;case 2:case 3:L="icon-sucai",S="documentTitle.matter";break;case 6:L="icon-kaoshi2",S="common.exam";break;case 7:L="icon-xianxiake1",S="common.offline";break;case 9:L="icon-tiaoyan",S="questionn.investigate";break;case 10:L="icon-shicaozuoye1",S="common.operation";break;case 11:L="icon-gangweiceping1",S="common.evaluation";break;case 13:L="icon-jieduankaoqin",S="component.attendance";break;case 14:L="icon-tuiguang",S="trainingProject.addEdit.assess";break;case 15:L="icon-kaoshi2",S="common.exam";break;case 16:L="icon-zhiboke",S="live.live";break;case 17:L="icon-lianxi1",S="questionPractice.practice";break;default:L=g;break}return{icon:L,name:S}}},67479:function(Bt,Pe,t){"use strict";t.d(Pe,{D:function(){return L},W:function(){return h}});var _=t(57361),e=t(9754),D=t.n(e),u=t(57068),A=t(31916),g=t(38642),de=t(5430);function L(ge){return S.apply(this,arguments)}function S(){return S=(0,_.Z)(D().mark(function ge(V){var T,ae,j,c,l;return D().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.prev=0,w.next=3,(0,A.uH)();case 3:if(T=w.sent,T!=="old"){w.next=6;break}return w.abrupt("return",!1);case 6:return w.next=8,(0,A.fP)(V);case 8:if(ae=w.sent,j=ae.data,c=j.code,l=j.data,c!=="200000"){w.next=14;break}return w.abrupt("return",l.exam_type==="new");case 14:w.next=20;break;case 16:return w.prev=16,w.t0=w.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",w.t0),w.abrupt("return",!1);case 20:case"end":return w.stop()}},ge,null,[[0,16]])})),S.apply(this,arguments)}var h={examing:function(){var ge=(0,_.Z)(D().mark(function T(ae){var j,c,l;return D().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return j="",c=ae.pageFrom==="ding_myExamTask"?(0,g.lz)(de.ZP.enterpriseId,"student"):"",w.next=4,L(ae.exam_id);case 4:return l=w.sent,l?j="".concat(c,"/training/examination/new-exam/examing?").concat(u.stringify(ae)):j="".concat(c,"/training/examination/exam/personal?").concat(u.stringify(ae)),w.abrupt("return",j);case 7:case"end":return w.stop()}},T)}));function V(T){return ge.apply(this,arguments)}return V}(),parse:ge=>"/training/examination/new-exam/parse?".concat(u.stringify(ge)),examData:ge=>"/training/examination/exam-data?exam_id=".concat(ge.exam_id,"&task_id=").concat(ge.task_id),marking:ge=>"/training/examination/new-exam/marking?".concat(u.stringify(ge))}},64462:function(Bt,Pe,t){"use strict";t.d(Pe,{K7:function(){return ge},Vo:function(){return V},It:function(){return T}});var _=t(57361),e=t(34792),D=t(48086),u=t(9754),A=t.n(u),g=t(37055),de=t(10237),L=t(60333),S=t(1164),h=t(38642);function ge(l,Q){(Q==="end"||Q==="remarking")&&(0,h.eJ)({url:"/course/enterpriseCourse?courseId=".concat(l)}),de.WY.get({url:g.ZP.EnterpriseCourse.getEnterpriseCourse(),params:{id:l}}).then(w=>{var ie=w.data.live_status;ie==="end"||ie==="remarking"?(0,h.eJ)({url:"/course/enterpriseCourse?courseId=".concat(l)}):(0,L.uA)(l).then(Z=>{var z=Z.data;z.code===2e5?S.Z.targetTo({path:z.data.link,isExternalLink:!0}):D.default.error(z.message)}).catch(Z=>{console.log(Z)})}).catch(w=>{console.log(w)})}function V(l){(0,L.u0)(l).then(Q=>{var w=Q.data;w.code===2e5?window.open(w.data.link,"_blank"):D.default.error(w.message)}).catch(Q=>{console.log(Q)})}function T(l,Q){return ae.apply(this,arguments)}function ae(){return ae=(0,_.Z)(A().mark(function l(Q,w){var ie;return A().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:ie=window.navigator.userAgent,ie.includes("DingTalk")?de.WY.get({url:g.ZP.DdLive.getLiveDetail(),params:{courseId:Q,appId:"cool"}}).then(R=>{var le=R.data;dd.biz.util.openLink({url:le.data.jumpUrl})}).catch(R=>{console.log(R)}):D.default.info(w("ddLive.ddInfo"));case 2:case"end":return z.stop()}},l)})),ae.apply(this,arguments)}function j(){}function c(){}},98233:function(Bt,Pe,t){"use strict";t.d(Pe,{nn:function(){return de},OV:function(){return h},Md:function(){return V},uk:function(){return g}});var _=t(57361),e=t(9754),D=t.n(e),u=t(57068),A=t(67479),g={edit:ae=>"/training/learning/project/add?".concat(u.stringify(ae)),monitorDetail:ae=>{var j=ae.id,c=ae.projectId,l=ae.origin,Q=ae.tab;return"/training/trainingProject/monitor?id=".concat(j,"&projectId=").concat(c,"&origin=").concat(l,"&tab=").concat(Q)},traineeView:ae=>"/training/trainingProject/traineeView?".concat(u.stringify(ae)),manageView:ae=>"/training/trainingProject/manageView?".concat(u.stringify(ae)),previewView:ae=>"/training/trainingProject/previewView?".concat(u.stringify(ae))};function de(ae){var j=ae.origin,c=ae.search,l=c===void 0?"":c,Q={project:"/knowledgeBase/project/examination/newPlan/detail?".concat(l),learning:"/training/learning/examination/newPlan/detail?".concat(l),employee:"/training/employee/examination/newPlan/detail?".concat(l),exam:"/training/examination/newPlan/detail?".concat(l)};return Q[j]||"/training/examination/newPlan/detail?".concat(l)}function L(ae,j){if(ae){var c=u.stringify({id:j.id,title:j.title,origin:j.taskType,taskId:j.projectId});return de({origin:j.taskType,search:c})}var l=u.stringify({id:j.id,taskId:j.taskId,from:j.from,taskType:j.taskType,projectId:j.projectId});return"/training/learning/project/monitor/exam?".concat(l)}function S(ae,j){return ae?A.W.marking({exam_id:j.id,status:j.status,markScene:"manage"}):"/training/examination/plan/testPaper?id=".concat(j.id,"&from=").concat(j.from,"&taskId=").concat(j.taskId)}function h(){return ge.apply(this,arguments)}function ge(){return ge=(0,_.Z)(D().mark(function ae(){var j,c,l,Q=arguments;return D().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(j=Q.length>0&&Q[0]!==void 0?Q[0]:"unKnow",c=Q.length>1?Q[1]:void 0,j!=="unKnow"){ie.next=7;break}return ie.next=5,(0,A.D)(c.id);case 5:return l=ie.sent,ie.abrupt("return",L(l,c));case 7:return ie.abrupt("return",L(j,c));case 8:case"end":return ie.stop()}},ae)})),ge.apply(this,arguments)}function V(){return T.apply(this,arguments)}function T(){return T=(0,_.Z)(D().mark(function ae(){var j,c,l,Q=arguments;return D().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(j=Q.length>0&&Q[0]!==void 0?Q[0]:"unKnow",c=Q.length>1?Q[1]:void 0,j!=="unKnow"){ie.next=7;break}return ie.next=5,(0,A.D)(c.id);case 5:return l=ie.sent,ie.abrupt("return",S(l,c));case 7:return ie.abrupt("return",S(j,c));case 8:case"end":return ie.stop()}},ae)})),T.apply(this,arguments)}}}]);
