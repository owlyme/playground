(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8111],{26096:function(Oe,ae,e){"use strict";var te=e(30887),C=e(99210),$=e(62029),W=e(22385),J=e(31097),z=e(12924),M=e.n(z),F=e(71967),Y=e.n(F),P=e(1164),N=p=>p.type==="more"?p.disabled?M().createElement(C.Z.Item,(0,$.Z)({},p,{key:p.key,disabled:!0}),p.tooltip?M().createElement(J.Z,{title:p.tooltip},M().createElement("p",{className:"cl-dropdown-menuitem"},p.title)):M().createElement("p",{className:"cl-dropdown-menuitem"},p.title)):p.link?M().createElement(C.Z.Item,(0,$.Z)({},p,{key:p.key}),M().createElement(P.Z,{to:p.link},M().createElement("p",{className:"cl-dropdown-menuitem"},p.title))):M().createElement(C.Z.Item,(0,$.Z)({},p,{key:p.key}),M().createElement("p",{className:"cl-dropdown-menuitem",onClick:p.click},p.title)):p.disabled?p.tooltip?M().createElement(M().Fragment,{key:p.key},M().createElement(J.Z,{title:p.tooltip},M().createElement("span",{className:"".concat(Y().pointer," ").concat(Y().disabled)},p.title))):M().createElement(M().Fragment,{key:p.key},M().createElement("span",{className:"".concat(Y().pointer," ").concat(Y().disabled)},p.title)):p.link?M().createElement(M().Fragment,{key:p.key},M().createElement(P.Z,{to:p.link},M().createElement("span",{className:"cl-pointer ".concat(Y().pointer)},p.title))):M().createElement(M().Fragment,{key:p.key},M().createElement("span",{className:"cl-pointer ".concat(Y().pointer),onClick:p.click},p.title));ae.Z=N},16598:function(Oe,ae,e){"use strict";var te=e(59250),C=e(13013),$=e(30887),W=e(99210),J=e(62029),z=e(12924),M=e.n(z),F=e(57254),Y=e(91768),P=e(26096),N=(d,t)=>{var f=d.map(b=>M().createElement(P.Z,(0,J.Z)({},b,{type:t,key:b.key||b.type})));return t==="more"?M().createElement(W.Z,null,f):f},p=d=>{var t=d.buttons,f=d.t,b=d.visibleNum,m=t.filter(E=>E.visible),w=b||1,l=[],K=[];if(m.length<=w)K=[...m];else if(m.length>w)K=[...m.slice(0,w)],l=[...m.slice(w)];else return"/";return M().createElement("div",{className:"cl-table__cell-action"},N(K),K.some(E=>E.visible)&&l.some(E=>E.visible)?M().createElement(M().Fragment,null,M().createElement("span",{className:"cl-pointer-divide"}),M().createElement(C.Z,{overlay:N(l,"more")},M().createElement("span",{className:"cl-pointer"},f("common.more")," ",M().createElement(F.Z,null)))):null)};p.defaultProps={visibleNum:1},ae.Z=(0,Y.Z)()(p)},18884:function(Oe,ae,e){"use strict";var te=e(57338),C=e(83107),$=e(57663),W=e(71577),J=e(47673),z=e(4107),M=e(62029),F=e(81211),Y=e(34792),P=e(48086),N=e(57361),p=e(18106),d=e(88108),t=e(9754),f=e.n(t),b=e(12924),m=e.n(b),w=e(91768),l=e(40847),K=e(99946),E=e(70548),O=e.n(E),H=e(79),r=e(66708),q=e(38642),le=d.Z.TabPane;class ie extends m().Component{constructor(B){var j;super(B);j=this,this.onFormMounted=k=>{this.AddFormInstance=k},this.handleCancelShare=()=>{var k=this.props.onCancel;k&&k()},this.getVisitorConfig=(0,N.Z)(f().mark(function k(){var _,X,ee;return f().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,(0,H.L)(localStorage.getItem("enterpriseId"));case 2:_=ve.sent,X=_.data,ee=_.status,ee===200&&(X.open_visitor_page==="true"?j.setState({visitorIsOpen:!0,pcDomain:X.pc_domain||""}):j.setState({visitorIsOpen:!1}));case 6:case"end":return ve.stop()}},k)})),this.handleCopy=()=>{var k=document.getElementById("share-link");k.select(),document.execCommand("Copy"),P.default.success(this.props.t("live.copySuccess"))},this.renderContent=()=>{var k=this.props,_=k.t,X=k.tabsTitle,ee=k.isProjectShare,re=(0,F.Z)(k,["t","tabsTitle","isProjectShare"]),ve=this.state,_e=ve.active,we=ve.visitorIsOpen,be=ve.pcDomain,Ie=ve.shareUrl;return we?m().createElement(d.Z,{defaultActiveKey:_e,onChange:this.handleTabs},m().createElement(le,{tab:X[0]||_("tutorial.student"),key:"0"},m().createElement("p",{className:O()["share-tip"]},m().createElement(l.Z,{className:O()["info-icon"]}),_("common.traineeShareTip")),m().createElement(r.Z,(0,M.Z)({type:"card",center:!1,label:_("setting.Qrcode"),saveText:_("shareInfo.downloadCode"),downloadAsBtn:!0},re)),Ie&&!ee&&m().createElement("div",{className:O()["url-share"]},m().createElement("label",null,_("common.urlAddress"),":"),m().createElement("div",{className:O()["right-content"]},m().createElement(z.Z,{className:O()["share-url-input"],readOnly:!0,value:Ie,id:"share-link"}),m().createElement(W.Z,{type:"primary",className:O()["copy-btn"],onClick:this.handleCopy},_("registerLogin.copyLink")),m().createElement("span",{className:O()["share-tip"]},_("common.shareTip"))))),re.option&&re.option.flag==="exam_task"?null:m().createElement(le,{tab:X[1]||_("common.tourist"),key:"1"},m().createElement(K.Z,(0,M.Z)({onFormMounted:this.onFormMounted,handleVisitorTabs:this.visitorTabs,pcDomain:be},re)))):m().createElement(b.Fragment,null,m().createElement("p",{className:O()["share-tip"]},m().createElement(l.Z,{className:O()["info-icon"]}),_("common.traineeShareTip")),m().createElement(r.Z,(0,M.Z)({type:"card",center:!1,label:_("setting.Qrcode"),saveText:_("shareInfo.downloadCode"),downloadAsBtn:!0},re)),Ie&&!ee&&m().createElement("div",{className:O()["url-share"]},m().createElement("label",null,_("common.urlAddress"),":"),m().createElement("div",{className:O()["right-content"]},m().createElement(z.Z,{className:O()["share-url-input"],readOnly:!0,value:Ie,id:"share-link"}),m().createElement(W.Z,{type:"primary",className:O()["copy-btn"],onClick:this.handleCopy},_("registerLogin.copyLink")),m().createElement("span",{className:O()["share-tip"]},_("common.shareTip")))))},this.state={active:0,visitorIsOpen:!1,pcDomain:"",shareUrl:""}}componentDidMount(){this.getVisitorConfig()}componentDidUpdate(B){var j=this.props.option;if(B.option.flag!==j.flag&&j.flag==="share_course_enterprise"){var k=(0,q.dU)(),_=localStorage.getItem("enterpriseId");this.setState({shareUrl:"".concat("https://mobile.coolcollege.cn","/assets-share-link.html?env=").concat(k,"&eid=").concat(_,"&").concat(j.scene,"&msgSource=shareLink")})}}render(){var B=this.props,j=B.title,k=B.visible;return m().createElement(C.Z,{title:j,className:O()["share-modal"],width:560,onClose:this.handleCancelShare,visible:k,destroyOnClose:!0,footerStyle:{textAlign:"right"},bodyStyle:{paddingTop:10,paddingLeft:30,paddingRight:30}},this.renderContent())}}ie.defaultProps={visible:!0,title:"",onCancel:()=>{},tip:"",record:{},option:{flag:"",scene:""},tabsTitle:["",""]},ae.Z=(0,w.Z)()(ie)},41194:function(Oe,ae,e){"use strict";var te=e(47673),C=e(4107),$=e(57663),W=e(71577),J=e(34792),z=e(48086),M=e(12924),F=e.n(M),Y=e(91768),P=e(92592),N=e(87797),p=e.n(N);class d extends F().Component{constructor(f){super(f);this.handleDownload=()=>{var b=document.getElementById("code_canvas"),m=this.state.codeUrl,w=new Image;w.crossOrigin="anonymous",w.src=m,w.onload=()=>{var l=b.getContext("2d");l.textAlign="center",l.fillStyle="#fff",l.fillRect(0,0,750,886),l.drawImage(w,185,217,381,381),l.font="42px bold serif",l.fillStyle="#4F4F4F";var K=b.toDataURL("image/jpeg"),E=document.createElement("a");E.setAttribute("href",K),E.setAttribute("download","".concat(this.props.t("setting.Qrcode"),".jpg")),document.body.insertAdjacentElement("beforeend",E),E.click(),E.remove()}},this.handleCopy=()=>{var b=this.props.id,m=document.getElementById(b||"visitor-link");m.select(),document.execCommand("Copy"),z.default.success(this.props.t("live.copySuccess"))},this.state={codeUrl:""}}componentDidMount(){this.props.shareUrl&&P.toDataURL(this.props.shareUrl,{width:500}).then(f=>{this.setState({codeUrl:f})}).catch(()=>{z.default.error(this.props.t("integralMall.qrCodeFailed"))})}componentDidUpdate(f){f.shareUrl!==this.props.shareUrl&&this.props.shareUrl&&P.toDataURL(this.props.shareUrl,{width:500}).then(b=>{this.setState({codeUrl:b})}).catch(()=>{z.default.error(this.props.t("integralMall.qrCodeFailed"))})}render(){var f=this.props,b=f.shareUrl,m=f.t,w=f.notShowQrCode,l=f.urlLabel,K=f.id,E=this.state.codeUrl;return F().createElement(M.Fragment,null,w?null:F().createElement("div",{className:p()["visitor-qrCode-share"]},F().createElement("label",null,m("setting.Qrcode"),":"),F().createElement("div",{className:p()["qrCode-section"]},F().createElement("img",{className:p()["qrCode-img"],src:E,alt:""}),F().createElement("canvas",{className:p()["code-canvas"],id:"code_canvas",width:750,height:886}),F().createElement(W.Z,{type:"primary",className:p()["download-btn"],onClick:this.handleDownload},m("shareInfo.downloadCode")))),F().createElement("div",{className:p()["visitor-url-share"]},F().createElement("label",null,l||m("common.urlAddress"),":"),F().createElement("div",{className:p()["right-content"]},F().createElement(C.Z,{className:p()["share-url-input"],readOnly:!0,value:b,id:K||"visitor-link"}),F().createElement(W.Z,{type:"primary",className:p()["copy-btn"],onClick:this.handleCopy},m("registerLogin.copyLink")),F().createElement("span",{className:p()["share-tip"]},m("common.shareTip")))))}}d.defaultProps={shareUrl:"",notShowQrCode:!1,urlLabel:"",id:"visitor-link"},ae.Z=(0,Y.Z)()(d)},79:function(Oe,ae,e){"use strict";e.d(ae,{L:function(){return $}});var te=e(5430),C=e(10237);function $(W){var J=te.ZP.visitors.getVisitorSetting(W);return C.WY.get({url:J})}},99946:function(Oe,ae,e){"use strict";var te=e(12924),C=e.n(te),$=e(91768),W=e(40847),J=e(41194),z=e(51431),M=e.n(z);class F extends C().Component{constructor(P){super(P);this.handleVisitorTabs=N=>{var p=this.props.handleVisitorTabs;p&&p(N)},this.state={shareUrl:"",excludeDomains:["localhost","127.0.0.1"]}}componentDidMount(){var P=this.state.excludeDomains,N=this.props,p=N.option,d=N.pcDomain,t=d||window.location.hostname||document.domain||"",f=window.location.port,b=localStorage.getItem("enterpriseId");t&&P.indexOf(t)<0?this.setState({shareUrl:"https://".concat(t,"/#/visitor?").concat(p.scene,"&enterpriseId=").concat(b)}):this.setState({shareUrl:"http://".concat(t,":").concat(f,"/#/visitor?").concat(p.scene,"&enterpriseId=").concat(b)})}render(){var P=this.props,N=P.t,p=P.tip,d=P.onlyUrl,t=P.urlLabel,f=P.id,b=this.state.shareUrl;return C().createElement("div",{className:M()["visitor-share-content"]},C().createElement("p",{className:M()["share-tip"]},C().createElement(W.Z,{className:M()["info-icon"]}),p||N("common.visitorShareTip")),C().createElement(J.Z,{id:f,shareUrl:d||b,urlLabel:t}))}}F.defaultProps={record:{},shareUrl:"",tip:"",urlLabel:"",id:""},ae.Z=(0,$.Z)()(F)},11449:function(Oe,ae,e){"use strict";e.d(ae,{Z:function(){return de}});var te=e(88986),C=e(33565),$=e(12924),W=e.n($),J=e(3115),z=e(49111),M=e(19650),F=e(62029),Y=e(57663),P=e(71577),N=e(91768),p=e(28216),d=e(37055),t=e(10237);function f(B){var j=d.ZP.getHelpContentByMenuKey(),k={key:B};return t.WY.get({url:j,params:k})}var b=e(74228),m=e.n(b),w=e(1164),l=e(76466),K=e(38642);class E extends W().Component{constructor(j){var k;super(j);k=this,this.getHelpContentByMenuKey=()=>{var _=this.props.defaultMenuKey;f(_).then(X=>{var ee=X.data,re=ee.help_url,ve=ee.video_url;this.setState({videoUrl:ve,helpUrl:re})})},this.handleOpenHelpUrl=_=>{if((0,K.ve)()){window.open(_,"_blank");return}w.Z.targetTo({path:_,isExternalLink:!0})},this.handleOpenVideo=function(_){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.props.t("helpCenter.video");k.setState(ee=>({resourcePlayInfo:(0,te.Z)((0,te.Z)({},ee.resourcePlayInfo),{},{resourceInfo:{originUrl:_,source:{FD:_,OD:_},contentType:"mp4"}}),previewInfo:(0,te.Z)((0,te.Z)({},ee.previewInfo),{},{title:X,visible:!0,onCancel:k.handleCancelPreview})}))},this.handleCancelPreview=()=>{var _=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,te.Z)((0,te.Z)({},_),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:j.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var j=this.state,k=j.helpUrl,_=j.resourcePlayInfo,X=j.previewInfo,ee=j.videoUrl,re=this.props.t;return W().createElement("div",{className:m().helpCenter},ee&&W().createElement(P.Z,{type:"link",className:m()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(ee)},re("helpCenter.video")),k&&W().createElement(P.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(k)},re("helpCenter.tutorial")),W().createElement(l.Z,(0,F.Z)({},_,{previewInfo:X})))}}var O=B=>({defaultMenuKey:B.currentRoute.menuKey});E.defaultProps={defaultMenuKey:""};var H=(0,p.$j)(O)((0,N.Z)()(E));function r(B){var j=B.extra,k=localStorage.getItem("dingPersonnel"),_=sessionStorage.getItem("dingPersonnel");return W().createElement(M.Z,null,j,k!=="dingPersonnel"&&_!=="dingPersonnel"&&(0,K.eY)("COMMONEXTRA_HELP_CENTER")&&W().createElement(H,null))}var q=r,le=e(4408);function ie(B){var j=(0,$.useState)({helpCenter:(0,K.eY)("HEAD_HELP_CENTER_BUT")}),k=(0,C.Z)(j,1),_=k[0],X=B.pageContainerParams,ee=X===void 0?{}:X,re=B.noPadding,ve=re===void 0?!1:re,_e=B.isPersonal,we=_e===void 0?!1:_e,be=B.pageTitle,Ie=B.className,We=Ie===void 0?"":Ie,je={extra:_.helpCenter?W().createElement(q,{extra:ee.extra}):ee.extra},Be=(0,te.Z)((0,te.Z)({},ee),je);return W().createElement("div",{className:"page-container-content ".concat(ve?"page-container-noPadding":""," ").concat(we?"page-container-content_personal_background":""," ").concat(We)},be&&W().createElement(le.Z,{title:be}),we?W().createElement(J.Z,null,B.children):W().createElement(J.Z,Be,B.children))}var de=ie},83431:function(Oe,ae,e){"use strict";var te=e(30887),C=e(99210),$=e(22385),W=e(31097),J=e(12924),z=e.n(J),M=e(91768),F=e(57119),Y=e(28216),P=p=>{var d=p.user;return{loginMode:d.loginMode}};function N(p){var d=p.onUrge,t=p.onDing,f=p.t,b=localStorage,m=b.appType,w=f(m==="wx_app"?"component.ordinaryUrgingWxTips":m==="fs_app"?"component.ordinaryUrgingFsTips":"component.ordinaryUrgingTips");return z().createElement(C.Z,null,z().createElement(C.Z.Item,{key:"1"},z().createElement(W.Z,{title:w},z().createElement("div",{className:"urge-menu-item",onClick:d},z().createElement("span",{className:"urge-menu-item__text"},f("component.ordinaryUrging")),z().createElement(F.Z,null)))),m==="e_app"?z().createElement(C.Z.Item,{key:"2"},z().createElement(W.Z,{title:f("component.dingStudentsTips")},dd.version?z().createElement("div",{className:"urge-menu-item",onClick:t},z().createElement("span",{className:"urge-menu-item__text"},f("component.dingStudents")),z().createElement(F.Z,null)):z().createElement("div",{className:"urge-menu-item__forbidden"},z().createElement("span",{className:"urge-menu-item__text"},f("component.dingStudents")),z().createElement(F.Z,null)))):null)}ae.Z=(0,Y.$j)(P)((0,M.Z)()(N))},410:function(Oe,ae,e){"use strict";e.d(ae,{Z:function(){return Ve}});var te=e(62029),C=e(22385),$=e(31097),W=e(54029),J=e(62529),z=e(57663),M=e(71577),F=e(88986),Y=e(33565),P=e(18106),N=e(88108),p=e(12924),d=e.n(p),t=e(91768),f=e(54549),b=e(78138),m=e.n(b),w=e(28216),l=e(57068),K=e(70018),E=e(20228),O=e(11382),H=e(76586),r=e.n(H),q=e(6793),le=window.Plots.Line,ie=ne=>{var A=ne.params,L=ne.height,T=ne.t,o=(0,p.useRef)(),x=(0,p.useState)(null),i=(0,Y.Z)(x,2),c=i[0],g=i[1],I=(0,p.useState)(!0),S=(0,Y.Z)(I,2),v=S[0],Z=S[1];(0,p.useEffect)(()=>{(0,K.yZ)((0,F.Z)((0,F.Z)({},A),{},{page_number:1,page_size:30})).then(fe=>{if(fe.data.code&&fe.data.code==="200000"){var se=(fe.data.data.list||[]).reverse(),Ce=se.map(Te=>{var ce=Te.total_score;return ce}),ge={height:220,data:se,xField:"submit_time",yField:"score",point:{size:4,shape:"circle",color:"#516AE6"},yAxis:{tickCount:5,min:0,max:Math.max(...Ce)},xAxis:{tickCount:se.length<=7?se.length:7,label:{formatter:Te=>(0,q.p6)(+Te,new Date(+Te).getFullYear()===new Date().getFullYear()?"MM/dd":"yyyy/MM/dd")}},tooltip:{customContent:(Te,ce)=>{var ue=ce.length>0&&"<div class=".concat(r()["custom-content-container"],`>
                  <div class=`).concat(r().top,`>
                    <span class=`).concat(r().score,">").concat(ce[0].data.score," ").concat(T("common.examScoreUnit"),`</span>
                    `).concat(ce[0].data.score_record_type==="latest"||ce[0].data.score_record_type==="highest"?"<span class=".concat(r()["custom-content-flag"],">").concat(ce[0].data.score_record_type==="latest"?T("myExamTask.newest"):T("myExamTask.highest"),"</span>"):"",`
                  </div>
                  <div class=`).concat(r().bottom,">").concat((0,q.p6)(+ce[0].data.submit_time,new Date(+ce[0].data.submit_time).getFullYear()===new Date().getFullYear()?"MM/dd hh:mm":"yyyy/MM/dd hh:mm"),`</div>
                </div>`);return ue}},smooth:!0};g(ge)}}).finally(()=>{Z(!1)})},[A,T]);var G=()=>{var fe=o.current.chart.filteredData,se=fe.find(ce=>{var ue=ce.score_record_type;if(ue==="latest"||ue==="highest")return ce});if(se){var Ce=o.current.chart.getXY(se),ge=Ce.x,Te=Ce.y;o.current.chart.showTooltip({x:ge,y:Te})}};return d().createElement(O.Z,{spinning:v},d().createElement("div",{className:r()["record-chart-container"],style:{maxHeight:"".concat(L,"px")}},c&&!v&&d().createElement(le,(0,te.Z)({},c,{height:L-32,onReady:fe=>{o.current=fe,G(),fe.on("mouseout",()=>{G()})}}))))},de=(0,t.Z)()(ie),B=e(9121),j=e.n(B),k=e(99367),_=e(38642),X=e(67479),ee=e(1164),re=e(97593),ve=e(57338),_e=e(83107),we=e(8965),be=e.n(we),Ie=e(12968),We=e(44208),je=e(44963),Be=e.n(je);function Xe(ne){var A=ne.t,L=ne.examId,T=ne.submitId,o=ne.userId,x=(0,p.useRef)(),i=(0,w.I0)(),c=(0,p.useState)({status:"",examId:L,userId:o,submitId:T}),g=(0,Y.Z)(c,1),I=g[0],S=(0,p.useState)({total_count:0,success_count:0,fail_count:0}),v=(0,Y.Z)(S,2),Z=v[0],G=v[1];(0,p.useEffect)(()=>{(0,K.wg)({examId:L,submitId:T,userId:o}).then(ue=>{var Le=ue.data,De=Le.code,ke=Le.data;if(De==="200000"){var Re=ke.fail_count,Ne=Re===void 0?0:Re,Ye=ke.success_count,He=Ye===void 0?0:Ye,qe=ke.total_count,et=qe===void 0?0:qe;G({total_count:et,success_count:He,fail_count:Ne})}})},[L,T,o]);function fe(ue){var Le=(0,F.Z)({},ue);return(0,K.G2)(Le)}var se=()=>d().createElement(M.Z,{type:"primary",onClick:ge},A("common.exportData")),Ce=()=>{var ue=ne.t,Le=[{key:"total",name:ue("examination.faceRecognitionInExam.verifyCount"),num:Z.total_count,color:"rgb(0, 0, 0, 0.45)",backgroundColor:"#F8F9FB"},{key:"passed",name:ue("examination.faceRecognitionInExam.verifySuccess"),num:Z.success_count,color:"rgb(139, 191, 100)",backgroundColor:"rgb(139, 191, 100,0.2)"},{key:"failed",name:ue("examination.faceRecognitionInExam.verifyFailed"),num:Z.fail_count,color:"rgb(207, 60, 60)",backgroundColor:"rgb(207, 60, 60,0.2)"}];return Le.map(De=>{var ke=De.name,Re=De.num,Ne=De.color,Ye=De.backgroundColor,He=De.key;return d().createElement("span",{className:Be()["type-item"],style:{backgroundColor:Ye,color:Ne},key:He},"".concat(ke," : ").concat(Re))})};function ge(){(0,re.N)({page:"exportFaceRecognitionRecord",props:{dispatch:i,t:A},rest:{userId:o,examId:L,submitId:T},query:"?".concat(l.stringify(I)),sendType:"get"})}var Te=(0,p.useMemo)(()=>({success:{text:A("examination.faceRecognitionInExam.verifySuccess"),color:"#52C41A"},failed:{text:A("examination.faceRecognitionInExam.verifyFailed"),color:"#F5222D"}}),[A]),ce=[{title:A("examination.faceRecognitionInExam.verifyTime"),key:"check_time",render:ue=>(0,q.p6)(+ue,"yyyy-MM-dd hh:mm")},{title:A("examination.faceRecognitionInExam.verifyImg"),key:"snapshot_url",render:ue=>d().createElement(We.Z,{className:Be()["snapshot-container"],width:28,height:28,src:ue})},{title:A("examination.faceRecognitionInExam.verifyResult"),key:"result",render:ue=>d().createElement("div",{className:Be()["status-container"]},d().createElement("span",{className:Be().status,style:{backgroundColor:Te[ue].color}}),Te[ue].text)}];return d().createElement("div",{className:Be()["face-recognition-record-container"],style:ne.style},d().createElement(k.Z,{ref:x,uuid:"22A4178B-6803-9BC5-DFDB-F6CD6A90C4C8",queryParams:{columns:ce,query:fe},queryParam:I,pagination:!0,options:!1,scroll:{x:"max-content",y:"calc(100vh - 300px)"},tableAlertRender:()=>!1,headerTitle:Ce(),toolBarRender:se}))}var ze=(0,t.Z)()(Xe);function Je(ne){var A=ne.t,L=ne.drawerTitle,T=ne.onCloseDrawer,o=ne.examId,x=ne.submitId,i=ne.userId,c=()=>d().createElement("div",{className:be()["footer-container"]},d().createElement(M.Z,{type:"primary",onClick:T},A("common.close")));return d().createElement(_e.Z,(0,te.Z)({title:L,placement:"right",width:716,bodyStyle:{padding:"0 24px 16px 24px"},onClose:T,footer:c()},ne),d().createElement("div",null,ne.visible&&d().createElement(ze,{examId:o,submitId:x,userId:i})))}var Ze=(0,t.Z)()(Je),$e=N.Z.TabPane;function xe(ne){var A=ne.t,L=ne.examId,T=ne.taskId,o=ne.userId,x=ne.from,i=x===void 0?"user":x,c=ne.taskType,g=c===void 0?"all":c,I=ne.renderExamRecordTabBarExtraContent,S=ne.examRecordTabTitle,v=ne.onCancel,Z=localStorage.getItem("themeColor")||"#465dcd",G=(0,p.useRef)(),fe=(0,w.I0)(),se=(0,p.useState)({task_type:g,scene:i,examId:L,task_id:T,userId:o}),Ce=(0,Y.Z)(se,1),ge=Ce[0],Te=(0,p.useState)("examRecord"),ce=(0,Y.Z)(Te,2),ue=ce[0],Le=ce[1],De=(0,p.useState)(0),ke=(0,Y.Z)(De,2),Re=ke[0],Ne=ke[1],Ye=(0,p.useState)({examId:L,userId:o,submitId:"",visible:!1}),He=(0,Y.Z)(Ye,2),qe=He[0],et=He[1],ct=(0,p.useState)(!1),at=(0,Y.Z)(ct,2),nt=at[0],ut=at[1];(0,p.useEffect)(()=>{(0,K.et)({examId:L}).then(he=>{var me=he.data,Ge=me.data,Ae=me.code;Ae==="200000"&&ut(Ge==="true")})},[L]);var mt={pending:{text:A("myExamTask.marking"),color:"#FFB56F"},passed:{text:A("myExamTask.qualified"),color:"#52C41A"},failed:{text:A("myExamTask.unqualified"),color:"#F5222D"},full:{text:A("examination.resultStatus.full"),color:"#417DC2"}};function st(he){var me=(0,F.Z)({},he);return(0,K.yZ)(me)}var tt=()=>d().createElement(M.Z,{type:"primary",onClick:rt},A("common.exportData"));function rt(){(0,re.N)({page:"exportSubmitList",props:{dispatch:fe,t:A},rest:{planId:L,userId:o},query:"?".concat(l.stringify(ge)),sendType:"get"})}function Ct(he){var me=he.exam_result,Ge=he.show_record,Ae=he.task_id,it=he.submit_id;Ge==="true"&&me!=="pending"&&ee.Z.targetTo({path:X.W.parse({exam_id:L,user_id:i==="manage"?o:"",task_id:Ae,submit_id:it,scene:"manage"}),projectType:"student"})}var It={size:"small",showSizeChanger:!1,showTotal:he=>A("examination.allTotal",{total:he})},pt=[{title:A("examing.handoverTime"),width:"240px",key:"submit_time",render:(he,me)=>d().createElement(d().Fragment,null,d().createElement("span",null,m()(he*1).format(A("examination.dateFormate"))),(me.score_record_type==="latest"||me.score_record_type==="highest")&&d().createElement("span",{className:j()["latest-flag"]},me.score_record_type==="latest"?A("myExamTask.newest"):A("myExamTask.highest")))},{title:A("exam.examTime"),width:"100px",key:"answer_duration",render:he=>d().createElement("span",null,he?(0,_.xj)(he):"")},{title:A("examination.scoreAll"),width:"100px",key:"total_score",render:(he,me)=>d().createElement("span",null,me.total_score,"/",me.score)},{title:A("examination.scoringRate"),key:"score_rate",width:"80px",render:(he,me)=>d().createElement("span",null,me.score_rate)},{title:A("exam.examResult"),key:"exam_result",width:"100px",render:(he,me)=>{var Ge=he;return me.total_score===me.score&&(Ge="full"),d().createElement("div",null,d().createElement(J.Z,{color:mt[Ge].color,text:mt[Ge].text}))}}];i==="manage"&&pt.splice(4,0,{title:A("common.marker"),width:"100px",key:"mark_name",render:he=>{var me=he;return he==="\u7CFB\u7EDF"&&(me=A("personal.system")),d().createElement($.Z,{title:me},d().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},me||"--"))}}),pt.push({title:A("common.operate"),width:80,fixed:"right",key:"submit_id",render:(he,me)=>{var Ge=[{style:{color:me.show_record==="true"&&me.exam_result!=="pending"?Z:"#ccc",cursor:me.show_record==="true"&&me.exam_result!=="pending"?"pointer":"not-allowed"},visible:!0,label:A("examination.viewAnswerDetail"),onClick:Ae=>{Ct(Ae)}},{label:A("examination.face_recognition"),style:{color:nt?Z:"#c0c4cc",cursor:nt?"pointer":"not-allowed"},visible:!0,onClick:(Ae,it)=>{var ot=Ae.submit_id;it||et(lt=>(0,F.Z)((0,F.Z)({},lt),{},{submitId:ot,visible:!0}))},disabled:!nt,disabledTip:A("examination.recordCharts.notFaceRecognitionTip")}];return d().createElement("div",{className:j()["exam-record-operate"]},Ge.map(Ae=>{var it=Ae.visible,ot=Ae.label,lt=Ae.style,Qe=Ae.disabledTip,vt=Ae.disabled,bt=Ae.onClick;if(it)return d().createElement($.Z,{title:vt?Qe:""},d().createElement("span",{className:"".concat(lt.btns),style:lt,onClick:()=>{bt(me,vt)}},ot))}))}});var xt=()=>{et(he=>(0,F.Z)((0,F.Z)({},he),{},{visible:!1}))},Tt=he=>{var me=he.data.total*1;Ne(me)},St=(0,p.useMemo)(()=>d().createElement(de,{className:j()["record-chart-container"],params:ge,height:450}),[ge]),Pt=he=>{Le(he)},Dt=()=>{if(i!=="manage"&&ue==="examRecord")return I&&I();if(i==="manage")return d().createElement("span",{onClick:v,style:{cursor:"pointer"}},d().createElement(f.Z,null))};return d().createElement("div",null,d().createElement(N.Z,{onChange:Pt,activeKey:ue,tabBarExtraContent:Dt()},d().createElement($e,{tab:S||A("common.examRecord"),key:"examRecord"},ue==="examRecord"&&d().createElement("div",{className:j()["exam-record-wrap"]},d().createElement(k.Z,{ref:G,uuid:"0bbb3a01-9767-491d-8948-f9befe6f81ce",queryParams:{columns:pt,query:st},queryParam:ge,pagination:It,options:!1,tableAlertRender:()=>!1,scroll:{x:"max-content",y:"330px"},loadComplete:Tt,toolBarRender:i==="manage"?tt:null}))),Re>=3&&d().createElement($e,{tab:A("examination.recordCharts.title"),key:"recordChart"},ue==="recordChart"&&St)),d().createElement(Ze,(0,te.Z)({drawerTitle:A("exam.faceKnow")},qe,{onCloseDrawer:xt})))}var Ve=(0,t.Z)()(xe)},70018:function(Oe,ae,e){"use strict";e.d(ae,{TM:function(){return W},Ty:function(){return J},me:function(){return z},vU:function(){return M},NZ:function(){return F},C0:function(){return Y},r7:function(){return P},lc:function(){return N},lq:function(){return p},P8:function(){return d},yZ:function(){return t},rh:function(){return f},li:function(){return b},i3:function(){return m},G2:function(){return w},wg:function(){return l},et:function(){return K}});var te=e(81211),C=e(10237),$=e(5430);function W(E,O){var H=$.OB.examing.load(E,O);return C.WY.post({url:H})}function J(E,O){var H=$.OB.examing.save(E);return C.WY.post({url:H,data:O})}function z(E,O){var H=$.OB.examing.submit(E);return C.WY.post({url:H,data:O})}function M(E,O){var H=$.OB.examing.saveCut(E);return C.WY.post({url:H,data:O})}function F(E,O){var H=E.examId,r=E.submitId,q=E.userId,le=$.OB.parse.list({examId:H,submitId:r,userId:q});return C.WY.get({url:le,params:O})}function Y(E,O){var H=E.examId,r=E.userId,q=$.OB.parse.info({examId:H,userId:r},O);return C.WY.get({url:q,params:O})}function P(E){var O=E.key,H=O===void 0?"":O,r=E.msg,q=r===void 0?"":r,le=E.data,ie=le===void 0?{}:le;C.WY.logger({keyword:H,moduleName:"".concat(H,"-examing"),msg:q,data:ie})}function N(E){var O=E.examId,H=E.page_size,r=E.page_number,q=E.type,le=$.OB.examData.rankingList(O);return C.WY.get({url:le,params:{page_size:H,page_number:r,type:q}})}function p(E){var O=E.examId,H=E.task_id,r=E.submit_id,q=r===void 0?"":r,le=$.OB.examData.examsResult(O);return C.WY.get({url:le,params:{task_id:H,submit_id:q}})}function d(E){var O=$.OB.examData.certificateImage(E);return C.WY.get({url:O})}function t(E){var O=E.task_type,H=E.task_id,r=E.page_number,q=E.page_size,le=E.examId,ie=E.userId,de=E.scene,B=$.OB.examData.getRecordInfo(le,ie);return C.WY.get({url:B,params:{task_type:O,task_id:H,page_number:r,page_size:q,scene:de}})}function f(E){var O=E.status,H=E.scene,r=E.page_number,q=E.page_size,le=E.examId,ie=$.OB.examMarking.getMarkUser(le);return C.WY.get({url:ie,params:{status:O,scene:H,page_number:r,page_size:q}})}function b(E,O){var H=$.OB.examMarking.submitMarking(E);return C.WY.post({url:H,data:O})}function m(E,O,H){var r=$.lk.getExamFromProject(E,O);return C.WY.get({url:r,params:H})}function w(E){var O=E.examId,H=E.submitId,r=E.userId,q=(0,te.Z)(E,["examId","submitId","userId"]),le=$.OB.examData.faceRecognitionRecord({examId:O,submitId:H,userId:r});return C.WY.get({url:le,params:q})}function l(E){var O=E.examId,H=E.submitId,r=E.userId,q=$.OB.examData.faceRecognitionRecordStatistics({examId:O,submitId:H,userId:r});return C.WY.get({url:q})}function K(E){var O=E.examId,H=$.OB.examData.hasFaceSnapshot({examId:O});return C.WY.get({url:H})}},79590:function(Oe,ae,e){"use strict";e.d(ae,{Z:function(){return ie}});var te=e(12924),C=e.n(te),$=e(62029),W=e(88986),J=e(49111),z=e(19650),M=e(57663),F=e(71577),Y=e(91768),P=e(84391),N=e(28216),p=e(1657),d=e(43060),t=e(37055),f=e(10237);function b(de){return f.WY.get({url:t.ZP.lineClassStudy.getStuAttendanceInfo(de),params:{}})}var m=e(36202),w=e(6793),l=e(97593),K=e(48674),E=e(18329),O=e(60667),H=de=>{var B=de.user;return{qyShield:B.qyShield}};class r extends C().Component{constructor(B){super(B);this.onLinkDetail=j=>{this.setState({isEdit:!0,record:j})},this.onCreateQr=j=>{this.setState({qrCodeVisible:!0,qrCodeDetail:j}),b(j.id).then(k=>{var _=k.data.data.open_transfer_student;this.setState({open_transfer_student:_})})},this.onHandleCancel=()=>{this.setState({isEdit:!1})},this.onCancelImport=()=>{this.setState({importVisible:!1})},this.onExportSuccess=()=>{this.setState({importVisible:!1})},this.handleExportExcel=()=>{var j=this.props,k=j.type,_=j.taskId,X=j.projectId,ee=k==="study_plan"?_:X,re="?access_token=".concat(window.localStorage.getItem("token"),"&source_type=").concat(k,"&course_id=").concat(_);(0,l.N)({page:"signAnalysisExport",props:this.props,query:re,rest:ee})},this.handleImportExcel=()=>{this.setState({importVisible:!0})},this.getTableColumn=()=>{var j=[{title:this.props.t("practiceOperation.attendanceName"),dataIndex:"name",key:"name",fixed:"left"},{title:this.props.t("practiceOperation.outlineName"),dataIndex:"course_title",key:"course_title",render:(k,_)=>C().createElement("span",null,_.course_title||"--")},{title:this.props.t("practiceOperation.lecturer"),dataIndex:"lecturer_name",key:"lecturer_name",render:(k,_)=>{var X=_.teacher_sync_type,ee=_.teacher_sync_user_id,re=_.teacher_sync_source_type;return k&&X&&X==="inside"?C().createElement(O.Z,{dataType:"userName",value:ee,name:k,type:re}):C().createElement("span",null,k||"--")}},{title:this.props.t("practiceOperation.classStartTime"),dataIndex:"course_begin_time",key:"course_begin_time",render:(k,_)=>{var X=_.course_begin_time?(0,w.p6)(Number(_.course_begin_time),"yyyy-MM-dd hh:mm"):"--",ee=_.course_end_time?(0,w.p6)(Number(_.course_end_time),"yyyy-MM-dd hh:mm"):"--";return"".concat(X,"~").concat(ee)}},{title:this.props.t("practiceOperation.shouldArrival"),dataIndex:"should_arrive_count",key:"should_arrive_count"},{title:this.props.t("practiceOperation.actualArrival"),dataIndex:"real_arrive_count",key:"real_arrive_count"},{title:this.props.t("practiceOperation.absent"),dataIndex:"absent_count",key:"absent_count"},{title:this.props.t("practiceOperation.vacate"),dataIndex:"leave_count",key:"leave_count"},{title:this.props.t("common.operate"),fixed:"right",key:"operate",render:(k,_)=>this.renderActions({record:_})}];return j},this.renderActions=j=>{var k=j.record,_=this.props.t;return C().createElement("div",{className:"cl-table__cell-action"},C().createElement("span",{className:"cl-pointer",onClick:()=>this.onLinkDetail(k)},_("practiceOperation.attendanceView")),C().createElement("span",{className:"cl-pointer",onClick:()=>this.onCreateQr(k)},_("practiceOperation.attendanceQr")))},this.state={isEdit:!1,record:{},importVisible:!1,qrCodeVisible:!1,qrCodeDetail:{},open_transfer_student:!1}}componentDidMount(){}render(){var B=this.props,j=B.t,k=B.isLoading,_=B.prefixCls,X=B.taskId,ee=B.planStatus,re=B.taskType,ve=B.type,_e=B.list,we=_e===void 0?[]:_e,be=B.getAttendanceData,Ie=this.state,We=Ie.isEdit,je=Ie.record,Be=Ie.importVisible,Xe=Ie.qrCodeVisible,ze=Ie.qrCodeDetail,Je=Ie.open_transfer_student,Ze=we.length,$e=this.getTableColumn(),xe={mask:!0,width:700,title:j("lineClassStudy.QRCode"),footer:null,bodyStyle:{padding:0},destroyOnClose:!0,visible:Xe,onCancel:()=>this.setState({qrCodeVisible:!1})},Ve={mask:!0,width:900,title:j("practiceOperation.attendanceView"),footer:null,bodyStyle:{padding:"24px"},destroyOnClose:!0,visible:We,onCancel:()=>this.setState({isEdit:!1})};return C().createElement("section",{className:_},C().createElement(z.Z,null,C().createElement(F.Z,{type:"primary",icon:C().createElement(P.Z,null),onClick:this.handleExportExcel}," ",j("common.exportData")," "),C().createElement(F.Z,{type:"primary",disabled:ee&&ee==="unpublished"||Ze===0,onClick:this.handleImportExcel}," ",j("lineClass.batchCollection")," ")),C().createElement(m.f,{loading:k,dataSource:we,columns:$e,rowKey:ne=>ne.id,pagination:!1,tableUUID:"ea45645b-4814-4bfa-a36c-b750ef32ecac",style:{minWidth:"100%"}}),C().createElement(d.Z,{visible:Be,onExportSuccess:this.onExportSuccess,onCancel:this.onCancelImport,taskId:X,type:ve}),C().createElement(K.Z,{modalConfig:xe,detail:(0,W.Z)((0,W.Z)({},ze),{},{title:ze.course_title,sign_address:ze.address,sign_address_detail:ze.address_detail}),open_transfer_student:!Je,can_save:!1,universal:!0}),C().createElement(E.ZP,(0,$.Z)({},Ve,{visible:We,onCancel:this.onHandleCancel,onOk:this.onHandleCancel}),C().createElement("div",null,C().createElement(p.Z,{taskId:X,taskType:re,record:je,type:ve,getAttendanceData:be}))))}}r.defaultProps={prefixCls:"offline-panel__table"};var q=(0,N.$j)(H)((0,Y.Z)()(r));class le extends C().Component{constructor(B){super(B);this.state={}}render(){var B=this.props,j=B.attendanceInfo,k=B.isLoading,_=B.taskId,X=B.taskType,ee=B.type,re=B.planStatus,ve=B.getAttendanceData,_e=B.projectId;return C().createElement("div",{className:"offline-panel-tab"},C().createElement("div",{className:"offline-panel-tab-list"},C().createElement("div",{className:"offline-panel-tab-list-table"},C().createElement(q,{isLoading:k,list:j.list,taskId:_,projectId:_e,planStatus:re,taskType:X,type:ee,getAttendanceData:ve}))))}}var ie=le},74221:function(Oe,ae,e){"use strict";var te=e(13254),C=e(14277),$=e(13062),W=e(71230),J=e(89032),z=e(15746),M=e(20228),F=e(11382),Y=e(12924),P=e.n(Y),N=e(91768),p=e(65914),d=e.n(p),t=e(18329);class f extends P().Component{constructor(){super(...arguments);this.state={answerOption:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},this.onCancel=()=>{this.props.hideAssessModal()},this.renderAnswerTitle=(m,w)=>{var l=w.bgColor,K=w.name;return P().createElement("div",{className:"".concat(d()["topic-answer-title"]," ").concat(K||""),style:{backgroundColor:l}},m)},this.renderFooter=()=>P().createElement("div",null)}render(){var m=this.props,w=m.visible,l=m.t,K=m.assessDetail,E=m.loadingAssessDetail,O=K||{},H=O.evaluateName,r=O.requirement,q=O.lists,le=this.state.answerOption;return P().createElement(t.ZP,{size:"large",visible:w,bodyStyle:{padding:"24px",height:620},title:l("leftMenuLists.evaluateTask"),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},P().createElement("div",{className:d()["assess-modal"]},E?P().createElement("div",{className:d()["assess-loading"]},P().createElement(F.Z,null)):K?P().createElement("span",null,P().createElement("div",{className:d().title},H),P().createElement("div",{className:d().introduce},r),P().createElement("div",{className:d().lists},q&&q.length?q.map(ie=>P().createElement("div",{key:ie.id,className:d()["lists-row"]},P().createElement("div",{className:d()["lists-row-topic"]}," ","".concat(ie.topicTitle)," "),ie.topicType==="1"&&P().createElement("div",null,P().createElement(W.Z,{gutter:[16,16]},P().createElement(z.Z,{span:14},ie.topicOptions.length&&ie.topicOptions.map((de,B)=>P().createElement("div",{key:de.id,className:d()["topic-options"]},"".concat(le[B],": ").concat(de.name)))),P().createElement(z.Z,{span:10,style:{background:"#F8F8FA"}},P().createElement(W.Z,{style:{height:"100%"}},P().createElement(z.Z,{span:12},P().createElement("div",{className:d()["topic-select"]},this.renderAnswerTitle(l("tutorial.tutor"),{bgColor:"#516AE6",name:""}),P().createElement("div",{className:d()["topic-select-text"],title:ie.teacherSelectName},ie.teacherSelectName))),P().createElement(z.Z,{span:12},P().createElement("div",{className:"".concat(d()["topic-select"]," ").concat(d()["topic-select-right"])},this.renderAnswerTitle(l("tutorial.student"),{bgColor:"#FAAD14",name:""}),P().createElement("div",{className:d()["topic-select-text"],title:ie.studentSelectName},ie.studentSelectName))))))),ie.topicType==="2"&&P().createElement("div",{className:d()["topic-answer"]},P().createElement("div",{className:d()["topic-answer-content-teacher"]},this.renderAnswerTitle(l("tutorial.tutor"),{bgColor:"#516AE6",name:""}),P().createElement("div",{className:d()["topic-answer-text"]},ie.teacherAnswers)),P().createElement("div",null,this.renderAnswerTitle(l("tutorial.student"),{bgColor:"#FAAD14",name:""}),P().createElement("div",{className:d()["topic-answer-text"]},ie.studentAnswers))))):null)):P().createElement("div",{className:d()["assess-no-data"]},P().createElement(C.Z,null))))}}ae.Z=(0,N.Z)()(f)},45913:function(Oe,ae,e){"use strict";e.r(ae),e.d(ae,{default:function(){return Ot}});var te=e(22385),C=e(31097),$=e(59250),W=e(13013),J=e(57663),z=e(71577),M=e(34792),F=e(48086),Y=e(71194),P=e(57016),N=e(18106),p=e(88108),d=e(12924),t=e.n(d),f=e(28216),b=e(57254),m=e(91768),w=e(57068),l=e(76651),K=e(79590),E=e(62029),O=e(14781),H=e(53431),r=e(88986),q=e(88983),le=e(47933),ie=e(30887),de=e(99210),B=e(57361),j=e(43358),k=e(34041),_=e(9754),X=e.n(_),ee=e(84391),re=e(34669),ve=e(82833),_e=e(47745),we=e(48736),be=e(27049),Ie=e(67479),We=e(1164),je=ye=>({enterpriseId:ye.user.enterpriseId});class Be extends t().PureComponent{constructor(h){super(h);this.showStudyRecord=()=>{var n=this.props.record;n.studyCount<=0||this.props.showStudyRecord(n.userId,n)},this.linkToExam=()=>{var n=this.props.record;if(n.examCount>0&&n.examJoinCount>0){var a=!1;n.stage_train_vo_list.forEach(s=>{s.courseInfo.forEach(u=>{u.courseType===15&&(u.status===2||u.status===3)&&(a=!0)})}),a?We.Z.targetTo({path:Ie.W.parse({user_id:n.userId,projectId:n.planId,scene:"manage",from:"study_task"})}):this.props.linkToExamRecord(n)}},this.linkToOperationRecord=()=>{var n=this.props.record;n.totalOperationCount<=0||We.Z.targetTo({path:"/training/operation/info?taskId=".concat(n.planId,"&userId=").concat(n.userId,"&taskType=study&renderList=true&page=monitor")})},this.moreOperate=()=>{var n=this.props,a=n.record,s=n.enterpriseId,u=n.t;return t().createElement(de.Z,null,t().createElement(de.Z.Item,{disabled:!(a.examCount>0&&a.examJoinCount>0&&a.examGetScoreCount>0),key:"assigned"},t().createElement("p",{className:"cl-dropdown-menuitem",style:a.examCount>0&&a.examJoinCount>0&&a.examGetScoreCount>0?{}:{color:"rgba(0,0,0,.25)"},onClick:this.linkToExam},u("common.examRecord"))),t().createElement(de.Z.Item,{disabled:a.totalOperationCount<=0},t().createElement("p",{className:"cl-dropdown-menuitem",style:a.totalOperationCount<=0?{color:"rgba(0,0,0,.25)"}:{},onClick:this.linkToOperationRecord},u(s==="1074539867477774379"?"leftMenuLists.operationRecord2":"leftMenuLists.operationRecord"))))},this.state={}}render(){var h=this.props.record;return t().createElement("div",{className:"cl-table__cell-action"},t().createElement("a",{className:"cl-pointer ".concat(h.studyCount>0?"":"cl-disabled"),onClick:this.showStudyRecord},this.props.t("common.studyRecord")),t().createElement(be.Z,{type:"vertical"}),t().createElement(W.Z,{overlay:this.moreOperate()},t().createElement("span",{className:"cl-pointer"},this.props.t("common.more")," ",t().createElement(b.Z,null))))}}var Xe=(0,f.$j)(je)((0,m.Z)()(Be)),ze=e(18329),Je=e(55285),Ze=e(6793),$e=e(30311),xe=e(410);class Ve extends t().Component{constructor(){super(...arguments);this.state={autoWith:"auto",getExamAllGradesProps:{visible:!1,planId:"",userId:"",planTitle:""},recordInfo:{visible:!1,taskId:"",examId:"",userId:""}},this.getTableColumn=()=>{var h=this.props,n=h.taskType,a=h.list,s=a===void 0?[]:a,u=[];s[0]&&(u=s[0].stage_train_vo_list.map((U,D)=>{var V=[{title:this.props.t("study.stageProgress"),width:115,dataIndex:["stage_train_vo_list",D,"stageProgress"],key:"stageProgress",render:Q=>"".concat(Q,"%")}];return{title:U.stageName,children:V.concat(U.courseInfo.map((Q,pe)=>({title:Q.title,dataIndex:["stage_train_vo_list",D,"courseInfo",pe],key:"courseInfo",width:150,render:oe=>{if(oe.courseType===7)return t().createElement("span",null,oe.studyProgress,"%");if(oe.courseType===10){var Se=oe.operationStatus===1?this.props.t("common.pending"):oe.operationStatus===2?"".concat(this.props.t("common.reject")):oe.operationStatus===3?"".concat(this.props.t("common.completed")):this.props.t("common.ongoing");return Se}if(oe.courseType===11)return t().createElement("span",null,oe.studyProgress>=100?this.props.t("questionn.completed"):this.props.t("common.unFinish"));if(oe.courseType===6||oe.courseType===15){var Pe=this.props.t,Me=oe.status;if(Me===1)return Pe("common.ongoing");if(Me===5)return Pe("study.absent");if(Me===0)return Pe("myExamTask.absent");if(Me===4)return Pe("myExamTask.marking");if(Me===2||Me===3){var Ue=Pe(Me===2?"myExamTask.qualified":"myExamTask.unqualified"),Ee="".concat(oe.score," ").concat(Pe("common.minute"),"(").concat(Ue,")");return oe.makeupCount>1?t().createElement($e.Z,{name:Ee,onClick:()=>this.showEveryExamGrade(oe)}):Ee}}else return t().createElement("span",null,oe.studyProgress,"%")}})))}}));var y=[{title:this.props.t("study.passedOrNot"),width:this.props.lng==="en_us"?120:110,dataIndex:"qualifiedStatusName",key:"qualifiedStatusName",render:(U,D)=>{var V=D.qualifiedStatusName;return t().createElement("span",{className:"".concat(V==="\u5408\u683C"?"qualified":""," ").concat(V==="\u4E0D\u5408\u683C"?"un-qualified":"")},V)}},{title:this.props.t("course.transfer"),dataIndex:"join_type",key:"join_type",width:140,render:(U,D)=>{var V=D.join_type;return V==="transfer"?this.props.t("employeeSummary.yes"):this.props.t("employeeSummary.no")}},{title:this.props.t("common.status"),width:110,dataIndex:"taskStatusName",key:"taskStatusName"},{title:this.props.t("study.trainingProgress"),width:150,dataIndex:"process",key:"process",render:(U,D)=>{var V=D.process;return t().createElement(ve.Z,{percent:+V,size:"small",status:V>=100?"success":"normal",strokeColor:V>=100?"#58D28B":""})}},{title:this.props.t("study.studyCompleted"),width:this.props.lng==="en_us"?130:100,dataIndex:"studyCount",key:"studyCount",render:(U,D)=>{var V=D.studyCount,Q=D.studyProgress;return t().createElement("span",null,V===0?"--":"".concat(Q,"%"))}},{title:this.props.t("study.passedTime"),width:this.props.lng==="en_us"?120:88,dataIndex:"examPassCount",key:"examPassCount",render:(U,D)=>{var V=D.examPassCount;return V+this.props.t("study.examTimes")}},{title:this.props.t("employeeSummary.getScores"),width:this.props.lng==="en_us"?120:88,dataIndex:"credits",key:"credits",render:(U,D)=>{var V=D.credits;return V||"--"}},{title:this.props.t("personal.getCerti"),width:this.props.lng==="en_us"?120:88,dataIndex:"certificateName",key:"certificateName",render:(U,D)=>{var V=D.certificateName;return V||"--"}},{title:this.props.t("common.studyDuration"),dataIndex:"studyDurationStr",key:"studyDurationStr",width:110,render:(U,D)=>{var V=D.studyDurationStr;return V||"--"}},{title:this.props.t("learning.learningOfflineTrainDuration"),dataIndex:"offlineTrainDurationStr",key:"offlineTrainDurationStr",width:110},{title:this.props.t("common.examDuration"),dataIndex:"examDurationStr",key:"examDurationStr",width:90,render:(U,D)=>{var V=D.examDurationStr;return V||"--"}},{title:this.props.t("exam.examTime"),dataIndex:"examAnswersStr",key:"examAnswersStr",width:90,render:(U,D)=>{var V=D.examAnswersStr;return V||"--"}},{title:this.props.t("common.operate"),key:"operate",width:180,fixed:"right",render:(U,D)=>t().createElement(Xe,{record:D,showStudyRecord:this.props.showStudyRecord,linkToExamRecord:this.props.linkToExamRecord})}],R={title:this.props.t("study.duration"),width:306,dataIndex:"taskBeginTime",render:(U,D)=>"".concat((0,Ze.p6)(D.taskBeginTime,"yyyy-MM-dd hh:mm")," ~ ").concat((0,Ze.p6)(D.taskEndTime,"yyyy-MM-dd hh:mm"))};return n===6?(y.splice(2,0,R),y.splice(6,1)):y.splice(10,0,...u),y},this.showEveryExamGrade=h=>{var n=h.courseId,a=h.userId,s=h.title,u=h.courseType,y=h.exam_task_id;if(console.log("\u8BB0\u5F55",h),u===15){this.setState({recordInfo:{visible:!0,taskId:y,examId:n,userId:a}});return}this.setState(R=>({getExamAllGradesProps:(0,r.Z)((0,r.Z)({},R.getExamAllGradesProps),{},{visible:!0,planId:n,userId:a,planTitle:s})}))},this.hideEveryExamGrade=()=>{this.setState(h=>({getExamAllGradesProps:(0,r.Z)((0,r.Z)({},h.getExamAllGradesProps),{},{visible:!1,planId:"",userId:"",planTitle:""})}))},this.cancelEveryExamGrade=()=>{this.setState({recordInfo:{visible:!1,taskId:"",examId:"",userId:""}})}}render(){var h=this.props,n=h.isLoading,a=h.list,s=h.headerTitle,u=h.toolBarRender,y=h.t,R=this.state,U=R.getExamAllGradesProps,D=R.recordInfo,V=this.getTableColumn(this.state.autoWith);return t().createElement("div",null,t().createElement(Je.Z,{rowKey:Q=>Q.userId,columns:V,dataSource:a,loading:n,headerTitle:s(),toolBarRender:u,tableUUID:"fb47abc1-4532-4bad-a2a0-abd538f2aab3"}),t().createElement(_e.Z,(0,E.Z)({},U,{hideEveryExamGrade:this.hideEveryExamGrade})),D.visible&&t().createElement(ze.ZP,{width:860,footer:null,closable:!1,visible:D.visible,bodyStyle:{padding:"0 16px 16px 16px"},onOk:this.cancelEveryExamGrade},t().createElement(xe.Z,{onCancel:this.cancelEveryExamGrade,from:"manage",taskType:"normal",taskId:D.taskId,examId:D.examId,userId:D.userId})))}}var ne=(0,m.Z)()(Ve),A=e(37055),L=e(64262),T=e(64630),o=e(48479),x=e(98417),i=e(27763),c=e(38642),g=e(10237),I=k.Z.Option,S=ye=>{var h=ye.publicVariable,n=ye.user;return{isOpenTrainingCamp:h.isOpenTrainingCamp,qyShield:n.qyShield}};class v extends t().Component{constructor(h){var n;super(h);n=this,this.getClusterList=(0,B.Z)(X().mark(function a(){var s,u;return X().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return s={keyword:""},R.next=3,g.WY.get({url:A.ZP.OrgDialog.getClusterList(),params:s});case 3:u=R.sent,u.data&&(n.groupList=u.data.data);case 5:case"end":return R.stop()}},a)})),this.toggleFilterData=()=>{var a=this.state,s=a.score,u=a.deptId,y=a.name,R=a.postId,U=a.taskStatus,D=a.groupId,V=a.join_type,Q=a.userIds;this.props.filterData({taskStatus:U,score:s,deptId:u,name:y,postId:R,groupId:D,join_type:V,userIds:Q})},this.handleChangeStatus=a=>{var s=a.target.value;this.setState({taskStatus:s},()=>{this.toggleFilterData()})},this.handleTreeSelectChange=a=>{this.setState({deptId:a},()=>{this.toggleFilterData()})},this.handlePostSelectChange=a=>{this.setState({postId:a},()=>{this.toggleFilterData()})},this.handleChangeScoreStatus=a=>{this.setState({score:a},()=>{this.toggleFilterData()})},this.handleChangeParticipationStatus=a=>{this.setState({join_type:a},()=>{this.toggleFilterData()})},this.handleSearch=(a,s)=>{this.setState({name:s===""?a:"",userIds:s},()=>{this.toggleFilterData()})},this.inputSearch=a=>{var s=a.target.value;this.setState({name:s})},this.handleExportExcel=()=>{var a=this.state,s=a.deptId,u=a.name,y=a.taskStatus,R=a.score,U=a.postId,D=a.groupId;this.props.exportExcel({deptId:s,name:u,taskStatus:y,score:R,postId:U,groupId:D})},this.showStudyRecord=(a,s)=>{var u=this.state.taskStudyRecordConfig;u.visible=!0,u.userId=a,u.record=s,this.setState({taskStudyRecordConfig:u})},this.hiddenTaskStudyRecord=()=>{var a=this.state.taskStudyRecordConfig;a.visible=!1,this.setState({taskStudyRecordConfig:a})},this.linkToExamRecord=a=>{l.m8.push({pathname:"/training/examination/result",search:w.stringify({userId:a.userId,planId:this.props.taskId,pageFrom:"examMonitor",repeatMarking:!0})})},this.handleChooseByChange=a=>{this.setState({chooseBy:a,deptId:"",postId:"",groupId:""},()=>{this.toggleFilterData()})},this.handleChangeGroup=a=>{this.setState({groupId:a},()=>{this.toggleFilterData()})},this.exportExcelBus=a=>{var s=a.type,u=s===void 0?1:s,y=this.state,R=y.deptId,U=y.name,D=y.taskStatus,V=y.score,Q=y.postId,pe=y.groupId,oe=y.join_type;this.props.exportUserPdf({deptId:R,name:U,taskStatus:D,score:V,postId:Q,groupId:pe,type:u,join_type:oe})},this.handleRecordPdf=a=>{this.exportExcelBus({type:a})},this.renderProTableHeaderTitle=()=>{var a=this.props.t,s=this.state.whiteList;if(s.faceVideoSourceFlag){var u=t().createElement(de.Z,null,t().createElement(de.Z.Item,{key:"0"},t().createElement("div",{onClick:this.handleExportExcel,className:"span-del"},a("exam.exportLearnRecord"))),t().createElement(de.Z.Item,{key:"1"},t().createElement("div",{onClick:()=>{this.handleRecordPdf("1")},className:"span-del"},a("exam.exportLearnRecordPdf"))),t().createElement(de.Z.Item,{key:"2"},t().createElement("div",{onClick:()=>{this.handleRecordPdf("2")},className:"span-del"},a("exam.exportFaceSignPdf"))),s.exportClassStudyDetail&&t().createElement(de.Z.Item,{key:"3"},t().createElement("div",{onClick:()=>{this.handleRecordPdf("3")},className:"span-del"},a("exam.exportClassLearnPdf"))),s.exportClassLearnDetail?t().createElement(t().Fragment,null,t().createElement(de.Z.Item,{key:"4"},t().createElement("div",{onClick:()=>{this.handleRecordPdf("5")},className:"span-del"},a("exam.exportClassLearnDetail"))),t().createElement(de.Z.Item,{key:"5"},t().createElement("div",{onClick:()=>{this.handleRecordPdf("6")},className:"span-del"},a("exam.exportLearnDurationEveryDay")))):null);return t().createElement(W.Z,{overlay:u},t().createElement(z.Z,{type:"primary",icon:t().createElement(ee.Z,null)},a("common.exportData")))}return t().createElement(d.Fragment,null,t().createElement(z.Z,{type:"primary",icon:t().createElement(ee.Z,null),onClick:this.handleExportExcel}," ",a("common.exportData")," "))},this.renderProTableToolBarRender=()=>{var a=this.props,s=a.t,u=a.statusTypeCount,y=[{label:s("common.all"),keyName:"totalCount",value:0},{label:s("common.ongoing"),keyName:"underwayCount",value:1},{label:s("dashboard.completed"),keyName:"completeCount",value:2},{label:s("common.overdue"),keyName:"overdueCount",value:3}];return t().createElement("div",{className:"user-panel-monitor-filter-right"},t().createElement(le.ZP.Group,{defaultValue:0,onChange:this.handleChangeStatus,className:"user-panel-monitor-filter-right-radiogroup"},y.map((R,U)=>t().createElement(le.ZP.Button,{key:U,value:R.value},R.label,"(",u[R.keyName],")"))),t().createElement(o.Z,{onSearch:this.handleSearch,prefixCls:"user-panel-monitor-filter-search",placeholder:s("searchInputPlaceholder.userName")}))},this.state={taskStatus:0,score:0,deptId:"",postId:"",name:"",userIds:"",groupId:"",taskStudyRecordConfig:{visible:!1,userId:"",record:{},studyType:"study",onCancel:this.hiddenTaskStudyRecord},whiteList:{randomPopup:(0,c.UI)("RANDOM_POPUP_VERIFY"),faceVideoSourceFlag:(0,c.UI)("STUDYTIMELIMT_VIDEO_FACE_KNOW"),exportClassStudyDetail:(0,c.UI)("EXPORT_CLASS_STUDY_DETAIL"),exportClassLearnDetail:(0,c.UI)("EXPORT_CLASS_LEARN_DETAIL")},blackList:{getClusterListFlag:(0,c.eY)("TASK_USERPANEL_GETCLUSTER_LIST")},chooseBy:"2",join_type:""},this.chooseByList=[{value:"2",label:h.t("common.departmentLabel")},{value:"1",label:h.t("common.post")}],this.groupList=[]}componentDidMount(){var h=this.state.blackList;h.getClusterListFlag&&this.getClusterList(),this.props.dispatch({type:"publicVariable/getHasMenusPermissions",payload:{flag:"TrainingCamp"}})}render(){var h=this.state,n=h.taskStudyRecordConfig,a=h.whiteList,s=a.randomPopup,u=this.props,y=u.userMonitorInfo,R=u.pageSize,U=u.pageNumber,D=u.taskId,V=u.isLoading,Q=u.lng,pe=u.t,oe=u.isOpenTrainingCamp,Se=u.mainTaskInfo,Pe=(0,r.Z)((0,r.Z)({},A.XE.INITIAL_PAGINATION),{},{defaultPageSize:R,current:U,total:y.total,onChange:this.props.pageChange,onShowSizeChange:this.props.pageSizeChange}),Me=[{label:pe("common.all"),value:0},{label:pe("study.employeePass"),value:1},{label:pe("study.employeeUnPass"),value:2}],Ue=[{label:pe("common.all"),value:""},{label:pe("common.yes"),value:"transfer"},{label:pe("common.no"),value:"other"}];return oe&&(this.chooseByList=[{value:"2",label:pe("common.departmentLabel")},{value:"1",label:pe("common.post")},{value:"3",label:pe("component.useCluster")}]),t().createElement("div",{className:"user-panel-monitor"},t().createElement("div",{className:"user-panel-monitor-filter"},t().createElement("div",{className:"user-panel-monitor-filter-header"},t().createElement(k.Z,{className:"user-panel-monitor-filter-score cl-search-normal-width",placeholder:pe("component.pleaseChoose"),defaultValue:this.state.chooseBy,onChange:this.handleChooseByChange},this.chooseByList.map(Ee=>t().createElement(I,{value:Ee.value,key:Ee.value},Ee.label))),this.state.chooseBy==="2"?t().createElement(L.Z,{className:"user-panel-monitor-filter-dept choose-by-select cl-search-normal-width",parentId:"",checkable:!1,asyncLoad:!0,treeSelect:!0,onTreeSelectChange:this.handleTreeSelectChange}):null,this.state.chooseBy==="1"?t().createElement(T.Z,{disabled:!1,className:"user-panel-monitor-filter-dept choose-by-select cl-search-normal-width",onChange:this.handlePostSelectChange}):null,this.state.chooseBy==="3"?t().createElement(k.Z,{className:"user-panel-monitor-filter-score choose-by-select cl-search-normal-width",placeholder:pe("study.pleaseChooseGroup"),onChange:this.handleChangeGroup},this.groupList.map(Ee=>t().createElement(I,{value:Ee.id,key:Ee.id},Ee.name))):null,t().createElement(k.Z,{className:"user-panel-monitor-filter-score cl-search-normal-width",placeholder:pe("study.passedOrNot"),onChange:this.handleChangeScoreStatus},Me.map(Ee=>t().createElement(I,{value:Ee.value,key:Ee.value},Ee.label))),t().createElement(k.Z,{className:"user-panel-monitor-filter-score cl-search-normal-width",placeholder:pe("course.isTransfer"),onChange:this.handleChangeParticipationStatus},Ue.map(Ee=>t().createElement(I,{value:Ee.value,key:Ee.value},Ee.label))))),t().createElement("div",{className:"user-panel-monitor-list",ref:this.props.tableRef},t().createElement("div",{className:"user-panel-monitor-list-table"},t().createElement(ne,{lng:Q,isLoading:V,list:y.list,showStudyRecord:this.showStudyRecord,linkToExamRecord:this.linkToExamRecord,headerTitle:this.renderProTableHeaderTitle,toolBarRender:this.renderProTableToolBarRender})),y.total>R||!Pe.hideOnSinglePage?t().createElement("div",{className:"user-panel-monitor-list-pagination"},t().createElement(H.Z,Pe)):null),s?t().createElement(i.Z,(0,E.Z)({generatePdf:!0},n,{taskId:D,mainTaskInfo:Se,planType:"study"})):t().createElement(x.Z,(0,E.Z)({generatePdf:!0},n,{taskId:D,mainTaskInfo:Se})))}}var Z=(0,f.$j)(S)((0,m.Z)()(v)),G=e(88096);class fe extends t().PureComponent{constructor(h){super(h);this.linkToDetail=()=>{var n=this.props,a=n.record,s=n.taskId;a.investigate_count<=0||l.m8.push("/training/learning/management/monitor/questionnairePaper?id=".concat(a.id,"&from=studyMonitor&planId=").concat(s,"&type=study_task"))},this.handleShare=()=>{var n=this.props,a=n.record,s=n.taskId,u=a.title,y=a.id,R={title:u,from:"investigate",path:(0,c.jr)({pc_url:"/share-transit?source=studyTask&type=questionnaire&id=".concat(s,"&course_id=").concat(y),mobile_url:"/share-transit?source=studyTask&type=questionnaire&id=".concat(s,"&course_id=").concat(y),pc_type:"student",mobile_type:"h5"})};t().$share.show({detail:R})},this.state={}}render(){var h=this.props.record,n=w.parse(l.m8.location.search);return t().createElement("div",{className:"cl-table__cell-action"},t().createElement("a",{onClick:this.linkToDetail,className:"cl-pointer ".concat(h.investigate_count>0?"":"disabled")},this.props.t("study.viewStatistics")),n.planStatus==="published"?t().createElement(t().Fragment,null,t().createElement(be.Z,{type:"vertical"}),t().createElement("a",{onClick:this.handleShare,className:"cl-pointer"},this.props.t("common.share"))):null)}}fe.defaultProps={record:{}};var se=(0,m.Z)()(fe),Ce=e(36202),ge=e(60667);class Te extends t().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var h=[{title:this.props.t("study.surveyName"),dataIndex:"title",key:"id",ellipsis:"true",render:(n,a)=>{var s=a.title;return t().createElement(C.Z,{placement:"topLeft",title:s},t().createElement("div",{className:"cl-text-ellipsis"},s))}},{title:this.props.t("study.collectingResearch"),dataIndex:"investigate_count",key:"investigate_count",width:215,render:(n,a)=>a.investigate_count>0?t().createElement($e.Z,{name:a.investigate_count,onClick:()=>this.linkToDetail(a)}):a.investigate_count},{title:this.props.t("common.creator"),width:106,dataIndex:"create_user",key:"create_user",render:(n,a)=>{var s=a.creator_sync_user_id,u=a.creator_sync_source_type;return t().createElement(ge.Z,{dataType:"userName",value:s,name:n,type:u})}},{title:this.props.t("study.releaseTime"),width:164,dataIndex:"update_time",key:"update_time",render:(n,a)=>{var s=a.update_time;return(0,Ze.p6)(s,"yyyy-MM-dd hh:mm")}},{title:this.props.t("common.operate"),width:160,key:"operate",render:(n,a)=>t().createElement(se,{record:a,taskId:this.props.taskId})}];return h},this.linkToDetail=h=>{this.props.linkToDetail(h.id)}}render(){var h=this.props,n=h.isLoading,a=h.list,s=this.getTableColumn();return t().createElement(Ce.f,{style:{height:"100%",overflow:"hidden"},loading:n,dataSource:a,columns:s,rowKey:u=>u.id,pagination:!1,tableUUID:"c09edddf-a7e2-49b9-9bc7-894d94a7985a"})}}var ce=(0,m.Z)()(Te);class ue extends t().Component{constructor(h){super(h);this.linkToDetail=n=>{var a=this.props.taskId;l.m8.push({pathname:"/training/learning/management/monitor/questionnaire",search:w.stringify({taskId:a,questionnaireId:n})})},this.state={}}render(){var h=this.props,n=h.questionnaireInfo,a=h.pageSize,s=h.pageNumber,u=h.isLoading,y=h.taskId,R=(0,r.Z)((0,r.Z)({},A.XE.INITIAL_PAGINATION),{},{defaultPageSize:a,current:s,total:n.total,onChange:this.props.pageChange,onShowSizeChange:this.props.pageSizeChange});return t().createElement("div",{className:"questionnaire-panel-tab"},t().createElement("div",{className:"questionnaire-panel-tab-list"},t().createElement("div",{className:"questionnaire-panel-tab-list-table"},t().createElement(ce,{isLoading:u,list:n.list,linkToDetail:this.linkToDetail,taskId:y})),n.total>a||!R.hideOnSinglePage?t().createElement("div",{className:"questionnaire-panel-tab-list-pagination"},t().createElement(H.Z,R)):null))}}var Le=ue,De=e(33565),ke=e(18884),Re=e(35085);class Ne extends t().PureComponent{constructor(){var h;super(...arguments);h=this,this.state={qrCodeConfig:{title:this.props.t("common.share"),isProjectShare:!1,tip:""},option:{scene:"",flag:"exam_task"},modalVisible:!1,whiteList:{examShareFlag:(0,c.UI)("EXAM_TASK_SHARE_BUT")}},this.onHandleQrShare=n=>{var a=n.record,s=this.state.option;this.setState({option:(0,r.Z)((0,r.Z)({},s),{},{scene:"&flag=exam&planId=".concat(a.id)}),modalVisible:!0})},this.onExamShare=function(){var n=(0,B.Z)(X().mark(function a(s){var u,y,R,U,D,V,Q,pe,oe,Se,Pe,Me,Ue,Ee,Fe;return X().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(u=s.record,y=s.customization,!y){Ke.next=4;break}return h.onHandleQrShare({record:u}),Ke.abrupt("return");case 4:return R=u.title,U=u.id,D=l.m8.location.query.id,Ke.next=8,(0,c.Kb)((0,Re.Wl)({planId:U}));case 8:if(V=Ke.sent,Q=(0,De.Z)(V,2),pe=Q[1],oe=w.stringify({source:"studyTask",type:"exam",id:D,course_id:U}),Se={title:R,from:"exam",path:(0,c.jr)({pc_url:"/share-transit?".concat(oe),mobile_url:"/share-transit?".concat(oe),pc_type:"student",mobile_type:"h5"})},!pe){Ke.next=20;break}if(Pe=pe.data,Me=Pe.code,Ue=Pe.data,Ee=Ue.exam_duration,Fe=h.props.t,!(Me==="200000"&&Ee)){Ke.next=20;break}return t().$share.show({detail:(0,r.Z)((0,r.Z)({},Se),{},{site1:{label:Fe("exam.examTime"),value:"".concat(Ee).concat(Fe("pk.min"))}})}),Ke.abrupt("return");case 20:t().$share.show({detail:Se});case 21:case"end":return Ke.stop()}},a)}));return function(a){return n.apply(this,arguments)}}(),this.handleHiddenQrCode=()=>{this.setState({modalVisible:!1})},this.linkToMonitor=()=>{var n=this.props.record;this.props.linkToExamMonitor(n)},this.linkToMarkPaper=()=>{var n=this.props.record;n.pending_count>0&&n.reading_operation==="has_operation"&&this.props.linkToExamMarkPaper(n)},this.renderShareButton=()=>{var n=this.state.whiteList,a=this.props.record,s=n.examShareFlag,u=w.parse(l.m8.location.search);if(s)return t().createElement(t().Fragment,null,t().createElement(be.Z,{type:"vertical"}),t().createElement("span",null,t().createElement("span",{className:"cl-pointer",onClick:()=>{this.onExamShare({record:a,customization:s})}},this.props.t("common.share"))));if(u.planStatus==="published"&&(a.new_exam==="true"||a.new_exam===!0))return t().createElement(t().Fragment,null,t().createElement(be.Z,{type:"vertical"}),t().createElement("span",null,t().createElement("span",{className:"cl-pointer",onClick:()=>{this.onExamShare({record:a,customization:s})}},this.props.t("common.share"))))}}render(){var h=this.props.record,n=this.state,a=n.qrCodeConfig,s=n.modalVisible,u=n.option,y=n.whiteList;return t().createElement("div",{className:"cl-table__cell-action"},t().createElement("a",{className:"cl-pointer",onClick:this.linkToMonitor},this.props.t("common.monitor")),t().createElement(be.Z,{type:"vertical"}),t().createElement("span",{className:"".concat(h.pending_count>0&&h.reading_operation==="has_operation"?"cl-pointer":"cl-disabled"),onClick:this.linkToMarkPaper},this.props.t("trainingProject.markingPapers")),this.renderShareButton(),y.examShareFlag&&t().createElement(ke.Z,(0,E.Z)({onCancel:this.handleHiddenQrCode,visible:s,option:u},a)))}}Ne.defaultProps={record:{},linkToExamMonitor:()=>{}};var Ye=(0,m.Z)()(Ne),He=localStorage.getItem("themeColor")||"#465dcd";class qe extends t().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var h=[{title:this.props.t("exam.testName"),dataIndex:"title",width:300,key:"id",render:(n,a)=>t().createElement(C.Z,{title:a.title},t().createElement("div",{style:{color:He,width:300},className:"cl-text-ellipsis cl-pointer",onClick:()=>{this.props.linkToExamMonitor(a)}},a.title))},{title:"".concat(this.props.t("exam.examinee"),"/").concat(this.props.t("exam.passed"),"/").concat(this.props.t("exam.failed")),dataIndex:"exam_num",key:"exam_num",width:180,render:(n,a)=>{var s="".concat(a.exam_num,"/").concat(a.qualified_num,"/").concat(a.unqualified_num);return t().createElement($e.Z,{name:s,onClick:()=>this.props.linkToExamMonitor(a)})}},{title:this.props.t("exam.absent"),width:130,dataIndex:"un_exam_num",key:"un_exam_num"},{title:this.props.t("exam.toBeGraded"),width:120,dataIndex:"pending_count",key:"pending_count",render:(n,a)=>a.pending_count>0&&a.reading_operation==="has_operation"?t().createElement($e.Z,{name:a.pending_count,onClick:()=>this.props.linkToExamMarkPaper(a)}):a.pending_count},{title:"".concat(this.props.t("common.joinRate"),"/").concat(this.props.t("common.examPassRate"),"/").concat(this.props.t("common.missRate")),dataIndex:"unExamRate",key:"unExamRate",width:240,render:(n,a)=>t().createElement("div",null,t().createElement("span",null,a.join_rate),"/",t().createElement("span",null,a.qualified_rate),"/",t().createElement("span",null,a.un_exam_rate))},{title:this.props.t("exam.operate"),key:"operate",width:150,fixed:"right",render:(n,a)=>t().createElement(Ye,{record:a,linkToExamMonitor:this.props.linkToExamMonitor,linkToExamMarkPaper:this.props.linkToExamMarkPaper})}];return h}}render(){var h=this.props,n=h.isLoading,a=h.list,s=this.getTableColumn();return t().createElement(Ce.f,{style:{height:"100%",overflow:"hidden"},loading:n,dataSource:a,columns:s,rowKey:u=>u.id,pagination:!1,tableUUID:"6fc4eaf2-3fc3-4fcf-a6bd-caa478aadbac"})}}var et=(0,m.Z)()(qe),ct=e(98233);class at extends t().Component{constructor(h){var n;super(h);n=this,this.linkToExamMonitor=a=>{var s=a.id,u=a.new_exam,y=a.title,R=this.props.taskId;if(u==="true"){l.m8.push({pathname:"/training/learning/examination/newPlan/detail",search:w.stringify({id:s,taskId:R,title:y,origin:"learning"})});return}l.m8.push({pathname:"/training/learning/management/monitor/exam",search:w.stringify({id:s,taskId:R,taskType:"task"})})},this.linkToExamMarkPaper=function(){var a=(0,B.Z)(X().mark(function s(u){var y;return X().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,ct.Md)(u.new_exam==="true",{id:u.id,taskId:n.props.taskId,status:"pending",from:"projectNew"});case 2:y=U.sent,u.new_exam==="true"?We.Z.targetTo({path:y}):l.m8.push(y);case 4:case"end":return U.stop()}},s)}));return function(s){return a.apply(this,arguments)}}(),this.state={}}render(){var h=this.props,n=h.examsInfo,a=h.pageSize,s=h.pageNumber,u=h.isLoading,y=(0,r.Z)((0,r.Z)({},A.XE.INITIAL_PAGINATION),{},{defaultPageSize:a,current:s,total:n.total,onChange:this.props.pageChange,onShowSizeChange:this.props.pageSizeChange});return t().createElement("div",{className:"exam-panel-tab"},t().createElement("div",{className:"exam-panel-tab-list"},t().createElement("div",{className:"exam-panel-tab-list-table"},t().createElement(et,{isLoading:u,list:n.list,linkToExamMonitor:this.linkToExamMonitor,linkToExamMarkPaper:this.linkToExamMarkPaper})),n.total>a||!y.hideOnSinglePage?t().createElement("div",{className:"exam-panel-tab-list-pagination"},t().createElement(H.Z,y)):null))}}var nt=at,ut=e(35925),mt=e(49111),st=e(19650);function tt(ye){var h=ye.planId,n=ye.page_number,a=ye.page_size;return g.WY.get({url:A.ZP.StudyTaskList.getLearningTaskCourseListUrl(h),params:{page_number:n,page_size:a}})}var rt=e(97593);class Ct extends t().Component{constructor(h){super(h);this.initTableList=()=>{var n=this.props.planId,a=this.state.params;this.setState({isLoading:!0}),tt({planId:n,page_number:a.page_number,page_size:a.page_size}).then(s=>{this.setState({isLoading:!1,list:s.data.data.list,params:(0,r.Z)((0,r.Z)({},a),{},{total:s.data.data.total?Number(s.data.data.total):0})})}).catch(()=>{this.setState({isLoading:!1})})},this.pageChange=(n,a)=>{this.setState({params:(0,r.Z)((0,r.Z)({},this.state.params),{},{page_number:n,page_size:a})},()=>{this.initTableList()})},this.toolBarRender=()=>{},this.headerTitle=()=>{var n=this.props,a=n.t,s=n.planId;return t().createElement(st.Z,{size:"small",wrap:!0},t().createElement(z.Z,{key:"export",type:"primary",icon:t().createElement(ee.Z,null),onClick:()=>{P.Z.confirm({content:a("coursePanel.exportConfirm"),onOk:()=>{(0,rt.N)({page:"learningTaskCourseExport",rest:s,props:this.props})}})}},a("common.exportData")))},this.getTableColumns=()=>{var n=this.props.t;return[{title:n("courseManage.courseTitle"),dataIndex:"course_name",key:"course_name",width:200,ellipsis:!0},{title:n("customFields.classify"),dataIndex:"course_classify_name",key:"course_classify_name",width:200},{title:n("coursePanel.courseDuration"),dataIndex:"course_duration",key:"course_duration",width:200},{title:n("component.lecturer"),dataIndex:"lecturer_name",key:"lecturer_name",width:200,render:(a,s)=>s.type==="inside"?t().createElement(ge.Z,{dataType:"userName",value:s.lecturer_id,name:a,type:s.lecturer_type}):a},{title:n("historicRecords.courseGrade"),dataIndex:"score",key:"score",width:100},{title:n("dashboard.studyNum"),dataIndex:"study_user_count",key:"study_user_count",width:100},{title:n("marketing.completeCount"),dataIndex:"finished_user_count",key:"finished_user_count",width:100}]},this.getTable=()=>{var n=this.state,a=n.params,s=n.isLoading,u=n.list,y=this.getTableColumns(),R=(0,r.Z)((0,r.Z)({},A.XE.INITIAL_PAGINATION),{},{total:Number(a.total),current:a.page_number,pageSize:a.page_size,onChange:this.pageChange});return t().createElement(Ce.f,{columns:y,rowKey:"id",dataSource:u,pagination:R,loading:s,scroll:{x:"max-content",y:"100%"},headerTitle:this.headerTitle(),toolBarRender:this.toolBarRender,tableUUID:"C60C7B59-60A8-9636-FE3C-CBE05739F690"})},this.state={list:[],params:{keyword:"",page_number:1,page_size:10,total:0},isLoading:!0}}componentDidMount(){this.initTableList()}render(){return t().createElement("div",null,this.getTable())}}var It=(0,m.Z)()(Ct),pt=e(50361),xt=e.n(pt),Tt=e(74221);class St extends t().Component{constructor(){super(...arguments);this.state={getAssessModalProps:{visible:!1,loadingAssessDetail:!0,assessDetail:{lists:[]}}},this.onShowAssessModal=h=>{this.setState(n=>({getAssessModalProps:(0,r.Z)((0,r.Z)({},n.getAssessModalProps),{},{visible:!0})}),()=>{this.getDetail(h)})},this.dataToDetailList=h=>{var n=h.questionnaire,a=n.tutorQuestionVos,s=n.userQuestionVos,u=(0,r.Z)((0,r.Z)({},h),{},{lists:[]});return a.length&&a.forEach((y,R)=>{var U={};if(y.type==="single"){var D="",V="";if(y.options.forEach(Se=>{y.answer.other===Se.id&&(D=Se.title),Se.name=Se.title}),s.length){var Q=s[R],pe=Q.options.findIndex(Se=>Se.id===Q.answer.other);V=Q.options[pe].title}U={id:y.id,topicType:"1",topicTitle:y.title,topicOptions:xt()(y.options),teacherSelectName:D,studentSelectName:V}}else if(y.type==="input"){var oe="";s.length&&s[R]&&(oe=s[R].answer.other),U={id:y.id,topicTitle:y.title,topicType:"2",teacherAnswers:y.answer.other,studentAnswers:oe}}u.lists.push(U)}),u},this.getDetail=h=>{var n=this.state.getAssessModalProps,a=h.id,s=A.ZP.StudyTaskMonitor.getAssessDataDetail(a),u={id:a};this.setState({getAssessModalProps:(0,r.Z)((0,r.Z)({},n),{},{loadingAssessDetail:!0})}),g.WY.get({url:s,params:u}).then(y=>{var R=y.data;if(Number(R.code)===0){var U=this.dataToDetailList(R.data);this.setState({getAssessModalProps:(0,r.Z)((0,r.Z)({},n),{},{loadingAssessDetail:!1,assessDetail:U})})}else this.setState({getAssessModalProps:(0,r.Z)((0,r.Z)({},n),{},{loadingAssessDetail:!1})})}).catch(()=>{this.setState({getAssessModalProps:(0,r.Z)((0,r.Z)({},n),{},{loadingAssessDetail:!1})})})},this.getTableColumn=()=>{var h=[{title:this.props.t("common.userName"),width:this.props.lng==="en_us"?120:110,dataIndex:"userName",key:"userName"},{title:this.props.t("common.departmentLabel"),width:110,dataIndex:"department",key:"department"},{title:this.props.t("common.post"),width:150,dataIndex:"post",key:"post"},{title:this.props.t("study.assessType"),width:this.props.lng==="en_us"?130:100,dataIndex:"assessType",key:"assessType"},{title:this.props.t("study.assessName"),width:this.props.lng==="en_us"?120:88,dataIndex:"assessName",key:"assessName"},{title:this.props.t("study.assessResult"),width:this.props.lng==="en_us"?120:88,dataIndex:"assessResult",key:"assessResult",render:(n,a)=>{var s=a.assessResult;return String(s)==="true"?this.props.t("practiceReport.passedCount"):this.props.t("practiceReport.unpassCount")}},{title:this.props.t("personal.submitTime"),width:this.props.lng==="en_us"?120:88,dataIndex:"submitTime",key:"submitTime",render:(n,a)=>{var s=a.submitTime,u=a.isSelfEvaluate;return String(u)==="true"?"".concat((0,Ze.p6)(s,"yyyy-MM-dd hh:mm")):"-"}},{title:this.props.t("tutorial.evaluateTime"),width:this.props.lng==="en_us"?120:88,dataIndex:"assessTime",key:"assessTime",render:(n,a)=>{var s=a.assessTime;return"".concat((0,Ze.p6)(s,"yyyy-MM-dd hh:mm"))}},{title:this.props.t("common.operate"),key:"operate",width:161,fixed:"right",render:(n,a)=>t().createElement("div",{className:"cl-table__cell-action"},t().createElement("a",{className:"cl-pointer",onClick:()=>{this.onShowAssessModal(a)}},this.props.t("common.preview")))}];return h},this.hideAssessModal=()=>{this.setState(h=>({getAssessModalProps:(0,r.Z)((0,r.Z)({},h.getAssessModalProps),{},{visible:!1})}))}}render(){var h=this.props,n=h.isLoading,a=h.list,s=this.state.getAssessModalProps,u=this.getTableColumn();return t().createElement("div",null,t().createElement(Ce.f,{loading:n,dataSource:a,columns:u,rowKey:y=>y.id,pagination:!1,tableUUID:"2555cbea-398b-47f2-ae16-1d3edd97419a"}),t().createElement(Tt.Z,(0,E.Z)({},s,{hideAssessModal:this.hideAssessModal})))}}var Pt=(0,m.Z)()(St),Dt=ye=>{var h=ye.user;return{isOpenTrainingCamp:h.isOpenTrainingCamp}};class he extends t().Component{constructor(h){super(h);this.state={},this.groupList=[]}componentDidMount(){}render(){var h=this.props,n=h.assessInfo,a=h.isLoading,s=h.lng;return t().createElement("div",{className:"assess-panel-monitor"},t().createElement("div",{className:"assess-panel-monitor-filter"},t().createElement("div",{className:"assess-panel-monitor-filter-header"})),t().createElement("div",{className:"assess-panel-monitor-list",ref:this.props.tableRef},t().createElement("div",{className:"assess-panel-monitor-list-table"},t().createElement(Pt,{lng:s,isLoading:a,list:n}))))}}var me=(0,f.$j)(Dt)((0,m.Z)()(he)),Ge=e(11449),Ae=e(4408),it=e(83431),ot=e(54531),lt=e(32657),Qe=p.Z.TabPane,vt=ye=>({userLng:ye.user,qyShield:ye.user.qyShield});class bt extends t().Component{constructor(h){super(h);this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.getMonitorInfo=()=>{var n=this.state,a=n.taskId,s=n.userMonitorPageConfig,u=n.whiteList,y=A.ZP.StudyTaskMonitor.getTaskMonitorInfo(a),R=s.pageNumber,U=s.pageSize,D=s.departmentId,V=s.keyword,Q=s.qualifiedStatus,pe=s.taskStatus,oe=s.postId,Se=s.groupId,Pe=s.join_type,Me=s.userIds,Ue={queryTaskInfo:!0,qualifiedStatus:Q,keyword:V,taskStatus:pe,departmentId:D,postId:oe,planId:a,pageNumber:R,pageSize:U,groupId:Se,join_type:Pe,userIds:Me};u.zaraFlag&&(y=A.ZP.StudyTaskMonitor.getTaskCustomMonitorInfo(a),Ue={"plan-id":a,department_id:D,group_id:Se,post_id:oe,task_status:pe,qualified_status:Q,keyword:V,query_task_info:!0,join_type:Pe,page_number:R,page_size:U}),u.zaraFlag&&(y=A.ZP.StudyTaskMonitor.getTaskCustomMonitorInfo(a),Ue={"plan-id":a,department_id:D,group_id:Se,post_id:oe,task_status:pe,qualified_status:Q,keyword:V,query_task_info:!0,join_type:Pe,page_number:R,page_size:U}),this.setState({loadingUserMonitor:!0}),g.WY.get({url:y,params:Ue}).then(Ee=>{var Fe=Ee.data.data,ft=Fe.trainTask,Ke=Fe.totalCount,kt=Fe.underwayCount,_t=Fe.completeCount,ht=Fe.overdueCount,yt=Fe.voList,Et=Fe.authorityRange,gt=Fe.evaluationId;this.setState({loadingUserMonitor:!1,taskInfo:ft,evaluationId:gt,userMonitorInfo:{total:yt.total,list:yt.list},statusTypeCount:{totalCount:Ke,underwayCount:kt,completeCount:_t,overdueCount:ht},authScope:{visible:Et==="true"}})})},this.getQuestionnaireData=()=>{var n=this.state,a=n.taskId,s=n.questionnairePageConfig,u=s.pageNumber,y=s.pageSize,R=A.ZP.StudyTaskMonitor.getQuestionnaireData(a),U={page_number:u,page_size:y};this.setState({loadingQuestionnaire:!0}),g.WY.get({url:R,params:U}).then(D=>{this.setState({loadingQuestionnaire:!1,questionnaireInfo:{total:D.data.total,list:D.data.list}})})},this.getExamsData=()=>{var n=this.state,a=n.taskId,s=n.examsPageConfig,u=s.pageNumber,y=s.pageSize,R=A.ZP.StudyTaskMonitor.getExamsData(a),U={page_number:u,page_size:y};this.setState({loadingExam:!0}),g.WY.get({url:R,params:U}).then(D=>{this.setState({loadingExam:!1,examsInfo:{total:D.data.total,list:D.data.list}})})},this.getWorksData=()=>{var n=this.state.taskId,a=A.ZP.StudyTaskMonitor.getWorksData(),s={entity_type:"study",entity_id:n};this.setState({loadingWork:!0}),g.WY.post({url:a,data:s}).then(u=>{this.setState({loadingWork:!1,workInfo:{list:u.data.operations}})})},this.getAttendanceData=()=>{var n=this.state.taskId,a=A.ZP.StudyTaskMonitor.getAttendanceData(n),s={source_type:"study_plan"};this.setState({loadingAttendance:!0}),g.WY.get({url:a,params:s}).then(u=>{var y=u.data;y.code==="200000"&&this.setState({loadingAttendance:!1,attendanceInfo:{list:y.data}})})},this.getAssessData=()=>{var n=this.state.taskId,a=A.ZP.StudyTaskMonitor.getAssessData(n),s={source_type:"assess"};this.setState({loadingAssess:!0}),g.WY.get({url:a,params:s}).then(u=>{var y=u.data;String(y.code)==="0"?this.setState({loadingAssess:!1,assessInfo:y.data}):this.setState({loadingAssess:!1,assessInfo:[]})}).catch(()=>{this.setState({loadingAssess:!1,assessInfo:[]})})},this.handleChangeTab=n=>{this.setState({activeKey:n});var a=this.state,s=a.questionnaireInfo,u=a.examsInfo,y=a.workInfo,R=a.attendanceInfo;switch(n){case"2":this.offlineListRef&&this.offlineListRef.refreshData();break;case"3":s.list||this.getQuestionnaireData();break;case"4":u.list||this.getExamsData();break;case"5":y.list||this.getWorksData();break;case"7":R.list||this.getAttendanceData();break;case"9":this.getAssessData();break;default:break}},this.assessPageChange=n=>{var a=this.state.assessPageConfig;a.pageNumber=n,this.setState({assessPageConfig:a},()=>{this.getAssessData()})},this.assessPageSizeChange=(n,a)=>{var s=this.state.assessPageConfig;s.pageSize=a,this.setState({assessPageConfig:s},()=>{this.getAssessData()})},this.userMonitorPageChange=n=>{var a=this.state.userMonitorPageConfig;a.pageNumber=n,this.setState({userMonitorPageConfig:a},()=>{this.getMonitorInfo()})},this.userMonitorPageSizeChange=(n,a)=>{var s=this.state.userMonitorPageConfig;s.pageSize=a,this.setState({userMonitorPageConfig:s},()=>{this.getMonitorInfo()})},this.questionnairePageChange=n=>{var a=this.state.questionnairePageConfig;a.pageNumber=n,this.setState({questionnairePageConfig:a},()=>{this.getQuestionnaireData()})},this.questionnairePageSizeChange=(n,a)=>{var s=this.state.questionnairePageConfig;s.pageSize=a,this.setState({questionnairePageConfig:s},()=>{this.getQuestionnaireData()})},this.examPageChange=n=>{var a=this.state.examsPageConfig;a.pageNumber=n,this.setState({examsPageConfig:a},()=>{this.getExamsData()})},this.examPageSizeChange=(n,a)=>{var s=this.state.examsPageConfig;s.pageSize=a,this.setState({examsPageConfig:s},()=>{this.getExamsData()})},this.filterUserMonitor=n=>{var a=n.deptId,s=n.score,u=n.name,y=n.taskStatus,R=n.postId,U=n.groupId,D=n.join_type,V=n.userIds,Q=this.state.userMonitorPageConfig;Q.pageNumber=1,Q.departmentId=a!==void 0?a:Q.departmentId,Q.postId=R||"",Q.groupId=U||"",Q.qualifiedStatus=s!==void 0?s:Q.qualifiedStatus,Q.taskStatus=y!==void 0?y:Q.taskStatus,Q.keyword=u!==void 0?u:Q.keyword,Q.join_type=D||"",Q.userIds=V,this.setState({userMonitorPageConfig:Q},()=>{this.getMonitorInfo()})},this.exportUserMonitor=()=>{var n=this.state.userMonitorPageConfig;P.Z.confirm({title:this.props.t("common.tip"),content:this.props.t("study.confirmToExport"),onOk:()=>{var a=this.state.taskId,s=n.departmentId,u=n.keyword,y=n.qualifiedStatus,R=n.taskStatus,U=n.postId,D=n.groupId,V="?access_token=".concat(window.localStorage.getItem("token"),"&departmentId=").concat(s,"&postId=").concat(U)+"&planId=".concat(a,"&keyword=").concat(u,"&taskStatus=").concat(R,"&qualifiedStatus=").concat(y,"&groupId=").concat(D);(0,rt.N)({page:"learningMonitor",props:this.props,query:V,rest:{taskId:a}})}})},this.exportUserPdf=n=>{var a=n.type,s=n.join_type,u=this.state,y=u.userMonitorPageConfig,R=u.taskInfo,U="",D="";Number(a)===1?(U=this.props.t("study.confirmToExportPdf"),D="learningFaceMonitor"):Number(a)===2?(U=this.props.t("study.confirmToExportFacePdf"),D="learningFaceMonitor"):Number(a)===3?(U=this.props.t("study.confirmToExportClassPdf"),D="classLearningMonitor"):Number(a)===5?(U=this.props.t("study.confirmExportClassLearnDetail"),D="learningDetailMonitor"):Number(a)===6&&(U=this.props.t("study.confirmExportLearnDurationEveryDay"),D="learningDetailMonitor"),P.Z.confirm({title:this.props.t("common.tip"),content:U,onOk:()=>{var V=this.state.taskId,Q=y.departmentId,pe=y.keyword,oe=y.qualifiedStatus,Se=y.taskStatus,Pe=y.postId,Me=y.groupId,Ue="?access_token=".concat(window.localStorage.getItem("token"),"&department_id=").concat(Q,"&post_id=").concat(Pe)+"&plan-id=".concat(V,"&keyword=").concat(pe,"&task_status=").concat(Se,"&qualified_status=").concat(oe,"&group_id=").concat(Me,"&type=").concat(a,"&plan_name=").concat(R.trainName);[4,5].includes(Number(a))&&(Ue="".concat(Ue,"&join_type=").concat(s)),(0,rt.N)({page:D,props:this.props,query:Ue,rest:{taskId:V}})}})},this.handleUrgeUserStudy=()=>{var n=this.props.t,a=this.state.taskId;P.Z.confirm({title:n("study.remind"),content:n("study.urgeTip"),zIndex:99999,onOk:()=>{var s=A.ZP.StudyTaskList.urgeUserStudy(),u={planId:a};g.WY.get({url:s,params:u}).then(y=>{y.data.code===0?F.default.success(y.data.msg):y.data.code!==1&&F.default.error(y.data.msg)})}})},this.handleDing=()=>{var n=this.state,a=n.taskInfo,s=n.taskId,u=a.trainName,y=a.ongoingDingUserIds,R=encodeURIComponent("/pages/messageRedirect/messageRedirect?flag=study&planId=".concat(s)),U="dingtalk://dingtalkclient/action/open_micro_app?&appId=".concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(R,"&corpId=$CORPID$"),D={users:y,attachmentTitle:u,text:(0,Ze.ZT)(this.props.t("study.dingTips"),u),mobileUrl:U};(0,ot.nb)(D)},this.renderTab=()=>{var n=this.state,a=n.taskId,s=n.planStatus,u=n.taskInfo,y=n.evaluationId,R=n.activeKey,U=n.statusTypeCount,D=n.userMonitorInfo,V=n.userMonitorPageConfig,Q=n.questionnaireInfo,pe=n.questionnairePageConfig,oe=n.examsInfo,Se=n.examsPageConfig,Pe=n.workInfo,Me=n.attendanceInfo,Ue=n.assessInfo,Ee=n.loadingUserMonitor,Fe=n.loadingQuestionnaire,ft=n.loadingExam,Ke=n.loadingAttendance,kt=n.loadingAssess,_t=n.loadingWork,ht=n.blackList,yt=n.whiteList,Et=n.assessPageConfig,gt=this.props,dt=gt.userLng,Mt=gt.t,Lt=gt.qyShield;return t().createElement("div",{className:"studytask-monitor-list"},t().createElement(p.Z,{activeKey:R,onChange:this.handleChangeTab},t().createElement(Qe,{tab:this.props.t("study.monitoring"),key:"1"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement("div",null,t().createElement(Z,{lng:dt.lng,taskId:a,isLoading:Ee,statusTypeCount:U,userMonitorInfo:D,taskType:u.type,mainTaskInfo:u,pageSize:V.pageSize,pageNumber:V.pageNumber,pageChange:this.userMonitorPageChange,pageSizeChange:this.userMonitorPageSizeChange,filterData:this.filterUserMonitor,exportExcel:this.exportUserMonitor,exportUserPdf:this.exportUserPdf})))),t().createElement(Qe,{tab:Mt("coursePanel.courseStatistics"),key:"8"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement(It,{planId:a}))),ht.onsiteTrainingFlag&&t().createElement(Qe,{tab:this.props.t("study.onsiteTraining"),key:"2"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement("div",null,t().createElement(G.Z,{ref:Nt=>this.offlineListRef=Nt,taskId:a,sourceType:"study_plan"})))),ht.studySurveyFlag&&dt.qyShield==="false"&&Lt==="false"&&t().createElement(Qe,{tab:this.props.t("study.survey"),key:"3"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement("div",null,t().createElement(Le,{taskId:a,isLoading:Fe,questionnaireInfo:Q,pageNumber:pe.pageNumber,pageSize:pe.pageSize,pageChange:this.questionnairePageChange,pageSizeChange:this.questionnairePageSizeChange})))),dt.qyShield==="false"&&t().createElement(Qe,{tab:this.props.t("study.examAnalysis"),key:"4"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement("div",null,t().createElement(nt,{taskId:a,isLoading:ft,examsInfo:oe,pageSize:Se.pageSize,pageNumber:Se.pageNumber,pageChange:this.examPageChange,pageSizeChange:this.examPageSizeChange})))),ht.workAnalysisFlag&&dt.qyShield==="false"&&t().createElement(Qe,{tab:this.props.t("study.workAnalysis"),key:"5"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement("div",null,t().createElement(ut.Z,{taskId:a,taskType:"study",isLoading:_t,workInfo:Pe})))),dt.JobEvaluationOpen&&y!==0&&y!=="0"&&t().createElement(Qe,{tab:Mt("learning.jobEvaluation"),key:"6"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement("div",{style:{padding:0,background:"#f0f2f5"}},t().createElement(lt.default,{taskId:y,headerShow:!1,noPadding:!0})))),t().createElement(Qe,{tab:this.props.t("study.attendanceAnalysis"),key:"7"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement("div",null,t().createElement(K.Z,{taskId:a,planStatus:s,taskType:"attendance",isLoading:Ke,attendanceInfo:Me,getAttendanceData:this.getAttendanceData,type:"study_plan"})))),yt.zaraFlag&&t().createElement(Qe,{tab:Mt("study.assessAnalysis"),key:"9"},t().createElement("div",{className:"studytask-monitor-list-tab_container"},t().createElement("div",null,t().createElement(me,{lng:dt.lng,taskId:a,isLoading:kt,assessInfo:Ue,getAssessData:this.getAssessData,pageSize:Et.pageSize,pageNumber:Et.pageNumber,pageChange:this.assessPageChange,pageSizeChange:this.assessPageSizeChange}))))))},this.urgeButton=()=>{var n=this.props.t,a=this.state.taskInfo;return a.planStatus==="published"?t().createElement("div",{className:"task-info-button"},t().createElement(W.Z,{overlay:t().createElement(it.Z,{onUrge:this.handleUrgeUserStudy,onDing:this.handleDing})},t().createElement(z.Z,{type:"default"},this.props.t("study.remind")," ",t().createElement(b.Z,null)))):t().createElement(C.Z,{title:n("study.cantPushMsg")},t().createElement(z.Z,{type:"primary",disabled:!0},this.props.t("study.remind")," ",t().createElement(b.Z,null)))},this.state={taskInfo:{beginTime:new Date,endTime:new Date},evaluationId:0,activeKey:"1",statusTypeCount:{totalCount:0,underwayCount:0,completeCount:0,overdueCount:0},userMonitorInfo:{},userMonitorPageConfig:{pageSize:20,pageNumber:1,departmentId:"",postId:"",keyword:"",qualifiedStatus:"",taskStatus:"",groupId:""},assessPageConfig:{pageSize:20,pageNumber:1,departmentId:"",postId:"",keyword:"",qualifiedStatus:"",taskStatus:"",groupId:""},loadingUserMonitor:!1,questionnaireInfo:{},questionnairePageConfig:{pageSize:20,pageNumber:1},loadingQuestionnaire:!1,examsInfo:{},examsPageConfig:{pageSize:20,pageNumber:1},loadingExam:!1,workInfo:{},loadingWork:!1,authScope:{visible:!1},attendanceInfo:{},loadingAttendance:!1,assessInfo:[],loadingAssess:!1,blackList:{workAnalysisFlag:(0,c.eY)("TASK_MONITOR_WORK_ANALYSIS"),onsiteTrainingFlag:(0,c.eY)("TASK_MONITOR_ONSITE_TRAINING"),studySurveyFlag:(0,c.eY)("TASK_MONITOR_STUDY_SURVEY")},whiteList:{zaraFlag:(0,c.UI)("ZARA_H5")}}}componentDidMount(){var h=w.parse(l.m8.location.search);this.setState({taskId:h.id,planStatus:h.planStatus,activeKey:h.tab||"1"},this.getMonitorInfo),(0,ot.TN)()}render(){var h=this.state,n=h.taskInfo,a=h.authScope,s=this.props.t;return t().createElement(Ge.Z,{noPadding:!0,pageContainerParams:{header:{title:n.trainName,subTitle:a.visible&&t().createElement("span",{className:"task-info-title-auth"},s("common.authScopeTip"))}}},t().createElement(Ae.Z,{title:s("documentTitle.learningTaskMonitor")}),t().createElement("div",{className:"studytask-monitor"},t().createElement("div",{className:"studytask-monitor-container"},t().createElement("div",{className:"studytask-monitor-container-header"},t().createElement("div",{className:"task-info__header"},t().createElement("div",{className:"studytask-monitor-info task-info"},t().createElement("div",{className:"task-info-sub"},n.type!==6?t().createElement("span",{className:"task-info-sub-item",style:{marginRight:"32px"}},t().createElement("span",{className:"task-info-sub-item-title"},this.props.t("exam.validityPeriod")),"\uFF1A",n.type===4?"--":"".concat((0,Ze.p6)(n.beginTime,"yyyy-MM-dd hh:mm"),` ~
                              `).concat((0,Ze.p6)(n.endTime,"yyyy-MM-dd hh:mm"))):null,t().createElement("span",{className:"task-info-sub-item"},t().createElement("span",{className:"task-info-sub-item-title"},this.props.t("common.creator")),"\uFF1A",t().createElement(ge.Z,{dataType:"userName",value:n.creator_sync_user_id,name:n.createUserName,type:n.creator_source_type}))),t().createElement("div",{className:"task-info-sub"},t().createElement("span",{className:"task-info-sub-item"},t().createElement("span",{className:"task-info-sub-item-title"},this.props.t("common.passingCriteria")),"\uFF1A",n.progress>0?t().createElement("span",null,"".concat(s("learning.employeePassingCriteriaStudy")).concat(n.progress,"%")):null,n.progress>0&&n.times>0?t().createElement("span",{className:"sub-item-divide"}):null,n.times>0?t().createElement("span",null,"".concat(s("learning.employeePassingCriteriaExam")).concat(n.times).concat(s("common.examUnit"))):null,n.operationTimes>0?t().createElement("span",null,"\xA0\xA0","".concat(s("learning.learningProjectOperationProgress")).concat(n.operationTimes).concat(s("common.examUnit"))):null,n.finishEvaluation==="true"&&t().createElement("span",{className:"task-info-sub-item"},"\xA0\xA0",s("learning.completeJobEvaluation")))))),n.taskStatus===2?this.urgeButton():null)),this.renderTab()))}}var Ot=(0,f.$j)(vt)((0,m.Z)()(bt))},88096:function(Oe,ae,e){"use strict";e.d(ae,{Z:function(){return L}});var te=e(62029),C=e(14781),$=e(53431),W=e(88983),J=e(47933),z=e(34792),M=e(48086),F=e(57663),Y=e(71577),P=e(71194),N=e(57016),p=e(22385),d=e(31097),t=e(57361),f=e(88986),b=e(9754),m=e.n(b),w=e(12924),l=e.n(w),K=e(28216),E=e(84391),O=e(91768),H=e(29208),r=e.n(H),q=e(76651),le=e(27326),ie=e.n(le),de=e(61120),B=e.n(de),j=e(78138),k=e.n(j),_=e(57068),X=e(37055),ee=e(97593),re=e(10237);function ve(T){var o=T.train_type,x=T.sourceId,i=T.pageNumber,c=T.pageSize,g=T.sourceType;return re.WY.get({url:X.ZP.lineClass.getOfflineListBySourceId(x),params:{source_type:g,page_number:i,page_size:c,train_type:o}})}function _e(T){var o=T.sourceId,x=T.sourceType;return re.WY.get({url:X.ZP.lineClass.getOfflineListCountBySourceId(o),params:{source_type:x}})}var we=e(17676),be=e(38642),Ie=e(30311),We=e(16598),je=e(18329),Be=e(36202),Xe=e(17762),ze=e(83068),Je=e(83655),Ze=e(59169),$e=e(31196),xe=e(48674),Ve=e(60667),ne=T=>{var o=T.user;return{qyShield:o.qyShield}};class A extends l().Component{constructor(o){var x;super(o);x=this,this.refreshData=()=>{var i=this.state.offlinePageConfig;this.setState({offlinePageConfig:(0,f.Z)((0,f.Z)({},i),{},{pageNumber:1})},()=>{this.getOfflineData()})},this.getOfflineListCountBySourceId=(0,t.Z)(m().mark(function i(){var c,g,I,S;return m().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return c=x.props,g=c.sourceType,I=c.taskId,Z.next=3,_e({sourceId:I,sourceType:g});case 3:S=Z.sent,S.data.code==="200000"&&x.setState({listStatusNum:S.data.data});case 5:case"end":return Z.stop()}},i)})),this.getOfflineData=(0,t.Z)(m().mark(function i(){var c,g,I,S,v;return m().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return x.getOfflineListCountBySourceId(),c=x.state.offlinePageConfig,g=x.props,I=g.sourceType,S=g.taskId,x.setState({loading:!0}),G.prev=4,G.next=7,ve({sourceId:S,pageNumber:c.pageNumber,pageSize:c.pageSize,train_type:c.train_type,sourceType:I});case 7:v=G.sent,x.setState({loading:!1}),v.data.code==="200000"&&x.setState({total:v.data.data.total,list:v.data.data.list}),G.next=15;break;case 12:G.prev=12,G.t0=G.catch(4),x.setState({loading:!1});case 15:case"end":return G.stop()}},i,null,[[4,12]])})),this.handleChangeRadio=i=>{var c=i.target.value,g=this.state.offlinePageConfig;g.pageNumber=1,g.train_type=c,this.setState({offlinePageConfig:g},()=>{this.getOfflineData()})},this.offlinePageChange=(i,c)=>{var g=this.state.offlinePageConfig;g.pageNumber=i,g.pageSize=c,this.setState({offlinePageConfig:g},()=>{this.getOfflineData()})},this.handleOfflineShare=i=>{var c=this.props,g=c.taskId,I=c.t,S=i.title,v=i.lecturer_name,Z=i.offline_course_id,G={title:S,site1:{label:I("component.courseTime"),value:k()(i.begin_time).format("YYYY-MM-DD HH:mm")},site2:{label:I("common.endTime"),value:k()(i.end_time).format("YYYY-MM-DD HH:mm")},from:"offline",path:(0,be.jr)({pc_url:"/share-transit?source=studyTask&type=offlineCourse&id=".concat(g,"&course_id=").concat(Z),mobile_url:"/share-transit?source=studyTask&type=offlineCourse&id=".concat(g,"&course_id=").concat(Z),pc_type:"student",mobile_type:"h5"})};v&&(G.lecture={name:v,avatar:"",id:"",source_type:""}),l().$share.show({detail:G})},this.getTableColumn=()=>{var i=this.props.t,c=_.parse(q.m8.location.search),g=(0,be.UI)("PRINT_SIGNATURE"),I=[{title:i("lineClassStudy.lineClassName"),dataIndex:"title",key:"title",fixed:"left",render:S=>l().createElement(d.Z,{title:S||"--"},l().createElement("div",{className:"cl-text-ellipsis",style:{width:180}},S||"--"))},{title:i("component.lecturer"),width:120,dataIndex:"lecturer_name",key:"lecturer_name",render:(S,v)=>{var Z=v.teacher_sync_type,G=v.teacher_sync_user_id,fe=v.teacher_sync_source_type;return S&&Z&&Z==="inside"?l().createElement(Ve.Z,{dataType:"userName",value:G,name:S,type:fe}):l().createElement("span",null,S||"--")}},{title:i("lineClass.offlineTrainingDuration"),dataIndex:"course_duration_str",key:"course_duration_str",width:180,render:S=>S||"--"},{title:i("historicRecords.courseGrade"),dataIndex:"course_evaluate_message",key:"course_evaluate_message",width:90,render:(S,v)=>v.course_evaluate_message?v.course_evaluate_message.evaluate_name==="0"?l().createElement("span",null,v.course_evaluate_message.evaluate_name):l().createElement(Ie.Z,{name:S.evaluate_name,onClick:()=>this.handleShowCourseScore(v)}):"--"},{title:i("lecturerPage.lecturerStar"),dataIndex:"lecturer_evaluate_message",key:"lecturer_evaluate_message",width:90,render:(S,v)=>v.lecturer_evaluate_message?v.lecturer_evaluate_message.evaluate_name==="0"?l().createElement("span",null,v.lecturer_evaluate_message.evaluate_name):l().createElement(Ie.Z,{name:S.evaluate_name,onClick:()=>this.handleShowLecturerScore(v)}):"--"},{title:i("lineClass.learningNum"),dataIndex:"accomplish_amount",key:"accomplish_amount",width:90,render:S=>S||"--"},{title:i("common.overdue"),width:90,dataIndex:"overdue_amount",key:"overdue_amount"},{title:i("common.completionRate"),width:90,dataIndex:"completion_rate",key:"completion_rate"},{title:i("lineClass.assessmentOffline"),width:700,children:[{title:i("lineClass.hasBeenRecorded"),width:180,render:(S,v)=>{var Z=r()(v.offline_assessment,"have_score_amount",null);return!Z||!v.is_open_offline_assessment?"--":Z}},{title:i("lineClass.toBeRecorded"),width:180,render:(S,v)=>{var Z=r()(v.offline_assessment,"no_score_amount",null);return!Z||!v.is_open_offline_assessment?"--":Z}}]},{title:i("lineClass.trainingAttachment"),width:90,render:(S,v)=>v.training_attachment?l().createElement(Ie.Z,{name:v.training_attachment.amount,onClick:()=>this.handleShowFile(v.training_attachment.amount,v.offline_course_id,"traning")}):"--"},{title:i("lineClass.activitiesAttachment"),width:90,render:(S,v)=>v.activity_attachment?l().createElement(Ie.Z,{name:v.activity_attachment.amount,onClick:()=>this.handleShowFile(v.activity_attachment.amount,v.activity_attachment.attachment_id,"activity")}):"--"},{title:i("learning.aiTrainTime"),width:180,render:(S,v)=>v.begin_time?l().createElement("span",null,k()(v.begin_time).format("YYYY-MM-DD HH:mm"),"~",k()(v.end_time).format("YYYY-MM-DD HH:mm")):"--"},{title:i("lineClass.classAddress"),dataIndex:"address",key:"address",width:120,render:S=>l().createElement(d.Z,{title:S||"--"},l().createElement("div",{className:"cl-text-ellipsis",style:{width:120}},S||"--"))},{title:i("common.operate"),width:160,fixed:"right",key:"operate",render:(S,v)=>{var Z=[{visible:!0,title:i("common.data"),click:()=>this.jumpLineClassPage(v)},{visible:c.planStatus==="published",title:i("common.share"),click:()=>this.handleOfflineShare(v)},{visible:!0,disabled:v.train_status!=="finished"||v.status!=="published",title:i("lineClass.curriculumSettlement"),click:()=>this.classStatement(v)},{visible:!0,disabled:!(v.status==="published"||v.status==="settled"),title:i("lineClass.summaryOfCourse"),click:()=>this.handleApproval(v)},{visible:!0,title:i("lineClassStudy.QRCode"),click:()=>this.handleQRCode(v)}];return g&&Z.splice(3,0,{visible:!0,title:i("common.printSignature"),click:()=>this.handleShowPrintSignature(v.offline_course_id)}),l().createElement(We.Z,{buttons:Z})}}];return I},this.handleQRCode=i=>{this.setState({qrCodeVisible:!0,qrCodeDetail:i})},this.handleShowFile=(i,c,g)=>{!i||this.setState({fileList:{visible:!0,type:g,id:c}})},this.handleShowCourseScore=i=>{var c=i.course_evaluate_message,g=i.lecturer_id,I=i.offline_course_id;c.evaluate_type==="star"&&c.evaluate_name==="0"||this.setState({scoreDetail:{visible:!0,evaluateType:c.evaluate_type,id:c.evaluate_id,courseId:I,lecturerId:g,type:"course"}})},this.handleShowLecturerScore=i=>{var c=i.lecturer_evaluate_message,g=i.lecturer_id,I=i.offline_course_id;c.evaluate_type==="star"&&c.evaluate_name==="0"||this.setState({scoreDetail:{visible:!0,evaluateType:c.evaluate_type,id:c.evaluate_id,courseId:I,lecturerId:g,type:"lecturer"}})},this.handleCloseDialog=()=>{this.setState({scoreDetail:{visible:!1,type:""}})},this.handleApproval=i=>{var c=this.props.taskId;q.m8.push("/knowledgeBase/learningResources/lineClass/courseSummary?taskId=".concat(c,"&courseId=").concat(i.offline_course_id,"&fromType=task"))},this.jumpLineClassPage=i=>{var c=this.props,g=c.taskId,I=c.sourceType;if(I==="study_plan"){q.m8.push("/training/learning/task/lineClass/monitor?taskId=".concat(g,"&courseId=").concat(i.offline_course_id,"&sourceType=").concat(I,"&signId=").concat(i.sign_id));return}q.m8.push("/knowledgeBase/learningResources/lineClass/monitor?taskId=".concat(g,"&courseId=").concat(i.offline_course_id,"&sourceType=").concat(I,"&signId=").concat(i.sign_id))},this.classStatement=i=>{this.setState({courseStatement:{visible:!0,id:i.offline_course_id}})},this.handleCloseCourseStatement=i=>{this.setState({courseStatement:{visible:!1,id:""}}),i&&this.refreshData()},this.handleExportExcel=()=>{var i=this.state.offlinePageConfig;N.Z.confirm({title:this.props.t("common.tip"),content:this.props.t("lineClass.confirmToExport"),onOk:()=>{var c=this.props,g=c.sourceType,I=c.taskId,S="?source_type=".concat(g,"&train_type=").concat(i.train_type);(0,ee.N)({page:"offlineCourseListExport",props:this.props,query:S,rest:{taskId:I}})}})},this.handleShowPrintSignature=i=>{this.setState({signatureId:i})},this.handleHidePrintSignature=()=>{this.setState({signatureId:"",printConfig:null})},this.renderProTableHeaderTitle=()=>{var i=this.props.t;return l().createElement(w.Fragment,null,l().createElement(Y.Z,{type:"primary",icon:l().createElement(E.Z,null),onClick:this.handleExportExcel}," ",i("common.exportData")," "))},this.handlePreview=(0,t.Z)(m().mark(function i(){var c,g,I,S;return m().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(Z.prev=0,!x.printRef){Z.next=12;break}if(c=x.printRef.current,g=c.getErrorMsg(),!g){Z.next=7;break}return M.default.error(g),Z.abrupt("return");case 7:return I=x.state.signatureId,S=(0,f.Z)((0,f.Z)({},c.printOptions),{},{userIds:c.selectStudents&&c.selectStudents.map(G=>G.id).join(",")}),Z.next=11,(0,we.wq)(I,S);case 11:x.setState({printConfig:(0,f.Z)((0,f.Z)({},c.printOptions),{},{selectStudents:c.selectStudents,backContent:c.backContent})});case 12:Z.next=17;break;case 14:Z.prev=14,Z.t0=Z.catch(0),M.default.error(Z.t0);case 17:case"end":return Z.stop()}},i,null,[[0,14]])})),this.handlePrintf=()=>{this.setState({signatureId:null});var i=this.props.t,c=this.state.printConfig.selectStudents,g=navigator.appVersion,I="DingTalk";if(g.indexOf(I.toLowerCase())>-1){M.default.warn(i("printingIsNotSupported.printingIsNotSupported"));return}try{if(c){var S=document.createElement("div"),v=document.body.innerHTML,Z=document.getElementById("printContainer");c.forEach(G=>{var fe=this.generateHtml(Z,S,G),se=document.createElement("div");se.style.height="150px",S.appendChild(se),S.appendChild(fe)}),document.body.innerHTML=S.innerHTML,window.print(),document.body.innerHTML=v,window.location.reload()}}catch(G){console.error(G)}},this.generateHtml=(i,c,g)=>{var I=i.cloneNode(!0);I.id=g.id,I["data-html2canvas-ignore"]=!0;var S=this.findDomByCls(I,"studentName"),v=this.findDomByCls(I,"deptName"),Z=this.findDomByCls(I,"postName");return S.forEach(G=>{G.innerHTML=g.name}),v.forEach(G=>{G.innerHTML=g.dept_name}),Z.forEach(G=>{G.innerHTML=g.post_name}),c.appendChild(I),I.style.width="100%",I},this.handleDownloadSignature=()=>{var i=this.state.printConfig.selectStudents,c=new(ie())("p","mm","a4");if(i){var g=document.createElement("div"),I=document.getElementById("printContainer"),S=i.map((v,Z)=>{var G=this.generateHtml(I,g,v),fe=this.findDomByCls(G,"frontContentContainer");fe.map(Ce=>{Ce.style.paddingTop="200px"}),document.body.appendChild(g),g.style.width="900px";var se=new Promise(Ce=>{B()(G,{allowTaint:!0,scale:1}).then(ge=>{var Te=ge.getContext("2d"),ce=190,ue=277,Le=Math.floor(ue*ge.width/ce),De=0,ke=document.createElement("canvas");ke.width=ge.width,ke.height=Math.min(Le,ge.height-De);var Re=ce*ge.height/ge.width,Ne=(297-Re)/2;ke.getContext("2d").putImageData(Te.getImageData(0,De,ge.width,Math.min(Le,ge.height-De)),0,0),c.addImage(ke.toDataURL("image/jpeg",1),"JPEG",10,Ne,ce,Re),i.length-1!==Z&&c.addPage(),Ce(!0)})});return se});Promise.all(S).then(()=>{var v=this.state.list.find(Z=>Z.offline_course_id===this.state.signatureId);c.save("".concat(v.title,".pdf")),document.body.removeChild(g)})}},this.findDomByCls=function(i,c){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return i.className&&i.className.indexOf(c)>-1&&g.push(i),i.childNodes.forEach(I=>{x.findDomByCls(I,c,g)}),g},this.toolBarRender=()=>{var i=this.props,c=i.prefixCls,g=i.t,I=this.state.listStatusNum;return l().createElement("div",{className:"".concat(c,"__header")},l().createElement("div",{className:"".concat(c,"__header__tab-radio")},l().createElement(J.ZP.Group,{defaultValue:"",onChange:this.handleChangeRadio},l().createElement(J.ZP.Button,{value:""},g("common.all"),"\uFF08",I.totalCount||0,"\uFF09"),l().createElement(J.ZP.Button,{value:"unstarted"},g("common.notStarted"),"\uFF08",I.unstarted||0,"\uFF09"),l().createElement(J.ZP.Button,{value:"ongoing"},g("common.ongoing"),"\uFF08",I.onGoingCount||0,"\uFF09"),l().createElement(J.ZP.Button,{value:"finished"},g("common.ended"),"\uFF08",I.endCount||0,"\uFF09"))))},this.state={offlinePageConfig:{pageSize:20,pageNumber:1,train_type:""},listStatusNum:{totalCount:0,unstarted:0,onGoingCount:0,endCount:0},qrCodeVisible:!1,total:0,list:[],loading:!1,fileList:{visible:!1,type:"",id:""},courseStatement:{visible:!1,id:""},signatureId:"",printConfig:null,scoreDetail:{type:"",visible:!1},qrCodeDetail:{}},this.printRef=l().createRef()}componentDidMount(){this.refreshData()}renderPrintSignatureFooter(){var o=this.props.t,x=this.state.printConfig;return l().createElement("div",{className:"align-center"},x?l().createElement(l().Fragment,null,l().createElement(Y.Z,{onClick:()=>{this.setState({printConfig:null})}},o("common.cancel")),l().createElement(Y.Z,{type:"primary",onClick:this.handlePrintf},o("lineClassStudy.printAll")),l().createElement(Y.Z,{type:"primary",onClick:this.handleDownloadSignature},o("lineClassStudy.downloadAll"))):l().createElement(l().Fragment,null,l().createElement(Y.Z,{onClick:this.handleHidePrintSignature},o("common.cancel")),l().createElement(Y.Z,{type:"primary",onClick:this.handlePreview},o("lineClassStudy.printPreview"))))}render(){var o=this.state,x=o.total,i=o.offlinePageConfig,c=i.pageSize,g=i.pageNumber,I=o.loading,S=o.list,v=o.fileList,Z=o.courseStatement,G=o.qrCodeVisible,fe=o.scoreDetail,se=o.qrCodeDetail,Ce=o.signatureId,ge=o.printConfig,Te=this.props,ce=Te.t,ue=Te.taskId,Le=Te.sourceType,De=(0,f.Z)((0,f.Z)({},X.XE.INITIAL_PAGINATION),{},{defaultPageSize:c,current:g,total:x,onChange:this.offlinePageChange,onShowSizeChange:this.props.pageSizeChange}),ke={mask:!0,width:700,title:ce("lineClassStudy.QRCode"),footer:null,bodyStyle:{padding:0},destroyOnClose:!0,visible:G,onCancel:()=>this.setState({qrCodeVisible:!1})},Re=this.getTableColumn();return l().createElement("div",{className:"offline-list-panel"},l().createElement("div",{className:"offline-list-panel-list"},l().createElement("div",{className:"offline-list-panel-list-table"},l().createElement("section",{className:"offline-panel__table"},l().createElement(Be.f,{headerTitle:this.renderProTableHeaderTitle(),toolBarRender:this.toolBarRender,loading:I,dataSource:S,columns:Re,rowKey:Ne=>Ne.userId,pagination:!1,scroll:{x:"max-content"},tableUUID:"b5fb784c-7aaa-42dc-b57f-2b2f4eecc16f"}))),x>c||!De.hideOnSinglePage?l().createElement("div",{className:"offline-list-panel-list-pagination"},l().createElement($.Z,De)):null),l().createElement(Xe.Z,{title:v.type==="traning"?ce("lineClass.trainingAttachment"):ce("lineClass.activitiesAttachment"),visible:v.visible,fileId:v.id,onCancel:()=>{this.setState({fileList:{visible:!1,id:"",type:""}})}}),l().createElement(ze.Z,{id:Z.id,visible:Z.visible,onCancel:this.handleCloseCourseStatement}),l().createElement(je.ZP,{visible:Ce,title:ce("common.printSignature"),width:"60%",onCancel:this.handleHidePrintSignature,footer:this.renderPrintSignatureFooter()},ge?l().createElement(Ze.Z,{printConfig:ge}):l().createElement(Je.Z,{sourceType:Le,t:ce,ref:this.printRef,signId:r()(this.state.list.find(Ne=>Ne.offline_course_id===Ce),"sign_id"),courseId:Ce,taskId:ue})),l().createElement(xe.Z,{modalConfig:ke,detail:(0,f.Z)((0,f.Z)({},se),{},{id:se.sign_id,sign_address:se.course_sign_config&&se.course_sign_config.address,sign_address_detail:se.course_sign_config&&se.course_sign_config.address_detail,sign_range:se.course_sign_config&&se.course_sign_config.sign_range}),can_save:!1,universal:!0}),l().createElement($e.Z,(0,te.Z)({exportVisibleHide:!0},fe,{onCancel:this.handleCloseDialog})))}}var L=(0,K.$j)(ne)((0,O.Z)("translation",{withRef:!0})(A))},35925:function(Oe,ae,e){"use strict";e.d(ae,{Z:function(){return Y}});var te=e(12924),C=e.n(te),$=e(91768),W=e(1164),J=e(36202);class z extends C().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var N=[{title:this.props.t("practiceOperation.workTitle"),dataIndex:"title",key:"title"},{title:this.props.t("practiceOperation.shouldSubmit"),dataIndex:"total_count",key:"total_count",width:90},{title:this.props.t("practiceOperation.unsubmitted"),width:90,dataIndex:"not_submit_count",key:"not_submit_count"},{title:this.props.t("practiceOperation.submitted"),width:90,dataIndex:"already_submit_count",key:"already_submit_count"},{title:this.props.t("common.approved"),width:90,dataIndex:"pass_count",key:"pass_count"},{title:this.props.t("practiceOperation.fail"),width:90,dataIndex:"reject_count",key:"reject_count"},{title:this.props.t("personal.underReview"),width:90,dataIndex:"waiting_count",key:"waiting_count"},{title:this.props.t("common.operate"),width:120,fixed:"right",key:"operate",render:(p,d)=>this.renderActions({record:d})}];return N},this.renderActions=N=>{var p=N.record,d=this.props,t=d.t,f=d.taskId,b=d.taskType,m=d.id;return C().createElement("div",{className:"cl-table__cell-action"},C().createElement(W.Z,{to:"/training/learning/management/monitor/work?id=".concat(m,"&taskId=").concat(f,"&taskType=").concat(b,"&operationId=").concat(p.id,"&title=").concat(p.title)},C().createElement("span",{className:"cl-pointer"},t("common.viewDetails"))))}}render(){var N=this.props,p=N.isLoading,d=N.list,t=N.prefixCls,f=this.getTableColumn();return C().createElement("section",{className:t},C().createElement(J.f,{loading:p,dataSource:d,columns:f,rowKey:b=>b.id,pagination:!1,tableUUID:"ea45645b-4814-4bfa-a36c-b750ef32ecac"}))}}z.defaultProps={prefixCls:"offline-panel__table"};var M=(0,$.Z)()(z);class F extends C().Component{constructor(N){super(N);this.state={}}render(){var N=this.props,p=N.workInfo,d=N.isLoading,t=N.taskId,f=N.taskType,b=N.id,m=b===void 0?"":b;return C().createElement("div",{className:"offline-panel-tab"},C().createElement("div",{className:"offline-panel-tab-list"},C().createElement("div",{className:"offline-panel-tab-list-table"},C().createElement(M,{isLoading:d,list:p.list,id:m,taskId:t,taskType:f}))))}}var Y=F},32657:function(Oe,ae,e){"use strict";e.r(ae),e.d(ae,{default:function(){return ne}});var te=e(14781),C=e(53431),$=e(17462),W=e(1474),J=e(88986),z=e(88983),M=e(47933),F=e(57663),Y=e(71577),P=e(22385),N=e(31097),p=e(34792),d=e(48086),t=e(57361),f=e(71194),b=e(57016),m=e(47673),w=e(4107),l=e(43358),K=e(34041),E=e(9754),O=e.n(E),H=e(12924),r=e.n(H),q=e(28216),le=e(68628),ie=e(91768),de=e(57068),B=e(76651),j=e(22614),k=e(55839);class _ extends r().PureComponent{constructor(L){super(L);this.operateIconClick=(T,o)=>{var x=this.props.operateIconClick;x&&x(T,o)},this.renderOperate=()=>{var T=this.props.t,o=()=>r().createElement("span",{className:"cl-pointer",onClick:()=>{this.operateIconClick("report",this.props.record)}},T("questionn.abilityReport")),x=()=>r().createElement("a",{className:"cl-pointer",onClick:()=>{this.operateIconClick("liftingScheme",this.props.record)}},T("questionn.improvePlan")),i=()=>r().createElement("span",{className:"cl-pointer-divide"});return r().createElement("div",{className:"cl-table__cell-action"},r().createElement(o,null),r().createElement(i,null),r().createElement(x,null))},this.state={}}render(){return r().createElement("div",null,this.renderOperate())}}_.defaultProps={status:"",operateIconClick:(A,L)=>{},record:{}};var X=(0,ie.Z)()(_),ee=e(41549),re=e(6793),ve=e(55285);class _e extends r().Component{constructor(L){super(L);this.onCancel=()=>{this.setState({visible:!1})},this.onEvaluationStatus=T=>{var o=de.parse(B.m8.location.search),x=o.id;(0,k.zP)(x,T.user_id).then(i=>{this.setState({visible:!0,modalDataSource:i.data})})},this.operateIconClick=(T,o)=>{this.props.onDataTableOperateIconClick(T,o)},this.state={visible:!1,modalColumns:[{title:L.t("evaluation.assessmentDimensions"),key:"type",dataIndex:"type",render:T=>{var o="";switch(T){case"self":o=L.t("personnelDevelope.self");break;case"superior":o=L.t("personnelDevelope.evaluationSuperior");break;case"subordinate":o=L.t("evaluation.subordinate");break;case"sameLevel":o=L.t("evaluation.sameLevel");break;default:break}return o}},{title:L.t("tutorial.evaluator"),key:"name",dataIndex:"name"},{title:L.t("personnelDevelope.currentStatus"),key:"status",dataIndex:"status",render:T=>T==="finish"?L.t("personnelDevelope.quantityCompleted"):L.t("common.unFinish")},{title:L.t("personnelDevelope.updateTime"),key:"update_time",dataIndex:"update_time",render:T=>T?(0,re.p6)(T):"---"}],modalDataSource:[]},this.tableColumns=[{title:L.t("evaluationManage.evaluationStatus"),dataIndex:"status",key:"status",width:80,render:(T,o)=>{var x=de.parse(B.m8.location.search),i=x.tool_type;return i==="tool"||!i?r().createElement("span",null,T===1?L.t("questionn.completed"):L.t("common.unFinish")):r().createElement("a",{onClick:()=>{this.onEvaluationStatus(o)}},T===1?L.t("questionn.completed"):L.t("common.unFinish"))}},{title:L.t("evaluationManage.evaluationTimeComplete"),dataIndex:"commit_time",key:"commit_time",width:130,render:T=>T?(0,re.p6)(T):"--"},{title:L.t("evaluationManage.upgradeStatus"),dataIndex:"process",key:"process",width:80,render:T=>T===0?L.t("common.notStarted"):T>0&&T<100?L.t("common.ongoing"):T===100?L.t("questionn.completed"):"--"},{title:L.t("evaluationManage.upgradeCompleteTime"),dataIndex:"end_time",key:"end_time",width:120,render:T=>T?(0,re.p6)(T):"--"},{title:L.t("common.operate"),width:160,key:"operate",fixed:"right",render:(T,o)=>r().createElement(X,{status:o.status,record:o,operateIconClick:this.operateIconClick})}]}render(){var L=this.props,T=L.dataSource,o=L.loading,x=L.headerTitle,i=L.toolBarRender,c=L.t,g=this.state,I=g.visible,S=g.modalColumns,v=g.modalDataSource;return r().createElement(r().Fragment,null,r().createElement("section",{className:"PostTalentAssessment_table_container"},r().createElement(ve.Z,{dataSource:T,columns:this.tableColumns,rowKey:Z=>Z.user_id,pagination:!1,loading:o,headerTitle:x,toolBarRender:i,tableUUID:"98c9bd02-41db-4c9b-8940-b1a79b403226"})),r().createElement(ee.Z,{title:c("personnelDevelope.evaluationStatus"),visible:I,onCancel:this.onCancel,modalColumns:S,modalDataSource:v}))}}_e.defaultProps={rowSelectionChange:()=>{}};var we=A=>({lng:A.user.lng}),be=(0,q.$j)(we)((0,ie.Z)()(_e)),Ie=e(37055),We=e(4408),je=e(84874),Be=e(38642),Xe=e(61421),ze=e(56075),Je=K.Z.Option,Ze=w.Z.Search,$e=A=>({userLng:A.user}),xe={page_number:1,page_size:20,keyword:"",promote_status:null,status:""};class Ve extends r().Component{constructor(L){var T;super(L);T=this,this.handleSearch=o=>{xe.page_number=1,xe.keyword=o,this.getPeopleList()},this.handleDataTableOperateIconClick=(o,x)=>{var i=this.state.evaluationTaskDetail,c=i.version_type,g=x.plan_id,I=x.user_id;this.evaluationReportOrLiftingScheme.type=o,this.evaluationReportOrLiftingScheme.planId=g,this.evaluationReportOrLiftingScheme.userId=I,i.evaluation_tool_type!=="tool"?this.viewReportOrImprovePlan():(0,k.U1)(g,I).then(S=>{var v=S.data,Z=v.look;c==="platform"?Z==="true"?this.setState({isLookModalVisible:!0,reportRecord:x}):this.setState({evaluationReportOrLiftingSchemeModalVisible:!0,reportRecord:x}):this.viewReportOrImprovePlan(x)})},this.getPeopleList=()=>{this.setState({peopleListInfosLoading:!0});var o=this.state.taskId;(0,k.xJ)(o,xe).then(x=>{this.setState({peopleListInfos:x.data,peopleListInfosLoading:!1})}).catch(()=>{this.setState({peopleListInfos:{list:[],total:0},peopleListInfosLoading:!1})})},this.getPostTalentAssessmentDetail=o=>{(0,k.uv)(o).then(x=>{var i=x.data;this.setState({evaluationTaskDetail:i})})},this.handleEvaluationReportOrLiftingSchemeModelCancel=()=>{this.setState({evaluationReportOrLiftingSchemeModalVisible:!1})},this.evaluationReportOrLiftingSchemeModelOk=o=>{var x=this.state.reportRecord;o>0?this.viewReportOrImprovePlan(x):this.handleOpenNow()},this.handleInputSearch=o=>{var x=o.target.value;xe.page_number=1,xe.keyword=x,this.debounceSearch()},this.debounceSearch=(0,Be.Ds)(()=>{this.getPeopleList()},500),this.peopleListPageChange=o=>{xe.page_number=o,this.getPeopleList()},this.peopleListPageSizeChange=(o,x)=>{xe.page_number=1,xe.page_size=x,this.getPeopleList()},this.handleQrcode=()=>{var o=this.state.contactServiceVisible;this.setState({contactServiceVisible:!o})},this.handleOpenNow=()=>{this.setState({contactServiceVisible:!0,evaluationReportOrLiftingSchemeModalVisible:!1})},this.renderEvaluationReportOrLiftingScheme=o=>{var x=o,i=this.props.t,c=this.state.evaluationReportOrLiftingSchemeModalVisible;return r().createElement(b.Z,{title:i("questionn.warmHint"),visible:c,closable:!1,onOk:()=>{this.evaluationReportOrLiftingSchemeModelOk(x)},onCancel:this.handleEvaluationReportOrLiftingSchemeModelCancel,cancelText:i("common.cancel"),okText:x>0?i("questionn.confirmView"):i("questionn.upgradeImmediately")},r().createElement("div",{className:"evaluationReportOrLiftingSchemeModal_content"},r().createElement("p",null,"".concat(i("questionn.evaluationModalTipCanView")," 5 ").concat(i("common.unitfeng")," ").concat(i("questionn.evaluationModalTipName"))),r().createElement("p",null,"".concat(i("questionn.evaluationModalTipRemainTimes"),": ").concat(x," ").concat(i("common.times"))),r().createElement("p",null,x>0?i("questionn.evaluationModalTipUpgrade"):i("questionn.evaluationModalTipConfirmView"))))},this.renderIsLook=()=>{var o=this.props.t,x=this.state.isLookModalVisible;return r().createElement(b.Z,{title:o("questionn.warmHint"),visible:x,closable:!1,onOk:this.handleIsLookModelOk,onCancel:this.handleIsLookModelCancel,cancelText:o("common.cancel"),okText:o("common.ok")},r().createElement("div",{className:"isLookModal_content"},r().createElement("p",null,this.evaluationReportOrLiftingScheme.type==="report"?"".concat(o("questionn.isLookTipsStart")).concat(o("questionn.abilityReport")).concat(o("questionn.isLookTipsEnd")):"".concat(o("questionn.isLookTipsStart")).concat(o("questionn.improvePlan")).concat(o("questionn.isLookTipsEnd")))))},this.getAbilityInfo=o=>{(0,k.pc)(o).then(function(){var x=(0,t.Z)(O().mark(function i(c){var g,I,S,v,Z,G;return O().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return g=c.data,I=g.evaluation_dimension,S=[],v=T.props.t,I.forEach(Ce=>{switch(Ce){case"sameLevel":S.push(v("evaluation.sameLevel"));break;case"superior":S.push(v("personnelDevelope.evaluationSuperior"));break;case"subordinate":S.push(v("evaluation.subordinate"));break;case"self":S.push(v("evaluation.self"));break;default:break}}),T.setState({ability_names:g.ability_names,completed:g.evaluation_finish_info_vo.completed,total:g.evaluation_finish_info_vo.total,finish_status:g.evaluation_finish_info_vo.finish_status,evaluation_dimension:S.join("\uFF0C"),tool_type_res:g.tool_type}),se.next=8,(0,ze.IT)();case 8:Z=se.sent,G=Z.data.data,T.setState({currentUseTool:G});case 11:case"end":return se.stop()}},i)}));return function(i){return x.apply(this,arguments)}}())},this.handleIsLookModelOk=()=>{var o=this.state.reportRecord;this.viewReportOrImprovePlan(o)},this.handleIsLookModelCancel=()=>{this.setState({isLookModalVisible:!1})},this.handleChangeStatus=o=>{xe.page_number=1,xe.status=o.target.value,this.getPeopleList()},this.handleChangePromote=o=>{xe.page_number=1,xe.promote_status=o,this.getPeopleList()},this.urgeMsg=function(){var o=(0,t.Z)(O().mark(function x(i){var c,g,I;return O().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(c=T.props.t,g=T.state.taskId,I="",i!=="promote"){v.next=9;break}return v.next=6,(0,k.CG)(g);case 6:I=v.sent,v.next=13;break;case 9:if(i!=="evaluation"){v.next=13;break}return v.next=12,(0,k.wf)(g);case 12:I=v.sent;case 13:I.data.code===0&&d.default.success(c("evaluation.sendSuccess"));case 14:case"end":return v.stop()}},x)}));return function(x){return o.apply(this,arguments)}}(),this.renderLeftRow=()=>{var o=this.state,x=o.evaluationTaskDetail,i=o.taskId,c=x.version_type,g=x.end_time,I=x.term_type,S=new Date().getTime(),v=this.props.t;return r().createElement("div",{className:"content_left_beta"},r().createElement(j.Z,{isBeta:c==="platform",id:i,userIds:[],multiple:!0,btnType:"primary",tool:x.evaluation_tool_type}),I==="custom"&&g<S?null:r().createElement(Y.Z,{className:"border-button",onClick:()=>this.urgeMsg("evaluation")},v("evaluation.measurementUrge"),r().createElement(N.Z,{placement:"topLeft",title:v("evaluation.urgeText")},r().createElement(le.Z,null))),I==="custom"&&g<S?null:r().createElement(Y.Z,{className:"border-button",onClick:()=>this.urgeMsg("promote")},v("evaluation.urgedAscension"),r().createElement(N.Z,{placement:"topLeft",title:v("evaluation.urgeTextSuccess")},r().createElement(le.Z,null))))},this.renderRightRow=()=>{var o=this.props.t,x=[{label:o("common.all"),value:""},{label:o("common.unFinish"),value:"un_complete"},{label:o("questionn.completed"),value:"complete"}];return r().createElement("div",{className:"PostTalentAssessment_left_functions"},r().createElement(M.ZP.Group,{options:x,onChange:this.handleChangeStatus,value:xe.status,optionType:"button"}),r().createElement(Ze,{className:"PostTalentAssessment-search",placeholder:o("searchInputPlaceholder.userName"),onSearch:this.handleSearch,onInput:this.handleInputSearch,allowClear:!0,style:{width:272}}))},this.state={evaluationReportOrLiftingSchemeModalVisible:!1,isLookModalVisible:!1,taskId:"",peopleListInfos:{list:[],total:0},peopleListInfosLoading:!0,evaluationTaskDetail:{total:0,completed:0,course_count:15,product_name:"\u540D\u79F0",title:"\u540D\u79F0",biz_courses:[],start_time:1593761222e3,end_time:1593761225e3,version_type:"platform",is_open:"false"},contactServiceVisible:!1,ability_names:"",evaluation_dimension:"",completed:"",total:"",finish_status:!1,reportRecord:"",tool_type_res:"",currentUseTool:""},this.getPeopleListParams={page_number:1,page_size:20,keyword:"",status:""},this.evaluationReportOrLiftingScheme={type:"",planId:"",userId:""}}componentDidMount(){var L=de.parse(B.m8.location.search),T=L.id,o=this.props.headerShow?T:this.props.taskId;this.getPostTalentAssessmentDetail(o),this.getAbilityInfo(o),this.setState({taskId:o},()=>{this.getPeopleList()})}UNSAFE_componentWillReceiveProps(L){if(L.taskId!==this.props.taskId){var T=this.props.taskId;this.getPostTalentAssessmentDetail(T),this.setState({taskId:T},()=>{this.getPeopleList()})}}componentWillUnmount(){xe={page_number:1,page_size:20,keyword:"",promote_status:null,status:""}}viewReportOrImprovePlan(L){var T=L?"&finish_status=".concat(L.status):"",o=this.evaluationReportOrLiftingScheme,x=o.type,i=o.planId,c=o.userId,g=this.state.evaluationTaskDetail,I=g.version_type,S=g.evaluation_tool_type;B.m8.push("/training/questionn/postTalentAssessment/evaluationReport?planId=".concat(i,"&type=").concat(x,"&userId=").concat(c,"&isBeta=").concat(I==="platform","&toolType=").concat(S).concat(T))}render(){var L=this.props,T=L.headerShow,o=L.t,x=L.prefixCls,i=L.noPadding,c=this.state,g=c.peopleListInfos,I=c.evaluationTaskDetail,S=c.peopleListInfosLoading,v=c.contactServiceVisible,Z=c.ability_names,G=c.evaluation_dimension,fe=c.completed,se=c.total,Ce=c.finish_status,ge=de.parse(B.m8.location.search),Te=ge.tool_type,ce=ge.isNotifyTaskExp;ce=this.state.tool_type_res==="tas"&&this.state.finish_status===0&&this.state.currentUseTool==="true"?"true":"false";var ue=I.title,Le=I.create_user_name,De=I.start_time,ke=I.end_time,Re=I.version_type,Ne=I.look_count,Ye=I.is_open,He=I.term_type,qe=I.evaluation_tool_type,et=g.total,ct=g.list,at=xe,nt=at.page_number,ut=at.page_size,mt=(0,J.Z)((0,J.Z)({defaultPageSize:ut},Ie.XE.INITIAL_PAGINATION),{},{current:nt,total:et,onChange:this.peopleListPageChange,onShowSizeChange:this.peopleListPageSizeChange}),st=[{label:o("common.notStarted"),value:"un_start"},{label:o("questionn.completed"),value:"complete"},{label:o("common.ongoing"),value:"on_going"}];return r().createElement("div",{className:"".concat(x," PostTalentAssessment-monitor")},r().createElement(We.Z,{title:o("documentTitle.evaluationTaskMonitor")}),T&&r().createElement(r().Fragment,null,r().createElement("div",{className:"PostTalentAssessment-monitor-container-header"},I&&r().createElement("div",{className:"PostTalentAssessment__header"},r().createElement("div",{className:"PostTalentAssessment-info"},r().createElement("div",{className:"PostTalentAssessment-info-title"},ue),Te!=="tool"&&r().createElement("div",{className:"PostTalentAssessment-info-ability"}," ","".concat(o("personnelDevelope.assessmentCapabilityItem"),"\uFF1A").concat(Z)),r().createElement("div",{className:"PostTalentAssessment-info-sub"},He==="permanent"&&r().createElement("span",{className:"PostTalentAssessment-info-sub-item"},o("exam.validityPeriod"),"\uFF1A",o("course.permanent")),He==="custom"&&r().createElement("span",{className:"PostTalentAssessment-info-sub-item"},o("exam.validityPeriod"),"\uFF1A",(0,re.p6)(De,"yyyy-MM-dd hh:mm")," ~"," ",(0,re.p6)(ke,"yyyy-MM-dd hh:mm")),r().createElement("span",{className:"PostTalentAssessment-info-sub-item"},this.props.t("common.creator"),"\uFF1A",Le),r().createElement("span",{className:"PostTalentAssessment-info-sub-item"},o("questionn.finishedCondition"),"\uFF1A",r().createElement("span",null,"".concat(o(Ce===0?"common.unFinish":"questionn.completed"),"(").concat(fe,"/").concat(se,")"))),Te!=="tool"&&r().createElement("span",null,o("evaluation.assessmentDimensions"),"\uFF1A",G)))))),r().createElement("div",{className:"PostTalentAssessment-content",style:i?{padding:0}:{}},ce=="true"&&Te==="tool"?r().createElement(W.Z,{message:"".concat(o("evaluation.notifyTaskExpEvaluation")),banner:!0,type:"warning",showIcon:!0,closable:!0}):null,r().createElement("div",{className:"content_left"},r().createElement("div",{className:"content-row"},qe==="tool"&&Ye==="true"&&Re==="platform"&&r().createElement(r().Fragment,null,r().createElement("div",{className:"beta_button",onClick:this.handleOpenNow},r().createElement(je.Z,{iconClass:"icon-zhengshiban"}),r().createElement("span",{className:"button_text"},o("questionn.openNow")))),r().createElement(K.Z,{options:st,onChange:this.handleChangePromote,value:xe.promote_status,className:"PostTalentAssessment-select",allowClear:!0,placeholder:o("evaluationManage.pleaseSelectPromote")},st&&st.map((tt,rt)=>r().createElement(Je,{value:tt.value,key:rt.toString()},tt.label)))),qe==="tool"&&Ye==="true"&&Re==="platform"&&r().createElement("div",{className:"beta_tips"},"".concat(o("questionn.detailPageRemainTimes")," : ").concat(Ne," ").concat(o("common.unitfeng"))),r().createElement("div",{className:"content_left_container"},r().createElement("div",{className:"table_container",ref:tt=>this.tableRef=tt},r().createElement(be,{loading:S,dataSource:ct,onDataTableOperateIconClick:this.handleDataTableOperateIconClick,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow})),se>0&&r().createElement("div",{className:"pagination_container"},r().createElement(C.Z,mt))))),this.renderEvaluationReportOrLiftingScheme(Ne),this.renderIsLook(),r().createElement(Xe.Z,{visible:v,onCancel:this.handleQrcode}))}}Ve.defaultProps={prefixCls:"sticky-table"},Ve.defaultProps={headerShow:!0};var ne=(0,q.$j)($e)((0,ie.Z)()(Ve))},67479:function(Oe,ae,e){"use strict";e.d(ae,{D:function(){return F},W:function(){return P}});var te=e(57361),C=e(9754),$=e.n(C),W=e(57068),J=e(31916),z=e(38642),M=e(5430);function F(N){return Y.apply(this,arguments)}function Y(){return Y=(0,te.Z)($().mark(function N(p){var d,t,f,b,m;return $().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,J.uH)();case 3:if(d=l.sent,d!=="old"){l.next=6;break}return l.abrupt("return",!1);case 6:return l.next=8,(0,J.fP)(p);case 8:if(t=l.sent,f=t.data,b=f.code,m=f.data,b!=="200000"){l.next=14;break}return l.abrupt("return",m.exam_type==="new");case 14:l.next=20;break;case 16:return l.prev=16,l.t0=l.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",l.t0),l.abrupt("return",!1);case 20:case"end":return l.stop()}},N,null,[[0,16]])})),Y.apply(this,arguments)}var P={examing:function(){var N=(0,te.Z)($().mark(function d(t){var f,b,m;return $().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return f="",b=t.pageFrom==="ding_myExamTask"?(0,z.lz)(M.ZP.enterpriseId,"student"):"",l.next=4,F(t.exam_id);case 4:return m=l.sent,m?f="".concat(b,"/training/examination/new-exam/examing?").concat(W.stringify(t)):f="".concat(b,"/training/examination/exam/personal?").concat(W.stringify(t)),l.abrupt("return",f);case 7:case"end":return l.stop()}},d)}));function p(d){return N.apply(this,arguments)}return p}(),parse:N=>"/training/examination/new-exam/parse?".concat(W.stringify(N)),examData:N=>"/training/examination/exam-data?exam_id=".concat(N.exam_id,"&task_id=").concat(N.task_id),marking:N=>"/training/examination/new-exam/marking?".concat(W.stringify(N))}},98233:function(Oe,ae,e){"use strict";e.d(ae,{nn:function(){return M},OV:function(){return P},Md:function(){return p},uk:function(){return z}});var te=e(57361),C=e(9754),$=e.n(C),W=e(57068),J=e(67479),z={edit:t=>"/training/learning/project/add?".concat(W.stringify(t)),monitorDetail:t=>{var f=t.id,b=t.projectId,m=t.origin,w=t.tab;return"/training/trainingProject/monitor?id=".concat(f,"&projectId=").concat(b,"&origin=").concat(m,"&tab=").concat(w)},traineeView:t=>"/training/trainingProject/traineeView?".concat(W.stringify(t)),manageView:t=>"/training/trainingProject/manageView?".concat(W.stringify(t)),previewView:t=>"/training/trainingProject/previewView?".concat(W.stringify(t))};function M(t){var f=t.origin,b=t.search,m=b===void 0?"":b,w={project:"/knowledgeBase/project/examination/newPlan/detail?".concat(m),learning:"/training/learning/examination/newPlan/detail?".concat(m),employee:"/training/employee/examination/newPlan/detail?".concat(m),exam:"/training/examination/newPlan/detail?".concat(m)};return w[f]||"/training/examination/newPlan/detail?".concat(m)}function F(t,f){if(t){var b=W.stringify({id:f.id,title:f.title,origin:f.taskType,taskId:f.projectId});return M({origin:f.taskType,search:b})}var m=W.stringify({id:f.id,taskId:f.taskId,from:f.from,taskType:f.taskType,projectId:f.projectId});return"/training/learning/project/monitor/exam?".concat(m)}function Y(t,f){return t?J.W.marking({exam_id:f.id,status:f.status,markScene:"manage"}):"/training/examination/plan/testPaper?id=".concat(f.id,"&from=").concat(f.from,"&taskId=").concat(f.taskId)}function P(){return N.apply(this,arguments)}function N(){return N=(0,te.Z)($().mark(function t(){var f,b,m,w=arguments;return $().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(f=w.length>0&&w[0]!==void 0?w[0]:"unKnow",b=w.length>1?w[1]:void 0,f!=="unKnow"){K.next=7;break}return K.next=5,(0,J.D)(b.id);case 5:return m=K.sent,K.abrupt("return",F(m,b));case 7:return K.abrupt("return",F(f,b));case 8:case"end":return K.stop()}},t)})),N.apply(this,arguments)}function p(){return d.apply(this,arguments)}function d(){return d=(0,te.Z)($().mark(function t(){var f,b,m,w=arguments;return $().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(f=w.length>0&&w[0]!==void 0?w[0]:"unKnow",b=w.length>1?w[1]:void 0,f!=="unKnow"){K.next=7;break}return K.next=5,(0,J.D)(b.id);case 5:return m=K.sent,K.abrupt("return",Y(m,b));case 7:return K.abrupt("return",Y(f,b));case 8:case"end":return K.stop()}},t)})),d.apply(this,arguments)}}}]);
