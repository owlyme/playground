(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8158],{4408:function(we,re,i){"use strict";var F=i(12924),P=i.n(F),G=i(28216),C=i(17780),H=i(38642),S=b=>({userInfo:b.user}),R=b=>{var f=b.title;return(0,C.xX)()&&setTimeout(()=>{document.title=f},0),(0,F.useEffect)(()=>{if(f&&document.title!==f&&setTimeout(()=>{document.title=f},0),(0,H.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var p=document.querySelector(".zoom-report");p&&(p.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[f]),P().createElement(P().Fragment,null)};R.defautProps={title:""},re.Z=(0,G.$j)(S)(R)},76343:function(we,re,i){"use strict";var F=i(71194),P=i(57016),G=i(57361),C=i(88986),H=i(57663),S=i(71577),R=i(34792),b=i(48086),f=i(9754),p=i.n(f),k=i(12924),V=i.n(k),l=i(91768),Y=i(96120),A=i.n(Y),W=i(24144);class Q extends k.PureComponent{constructor(){super(...arguments);this.state={src:null,crop:{unit:"%",width:80,height:80,x:10,y:10,aspect:16/9},imgBold:{},fileName:"",imgType:"image/jpg"},this.onSelectFile=w=>{if(w.target.files&&w.target.files.length>0){var L=new FileReader,D=w.target.files[0];L.addEventListener("load",()=>{this.setState({src:L.result,fileName:D.name,imgType:D.type})}),L.readAsDataURL(D)}},this.onImageLoaded=w=>{this.imageRef=w},this.onCropComplete=w=>{this.makeClientCrop(w)},this.onCropChange=w=>{this.setState({crop:w})},this.onOk=()=>{var w=this.state,L=w.imgBold,D=w.imgType,E=new File([L],L.name,{type:D}),T=new FormData;T.append("file",E),T.append("access_token",localStorage.getItem("token")),(0,W.ws)(T).then(z=>{z.data.code===0&&(this.props.isShowMsg&&b.default.success("".concat(this.props.t("course.courseDetailCoverSuccess"))),this.handleSuccessUpload(z.data))}).catch(z=>{var M=this.props.onUploadFailed;M&&M({error:z,data:{fileList:[{fileName:E.name}]}})})},this.handleSuccessUpload=w=>{var L=this.props.onOk,D=w.data,E=D.fileNewName,T=D.server,z=D.fileName,M="".concat(T,"/").concat(E);L({fileName:z,imgUrl:M,fileNewName:E})},this.renderFooter=()=>{var w=this.props,L=w.prefixCls,D=w.t,E=w.accept,T="".concat(L,"__upload");return V().createElement("div",{className:"".concat(L,"__footer")},V().createElement(S.Z,{type:"default",className:T},D("component.reUpload"),V().createElement("input",{type:"file",multiple:!1,accept:E,onChange:this.onSelectFile})),V().createElement(S.Z,{type:"primary",onClick:this.onOk},D("common.ok")))}}componentDidMount(){var w=this.props,L=w.file,D=w.widthScale,E=w.heightScale,T=this.state.crop,z=new FileReader;z.readAsDataURL(L),z.addEventListener("load",()=>{this.setState({src:z.result,crop:(0,C.Z)((0,C.Z)({},T),{},{aspect:D/E}),fileName:L.name,imgType:L.type})})}getCroppedImg(w,L,D){var E=this.state.imgType,T=this.props.quality,z=document.createElement("canvas"),M=w.naturalWidth/w.width,U=w.naturalHeight/w.height;T?(z.width=L.width*M,z.height=L.height*M):(z.width=L.width,z.height=L.height);var B=z.getContext("2d");return B.drawImage(w,L.x*M,L.y*U,L.width*M,L.height*U,0,0,z.width,z.height),new Promise((te,le)=>{z.toBlob(de=>{if(!de){le(new Error("Canvas is empty"));return}de.name=D,window.URL.revokeObjectURL(this.fileUrl),this.fileUrl=window.URL.createObjectURL(de),this.setState({imgBold:de}),te(this.fileUrl)},E,T)})}makeClientCrop(w){var L=this;return(0,G.Z)(p().mark(function D(){return p().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(L.imageRef&&w.width&&w.height)){T.next=3;break}return T.next=3,L.getCroppedImg(L.imageRef,w,L.state.fileName);case 3:case"end":return T.stop()}},D)}))()}render(){var w=this.state,L=w.crop,D=w.src,E=this.props,T=E.visible,z=E.prefixCls,M=E.onCancel;return V().createElement(P.Z,{className:z,title:"\u8C03\u6574\u5C3A\u5BF8",visible:T,footer:this.renderFooter(),width:623,onCancel:M},V().createElement("div",{className:"".concat(z,"__container")},V().createElement("div",{className:"".concat(z,"__container__crop")},D&&V().createElement(A(),{className:"".concat(z,"__crop"),src:D,crop:L,ruleOfThirds:!0,keepSelection:!0,imageStyle:{width:"100%"},onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}))))}}Q.defaultProps={prefixCls:"img-corp-modal",visible:!1,widthScale:16,heightScale:9,sizeLimit:1,sizeLimitUnit:"MB",accept:"image/jpg,image/jpeg,image/png",isShowMsg:!1,onCancel:()=>{},onOk:()=>{}},re.Z=(0,l.Z)()(Q)},1164:function(we,re,i){"use strict";var F=i(12924),P=i.n(F),G=i(76651),C=i(38642),H=i(91302),S=R=>{var b=navigator.userAgent.toLocaleLowerCase(),f=localStorage.getItem("enterpriseId"),p=(0,C.lz)(f,R.projectType),k=localStorage.getItem("dingPersonnel"),V=H.bl.includes(k),l=R.target;function Y(A){if(l==="self"&&(A.preventDefault(),G.m8.push(R.to)),V){if(R.projectType==="student"){window.location.href="".concat(p,"/").concat(R.to);return}G.m8.push(R.to);return}if(dd.version){A.preventDefault();var W="";R.to.includes("?")?W="".concat(p).concat(R.to,"&ddtab=true"):W="".concat(p).concat(R.to,"?ddtab=true"),dd.biz.util.openLink({url:W})}else b.indexOf("lark")!==-1&&(window.location.href="".concat(p).concat(R.to))}return P().createElement("a",{rel:"noreferrer",href:"".concat(R.projectType==="student"?"".concat(p).concat(R.to):"#".concat(R.to)),className:"".concat(R.wrapCls," cl-pointer"),target:b.indexOf("lark")!==-1||V?"_self":R.target||"_blank",onClick:Y},R.children)};S.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},S.targetTo=R=>{var b=R.path,f=R.from,p=R.isExternalLink,k=p===void 0?!1:p,V=R.isAsync,l=V===void 0?!1:V,Y=R.openName,A=Y===void 0?"_blank":Y,W=R.projectType,Q=W===void 0?"manage":W,Z=R.ddTab,w=Z===void 0?!0:Z,L,D=localStorage.getItem("dingPersonnel"),E=H.bl.includes(D),T=navigator.userAgent.toLocaleLowerCase(),z=localStorage.getItem("enterpriseId"),M=(0,C.lz)(z,Q),U=localStorage.getItem("appType"),B=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var te="";if(L=k?"":M,E&&!k){if(Q==="student"){window.location.href="".concat(M).concat(b);return}G.m8.push(b);return}b.includes("?")?te="".concat(L).concat(b,"&ddtab=").concat(w):te="".concat(L).concat(b,"?ddtab=").concat(w),dd.biz.util.openLink({url:te})}else if(T.indexOf("lark")!==-1)L=k?"":M,window.location.href="".concat(L).concat(b);else if(U==="wx_app"&&B&&k&&f==="imgText")L=k?"":Q==="student"?"".concat(M):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(L).concat(b)});else if(L=k?"":Q==="student"?"".concat(M):"#",l){var le=window.open("","_blank");setTimeout(()=>{le.location="".concat(L).concat(b)},100)}else window.open("".concat(L).concat(b),A)},re.Z=S},72387:function(we,re,i){"use strict";var F=i(12924),P=i.n(F),G=i(84874);class C extends P().PureComponent{constructor(S){super(S);this.onPrev=()=>{var R=this.state.activeIndex;this.setState({activeIndex:R<=0?0:R-1})},this.onNext=()=>{var R=this.props.imgList,b=this.state.activeIndex;this.setState({activeIndex:R.length<=b+1?b:b+1})},this.state={activeIndex:S.defaultActive}}componentDidUpdate(S){S.visible!==this.props.visible&&this.props.visible&&this.setState({activeIndex:this.props.defaultActive})}render(){var S=this.props,R=S.visible,b=S.imgList,f=this.state.activeIndex;return P().createElement("div",{className:"preview-img-mask",style:{display:R?"block":"none"}},P().createElement("div",{className:"preview-img-bg"},P().createElement("div",{className:"preview-img"},P().createElement("img",{src:b[f]}),P().createElement("span",{className:"preview-img-close",onClick:this.props.onClose},P().createElement(G.Z,{iconClass:"iconf-close"})))),f>=1?P().createElement("span",{className:"preview-img-left",onClick:this.onPrev},P().createElement(G.Z,{iconClass:"iconf-arrow-left",size:"20px"})):null,f<=b.length-2?P().createElement("span",{className:"preview-img-right",onClick:this.onNext},P().createElement(G.Z,{iconClass:"iconf-arrow-right",size:"20px"})):null)}}C.defaultProps={visible:!1,imgList:[],defaultActive:0,onClose:()=>{}},re.Z=C},99891:function(we,re,i){"use strict";var F=i(12924),P=i.n(F),G=i(28216),C=i(91768),H=i(37055),S=i(10237),R=i(60667);class b extends P().PureComponent{constructor(k){super(k);this.getWaterMarkText=V=>{var l=this.props.userInfo,Y=l.jobNumber,A=localStorage.getItem("waterMarkPostName"),W=[],Q=V.find(w=>w.type==="content_setting"),Z=V.find(w=>w.type==="content_custom");return Q.param.comment.indexOf("name")!==-1&&this.setState({isUserName:!0}),Z.param.checked==="true"&&Z.param.comment[0]!==""&&this.setState({commentText:Z.param.comment[0]}),Q.param.comment.indexOf("position")!==-1&&A&&A!==""&&W.push("".concat(A)),Q.param.comment.indexOf("jobnumber")!==-1&&Y&&Y!==""&&W.push("".concat(Y)),W.join("-")},this.getWaterMarkApplication=V=>{var l=this.props.scenes,Y=V.find(A=>A.type==="application_scenario");Y.param.comment.indexOf(l)!==-1&&this.setState({showWaterMark:!0})},this.getWaterIsDispersive=V=>{var l=V.find(Y=>Y.type==="dispersive");this.setState({isDispersive:l.param.checked==="true"})},this.getDynamicSet=()=>{var V=H.ZP.advancedSetting.dynamicWaterMarkNew(),l={access_token:window.localStorage.getItem("token")};S.WY.get({url:V,params:l}).then(Y=>{var A=JSON.parse(Y.data.actions);this.setState({waterMarkText:this.getWaterMarkText(A),actions:A}),this.getWaterMarkApplication(A),this.getWaterIsDispersive(A)})},this.state={showWaterMark:!1,waterMarkText:"",waterMarkCount:50,isUserName:!1,isDispersive:!1,actions:{},commentText:""}}componentDidMount(){var k=localStorage.getItem("waterMarkPostName");k===""||k===null?this.getPostName():this.getDynamicSet()}getPostName(){var k=H.ZP.advancedSetting.getPostName();S.WY.get({url:k}).then(V=>{localStorage.setItem("waterMarkPostName",V.data.post_names[0]||""),this.getDynamicSet()})}render(){var k=this.state,V=k.showWaterMark,l=k.waterMarkCount,Y=k.isUserName,A=k.isDispersive,W=k.waterMarkText,Q=k.actions,Z=k.commentText,w=this.props.userInfo,L=w.name,D=w.unionid,E=w.sourceType;return P().createElement("div",{className:"common-watermark"},V&&new Array(l).fill(0).map((T,z)=>P().createElement("div",{key:z,className:"common-watermark-item ".concat(A?"isDispersive":"")},P().createElement("span",{className:"common-watermark-item-content"},Z!==""&&P().createElement("span",{className:"item-part"},Z),Y&&P().createElement("span",null,Z!==""&&P().createElement("span",null,"-"),P().createElement(R.Z,{dataType:"userName",value:D,name:L,type:E})),P().createElement("span",{className:"item-part"},(Y||Z!=="")&&W!==""&&P().createElement("span",null,"-"),W)))))}}var f=p=>({userInfo:p.user});re.Z=(0,G.$j)(f)((0,C.Z)()(b))},60667:function(we,re,i){"use strict";i.d(re,{Z:function(){return b}});var F=i(33565),P=i(12924),G=i.n(P),C=i(28216);function H(f){var p=f.type,k=f.openid,V=f.from,l=(0,P.useRef)(null);return(0,P.useLayoutEffect)(()=>{V==="vue"?window.parent.WWOpenData.bind(l.current):WWOpenData.bind(l.current)}),G().createElement("ww-open-data",{ref:l,type:p,openid:k})}var S=f=>{var p=f.wxWorkApiFlag,k=f.appType,V=f.from,l=(0,P.useState)(!1),Y=(0,F.Z)(l,2),A=Y[0],W=Y[1];(0,P.useEffect)(()=>{var w=localStorage.getItem("qyWechatBook");(k!=="wx_app"||p||w==="false"||V==="vue"||V==="taro")&&W(!0)},[p,k,V]);var Q=(0,P.useCallback)(()=>{var w=f.type,L=f.value,D=f.name,E=D===void 0?"":D;switch(console.warn(f,"props"),w){case"wx_sync":{var T=f.dataType;return L?G().createElement(H,{from:V,type:T,openid:L}):E}default:return E}},[f]),Z=()=>{var w=f.name,L=f.dataType,D=localStorage.getItem("qyWechatBook");if(L===""||D==="false")return w;if(V==="vue"||V==="taro")return Q();switch(f.appType){case"wx_app":return Q();default:return w}};return A?Z():f.name};S.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var R=f=>({appType:f.user.appType,wxWorkApiFlag:f.user.wxWorkApiFlag}),b=(0,C.$j)(R)(S)},76466:function(we,re,i){"use strict";i.d(re,{Z:function(){return Ge}});var F=i(20228),P=i(11382),G=i(57663),C=i(71577),H=i(62029),S=i(57361),R=i(9754),b=i.n(R),f=i(12924),p=i.n(f),k=i(91512),V=i(68654),l=i(91768),Y=i(4412),A=i.n(Y);class W extends p().Component{render(){var u=this.props.t;return p().createElement("div",{className:"net-preview"},p().createElement("div",{className:"net-preview-center"},p().createElement("img",{src:A(),alt:"picture"}),p().createElement("h2",null,u("localStorage.tip")),p().createElement("p",null,u("localStorage.banPreview"))))}}var Q=(0,l.Z)()(W),Z=i(88986),w=i(34792),L=i(48086),D=i(28216),E=i(21594),T=i(41225),z=i(10237),M=(J,u)=>(0,Z.Z)({id:J||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},u),U=M;class B extends f.Component{constructor(){super(...arguments);this.setupPlayer=u=>{var c=this.props,s=c.onVideoReady,t=s===void 0?()=>{}:s,a=c.playerConfig,e=c.contentType;u&&u==="resetPlayer"&&this.dispose(),this.player=new window.CoolPlayer((0,Z.Z)((0,Z.Z)({},a),{},{contentType:e==="mp3"?"audio":"video",audioPoster:"".concat("https://oss.coolcollege.cn","/1814929291192963072.png"),source:a.source,autoplay:a.autoplay,width:a.width,id:a.id,height:"100%",platform:"pc",controlBarVisibility:"hover",enableCustomController:!1,core:"aliplayer",init:n=>{n.on("sourceloaded",r=>{var o=r.paramData,d=o.desc,m=o.definition;n.getComponent("VideoQuality")&&n.getComponent("VideoQuality").setCurrentQuality(d,m,a.id)}),n.on("ready",()=>{t()}),this.playerInstance=n,this.setPlayerConfig()}}))}}componentDidUpdate(u){u.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.setupPlayer())}dispose(){this.player&&this.player.dispose()}seek(u){this.player&&this.player.seek(u)}exitFull(){this.player&&this.player.exitFull()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(u){this.player.setSpeed(u)}getStatus(){return this.player.playStatus}replay(){this.player.replay()}setPlayerConfig(){var u=this.props,c=u.onPlay,s=c===void 0?()=>{}:c,t=u.onTimeUpDate,a=t===void 0?()=>{}:t,e=u.onEnd,n=e===void 0?()=>{}:e,r=u.onPause,o=r===void 0?()=>{}:r,d=u.onError,m=d===void 0?()=>{}:d,h=this.playerInstance;h.on("play",()=>{s()}),h.on("pause",()=>{o()}),h.on("timeupdate",v=>{a(v)}),h.on("ended",()=>{n()}),h.on("error",(0,S.Z)(b().mark(function v(){return b().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:m();case 1:case"end":return I.stop()}},v)})))}render(){var u=this.props.playerConfig;return p().createElement("div",{className:"common-video-player-container"},p().createElement("div",{id:u.id}))}}B.playerInstance=null,B.defaultProps={playerConfig:U(),autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0}};var te=B,le=(J,u)=>(0,Z.Z)({id:J||"J_prismPlayer",width:"100%",controlBarVisibility:"hover",showBuffer:!0,preload:!0,source:"",definition:"FD,OD",defaultDefinition:"OD",autoplay:!1,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:13},{name:"timeDisplay",align:"tl",x:10,y:6},{name:"volume",align:"tr",x:20,y:11}]}]},u),de=le;class Ie extends f.Component{constructor(){super(...arguments);this.setupPlayer=u=>{u&&u==="resetPlayer"&&this.player.dispose();var c=this.props,s=c.playerConfig,t=c.onVideoReady,a=t===void 0?()=>{}:t;this.player=new Aliplayer(s,e=>{e.on("sourceloaded",n=>{var r=n.paramData,o=r.desc,d=r.definition;e.getComponent("VideoQuality")&&e.getComponent("VideoQuality").setCurrentQuality(o,d,s.id)})}),this.player.on("ready",()=>{a()})},this.setPlayerConfig=()=>{var u=this.props,c=u.onPlay,s=c===void 0?()=>{}:c,t=u.onTimeUpDate,a=t===void 0?()=>{}:t,e=u.onEnd,n=e===void 0?()=>{}:e,r=u.onPause,o=r===void 0?()=>{}:r,d=u.onError,m=d===void 0?()=>{}:d;this.player.on("play",()=>{s()}),this.player.on("pause",()=>{o()}),this.player.on("timeupdate",h=>{a(h)}),this.player.on("ended",()=>{n()}),this.player.on("error",(0,S.Z)(b().mark(function h(){return b().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:m();case 1:case"end":return g.stop()}},h)})))},this.getPlayerContent=u=>{this.playerContainer=u}}componentDidMount(){this.player&&this.dispose(),this.setupPlayer(),this.playingVideo={}}componentDidUpdate(u){u.playerConfig.source!==this.props.playerConfig.source&&this.props.playerConfig.source!==""&&(this.playingVideo={},this.player&&this.player._el.id===this.props.playerConfig.id&&this.dispose(),this.setupPlayer())}dispose(){this.player.dispose()}seek(u){this.player.seek(u)}exitFull(){var u=this.player.fullscreenService;u&&u.isFullScreen&&u.cancelFullScreen()}play(){this.player.play()}pause(){this.player.pause()}getCurrentTime(){return this.player.getCurrentTime()}getDuration(){return this.player.getDuration()}setSpeed(){this.player.setSpeed()}getStatus(){return this.player.getStatus()}render(){var u=this.props.playerConfig;return p().createElement("div",{className:"common-video-player-container"},p().createElement("div",{id:u.id,ref:this.getPlayerContent,style:{width:"100%",height:"100%"}}))}}Ie.defaultProps={source:{FD:"",OD:""},autoPlay:!1,contentType:"mp4",playingVideo:{recentStart:0,progress:0,duration:0,auditionType:0,auditionLength:0},speedSwitch:!1,playerId:"J_prismPlayer",playerConfig:de()};var ve=Ie;class Se{constructor(u){this.hasCreated=!1,this.definition="",this.getQuality=u}createEl(u,c){var s=c._options&&c._options.language,t=c._el.id;this.isEn=s&&s==="en-us";var a=(0,E.O8)(`<div class="quality-components">
      <div class="current-quality" data-ref="">`.concat(this.isEn?"Resolution":"\u6E05\u6670\u5EA6",`</div>
      <ul class="quality-list" ></ul>
    </div>`)),e=(0,E.O8)('<div class="quality-modal"><span class="switchimg">'.concat(this.isEn?"Switching to you for":"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230",'</span><span class="current-quality-tag"></span> ,<span class="wait">').concat(this.isEn?"Please wait...":"\u8BF7\u7A0D\u540E...","</span></div>")),n=document.querySelector("#".concat(t," .prism-controlbar"));n.appendChild(a),u.appendChild(e)}setCurrentQuality(u,c,s){var t=document.querySelector("#".concat(s," .current-quality"));t.innerText=u,t.dataset.def=c,this.definition=c;var a=document.querySelector("#".concat(s," .quality-list")),e=a.querySelector(".current");e&&(e.className="");var n=a.querySelector('li[data-def="'.concat(c,'"]'));n&&(n.className="current")}created(u){this._urls=u._urls;var c=u._el.id,s=document.querySelector("#".concat(c," .current-quality")),t=document.querySelector("#".concat(c," .quality-list")),a=document.querySelector("#".concat(c," .quality-modal")),e=this._urls.map(o=>'<li data-def="'.concat(o.definition,'">').concat(o.desc,"</li>"));if(t.innerHTML=e.join(""),this.hasCreated==!1&&this.definition){var n=t.querySelector('li[data-def="'.concat(this.definition,'"]'));n.className="current"}this.hasCreated=!0;var r=null;s.onclick=()=>{t.style.display="block"},s.onmouseleave=()=>{r=setTimeout(()=>{t.style.display="none"},100)},t.onmouseenter=()=>{clearTimeout(r)},t.onmouseleave=()=>{t.style.display="none"},t.onclick=o=>{var d=o.target,m=d.dataset.def,h=d.innerText;if(m&&d.className!=="current"){var v=this._urls.find(g=>g.definition===m);u.loadByUrl(v.Url,u.getCurrentTime(),!0,!0),this.setCurrentQuality(v.desc,v.definition,c),a.style.display="block",a.querySelector("span.current-quality-tag").innerText=v.desc}this.getQuality(m,h)}}ready(u){var c=u._el.id,s=document.querySelector("#".concat(c," .quality-modal"));s.style.display="none";var t=document.querySelector("#".concat(c," .prism-setting-item.prism-setting-quality"));t&&t.classList.add("player-hidden")}}class Ce{createEl(u,c){var s=c._el.id,t=(0,E.O8)(`<div class="rate-components">
      <div class="current-rate">1.0x</div>
      <ul class="rate-list"><li data-rate="2.0">2.0x</li><li data-rate="1.5">1.5x</li><li data-rate="1.25">1.25x</li><li data-rate="1.0" class="current">1.0x</li><li data-rate="0.5">0.5x</li></ul>
    </div>`),a=document.querySelector("#".concat(s," .prism-controlbar"));a.appendChild(t)}ready(u){var c=u._el.id,s=document.querySelector("#".concat(c," .current-rate")),t=document.querySelector("#".concat(c," .rate-list")),a=null,e=document.querySelector("#".concat(c," .prism-setting-item.prism-setting-speed"));e&&e.classList.add("player-hidden"),s.onclick=()=>{t.style.display="block"},s.onmouseleave=()=>{a=setTimeout(()=>{t.style.display="none"},100)},t.onmouseenter=()=>{clearTimeout(a)},t.onmouseleave=()=>{t.style.display="none"},t.onclick=n=>{var r=n.target,o=r.dataset.rate;if(o){if(u.setSpeed(o),r.className!=="current"){var d=t.querySelector(".current");d&&(d.className=""),r.className="current"}t.style.display="none",s.innerText="".concat(o,"x")}}}}var Te=i(69164),Ue=i(37055);function Ae(J){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=Ue.ZP.local.getLocalUrl(J);return z.WY.get({url:c,params:u})}var je=i(91648),Le=i(18329),Ze=i(38642),We=i(9849),Oe=i(99891);class ze extends f.Component{constructor(u){super();this.WaterMarkText=u,this.html=document.getElementsByClassName("common-watermark")}createEl(u){setTimeout(()=>{u.appendChild(this.html[0]?this.html[0]:null)},2e3)}}var lt=ze,ot=J=>({userInfo:J.user});class qe extends f.Component{constructor(u){var c;super(u);c=this,this.onVideoReady=s=>{var t=this.props,a=t.resourceInfo,e=t.mode,n=t.autoPlay,r=t.t,o=a.storageType;s==="resetPlayer"?(this.play.play(),this.play.seek(this.playingVideo.recentStart),this.playingVideo.readyCount===0?this.play.setPlayerConfig():this.updateSource(s),this.playingVideo.readyCount=1):(this.playingVideo.readyCount===0?(e==="learn"&&this.readyPlayerTips(),this.play.setPlayerConfig(),e==="preview"&&n&&this.play.play()):o==="ALIBABA_PRIVATE"||o==="LOCAL"?this.updateSource("resetPlayer"):(z.WY.logger({keyword:"video",moduleName:"video-play",msg:r("component.videoResourceErrorTips"),data:{playingVideo:this.playingVideo,props:this.props,state:this.state}}),this.play.pause()),this.playingVideo.readyCount=1)},this.onTimeUpDate=()=>{var s=this.props,t=s.draggable,a=s.mode,e=s.t,n=s.studyInfo,r=s.needCurrentTime,o=s.onCurrentTime,d=o===void 0?()=>{}:o,m=n.studyType,h=n.studyId,v=n.resourceId,g=this.state,I=g.showPreventHang,O=g.dragSwitch,K=g.showRandomAlert,j=g.randomAlertDialogVisible,N=this.playingVideo,ee=N.oneTime,oe=N.popupWindowCount,_=N.maxPlayTime,$=N.progress,X=N.auditionLength,ce=N.auditionType,me=N.duration,Ne=N.recentStart,ye=this.play.getCurrentTime(),Ee=(I==="OPEN"||K==="OPEN")&&oe>0;if(r&&d(ye),X>0&&ce===2&&ye>X&&(this.play.seek(X),L.default.warning(e("component.haveALookOverTip")),this.play.pause()),a==="learn"&&Ee){var Fe=me-ee*oe;if(oe>0&&ye>Fe)if(this.play.pause(),K==="OPEN"){if(!j){var Be=(0,je.Z)();this.setState({randomAlertDialogVisible:!0,randomAlertUUID:Be},()=>{(0,T.qp)({popupId:Be,planId:h,resourceId:v,type:"popup_start"})}),this.play.exitFull()}}else I==="OPEN"&&(this.setState({dialogVisible:!0}),this.play.exitFull())}if((t||$===100)&&(ye>0&&(this.playingVideo.recentStart=ye),!((m==="enterprise"||m==="studyProject")&&O==="OPEN")))return!1;ye>_?ye-Ne>2?(this.playingVideo.recentStart=_,this.play.seek(_),L.default.warning(e("component.preventFastWatchTip"))):(this.playingVideo.recentStart=ye,this.playingVideo.maxPlayTime=ye):ye>0&&ye>this.playingVideo.recentStart&&(this.playingVideo.recentStart=ye)},this.onPlay=()=>{var s=this.props,t=s.mode,a=s.onPlay,e=a===void 0?()=>{}:a;e();var n=this;t==="learn"&&!n.timer&&(n.timer=setTimeout(function r(){n.saveProgress(),clearTimeout(n.timer),n.timer=setTimeout(r,2e4)},2e4))},this.onPause=()=>{var s=this.props,t=s.studyInfo,a=s.mode,e=t.studyType;clearTimeout(this.timer),this.timer=null,a==="learn"&&(e==="platform"||e==="enterprise"||e==="studyTask")&&this.saveProgress()},this.onEnd=()=>{var s=this.props.mode;s==="learn"&&this.saveProgress()},this.onError=s=>{var t=this.props.resourceInfo,a=t.storageType;(a==="ALIBABA_PRIVATE"||a==="LOCAL")&&this.updateSource("resetPlayer")},this.initInfo=()=>{var s=this.props.mode;this.initPlayVideo(),s==="learn"&&this.saveProgress(),this.dealAudioPoster(),this.getInfoFromSettings()},this.handleCancel=()=>{this.setState({dialogVisible:!1})},this.handleRandomCancel=()=>{this.setState({randomAlertDialogVisible:!1,randomAlertUUID:""})},this.playingVideo={},this.readyPlayerTips=()=>{var s=this.state,t=s.showPreventHang,a=s.showRandomAlert,e=this.props,n=e.t,r=e.playingVideo,o=e.studyInfo,d=e.autoPlay,m=r.recentStart,h=r.duration,v=r.progress,g=o.studyType,I=(t==="OPEN"||a==="OPEN")&&(g==="studyTask"||g==="enterprise"||g==="studyProject")&&v<100;I?(a==="OPEN"?this.setState({promptMessage:n("component.preventAlertTip"),dialogVisible:!0}):t==="OPEN"&&this.setState({promptMessage:n("component.preventHangUpTip"),dialogVisible:!0}),this.playerShowPreventHang()):d&&(this.play.play(),Math.ceil(m)<parseInt(h)&&this.play.seek(m))},this.playerShowPreventHang=()=>{var s=this.playingVideo,t=s.duration,a=s.recentStart,e=0;t>0&&t<180?(e=t/2,this.playingVideo.oneTime=e,a>=e?this.playingVideo.popupWindowCount=0:this.playingVideo.popupWindowCount=1):t>=180&&t<600?(e=t/3,this.playingVideo.oneTime=e,a>=2*e?this.playingVideo.popupWindowCount=0:a>=e?this.playingVideo.popupWindowCount=1:this.playingVideo.popupWindowCount=2):(e=t/4,this.playingVideo.oneTime=e,a>=3*e?this.playingVideo.popupWindowCount=0:a>=2*e?this.playingVideo.popupWindowCount=1:a>=e?this.playingVideo.popupWindowCount=2:this.playingVideo.popupWindowCount=3)},this.initPlayVideo=()=>{var s=this.props,t=s.playingVideo,a=s.mode;if(a==="learn"){this.playingVideo=(0,Z.Z)({},t);var e=t.duration,n=t.progress;this.playingVideo.hasFinished=parseInt(n)===100,this.playingVideo.maxPlayTime=parseInt(e)*parseInt(n)/100}this.playingVideo.readyCount=0},this.dealVideoConfig=(0,S.Z)(b().mark(function s(){var t,a,e,n,r,o,d,m,h,v,g,I,O,K,j,N,ee,oe,_,$,X,ce,me,Ne;return b().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(t=c.state,a=t.speedSwitch,e=t.dragSwitch,n=t.whiteList,r=c.props,o=r.resourceInfo,d=r.showQuality,m=o.contentType,h=o.storageType,v=o.source,g=o.playId,I=o.playerId,O=o.showFullScreen,K=O===void 0?!0:O,j=de(I),j.components=[],N=typeof v=="object"&&v.hasOwnProperty("FD")&&v.FD.indexOf("m3u8")===-1,d&&N&&m!=="mp3"&&(h&&h==="PUBLIC_CLOUD"||!h)&&j.components.push({name:"VideoQuality",type:Se,args:[()=>{c.play.pause(),c.playingVideo.readyCount=0}]}),a==="OPEN"&&j.components.push({name:"VideoRate",type:Ce}),K&&(ee=j.skinLayout.find(Fe=>Fe.name==="controlBar"),ee&&ee.children.splice(ee.children.length-2,0,{name:"fullScreenButton",align:"tr",x:20,y:13})),j.components.push({name:"VideoWaterMark",type:lt}),oe=v.FD,_=v.OD,oe.indexOf("http://")>-1&&(oe=oe.replace("http://","https://")),_.indexOf("http://")>-1&&(_=_.replace("http://","https://")),$=n.baiYingVideoHostFlag?"video.baiying.com.cn":"video.coolcollege.cn",v.OD=_&&_.indexOf($)>-1&&_.indexOf(".mp4")>-1?_:oe,v.FD=oe,X=typeof v!="string"?JSON.stringify(v):v,j.source=X,e==="OPEN"&&(j.disableSeek=!0),h!=="ALIBABA_PRIVATE"){Ee.next=32;break}return Ee.next=22,(0,T.BR)(g);case 22:if(ce=Ee.sent,!ce){Ee.next=28;break}j.source=ce,j.vodRetry=1,Ee.next=30;break;case 28:return c.setState({showPrivateVodError:!0}),Ee.abrupt("return");case 30:Ee.next=38;break;case 32:if(h!=="LOCAL"){Ee.next=38;break}return Ee.next=35,Ae(g);case 35:me=Ee.sent,Ne=me.data,Ne.code===0&&(j.source="".concat(v.FD,"?auth_key=").concat(Ne.data.auth_key),j.vodRetry=1);case 38:c.setState({playerConfig:j});case 39:case"end":return Ee.stop()}},s)})),this.updateSource=function(){var s=(0,S.Z)(b().mark(function t(a){var e,n,r,o,d,m,h,v;return b().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(e=c.state.playerConfig,n=c.props.resourceInfo,r=n.storageType,o=n.source,d=n.playId,c.playingVideo.readyCount=0,r!=="ALIBABA_PRIVATE"){I.next=16;break}return I.next=7,(0,T.BR)(d);case 7:if(m=I.sent,!m){I.next=12;break}Object.assign(e,{source:m,vodRetry:1}),I.next=14;break;case 12:return c.setState({showPrivateVodError:!0}),I.abrupt("return");case 14:I.next=22;break;case 16:if(r!=="LOCAL"){I.next=22;break}return I.next=19,Ae(d);case 19:h=I.sent,v=h.data,v.code===0&&Object.assign(e,{source:"".concat(o.FD,"?auth_key=").concat(v.data.auth_key),vodRetry:1});case 22:c.setState({playerConfig:e},()=>{c.play.setupPlayer(a)});case 23:case"end":return I.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),this.saveProgress=()=>{var s=this.props,t=s.studyInfo,a=s.userInfo,e=a.isLogin,n=a.enterpriseId,r=a.id,o=this.playingVideo,d=o.recentStart,m=o.duration,h=o.hasFinished,v=Math.ceil(+d);v>Number(m)&&(v=Number(m));var g=Math.ceil(v/+m*100);if((g>100||h)&&(g=100),e){var I=this.playingVideo,O=I.auditionType,K=I.auditionLength;if(K>0&&O===2){var j=Math.ceil(K/m*100);j<=g&&(g=j,v=K)}(0,T.sH)({studyInfo:t,progress:g,recent_start:v,enterpriseId:n,userId:r}).then(N=>{N&&N.data&&(0,Te.Z)(N.data.integral_info||"")})}},this.getInfoFromSettings=(0,S.Z)(b().mark(function s(){var t,a,e,n,r,o,d,m,h;return b().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return t=c.props.studyInfo,a=t.studyType,e=t.projectId,g.next=4,(0,T.Gw)();case 4:if(n=g.sent,r=[{type:"prevent_cut_screen",name:"showPreventHang"},{type:"document_duration_limit",name:"showRandomAlert"},{type:"dynamic_watermark",name:"videoWatermarkSettings",resourceType:"video"},{type:"audio_video_drag",name:"dragSwitch"},{type:"speed_play_switch",name:"speedSwitch"},{type:"vod_encrypted_switch",name:"encryptedSwitch"}],o=(0,E.RG)(n,r),a!=="studyProject"){g.next=14;break}return g.next=10,(0,We.NU)({id:e});case 10:d=g.sent,m=d.status,h=d.data,m===200&&(o.showPreventHang=h.prevent_cut_screen?"OPEN":"CLOSED",o.speedSwitch=h.speed_play?"OPEN":"CLOSED",o.dragSwitch=h.prevent_drag?"OPEN":"CLOSED");case 14:c.setState(o,()=>{c.dealVideoConfig()});case 15:case"end":return g.stop()}},s)})),this.dealAudioPoster=()=>{var s=this.props.resourceInfo.contentType,t=s===void 0?"":s;this.setState({showAudioPoster:t==="mp3"},()=>{this.renderAudioPoster()})},this.renderAudioPoster=()=>{var s=this.state.showAudioPoster,t=this.play.playerContainer;s&&t&&(t.style.background="url('".concat("https://oss.coolcollege.cn","/1814929291192963072.png') center no-repeat"),t.style.backgroundSize="cover")},this.getPlayInstance=s=>{this.play=s},this.handleOk=()=>{this.setState({dialogVisible:!1});var s=this.state.btnType,t=this.playingVideo.recentStart,a=this.props.t;s==="know"?(this.play.play(),this.play.seek(t),setTimeout(()=>{this.setState({btnType:"continue",promptMessage:a("component.hangUpTriggerTip")})},500)):(this.playingVideo.popupWindowCount-=1,this.play.play())},this.handleRandomOk=(0,S.Z)(b().mark(function s(){var t,a,e,n;return b().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=c.props.studyInfo,a=t.studyId,e=t.resourceId,n=c.state.randomAlertUUID,(0,T.qp)({popupId:n,planId:a,resourceId:e,type:"popup_end"}).then(()=>{c.setState({randomAlertUUID:"",randomAlertDialogVisible:!1})}),c.playingVideo.popupWindowCount-=1,c.play.play();case 6:case"end":return o.stop()}},s)})),this.renderFooter=()=>{var s=this.state.btnType,t=this.props.t;return p().createElement(C.Z,{key:"submit",type:"primary",onClick:()=>this.handleOk(s)},t(s==="know"?"component.iKnow":"component.continuePlaying"))},this.renderRandomFooter=()=>{var s=this.props.t;return p().createElement(C.Z,{key:"submit",type:"primary",onClick:this.handleRandomOk},s("common.ok"))},this.state={playerConfig:de(),showRandomAlert:"",showPreventHang:"",videoWatermarkSettings:[],dragSwitch:"",speedSwitch:"",encryptedSwitch:"",showAudioPoster:!1,showPrivateVodError:!1,dialogVisible:!1,dialogModal:{title:u.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleCancel},promptMessage:u.t("component.preventHangUpTip"),btnType:"know",randomAlertDialogVisible:!1,randomAlertUUID:"",randomAlertTip:u.t("component.randomAlertTip"),randomAlertModal:{title:u.t("common.tip"),mask:!0,size:"small",closable:!1,onCancel:this.handleRandomCancel},whiteList:{baiYingVideoHostFlag:(0,Ze.UI)("CL_VIDEO_BAIYING_COM_CN")}},u.onGetVideoBusiness(this)}componentDidMount(){this.initInfo()}componentDidUpdate(u){var c=typeof u.resourceInfo.source!="string"?JSON.stringify(u.resourceInfo.source):u.resourceInfo.source,s=typeof this.props.resourceInfo.source!="string"?JSON.stringify(this.props.resourceInfo.source):this.props.resourceInfo.source;c!==s&&s!==""&&this.initInfo()}componentWillUnmount(){var u=this.props.mode;u==="learn"&&this.saveProgress(),this.play&&this.play.dispose(),clearTimeout(this.timer),this.playingVideo={}}render(){var u=this.state,c=u.playerConfig,s=u.showPrivateVodError,t=u.dialogVisible,a=u.dialogModal,e=u.promptMessage,n=u.randomAlertDialogVisible,r=u.randomAlertModal,o=u.randomAlertTip,d=u.encryptedSwitch,m=this.props,h=m.resourceInfo,v=m.t,g=d==="OPEN"?te:ve;return p().createElement(f.Fragment,null,p().createElement(g,(0,H.Z)({ref:this.getPlayInstance},h,{playingVideo:this.playingVideo,onPlay:this.onPlay,onPause:this.onPause,playerConfig:c,onVideoReady:this.onVideoReady,onTimeUpDate:this.onTimeUpDate,onError:this.onError,onEnd:this.onEnd})),p().createElement(Le.ZP,(0,H.Z)({visible:t},a,{footer:this.renderFooter()}),p().createElement("div",{className:"video-business-prompt"},e)),p().createElement(Le.ZP,(0,H.Z)({visible:n},r,{footer:this.renderRandomFooter()}),p().createElement("div",{className:"video-player-container__prompt"},o)),s&&p().createElement("div",{className:"video-business-vod-error"},v("privateCloud.docReadError")),p().createElement(Oe.Z,{scenes:"video"}))}}var et=(0,D.$j)(ot,null,null,{forwardRef:!0})((0,l.Z)("translation",{withRef:!0})(qe)),tt=i(94184),Ke=i.n(tt),at=i(84874),nt=J=>({userInfo:J.user}),ct={getPravateDocUrl:Ue.ZP.localStorage.getPravateDocUrl};function Qe(J){return JSON.stringify(J,(u,c)=>(typeof c=="function"&&(c=c.toString()),c))}function rt(J){var u=parseInt(parseInt(J,10)/60,10),c=parseInt(parseInt(J,10)%60,10);return u<10&&(u="0".concat(u)),c<10&&(c="0".concat(c)),"".concat(u,":").concat(c)}class Je extends f.Component{constructor(u){var c;super(u);c=this,this.messageFun=s=>{var t=this.props,a=t.docType,e=t.progress,n=t.studyTimeLimit,r=t.studyTime,o=this.state,d=o.jumpPageTag,m=o.totalTime,h=o.timeRemaining,v=this.state.previewDocData,g={};try{g=JSON.parse(s.data)}catch(I){return}switch(g.action){case"preview.ready":this.initDocData();break;case"preview.meta":v.totalPage=g.data.pc||1,v.currentPage=1,this.setState({previewDocData:v},()=>{this.reportStatusInterval()}),n>0?(this.saveProgress(e,r||"1",g.data.pc||1),this.setState({showCountDownContainer:!0})):a==="xlsx"||a==="xls"||v.totalPage===1?this.saveProgress(100,1,1):this.saveProgress(e,r||"1",g.data.pc||1),n>0&&e<100?(this.setState({showCountDown:!0}),a==="xlsx"||a==="xls"?m=n:m=n*g.data.pc,h=parseInt(m*(1-e/100),10),this.setState({timeRemaining:h,totalTime:m},()=>{this.docCountDown()})):this.setState({showCountDown:!1});break;case"page.readPage":if(d){d=!1,this.setState({jumpPageTag:d});return}v.currentPage=g.data.pageIndex+1,this.setState({previewDocData:v}),n||this.saveProgress(Math.ceil(v.currentPage/v.totalPage*100),v.currentPage,v.totalPage);break;case"page.initViewDone":this.redirectPage();break;case"message.error":L.default.error(g.data.result);break;default:break}},this.initDocData=(0,S.Z)(b().mark(function s(){var t,a,e,n,r,o,d,m,h,v,g,I,O,K;return b().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(c.setState({isShowPrivateError:!1}),t=c.props,a=t.docType,e=t.userInfo,n=t.documentWatermarkSettings,r=t.storageType,o=t.privateDocId,d=e.name,m=e.jobNumber,h=e.position,v="",g={},r!=="ALIBABA_PRIVATE"){N.next=18;break}return N.prev=6,I=ct.getPravateDocUrl(o),N.next=10,z.WY.get({url:I});case 10:O=N.sent,K=O.data,K.code===0?g=K.data||{}:c.setState({isShowPrivateError:!0}),N.next=18;break;case 15:N.prev=15,N.t0=N.catch(6),c.setState({isShowPrivateError:!0});case 18:if(n.indexOf("name")>-1&&(v="".concat(v+d," ")),n.indexOf("position")>-1&&(v="".concat(v+h," ")),n.indexOf("jobnumber")>-1&&(v+=m),v.length>0?window.sendMessage("preview.init",(0,Z.Z)({wmType:1,wmValue:v,wmColor:"rgba(192, 192, 192, 0.4)"},g)):window.sendMessage("preview.init",(0,Z.Z)({},g)),a!=="xlsx"&&a!=="ppt"&&a!=="pptx"&&a!=="xls"?c.setState({pageOperateContainerVisible:!0}):c.setState({pageOperateContainerVisible:!1}),!(a==="ppt"||a==="pptx")){N.next=29;break}N.t1=window,N.t2={powerpointCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0}}},N.t1.sendMessage.call(N.t1,"setConfig",N.t2),N.next=32;break;case 29:N.t3=window,N.t4={writerCustomStyle(){return{containerMarginTop:0,containerMarginBottom:0,paginationDisplay:!0,scale:{bottom:"60px",right:"20px"}}}},N.t3.sendMessage.call(N.t3,"setConfig",N.t4);case 32:case"end":return N.stop()}},s,null,[[6,15]])})),this.handleJumpPage=s=>{var t=this.state.previewDocData;t.currentPage=s,this.setState({jumpPageTag:!0,previewDocData:t});var a=s/t.totalPage*100;this.props.studyTimeLimit||this.saveProgress(Math.ceil(a),s,t.totalPage),window.sendMessage("logic.toPage",{pageIndex:s-1})},this.redirectPage=()=>{var s=this.props,t=s.studyTimeLimit,a=s.studyTime,e=0;t===0&&(e=a-1>0?a-1:0),window.sendMessage("logic.toPage",{pageIndex:e})},this.docCountDown=()=>{var s=this.state.timeRemaining,t=this.state,a=t.totalTime,e=t.previewDocData;this.docCountDownTimer&&window.clearInterval(this.docCountDownTimer),this.docCountDownTimer=setInterval(()=>{s-=1,this.setState({timeRemaining:s}),s<1&&(this.saveProgress(100,0,e.totalPage),this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer))},1e3),this.intervalSaveProgressTimer&&window.clearInterval(this.intervalSaveProgressTimer),this.intervalSaveProgressTimer=setInterval(()=>{var n=(a-s)/a*100;s<1?(this.setState({showCountDown:!1}),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer)):this.saveProgress(Math.ceil(n),s,e.totalPage)},2e4)},this.saveProgress=(s,t,a)=>{var e=this.props.onSaveProgress;e&&e(s,t,a)},this.reportStatusInterval=()=>{var s=this.props.onReportStatusInterval;this.reportStatusTimer=setInterval(()=>{var t=this.state.previewDocData.currentPage;s&&s({currentPage:t})},2e4)},this.hidePageOperateContainer=()=>{this.setState({showPageOperateContainer:!1})},this.handleShowPageOperateContainer=()=>{this.setState({showPageOperateContainer:!0})},this.dealPreviewRef=s=>{this.docReader=s},this.state={previewDocData:{totalPage:1,currentPage:1},pageOperateContainerVisible:!1,showPageOperateContainer:!0,showCountDown:!1,showCountDownContainer:!1,timeRemaining:0,totalTime:0,jumpPageTag:!1,isShowPrivateError:!1}}componentDidMount(){window.sendMessage=(u,c)=>{var s=this.docReader.contentWindow;s.postMessage(Qe({action:u,data:c}),"*")},window.addEventListener("message",this.messageFun,!1)}componentWillUnmount(){window.removeEventListener("message",this.messageFun,!1),window.clearInterval(this.docCountDownTimer),window.clearInterval(this.intervalSaveProgressTimer),window.clearInterval(this.reportStatusTimer)}render(){var u=this.props,c=u.t,s=u.storageType,t=u.privateDocId,a=this.props.aliUrl,e=this.state,n=e.previewDocData,r=e.pageOperateContainerVisible,o=e.timeRemaining,d=e.showCountDown,m=e.showCountDownContainer,h=e.showPageOperateContainer,v=e.isShowPrivateError;return s==="ALIBABA_PRIVATE"&&(a="https://preview.imm.aliyuncs.com/index.html?docId=".concat(t)),p().createElement("div",{className:"doc-reader-container"},p().createElement("div",{className:"ali-doc-container",style:{paddingBottom:r?"56px":"0"}},p().createElement("iframe",{allowFullScreen:!0,frameBorder:"0",style:{width:"100%",height:"100%"},src:a,id:"aliyunPreview",ref:this.dealPreviewRef}),m?p().createElement("div",{className:"ali-doc-container__countdown"},d?p().createElement("div",null,p().createElement(at.Z,{iconClass:"iconf-tipe",size:"16px"}),c("component.docStillStudy"),p().createElement("span",{className:"ali-doc-container__countdown__fomate-remaining"}," ",rt(o)," "),c("component.canDone")):p().createElement("div",null,p().createElement(at.Z,{iconClass:"iconf-tipe",size:"16px"}),c("component.docHasFinish"))):null,r?p().createElement("div",{className:"ali-doc__operate"},p().createElement("div",{className:Ke()(["ali-doc__operate__content",h?"":"ali-doc__operate__hide-content"])},p().createElement("div",{className:"ali-doc__operate__pagination"},p().createElement("div",{className:"ali-doc__operate__pagination__pages"},n.currentPage," / ",n.totalPage),p().createElement("div",{className:"ali-doc__operate__pagination__toggle"},p().createElement("div",{className:"ali-doc__operate__pagination__choose"},p().createElement("span",null,c("component.choosePage"),p().createElement(at.Z,{iconClass:"iconf-arrow-under",size:"14px"})),p().createElement("div",{className:"ali-doc__operate__page-list-container"},p().createElement("div",{className:"ali-doc__operate__choose-page"},c("component.fastChoosePage")),p().createElement("ul",{className:"ali-doc__operate__page-list"},Object.keys(Array.from({length:n.totalPage})).map((g,I)=>p().createElement("li",{key:g,onClick:()=>this.handleJumpPage(I+1)},I+1))))),p().createElement("div",{className:"ali-doc__operate__pagination__fold",onClick:this.hidePageOperateContainer},c("common.collapse"))))),p().createElement("div",{className:Ke()("ali-doc__operate__unfold",h?"ali-doc__operate__unfold-hide":""),onClick:this.handleShowPageOperateContainer},c("common.expand"))):null,v&&p().createElement("div",{className:"ali-doc__error"},c("privateCloud.docReadError"))),p().createElement(Oe.Z,{scenes:"document"}))}}Je.defaultProps={aliUrl:"",docType:"",progress:0,studyTime:0,studyTimeLimit:0,documentWatermarkSettings:[]};var Pe=(0,D.$j)(nt)((0,l.Z)()(Je)),st=J=>({userInfo:J.user}),Me="".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api"),Xe="".concat("https://doc.coolcollege.cn");class it extends p().Component{constructor(u){var c;super(u);c=this,this.onSaveProgress=(s,t,a)=>{var e=this.props,n=e.mode,r=e.studyInfo,o=e.userInfo,d=o.enterpriseId,m=o.id;n==="learn"&&(0,T.sH)({studyInfo:r,progress:s,page_count:a,recent_start:t,enterpriseId:d,userId:m}).then(h=>{h&&h.data&&(0,Te.Z)(h.data.integral_info||"")})},this.messageFun=function(){var s=(0,S.Z)(b().mark(function t(a){var e,n,r,o,d,m;return b().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(a.data!=="local-resource"){v.next=9;break}if(e=c.props.resourceInfo,n=e.storageType,r=e.playId,!(n&&n==="LOCAL")){v.next=9;break}return v.next=6,Ae(r);case 6:o=v.sent,d=o.data,d.code===0&&(m=document.getElementById("local-resource-box"),m.contentWindow.postMessage({msg:"local-auth-key",authKey:d.data.auth_key},"*"));case 9:case"end":return v.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),this.getInfoFromSettings=(0,S.Z)(b().mark(function s(){var t,a,e;return b().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,T.Gw)();case 2:t=r.sent,a=[{type:"dynamic_watermark",name:"documentWatermarkSettings",resourceType:"document"},{type:"document_player",name:"documentPlayerMode"}],e=(0,E.RG)(t,a),c.setState(e,()=>{c.initDocPage(c.props)});case 6:case"end":return r.stop()}},s)})),this.initDocPage=(0,S.Z)(b().mark(function s(){var t,a,e,n,r,o,d,m,h,v,g,I,O,K,j,N,ee,oe,_,$,X,ce,me,Ne,ye,Ee,Fe,Be,Ye,ut,dt,pt,mt,ht,vt=arguments;return b().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(t=vt.length>0&&vt[0]!==void 0?vt[0]:{},a=t.resourceInfo,e=t.mode,n=t.studyInfo,r=t.userInfo,o=c.state.documentPlayerMode,d=a.docType,m=a.docTitle,h=a.url,v=a.studyTimeLimit,g=a.studyTime,I=a.aliUrl,O=a.progress,K=a.storageType,j=a.playId,N=n.studyType,ee=n.courseId,oe=n.studyId,_=n.resourceId,$=r.enterpriseId,X=r.id,ce=r.isLogin,me=r.token,Ne=o==="compat"&&I.indexOf("preview.imm.aliyun")>-1||K==="ALIBABA_PRIVATE",!Ne){xe.next=11;break}c.setState({showAliReader:!0}),xe.next=31;break;case 11:if(ye=(0,T.sH)({enterpriseId:$,userId:X,token:me,studyInfo:n},!0),Ee=N==="studyTask"?2:1,Fe=Ue.ZP.SaveProgress.reportStatusInterval(n),Be={isSaveProgress:ce&&e==="learn"&&ye,isSaveRecord:!1,access_token:me,userId:X,hostUrl:Me,courseId:ee,resourceId:_,courseType:1,planId:oe,studyTimeLimit:v,studyTime:g,saveProgressUrl:ye,type:"eapp",progress:O,saveRecordProgressUrl:Fe,actionType:Ee},!(K&&K==="LOCAL")){xe.next=26;break}return xe.next=18,Ae(j);case 18:if(Ye=xe.sent,ut=Ye.data,ut.code!==0){xe.next=25;break}Be.auth_key=ut.data.auth_key,Be.url=h,xe.next=26;break;case 25:return xe.abrupt("return");case 26:dt=JSON.stringify(Be),pt="".concat(m,".").concat(d).replace(/[\|\~\`\(\)\@\#\$\%\^\&\*\{\}\"\L\<\>\?]/g,""),mt="".concat(Xe,"/?i=13399&ssl=1&iparms=").concat(encodeURIComponent(dt),"&furl=").concat(h,"?attname=").concat(pt),K&&K==="LOCAL"&&(ht="".concat("https://dd.coolcollege.cn/ac/eapp/localDocReader/index.html").replace(/^\"|\"$/g,"").replace(/^\'|\'$/g,""),mt="".concat(ht,"?i=13399&ssl=1&iparms=").concat(encodeURIComponent(dt),"&furl=").concat(h,"?attname=").concat(pt)),c.setState({encodeUrl:mt});case 31:case"end":return xe.stop()}},s)})),this.handleReportStatusInterval=s=>{var t=s.currentPage,a=this.props,e=a.resourceInfo,n=a.mode,r=a.studyInfo,o=a.userInfo,d=e.type,m=r.courseId,h=r.studyId,v=r.resourceId,g=o.enterpriseId,I=o.id,O=o.isLogin,K="",j="",N=0,ee=!1;switch(d){case"enterprise":N=1,ee=!0;break;case"study":K=h,N=2,ee=!0;break;case"project":j=h,N=1,ee=!0;break;default:break}if(!(!ee||!O)){var oe={plan_id:K,enterprise_id:g,user_id:I,course_id:m,project_course_id:j,resource_id:v,current_page:t,action_type:N,send_time:Date.parse(new Date)};n==="learn"&&(0,T.Xc)(r,oe)}},this.state={encodeUrl:"",showAliReader:!1,documentWatermarkSettings:[],documentPlayerMode:"projection"}}componentDidMount(){this.getInfoFromSettings(),window.addEventListener("message",this.messageFun,!1)}UNSAFE_componentWillReceiveProps(u){this.initDocPage(u)}render(){var u=this.props.resourceInfo,c=this.state,s=c.encodeUrl,t=c.documentWatermarkSettings,a=c.showAliReader,e=u.docType,n=u.type,r=u.studyTimeLimit,o=u.studyTime,d=u.aliUrl,m=u.progress,h=u.storageType,v=u.playId;return a?p().createElement(Pe,{privateDocId:v,storageType:h,aliUrl:d,docType:e,progress:m,studyTime:o,studyTimeLimit:r,documentWatermarkSettings:t,onSaveProgress:this.onSaveProgress,onReportStatusInterval:this.handleReportStatusInterval,type:n}):p().createElement("div",{className:"doc-reader-container"},p().createElement("iframe",{id:"local-resource-box",style:{width:"100%",height:"100%"},src:s,frameBorder:"0",allowFullScreen:!0}),p().createElement(Oe.Z,{scenes:"document"}))}}var y=(0,D.$j)(st)(it),x=i(38979),ae=i(90706),q=i(12968),ne=i(44208),ue=i(60667),he=J=>({userInfo:J.user});class ge extends p().Component{constructor(){var u;super(...arguments);u=this,this.state={imageWatermark:[],watermark:"",imageUrl:[]},this.onImageLoad=()=>{var c=this.props,s=c.studyInfo,t=c.mode,a=c.userInfo,e=a.enterpriseId,n=a.id;t==="learn"&&(0,E.Gp)({studyInfo:s,enterpriseId:e,userId:n})},this.getInfoFromSettings=(0,S.Z)(b().mark(function c(){var s,t,a;return b().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,T.Gw)();case 2:s=n.sent,t=[{type:"dynamic_watermark",name:"imageWatermark",resourceType:"image"}],a=(0,E.RG)(s,t),u.setState(a,()=>{u.renderWatermark()});case 6:case"end":return n.stop()}},c)})),this.renderWatermark=()=>{var c=this.props.userInfo,s=this.state.imageWatermark,t=c.name,a=c.unionid,e=c.sourceType,n=c.jobNumber,r=c.position,o=[];s.indexOf("name")>-1&&o.push(p().createElement(ue.Z,{dataType:"userName",value:a,name:t,type:e})),s.indexOf("position")>-1&&o.push(p().createElement("span",null,r)),s.indexOf("jobnumber")>-1&&o.push(p().createElement("span",null,n)),s.length>0&&this.setState({watermark:o.map((d,m)=>p().createElement("span",{key:m},d))})},this.handleError=c=>{var s=this.props.onError;s&&s(c)},this.getImageUrl=(0,S.Z)(b().mark(function c(){var s,t,a,e,n,r,o,d,m,h;return b().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(s=u.props,t=s.resourceInfo,a=s.t,e=t.playId,n=t.url,r=t.storageType,o=n,!r){g.next=21;break}if(r!=="ALIBABA_PRIVATE"){g.next=15;break}return g.next=7,(0,T.J7)(e);case 7:if(d=g.sent,!d){g.next=12;break}o=d,g.next=13;break;case 12:return g.abrupt("return",L.default.info(a("privateCloud.docReadError")));case 13:g.next=21;break;case 15:if(r!=="LOCAL"){g.next=21;break}return g.next=18,Ae(e);case 18:m=g.sent,h=m.data,h.code===0&&(o="".concat(n,"?auth_key=").concat(h.data.auth_key));case 21:u.setState({imageUrl:[o]},()=>{var I=u.state.imageUrl,O="image-business",K=document.querySelectorAll(".".concat(O,"-image img"));K.forEach((j,N)=>{j.onerror=()=>{u.handleError(I[N])}})});case 22:case"end":return g.stop()}},c)}))}componentDidMount(){this.getImageUrl(),this.getInfoFromSettings(),new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",paginationClickable:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next"})}render(){var u="image-business",c=this.props.resourceInfo,s=c.preview,t=s===void 0?!1:s,a=this.state,e=a.watermark,n=a.imageUrl;return p().createElement("div",{className:u},p().createElement(Oe.Z,{scenes:"image"}),p().createElement(ae.Z,{className:"".concat(u,"-carousel")},n.map((r,o)=>p().createElement("div",{className:"".concat(u,"-image"),key:o.toString()},p().createElement(ne.Z,{src:r,onLoad:this.onImageLoad,ref:this.getImageInstance,preview:t})))))}}ge.defaultProps={prefixCls:"watch-image-page"};var be=(0,D.$j)(he)((0,l.Z)()(ge)),se=J=>({userInfo:J.user});class ie extends p().Component{constructor(){var u;super(...arguments);u=this,this.state={htmlWatermark:[],watermark:""},this.getInfoFromSettings=(0,S.Z)(b().mark(function c(){var s,t,a;return b().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,T.Gw)();case 2:s=n.sent,t=[{type:"dynamic_watermark",name:"htmlWatermark",resourceType:"html"}],a=(0,E.RG)(s,t),u.setState(a,()=>{u.renderWatermark()});case 6:case"end":return n.stop()}},c)})),this.renderWatermark=()=>{var c=this.props.userInfo,s=this.state.htmlWatermark,t=c.name,a=c.unionid,e=c.sourceType,n=c.jobNumber,r=c.position,o=[];s.indexOf("name")>-1&&o.push(p().createElement(ue.Z,{dataType:"userName",value:a,name:t,type:e})),s.indexOf("position")>-1&&o.push(p().createElement("span",null,r)),s.indexOf("jobnumber")>-1&&o.push(p().createElement("span",null,n)),s.length>0&&this.setState({watermark:o.map((d,m)=>p().createElement("span",{key:m},d))})},this.saveProgress=()=>{var c=this.props,s=c.studyInfo,t=c.mode,a=c.userInfo,e=a.enterpriseId,n=a.id;t==="learn"&&(0,E.Gp)({studyInfo:s,enterpriseId:e,userId:n})}}componentDidMount(){this.getInfoFromSettings(),this.saveProgress()}render(){var u="html-business",c=this.props.resourceInfo,s=c.url,t=this.state.watermark;return p().createElement("div",{className:u},p().createElement("div",{className:"".concat(u,"__html-watermark")},t),p().createElement("iframe",{title:"html",className:"".concat(u,"_iframe"),src:s}))}}var pe=(0,D.$j)(se)((0,l.Z)()(ie)),fe=i(57068),De=i(1164),Ve=J=>({userInfo:J.user});class Re extends p().PureComponent{constructor(){super(...arguments);this.getHost=u=>{var c=u.split("//"),s=c[1].split("/");return[c[0],s[0]].join("//")},this.getScormUrl=()=>{var u=this.props,c=u.studyInfo,s=u.mode,t=u.userInfo,a=u.resourceInfo,e=u.from,n=t.enterpriseId,r=t.id,o=a.url,d=this.getHost(o);if(s==="learn"){var m=(0,Z.Z)({userId:r,enterpriseId:n,access_token:localStorage.token,from:e,scormUrl:encodeURIComponent(o),platform:"pc",enterpriseApi:"".concat("https://app123492.eapps.dingtalkcloud.com")},c);return"".concat(d).concat("/unzip_file/coolcollege-scorm/prod/scorm.html","?").concat(fe.stringify(m))}return"".concat(d,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(o))},this.handleOpenScormLink=u=>{De.Z.targetTo({path:u,isExternalLink:!0})}}render(){var u=this.props.t,c="scorm-business",s=this.getScormUrl(),t=(0,Ze.UI)("SCORM_EXTERNAL_WATCH");return p().createElement("div",{className:c},t?p().createElement("div",{className:"".concat(c,"_scorm")},p().createElement("img",{className:"".concat(c,"_scorm_img"),src:"".concat("https://oss.coolcollege.cn","/1794254238973562880.png"),alt:""}),p().createElement("h5",null,u("resourcePlay.scormTip")),p().createElement(C.Z,{type:"primary",onClick:()=>this.handleOpenScormLink(s)},u("resourceLibrary.h5LinkPlayButton"))):p().createElement("iframe",{title:"scorm",className:"".concat(c,"_iframe"),src:s}))}}var _e=(0,D.$j)(Ve)((0,l.Z)()(Re));class ke extends p().Component{render(){var u=this.props,c=u.visible,s=u.title,t=u.onCancel,a=u.t,e=p().createElement("span",null,s);return p().createElement(Le.ZP,{visible:c,title:e,onCancel:t,footer:null},p().createElement("div",{className:"ban-preview"},p().createElement("div",{className:"ban-preview-center"},p().createElement("img",{src:A(),alt:"picture"}),p().createElement("h2",null,a("localStorage.tip")),p().createElement("p",null,a("localStorage.banPreview"))),p().createElement("hr",null),p().createElement(C.Z,{type:"primary",className:"know",onClick:t},a("localStorage.onKnow"))))}}var $e=(0,l.Z)()(ke);class He extends f.Component{constructor(){var u;super(...arguments);u=this,this.state={showBan:"",fullScreen:!1},this.onCancel=()=>{this.setState({showBan:"",fullScreen:!1})},this.onCancelModel=c=>{var s=this.props.previewInfo,t=s.onCancel;this.onCancel(),t(c)},this.onGetVideoBusiness=c=>{var s=this.props.onRef,t=s===void 0?()=>{}:s;this.videoBusiness=c,t(c)},this.onFullScreen=()=>{var c=this.state.fullScreen;this.setState({fullScreen:!c})},this.handleJudgeNetwork=(0,S.Z)(b().mark(function c(){var s,t,a,e,n,r,o,d,m,h,v,g=arguments;return b().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(s=g.length>0&&g[0]!==void 0?g[0]:null,t=u.props,a=t.resourceInfo,e=t.watchType,n=a.storageType,r=a.playId,o=a.originUrl,d=e==="image"||e==="video"||e==="doc",m=null,s?m=s:o?m=o:m=a.url,!(d&&m&&r&&n&&n==="LOCAL")){O.next=22;break}return O.prev=7,O.next=10,(0,T.NY)(r);case 10:return h=O.sent,O.next=13,(0,T.Hy)(m,h);case 13:v=O.sent,v?u.setState({showBan:"no"}):u.setState({showBan:"yes"}),O.next=20;break;case 17:O.prev=17,O.t0=O.catch(7),u.setState({showBan:"yes"});case 20:O.next=23;break;case 22:u.setState({showBan:"no"});case 23:case"end":return O.stop()}},c,null,[[7,17]])})),this.renderOuter=()=>{var c=this.props,s=c.prefixCls,t=c.watchType,a=c.onCurrentTime,e=a===void 0?()=>{}:a;return p().createElement("div",{className:"".concat(s,"-outer")},t==="video"&&p().createElement(et,(0,H.Z)({onCurrentTime:e,onGetVideoBusiness:this.onGetVideoBusiness},this.props)),t==="doc"&&p().createElement(y,this.props),t==="image"&&p().createElement(be,(0,H.Z)({onError:this.handleJudgeNetwork},this.props)),t==="html"&&p().createElement(pe,this.props),t==="scorm"&&p().createElement(_e,this.props))},this.renderFooter=()=>{var c=this.props,s=c.resourceInfo.storageType,t=c.t,a=this.state.showBan,e=a!==""&&a==="yes";return s&&s!=="PUBLIC_CLOUD"&&e?p().createElement(C.Z,{type:"primary",className:"know",onClick:this.onCancelModel},t("localStorage.onKnow")):null}}componentDidMount(){var u=this.props.mode;u==="learn"?this.handleJudgeNetwork():this.setState({showBan:"no"})}componentDidUpdate(u){u.previewInfo.visible!==this.props.previewInfo.visible&&this.props.previewInfo.visible&&this.handleJudgeNetwork()}render(){var u=this.state,c=u.showBan,s=u.fullScreen,t=this.props,a=t.mode,e=t.previewWay,n=t.previewInfo,r=t.prefixCls,o=t.t,d=t.showEnlarge,m=t.footer,h=m===void 0?null:m,v=n.visible,g=n.destroyOnClose,I=n.title,O=c!==""&&c==="yes",K=c!==""&&c==="no";return p().createElement(f.Fragment,null,a==="preview"&&e==="popups"&&p().createElement(Le.ZP,{destroyOnClose:g,visible:v,title:I,onCancel:this.onCancelModel,footer:h||this.renderFooter(),wrapClassName:"".concat(r,"-resource ").concat(s?"".concat(r,"-full"):"")},d&&p().createElement("div",{className:"".concat(r,"-resource-out-icon"),onClick:this.onFullScreen},s?p().createElement(k.Z,{className:"".concat(r,"-resource-icon")}):p().createElement(V.Z,{className:"".concat(r,"-resource-icon")})),p().createElement("div",{className:"".concat(r,"-inner")},!v&&p().createElement(P.Z,{size:"large"}),v&&K&&this.renderOuter(),O&&p().createElement(Q,null))),(a==="learn"||e==="page")&&K&&this.renderOuter(),(a==="learn"||e==="page")&&p().createElement($e,{visible:O,title:I||o("questionn.warmHint"),onCancel:this.onCancel}))}}He.defaultProps={prefixCls:"cl-resource-play",from:"",mode:"learn",previewWay:"popups",previewInfo:{visible:!1,destroyOnClose:!0,title:"",onCancel:()=>{}},watchType:"h5",studyInfo:{courseId:"",studyId:"",resourceId:"",studyType:""},resourceInfo:{},autoPlay:!0,draggable:!0,needCurrentTime:!1,showQuality:!0,showEnlarge:!0};var Ge=(0,l.Z)("translation",{withRef:!0})(He)},41225:function(we,re,i){"use strict";i.d(re,{Hy:function(){return S},NY:function(){return R},Gw:function(){return b},sH:function(){return k},BR:function(){return f},qp:function(){return V},Xc:function(){return l},J7:function(){return p}});var F=i(57361),P=i(9754),G=i.n(P),C=i(10237),H=i(37055),S=function(){var Y=(0,F.Z)(G().mark(function A(){var W,Q,Z,w,L,D,E,T=arguments;return G().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return W=T.length>0&&T[0]!==void 0?T[0]:"",Q=T.length>1&&T[1]!==void 0?T[1]:"",Z="",W.startsWith("http")?(w=W.split("//")[1].trim(),L=w.split("/")[0],Z="https://".concat(L,"/cms/ticket")):(D=W.split("/")[0],Z="https://".concat(D,"/cms/ticket")),M.prev=4,M.next=7,C.ZQ.get({url:Z,params:{ticket:Q}});case 7:if(E=M.sent,!(E.status===200||E.status===403)){M.next=10;break}return M.abrupt("return",Promise.resolve(!0));case 10:return M.abrupt("return",Promise.resolve(!1));case 13:return M.prev=13,M.t0=M.catch(4),M.abrupt("return",Promise.reject(new Error("false")));case 16:case"end":return M.stop()}},A,null,[[4,13]])}));return function(){return Y.apply(this,arguments)}}(),R=function(){var Y=(0,F.Z)(G().mark(function A(W){var Q,Z;return G().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,C.ZQ.get({url:H.ZP.local.getTicket(W)});case 2:if(Q=L.sent,Z=Q.data,Z.code!==0){L.next=6;break}return L.abrupt("return",Promise.resolve(Z.data.ticket));case 6:return L.abrupt("return",Promise.resolve(""));case 7:case"end":return L.stop()}},A)}));return function(W){return Y.apply(this,arguments)}}(),b=function(){var Y=(0,F.Z)(G().mark(function A(){var W;return G().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,C.WY.get({url:H.ZP.advancedSetting.getSetting(),params:{page_size:9999,page_number:1}});case 2:return W=Z.sent,Z.abrupt("return",W.data.list);case 4:case"end":return Z.stop()}},A)}));return function(){return Y.apply(this,arguments)}}(),f=function(){var Y=(0,F.Z)(G().mark(function A(W){var Q,Z,w;return G().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,C.WY.get({url:H.ZP.localStorage.getPravateVideoUrl(W)});case 2:if(Q=D.sent,Q.data.code!==0){D.next=6;break}return Z=Q.data.data.videoPlayInfo,w=Z===void 0?"":Z,D.abrupt("return",w);case 6:return D.abrupt("return","");case 7:case"end":return D.stop()}},A)}));return function(W){return Y.apply(this,arguments)}}(),p=function(){var Y=(0,F.Z)(G().mark(function A(W){var Q,Z,w;return G().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return Q=H.ZP.localStorage.getPravateDocUrl(W),D.prev=1,D.next=4,C.WY.get({url:Q});case 4:if(Z=D.sent,w=Z.data,!(w.code===0&&w.data)){D.next=8;break}return D.abrupt("return",w.data.docResourceDownloadUrl||"");case 8:return D.abrupt("return","");case 11:return D.prev=11,D.t0=D.catch(1),D.abrupt("return","");case 14:case"end":return D.stop()}},A,null,[[1,11]])}));return function(W){return Y.apply(this,arguments)}}(),k=function(A){var W=A.studyInfo,Q=A.progress,Z=A.recent_start,w=A.page_count,L=A.enterpriseId,D=A.userId,E=A.token,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,z,M=W.studyType;if(M==="studyTask"&&(z=H.ZP.SaveProgress.studySaveProgress(W)),(M==="course"||M==="enterprise")&&(z=H.ZP.SaveProgress.enterpriseCourseSaveProgress(W)),M==="studyProject"&&(z=H.ZP.SaveProgress.projectSaveProgress(W)),M==="platform"&&(z="".concat(H.ZP.SaveProgress.platformCourseSaveProgress(W))),(T||M==="platform")&&(z+="?enterprise_id=".concat(L,"&user_id=").concat(D)),T)return z+="&access_token=".concat(E||localStorage.getItem("token")),z;var U={progress:Q,recent_start:Z,tempTime:Date.parse(new Date)};return w&&(U.page_count=w),W.evaluationId&&(U.evaluation_id=W.evaluationId),C.WY.post({url:z,data:U})},V=Y=>{var A=Y.popupId,W=Y.planId,Q=Y.resourceId,Z=Y.type;return C.WY.post({url:H.ZP.TaskStudyRecord.setRandomPopupRecord(W),data:{course_id:Q,terminal_type:"PC",popup_id:A,type:Z}})},l=(Y,A)=>{var W=H.ZP.SaveProgress.reportStatusInterval(Y);return C.WY.post({url:W,data:A})}},21594:function(we,re,i){"use strict";i.d(re,{pu:function(){return H},RG:function(){return S},Gp:function(){return R},O8:function(){return b}});var F=i(88986),P=i(69164),G=i(38642),C=i(41225),H=f=>{var p="";switch(f){case"myObligatoryTask":case"myElectiveTask":case"myTestTask":p="studyTask";break;case"enterprise":p="enterprise";break;case"courseProject":p="studyProject";break;case"platform":case"purchased":p="platform";break;default:break}return p},S=(f,p)=>{var k={};return p.forEach(V=>{var l=f.find(Z=>Z.type===V.type);if(l)if(V.type==="document_duration_limit"){var Y=l.action_list,A=Y.find(Z=>Z.type==="random_popup_verification");!(0,G.UI)("RANDOM_POPUP_VERIFY")||!A?k[V.name]="CLOSE":k[V.name]=A.param.checked==="true"?"OPEN":"CLOSE"}else if(V.type==="document_player"){var W=JSON.parse(l.actions);W.forEach(Z=>{Z.param.checked==="true"&&(k[V.name]=Z.type)})}else if(V.type==="dynamic_watermark"){var Q=l.action_list;Q.forEach(Z=>{Z.type===V.resourceType&&Z.param.checked==="true"&&(k[V.name]=Z.param.comment)})}else k[V.name]=l.switch_status}),k},R=f=>{(0,C.sH)((0,F.Z)({progress:100,recent_start:1},f)).then(p=>{p&&p.data&&(0,P.Z)(p.data.integral_info||"")})},b=f=>{var p=document.createElement("div");return p.innerHTML=f,p.childNodes[0]}},24144:function(we,re,i){"use strict";i.d(re,{G2:function(){return de},Sc:function(){return M},Ur:function(){return Ke},VI:function(){return Me},Lh:function(){return it},DZ:function(){return w},ZM:function(){return D},tX:function(){return U},VQ:function(){return W},_D:function(){return Te},iM:function(){return Ue},vx:function(){return Ae},$Y:function(){return A},ws:function(){return l},Pd:function(){return Y}});var F=i(43185),P=i(53251),G=i(62029),C=i(34792),H=i(48086),S=i(88986),R=i(33565),b=i(12924),f=i.n(b),p=i(91768),k=i(10237),V=i(37055);function l(y){var x=V.ZP.Common.upload();return k.WY.post({url:x,data:y})}function Y(y){var x=V.ZP.CourseManageList.uploadAiImage();return k.WY.post({url:x,data:y})}function A(y){var x=V.ZP.CourseManageList.saveAiImage();return k.WY.post({url:x,data:y})}function W(y){var x=y.idList,ae=V.ZP.CourseManageList.deleteAiImage();return k.WY.put({url:ae,data:{id_list:x}})}var Q=i(72387),Z=i(76343),w={IMAGE:"image"},L=y=>{var x=y.uploadConfig,ae=y.uploadType,q=y.clip,ne=y.size,ue=y.quality,he=y.t,ge=Array.isArray(y.fileList)?y.fileList:[],be=(0,b.useState)(!1),se=(0,R.Z)(be,2),ie=se[0],pe=se[1],fe=(0,b.useState)(!1),De=(0,R.Z)(fe,2),Ve=De[0],Re=De[1],_e=(0,b.useState)(0),ke=(0,R.Z)(_e,2),$e=ke[0],He=ke[1],Ge=(0,b.useState)(!1),J=(0,R.Z)(Ge,2),u=J[0],c=J[1],s=(0,b.useState)({}),t=(0,R.Z)(s,2),a=t[0],e=t[1],n=_=>{var $=_.file;q?r({file:$},q):o({file:$})},r=(_,$)=>{var X=_.file;$==="crop"&&(e(X),v())},o=_=>{var $=_.file;pe(!0);var X=new FormData;X.append("file",$),ee(X,ae).then(ce=>{var me="".concat(ce.data.data.server,"/").concat(ce.data.data.fileNewName),Ne=ce.data.data.fileNewName,ye=[(0,S.Z)({url:me,uid:Ne,name:Ne,thumbUrl:me,status:"done",response:"Server Error 500"},ce.data.data)];m({newImgList:ye})}).catch(ce=>{h({error:ce,data:{fileList:[{fileName:$.name}]}})}).finally(()=>{pe(!1)})},d=_=>{y.onUploadedListChange&&y.onUploadedListChange(_)},m=_=>{var $=_.newImgList,X=x.maxCount;y.onUploadSuccess&&y.onUploadSuccess({fileList:[...$]});var ce=[...ge,...$],me=[];typeof X=="number"&&X===1?me=$:typeof X=="number"&&ce.length>X?me=ce.slice(0,X+1):me=ce,d({fileList:me})},h=_=>{var $=_.error,X=_.data;y.onUploadFailed&&y.onUploadFailed({error:$,data:X})},v=()=>{c(!0)},g=()=>{c(!1)},I=_=>{if(y.onBeforeUpload)return y.onBeforeUpload(_);var $=x.accept;if($&&$.indexOf(_.name.split(".").pop().toLowerCase())<0)return H.default.error(he("component.imgTypeError")),!1;if(ne&&ne.value&&ne.unit){var X=ne.value,ce=ne.unit,me=ce.toLowerCase()==="kb"?_.size/1024<X:_.size/1024/1024<X;if(!me)return H.default.error("".concat(he("component.imgUploadLimit")).concat(X).concat(ce,"!")),!1}return!0},O=_=>{var $=[...ge],X=$.findIndex(ce=>ce.uid===_.uid);$.splice(X,1),d({fileList:$})},K=_=>{var $=ge.findIndex(X=>X.uid===_.uid);He($),Re(!0)},j=()=>{Re(!1)},N=_=>{var $=_.fileName,X=_.imgUrl,ce=_.fileNewName,me={url:X,uid:ce,fileName:$,name:ce,thumbUrl:X,status:"done"};m({newImgList:[me]}),c(!1)},ee=(_,$)=>$===w.IMAGE?l(_):null,oe={listType:"picture-card",accept:"*",fileList:[],beforeUpload:I,customRequest:n,onPreview:K,onRemove:O};return f().createElement(f().Fragment,null,f().createElement(P.Z,(0,G.Z)({},oe,x,y,{className:"upload_container_19fb1b0b-5573-42cb-b6a2-b39518df62cd ".concat(y.className)}),y.render((0,S.Z)((0,S.Z)({},y),{},{loading:ie}))),f().createElement(Q.Z,{visible:Ve,imgList:ge.map(_=>_.url),defaultActive:$e,onClose:j}),u&&f().createElement(Z.Z,(0,G.Z)({visible:u,file:a,widthScale:16,heightScale:9,sizeLimit:ne.value,sizeLimitUnit:ne.unit,accept:x.accept,onCancel:g,onOk:N,onUploadFailed:h,quality:ue},y.imgCropConfig)))};L.defaultProps={fileList:[],uploadType:"image",size:{},clip:"",quality:void 0};var D=(0,p.Z)()(L);function E(y){return(0,S.Z)((0,S.Z)({},y),{},{lastModified:y.lastModified,lastModifiedDate:y.lastModifiedDate,name:y.name,size:y.size,type:y.type,uid:y.uid,percent:0,originFileObj:y})}var T={IMAGE:"image",VIDEO:"video",AUDIO:"audio"},z=y=>{var x=(0,b.useRef)({fileList:[],file:{}}),ae=y.uploadConfig,q=y.size,ne=y.t;(0,b.useEffect)(()=>{x.current.fileList=y.fileList?y.fileList:[]},[y.fileList]);function ue(se){var ie=!0;if(q&&q.value&&q.unit){var pe=q.value,fe=q.unit,De=fe.toLowerCase()==="kb"?se.size/1024<pe:se.size/1024/1024<pe;De||(H.default.error("".concat(ne("component.imgUploadLimit")).concat(pe).concat(fe,"!")),ie=!1)}return ie&&(x.current.fileList=[...x.current.fileList,E(se)]),ie}function he(se){var ie=se.file,pe=se.onError,fe=se.onProgress,De=se.onSuccess,Ve=new FormData;return Ve.append("file",ie),l(Ve,{onUploadProgress:Re=>{var _e=Re.total,ke=Re.loaded;fe({percent:Math.round(ke/_e*100).toFixed(2)},ie)}}).then(Re=>{var _e=Re.data;De(_e,ie)}).catch(pe),{abort(){console.log("upload progress is aborted.")}}}var ge={listType:"text",accept:"*",beforeUpload:ue,customRequest:he,onStart(se){x.current.file=se,x.current.fileList=x.current.fileList.map(ie=>ie.uid===se.uid?(0,S.Z)((0,S.Z)({},ie),{},{status:"uploading"}):ie),y.onChange&&y.onChange(U({file:x.current.file,fileList:x.current.fileList}))},onSuccess(se,ie){x.current.file=ie,x.current.fileList=x.current.fileList.map(pe=>pe.uid===ie.uid?(0,S.Z)((0,S.Z)({},pe),{},{response:se,status:"done"}):pe),y.onChange&&y.onChange(U({file:x.current.file,fileList:x.current.fileList}))},onError(se,ie){y.onChange(U({file:x.current.file,fileList:x.current.fileList.map(pe=>pe.url?pe:(0,S.Z)((0,S.Z)({},pe),{},{status:"error"}))}))},onProgress(se,ie){var pe=se.percent;x.current.file=ie,x.current.fileList=x.current.fileList.map(fe=>fe.uid===ie.uid?(0,S.Z)((0,S.Z)({},fe),{},{percent:pe}):fe),y.onChange&&y.onChange(U({file:x.current.file,fileList:x.current.fileList}))}},be=(0,S.Z)((0,S.Z)({},ge),ae);return f().createElement(f().Fragment,null,f().createElement(P.Z,be,y.render((0,S.Z)({},y))))},M=(0,p.Z)()(z);function U(y){var x=y.file,ae=y.fileList;return{file:(0,S.Z)({},x),fileList:ae.map(q=>{var ne=q.response,ue=q.name,he=q.type,ge=q.size,be=q.status,se=q.percent,ie=q.uid,pe=q.url;if(ne){var fe=ne.data,De=ne.error;return De?(0,S.Z)((0,S.Z)((0,S.Z)({},q),fe),{},{status:"error"}):(0,S.Z)((0,S.Z)((0,S.Z)({},q),fe),{},{url:"".concat(fe.server,"/").concat(fe.fileNewName)})}return{name:ue,size:ge,type:he,percent:se,status:be,url:pe,uid:ie}})}}function B(y){var x=y.name,ae=x.match(/\.([0-9a-z]+)(?:[\?#]|$)/i),q=(0,R.Z)(ae,1),ne=q[0];switch(ne.toLowerCase()){case".mp3":return w.AUDIO;case".mp4":return w.VIDEO;case".webp":case".svg":case".png":case".gif":case".jpg":case".jpeg":case".jfif":case".bmp":case".dpg":case".ico":return w.IMAGE;default:return""}}function te(y){var x=y.split("/"),ae=x[x.length-1],q=ae.split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(q)||[""])[0]}var le=y=>f().createElement(D,(0,G.Z)({},y,{uploadConfig:(0,S.Z)((0,S.Z)({},y.uploadConfig),{},{showUploadList:!1,maxCount:1,fileList:y.fileList}),className:"sample_upload_image_container",render:x=>Te(x)}));le.defaultProps={uploadConfig:{listType:"picture-card",maxCount:1},addTitle:"",size:{value:2,unit:"MB"},fileList:[]};var de=(0,p.Z)()(le),Ie=i(20228),ve=i(11382),Se=i(7085),Ce=i(49101),Te=y=>{var x=y.uploadConfig,ae=y.loading,q=y.fileList,ne=y.addTitle,ue=y.changeTip,he=ue===void 0?"":ue,ge=y.imageContainerClassName,be=x.maxCount;return ae?f().createElement(Se.Z,null):q.length>0&&q.length<=be?f().createElement("div",{className:"avatar_list_container ".concat(ge)},f().createElement("img",{className:"avatar",src:q[0].url,alt:"img"}),he&&f().createElement("div",{className:"change_btn"},he)):f().createElement("div",{className:"avatar_select_container"},f().createElement(Ce.Z,null),f().createElement("div",{className:"avatar_select_tip"},ne))},Ue=y=>{var x=y.uploadConfig,ae=y.loading,q=y.fileList,ne=y.selectTip,ue=x.maxCount;return ae?f().createElement(Se.Z,null):q.length>=ue?null:f().createElement("div",{className:"picture_select"},f().createElement(Ce.Z,null),ne&&f().createElement("div",{className:"picture_select_tip"},ne))},Ae=y=>{var x=y.loading,ae=y.fileList,q=y.changeTip,ne=y.addTitle,ue=y.renderClassName,he=(0,R.Z)(ae,1),ge=he[0];return x?f().createElement(ve.Z,{spinning:x,indicator:f().createElement(Se.Z,{spin:!0})},f().createElement("div",{className:"class_6f5ad7a8_6cee_4858_99d0_b3dd950f662b ".concat(ue)})):ge?f().createElement("div",{className:"class_6f5ad7a8_6cee_4858_99d0_b3dd950f662b ".concat(ue)},f().createElement("img",{src:ge,alt:"image"}),f().createElement("div",{className:"change_btn"},q)):f().createElement("div",{className:"upload_btn_container ".concat(ue)},f().createElement("div",{className:"upload_btn"},f().createElement(Ce.Z,null),ne&&f().createElement("div",{className:"avatar_select_tip"},ne)))},je=y=>{var x=y.loading,ae=y.fileList,q=y.changeTip,ne=y.reset,ue=y.renderClassName,he=_slicedToArray(ae,1),ge=he[0],be=se=>{se.stopPropagation(),ne.resetEvent&&ne.resetEvent(se)};return x?React.createElement(_Spin,{spinning:x,indicator:React.createElement(LoadingOutlined,{spin:!0})},React.createElement("div",{className:"class_bf5f55ec_25c6_45b1_b5a4_f5b467257caa ".concat(ue)})):React.createElement("div",{className:"class_bf5f55ec_25c6_45b1_b5a4_f5b467257caa ".concat(ue)},React.createElement("img",{src:ge,alt:"image"}),React.createElement("div",{className:"change_btns"},React.createElement("span",{className:"operate_item operate_change"},q),React.createElement("span",{onClick:se=>{be(se)},className:"operate_item operate_reset"},ne.tip)))},Le=i(84874),Ze=y=>{var x=ae=>{y.onChange&&y.onChange(ae)};return f().createElement(M,(0,G.Z)({onChange:x,uploadType:w.VIDEO},y,{uploadConfig:(0,S.Z)({accept:"video/*",showUploadList:!1},y.uploadConfig),render:()=>f().createElement("span",{className:"icon"},f().createElement(Le.Z,{iconClass:"icon-shipinfujian",color:y.iconColor,size:"16px"}))}))};Ze.defaultProps={uploadConfig:{listType:"text"},addTitle:""};var We=(0,p.Z)()(Ze),Oe=y=>{var x=ae=>{y.onChange&&y.onChange(ae)};return f().createElement(M,(0,G.Z)({onChange:x,uploadType:w.AUDIO},y,{uploadConfig:(0,S.Z)({accept:"audio/*",showUploadList:!1},y.uploadConfig),render:()=>f().createElement("span",{className:"icon"},f().createElement(Le.Z,{iconClass:"icon-yinpinfujian",size:"16px",color:y.iconColor}))}))};Oe.defaultProps={uploadConfig:{listType:"text"},addTitle:""};var ze=(0,p.Z)()(Oe),lt=i(22385),ot=i(31097),qe=i(86506),et=i.n(qe),tt=y=>{var x=ae=>{y.onChange&&y.onChange(ae)};return f().createElement(M,(0,G.Z)({onChange:x,uploadType:w.IMAGE},y,{uploadConfig:(0,S.Z)({accept:"image/*",showUploadList:!1},y.uploadConfig),render:()=>f().createElement(f().Fragment,null,y.uploadImageIcon?y.uploadImageIcon((0,S.Z)({},y.uploadConfig)):f().createElement(ot.Z,{title:y.t("examination.uploadImgTip"),overlayStyle:{fontSize:"12px"}},f().createElement("span",{className:et()["icon-container"]},f().createElement(Le.Z,{iconClass:"icon-tupianfujian",color:"#979797",size:"16px"}))))}))};tt.defaultProps={uploadConfig:{listType:"text"},addTitle:""};var Ke=(0,p.Z)()(tt),at=i(34669),nt=i(82833),ct=i(12968),Qe=i(44208),rt=i(54549),Je=i(56653),Pe=i.n(Je),st=i(76466),Me={OPEN:"open",CLOSE:"close",CUSTOM:"custom"},Xe=y=>{var x=y.t,ae=y.preview,q=y.previewSize,ne=y.remove,ue=y.status,he=y.name,ge=y.extension,be=!ue||ue==="done",se=ue&&ue==="error",ie=y.resourceType||B({name:he,extension:ge}),pe=(0,b.useState)({mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0}),fe=(0,R.Z)(pe,2),De=fe[0],Ve=fe[1],Re=(0,b.useState)({visible:!1,destroyOnClose:!0,title:x("common.resourcePreview"),onCancel:c}),_e=(0,R.Z)(Re,2),ke=_e[0],$e=_e[1];function He(s){var t=s||window.event;t.stopPropagation(),t.cancelBubble=!0,y.onDeleteItem&&y.onDeleteItem()}function Ge(s){var t=s.percent,a=s.url;if(be)switch(ie){case w.IMAGE:return f().createElement("div",{className:Pe().cover},f().createElement(Qe.Z,{width:q,height:q,alt:"img",className:Pe()["ant-image-container"],src:a}));case w.VIDEO:return f().createElement("div",{className:Pe().cover},f().createElement("img",{className:"",src:"https://oss.coolcollege.cn/1815010117263953920.png",alt:"video"}));case w.AUDIO:return f().createElement("div",{className:Pe().cover},f().createElement("img",{className:"",src:"https://oss.coolcollege.cn/1815010117280731136.png",alt:"audio"}));default:return null}if(se)return f().createElement("div",{className:"".concat(Pe().cover," ").concat(Pe()["error-cover"])},x("component.uploadFailed"));var e=Math.floor(t);return f().createElement("div",{className:Pe().cover},f().createElement("div",{className:Pe()["cover-content"]},f().createElement(nt.Z,{showInfo:!1,strokeWidth:4,percent:Math.floor(e)}),f().createElement("span",{className:Pe()["progress-tip"]},e>0?"\u4E0A\u4F20\u4E2D...":"\u7B49\u5F85\u4E2D")))}function J(){switch(ie){case w.IMAGE:return f().createElement(Le.Z,{iconClass:"icon-FView",size:"16px",color:"#fff"});case w.VIDEO:case w.AUDIO:return f().createElement(Le.Z,{iconClass:"icon-bofang",size:"22px",color:"#fff"});default:return null}}function u(s,t){var a=t.type,e=t.url,n=t.resourceList,r=t.resourceType,o=t.index,d=s||window.event;if(d.stopPropagation(),d.cancelBubble=!0,ae!==Me.CLOSE){if(ae===Me.CUSTOM&&y.onPreview){y.onPreview({resourceList:n,resourceType:r,index:o,e:s});return}if(r.includes(w.VIDEO)||a.includes(w.AUDIO)){var m=y.extension==="mp3";Ve((0,S.Z)((0,S.Z)({},De),{},{watchType:"video",resourceInfo:{source:{FD:e,OD:e},originUrl:e,contentType:m?"audio/mp3":r},autoPlay:!0,draggable:!0})),$e((0,S.Z)((0,S.Z)({},ke),{},{visible:!0}))}}}function c(s){var t=s||window.event;t.stopPropagation(),t.cancelBubble=!0,Ve({mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0}),$e((0,S.Z)((0,S.Z)({},ke),{},{visible:!1}))}return f().createElement(f().Fragment,null,f().createElement("div",{className:Pe()["resource-item-container"],style:{width:"".concat(q,"px"),height:"".concat(q,"px")}},Ge(y),(!ue||ue==="done"||ue==="error")&&f().createElement("div",null,ae!==Me.CLOSE&&ue!=="error"&&ie!==w.IMAGE&&f().createElement("div",{className:Pe().mask,onClick:s=>{u(s,y)}},J(y)),ne&&f().createElement("div",{className:Pe().delete,onClick:He},f().createElement(rt.Z,{className:Pe()["delete-icon"]})))),ae===Me.OPEN&&ie!==w.IMAGE&&f().createElement(st.Z,(0,G.Z)({},De,{previewInfo:ke})))};Xe.defaultProps={preview:Me.OPEN,previewSize:72,remove:!0,resourceType:""};var it=(0,p.Z)()(Xe)},11449:function(we,re,i){"use strict";i.d(re,{Z:function(){return te}});var F=i(88986),P=i(33565),G=i(12924),C=i.n(G),H=i(3115),S=i(49111),R=i(19650),b=i(62029),f=i(57663),p=i(71577),k=i(91768),V=i(28216),l=i(37055),Y=i(10237);function A(le){var de=l.ZP.getHelpContentByMenuKey(),Ie={key:le};return Y.WY.get({url:de,params:Ie})}var W=i(74228),Q=i.n(W),Z=i(1164),w=i(76466),L=i(38642);class D extends C().Component{constructor(de){var Ie;super(de);Ie=this,this.getHelpContentByMenuKey=()=>{var ve=this.props.defaultMenuKey;A(ve).then(Se=>{var Ce=Se.data,Te=Ce.help_url,Ue=Ce.video_url;this.setState({videoUrl:Ue,helpUrl:Te})})},this.handleOpenHelpUrl=ve=>{if((0,L.ve)()){window.open(ve,"_blank");return}Z.Z.targetTo({path:ve,isExternalLink:!0})},this.handleOpenVideo=function(ve){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ie.props.t("helpCenter.video");Ie.setState(Ce=>({resourcePlayInfo:(0,F.Z)((0,F.Z)({},Ce.resourcePlayInfo),{},{resourceInfo:{originUrl:ve,source:{FD:ve,OD:ve},contentType:"mp4"}}),previewInfo:(0,F.Z)((0,F.Z)({},Ce.previewInfo),{},{title:Se,visible:!0,onCancel:Ie.handleCancelPreview})}))},this.handleCancelPreview=()=>{var ve=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"video",resourceInfo:{}},previewInfo:(0,F.Z)((0,F.Z)({},ve),{},{visible:!1})})},this.state={helpUrl:"",videoUrl:"",resourcePlayInfo:{autoPlay:!0,draggable:!0,mode:"preview",resourceInfo:{},watchType:"video"},previewInfo:{visible:!1,destroyOnClose:!0,title:de.t("helpCenter.video")||"\u89C6\u9891\u6307\u5BFC",onCancel:()=>{}}}}componentDidMount(){this.getHelpContentByMenuKey()}render(){var de=this.state,Ie=de.helpUrl,ve=de.resourcePlayInfo,Se=de.previewInfo,Ce=de.videoUrl,Te=this.props.t;return C().createElement("div",{className:Q().helpCenter},Ce&&C().createElement(p.Z,{type:"link",className:Q()["video-btn"],style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenVideo(Ce)},Te("helpCenter.video")),Ie&&C().createElement(p.Z,{type:"link",style:{borderWidth:"0px",padding:"0"},onClick:()=>this.handleOpenHelpUrl(Ie)},Te("helpCenter.tutorial")),C().createElement(w.Z,(0,b.Z)({},ve,{previewInfo:Se})))}}var E=le=>({defaultMenuKey:le.currentRoute.menuKey});D.defaultProps={defaultMenuKey:""};var T=(0,V.$j)(E)((0,k.Z)()(D));function z(le){var de=le.extra,Ie=localStorage.getItem("dingPersonnel"),ve=sessionStorage.getItem("dingPersonnel");return C().createElement(R.Z,null,de,Ie!=="dingPersonnel"&&ve!=="dingPersonnel"&&(0,L.eY)("COMMONEXTRA_HELP_CENTER")&&C().createElement(T,null))}var M=z,U=i(4408);function B(le){var de=(0,G.useState)({helpCenter:(0,L.eY)("HEAD_HELP_CENTER_BUT")}),Ie=(0,P.Z)(de,1),ve=Ie[0],Se=le.pageContainerParams,Ce=Se===void 0?{}:Se,Te=le.noPadding,Ue=Te===void 0?!1:Te,Ae=le.isPersonal,je=Ae===void 0?!1:Ae,Le=le.pageTitle,Ze=le.className,We=Ze===void 0?"":Ze,Oe={extra:ve.helpCenter?C().createElement(M,{extra:Ce.extra}):Ce.extra},ze=(0,F.Z)((0,F.Z)({},Ce),Oe);return C().createElement("div",{className:"page-container-content ".concat(Ue?"page-container-noPadding":""," ").concat(je?"page-container-content_personal_background":""," ").concat(We)},Le&&C().createElement(U.Z,{title:Le}),je?C().createElement(H.Z,null,le.children):C().createElement(H.Z,ze,le.children))}var te=B},18538:function(we,re,i){"use strict";i.r(re),i.d(re,{default:function(){return c}});var F=i(57663),P=i(71577),G=i(34792),C=i(48086),H=i(57361),S=i(71194),R=i(57016),b=i(18106),f=i(88108),p=i(9754),k=i.n(p),V=i(12924),l=i.n(V),Y=i(55446),A=i(91768),W=i(4408),Q=i(11449),Z=i(34215),w=i(20228),L=i(11382),D=i(93485),E=i(88986),T=i(80991),z=i(77883),M=i(21888),U=i(77576),B=i(59314),te=i(6793);function le(s){var t=s.title,a=s.warnTip,e=s.onSwitchChange,n=s.onNumberChange,r=s.label,o=s.unit,d=s.value,m=s.checked,h=s.min,v=s.max,g=v===void 0?99999:v,I=s.type,O=s.numberDisabled,K=O===void 0?!1:O,j=s.t;function N(_){!e||e(Number(_))}function ee(_){!n||n("".concat(parseInt(_)||""))}var oe=localStorage.getItem("themeColor")||"#516AE6";return l().createElement("div",{className:"sectionTitle_container"},l().createElement("div",{className:"section_title"},l().createElement("span",{className:"title"},t)),I===1&&l().createElement(l().Fragment,null,l().createElement("div",{className:"section_content_style1"},l().createElement(B.Z,{checked:m,onClick:N}),l().createElement("span",{className:"tip"},a)),l().createElement("div",{className:"section_content_style1"},l().createElement("span",{className:"today_points_ceil"}," ",r," "),l().createElement(M.Z,{size:"middle ",min:h,max:g,value:d===void 0?"":d,disabled:K,onChange:ee}),l().createElement("span",{className:"points_unit"}," ",o," "),l().createElement("span",{className:"tip valueTip"},"".concat((0,te.ZT)(j("pointsSetting.valueTips1"),h),",").concat(j("pointsSetting.valueTips2"))))),I===2&&l().createElement(l().Fragment,null,l().createElement("div",{className:"section_content_style1"},l().createElement(B.Z,{checked:m,onClick:N}),l().createElement("span",{className:"tip"},a)),l().createElement("div",{className:"section_content_style1"},l().createElement("div",{className:"InputNumber_container"},l().createElement(M.Z,{size:"middle",min:h,max:g,value:d,disabled:K,onChange:ee})),l().createElement("span",null," ".concat(o),r.match(/[\u4e00-\u9fa5]/)?"".concat(r):" ".concat(r)),l().createElement("span",{className:"tip valueTip"},(0,te.ZT)(j("pointsSetting.valueTips1"),h)))))}le.defautProps={type:1,title:"title",warnTip:"warnTip",onSwitchChange:()=>{},onNumberChange:()=>{},label:"label",unit:"\u79EF\u5206",defaultValue:0,min:0,max:0};var de=(0,A.Z)()(le),Ie=i(96486);function ve(s){var t={min:void 0,value:void 0},a=s.filter(n=>{if(n.event_code!=="100101"&&+n.status!=0)return n}).some(n=>n.daily_integral_num===0||n.daily_integral_num==="0"),e=s.filter(n=>n.status===1||n.status==="1");return a?t.min=e.reduce((n,r)=>r.event_code==="100101"?n+Number(r.single_reward_points):n+Number(r.daily_integral_num),0):t.value=e.reduce((n,r)=>r.event_code==="100101"?n+Number(r.single_reward_points):n+Number(r.daily_integral_num),0),t}function Se(s){var t=[];return s.forEach(a=>{a.list&&a.list.forEach((e,n)=>{n===0?e.typeRowSpan=a.list.length:e.typeRowSpan=0,t.push(e)})}),t}function Ce(s){var t=[];return s.forEach(a=>{t.includes(a.type)||t.push(a.type)}),t.map(a=>{var e=s.filter(n=>n.type===a);return{type:a,list:e}})}function Te(s){var t=(0,Ie.uniqBy)(s,"days");return t.length===s.length}function Ue(s){var t=s.map(a=>a.days);return t.length>0?Math.max(...t)+1:2}function Ae(s){var t=s.onSave,a=s.t,e=s.style,n=e===void 0?{}:e;function r(){t()}return l().createElement("div",{className:"points_footer",style:n},l().createElement(P.Z,{type:"primary",size:"middle",onClick:r},a("common.save")))}Ae.defaultProps={};var je=(0,A.Z)()(Ae),Le=i(49101),Ze=1,We=0,Oe=1,ze=1,lt=0,ot=1;class qe extends l().Component{constructor(t){super(t);this.onSaveBtnClick=()=>{var a=this.props.t,e=this.state.list;if(!this.valueVerification){C.default.warning("".concat(a("pointsSetting.continuousCheckVerification1")));return}var n=[],r=(0,D.Z)(this.modify),o;try{for(r.s();!(o=r.n()).done;){var d=o.value,m=(0,D.Z)(e),h;try{for(m.s();!(h=m.n()).done;){var v=h.value;if(v.id===d){n.push(v);break}}}catch(g){m.e(g)}finally{m.f()}}}catch(g){r.e(g)}finally{r.f()}},this.tableColumnValue=(a,e)=>e==="days"?!a||a<ze?ze:a:e==="number"&&(!a||a<Oe)?Oe:a,this.inputNumberBlur=()=>{var a=this.state.list;Te(a)||C.default.warning(this.props.t("pointsSetting.continuousCheckVerification1"))},this.handleInputChange=(a,e,n)=>{var r=this.props.t,o=e.id,d=this.state.list;switch(n){case"days":var m=(0,D.Z)(d),h;try{for(m.s();!(h=m.n()).done;){var v=h.value,g=v.id;if(g===o){v.days="".concat(this.tableColumnValue(parseInt(a),"days"));break}}}catch($){m.e($)}finally{m.f()}break;case"number":var I=(0,D.Z)(d),O;try{for(I.s();!(O=I.n()).done;){var K=O.value,j=K.id;if(j===o){K.number=this.tableColumnValue(parseInt(a),"number");break}}}catch($){I.e($)}finally{I.f()}break;case"status":if(!this.valueVerification){C.default.warning("".concat(r("pointsSetting.continuousCheckVerification1")));return}var N=(0,D.Z)(d),ee;try{for(N.s();!(ee=N.n()).done;){var oe=ee.value,_=oe.id;if(_===o){oe.status=a===!1?0:1,a===!0&&(oe.effect_time=new Date(new Date().toLocaleDateString()).getTime());break}}}catch($){N.e($)}finally{N.f()}break;default:console.error("switch to default")}this.setState({list:d},()=>{var $=this.props.formik,X=$.values,ce=X.sign,me=(0,E.Z)((0,E.Z)({},X),{},{sign:(0,E.Z)((0,E.Z)({},ce),{},{list:d})});this.props.onDataUpdate&&this.props.onDataUpdate(me)})},this.handleAddRules=()=>{var a=this.props,e=a.t,n=a.formik,r=this.state.list,o=n.values,d=o.sign;if(!this.valueVerification){C.default.warning("".concat(e("pointsSetting.continuousCheckVerification2")));return}if(r.length>=10){C.default.warning("".concat(e("pointsSetting.continuousCheckVerification3")));return}var m=new Date().getTime(),h={days:Ue(r),number:1,effect_time:new Date().getTime(),status:0,id:m,update:1},v=(0,E.Z)((0,E.Z)({},o),{},{sign:(0,E.Z)((0,E.Z)({},d),{},{list:[...r,h]})});this.setState({list:[...r,h]},()=>{this.props.onDataUpdate&&this.props.onDataUpdate(v)})},this.handleDel=a=>{var e=a.id,n=a.event_code,r=this.state.list,o=r.findIndex(d=>d.id===e);o>-1&&r.splice(o,1),this.setState({list:r},()=>{var d=this.props.formik,m=d.values,h=m.sign,v=h.deleted,g=v===void 0?[]:v;n&&(g.includes(n)||g.push(n));var I=(0,E.Z)((0,E.Z)({},m),{},{sign:(0,E.Z)((0,E.Z)({},h),{},{list:r,deleted:g})});this.props.onDataUpdate&&this.props.onDataUpdate(I)})},this.handleSignInStatus=a=>{this.setState({status:Number(a)},()=>{var e=this.props.formik,n=e.values,r=n.sign,o=(0,E.Z)((0,E.Z)({},n),{},{sign:(0,E.Z)((0,E.Z)({},r),{},{status:Number(a)})});this.props.onDataUpdate&&this.props.onDataUpdate(o)})},this.state={list:[],status:0},this.getRuleParams={page_number:1,page_size:100},this.valueVerification=!0,this.daysIsIn=!0}static getDerivedStateFromProps(t){var a=t.signData,e=a.list,n=a.status;return{list:e,status:n}}render(){var t=this.props.t,a=this.state,e=a.list,n=a.status;return l().createElement("div",{className:"continuous-sign-in"},l().createElement("div",{className:"content"},l().createElement("div",{className:"section_title"},l().createElement("div",{className:"title"},t("pointsSetting.continuousCheck"))),l().createElement("div",{className:"header-tip"},l().createElement(B.Z,{checked:n,onChange:r=>{this.handleSignInStatus(r)}}),l().createElement("div",{className:"tip"},t("pointsSetting.signInTip1")," ")),l().createElement("div",{className:"header-tip"},l().createElement(P.Z,{ghost:!0,type:"primary",onClick:this.handleAddRules},l().createElement(Le.Z,null),t("pointsSetting.continuousCheckAdd")),l().createElement("div",{className:"tip"}," ",t("pointsSetting.signInTip2"))),l().createElement("div",{className:"sign-in_container"},e.length>0&&e.map((r,o)=>l().createElement("div",{key:r.id,className:"sign-in-item"},l().createElement("div",{className:"sign-in-item-left"},l().createElement("span",{className:"sign-in-item-left-span"},t("pointsSetting.signInPreTip")),l().createElement(M.Z,{size:"middle ",className:"sign-in-input",min:ze,max:365,value:this.tableColumnValue(r.days,"days"),onBlur:d=>this.inputNumberBlur(d,o),onChange:d=>{this.handleInputChange(d,r,"days")}}),l().createElement("span",{className:"sign-in-item-left-spanMid"},t("pointsSetting.signInMidTip")),l().createElement(M.Z,{size:"middle ",min:Oe,max:99999,className:"sign-in-input",value:this.tableColumnValue(r.number,"number"),onBlur:d=>this.inputNumberBlur(d,o),onChange:d=>{this.handleInputChange(d,r,"number")}}),l().createElement("span",null,t("trainee.points"))),l().createElement(P.Z,{className:"delete-btn",type:"link",onClick:()=>this.handleDel(r)},t("common.delete")))))))}}var et=(0,T.$j)((0,A.Z)()(qe)),tt=i(66456),Ke=i(55313),at=i(22385),nt=i(31097),ct=i(43358),Qe=i(34041),rt=i(57119),Je=i(38642),Pe=Qe.Z.Option;class st extends l().Component{constructor(t){var a;super(t);a=this,this.handleSelectChange=()=>{},this.createTypeSelect=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return l().createElement(Qe.Z,{style:{width:120},onChange:a.handleSelectChange,defaultValue:[e[0].label?e[0].label:"\u5168\u90E8"]},e.map(n=>{var r=n.type,o=n.label;return l().createElement(Pe,{key:r},o)}))},this.state={rules:[]},this.modify=[],this.tableColumns=[{title:t.t("pointsSetting.type"),dataIndex:"type",render:(e,n)=>{var r={children:e,props:{rowSpan:n.typeRowSpan}};return r}},{title:t.t("pointsSetting.operationName"),dataIndex:"operation_name",render:(e,n)=>l().createElement("span",null,n.operation_name)},{title:t.t("pointsSetting.effectivePeriod"),dataIndex:"effective_period"},{title:t.t("pointsSetting.singleRewardPoints"),dataIndex:"single_reward_points",render:(e,n)=>{var r=n.status;return l().createElement(M.Z,{size:"middle ",min:Ze,max:99999,value:e,disabled:+r==1,onBlur:()=>this.props.onBlur(n,"single_reward_points"),onChange:o=>{this.props.onChange(parseInt(o),n,"single_reward_points")}})}},{title:l().createElement("span",null,l().createElement("span",{style:{paddingRight:"8px"}},t.t("pointsSetting.dailyIntegralNum")),l().createElement(nt.Z,{title:t.t("pointsSetting.settingValueDesc")},l().createElement(rt.Z,{style:{color:"#BFBFBF",size:"16px"}}))),dataIndex:"daily_integral_num",render:(e,n)=>{var r=n.event_code,o=n.status;return r!=="100101"?l().createElement("section",null,l().createElement(M.Z,{size:"middle ",min:We,max:99999,value:e,disabled:+o==1,onBlur:()=>this.this.props.onBlur(n,"daily_integral_num"),onChange:d=>{this.props.onChange(parseInt(d),n,"daily_integral_num")}})):l().createElement("span",{style:{color:"#bfbfbf"}},"--")}},{title:t.t("pointsSetting.effectiveTime"),dataIndex:"effective_time",align:"center",render:(e,n)=>{var r=n.status,o=n.effective_time;return r===0||r==="0"||!o?l().createElement("span",{style:{color:"#bfbfbf"}},"--"):(0,Je.p6)(o,"yyyy-MM-dd hh:mm").split(" ")[0]}},{title:t.t("pointsSetting.status"),dataIndex:"status",render:(e,n)=>l().createElement(B.Z,{checked:e===1||e==="1",onChange:r=>{this.props.onChange(r,n,"status")}})}]}static getDerivedStateFromProps(t){var a=t.rules,e=a===void 0?[]:a;return{rules:e}}render(){var t=this.props.t,a=this.state.rules;return l().createElement("div",{className:"pointsRewardRules"},l().createElement("div",{className:"section_title"},l().createElement("div",{className:"title"},t("pointsSetting.pointsRewardRules"))),l().createElement("div",{className:"content"},l().createElement(Ke.Z,{size:"small",dataSource:a,columns:this.tableColumns,pagination:!1})))}}var Me=(0,T.$j)((0,A.Z)()(st));class Xe extends l().Component{constructor(t){var a;super(t);a=this,this.onSaveBtnClick=()=>{var e=this.props.t,n=this.initRef.state.values,r=n.reward_rules,o=n.sign,d=r.rules_group,m=r.daily_integral_num,h=r.credit_exchange_num;if(m==null||m===""){var v=(0,te.ZT)(e("pointsSetting.requiredTips"),e("pointsSetting.dailyIntegralNum"));C.default.warn(v);return}if(h==null||h===""){var g=(0,te.ZT)(e("pointsSetting.requiredTips"),e("pointsSetting.pointsExchange"));C.default.warn(g);return}if(!Te(o.list)){var I=e("pointsSetting.continuousCheckVerification1");C.default.warn(I);return}var O=Ce(d),K={reward_rules:(0,E.Z)((0,E.Z)({},r),{},{scene_code:this.getRewardRuleParams.scene_code,modify:this.modify,rules_group:O,credit_exchange_event:this.credit_exchange_event,credit_exchange_group:this.credit_exchange_group}),sign:o};this.saveRules(K)},this.getRules=(0,H.Z)(k().mark(function e(){var n,r,o,d,m,h,v,g,I,O,K,j,N,ee,oe;return k().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,Z.kw)();case 2:n=$.sent,r=n.data,o=r.reward_rules,d=o===void 0?{}:o,m=r.sign,h=d.rules_group,v=h===void 0?[]:h,g=d.credit_exchange_event,I=d.credit_exchange_group,O=d.daily_integral_status,K=d.daily_integral_num,j=d.credit_exchange_num,N=d.credit_exchange_status,ee=Se(v),oe={reward_rules:{daily_integral_status:O,daily_integral_num:K,credit_exchange_num:j,credit_exchange_status:N,rules_group:ee},sign:(0,E.Z)((0,E.Z)({},m),{},{deleted:[]})},a.credit_exchange_event=g,a.credit_exchange_group=I,a.modify=[],a.setState({initialValues:oe,loading:!1},()=>{a.initRef.setValues(oe)});case 12:case"end":return $.stop()}},e)})),this.handleRulesByType=e=>{var n=[];return e.forEach(r=>{r.list&&r.list.forEach((o,d)=>{d===0?o.typeRowSpan=r.list.length:o.typeRowSpan=0,n.push(o)})}),n},this.saveRules=e=>{var n=this.props.t;this.setState({loading:!0}),(0,Z.Cu)(e).then(r=>{var o=r.data,d=o===void 0?{}:o,m=d.code,h=d.msg;m===0?(C.default.success("".concat(n("study.operateSuccess"),"!")),this.setState({loading:!1}),this.getRules()):(C.default.error(h||"".concat(n("study.operateFailedTryAgain"),"!")),this.setState({loading:!1}))})},this.handleTableValue=(e,n)=>n==="single_reward_points"?e!==void 0&&e>=Ze?e:Ze:n==="daily_integral_num"?e!==void 0&&e>=We?e:We:e,this.handleRewardRulesChange=(e,n,r)=>{var o=n.event_code,d=this.initRef.state.values,m=d.reward_rules,h=m.rules_group,v=m.daily_integral_num;switch(r){case"single_reward_points":var g=(0,D.Z)(h),I;try{for(g.s();!(I=g.n()).done;){var O=I.value,K=O.event_code;if(K===o){O.single_reward_points=this.handleTableValue(e,"single_reward_points");break}}}catch(Ye){g.e(Ye)}finally{g.f()}break;case"daily_integral_num":var j=(0,D.Z)(h),N;try{for(j.s();!(N=j.n()).done;){var ee=N.value,oe=ee.event_code;if(oe===o){ee.daily_integral_num=this.handleTableValue(e,"daily_integral_num");break}}}catch(Ye){j.e(Ye)}finally{j.f()}break;case"status":var _=(0,D.Z)(h),$;try{for(_.s();!($=_.n()).done;){var X=$.value,ce=X.event_code;if(ce===o){X.status=e===!1?0:1,e===!0&&(X.effective_time=new Date(new Date().toLocaleDateString()).getTime());break}}}catch(Ye){_.e(Ye)}finally{_.f()}break;default:console.error("switch to default")}this.modify.includes("100100")||this.modify.push("100100"),this.modify.includes(o)||this.modify.push(o);var me=ve(h),Ne=me.min,ye=me.value,Ee=ye!==void 0?ye:v,Fe=Ne!==void 0?Ne:0,Be=(0,E.Z)((0,E.Z)({},d),{},{reward_rules:(0,E.Z)((0,E.Z)({},m),{},{rules_group:h,daily_integral_num:Ee<Fe?Fe:Ee})});this.setState({initialValues:Be},()=>{this.initRef.setValues(Be)})},this.handleCommonChange=(e,n)=>{var r=this.initRef.state.values,o=r.reward_rules;switch(n){case"daily_integral_status":case"daily_integral_num":this.modify.includes("100100")||this.modify.push("100100");break;case"credit_exchange_status":case"credit_exchange_num":this.modify.includes(this.credit_exchange_event)||this.modify.push(this.credit_exchange_event);break;default:console.error("switch to default")}var d=(0,E.Z)((0,E.Z)({},r),{},{reward_rules:(0,E.Z)((0,E.Z)({},o),{},{[n]:e})});this.setState({initialValues:d},()=>{this.initRef.setValues(d)})},this.handleRewardRulesBlur=(e,n)=>{var r=e.event_code,o=e.daily_integral_num,d=e.single_reward_points,m=this.initRef.state.values,h=m.reward_rules,v=h.rules_group;if(o!==0){switch(n){case"single_reward_points":var g=(0,D.Z)(v),I;try{for(g.s();!(I=g.n()).done;){var O=I.value,K=O.event_code;if(K===r){d>O.daily_integral_num&&(O.single_reward_points=O.daily_integral_num);break}}}catch($){g.e($)}finally{g.f()}break;case"daily_integral_num":var j=(0,D.Z)(v),N;try{for(j.s();!(N=j.n()).done;){var ee=N.value,oe=ee.event_code;if(oe===r){o<ee.single_reward_points&&(ee.single_reward_points=o);break}}}catch($){j.e($)}finally{j.f()}break;default:console.error("switch to default")}var _=(0,E.Z)((0,E.Z)({},m),{},{reward_rules:(0,E.Z)((0,E.Z)({},h),{},{rules_group:v})});this.setState({initialValues:_},()=>{this.initRef.setValues(_)})}},this.handleDataUpdate=e=>{this.setState({initialValues:e},()=>{this.initRef.setValues(e)})},this.state={loading:!0,initialValues:{reward_rules:{rules_group:[{type:"",list:[]},{type:"",list:[]}]},sign:{rules:{list:[]},status:""}}},this.modify=[],this.credit_exchange_event="",this.credit_exchange_group="",this.getRewardRuleParams={scene_code:1001,page_number:1,page_size:99999}}componentDidMount(){this.getRules()}componentWillUnmount(){}render(){var t=this.state,a=t.loading,e=t.initialValues,n=e.reward_rules,r=n===void 0?{}:n,o=r.rules_group,d=o===void 0?[]:o,m=r.daily_integral_num,h=this.props.t,v=ve(d),g=v.min,I=v.value,O=g!==void 0?g:0,K=I!==void 0?I:m;return l().createElement("div",{className:"integrate-rules"},l().createElement(L.Z,{spinning:a},!a&&l().createElement(T.J9,{ref:j=>{this.initRef=j},initialValues:e,onSubmit:this.props.onSubmit,render:j=>{var N=j.values,ee=N.reward_rules,oe=N.sign;return l().createElement("div",{className:"integrate-rules-form"},l().createElement(de,{title:h("pointsSetting.dailyIntegralNum"),warnTip:h("pointsSetting.dailyIntegralNumTip"),label:h("pointsSetting.dailyIntegralNum_label"),unit:h("pointsSetting.points"),value:K,checked:!!Number(ee.daily_integral_status),min:O,numberDisabled:I!==void 0,onSwitchChange:_=>this.handleCommonChange(_,"daily_integral_status"),onNumberChange:_=>this.handleCommonChange(_,"daily_integral_num"),type:1}),l().createElement(Me,{onChange:this.handleRewardRulesChange,onBlur:this.handleRewardRulesBlur,onValue:this.handleTableValue,rules:ee.rules_group}),l().createElement(et,{onDataUpdate:this.handleDataUpdate,signData:oe}),l().createElement(de,{title:h("pointsSetting.pointsExchange"),warnTip:h("pointsSetting.pointsExchangeTip"),label:h("pointsSetting.pointsExchange_label"),unit:h("pointsSetting.credit"),value:ee.credit_exchange_num,checked:!!Number(ee.credit_exchange_status),min:1,onSwitchChange:_=>this.handleCommonChange(_,"credit_exchange_status"),onNumberChange:_=>this.handleCommonChange(_,"credit_exchange_num"),type:2}))}})),l().createElement(je,{onSave:this.onSaveBtnClick}))}}var it=(0,A.Z)()(Xe),y=i(62350),x=i(75443),ae=i(62029),q=i(47673),ne=i(4107),ue=i(9715),he=i(86585),ge=[{id:0,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_number1.png")},{id:1,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_number2.png")},{id:2,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_number3.png")},{id:3,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_start_1.png")},{id:4,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_start_2.png")},{id:5,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_start_3.png")},{id:6,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_yellow_1.png")},{id:7,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_yellow_2.png")},{id:8,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_yellow_3.png")},{id:9,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_yellow_tip_1.png")},{id:10,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_yellow_tip_2.png")},{id:11,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_yellow_tip_3.png")},{id:12,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_gray_1.png")},{id:13,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_gray_2.png")},{id:14,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_gray_3.png")},{id:15,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_gray_tip_1.png")},{id:16,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_gray_tip_2.png")},{id:17,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_gray_tip_3.png")},{id:18,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_brown_1.png")},{id:19,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_brown_2.png")},{id:20,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_brown_3.png")},{id:21,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_brown_tip_1.png")},{id:22,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_brown_tip_2.png")},{id:23,title:"",url:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/img/icon_brown_tip_3.png")}],be={iconData:ge},se=be.iconData;class ie extends l().Component{constructor(t){var a;super(t);a=this,this.selectBtnClick=()=>{var e=this.props.onSelectBtnClick;e&&e()},this.handleCancel=()=>{var e=this.props.onClose;e&&e()},this.iconSelected=e=>{var n=this.props.onIconSelected;n&&n(e),this.handleCancel()},this.renderIconItem=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:se,n={width:"96px",height:"96px",borderRadius:"4px",border:"2px solid #DCDFE6",cursor:"pointer"},r={width:"100%",height:"100%"};return e.map(o=>{var d=o.url,m=o.id;return l().createElement("div",{className:"icon_item",key:m,style:n,onClick:()=>{a.iconSelected(o)}},l().createElement("img",{alt:"\u7B49\u7EA7\u56FE\u6807",style:r,src:d}))})}}render(){var t=this.props,a=t.t,e=t.visible,n={display:"grid",gridTemplateColumns:"repeat(6,96px)",gridTemplateRows:"repeat(4,96px)",gridGap:"8px"},r=localStorage.getItem("themeColor")||"#516AE6";return l().createElement("div",{className:"UserLevelIconLibrary_container"},l().createElement("span",{className:"upload_btn",style:{color:r},onClick:this.selectBtnClick},a("pointsSetting.selectIconLibrary")),l().createElement("div",{className:"modal_container"},e&&l().createElement(R.Z,{title:a("pointsSetting.userLevelAdd"),width:666,height:625,visible:e,onCancel:this.handleCancel,getContainer:!1,footer:null},l().createElement("div",{classNam:"icon_content",style:n},this.renderIconItem()))))}}ie.defaultProps={visible:!1,selectedId:"",onIconSelected:s=>{console.log(s)},onClose:()=>{},onSelectBtnClick:()=>{}};var pe=(0,A.Z)()(ie),fe=i(24144);class De extends l().Component{constructor(t){var a;super(t);a=this,this.addRules=e=>{var n=e.integral,r=e.level_name,o=this.props,d=o.ruleList,m=o.editValue,h=m.id,v=this.props.refreshRules;if(h){if(n===0||d.filter(g=>g.id!==h).find(g=>+g.integral==+n)){C.default.warn("".concat(this.props.t("pointsSetting.addRulesVerificationTip"),"!"));return}}else if(n===0||d.find(g=>+g.integral==+n)){C.default.warn("".concat(this.props.t("pointsSetting.addRulesVerificationTip"),"!"));return}if(h){if(d.filter(g=>g.id!==h).find(g=>g.level_name.trim()===r)){C.default.warn("".concat(this.props.t("pointsSetting.addRulesVerificationTip2"),"!"));return}}else if(d.find(g=>g.level_name.trim()===r)){C.default.warn("".concat(this.props.t("pointsSetting.addRulesVerificationTip2"),"!"));return}this.setState({addLoading:!0}),(0,Z.Qr)(e).then(g=>{var I=g.data,O=I.msg,K=I.code;+K==1?C.default.error(O):C.default.success(O),this.setState({addLoading:!1},()=>{v&&v(),this.onAddClose()})}).catch(g=>{this.setState({addLoading:!1});var I=g.data,O=I.msg;O&&C.default.error(O)})},this.openUserLevelIconLibrary=()=>{this.levelIconLibraryVisibleToggle()},this.levelIconLibraryVisibleToggle=()=>{var e=this.state.levelIconLibraryVisible;this.setState({levelIconLibraryVisible:!e})},this.iconSelected=e=>{var n=[e];this.setState({imgList:n,levelIconValidateStatus:"success"})},this.onCancelSelected=()=>{this.levelIconLibraryVisibleToggle()},this.addBtnClick=()=>{var e=this.props.onAddBtnClick;this.setState({imgList:[],editValue:{level_icon:"",level_name:"",level_number:"",integral:""}}),e&&e()},this.onAddClose=()=>{var e=this.props.onAddClose;e&&e()},this.handleOk=()=>{this.handleSubmit()},this.handleCancel=()=>{this.onAddClose(),this.setState({levelIconValidateStatus:""})},this.uploadChange=e=>{var n=e.fileList;n.length>0&&this.setState({imgList:n,levelIconValidateStatus:"success"})},this.handleSubmit=(0,H.Z)(k().mark(function e(){var n,r,o,d,m,h,v;return k().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return n=a.props.editValue,r=a.state.imgList,r.length<1&&a.setState({levelIconValidateStatus:"error"}),o=n.id,I.prev=4,I.next=7,a.formRef.current.validateFields();case 7:d=I.sent,m=d.level_name,h=(0,E.Z)((0,E.Z)({},d),{},{level_name:m.trim(),level_icon:r[0].url,level_number:"1"}),v=a.props.editValue?(0,E.Z)((0,E.Z)({},h),{},{id:o}):h,a.addRules(v),I.next=17;break;case 14:I.prev=14,I.t0=I.catch(4),console.error("handleSubmit",I.t0);case 17:case"end":return I.stop()}},e,null,[[4,14]])})),this.state={levelIconLibraryVisible:!1,imgList:[],levelIconValidateStatus:"",editValue:{},addLoading:!1},this.formRef=l().createRef()}UNSAFE_componentWillReceiveProps(t){var a=t.editValue;a.id&&this.setState({imgList:[{url:a.level_icon}],editValue:a})}render(){var t=this.props,a=t.t,e=t.visible,n=this.state,r=n.levelIconLibraryVisible,o=n.editValue,d=n.levelIconValidateStatus,m=this.state,h=m.imgList,v=m.addLoading,g={labelCol:{span:3},wrapperCol:{span:21}},I=o.level_icon,O=o.level_name,K=o.level_number,j=o.integral,N=o.level_name?a("pointsSetting.userLevelEdit"):a("pointsSetting.userLevelAdd");return l().createElement(L.Z,{spinning:v},l().createElement("div",{className:"add_btn_container__fixed"},l().createElement(P.Z,{type:"primary",onClick:this.addBtnClick},l().createElement(Le.Z,null),a("pointsSetting.userLevelAdd")),e&&l().createElement(R.Z,{title:N,width:793,visible:e,onOk:this.handleOk,onCancel:this.handleCancel},l().createElement(he.Z,(0,ae.Z)({},g,{name:"addUserLevel",initialValues:{level_icon:I||(h.length>0?h[0].url:""),level_name:O,level_number:K,integral:j},ref:this.formRef}),l().createElement(he.Z.Item,{label:l().createElement("span",{className:"addUserLevel_level_icon"},a("pointsSetting.levelIcon")),name:"level_icon",validateStatus:d,help:d==="error"&&"".concat(a("pointsSetting.selectLevelIcon"),"\uFF01")},l().createElement("div",{className:"levelIcon_container"},l().createElement("div",{className:"levelIcon_upload_container"},l().createElement("div",{className:"levelIcon_upload"},l().createElement(fe.G2,{onUploadedListChange:this.uploadChange,fileList:h,size:{value:5,unit:"MB"},uploadConfig:{listType:"picture-card",maxCount:1},addTitle:a("component.practiceUploadPicBtnText"),imageContainerClassName:"level_avatar_upload"})),l().createElement("div",{className:"operation_container"},l().createElement(pe,{visible:r,onSelectBtnClick:this.openUserLevelIconLibrary,onClose:this.onCancelSelected,onIconSelected:this.iconSelected}))),l().createElement("div",{className:"upload_tip"},a("pointsSetting.levelIconLimit")))),l().createElement(he.Z.Item,{label:"".concat(a("pointsSetting.levelName")),name:"level_name",rules:[{required:!0,message:"".concat(a("pointsSetting.levelNameTip"),"\uFF01")}]},l().createElement(ne.Z,{placeholder:"".concat(a("pointsSetting.levelNameVerificationTip"),"\uFF01"),maxLength:10})),l().createElement(he.Z.Item,{label:"".concat(a("pointsSetting.levelIntegral")),name:"integral",rules:[{required:!0,message:"".concat(a("pointsSetting.levelIntegralVerificationTip"),"\uFF01")}]},l().createElement(M.Z,{min:j&&+j==0?0:1,max:99999,precision:0,placeholder:"".concat(a("pointsSetting.levelIntegral"),"\uFF01"),disabled:j&&+j==0}))))))}}De.defaultProps={ruleList:[],visible:!1,onAddClose:()=>{},onAddBtnClick:()=>{},refreshRules:()=>{},editValue:{}};var Ve=(0,A.Z)()(De);class Re extends l().Component{constructor(t){var a;super(t);a=this,this.computeHeight=()=>{var e=document.documentElement.clientHeight,n=e-536;this.setState({computeHeight:n})},this.getRules=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.ruleParams;a.setState({dataLoading:!0}),(0,Z.Cl)(e).then(n=>{var r=n.data,o=r.list;a.setState({dataLoading:!1,list:o})})},this.addBtnClick=()=>{var e=this.state.list;if(this.setState({editValue:{level_icon:"",level_name:"",level_number:"",integral:""}}),e.length>=50){C.default.warning("".concat(this.props.t("pointsSetting.continuousCheckVerification3")));return}this.modalVisibleToggle()},this.deleteRule=e=>{var n=e.id,r=e.integral;+r!=0&&(0,Z.pb)({id:n}).then(o=>{this.getRules();var d=o.data,m=d.msg;C.default.success(m)}).catch(o=>{var d=o.data,m=d.msg;m&&C.default.error(m)})},this.editRule=e=>{this.setState({modalVisible:!0,editValue:e})},this.modalVisibleToggle=()=>{var e=this.state.modalVisible;this.setState({modalVisible:!e})},this.state={list:[],computeHeight:0,dataLoading:!1,modalVisible:!1,editValue:{level_icon:"",level_name:"",level_number:"",integral:""}},this.formRef=l().createRef(),this.ruleParams={page_number:1,page_size:99999},this.tableColumns=[{title:t.t("pointsSetting.icon"),dataIndex:"level_icon",render:e=>l().createElement("img",{className:"level_icon",src:e,alt:"avatar"})},{title:t.t("pointsSetting.level2"),dataIndex:"level_name",render:e=>l().createElement("span",null,e)},{title:t.t("pointsSetting.levelIntegraled"),dataIndex:"integral",render:e=>l().createElement("span",null,e)},{title:t.t("pointsSetting.status"),dataIndex:"operate",render:(e,n)=>{var r=n.integral;return l().createElement("div",{className:"userLevel_operation"},l().createElement("span",{className:"cl-pointer able",onClick:()=>{this.editRule(n)}},t.t("common.edit")),l().createElement("span",{className:"cl-pointer-divide"}),+r==0?l().createElement("span",{className:"cl-pointer disable"},t.t("common.delete")):l().createElement(x.Z,{title:t.t("course.sureToDelete"),onConfirm:()=>{this.deleteRule(n)},okText:t.t("questionn.confirm"),cancelText:t.t("examing.cancel")},l().createElement("span",{className:"cl-pointer able"},t.t("common.delete"))))}}]}componentDidMount(){this.getRules(),this.computeHeight(),window.addEventListener("resize",this.computeHeight)}componentWillUnmount(){window.removeEventListener("resize",this.computeHeight)}render(){var t=this.state,a=t.computeHeight,e=t.dataLoading,n=t.modalVisible,r=t.list,o=t.editValue,d=a+230,m={height:d};return l().createElement(L.Z,{spinning:e},l().createElement("div",{className:"UserLevel"},l().createElement("div",{className:"content"},l().createElement(Ve,{visible:n,onAddClose:this.modalVisibleToggle,onAddBtnClick:this.addBtnClick,refreshRules:this.getRules,editValue:o,ruleList:r}),l().createElement("div",{className:"table_container",style:m},l().createElement(Ke.Z,{size:"small",dataSource:r,columns:this.tableColumns,pagination:!1,rowKey:"id"})))))}}var _e=(0,A.Z)()(Re),ke=i(7145),$e=i.n(ke);class He extends l().Component{constructor(t){var a;super(t);a=this,this.onSaveBtnClick=(0,H.Z)(k().mark(function e(){var n,r,o,d,m,h,v;return k().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return n=a.state,r=n.rulesList,o=n.rulesInfo,d=a.props.t,m=o.map(O=>(O.list=[],r.forEach(K=>{K.type===O.type&&O.list.push(K),delete K.typeRowSpan}),O)),I.next=5,(0,Z.E6)(m);case 5:h=I.sent,v=h.data,v.code===0?(C.default.success(d("common.saveSuccess")),a.getRules()):C.default.error(d(v.msg));case 8:case"end":return I.stop()}},e)})),this.handleTimesChange=(e,n,r)=>{var o=this.state.rulesList,d=$e()(o,{[n]:{[r]:{$set:parseInt(e)}}});this.setState({rulesList:d})},this.renderContent=(e,n)=>{var r={children:e,props:{}};return r.props.rowSpan=n.typeRowSpan,r},this.handleTableData=e=>{var n=[];e.forEach(r=>{var o=r.list,d=o===void 0?[]:o;d.forEach((m,h)=>{var v=(0,E.Z)({},m);h===0?v.typeRowSpan=d.length:v.typeRowSpan=0,n.push(v)})}),this.setState({rulesList:n,rulesInfo:e})},this.getRules=(0,H.Z)(k().mark(function e(){var n,r;return k().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a.setState({loading:!0}),d.next=3,(0,Z.A5)();case 3:n=d.sent,r=n.data,r.code===0&&a.handleTableData(r.data),a.setState({loading:!1});case 7:case"end":return d.stop()}},e)})),this.changeInputNumber=()=>{},this.handleStatus=(e,n)=>{var r=this.state.rulesList;r[n].status=Number(e),this.setState({rulesList:r})},this.state={rulesList:[],rulesInfo:[],loading:!0},this.formRef=l().createRef(),this.tableColumns=[{title:t.t("pointsSetting.rewardType"),dataIndex:"type",render:this.renderContent},{title:t.t("pointsSetting.businessAction"),dataIndex:"event_name",render:e=>e},{title:t.t("pointsSetting.contentAndRule"),dataIndex:"num",render:(e,n,r)=>l().createElement("div",null,l().createElement("span",null,n.num_prefix," "),l().createElement(M.Z,{size:"middle ",max:999,value:e,disabled:n.status,onChange:o=>{this.handleTimesChange(o,r,"num")}}),l().createElement("span",null," ",n.num_suffix))},{title:t.t("pointsSetting.extraReward"),dataIndex:"score",render:(e,n,r)=>l().createElement(M.Z,{size:"middle ",min:Ze,max:999,value:e,disabled:n.status,onChange:o=>{this.handleTimesChange(o,r,"score")}})},{title:t.t("pointsSetting.openStatus"),dataIndex:"status",render:(e,n,r)=>l().createElement(B.Z,{checked:Boolean(e),onChange:o=>this.handleStatus(o,r)})}]}componentDidMount(){this.getRules()}render(){var t=this.state,a=t.loading,e=t.rulesList,n=this.props.t;return l().createElement(L.Z,{spinning:a},l().createElement("div",{className:"integrate-task-page"},l().createElement("div",{className:"content"},l().createElement("div",{className:"desc"},n("pointsSetting.integrateTaskTip")),l().createElement("div",{className:"table_container"},!a&&l().createElement(Ke.Z,{size:"small",dataSource:e,columns:this.tableColumns,pagination:!1,rowKey:"id"})))),l().createElement(je,{onSave:this.onSaveBtnClick}))}}var Ge=(0,A.Z)()(He),J=f.Z.TabPane;class u extends l().Component{constructor(t){var a;super(t);a=this,this.resetPoints=()=>{var e=this.props.t;R.Z.confirm({title:e("upload.tip"),content:e("pointsSetting.resetPointsTip",{type:e("home.integrate")}),okText:e("common.ok"),onOk:function(){var n=(0,H.Z)(k().mark(function o(){var d,m;return k().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,Z.$E)({type:"integral"});case 2:d=v.sent,m=d.success,m==="true"&&C.default.success(e("pointsSetting.resetPointsSuccessTip",{type:e("home.integrate")}));case 5:case"end":return v.stop()}},o)}));function r(){return n.apply(this,arguments)}return r}()})},this.tabClick=e=>{this.setState({activeKey:e})},this.getResetAuth=(0,H.Z)(k().mark(function e(){var n,r,o;return k().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,Z.mw)({type:"integral"});case 2:n=m.sent,r=n.success,o=n.data,r==="true"&&a.setState({allowReset:o==="true"});case 6:case"end":return m.stop()}},e)})),this.state={activeKey:"pointsReward",allowReset:!1}}componentDidMount(){this.getResetAuth()}render(){var t=this.props,a=t.className,e=t.t,n=this.state,r=n.activeKey,o=n.allowReset,d="integrates";return l().createElement(Q.Z,{pageContainerParams:{header:{title:e("setting.integrateSetLabel")},extra:o&&l().createElement(P.Z,{type:"link",onClick:this.resetPoints},e("pointsSetting.resetPoints"))}},l().createElement(W.Z,{title:e("setting.integrateSetLabel")}),l().createElement("div",{className:"".concat(a," ").concat(d)},l().createElement("div",{className:"".concat(d,"_container")},l().createElement("div",{className:"integrates_container_content"},l().createElement(f.Z,{defaultActiveKey:"pointsRewardRules",activeKey:r,onTabClick:this.tabClick},l().createElement(J,{tab:e("pointsSetting.pointsRewardRules"),key:"pointsReward"},r==="pointsReward"&&l().createElement(it,null)),l().createElement(J,{tab:e("pointsSetting.integrateTask"),key:"integrateTask"},r==="integrateTask"&&l().createElement(Ge,null)),l().createElement(J,{tab:e("pointsSetting.userLevelRules"),key:"userLevel"},r==="userLevel"&&l().createElement(_e,null)))))))}}var c=(0,A.Z)()(u)},34215:function(we,re,i){"use strict";i.d(re,{$c:function(){return H},kw:function(){return R},Cu:function(){return b},Cl:function(){return f},pb:function(){return p},Qr:function(){return k},uk:function(){return V},cE:function(){return Y},A5:function(){return Z},E6:function(){return w},$E:function(){return L},mw:function(){return D}});var F=i(88986),P=i(10237),G=i(37055),C=G.ZP.points;function H(E){var T=C.getPointsRules();return P.WY.get({url:T,params:E}).then(z=>{var M=z.data,U=M.rules,B=U.list,te=B.map(le=>(0,F.Z)((0,F.Z)({},le),{},{key:le.rule_group_id}));return U.list=te,M.rules=U,M})}function S(E){var T=C.getPointsRules();return request.get({url:T,params:E})}function R(E){var T=C.getNewPointsRules();return P.WY.get({url:T,params:E})}function b(E){var T=C.savePointsRules();return P.WY.post({url:T,data:E})}function f(E){var T=C.getIntegralLevel();return P.WY.get({url:T,params:E})}function p(E){var T=C.deleteIntegralLevel();return P.WY.post({url:T,data:E})}function k(E){var T=C.updateIntegralLevel();return P.WY.post({url:T,data:E})}function V(E){var T=C.getContinuousCheck();return P.WY.get({url:T,params:E})}function l(E){var T=C.editContinuousCheck();return request.post({url:T,data:E})}function Y(E){var T=C.getLectureRules();return P.WY.get({url:T,params:E})}function A(E){var T=C.editLectureRules();return request.post({url:T,data:E})}function W(E){var T=C.getPointsDeduction();return request.get({url:T,params:E})}function Q(E){var T=C.editPointsDeduction();return request.post({url:T,data:E})}function Z(){var E=C.getPointsTaskRules();return P.WY.get({url:E})}function w(E){var T=C.savePointsTaskRules();return P.WY.post({url:T,data:E})}function L(E){var T=E.type,z=C.resetPoints();return P.WY.get({url:z,params:{type:T}})}function D(E){var T=E.type,z=C.getResetPointsAuth();return P.WY.get({url:z,params:{type:T}})}},9849:function(we,re,i){"use strict";i.d(re,{Ej:function(){return H},kL:function(){return S},T:function(){return R},NU:function(){return b},FL:function(){return f},fn:function(){return p},bm:function(){return k},jY:function(){return V},Vs:function(){return l},li:function(){return Y},Nl:function(){return A},YF:function(){return W},Q6:function(){return Q},zW:function(){return Z},Zv:function(){return w},Qg:function(){return L},qc:function(){return D},Ve:function(){return T},rS:function(){return z},Rh:function(){return M}});var F=i(10237),P=i(37055),G=i(38642),C={zaraFlag:(0,G.UI)("ZARA_H5")};function H(U,B){var te=P.ZP.StudyProjectList.startStudy(U);return F.WY.post({url:te,data:B})}function S(U){var B=P.ZP.Common.enroll(U);return F.WY.post({url:B})}function R(U,B){var te=U.courseId,le=P.ZP.StudyProjectList.studyProject(te);return F.WY.get({url:le,params:B})}function b(U){var B=U.id,te=C.zaraFlag?P.m1.getAssessmentProjectInfo(B):P.m1.getProjectInfo(B);return F.WY.get({url:te})}function f(U){var B=U.courseId,te=P.ZP.EnterpriseCourse.addScanCount(B);return F.WY.post({url:te})}function p(){var U=P.ZP.StudyProjectList.getAccountInfo();return F.WY.get({url:U})}function k(U){var B=P.ZP.StudyProjectList.projectCertiUrl(U);return F.WY.get({url:B})}function V(U){var B=U.courseId,te=P.ZP.Courses.like(B);return F.WY.post({url:te})}function l(U){var B=P.ZP.EnterpriseCourse.addCommentAndScore();return F.qg.post({url:B,data:U})}function Y(U){var B=P.ZP.EnterpriseCourse.getCourseComments();return F.WY.get({url:B,params:U})}function A(U){var B=P.ZP.EnterpriseCourse.addCommentAndScore();return F.qg.post({url:B,data:U})}function W(U){var B=P.ZP.EnterpriseCourse.deleteComment();return F.qg.post({url:B,data:U})}function Q(U,B){var te=P.ZP.StudyProjectList.projectStudyRecord(U);return F.WY.get({url:te,params:B})}function Z(U){var B=P.ZP.DingSpaceId.getSpaceId();return F.WY.get({url:B,params:U})}function w(U,B){var te=P.ZP.PlatformCourse.learningUrl(U);return F.WY.get({url:te,params:B})}function L(U){var B=P.ZP.MyExamTask.examIntro({examId:U});return F.WY.get({url:B})}function D(U){var B=P.ZP.MyExamTask.examCheckStatus({examId:U});return F.WY.get({url:B})}function E(U,B){var te=CONFIG.Common.getOperateLog(U);return formDataRequest.get({url:te,params:B})}function T(U,B){var te=C.zaraFlag?P.ZP.StudyProjectList.changeCustomStatus(U):P.ZP.StudyProjectList.changeStatus(U);return F.WY.post({url:te,data:B})}function z(U){var B=P.ZP.StudyProjectList.getProjectReward(U);return F.WY.get({url:B})}function M(U){var B=P.ZP.subsidyGz.subsidyCourseSetting(U);return F.WY.get({url:B})}},91648:function(we,re,i){"use strict";i.d(re,{Z:function(){return F}});function F(P,G){var C,H,S,R,C;if(H="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),C=[],S=void 0,G=G||H.length,P)for(S=0;S<P;)C[S]=H[0|Math.random()*G],S++;else for(R=void 0,C[8]=C[13]=C[18]=C[23]="-",C[14]="4",S=0;S<36;)C[S]||(R=0|Math.random()*16,C[S]=H[S===19?R&3|8:R]),S++;return C.join("")}},69164:function(we,re,i){"use strict";var F=i(34792),P=i(48086);function G(C){C&&C.length>0&&P.default.success(C)}re.Z=G},4412:function(we){we.exports="data:image/png;base64,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"}}]);
