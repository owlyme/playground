(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[3573],{97882:function(J,W,r){"use strict";var S=r(57361),E=r(43358),a=r(34041),N=r(9754),B=r.n(N),T=r(12924),d=r.n(T),f=r(91768),e=r(28216),t=r(67222),i=r(10237),l=r(37055),x=r(60667),y=a.Z.Option;class m extends d().Component{constructor(){var c;super(...arguments);c=this,this.state={data:[],value:void 0},this.handleSearch=function(){var v=(0,S.Z)(B().mark(function h(p){var C,u,P,Z,M,$,V,O;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(C=c.props,u=C.appType,P=C.appId,Z=localStorage.getItem("qyWechatBook"),M="",$=u==="wx_app"&&Z==="true"&&P==="9005",!(p&&$)){F.next=17;break}return F.prev=5,F.next=8,(0,t.F_)(p);case 8:V=F.sent,O=V.data,O.success?M=O.data:M="",F.next=17;break;case 13:F.prev=13,F.t0=F.catch(5),console.error(F.t0),M="";case 17:p?c.getUserList(p,M):c.setState({data:[]});case 18:case"end":return F.stop()}},h,null,[[5,13]])}));return function(h){return v.apply(this,arguments)}}(),this.handleChange=v=>{this.setState({value:v}),this.props.onSearch(v)},this.renderSearch=()=>{var v=this.props,h=v.t,p=v.width,C=p===void 0?360:p,u=this.state.data.map(P=>d().createElement(y,{key:P.id},d().createElement(x.Z,{dataType:"userName",value:P.user_id,name:P.user_name,type:P.source_type}),"(",d().createElement("span",{style:{color:"#939393",fontSize:"12px",marginBottom:"15px"}},P.department_names.join("/")),")"));return d().createElement(a.Z,{showSearch:!0,value:this.state.value,placeholder:h("personal.searchByName"),style:{width:C},defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:this.handleSearch,onChange:this.handleChange,notFoundContent:null,allowClear:!0},u)},this.getUserList=(v,h)=>{var p=l.ZP.OrgDialog.getUserByName(),C={user_name:h===""?v:"",filter_auth:!1,user_type:"active",userIds:h};i.WY.get({url:p,params:C}).then(u=>{this.setState({data:u.data.users})})}}render(){return d().createElement("span",null,this.renderSearch())}}W.Z=(0,e.$j)(R=>({appType:R.user.appType,appId:R.user.appId}))((0,f.Z)()(m))},87722:function(J,W,r){"use strict";var S=r(62029),E=r(81211),a=r(14965),N=r(11448),B=r(12924),T=r.n(B),d=r(91768),f=r(78138),e=r.n(f),t=r(6793),i=r(37055),l=N.Z.RangePicker;class x extends T().Component{constructor(){super(...arguments);this.state={value:[]},this.handleChange=(m,R)=>{var c=this.props,v=c.onCustomChange,h=c.timestamp;if(!m||!m.length){this.setState({value:[]},()=>{v({startTime:null,endTime:null,value:m,dateStrings:R})});return}var p=this.props,C=p.startTimeFormatter,u=C===void 0?i.XE.INITIAL_DATE_FMT.PARAMS:C,P=p.endTimeFormatter,Z=P===void 0?i.XE.INITIAL_DATE_FMT.PARAMS:P,M=h?m[0].valueOf():m[0].format(u),$=h?m[1].valueOf():m[1].format(Z),V=(0,t.jZ)(R[0])>(0,t.jZ)(R[1]);V&&R.reverse(),this.setState({value:V?[m[1],m[0]]:m},()=>{v({startTime:M,endTime:$,value:m,dateStrings:R})})},this.clearTime=()=>{this.setState({value:[]})}}componentDidMount(){var m=this.props.defaultValue;if(m&&m[0]&&m[1]){var R=m.map(c=>e()(c));this.setState({value:R})}}UNSAFE_componentWillReceiveProps(m){if(m.defaultValue&&this.props.defaultValue&&(m.defaultValue[0]!==this.props.defaultValue[0]||m.defaultValue[1]!==this.props.defaultValue[1]))if(m.defaultValue[0]&&m.defaultValue[1]){var R=m.defaultValue.map(c=>e()(c));this.setState({value:R})}else this.setState({value:[]})}render(){var m=this.props,R=m.t,c=m.showTime,v=c===void 0?!0:c,h=m.disabledDate,p=m.noRange,C=m.ranges,u=m.customerShowTime,P=u===void 0?!1:u,Z=(0,E.Z)(m,["t","showTime","disabledDate","noRange","ranges","customerShowTime"]),M=this.state.value,$=C&&JSON.stringify(C)!="{}"?C:{["".concat(R("component.lastWeek"))]:[e()().subtract("day",7),e()()],["".concat(R("component.lastMonth"))]:[e()().subtract("day",30),e()()],["".concat(R("component.lastThreeMonth"))]:[e()().subtract("month",3),e()()]};return T().createElement(l,(0,S.Z)({value:M,showTime:v?P?v:{format:i.XE.INITIAL_TIME_FMT.VIEW,defaultValue:[e()("00:00:00","HH:mm:ss"),e()("23:59:59","HH:mm:ss")]}:!1,format:i.XE.INITIAL_DATE_FMT.PARAMS,ranges:p?{}:$,disabledDate:h||t.tI,onChange:this.handleChange},Z))}}x.defaultProps={showTime:!0,disabledDate:null,noRange:!1,ranges:{},rest:{},timestamp:!1},W.Z=(0,d.Z)("translation",{withRef:!0})(x)},4408:function(J,W,r){"use strict";var S=r(12924),E=r.n(S),a=r(28216),N=r(17780),B=r(38642),T=f=>({userInfo:f.user}),d=f=>{var e=f.title;return(0,N.xX)()&&setTimeout(()=>{document.title=e},0),(0,S.useEffect)(()=>{if(e&&document.title!==e&&setTimeout(()=>{document.title=e},0),(0,B.UI)("SCALE")){document.querySelector("body").style.zoom="0.8";var t=document.querySelector(".zoom-report");t&&(t.style.zoom="1.2")}return()=>{localStorage.getItem("name")||(document.querySelector("body").style="")}},[e]),E().createElement(E().Fragment,null)};d.defautProps={title:""},W.Z=(0,a.$j)(T)(d)},1164:function(J,W,r){"use strict";var S=r(12924),E=r.n(S),a=r(76651),N=r(38642),B=r(91302),T=d=>{var f=navigator.userAgent.toLocaleLowerCase(),e=localStorage.getItem("enterpriseId"),t=(0,N.lz)(e,d.projectType),i=localStorage.getItem("dingPersonnel"),l=B.bl.includes(i),x=d.target;function y(m){if(x==="self"&&(m.preventDefault(),a.m8.push(d.to)),l){if(d.projectType==="student"){window.location.href="".concat(t,"/").concat(d.to);return}a.m8.push(d.to);return}if(dd.version){m.preventDefault();var R="";d.to.includes("?")?R="".concat(t).concat(d.to,"&ddtab=true"):R="".concat(t).concat(d.to,"?ddtab=true"),dd.biz.util.openLink({url:R})}else f.indexOf("lark")!==-1&&(window.location.href="".concat(t).concat(d.to))}return E().createElement("a",{rel:"noreferrer",href:"".concat(d.projectType==="student"?"".concat(t).concat(d.to):"#".concat(d.to)),className:"".concat(d.wrapCls," cl-pointer"),target:f.indexOf("lark")!==-1||l?"_self":d.target||"_blank",onClick:y},d.children)};T.defaultProps={to:"/",wrapCls:"",target:"",projectType:"manage"},T.targetTo=d=>{var f=d.path,e=d.from,t=d.isExternalLink,i=t===void 0?!1:t,l=d.isAsync,x=l===void 0?!1:l,y=d.openName,m=y===void 0?"_blank":y,R=d.projectType,c=R===void 0?"manage":R,v=d.ddTab,h=v===void 0?!0:v,p,C=localStorage.getItem("dingPersonnel"),u=B.bl.includes(C),P=navigator.userAgent.toLocaleLowerCase(),Z=localStorage.getItem("enterpriseId"),M=(0,N.lz)(Z,c),$=localStorage.getItem("appType"),V=navigator.userAgent.toLowerCase().indexOf("wxwork")>-1;if(dd.version){var O="";if(p=i?"":M,u&&!i){if(c==="student"){window.location.href="".concat(M).concat(f);return}a.m8.push(f);return}f.includes("?")?O="".concat(p).concat(f,"&ddtab=").concat(h):O="".concat(p).concat(f,"?ddtab=").concat(h),dd.biz.util.openLink({url:O})}else if(P.indexOf("lark")!==-1)p=i?"":M,window.location.href="".concat(p).concat(f);else if($==="wx_app"&&V&&i&&e==="imgText")p=i?"":c==="student"?"".concat(M):"#",window.wx.invoke("openDefaultBrowser",{url:"".concat(p).concat(f)});else if(p=i?"":c==="student"?"".concat(M):"#",x){var H=window.open("","_blank");setTimeout(()=>{H.location="".concat(p).concat(f)},100)}else window.open("".concat(p).concat(f),m)},W.Z=T},36202:function(J,W,r){"use strict";r.d(W,{f:function(){return v}});var S=r(62029),E=r(57361),a=r(33565),N=r(9754),B=r.n(N),T=r(12924),d=r.n(T),f=r(28175),e=r(41647),t=r(93485);function i(h){var p={};if(h.length===0)return p;var C=(0,t.Z)(h),u;try{for(C.s();!(u=C.n()).done;){var P=u.value,Z=P,M=Z.field,$=Z.fixed,V=Z.order,O=Z.show;O?O==="true"||O===!0?p[M]={fixed:$,order:V,show:!0}:p[M]={fixed:$,order:V,show:!1}:p[M]={fixed:$,order:V,show:!0}}}catch(H){C.e(H)}finally{C.f()}return p}function l(h){var p=[],C=Object.entries(h);if(C.length===0)return p;for(var u=0,P=C;u<P.length;u++){var Z=P[u],M=(0,a.Z)(Z,2),$=M[0],V=M[1],O=V.fixed,H=V.order,F=V.show;p.push({field:$,show:F,fixed:O,order:H})}return p}var x=r(38642),y=(h,p)=>{var C=(0,T.useState)(h),u=(0,a.Z)(C,2),P=u[0],Z=u[1];return(0,T.useEffect)(()=>{var M=setTimeout(()=>{Z(h)},p);return()=>{clearTimeout(M)}},[h,p]),P},m=y;function R(h,p){var C=useRef(p);useEffect(()=>{C.current=p},[p]),useEffect(()=>{var u=P=>{var Z,M;console.warn(h.current,"node.current",P.target),!((Z=(M=h.current)===null||M===void 0?void 0:M.contains(P.target))!==null&&Z!==void 0?Z:!1)&&C.current&&C.current()};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[h])}var c=!1;function v(h){var p=(0,T.useState)({}),C=(0,a.Z)(p,2),u=C[0],P=C[1],Z=h.prefixCls,M=h.rowKey,$=h.columnEmptyText,V=h.pagination,O=h.headerTitle,H=h.toolBarRender,F=h.size,q=h.loading,ne=q===void 0?!1:q,te=h.tableUUID;te||console.error("tableUUID is required!!!"),(0,T.useEffect)(()=>{function I(K){return D.apply(this,arguments)}function D(){return D=(0,E.Z)(B().mark(function K(G){var Y,j,A,X,ae,ie,oe,ce;return B().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,(0,x.Kb)((0,e.U)(G));case 2:if(Y=re.sent,j=(0,a.Z)(Y,2),A=j[0],X=j[1],!A){re.next=8;break}return re.abrupt("return");case 8:ae=X.data,ie=ae.data,oe=ie.fields,ce=i(oe)||{},ce&&(c=!1,P(ce));case 13:case"end":return re.stop()}},K)})),D.apply(this,arguments)}return te&&I(te),()=>{c=!1}},[te]);var w=m(u,1e3);(0,T.useEffect)(()=>{!c||(0,e.I)(te,l(u))},[w]);function _(I){c=!0,P(I)}return d().createElement("div",{className:"SampleProTable_container ".concat(h.className)},d().createElement(f.ZP,(0,S.Z)({size:F||"middle",rowKey:M||"id",columnEmptyText:$||!1,pagination:V||!1,options:{density:!1,fullScreen:!1,reload:!1,setting:!0},search:!1,loading:ne,headerTitle:O||"",toolBarRender:H||null,columnsStateMap:u,onColumnsStateChange:_},h,{className:"".concat(Z,"-table")})))}},41647:function(J,W,r){"use strict";r.d(W,{I:function(){return a},U:function(){return N}});var S=r(37055),E=r(10237);function a(B){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],d=S.ZP.tableHeader.save(),f={fields:T,key:B};return E.WY.post({url:d,data:f})}function N(B){var T=S.ZP.tableHeader.get(B);return E.WY.get({url:T})}},60667:function(J,W,r){"use strict";r.d(W,{Z:function(){return f}});var S=r(33565),E=r(12924),a=r.n(E),N=r(28216);function B(e){var t=e.type,i=e.openid,l=e.from,x=(0,E.useRef)(null);return(0,E.useLayoutEffect)(()=>{l==="vue"?window.parent.WWOpenData.bind(x.current):WWOpenData.bind(x.current)}),a().createElement("ww-open-data",{ref:x,type:t,openid:i})}var T=e=>{var t=e.wxWorkApiFlag,i=e.appType,l=e.from,x=(0,E.useState)(!1),y=(0,S.Z)(x,2),m=y[0],R=y[1];(0,E.useEffect)(()=>{var h=localStorage.getItem("qyWechatBook");(i!=="wx_app"||t||h==="false"||l==="vue"||l==="taro")&&R(!0)},[t,i,l]);var c=(0,E.useCallback)(()=>{var h=e.type,p=e.value,C=e.name,u=C===void 0?"":C;switch(console.warn(e,"props"),h){case"wx_sync":{var P=e.dataType;return p?a().createElement(B,{from:l,type:P,openid:p}):u}default:return u}},[e]),v=()=>{var h=e.name,p=e.dataType,C=localStorage.getItem("qyWechatBook");if(p===""||C==="false")return h;if(l==="vue"||l==="taro")return c();switch(e.appType){case"wx_app":return c();default:return h}};return m?v():e.name};T.defaultProps={value:"",name:"",type:"",dataType:"",from:""};var d=e=>({appType:e.user.appType,wxWorkApiFlag:e.user.wxWorkApiFlag}),f=(0,N.$j)(d)(T)},48479:function(J,W,r){"use strict";var S=r(62029),E=r(57361),a=r(47673),N=r(4107),B=r(9754),T=r.n(B),d=r(12924),f=r.n(d),e=r(91768),t=r(94184),i=r.n(t),l=r(28216),x=r(84874),y=r(67222),m=r(2396),R=N.Z.Search;class c extends f().Component{constructor(h){var p;super(h);p=this,this.clear=()=>{this.setState({searchValue:""})},this.renderEnterButton=()=>f().createElement(x.Z,{iconClass:"icon-icon_serarchx1"}),this.handleSearch=function(){var C=(0,E.Z)(T().mark(function u(P){var Z,M,$,V,O,H,F,q,ne;return T().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(Z=p.props,M=Z.appType,$=Z.exChange,V=Z.appId,O=localStorage.getItem("qyWechatBook"),H="",F=M==="wx_app"&&O==="true"&&$&&V==="9005",!(P&&F)){w.next=17;break}return w.prev=5,w.next=8,(0,y.F_)(P);case 8:q=w.sent,ne=q.data,ne.success?H=ne.data:H="",w.next=17;break;case 13:w.prev=13,w.t0=w.catch(5),console.error(w.t0),H="";case 17:p.props.onSearch(P,H);case 18:case"end":return w.stop()}},u,null,[[5,13]])}));return function(u){return C.apply(this,arguments)}}(),this.handleChange=C=>{var u=C.target.value,P=C.type,Z=u;this.props.LimitLength&&(0,m.$s)(u)>this.props.LimitLength&&(Z=u.substring(0,(0,m.rw)(u,this.props.LimitLength))),this.setState({searchValue:Z});var M=!1;this.props.onSearch&&(P==="click"&&(M=!0),this.props.immediate&&P==="change"&&(M=!0)),M&&this.handleSearch(u)},this.state={searchValue:""}}componentDidMount(){this.props.onRef&&this.props.onRef(this)}componentWillReceiveProps(h){h.onRef&&h.onRef(this)}render(){var h=this.state.searchValue,p=this.props,C=p.prefixCls,u=p.placeholder,P=p.width,Z=p.maxLength,M=Z===void 0?400:Z,$=p.height,V=p.immediate,O=p.value,H=i()(["".concat(C)]),F={width:P,height:$},q={};return O&&(q.value=O),f().createElement(R,(0,S.Z)({className:H,style:F,value:h,placeholder:u,onSearch:this.handleSearch,onChange:this.handleChange,maxLength:M,allowClear:!0,defaultValue:O,immediate:V.toString()},q))}}c.defaultProps={prefixCls:"cl-search-input",placeholder:"Search",value:null,onSearch:()=>{},onChange:()=>{},immediate:!1,onRef:()=>{}},W.Z=(0,l.$j)(v=>({appType:v.user.appType,appId:v.user.appId}))((0,e.Z)()(c))},56680:function(J,W,r){"use strict";r.d(W,{DC:function(){return N},Nf:function(){return B},vn:function(){return T},u7:function(){return d},lN:function(){return f},dh:function(){return e},OI:function(){return t},OV:function(){return i},rb:function(){return l},$F:function(){return x},QG:function(){return y},oh:function(){return m},ov:function(){return R}});var S=r(76651),E=r(37055),a=r(10237);function N(c){var v=E.ZP.CertificateListMangement.getTableList(S.m8.location.query.id);return a.WY.get({url:v,params:c})}function B(c){var v=E.ZP.CertificateListMangement.updateStatus();return a.qg.post({url:v,data:c})}function T(c,v){var h=E.ZP.CertificateListMangement.deleteCertificate(c);return a.qg.post({url:h,data:v})}function d(){var c=E.ZP.CertificateListMangement.certificateDetail(S.m8.location.query.id);return a.WY.get({url:c})}function f(c){var v=E.ZP.CertificateListMangement.certificateUser(S.m8.location.query.id);return a.WY.get({url:v,params:c})}function e(c){var v=E.ZP.CertificateListMangement.revokeCertificate({certificateId:S.m8.location.query.id});return a.WY.post({url:v,data:c})}function t(c){var v=E.ZP.CertificateListMangement.remindCertificate({certificateId:S.m8.location.query.id});return a.WY.post({url:v,data:c})}function i(c){var v=E.ZP.CertificateListMangement.regenerateCertificate();return a.WY.post({url:v,params:{certificate_id:c}})}function l(c){var v=E.ZP.CertificateListMangement.certificateRelation({certificateId:S.m8.location.query.id});return a.WY.get({url:v,params:c})}function x(c){var v=E.ZP.CertificateListMangement.issuance();return a.WY.post({url:v,data:c})}function y(c){var v=E.ZP.CertificateListMangement.exportUser({certificateId:S.m8.location.query.id});return a.WY.get({url:v,params:c})}function m(c){var v=E.ZP.CertificateListMangement.exportUserImg({certificateId:S.m8.location.query.id});return a.WY.get({url:v,params:c})}function R(c){var v=E.ZP.CertificateListMangement.submitTemplate({certificateId:S.m8.location.query.id});return a.WY.get({url:v,params:c})}},48336:function(J,W,r){"use strict";r.d(W,{Z:function(){return ne}});var S=r(34792),E=r(48086),a=r(57361),N=r(47673),B=r(4107),T=r(9754),d=r.n(T),f=r(12924),e=r.n(f),t=r(91768),i=r(76651),l=r(57119),x=r(56680),y=r(66456),m=r(55313),R=r(43185),c=r(53251),v=r(62029),h=r(57663),p=r(71577),C=r(28216),u=r(84874),P=r(18329),Z=r(37055),M=r(97593);class $ extends e().Component{constructor(w){super(w);this.onOk=()=>{var _=this.props.t;this.state.fileList.length&&(0,x.ov)({new_file_name:this.state.fileList[0].new_file_name}).then(I=>{I.data.check==="true"?(E.default.success(_("certificateManage.importSuccess")),this.props.onCloseModal(),this.props.onRefresh()):E.default.error(I.data.error_message)})},this.onDownloadTemplate=()=>{window.location.href="".concat(Z.ZP.CertificateListMangement.exportTemplateDown(),"?access_token=").concat(window.localStorage.getItem("token"))},this.beforeUpload=()=>{var _=this.state.modalConfig;_.okButtonProps.disabled=!0,this.setState({modalConfig:_})},this.fileChangeUpload=_=>{var I=this.props.t,D=this.state.modalConfig;if(_.file.status==="done"){E.default.success("".concat(_.file.name," ").concat(I("setting.uploadSuccess"))),_.file.response.check==="false"?this.setState({errorList:_.file.response.error_messages}):_.file.response.check==="true"&&(D.okButtonProps.disabled=!1,this.setState({modalConfig:D,errorList:[]}));var K=[{key:_.file.uid,file_name:_.file.response.file_name,new_file_name:_.file.response.new_file_name,failed_count:_.file.response.failed_count||0}];this.setState({fileList:K})}else _.file.status==="error"&&E.default.error("".concat(_.file.name," ").concat(I("setting.uploadFail")))},this.handleExportResource=()=>{(0,M.N)({page:"resourceSettings",props:this.props})},this.handleExportUser=()=>{window.location.href="".concat(Z.ZP.lineClass.userInfoDownload(),"?access_token=").concat(window.localStorage.getItem("token"))},this.state={errorList:[],fileList:[],modalConfig:{size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,okButtonProps:{disabled:!0}},uploadConfig:{name:"file",action:Z.ZP.CertificateListMangement.importTemplate,showUploadList:!1,data:{access_token:window.localStorage.getItem("token")},beforeUpload:this.beforeUpload,onChange:this.fileChangeUpload,accept:".xlsx"}}}componentDidUpdate(w){w.visible!==this.props.visible&&this.props.visible&&this.setState({errorList:[],fileList:[]})}render(){var w=this.state,_=w.uploadConfig,I=w.fileList,D=w.errorList,K=w.modalConfig,G=this.props,Y=G.prefixCls,j=G.t,A=G.visible,X=G.onCloseModal,ae=[{title:j("component.fileName"),dataIndex:"file_name",key:"uuid"},{title:j("component.failedLabel"),dataIndex:"failed_count"}];return e().createElement(P.ZP,(0,v.Z)({},K,{title:j("exam.importTemplate"),visible:A,onCancel:X,onOk:this.onOk}),e().createElement("div",{className:Y},e().createElement("div",{className:"import-question-import"},e().createElement(p.Z,{className:"import-question-import-btn",onClick:this.onDownloadTemplate},e().createElement(u.Z,{iconClass:"icon-icon_donwloadx1"}),j("component.downloadTem")),e().createElement(c.Z,(0,v.Z)({className:"import-question-import-btn right"},_),e().createElement(p.Z,{type:"primary"},e().createElement(u.Z,{iconClass:"icon-import"}),j("component.importLabel")))),e().createElement("div",{className:"import-question-table"},e().createElement(m.Z,{dataSource:I,columns:ae,bordered:!0,rowKey:ie=>ie.new_file_name,size:"middle",pagination:!1}),D.length>0?e().createElement("div",{className:"show-error-message"},e().createElement("div",{className:"tips"},e().createElement(u.Z,{iconClass:"icon-tishi"}),e().createElement("span",null,j("component.errorTips"),"\uFF1A")),e().createElement("div",{className:"error-content"},D.map((ie,oe)=>e().createElement("div",{key:oe},ie)))):null)))}}$.defaultProps={prefixCls:"additional-record-export"};var V=(0,C.$j)()((0,t.Z)()($)),O=r(6793),H=r(65202),F=B.Z.TextArea;class q extends e().Component{constructor(w){var _;super(w);_=this,this.handleRevokeCertificate=(0,a.Z)(d().mark(function I(){var D,K,G,Y,j;return d().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(D=_.state.revokeModal,K=_.props,G=K.selectedItems,Y=K.t,j=[],G.forEach(ae=>{j.push(ae.id)}),D.reason!==""){X.next=7;break}return E.default.error(Y("certificateManage.inputRevokeReason")),X.abrupt("return");case 7:(0,x.dh)({revoke_reason:D.reason,certificate_record_ids:j}).then(ae=>{_.handleCloseModal(),ae.status===200&&_.props.onSearchKey()});case 8:case"end":return X.stop()}},I)})),this.handleRemindCertificate=(0,a.Z)(d().mark(function I(){var D,K;return d().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:D=_.props.selectedItems,K=[],D.forEach(j=>{K.push(j.id)}),(0,x.OI)({type:"validity",certificate_record_ids:K}).then(j=>{_.handleCloseModal(),j.status===200&&_.props.onSearchKey()});case 4:case"end":return Y.stop()}},I)})),this.handleRetryCertificate=(0,a.Z)(d().mark(function I(){var D;return d().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:D=i.m8.location.query.id,(0,x.OV)(D).then(Y=>{_.handleCloseModal(),Y.status===200&&_.props.onSearchKey()});case 2:case"end":return G.stop()}},I)})),this.handleViewCertificate=I=>{var D=I.record;this.setState({viewModal:{visible:!0,record:D}})},this.handleOpenModal=I=>{var D=this.props.selectedItems;if(I==="import"){this.setState({userImportModal:{visible:!0}});return}if(I==="retry"){this.setState({retryModal:{visible:!0}});return}if(D.length<=0){E.default.info(this.props.t("validation.employeeNull"));return}I==="revoke"?this.setState({revokeModal:{visible:!0,reason:""}}):I==="remind"&&this.setState({remindModal:{visible:!0}})},this.handleCloseModal=()=>{this.setState({revokeModal:{visible:!1,reason:""},remindModal:{visible:!1},retryModal:{visible:!1},viewModal:{visible:!1,record:{}},userImportModal:{visible:!1}})},this.handleChange=(I,D)=>{I==="reason"&&this.setState({revokeModal:{visible:!0,reason:D.target.value}})},this.handleDownloadImg=()=>{var I=this.state.viewModal;I.record.image_url.indexOf("http://")>-1&&(I.record.image_url=I.record.image_url.replace("http://","https://"));var D=new Image;D.setAttribute("crossOrigin","anonymous"),D.onload=()=>{var K=document.createElement("canvas");K.width=D.width,K.height=D.height;var G=K.getContext("2d");G.drawImage(D,0,0,D.width,D.height);var Y=K.toDataURL("image/png"),j=document.createElement("a"),A=new MouseEvent("click");j.download=I.record.certificate_name||"photo",j.href=Y,j.dispatchEvent(A)},D.src=I.record.image_url},this.state={revokeModal:{visible:!1,reason:""},remindModal:{visible:!1},retryModal:{visible:!1},viewModal:{visible:!1,record:{}},userImportModal:{visible:!1}}}componentDidMount(){this.props.onRef(this)}render(){var w=this.props,_=w.prefixCls,I=w.t,D=w.onSearchKey,K=this.state,G=K.revokeModal,Y=K.remindModal,j=K.retryModal,A=K.viewModal,X=K.userImportModal;return e().createElement("section",null,e().createElement(P.ZP,{visible:G.visible,title:"",closable:!1,width:500,onOk:this.handleRevokeCertificate,onCancel:this.handleCloseModal,className:"".concat(_," ").concat(_,"__Revoke")},e().createElement("div",{className:"modal_title"},e().createElement(l.Z,{className:"".concat(_,"__icon")}),I("certificateManage.certificateRevokeTitle")),e().createElement("div",{className:"modal_content"},e().createElement("p",null,I("certificateManage.certificateRevokeTip")),e().createElement("p",null,e().createElement("span",{style:{color:"red"}},"*\xA0"),I("certificateManage.revokeReason"),":"),e().createElement(F,{value:G.reason,maxLength:200,onChange:this.handleChange.bind(this,"reason")}))),e().createElement(P.ZP,{visible:Y.visible,title:"",closable:!1,width:500,onOk:this.handleRemindCertificate,onCancel:this.handleCloseModal,className:"".concat(_," ").concat(_,"__remind")},e().createElement("div",{className:"modal_title"},e().createElement(l.Z,{className:"".concat(_,"__icon")}),I("certificateManage.certificateRemindTitle")),e().createElement("div",{className:"modal_content"},e().createElement("p",null,I("certificateManage.certificateRemindTip")," "))),e().createElement(P.ZP,{visible:j.visible,title:"",closable:!1,width:500,onOk:this.handleRetryCertificate,onCancel:this.handleCloseModal,className:"".concat(_," ").concat(_,"__remind")},e().createElement("div",{className:"modal_title"},e().createElement(l.Z,{className:"".concat(_,"__icon")}),I("certificateManage.certificateRetryTitle")),e().createElement("div",{className:"modal_content"},e().createElement("p",null,I("certificateManage.certificateRetryTip")," "))),e().createElement(P.ZP,{visible:A.visible,title:I("certificateManage.certificateViewTitle"),footer:null,onCancel:this.handleCloseModal,className:"".concat(_," ").concat(_,"__view")},e().createElement("section",{className:"".concat(_,"__view__imgBox")},A.record.image_url!==""&&A.record.image_url!=="fail"&&e().createElement("div",{className:"".concat(_,"__view_img_box")},e().createElement("img",{className:"".concat(_,"__view_img_box_cell"),src:A.record.image_url,alt:""})),(A.record.image_url===""||A.record.image_url==="fail")&&e().createElement("div",{className:"".concat(_,"__view_failedImg_box")},e().createElement("img",{className:"".concat(_,"__view_failedImg_box_cell"),src:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/no-certificate.png",alt:""}),A.record.image_url===""&&e().createElement("span",{className:"".concat(_,"__view_failedImg_box_text"),style:{color:(0,H.p)()}},I("certificateManage.certificateGeneration")),A.record.image_url==="fail"&&e().createElement("span",{className:"".concat(_,"__view_failedImg_box_text"),style:{color:(0,H.p)()}},I("certificateManage.certificateFailed"))),e().createElement("p",{onClick:this.handleDownloadImg,className:"".concat(_,"__view__download"),style:{color:(0,H.p)(),cursor:"pointer"},rel:"noreferrer"},I("other.downloadPictures"))),e().createElement("section",{className:"".concat(_,"__view__textBox")},e().createElement("p",{className:"certificate_name"},A.record.certificate_name),e().createElement("p",null,e().createElement("span",{className:"label"},I("certificateManage.code"),"\uFF1A"),e().createElement("span",{className:"value"},A.record.certificate_code)),e().createElement("p",null,e().createElement("span",{className:"label"},I("certificateManage.issue"),"\uFF1A"),e().createElement("span",{className:"value"},(0,O.p6)(A.record.issue_date))),e().createElement("p",null,e().createElement("span",{className:"label"},I("certificateManage.effect"),"\uFF1A"),e().createElement("span",{className:"value"},(0,O.p6)(A.record.effect_date))),e().createElement("p",null,e().createElement("span",{className:"label"},I("certificateManage.overdue"),"\uFF1A"),e().createElement("span",{className:"value"},A.record.overdue_date!==null?(0,O.p6)(A.record.overdue_date):I("certificateManage.noData"))),e().createElement("p",null,e().createElement("span",{className:"label"},I("certificateManage.sourceType"),"\uFF1A"),e().createElement("span",{className:"value"},A.record.source_type_name)),e().createElement("p",null,e().createElement("span",{className:"label"},I("certificateManage.sourceName"),"\uFF1A"),e().createElement("span",{className:"value"},A.record.source_name)),A.record.certificate_reason&&A.record.certificate_reason!==""&&e().createElement("p",null,e().createElement("span",{className:"label"},I("certificateManage.reason"),"\uFF1A"),e().createElement("span",{className:"value"},A.record.certificate_reason)),A.record.revoke_reason&&A.record.revoke_reason!==""&&e().createElement("p",null,e().createElement("span",{className:"label"},I("certificateManage.revokeReason"),"\uFF1A"),e().createElement("span",{className:"value"},A.record.revoke_reason)))),e().createElement(V,{visible:X.visible,onCloseModal:this.handleCloseModal,onRefresh:D}))}}q.defaultProps={prefixCls:"certificate-single__Modal",viewShow:!1};var ne=(0,t.Z)()(q)},15266:function(J,W,r){"use strict";r.r(W),r.d(W,{default:function(){return Ee}});var S=r(34792),E=r(48086),a=r(88986),N=r(57361),B=r(18106),T=r(88108),d=r(9754),f=r.n(d),e=r(12924),t=r.n(e),i=r(91768),l=r(56680),x=r(13062),y=r(71230),m=r(89032),R=r(15746),c=r(6793),v=r(60667);class h extends t().Component{render(){var k=this.props,s=k.prefixCls,n=k.t,o=k.certificate;return t().createElement(y.Z,{className:s},t().createElement(R.Z,{span:1,className:"".concat(s,"__avatar gutter-row")},o.preview_url!==""&&o.preview_url!=="fail"&&t().createElement("img",{src:o.preview_url}),o.preview_url===""&&t().createElement("span",null,n("certificateManage.certificateGeneration")," "),o.preview_url==="fail"&&t().createElement("span",null,n("certificateManage.certificateFailed")," ")),t().createElement(R.Z,{className:"gutter-row",span:14},t().createElement("p",{className:"".concat(s,"__name")},o.name),t().createElement("p",null,t().createElement("span",{className:"label"}," ",n("common.creator"),"\uFF1A "),t().createElement("span",{className:"value"}," ",t().createElement(v.Z,{dataType:"userName",value:o.creator_sync_user_id,name:o.create_user_name,type:o.creator_sync_source_type})),t().createElement("span",{className:"label"}," ",n("common.createTime"),"\uFF1A "),t().createElement("span",{className:"value"}," ",(0,c.p6)(o.create_time)),t().createElement("span",{className:"label"}," ",n("certificateManage.validityPeriod"),"\uFF1A "),t().createElement("span",{className:"value"}," ",o.expire_date),t().createElement("span",{className:"label"}," ",n("certificateManage.status"),"\uFF1A "),t().createElement("span",{className:"value"},o.status===0?n("common.deactivatedStr"):n("common.activatedStr"))),t().createElement("p",null,t().createElement("span",{className:"label"}," ",n("certificateManage.effectivePerson"),"\uFF1A "),t().createElement("span",{className:"value"}," ",o.validity_user_count||0),t().createElement("span",{className:"label"}," ",n("certificateManage.expiredPerson"),"\uFF1A "),t().createElement("span",{className:"value"}," ",o.overdue_user_count||0))))}}h.defaultProps={prefixCls:"certificate-single-common"};var p=(0,i.Z)()(h),C=r(43358),u=r(34041),P=r(28216),Z=r(57068),M=r(59250),$=r(13013),V=r(57663),O=r(71577),H=r(30887),F=r(99210),q=r(84391),ne=r(90631),te=r(48336),w=r(65202),_=r(86726);class I extends t().Component{constructor(k){super(k);this.onRef=s=>{this.modalRef=s},this.renderEffect=()=>{var s=this.state.allowActions,n=(0,_.H3)("certificate_export",s),o=t().createElement(F.Z,null,t().createElement(F.Z.Item,null,t().createElement("div",{onClick:this.props.handleDownloadExcel},this.props.t("certificateManage.exportNumTitle"))),t().createElement(F.Z.Item,null,t().createElement("div",{className:"stage-upload-courseware",onClick:this.props.handleDownloadFile},this.props.t("certificateManage.exportFileTitle"))));return t().createElement(t().Fragment,null,n&&t().createElement($.Z,{overlay:o},t().createElement(O.Z,{style:{background:(0,w.p)()},className:"main-btn",icon:t().createElement(q.Z,null)},this.props.t("common.exportData"))),t().createElement(O.Z,{onClick:()=>this.modalRef.handleOpenModal("revoke")},this.props.t("certificateManage.revoke")),t().createElement(O.Z,{onClick:()=>this.modalRef.handleOpenModal("remind")},this.props.t("certificateManage.remind")),t().createElement(O.Z,{onClick:()=>this.modalRef.handleOpenModal("retry")},this.props.t("certificateManage.retry")),t().createElement(O.Z,{onClick:()=>this.modalRef.handleOpenModal("import"),icon:t().createElement(ne.Z,null)},this.props.t("exam.importTemplate")))},this.renderMaturity=()=>{var s=this.state.allowActions,n=(0,_.H3)("certificate_export",s),o=t().createElement(F.Z,null,t().createElement(F.Z.Item,null,t().createElement("div",{onClick:this.props.handleDownloadExcel},this.props.t("certificateManage.exportNumTitle"))),t().createElement(F.Z.Item,null,t().createElement("div",{className:"stage-upload-courseware",onClick:this.props.handleDownloadFile},this.props.t("certificateManage.exportFileTitle"))));return t().createElement(t().Fragment,null,n&&t().createElement($.Z,{overlay:o},t().createElement(O.Z,{style:{background:(0,w.p)()},className:"main-btn",icon:t().createElement(q.Z,null)},this.props.t("common.exportData"))),t().createElement(O.Z,{onClick:()=>this.modalRef.handleOpenModal("revoke")},this.props.t("certificateManage.revoke")))},this.renderRevoke=()=>t().createElement(t().Fragment,null),this.renderRelation=()=>t().createElement(t().Fragment,null),this.state={allowActions:(0,_.V9)("certificate",this.props.userInfo.modules)}}componentDidMount(){this.props.onRef(this.modalRef)}render(){var k=this.props,s=k.prefixCls,n=k.showTypeBtn;return t().createElement("div",{className:s},n==="effect"&&this.renderEffect(),n==="maturity"&&this.renderMaturity(),n==="relation"&&this.renderRevoke(),n==="revoke"&&this.renderRelation(),t().createElement(te.Z,{onRef:this.onRef,selectedItems:this.props.selectedItems,onSearchKey:this.props.onSearchKey}))}}I.defaultProps={prefixCls:"certificate__detail__queryRow",showTypeBtn:"effect"};var D=Q=>({userInfo:Q.user,qyShield:Q.user.qyShield}),K=(0,i.Z)()((0,P.$j)(D)(I)),G=r(37055),Y=r(36202),j=r(87722),A=r(48479),X=r(1164),ae=r(97882),ie=u.Z.Option;class oe extends t().Component{constructor(k){super(k);this.onSearchKey=(s,n)=>{this.setState({params:(0,a.Z)((0,a.Z)({},this.state.params),{},{keyword:n===""?s:"",page_number:1,userIds:n})},()=>{this.props.getCertificateUser(this.state.params)})},this.onCheckboxChange=(s,n)=>{var o=[];n.forEach(g=>{o.push(g)}),this.setState({selectedItems:o})},this.onRef=s=>{this.modalButtonRef=s},this.columns=[{title:this.props.t("common.userName"),dataIndex:"user_name",key:"user_name",render:(s,n)=>{var o=n.sync_user_id,g=n.sync_source_type;return t().createElement(v.Z,{dataType:"userName",value:o,name:s,type:g})}},{title:this.props.t("authentication.certificateDetailCode"),dataIndex:"certificate_code",key:"certificate_code",render:(s,n)=>t().createElement("span",{className:"certificate_user_link cl-hover",style:{color:(0,w.p)()},onClick:()=>this.handleViewCertificate(n)},n.certificate_code)},{title:this.props.t("certificateManage.sourceName"),dataIndex:"source_name",key:"source_name"},{title:this.props.t("certificateRankingList.issuingTime"),dataIndex:"issue_date",key:"issue_date",render:(s,n)=>{var o=n.issue_date;return(0,c.p6)(o)}},{title:this.props.t("certificateRankingList.effectiveTime"),dataIndex:"effect_date",key:"effect_date",render:(s,n)=>{var o=n.effect_date;return(0,c.p6)(o)}},{title:this.props.t("certificateRankingList.expireTime"),dataIndex:"overdue_date",key:"overdue_date",render:(s,n)=>n.overdue_date!==null?(0,c.p6)(n.overdue_date):this.props.t("certificateManage.noData")}],this.handleViewCertificate=s=>{var n=this.props,o=n.appType,g=n.appId,U=n.enterpriseId,L=n.token,b=localStorage.getItem("qyWechatBook"),z=o==="wx_app"&&b==="true"&&g==="9005";if(z){var ee={enterpriseId:U,certificateId:s.id,accessToken:L,imageUrl:encodeURIComponent(s.image_url),from:""},se="".concat("https://pro.coolcollege.cn","#/certificate?").concat(Z.stringify(ee));X.Z.targetTo({path:se,isExternalLink:!0})}else this.modalButtonRef.handleViewCertificate({record:s})},this.handleSetType=s=>{this.setState({typeVal:s,params:(0,a.Z)((0,a.Z)({},this.state.params),{},{date_type:s,page_number:1})},()=>{this.props.getCertificateUser(this.state.params)})},this.handleChangeDateRange=s=>{var n=s.dateStrings;this.setState({params:(0,a.Z)((0,a.Z)({},this.state.params),{},{start_date:n[0]===""?0:(0,c.jZ)(n[0]),end_date:n[1]===""?0:(0,c.jZ)(n[1]),page_number:1})},()=>{this.props.getCertificateUser(this.state.params)})},this.handleSearchCreator=s=>{this.setState({params:(0,a.Z)((0,a.Z)({},this.state.params),{},{userIds:s||""})},()=>{this.props.getCertificateUser(this.state.params)})},this.renderLeftSearch=()=>{var s=this.state,n=s.typeVal,o=s.timeType,g=this.props,U=g.prefixCls,L=g.t;return t().createElement(t().Fragment,null,t().createElement(u.Z,{className:"".concat(U,"__timeType"),value:L("certificateManage.".concat(n)),onChange:this.handleSetType},o.map(b=>t().createElement(ie,{key:b,value:b},L("certificateManage.".concat(b))))),t().createElement(j.Z,{className:"".concat(U,"__dateRange"),type:n,showTime:!0,disabledDate:()=>!1,onCustomChange:this.handleChangeDateRange}))},this.exportExcel=()=>{var s=this.state.params;this.props.exportExcel(s)},this.exportFile=()=>{var s=this.state.params;this.props.exportFile(s)},this.renderLeftRow=()=>{var s=this.state,n=s.selectedItems,o=s.params;return t().createElement(t().Fragment,null,t().createElement(K,{onRef:this.onRef,showTypeBtn:"effect",selectedItems:n,onSearchKey:this.onSearchKey,params:o,handleDownloadExcel:this.exportExcel,handleDownloadFile:this.exportFile}))},this.toolBarRender=()=>t().createElement(t().Fragment,null,t().createElement(ae.Z,{width:"272px",onSearch:this.handleSearchCreator}),t().createElement(A.Z,{onSearch:this.onSearchKey,width:"272px",placeholder:this.props.t("searchInputPlaceholder.certificateName")})),this.handleTableChange=s=>{this.props.getCertificateUser({page_number:s.current,page_size:s.pageSize})},this.state={typeVal:"issue",timeType:["issue","effect","overdue"],selectedItems:[],params:{keyword:"",userIds:"",date_type:"issue",type:"validity"}}}componentDidMount(){this.props.onRef(this)}render(){var k=this.props,s=k.prefixCls,n=k.certificateUserSingleList,o=k.loading,g=k.certificateUserSingleTotal,U=k.paginationParams,L=this.state.selectedItems,b=(0,a.Z)((0,a.Z)({},G.XE.INITIAL_PAGINATION),{},{total:g,current:U.page_number,pageSize:U.page_size}),z={selectedRows:L,onChange:this.onCheckboxChange};return t().createElement("section",{className:"".concat(s," certificate__common ")},this.renderLeftSearch(),t().createElement(Y.f,{className:"".concat(s,"__table"),bordered:!0,columns:this.columns,rowKey:"id",dataSource:n,pagination:b,loading:o,onChange:this.handleTableChange,headerTitle:this.renderLeftRow(),rowSelection:z,toolBarRender:this.toolBarRender,tableUUID:"e670319e-1dfb-4919-84ae-8aed9481eddc"}))}}oe.defaultProps={prefixCls:"certificate__effect"};var ce=(0,P.$j)(Q=>({appType:Q.user.appType,appId:Q.user.appId,enterpriseId:Q.user.enterpriseId,token:Q.user.token}))((0,i.Z)()(oe)),de=u.Z.Option;class re extends t().Component{constructor(k){super(k);this.onSearchKey=(s,n)=>{this.setState({params:(0,a.Z)((0,a.Z)({},this.state.params),{},{keyword:n===""?s:"",page_number:1,userIds:n})},()=>{this.props.getCertificateUser(this.state.params)})},this.onCheckboxChange=(s,n)=>{var o=[];n.forEach(g=>{o.push(g)}),this.setState({selectedItems:o})},this.onRef=s=>{this.modalButtonRef=s},this.columns=[{title:this.props.t("common.userName"),dataIndex:"user_name",key:"user_name",render:(s,n)=>{var o=n.sync_user_id,g=n.sync_source_type;return t().createElement(v.Z,{dataType:"userName",value:o,name:s,type:g})}},{title:this.props.t("authentication.certificateDetailCode"),dataIndex:"certificate_code",key:"certificate_code",render:(s,n)=>t().createElement("span",{className:"certificate_user_link cl-hover",style:{color:(0,w.p)()},onClick:()=>this.handleViewCertificate(n)},n.certificate_code)},{title:this.props.t("certificateManage.sourceName"),dataIndex:"source_name",key:"source_name"},{title:this.props.t("certificateRankingList.issuingTime"),dataIndex:"issue_date",key:"issue_date",render:(s,n)=>{var o=n.issue_date;return(0,c.p6)(o)}},{title:this.props.t("certificateRankingList.effectiveTime"),dataIndex:"effect_date",key:"effect_date",render:(s,n)=>{var o=n.effect_date;return(0,c.p6)(o)}},{title:this.props.t("certificateRankingList.expireTime"),dataIndex:"overdue_date",key:"overdue_date",render:(s,n)=>n.overdue_date!==null?(0,c.p6)(n.overdue_date):this.props.t("certificateManage.noData")}],this.handleViewCertificate=s=>{var n=this.props,o=n.appType,g=n.appId,U=n.enterpriseId,L=n.token,b=localStorage.getItem("qyWechatBook"),z=o==="wx_app"&&b==="true"&&g==="9005";if(z){var ee={enterpriseId:U,certificateId:s.id,accessToken:L,imageUrl:encodeURIComponent(s.image_url),from:""},se="".concat("https://pro.coolcollege.cn","#/certificate?").concat(Z.stringify(ee));X.Z.targetTo({path:se,isExternalLink:!0})}else this.modalButtonRef.handleViewCertificate({record:s})},this.handleSetType=s=>{this.setState({typeVal:s,params:(0,a.Z)((0,a.Z)({},this.state.params),{},{date_type:s,page_number:1})},()=>{this.props.getCertificateUser(this.state.params)})},this.handleChangeDateRange=s=>{var n=s.dateStrings;this.setState({params:(0,a.Z)((0,a.Z)({},this.state.params),{},{start_date:n[0]===""?0:(0,c.jZ)(n[0]),end_date:n[1]===""?0:(0,c.jZ)(n[1]),page_number:1})},()=>{this.props.getCertificateUser(this.state.params)})},this.renderLeftSearch=()=>{var s=this.state,n=s.typeVal,o=s.timeType,g=this.props,U=g.prefixCls,L=g.t;return t().createElement(t().Fragment,null,t().createElement(u.Z,{className:"".concat(U,"__timeType"),value:L("certificateManage.".concat(n)),onChange:this.handleSetType},o.map(b=>t().createElement(de,{key:b,value:b},L("certificateManage.".concat(b))))),t().createElement(j.Z,{className:"".concat(U,"__dateRange"),type:n,showTime:!0,disabledDate:()=>!1,onCustomChange:this.handleChangeDateRange}))},this.exportExcel=()=>{var s=this.state.params;this.props.exportExcel(s)},this.exportFile=()=>{var s=this.state.params;this.props.exportFile(s)},this.renderLeftRow=()=>{var s=this.state.selectedItems;return t().createElement(t().Fragment,null,t().createElement(K,{onRef:this.onRef,showTypeBtn:"maturity",selectedItems:s,onSearchKey:this.onSearchKey,handleDownloadExcel:this.exportExcel,handleDownloadFile:this.exportFile}))},this.toolBarRender=()=>t().createElement(A.Z,{onSearch:this.onSearchKey,width:"272px",placeholder:this.props.t("searchInputPlaceholder.certificateName")}),this.handleTableChange=s=>{var n=this.state.params;this.props.getCertificateUser((0,a.Z)((0,a.Z)({},n),{},{page_number:s.current,page_size:s.pageSize}))},this.state={typeVal:"issue",timeType:["issue","effect","overdue"],selectedItems:[],params:{keyword:"",date_type:"issue",type:"overdue"}}}componentDidMount(){this.props.onRef(this)}render(){var k=this.props,s=k.prefixCls,n=k.certificateUserSingleList,o=n===void 0?[]:n,g=k.loading,U=k.certificateUserSingleTotal,L=k.paginationParams,b=this.state.selectedItems,z=(0,a.Z)((0,a.Z)({},G.XE.INITIAL_PAGINATION),{},{total:U,current:L.page_number,pageSize:L.page_size}),ee={selectedRows:b,onChange:this.onCheckboxChange};return t().createElement("section",{className:"".concat(s," certificate__common ")},this.renderLeftSearch(),t().createElement(Y.f,{className:"".concat(s,"__table"),bordered:!0,columns:this.columns,rowKey:"id",dataSource:o,pagination:z,loading:g,onChange:this.handleTableChange,headerTitle:this.renderLeftRow(),rowSelection:ee,toolBarRender:this.toolBarRender,tableUUID:"9aada137-4bbe-b3f9-ba0d-30393d8dabcd"}))}}re.defaultProps={prefixCls:"certificate__maturity"};var fe=(0,P.$j)(Q=>({appType:Q.user.appType,appId:Q.user.appId,enterpriseId:Q.user.enterpriseId,token:Q.user.token}))((0,i.Z)()(re));class ue extends t().Component{constructor(k){super(k);this.onRef=s=>{this.modalButtonRef=s},this.onSearchKey=(s,n)=>{this.setState({params:(0,a.Z)((0,a.Z)({},this.state.params),{},{keyword:n===""?s:"",page_number:1,userIds:n})},()=>{this.props.getCertificateUser(this.state.params)})},this.onCheckboxChange=(s,n)=>{var o=[];n.forEach(g=>{o.push(g)}),this.setState({selectedItems:o})},this.columns=[{title:this.props.t("common.userName"),dataIndex:"user_name",key:"user_name",render:(s,n)=>{var o=n.sync_user_id,g=n.sync_source_type;return t().createElement(v.Z,{dataType:"userName",value:o,name:s,type:g})}},{title:this.props.t("authentication.certificateDetailCode"),dataIndex:"certificate_code",key:"certificate_code",render:(s,n)=>t().createElement("span",{className:"certificate_user_link cl-hover",style:{color:(0,w.p)()},onClick:()=>this.handleViewCertificate(n)},n.certificate_code)},{title:this.props.t("certificateManage.sourceName"),dataIndex:"source_name",key:"source_name"},{title:this.props.t("certificateRankingList.issuingTime"),dataIndex:"issue_date",key:"issue_date",render:(s,n)=>{var o=n.issue_date;return(0,c.p6)(o)}},{title:this.props.t("certificateRankingList.effectiveTime"),dataIndex:"effect_date",key:"effect_date",render:(s,n)=>{var o=n.effect_date;return(0,c.p6)(o)}},{title:this.props.t("certificateRankingList.expireTime"),dataIndex:"overdue_date",key:"overdue_date",render:(s,n)=>n.overdue_date!==null?(0,c.p6)(n.overdue_date):this.props.t("certificateManage.noData")}],this.handleViewCertificate=s=>{var n=this.props,o=n.appType,g=n.appId,U=n.enterpriseId,L=n.token,b=localStorage.getItem("qyWechatBook"),z=o==="wx_app"&&b==="true"&&g==="9005";if(z){var ee={enterpriseId:U,certificateId:s.id,accessToken:L,imageUrl:encodeURIComponent(s.image_url),from:""},se="".concat("https://pro.coolcollege.cn","#/certificate?").concat(Z.stringify(ee));X.Z.targetTo({path:se,isExternalLink:!0})}else this.modalButtonRef.handleViewCertificate({record:s})},this.handleChangeDateRange=s=>{var n=s.dateStrings;this.setState({params:(0,a.Z)((0,a.Z)({},this.state.params),{},{start_date:n[0]===""?0:(0,c.jZ)(n[0]),end_date:n[1]===""?0:(0,c.jZ)(n[1]),page_number:1})},()=>{this.props.getCertificateUser(this.state.params)})},this.renderLeftRow=()=>{var s=this.state.selectedItems;return t().createElement(t().Fragment,null,t().createElement(K,{onRef:this.onRef,showTypeBtn:"revoke",selectedItems:s,onSearchKey:this.onSearchKey}))},this.toolBarRender=()=>t().createElement(A.Z,{onSearch:this.onSearchKey,width:"272px",placeholder:this.props.t("searchInputPlaceholder.certificateName")}),this.handleTableChange=s=>{this.props.getCertificateUser({page_number:s.current,page_size:s.pageSize})},this.state={selectedItems:[],params:{keyword:"",date_type:"issue",type:"revoke"}}}componentDidMount(){this.props.onRef(this)}render(){var k=this.props,s=k.prefixCls,n=k.certificateUserSingleList,o=n===void 0?[]:n,g=k.loading,U=k.certificateUserSingleTotal,L=k.paginationParams,b=this.state.selectedItems,z=(0,a.Z)((0,a.Z)({},G.XE.INITIAL_PAGINATION),{},{total:U,current:L.page_number,pageSize:L.page_size}),ee={selectedRows:b,onChange:this.onCheckboxChange};return t().createElement("section",{className:"".concat(s," certificate__common ")},t().createElement(Y.f,{className:"".concat(s,"__table"),bordered:!0,columns:this.columns,rowKey:"id",dataSource:o,pagination:z,loading:g,onChange:this.handleTableChange,headerTitle:this.renderLeftRow(),rowSelection:ee,toolBarRender:this.toolBarRender,tableUUID:"55e3b784-273a-0203-6ba0-447e4e78b9f1"}))}}ue.defaultProps={prefixCls:"certificate__revoke"};var ve=(0,P.$j)(Q=>({appType:Q.user.appType,appId:Q.user.appId,enterpriseId:Q.user.enterpriseId,token:Q.user.token}))((0,i.Z)()(ue)),me=u.Z.Option;class he extends t().Component{constructor(k){super(k);this.onSearchKey=s=>{this.setState({params:(0,a.Z)((0,a.Z)({},this.state.params),{},{type:s})},()=>{this.props.getCertificateRelation(this.state.params)})},this.columns=[{title:this.props.t("certificateRankingList.resourceType"),dataIndex:"type_name",key:"type_name",width:150},{title:this.props.t("certificateRankingList.associatedResourceName"),dataIndex:"resource_name",key:"resource_name"}],this.renderLeftRow=()=>{var s=this.state,n=s.params,o=s.relationType;return t().createElement(t().Fragment,null,t().createElement(u.Z,{style:{width:270},placeholder:this.props.t("certificateManage.choose"),value:n.key,onSearch:this.onSearchKey,onChange:g=>this.onSearchKey(g)},t().createElement(me,{value:""},this.props.t("certificateRankingList.allType")),o.map(g=>t().createElement(me,{key:g,value:g},this.props.t("certificateManage.".concat(g))))))},this.handleTableChange=s=>{this.props.getCertificateRelation({page_number:s.current,page_size:s.pageSize})},this.state={params:{},relationType:["study","employee","exam","project","qualification"]}}render(){var k=this.props,s=k.prefixCls,n=k.loading,o=k.paginationParams,g=k.certificateRelationList,U=k.certificateRelationTotal,L=(0,a.Z)((0,a.Z)({},G.XE.INITIAL_PAGINATION),{},{total:U,current:o.page_number,pageSize:o.page_size});return t().createElement("section",{className:"".concat(s," certificate__common ")},t().createElement(Y.f,{className:"".concat(s,"__table"),bordered:!0,columns:this.columns,rowKey:"id",dataSource:g,pagination:L,loading:n,onChange:this.handleTableChange,headerTitle:this.renderLeftRow(),tableUUID:"fbb650e2-a2d5-00d2-d773-36da2743c339"}))}}he.defaultProps={prefixCls:"certificate__relation"};var ge=(0,i.Z)()(he),_e=r(4408),le=T.Z.TabPane;class Ie extends t().Component{constructor(k){var s;super(k);s=this,this.baseInfo=(0,N.Z)(f().mark(function n(){return f().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:(0,l.u7)().then(U=>{U.status===200&&s.setState({certificate:U.data})});case 1:case"end":return g.stop()}},n)})),this.getCertificateRelation=function(){var n=(0,N.Z)(f().mark(function o(g){var U,L;return f().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:U=s.state.paginationParams,L=(0,a.Z)((0,a.Z)({},U),g),(0,l.rb)(L).then(ee=>{ee.status===200&&s.setState({certificateRelationList:ee.data.list,certificateRelationTotal:ee.data.total})});case 3:case"end":return z.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),this.getCertificateUser=function(){var n=(0,N.Z)(f().mark(function o(g){var U,L,b,z;return f().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:U=s.state,L=U.defaultParams,b=U.paginationParams,z=(0,a.Z)((0,a.Z)((0,a.Z)({},L),b),g),g&&g.page_number&&(b.page_number=g.page_number),(0,l.lN)(z).then(pe=>{pe.status===200&&s.setState({certificateUserSingleList:pe.data.list,certificateUserSingleTotal:Number(pe.data.total)})});case 4:case"end":return se.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),this.exportExcel=function(){var n=(0,N.Z)(f().mark(function o(g){return f().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:(0,l.QG)(Object.assign(s.state.defaultParams,g)).then(b=>{b.status===200&&E.default.success("".concat(s.props.t("certificateManage.exportSuccess")))});case 1:case"end":return L.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),this.exportFile=function(){var n=(0,N.Z)(f().mark(function o(g){return f().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:(0,l.oh)(Object.assign(s.state.defaultParams,g)).then(b=>{b.status===200&&E.default.success("".concat(s.props.t("certificateManage.exportSuccess")))});case 1:case"end":return L.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),this.changeTabs=n=>{this.setState({paginationParams:{page_number:1,page_size:20}});var o=this["".concat(n,"Ref")]?this["".concat(n,"Ref")].state.params:{};n==="relation"?this.getCertificateRelation():this.getCertificateUser((0,a.Z)((0,a.Z)({},o),{},{type:n}))},this.state={defaultParams:{keyword:"",status:"",start_date:0,end_date:0,date_type:"",type:"validity"},paginationParams:{page_number:1,page_size:20},certificate:{},certificateUserSingleList:[],certificateUserSingleTotal:0,certificateRelationList:[],certificateRelationTotal:0}}componentDidMount(){this.baseInfo(),this.getCertificateUser()}render(){var k=this.state,s=k.certificate,n=k.certificateUserSingleList,o=k.certificateUserSingleTotal,g=k.paginationParams,U=k.certificateRelationList,L=k.certificateRelationTotal,b=this.props.t;return t().createElement(t().Fragment,null,t().createElement(_e.Z,{title:b("documentTitle.certificateDetails")}),t().createElement("div",{className:"certificate__detail__content"},t().createElement(p,{certificate:s}),t().createElement(T.Z,{defaultActiveKey:"validity",onChange:z=>this.changeTabs(z)},t().createElement(le,{tab:b("certificateManage.effectiveStaff"),key:"validity"},t().createElement(ce,{onRef:z=>{this.validityRef=z},certificateUserSingleTotal:o,paginationParams:g,certificateUserSingleList:n,getCertificateUser:this.getCertificateUser,exportExcel:this.exportExcel,exportFile:this.exportFile})),t().createElement(le,{tab:b("certificateManage.duePersonnel"),key:"overdue"},t().createElement(fe,{onRef:z=>{this.overdueRef=z},certificateUserSingleTotal:o,paginationParams:g,certificateUserSingleList:n,getCertificateUser:this.getCertificateUser,exportExcel:this.exportExcel,exportFile:this.exportFile})),t().createElement(le,{tab:b("certificateManage.revocation"),key:"revoke"},t().createElement(ve,{onRef:z=>{this.revokeRef=z},certificateUserSingleTotal:o,paginationParams:g,certificateUserSingleList:n,getCertificateUser:this.getCertificateUser})),t().createElement(le,{tab:b("certificateManage.connection"),key:"relation"},t().createElement(ge,{getCertificateRelation:this.getCertificateRelation,paginationParams:g,certificateRelationList:U,certificateRelationTotal:L})))))}}var Ee=(0,i.Z)()(Ie)},97593:function(J,W,r){"use strict";r.d(W,{N:function(){return f}});var S=r(34792),E=r(48086),a=r(37055),N={examinationPlan:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(a.ZP.enterpriseId,"/plan_exam_export"),pkReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(a.ZP.enterpriseId,"/competition/report/list_export"),pkReportDetails:e=>{var t=e.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(a.ZP.enterpriseId,"/competition/user/").concat(t,"/report/list_report")},pkReportDetailsDetails:e=>{var t=e.competitionId,i=e.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(a.ZP.enterpriseId,"/competition/user/").concat(i,"/pk/").concat(t,"/list_export")},opearationReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/tutor-manager-api/v2/").concat(a.ZP.enterpriseId,"/tutor_report_data/export"),courseDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v3/").concat(a.ZP.enterpriseId,"/courses/all/export"),taskReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/report/trainArchives/exportUserTrainArchivesList"),taskReportDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(a.ZP.enterpriseId,"/user_plans_archives_detail_export"),taskReportInfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/report/trainArchives/exportUserTrainArchivesDetailList/back-end"),personalTaskReportInfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/report/trainArchives/exportUserTrainArchivesDetailListToStudent"),selfReportedReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(a.ZP.enterpriseId,"/course_archives_export"),selfReportedReportTotalDetail:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(a.ZP.enterpriseId,"/course_archives_detail_export"),exportTrainingMonthlyReport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/").concat(a.ZP.enterpriseId,"/excel/exportReport"),selfReportedinfo:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(a.ZP.enterpriseId,"/user_course_archives_export"),authenticationReportSummary:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(a.ZP.enterpriseId,"/qualification_archives_export"),authenticationReportDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(a.ZP.enterpriseId,"/qualification_archives_detail_export"),authenticationReportDetailsDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(a.ZP.enterpriseId,"/user_qualification_archives_export"),studentFilesListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/student_archives/list_export"),studentFilesDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/student_archives/detailed_export"),staffTrainingSummaryExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(a.ZP.enterpriseId,"/getStaffData"),studentExclusiveDetailExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/student_archives/youjia_list_export"),authInfo:e=>{var t=e.enterpriseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v2/").concat(t,"/dazheng/exportForm")},exportStudentRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/platform_overview/learn_duration/student_export"),exportDepartmentRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/platform_overview/learn_duration/department_export"),creditRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/score/exportScoreRank"),creditRankingDetails:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/score/exportScoreRecord"),integralRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(a.ZP.enterpriseId,"/integral/rank_export"),integralRankingDetails:e=>{var t=e.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(a.ZP.enterpriseId,"/user/").concat(t,"/integral_export")},teacherImportPoints:e=>{var t=e.lecturerId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/teacher-manage-api/v2/").concat(a.ZP.enterpriseId,"/lecture/").concat(t,"/integral_list_export")},certificateRanking:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(a.ZP.enterpriseId,"/certificate_ranks_export"),certificateRankingDetials:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(a.ZP.enterpriseId,"/certificate_details_export"),signRecord:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/sign/export"),operationLog:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-manage-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/log/export"),zaraOperationLog:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/").concat(a.ZP.enterpriseId,"/zara/exportReport"),loginStatistic:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/userLoginIp/").concat(a.ZP.enterpriseId,"/user-detail/export"),studyProject:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/study_projects_export"),signAnalysisExport:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(a.ZP.enterpriseId,"/offline-courses/").concat(e,"/sign-analysis-export"),signAnalysisDetailExport:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(a.ZP.enterpriseId,"/offline-courses/").concat(e.id,"/sign-detail-export"),studyProjectMonitorExport:e=>{var t=e.courseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/study_projects/").concat(t,"/user_monitors_export")},studyProjectPaymentList:e=>{var t=e.projectId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/study_project/").concat(t,"/study_project_transaction_export")},study_project_transaction_export:e=>{var t=e.projectId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/study_project/").concat(t,"/study_project_transaction_export")},courseManageSend:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(a.ZP.enterpriseId,"/courses/export"),whCourseManageSend:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(a.ZP.enterpriseId,"/courses/exportV2"),liveDetail:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v1/").concat(a.ZP.enterpriseId,"/course/live/watchInfo/export"),liveDetailProject:e=>{var t=e.projectId,i=e.courseId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v1/").concat(a.ZP.enterpriseId,"/study_project/").concat(t,"/course/").concat(i,"/live_monitors/export")},graphicLessonStudentData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/course/imageText/export"),graphicLessonClientData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/course/imageText/client/export"),graphicLessonTaskList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(a.ZP.enterpriseId,"/plan_exam_export"),certificate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(a.ZP.enterpriseId,"/certificates_export"),certificatePeople:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(a.ZP.enterpriseId,"/certificates/").concat(e.certificateId,"/users/export?type=").concat(e.typeStatus,"&access_token=").concat(localStorage.token),learningTaskManagement:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/plan_study_export"),learningMonitor:e=>{var t=e.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/plans/").concat(t,"/monitors_export")},learningOffline:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/plan/employeeTrain/exportLatojaMonitorDetailList"),learningQuestionnairePaper:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/investigates/").concat(e.investigateId,"/statistics_export?access_token=").concat(localStorage.token),learningRateUser:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(a.ZP.enterpriseId,"/rate_user_export"),learningWorkUserData:e=>{var t=e.operationId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/operations/").concat(t,"/user_monitors_export")},huaLaiShiWorkUserData:e=>{var t=e.operationId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/operations/").concat(t,"/user_monitors_export")},learningFaceMonitor:e=>{var t=e.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(a.ZP.enterpriseId,"/user-recognition/course/").concat(t,"/export")},learningDetailMonitor:e=>{var t=e.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(a.ZP.enterpriseId,"/user-recognition/v2/course/").concat(t,"/export")},classLearningMonitor:e=>{var t=e.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/").concat(a.ZP.enterpriseId,"/study-record/plan/").concat(t,"/export")},employeeResult:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/plan/employeeTrain/exportTrainMonitor"),employeeQuestionnairePaper:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/investigates/").concat(e.investigateId,"/statistics_export?access_token=").concat(localStorage.token),exportExamResult:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/plan/exam/exportExamResult?access_token=").concat(localStorage.token),exportAnswerList:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(a.ZP.enterpriseId,"/exams/").concat(e.examId,"/export_detail?access_token=").concat(localStorage.token),exportAnswerDetails:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(a.ZP.enterpriseId,"/exams/").concat(e.examId,"/answer_detail_export?access_token=").concat(localStorage.token),exportQuestionAnalysis:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/plan/exam/exportQuestionAnalysis?access_token=").concat(localStorage.token),exportMakeupExamMonitors:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/exam-api/v2/").concat(a.ZP.enterpriseId,"/exams/").concat(e.examId,"/makeupExam_monitors_export?access_token=").concat(localStorage.token),submitReportManagement:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v1/").concat(a.ZP.enterpriseId,"/submit/export"),exportPracticeMonitors:e=>{var t=e.practiceId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/practices/").concat(t,"/monitors/export")},exportPk_game:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(a.ZP.enterpriseId,"/competition/user/").concat(a.ZP.userId,"/list/export"),exportPkMonitor:e=>{var t=e.competitionId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(a.ZP.enterpriseId,"/competition/").concat(t,"/user/list/export")},exportPostMap:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/post_maps/").concat(e.mapId,"/users_export"),exportPowerMonitor:e=>{var t=e.abilityId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/qualifications/").concat(t,"/monitors_export")},exportQuestionnaire:e=>{var t=e.taskId,i=e.questionnaireId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/studies/").concat(t,"/investigates/").concat(i,"/statistics_export")},exportGoodsExchangeDetail:e=>{var t=e.goodsId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(a.ZP.enterpriseId,"/integral_mall/goods/").concat(t,"/export_orders")},teacherExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/teacher-manage-api/v2/").concat(a.ZP.enterpriseId,"/lecture/export"),teacherLatojaImport:e=>{var t=e.lecturerId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/").concat(a.ZP.enterpriseId,"/lecturer/").concat(t,"/latojas/export")},clueStatis:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v1/clue/clueListExport"),postTalentAssessment:e=>{var t=e.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/evaluation-api/v2/").concat(a.ZP.enterpriseId,"/export/plan/").concat(t,"/model")},offlineCrouseCheckIn:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(a.ZP.enterpriseId,"/offline-courses/").concat(e,"/sign-analysis-export"),monitorUserExport:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(a.ZP.enterpriseId,"/offline-courses/").concat(e,"/monitors-export"),evaluateAnalyzeExport:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/").concat(a.ZP.enterpriseId,"/course/").concat(e,"/evaluate-analysis/export-evaluate-info-list"),learnAbilityRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/study-power/export_learn_ability"),learnShareRank:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/study-power/export_share_ability"),coachAnalysisDetail:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/tutor-manager-api/v2/").concat(a.ZP.enterpriseId,"/plan/").concat(e.planId,"/tutorials/").concat(e.tutorialsId,"/evaluation_export"),offlineCourseListExport:e=>{var t=e.taskId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/offline-course/v2/enterprises/").concat(a.ZP.enterpriseId,"/plans/").concat(t,"/offline-course/list/export")},abilityModelListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/talentability/v1/").concat(a.ZP.enterpriseId,"/post/ability_model/project/export"),selectUserTemplate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/user-center-api/v2/").concat(a.ZP.enterpriseId,"/users/").concat(a.ZP.userId,"/export_address_book"),resourceSettings:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/").concat(a.ZP.enterpriseId,"/resource_classifications/export"),evaluationResultExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/talentability/v1/").concat(a.ZP.enterpriseId,"/post/download"),learningTaskCourseExport:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/plans/").concat(e,"/courses-export"),studyProjectCourseExport:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/study_projects/").concat(e,"/courses-export"),studyProjectPracticeExport:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training-manage-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/study_projects/").concat(e,"/practice-export"),trainingTandardsDetail:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/train-objective/v2/").concat(a.ZP.enterpriseId,"/objective/").concat(e,"/export"),trainingDemandExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(a.ZP.enterpriseId,"/training-demands/export"),exportPlan:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(a.ZP.enterpriseId,"/plans/export"),exportAnnualPlan:e=>{var t=e.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training/v2/enterprises/").concat(a.ZP.enterpriseId,"/annual-plans/").concat(t,"/export")},courseDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/course_details/export"),loginDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/platform_overview/login_detail_export"),ExamDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/exam_details/export"),medalDetailsExportData:e=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(a.ZP.enterpriseId,"/medal/group/").concat(e,"/user/detail/export"),trainDetailsExportData:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/").concat(a.ZP.enterpriseId,"/").concat(a.ZP.userId,"/train_details/export"),exportExamList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/exam-plan/export_exam_list"),exportNewExamResult:e=>{var t=e.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/exam-plan/").concat(t,"/export-user-task")},exportNewExamAnswerList:e=>{var t=e.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/exam-plan/").concat(t,"/export_student_detail")},exportNewExamAnswerListPDF:e=>{var t=e.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/training-export-service/v2/enterprises/").concat(a.ZP.enterpriseId,"/exams/").concat(t,"/download")},exportQuestionAnswerDetails:e=>{var t=e.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/exam-plan/").concat(t,"/export_question_answer")},exportAnswerDataList:e=>{var t=e.planId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/exam-plan/").concat(t,"/export-question-analysis")},exportSubmitList:e=>{var t=e.planId,i=e.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/exam-plan/").concat(t,"/user-id/").concat(i,"/export_user_submit")},exportFaceRecognitionRecord:e=>{var t=e.userId,i=e.examId,l=e.submitId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/users/").concat(t,"/exams/").concat(i,"/submit-id/").concat(l,"/export_face-info")},exportQuestionDetails:e=>{var t=e.planId,i=e.questionId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/new-exam-api/v2/enterprises/").concat(a.ZP.enterpriseId,"/exam-plan/").concat(t,"/export-question-user-result/").concat(i)},exportPointsDetail:e=>{var t=e.userId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(a.ZP.enterpriseId,"/user/").concat(t,"/integral_export")},exportPointsList:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(a.ZP.enterpriseId,"/integral/rank_export"),downloadPointsTemplate:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(a.ZP.enterpriseId,"/integral/import/download_template"),employeeTrainReportExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/enterprise-api/v3/plan/employeeTrain/authority/exportTrainMonitor"),exchangeRecordListExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(a.ZP.enterpriseId,"/integral_mall/goods/export_orders"),exchangeGoodRecordListExport:e=>{var t=e.goodId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(a.ZP.enterpriseId,"/integral_mall/goods/").concat(t,"/export_orders")},exportLotteryOverview:e=>{var t=e.lotteryId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(a.ZP.enterpriseId,"/lottery/").concat(t,"/prizeOverview/export")},exportLotteryDetailList:e=>{var t=e.lotteryId;return"".concat("https://app123492.eapps.dingtalkcloud.com","/interaction-api/v1/").concat(a.ZP.enterpriseId,"/lottery/").concat(t,"/prizeDetail/list/export")},taskDownLoadImport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/evaluation-api/v1/").concat(a.ZP.enterpriseId,"/evaluation/relation/download"),pointCourseDetailsExport:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/customize-api/v3/ydt/records/export"),exportBelleGroupUsers:()=>"".concat("https://app123492.eapps.dingtalkcloud.com","/user-center-api/v2/").concat(a.ZP.enterpriseId,"/users/").concat(a.ZP.userId,"/group/export_address_book")},B=N,T=r(10237),d=r(31457),f=e=>{var t=e.page,i=e.props,l=e.query,x=l===void 0?"":l,y=e.rest,m=e.sendType,R=m===void 0?"get":m,c=e.success,v=e.fail,h=v===void 0?"":v,p=B[t](y)+(R==="get"?x:""),C=T.WY[R];C.call(T.WY,R==="get"?{url:p}:{url:p,data:x}).then(u=>{if(p.includes("/v3/")&&u.success==="true"||u.data.code===0||u.data.code===200||u.data.code===2e5||u.data.code==="200000"||u.data.resultCode==="200"||u.data.result_code==="200")(0,d.Pp)(i),E.default.success(i.t("study.compoundSucceed")),c&&c({code:200});else{if(h){h(u);return}E.default.error(i.t("community.isError"))}})}},86726:function(J,W,r){"use strict";r.d(W,{V9:function(){return E},H3:function(){return a},e:function(){return N},F:function(){return B}});var S=r(93485);function E(T){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=[];function e(t,i){var l=(0,S.Z)(i),x;try{for(l.s();!(x=l.n()).done;){var y=x.value;if(y.key===t){f=y.actions;break}y.children instanceof Array&&y.children.length&&e(T,y.children)}}catch(m){l.e(m)}finally{l.f()}}return e(T,d),f}function a(T){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=d.find(e=>e.key===T)||{};return f.checked||!1}function N(T){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=!1;function e(t,i){var l=(0,S.Z)(i),x;try{for(l.s();!(x=l.n()).done;){var y=x.value;if(y.key===t){f=y.checked;break}y.children instanceof Array&&y.children.length&&e(T,y.children)}}catch(m){l.e(m)}finally{l.f()}}return e(T,d),f}function B(T){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f="";function e(t,i){var l=(0,S.Z)(i),x;try{for(l.s();!(x=l.n()).done;){var y=x.value;if(y.key===t){f=y.id;break}y.children instanceof Array&&y.children.length&&e(T,y.children)}}catch(m){l.e(m)}finally{l.f()}}return e(T,d),f}},65202:function(J,W,r){"use strict";r.d(W,{p:function(){return S}});function S(){return localStorage.getItem("themeColor")||"#516AE6"}},2396:function(J,W,r){"use strict";r.d(W,{fA:function(){return a},kh:function(){return N},kR:function(){return B},rw:function(){return d},$s:function(){return f},q_:function(){return e},QK:function(){return t}});var S=r(6793),E={limitWords(i,l){return{rules:[{max:i,message:"\u6700\u591A\u8F93\u5165".concat(i,"\u4E2A\u5B57")},{required:!0,message:l||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},limitTagsLength(i){return{rules:[{max:i,message:"\u6700\u591A\u8F93\u5165".concat(i,"\u4E2A\u6807\u7B7E")}]}},required(i){return{rules:[{required:!0,message:i||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0}]}},requiredWithValidator(i,l){return{rules:[{required:!0,message:i||"\u8BF7\u8F93\u5165\u9700\u8981\u7684\u5185\u5BB9!",whitespace:!0,validator:l}]}}},a={score:/^\+?[0-9]*$/,positiveInteger:/^[1-9]\d*$/,examScore:/^[0-9]+([.]\d{1})?$/,url:/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/,httpsUrl:/(^https):\/\/([\w.]+\/?)\S*/,tagName:/^[\s　]|[ ]$/gi},N=i=>isNaN(i)||!i||!(i>=0&&i<1e3)||!a.score.test(i),B=i=>isNaN(i)||!i||!(i>-1e3&&i<1e3),T=i=>isNaN(i)||!i||!(i>=0&&i<1e3)||!a.examScore.test(i),d=(i,l)=>{for(var x=0,y=0;y<i.length;y++){var m=i.charAt(y);if(m.match(/[^\x00-\xff]/ig)!=null?x+=1:x+=.5,x>l)return y}return 0},f=i=>{for(var l=0,x=0;x<i.length;x++){var y=i.charAt(x);y.match(/[^\x00-\xff]/ig)!=null?l+=1:l+=.5}return l},e=(i,l)=>{var x=i.target.value,y=i.target.dataset.originLength;if(i.target.dataset.originLength||(y=l,i.target.dataset.originLength=y),!!y){var m=f(x);m*1<l*1?i.target.setAttribute("maxLength",l*2):i.target.setAttribute("maxLength",l)}},t=(i,l)=>{var x="";return(!i||!(0,S.fy)(i))&&(x=l),x}}}]);
