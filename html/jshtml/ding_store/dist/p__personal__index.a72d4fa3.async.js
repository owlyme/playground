(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[5581],{26096:function(be,me,r){"use strict";var B=r(30887),T=r(99210),I=r(62029),R=r(22385),e=r(31097),ue=r(12924),f=r.n(ue),y=r(71967),g=r.n(y),Z=r(1164),m=d=>d.type==="more"?d.disabled?f().createElement(T.Z.Item,(0,I.Z)({},d,{key:d.key,disabled:!0}),d.tooltip?f().createElement(e.Z,{title:d.tooltip},f().createElement("p",{className:"cl-dropdown-menuitem"},d.title)):f().createElement("p",{className:"cl-dropdown-menuitem"},d.title)):d.link?f().createElement(T.Z.Item,(0,I.Z)({},d,{key:d.key}),f().createElement(Z.Z,{to:d.link},f().createElement("p",{className:"cl-dropdown-menuitem"},d.title))):f().createElement(T.Z.Item,(0,I.Z)({},d,{key:d.key}),f().createElement("p",{className:"cl-dropdown-menuitem",onClick:d.click},d.title)):d.disabled?d.tooltip?f().createElement(f().Fragment,{key:d.key},f().createElement(e.Z,{title:d.tooltip},f().createElement("span",{className:"".concat(g().pointer," ").concat(g().disabled)},d.title))):f().createElement(f().Fragment,{key:d.key},f().createElement("span",{className:"".concat(g().pointer," ").concat(g().disabled)},d.title)):d.link?f().createElement(f().Fragment,{key:d.key},f().createElement(Z.Z,{to:d.link},f().createElement("span",{className:"cl-pointer ".concat(g().pointer)},d.title))):f().createElement(f().Fragment,{key:d.key},f().createElement("span",{className:"cl-pointer ".concat(g().pointer),onClick:d.click},d.title));me.Z=m},97882:function(be,me,r){"use strict";var B=r(57361),T=r(43358),I=r(34041),R=r(9754),e=r.n(R),ue=r(12924),f=r.n(ue),y=r(91768),g=r(28216),Z=r(67222),m=r(10237),d=r(37055),q=r(60667),Q=I.Z.Option;class L extends f().Component{constructor(){var o;super(...arguments);o=this,this.state={data:[],value:void 0},this.handleSearch=function(){var v=(0,B.Z)(e().mark(function k(j){var D,x,S,oe,N,F,ne,J;return e().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(D=o.props,x=D.appType,S=D.appId,oe=localStorage.getItem("qyWechatBook"),N="",F=x==="wx_app"&&oe==="true"&&S==="9005",!(j&&F)){Y.next=17;break}return Y.prev=5,Y.next=8,(0,Z.F_)(j);case 8:ne=Y.sent,J=ne.data,J.success?N=J.data:N="",Y.next=17;break;case 13:Y.prev=13,Y.t0=Y.catch(5),console.error(Y.t0),N="";case 17:j?o.getUserList(j,N):o.setState({data:[]});case 18:case"end":return Y.stop()}},k,null,[[5,13]])}));return function(k){return v.apply(this,arguments)}}(),this.handleChange=v=>{this.setState({value:v}),this.props.onSearch(v)},this.renderSearch=()=>{var v=this.props,k=v.t,j=v.width,D=j===void 0?360:j,x=this.state.data.map(S=>f().createElement(Q,{key:S.id},f().createElement(q.Z,{dataType:"userName",value:S.user_id,name:S.user_name,type:S.source_type}),"(",f().createElement("span",{style:{color:"#939393",fontSize:"12px",marginBottom:"15px"}},S.department_names.join("/")),")"));return f().createElement(I.Z,{showSearch:!0,value:this.state.value,placeholder:k("personal.searchByName"),style:{width:D},defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:this.handleSearch,onChange:this.handleChange,notFoundContent:null,allowClear:!0},x)},this.getUserList=(v,k)=>{var j=d.ZP.OrgDialog.getUserByName(),D={user_name:k===""?v:"",filter_auth:!1,user_type:"active",userIds:k};m.WY.get({url:j,params:D}).then(x=>{this.setState({data:x.data.users})})}}render(){return f().createElement("span",null,this.renderSearch())}}me.Z=(0,g.$j)(M=>({appType:M.user.appType,appId:M.user.appId}))((0,y.Z)()(L))},30311:function(be,me,r){"use strict";var B=r(22385),T=r(31097),I=r(12924),R=r.n(I),e=r(8812),ue=r(28216),f=y=>{var g=(0,ue.v9)(m=>{var d=m.advancedSetting;return{themeColor:d.themeColor}}),Z=g.themeColor;return R().createElement(T.Z,{placement:"top",title:y.name},R().createElement("span",{className:"cl-table__cell-arrow",onClick:y.onClick},R().createElement("span",{style:{color:Z}},y.name),R().createElement("span",{className:"cl-table__cell-arrow-icon"},R().createElement(e.Z,null))))};me.Z=f},30389:function(be,me,r){"use strict";r.d(me,{Z:function(){return M}});var B=r(62029),T=r(20228),I=r(11382),R=r(12924),e=r.n(R),ue=r(91768),f=r(80991),y={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},g=r(62615),Z=r(52670);class m extends e().Component{render(){var v=this.props,k=v.values,j=v.mode,D=v.onlyChooseDept,x=v.reserveUser,S=v.t,oe=v.orgProps,N=v.rangeAuth,F=v.projectId,ne=v.onCancel,J=v.onlyCreateUser;return e().createElement(f.l0,{className:"cl-form"},e().createElement(f.gN,(0,B.Z)({component:g.ww,displayType:"Custom",showSectitle:!1,name:"employeeRange",label:S("common.visibleRange"),defaultFieldList:k.employeeRange,validate:Z.FI,mode:j,rangeAuth:N,onlyChooseDept:D,onlyCreateUser:J,orgProps:oe,reserveUser:x,projectId:F,onCancel:ne,qwTicketShow:!0},y)))}}var d=(0,ue.Z)()(m),q=r(18329),Q=r(34773);class L extends e().Component{constructor(){super(...arguments);this.initRefFormik=v=>{this.refFormik=v},this.handleBeforeCreate=()=>{var v=this.refFormik;v.submitForm(),v.runValidations().then(k=>{if(!Object.keys(k).length){var j=v.state.values.employeeRange,D=(0,Q.b)(j.rangeList),x={qyWeChatVo:j.qyWeChatVo,id:this.props.actionId,isAll:j.rangeType,groupIds:j.rangeType===2?D.groupIds.join(","):"",departmentIds:j.rangeType===2?D.deptIds.join(","):"",userIds:j.rangeType===2?D.userIds.join(","):"",postIds:j.rangeType===2?D.postIds.join(","):"",clusterIds:j.rangeType===2?D.clusterIds.join(","):"",qy_we_chat_vo:j.qyWeChatVo};this.props.onCreate(x)}})},this.handleBeforeCancel=()=>{var v=this.props.onCancel;v()}}render(){var v=this.props,k=v.visible,j=v.initialParams,D=v.isLoading,x=v.tipInfo,S=v.mode,oe=v.onlyChooseDept,N=v.reserveUser,F=N===void 0?[]:N,ne=v.t,J=v.title,W=v.orgProps,Y=v.rangeAuth,V=v.projectId,X=v.onCancel,ie=v.onlyCreateUser,w=v.size;return D?e().createElement(I.Z,{size:"large"}):e().createElement(q.ZP,{wrapClassName:"cl-employee-selector-modal",visible:k,title:J||ne("component.changeUser"),okText:ne("common.ok"),cancelText:ne("common.cancel"),size:w,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},D?e().createElement(I.Z,{size:"large"}):e().createElement(f.J9,{ref:this.initRefFormik,initialValues:j,render:h=>e().createElement(d,(0,B.Z)({},h,{mode:S,rangeAuth:Y,orgProps:W,onlyChooseDept:oe,onlyCreateUser:ie,reserveUser:F,projectId:V,onCancel:X}))}),x&&e().createElement("p",{style:{padding:"0 24px",wordBreak:"break-all",whiteSpace:"normal"}},x))}}L.defaultProps={visible:!1,initialParams:{employeeRange:{rangeType:1,rangeList:{dept:[],post:[],group:[],user:[],cluster:[]}}},tipInfo:"",isLoading:!1,mode:["all","part"],onlyChooseDept:!1,onlyCreateUser:!1,orgProps:{},onCancel:()=>{},onCreate:()=>{},size:"middle"};var M=(0,ue.Z)()(L)},64549:function(be,me,r){"use strict";var B=r(12924),T=r.n(B),I=r(28216),R=r(84874),e=f=>({guideStatus:f.advancedSetting.guideStatus,isNewUser:f.advancedSetting.isNewUser});class ue extends T().Component{constructor(){super(...arguments);this.state={guideIndex:0,showGuide:this.props.renderGuide},this.onNextStep=()=>{var y=this.state.guideIndex,g=this.props.guidePageProps;if(y>=g.length-1){this.onCloseGuide();return}this.setState({guideIndex:y+1})},this.onCloseGuide=()=>{this.setState({showGuide:!1},()=>{this.props.closeGuide&&this.props.closeGuide()}),this.props.isNewUser==="true"&&this.props.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),this.updateAllStatus()},this.updateAllStatus=()=>{localStorage.setItem("guideStatus","false"),this.props.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})},this.renderRightItem=y=>T().createElement(T().Fragment,null,T().createElement("div",{className:"clguide-popover__content"},T().createElement("span",{onClick:this.onCloseGuide},T().createElement(R.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})),T().createElement("div",{className:"clguide-popover__content__text"},y.contentText),T().createElement("div",{className:"clguide-popover__content__button",onClick:this.onNextStep},y.buttonText)),T().createElement("div",{className:"clguide-popover__righttriangle"}),y.typeText&&T().createElement("div",{className:" clguide-popover__circle"},y.typeText)),this.renderLeftItem=y=>T().createElement(T().Fragment,null,T().createElement("div",{className:" clguide-popover__circle"},y.typeText),T().createElement("div",{className:"clguide-popover__lefttriangle"}),T().createElement("div",{className:"clguide-popover__content"},T().createElement("span",{onClick:this.onCloseGuide},T().createElement(R.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})),T().createElement("div",{className:"clguide-popover__content__text"},y.contentText),T().createElement("div",{className:"clguide-popover__content__button",onClick:this.onNextStep},y.buttonText)))}render(){var y=this.state,g=y.guideIndex,Z=y.showGuide,m=this.props,d=m.className,q=m.guideStatus,Q=m.guidePageProps,L=Q===void 0?[]:Q,M=m.direction,o=M===void 0?"right":M,v=m.showDownloadBtn;return!Z&&!q?null:T().createElement("div",{className:"clguide-popover-container"},Z&&q==="true"&&T().createElement("div",{className:"clguide-popover-mask"}),Z&&q==="true"&&g===0&&L.length?T().createElement("div",{className:"".concat(d,"_next clguide-popover ").concat(v?"":"right")},o==="left"?this.renderLeftItem(L[0]):this.renderRightItem(L[0])):null,Z&&q==="true"&&g===1&&L.length?T().createElement("div",{className:"".concat(d,"_know clguide-popover")},o==="left"?this.renderLeftItem(L[1]):this.renderRightItem(L[1])):null)}}me.Z=(0,I.$j)(e)(ue)},19788:function(be,me,r){"use strict";r.d(me,{Z:function(){return W}});var B=r(81211),T=r(34792),I=r(48086),R=r(12924),e=r.n(R),ue=r(91768),f=r(18329),y=r(92592),g=r(28216),Z=r(10237),m=r(5430),d=r(93485),q=r(57361),Q=r(18106),L=r(88108),M=r(9754),o=r.n(M),v=r(48194),k=L.Z.TabPane;class j extends e().Component{constructor(V){var X;super(V);X=this,this.getWxPermission=(0,q.Z)(o().mark(function ie(){var w,h,_,C,A,U;return o().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:w=(0,v.$)(),h=w.data.list,_=(0,d.Z)(h),z.prev=3,_.s();case 5:if((C=_.n()).done){z.next=14;break}if(A=C.value,A.type!=="wechat_applet_setting"){z.next=12;break}return U=A.switch_status==="OPEN",X.setState({isOpenWxQrCode:U}),U&&X.initWxCode(),z.abrupt("break",14);case 12:z.next=5;break;case 14:z.next=19;break;case 16:z.prev=16,z.t0=z.catch(3),_.e(z.t0);case 19:return z.prev=19,_.f(),z.finish(19);case 22:case"end":return z.stop()}},ie,null,[[3,16,19,22]])})),this.initWxCode=(0,q.Z)(o().mark(function ie(){var w,h,_,C;return o().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return w=X.props.WxOption,h=w.flag,_=w.scene,U.next=3,Z.WY.post({url:m.ZP.createWxCode(),data:{flag:h,scene:"".concat(_,"&enterpriseId=").concat(m.ZP.enterpriseId),enterprise_id:m.ZP.enterpriseId}});case 3:C=U.sent,X.setState({codeUrl:C.data.wx_code});case 5:case"end":return U.stop()}},ie)})),this.state={codeUrl:"",isOpenWxQrCode:!1}}componentDidMount(){this.getWxPermission()}render(){var V=this.state,X=V.codeUrl,ie=V.isOpenWxQrCode,w=this.props,h=w.dingDingOption,_=w.WxOption,C=w.appType;return e().createElement("div",{className:"scan-code-box"},e().createElement(L.Z,{defaultActiveKey:"1",centered:!0},e().createElement(k,{tab:C==="fs_app"?this.props.t("common.fsScanCode"):this.props.t("common.dingDingSanCode"),key:"1"},e().createElement("div",{className:"scan-code-main"},e().createElement("img",{src:h.dingDingUrl,alt:""}),e().createElement("div",{className:"tip"},h.tip))),ie&&e().createElement(k,{tab:this.props.t("common.wxScanCode"),key:"2"},e().createElement("div",{className:"scan-code-main"},e().createElement("img",{src:"data:image/png;base64,".concat(X),alt:""}),e().createElement("div",{className:"tip"},_.tip)))))}}var D=Y=>({appType:Y.user.appType}),x=(0,g.$j)(D)((0,ue.Z)()(j)),S=r(11092),oe=r(37055),N=Y=>{var V=Y.user;return{userInfo:V}};class F extends e().Component{constructor(V){super(V);this.onDownload=()=>{var X=this.props.t;if(!(!this.qrcode||!this.qrcode._el.getElementsByTagName)){var ie=this.props,w=ie.downloadImgName,h=w===void 0?"coolCollege":w,_=ie.tipInfo,C=_===void 0?"":_,A=ie.downloadImgStyle,U=A===void 0?{width:750,height:981}:A,se=this.qrcode._el.getElementsByTagName("img")[0],z=this.canvasRef.current.getContext("2d");z.fillStyle="#fff",z.fillRect(0,0,U.width,U.height),z.drawImage(se,138,216,478,478),z.font="36px bold serif",z.fillStyle="#333",z.fillText(X("other.dingCodeTips"),246,140),z.textAlign="center",z.fillText(C,375,783,U.width);var p=this.canvasRef.current.toDataURL("image/jpeg"),H=document.createElement("a");H.setAttribute("href",p),H.setAttribute("download","".concat(h,".jpg")),document.body.insertAdjacentElement("beforeend",H),H.click(),H.remove()}},this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.initRef=X=>{this.wrapper=X},this.getShortLink=X=>Z.WY.post({url:oe.ZP.Common.getQrUrl(),data:{link:X}}),this.canvasRef=e().createRef()}componentDidMount(){var V=(0,S.findDOMNode)(this.wrapper),X=V.querySelector("#qrcode");this.qrcode=new QRCode(X,{width:250,height:250});var ie=this.props,w=ie.isReferred,h=w===void 0?!0:w,_=ie.pageUrl,C=ie.type,A=C===void 0?"":C,U=encodeURIComponent(_),se="dingtalk://dingtalkclient/action/open_micro_app?corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&packageType=1&pVersion=1&page=").concat(U);if(A==="projectShare"){var z="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(U);this.getShortLink(z).then(p=>{this.qrcode.makeCode(p.data.short_link)})}else this.qrcode.makeCode(h?se:_);X.setAttribute("title","")}render(){var V=this.props,X=V.prefixCls,ie=V.tipInfo,w=V.download,h=w===void 0?!1:w,_=V.downloadImgStyle,C=_===void 0?{width:750,height:981}:_,A=V.t,U=ie||A("component.useMobileDingtalkScan"),se=localStorage.getItem("themeColor")||"#465dcd";return e().createElement("div",{className:X,ref:this.initRef},e().createElement("div",{className:"".concat(X,"__qrcode"),id:"qrcode"}),e().createElement("p",{className:"".concat(X,"__qrcodetip")},U),h?e().createElement("p",{className:"".concat(X,"__download"),onClick:this.onDownload,style:{color:se}},A("other.downloadPictures")):null,e().createElement("canvas",{width:C.width,height:C.height,ref:this.canvasRef}))}}F.defaultProps={prefixCls:"cl-qr-code"};var ne=(0,g.$j)(N)((0,ue.Z)()(F));class J extends e().Component{constructor(V){super(V);this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.initQRCode=()=>{var X=this.props,ie=X.isReferred,w=ie===void 0?!0:ie,h=X.pageUrl,_=X.type,C=_===void 0?"":_,A=X.record,U=A===void 0?{}:A,se=this.props.userInfo.appType,z=encodeURIComponent(h),p;if(se==="fs_app"?p="https://applink.feishu.cn/client/web_app/open?corpId=".concat(this.props.userInfo.corpId,"&packageType=1&pVersion=1&path=").concat(z,"&flag=student_evaluation_page&tutorUserId=").concat(U.userId,"&tutorialsId=").concat(U.courseId,"&planId=").concat(U.planId,"&appId=").concat("cli_a0aa5e0fe5f8500d","&appType=lark"):p="dingtalk://dingtalkclient/action/open_micro_app?corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&packageType=1&pVersion=1&page=").concat(z),C==="projectShare"){var H;se==="fs_app"?H="https://applink.feishu.cn/client/web_app/open?corpId=".concat(this.props.userInfo.corpId,"&packageType=1&pVersion=1&path=").concat(z,"&flag=student_result_page&tutor_user_id=").concat(U.userId,"&tutorials_id=").concat(U.courseId,"&planId=").concat(U.planId,"&appId=").concat("cli_a0aa5e0fe5f8500d","&appType=lark"):H="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(z),this.getShortLink(H).then(G=>{p=G.data.short_link})}y.toDataURL(w?p:h,{width:500}).then(G=>{this.setState({dingDingUrl:G})}).catch(()=>{I.default.error(this.props.t("personal.failedGenerateCode"))})},this.getShortLink=X=>Z.WY.post({url:m.ZP.Common.getQrUrl(),data:{link:X}}),this.state={dingDingUrl:""}}componentDidMount(){this.initQRCode()}componentDidUpdate(V){V.visible!==this.props.visible&&this.props.visible&&this.initQRCode()}render(){var V=this.props,X=V.t,ie=V.visible,w=V.onCancel,h=V.title,_=V.borderStyle,C=V.WxOption,A=V.tipInfo,U=(0,B.Z)(V,["t","visible","onCancel","title","borderStyle","WxOption","tipInfo"]),se=this.state.dingDingUrl,z=this.props.userInfo.appType,p=h||X("component.microCourseScan"),H={dingDingUrl:se,tip:z==="fs_app"?X("component.useMobileFsScan"):A||X("component.useMobileDingtalkScan")},G={};return C&&(G={flag:C.flag,scene:C.scene,tip:C.tip||X("component.useMobileWxScan")}),ie?e().createElement(f.ZP,{visible:ie,width:"400",footer:null,bodyStyle:_?{maxHeight:"initial",minHeight:366,width:332}:{width:332},title:p,onCancel:w,destroyOnClose:!0},C||z==="fs_app"?e().createElement(x,{WxOption:G,dingDingOption:H,appS:!0}):e().createElement(ne,U)):null}}var W=(0,g.$j)(Y=>{var V=Y.user;return{userInfo:V}})((0,ue.Z)()(J))},19677:function(be,me,r){"use strict";var B=r(71194),T=r(57016),I=r(12924),R=r.n(I),e=r(28216),ue=r(49954),f=r.n(ue),y=r(69418),g=r.n(y),Z=d=>{var q=d.user;return{isFrozen:q.isFrozen}};class m extends R().Component{render(){var q=this.props,Q=q.prefixCls,L=q.isFrozen;return R().createElement(T.Z,{className:Q,visible:L,width:635,footer:null},R().createElement("div",{className:"".concat(Q,"__body")},R().createElement("img",{src:f(),className:"".concat(Q,"__body__picture")}),R().createElement("a",{href:"https://appcenter.dingtalk.com/detail.html?goodsCode=FW_GOODS-1000651011&sig=2b3cd0a3a9a26775d0f137bdd36e7016"},R().createElement("img",{src:g(),className:"".concat(Q,"__body__button")}))))}}m.defaultProps={prefixCls:"freeze-modal"},me.Z=(0,e.$j)(Z)(m)},995:function(be,me,r){"use strict";var B=r(77883),T=r(21888),I=r(12924),R=r.n(I),e=r(80991),ue=r(91768),f=r(43859),y=r(6793);class g extends R().Component{constructor(){super(...arguments);this.state={},this.limitDecimals=m=>m&&m.toString().replace(/[^\d]+/g,""),this.handleMarkChange=m=>{this.props.formik.setFieldValue("mark",m)}}render(){var m=this.props,d=m.totalScore,q=m.mark,Q=m.tip,L=m.disabled,M=m.t;return R().createElement("div",{className:""},R().createElement("div",{className:""},R().createElement(T.Z,{formatter:this.limitDecimals,parser:this.limitDecimals,min:0,disabled:L,defaultValue:q,onChange:this.handleMarkChange,max:d}),R().createElement("div",{style:{display:"none"}},R().createElement("input",{type:"text"})),R().createElement("span",{style:{marginLeft:"6px"}},M("personal.scoreLabel")),R().createElement("span",{className:"qualified-standard-tip"},Q||(0,y.ZT)("".concat(M("lineClassStudy.markTip")),d,d))))}}g.defaultProps={},me.Z=(0,f.Z)((0,e.$j)((0,ue.Z)()(g)))},16598:function(be,me,r){"use strict";var B=r(59250),T=r(13013),I=r(30887),R=r(99210),e=r(62029),ue=r(12924),f=r.n(ue),y=r(57254),g=r(91768),Z=r(26096),m=(q,Q)=>{var L=q.map(M=>f().createElement(Z.Z,(0,e.Z)({},M,{type:Q,key:M.key||M.type})));return Q==="more"?f().createElement(R.Z,null,L):L},d=q=>{var Q=q.buttons,L=q.t,M=q.visibleNum,o=Q.filter(D=>D.visible),v=M||1,k=[],j=[];if(o.length<=v)j=[...o];else if(o.length>v)j=[...o.slice(0,v)],k=[...o.slice(v)];else return"/";return f().createElement("div",{className:"cl-table__cell-action"},m(j),j.some(D=>D.visible)&&k.some(D=>D.visible)?f().createElement(f().Fragment,null,f().createElement("span",{className:"cl-pointer-divide"}),f().createElement(T.Z,{overlay:m(k,"more")},f().createElement("span",{className:"cl-pointer"},L("common.more")," ",f().createElement(y.Z,null)))):null)};d.defaultProps={visibleNum:1},me.Z=(0,g.Z)()(d)},98417:function(be,me,r){"use strict";var B=r(62029),T=r(57663),I=r(71577),R=r(34792),e=r(48086),ue=r(34669),f=r(82833),y=r(22385),g=r(31097),Z=r(12924),m=r.n(Z),d=r(91768),q=r(90631),Q=r(28216),L=r(27361),M=r.n(L),o=r(78138),v=r.n(o),k=r(27326),j=r.n(k),D=r(61120),x=r.n(D),S=r(18329),oe=r(38642),N=r(31457),F=r(6793),ne=r(37055),J=r(5430),W=r(10237),Y=r(84874),V=w=>{var h=w.user;return{enterpriseId:h.enterpriseId}},X={size:"medium",destroyOnClose:!0,bodyStyle:{overflowY:"auto",padding:0},maskClosable:!1};class ie extends m().Component{constructor(h){super(h);this.getTaskInfo=()=>{var _=this.props,C=_.userId,A=_.taskId,U=_.studyType,se=U===void 0?"":U,z=this.state.whiteList,p=z.zaraFlag?ne.ZP.TaskStudyRecord.getCustomTaskInfo(A):ne.ZP.TaskStudyRecord.getTaskInfo(A),H=z.zaraFlag?ne.ZP.StudyProjectList.studyCustomRecord(A):ne.ZP.StudyProjectList.studyRecord(A),G=se==="project"?H:p,re={user_id:C};W.WY.get({url:G,params:re}).then(fe=>{this.setState({taskInfo:se==="project"?this.compileData(fe.data):fe.data.data})})},this.compileData=_=>{var C=this.props.from,A=C===void 0?"":C;return _.map(U=>{var se=U.resources.map(z=>A==="self_study"&&z.type===14?{}:{type:this.getResourceType(z),iconType:this.getResourceIcon(z),title:String(z.type)!=="14"&&String(z.courseType)!=="14"?z.resource_name:z.evaluate.name,courseType:z.courseType,studyProgress:z.study_progress,biz_type:z.biz_type||"",updateTime:z.update_time,resource_quiz_vo:{},live_lesson:z.type===16?z.live_lesson:{},offLineCourseSingVo:z.type===7||z.type===13?z.offLineCourseSingVo:{},courseInfo:z.type===1&&z.biz_type!=="micro_course"?z.resources.map(p=>({type:this.getResourceType(p),iconType:this.getResourceIcon(z),title:p.resource_name,studyProgress:p.study_progress,resource_quiz_vo:p.resource_quiz_vo||{}})):[]});return{stageName:U.stage_name,courseInfo:se.filter(z=>Object.keys(z).length>0)}})},this.getResourceIcon=_=>{var C=_.type;switch(C){case 1:return"icon-kecheng2";case 2:case 3:return"icon-sucai";case 6:return"icon-kaoshi2";case 7:return"icon-xianxiake1";case 9:return"icon-tiaoyan";case 10:return"icon-shicaozuoye";case 11:return"icon-gangweiceping1";case 12:return"icon-fudao";case 13:return"icon-kaoqin";case 14:return"icon-tuiguang";case 15:return"icon-kaoshi2";case 16:return"icon-zhiboke";case 17:return"icon-lianxi1";default:return"icon-kecheng2"}},this.getResourceType=_=>{var C=_.type,A=_.content_type,U=_.biz_type;switch(C){case 1:return U==="micro_course"?"wei":"crs";case 2:return A;case 3:return A;case 6:return"ex";case 7:return"xx";case 9:return"questionnaire";case 13:return"attendance";case 15:return"ex";case 16:return"liveClass";case 17:return"practice";default:return A}},this.handleCancel=()=>{var _=this.props.onCancel;_&&this.props.onCancel()},this.renderTutorStatus=_=>{var C=this.props.t;return _.tutorialsStatus==="no_tutor"?C("tutorial.noSelectTutor"):_.tutorialsStatus==="to_be_submitted"?C("tutorial.waitSubmitTutor"):_.tutorialsStatus==="to_be_evaluated"?C("tutorial.waitEvaluate"):_.tutorialsStatus==="evaluated"?"".concat(C("tutorial.haveEvaluation")," ").concat(_.score).concat(C("common.examScoreUnit")):""},this.renderTitle=_=>_.type==="tutor"?_.courseName:_.type==="xx"?M()(_.offLineCourseSingVo,"title",""):_.title,this.renderResourceItem=(_,C)=>{var A=this.props.t;return _.type==="practice"?null:m().createElement("div",{className:"stage-item-resource",key:C},m().createElement("span",{className:"stage-item-resource-icon"},m().createElement(Y.Z,{iconClass:_.iconType,size:"16px"})),m().createElement("span",{className:"stage-item-resource-title"},m().createElement("span",{className:"stage-item-resource-title-name"},m().createElement(g.Z,{title:this.renderTitle(_)},this.renderTitle(_))),_.studyProgress>0?m().createElement("span",{className:"stage-item-resource-time"},"(",(0,F.p6)(_.updateTime,"yyyy.MM.dd hh:mm"),A("component.update"),")"):null),m().createElement("span",{className:"stage-item-resource-progress"},_.type==="tutor"?this.renderTutorStatus(_):m().createElement(f.Z,{percent:+_.studyProgress,size:"small",status:_.studyProgress>=100?"success":"normal",strokeColor:_.studyProgress>=100?"#58D28B":""})),_.courseInfo&&_.courseInfo.length>0?m().createElement("div",{className:"stage-item-resource-course course-resource"},_.courseInfo.map((U,se)=>m().createElement("div",{className:"course-resource-item",key:se},m().createElement("span",{className:"course-resource-item-icon"}),m().createElement("span",{className:"course-resource-item-title"},U.title),m().createElement("span",{className:"course-resource-item-progress"},m().createElement(f.Z,{percent:+U.studyProgress,size:"small",status:U.studyProgress>=100?"success":"normal",strokeColor:U.studyProgress>=100?"#58D28B":""})),U.resource_quiz_vo.question_count>0?m().createElement("div",{className:"course-resource-item-test"},A("component.InClassTest"),m().createElement("span",null,U.resource_quiz_vo.answer_record_count>0?A("component.tookPart"):A("component.NotAttending"))):null))):null,_.courseType===7?m().createElement("div",{className:"stage-item-resource-offline"},m().createElement("div",{className:"offline-info-item"},A("component.offlineAddress"),"\uFF1A",M()(_.offLineCourseSingVo,"address","")||A("component.noLabel")),M()(_.offLineCourseSingVo,"signRecordDetailList",[]).map((U,se)=>m().createElement("div",{className:"offline-record-info-item-row",key:se},m().createElement("div",null,m().createElement("span",null,A("lineClass.attendanceName"),"\uFF1A"),m().createElement("span",null,U.signName)),U.signInConfigExist?m().createElement("div",null,m().createElement("span",null,A("personal.checkInTime"),"\uFF1A"),m().createElement("span",null,"".concat(U.signInTime?v()(U.signInTime).format("YYYY-MM-DD HH:mm"):"--"," ").concat(U.signInStatusDesc||""))):null,U.signOutConfigExist?m().createElement("div",null,m().createElement("span",null,A("lineClass.signBack"),"\uFF1A"),m().createElement("span",null,"".concat(U.signOutTime?v()(U.signOutTime).format("YYYY-MM-DD HH:mm"):"--"," ").concat(U.signOutStatusDesc||""))):m().createElement("div",null)))):null,_.courseType===13?m().createElement("div",{className:"stage-item-resource-offline"},M()(_.offLineCourseSingVo,"signRecordDetailList",[]).map((U,se)=>m().createElement("div",{className:"offline-record-info-item-row",key:se},m().createElement("div",null,m().createElement("span",null,A("lineClass.attendanceName"),"\uFF1A"),m().createElement("span",null,U.signName)),U.signInConfigExist?m().createElement("div",null,m().createElement("span",null,A("personal.checkInTime"),"\uFF1A"),m().createElement("span",null,"".concat(U.signInTime?v()(U.signInTime).format("YYYY-MM-DD HH:mm"):"--"," ").concat(U.signInStatusDesc||""))):null,U.signOutConfigExist?m().createElement("div",null,m().createElement("span",null,A("lineClass.signBack"),"\uFF1A"),m().createElement("span",null,"".concat(U.signOutTime?v()(U.signOutTime).format("YYYY-MM-DD HH:mm"):"--"," ").concat(U.signOutStatusDesc||""))):m().createElement("div",null)))):null,_.courseType===16?m().createElement("div",{className:"stage-item-resource-offline"},m().createElement("div",{className:"liveClass-record-info-item-row",key:C},m().createElement("div",null,m().createElement("span",null,A("component.lecturer"),"\uFF1A"),m().createElement("span",null,_.live_lesson.teacher_name)),_.live_lesson.live_start_time?m().createElement("div",null,m().createElement("span",null,A("live.liveTime"),"\uFF1A"),m().createElement("span",null,_.live_lesson.live_start_time&&_.live_lesson.live_end_time===0?v()(_.live_lesson.live_start_time*1).format("YYYY-MM-DD HH:mm"):""),m().createElement("span",null,_.live_lesson.live_start_time&&_.live_lesson.live_end_time!==0?(0,oe.yM)(_.live_lesson.live_start_time,_.live_lesson.live_end_time):"")):"--")):null)},this.changeProgressSvg=_=>{_.length>0&&_.forEach(C=>{var A=C.getElementsByTagName("svg")[0];A&&(A.parentNode.display="none",A.parentNode.innerHTML='<span class="item-right-complete">100%</span>')})},this.changeStyle=(_,C,A)=>{_&&_.length!==0&&_.forEach(U=>{U.style[C]=A})},this.exportFile=()=>{var _=this.props,C=_.taskId,A=_.userId,U=_.studyType,se=ne.ZP.StudyProjectList.getExportRecord(C),z=J.lk.getExportRecord(C),p=U==="project"?z:se;this.setState({download:!0});var H={user_id:A};W.WY.get({url:p,params:H}).then(G=>{this.setState({download:!1}),G.data.code===200&&((0,N.Pp)(this.props),e.default.success(this.props.t("study.compoundSucceed")))}).catch(()=>{this.setState({download:!1})})},this.getFirstElementChild=_=>{if(_.firstElementChild!==void 0)return _.firstElementChild;for(var C=_.firstChild;C&&C.nodeType!==1;)C=C.nextSibling;return C},this.getLastElementChild=_=>{if(_.lastElementChild!==void 0)return _.lastElementChild;for(var C=_.lastChild;C&&C.nodeType!==1;)C=C.previousSibling;return C},this.exportPdf=_=>{var C=this.props,A=C.mainTaskInfo,U=C.studyType;this.setState({downloadPdf:!0}),e.default.warn(this.props.t("common.pdfDowning"));var se=(0,F.p6)(new Date,"yyyy-MM-dd hh:mm:ss"),z=document.getElementsByClassName("ant-modal-content")[0];z.style.overflowX="hidden";var p=document.createElement("div");p.className="taskstudy-record extra-record",p.scrollTop=0;var H=document.getElementsByClassName("taskstudy-record")[0],G;H?(G=H.cloneNode(!0),G.className="extra-no-style"):(G=document.createElement("div"),G.className="extra-no-style");var re=G.getElementsByClassName("taskstudy-record-item");this.changeStyle(re,"borderTop",0);var fe=G.getElementsByClassName("stage-item-title");this.changeStyle(fe,"fontSize","13px");var he=G.getElementsByClassName("stage-item-resource-icon"),Ze=G.getElementsByClassName("course-resource-item-icon");this.changeStyle(he,"marginRight","0"),this.changeStyle(Ze,"marginRight","0");var Se=G.getElementsByClassName("stage-item-resource-title"),ye=G.getElementsByClassName("course-resource-item-title");this.changeStyle(Se,"fontSize","13px"),this.changeStyle(ye,"fontSize","13px");var xe=G.getElementsByClassName("stage-item-resource");this.changeStyle(xe,"padding","20px 0"),this.changeStyle(xe,"borderBottom","0.5px solid #8C8C8C");var Re=G.getElementsByClassName("stage-item-resource-offline");this.changeStyle(Re,"paddingTop","10px");var Fe=this.getLastElementChild(this.getLastElementChild(G));Fe.style.paddingBottom="90px";var lt=this.getFirstElementChild(G),ot=document.createElement("h1");ot.innerHTML=window.localStorage.getItem("enterpriseName"),G.insertBefore(ot,lt);var gt=document.createElement("table");gt.className="stage-item-table",gt.innerHTML=`<tbody>
      <tr>
        <td>\u59D3\u540D</td>
        <td colspan="3">`.concat(_.userName||"",`</td>
      </tr>
      <tr>
        <td>\u6240\u5C5E\u90E8\u95E8</td>
        <td> `).concat(_.departName.replace(/,/g," | ")||"",`</td>
        <td>\u6240\u5C5E\u5C97\u4F4D</td>
        <td>`).concat(_.postNameList?_.postNameList.join(" | "):"",`</td>
      </tr>
    </tbody>`),G.insertBefore(gt,lt);var je=document.createElement("div");je.className="stage-item-bottom",je.innerHTML=`<div class="item-bottom-left">
        \u64CD\u4F5C\u4EBA\uFF1A`.concat(window.localStorage.getItem("name"),`
    </div>
    <div class="item-bottom-right">
      <span>
          \u5BFC\u51FA\u9879\u76EE\uFF1A\u5B66\u4E60\u8BB0\u5F55
      </span>
      <span>
          \u5BFC\u51FA\u65F6\u95F4\uFF1A`).concat(se,`
      </span>
    </div>`),G.appendChild(je);var Te=G.getElementsByClassName("stage-item-resource-progress"),Qe=G.getElementsByClassName("course-resource-item-progress"),kt=G.getElementsByClassName("ant-progress-inner"),ca=G.getElementsByClassName("ant-progress-text");this.changeStyle(Te,"width","230px"),this.changeStyle(Qe,"width","230px"),this.changeStyle(kt,"background","#ebebeb"),this.changeStyle(ca,"color","#000000"),this.changeProgressSvg(Te),this.changeProgressSvg(Qe);var jt=G.querySelectorAll("svg");jt.length>0&&jt.forEach(mt=>{mt.style.display="none"}),p.appendChild(G),z.appendChild(p),x()(G,{allowTaint:!0,scale:3}).then(mt=>{for(var xt=new(j())("p","mm","a4"),ua=mt.getContext("2d"),wt=190,ea=277,Ye=Math.floor(ea*mt.width/wt),_t=0;_t<mt.height;){var Ve=document.createElement("canvas");Ve.width=mt.width,Ve.height=Math.min(Ye,mt.height-_t),Ve.getContext("2d").putImageData(ua.getImageData(0,_t,mt.width,Math.min(Ye,mt.height-_t)),0,0),xt.addImage(Ve.toDataURL("image/jpeg",1),"JPEG",10,10,wt,Math.min(ea,wt*Ve.height/Ve.width)),_t+=Ye,_t<mt.height&&xt.addPage()}xt.save("".concat(_.userName||"\u59D3\u540D","_").concat(U==="project"?A.title:A.trainName||"\u540D\u79F0","_\u5B66\u4E60\u8BB0\u5F55.pdf")),z.removeChild(p),this.setState({downloadPdf:!1})})},this.compileRecord=_=>({userName:_.user_name,departName:_.department_name,postNameList:[]}),this.generateButton=()=>{var _=this.props,C=_.t,A=_.record,U=_.studyType,se=this.state.whiteList,z=se.generatePdf,p=U==="project"?this.compileRecord(A):A;return z?m().createElement(Z.Fragment,null,m().createElement(I.Z,{type:"primary",loading:this.state.downloadPdf,icon:m().createElement(q.Z,null),onClick:()=>this.exportPdf(p)},C("common.generatePdf")),U!=="project"&&m().createElement(I.Z,{type:"primary",loading:this.state.download,icon:m().createElement(q.Z,null),onClick:()=>this.exportFile()},C("exam.exportQuestion"),"EXCEL")):m().createElement(I.Z,{type:"primary",loading:this.state.download,icon:m().createElement(q.Z,null),onClick:()=>this.exportFile()},C("exam.exportQuestion"),"EXCEL")},this.footerButton=()=>m().createElement(I.Z,{onClick:()=>this.handleCancel()},this.props.t("common.unactivated")),this.state={taskInfo:[],download:!1,whiteList:{generatePdf:(0,oe.UI)("GENERATE_PDF"),zaraFlag:(0,oe.UI)("ZARA_H5")}}}componentDidUpdate(h){h.visible!==this.props.visible&&this.props.visible&&this.getTaskInfo()}render(){var h=this.state.taskInfo,_=this.props,C=_.t,A=_.generatePdf;return m().createElement(S.ZP,(0,B.Z)({},X,{footer:A?this.generateButton():this.footerButton(),visible:this.props.visible,title:C("common.studyRecord"),onCancel:this.handleCancel}),m().createElement("div",{className:"taskstudy-record"},h.map((U,se)=>!U.courseInfo||U.courseInfo.length===0?null:m().createElement("div",{key:se,className:"taskstudy-record-item stage-item"},m().createElement("div",{className:"stage-item-title"},U.stageName),U.courseInfo.map((z,p)=>this.renderResourceItem(z,p))))))}}ie.defaultProps={visible:!1,userId:"",taskId:"",studyType:"",onCancel:()=>{}},me.Z=(0,Q.$j)(V)((0,d.Z)()(ie))},26697:function(be,me,r){"use strict";var B=r(71194),T=r(57016),I=r(57663),R=r(71577),e=r(34792),ue=r(48086),f=r(57361),y=r(9754),g=r.n(y),Z=r(12924),m=r.n(Z),d=r(91768),q=r(10237),Q=r(28216),L=r(37055);class M extends m().Component{constructor(v){var k;super(v);k=this,this.dealData=()=>{this.setState({recordList:this.props.record})},this.getPostTree=(0,f.Z)(g().mark(function j(){var D;return g().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,q.WY.get({url:L.ZP.LibraryList.listByLevel(),params:{level:2,is_layered:"true"}});case 2:D=S.sent,D&&k.setState({treeData:D.data});case 4:case"end":return S.stop()}},j)})),this.AIsure=function(){var j=(0,f.Z)(g().mark(function D(x){var S,oe;return g().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return S=[],k.state.recordList.forEach(ne=>{ne.ai_resources.forEach(J=>{(J.ai_upgrade_status==="not"||J.ai_upgrade_status==="ai_failed")&&S.push({classify_id:x?J.categoryId:"",resourceId:J.resource_id,course_id:ne.course_id})})}),F.next=4,q.WY.post({url:L.ZP.LibraryList.batchSubmit(),data:{resourceClassifyVoList:S}});case 4:oe=F.sent,oe&&(ue.default.success(k.props.t("study.operateSuccess")),k.props.onCancel(!x));case 6:case"end":return F.stop()}},D)}));return function(D){return j.apply(this,arguments)}}(),this.handleChange=(j,D)=>{var x=[];x=this.state.recordList.map(S=>{var oe=S;return oe.ai_resources.map(N=>{var F=N;return N.resource_id===D.resource_id&&(F.categoryId=F.categoryId==j.id?"":j.id),F}),oe}),this.setState({recordList:x})},this.state={recordList:[],treeData:[]},this.operateResourceItem=""}componentDidMount(){this.dealData(),this.getPostTree()}render(){var v=localStorage.getItem("themeColor")||"#465dcd";return m().createElement(T.Z,{title:"".concat(this.props.t("course.chooseAICategory")),visible:this.props.visible,onCancel:()=>this.props.onCancel(),className:"AIAllCourseModal",width:900,footer:null},this.props.visible&&m().createElement("div",{className:"AI-course-modal"},m().createElement("p",null,this.props.t("course.AIValue")),m().createElement("p",null,this.props.t("course.AITip")),m().createElement("div",{className:"AICategory-main"},this.state.recordList.map(k=>m().createElement("ul",{className:"AI-course-list"},k.ai_resources.map(j=>m().createElement("li",null,m().createElement("div",{className:"course-list-name"},j.name),this.state.treeData.map(D=>D.children.length?m().createElement("div",{className:"tabs-box"},m().createElement("p",null,D.name,"\uFF1A"),m().createElement("ul",{className:"tabs"},D.children.map(x=>m().createElement("li",{onClick:()=>this.handleChange(x,j),className:j.categoryId===x.id?"active":"",style:j.categoryId===x.id?{backgroundColor:v}:{}},x.name)))):null)))))),m().createElement("div",{className:"cl-form-fixed-footer__container"},m().createElement(R.Z,{className:"form-page-container-bottom-btn",onClick:()=>this.props.onCancel()},this.props.t("common.cancel")),m().createElement(R.Z,{type:"primary",onClick:()=>this.AIsure(!0)},this.props.t("course.AICut")),m().createElement(R.Z,{type:"primary",onClick:()=>this.AIsure()},this.props.t("course.ManualCut")))))}}me.Z=(0,Q.$j)()((0,d.Z)()(M))},63848:function(be,me,r){"use strict";var B=r(36877),T=r(32969),I=r(12924),R=r.n(I),e=r(91768),ue=r(56130);class f extends R().PureComponent{constructor(){super(...arguments);this.onChange=(g,Z)=>{this.props.onChange(g,Z)}}render(){var g=this.props,Z=g.value,m=g.classify,d=g.showLabel,q=g.className,Q=g.t,L=g.style;return R().createElement("div",{className:"classify-cascader ".concat(q)},d?R().createElement("span",{className:"classify-cascader-label"},Q("component.selectClassifyLabel")):null,R().createElement(T.Z,{changeOnSelect:this.props.changeOnSelect,className:"classify-cascader-select ".concat(q),options:m,onChange:this.onChange,placeholder:Q("component.selectClassifyLabel"),value:Z,style:L,loadData:this.props.loadData}))}}f.defaultProps={showLabel:!0,changeOnSelect:!0,onChange:()=>{}},me.Z=(0,ue.Z)((0,e.Z)()(f))},51697:function(be,me,r){"use strict";var B=r(22385),T=r(31097),I=r(33565),R=r(12924),e=r.n(R),ue=r(28216),f=r(84874),y=Z=>{var m=Z.title,d=Z.visible,q=Z.placement,Q=q===void 0?"top":q,L=Z.children,M=L===void 0?null:L,o=Z.isNewUser,v=o===void 0?"":o,k=Z.closeGuide,j=Z.guideStatus,D=(0,R.useState)(!1),x=(0,I.Z)(D,2),S=x[0],oe=x[1],N=J=>e().createElement("div",{className:"guide-tooltip-title"},J,e().createElement("span",{onClick:F},e().createElement(f.Z,{iconClass:"icon-f-close",size:"12px",color:"#fff"})));(0,R.useEffect)(()=>{oe(d)},[d]);var F=J=>{if(J.stopPropagation(),J.preventDefault(),oe(!1),k){k();return}v==="true"&&Z.dispatch({type:"shouldRenderHeaderGuide",payload:{headerGuideStatus:!0}}),ne()},ne=()=>{localStorage.setItem("guideStatus","false"),Z.dispatch({type:"updateGuideStatus",payload:{guideStatus:"false"}})};return e().createElement(T.Z,{title:N(m),placement:Q,visible:S&&j==="true"&&m},M)},g=Z=>({guideStatus:Z.advancedSetting.guideStatus,isNewUser:Z.advancedSetting.isNewUser});me.Z=(0,ue.$j)(g)(y)},54650:function(be,me,r){"use strict";var B=r(13062),T=r(71230),I=r(89032),R=r(15746),e=r(57361),ue=r(9754),f=r.n(ue),y=r(12924),g=r.n(y),Z=r(91768),m=r(74880),d=r.n(m),q=r(18329),Q=r(70517);class L extends g().Component{constructor(o){var v;super(o);v=this,this.onOk=(0,e.Z)(f().mark(function k(){var j,D,x;return f().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,Q.yW)();case 2:j=oe.sent,D=j.data,x=j.success,x==="true"&&((0,Q.$v)(),window.open(D.url,"_blank")),v.props.onClose();case 7:case"end":return oe.stop()}},k)})),this.onCancel=()=>{(0,Q.$v)(),this.props.onClose("noNeed")},this.state={featureList:[{title:"resourceLibrary.featureTitle1",subTitle:"resourceLibrary.featureSubTitle1",icon:"member_icon_mfzy.png"},{title:"resourceLibrary.featureTitle2",subTitle:"resourceLibrary.featureSubTitle2",icon:"member_icon_rl.png"},{title:"resourceLibrary.featureTitle3",subTitle:"resourceLibrary.featureSubTitle3",icon:"member_icon_gq.png"},{title:"resourceLibrary.featureTitle4",subTitle:"resourceLibrary.featureSubTitle4",icon:"member_icon_ai.png"},{title:"resourceLibrary.featureTitle5",subTitle:"resourceLibrary.featureSubTitle5",icon:"member_icon_ht.png"},{title:"resourceLibrary.featureTitle6",subTitle:"resourceLibrary.featureSubTitle6",icon:"member_icon_tdxz.png"}],memberList:["resourceLibrary.moreMemberTitle1","resourceLibrary.moreMemberTitle2","resourceLibrary.moreMemberTitle3","resourceLibrary.moreMemberTitle4","resourceLibrary.moreMemberTitle5"]}}render(){var o=this.state,v=o.featureList,k=o.memberList,j=this.props,D=j.t,x=j.visible;return g().createElement(q.ZP,{visible:x,width:"542",footer:null,bodyStyle:{maxHeight:"initial",width:489,height:629,padding:0},title:"",className:d().memberModal,closable:!1},g().createElement("div",{className:d().memberContent},g().createElement("img",{className:d().memberBg,src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/laihua/member_bg.png")}),g().createElement("img",{className:d().memberTitle,src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/laihua/member_title.png")}),g().createElement("p",{className:d().subTitle},D("resourceLibrary.freeTitle")),g().createElement("ul",{className:d().box},g().createElement("li",{className:d().itemBox},g().createElement(T.Z,null,v.map(S=>g().createElement(R.Z,{key:S.icon,span:8},g().createElement("img",{className:d().memberIcon,src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/laihua/").concat(S.icon)}),g().createElement("p",{className:d().featureTitle},D(S.title)),g().createElement("p",{className:d().featureSubTitle},D(S.subTitle)))))),g().createElement("li",{className:d().itemBox},g().createElement("div",{className:d().title},g().createElement("img",{src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/laihua/member_more_left.png")}),g().createElement("img",{className:d().titleCenter,src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/laihua/member_more.png")}),g().createElement("img",{src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/laihua/member_more_right.png")})),g().createElement("div",{className:d().content},k.map(S=>g().createElement("span",{className:d().name,key:S},D(S)))))),g().createElement("div",{className:d().okBtn,onClick:this.onOk},g().createElement("img",{className:"".concat(d().btnBg," ").concat(d().btnDefault),src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/laihua/member_btn_bg.png")}),g().createElement("img",{className:"".concat(d().btnBg," ").concat(d().btnActive),src:"".concat("https://sdn.coolcollege.cn","/assets/kuxueyuan/laihua/member_btn_bg_active.png")}),D("resourceLibrary.freeMember")),g().createElement("p",{className:d().cancleBtn,onClick:this.onCancel},D("resourceLibrary.noNeed"))))}}me.Z=(0,Z.Z)()(L)},54792:function(be,me,r){"use strict";var B=r(62029),T=r(63185),I=r(9676),R=r(47673),e=r(4107),ue=r(88986),f=r(12924),y=r.n(f),g=r(91768),Z=r(59239),m=r(55446),d=r.n(m),q=r(18329),Q=r(2396);class L extends y().Component{constructor(){super(...arguments);this.state={isChecked:!1},this.handleBeforeCreate=()=>{var v=this.props,k=v.form,j=v.id,D=v.onCreate,x=this.state.isChecked;k.validateFields((S,oe)=>{if(!S){var N=(0,ue.Z)({},oe);x||(N.value=0);var F=(0,ue.Z)((0,ue.Z)({},N),{},{id:j});D(F),setTimeout(()=>{k.resetFields()},100)}})},this.handleBeforeCancel=()=>{var v=this.props,k=v.form,j=v.onCancel;j(),setTimeout(()=>{k.resetFields()},100)},this.checkScore=(v,k,j)=>{var D=this.props.t,x=this.state.isChecked;if(x&&(0,Q.kh)(k)){j(D("component.setScoreRuleTip"));return}j()},this.handleCheckChange=v=>{this.setState({isChecked:v.target.checked})},this.renderItem=()=>{var v=this.props,k=v.form,j=v.initialValue,D=v.labelTxt,x=this.state.isChecked,S=k.getFieldDecorator,oe={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},N=x?S("value",{initialValue:j,rules:[{validator:this.checkScore}]})(y().createElement(e.Z,{maxLength:30,placeholder:""})):null,F=y().createElement(y().Fragment,null,y().createElement(I.Z,{checked:x,onChange:this.handleCheckChange},D));return y().createElement(Z.Z.Item,(0,B.Z)({label:F},oe),N)}}componentDidUpdate(v){this.props.visible&&this.props.visible!==v.visible&&this.setState({isChecked:!!this.props.initialValue})}render(){var v=this.props,k=v.visible,j=v.title,D=v.prefixCls;return y().createElement(q.ZP,{size:"small",visible:k,title:j,onCancel:this.handleBeforeCancel,onOk:this.handleBeforeCreate},y().createElement(Z.Z,{className:"".concat(D),layout:"horizontal",colon:!1},this.renderItem(),y().createElement("div",{className:"".concat(D,"__children")},this.props.children)))}}L.defaultProps={prefixCls:"cl-setscore",id:"",visible:!1,title:"SetScore",labelTxt:"",initialValue:"",onCancel:()=>{},onCreate:()=>{}};var M=Z.Z.create({name:"ClSetupBoxInModal"})(L);me.Z=(0,g.Z)()(M)},55175:function(be,me,r){"use strict";r.d(me,{Z:function(){return g}});var B=r(22385),T=r(31097),I=r(12924),R=r.n(I),e=r(84387),ue=r(78861),f=r(56628),y=r.n(f);function g(Z){var m=Z.title,d=m===void 0?"":m,q=Z.titleTip,Q=q===void 0?"":q,L=Z.onClick,M=L===void 0?()=>{}:L,o=Z.clickRender,v=o===void 0?null:o,k=Z.t,j=Z.notShowMore,D=j===void 0?!1:j;return R().createElement("div",{className:y()["header-content"]},R().createElement("span",{className:y().title},d,Q&&R().createElement(T.Z,{placement:"right",title:Q},R().createElement(e.Z,{style:{fontSize:14,marginLeft:"6px",color:"rgba(0, 0, 0, 0.45)"}}))),D?null:v?v():R().createElement("div",{className:y().dynamics,onClick:M},k("authScope.linkMore")," ",R().createElement(ue.Z,{style:{fontSize:14}})))}},90978:function(be,me,r){"use strict";var B=r(34792),T=r(48086),I=r(57361),R=r(33565),e=r(9754),ue=r.n(e),f=r(12924),y=r.n(f),g=r(78001),Z=r(28216),m=r(88487),d=r(95173),q=r.n(d),Q=r(69164),L=r(55175),M=v=>{var k=v.params,j=v.t,D=v.isRender,x=v.noHeader,S=v.prefixCls,oe=S===void 0?"":S,N=v.refreshSignIn,F=v.dispatch,ne=k.themeColor,J=(0,f.useState)({continuousDays:"",todayIs:"",signedToday:!1,reward:"",nextReward:"",nextRewardDays:"",todayPosition:""}),W=(0,R.Z)(J,2),Y=W[0],V=W[1],X=(0,f.useState)(Array.from({length:6},()=>({title:g.Z.t("pointsSetting.dayTip",{num:"n"}),isToday:!1,icon:"https://oss.coolcollege.cn/1816993863471075328.png",content:g.Z.t("pointsSetting.pointsUnit",{num:"n"}),checked:!1}))),ie=(0,R.Z)(X,2),w=ie[0],h=ie[1];(0,f.useEffect)(()=>{_()},[D]),(0,f.useEffect)(()=>{N&&_()},[N]);var _=function(){var U=(0,I.Z)(ue().mark(function se(){var z,p,H,G,re,fe,he,Ze,Se,ye,xe,Re,Fe;return ue().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.next=2,(0,m.zQ)();case 2:z=ot.sent,p=z.data,p.code===0&&(H=p.data,G=H.continuous_sign_in_day_count,re=H.today_is_what_day,fe=H.sign_in_integral_count,he=H.signed_today,Ze=H.continuous_sign_in_integral_count,Se=H.next_reward_day,ye=H.today_position,xe=H.sign_info_list,Re=H.daily_sign_score,Fe={continuousDays:G,todayIs:re,signedToday:he,dailySignScore:Re,reward:fe,continuousReward:Ze,nextRewardDays:Se,todayPosition:ye,signInfoList:xe},V(Fe),C(Fe),N&&F({type:"refresh/refreshSignIn",payload:!1}));case 5:case"end":return ot.stop()}},se)}));return function(){return U.apply(this,arguments)}}(),C=U=>{var se=U.signedToday,z=U.todayPosition,p=U.signInfoList,H={checked:"https://oss.coolcollege.cn/1816993863513018368.png",continuous:"https://oss.coolcollege.cn/1816993863471075328.png",normal:"https://oss.coolcollege.cn/1816993863655624704.png"},G=p.map((re,fe)=>(re.title=g.Z.t("pointsSetting.dayTip",{num:re.what_day||0}),re.content=g.Z.t("pointsSetting.pointsUnit",{num:re.integral||0}),re.icon=H.normal,fe+1<Number(z)&&(re.checked=!0,re.content=j("personal.signed"),re.icon=H.checked),re.continuous==="true"&&(re.title=j("pointsSetting.consecutiveAward"),re.icon=H.continuous),re.today==="true"&&(re.title=j("marketing.theDay"),re.content=se==="true"?j("personal.signed"):g.Z.t("pointsSetting.pointsUnit",{num:re.integral||0}),re.checked=se==="true",re.isToday=!0,re.continuous==="true"&&(re.icon=H.continuous),se==="true"&&(re.icon=H.checked)),re));h(G)},A=function(){var U=(0,I.Z)(ue().mark(function se(){var z,p;return ue().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,m.zB)();case 2:z=G.sent,p=z.data,p.data?((0,Q.Z)(p.data.integral_info||""),_(),F({type:"refresh/refreshPoints",payload:!0})):p.code===4e4?T.default.error(j("common.todaySigned")):T.default.error(p.msg);case 5:case"end":return G.stop()}},se)}));return function(){return U.apply(this,arguments)}}();return y().createElement("div",{className:"".concat(q()["home-sign-in"]," ").concat(oe)},!x&&y().createElement(L.Z,{title:k.title||j("personal.checkInLabel"),t:j,notShowMore:!0}),y().createElement("div",{className:q().content},y().createElement("div",null,y().createElement("span",null,g.Z.t("pointsSetting.preSignInTip")),y().createElement("span",{style:{color:ne}}," ",Y.nextRewardDays||0,g.Z.t("common.day")),y().createElement("span",null,g.Z.t("pointsSetting.afterSignInTip"))),y().createElement("div",{className:q()["sign-in-detail"]},w.map(U=>y().createElement("div",{className:"".concat(q().item," ").concat(U.isToday?q()["active-color"]:""),style:{backgroundColor:U.isToday?ne:"F6F7FB"},key:U.day},y().createElement("div",{className:q().date},U.title),y().createElement("img",{className:q().img,src:U.icon,alt:""}),y().createElement("div",{className:q().points},U.content),U.isToday&&!U.checked?y().createElement("div",{className:q()["sign-in-btn"],style:{color:ne},onClick:A},g.Z.t("personal.checkInLabel")):""))),y().createElement("div",{className:q().desc},y().createElement("div",{className:q()["desc-top"]},y().createElement("div",null,y().createElement("span",null,g.Z.t("pointsSetting.signDaysTip")),y().createElement("span",{style:{color:ne}}," ",Y.continuousDays||0),y().createElement("span",{style:{color:ne}},g.Z.t("common.day"))),y().createElement("div",null,y().createElement("span",null,g.Z.t("pointsSetting.signRewardTip")),y().createElement("span",{style:{color:ne}},g.Z.t("pointsSetting.pointsUnit",{num:Y.reward||0}))),y().createElement("div",null,y().createElement("span",null,g.Z.t("pointsSetting.signContinuousRewardTip")),y().createElement("span",{style:{color:ne}},g.Z.t("pointsSetting.pointsUnit",{num:Y.continuousReward||0})))))))},o=v=>{var k=v.refresh;return{refreshSignIn:k.refreshSignIn}};me.Z=(0,Z.$j)(o)(M)},88487:function(be,me,r){"use strict";r.d(me,{Y:function(){return e},JM:function(){return f},cG:function(){return d},D1:function(){return q},XL:function(){return L},WF:function(){return M},fV:function(){return o},Tw:function(){return v},ZS:function(){return k},xm:function(){return j},tS:function(){return x},Ad:function(){return oe},O$:function(){return N},ws:function(){return F},wM:function(){return ne},PU:function(){return J},yH:function(){return W},Bw:function(){return Y},zQ:function(){return V},zB:function(){return X},HH:function(){return ie}});var B=r(10237),T=r(37055),I=r(5430),R=()=>{var w=CONFIG.Personal.getMyScoreSummary();return request.get({url:w})},e=(w,h)=>{var _=T.ZP.points.myIntegral(w);return B.WY.get({url:_,params:{type:h}})},ue=w=>{var h=w.pageNumber,_=h===void 0?1:h,C=w.pageSize,A=C===void 0?1:C,U="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/user_class_hour_ranking");return request.get({url:U,params:{page_size:A,page_number:_}})},f=()=>{var w="".concat("https://app123492.eapps.dingtalkcloud.com","/platform-api/biz/course/getHomeCourselist");return B.WY.get({url:w,params:{}})},y=()=>{var w="".concat("https://app123492.eapps.dingtalkcloud.com","/knowledge-api/v2/home_page/my_integralV2");return request.get({url:w,params:{}})},g=()=>{var w="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/user/").concat(CONFIG.userId,"/my_integral");return request.get({url:w,params:{enterprise_id:CONFIG.enterpriseId,user_id:CONFIG.userId}})},Z=w=>{var h=w.pageNumber,_=h===void 0?1:h,C=w.pageSize,A=C===void 0?3:C,U="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/integral/integral_listV2");return request.get({url:U,params:{page_size:A,page_number:_,department_id:"",begin_time:"",end_time:"",name:""}})},m=w=>{var h=w.pageNumber,_=h===void 0?1:h,C=w.pageSize,A=C===void 0?3:C,U="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/scores");return request.get({url:U,params:{page_size:A,page_number:_}})},d=w=>{var h=w.template_id,_="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(T.ZP.enterpriseId,"/query_index_score_rank_new");return B.WY.get({url:_,params:{user_id:T.ZP.userId,template_id:h}})},q=w=>{var h=w.template_id,_=w.page_num,C=_===void 0?3:_,A="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v3/").concat(T.ZP.enterpriseId,"/integral/home/rank");return B.WY.get({url:A,params:{template_id:h,page_num:C}})},Q=()=>{var w="".concat("https://app123492.eapps.dingtalkcloud.com","/incentive-api/v2/").concat(CONFIG.enterpriseId,"/users/").concat(CONFIG.userId,"/base_score");return request.get({url:w,params:{dept_id:1}})},L=w=>{var h=w.status,_=h===void 0?1:h,C=w.type,A=C===void 0?"":C,U=w.lecturer_ids,se=U===void 0?[]:U,z=w.pageNumber,p=w.pageSize,H="".concat("https://app123492.eapps.dingtalkcloud.com","/teacher-manage-api/v2/").concat(T.ZP.enterpriseId,"/home_lecturers");return B.WY.get({url:H,params:{status:_,type:A,lecturer_ids:se,page_size:p,page_number:z}})},M=()=>{var w="".concat("https://app123492.eapps.dingtalkcloud.com","/cmdb-api/v2/").concat(T.ZP.enterpriseId,"/home_page/default_banner/query");return B.WY.get({url:w,params:{}})};function o(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{page:0,size:3,t:"SPACE",text:"",enable:!0},h=T.ZP.community.manageSearch();return B.WY.get({url:h,params:w})}function v(w){var h=T.ZP.community.getSpaceByIds();return B.WY.post({url:h,data:{space_ids:w}})}function k(w){var h=w.page_number,_=h===void 0?1:h,C=w.page_size,A=C===void 0?3:C,U=T.ZP.home.tasks();return B.WY.get({url:U,params:{page_number:_,page_size:A}})}function j(){var w=T.ZP.Notice.getNoticeList();return B.WY.get({url:w,params:{page_size:"5",page_number:"1",is_manage:!1}})}function D(w){var h=w.courseId,_=w.appId,C=_===void 0?"cool":_,A=CONFIG.DdLive.getLiveDetail();return request.get({url:A,params:{courseId:h,appId:C}})}function x(w){var h=T.ZP.Courses.getCourseList();return B.WY.get({url:h,params:w})}function S(w){var h=w.ids,_=w.page_number,C=_===void 0?1:_,A=w.page_size,U=A===void 0?3:A,se=CONFIG.CourseManagement.batchQueryByCustom();return request.post({url:se,params:{page_number:C,page_size:U},data:{condition_ids:h}})}function oe(){var w=I.ZP.homeMobileConfig.getPorcelainArea();return B.WY.get({url:w,params:{}})}function N(){var w=I.ZP.PlatformCourse.getRecommendCourses();return B.WY.get({url:w,params:{page_size:"8",page_number:"1",position:"course_mall"}})}function F(w){var h=I.ZP.Common.upload();return B.WY.post({url:h,data:w})}function ne(w){var h=I.ZP.Courses.getComponentCourseByIds();return B.WY.post({url:h,data:w,params:{pageNumber:w.pageNumber,pageSize:w.pageSize}})}function J(w){var h=w.resource_id,_=w.type,C={8:"course",3:"project",2:"course",6:"image_text",0:"course"},A=I.ZP.MobileSetting.checkBannerVisible();return B.WY.get({url:A,params:{resource_id:h,type:C[_]}})}function W(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=T.ZP.points.getDailyTask();return B.WY.post({url:h,data:{event_codes:w}})}function Y(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=T.ZP.points.getTaskRulesConfig();return B.WY.post({url:h,data:{event_codes:w}})}function V(){var w=T.ZP.DailySignIn.signShow();return B.WY.get({url:w})}function X(){var w=T.ZP.DailySignIn.signIn();return B.WY.post({url:w})}function ie(w){var h=T.ZP.points.pickPoints();return B.WY.get({url:h,params:{eventCode:w}})}},77116:function(be,me,r){"use strict";r.d(me,{Z:function(){return Da}});var B=r(62029),T=r(14781),I=r(53431),R=r(20228),e=r(11382),ue=r(71194),f=r(57016),y=r(88986),g=r(34792),Z=r(48086),m=r(12924),d=r.n(m),q=r(91768),Q=r(28216),L=r(91296),M=r.n(L),o=r(76651),v=r(57068),k=r(57361),j=r(9754),D=r.n(j),x=r(89560),S=r(10237),oe=r(65202),N=r(37055),F=r(44881);class ne extends d().Component{constructor(ge){var O;super(ge);O=this,this.onLoadData=b=>new Promise($=>{var te=b.id;setTimeout(()=>{var ce=N.ZP.Classify.getResourceClassify(),ve=te;S.WY.get({url:ce,params:{parent_id:ve}}).then(Pe=>{if(!Pe.data||b.dataRef.children){$();return}var Le=(0,F.P)(Pe.data.list,"query");b.dataRef.children=Le,this.setState({treeData:[...this.state.treeData]})}),$()},300)}),this.handleClickNode=b=>{this.setState({node:b,selectedKeys:[b.id]},()=>{this.props.searchList({classifyId:this.state.node.id})})},this.getList=(0,k.Z)(D().mark(function b(){var $,te;return D().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return $=O.props.t,ve.next=3,S.WY.get({url:N.ZP.Classify.getResourceClassify(),params:{include_unclassified:!0,parent_id:0}});case 3:te=ve.sent,te.data.list=(0,F.P)(te.data.list,"query"),te.data.list.unshift({label:$("common.all"),id:"",isLeaf:!0}),O.props.dispatch({type:"newCourseManagement/updateState",payload:{categoryList:te.data.list}}),O.setState({treeData:te.data.list});case 8:case"end":return ve.stop()}},b)})),this.state={treeData:this.props.newCourseManagement.categoryList,selectedKeys:[this.props.newCourseManagement.classifyId],node:{}}}componentDidMount(){this.getList()}render(){var ge=(0,oe.p)(),O={backgroundColor:ge};return d().createElement("div",null,d().createElement("div",{className:"LayoutCard_title course-category-title"},d().createElement("div",{className:"line",style:O}),this.props.t("course.courseDetailCategory")),d().createElement(x.Z,{list:this.state.treeData,isRoot:!0,selectedKeys:this.state.selectedKeys,onSelect:this.handleClickNode,loadData:this.onLoadData}))}}var J=(0,Q.$j)($e=>({newCourseManagement:$e.newCourseManagement}))((0,q.Z)()(ne)),W=r(88983),Y=r(47933),V=r(57663),X=r(71577),ie=r(47673),w=r(4107),h=r(93485),_=r(43358),C=r(34041),A=r(18106),U=r(88108),se=r(76570),z=r(8212),p=r(28612),H=r(19675),G=r(70517),re=r(54650),fe=r(51697),he=r(84874),Ze=r(67222),Se=r(6793),ye=r(38642),xe=U.Z.TabPane,Re=C.Z.Option,Fe=$e=>({userInfo:$e.user,appType:$e.user.appType,appId:$e.user.appId,newCourseManagement:$e.newCourseManagement,themeColor:$e.advancedSetting.themeColor,qyShield:$e.user.qyShield}),lt={getSetting:N.ZP.advancedSetting.getSetting};class ot extends d().Component{constructor(ge){var O;super(ge);O=this,this.onChangeType=b=>{var $="";b==="all"?$="all":b==="imageText"&&($="true");var te=this.state.statusList,ce=this.props.newCourseManagement,ve=ce.statusType,Pe=ce.liveStatus;b==="course"?te.length===6||te.splice(1,0,...this.addStatusList):te.length===6&&te.splice(1,2),(ve==="requiredCourse"||ve==="notRequiredCourse")&&b!=="course"&&(ve="all"),b==="live_course"&&(ve="all"),Pe="all",this.setState(Le=>({searchData:(0,y.Z)((0,y.Z)({},Le.searchData),{},{classifyType:b,image_text:$,statusType:ve,liveStatus:Pe}),statusList:te}),()=>{this.searchList()})},this.onChangeStatus=b=>{var $=b;b.target&&($=b.target.value),this.setState(te=>({searchData:(0,y.Z)((0,y.Z)({},te.searchData),{},{statusType:$})}),()=>{this.searchList()})},this.onChangeLiveStatus=b=>{var $=b.target.value;this.setState(te=>({searchData:(0,y.Z)((0,y.Z)({},te.searchData),{},{statusType:"all",liveStatus:$})}),()=>{this.searchList()})},this.onChangeSort=b=>{var $;(b==="comment"||b==="like")&&($="asc"),b===this.state.searchData.sortType&&($=this.state.searchData.order==="asc"?"desc":"asc"),this.setState(te=>({searchData:(0,y.Z)((0,y.Z)({},te.searchData),{},{sortType:b,order:$})}),()=>{this.searchList()})},this.handleDealStatusList=()=>{var b=this.props.from,$=this.state.statusList,te=this.props.newCourseManagement.classifyType;(te==="course"||b==="myCourse")&&$.splice(1,0,...this.addStatusList)},this.getSetting=()=>{S.WY.get({url:lt.getSetting(),params:{page_size:9999,page_number:1}}).then(b=>{var $=(0,h.Z)(b.data.list),te;try{for($.s();!(te=$.n()).done;){var ce=te.value;ce.type==="create_course"?this.setState({showCreateBtn:ce.status}):ce.type==="video_resource_create"&&this.setState({showVideoCreateBtn:ce.status})}}catch(ve){$.e(ve)}finally{$.f()}})},this.handleMta=b=>{var $=b==="course_upload"?"/course/management/create":"/course/management/detail?history=courseManagement";(0,ye.eJ)({url:$,projectType:"student"})},this.handleSearch=b=>{var $=b.target.value,te={title:$};this.setState(ce=>({searchData:(0,y.Z)((0,y.Z)({},ce.searchData),te)}),()=>{(0,Se.Ds)(this.searchList,500)()})},this.handleCreateCourse=function(){var b=(0,k.Z)(D().mark(function $(te){var ce,ve;return D().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(localStorage.getItem("openedMemberModal")!=="true"){Le.next=4;break}(0,G.Yv)(te),Le.next=9;break;case 4:return Le.next=6,(0,G.v8)();case 6:ce=Le.sent,ve=ce.data,ve?((0,G.$v)(),(0,G.Yv)(te)):O.setState({visibleMemberModal:!0,routeType:te});case 9:case"end":return Le.stop()}},$)}));return function($){return b.apply(this,arguments)}}(),this.handleCloseMemberModal=b=>{b==="noNeed"&&(0,G.Yv)(this.state.routeType),this.setState({visibleMemberModal:!1})},this.searchList=(0,k.Z)(D().mark(function b(){var $,te,ce,ve,Pe,Le,Je,Be,Ge;return D().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if($=O.props,te=$.appType,ce=$.appId,ve=localStorage.getItem("qyWechatBook"),Pe=O.state.searchData.title,Le="",Je=te==="wx_app"&&ve==="true"&&ce==="9005",!(Pe&&Je)){We.next=18;break}return We.prev=6,We.next=9,(0,Ze.F_)(Pe);case 9:Be=We.sent,Ge=Be.data,Ge.success?Le=Ge.data:Le="",We.next=18;break;case 14:We.prev=14,We.t0=We.catch(6),console.error(We.t0),Le="";case 18:O.props.searchList((0,y.Z)((0,y.Z)({},O.state.searchData),{},{userIds:Le}));case 19:case"end":return We.stop()}},b,null,[[6,14]])})),this.state={searchData:ge.from==="myCourse"?{title:"",statusType:"all",liveStatus:"all",sortType:"all",classifyType:"course",order:"desc",image_text:"all"}:{title:this.props.newCourseManagement.title,statusType:this.props.newCourseManagement.statusType,liveStatus:this.props.newCourseManagement.liveStatus,sortType:this.props.newCourseManagement.sortType,classifyType:this.props.newCourseManagement.classifyType,order:this.props.newCourseManagement.order,image_text:this.props.newCourseManagement.image_text},showCreateBtn:!1,showVideoCreateBtn:!1,statusList:[{value:"all",label:"".concat(this.props.t("common.all")),labelLive:"".concat(this.props.t("live.allLive"))},{value:"noStudy",label:"".concat(this.props.t("course.notStudy"))},{value:"studying",label:"".concat(this.props.t("course.studying"))},{value:"finished",label:"".concat(this.props.t("course.finishStudy"))}],liveStatusList:[{value:"all",label:"".concat(this.props.t("common.all"))},{value:"prepartion",label:"".concat(this.props.t("common.notStarted"))},{value:"live",label:"".concat(this.props.t("live.liveing"))},{value:"end",label:"".concat(this.props.t("common.ended"))}],visibleMemberModal:!1},this.addStatusList=[{value:"requiredCourse",label:"".concat(this.props.t("course.courseStudyTypeTrue"))},{value:"notRequiredCourse",label:"".concat(this.props.t("course.courseStudyTypeFalse"))}],this.sortList=[{value:"all",label:"".concat(this.props.t("common.default"))},{value:"newest",label:"".concat(this.props.t("myExamTask.newest"))},{value:"hottest",label:"".concat(this.props.t("course.hottest"))},{value:"comment",label:"".concat(this.props.t("courseManage.comment"))},{value:"like",label:"".concat(this.props.t("courseManage.like"))}],this.courseTypeList=[{value:"all",label:"".concat(this.props.t("common.all"))},{value:"course",label:"".concat(this.props.t("common.courseLabel"))},{value:"micro_course",label:"".concat(this.props.t("common.microCourse"))},{value:"study_project",label:"".concat(this.props.t("learning.learningProjectAddTitle"))},{value:"imageText",label:"".concat(this.props.t("leftMenuLists.graphicManagement"))},{value:"live_course",label:"".concat(this.props.t("live.live"))}]}componentDidMount(){this.getSetting(),this.handleDealStatusList()}render(){var ge=this.state,O=ge.showCreateBtn,b=ge.searchData,$=ge.showVideoCreateBtn,te=ge.visibleMemberModal,ce=ge.liveStatusList,ve=ge.statusList,Pe=this.props,Le=Pe.themeColor,Je=Pe.from,Be=Pe.t,Ge=Pe.qyShield,vt=v.parse(o.m8.location.search),We=vt.renderGuide,ct=We===void 0?!1:We;return d().createElement("div",{className:"course__search"},d().createElement("div",{className:"course-search-operate-buttons"},d().createElement(w.Z,{style:{width:280},value:this.state.searchData.title,placeholder:Be("searchInputPlaceholder.course"),onChange:Ae=>this.handleSearch(Ae,"change"),suffix:d().createElement(se.Z,{style:{color:"#B7BAC8"}}),onPressEnter:Ae=>this.handleSearch(Ae,"enter"),allowClear:!0}),d().createElement("div",null,$&&Ge==="false"&&d().createElement(X.Z,{type:"primary",ghost:!0,onClick:()=>this.handleCreateCourse(3)},d().createElement(z.Z,null),Be("resourceLibrary.create")),O&&Je!=="myCourse"&&d().createElement(d().Fragment,null,d().createElement(fe.Z,{visible:ct,title:this.props.t("newUserGuidance.fastCreateCourse"),placement:"bottom"},d().createElement(X.Z,{type:"primary",onClick:()=>this.handleMta("course_upload")},d().createElement(he.Z,{iconClass:"iconf-upload-course"}),Be("course.uploadCourse")))))),d().createElement("div",{className:"search-main"},Je!=="myCourse"&&d().createElement(U.Z,{defaultActiveKey:"all",activeKey:b.classifyType,className:"search-tabs",onChange:this.onChangeType},this.courseTypeList.map(Ae=>d().createElement(xe,{tab:Ae.label,key:Ae.value}))),d().createElement("ul",{className:"search-item"},d().createElement("li",null,b.classifyType==="live_course"&&d().createElement(Y.ZP.Group,{onChange:this.onChangeLiveStatus,defaultValue:"all",value:b.liveStatus,buttonStyle:"solid",style:{marginRight:"20px"}},ce.map(Ae=>d().createElement(Y.ZP.Button,{key:Ae.value,value:Ae.value},Ae.label))),b.classifyType==="live_course"&&b.liveStatus==="end"&&d().createElement(C.Z,{value:b.statusType,style:{width:126},onChange:this.onChangeStatus},ve.map(Ae=>d().createElement(Re,{key:Ae.value,value:Ae.value},Ae.value==="all"?Ae.labelLive:Ae.label))),b.classifyType!=="live_course"&&d().createElement(Y.ZP.Group,{onChange:this.onChangeStatus,defaultValue:"all",value:b.statusType,buttonStyle:"solid"},ve.map(Ae=>d().createElement(Y.ZP.Button,{key:Ae.value,value:Ae.value},Ae.label)))),d().createElement("li",null,d().createElement("ul",{className:"sort-list"},this.sortList.map(Ae=>d().createElement("li",{key:Ae.value,style:b.sortType===Ae.value?{color:Le}:{},onClick:()=>this.onChangeSort(Ae.value)},Ae.label,(Ae.value==="comment"||Ae.value==="like")&&d().createElement("div",{className:"sort__icon"},d().createElement(p.Z,{style:{color:Ae.value===b.sortType&&b.order==="asc"?Le:"#BFBFBF"}}),d().createElement(H.Z,{style:{color:Ae.value===b.sortType&&b.order==="desc"?Le:"#BFBFBF"}})))))))),te&&d().createElement(re.Z,{visible:te,onClose:this.handleCloseMemberModal}))}}var gt=(0,Q.$j)(Fe)((0,q.Z)()(ot)),je=r(13254),Te=r(14277),Qe=r(49101),kt=r(1164),ca=r(22385),jt=r(31097),mt=r(96433),xt=r(33304),ua=r(20136),wt=r(55241),ea=r(78138),Ye=r.n(ea),_t=r(28107),Ve=r(64462),dt=r(16239),da=r(54792),ma=r(58546),pa=r(42837),ze=r(56932),ha=r.n(ze),At=r(60667);class ta extends d().Component{constructor(ge){var O;super(ge);O=this,this.handleHoverChange=b=>{this.setState({popoverVisible:b})},this.handleShowSetting=b=>{b.stopPropagation(),b.preventDefault()},this.handleShowSetClassify=b=>{var $=[b.classifyId],te=[b.classifyName],ce=this.state.categoryConfig;this.setState({categoryConfig:(0,y.Z)((0,y.Z)({},ce),{},{visible:!0,selectedKeys:$,selectedNames:te}),currentCourse:b})},this.handleSetCategory=b=>{var $=b.node.id,te=this.state,ce=te.categoryConfig,ve=te.currentCourse,Pe=this.props.onChangeClassify;this.setState({categoryConfig:(0,y.Z)((0,y.Z)({},ce),{},{visible:!1,selectedKeys:[],selectedNames:[]}),currentCourse:{}}),Pe&&Pe(ve,$)},this.handleCancelSetCategory=()=>{var b=this.state.categoryConfig;this.setState({categoryConfig:(0,y.Z)((0,y.Z)({},b),{},{visible:!1}),currentCourse:{}})},this.handleShowSetCredit=b=>{var $=this.props.purchasedCourseScore,te=this.state.setScoreConfig,ce=b.scope,ve=b.credit;ce!==2&&!ve?this.setState({setScoreConfig:(0,y.Z)((0,y.Z)({},te),{},{visible:!0,initialValue:$}),currentCourse:b}):this.setState({setScoreConfig:(0,y.Z)((0,y.Z)({},te),{},{visible:!0,initialValue:b.credit}),currentCourse:b})},this.handleCancelSetScore=()=>{var b=this.state.setScoreConfig;this.setState({setScoreConfig:(0,y.Z)((0,y.Z)({},b),{},{visible:!1}),currentCourse:{}})},this.handleSetScore=b=>{var $=b.value,te=this.state,ce=te.setScoreConfig,ve=te.currentCourse,Pe=this.props.onSetScore;this.setState({setScoreConfig:(0,y.Z)((0,y.Z)({},ce),{},{visible:!1})}),Pe&&Pe($,ve)},this.handleEditCourse=b=>{var $=b.relationPlan,te=b.id,ce=b.bizType,ve=b.project_id;$===!0?this.handleReferenceList(b.id,"continueEdit",ce):ce===3?o.m8.push("/training/learning/project/add?id=".concat(ve)):ce===6?o.m8.push("/knowledgeBase/graphicLesson/detail?courseId=".concat(te,"&history=courseManagement")):(0,ye.eJ)({url:"/course/management/detail?courseId=".concat(te,"&history=courseManagement")})},this.continueEdit=()=>{var b=this.state.referenceWithOtherConfig,$=b.resourceId,te=b.bizType;te===6?o.m8.push("/knowledgeBase/graphicLesson/detail?courseId=".concat($,"&history=courseManagement")):(0,ye.eJ)({url:"/course/management/detail?courseId=".concat($,"&history=courseManagement")})},this.handleDeleteCourse=b=>{var $=this.props.onDeleteCourse;$&&$(b)},this.handleReferenceList=(b,$,te)=>{this.setState(ce=>({referenceWithOtherConfig:(0,y.Z)((0,y.Z)({},ce.referenceWithOtherConfig),{},{visible:!ce.referenceWithOtherConfig.visible,bizType:te,resourceId:b||"",operation:$||""})}))},this.handleCancelRelease=b=>{var $=this.props,te=$.onReleaseOrNot,ce=$.t;b.relationPlan===!0?this.handleReferenceList(b.id,"cancelPublish"):f.Z.confirm({title:ce("common.tip"),content:ce("course.okCancelPublish"),okText:ce("common.ok"),cancelText:ce("common.cancel"),onOk(){te&&te(b)},onCancel(){}})},this.handleRecommendOrNot=b=>{var $=this.props.onRecommendOrNot;$&&$(b)},this.renderSettingButtons=b=>{var $=this.props.t;return d().createElement("div",{className:"course-card__setting-box",onClick:te=>{te.stopPropagation(),this.setState({popoverVisible:!1})}},b.showChangeClassify?d().createElement("div",{onClick:()=>this.handleShowSetClassify(b)},$("course.adjustClassify")):null,d().createElement("div",{onClick:()=>this.handleShowSetCredit(b)},$("course.setCredits")),b.showDelete?d().createElement("div",{onClick:()=>this.handleDeleteCourse(b)},$("common.delete")):null,b.cancleRelease==="true"&&b.bizType!==3?d().createElement("div",{onClick:()=>this.handleCancelRelease(b)},$("course.cancelRelease")):null,b.admin?d().createElement("div",{onClick:()=>this.handleRecommendOrNot(b)},b.recommend===!0?$("course.cancelTop"):$("course.top")):null)},this.renderLiveSettingButtons=b=>{var $=this.props.t;return d().createElement("div",{className:"course-card__setting-box",onClick:te=>{te.stopPropagation(),this.setState({popoverVisible:!1})}},b.showChangeClassify?d().createElement("div",{onClick:()=>this.handleShowSetClassify(b)},$("course.adjustClassify")):null,b.showEdit?d().createElement("div",{onClick:()=>{b.live_status==="end"?o.m8.push({pathname:"/training/learning/task/liveRoom/editPlayback",query:{courseId:b.id,from:"course"}}):o.m8.push({pathname:"/training/learning/task/liveRoom/editLive",query:{courseId:b.id,from:"course"}})}},$("common.edit")):null,b.showDelete?d().createElement("div",{onClick:()=>this.handleDeleteCourse(b)},$("common.delete")):null)},this.handleToCourseDetail=(0,k.Z)(D().mark(function b(){var $,te,ce,ve,Pe,Le;return D().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if($=O.props,te=$.courseInfo,ce=$.dispatch,ve=$.searchParams,Pe=$.t,te.bizType!==8){Be.next=4;break}return te.liveType==="poly_wei"?(0,Ve.K7)(te.id,te.live_status):(0,Ve.It)(te.id,Pe),Be.abrupt("return");case 4:if(te.showSee){Be.next=7;break}return Z.default.info(te.notShowSeeMsg),Be.abrupt("return");case 7:return Be.next=9,ce({type:"currentRoute/updateState",payload:{shouldAddScanCount:!0}});case 9:te.bizType===3?(0,ye.eJ)({url:"/training/trainingProject/traineeView?id=".concat(te.id,"&taskId=").concat(te.project_id,"&source=first")}):te.bizType===2?(Le=te.resource_type==="video",Le?(0,ye.eJ)({url:"/course/enterpriseCourse?courseId=".concat(te.id)}):O.setState({weiProps:{visible:!0,flag:"miniCourse",scene:"courseId=".concat(te.id,"&flag=miniCourse")}})):te.bizType===6||ve.classifyType==="imageText"?(0,ye.eJ)({url:"/course/watch?".concat(v.stringify({courseId:te.id,source:"enterprise",courseName:"",exitAiUpdate:!1,courseType:"imageText"}))}):(0,ye.eJ)({url:"/course/enterpriseCourse?courseId=".concat(te.id,"&taskId=").concat(te.project_id)});case 10:case"end":return Be.stop()}},b)})),this.handleCancelWei=()=>{this.setState({weiProps:{visible:!1,flag:"",scene:""}})},this.getLiveStatus=b=>{var $=this.props.t;switch(b.live_status){case"prepartion":return{color:"warning",name:$("common.notStarted")};case"live":return{color:"success",name:$("live.liveing")};default:return{color:"error",name:$("common.ended")}}},this.state={currentCourse:{},categoryConfig:{selectedKeys:[],selectedNames:[],visible:!1,onCancel:this.handleCancelSetCategory,onOk:this.handleSetCategory},setScoreConfig:{visible:!1,initialValue:"",itemType:"score",labelTxt:ge.t("course.credit"),title:ge.t("course.setCredits"),onCancel:this.handleCancelSetScore,onCreate:this.handleSetScore},weiProps:{visible:!1,flag:"",scene:""},popoverVisible:!1,referenceWithOtherConfig:{visible:!1,type:"course",operation:"",resourceId:"",bizType:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList}}}render(){var ge=this.props,O=ge.courseInfo,b=ge.Cls,$=ge.t,te=ge.settingShow,ce=ge.isDisplayInHome,ve=ge.style,Pe=this.state,Le=Pe.categoryConfig,Je=Pe.setScoreConfig,Be=Pe.weiProps,Ge=Pe.popoverVisible,vt=Pe.referenceWithOtherConfig,We=(0,y.Z)({},ve);return d().createElement("div",{className:"".concat(b||"course-card"),onClick:ct=>ct.stopPropagation(),style:We},d().createElement("div",{className:"course-card__cover-box",onClick:this.handleToCourseDetail},d().createElement("div",{className:"course-card__cover-box__status"},d().createElement("span",{className:["status__dots",O.progress>0&&O.progress<100?"status__pending":"",O.progress===0?"status__not__start":"",O.progress===100?"status__finish":"",O.bizType===8&&O.live_status!=="end"&&O.live_status==="prepartion"?"status__prepartion":"",O.bizType===8&&O.live_status!=="end"&&O.live_status==="live"?"status__live":""].join(" ")}),O.bizType===8&&O.live_status!=="end"?d().createElement(d().Fragment,null,O.live_status==="prepartion"?"".concat(this.props.t("common.notStarted")):"",O.live_status==="live"?"".concat(this.props.t("live.liveing")):""):d().createElement(d().Fragment,null,O.progress>0&&O.progress<100?"".concat(this.props.t("course.studying")):"",O.progress===0?"".concat(this.props.t("course.notStudy")):"",O.progress===100?"".concat(this.props.t("course.finishStudy")):"")),O.bizType===8&&O.live_status==="prepartion"&&d().createElement("div",{className:"course-card__cover-box__time"},Ye()(parseInt(O.startTime)).format("YYYY-MM-DD HH:mm")),d().createElement("img",{src:O.cover,alt:""}),d().createElement("div",{className:"course-card__cover-box__shadow"}),te&&(O.showChangeClassify||O.showEdit||O.showDelete||O.admin)?d().createElement(wt.Z,{content:O.bizType===8?this.renderLiveSettingButtons(O):this.renderSettingButtons(O),arrowPointAtCenter:!0,title:null,placement:"topRight",trigger:"hover",visible:Ge,onVisibleChange:this.handleHoverChange},d().createElement("div",{className:"course-card__cover-box__setting",onClick:ct=>this.handleShowSetting(ct)},d().createElement(he.Z,{iconClass:"icon-icon_settingx1",size:"16px"}))):null),d().createElement("div",{className:"course-card__info-box",onClick:this.handleToCourseDetail},ce&&d().createElement("div",{className:"rate-box_inHome"},d().createElement(xt.Z,{className:"course-card__info-box__body__course-rate",disabled:!0,value:O.score===0?5:O.score,style:{fontSize:12,color:"#FFC563"}})),d().createElement("div",{className:"course-card__info-box__header"},O.studyType&&d().createElement("span",{className:"course-card__tag ".concat(O.studyType==="requiredCourse"?"":"course-card__tag__not_required")},O.studyType==="requiredCourse"?"".concat($("course.requiredStudy")):"".concat($("course.notRequiredStudy"))),O.title),d().createElement("div",{className:"course-card__info-box__body clearfix"},d().createElement("div",{className:"course-card__info-box__body__count-box"},d().createElement("span",null,d().createElement(he.Z,{iconClass:"iconFView"}),O.playCount),d().createElement("span",null,d().createElement(he.Z,{iconClass:"iconComment"}),O.commentCount),d().createElement("span",null,d().createElement(he.Z,{iconClass:"iconLikeFace"}),O.likeCount)),!ce&&d().createElement("div",{className:"course-card__info-box__body__rate-box"},d().createElement(xt.Z,{className:"course-card__info-box__body__course-rate",disabled:!0,value:O.score===0?5:O.score,style:{fontSize:10,color:"#FFC563"}}))),d().createElement("div",{className:"course-card__info-box__footer ".concat(O.bizType!==3||O.project_id?"":"right")},O.bizType!==3||O.project_id?d().createElement("div",{className:"course-card__info-box__footer__teacher-info"},d().createElement("div",{className:"course-card__info-box__footer__teacher-info__avatar"},d().createElement("img",{src:O.teacher_avatar||ha(),alt:""})),ce?d().createElement(jt.Z,{title:!dt.Z[(0,dt.c)()].showCl&&O.teacherName==="\u9177\u5B66\u9662\u8D60\u9001"?"":O.teacher_type==="inside"?d().createElement(At.Z,{dataType:"userName",value:O.teacher_sync_user_id,name:O.teacherName,type:O.teacher_source_type}):O.teacherName},d().createElement("div",{className:"course-card__info-box__footer__teacher-info__name",style:{maxWidth:"85px"}},!dt.Z[(0,dt.c)()].showCl&&O.teacherName==="\u9177\u5B66\u9662\u8D60\u9001"?"":O.teacher_type==="inside"?d().createElement(At.Z,{dataType:"userName",value:O.teacher_sync_user_id,name:O.teacherName,type:O.teacher_source_type}):O.teacherName)):d().createElement("div",{className:"course-card__info-box__footer__teacher-info__name",style:{maxWidth:"100px"}},!dt.Z[(0,dt.c)()].showCl&&O.teacherName==="\u9177\u5B66\u9662\u8D60\u9001"?"":O.teacher_type==="inside"?d().createElement(At.Z,{dataType:"userName",value:O.teacher_sync_user_id,name:O.teacherName,type:O.teacher_source_type}):O.teacherName)):null,d().createElement("div",{className:"course-card__info-box__footer__operate-info"},d().createElement("div",{style:O.show_score==="true"?{}:{marginRight:0},className:["course-type",O.scope===2?"enterprise-course":"platform-course"].join(" ")},O.scope===2?O.original?$("course.original"):$("course.courseDetailOriginalFalse"):$("course.purchased")),O.show_score==="true"?d().createElement("div",{className:"course-card__info-box__footer__operate-info__credit"},O.award_score,$("course.credit")):null))),d().createElement(ma.Z,(0,B.Z)({},Le,{title:$("course.adjustClassify")})),d().createElement(da.Z,Je),d().createElement(pa.Z,{visible:Be.visible,option:Be,onCancel:this.handleCancelWei,title:$("component.microCourseScan"),tip:"component.useCustom"}),d().createElement(_t.Z,(0,B.Z)({},vt,{handleReferenceList:this.handleReferenceList,continueEdit:this.continueEdit})))}}ta.defaultProps={Cls:"course-card"},ta.defaultProps={width:286,settingShow:!0,isDisplayInHome:!1};var La=(0,Q.$j)()((0,q.Z)()(ta));class aa extends d().Component{constructor(ge){var O;super(ge);O=this,this.handleHoverChange=b=>{this.setState({popoverVisible:b})},this.handleShowSetting=b=>{b.stopPropagation(),b.preventDefault()},this.handleShowSetClassify=b=>{var $=[b.classifyId],te=[b.classifyName],ce=this.state.categoryConfig;this.setState({categoryConfig:(0,y.Z)((0,y.Z)({},ce),{},{visible:!0,selectedKeys:$,selectedNames:te}),currentCourse:b})},this.handleSetCategory=b=>{var $=b.node.id,te=this.state,ce=te.categoryConfig,ve=te.currentCourse,Pe=this.props.onChangeClassify;this.setState({categoryConfig:(0,y.Z)((0,y.Z)({},ce),{},{visible:!1,selectedKeys:[],selectedNames:[]}),currentCourse:{}}),Pe&&Pe(ve,$)},this.handleCancelSetCategory=()=>{var b=this.state.categoryConfig;this.setState({categoryConfig:(0,y.Z)((0,y.Z)({},b),{},{visible:!1}),currentCourse:{}})},this.handleShowSetCredit=b=>{var $=this.props.purchasedCourseScore,te=this.state.setScoreConfig,ce=b.scope,ve=b.credit;ce!==2&&!ve?this.setState({setScoreConfig:(0,y.Z)((0,y.Z)({},te),{},{visible:!0,initialValue:$}),currentCourse:b}):this.setState({setScoreConfig:(0,y.Z)((0,y.Z)({},te),{},{visible:!0,initialValue:b.credit}),currentCourse:b})},this.handleCancelSetScore=()=>{var b=this.state.setScoreConfig;this.setState({setScoreConfig:(0,y.Z)((0,y.Z)({},b),{},{visible:!1}),currentCourse:{}})},this.handleSetScore=b=>{var $=b.value,te=this.state,ce=te.setScoreConfig,ve=te.currentCourse,Pe=this.props.onSetScore;this.setState({setScoreConfig:(0,y.Z)((0,y.Z)({},ce),{},{visible:!1})}),Pe&&Pe($,ve)},this.handleEditCourse=b=>{var $=b.relationPlan,te=b.id,ce=b.bizType,ve=b.project_id;$===!0?this.handleReferenceList(b.id,"continueEdit",ce):ce===3?o.m8.push("/training/learning/project/add?id=".concat(ve)):ce===6?o.m8.push("/knowledgeBase/graphicLesson/detail?courseId=".concat(te,"&history=courseManagement")):(0,ye.eJ)({url:"/course/management/detail?courseId=".concat(te,"&history=courseManagement")})},this.continueEdit=()=>{var b=this.state.referenceWithOtherConfig,$=b.resourceId,te=b.bizType;te===6?o.m8.push("/knowledgeBase/graphicLesson/detail?courseId=".concat($,"&history=courseManagement")):(0,ye.eJ)({url:"/course/management/detail?courseId=".concat($,"&history=courseManagement")})},this.handleDeleteCourse=b=>{var $=this.props.onDeleteCourse;$&&$(b)},this.handleReferenceList=(b,$,te)=>{this.setState(ce=>({referenceWithOtherConfig:(0,y.Z)((0,y.Z)({},ce.referenceWithOtherConfig),{},{visible:!ce.referenceWithOtherConfig.visible,bizType:te,resourceId:b||"",operation:$||""})}))},this.handleCancelRelease=b=>{var $=this.props,te=$.onReleaseOrNot,ce=$.t;b.relationPlan===!0?this.handleReferenceList(b.id,"cancelPublish"):f.Z.confirm({title:ce("common.tip"),content:ce("course.okCancelPublish"),okText:ce("common.ok"),cancelText:ce("common.cancel"),onOk(){te&&te(b)},onCancel(){}})},this.handleRecommendOrNot=b=>{var $=this.props.onRecommendOrNot;$&&$(b)},this.renderSettingButtons=b=>{var $=this.props.t;return d().createElement("div",{className:"minicourse-card__setting-box",onClick:te=>{te.stopPropagation(),this.setState({popoverVisible:!1})}},b.showChangeClassify?d().createElement("div",{onClick:()=>this.handleShowSetClassify(b)},$("course.adjustClassify")):null,d().createElement("div",{onClick:()=>this.handleShowSetCredit(b)},$("course.setCredits")),b.showEdit?d().createElement("div",{onClick:()=>this.handleEditCourse(b)},$("common.edit")):null,b.showDelete?d().createElement("div",{onClick:()=>this.handleDeleteCourse(b)},$("common.delete")):null,b.cancleRelease==="true"&&b.bizType!==3?d().createElement("div",{onClick:()=>this.handleCancelRelease(b)},$("course.cancelRelease")):null,b.admin?d().createElement("div",{onClick:()=>this.handleRecommendOrNot(b)},b.recommend===!0?$("course.cancelTop"):$("course.top")):null)},this.handleToCourseDetail=(0,k.Z)(D().mark(function b(){var $,te,ce,ve;return D().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if($=O.props,te=$.courseInfo,ce=$.dispatch,te.showSee){Le.next=4;break}return Z.default.info(te.notShowSeeMsg),Le.abrupt("return");case 4:return Le.next=6,ce({type:"currentRoute/updateState",payload:{shouldAddScanCount:!0}});case 6:ve=te.resource_type==="video",ve?(0,ye.eJ)({url:"/miniCourse/watch?courseId=".concat(te.id,"&isNewVersion=").concat(te.isNewVersion,"&classifyId=").concat(te.classifyId)}):O.setState({weiProps:{visible:!0,option:{flag:"miniCourse",scene:"courseId=".concat(te.id,"&flag=miniCourse")}}});case 8:case"end":return Le.stop()}},b)})),this.handleCancelWei=()=>{this.setState({weiProps:{visible:!1,option:{flag:"",scene:""}}})},this.state={currentCourse:{},categoryConfig:{selectedKeys:[],selectedNames:[],visible:!1,onCancel:this.handleCancelSetCategory,onOk:this.handleSetCategory},setScoreConfig:{visible:!1,initialValue:"",itemType:"score",labelTxt:ge.t("course.credit"),title:ge.t("course.setCredits"),onCancel:this.handleCancelSetScore,onCreate:this.handleSetScore},weiProps:{visible:!1,option:{flag:"",scene:""}},popoverVisible:!1,referenceWithOtherConfig:{visible:!1,type:"course",operation:"",resourceId:"",bizType:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList}}}render(){var ge=this.props,O=ge.courseInfo,b=ge.Cls,$=ge.t,te=ge.settingShow,ce=ge.isDisplayInHome,ve=ge.style,Pe=this.state,Le=Pe.categoryConfig,Je=Pe.setScoreConfig,Be=Pe.weiProps,Ge=Pe.popoverVisible,vt=Pe.referenceWithOtherConfig,We=(0,y.Z)({},ve);return d().createElement("div",{className:"".concat(b||"minicourse-card"),onClick:ct=>ct.stopPropagation(),style:We},d().createElement("div",{className:"minicourse-card__cover-box",onClick:this.handleToCourseDetail},d().createElement("div",{className:"minicourse-card__cover-box__status"},d().createElement("span",{className:["status__dots",O.progress>0&&O.progress<100?"status__pending":"",O.progress===0?"status__not__start":"",O.progress===100?"status__finish":""].join(" ")}),O.progress>0&&O.progress<100?"".concat(this.props.t("course.studying")):"",O.progress===0?"".concat(this.props.t("course.notStudy")):"",O.progress===100?"".concat(this.props.t("course.finishStudy")):""),d().createElement("img",{src:O.cover,alt:""}),d().createElement("div",{className:"minicourse-card__cover-box__shadow"}),te&&(O.showChangeClassify||O.showEdit||O.showDelete||O.admin)?d().createElement(wt.Z,{content:this.renderSettingButtons(O),arrowPointAtCenter:!0,title:null,placement:"topRight",trigger:"hover",visible:Ge,onVisibleChange:this.handleHoverChange},d().createElement("div",{className:"minicourse-card__cover-box__setting",onClick:ct=>this.handleShowSetting(ct)},d().createElement(he.Z,{iconClass:"icon-icon_settingx1",size:"16px"}))):null),d().createElement("div",{className:"minicourse-card__info-box",onClick:this.handleToCourseDetail},d().createElement("div",{className:O.bizType!==3||O.project_id?"minicourse-card__info-box__footer":"minicourse-card__info-box__footer right"},O.bizType!==3||O.project_id?d().createElement("div",{className:"minicourse-card__info-box__footer__teacher-info"},d().createElement("div",{className:"minicourse-card__info-box__footer__teacher-info__avatar"},d().createElement("img",{src:O.teacher_avatar||ha(),alt:""})),ce?d().createElement(jt.Z,{title:!dt.Z[(0,dt.c)()].showCl&&O.teacherName==="\u9177\u5B66\u9662\u8D60\u9001"?"":O.teacher_type==="inside"?d().createElement(At.Z,{dataType:"userName",value:O.teacher_sync_user_id,name:O.teacherName,type:O.teacher_source_type}):O.teacherName},d().createElement("div",{className:"minicourse-card__info-box__footer__teacher-info__name",style:{maxWidth:"85px"}},!dt.Z[(0,dt.c)()].showCl&&O.teacherName==="\u9177\u5B66\u9662\u8D60\u9001"?"":O.teacher_type==="inside"?d().createElement(At.Z,{dataType:"userName",value:O.teacher_sync_user_id,name:O.teacherName,type:O.teacher_source_type}):O.teacherName)):d().createElement("div",{className:"minicourse-card__info-box__footer__teacher-info__name",style:{maxWidth:"100px"}},!dt.Z[(0,dt.c)()].showCl&&O.teacherName==="\u9177\u5B66\u9662\u8D60\u9001"?"":O.teacher_type==="inside"?d().createElement(At.Z,{dataType:"userName",value:O.teacher_sync_user_id,name:O.teacherName,type:O.teacher_source_type}):O.teacherName)):null),d().createElement("div",{className:"minicourse-card__info-box__header"},O.title)),d().createElement(ma.Z,(0,B.Z)({},Le,{title:$("course.adjustClassify")})),d().createElement(da.Z,Je),d().createElement(pa.Z,(0,B.Z)({title:$("component.microCourseScan")},Be,{onCancel:this.handleCancelWei})),d().createElement(_t.Z,(0,B.Z)({},vt,{handleReferenceList:this.handleReferenceList,continueEdit:this.continueEdit})))}}aa.defaultProps={Cls:"minicourse-card"},aa.defaultProps={width:286,settingShow:!0,isDisplayInHome:!1};var Vt=(0,Q.$j)()((0,q.Z)()(aa));class et extends d().PureComponent{render(){var ge=this.props,O=ge.courseListData,b=ge.prefixCls,$=ge.isAdmin,te=ge.searchParams,ce=ge.t,ve=te.classifyType,Pe=te.statusType,Le=te.title,Je=O.list||[];if(Je.length>0)return d().createElement("div",{className:b},d().createElement("div",{className:"clearfix"},Je.map(Ge=>Ge.bizType===2?d().createElement("div",{className:"".concat(b,"__mini__item"),key:Ge.id},d().createElement(Vt,(0,B.Z)({courseInfo:Ge},this.props))):d().createElement("div",{className:"".concat(b,"__item"),key:Ge.id},d().createElement(La,(0,B.Z)({courseInfo:Ge},this.props))))));var Be="";return Pe==="all"&&Le?Be=ce($?"common.adminCourseNoData":"common.userNoData"):Be=ce("trainee.noResult"),ve==="micro_course"&&(Be=ce("common.microNoData")),d().createElement("div",{className:"".concat(b,"__empty")},d().createElement(Te.Z,{image:Te.Z.PRESENTED_IMAGE_SIMPLE,description:Be}),$&&ve!=="micro_course"&&Pe==="all"?d().createElement(X.Z,{type:"primary",icon:d().createElement(Qe.Z,null),onClick:()=>{kt.Z.targetTo({path:"/knowledgeBase/learningResources/courseManage"})}},ce("common.toAdd")):null)}}et.defaultProps={prefixCls:"new-course-list-container"};var Qt=(0,Q.$j)($e=>({isAdmin:$e.user.isAdmin}))((0,q.Z)()(et)),Ka=r(19677),xa=r(4408),tt={getCourseList:N.ZP.Courses.getCourseListByAuth,isDeleteCourse:N.ZP.Courses.isDeleteCourse,deleteOutCourse:N.ZP.Courses.deleteOutCourse,deleteInteriorCourse:N.ZP.Courses.deleteInteriorCourse,changeClassify:N.ZP.Courses.changeClassify,recommendSet:N.ZP.Courses.recommendSet,recommendRemove:N.ZP.Courses.recommendRemove,getScoreApi:N.ZP.Courses.getScoreApi,setScore:N.ZP.Courses.setScore,releaseOrNot:N.ZP.Courses.releaseOrNot};class ga extends d().Component{constructor(){var ge;super(...arguments);ge=this,this.state={searchParams:this.props.from==="myCourse"?{classifyId:"",queryType:"",title:"",statusType:"all",liveStatus:"",sortType:"all",classifyType:"course",order:"desc",image_text:"all"}:{classifyId:this.props.newCourseManagement.classifyId,queryType:"",title:this.props.newCourseManagement.title,statusType:this.props.newCourseManagement.statusType,liveStatus:this.props.newCourseManagement.liveStatus,sortType:this.props.newCourseManagement.sortType,classifyType:this.props.newCourseManagement.classifyType,order:this.props.newCourseManagement.order,image_text:this.props.newCourseManagement.image_text},pageConfig:{pageNumber:this.props.newCourseManagement.pageNumber,pageSize:this.props.newCourseManagement.pageSize,timestamp:Date.parse(new Date)},courseListData:{list:this.props.newCourseManagement.list,total:this.props.newCourseManagement.total},isLoading:!this.props.newCourseManagement.list.length,purchasedCourseScore:0,referenceWithOtherConfig:{visible:!1,type:"course",operation:"delete",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList},statusParam:{course:"course",study_project:"study_project",imageText:"imageText",liveCourse:"live_course",micro_course:"micro_course"}},this.throttledScrollHandler=M()(this.scrollHandler,150),this.judgeImageText=O=>{var b=this.state.statusParam;return O?b[O]==="imageText"?"true":b[O]==="all"?"all":"":"all"},this.initGetList=()=>{this.getCourseList().then(()=>{this.setWrapperScrollY(this.props.newCourseManagement.scrollY),this.bindScrollEvent()}),this.getScoreRule()},this.handleSetScore=(O,b)=>{S.qg.post({url:tt.setScore({courseId:b.id}),data:{credit:O}}).then($=>{$.data.code===0&&(Z.default.success($.data.msg),this.getCourseList())})},this.handleReleaseOrNot=O=>{var b=this.props.t;S.qg.post({url:tt.releaseOrNot({courseId:O.id}),data:{action:"cancel"}}).then($=>{$.data.code===0&&(Z.default.success(b("course.cancelPublishSuccess")),this.getCourseList())})},this.handleRecommendOrNot=O=>{var b=O.recommend,$=O.id,te=this.props.t;S.qg.post({url:b===!0?tt.recommendRemove():tt.recommendSet(),data:{id:$}}).then(ce=>{var ve=te(b===!0?"course.cancelTopSuccess":"course.topSuccess");ce.data.code===0&&(Z.default.success(ve),b===!0?this.getCourseList():this.setState(Pe=>({pageConfig:(0,y.Z)((0,y.Z)({},Pe.pageConfig),{},{pageNumber:1})}),()=>{this.getCourseList(!0)}))})},this.bindScrollEvent=()=>{this.scrollWrapper&&this.scrollWrapper.addEventListener("scroll",this.throttledScrollHandler.bind(this))},this.setWrapperScrollY=O=>{this.scrollWrapper&&(this.scrollWrapper.scrollTop=O)},this.getScoreRule=()=>{S.WY.get({url:tt.getScoreApi()}).then(O=>{var b=O.data.data.courseScoreList[0].score,$=b===void 0?{}:b;O.data.data.hasRule&&this.setState({purchasedCourseScore:$})})},this.getCourseList=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,b=ge.props.from,$=(0,y.Z)((0,y.Z)({},ge.state.pageConfig),ge.state.searchParams);return $.classifyType==="live_course"||$.classifyType==="all"?$.liveCourseStatus=!0:$.liveCourseStatus=!1,new Promise(te=>S.WY.get({url:tt.getCourseList(),params:$}).then(ce=>{var ve=ce.data,Pe=ve.list,Le=ve.total;ge.setState({courseListData:{list:Pe,total:Le},isLoading:!1},()=>{te(),b!=="myCourse"&&ge.props.dispatch({type:"newCourseManagement/updateState",payload:{scrollY:O?0:ge.props.newCourseManagement.scrollY,pageNumber:ge.state.pageConfig.pageNumber,pageSize:ge.state.pageConfig.pageSize,total:Le,title:ge.state.searchParams.title,statusType:ge.state.searchParams.statusType,liveStatus:ge.state.searchParams.liveStatus,sortType:ge.state.searchParams.sortType,classifyType:ge.state.searchParams.classifyType,order:ge.state.searchParams.order,classifyId:ge.state.searchParams.classifyId,image_text:ge.state.searchParams.image_text}}),O&&ge.setWrapperScrollY(0)})}))},this.handlePageSizeChange=(O,b)=>{this.setState($=>({pageConfig:(0,y.Z)((0,y.Z)({},$.pageConfig),{},{pageNumber:O,pageSize:b})}),()=>{this.getCourseList(!0)})},this.handlePageNumberChange=O=>{this.setState(b=>({pageConfig:(0,y.Z)((0,y.Z)({},b.pageConfig),{},{pageNumber:O})}),()=>{this.getCourseList(!0)})},this.handleReferenceList=O=>{this.setState(b=>({referenceWithOtherConfig:(0,y.Z)((0,y.Z)({},b.referenceWithOtherConfig),{},{visible:!b.referenceWithOtherConfig.visible,resourceId:O||""})}))},this.handleCanDeleteCourse=O=>{var b=this.props.t;O.bizType===3?f.Z.confirm({title:b("common.tip"),content:b("study.deleteProjectTips"),onOk:()=>{this.deleteProject(O.project_id)},onCancel(){}}):S.qg.post({url:tt.isDeleteCourse(),data:{id:O.id}}).then($=>{$.data.code===-2?this.handleReferenceList(O.id):$.data.code===0?f.Z.confirm({title:b("common.tip"),content:$.data.msg,onOk:()=>{this.deleteCourse(O)},onCancel(){}}):f.Z.warning({title:b("common.tip"),content:$.data.msg})})},this.deleteProject=O=>{var b=this.props.t,$=N.ZP.StudyProjectList.removeProject(O);S.WY.post({url:$}).then(te=>{te.data.deleted==="true"?(Z.default.success(b("personal.removeSuccess")),this.getCourseList()):Z.default.error(te.data.msg)})},this.deleteCourse=O=>{var b=tt.deleteOutCourse(),$=tt.deleteInteriorCourse(),te=O.scope,ce=O.id;S.qg.post({url:te===2?$:b,data:{ids:ce}}).then(ve=>{ve.data.code===0?(Z.default.success(ve.data.msg),this.getCourseList()):Z.default.error(ve.data.msg)}).catch(()=>{this.getCourseList()})},this.handleChangeClassify=(O,b)=>{S.qg.post({url:tt.changeClassify(),data:{courseId:O.id,classifyId:b}}).then($=>{$.data.code===0&&(Z.default.success($.data.msg),this.getCourseList())})},this.searchList=O=>{this.setState(b=>({searchParams:(0,y.Z)((0,y.Z)({},b.searchParams),O),pageConfig:(0,y.Z)((0,y.Z)({},b.pageConfig),{},{pageNumber:1})}),()=>{this.getCourseList()})}}componentWillMount(){this.scrollWrapper&&this.scrollWrapper.removeEventListener("scroll",this.bindScrollEvent)}componentDidMount(){var ge=v.parse(o.m8.location.search),O=ge.classifyId,b=ge.typeParam,$=this.state,te=$.searchParams,ce=$.statusParam;if(O||b){var ve={classifyId:O?O==="0"?"":O:"",classifyType:ce[b]||"all",image_text:this.judgeImageText(b)};this.props.dispatch({type:"newCourseManagement/updateState",payload:(0,y.Z)({},ve)}),this.setState({searchParams:(0,y.Z)((0,y.Z)({},te),ve)},()=>{this.initGetList()})}else this.initGetList()}scrollHandler(){var ge=this.scrollWrapper.scrollTop,O=this.props.dispatch;O({type:"newCourseManagement/updateState",payload:{scrollY:ge}})}render(){var ge=this.props,O=ge.renderGuide,b=O===void 0?!1:O,$=ge.from,te=this.state,ce=te.searchParams,ve=te.courseListData,Pe=te.isLoading,Le=te.purchasedCourseScore,Je=te.referenceWithOtherConfig,Be=te.pageConfig,Ge=this.props,vt=Ge.prefixCls,We=Ge.t;return Pe?d().createElement("div",{className:"".concat(vt,"__loading")},d().createElement(e.Z,{size:"large"})):d().createElement("div",{className:vt},d().createElement(xa.Z,{title:We("documentTitle.knowledgeBase")}),$!=="myCourse"&&d().createElement("div",{className:"".concat(vt,"-left")},d().createElement(J,{searchList:this.searchList})),d().createElement("div",{className:"".concat(vt,"__display-area"),ref:ct=>this.scrollWrapper=ct},d().createElement(gt,{from:$,searchList:this.searchList,renderGuide:b}),d().createElement(Qt,{searchParams:ce,courseListData:ve,purchasedCourseScore:Le,onDeleteCourse:this.handleCanDeleteCourse,onChangeClassify:this.handleChangeClassify,onRecommendOrNot:this.handleRecommendOrNot,onReleaseOrNot:this.handleReleaseOrNot,onSetScore:this.handleSetScore,prefixCls:"new-course-list-container"}),d().createElement(I.Z,{className:"course-list-pagination",total:ve.total,showTotal:ct=>(0,Se.ZT)("".concat(We("course.totalCount")),ct),pageSize:Be.pageSize,current:Be.pageNumber,showSizeChanger:!0,pageSizeOptions:["12","24","48","96"],onShowSizeChange:this.handlePageSizeChange,onChange:this.handlePageNumberChange}),d().createElement(Ka.Z,null),d().createElement(_t.Z,(0,B.Z)({},Je,{handleReferenceList:this.handleReferenceList}))))}}ga.defaultProps={prefixCls:"new-course-management"};var Da=(0,Q.$j)($e=>({newCourseManagement:$e.newCourseManagement,isVip:$e.user.isVip,isAdmin:$e.user.isAdmin,unionid:$e.user.unionid}))((0,q.Z)()(ga))},34215:function(be,me,r){"use strict";r.d(me,{$c:function(){return e},kw:function(){return f},Cu:function(){return y},Cl:function(){return g},pb:function(){return Z},Qr:function(){return m},uk:function(){return d},cE:function(){return Q},A5:function(){return v},E6:function(){return k},$E:function(){return j},mw:function(){return D}});var B=r(88986),T=r(10237),I=r(37055),R=I.ZP.points;function e(x){var S=R.getPointsRules();return T.WY.get({url:S,params:x}).then(oe=>{var N=oe.data,F=N.rules,ne=F.list,J=ne.map(W=>(0,B.Z)((0,B.Z)({},W),{},{key:W.rule_group_id}));return F.list=J,N.rules=F,N})}function ue(x){var S=R.getPointsRules();return request.get({url:S,params:x})}function f(x){var S=R.getNewPointsRules();return T.WY.get({url:S,params:x})}function y(x){var S=R.savePointsRules();return T.WY.post({url:S,data:x})}function g(x){var S=R.getIntegralLevel();return T.WY.get({url:S,params:x})}function Z(x){var S=R.deleteIntegralLevel();return T.WY.post({url:S,data:x})}function m(x){var S=R.updateIntegralLevel();return T.WY.post({url:S,data:x})}function d(x){var S=R.getContinuousCheck();return T.WY.get({url:S,params:x})}function q(x){var S=R.editContinuousCheck();return request.post({url:S,data:x})}function Q(x){var S=R.getLectureRules();return T.WY.get({url:S,params:x})}function L(x){var S=R.editLectureRules();return request.post({url:S,data:x})}function M(x){var S=R.getPointsDeduction();return request.get({url:S,params:x})}function o(x){var S=R.editPointsDeduction();return request.post({url:S,data:x})}function v(){var x=R.getPointsTaskRules();return T.WY.get({url:x})}function k(x){var S=R.savePointsTaskRules();return T.WY.post({url:S,data:x})}function j(x){var S=x.type,oe=R.resetPoints();return T.WY.get({url:oe,params:{type:S}})}function D(x){var S=x.type,oe=R.getResetPointsAuth();return T.WY.get({url:oe,params:{type:S}})}},12532:function(be,me,r){"use strict";r.d(me,{zm:function(){return I},B3:function(){return R},xx:function(){return e},XJ:function(){return y},ph:function(){return g}});var B=r(37055),T=r(10237);function I(m){var d=m.status,q=m.bizType,Q=m.title,L=m.createUserId,M=m.pageNumber,o=m.pageSize,v=B.ZP.approval.getWorkflowList();return T.WY.get({url:v,params:{status:d,biz_type:q,title:Q,create_user_id:L,page_number:M,page_size:o}})}function R(m){var d=m.type,q=m.status,Q=m.bizType,L=m.title,M=m.createUserId,o=m.pageNumber,v=m.pageSize,k=B.ZP.approval.getWorkflowListWaitDone();return T.WY.post({url:k,data:{app_id:"cool",eid:B.ZP.enterpriseId,uid:B.ZP.userId,f_status:q,task_status:d,task_type:"workflow",business_type:Q,task_name:L,user_ids:M?[M]:[],page_number:o,page_size:v}})}function e(m){return T.WY.post({url:B.ZP.approval.withdrawApproval(m)})}function ue(m){return request.post({url:CONFIG.approval.passApproval(m),data:{suggest:m.suggest}})}function f(m){return request.post({url:CONFIG.approval.rejectApproval(m),data:{suggest:m.suggest}})}function y(m){return T.WY.post({url:B.ZP.approval.executeApproval(m),data:{app_id:"cool",eid:B.ZP.enterpriseId,uid:B.ZP.userId,proposal:m.suggest,personnel_id:m.personnel_id,exe_result:m.exeResult,task_id:m.taskId}})}function g(m){return T.WY.get({url:B.ZP.approval.getApprovalInfos(m)})}function Z(m){var d=m.instanceId,q=m.biz_type;return request.get({url:CONFIG.trainingConfig.getBusinessId(d),params:{biz_type:q}})}},86197:function(be,me,r){"use strict";var B=r(12924),T=r.n(B),I=r(91768),R=r(15873),e=r(43061),ue=r(17762);class f extends T().Component{constructor(){super(...arguments);this.renderStataus=()=>{var g=this.props,Z=g.prefixCls,m=g.t,d=g.currentUser.status;return d==="passed"?T().createElement("div",{className:"".concat(Z,"__status-throught")},T().createElement(R.Z,{style:{color:"#52C41A",fontSize:"33px"}}),T().createElement("span",{style:{"margin-left":"12px"}},m("common.passed"))):d==="rejected"?T().createElement("div",{className:"".concat(Z,"__status-reject")},T().createElement(e.Z,{style:{color:"#FF4D4F",fontSize:"33px"}}),T().createElement("span",{style:{"margin-left":"12px"}},m("lineClassStudy.rejected"))):null}}render(){var g=this.props,Z=g.prefixCls,m=g.t,d=g.userStatus,q=g.evaluateDetail,Q=g.evaluateDetail.evaluate_vo,L=g.currentUser,M=g.from,o=[];return M==="rate"?o=L.resources:o=q.resources,T().createElement("div",{className:Z},d==="approved"?this.renderStataus():null,T().createElement("div",{className:"".concat(Z,"__item")},T().createElement("div",{className:"".concat(Z,"__label")},m("myExamTask.score"),"\uFF1A"),T().createElement("div",{className:"".concat(Z,"__content")},(M==="rate"?L.score:Q.score)||0)),T().createElement("div",{className:"".concat(Z,"__item")},T().createElement("div",{className:"".concat(Z,"__label")},m("examing.comments"),"\uFF1A"),T().createElement("div",{className:"".concat(Z,"__content")},(M==="rate"?L.remark:Q.comments)||"--")),T().createElement("div",{className:"".concat(Z,"__item")},T().createElement("div",{className:"".concat(Z,"__label")},m("practiceOperation.annex"),"\uFF1A"),T().createElement("div",{style:{width:"calc(100% - 100px)"}},o.length?T().createElement(ue.Z,{useLocalList:!0,isCard:!0,isComponent:!0,fileList:o}):"--")))}}f.defaultProps={prefixCls:"approval-score",type:"",status:"",currentUser:{}},me.Z=(0,I.Z)()(f)},94288:function(be,me,r){"use strict";r.d(me,{Z:function(){return _}});var B=r(62029),T=r(88986),I=r(57663),R=r(71577),e=r(22385),ue=r(31097),f=r(57361),y=r(18106),g=r(88108),Z=r(9754),m=r.n(Z),d=r(12924),q=r.n(d),Q=r(91768),L=r(38394),M=r.n(L),o=r(72358),v=r(88902),k=r(80991),j=r(70075),D=r(6793),x=r(63273),S=r(995),oe={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20,offset:0},sm:{span:20,offset:0}}};class N extends q().Component{constructor(){super(...arguments);this.initRef=A=>{this.formRef=A}}componentDidMount(){this.props.onFormMounted(this.formRef)}render(){var A=this.props,U=A.initData,se=A.t,z=A.maxScore,p=A.passScore,H=A.settled,G=A.maxNumber;return q().createElement(k.J9,{ref:this.initRef,initialValues:U,onSubmit:this.props.onSubmit,render:()=>q().createElement(k.l0,null,q().createElement(k.gN,(0,B.Z)({name:"mark",disabled:H,required:!0,tip:"".concat(se("myExamTask.perfect"),"\uFF1A").concat(z,"\uFF0C").concat(se("exam.passingGrade"),"\uFF1A").concat(p),label:se("myExamTask.score"),component:S.Z,displayType:"Custom",mark:0,totalScore:z,passScore:p},oe)),q().createElement(k.gN,(0,B.Z)({name:"content",disabled:H,label:"".concat(se("examing.comments")),component:j.Z,displayType:"Custom",LimitLength:300,char:!0},oe)),q().createElement(k.gN,(0,B.Z)({name:"attachment",disabled:H,notLibrary:!0,maxFilesCount:G,uploadTips:(0,D.ZT)("".concat(se("lineClassStudy.attachmentTip")),G),label:se("component.practiceAttachment"),component:x.Pg,uploadComponentId:"aead50ed-12d8-40ee-9c26-bf6151db3423",displayType:"Custom",removeable:!0},oe)))})}}N.defaultProps={initData:{},onFormMounted:()=>{}};var F=(0,Q.Z)()(N),ne=r(86197),J=r(10237),W=r(37055),Y=r(87312),V=r(18329),X=r(60667),ie=g.Z.TabPane,w={};class h extends q().Component{constructor(A){var U;super(A);U=this,this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{w.submitForm()},this.onFormMounted=se=>{w=se},this.handleChangeNameTabs=se=>{var z=this.state.userList.filter(p=>p.user_info.id===se);this.setState({currentUserId:se,currentUser:z[0]},()=>{this.state.userStatus==="evaluated"&&this.getMyEvaluateInfo(z[0])})},this.handleChangeTypeTabs=se=>{this.setState({pageNumber:1,userStatus:se,evaluateDetail:{evaluate_vo:{},resources:[]}},()=>{this.funGetUserList()})},this.handleSubmit=se=>{var z=this.props.type;z==="add"?this.handleSubmitScore(se):z==="evaluate"&&this.handleSubmitEvaluate(se)},this.handleSubmitScore=function(){var se=(0,f.Z)(m().mark(function z(p){var H,G,re;return m().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return H=U.props.operateColumn.id,G=[],p.attachment.forEach(Ze=>{G.push(Ze.id)}),he.next=5,(0,o.ZQ)(H,{user_id:U.state.currentUserId,score:p.mark,remark:p.content,resource_ids:G});case 5:re=he.sent,M()(re,"data.data")&&re.data.code==="200000"&&U.funGetUserList();case 7:case"end":return he.stop()}},z)}));return function(z){return se.apply(this,arguments)}}(),this.handleSubmitEvaluate=function(){var se=(0,f.Z)(m().mark(function z(p){var H,G,re,fe,he,Ze,Se,ye;return m().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return H=U.props.operateColumn,G=H.id,re=H.evaluate_id,fe=H.evaluate_rule_vo,he=U.state.ruleRes,Ze=[],p.attachment.forEach(Fe=>{Ze.push(Fe.id)}),Se={evaluate_id:re,evaluate_type:fe.evaluate_type,evaluate_object_id:U.state.currentUserId,evaluate_content_vo:{evaluate_vo:{score:p.mark,comments:p.content,content:Ze.length?Ze.join(","):"",passing_score:he.passing_score,total_score:he.total_score}}},Re.next=7,(0,o.hR)(G,Se);case 7:ye=Re.sent,M()(ye,"data.data")&&ye.data.code==="200000"&&U.funGetUserList();case 9:case"end":return Re.stop()}},z)}));return function(z){return se.apply(this,arguments)}}(),this.initTabKey=()=>{var se=this.props,z=se.type,p=se.operateColumn,H=se.settled,G="";z==="add"?(G="scoring",this.setState({maxScore:p.config.assessment_total_score,passScore:p.config.assessment_pass_score})):z==="approval"?G="pending":z==="evaluate"&&(H?G="evaluated":G="evaluateing",this.setState({maxScore:p.evaluate_rule_vo.evaluate_vo.total_score,passScore:p.evaluate_rule_vo.evaluate_vo.passing_score,ruleRes:p.evaluate_rule_vo.evaluate_vo})),this.setState({userStatus:G},()=>{this.funGetUserList()})},this.funGetUserList=()=>{var se=this.props,z=se.type,p=se.operateColumn,H=se.operateColumn.id,G=this.state,re=G.userStatus,fe=G.pageNumber,he=G.pageSize,Ze=W.ZP.lineClassStudy.approveUserList(H),Se=W.ZP.lineClassStudy.getLecturerEvaluateUserList(H),ye=z==="evaluate"?Se:Ze;J.WY.get({url:ye,params:{page_number:fe,page_size:he,user_status:re,is_evaluated:re==="evaluated",evaluate_id:p.evaluate_id||"",evaluate_type:p.evaluate_type}}).then(xe=>{var Re=xe.data.data.list||[];this.setState({userList:Re,totalPages:xe.data.data.pages||0,currentUserId:Re.length?Re[0].user_id:"",currentUser:Re.length?Re[0]:"",total:Number(xe.data.data.total)},()=>{Re.length&&re==="evaluated"&&this.getMyEvaluateInfo(this.state.currentUser),this.setState({hasNextPage:this.state.totalPages>fe})})})},this.getMyEvaluateInfo=function(){var se=(0,f.Z)(m().mark(function z(p){var H,G;return m().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return H=U.props.operateColumn,fe.next=3,(0,o.K5)(H.id,{evaluate_id:H.evaluate_id,is_evaluated:!0,evaluate_object_id:p.user_id});case 3:G=fe.sent,M()(G,"data.data")&&G.data.code==="200000"&&U.setState({evaluateDetail:G.data.data});case 5:case"end":return fe.stop()}},z)}));return function(z){return se.apply(this,arguments)}}(),this.approve=function(){var se=(0,f.Z)(m().mark(function z(p){var H,G,re;return m().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return H=U.state.currentUserId,G=U.props.operateColumn.id,he.next=4,(0,o.HM)(G,{status:p,user_id:H});case 4:re=he.sent,M()(re,"data.data")&&re.data.code==="200000"&&U.funGetUserList();case 6:case"end":return he.stop()}},z)}));return function(z){return se.apply(this,arguments)}}(),this.renderNameList=()=>{var se=this.state,z=se.userList,p=se.currentUserId,H=se.pageNumber,G=se.hasNextPage,re=this.props.prefixCls;return q().createElement("div",null,q().createElement(g.Z,{tabPosition:"left",activeKey:p,className:"".concat(re,"__tab"),onChange:this.handleChangeNameTabs},z.map(fe=>q().createElement(ie,{key:fe.user_info.id,tab:q().createElement(ue.Z,{title:fe.user_info.name},q().createElement(X.Z,{dataType:"userName",value:fe.user_info.user_id,name:fe.user_info.name,type:fe.user_info.source_type}))}))),q().createElement("div",{className:"name-list-page"},q().createElement(v.Z,{pageNumber:H,hasNextPage:G,onChangePage:fe=>{this.onChangePage(fe)}})))},this.renderContent=()=>{var se=this.props,z=se.operateColumn,p=se.from,H=se.settled,G=this.state,re=G.currentUserId,fe=G.initData,he=G.maxScore,Ze=G.passScore,Se=G.userStatus,ye=G.currentUser,xe=G.evaluateDetail;return Se==="scoring"||Se==="evaluateing"?q().createElement(F,{maxNumber:5,settled:H,key:re,course:z,onFormMounted:this.onFormMounted,onSubmit:this.handleSubmit,initData:fe,maxScore:he,passScore:Ze}):Se==="pending"||Se==="approved"||Se==="scored"||Se==="evaluated"?q().createElement(ne.Z,{key:re,from:p,evaluateDetail:xe,currentUser:ye,userStatus:Se}):null},this.renderFooter=()=>{var se=this.props.t;return q().createElement("div",null,q().createElement(R.Z,{type:"primary",onClick:()=>{this.approve("passed")}},se("common.approved")),q().createElement(R.Z,{type:"primary",danger:!0,onClick:()=>{this.approve("rejected")}},se("common.reject")))},this.state={userList:[],total:0,pageNumber:1,hasNextPage:!1,pageSize:10,totalPages:0,userStatus:"",currentUserId:"",currentUser:null,maxScore:100,passScore:0,ruleRes:null,evaluateDetail:{evaluate_vo:{},resources:[]},initData:{content:"",attachment:[],mark:0}}}componentDidUpdate(A){A.visible!==this.props.visible&&this.props.visible&&this.initTabKey()}onChangePage(A){var U=this.state,se=U.pageNumber,z=U.totalPages;A==="prev"?this.setState({pageNumber:se-1},()=>{this.funGetUserList(),this.setState({hasNextPage:z>this.state.pageNumber})}):A==="next"&&this.setState({pageNumber:se+1},()=>{this.funGetUserList(),this.setState({hasNextPage:z>this.state.pageNumber})})}render(){var A=this.state,U=A.userList,se=A.userStatus,z=A.total,p=this.props,H=p.prefixCls,G=p.t,re=p.visible,fe=p.title,he=p.type,Ze=p.settled,Se={okText:G(he==="approval"?"common.approved":"common.submit"),cancelText:G(he==="approval"?"common.turnDown":"common.cancel"),size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,footer:this.renderFooter()};he!=="approval"&&delete Se.footer,(se==="scored"||se==="approved"||se==="evaluated"||Ze||!U.length)&&(Se=(0,T.Z)((0,T.Z)({},Se),{},{footer:null}));var ye=[];return he==="add"?ye=[{type:"scoring",title:G("lineClassStudy.waitInput")},{type:"scored",title:G("lineClassStudy.hadInput")}]:he==="approval"?ye=[{type:"pending",title:G("marketing.pending")},{type:"approved",title:G("lineClassStudy.hadApproval")}]:he==="evaluate"&&(ye=[{type:"evaluateing",title:G("evaluation.noEvaluated")},{type:"evaluated",title:G("lineClassStudy.hadEvaluate")}]),q().createElement(V.ZP,(0,B.Z)({},Se,{title:"".concat(fe," (").concat(z,")"),visible:re,onCancel:this.onCancel,onOk:this.onOk}),q().createElement("div",{className:H},q().createElement(g.Z,{activeKey:se,onChange:this.handleChangeTypeTabs,className:"".concat(H,"__tab-type")},ye.map(xe=>q().createElement(ie,{tab:xe.title,key:xe.type}))),q().createElement("div",{className:"".concat(H,"_container")},U.length?q().createElement(q().Fragment,null,q().createElement("div",{className:"name-list"},this.renderNameList()),q().createElement("div",{className:"form-wrap"},this.renderContent())):q().createElement(Y.Z,{tipText:G("lineClassStudy.noResult")}))))}}h.defaultProps={prefixCls:"input-score",title:"",type:"",from:"",settled:!1};var _=(0,Q.Z)()(h)},88902:function(be,me,r){"use strict";var B=r(57663),T=r(71577),I=r(12924),R=r.n(I),e=r(91768),ue=r(67724),f=r(8812);class y extends R().Component{constructor(Z){super(Z);this.changePage=m=>{this.props.onChangePage(m)},this.state={}}render(){var Z=this.props,m=Z.prefixCls,d=Z.pageNumber,q=Z.hasNextPage;return R().createElement("div",{className:m},R().createElement("div",{className:"".concat(m,"-container")},R().createElement(T.Z,{onClick:()=>this.changePage("prev"),disabled:d===1,icon:R().createElement(ue.Z,null)}),R().createElement("span",null," ",d),R().createElement(T.Z,{onClick:()=>this.changePage("next"),disabled:!q,icon:R().createElement(f.Z,null)})))}}y.defaultProps={prefixCls:"simple-paging",pageNumber:1,hasNextPage:!1},me.Z=(0,e.Z)()(y)},74687:function(be,me,r){"use strict";var B=r(62029),T=r(88986),I=r(22385),R=r(31097),e=r(57361),ue=r(18106),f=r(88108),y=r(9754),g=r.n(y),Z=r(12924),m=r.n(Z),d=r(91768),q=r(38394),Q=r.n(q),L=r(72358),M=r(88902),o=r(99359),v=r(18329),k=r(87312),j=r(44970),D=r(37055),x=r(10237),S=r(60667),oe=f.Z.TabPane;class N extends m().Component{constructor(ne){var J;super(ne);J=this,this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{this.state.formRef.submitForm()},this.onSubmit=W=>{this.onSubmitQuestionnaire(W)},this.onSubmitQuestionnaire=function(){var W=(0,e.Z)(g().mark(function Y(V){var X,ie;return g().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return X=J.props.operateColumn,h.next=3,(0,L.hR)(X.id,{evaluate_object_id:J.state.currentUserId,evaluate_type:X.evaluate_rule_vo.evaluate_type,evaluate_id:X.evaluate_id,evaluate_content_vo:{questions:V,evaluate_vo:{questionnaire_id:X.evaluate_rule_vo.evaluate_vo.questionnaire_id}}});case 3:ie=h.sent,Q()(ie,"data.data")&&ie.data.code==="200000"&&J.setState({pageNumber:1},()=>{J.funGetUserList()});case 5:case"end":return h.stop()}},Y)}));return function(Y){return W.apply(this,arguments)}}(),this.handleChangeTabs=W=>{var Y=this.props.from,V=this.state.userList.filter(X=>X.user_info.id===W);this.setState({currentUserId:W,currentUser:V[0]},()=>{this.state.userStatus==="evaluated"&&Y==="myEvaluate"?this.getMyEvaluateInfo(V[0]):Y==="evaluateMy"&&this.getEvaluateMyInfo(V[0])})},this.handleChangeTypeTabs=W=>{this.setState({pageNumber:1,userStatus:W},()=>{this.funGetUserList()})},this.getMyEvaluateInfo=function(){var W=(0,e.Z)(g().mark(function Y(V){var X,ie;return g().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return X=J.props.operateColumn,h.next=3,(0,L.K5)(X.id,{evaluate_id:X.evaluate_id||"",is_evaluated:!0,evaluate_object_id:V.user_id});case 3:ie=h.sent,Q()(ie,"data.data")&&ie.data.code==="200000"&&J.setState({evaluateDetail:ie.data.data});case 5:case"end":return h.stop()}},Y)}));return function(Y){return W.apply(this,arguments)}}(),this.getEvaluateMyInfo=function(){var W=(0,e.Z)(g().mark(function Y(V){var X,ie;return g().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return X=J.props.operateColumn,h.next=3,(0,L.RZ)(X.id,{type:"trainee",evaluate_id:X.evaluate_id,evaluate_user_id:V.user_id});case 3:ie=h.sent,Q()(ie,"data.data")&&ie.data.code==="200000"&&J.setState({evaluateDetail:ie.data.data});case 5:case"end":return h.stop()}},Y)}));return function(Y){return W.apply(this,arguments)}}(),this.funGetUserList=()=>{var W=this.props.from;W==="myEvaluate"?this.funMyEvaluateUserList():this.getEvaluateMyUserList()},this.funMyEvaluateUserList=()=>{var W=this.props,Y=W.operateColumn,V=W.operateColumn.id,X=this.state,ie=X.userStatus,w=X.pageNumber,h=X.pageSize,_=D.ZP.lineClassStudy.getLecturerEvaluateUserList(V);x.WY.get({url:_,params:{page_number:w,page_size:h,user_status:ie,is_evaluated:ie==="evaluated",evaluate_id:Y.evaluate_id||Y.evaluate_rule_vo.evaluate_id,evaluate_type:Y.evaluate_type}}).then(C=>{if(C.data.code==="200000"){var A=C.data.data.list;this.setState({userList:A,totalPages:C.data.data.pages||1,currentUserId:A.length?A[0].user_id:"",currentUser:A.length?A[0]:"",total:Number(C.data.data.total)},()=>{A.length&&ie==="evaluated"&&this.getMyEvaluateInfo(this.state.currentUser),this.setState({hasNextPage:this.state.totalPages>w})})}})},this.getEvaluateMyUserList=()=>{var W=this.props.operateColumn,Y=this.state,V=Y.pageNumber,X=Y.pageSize,ie={evaluate_id:W.evaluate_id,lecturer_id:W.lecturer_id,page_number:V,page_size:X};(0,L._C)(W.id,ie).then(w=>{if(w.data.code==="200000"){var h=w.data.data;if(!h.page_data)return;this.setState({userList:h.page_data.list||[],totalPages:h.page_data.pages||1,currentUserId:h.page_data.list.length?h.page_data.list[0].user_id:"",currentUser:h.page_data.list.length?h.page_data.list[0]:"",total:Number(h.page_data.total)},()=>{this.state.userList.length&&this.getEvaluateMyInfo(this.state.currentUser),this.setState({hasNextPage:this.state.totalPages>V})})}})},this.initRef=W=>{this.setState({formRef:W})},this.renderNameList=()=>{var W=this.state,Y=W.userList,V=W.currentUserId,X=W.pageNumber,ie=W.hasNextPage,w=this.props.prefixCls;return m().createElement("div",null,m().createElement(f.Z,{tabPosition:"left",activeKey:V,className:"".concat(w,"__tab"),onChange:this.handleChangeTabs},Y.map(h=>m().createElement(oe,{key:h.user_info.id,tab:m().createElement(R.Z,{title:m().createElement(S.Z,{dataType:"userName",value:h.user_info.user_id,name:h.user_info.name,type:h.user_info.source_type})},m().createElement(S.Z,{dataType:"userName",value:h.user_info.user_id,name:h.user_info.name,type:h.user_info.source_type}))}))),m().createElement("div",{className:"name-list-page"},m().createElement(M.Z,{pageNumber:X,hasNextPage:ie,onChangePage:h=>{this.onChangePage(h)}})))},this.renderContent=()=>{var W=this.state,Y=W.currentUserId,V=W.userStatus,X=W.evaluateDetail.questionnaire_result_vo,ie=this.props,w=ie.from,h=ie.operateColumn.evaluate_rule_vo.evaluate_vo.questionnaire_id;return V==="evaluateing"?m().createElement(m().Fragment,null,h?m().createElement(o.Z,{key:Y,questionId:h,initRef:this.initRef,onSubmit:this.onSubmit}):null):V==="evaluated"||w==="evaluateMy"?m().createElement(m().Fragment,null,X?m().createElement(j.Z,{questionnaireInfo:X,isPreview:!0,setQuestionValue:()=>{}}):null):null},this.state={evaluateDetail:{},formRef:null,userList:[],total:0,pageNumber:1,hasNextPage:!1,pageSize:10,totalPages:0,userStatus:"",currentUserId:"",currentUser:null}}componentDidUpdate(ne){ne.visible!==this.props.visible&&this.props.visible&&this.setState({userStatus:this.props.from==="myEvaluate"?"evaluateing":"",pageNumber:1},()=>{this.funGetUserList()})}onChangePage(ne){var J=this.state,W=J.pageNumber,Y=J.totalPages;ne==="prev"?this.setState({pageNumber:W-1},()=>{this.funGetUserList(),this.setState({hasNextPage:Y>this.state.pageNumber})}):ne==="next"&&this.setState({pageNumber:W+1},()=>{this.funGetUserList(),this.setState({hasNextPage:Y>this.state.pageNumber})})}render(){var ne=this.state,J=ne.userList,W=ne.userStatus,Y=ne.total,V=this.props,X=V.prefixCls,ie=V.t,w=V.visible,h=V.title,_=V.from,C={okText:ie("common.submit"),cancelText:ie("common.cancel"),size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};(W==="evaluated"||!J.length||_==="evaluateMy")&&(C=(0,T.Z)((0,T.Z)({},C),{},{footer:null}));var A=[{type:"evaluateing",title:ie("evaluation.noEvaluated")},{type:"evaluated",title:ie("lineClassStudy.hadEvaluate")}];return m().createElement(v.ZP,(0,B.Z)({},C,{title:"".concat(h," (").concat(Y,")"),visible:w,onCancel:this.onCancel,onOk:this.onOk}),m().createElement("div",{className:X},_==="myEvaluate"?m().createElement(f.Z,{activeKey:W,onChange:this.handleChangeTypeTabs,className:"".concat(X,"__tab-type")},A.map(U=>m().createElement(oe,{tab:U.title,key:U.type}))):null,m().createElement("div",{className:"".concat(X,"_container")},J.length?m().createElement(m().Fragment,null,m().createElement("div",{className:"name-list"},this.renderNameList()),m().createElement("div",{className:"form-wrap",style:{"padding-left":"32px"}},this.renderContent())):m().createElement(k.Z,{tipText:ie("lineClassStudy.noResult")}))))}}N.defaultProps={prefixCls:"input-score",title:"",from:""},me.Z=(0,d.Z)()(N)},58001:function(be,me,r){"use strict";r.r(me),r.d(me,{default:function(){return Fi}});var B=r(57361),T=r(9754),I=r.n(T),R=r(12924),e=r.n(R),ue=r(76651),f=r(91768),y=r(28216),g=r(57068),Z=r(17381),m=r(9715),d=r(86585),q=r(47673),Q=r(4107),L=r(57663),M=r(71577),o=r(88986),v=r(34792),k=r(48086),j=r(71194),D=r(57016),x=r(98489),S=r(37055),oe=r(83940),N=r(38642),F=E=>({enterpriseId:E.user.enterpriseId});class ne extends R.Component{constructor(){super(...arguments);this.formRef=e().createRef(),this.state={registerData:{verifyFlag:!1,verifyTime:60},verificationTime:null,blackList:{showQrCode:(0,N.eY)("CHANGE_PASSWORD_QR_CODE")}},this.handleCancel=()=>{this.props.onCancel()},this.getResetVerification=()=>{var i=this.props.enterpriseId,a=this.state.registerData,t=this.formRef.current.getFieldValue(),s=t.login_mobile,n=s===void 0?"":s,l=(0,x.gG)(n);if(l)return D.Z.warning({title:"\u83B7\u53D6\u9A8C\u8BC1\u7801\u5931\u8D25",content:l,centered:!0,okText:"\u786E\u5B9A"}),!1;this.state.registerData.verifyFlag&&k.default.warning("\u8BF7\u52FF\u91CD\u590D\u63D0\u4EA4"),(0,Z.g2)({action_type:"reset_password",login_mobile:n,enterpriseId:i}).then(()=>{this.setState({registerData:(0,o.Z)((0,o.Z)({},a),{},{verifyFlag:!0})}),this.startVerificationTime()})},this.startVerificationTime=()=>{var i=null;i=setInterval(()=>{var a=this.state.registerData,t=a.verifyTime-1;if(t===0){clearInterval(this.state.verificationTime),this.setState({registerData:{verifyFlag:!1,verifyTime:60}});return}this.setState({registerData:(0,o.Z)((0,o.Z)({},a),{},{verifyTime:t})})},1e3),this.setState({verificationTime:i})},this.handleSubmit=()=>{var i=this.formRef.current.getFieldValue(),a=i.new_password,t=a===void 0?"":a,s=i.confirm_password,n=s===void 0?"":s,l=i.login_mobile,c=l===void 0?"":l,u=i.verification_code,P=u===void 0?"":u,K=(0,x.ZX)("\u65B0",t);if(K)return D.Z.warning({title:"\u4FEE\u6539\u5BC6\u7801\u5931\u8D25",content:K,centered:!0,okText:"\u786E\u5B9A"}),!1;var ae=(0,x.pF)(P);if(ae)return D.Z.warning({title:"\u4FEE\u6539\u5BC6\u7801\u5931\u8D25",content:ae,centered:!0,okText:"\u786E\u5B9A"}),!1;var ee=(0,x.ZX)("\u786E\u8BA4",n);if(ee)return D.Z.warning({title:"\u4FEE\u6539\u5BC6\u7801\u5931\u8D25",content:ee,centered:!0,okText:"\u786E\u5B9A"}),!1;if(t!==n)return D.Z.warning({title:"\u4FEE\u6539\u5BC6\u7801\u5931\u8D25",content:"\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4",centered:!0,okText:"\u786E\u5B9A"}),!1;(0,Z.Xs)({login_mobile:c,verification_code:P,password:(0,oe.v)(t),encrypt:1}).then(()=>{k.default.success("\u4FEE\u6539\u5BC6\u7801\u6210\u529F"),this.props.onCancel()})}}render(){var i=this.props,a=i.visible,t=i.prefixCls,s=i.mobile,n=i.t,l=i.email,c=this.state,u=c.registerData,P=c.blackList,K=e().createElement("div",{className:"".concat(t,"__content__footer")},e().createElement(M.Z,{onClick:()=>this.handleCancel()},"\u53D6\u6D88"),e().createElement(M.Z,{type:"primary",onClick:()=>this.handleSubmit()},"\u786E\u5B9A")),ae=localStorage.getItem("themeColor")||"#465dcd";return e().createElement(D.Z,{title:"\u4FEE\u6539\u5BC6\u7801",width:420,visible:a,centered:!0,wrapClassName:t,onCancel:this.handleCancel,footer:K},e().createElement("div",{className:"".concat(t,"__content")},e().createElement(d.Z,{className:"".concat(t,"__content__form"),ref:this.formRef,name:"basic",initialValues:{login_mobile:s||l}},e().createElement(d.Z.Item,{label:s?"\u624B\u673A\u53F7":"\u90AE\u7BB1",name:"login_mobile",rules:[{required:!0},{max:99,message:"\u624B\u673A\u53F7\u7801\u6700\u957F\u4E3A99\u4F4D"}]},e().createElement(Q.Z,{disabled:!0,placeholder:s||l,maxLength:"99"})),e().createElement(d.Z.Item,{label:"\u9A8C\u8BC1\u7801",name:"verification_code",rules:[{required:!0}]},e().createElement("div",{className:"".concat(t,"__content__form__verify")},e().createElement(Q.Z,{className:"".concat(t,"__content__form__verify__input"),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",maxLength:"6"}),e().createElement("div",{onClick:()=>this.getResetVerification(),className:"".concat(t,"__content__form__verify-box")},u.verifyFlag?e().createElement("p",{className:"".concat(t,"__content__form__verify-num")},u.verifyTime,"s"):e().createElement("p",{className:"".concat(t,"__content__form__verify-tips"),style:{color:ae}},"\u83B7\u53D6\u9A8C\u8BC1\u7801")))),e().createElement(d.Z.Item,{label:"\u65B0\u5BC6\u7801",name:"new_password",rules:[{required:!0}]},e().createElement(Q.Z.Password,{placeholder:"\u8BF7\u8F93\u51656~20\u4F4D\uFF0C\u5FC5\u987B\u5305\u542B\u5927\u5C0F\u5199\u5B57\u6BCD\u4E0E\u6570\u5B57",maxLength:"20"})),e().createElement(d.Z.Item,{label:"\u786E\u8BA4\u5BC6\u7801",name:"confirm_password",rules:[{required:!0}]},e().createElement(Q.Z.Password,{placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\u786E\u8BA4",maxLength:"20"}))),P.showQrCode&&e().createElement("div",{className:"".concat(t,"__content__info qrCode-hidden")},e().createElement("div",{className:"".concat(t,"__content__info__qrCode")},e().createElement("img",{src:S.my.qrCode,alt:"qr_code"})),e().createElement("div",{className:"".concat(t,"__content__info__tips")},n("registerLogin.downLoadAppTips")),e().createElement("div",{className:"".concat(t,"__content__info__tips")},S.my.url))))}}ne.defaultProps={prefixCls:"reset-password-modal"};var J=(0,y.$j)(F)((0,f.Z)()(ne));class W extends R.Component{constructor(){super(...arguments);this.formRef=e().createRef(),this.state={registerData:{verifyFlag:!1,verifyTime:60},verificationTime:null},this.handleCancel=()=>{this.props.onCancel()},this.getResetVerification=()=>{var i=this.state.registerData,a=this.formRef.current.getFieldValue(),t=a.login_mobile,s=t===void 0?"":t,n=(0,x.gG)(s);if(n)return D.Z.warning({title:"\u83B7\u53D6\u9A8C\u8BC1\u7801\u5931\u8D25",content:n,centered:!0,okText:"\u786E\u5B9A"}),!1;this.state.registerData.verifyFlag&&k.default.warning("\u8BF7\u52FF\u91CD\u590D\u63D0\u4EA4"),(0,Z.G5)({action_type:"mobile_bind",login_mobile:s}).then(l=>{this.setState({registerData:(0,o.Z)((0,o.Z)({},i),{},{verifyFlag:!0})}),this.startVerificationTime()})},this.startVerificationTime=()=>{var i=null;i=setInterval(()=>{var a=this.state.registerData,t=a.verifyTime-1;if(t===0){clearInterval(this.state.verificationTime),this.setState({registerData:{verifyFlag:!1,verifyTime:60}});return}this.setState({registerData:(0,o.Z)((0,o.Z)({},a),{},{verifyTime:t})})},1e3),this.setState({verificationTime:i})},this.handleSubmit=()=>{var i=this.formRef.current.getFieldValue(),a=i.new_password,t=a===void 0?"":a,s=i.confirm_password,n=s===void 0?"":s,l=i.login_mobile,c=l===void 0?"":l,u=i.verification_code,P=u===void 0?"":u,K=(0,x.ZX)("",t);if(K)return D.Z.warning({title:"\u7ED1\u5B9A\u8D26\u6237\u5931\u8D25",content:K,centered:!0,okText:"\u786E\u5B9A"}),!1;var ae=(0,x.pF)(P);if(ae)return D.Z.warning({title:"\u7ED1\u5B9A\u8D26\u6237\u5931\u8D25",content:ae,centered:!0,okText:"\u786E\u5B9A"}),!1;var ee=(0,x.ZX)("\u786E\u8BA4",n);if(ee)return D.Z.warning({title:"\u7ED1\u5B9A\u8D26\u6237\u5931\u8D25",content:ee,centered:!0,okText:"\u786E\u5B9A"}),!1;if(t!==n)return D.Z.warning({title:"\u7ED1\u5B9A\u8D26\u6237\u5931\u8D25",content:"\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4",centered:!0,okText:"\u786E\u5B9A"}),!1;(0,Z._w)({login_mobile:c,verification_code:P,password:(0,oe.v)(t),encrypt:1}).then(()=>{k.default.success("\u7ED1\u5B9A\u8D26\u6237\u6210\u529F"),this.props.onCancel(!0)})}}render(){var i=this.props,a=i.visible,t=i.prefixCls,s=i.t,n=this.state.registerData,l=e().createElement("div",{className:"".concat(t,"__content__footer")},e().createElement(M.Z,{onClick:()=>this.handleCancel()},s("common.cancel")),e().createElement(M.Z,{type:"primary",onClick:()=>this.handleSubmit()},s("common.ok")));return e().createElement(D.Z,{title:s("account.accessAccount"),width:420,visible:a,centered:!0,wrapClassName:t,onCancel:this.handleCancel,footer:l},e().createElement("div",{className:"".concat(t,"__content")},e().createElement("div",{className:"".concat(t,"__content__tips")},s("account.accountModalTitle")),e().createElement(d.Z,{className:"".concat(t,"__content__form"),ref:this.formRef,name:"basic",initialValues:{remember:!0}},e().createElement(d.Z.Item,{label:"\u624B\u673A\u53F7",name:"login_mobile",rules:[{required:!0},{pattern:/^[0-9-]+$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"},{max:16,message:"\u624B\u673A\u53F7\u7801\u6700\u957F\u4E3A16\u4F4D"}]},e().createElement(Q.Z,{placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",maxLength:"16"})),e().createElement(d.Z.Item,{label:"\u9A8C\u8BC1\u7801",name:"verification_code",rules:[{required:!0},{pattern:/^\d{6}$/,message:"\u9A8C\u8BC1\u7801\u5E94\u4E3A6\u4F4D\u6570\u5B57"}]},e().createElement("div",{className:"".concat(t,"__content__form__verify")},e().createElement(Q.Z,{className:"".concat(t,"__content__form__verify__input"),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",maxLength:"6"}),e().createElement("div",{onClick:()=>this.getResetVerification(),className:"".concat(t,"__content__form__verify-box")},n.verifyFlag?e().createElement("p",{className:"".concat(t,"__content__form__verify-num")},n.verifyTime,"s"):e().createElement("p",{className:"".concat(t,"__content__form__verify-tips")},"\u83B7\u53D6\u9A8C\u8BC1\u7801")))),e().createElement(d.Z.Item,{label:"\u5BC6\u7801",name:"new_password",rules:[{required:!0}]},e().createElement(Q.Z.Password,{placeholder:"\u8BF7\u8F93\u51656~20\u4F4D\uFF0C\u5FC5\u987B\u5305\u542B\u5927\u5C0F\u5199\u5B57\u6BCD\u4E0E\u6570\u5B57",maxLength:"20"})),e().createElement(d.Z.Item,{label:"\u786E\u8BA4\u5BC6\u7801",name:"confirm_password",rules:[{required:!0}]},e().createElement(Q.Z.Password,{placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\u786E\u8BA4",maxLength:"20"})))))}}W.defaultProps={prefixCls:"bind-account-modal"};var Y=(0,y.$j)()((0,f.Z)()(W)),V=E=>({userId:E.user.id});class X extends R.Component{constructor(){var i;super(...arguments);i=this,this.formRef=e().createRef(),this.state={user:{},visible:!0},this.handleCancel=()=>{this.props.onHide&&this.props.onHide()},this.handleSubmit=(0,B.Z)(I().mark(function a(){var t,s,n,l,c,u,P;return I().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return t=i.props.t,ae.next=3,i.formRef.current.validateFields();case 3:s=ae.sent,n=i,l=s.name,c=l===void 0?"":l,u=s.id_card,P=u===void 0?"":u,i.state.user.name!==c||i.state.user.id_card!==P?(0,Z.il)((0,o.Z)((0,o.Z)({},i.state.user),{},{name:c,id_card:P})).then(ee=>{ee.data.code===200?(k.default.success(t("common.certificationSuccess")),n.props.onHide&&n.props.onHide()):k.default.error(ee.data.msg)}):i.props.onHide&&i.props.onHide();case 7:case"end":return ae.stop()}},a)}))}componentDidMount(){}componentWillReceiveProps(){(0,Z.uy)({user_id:this.props.userId}).then(i=>{if(i.data.code===200){var a=i.data.data;this.setState({user:a}),this.formRef.current.setFieldsValue({name:a.name,id_card:a.id_card})}}).catch(i=>{console.error(i)})}render(){var i=this.props,a=i.prefixCls,t=i.visible,s=i.t,n=e().createElement("div",{className:"".concat(a,"__content__footer")},e().createElement(M.Z,{onClick:()=>this.handleCancel()},s("common.cancel")),e().createElement(M.Z,{type:"primary",onClick:()=>this.handleSubmit()},s("common.ok")));return e().createElement(D.Z,{title:s("component.realAuthentication"),width:420,visible:t,centered:!0,wrapClassName:a,onCancel:this.handleCancel,footer:n},e().createElement("div",{className:"".concat(a,"__content")},e().createElement(d.Z,{className:"".concat(a,"__content__form"),ref:this.formRef,name:"basic",labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",initialValues:{name:this.state.user.name,id_card:this.state.user.id_card}},e().createElement(d.Z.Item,{label:s("common.userName"),name:"name",rules:[{required:!0,message:s("authentication.usernameplaceholder")},{max:50,message:s("authentication.username50maxerror")}]},e().createElement(Q.Z,{disabled:this.state.user.source_type!=="create",placeholder:s("authentication.usernameplaceholder"),maxLength:"50"})),e().createElement(d.Z.Item,{label:s("setting.identityNumber"),name:"id_card",rules:[{required:!0,message:s("authentication.idcardnoplaceholder")},{pattern:new RegExp(/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/),message:s("authentication.idcardvalidateerror")}]},e().createElement(Q.Z,{placeholder:s("authentication.idcardnoplaceholder"),maxLength:"18"})))))}}X.defaultProps={prefixCls:"authentication-modal"};var ie=(0,y.$j)(V)((0,f.Z)()(X)),w=r(18106),h=r(88108),_=r(14781),C=r(53431),A=r(62029),U=r(49111),se=r(19650),z=r(88983),p=r(47933),H=r(33565),G=r(27697),re=r(10237);function fe(E){var i=E.study_type,a=E.status,t=E.keyword,s=E.page_size,n=E.page_number,l=G.Z.personal.listUrl();return re.WY.get({url:l,params:{study_type:i,status:a,keyword:t,page_size:s,page_number:n}})}function he(E){var i=E.study_type,a=E.status,t=E.keyword,s=E.page_size,n=E.page_number,l=G.Z.personal.listCountUrl();return re.WY.get({url:l,params:{study_type:i,status:a,keyword:t,page_size:s,page_number:n}})}var Ze=r(58970),Se=r.n(Ze),ye=r(96433),xe=r(33304),Re=r(34669),Fe=r(82833),lt=r(402),ot=r(99545),gt=r(61487),je=r.n(gt),Te=r(6793),Qe=r(84874),kt=r(65202),ca=r(98233),jt=ot.Z.Paragraph,mt=ot.Z.Text,xt=(0,kt.p)(),ua=E=>{var i=E.info,a=E.type,t=()=>{ue.m8.push(ca.uk.traineeView((0,o.Z)((0,o.Z)({},i),{},{from:"trainee",source:"first"})))},s=()=>{var n=parseInt(i.progress),l=null;return i.status==="unstarted"?l=e().createElement("span",{className:je()["taskCard-footer-gray"]},"\u672A\u5F00\u59CB"):i.status==="overdue"?l=e().createElement("span",{className:je()["taskCard-footer-red"]},"\u903E\u671F"):l=e().createElement("div",{className:je()["taskCard-footer-progress"]},e().createElement(Fe.Z,{percent:n,size:"small",strokeColor:xt,format:c=>e().createElement("span",{style:{color:xt}},c,"%")})),l};return e().createElement("div",{className:je().taskCard,onClick:t},e().createElement("img",{className:je()["taskCard-img"],src:i.cover}),e().createElement("div",{className:je()["taskCard-content"]},e().createElement("div",{className:je()["taskCard-content-title"]},e().createElement(jt,{ellipsis:{rows:2}},i.title)),a==="task"&&e().createElement("p",null,"".concat((0,Te.p6)(i.task_begin_time,"yyyy.MM.dd hh:mm")," ~ ").concat((0,Te.p6)(i.task_end_time,"yyyy.MM.dd hh:mm"))),e().createElement("div",{className:je()["taskCard-content-info"]},e().createElement(se.Z,null,e().createElement("span",null,e().createElement(Qe.Z,{iconClass:"iconFView"}),i.scan_count),e().createElement("span",null,e().createElement(Qe.Z,{iconClass:"iconComment"}),i.comment_count),e().createElement("span",null,e().createElement(Qe.Z,{iconClass:"iconLikeFace"}),i.like_count)),e().createElement("div",{className:je()["taskCard-content-info-rate"]},e().createElement(xe.Z,{defaultValue:i.score,disabled:!0})))),e().createElement("div",{className:je()["taskCard-footer"]},e().createElement(se.Z,null,e().createElement("img",{className:je()["taskCard-footer-avatar"],src:i.cover}),e().createElement("div",{className:je()["taskCard-footer-name"]},e().createElement(mt,{ellipsis:!0,style:{width:100}},i.create_user_name))),e().createElement("div",{className:je()["taskCard-footer-status"]},s())))},wt=(0,f.Z)()(ua),ea=r(13254),Ye=r(14277),_t=r(20228),Ve=r(11382),dt=r(76886),da=r.n(dt),ma=E=>{var i=E.t,a=E.isLoading,t=E.total;return e().createElement("div",{className:da().loading},a&&e().createElement(Ve.Z,{size:"large"}),t===0&&!a&&e().createElement(Ye.Z,{image:Ye.Z.PRESENTED_IMAGE_SIMPLE,description:i("trainee.noResultContent")}))},pa=(0,f.Z)()(ma),ze=r(48479),ha=h.Z.TabPane,At=E=>{var i=E.t,a=(0,R.useState)([]),t=(0,H.Z)(a,2),s=t[0],n=t[1],l=(0,R.useState)(0),c=(0,H.Z)(l,2),u=c[0],P=c[1],K=(0,R.useState)({allCount:0,unFinishCount:0,finishCount:0,overDueCount:0,total:0}),ae=(0,H.Z)(K,2),ee=ae[0],de=ae[1],_e=(0,R.useState)([]),Ie=(0,H.Z)(_e,2),Ue=Ie[0],ke=Ie[1],De=(0,R.useState)({page_number:1,page_size:20,keyword:"",status:"all",study_type:"task"}),pe=(0,H.Z)(De,2),Ee=pe[0],le=pe[1],Ke=(0,R.useState)(!1),qe=(0,H.Z)(Ke,2),rt=qe[0],Ne=qe[1];(0,R.useEffect)(()=>{it()},[Ee.page_number,Ee.page_size,Ee.keyword,Ee.status,Ee.study_type]),(0,R.useEffect)(()=>{ft()},[Ee.page_number,Ee.page_size,Ee.keyword,Ee.study_type]),(0,R.useEffect)(()=>{ke([{name:"".concat(i("common.all"),"(").concat(ee.allCount,")"),value:"all",visible:!0},{name:"".concat(i("common.unFinish"),"(").concat(ee.unFinishCount,")"),value:"unfinished",visible:!0},{name:"".concat(i("dashboard.completed"),"(").concat(ee.finishCount,")"),value:"finished",visible:!0},{name:"".concat(i("marketing.hasOverdue"),"(").concat(ee.overDueCount,")"),value:"overdue",visible:Ee.study_type==="task"}])},[ee,Ee.study_type]);var we=Ce=>{le((0,o.Z)((0,o.Z)({},Ee),Ce))},it=function(){var Ce=(0,B.Z)(I().mark(function Oe(){var nt;return I().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Ne(!0),Lt.next=3,fe(Ee);case 3:nt=Lt.sent,nt.data.code==="200000"&&(n(nt.data.data.list),P(nt.data.data.total)),Ne(!1);case 6:case"end":return Lt.stop()}},Oe)}));return function(){return Ce.apply(this,arguments)}}(),ft=function(){var Ce=(0,B.Z)(I().mark(function Oe(){var nt,Nt,Lt,Za,ht,Kt;return I().wrap(function(oa){for(;;)switch(oa.prev=oa.next){case 0:return oa.next=2,he(Ee);case 2:nt=oa.sent,nt.data.code==="200000"&&(Nt=nt.data.data,Lt=Nt.all_count,Za=Nt.unfinished_count,ht=Nt.finished_count,Kt=Nt.overdue_count,de({allCount:Lt||0,unFinishCount:Za||0,finishCount:ht||0,overDueCount:Kt||0}));case 4:case"end":return oa.stop()}},Oe)}));return function(){return Ce.apply(this,arguments)}}(),pt=()=>{var Ce=[{name:i("lineClass.task"),type:"task"},{name:i("trainingProject.selfStudy"),type:"self_study"}];return Ce.map(Oe=>e().createElement(ha,{tab:Oe.name,key:Oe.type}))},Zt=()=>e().createElement(se.Z,{align:"start"},e().createElement(p.ZP.Group,{onChange:Ce=>{we({status:Ce.target.value})},value:Ee.status,style:{marginBottom:8}},Ue.filter(Ce=>Ce.visible).map((Ce,Oe)=>e().createElement(p.ZP.Button,{value:Ce.value,key:Oe.toString()},Ce.name))),e().createElement(ze.Z,{onSearch:Ce=>{we({keyword:Ce})},placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",width:272,maxLength:400})),Ct=(Ce,Oe)=>{le({page_number:Ce,page_size:Oe})},ut=()=>{var Ce=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{total:u,current:Ee.page_number,pageSize:Ee.page_size});return e().createElement(C.Z,(0,A.Z)({onChange:Ct},Ce))};return e().createElement("div",{className:Se().MyProjectTask},e().createElement(h.Z,{onChange:Ce=>{we({study_type:Ce})},defaultActiveKey:"0",tabPosition:"left",activeKey:Ee.study_type},pt()),e().createElement("div",{className:Se()["MyProjectTask-box"]},e().createElement("div",{className:Se()["MyProjectTask-box-operate"]},Zt()),e().createElement("div",{className:Se()["MyProjectTask-box-list"]},!rt&&s.map(Ce=>e().createElement("div",{key:Ce.id,className:Se()["MyProjectTask-box-list-item"]},e().createElement(wt,{info:Ce,type:Ee.study_type}))),rt&&e().createElement(pa,{total:ee.allCount,isLoading:rt})),e().createElement("div",{className:Se()["MyProjectTask-box-pagination"]},ut())))},ta=E=>(0,o.Z)({},E),La=E=>(0,o.Z)({},E),aa=(0,y.$j)(ta,La)((0,f.Z)()(At)),Vt=r(49101),et=r(1164),Qt=r(42837),Ka=r(63185),xa=r(9676),tt=r(84391),ga=r(64549),Da=r(31945),$e=E=>{var i=E.user,a=E.currentRoute;return{currentPath:a.path,allAuthRoutes:a.allAuthRoutes,userLng:i.lng}};class ge extends e().Component{constructor(i){super(i);this.setPlaceholder=()=>{var a=this.props,t=a.inputPlaceholder,s=a.t;t||this.setState({currentPlaceholder:s("searchInputPlaceholder.task")})},this.handleSearch=a=>{this.props.onSearch(a)},this.handleRadiosChange=a=>{this.props.onRadiosChange(a.target.value)},this.handleChange=a=>{this.props.onCheckboxChange(a.target.checked)},this.handleDownload=()=>{this.props.onDownload()},this.renderOther=()=>{var a=this.props,t=a.prefixCls,s=a.renderOther,n=a.showOther,l="".concat(t,"__other");if(n&&s&&typeof s=="function")return e().createElement("div",{className:l},s())},this.renderRadiosType=()=>{var a=this.props,t=a.prefixCls,s=a.radioList,n=a.defaultRadioValue,l=a.radioValue;if(!s.length)return null;var c=n||s[0].value,u="".concat(t,"__radios");return e().createElement("div",{className:u},typeof l!="undefined"?e().createElement(p.ZP.Group,{defaultValue:c,value:l,onChange:this.handleRadiosChange},s.map(P=>e().createElement(p.ZP.Button,{key:P.value,value:P.value},P.name))):e().createElement(p.ZP.Group,{defaultValue:c,onChange:this.handleRadiosChange},s.map(P=>e().createElement(p.ZP.Button,{key:P.value,value:P.value},P.name))))},this.rendeExtraBtnType=()=>{var a=this.props,t=a.t,s=a.extraBtnSelectedRowKeys,n=a.extraBtnHandleMultiVisibleRange;return e().createElement(M.Z,{disabled:s.length===0,onClick:n},t("courseManage.setTheVisibility"))},this.renderCheckbox=()=>{var a=this.props,t=a.prefixCls,s=a.t,n=a.label,l=a.showCheckbox,c=a.renderActionSelect,u="".concat(t,"__checkbox");return!l&&c&&typeof c=="function"?e().createElement("div",{className:u},c()):l?e().createElement("div",{className:u},e().createElement(xa.Z,{onChange:this.handleChange},n||s("common.myCreated"))):null},this.renderSearch=()=>{var a=this.props,t=a.prefixCls,s=a.showSearch,n=a.inputPlaceholder,l=a.maxLength,c=l===void 0?400:l,u="".concat(t,"__search");if(!s)return null;var P=this.state.currentPlaceholder;return n?e().createElement("div",{className:u},e().createElement(ze.Z,{onSearch:this.handleSearch,placeholder:n,width:272,maxLength:c})):e().createElement("div",{className:u},e().createElement(ze.Z,{onSearch:this.handleSearch,placeholder:P,width:272,maxLength:c}))},this.renderActionBtn=()=>{var a=this.props,t=a.prefixCls,s=a.actionText,n=a.t,l=a.tabLink,c=a.showBtn,u=a.renderActionBtn,P=a.popOverProps,K=P===void 0?[]:P,ae=a.renderGuide,ee=ae===void 0?!1:ae,de=a.showDownloadBtn,_e=de===void 0?!1:de,Ie=a.guideClassName,Ue=Ie===void 0?"guide-popover":Ie,ke="".concat(t,"__action");return!c&&u&&typeof u=="function"?e().createElement("div",{className:ke},u()):!c||!s?null:e().createElement("div",{className:ke},e().createElement(et.Z,{to:l},e().createElement(M.Z,{type:"primary",icon:e().createElement(Vt.Z,null)},s)),e().createElement(ga.Z,{className:Ue,renderGuide:ee,guidePageProps:K,direction:"left",showDownloadBtn:_e}),_e&&e().createElement(M.Z,{className:"blue_btn_color",style:{marginLeft:"8px"},icon:e().createElement(tt.Z,null),onClick:this.handleDownload},n("common.exportData")))},this.renderQueryRow=()=>{var a=this.props,t=a.queryRowParams,s=a.queryRowList,n=a.queryRowSelectedCourseIds,l=a.queryRowSelectedProjectIds,c=a.queryRowOnForceRender,u=a.queryRowOnClassifyChange,P=a.queryRowOnTypeChange,K=a.queryRowOnCourseTypeChange,ae=a.queryRowAllowActions;return e().createElement(Da.Z,{params:t,list:s,selectedCourseIds:n,selectedProjectIds:l,onForceRender:c,onClassifyChange:u,onTypeChange:P,onCourseTypeChange:K,allowActions:ae,showRenderCondition:!1})},this.state={currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(i){i.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var i=this.props,a=i.prefixCls,t=i.showRenderRadios,s=t===void 0?!0:t,n=i.showRenderQueryRow,l=i.showRendeExtraBtn;return e().createElement(R.Fragment,null,e().createElement("div",{className:"render_other"},this.renderOther(),e().createElement("header",{className:"".concat(a)},e().createElement("section",{className:"".concat(a,"__radiocol")},this.renderActionBtn(),n&&this.renderQueryRow(),l&&this.rendeExtraBtnType()),e().createElement("section",{className:"".concat(a,"__searchcol")},this.renderCheckbox(),s&&this.renderRadiosType(),this.renderSearch()))))}}ge.defaultProps={prefixCls:"obligatory_listQueryRow",label:"",actionText:"add",showCheckbox:!0,showSearch:!0,showBtn:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{}};var O=(0,y.$j)($e)((0,f.Z)()(ge)),b=r(81211),$=r(56932),te=r.n($),ce=r(60667);class ve extends e().Component{constructor(){super(...arguments);this.handleClick=i=>{var a=this.props,t=a.onClick,s=(0,b.Z)(a,["onClick"]);t({$event:i,props:(0,o.Z)({},s)})},this.renderHeader=()=>{var i=this.props,a=i.prefixCls,t=i.avatar,s=i.name,n=i.t,l=i.item,c="".concat(a,"__header"),u=t||te();return e().createElement("h1",{className:c},e().createElement("div",{className:"".concat(c,"__left")},e().createElement("img",{className:"".concat(c,"__avatar"),src:u,alt:""}),e().createElement("span",{className:"".concat(c,"__name")},e().createElement(ce.Z,{dataType:"userName",value:l.creator_sync_user_id,name:s,type:l.creator_source_type})),e().createElement("span",{className:"".concat(c,"__infotxt")},n("myExamTask.assigned"))),this.renderTypeBadgeFun())},this.renderTypeBadgeFun=()=>{var i=this.props,a=i.prefixCls,t=i.badgeType,s=t===void 0?"none":t,n=i.t,l={1:n("study.onlineTask"),2:n("study.offlineTask"),3:n("study.hybridTask"),4:n("study.newEmployeeTask"),6:n("study.courseTask")};if(s==="none")return null;var c="".concat(a,"__header__badge ").concat(a,"__header__badge-").concat(s);return e().createElement("div",{className:"".concat(a,"__header__right")},e().createElement("span",{className:c},l[s]))},this.renderBody=()=>{var i=this.props,a=i.prefixCls,t=i.title,s=i.subTile,n=i.showScore,l=i.score,c=i.t,u="".concat(a,"__body");return e().createElement("div",{className:u},e().createElement("h2",{className:"".concat(u,"__title"),title:t},t),e().createElement("p",{className:"".concat(u,"__subTile")},s&&s.toString().replace(/-/g,".")),n&&e().createElement("p",{className:"".concat(u,"__score")},l,c("common.credit")))},this.renderFooter=()=>{var i=this.props,a=i.prefixCls,t=i.progress,s=i.renderFooterTip,n=i.qualifiedStatus,l=i.t,c="".concat(a,"__footer"),u=s();return e().createElement("div",{className:c},e().createElement("div",{className:"".concat(c,"__progress")},e().createElement(Fe.Z,{percent:t,size:"small"})),u&&e().createElement("div",{className:"".concat(c,"__footertip")},u),n==="true"&&e().createElement("div",{className:"".concat(c,"__statusTip")},l("study.employeePass")))}}render(){var i=this.props.prefixCls;return e().createElement("div",{className:i},e().createElement("div",{className:"".concat(i,"__main"),onClick:this.handleClick},this.renderHeader(),this.renderBody(),this.renderFooter()))}}ve.defaultProps={prefixCls:"obligatory_taskCard",avatar:te(),title:"",subTile:"",name:"",actionName:"\u6307\u6D3E",progress:0,item:{},showScore:!1,score:0,badgeType:"none",renderFooterTip:()=>null,onClick:()=>{}};var Pe=(0,f.Z)()(ve),Le={getRadiosNum:S.ZP.LearningMyObligatoryTask.getRadiosNum,getTableList:S.ZP.LearningMyObligatoryTask.getTableList};class Je extends e().Component{constructor(i){super(i);this.initData=()=>{this.initRadioList(),this.initTableList()},this.initTableList=()=>{this.setState({tableLoading:!0}),re.WY.get({url:Le.getTableList(),params:this.state.params}).then(a=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:a.data.list,tableTotal:a.data.total})},300)})},this.initRadioList=()=>{var a=this.props.t;re.WY.get({url:Le.getRadiosNum()}).then(t=>{var s=t.data,n=s.finishCount,l=s.totalCount,c=s.unFinishCount;this.setState({radioList:[{name:"".concat(a("common.all"),"(").concat(l,")"),value:0},{name:"".concat(a("common.unFinish"),"(").concat(c,")"),value:1},{name:"".concat(a("dashboard.completed"),"(").concat(n,")"),value:2}]})})},this.handleQueryRowSearchKeyword=a=>{this.resetPagination().then(()=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{keyword:a})}),()=>{this.initTableList()})})},this.handleQueryRowRadiosChange=a=>{this.resetPagination().then(()=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{status:a})}),()=>{this.initTableList()})})},this.handleSizeChange=(a,t)=>{this.setState(s=>({params:(0,o.Z)((0,o.Z)({},s.params),{},{pageSize:t})}),()=>{this.initTableList()})},this.handleNumberChange=a=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{pageNumber:a})}),()=>{this.initTableList()})},this.handleCardClick=a=>{var t=this.state.qrCodeOption;if(a.props.item.faceRecognition==="on"||a.props.item.videoFaceRecognition==="on"){this.setState({qrCodeOption:(0,o.Z)((0,o.Z)({},t),{},{scene:"flag=study&planId=".concat(a.props.item.id)}),showFaceQrCode:!0});return}(0,N.eJ)({url:"/training/learning/task/myObligatoryTaskView?".concat(g.stringify({id:a.props.item.id,fromPage:"myObligatoryTask"}))})},this.resetPagination=()=>new Promise(a=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{pageNumber:1,pageSize:20})}),()=>{a()})}),this.renderPagination=()=>{var a=this.props.prefixCls,t="".concat(a,"__content__pagination"),s=this.state,n=s.params,l=s.tableTotal,c=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:l,current:n.pageNumber,pageSize:n.pageSize,onChange:this.handleNumberChange,onShowSizeChange:this.handleSizeChange});return e().createElement("div",{className:t},e().createElement(C.Z,c))},this.renderTaskList=()=>{var a=this.props,t=a.prefixCls,s=a.isAdmin,n=a.t,l=this.state,c=l.tableList,u=l.tableLoading,P="".concat(t,"__content__tasks"),K;return u?K=e().createElement(Ve.Z,{size:"large"}):c.length===0?K=e().createElement("div",{className:"empty-content"},e().createElement(Ye.Z,{image:Ye.Z.PRESENTED_IMAGE_SIMPLE,description:n(s?"common.adminStudyTaskNoData":"common.userNoData")}),s?e().createElement(M.Z,{type:"primary",icon:e().createElement(Vt.Z,null),onClick:()=>{et.Z.targetTo({path:"/training/learning/task/management"})}},n("common.toAdd")):null):K=c.map(ae=>{var ee=ae.id,de=ae.title,_e=ae.creatorName,Ie=ae.creator_avatar,Ue=ae.beginTime,ke=ae.endTime,De=ae.process,pe=ae.show_score,Ee=ae.award_score,le=ae.taskType,Ke=ae.qualified_status;return e().createElement(Pe,{key:ee,avatar:Ie,name:_e,title:de,subTile:"".concat((0,Te.p6)(Ue)," ~ ").concat((0,Te.p6)(ke)),progress:De,onClick:this.handleCardClick,item:(0,o.Z)({},ae),showScore:pe==="true",score:Ee,badgeType:le,qualifiedStatus:Ke,renderFooterTip:()=>this.renderTaskCardTip(ae)})}),e().createElement("div",{className:P},K)},this.renderTaskCardTip=a=>{var t=a.endTime,s=a.process,n=this.state.params.timestamp;return t<n&&+s<100?e().createElement("span",{className:"cl-primary",style:{color:"#D64F4F"}},this.props.t("common.overdue")):null},this.hiddenFaceQrCode=()=>{this.setState({showFaceQrCode:!1})},this.state={params:{status:0,keyword:"",pageNumber:1,pageSize:20,sortName:"createTime",sortOrder:"desc",type:2,timestamp:Date.parse(new Date)},radioList:[],tableLoading:!0,tableList:[],tableTotal:0,showFaceQrCode:!1,qrCodeOption:{flag:"study",scene:"",tip:i.t("exam.taskFaceKnowWxQrCodeTip")}}}componentDidMount(){this.initData()}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state,n=s.radioList,l=s.showFaceQrCode,c=s.qrCodeOption;return e().createElement("div",{className:a},e().createElement(O,{radioList:n,defaultRadioValue:0,showCheckbox:!1,showBtn:!1,onRadiosChange:this.handleQueryRowRadiosChange,onSearch:this.handleQueryRowSearchKeyword,inputPlaceholder:t("searchInputPlaceholder.task")}),e().createElement("div",{className:"".concat(a,"__content")},this.renderTaskList(),this.renderPagination()),e().createElement(Qt.Z,{title:t("exam.taskFaceKnowQrCodeTitle"),option:c,visible:l,onCancel:this.hiddenFaceQrCode,tip:"exam.taskFaceTip"}))}}Je.defaultProps={prefixCls:"my_obligatory_task"};var Be=E=>{var i=E.user;return{isAdmin:i.isAdmin}},Ge=(0,y.$j)(Be)((0,f.Z)()(Je)),vt=r(54029),We=r(62529),ct=r(94184),Ae=r.n(ct),ws=r(44548),Ma=r(49147),va=r(67479),ja=r(47745),bt={pageNumber:1,pageSize:20};class As extends e().Component{constructor(i){var a;super(i);a=this,this.getTaskList=(0,B.Z)(I().mark(function t(){var s,n,l,c,u,P,K,ae;return I().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return s=a.state,n=s.status,l=s.keyword,c=bt.pageNumber,u=bt.pageSize,P={keyword:l,status:n,page_size:u,page_number:c},a.setState({isLoading:!0}),de.next=6,(0,Z.ZS)(P);case 6:K=de.sent,ae=K.data,ae.code==="200000"&&a.setState({isLoading:!1,taskList:ae.data.task_list.list,taskTotal:ae.data.task_list.total,statusCount:{all_count:ae.data.all,unfinished_count:ae.data.unfinished,absence_count:ae.data.absence,finished_count:ae.data.finished}});case 9:case"end":return de.stop()}},t)})),this.handleSearch=t=>{this.setState({keyword:t},()=>{this.getTaskList(this.props.deptId,t)})},this.handleStatusChange=t=>{var s=t.target.value;bt.pageNumber=1,bt.pageSize=20,this.setState({status:s},()=>{this.getTaskList()})},this.pageChange=t=>{bt.pageNumber=t,this.getTaskList()},this.pageSizeChange=(t,s)=>{bt.pageSize=s,this.getTaskList()},this.startExam=function(){var t=(0,B.Z)(I().mark(function s(n){var l,c,u;return I().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(navigator.onLine){K.next=3;break}return k.default.warning(a.props.t("examination.networkError")),K.abrupt("return");case 3:if(l=n.id,c=n.task_id,n.face_recognition!=="true"){K.next=7;break}return a.setState({showFaceQrCode:!0,examQrCode:{flag:"exam",scene:"flag=exam&planId=".concat(l,"&task_id=").concat(c)}}),K.abrupt("return");case 7:return K.next=9,(0,Z.Wl)({examId:l,taskId:c});case 9:u=K.sent,u.data.code==="200000"&&a.setState({examId:l,examInfo:(0,o.Z)((0,o.Z)({},u.data.data),{},{task_id:c})},()=>{a.setState({examInfoModalVisible:!0})});case 11:case"end":return K.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.handleOk=(0,B.Z)(I().mark(function t(){var s,n,l,c,u,P,K,ae,ee,de,_e,Ie,Ue,ke,De,pe;return I().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(s=a.state,n=s.examId,l=s.examInfo,c=l===void 0?{}:l,u=a.props,P=u.userInfo,K=u.t,ae=P.enterpriseId,ee=c.cut_screen_vo,de=ee===void 0?{}:ee,_e=window.localStorage.getItem("token"),navigator.onLine){le.next=8;break}return k.default.warning(K("examination.networkError")),le.abrupt("return");case 8:return le.prev=8,le.next=11,(0,Z.XZ)(n,c.task_id);case 11:if(Ie=le.sent,Ie.data.code!=="200000"){le.next=26;break}if(a.setState({examInfoModalVisible:!1}),!(dd.version&&de.cut_screen_rule!=="unlimited")){le.next=20;break}Ue=(0,N.lz)(ae,"student"),ke="".concat(Ue,"/auth?").concat(g.stringify({accessToken:_e,pageFrom:"ding_myExamTask",id:n,exam_id:n,task_id:c.task_id,cut_screen_count:de.cut_screen_count})),a.setState({examInfoModalVisible:!1},()=>{window.open(ke,"_blank")}),le.next=26;break;case 20:return le.t0=et.Z,le.next=23,va.W.examing({accessToken:_e,exam_id:n,task_id:c.task_id,cut_screen_count:de.cut_screen_count,id:n});case 23:le.t1=le.sent,le.t2={path:le.t1,projectType:"student"},le.t0.targetTo.call(le.t0,le.t2);case 26:le.next=33;break;case 28:le.prev=28,le.t3=le.catch(8),De=le.t3.response.data.code,pe=Ma.Z[De]?Ma.Z[De].content:"",pe&&!Ma.Z[De].showErrorMessage&&D.Z.info({title:K("common.tip"),content:e().createElement("div",null,e().createElement("p",null,pe)),okText:K("common.exitBack")});case 33:case"end":return le.stop()}},t,null,[[8,28]])})),this.handleCancel=()=>{this.setState({examInfoModalVisible:!1})},this.showEveryExamGrade=function(){var t=(0,B.Z)(I().mark(function s(n){var l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(navigator.onLine){u.next=3;break}return k.default.warning(a.props.t("examination.networkError")),u.abrupt("return");case 3:return u.next=5,(0,va.D)(n.id);case 5:l=u.sent,l?(0,N.eJ)({url:va.W.examData({exam_id:n.id,task_id:n.task_id})}):a.showOldEveryExamGrade(n);case 7:case"end":return u.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.showOldEveryExamGrade=t=>{var s=this.props.userInfo.id;this.setState(n=>({getExamAllGradesProps:(0,o.Z)((0,o.Z)({},n.getExamAllGradesProps),{},{visible:!0,planId:t.id,userId:s,planTitle:t.title,type:"user",pageFrom:"myExamTask"})}))},this.hideOldEveryExamGrade=()=>{this.setState(t=>({getExamAllGradesProps:(0,o.Z)((0,o.Z)({},t.getExamAllGradesProps),{},{visible:!1,planId:"",userId:"",planTitle:"",type:"",pageFrom:""})}))},this.renderTaskStatusCss=t=>{var s="",n="",l=this.props.t,c=t.exam_result,u=t.status;if(t.show_result==="false"&&u==="finished")return null;if(u==="unfinished")n="#2F61F6",s=l("examination.resultStatus.wait"),c==="inProgress"&&(s=l("common.ongoing"));else if(u==="absence")n="#A6A6A6",s=l("examination.resultStatus.absence");else if(u==="finished")if(t.total_score===t.score&&c!=="pending")n="#69A4E7",s=l("examination.resultStatus.full");else switch(c){case"passed":n="#44b975",s=l("examination.resultStatus.pass");break;case"failed":n="#FF4D4F",s=l("examination.resultStatus.fail");break;case"pending":n="#FF9F00",s=l("examination.resultStatus.marking");break;default:break}return t.begin_time>new Date().getTime()&&t.unlimited==="false"&&(n="#A6A6A6",s=l("examination.resultStatus.unStart")),e().createElement("span",{className:"badge_span"},e().createElement(We.Z,{color:n,text:s}))},this.renderHistoryGrades=t=>e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.showEveryExamGrade(t)},this.props.t("examination.testData")),this.renderOperateButtonType=t=>t.exam_result==="passed"&&t.repeat_exam==="true"?e().createElement(R.Fragment,null,e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.startExam(t,"retest")},this.props.t("myExamTask.reTest"))):t.exam_result==="failed"&&(t.repeat_exam==="true"||t.replenish_exam==="true")?e().createElement(R.Fragment,null,t.repeat_exam==="true"?e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.startExam(t,"retest")},this.props.t("myExamTask.reTest")):null,t.replenish_exam==="true"?e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.startExam(t,"makeuptest")},this.props.t("myExamTask.replenishExam")):null):t.exam_result==="pending"&&t.repeat_exam==="true"?e().createElement(M.Z,{size:"small",type:"link",onClick:()=>this.startExam(t,"retest")},this.props.t("myExamTask.reTest")):t.status==="absence"&&t.replenish_exam==="true"?e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.startExam(t,"makeuptest")},this.props.t("myExamTask.replenishExamLabel")):t.status==="unfinished"?e().createElement(M.Z,{size:"small",type:"link",onClick:()=>this.startExam(t,"test")},this.props.t("myExamTask.starTest")):null,this.handleHiddenFaceQrCode=()=>{this.setState({showFaceQrCode:!1,examQrCode:{flag:"",scene:""}})},this.renderExamScore=t=>{var s=this.props.t,n;return t.status==="unfinished"||t.status==="absence"?n=s("myExamTask.noResult"):t.exam_result==="pending"||t.show_result==="false"?n="--":n=t.score,n},this.loadOperate=t=>{if(t.show_result==="true"&&t.status==="finished"){this.showEveryExamGrade(t);return}(t.repeat_exam==="true"||t.replenish_exam==="true"||t.status==="unfinished")&&this.startExam(t)},this.state={status:"",keyword:"",taskList:[],taskTotal:0,statusCount:{all_count:0,unfinished_count:0,absence_count:0,finished_count:0},isLoading:!1,examInfoModalVisible:!1,examInfo:{},examId:"",showFaceQrCode:!1,getExamAllGradesProps:{visible:!1,planId:"",userId:"",planTitle:"",pageFrom:""},examQrCode:{flag:"",scene:""}}}componentDidMount(){this.getTaskList()}componentWillUnmount(){bt.pageNumber=1,bt.pageSize=20}render(){var i=this.props,a=i.t,t=i.isAdmin,s=this.state,n=s.status,l=s.isLoading,c=s.taskList,u=s.examInfoModalVisible,P=s.examInfo,K=s.showFaceQrCode,ae=s.examQrCode,ee=s.getExamAllGradesProps,de=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:this.state.taskTotal,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange,current:bt.pageNumber}),_e=this.state.statusCount,Ie=_e.all_count,Ue=_e.unfinished_count,ke=_e.finished_count,De=_e.absence_count;return e().createElement("div",{className:"exam_task_new"},e().createElement("div",{className:"exam_task_container"},e().createElement("div",{className:"top_operate"},e().createElement(p.ZP.Group,{size:"default",defaultValue:n,onChange:this.handleStatusChange},e().createElement(p.ZP.Button,{value:""},a("myExamTask.all"),"(",Ie,")"),e().createElement(p.ZP.Button,{value:"unfinished"},a("examination.toBeTested"),"(",Ue,")"),e().createElement(p.ZP.Button,{value:"finished"},a("examination.tested"),"(",ke,")"),e().createElement(p.ZP.Button,{value:"absence"},a("myExamTask.absent"),"(",De,")")),e().createElement(ze.Z,{onSearch:this.handleSearch,prefixCls:"top_operate_search",placeholder:a("searchInputPlaceholder.task")})),e().createElement("div",{className:"exam_task_list_container"},e().createElement("div",{className:"exam_task_list"},l?e().createElement(Ve.Z,{size:"large"}):null,c.length===0?e().createElement("div",{className:"empty-content"},e().createElement(Ye.Z,{image:Ye.Z.PRESENTED_IMAGE_SIMPLE,description:a(t?"common.adminExamNoData":"common.userNoData")}),t?e().createElement(M.Z,{type:"primary",icon:e().createElement(Vt.Z,null),onClick:()=>{et.Z.targetTo({path:"/training/examination/plan"})}},a("common.toAdd")):null):null,c.map(pe=>e().createElement("div",{key:pe.id,className:"exam_task_list_item"},e().createElement("div",{className:"exam_task_list_item_card"},e().createElement("div",{className:Ae()("exam_task_list_item_title",pe.show_result==="true"&&pe.status==="finished"||pe.status==="unfinished"||pe.repeat_exam==="true"||pe.replenish_exam==="true"?"can-click":"no-click"),title:pe.title,onClick:()=>{this.loadOperate(pe)}},pe.title),e().createElement("div",{className:"exam_task_list_item_assign"},e().createElement("span",null,e().createElement("img",{src:pe.avatar||"".concat("https://oss.coolcollege.cn","/1789928553110966272.png"),alt:""}),e().createElement("span",{className:"exam_task_list_item_name"},e().createElement(ce.Z,{dataType:"userName",value:pe.creator_sync_user_id,name:pe.create_user_name,type:pe.creator_source_type})),e().createElement("span",{className:"assigned"},a("myExamTask.assigned"))),e().createElement("div",{className:"exam_task_list_item_status"},this.renderTaskStatusCss(pe))),e().createElement("div",{className:"exam_task_list_item_time"},pe.unlimited==="true"?a("integralMall.notLimitLabel"):(0,N.t6)(pe.begin_time,pe.end_time)),e().createElement("div",{className:"exam_task_list_item_number_score"},e().createElement("span",null,e().createElement("span",{className:"detail_number"},a("myExamTask.exam"),pe.makeup_count,a("myExamTask.times")),e().createElement("span",{className:"detail_one"},e().createElement("label",null,a("myExamTask.totalScore")),e().createElement("span",{className:"count-label"},pe.total_score||"--"))),pe.status!=="finished"&&pe.award_score&&pe.award_score!==0?e().createElement("span",{className:"exam_task_list_item_award"},"".concat(pe.award_score).concat(a("common.credit"))):null)),e().createElement("div",{className:"exam_task_list_item_detail"},e().createElement("span",{className:"detail_one"},e().createElement("label",null,a("myExamTask.score")),e().createElement("span",{className:pe.status!=="unfinished"&&pe.status!=="absence"?"":"gray"},this.renderExamScore(pe))),e().createElement("span",{className:"detail-one more-width"},this.renderOperateButtonType(pe),pe.show_result==="true"&&pe.status==="finished"&&this.renderHistoryGrades(pe))))))),this.state.taskTotal>bt.pageSize||!de.hideOnSinglePage?e().createElement("div",{className:"pagination_container"},e().createElement(C.Z,de)):null),e().createElement(ws.Z,{visible:u,examInfo:P,onCancel:this.handleCancel,onOK:this.handleOk}),e().createElement(Qt.Z,{visible:K,title:a("exam.faceKnowQrCodeTitle"),onCancel:this.handleHiddenFaceQrCode,tip:"exam.faceKnowWxQrCodeTipCustom",option:ae}),e().createElement(ja.Z,(0,A.Z)({},ee,{hideEveryExamGrade:this.hideEveryExamGrade})))}}var Bs=E=>({userInfo:E.user,isAdmin:E.user.isAdmin}),Us=(0,y.$j)(Bs)((0,f.Z)()(As)),Ws=r(59842),St={pageNumber:1,pageSize:20};class Fs extends e().Component{constructor(i){super(i);this.getTaskList=()=>{var a=S.ZP.MyExamTask.getTaskList(),t=this.state,s=t.status,n=t.keyword,l=St.pageNumber,c=St.pageSize,u={keyword:n,status:s,page_size:c,page_number:l};this.setState({isLoading:!0}),re.WY.get({url:a,params:u}).then(P=>{P.data.list.forEach(K=>{K.beginTimeLabel=(0,Te.p6)(K.begin_time,"yyyy-MM-dd hh:mm"),K.endTimeLabel=(0,Te.p6)(K.end_time,"yyyy-MM-dd hh:mm")}),this.setState({isLoading:!1,taskList:P.data.list,taskTotal:P.data.total})})},this.getTaskStatusCount=()=>{var a=S.ZP.MyExamTask.getTaskStatusCount();re.WY.get({url:a}).then(t=>{this.setState({statusCount:{all_count:t.data.all_count,passed_count:t.data.passed_count,failed_count:t.data.failed_count,scoring_count:t.data.scoring_count,absence_count:t.data.absence_count,unfinished_count:t.data.unfinished_count}})})},this.handleSearch=a=>{this.setState({keyword:a},()=>{this.getTaskList(this.props.deptId,a)})},this.handleStatusChange=a=>{var t=a.target.value;St.pageNumber=1,St.pageSize=20,this.setState({status:t},()=>{this.getTaskList()})},this.pageChange=a=>{St.pageNumber=a,this.getTaskList()},this.pageSizeChange=(a,t)=>{St.pageSize=t,this.getTaskList()},this.startExam=a=>{var t=S.ZP.MyExamTask.examIntro({examId:a}),s=this.state.taskList.find(n=>n.id===a);if(s.face_recognition==="on"){this.setState({showFaceQrCode:!0,examQrCode:{flag:"exam",scene:"flag=exam&planId=".concat(a)}});return}re.WY.get({url:t}).then(n=>{this.setState({examId:a,examInfoModalVisible:!0,examInfo:n.data})})},this.handleOk=()=>{var a=this.state,t=a.examId,s=a.examInfo,n=s===void 0?{}:s,l=this.props,c=l.t,u=l.userInfo,P=u.enterpriseId,K=n.cut_screen_count,ae=K===void 0?"":K,ee=S.ZP.MyExamTask.examCheckStatus({examId:t}),de=window.localStorage.getItem("token"),_e={access_token:de};re.WY.get({url:ee,params:_e}).then(Ie=>{if(Ie.data.can_exam==="true")if(dd.version&&ae!==-1){var Ue=(0,N.lz)(P,"student"),ke="".concat(Ue,"/auth?").concat(g.stringify({accessToken:de,pageFrom:"ding_myExamTask",id:t,cut_screen_count:ae}));this.setState({examInfoModalVisible:!1},()=>{window.open(ke,"_blank")})}else(0,N.eJ)({url:"/training/examination/exam/personal?".concat(g.stringify({id:t,pageFrom:"myExamTask",cut_screen_count:ae}))});else{var De="";switch(Ie.data.status){case"exam_not_start":De=c("myExamTask.notStartTip");break;case"exam_finished":De=c("myExamTask.noTimeHandTip");break;case"makeup_exam_not_start":De=c("myExamTask.markUpExamTip");break;case"makeup_exam_finished":De=c("myExamTask.markUpExamOver");break;case"makeup_exam_attend":De=c("myExamTask.markUpCheckResult");break;case"exam_passed":De=c("myExamTask.passedAndResult");break;default:De=c("myExamTask.noRepeatTip");break}k.default.warn(De)}})},this.handleCancel=()=>{this.setState({examInfoModalVisible:!1})},this.viewAnalysis=a=>{(0,N.eJ)({url:"/training/examination/result/personal?".concat(g.stringify({id:a}))})},this.showEveryExamGrade=a=>{var t=this.props.userInfo.id;this.setState(s=>({getExamAllGradesProps:(0,o.Z)((0,o.Z)({},s.getExamAllGradesProps),{},{visible:!0,planId:a.id,userId:t,planTitle:a.title,type:"user",pageFrom:"myExamTask"})}))},this.hideEveryExamGrade=()=>{this.setState(a=>({getExamAllGradesProps:(0,o.Z)((0,o.Z)({},a.getExamAllGradesProps),{},{visible:!1,planId:"",userId:"",planTitle:"",type:"",pageFrom:""})}))},this.renderTaskStatusCss=a=>{var t=this.props.t,s="",n="";switch(a.status){case"absence":n="#9f9f9f",s=t("myExamTask.absent");break;case"unfinished":n="#ed2b2b",s=t("myExamTask.waitExam");break;case"passed":n="#44b975",s=t("myExamTask.qualified");break;case"failed":n="#ed2b2b",s=t("myExamTask.unqualified");break;case"scoring":n="#ffa000",s=t("myExamTask.marking");break;case"perfect":n="#FF8900",s=t("myExamTask.perfect");break;default:break}return a.begin_time>new Date().getTime()&&(n="#9f9f9f",s=t("myExamTask.unStart")),e().createElement("span",{className:"badge_span"},e().createElement(We.Z,{color:n,text:s}))},this.renderHistoryGrades=a=>e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.showEveryExamGrade(a)},this.props.t("personal.viewDetails")),this.renderOperateButtonType=a=>(a.status==="passed"||a.status==="perfect")&&(a.repeat_exam==="true"||a.show_answer!==0)?e().createElement(R.Fragment,null,a.repeat_exam==="true"?e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.startExam(a.id,"retest")},this.props.t("myExamTask.reTest")):null):a.status==="failed"&&(a.repeat_exam==="true"||a.replenish_exam==="true"||a.show_answer!==0)?e().createElement(R.Fragment,null,a.repeat_exam==="true"?e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.startExam(a.id,"retest")},this.props.t("myExamTask.reTest")):null,a.replenish_exam==="true"?e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.startExam(a.id,"makeuptest")},this.props.t("myExamTask.replenishExam")):null):a.status==="absence"&&a.replenish_exam==="true"?e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.startExam(a.id,"makeuptest")},this.props.t("myExamTask.replenishExamLabel")):a.status==="unfinished"?e().createElement(M.Z,{size:"small",type:"link",onClick:()=>this.startExam(a.id,"test")},this.props.t("myExamTask.starTest")):null,this.handleHiddenFaceQrCode=()=>{this.setState({showFaceQrCode:!1,examQrCode:{flag:"",scene:""}})},this.renderExamScore=a=>{var t=this.props.t,s;return a.status==="unfinished"?s=t("myExamTask.noResult"):a.status==="scoring"||!a.show_result?s="--":s=a.score,s},this.state={status:"all",keyword:"",taskList:[],taskTotal:0,statusCount:{all:0,unStart:0,examing:0,finished:0},isLoading:!1,examInfoModalVisible:!1,examInfo:{},examId:"",showFaceQrCode:!1,getExamAllGradesProps:{visible:!1,planId:"",userId:"",planTitle:"",pageFrom:""},examQrCode:{flag:"",scene:""}}}componentDidMount(){this.getTaskStatusCount(),this.getTaskList()}componentWillUnmount(){St.pageNumber=1,St.pageSize=20}render(){var i=this.props,a=i.t,t=i.isAdmin,s=this.state,n=s.status,l=s.isLoading,c=s.taskList,u=s.examInfoModalVisible,P=s.examInfo,K=s.showFaceQrCode,ae=s.getExamAllGradesProps,ee=s.examQrCode,de=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:this.state.taskTotal,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange,current:St.pageNumber}),_e=this.state.statusCount,Ie=_e.all_count,Ue=_e.unfinished_count,ke=_e.passed_count,De=_e.failed_count,pe=_e.scoring_count,Ee=_e.absence_count;return e().createElement("div",{className:"exam_task"},e().createElement("div",{className:"exam_task_container"},e().createElement("div",{className:"top_operate"},e().createElement(ze.Z,{onSearch:this.handleSearch,prefixCls:"top_operate_search",placeholder:a("searchInputPlaceholder.task")}),e().createElement(p.ZP.Group,{size:"default",defaultValue:n,onChange:this.handleStatusChange},e().createElement(p.ZP.Button,{value:"all"},a("myExamTask.all"),"(",Ie,")"),e().createElement(p.ZP.Button,{value:"unfinished"},a("common.unFinish"),"(",Ue,")"),e().createElement(p.ZP.Button,{value:"passed"},a("myExamTask.qualified"),"(",ke,")"),e().createElement(p.ZP.Button,{value:"failed"},a("myExamTask.unqualified"),"(",De,")"),e().createElement(p.ZP.Button,{value:"scoring"},a("myExamTask.marking"),"(",pe,")"),e().createElement(p.ZP.Button,{value:"absence"},a("myExamTask.absent"),"(",Ee,")"))),e().createElement("div",{className:"exam_task_list_container"},e().createElement("div",{className:"exam_task_list"},l?e().createElement(Ve.Z,{size:"large"}):null,c.length===0?e().createElement("div",{className:"empty-content"},e().createElement(Ye.Z,{image:Ye.Z.PRESENTED_IMAGE_SIMPLE,description:a(t?"common.adminExamNoData":"common.userNoData")}),t?e().createElement(M.Z,{type:"primary",icon:e().createElement(Vt.Z,null),onClick:()=>{et.Z.targetTo({path:"/training/examination/plan"})}},a("common.toAdd")):null):null,c.map(le=>e().createElement("div",{key:le.id,className:"exam_task_list_item"},e().createElement("div",{className:"exam_task_list_item_status"},this.renderTaskStatusCss(le)),e().createElement("div",{className:"exam_task_list_item_card"},e().createElement("h5",{className:"exam_task_list_item_assign"},e().createElement("img",{src:le.avatar||"".concat("https://oss.coolcollege.cn","/1789928553110966272.png"),alt:""}),e().createElement("span",{className:"exam_task_list_item_name"},e().createElement(ce.Z,{dataType:"userName",value:le.creator_sync_user_id,name:le.create_user_name,type:le.creator_source_type})),e().createElement("span",null,a("myExamTask.assigned"))),e().createElement("h3",{className:"exam_task_list_item_title",title:le.title},le.title),e().createElement("p",{className:"exam_task_list_item_time"},e().createElement("span",{className:"time-label time-label-left"},le.beginTimeLabel&&le.beginTimeLabel.toString().replace(/-/g,"."))," ~ ",e().createElement("span",{className:"time-label time-label-right"},le.endTimeLabel&&le.endTimeLabel.toString().replace(/-/g,"."))),e().createElement("div",{className:"exam_task_list_item_number_score"},e().createElement("span",{className:"detail_number"},a("myExamTask.exam"),le.makeup_count,a("myExamTask.times")),e().createElement("span",{className:"detail_one"},e().createElement("label",null,a("myExamTask.totalScore")),e().createElement("span",{className:"count-label"},le.total_score||"--"))),e().createElement("div",{className:"exam_task_list_item_number_score"},le.award_score&&le.status!=="absence"&&le.status!=="passed"&&le.status!=="perfect"&&le.status!=="failed"?e().createElement("span",{className:"exam_task_list_item_award"},"".concat(le.award_score).concat(a("common.credit"))):null)),e().createElement("div",{className:"exam_task_list_item_detail"},e().createElement("span",{className:"detail_one"},e().createElement("label",null,a("myExamTask.score")),e().createElement("span",{className:le.status!=="unfinished"?"":"gray"},this.renderExamScore(le))),e().createElement("span",{className:"detail-one more-width"},this.renderOperateButtonType(le),le.show_result&&le.status!=="unfinished"&&le.status!=="absence"&&this.renderHistoryGrades(le))))))),this.state.taskTotal>St.pageSize||!de.hideOnSinglePage?e().createElement("div",{className:"pagination_container"},e().createElement(C.Z,de)):null),e().createElement(Ws.Z,{visible:u,examInfo:P,onOk:this.handleOk,onCancel:this.handleCancel}),e().createElement(Qt.Z,{visible:K,title:a("exam.faceKnowQrCodeTitle"),onCancel:this.handleHiddenFaceQrCode,tip:"exam.faceKnowWxQrCodeTipCustom",option:ee}),e().createElement(ja.Z,(0,A.Z)({},ae,{hideEveryExamGrade:this.hideEveryExamGrade})))}}var zs=E=>({userInfo:E.user,isAdmin:E.user.isAdmin}),$s=(0,y.$j)(zs)((0,f.Z)()(Fs)),zi=r(43358),Xe=r(34041),Ks=r(19788);class Va extends e().Component{constructor(i){super(i);this.handleCancel=()=>{this.props.handleCancel()},this.state={}}render(){var i=this.props,a=i.visible,t=i.planId,s=i.t,n="/pages/messageRedirect/messageRedirect?flag=study&planId=".concat(t),l={flag:"study",scene:"flag=study&planId=".concat(t),tip:s("exam.taskFaceKnowWxQrCodeTip")};return a&&e().createElement(Ks.Z,{visible:a,pageUrl:n,title:s("exam.taskFaceKnowQrCodeTitle"),tipInfo:s("exam.taskFaceKnowQrCodeTip"),WxOption:l,onCancel:this.handleCancel})}}Va.defaultProps={visible:!1,handleCancel:()=>{}};var js=(0,f.Z)()(Va);class Ya extends e().Component{constructor(){super(...arguments);this.handleClick=i=>{var a=this.props,t=a.onClick,s=(0,b.Z)(a,["onClick"]);t({$event:i,props:(0,o.Z)({},s)})},this.renderHeader=()=>{var i=this.props,a=i.prefixCls,t=i.avatar,s=i.name,n=i.showScore,l=i.score,c=i.t,u=i.taskType,P="".concat(a,"__header"),K=t||te();return e().createElement("h1",{className:P},e().createElement("div",{className:"".concat(P,"__left")},e().createElement("img",{className:"".concat(P,"__avatar"),src:K,alt:""}),e().createElement("span",{className:"".concat(P,"__name ").concat(u==="evaluation"?"max-width-name":"")},s),e().createElement("span",{className:"".concat(P,"__infotxt")},c("myExamTask.assigned")),n&&e().createElement("span",{className:"".concat(P,"__score")},l,c("common.credit"))),this.renderTypeBadge())},this.renderTypeBadge=()=>{var i=this.props,a=i.prefixCls,t=i.badgeType,s=t===void 0?"none":t,n=i.t,l=i.taskType,c={1:n("study.onlineTask"),2:n("study.offlineTask"),3:n("study.hybridTask"),4:n("study.newEmployeeTask"),6:n("study.courseTask")};if(l==="evaluation"&&(c={tool:n("evaluation.tool"),self:n("evaluation.self"),superior:n("evaluation.superiors")}),s==="none")return null;var u="".concat(a,"__header__badge ").concat(a,"__header__badge-").concat(s);return e().createElement("div",{className:"".concat(a,"__header__right")},e().createElement("span",{className:u},c[s]))},this.renderBody=()=>{var i=this.props,a=i.prefixCls,t=i.title,s=i.subTile,n="".concat(a,"__body");return e().createElement("div",{className:n},e().createElement("h2",{className:"".concat(n,"__title"),title:t},t),e().createElement("p",{className:"".concat(n,"__subTile")},s))},this.renderFooter=()=>{var i=this.props,a=i.prefixCls,t=i.progress,s=i.renderFooterTip,n=i.qualifiedStatus,l=i.t,c="".concat(a,"__footer"),u=s();return e().createElement("div",{className:c},e().createElement("div",{className:"".concat(c,"__progress")},e().createElement(Fe.Z,{percent:t,status:"normal",size:"small"})),u&&e().createElement("div",{className:"".concat(c,"__footertip")},u),n==="true"&&e().createElement("div",{className:"".concat(c,"__statusTip")},l("study.employeePass")))}}render(){var i=this.props.prefixCls;return e().createElement("div",{className:i,onClick:this.handleClick},e().createElement("div",{className:"".concat(i,"__main")},this.renderHeader(),this.renderBody(),this.renderFooter()))}}Ya.defaultProps={prefixCls:"assessment-taskCard",avatar:te(),name:"",actionName:"\u6307\u6D3E",title:"",subTile:"",progress:0,item:{},showScore:!1,score:0,badgeType:"none",renderFooterTip:()=>null,onClick:()=>{}};var Vs=(0,f.Z)()(Ya),Bt=r(87312);class Ys extends e().Component{constructor(i){var a;super(i);a=this,this.getAssessmentTaskList=()=>{this.setState({isLoading:!0},(0,B.Z)(I().mark(function t(){var s;return I().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,re.WY.get({url:S.ZP.evaluateManage.queryMyEvaluationList(),params:(0,o.Z)((0,o.Z)({},a.state.searchParams),a.state.pageConfig)});case 2:s=l.sent,a.setState({isLoading:!1,tableData:s.data.list,total:s.data.total});case 4:case"end":return l.stop()}},t)})))},this.getRadioList=(0,B.Z)(I().mark(function t(){var s,n,l,c,u,P,K;return I().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return s=a.state.searchParams,ee.next=3,re.WY.get({url:S.ZP.evaluateManage.queryEvaluationCount(),params:{type:s.type}});case 3:if(n=ee.sent,n.data[0]){ee.next=6;break}return ee.abrupt("return");case 6:l=n.data[0],c=l.finished_count,u=l.total_count,P=l.unfinished_count,K=l.overdue_count,a.setState({radioList:[{name:"".concat(a.props.t("common.all"),"(").concat(u,")"),value:""},{name:"".concat(a.props.t("common.unFinish"),"(").concat(P,")"),value:"unfinished"},{name:"".concat(a.props.t("dashboard.completed"),"(").concat(c,")"),value:"finished"},{name:"".concat(a.props.t("marketing.hasOverdue"),"(").concat(K,")"),value:"overdue"}]});case 8:case"end":return ee.stop()}},t)})),this.handleSearch=t=>{this.setState(s=>({searchParams:(0,o.Z)((0,o.Z)({},s.searchParams),{},{keyword:t}),pageConfig:(0,o.Z)((0,o.Z)({},s.pageConfig),{},{page_number:1})}),()=>{this.getAssessmentTaskList(this.props.deptId,t)})},this.handleStatusChange=t=>{this.setState(s=>({searchParams:(0,o.Z)((0,o.Z)({},s.searchParams),{},{status:t.target.value,page_number:1}),pageConfig:(0,o.Z)((0,o.Z)({},s.pageConfig),{},{page_number:1})}),()=>{this.getAssessmentTaskList()})},this.handleSelectType=t=>{this.setState(s=>({searchParams:(0,o.Z)((0,o.Z)({},s.searchParams),{},{type:t}),pageConfig:(0,o.Z)((0,o.Z)({},s.pageConfig),{},{page_number:1})}),()=>{this.getAssessmentTaskList(),this.getRadioList()})},this.pageChange=t=>{this.setState(s=>({pageConfig:(0,o.Z)((0,o.Z)({},s.pageConfig),{},{page_number:t})}),()=>{this.getAssessmentTaskList()})},this.pageSizeChange=(t,s)=>{this.setState({pageConfig:{page_number:1,page_size:s}},()=>{this.getAssessmentTaskList()})},this.renderTestCardTip=(t,s)=>{var n=t.overdue;return!s&&n==="true"?e().createElement("span",{className:"cl-primary",style:{color:"#D64F4F"}},this.props.t("common.overdue")):null},this.handleCardClick=t=>{if(t.props.item.faceRecognition==="on"){this.setState({clickTaskId:t.props.item.id,showFaceQrCode:!0});return}(0,N.eJ)({url:"/talentedDevelopment/evaluationMenu/myTestTask/trainingTaskDetail?".concat(g.stringify({id:t.props.item.id,fromPage:"myTestTask",type:t.props.item.category}))})},this.renderList=()=>e().createElement("div",{className:"list_box"},this.state.tableData.map(t=>{var s=t.finish_promote==="false"&&t.complete_status===1||t.finish_promote==="true"&&t.qualified_status==="true",n=s?"true":"false";return t.category==="superior"&&(n="false"),e().createElement(Vs,{key:t.id+t.category,avatar:t.create_user_avatar,name:t.appoint_user_name,title:t.title,subTile:t.term_type==="permanent"?this.props.t("questionn.investigateDetailPermanent"):"".concat((0,Te.p6)(t.begin_time)," ~ ").concat((0,Te.p6)(t.end_time)),progress:t.process,onClick:this.handleCardClick,item:(0,o.Z)({},t),showScore:!1,badgeType:t.category,taskType:"evaluation",qualifiedStatus:n,renderFooterTip:()=>this.renderTestCardTip(t,s)})})),this.state={searchParams:{status:"",keyword:"",type:"all"},tableData:[],total:0,isLoading:!1,pageConfig:{page_number:1,page_size:20},clickTaskId:"",showFaceQrCode:"",radioList:[],selectOption:[{label:i.t("marketing.allGraphic"),value:"all"},{label:i.t("evaluation.tool"),value:"tool"},{label:i.t("evaluation.self"),value:"self"},{label:i.t("evaluation.superiors"),value:"superior"}]}}componentDidMount(){this.getAssessmentTaskList(),this.getRadioList()}render(){var i=this.props.t,a=this.state,t=a.isLoading,s=a.tableData,n=a.selectOption,l=a.searchParams,c=a.total;return e().createElement("div",{className:"my_assessment_task"},e().createElement("div",{className:"search-box"},e().createElement(Xe.Z,{value:l.type,className:"search-select",onChange:this.handleSelectType},n.map((u,P)=>e().createElement(Xe.Z.Option,{key:P.toString(),value:u.value},u.label))),e().createElement("div",{className:"search-right-box"},e().createElement(p.ZP.Group,{size:"default",defaultValue:this.state.searchParams.status,onChange:this.handleStatusChange},this.state.radioList.map(u=>e().createElement(p.ZP.Button,{key:u.value,value:u.value},u.name))),e().createElement("div",{className:"search-input"},e().createElement(ze.Z,{onSearch:this.handleSearch,prefixCls:"top_operate_search",placeholder:i("searchInputPlaceholder.task")})))),e().createElement("div",{className:"my_assessment_task_container"},e().createElement("div",{className:"my_assessment_task_list"},e().createElement(Ve.Z,{size:"large",spinning:t},!s||!s.length?e().createElement("div",{className:"no_data_box"},e().createElement(Bt.Z,{className:"no_task_tip"})):this.renderList()))),e().createElement("div",{className:"pagination_container"},e().createElement(C.Z,(0,A.Z)({},S.XE.INITIAL_PAGINATION,{total:c,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange,current:this.state.pageConfig.page_number}))),e().createElement(js,{planId:this.state.clickTaskId,visible:this.state.showFaceQrCode,handleCancel:this.hiddenFaceQrCode}))}}var Gs=E=>({userInfo:E.user}),Qs=(0,y.$j)(Gs)((0,f.Z)()(Ys));function Hs(E){var i=E.access_token,a=E.keyword,t=E.status,s=E.page_size,n=E.page_number,l=E.id,c=S.ZP.tutor.coachingTaskList(l);return re.WY.get({url:c,params:{access_token:i,keyword:a,status:t,page_size:s,page_number:n}})}class Js extends e().Component{constructor(i){super(i);this.getTaskList=()=>{var a=this.props.userInfo.id,t=this.state.param,s={keyword:t.keyword,status:t.status,page_size:t.page_size,page_number:t.page_number};this.setState({isLoading:!0}),Hs((0,o.Z)((0,o.Z)({},s),{},{id:a})).then(n=>{this.setState({isLoading:!1,taskList:n.data.list,param:(0,o.Z)((0,o.Z)({},t),{},{taskTotal:n.data.total})})})},this.handleSearch=a=>{var t=this.state.param;this.setState({param:(0,o.Z)((0,o.Z)({},t),{},{keyword:a})},()=>{this.getTaskList(this.props.deptId,a)})},this.handleStatusChange=a=>{var t=this.state.param,s=a.target.value;this.setState({param:(0,o.Z)((0,o.Z)({},t),{},{status:s})},()=>{this.getTaskList()})},this.pageChange=(a,t)=>{var s=this.state.param;this.setState({param:(0,o.Z)((0,o.Z)({},s),{},{page_size:t,page_number:a})},()=>{this.getTaskList()})},this.showDetail=a=>{(0,N.eJ)({url:"/coachingTask/detail?tutorialsId=".concat(a.tutorials_id,"&title=").concat(a.title,"&planId=").concat(a.plan_id,"&status=finished")})},this.toCompleteCoach=a=>{(0,N.eJ)({url:"/coachingTask/detail?tutorialsId=".concat(a.tutorials_id,"&title=").concat(a.title,"&planId=").concat(a.plan_id)})},this.state={taskList:[],param:{status:"unfinished",taskTotal:0,keyword:"",page_size:20,page_number:1},isLoading:!1}}componentDidMount(){this.getTaskList()}render(){var i=this.props.t,a=this.state,t=a.isLoading,s=a.taskList,n=a.param,l=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:n.taskTotal,onChange:this.pageChange,current:n.page_number,pageSize:n.page_size});return e().createElement("div",{className:"exam_task coach_task"},e().createElement("div",{className:"exam_task_container"},e().createElement("div",{className:"top_operate"},e().createElement(p.ZP.Group,{size:"default",defaultValue:n.status,onChange:this.handleStatusChange},e().createElement(p.ZP.Button,{value:"unfinished"},i("common.unFinish")),e().createElement(p.ZP.Button,{value:"finished"},i("questionn.completed")))),e().createElement("div",{className:"exam_task_list_container"},e().createElement("div",{className:"exam_task_list coaching_task_list"},t?e().createElement(Ve.Z,{size:"large"}):null,s.length===0?e().createElement(Bt.Z,{className:"no_task_tip"}):null,s.map(c=>e().createElement("div",{key:c.tutorials_id,className:"exam_task_list_item coach_task_item card-required"},e().createElement("div",{className:"exam_task_list_item_card small-card"},e().createElement("h3",{className:"exam_task_list_item_title",title:c.tutorials_title},c.tutorials_title),e().createElement("p",{className:"exam_task_list_item_time"},e().createElement("span",{className:"time-label time-label-left coach-task-label"},i("course.from"),"\u300A",c.title,"\u300B"))),e().createElement("div",{className:"exam_task_list_item_detail"},e().createElement("span",{className:"detail_one"},e().createElement("span",null,n.status==="unfinished"?"".concat(c.train_count).concat(i("common.people")).concat(i("tutorial.waitingTutoring")):"".concat(c.train_count).concat(i("common.people")).concat(i("tutorial.hasBeenTutoring")))),e().createElement("span",{className:"detail-one more-width"},n.status==="unfinished"?e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.toCompleteCoach(c)},i("tutorial.toComplete")):e().createElement(M.Z,{type:"link",size:"small",onClick:()=>this.showDetail(c)},i("study.lookStudyRecord")))))))),n.taskTotal>n.pageSize||!l.hideOnSinglePage?e().createElement("div",{className:"pagination_container"},e().createElement(C.Z,l)):null))}}var Xs=E=>({userInfo:E.user}),qs=(0,y.$j)(Xs)((0,f.Z)()(Js)),$i=r(14965),en=r(11448),tn=r(78138),fa=r.n(tn),Ga=r(57254),Ki=r(30887),Ht=r(99210),ji=r(59250),an=r(13013),at=r(36202),sn=r(49324),Jt=r(66663),nn=r(50599),rn=E=>{var i=E.user;return{user:i}};function Qa(E){var i,a=E.prefixCls,t=E.list,s=t===void 0?[]:t,n=E.paginationParams,l=E.loading,c=E.t,u=E.toolBarRender,P=E.headerTitle,K=E.user,ae=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),n),ee=(0,R.useRef)(),de=(0,nn.M)({t:c});de.push({title:c("common.operate"),width:110,key:"operate",fixed:"right",render:(Ne,we)=>pe(we)});var _e=(0,R.useState)(!1),Ie=(0,H.Z)(_e,2),Ue=Ie[0],ke=Ie[1];function De(Ne){E.onTableChange&&E.onTableChange(Ne)}function pe(Ne){return ee.current=Ne,e().createElement("div",{className:"cl-table__cell-action"},e().createElement("span",{className:"cl-pointer",onClick:()=>{le({type:"detail",record:Ne,disable:!1})}},c("common.viewDetails")),e().createElement("span",{className:"cl-pointer-divide"}),e().createElement(an.Z,{overlay:Ee(Ne)},e().createElement("a",{className:"cl-pointer"},c("common.more")," ",e().createElement(Ga.Z,null))))}function Ee(Ne){var we=E.t,it=Ne.is_has_task,ft=Ne.directors;ee.current=Ne;var pt=it||it==="true",Zt=ft.some(ut=>ut.id===K.id),Ct=[{type:"execute",name:we("common.exec"),disable:pt},{type:"execute_list",name:we("trainingPlan.execList"),disable:!pt},{type:"edit",name:we("common.edit"),disable:!Zt}];return e().createElement(Ht.Z,null,Ct.map(ut=>{var Ce=ut.type,Oe=ut.disable,nt=ut.name;switch(Ce){case"edit":return e().createElement(Ht.Z.Item,{key:Ce},e().createElement("p",{className:"cl-dropdown-menuitem ".concat(Oe?"cl-disabled":""),onClick:()=>{le({type:Ce,record:Ne,disable:Oe})}},nt));case"execute_list":return e().createElement(Ht.Z.Item,{key:Ce},e().createElement("p",{className:"cl-dropdown-menuitem ".concat(Oe?"cl-disabled":""),onClick:()=>{le({type:Ce,record:Ne,disable:Oe})}},nt));case"execute":return e().createElement(Ht.Z.Item,{key:Ce},e().createElement("p",{className:"cl-dropdown-menuitem ".concat(Oe?"cl-disabled":""),onClick:()=>{le({type:Ce,record:Ne,disable:Oe})}},nt));case"detail":return e().createElement(Ht.Z.Item,{key:Ce},e().createElement("p",{className:"cl-dropdown-menuitem ".concat(Oe?"cl-disabled":""),onClick:()=>{le({type:Ce,record:Ne,disable:Oe})}},nt));default:return null}}))}function le(Ne){var we=Ne.type,it=Ne.record,ft=Ne.disable;if(!ft){var pt=it.plan_id,Zt=it.type,Ct=it.workflow_instance_id;if(ee.current=it,we==="execute")(0,N.eJ)({url:"/personal/training/learn/management/add?".concat(g.stringify({type:"relation_plan",plan_id:pt,from:"personal"}))});else if(we==="execute_list")(0,N.eJ)({url:"/personal/training/plan/trainPlan/detail?".concat(g.stringify({bizType:Jt.B.EXEC,instanceId:Ct,businessId:pt,from:"personal"}))});else if(we==="edit")ke(!0);else if(we==="detail"){var ut=Jt.B.ANNUAL_PLAN;Zt==="month"?ut=Jt.B.MONTH_PLAN:Zt==="temp"&&(ut=Jt.B.TEMP_PLAN),(0,N.eJ)({url:"/personal/training/plan/trainPlan/detail?".concat(g.stringify({bizType:ut,instanceId:Ct,businessId:pt,from:"personal"}))})}}}function Ke(Ne,we){E.onPaginationChange&&E.onPaginationChange({pageNumber:Ne,pageSize:we})}function qe(){E.onRefreshList&&E.onRefreshList()}var rt={temp:Jt.B.TEMP_PLAN,month:Jt.B.MONTH_PLAN};return e().createElement("section",{className:a},e().createElement(at.f,{columns:de,dataSource:s,rowKey:Ne=>Ne.operation_id+Ne.user_id,pagination:!1,loading:l,onChange:De,toolBarRender:u,headerTitle:P,scroll:{x:"max-content"},tableUUID:"df2282b9-06e4-463b-907c-7c07f201ea15"}),e().createElement("div",{className:"".concat(a,"-pagination-container")},e().createElement(C.Z,(0,A.Z)({},ae,{onChange:Ke,className:"".concat(a,"-pagination")}))),Ue&&e().createElement(sn.Z,{onCancel:()=>ke(!1),visible:Ue,source:"is_my_training",plan_id:ee.current.plan_id,onOk:qe,onSave:qe,biz_plan_type:((i=ee.current)===null||i===void 0?void 0:i.type)&&rt[ee.current.type]}))}Qa.defaultProps={prefixCls:"trainingPlan-table"};var ln=(0,y.$j)(rn,null)((0,f.Z)()(Qa)),on=r(57482),cn=r(64303);function Ha(E){var i=E.isActive,a={training_year:new Date().getFullYear(),training_month:"",status:"published",department_ids:"",is_my:"",query_param:"",query_type:"my",page_num:1,page_size:20},t=E.prefixCls,s=(0,R.useState)({list:[]}),n=(0,H.Z)(s,2),l=n[0],c=n[1],u=(0,R.useState)(new Date().getFullYear()),P=(0,H.Z)(u,2),K=P[0],ae=P[1],ee=(0,R.useState)(""),de=(0,H.Z)(ee,2),_e=de[0],Ie=de[1],Ue=(0,R.useState)(""),ke=(0,H.Z)(Ue,2),De=ke[0],pe=ke[1],Ee=(0,R.useState)(1),le=(0,H.Z)(Ee,2),Ke=le[0],qe=le[1],rt=(0,R.useState)(20),Ne=(0,H.Z)(rt,2),we=Ne[0],it=Ne[1],ft=(0,R.useState)(!1),pt=(0,H.Z)(ft,2),Zt=pt[0],Ct=pt[1];function ut(ht){pe(ht),ht===De&&Nt({training_year:K,training_month:_e,query_param:De,page_num:Ke,page_size:we})}function Ce(ht){var Kt=ht.pageNumber,Na=ht.pageSize;qe(Kt),it(Na)}function Oe(ht){Ie(ht)}function nt(ht,Kt){ae(Kt)}(0,R.useEffect)(()=>{i&&Nt({training_year:K,training_month:_e,query_param:De,page_num:Ke,page_size:we})},[K,_e,De,Ke,we,i]);function Nt(ht){Ct(!0),(0,on.qX)((0,o.Z)((0,o.Z)({},a),ht)).then(Kt=>{var Na=Kt.data.data;c(Na)}).finally(()=>{Ct(!1)})}function Lt(){return e().createElement(ze.Z,{onSearch:ut,width:"272px",placeholder:"".concat(E.t("common.pleaseEnter")).concat(E.t("trainingPlan.name").toLowerCase())})}function Za(){return e().createElement("div",{className:"data-select"},e().createElement(en.Z,{defaultValue:fa()(K,"YYYY"),allowClear:!1,picker:"year",suffixIcon:e().createElement(Ga.Z,null),onChange:nt,getPopupContainer:()=>document.querySelector(".trainingPlan-content")}),e().createElement(cn.Z,{onChange:Oe,getPopupContainer:()=>document.querySelector(".trainingPlan-content")}))}return e().createElement("div",{className:"".concat(t)},e().createElement("div",{className:"".concat(t,"-content")},e().createElement(ln,{paginationParams:{total:l.total||0,current:Ke,pageSize:we},loading:{spinning:Zt,size:"large"},list:l.list,onPaginationChange:Ce,headerTitle:Za(),toolBarRender:Lt,onRefreshList:()=>{Nt({training_year:K,training_month:_e,query_param:De,page_num:Ke,page_size:we})}})))}Ha.defaultProps={prefixCls:"trainingPlan"};var un=(0,f.Z)()(Ha),Vi=r(84717),Ja=r(31916),Xt=h.Z.TabPane;class dn extends e().Component{constructor(){super(...arguments);this.state={defaultKey:"0",blackList:{evaluateTask:(0,N.eY)("PERSONAL_PROFILE_EVALUATETASK")},examType:"old"},this.handleQueryToJump=()=>{var i=g.parse(ue.m8.location.search),a=i.tab,t=this.props.isOpenTutorSystem,s="";switch(a){case"myProjectTask":s="0";break;case"myObligatoryTask":s="1";break;case"myExamTask":s="2";break;case"myAssessment":s="3";break;case"myCoachingTask":t?s="4":s="1";break;case"trainingPlan":s="5";break;default:s="0"}this.setState({defaultKey:s})}}componentDidMount(){this.funGetEnterpriseExamType(),this.handleQueryToJump(),this.props.dispatch({type:"publicVariable/getHasMenusPermissions",payload:{flag:"TutorSystem"}})}componentDidUpdate(i){if(i.resourceLibrary.refresh!==this.props.resourceLibrary.refresh){var a=g.parse(ue.m8.location.search),t=a.tab;t&&this.handleQueryToJump()}}funGetEnterpriseExamType(){var i=this;return(0,B.Z)(I().mark(function a(){var t;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Ja.uH)();case 2:t=n.sent,i.setState({examType:t});case 4:case"end":return n.stop()}},a)}))()}render(){var i=this.props,a=i.t,t=i.isOpenTutorSystem,s=i.qyShield,n=this.state,l=n.defaultKey,c=n.blackList,u=n.examType;return e().createElement(e().Fragment,null,e().createElement(h.Z,{defaultActiveKey:"0",activeKey:l,className:"center-user-tab",onChange:P=>this.setState({defaultKey:P})},e().createElement(Xt,{tab:a("trainingProject.trainProject"),key:"0",className:"center-user-tab-left"},e().createElement(aa,null)),e().createElement(Xt,{tab:a("personal.studyTask"),key:"1"},e().createElement(Ge,null)),e().createElement(Xt,{tab:a("personal.examTask"),key:"2"},u==="new"?e().createElement(Us,null):e().createElement($s,null)),c.evaluateTask&&s==="false"&&e().createElement(Xt,{tab:a("leftMenuLists.evaluateTask"),key:"3"},e().createElement(Qs,null)),t?e().createElement(Xt,{tab:a("leftMenuLists.coachingTask"),key:"4"},e().createElement(qs,null)):null,s==="false"&&e().createElement(Xt,{tab:a("trainingPlan.trainingPlan"),key:"5"},e().createElement(un,{isActive:l==="5"}))))}}var mn=E=>({resourceLibrary:E.resourceLibrary,qyShield:E.user.qyShield,isOpenTutorSystem:E.publicVariable.isOpenTutorSystem}),_a=(0,y.$j)(mn)((0,f.Z)()(dn)),pn=r(77116);class hn extends e().Component{render(){return e().createElement("div",{className:"my-course"},e().createElement(pn.Z,{from:"myCourse"}))}}var gn=(0,f.Z)()(hn);class vn extends e().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var i=this.props.t,a=[{title:i("personal.taskName"),dataIndex:"planName",key:"planName",width:80,fixed:"left"},{title:i("personal.startTime"),dataIndex:"userTrainBeginTime",key:"userTrainBeginTime",width:90,render:t=>t||"--"},{title:i("personal.taskRange"),width:90,dataIndex:"taskTerm",key:"taskTerm"},{title:i("personal.taskType"),width:80,dataIndex:"taskType",key:"taskType"},{title:i("personal.progressAndScore"),width:60,dataIndex:"progressOrScore",key:"progressOrScore"},{title:i("personal.status"),width:60,dataIndex:"statusName",key:"statusName"},{title:i("personal.getCerti"),width:60,dataIndex:"certificateName",key:"certificateName"},{title:i("personal.getScore"),width:60,dataIndex:"studyScoreStr",key:"studyScoreStr"}];return a}}render(){var i=this.props,a=i.isLoading,t=i.list,s=i.headerTitle,n=i.toolBarRender,l=this.getTableColumn();return e().createElement(at.f,{loading:a,dataSource:t,columns:l,scroll:{y:"100%",x:"max-content"},rowKey:c=>c.planId,pagination:!1,headerTitle:s,toolBarRender:n,tableUUID:"c40f443e-c723-4ab1-8921-2f5433137f5f"})}}var fn=(0,f.Z)()(vn),_n=r(11092),yn=r.n(_n);class En extends e().Component{constructor(i){super(i);this.renderStatistics=()=>{var a=this.props.statistics;return e().createElement("div",{className:"task-file-statistics"},a.map((t,s)=>e().createElement("div",{key:s,className:"task-file-statistics-item"},t.label,e().createElement("span",{className:"num__tip"},t.value),t.unit)))},this.el=document.createElement("div")}componentDidMount(){var i=this.props.parentEl;document.getElementById(i).appendChild(this.el)}render(){return yn().createPortal(this.renderStatistics(),this.el)}}var Oa=En,qt=r(87722),Xa=r(97593),Tt={pageNumber:1,pageSize:20};class Cn extends e().Component{constructor(i){super(i);this.onTaskTypeChange=a=>{Tt.pageNumber=1,this.setState({trainType:a},this.getTaskFile)},this.getTaskFile=()=>{var a=this.props.t,t=S.ZP.Personal.getTaskFile(),s=this.state,n=s.beginTime,l=s.endTime,c=s.trainType,u={beginTime:n,endTime:l,userId:"",pageNumber:Tt.pageNumber,pageSize:Tt.pageSize,trainType:c};this.setState({isLoading:!0}),re.WY.get({url:t,params:u}).then(P=>{if(P.data.code===0){var K=P.data.data.userInfo,ae=K.completionRate,ee=K.overdueRate,de=K.studyScore,_e=K.certificateCount,Ie=[{label:a("personal.taskFinishRate"),value:ae,unit:"%"},{label:a("personal.taskOverdueRate"),value:ee,unit:"%"},{label:a("personal.totalScore"),value:de,unit:""},{label:a("personal.totalCreti"),value:_e,unit:""}];this.setState({statistics:Ie,isLoading:!1,list:P.data.data.detailList.list,total:P.data.data.detailList.total})}})},this.handleTimeChange=a=>{var t=a.dateStrings;Tt.pageNumber=1,this.setState({beginTime:t[0],endTime:t[1]},this.getTaskFile)},this.pageChange=a=>{Tt.pageNumber=a,this.getTaskFile()},this.pageSizeChange=(a,t)=>{Tt.pageSize=t,this.getTaskFile()},this.handleExport=()=>{var a=this.props.t,t=this;D.Z.confirm({title:a("common.tip"),content:a("personal.exportFileTip"),onOk:()=>{var s="",n=this.state,l=n.beginTime,c=n.endTime,u=n.trainType,P={beginTime:l,endTime:c,trainType:u};Object.keys(P).forEach(ae=>{s+="".concat(ae,"=").concat(P[ae],"&")});var K="?".concat(s);(0,Xa.N)({page:"personalTaskReportInfo",props:t.props,query:K})}})},this.headerFilter=()=>{var a=this.state.trainType,t=this.props.t,s=[{label:t("common.all"),value:"0"},{label:t("personal.neo"),value:"1"},{label:t("personal.studyTask"),value:"2"},{label:t("personal.electiveTask"),value:"3"},{label:t("personal.examTask"),value:"4"}];return e().createElement("div",{className:"task-file-filter"},e().createElement("div",{className:"task-file-filter-item"},e().createElement(Xe.Z,{defaultValue:a,onChange:this.onTaskTypeChange,className:"cl-search-normal-width"},s.map(n=>e().createElement(Xe.Z.Option,{value:n.value,key:n.value},n.label)))),e().createElement("div",{className:"task-file-filter-item"},e().createElement(qt.Z,{className:"cl-search-normal-width",showTime:!1,format:"YYYY-MM-DD",onCustomChange:this.handleTimeChange})))},this.toolBarRender=()=>e().createElement("div",{className:"task-file-filter-item-between"},e().createElement("div",{id:"employee-file-tab-statistics"})),this.headerTitle=()=>{var a=this.props.t;return e().createElement(M.Z,{icon:e().createElement(tt.Z,null),type:"primary",onClick:this.handleExport},a("personal.exportTasks"))},this.state={statistics:[],list:[],total:[],beginTime:"",endTime:"",trainType:"0",isLoading:!1}}componentDidMount(){this.getTaskFile()}componentWillUnmount(){Tt.pageNumber=1,Tt.pageSize=20}render(){var i=this.state,a=i.list,t=i.total,s=i.statistics,n=i.isLoading,l=this.props.parentEl,c=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:Tt.pageNumber,total:+t,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return e().createElement("div",{className:"task-file"},l?e().createElement(Oa,{statistics:s,parentEl:l}):null,this.headerFilter(),e().createElement("div",{className:"task-file-list"},e().createElement("div",{className:"task-file-list-table"},e().createElement(fn,{list:a,isLoading:n,headerTitle:this.headerTitle(),toolBarRender:this.toolBarRender})),t>Tt.pageSize||!c.hideOnSinglePage?e().createElement("div",{className:"task-file-list-pagination"},e().createElement(C.Z,c)):null))}}var bn=(0,y.$j)()((0,f.Z)()(Cn)),Ra=r(31457);class Sn extends e().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var i=this.props.t,a=[{title:i("personal.courseName"),dataIndex:"course_name",key:"course_name"},{title:i("common.updateTime"),dataIndex:"update_time",key:"update_time",width:164,render:t=>t?(0,Te.p6)(t,"yyyy.MM.dd hh:mm"):"--"},{title:i("common.progress"),width:120,dataIndex:"progress",key:"progress",render:t=>e().createElement(Fe.Z,{percent:+t,size:"small",status:t>=100?"success":"normal",strokeColor:t>=100?"#58D28B":""})},{title:i("personal.status"),width:110,dataIndex:"status",key:"status",render:t=>i(t==="studying"?"dashboard.onGoing":"common.completed")},{title:i("personal.getScore"),width:110,dataIndex:"score",key:"score"}];return a}}render(){var i=this.props,a=i.isLoading,t=i.list,s=i.headerTitle,n=i.toolBarRender,l=this.getTableColumn();return e().createElement(at.f,{loading:a,dataSource:t,columns:l,rowKey:c=>c.course_id,pagination:!1,headerTitle:s,toolBarRender:n,tableUUID:"9876b1dc-6095-4ad7-a484-01493f434b0e"})}}var Tn=(0,f.Z)()(Sn),Dt={pageNumber:1,pageSize:20};class Pn extends e().Component{constructor(i){super(i);this.getSelfStudy=()=>{var a=this.props.userInfo.id,t=S.ZP.Personal.getSelfStudy(),s=this.state.status,n=this.props.t,l={status:s,dimission_status:"incumbency",user_id:a,page_number:Dt.pageNumber,page_size:Dt.pageSize};this.setState({isLoading:!0}),re.WY.get({url:t,params:l}).then(c=>{var u=c.data.user,P=u.finished_count,K=u.studying_count,ae=u.score,ee=[{label:n("common.completed"),value:P,unit:""},{label:n("dashboard.onGoing"),value:K,unit:""},{label:n("personal.totalScore"),value:ae,unit:""}];this.setState({statistics:ee,isLoading:!1,list:c.data.details.list,total:c.data.details.total})})},this.onTaskStatusChange=a=>{Dt.pageNumber=1,this.setState({status:a},this.getSelfStudy)},this.pageChange=a=>{Dt.pageNumber=a,this.getSelfStudy()},this.pageSizeChange=(a,t)=>{Dt.pageSize=t,this.getSelfStudy()},this.export=()=>{var a=this.props.t;D.Z.confirm({title:a("common.tip"),content:a("personal.exportSelfStudyFile"),onOk:()=>{var t=S.ZP.Personal.exportSelfStudyFile(),s=this.state.status,n=this.props.userInfo.id;t+="?access_token=".concat(window.localStorage.getItem("token"),"&status=").concat(s,"&user_id=").concat(n,"&dimission_status=incumbency"),re.WY.get({url:t}).then(l=>{l.data.code===0&&((0,Ra.Pp)(this.props),k.default.success(this.props.t("study.compoundSucceed")))})}})},this.headerTitle=()=>{var a=this.props.t;return e().createElement(M.Z,{icon:e().createElement(tt.Z,null),type:"primary",onClick:this.export},a("personal.exportElectiveTasks"))},this.toolBarRender=()=>e().createElement("div",{className:"self-study-file-filter-between"},e().createElement("div",{id:"employee-self-tab-statistics"})),this.state={statistics:[],list:[],total:[],status:"",isLoading:!1}}componentDidMount(){this.getSelfStudy()}render(){var i=this.state,a=i.list,t=i.total,s=i.statistics,n=i.status,l=i.isLoading,c=this.props,u=c.parentEl,P=c.t,K=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:Dt.pageNumber,total:+t,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange}),ae=[{label:P("common.all"),value:""},{label:P("dashboard.onGoing"),value:"studying"},{label:P("common.completed"),value:"finished"}];return e().createElement("div",{className:"self-study-file"},u?e().createElement(Oa,{statistics:s,parentEl:u}):null,e().createElement("div",{className:"self-study-file-filter"},e().createElement("div",{className:"self-study-file-filter-item"},e().createElement(Xe.Z,{defaultValue:n,onChange:this.onTaskStatusChange,className:"cl-search-normal-width"},ae.map(ee=>e().createElement(Xe.Z.Option,{value:ee.value,key:ee.value},ee.label))))),e().createElement("div",{className:"self-study-file-list"},e().createElement("div",{className:"task-file-list-table"},e().createElement(Tn,{list:a,isLoading:l,headerTitle:this.headerTitle(),toolBarRender:this.toolBarRender})),t>Dt.pageSize||!K.hideOnSinglePage?e().createElement("div",{className:"self-study-file-list-pagination"},e().createElement(C.Z,K)):null))}componentWillUnmount(){Dt.pageNumber=1,Dt.pageSize=20}}var In=E=>({userInfo:E.user}),Zn=(0,y.$j)(In)((0,f.Z)()(Pn));class Nn extends e().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var i=this.props.t,a=[{title:i("employeeSummary.certificationName"),dataIndex:"qualification_name",key:"qualification_name"},{title:i("common.progress"),dataIndex:"progress",key:"progress",width:200,render:t=>e().createElement(Fe.Z,{percent:t,size:"small"})},{title:i("common.status"),width:80,dataIndex:"status",key:"status",render:t=>i(t==="finished"?"common.completed":t==="studying"?"common.ongoing":"common.pending")},{title:i("common.certificate"),width:80,dataIndex:"is_get_certificate",key:"is_get_certificate",render:t=>i(t==="true"?"employeeSummary.yes":"employeeSummary.no")},{title:i("common.operate"),width:180,key:"operate",render:t=>e().createElement("div",{className:"cl-table__cell-action"},e().createElement("a",{className:"".concat(t.study_count>0?"cl-pointer":"cl-pointer cl-disabled"),onClick:()=>this.props.onShowStudyRecord(t)},i("common.studyRecord")),e().createElement("span",{className:"cl-pointer-divide"}),e().createElement("a",{className:"".concat(t.exam_count>0&&t.exam_join_count>0?"cl-pointer":"cl-disabled"),onClick:()=>this.linkToExam(t)},i("common.examRecord")))}];return a},this.linkToExam=i=>{i.exam_count>0&&i.exam_join_count>0&&this.props.linkToExam(i)}}render(){var i=this.props,a=i.isLoading,t=i.list,s=i.headerTitle,n=i.toolBarRender,l=this.getTableColumn();return e().createElement(at.f,{loading:a,dataSource:t,columns:l,rowKey:c=>c.course_id,pagination:!1,headerTitle:s,toolBarRender:n,tableUUID:"3edbd8fc-f0b6-4c02-bca7-8c2cf9dd0aba"})}}var Ln=(0,f.Z)()(Nn),xn=r(98417),Mt={pageNumber:1,pageSize:20};class Dn extends e().Component{constructor(i){super(i);this.onTaskStatusChange=a=>{Mt.pageNumber=1,this.setState({status:a},this.getAuthList)},this.getAuthList=()=>{var a=S.ZP.Summary.getCertificateArchivesUserDetailList(),t=this.state.status,s=this.props.t,n=this.props.userInfo.id,l={client_flag:"student",status:t,dimission_status:"incumbency",user_id:n,page_number:Mt.pageNumber,page_size:Mt.pageSize};this.setState({isLoading:!0}),re.WY.get({url:a,params:l}).then(c=>{var u=c.data.user,P=u.studying_count,K=u.approving_count,ae=u.finished_count,ee=u.certificate_count,de=[{label:s("common.ongoing"),value:P,unit:""},{label:s("common.pending"),value:K,unit:""},{label:s("common.completed"),value:ae,unit:""},{label:s("common.certificate"),value:ee,unit:""}];this.setState({statistics:de,isLoading:!1,list:c.data.details.list,total:c.data.details.total})})},this.pageChange=a=>{Mt.pageNumber=a,this.getAuthList()},this.pageSizeChange=(a,t)=>{Mt.pageSize=t,this.getAuthList()},this.handleExport=()=>{var a=this,t=this.props.t,s=this.props.userInfo.id,n="",l=this.state.status,c={status:l,dimission_status:"incumbency",user_id:s};D.Z.confirm({title:t("common.tip"),content:t("personal.exportMyAuthFile"),onOk(){Object.keys(c).forEach(P=>{n+="".concat(P,"=").concat(c[P],"&")});var u="".concat(S.ZP.Summary.exportCertificateArchivesUserDetailList(),"?").concat(n);re.WY.get({url:u}).then(P=>{P.data.code===0&&((0,Ra.Pp)(a.props),k.default.success(a.props.t("study.compoundSucceed")))})}})},this.handleHiddenTaskStudyRecord=()=>{var a=this.state.taskStudyRecordConfig;a.visible=!1,this.setState({taskStudyRecordConfig:a})},this.handleShowStudyRecord=a=>{var t=this.state.taskStudyRecordConfig;t.visible=!0,t.taskId=a.qualification_id,this.setState({taskStudyRecordConfig:t})},this.linkToExam=a=>{(0,N.eJ)({url:"/training/examination/result/personal?".concat(g.stringify({userId:a.user_id,planId:a.qualification_id,pageFrom:"examMonitor",client_flag:"student"}))})},this.toolBarRender=()=>e().createElement("div",{className:"auth-file-filter-between"},e().createElement("div",{id:"employee-auth-tab-statistics"})),this.headerTitle=()=>{var a=this.props.t;return e().createElement(M.Z,{icon:e().createElement(tt.Z,null),type:"primary",onClick:this.handleExport},a("common.exportData"))},this.state={statistics:[],list:[],total:[],status:"all",isLoading:!1,taskStudyRecordConfig:{visible:!1,userId:i.userInfo.id,taskId:""}}}componentDidMount(){this.getAuthList()}componentWillUnmount(){Mt.pageNumber=1,Mt.pageSize=20}render(){var i=this.state,a=i.list,t=i.total,s=i.statistics,n=i.status,l=i.isLoading,c=i.taskStudyRecordConfig,u=this.props,P=u.parentEl,K=u.t,ae=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:Mt.pageNumber,total:+t,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange}),ee=[{label:K("common.all"),value:"all"},{label:K("dashboard.onGoing"),value:"studying"},{label:K("common.pending"),value:"approving"},{label:K("common.completed"),value:"finished"}];return e().createElement("div",{className:"auth-file"},P?e().createElement(Oa,{statistics:s,parentEl:P}):null,e().createElement("div",{className:"auth-file-filter"},e().createElement("div",{className:"auth-file-filter-item"},e().createElement(Xe.Z,{defaultValue:n,onChange:this.onTaskStatusChange,className:"cl-search-normal-width"},ee.map(de=>e().createElement(Xe.Z.Option,{value:de.value,key:de.value},de.label))))),e().createElement("div",{className:"auth-file-list"},e().createElement("div",{className:"task-file-list-table"},e().createElement(Ln,{list:a,isLoading:l,onShowStudyRecord:this.handleShowStudyRecord,linkToExam:this.linkToExam,headerTitle:this.headerTitle(),toolBarRender:this.toolBarRender})),t>Mt.pageSize||!ae.hideOnSinglePage?e().createElement("div",{className:"auth-file-list-pagination"},e().createElement(C.Z,ae)):null),e().createElement(xn.Z,(0,A.Z)({},c,{onCancel:this.handleHiddenTaskStudyRecord})))}}var Mn=E=>({userInfo:E.user}),On=(0,y.$j)(Mn)((0,f.Z)()(Dn));class Rn extends e().Component{constructor(){super(...arguments);this.getTableColumn=()=>{var i=this.props.t,a=[{title:i("personal.creditBehavior"),dataIndex:"eventMsg",key:"eventMsg"},{title:i("personal.timeLabel"),dataIndex:"createTime",key:"createTime",width:164,render:t=>t?(0,Te.p6)(t,"yyyy.MM.dd hh:mm"):"--"},{title:i("common.credit"),width:110,dataIndex:"score",key:"score",render:(t,s)=>e().createElement("span",{className:"score-label ".concat(t>0?"green":"red")},t>0?"+".concat(s.scoreStr):s.scoreStr)}];return a}}render(){var i=this.props,a=i.isLoading,t=i.list,s=i.headerTitle,n=i.toolBarRender,l=this.getTableColumn();return e().createElement(at.f,{loading:a,dataSource:t,columns:l,rowKey:c=>c.id,pagination:!1,headerTitle:s,toolBarRender:n,tableUUID:"ca927161-bdd7-4d58-acc0-efedc9b316d3"})}}var kn=(0,f.Z)()(Rn),yt={pageNumber:1,pageSize:20};class wn extends e().Component{constructor(i){super(i);this.getMyScoreSummary=()=>{var a=S.ZP.Personal.getMyScoreSummary();re.WY.get({url:a}).then(t=>{var s=t.data,n=s.totalScore,l=s.todayScore;this.setState({statistics:{totalScore:n,todayScore:l}})})},this.getScoreRecord=()=>{var a=S.ZP.Personal.getScoreRecord(),t=this.state,s=t.startTime,n=t.endTime,l={startTime:s,endTime:n,excludeSelf:!1,pageNumber:yt.pageNumber,pageSize:yt.pageSize};this.setState({isLoading:!0}),re.WY.get({url:a,params:l}).then(c=>{this.setState({total:c.data.total,list:c.data.list,isLoading:!1})})},this.handleTimeChange=a=>{var t=a.startTime,s=a.endTime;yt.pageNumber=1,this.setState({startTime:t,endTime:s},this.getScoreRecord)},this.pageChange=a=>{yt.pageNumber=a,this.getScoreRecord()},this.pageSizeChange=(a,t)=>{yt.pageSize=t,this.getScoreRecord()},this.exportMyScore=()=>{var a=this.props.t;D.Z.confirm({title:a("common.tip"),content:a("personal.exportScoreTip"),onOk:()=>{var t=this.state,s=t.startTime,n=t.endTime;(0,Z.fR)({startTime:s,endTime:n,pageNumber:yt.pageNumber,pageSize:yt.pageSize}).then(l=>{l.data.code===0&&((0,Ra.Pp)(this.props),k.default.success(this.props.t("study.compoundSucceed")))})}})},this.headerTitle=()=>{var a=this.props.t;return e().createElement(M.Z,{icon:e().createElement(tt.Z,null),type:"primary",onClick:this.exportMyScore},a("personal.exportData"))},this.toolBarRender=()=>{var a=this.props.t,t=this.state.statistics;return e().createElement("div",{className:"my-credit-statistics"},a("personal.myTotalScore"),e().createElement("span",{className:"score num__tip"},t.totalScore),e().createElement("span",{className:"num__tip"},a("personal.scoreLabel")),e().createElement("span",{className:"personal-scoreLabel-margin-left"}),a("personal.todayScore"),e().createElement("span",{className:"score num__tip"},t.todayScore),e().createElement("span",{className:"num__tip"},a("personal.scoreLabel")))},this.state={list:[],total:0,startTime:"",endTime:"",statistics:{},isLoading:!1}}componentDidMount(){this.getMyScoreSummary(),this.getScoreRecord()}render(){var i=this.state,a=i.list,t=i.total,s=i.isLoading,n=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:yt.pageNumber,total:t,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return e().createElement("div",{className:"my-credit"},e().createElement("div",{className:"my-credit-top"},e().createElement(qt.Z,{className:"cl-search-date-width",showTime:!0,format:"YYYY-MM-DD HH:mm",onCustomChange:this.handleTimeChange,timestamp:!0})),e().createElement("div",{className:"my-credit-list"},e().createElement("div",{className:"my-credit-list-table"},e().createElement(kn,{list:a,isLoading:s,headerTitle:this.headerTitle(),toolBarRender:this.toolBarRender}),t>yt.pageSize||!n.hideOnSinglePage?e().createElement("div",{className:"my-credit-list-pagination"},e().createElement(C.Z,n)):null)))}componentWillUnmount(){yt.pageNumber=1,yt.pageSize=20}}var An=(0,y.$j)()((0,f.Z)()(wn)),Yi=r(66456),ya=r(55313),Bn=r(68628),Gi=r(22385),Me=r(31097),qa=r(57119);function Ea(E){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"pointsReward",a;switch(i){case"pointsReward":{a=[{title:E.t("pointsSetting.type"),dataIndex:"type"},{title:E.t("pointsSetting.operationName"),dataIndex:"operation_name"},{title:E.t("pointsSetting.singleRewardPoints"),dataIndex:"single_reward_points",render:t=>t},{title:e().createElement("span",null,e().createElement("span",{style:{paddingRight:"8px"}},E.t("pointsSetting.dailyIntegralNum")),e().createElement(Me.Z,{title:E.t("pointsSetting.settingValueDesc")},e().createElement(qa.Z,{style:{color:"#BFBFBF",size:"16px"}}))),dataIndex:"daily_integral_num",render:(t,s)=>{var n=s.event_code;return n!=="100101"?e().createElement("span",null,t):e().createElement("span",{style:{color:"#bfbfbf"}},"--")}},{title:E.t("pointsSetting.effectiveTime"),dataIndex:"effective_time",align:"center",render:(t,s)=>{var n=s.status,l=s.effective_time;return n===0||n==="0"||!l?e().createElement("span",{style:{color:"#bfbfbf"}},"--"):(0,N.p6)(l,"yyyy-MM-dd hh:mm").split(" ")[0]}},{title:E.t("pointsSetting.effectivePeriod"),dataIndex:"effective_period",align:"center",render:t=>t}];break}case"continuousCheck":{a=[{title:E.t("pointsSetting.signDays"),dataIndex:"days",render:t=>t},{title:E.t("pointsSetting.extraPoints"),dataIndex:"number",render:t=>t},{title:E.t("pointsSetting.effectiveTime"),dataIndex:"effect_time",align:"center",render:(t,s)=>{var n=s.status;return n===0||n==="0"||!t?e().createElement("span",{style:{color:"#bfbfbf"}},"--"):(0,N.p6)(t,"yyyy-MM-dd hh:mm").split(" ")[0]}}];break}case"lecturerPoints":{a=[{title:E.t("pointsSetting.type"),dataIndex:"operation_name",render:t=>e().createElement("span",{className:"operation_name_value"},t)},{title:E.t("pointsSetting.getPoints"),dataIndex:"number",render:t=>t},{title:e().createElement("span",null,e().createElement("span",{style:{paddingRight:"8px"}},E.t("pointsSetting.dailyIntegralNum")),e().createElement(Me.Z,{title:E.t("pointsSetting.settingValueDesc")},e().createElement(qa.Z,{style:{color:"#BFBFBF",size:"16px"}}))),dataIndex:"limit",render:(t,s)=>t},{title:E.t("pointsSetting.effectiveTime"),dataIndex:"effective_time",width:207,align:"center",render:(t,s)=>{var n=s.status;return n===0||n==="0"||!t?e().createElement("span",{style:{color:"#bfbfbf"}},"--"):(0,N.p6)(t,"yyyy-MM-dd hh:mm").split(" ")[0]}}];break}case"taskPoints":{a=[{title:E.t("customFields.taskAction"),key:"event_name",dataIndex:"event_name",width:200,ellipsis:{showTitle:!0},index:1},{title:E.t("customFields.premiums"),key:"extra_reward",dataIndex:"extra_reward",ellipsis:{showTitle:!0},index:2}];break}case"pointsDeduction":{a=[];break}case"userLevel":{a=[{title:E.t("pointsSetting.icon"),dataIndex:"level_icon",render:t=>e().createElement("img",{src:t,alt:"avatar",style:{width:"48px",height:"48px"}})},{title:E.t("pointsSetting.level"),dataIndex:"level_name",render:t=>e().createElement("span",null,t)},{title:E.t("pointsSetting.levelIntegral"),dataIndex:"integral",render:t=>e().createElement("span",null,t)}];break}default:a=[]}return a}var Ca=r(34215),Un=r(88487),ba=h.Z.TabPane,Wn=E=>({userId:E.user.id}),Pt={size:"small",current:1,pageSize:4,showSizeChanger:!1};class Fn extends e().Component{constructor(i){var a;super(i);a=this,this.tabClick=t=>{switch(this.setState({activeKey:t}),t){case"pointsReward":{this.getRewardRules();break}case"continuousCheck":{this.getContinuousCheckRules();break}case"taskPoints":{this.getTaskRules();break}case"userLevel":{this.getIntegralLevelRules();break}default:this.getRewardRules()}},this.toggleVisible=()=>{var t=this.state.visible;this.setState({visible:!t})},this.getRewardRules=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.rewardRuleParams;a.setState({dataLoading:!0}),(0,Ca.$c)(t).then(s=>{var n=s.rules,l=s.daily_integral_status,c=s.daily_integral_num,u=s.credit_exchange_status,P=s.credit_exchange_num,K=s.credit_exchange_group,ae=s.credit_exchange_event,ee=n.list,de=n.total;a.credit_exchange_event=ae,a.credit_exchange_group=K,a.setState({pointsRewardRules:{list:ee,total:de,daily_integral_status:l,daily_integral_num:c,credit_exchange_status:u,credit_exchange_num:P},dataLoading:!1})}).catch(()=>{a.setState({dataLoading:!1})})},this.getTaskRules=(0,B.Z)(I().mark(function t(){var s,n;return I().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.setState({dataLoading:!0}),c.next=3,(0,Un.Bw)();case 3:s=c.sent,n=s.data,a.setState({taskRules:{list:n.data,total:n.data.length||0},dataLoading:!1});case 6:case"end":return c.stop()}},t)})),this.pointsRewardPageSizeChange=t=>{this.rewardRuleParams.page_number=t,this.getRewardRules(this.rewardRuleParams)},this.getContinuousCheckRules=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.continuousCheckParams;a.setState({dataLoading:!0}),(0,Ca.uk)(t).then(s=>{var n=s.data,l=n.list,c=n.total;a.setState({continuousCheckRules:{list:l,total:c},dataLoading:!1})})},this.continuousCheckSizeChange=t=>{this.continuousCheckParams.page_number=t,this.getContinuousCheckRules(this.continuousCheckParams)},this.getLectureRules=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.lectureRulesParams;a.setState({dataLoading:!0}),(0,Ca.cE)(t).then(s=>{var n=s.data,l=n.rules,c=n.daily_status,u=n.daily_num,P=l.list,K=l.total;a.setState({lectureRules:{list:P,total:K,daily_status:c,daily_num:u},dataLoading:!1})}).catch(()=>{a.setState({dataLoading:!1})})},this.lectureRulesSizeChange=t=>{this.lectureRulesParams.page_number=t,this.getLectureRules(this.lectureRulesParams)},this.getIntegralLevelRules=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.integralLevelRulesParams;a.setState({dataLoading:!0}),(0,Ca.Cl)(t).then(s=>{var n=s.data,l=n.list,c=n.total;a.setState({dataLoading:!1,integralLevelRules:{list:l,total:c}})})},this.integralLevelRulesSizeChange=t=>{this.integralLevelRulesParams.page_number=t,this.getIntegralLevelRules(this.integralLevelRulesParams)},this.state={visible:!1,activeKey:"pointsReward",dataLoading:!0,pointsRewardRules:{list:[],total:0,daily_integral_status:1,daily_integral_num:0,credit_exchange_status:1,credit_exchange_num:0},continuousCheckRules:{list:[],total:0},lectureRules:{list:[],total:0,daily_status:0,daily_num:0},taskRules:{list:[],total:0},integralLevelRules:{list:[],total:0}},this.rewardRuleParams={scene_code:1001,type:"enable",page_number:1,page_size:Pt.pageSize},this.continuousCheckParams={page_number:1,type:"enable",page_size:Pt.pageSize},this.lectureRulesParams={page_number:1,type:"enable",page_size:Pt.pageSize},this.integralLevelRulesParams={page_number:1,type:"enable",page_size:Pt.pageSize}}componentDidMount(){this.getRewardRules()}render(){var i=this.props.t,a=this.state,t=a.visible,s=a.activeKey,n=a.pointsRewardRules,l=a.continuousCheckRules,c=a.integralLevelRules,u=a.dataLoading,P=a.taskRules,K=n.list,ae=n.total,ee=n.daily_integral_status,de=n.daily_integral_num,_e=n.credit_exchange_status,Ie=n.credit_exchange_num,Ue=l.list,ke=l.total,De=c.list,pe=c.total;return e().createElement("div",{className:"PointsRulesDesc_container"},e().createElement("span",{onClick:this.toggleVisible,className:"scores_rule"},e().createElement(Bn.Z,null),i("personal.scoresRules")),e().createElement(D.Z,{title:i("pointsSetting.integralRule"),width:920,visible:t,onCancel:this.toggleVisible,getContainer:!1,footer:null,loading:u,bodyStyle:{padding:"8px 24px",minHeight:"400px"}},e().createElement("div",null,e().createElement(h.Z,{defaultActiveKey:"pointsRewardRules",activeKey:s,onTabClick:this.tabClick},e().createElement(ba,{tab:i("pointsSetting.pointsRewardRules"),key:"pointsReward"},e().createElement(ya.Z,{size:"small",dataSource:K,columns:Ea(this.props,"pointsReward"),pagination:!1,bordered:!0,loading:u}),e().createElement("div",{className:"pagination_container"},ae>Pt.pageSize&&e().createElement(C.Z,(0,A.Z)({},Pt,{total:ae,current:this.rewardRuleParams.page_number,onChange:this.pointsRewardPageSizeChange}))),e().createElement("div",{className:"extra_container"},+ee==1&&e().createElement("div",{className:"extra_item"},e().createElement("span",{className:"extra_label"},i("pointsSetting.peopleDayPointsLimit"),"\uFF1A",+de==0?"\u65E0\u4E0A\u9650":"".concat(de," ").concat(i("pointsSetting.points"))," "),e().createElement("span",{className:"extra_tip"},"\uFF08",i("pointsSetting.peopleDayPointsLimitExtra_tip_start")," ",de," ",i("pointsSetting.peopleDayPointsLimitExtra_tip_end"),"\uFF09")),+_e==1&&e().createElement("div",{className:"extra_item"},e().createElement("span",{className:"extra_label"},i("pointsSetting.people_credit_exchange"),"\uFF1A",Ie," ",i("pointsSetting.credit")," = 1 ",i("pointsSetting.points")),e().createElement("span",{className:"extra_tip"},"\uFF08",i("pointsSetting.people_credit_exchange_tip"),"\uFF09")))),e().createElement(ba,{tab:i("pointsSetting.continuousCheck"),key:"continuousCheck"},e().createElement(ya.Z,{size:"small",dataSource:Ue,columns:Ea(this.props,"continuousCheck"),bordered:!0,pagination:!1,rowKey:"id",loading:u}),e().createElement("div",{className:"pagination_container"},ke>Pt.pageSize&&e().createElement(C.Z,(0,A.Z)({},Pt,{total:ke,current:this.continuousCheckParams.page_number,onChange:this.continuousCheckSizeChange})))),e().createElement(ba,{tab:i("pointsSetting.integrateTask"),key:"taskPoints"},e().createElement(ya.Z,{size:"small",dataSource:P.list,columns:Ea(this.props,"taskPoints"),bordered:!0,pagination:!1,rowKey:"id",loading:u})),e().createElement(ba,{tab:i("pointsSetting.userLevelRules"),key:"userLevel"},e().createElement(ya.Z,{size:"small",dataSource:De,columns:Ea(this.props,"userLevel"),bordered:!0,pagination:!1,rowKey:"id",loading:u}),e().createElement("div",{className:"pagination_container"},pe>Pt.pageSize&&e().createElement(C.Z,(0,A.Z)({},Pt,{total:pe,current:this.integralLevelRulesParams.page_number,onChange:this.integralLevelRulesSizeChange}))))))))}}var zn=(0,y.$j)(Wn)((0,f.Z)()(Fn)),$n=Xe.Z.Option,Kn=E=>({userId:E.user.id}),It={pageNumber:1,pageSize:20};class jn extends e().Component{constructor(i){var a;super(i);a=this,this.getRank=()=>{var s=S.ZP.points.myIntegral(this.props.userId);re.WY.get({url:s}).then(n=>{this.setState({rankData:n.data})}).catch(()=>{})},this.getPointsCategory=(0,B.Z)(I().mark(function s(){var n,l,c,u;return I().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return n=a.props.t,K.next=3,(0,Z.fV)();case 3:l=K.sent,c=l.data,u=l.success,u==="true"&&a.setState({pointsOptions:[{value:n("course.allCategory"),name:"all"},...c.list]});case 7:case"end":return K.stop()}},s)})),this.getTableList=()=>{this.setState({isLoading:!0});var s={integral_type:this.selectValue,begin_time:this.timeFilter.beginTime,end_time:this.timeFilter.endTime,page_number:It.pageNumber,page_size:It.pageSize};(0,Z.Pt)(this.props.userId,s).then(n=>{var l=n.data,c=n.success;c==="true"?this.setState({isLoading:!1,list:l.list||[],total:l.total||0}):this.setState({isLoading:!1})}).catch(()=>{this.setState({isLoading:!1})})},this.changeSelect=s=>{this.selectValue=s,It.pageNumber=1,this.setState({list:[],total:0}),this.getTableList()},this.handleTimeChange=s=>{var n=s.startTime,l=s.endTime;It.pageNumber=1,this.timeFilter={beginTime:n,endTime:l},this.getTableList()},this.export=()=>{var s=this.props.t;D.Z.confirm({title:s("common.tip"),content:s("employeeSummary.exportPerPointsConfirm"),onOk:()=>{var n={begin_time:this.timeFilter.beginTime,end_time:this.timeFilter.endTime,integral_type:this.selectValue};(0,Xa.N)({page:"exportPointsDetail",props:this.props,query:n,rest:{userId:this.props.userId},sendType:"post"})}})},this.pageChange=s=>{It.pageNumber=s,this.getTableList()},this.pageSizeChange=(s,n)=>{It.pageSize=n,this.getTableList()},this.headerTitle=()=>{var s=this.props.t;return e().createElement(M.Z,{icon:e().createElement(tt.Z,null),type:"primary",onClick:this.export},s("personal.exportData"))},this.handleExchange=()=>{D.Z.warning({content:this.props.t("pointsSetting.exchangeTip"),okText:this.props.t("common.ok"),onOk:()=>{D.Z.destroyAll()},onCancel:()=>{}})},this.toolBarRender=()=>{var s=this.state.rankData,n=this.props.t;return e().createElement("div",{className:"ScoresTable-between-text"},e().createElement("div",{className:"box-top"},e().createElement("div",{className:"box-top-section"},e().createElement("div",{className:"section-title"},n("personal.currentLevel")),e().createElement("div",{className:"num__tip"},e().createElement("img",{src:s.level.icon}),s.level.level_name||"")),e().createElement("div",{className:"box-top-section"},e().createElement("div",{className:"section-title"},n("personal.accumulatedScores"),e().createElement("div",{className:"box-button"},e().createElement(zn,null))),e().createElement("div",{className:"num__tip"},s.total||0,e().createElement("div",null,n("common.examScoreUnit")))),e().createElement("div",{className:"box-top-section"},e().createElement("div",{className:"section-title"},n("scoreRankingList.pointsAvailable"),e().createElement("div",{className:"box-button"},e().createElement(M.Z,{type:"link",onClick:this.handleExchange},n("pointsSetting.exchangeGift")))),e().createElement("div",{className:"num__tip",style:{border:"none"}},s.available||0,e().createElement("div",null,n("common.examScoreUnit"))))),e().createElement("div",{className:"box-bottom"},e().createElement("div",{className:"box-bottom-top"},e().createElement("span",null,n("pointsSetting.socialInteraction"),"\uFF1A",s.social_score||0,n("common.examScoreUnit"),"  ",s.social_percentage,"%"),e().createElement("span",null,n("pointsSetting.learningTraining"),"\uFF1A",s.study_score||0,n("common.examScoreUnit"),"  ",s.study_percentage,"%"),e().createElement("span",null,n("pointsSetting.growthPromotion"),"\uFF1A",s.growth_score||0,n("common.examScoreUnit"),"  ",s.growth_percentage,"%"),e().createElement("span",null,n("pointsSetting.contributionHelp"),"\uFF1A",s.contribution_score||0,n("common.examScoreUnit"),"  ",s.contribution_percentage,"%")),e().createElement("div",null,e().createElement("span",null,n("personal.todayTotalScores"),"\uFF1A",e().createElement("span",{className:"color",style:{color:(0,kt.p)()}},s.today)))))};var t=i.t;this.tableColumns=[{title:t("study.type"),dataIndex:"integral_type_name",key:"integral_type_name",width:200,render:s=>s},{title:t("personal.pointsBehavior"),dataIndex:"event_content",key:"event_content"},{title:t("personal.timeLabel"),dataIndex:"create_time",key:"create_time",width:155,render:s=>s?(0,Te.p6)(+s,"yyyy.MM.dd hh:mm"):"--"},{title:t("personal.scores"),width:110,dataIndex:"final_score",key:"final_score",render:s=>e().createElement("span",null,s+t("common.examScoreUnit"))}],this.timeFilter={beginTime:"",endTime:""},this.selectValue="all",this.state={isLoading:!0,list:[],total:[],rankData:{total:0,available:0,today:0,level:{level_name:"",icon:""}},pointsOptions:[{value:t("course.allCategory"),name:"all"}]}}componentDidMount(){this.getTableList(),this.getRank(),this.getPointsCategory()}componentWillUnmount(){It.pageNumber=1,It.pageSize=20}render(){var i=this.state,a=i.isLoading,t=i.list,s=i.total,n=i.pointsOptions,l={marginLeft:"8px"},c=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:It.pageNumber,total:+s,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return e().createElement("div",{className:"ScoresTable"},this.toolBarRender(),e().createElement("div",{className:"input_left"},e().createElement(Xe.Z,{defaultValue:this.selectValue,className:"cl-search-normal-width",onChange:this.changeSelect},n.map(u=>e().createElement($n,{value:u.name,key:u.name},u.value))),e().createElement(qt.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",className:"cl-search-date-width",onCustomChange:this.handleTimeChange,style:l,timestamp:!0})),e().createElement("div",{className:"table"},e().createElement(at.f,{loading:a,dataSource:t,columns:this.tableColumns,rowKey:u=>u.id,pagination:!1,headerTitle:this.headerTitle(),tableUUID:"95b5c6f5-4c4c-43db-9456-c5ea17b91d97"}),s>It.pageSize||!c.hideOnSinglePage?e().createElement("div",{className:"task-file-list-pagination"},e().createElement(C.Z,c)):null))}}var Vn=(0,y.$j)(Kn)((0,f.Z)()(jn)),Yn=r(48336),Gn=r(3427),Qn=r.n(Gn);class es extends e().Component{constructor(){super(...arguments);this.onRef=i=>{this.modalRef=i},this.handleClick=()=>{var i=this.props,a=i.certificateItem,t=i.appType,s=i.appId,n=i.enterpriseId,l=i.token,c=localStorage.getItem("qyWechatBook"),u=t==="wx_app"&&c==="true"&&s==="9005";if(u){var P={enterpriseId:n,certificateId:a.id,accessToken:l,imageUrl:encodeURIComponent(a.image_url),from:""},K="".concat("https://pro.coolcollege.cn","#/certificate?").concat(g.stringify(P));et.Z.targetTo({path:K,isExternalLink:!0})}else this.modalRef.handleViewCertificate({record:a})},this.renderHeader=()=>{var i=this.props,a=i.prefixCls,t=i.certificateItem,s=i.t,n="".concat(a,"__header");return e().createElement("div",{className:"".concat(n)},e().createElement("img",{className:"".concat(n,"__bg"),src:Qn(),alt:""}),t.image_url!==""&&t.image_url!=="fail"&&e().createElement("img",{className:"".concat(n,"__itemImg"),style:{width:t.style==="horizontal"?"50%":"35%"},src:t.image_url,alt:""}),t.image_url===""&&e().createElement("p",{className:"".concat(n,"__failedImg")},e().createElement("img",{src:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/no-certificate.png",alt:""}),e().createElement("span",{className:"".concat(n,"__noImgText")},s("certificateManage.certificateGeneration")," ")),t.image_url==="fail"&&e().createElement("p",{className:"".concat(n,"__failedImg")},e().createElement("img",{src:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/no-certificate.png",alt:""}),e().createElement("span",{className:"".concat(n,"__noImgText")},s("certificateManage.certificateFailed")," ")))},this.renderFooter=()=>{var i=this.props,a=i.prefixCls,t=i.certificateItem,s=i.t,n="".concat(a,"__footer");return e().createElement("div",{className:n},e().createElement("p",{className:" ".concat(n,"__p ").concat(n,"__title")},t.certificate_name),e().createElement("p",{className:"".concat(n,"__p")},s("certificateManage.code"),"\uFF1A",t.certificate_code),e().createElement("p",{className:"".concat(n,"__p")},s("certificateManage.overdue"),"\uFF1A",t.overdue_date!==null?(0,Te.p6)(t.overdue_date):s("certificateManage.noData"),e().createElement("span",{onClick:this.handleClick,className:"".concat(n,"__button"),style:{color:(0,kt.p)()}},s("certificateManage.detail"))))},this.renderOver=()=>{var i=this.props,a=i.prefixCls,t=i.certificateItem,s=i.t;return t.status!=="normal"&&e().createElement("div",{className:"".concat(a,"__over")},t.status==="deleted"&&e().createElement("span",{className:"".concat(a,"__over__delete")},s("certificateManage.delete")),t.status==="overdue"&&e().createElement("span",{className:"".concat(a,"__over__overdue")},s("certificateManage.isOverdue")))}}render(){var i=this.props.prefixCls;return e().createElement("div",{className:i},e().createElement("div",{className:"".concat(i,"__main")},this.renderOver(),this.renderHeader(),this.renderFooter()),e().createElement(Yn.Z,{onRef:this.onRef}))}}es.defaultProps={prefixCls:"my_certificate_card",certificateItem:{}};var Hn=(0,y.$j)(E=>({appType:E.user.appType,appId:E.user.appId,enterpriseId:E.user.enterpriseId,token:E.user.token}))((0,f.Z)()(es)),Jn=r(90631),Xn=r(54549);class qn extends e().Component{constructor(i){super(i);this.download=()=>{var a=this.props,t=a.imgName,s=a.imgUrl,n=this,l=new Image;l.crossOrigin="anonymous",l.src=s,l.onload=function(){var c=n.canvasRef.current.getContext("2d");c.drawImage(l,0,0,728,1038);var u=n.canvasRef.current.toDataURL("image/jpeg"),P=document.createElement("a");P.setAttribute("href",u),P.setAttribute("download","".concat(t,".jpg")),document.body.appendChild(P),P.click(),document.body.removeChild(P)}},this.canvasRef=e().createRef()}render(){var i=this.props,a=i.imgUrl,t=i.t;return e().createElement("div",{className:"view-certi-mask"},e().createElement("div",{className:"view-certi-container"},e().createElement("div",{className:"view-certi-img"},e().createElement("img",{src:a,alt:""})),e().createElement("div",{className:"view-certi-btn"},e().createElement(M.Z,{icon:e().createElement(Jn.Z,null),type:"primary",onClick:this.download,style:{marginRight:30}},t("personal.download")),e().createElement(M.Z,{icon:e().createElement(Xn.Z,null),onClick:this.props.onCancel},t("learning.learnUpgrade.close")))),e().createElement("canvas",{width:"728",height:"1038",ref:this.canvasRef}))}}var er=(0,f.Z)()(qn),ts=Xe.Z.Option,Ut={pageNumber:1,pageSize:20};class as extends e().Component{constructor(i){super(i);this.initTableList=()=>{var a=this.props.userInfo.id,t=this.state,s=t.source_type,n=t.start_date,l=t.end_date,c=t.keyword,u=t.typeVal,P={source_type:s,user_id:a,start_date:n,date_type:u,keyword:c,end_date:l,page_number:Ut.pageNumber,page_size:Ut.pageSize};re.WY.get({url:S.ZP.CertificateList.getPersonalCertificate(),params:P}).then(K=>{setTimeout(()=>{this.setState({isLoading:!1,list:K.data.list,total:K.data.total})},300)})},this.handleChangeDateRange=a=>{var t=a.dateStrings;this.setState({start_date:t[0]===""?0:(0,Te.jZ)(t[0]),end_date:t[1]===""?0:(0,Te.jZ)(t[1])},()=>{this.initTableList()})},this.pageChange=a=>{Ut.pageNumber=a,this.initTableList()},this.pageSizeChange=(a,t)=>{Ut.pageSize=t,this.initTableList()},this.handleTypeChange=a=>{this.setState({source_type:a},this.initTableList)},this.handleSearchKey=a=>{this.setState({keyword:a},this.initTableList)},this.viewCertificate=a=>{var t=this.state.viewCertiConfig;t.visible=!0,t.imgUrl=a.image_url,t.imgName=a.certificate_name,this.setState({viewCertiConfig:t})},this.handleSetType=a=>{this.setState({typeVal:a},()=>{this.initTableList()})},this.hiddenViewCertificate=()=>{var a=this.state.viewCertiConfig;a.visible=!1,this.setState({viewCertiConfig:a})},this.renderCertificateList=()=>{var a=this.state,t=a.list,s=a.isLoading,n=this.props.prefixCls,l="".concat(n,"__content__tasks"),c;return s?c=e().createElement(Ve.Z,{size:"large"}):t.length?c=t.map(u=>e().createElement(Hn,{key:u.id,certificateItem:(0,o.Z)({},u)})):c=e().createElement(Bt.Z,{className:"no_task_tip"}),e().createElement("div",{className:l},c)},this.renderPagination=()=>{var a=this.state.total,t=this.props.prefixCls,s="".concat(t,"__content__pagination"),n=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:Ut.pageNumber,total:a,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return e().createElement("div",{className:s},a>Ut.pageSize||!n.hideOnSinglePage?e().createElement("div",{className:"my-certificate-list-pagination"},e().createElement(C.Z,n)):null)},this.renderLeftSearch=()=>{var a=this.state,t=a.typeVal,s=a.timeType,n=this.props,l=n.prefixCls,c=n.t,u=[{id:"0",name:c("common.all")},{id:"1",name:c("personal.system")},{id:"3",name:c("personal.manualIssue")}],P="".concat(l,"-filter");return e().createElement(e().Fragment,null,e().createElement(Xe.Z,{defaultValue:u[0].id,className:"".concat(P,"__type"),style:{marginRight:20,width:250},onChange:this.handleTypeChange},u.map(K=>e().createElement(ts,{value:K.id,key:K.id},K.name))),e().createElement(Xe.Z,{className:"".concat(P,"__timeType"),value:c("certificateManage.".concat(t)),style:{borderRight:"none",width:150},onChange:this.handleSetType},s.map(K=>e().createElement(ts,{key:K,value:K},c("certificateManage.".concat(K))))),e().createElement(qt.Z,{disabledDate:null,style:{marginRight:20},type:t,onCustomChange:this.handleChangeDateRange}),e().createElement(ze.Z,{onSearch:this.handleSearchKey,width:250,placeholder:c("searchInputPlaceholder.certificate")}))},this.state={list:[],total:0,start_date:"",end_date:"",isLoading:!1,keyword:"",source_type:0,viewCertiConfig:{imgUrl:"",visible:!1,onCancel:this.hiddenViewCertificate},timeType:["issue","effect","overdue"],typeVal:"issue"}}componentDidMount(){this.initTableList()}componentWillUnmount(){Ut.pageNumber=1,Ut.pageSize=20}render(){var i=this.state.viewCertiConfig;return e().createElement("div",{className:"my-certificate"},e().createElement("div",{className:"my-certificate-filter"},this.renderLeftSearch()),e().createElement("div",{className:"my-certificate-list"},this.renderCertificateList(),this.renderPagination()),i.visible&&e().createElement(er,i))}}as.defaultProps={prefixCls:"my_certificate"};var tr=E=>({userInfo:E.user}),ar=(0,f.Z)()((0,y.$j)(tr)(as)),Qi=r(62350),sr=r(75443),ka=r(91705);class nr extends e().Component{constructor(i){var a;super(i);a=this,this.getReportRecordList=()=>{var t=this.state,s=t.searchParams,n=t.pageConfig;this.setState({isLoading:!0},(0,B.Z)(I().mark(function l(){var c,u,P,K,ae,ee,de;return I().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,(0,ka.Bw)(s,n);case 2:c=Ie.sent,u=c.data.data,P=u.all,K=u.pass,ae=u.reject,ee=u.wait,de=u.draft,a.setState({isLoading:!1,tableData:c.data.data.page.list,total:c.data.data.page.total,radioList:[{name:"".concat(a.props.t("common.all"),"(").concat(P,")"),value:""},{name:"".concat(a.props.t("common.pass"),"(").concat(K,")"),value:"pass"},{name:"".concat(a.props.t("common.reject"),"(").concat(ae,")"),value:"reject"},{name:"".concat(a.props.t("submitReport.underReview"),"(").concat(ee,")"),value:"wait"},{name:"".concat(a.props.t("personal.draft"),"(").concat(de,")"),value:"draft"}]});case 5:case"end":return Ie.stop()}},l)})))},this.handleSearch=t=>{this.setState(s=>({searchParams:(0,o.Z)((0,o.Z)({},s.searchParams),{},{keyword:t}),pageConfig:(0,o.Z)((0,o.Z)({},s.pageConfig),{},{page_number:1})}),()=>{this.getReportRecordList()})},this.handleStatusChange=t=>{this.setState(s=>({searchParams:(0,o.Z)((0,o.Z)({},s.searchParams),{},{status:t.target.value,page_number:1}),pageConfig:(0,o.Z)((0,o.Z)({},s.pageConfig),{},{page_number:1})}),()=>{this.getReportRecordList()})},this.pageChange=t=>{this.setState(s=>({pageConfig:(0,o.Z)((0,o.Z)({},s.pageConfig),{},{page_number:t})}),()=>{this.getReportRecordList()})},this.pageSizeChange=(t,s)=>{this.setState({pageConfig:{page_number:1,page_size:s}},()=>{this.getReportRecordList()})},this.deleteReportRecord=t=>{var s=this.props.t;(0,ka.CM)(t).then(n=>{n.data.code===0?(k.default.success(s("common.deleteSuccess")),this.getReportRecordList()):k.default.error(n.data.msg)})},this.jumpToPage=t=>{var s=t.id,n=t.status,l=n==="draft"||n==="reject"?"/training/submitReport/edit?id=".concat(s):"/training/submitReport/edit";et.Z.targetTo({path:l,projectType:"student"})},this.goToDetails=t=>{var s=t.id,n=t.instance_id;et.Z.targetTo({path:"/training/submitReport/details?submitId=".concat(s,"&instanceId=").concat(n),projectType:"student"})},this.renderList=()=>{var t=this.props.t,s=localStorage.getItem("themeColor"),n=this.state.tableData;return e().createElement("div",{className:"list_box"},n.map(l=>e().createElement("div",{className:"my_report_record_card",key:l.id},e().createElement("div",{className:"card-content"},e().createElement("h5",null,l.title),e().createElement("h6",null,t("component.offlineAddress"),"\uFF1A",l.address),e().createElement("h6",null,t("pk.participationTime"),"\uFF1A","".concat((0,Te.p6)(Number(l.participation_time)))),e().createElement("h6",null,t("common.updateTime"),"\uFF1A","".concat((0,Te.p6)(Number(l.update_time))))),e().createElement("div",{className:"card-status"},e().createElement("div",{className:"card-status-operation"},e().createElement("span",{style:{color:s},onClick:()=>this.goToDetails(l)},t("course.preview")),l.status==="draft"||l.status==="reject"?e().createElement(e().Fragment,null,e().createElement("span",{className:"cl-pointer-divide"}),e().createElement("span",{style:{color:s},onClick:()=>this.jumpToPage(l)},t("common.edit")),e().createElement("span",{className:"cl-pointer-divide"}),e().createElement(sr.Z,{title:l.status==="reject"?t("submitReport.deleteUserRecordTip"):t("submitReport.deleteUserDraftRecordTip"),onConfirm:()=>this.deleteReportRecord(l.id),okText:t("common.ok"),cancelText:t("common.cancel")},e().createElement("span",{style:{color:s}},t("common.delete")))):""),e().createElement("div",{style:{color:l.status==="pass"?"#52C41A":l.status==="reject"?"#D8403D":l.status==="wait"?"rgba(0, 0, 0, 0.65)":""}},l.status==="pass"&&e().createElement("span",null,t("common.pass")," "),l.status==="reject"&&e().createElement("span",null,t("common.reject")," "),l.status==="wait"&&e().createElement("span",null,t("submitReport.underReview")," "))))))},this.state={searchParams:{status:"",keyword:""},tableData:[],total:0,isLoading:!1,pageConfig:{page_number:1,page_size:20},radioList:[]}}componentDidMount(){this.getReportRecordList()}render(){var i=this.props.t,a=this.state,t=a.isLoading,s=a.tableData,n=a.total;return e().createElement("div",{className:"my_report_record"},e().createElement("div",{className:"search-box"},e().createElement(M.Z,{type:"primary",icon:e().createElement(Vt.Z,null),onClick:this.jumpToPage},i("submitReport.applyFor")),e().createElement("div",{className:"search-right-box"},e().createElement(p.ZP.Group,{size:"default",defaultValue:this.state.searchParams.status,onChange:this.handleStatusChange},this.state.radioList.map(l=>e().createElement(p.ZP.Button,{key:l.value,value:l.value},l.name))),e().createElement("div",{className:"search-input"},e().createElement(ze.Z,{onSearch:this.handleSearch,prefixCls:"top_operate_search",placeholder:i("submitReport.searchPlaceholder")})))),e().createElement("div",{className:"my_report_record_container"},e().createElement("div",{className:"my_report_record_list"},e().createElement(Ve.Z,{size:"large",spinning:t},!s||!s.length?e().createElement("div",{className:"no_data_box"},e().createElement(Bt.Z,{className:"no_task_tip"})):this.renderList()))),e().createElement("div",{className:"pagination_container"},e().createElement(C.Z,(0,A.Z)({},S.XE.INITIAL_PAGINATION,{total:n,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange,current:this.state.pageConfig.page_number}))))}}var rr=E=>({userInfo:E.user}),ir=(0,y.$j)(rr)((0,f.Z)()(nr)),lr=r(89019),Ot=h.Z.TabPane;class or extends e().Component{constructor(){super(...arguments);this.state={defaultKey:"1"},this.handleQueryToJump=()=>{var i=g.parse(ue.m8.location.search),a=i.tab,t;switch(a){case"employeeFiles":t="1";break;case"mycredit":t="2";break;case"signBoard":t="3";break;case"mycertificate":t="4";break;case"studyRecord":t="5";break;case"reportRecord":t="6";break;default:t="1"}this.setState({defaultKey:t})}}componentDidMount(){this.handleQueryToJump()}componentDidUpdate(i){if(i.resourceLibrary.refresh!==this.props.resourceLibrary.refresh){var a=g.parse(ue.m8.location.search),t=a.tab;t&&this.handleQueryToJump()}}render(){var i=this.props.t,a=this.state.defaultKey;return e().createElement(e().Fragment,null,e().createElement(h.Z,{defaultActiveKey:"1",activeKey:a,className:"center-user-tab",onChange:t=>this.setState({defaultKey:t})},e().createElement(Ot,{tab:i("component.trainingArchives"),key:"1",className:"center-user-tab-left"},e().createElement("div",{className:"center-user-tab-left-container"},e().createElement(h.Z,{tabPosition:"left",defaultActiveKey:"1"},e().createElement(Ot,{tab:i("employeeSummary.taskArchives"),key:"1"},e().createElement(bn,{parentEl:"employee-file-tab-statistics"})),e().createElement(Ot,{tab:i("employeeSummary.selfStudyArchives"),key:"2"},e().createElement(Zn,{parentEl:"employee-self-tab-statistics"})),e().createElement(Ot,{tab:i("employeeSummary.certificationArchives"),key:"3"},e().createElement(On,{parentEl:"employee-auth-tab-statistics"}))))),e().createElement(Ot,{tab:i("userCenter.creditRecord"),key:"2"},e().createElement(An,null)),e().createElement(Ot,{tab:i("userCenter.integralRecord"),key:"3"},e().createElement(Vn,null)),e().createElement(Ot,{tab:i("userCenter.certificateRecords"),key:"4"},e().createElement(ar,null)),e().createElement(Ot,{tab:i("common.studyRecord"),key:"5"},e().createElement(lr.default,null)),e().createElement(Ot,{tab:i("submitReport.record"),key:"6"},e().createElement(ir,null))))}}var cr=E=>({resourceLibrary:E.resourceLibrary,qyShield:E.user.qyShield}),ss=(0,y.$j)(cr)((0,f.Z)()(or));class ns extends e().Component{constructor(){super(...arguments);this.handleTableChange=i=>{this.props.onTableChange(i)},this.renderActions=(i,a)=>{var t=this.props,s=t.t,n=t.keyword,l=t.status,c=t.start_time,u=c===void 0?"":c,P=t.end_time,K=P===void 0?"":P,ae=t.page_number,ee="currentItem=".concat(a,"&userId=").concat(i.user_id,"&operationId=").concat(i.operation_id,"&pageNumber=").concat(ae,"&keyword=").concat(n,"&approvalStatus=").concat(l)+"&startTime=".concat(u,"&endTime=").concat(K);return e().createElement("div",{className:"cl-table__cell-action"},e().createElement(et.Z,{to:"/training/operation/approval?".concat(ee),projectType:"student"},l==="1"?e().createElement("span",{className:"cl-pointer"},s("personal.workApproval")):e().createElement("span",{className:"cl-pointer"},s("common.viewDetails"))))}}render(){var i=this.props,a=i.prefixCls,t=i.list,s=t===void 0?[]:t,n=i.loading,l=i.paginationParams,c=l===void 0?{}:l,u=i.t,P=i.toolBarRender,K=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),c),ae=[{title:u("component.practiceName"),dataIndex:"operation_name",key:"operation_name"},{title:this.props.t("personal.belongTaskName"),dataIndex:"title",key:"title",width:140},{title:this.props.t("personal.submitter"),width:120,dataIndex:"user_name",key:"user_name",render:(ee,de)=>{var _e=de.sync_user_id,Ie=de.sync_source_type;return e().createElement(ce.Z,{dataType:"userName",value:_e,name:ee,type:Ie})}},{title:this.props.status==="1"?this.props.t("personal.submitTime"):this.props.t("personal.approvalTime"),width:130,dataIndex:"date",key:"date",render:(ee,de)=>this.props.status==="1"?"".concat(fa()(de.commit_time).format("YYYY-MM-DD HH:mm")):"".concat(fa()(de.update_time).format("YYYY-MM-DD HH:mm"))},{title:this.props.t("learning.approvalResult"),width:90,dataIndex:"status",key:"status",render:(ee,de)=>"".concat(de.status===1?u("common.pending"):de.status===3?u("common.pass"):u("common.reject"))},{title:this.props.t("common.operate"),width:100,key:"operate",fixed:"right",render:(ee,de,_e)=>this.renderActions(de,_e)}];return e().createElement("section",{className:a},e().createElement(at.f,{columns:ae,dataSource:s,rowKey:ee=>ee.operation_id+ee.user_id,pagination:K,loading:n,onChange:this.handleTableChange,toolBarRender:P,tableUUID:"5d7e5e53-570c-4d0c-abad-d1b8469bc626"}))}}ns.defaultProps={prefixCls:"checkin__table"};var ur=(0,f.Z)()(ns);class rs extends e().Component{constructor(i){super(i);this.initTableList=()=>{this.setState({tableLoading:!0}),re.WY.get({url:S.ZP.PracticalApproval.qualificationLists(),params:this.state.params}).then(a=>{this.setState({tableLoading:!1,tableList:a.data.list,tableTotal:a.data.total})})},this.changeType=a=>{var t=a.target.value;this.setState(s=>({params:(0,o.Z)((0,o.Z)({},s.params),{},{page_number:1,status:t})}),()=>{this.initTableList()})},this.handleTimeRange=a=>{var t=a.startTime,s=a.endTime,n=a.dateStrings;if(!n.filter(c=>c).length){this.handleFilterDateRange({startTime:"",endTime:""});return}var l={startTime:t,endTime:s};this.handleFilterDateRange(l)},this.handleFilterDateRange=a=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{page_number:1,start_time:a.startTime,end_time:a.endTime})}),()=>{this.initTableList()})},this.handleSearch=a=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{page_number:1,keyword:a})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(a=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{page_number:1,page_size:20})}),()=>{a()})}),this.handleChangePagination=a=>{var t=a.current,s=a.pageSize;this.setState(n=>({params:(0,o.Z)((0,o.Z)({},n.params),{},{page_number:t,page_size:s})}),()=>{this.initTableList()})},this.toolBarRender=()=>{var a=this.props,t=a.prefixCls,s=a.t;return e().createElement("div",{className:"".concat(t,"__header")},e().createElement(p.ZP.Group,{defaultValue:"1",onChange:this.changeType,style:{marginRight:16}},e().createElement(p.ZP.Button,{value:"1"},s("common.pending")),e().createElement(p.ZP.Button,{value:"2"},s("personal.approved"))),e().createElement(ze.Z,{onSearch:this.handleSearch,width:"272px",placeholder:s("searchInputPlaceholder.task")}))},this.state={params:{keyword:"",status:"1",page_number:1,page_size:20},tableTotal:0,tableList:[],tableLoading:!0}}componentDidMount(){this.initTableList()}render(){var i=this.props.prefixCls,a=this.state,t=a.tableTotal,s=a.tableList,n=a.tableLoading,l=a.params,c={total:Number(t),current:l.page_number,pageSize:l.page_size};return e().createElement("div",{className:i},e().createElement("div",null,e().createElement(qt.Z,{className:"cl-search-date-width",showTime:!0,format:"YYYY-MM-DD HH:mm:ss",onCustomChange:this.handleTimeRange,timestamp:!0})),e().createElement("div",{className:"".concat(i,"__content")},e().createElement(ur,(0,A.Z)({},l,{loading:n,paginationParams:c,list:s,onTableChange:this.handleChangePagination,toolBarRender:this.toolBarRender}))))}}rs.defaultProps={prefixCls:"work-approval"};var dr=(0,f.Z)()(rs);class is extends e().Component{constructor(){super(...arguments);this.handleTableChange=i=>{this.props.onTableChange(i)},this.renderActions=(i,a)=>{var t=this.props,s=t.t,n=t.keyword,l=t.status,c=t.start_time,u=c===void 0?"":c,P=t.end_time,K=P===void 0?"":P,ae=t.page_number,ee="currentItem=".concat(a,"&submitId=").concat(i.id,"&instanceId=").concat(i.instance_id,"&pageNumber=").concat(ae,"&keyword=").concat(n,"&approvalStatus=").concat(l)+"&startTime=".concat(u,"&endTime=").concat(K);return e().createElement("div",{className:"cl-table__cell-action"},e().createElement(et.Z,{to:"/training/submitReport/approve-details?".concat(ee),projectType:"student"},l==="wait"?e().createElement("span",{className:"cl-pointer"},s("submitReport.reportApprove")):e().createElement("span",{className:"cl-pointer"},s("common.viewDetails"))))}}render(){var i=this.props,a=i.prefixCls,t=i.list,s=t===void 0?[]:t,n=i.loading,l=i.paginationParams,c=l===void 0?{}:l,u=i.t,P=i.toolBarRender,K=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),c),ae=[{title:u("submitReport.reportTitle"),dataIndex:"name",key:"name"},{title:this.props.t("submitReport.belongingTo"),dataIndex:"type",key:"type",width:100,render:ee=>"".concat(ee==="application"?u("submitReport.applyReport"):"")},{title:this.props.t("personal.submitter"),width:120,dataIndex:"submit_user",key:"submit_user",render:(ee,de)=>e().createElement(ce.Z,{dataType:"userName",value:de.sync_user_id,name:ee,type:de.source_type})},{title:this.props.t("submitReport.reportTime"),width:130,dataIndex:"submit_report_time",key:"submit_report_time",render:ee=>"".concat(fa()(Number(ee)).format("YYYY-MM-DD HH:mm"))},{title:this.props.t("learning.approvalResult"),width:90,dataIndex:"status",key:"status",render:(ee,de)=>"".concat(de.status==="wait"?u("common.pending"):de.status==="pass"?u("common.pass"):u("common.reject"))},{title:this.props.t("common.operate"),width:100,key:"operate",fixed:"right",render:(ee,de,_e)=>this.renderActions(de,_e)}];return e().createElement("section",{className:a},e().createElement(at.f,{columns:ae,dataSource:s,rowKey:ee=>ee.instance_id+ee.id,pagination:K,loading:n,onChange:this.handleTableChange,toolBarRender:P,tableUUID:"1dfadd2f-f3e2-4f16-9f3b-7f015aaed4dc"}))}}is.defaultProps={prefixCls:"checkin__table"};var mr=(0,f.Z)()(is);class ls extends e().Component{constructor(i){super(i);this.initTableList=()=>{this.setState({tableLoading:!0});var a=this.state.params;(0,ka.L_)(a).then(t=>{this.setState({tableLoading:!1,tableList:t.data.data.list,tableTotal:t.data.data.total})})},this.changeType=a=>{var t=a.target.value;this.setState(s=>({params:(0,o.Z)((0,o.Z)({},s.params),{},{page_number:1,status:t})}),()=>{this.initTableList()})},this.handleTimeRange=a=>{var t=a.startTime,s=a.endTime,n=a.dateStrings;if(!n.filter(c=>c).length){this.handleFilterDateRange({startTime:"",endTime:""});return}var l={startTime:t,endTime:s};this.handleFilterDateRange(l)},this.handleFilterDateRange=a=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{page_number:1,start_time:a.startTime,end_time:a.endTime})}),()=>{this.initTableList()})},this.handleSearch=a=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{page_number:1,keyword:a})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(a=>{this.setState(t=>({params:(0,o.Z)((0,o.Z)({},t.params),{},{page_number:1,page_size:20})}),()=>{a()})}),this.handleChangePagination=a=>{var t=a.current,s=a.pageSize;this.setState(n=>({params:(0,o.Z)((0,o.Z)({},n.params),{},{page_number:t,page_size:s})}),()=>{this.initTableList()})},this.toolBarRender=()=>{var a=this.props,t=a.prefixCls,s=a.t;return e().createElement("div",{className:"".concat(t,"__header")},e().createElement(p.ZP.Group,{defaultValue:"wait",onChange:this.changeType,style:{marginRight:16}},e().createElement(p.ZP.Button,{value:"wait"},s("common.pending")),e().createElement(p.ZP.Button,{value:"approved"},s("personal.approved"))),e().createElement(ze.Z,{onSearch:this.handleSearch,width:"272px",placeholder:s("submitReport.searchPlaceholder")}))},this.state={params:{keyword:"",status:"wait",page_number:1,page_size:20,start_time:"",end_time:""},tableTotal:0,tableList:[],tableLoading:!0}}componentDidMount(){this.initTableList()}render(){var i=this.props.prefixCls,a=this.state,t=a.tableTotal,s=a.tableList,n=a.tableLoading,l=a.params,c={total:Number(t),current:l.page_number,pageSize:l.page_size};return e().createElement("div",{className:i},e().createElement("div",null,e().createElement(qt.Z,{className:"cl-search-date-width",showTime:!0,format:"YYYY-MM-DD HH:mm:ss",onCustomChange:this.handleTimeRange,timestamp:!0})),e().createElement("div",{className:"".concat(i,"__content")},e().createElement(mr,(0,A.Z)({},l,{loading:n,paginationParams:c,list:s,onTableChange:this.handleChangePagination,toolBarRender:this.toolBarRender}))))}}ls.defaultProps={prefixCls:"report-approval"};var pr=(0,f.Z)()(ls),Hi=r(71153),os=r(60331),Wt=r(17676),wa=r(94288),cs=r(7908),Ji=r(36017),Aa=r(35247),Ba=r(5430),Yt=r(17762);class us extends e().Component{constructor(i){var a;super(i);a=this,this.onLinkLine=()=>{this.props.onLink()},this.onUploadComplete=t=>{var s=[];t.forEach(n=>{s.push(n.id)}),(0,Wt.af)({enterpriseId:Ba.ZP.enterpriseId,bizResourceList:[{bizCode:this.state.operateColumn.summary.activity_attachment_id,resourceIdList:s,isCovered:!0}]}).then(()=>{this.setState({uploadDatumVisible:!1,operateColumn:{}})}).catch(()=>{})},this.handleSearch=t=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{keyword:t})},()=>{this.initTableList()})},this.handleInputScore=t=>{this.setState({inputScoreVisible:!0,operateColumn:t})},this.handleUploadDatum=t=>{this.getResource(t)},this.getResource=function(){var t=(0,B.Z)(I().mark(function s(n){var l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,Wt.RX)({id:n.summary.activity_attachment_id});case 2:l=u.sent,a.setState({attachmentFile:l.data||[]},()=>{a.setState({uploadDatumVisible:!0,operateColumn:n})});case 4:case"end":return u.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.handleDetail=t=>{(0,N.eJ)({url:"/personal/profile/checkinDetail?courseId=".concat(t.id)})},this.getTableColumns=()=>{var t=this.props.t;return[{title:t("lineClassStudy.lineClassName"),dataIndex:"title",key:"title",fixed:"left",width:150,render:(s,n)=>e().createElement(Me.Z,{title:s,placement:"topLeft"},e().createElement("div",{className:"cl-text-btn",onClick:()=>this.handleDetail(n)},s||"--"))},{title:t("study.reserved"),dataIndex:"should_arrive_count",key:"should_arrive_count",width:100},{title:t("study.attended"),dataIndex:"real_arrive_count",key:"real_arrive_count",width:100},{title:t("lineClass.absenteeism"),dataIndex:"absent_count",key:"absent_count",width:100},{title:t("lineClass.leave"),dataIndex:"leave_count",key:"leave_count",width:100},{title:t("common.operate"),width:250,fixed:"right",render:(s,n)=>{var l,c;return e().createElement(se.Z,null,((l=n.config)===null||l===void 0?void 0:l.is_open_offline_assessment)&&e().createElement("span",{className:"cl-btn",onClick:()=>this.handleInputScore(n)},t("lineClassStudy.inputScore")),((c=n.config)===null||c===void 0?void 0:c.is_open_upload)&&e().createElement("span",{className:"cl-btn",onClick:()=>this.handleUploadDatum(n)},t("lineClassStudy.uploadDatum")))}}]},this.renderLeftRow=()=>{var t=this.props.t;return e().createElement(Aa.Z,null,e().createElement(Aa.Z.Item,{className:"sign-manager-bread",onClick:this.onLinkLine},t("lineClass.attendanceManagement")),e().createElement(Aa.Z.Item,null,t("lineClass.connectLine")))},this.renderRightRow=()=>{var t=this.props.t;return e().createElement("div",{className:"sign-manage-line-content-operate-right"},e().createElement(ze.Z,{onSearch:this.handleSearch,prefixCls:"sign-manage-line-content-operate-right-search",placeholder:t("lineClass.searchLineClassName")}))},this.pageChange=(t,s)=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:t,page_size:s})},()=>{this.initTableList()})},this.initTableList=(0,B.Z)(I().mark(function t(){var s,n,l,c;return I().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return s=a.state.params,n=a.props.record,P.next=4,(0,Wt.WF)({keyword:s.keyword,page_number:s.page_number,page_size:s.page_size,signId:n.id});case 4:l=P.sent,c=l.data,c&&c.code==="200000"&&a.setState({dataList:c.data.list,params:(0,o.Z)((0,o.Z)({},a.state.params),{},{total:c.data.total})});case 7:case"end":return P.stop()}},t)})),this.state={loading:!1,dataList:[],operateColumn:{},inputScoreVisible:!1,attachmentVisible:!1,uploadDatumVisible:!1,attachmentFile:[],params:{keyword:"",page_number:1,page_size:20,total:30}}}componentDidMount(){this.initTableList()}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state,n=s.loading,l=s.dataList,c=s.params,u=s.inputScoreVisible,P=s.attachmentVisible,K=s.uploadDatumVisible,ae=s.operateColumn,ee=s.attachmentFile,de=this.getTableColumns(),_e=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:Number(c.total),current:c.page_number,onChange:this.pageChange});return e().createElement("div",{className:a},e().createElement("div",{className:"".concat(a,"__content")},e().createElement(at.f,{className:"sign-manage-line-content-table",scroll:{x:"max-content",y:"100%"},columns:de,rowKey:"id",dataSource:l,pagination:_e,loading:n,headerTitle:this.renderLeftRow(),toolBarRender:this.renderRightRow,tableUUID:"4539cf28-efed-467f-bd23-c077e41e1315"})),e().createElement(wa.Z,{title:t("lineClass.inputScore"),visible:u,operateColumn:ae,type:"add",from:"rate",onCancel:()=>{this.initTableList(),this.setState({inputScoreVisible:!1})}}),e().createElement(cs.Z,{initData:{attachment:ee},operateColumn:ae,visible:K,onCancel:()=>{this.setState({uploadDatumVisible:!1})},onUploadComplete:this.onUploadComplete}),e().createElement(Yt.Z,{title:t("lineClass.trainingAttachment"),visible:P,fileId:ae.id,onCancel:()=>{this.setState({operateColumn:{},attachmentVisible:!1})}}))}}us.defaultProps={prefixCls:"sign-manage-line"};var hr=(0,f.Z)()(us),gr=r(19886),Ua=r(18329);class ds extends e().Component{constructor(i){var a;super(i);a=this,this.onLinkLine=t=>{this.setState({isLine:!this.state.isLine,record:t})},this.onLinkDetail=t=>{if(t.course_num>0)this.setState({isLine:!this.state.isLine,record:t});else{var s=t.id,n=t.source_type;(0,N.eJ)({url:"/personal/profile/checkinDetail?courseId=".concat(s,"&source_type=").concat(n,"&type=attendance")})}},this.onUploadComplete=t=>{var s=[];t.forEach(n=>{s.push(n.id)}),(0,Wt.af)({enterpriseId:Ba.ZP.enterpriseId,bizResourceList:[{bizCode:this.state.operateColumn.summary.activity_attachment_id,resourceIdList:s,isCovered:!0}]}).then(()=>{this.setState({uploadDatumVisible:!1,operateColumn:{}})}).catch(()=>{})},this.handleChangeRadio=t=>{var s=t.target.value;this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{train_status:s})},()=>{this.resetPagination()})},this.handleSearch=t=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{keyword:t})},()=>{this.resetPagination()})},this.handleDetail=t=>{(0,N.eJ)({url:"/personal/profile/checkinDetail?".concat(g.stringify({courseId:t.id}))})},this.handleInputScore=t=>{this.setState({inputScoreVisible:!0,operateColumn:t})},this.onCreateQr=t=>{this.setState({qrCodeVisible:!0,qrCodeDetail:t}),(0,Wt.gm)(t.id).then(s=>{var n=s.data.data.open_transfer_student;this.setState({openTransferStudent:n})})},this.handleUploadDatum=t=>{this.getResource(t)},this.getResource=function(){var t=(0,B.Z)(I().mark(function s(n){var l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,Wt.RX)({id:n.summary.activity_attachment_id});case 2:l=u.sent,a.setState({attachmentFile:l.data||[]},()=>{a.setState({uploadDatumVisible:!0,operateColumn:n})});case 4:case"end":return u.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.signCoursesCount=(0,B.Z)(I().mark(function t(){var s,n,l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=a.state.params,u.next=3,(0,Wt.h$)({keyword:s.keyword});case 3:n=u.sent,l=n.data,l&&l.code==="200000"&&a.setState({countList:l.data});case 6:case"end":return u.stop()}},t)})),this.pageChange=(t,s)=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:t,page_size:s})},()=>{this.initTableList()})},this.resetPagination=()=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:1,page_size:20})},()=>{this.initTableList()})},this.initTableList=(0,B.Z)(I().mark(function t(){var s,n,l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=a.state.params,u.next=3,(0,Wt.E6)({keyword:s.keyword,train_status:s.train_status,page_number:s.page_number,page_size:s.page_size});case 3:n=u.sent,l=n.data,l&&l.code==="200000"&&a.setState({list:l.data.list,params:(0,o.Z)((0,o.Z)({},a.state.params),{},{total:l.data.total})},()=>a.signCoursesCount());case 6:case"end":return u.stop()}},t)})),this.seeFile=(t,s)=>{t!==0&&this.setState({attachmentVisible:!0,operateColumn:s})},this.toolBarRender=()=>{var t=this.props,s=t.prefixCls,n=t.t,l=this.state.countList;return e().createElement("div",{className:"".concat(s,"__header")},e().createElement("div",{className:"".concat(s,"__header__tab-radio")},e().createElement(p.ZP.Group,{defaultValue:"",onChange:this.handleChangeRadio},e().createElement(p.ZP.Button,{value:""},n("common.all"),"(",l.unfinished_count+l.finished_count,")"),e().createElement(p.ZP.Button,{value:"unfinished"},n("personal.unFinish"),"(",l.unfinished_count,")"),e().createElement(p.ZP.Button,{value:"finished"},n("common.ended"),"(",l.finished_count,")"))),e().createElement("div",{className:"".concat(s,"__header__search")},e().createElement(ze.Z,{onSearch:this.handleSearch,placeholder:n("validation.pleaseEnterAttendanceName")})))},this.getTableColumns=()=>{var t=this.props.t;return[{title:t("tutorial.attendanceName"),dataIndex:"name",key:"name",fixed:"left",width:200,render:(s,n)=>e().createElement(Me.Z,{title:s,placement:"topLeft"},e().createElement("div",{className:"cl-text-btn cl-text-courseName",onClick:()=>this.onLinkDetail(n)},s||"--"))},{title:t("lineClass.listClassNum"),dataIndex:"course_num",key:"course_num",width:200},{title:t("lineClass.sourceType"),dataIndex:"source_type",key:"source_type",width:100,render:s=>{switch(s){case"offline_course":return t("lineClass.listTitle");case"study_plan":return t("common.studyTask");case"study_project":return t("learning.learningProjectAddTitle");default:return"--"}}},{title:t("lineClass.sourceTypeName"),dataIndex:"source_name",key:"source_name",width:150,render:s=>e().createElement(Me.Z,{title:s},e().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},s||"--"))},{title:t("lineClass.signInTime"),dataIndex:"sign_in_begin_time",key:"sign_in_begin_time",width:400,render:(s,n)=>{var l="",c="";if(n.sign_in_begin_time){var u=(0,Te.p6)(n.sign_in_begin_time,"yyyy-MM-dd hh:mm"),P=n.sign_in_end_time?(0,Te.p6)(n.sign_in_end_time,"yyyy-MM-dd hh:mm"):"--";l="".concat(u," ~ ").concat(P)}if(n.sign_out_begin_time){var K=(0,Te.p6)(n.sign_out_begin_time,"yyyy-MM-dd hh:mm"),ae=n.sign_out_end_time?(0,Te.p6)(n.sign_out_end_time,"yyyy-MM-dd hh:mm"):"--";c="".concat(K," ~ ").concat(ae)}return e().createElement("div",null,l&&e().createElement("div",{className:"cl-text-attendance"},e().createElement(os.Z,{color:"green"},t("lineClass.signIn")),l),c&&e().createElement("div",null,e().createElement(os.Z,{color:"green"},t("lineClass.signOut")),c))}},{title:t("common.operate"),width:135,fixed:"right",render:(s,n)=>e().createElement("span",{className:"cl-text-btn",onClick:()=>this.onCreateQr(n)},t("lineClassStudy.QRCode"))}]},this.state={operateColumn:{},inputScoreVisible:!1,attachmentVisible:!1,uploadDatumVisible:!1,qrCodeVisible:!1,qrCodeDetail:{},countList:{finished_count:0,unfinished_count:0},params:{keyword:"",train_status:"",page_number:1,page_size:20,total:0},list:[],isLoading:!1,attachmentFile:[],isLine:!1,record:{},openTransferStudent:!1}}componentDidMount(){this.initTableList()}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state,n=s.list,l=s.isLoading,c=s.params,u=s.uploadDatumVisible,P=s.attachmentVisible,K=s.inputScoreVisible,ae=s.qrCodeVisible,ee=s.operateColumn,de=s.attachmentFile,_e=s.isLine,Ie=s.record,Ue=s.qrCodeDetail,ke=s.openTransferStudent,De=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:Number(c.total),current:c.page_number,onChange:this.pageChange}),pe={mask:!0,width:700,title:t("lineClassStudy.QRCode"),footer:null,bodyStyle:{padding:0},destroyOnClose:!0,visible:ae,onCancel:()=>this.setState({qrCodeVisible:!1})},Ee=this.getTableColumns();return e().createElement("div",{className:a},e().createElement("div",{className:"".concat(a,"__content")},_e?e().createElement(hr,{onLink:this.onLinkLine,record:Ie}):e().createElement(at.f,{columns:Ee,rowKey:"id",dataSource:n,pagination:De,loading:l,scroll:{x:"max-content",y:"100%"},toolBarRender:this.toolBarRender,tableUUID:"56c9bc82-4538-48e2-9526-b5d1382bc7b4"})),e().createElement(wa.Z,{title:t("lineClass.inputScore"),visible:K,operateColumn:ee,type:"add",from:"rate",onCancel:()=>{this.initTableList(),this.setState({inputScoreVisible:!1})}}),e().createElement(cs.Z,{initData:{attachment:de},operateColumn:ee,visible:u,onCancel:()=>{this.setState({uploadDatumVisible:!1})},onUploadComplete:this.onUploadComplete}),e().createElement(Yt.Z,{title:t("lineClass.trainingAttachment"),visible:P,fileId:ee.id,onCancel:()=>{this.setState({operateColumn:{},attachmentVisible:!1})}}),e().createElement(Ua.ZP,(0,A.Z)({className:"checkin-qrcode-modal"},pe),e().createElement(gr.Z,{detail:Ue,open_transfer_student:!ke})))}}ds.defaultProps={prefixCls:"sign-manage"};var vr=(0,f.Z)()(ds);class ms extends e().Component{constructor(i){super(i);this.state={}}render(){var i=this.props.prefixCls;return e().createElement("div",{className:i},e().createElement(vr,null))}}ms.defaultProps={prefixCls:"line-class-manage"};var fr=E=>({resourceLibrary:E.resourceLibrary}),_r=(0,y.$j)(fr)((0,f.Z)()(ms));function yr(E){var i=Ba.OB.examMarking.waitMarking();return re.WY.get({url:i,params:E})}var Er=r(33490),He=r.n(Er),sa={TO_BE_MARKED:"pending",MARKED:"markEnd"};function Cr(E){var i=E.t,a=E.mark_end,t=E.pending;return[{label:"".concat(i("examination.markingPending"),"(").concat(t||0,")"),value:sa.TO_BE_MARKED},{label:"".concat(i("examination.markingEnd"),"(").concat(a||0,")"),value:sa.MARKED}]}var br=E=>{var i=E.t,a=(0,R.useState)({status:sa.TO_BE_MARKED,keyword:"",page_number:1,page_size:20}),t=(0,H.Z)(a,2),s=t[0],n=t[1],l=(0,R.useState)({list:[],pending:0,mark_end:0,total:0}),c=(0,H.Z)(l,2),u=c[0],P=c[1],K=(0,R.useState)(!1),ae=(0,H.Z)(K,2),ee=ae[0],de=ae[1];(0,R.useEffect)(()=>{de(!0),yr(s).then(pe=>{var Ee=pe.data,le=Ee.code,Ke=Ee.data;if(le==="200000"){var qe=Ke.mark_end,rt=Ke.pending,Ne=Ke.mark_list,we=Ne.list,it=Ne.total;P((0,o.Z)((0,o.Z)({},u),{},{total:it,mark_end:qe,pending:rt,list:we}))}}).catch(()=>{de(!1)}).finally(()=>{de(!1)})},[s]);var _e=pe=>{var Ee=pe.target,le=Ee.value;n((0,o.Z)((0,o.Z)({},s),{},{status:le,page_number:1}))},Ie=pe=>{var Ee=pe.id,le=pe.status;et.Z.targetTo({path:va.W.marking({exam_id:Ee,status:le})})},Ue=pe=>{var Ee=pe.status,le=pe.id,Ke=pe.create_user_name,qe=pe.avatar,rt=pe.title,Ne=pe.pending_count,we=pe.mark_end_count,it=pe.index,ft=pe.study_project_title;return e().createElement("div",{key:le,className:He()["card-container"]},e().createElement("div",{className:He()["card-content"]},e().createElement("div",{className:"".concat(He().title," ").concat(He().row," user-center__content__left__menu-item"),title:rt,onClick:()=>{Ie({id:le,status:Ee})}},rt),e().createElement("div",{className:"".concat(He()["assignment-info"]," ").concat(He().row)},e().createElement("img",{className:He().avatar,src:qe||te(),alt:""}),e().createElement("span",{className:He().name},Ke),e().createElement("span",{className:He().action},i("myExamTask.assigned"))),e().createElement(Me.Z,{title:ft},e().createElement("div",{className:"".concat(He()["task-name"]," ").concat(He().row)},ft))),e().createElement("div",{className:He()["card-footer"]},Ee===sa.TO_BE_MARKED?e().createElement(e().Fragment,null,e().createElement("div",null,e().createElement("span",{className:He()["marking-number-label"]},i("examination.markingPending")),e().createElement("span",{className:"cl-pointer"},Ne)),e().createElement("div",{className:"cl-pointer",onClick:()=>{Ie({id:le,status:Ee})}},i("examination.startMarking"))):e().createElement(e().Fragment,null,e().createElement("div",null,e().createElement("span",{className:He()["marking-number-label"]},i("examination.markingEnd")),e().createElement("span",{className:"cl-pointer"},we)),e().createElement("div",{className:"cl-pointer",onClick:()=>{Ie({id:le,status:Ee})}},i("examination.markingData")))))},ke=pe=>{var Ee=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:u.total,current:pe.page_number,defaultPageSize:pe.page_size});return u.total<=pe.page_size?null:e().createElement("div",{className:He()["pagination-container"]},e().createElement(C.Z,(0,A.Z)({},Ee,{onChange:(le,Ke)=>{n((0,o.Z)((0,o.Z)({},pe),{},{page_number:le,page_size:Ke}))}})))},De=(0,R.useMemo)(()=>Cr((0,o.Z)((0,o.Z)({},u),{},{t:i})),[i,u]);return e().createElement(Ve.Z,{spinning:ee},e().createElement("div",{className:"".concat(He()["exam-marking"])},e().createElement("div",{className:"".concat(He().header)},e().createElement(p.ZP.Group,{onChange:_e,defaultValue:sa.TO_BE_MARKED},De.map(pe=>{var Ee=pe.value,le=pe.label;return e().createElement(p.ZP.Button,{key:Ee,value:Ee},le)})),e().createElement(ze.Z,{onSearch:pe=>{n((0,o.Z)((0,o.Z)({},s),{},{keyword:pe,page_number:1}))},placeholder:i("examination.inputPlaceholder"),width:272})),u.list.length>0?e().createElement("div",{className:He()["content-container"]},u.list.map((pe,Ee)=>Ue((0,o.Z)((0,o.Z)({},pe),{},{status:s.status,index:Ee})))):e().createElement(Bt.Z,{className:He()["no-marking-data"]}),ke(s)))},Sr=(0,f.Z)()(br),Sa=h.Z.TabPane;class Tr extends e().Component{constructor(){super(...arguments);this.state={defaultKey:"1",examType:"old"},this.handleQueryToJump=()=>{var i=g.parse(ue.m8.location.search),a=i.tab,t;switch(a){case"lineClass":case"teachingManagement":case"resultsApproval":t="1";break;case"workApproval":t="3";break;case"reportApproval":t="4";break;case"zexaMark":t="5";break;default:t="1"}this.setState({defaultKey:t})}}componentDidMount(){this.funGetEnterpriseExamType(),this.handleQueryToJump()}componentDidUpdate(i){if(i.resourceLibrary.refresh!==this.props.resourceLibrary.refresh){var a=g.parse(ue.m8.location.search),t=a.tab;t&&this.handleQueryToJump()}}funGetEnterpriseExamType(){var i=this;return(0,B.Z)(I().mark(function a(){var t;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Ja.uH)();case 2:t=n.sent,i.setState({examType:t});case 4:case"end":return n.stop()}},a)}))()}render(){var i=this.props.t,a=this.state,t=a.defaultKey,s=a.examType;return e().createElement(e().Fragment,null,e().createElement(h.Z,{defaultActiveKey:"1",activeKey:t,className:"center-user-tab",onChange:n=>this.setState({defaultKey:n})},e().createElement(Sa,{tab:i("userCenter.signInManagement"),key:"1"},e().createElement(_r,null)),e().createElement(Sa,{tab:i("personal.workApproval"),key:"3"},e().createElement(dr,null)),e().createElement(Sa,{tab:i("submitReport.reportApprove"),key:"4"},e().createElement(pr,null)),s==="new"&&e().createElement(Sa,{tab:i("examination.examinationMarking"),key:"5"},e().createElement(Sr,null))))}}var Pr=E=>({resourceLibrary:E.resourceLibrary}),Wa=(0,y.$j)(Pr)((0,f.Z)()(Tr)),Ir=r(97882),Zr=r(5105),ps=r(12532),hs=r(93485);function Nr(E){var i=E.t,a=E.isLoading,t=E.list,s=E.headerTitle,n=E.toolBarRender,l=E.type,c=E.entityTypeList;function u(){return[{title:i("help.title"),dataIndex:l==="me"?"title":"task_name",key:l==="me"?"title":"task_name",render:K=>e().createElement(Me.Z,{placement:"top",title:K},e().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},K||"--"))},{title:i("approval.createUser"),dataIndex:"create_user",key:"create_user",width:100,render:K=>e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},K||"--")},{title:i("approval.businessType"),dataIndex:l==="me"?"biz_type":"business_type",key:l==="me"?"biz_type":"business_type",width:220,render:K=>{var ae="--",ee=(0,hs.Z)(c),de;try{for(ee.s();!(de=ee.n()).done;){var _e=de.value;if(_e.biz_type===K||_e.business_type===K){ae=_e.biz_name;break}}}catch(Ie){ee.e(Ie)}finally{ee.f()}return e().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},ae)}},{title:i("approval.startTime"),dataIndex:"create_time",key:"create_time",render:K=>e().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},(0,Te.p6)(K))},{title:i("approval.finishTime"),dataIndex:l==="me"?"complete_time":"completion_time",width:220,key:l==="me"?"complete_time":"completion_time",render:K=>K?e().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},(0,Te.p6)(K)):"--"},{title:i("approval.status"),width:100,dataIndex:l==="me"?"status":"f_status",key:l==="me"?"status":"f_status",render:(K,ae)=>{switch(K){case"approval_pass":return i("approval.passed");case"approval_reject":return i("approval.rejected");case"underway":return i("approval.going");case"approval_going":return i("approval.going");case"approval_revoked":return i("approval.revoked");case"abolish":return i("approval.revoked");case"finish":if(!ae.task_content)return"--";var ee=JSON.parse(ae.task_content).operation_type;return ee==="agree"?i("approval.passed"):ee==="refuse"?i("approval.rejected"):"--";default:return"--"}}},{title:i("common.operate"),width:60,fixed:"right",render:(K,ae)=>e().createElement("a",{onClick:()=>P(ae)},i("common.viewDetails"))}]}function P(K){et.Z.targetTo({path:"/personal/approval/approved-process?approvalType=".concat(l,"&instanceId=").concat(K.instance_id)})}return e().createElement("div",null,e().createElement(at.f,{loading:a,dataSource:t,columns:u(),rowKey:K=>K.instance_id,pagination:!1,headerTitle:s,toolBarRender:n,scroll:{x:"max-content",y:"100%"},tableUUID:"6d9a844a-4fb8-4dec-93c9-9ea15e0836b8"}))}var Lr=(0,f.Z)()(Nr),xr=r(63333),na=r.n(xr),Fa=h.Z.TabPane,Ta=Xe.Z.Option;function Dr(E){var i=E.t,a=(0,R.useState)("title"),t=(0,H.Z)(a,2),s=t[0],n=t[1],l=(0,R.useState)([]),c=(0,H.Z)(l,2),u=c[0],P=c[1],K=(0,R.useState)({status:"",bizType:"",type:"pending",title:"",createUserId:"",pageNumber:1,pageSize:20}),ae=(0,H.Z)(K,2),ee=ae[0],de=ae[1],_e=(0,R.useState)([]),Ie=(0,H.Z)(_e,2),Ue=Ie[0],ke=Ie[1],De=(0,R.useState)(0),pe=(0,H.Z)(De,2),Ee=pe[0],le=pe[1],Ke=(0,R.useState)(!1),qe=(0,H.Z)(Ke,2),rt=qe[0],Ne=qe[1];(0,R.useEffect)(()=>{function Ce(){(0,Zr.zk)().then(Oe=>{var nt=Oe.data;P(nt.data)})}Ce()},[]),(0,R.useEffect)(()=>{ee.type==="me"?it():we()},[ee]);function we(){Ne(!0),(0,ps.B3)((0,o.Z)((0,o.Z)({},ee),{},{type:ee.type==="pending"?"wait":"done",status:ee.status==="approval_complete"?"finish":ee.status==="approval_revoked"?"abolish":ee.status==="approval_going"?"underway":""})).then(Ce=>{var Oe=Ce.data;ke(Oe.data.list),le(Oe.data.total),Ne(!1)}).catch(()=>{Ne(!1)})}function it(){Ne(!0),(0,ps.zm)(ee).then(Ce=>{var Oe=Ce.data;ke(Oe.data.list),le(Oe.data.total),Ne(!1)}).catch(()=>{Ne(!1)})}function ft(Ce){var Oe=Ce.target.value;de((0,o.Z)((0,o.Z)({},ee),{},{pageNumber:1,status:Oe}))}function pt(Ce){n(Ce)}function Zt(Ce){de((0,o.Z)((0,o.Z)({},ee),{},{createUserId:Ce,title:""}))}function Ct(){return e().createElement("div",{className:na().selectBusiness},e().createElement(Xe.Z,{onChange:Ce=>de((0,o.Z)((0,o.Z)({},ee),{},{bizType:Ce})),placeholder:i("approval.selectBusiness"),className:"cl-search-normal-width",value:ee.bizType},e().createElement(Ta,{value:""},i("common.all")),u.map(Ce=>e().createElement(Ta,{value:Ce.biz_type,key:Ce.biz_type},Ce.biz_name))))}function ut(){return e().createElement(e().Fragment,null,ee.type!=="pending"&&e().createElement(p.ZP.Group,{value:ee.status,onChange:ft},e().createElement(p.ZP.Button,{value:""},i("common.all")),e().createElement(p.ZP.Button,{value:"approval_complete"},i("approval.complete")),e().createElement(p.ZP.Button,{value:"approval_going"},i("approval.going")),e().createElement(p.ZP.Button,{value:"approval_revoked"},i("approval.revoked"))),e().createElement("div",null,e().createElement(Xe.Z,{className:"cl-org-left__top__select",value:s,onChange:pt,style:{width:100}},e().createElement(Ta,{value:"title"},i("help.title")),e().createElement(Ta,{value:"type"},i("approval.createUser"))),s==="title"?e().createElement(ze.Z,{onSearch:Ce=>de((0,o.Z)((0,o.Z)({},ee),{},{pageNumber:1,title:Ce,createUserId:""})),width:"272px",placeholder:i("validation.pleaseEnter")}):e().createElement(Ir.Z,{onSearch:Zt,placeholder:i("course.search"),width:"272px"})))}return e().createElement("div",{className:na().approvalPage},e().createElement(h.Z,{className:na().approvalTab,activeKey:ee.type,onChange:Ce=>de((0,o.Z)((0,o.Z)({},ee),{},{pageNumber:1,type:Ce,bizType:"",status:""}))},e().createElement(Fa,{tab:i("approval.pending"),key:"pending"}),e().createElement(Fa,{tab:i("approval.done"),key:"processed"}),e().createElement(Fa,{tab:i("approval.iInitiated"),key:"me"})),e().createElement("div",{className:na().approvalList},Ct(),e().createElement(Lr,{entityTypeList:u,list:Ue,type:ee.type,isLoading:rt,refresh:()=>de((0,o.Z)((0,o.Z)({},ee),{},{pageNumber:1})),toolBarRender:ut}),Ee>0&&e().createElement("div",{className:na().paginationContainer},e().createElement(C.Z,(0,A.Z)({},S.XE.INITIAL_PAGINATION,{current:ee.pageNumber,total:Ee,onChange:(Ce,Oe)=>{de((0,o.Z)((0,o.Z)({},ee),{},{pageSize:Oe,pageNumber:Ce}))}})))))}var gs=(0,f.Z)()(Dr),Mr=r(28107),Or=r(58546),Rr=r(54792),kr=r(26697),wr=r(30389),ra=r(86726),Ft=r(26096),Ar=r(16598);class vs extends e().PureComponent{constructor(i){super(i);this.handleReferenceList=(a,t)=>{this.setState(s=>({referenceWithOtherConfig:(0,o.Z)((0,o.Z)({},s.referenceWithOtherConfig),{},{visible:!s.referenceWithOtherConfig.visible,resourceId:a||"",operation:t||""})}))},this.publish=a=>{var t=this.props,s=t.record,n=t.t;if(s.reference_plan_count>0){this.handleReferenceList(s.course_id,"cancelPublish");return}D.Z.confirm({title:n("common.tip"),content:n(a==="release"?"personal.okPublish":"personal.okCancelPublish"),onOk:()=>{this.publishOrUnPublish(a)}})},this.publishOrUnPublish=a=>{var t=this.props,s=t.record,n=t.t,l=S.ZP.Personal.courseReleaseOrNot(s.course_id),c={action:a};re.qg.post({url:l,data:c}).then(u=>{u.data.code===0&&(k.default.success(n(a==="release"?"personal.publishSuccess":"personal.cancelPublishSuccess")),this.props.refresh())})},this.edit=()=>{var a=this.props,t=a.record,s=a.t;if(t.course_type==="micro_course"){k.default.warn(s("personal.editMicroTip"));return}t.reference_plan_count>0?this.handleReferenceList(t.course_id,"continueEdit"):(0,N.eJ)({url:"/course/management/detail?courseId=".concat(t.course_id,"&history=myCreate")})},this.continueEdit=()=>{var a=this.state.referenceWithOtherConfig.resourceId;(0,N.eJ)({url:"/course/management/detail?courseId=".concat(a,"&history=myCreate")})},this.remove=()=>{var a=this.props,t=a.record,s=a.t;t.reference_plan_count>0?this.handleReferenceList(t.course_id,"delete"):D.Z.confirm({title:s("common.tip"),content:s("personal.sureToDelete"),onOk:()=>{var n=S.ZP.Personal.courseDelete(),l={ids:t.course_id};re.qg.post({url:n,data:l}).then(c=>{c.data.code===0&&(k.default.success(s("personal.removeSuccess")),this.props.refresh())}).catch(()=>{this.props.refresh()})}})},this.showChangeClassify=a=>{var t=a.record,s=t.classify_id,n=t.classify_name;this.setState(l=>({classifyProps:(0,o.Z)((0,o.Z)({},l.classifyProps),{},{visible:!0,selectedKeys:[s],selectedNames:[n]})}))},this.handleCategoryCancel=()=>{this.setState(a=>({classifyProps:(0,o.Z)((0,o.Z)({},a.classifyProps),{},{visible:!1,selectedKeys:[],selectedNames:[]})}))},this.handleCategoryOk=a=>{var t=a.node,s=this.props,n=s.record,l=s.t,c=t.id,u=S.ZP.CourseManageList.setClassify(),P={course_ids:n.course_id,classify_id:c};c&&re.qg.post({url:u,data:P}).then(()=>{k.default.success(l("personal.setCourseClassifySuccess")),this.handleCategoryCancel(),this.props.refresh()})},this.showSetScore=()=>{var a=this.props.record;this.setState(t=>({setScoreConfig:(0,o.Z)((0,o.Z)({},t.setScoreConfig),{},{visible:!0,initialValue:a.credit})}))},this.handleScoreCancel=()=>{this.setState(a=>({setScoreConfig:(0,o.Z)((0,o.Z)({},a.setScoreConfig),{},{visible:!1})}))},this.handleScoreOk=a=>{var t=a.value,s=this.props,n=s.record,l=s.t,c=S.ZP.CourseManageList.setScore(),u={course_ids:n.course_id,credit:t};re.qg.post({url:c,data:u}).then(()=>{k.default.success(l("personal.setCourseScoreSuccess")),this.props.refresh()}),this.handleScoreCancel()},this.showSetEmployee=()=>{var a=this.props.record,t=a.is_all,s=a.department_list,n=a.post_list,l=a.group_list,c=a.user_list;this.setState({setEmployeeConfig:{visible:!0,initialParams:{employeeRange:{rangeType:t,rangeList:{dept:s,post:n,group:l,user:c}}}}})},this.handleEmployeeCancel=()=>{this.setState({setEmployeeConfig:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=a=>{var t=this.props,s=t.record,n=t.t,l=a.isAll,c=a.departmentIds,u=a.groupIds,P=a.postIds,K=a.userIds,ae=a.qy_we_chat_vo,ee=S.ZP.CourseManageList.setBatchEmployee(),de={course_ids:s.course_id,department_ids:c,group_ids:u,is_all:l,post_ids:P,user_ids:K,qy_we_chat_vo:ae};re.WY.post({url:ee,data:de}).then(()=>{k.default.success(n("personal.batchSetRangeSuccess")),this.props.refresh()}),this.handleEmployeeCancel()},this.clickAIUpdate=()=>{k.default.warning(this.props.t("common.maintain"))},this.renderOperate=()=>{var a=this.props.userInfo.enterpriseVersion=="comprehensive"&&(0,ra.H3)("ai_upgrade",this.state.allowActions),t=this.props,s=t.t,n=t.record,l=n.course_status,c=this.state.blackList,u=[{type:"publish",visible:["draft","reject"].indexOf(l)>=0,title:s("common.release"),click:()=>this.publish("release")},{type:"edit",visible:["draft","reject","release_failed"].indexOf(l)>=0,title:s("common.edit"),click:this.edit},{type:"remove",visible:["draft","reject","releasing","release_failed"].indexOf(l)>=0,title:s("common.delete"),click:this.remove},{type:"aiUpdate",visible:n.ai_upgrade_status!=="not_support"&&a&&["draft","reject","released","releasing","release_failed"].indexOf(l)>=0,title:s("course.AIUpdate"),click:()=>this.clickAIUpdate()},{type:"unpublish",visible:["released"].indexOf(l)>=0,title:s("courseManage.cancelPublished"),click:()=>this.publish("cancel")},{type:"setCredits",visible:["released"].indexOf(l)>=0,title:s("courseManage.setCredits"),click:this.showSetScore},{type:"adjustClassification",visible:["released"].indexOf(l)>=0,title:s("courseManage.adjustClassification"),click:()=>this.showChangeClassify({record:n})},{type:"setTheVisibility",visible:["released"].indexOf(l)>=0,title:s("courseManage.setTheVisibility"),click:this.showSetEmployee}];return c.aiUpdateBut||(u=u.filter(P=>P.type!=="aiUpdate")),e().createElement(Ar.Z,{buttons:u})},this.moreOperate=(a,t)=>{var s=this.props,n=s.t,l=s.record,c=this.state.blackList,u=a.map(P=>{switch(P.type){case"publish":return e().createElement(Ft.Z,{type:t,key:P.type,title:n("common.release"),click:()=>this.publish("release")});case"edit":return e().createElement(Ft.Z,{type:t,key:P.type,title:n("common.edit"),click:this.edit});case"remove":return e().createElement(Ft.Z,{type:t,key:P.type,title:n("common.delete"),click:this.remove});case"aiUpdate":return c.aiUpdateBut?null:e().createElement(Ft.Z,{type:t,key:P.type,title:n("course.AIUpdate"),click:()=>this.clickAIUpdate()});case"unpublish":return e().createElement(Ft.Z,{type:t,key:P.type,title:n("courseManage.cancelPublished"),click:()=>this.publish("cancel")});case"setCredits":return e().createElement(Ft.Z,{type:t,key:P.type,title:n("courseManage.setCredits"),click:this.showSetScore});case"adjustClassification":return e().createElement(Ft.Z,{type:t,key:P.type,title:n("courseManage.adjustClassification"),click:()=>this.showChangeClassify({record:l})});case"setTheVisibility":return e().createElement(Ft.Z,{type:t,key:P.type,title:n("courseManage.setTheVisibility"),click:this.showSetEmployee});default:return null}});return t==="more"?e().createElement(Ht.Z,null,u):u},this.onCancel=()=>{this.setState({AIModalFlag:!1},()=>{this.props.refresh()})},this.state={classifyProps:{visible:!1,title:i.t("personal.chooseClassify"),selectedKeys:[],selectedNames:[]},setScoreConfig:{title:i.t("courseManage.setCredits"),labelTxt:i.t("common.credit"),initialValue:"",visible:!1},setEmployeeConfig:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},referenceWithOtherConfig:{visible:!1,type:"course",operation:"",resourceId:"",onCancel:this.handleReferenceList,onOk:this.handleReferenceList},AIModalFlag:!1,allowActions:[],blackList:{aiUpdateBut:(0,N.eY)("MYCREATE_OPERATE_AIUPDATE_BUT")}}}componentDidMount(){this.props.dispatch({type:"user/getManageMenuData"}).then(i=>{this.setState({allowActions:(0,ra.V9)("library",i)})})}render(){var i=this.props.t,a=this.state,t=a.classifyProps,s=a.setScoreConfig,n=a.setEmployeeConfig,l=a.referenceWithOtherConfig;return e().createElement("div",null,this.renderOperate(),e().createElement(Or.Z,(0,A.Z)({},t,{onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),e().createElement(Rr.Z,(0,A.Z)({},s,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),n.visible&&e().createElement(wr.Z,(0,A.Z)({},n,{title:i("courseManage.setTheVisibility"),orgProps:{title:i("component.chooseVisibleScope")},isLoading:!n.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk,mode:["all","part","private"]})),e().createElement(Mr.Z,(0,A.Z)({},l,{handleReferenceList:this.handleReferenceList,continueEdit:this.continueEdit})),this.state.AIModalFlag&&e().createElement(kr.Z,{visible:this.state.AIModalFlag,record:[this.props.record],onCancel:()=>this.onCancel()}))}}vs.defaultProps={record:{},refresh:()=>{}};var Br=(0,y.$j)(E=>({userInfo:E.user}))((0,f.Z)()(vs));class Ur extends e().Component{constructor(i){var a;super(i);a=this,this.getTableColumn=()=>{var t=this.props.t,s=this.props.userInfo.enterpriseVersion=="comprehensive"&&(0,ra.H3)("ai_upgrade",this.state.allowActions),n=[{title:t("personal.courseName"),dataIndex:"title",key:"title",width:150,fixed:"left",render:(l,c)=>e().createElement("div",{className:"link-title",onClick:()=>this.handleToCourseDetail(c)},c.course_type==="micro_course"?e().createElement("span",{className:"link-title__course-type"},t("userCenter.microCourse")):null,l)},{title:t("personal.belongClassify"),dataIndex:"classify_name",key:"classify_name",width:120},{title:t("personal.status"),width:70,dataIndex:"course_status",key:"course_status",render:l=>{switch(l){case"draft":return t("personal.draft");case"approving":return t("personal.underReview");case"reject":return t("personal.reject");case"released":return t("personal.published");case"releasing":return t("personal.publishing");case"release_failed":return t("personal.publishingFailed");default:break}}},{title:t("personal.approvalComments"),dataIndex:"approve_view",key:"approve_view",width:180,render:l=>e().createElement("div",null,l)},{title:t("personal.updateTime"),dataIndex:"update_date",key:"update_date",width:100,render:l=>l?(0,Te.p6)(l,"yyyy-MM-dd"):""},{title:t("common.operate"),width:200,key:"operate",fixed:"right",render:(l,c)=>e().createElement(Br,{record:c,refresh:this.props.refresh})}];return s&&n.splice(-1,0,{title:this.props.t("course.isAIUpdate"),dataIndex:"createUserName",key:"createUserName",width:130,render:(l,c)=>e().createElement("span",null,this.statusMap(c))}),n},this.statusMap=t=>{var s;switch(t.ai_upgrade_status){case"not_processed":s=this.props.t("course.notUpdate");break;case"processing":s=this.props.t("course.updating");break;case"processed":s=this.props.t("course.dealSuccess");break;case"failed":s=this.props.t("course.updateFailed");break;default:s="/"}return s},this.handleToCourseDetail=function(){var t=(0,B.Z)(I().mark(function s(n){var l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(l=a.props.onShowWei,n.course_type!=="micro_course"){u.next=5;break}n.resource_type==="image"?l&&l(n.course_id):(0,N.eJ)({url:"/miniCourse/watch?courseId=".concat(n.course_id,"&isNewVersion=").concat(n.is_new_version,"&classifyId=").concat(n.classify_id)}),u.next=8;break;case 5:return u.next=7,a.props.dispatch({type:"currentRoute/updateState",payload:{shouldAddScanCount:!0}});case 7:(0,N.eJ)({url:"/course/enterpriseCourse?courseId=".concat(n.course_id)});case 8:case"end":return u.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.state={allowActions:[]}}componentDidMount(){this.props.dispatch({type:"user/getManageMenuData"}).then(i=>{this.setState({allowActions:(0,ra.V9)("library",i)})})}render(){var i=this.props,a=i.isLoading,t=i.list,s=i.headerTitle,n=i.toolBarRender,l=this.getTableColumn();return e().createElement(at.f,{loading:a,dataSource:t,columns:l,rowKey:c=>c.course_id,pagination:!1,headerTitle:s,toolBarRender:n,scroll:{x:900},tableUUID:"bbc4e278-bf43-4325-94dd-817e49e5ba34"})}}var Wr=(0,y.$j)(E=>({userInfo:E.user}))((0,f.Z)()(Ur)),Et={pageNumber:1,pageSize:20},Fr=E=>{var i=E.user;return{userId:i.id}},zr={getSetting:S.ZP.advancedSetting.getSetting},$r=Xe.Z.Option;class Kr extends e().Component{constructor(i){super(i);this.getMyCreate=()=>{var a=this.props.userId,t=S.ZP.Personal.myCreateCourse(a),s=this.state,n=s.course_status,l=s.keyword,c={course_status:n,title:l,page_number:Et.pageNumber,page_size:Et.pageSize};this.setState({isLoading:!0}),re.WY.get({url:t,params:c}).then(u=>{this.setState({total:u.data.total,list:u.data.list,isLoading:!1})})},this.pageChange=a=>{Et.pageNumber=a,this.getMyCreate()},this.pageSizeChange=(a,t)=>{Et.pageSize=t,this.getMyCreate()},this.statusChange=a=>{Et.pageNumber=1,this.setState({course_status:a},this.getMyCreate)},this.search=a=>{Et.pageNumber=1,this.setState({keyword:a},()=>{this.getMyCreate()})},this.refresh=()=>{Et.pageNumber=1,this.getMyCreate()},this.handleShowWei=a=>{this.setState({weiProps:{visible:!0,flag:"miniCourse",scene:"courseId=".concat(a,"&flag=miniCourse")}})},this.getSetting=()=>{re.WY.get({url:zr.getSetting(),params:{page_size:9999,page_number:1}}).then(a=>{var t=(0,hs.Z)(a.data.list),s;try{for(t.s();!(s=t.n()).done;){var n=s.value;if(n.type==="create_course"&&(this.setState({showCreateBtn:n.status}),n.status&&this.props.dispatch({type:"user/getManageMenuData"})),n.type==="document_duration_limit"){var l=JSON.parse(n.actions),c=n.switch_status==="OPEN"?l[0].value:0;localStorage.setItem("documentStudyLimit",c),this.props.dispatch({type:"advancedSetting/updateDefaultDocumentLimit",payload:{documentStudyLimit:c}})}}}catch(u){t.e(u)}finally{t.f()}})},this.handleCancelWei=()=>{this.setState({weiProps:{visible:!1,flag:"",scene:""}})},this.toolBarRender=()=>{var a=this.props.t;return e().createElement(ze.Z,{onSearch:this.search,width:"272px",placeholder:a("searchInputPlaceholder.relationCourse")})},this.headerTitle=()=>{var a=this.state.showCreateBtn,t=this.props.t;return e().createElement("div",null,a&&e().createElement(e().Fragment,null,e().createElement(et.Z,{to:"/course/management/create",projectType:"student"},e().createElement(M.Z,{type:"primary"},e().createElement(Qe.Z,{iconClass:"iconf-upload-course"}),t("personal.uploadCourse"))),e().createElement(et.Z,{to:"/course/management/detail?history=myCreate",projectType:"student"},e().createElement(M.Z,{style:{marginLeft:16}},e().createElement(Qe.Z,{iconClass:"iconf-creat-course"}),t("personal.createCourse")))))},this.state={list:[],total:0,isLoading:!1,course_status:"",keyword:"",weiProps:{visible:!1,flag:"",scene:""},showCreateBtn:!1}}componentDidMount(){this.getMyCreate(),this.getSetting()}render(){var i=this.props.t,a=this.state,t=a.list,s=a.total,n=a.isLoading,l=a.weiProps,c=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:Et.pageNumber,total:s,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange}),u=[{value:"",label:i("personal.allStates")},{value:"draft",label:i("personal.draft")},{value:"approving",label:i("personal.underReview")},{value:"reject",label:i("personal.reject")},{value:"released",label:i("personal.published")},{value:"releasing",label:i("personal.publishing")},{value:"release_failed",label:i("personal.publishingFailed")}];return e().createElement("div",{className:"my-create"},e().createElement("div",null,e().createElement(Xe.Z,{defaultValue:"",className:"cl-search-normal-width",onChange:this.statusChange},u.map(P=>e().createElement($r,{value:P.value,key:P.value},P.label)))),e().createElement("div",{className:"my-create-list"},e().createElement("div",{className:"my-create-list-table"},e().createElement(Wr,{list:t,isLoading:n,refresh:this.refresh,onShowWei:this.handleShowWei,headerTitle:this.headerTitle(),toolBarRender:this.toolBarRender})),s>Et.pageSize||!c.hideOnSinglePage?e().createElement("div",{className:"my-create-list-pagination"},e().createElement(C.Z,c)):null,e().createElement(Qt.Z,{visible:l.visible,option:l,onCancel:this.handleCancelWei,title:i("component.microCourseScan"),tip:"component.useCustom"})))}componentWillUnmount(){Et.pageNumber=1,Et.pageSize=20}}var jr=(0,y.$j)(Fr)((0,f.Z)()(Kr)),zt={page_number:1,page_size:20},Vr=E=>{var i=E.user;return{isAdmin:i.isAdmin}};class Yr extends e().Component{constructor(i){super(i);this.getMyBuyedList=()=>{var a=S.ZP.Personal.myBuyedList(),t=this.props.isAdmin,s={isAdmin:t?1:0,page_number:zt.page_number,page_size:zt.page_size};this.setState({isLoading:!0}),re.WY.get({url:a,params:s}).then(n=>{this.setState({isLoading:!1,list:n.data.list,total:n.data.total})})},this.pageChange=a=>{zt.page_number=a,this.getMyBuyedList()},this.pageSizeChange=(a,t)=>{zt.page_size=t,this.getMyBuyedList()},this.jumpDetail=a=>{a.study_project_id?(0,N.eJ)({url:"/training/trainingProject/traineeView?id=".concat(a.course_id,"&").concat(a.study_project_id,"&source=first")}):(0,N.eJ)({url:"/course/purchasedCourse?courseId=".concat(a.good_id)})},this.state={list:[],total:0,isLoading:!1}}componentDidMount(){this.getMyBuyedList()}render(){var i=this.state,a=i.list,t=i.total,s=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:zt.page_number,total:t,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return e().createElement("div",{className:"my-buyed"},e().createElement("div",{className:"my-buyed-list"},e().createElement("div",{className:"my-buyed-list-table"},a.length===0?e().createElement(Ye.Z,{image:Ye.Z.PRESENTED_IMAGE_SIMPLE}):a.map(n=>e().createElement("div",{className:"my-buyed-list-table-card",onClick:()=>this.jumpDetail(n)},e().createElement("img",{src:n.cover,alt:""}),e().createElement("div",{className:"my-buyed-list-table-card-info"},e().createElement("p",null,n.good_name),e().createElement("p",null,n.scope_name))))),t>zt.page_size||!s.hideOnSinglePage?e().createElement("div",{className:"my-buyed-list-pagination"},e().createElement(C.Z,s)):null))}componentWillUnmount(){zt.page_number=1,zt.page_size=20}}var Gr=(0,y.$j)(Vr)((0,f.Z)()(Yr)),Xi=r(20136),fs=r(55241);function Qr(E){var i=E.t;return e().createElement("div",{className:"customer-service"},e().createElement("img",{className:"service-img",src:"".concat("https://oss.coolcollege.cn","/1789964310789885952.jpg"),alt:"\u5BA2\u670D\u4E8C\u7EF4\u7801"}),e().createElement("div",{className:"service-contnet"},e().createElement("div",{className:"contnet-text"},i("component.dingTalkCode")),e().createElement("div",{className:"contnet-tel"},i("component.serviceHotline"),"\uFF1A"),e().createElement("div",{className:"contnet-tel"},"010-86399977")))}var _s=(0,f.Z)()(Qr);class Hr extends e().Component{constructor(i){super(i);this.showModal=()=>{this.setState({visible:!0})},this.handleCancel=()=>{this.props.closeModal()},this.filterMoney=a=>"\xA5".concat((a/100).toFixed(2)),this.renderContent=()=>{var a=this.props.t,t=this.state.data,s=localStorage.getItem("themeColor")||"#465DCD";return e().createElement("div",{className:"order-detail"},e().createElement("div",{className:"detail-text"},a("payment.orderNumber"),"\uFF1A",e().createElement("span",{className:"order-number",style:{color:s}},t.orderId)),e().createElement("div",{className:"detail-text"},a("payment.orderDate"),"\uFF1A",e().createElement("span",null,(0,Te.p6)(t.paidtime,"yyyy-MM-dd"))),e().createElement("div",{className:"detail-text"},a("integralMall.productName"),"\uFF1A",e().createElement("span",null,t.goodsName)),e().createElement("div",{className:"detail-text"},a("payment.orderAmount"),"\uFF1A",e().createElement("span",null,this.filterMoney(t.payFee)+a("payment.moneyUnit"))),e().createElement("div",{className:"detail-text"},a("payment.paymentStatus"),"\uFF1A",e().createElement("span",null,a("personal.paid"))),e().createElement("div",{className:"detail-footer"},e().createElement("div",{className:"customer"},"*",a("payment.invoice"),e().createElement(fs.Z,{content:e().createElement(_s,null),trigger:"hover"},e().createElement("span",{style:{color:s}},a("payment.service")))),e().createElement("div",{className:"price"},a("payment.payment"),"\uFF1A",e().createElement("span",null,this.filterMoney(t.payFee)+a("payment.moneyUnit")))))},this.state={visible:i.visible,data:{}}}static getDerivedStateFromProps(i,a){var t=i.visible,s=i.data;return t!==a.visible?{visible:t,data:s}:null}render(){var i=this.state.visible,a=this.props.t;return e().createElement(D.Z,{visible:i,title:a("payment.orderDetails"),onCancel:this.handleCancel,footer:null},this.renderContent())}}var Jr=(0,f.Z)("",{withRef:!0})(Hr),Rt={pageNumber:1,pageSize:20},Xr={1:"".concat("https://oss.coolcollege.cn","/1796308340926713856.png"),3:"".concat("https://oss.coolcollege.cn","/1796308343288107008.png")},qr=E=>({userInfo:E.user,corpId:E.user.corpId});class ei extends e().Component{constructor(i){super(i);this.getOrderList=()=>{var a=S.ZP.Personal.getPlatformOrderlist({corpId:this.props.corpId}),t={pageNumber:Rt.pageNumber,pageSize:Rt.pageSize};this.setState({isLoading:!0}),re.WY.get({url:a,params:t}).then(s=>{this.setState({isLoading:!1,list:s.data.list,total:s.data.total})})},this.pageChange=a=>{Rt.pageNumber=a,this.getOrderList()},this.pageSizeChange=(a,t)=>{Rt.pageSize=t,this.getOrderList()},this.filterMoney=a=>"\xA5".concat((a/100).toFixed(2)),this.linkToDetail=(a,t,s)=>{var n=a;n.index=t,n.orderStatusText=s,a.study_project_id?(0,N.eJ)({url:"/training/trainingProject/traineeView?id=".concat(a.course_id,"&").concat(a.study_project_id,"&source=first")}):this.setState({visible:!0,detailData:n})},this.closeModal=()=>{this.setState({visible:!1})},this.linkToPay=a=>{(0,N.eJ)({url:"/payment?orderId=".concat(a)})},this.state={list:[],total:0,isLoading:!1,visible:!1,detailData:{}}}componentDidMount(){this.getOrderList()}render(){var i=this.props.t,a=this.state,t=a.total,s=a.list,n=a.isLoading,l=a.visible,c=a.detailData,u=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{defaultPageSize:Rt.pageSize,current:Rt.pageNumber,total:t,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return e().createElement("div",{className:"my-order"},e().createElement("div",{className:"my-order-list"},n?e().createElement("div",{className:"spin-container"},e().createElement(Ve.Z,null)):null,e().createElement("div",{className:"my-order-list-scroll"},s.length>0?s.map(P=>e().createElement("div",{key:P.id,className:"my-order-list-item order-item",onClick:()=>this.linkToDetail(P)},e().createElement("div",{className:"order-item-title"},e().createElement("div",null,e().createElement("span",{className:"order-item-title-label"},i("personal.order")," "),e().createElement("span",{className:"order-item-title-id"},P.orderId),e().createElement("span",{className:"order-item-title-time"},"(",(0,Te.p6)(P.paidtime,"yyyy-MM-dd hh:mm:ss"),")")),e().createElement("span",{className:"order-item-title-money"},i("personal.totalAmount")," ",this.filterMoney(P.payFee)+i("payment.moneyUnit"))),e().createElement("div",{className:"order-item-detail"},e().createElement("div",{className:"order-item-good"},e().createElement("div",{className:"good-cover"},e().createElement("img",{src:P.study_project_id?P.cover:Xr[P.type],alt:""})),e().createElement("div",{className:"good-info"},e().createElement("div",{className:"good-info-title"},P.goodsName),e().createElement("div",{className:"good-info-price"},e().createElement("span",{className:"good-info-price-count"},i("cart.quantity"),"\uFF1A",P.subQuantity))),e().createElement("div",{className:"good-pay"},e().createElement("div",{className:"pay-state"},i("personal.paid"))))))):e().createElement(Ye.Z,{image:Ye.Z.PRESENTED_IMAGE_SIMPLE})),t>Rt.pageSize||!u.hideOnSinglePage?e().createElement("div",{className:"my-order-list-pagination"},e().createElement(C.Z,u)):null),e().createElement(Jr,{visible:l,data:c,closeModal:this.closeModal}))}componentWillUnmount(){Rt.pageNumber=1,Rt.pageSize=20}}var ti=(0,y.$j)(qr)((0,f.Z)()(ei)),$t={pageNumber:1,pageSize:20};class ai extends e().Component{constructor(i){super(i);this.getCollectList=()=>{var a=S.ZP.Personal.getCollectList(),t={pageNumber:$t.pageNumber,pageSize:$t.pageSize};this.setState({isLoading:!0}),re.WY.get({url:a,params:t}).then(s=>{this.setState({isLoading:!1,list:s.data.list,total:s.data.total})})},this.pageChange=a=>{$t.pageNumber=a,this.getCollectList()},this.pageSizeChange=(a,t)=>{$t.pageSize=t,this.getCollectList()},this.linkToDetail=a=>{var t=a.goodId,s=a.flag,n="";s===1?n="/course/coursePackage?coursePackageId=".concat(t):n="/course/platformCourse?courseId=".concat(t),(0,N.eJ)({url:n})},this.state={list:[],total:0,isLoading:!1}}componentDidMount(){this.getCollectList()}render(){var i=this.props.t,a=this.state,t=a.list,s=a.total,n=a.isLoading,l=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{current:$t.pageNumber,total:s,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange});return e().createElement("div",{className:"my-collect"},e().createElement("div",{className:"my-collect-list"},n?e().createElement("div",{className:"spin-container"},e().createElement(Ve.Z,null)):null,e().createElement("div",{className:"my-collect-list-scorll"},t.length===0?e().createElement(Ye.Z,{image:Ye.Z.PRESENTED_IMAGE_SIMPLE}):null,t.map((c,u)=>e().createElement("div",{className:"my-collect-list-card",key:u,onClick:()=>this.linkToDetail(c)},e().createElement("img",{src:c.cover,alt:""}),e().createElement("div",{className:"my-collect-list-card-info"},e().createElement("p",null,c.name),e().createElement("p",null,+c.preferentialPrice==0?i("personal.free"):"\uFFE5 ".concat((0,Te.T4)(c.preferentialPrice).integer,".").concat((0,Te.T4)(c.preferentialPrice).decimal)))))),s>$t.pageSize||!l.hideOnSinglePage?e().createElement("div",{className:"my-collect-list-pagination"},e().createElement(C.Z,l)):null))}componentWillUnmount(){$t.pageNumber=1,$t.pageSize=20}}var si=(0,f.Z)()(ai),Pa=h.Z.TabPane;class ni extends e().Component{constructor(){super(...arguments);this.state={defaultTab:"1",showCg:!1,blackList:{procurementOfClassFlag:(0,N.eY)("MY_CONTRIBUTION_PROCUREMENT"),myOrderFlag:(0,N.eY)("MYCONTRIBUTION_MYORDER")}},this.getUserGoodsInfo=()=>{var i={dingUserId:this.props.account,corpId:this.props.corpId},a=S.ZP.Dashboard.getUserGoodsInfo(i);re.WY.get({url:a}).then(t=>{this.handleQueryToJump()}).catch(()=>{this.handleQueryToJump()})},this.handleQueryToJump=()=>{var i=g.parse(ue.m8.location.search),a=i.tab,t;switch(a){case"mycreate":t="1";break;case"course":t="2";break;case"order":t="3";break;case"collect":t="4";break;default:t="1"}this.setState({defaultTab:t})}}componentDidMount(){this.getUserGoodsInfo(),this.props.dispatch({type:"user/getManageMenuData"}).then(i=>{this.setState({showCg:(0,ra.e)("paymentSettings",i)})})}componentDidUpdate(i){if(i.resourceLibrary.refresh!==this.props.resourceLibrary.refresh){var a=g.parse(ue.m8.location.search),t=a.tab;t&&this.getUserGoodsInfo()}}render(){var i=this.props,a=i.t,t=i.appType,s=i.qyShield,n=this.state,l=n.defaultTab,c=n.showCg,u=n.blackList;return e().createElement(e().Fragment,null,e().createElement(h.Z,{defaultActiveKey:"1",activeKey:l,className:"center-user-tab",onChange:P=>this.setState({defaultTab:P})},e().createElement(Pa,{tab:a("userCenter.myCreate"),key:"1"},e().createElement(jr,null)),(c||t==="e_app")&&u.procurementOfClassFlag&&e().createElement(Pa,{tab:a("userCenter.procurementOfClass"),key:"2"},e().createElement(Gr,null)),t!=="fs_app"&&u.myOrderFlag&&s==="false"&&e().createElement(Pa,{tab:a("component.myOrder"),key:"3"},e().createElement(ti,null)),s==="false"&&e().createElement(Pa,{tab:a("component.myCollection"),key:"4"},e().createElement(si,null))))}}var ri=E=>({appType:E.user.appType,corpId:E.user.corpId,account:E.user.account,resourceLibrary:E.resourceLibrary,userInfo:E.user,qyShield:E.user.qyShield}),ys=(0,f.Z)()((0,y.$j)(ri)(ni)),st=r(72358),Es=r(74687),ia=r(30311);class Cs extends e().Component{constructor(i){var a;super(i);a=this,this.onSubmitQuestionnaire=()=>{this.initTableList(),this.setState({questionnaireVisible:!1,operateColumn:null})},this.handleChangeRadio=t=>{var s=t.target.value;this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{status:s})},()=>{this.resetPagination()})},this.handleSearch=t=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{keyword:t})},()=>{this.resetPagination()})},this.handleRate=t=>{this.setState({rateVisible:!0,operateColumn:t})},this.handleQuestionnaire=t=>{this.setState({questionnaireVisible:!0,operateColumn:t})},this.pageChange=(t,s)=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:t,page_size:s})},()=>{this.initTableList()})},this.resetPagination=()=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:1,page_size:20})},()=>{this.initTableList()})},this.getEvaluateCount=()=>{(0,st.p_)({type:"trainee",evaluate_type:"myEvaluate"}).then(t=>{t.data.code==="200000"&&this.setState({countList:t.data.data})})},this.initTableList=(0,B.Z)(I().mark(function t(){var s,n;return I().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.getEvaluateCount(),s=a.state.params,c.next=4,(0,st.g3)({type:"trainee",keyword:s.keyword,status:s.status,evaluate_type:"myEvaluate",page_number:s.page_number,page_size:s.page_size});case 4:n=c.sent,n.data&&n.data.code==="200000"&&a.setState({list:n.data.data.list,params:(0,o.Z)((0,o.Z)({},a.state.params),{},{total:n.data.data.total})});case 6:case"end":return c.stop()}},t)})),this.seeFile=(t,s)=>{t!==0&&this.setState({attachmentVisible:!0,attachmentFileId:s.id})},this.toolBarRender=()=>{var t=this.props,s=t.prefixCls,n=t.t,l=this.state.countList;return e().createElement("div",{className:"".concat(s,"__header")},e().createElement("div",{className:"".concat(s,"__header__tab-radio")},e().createElement(p.ZP.Group,{defaultValue:"unfinished",onChange:this.handleChangeRadio},e().createElement(p.ZP.Button,{value:"unfinished"},n("personal.unFinish"),"(",l.unfinished,")"),e().createElement(p.ZP.Button,{value:"finished"},n("common.ended"),"(",l.finished,")"),e().createElement(p.ZP.Button,{value:"settled"},n("lineClass.haveAlready"),"(",l.settled,")"))),e().createElement("div",{className:"".concat(s,"__header__search")},e().createElement(ze.Z,{onSearch:this.handleSearch,placeholder:n("validation.pleaseEnter")})))},this.getTableColumns=()=>{var t=this.props.t,s=[{title:t("lineClass.listTitle")+t("common.name"),dataIndex:"title",key:"title",fixed:"left",width:220,render:n=>e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},n))},{title:t("course.from"),dataIndex:"source_type",key:"source_type",width:100,render:n=>{switch(n){case"offline_course":return t("lineClass.listTitle");case"study_plan":return t("common.studyTask");case"study_project":return t("learning.learningProjectAddTitle");default:return"--"}}},{title:t("courseManage.attributionClassification"),dataIndex:"classify_name",key:"classify_name",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("lineClassStudy.mustNum"),dataIndex:"evaluate_count",key:"evaluate_count",width:100},{title:t("lineClassStudy.waitNum"),dataIndex:"evaluate_pending_count",key:"evaluate_pending_count",width:100},{title:t("lineClassStudy.hadNum"),dataIndex:"evaluate_end_count",key:"evaluate_end_count",width:100},{title:t("lineClass.organizationDepartment"),dataIndex:"department_name",key:"department_name",width:200,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainee"),dataIndex:"trainees",key:"trainees",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("lineClassStudy.trainingPosition"),dataIndex:"address",key:"address",width:150,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainingTime"),dataIndex:"begin_time",key:"begin_time",width:260,render:(n,l)=>{var c=(0,Te.p6)(l.begin_time,"yyyy-MM-dd hh:mm"),u=l.end_time?(0,Te.p6)(l.end_time,"yyyy-MM-dd hh:mm"):"--";return"".concat(c," ~ ").concat(u)}},{title:t("learning.taskSummary"),dataIndex:"introduction",key:"introduction",width:300,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:300}},n)):e().createElement("span",null,"--")},{title:t("common.creator"),dataIndex:"create_user_name",key:"create_user_name",width:100,render:(n,l)=>{var c=l.creator_sync_user_id,u=l.creator_source_type;return e().createElement(ce.Z,{dataType:"userName",value:c,name:n,type:u})}},{title:t("common.updateTime"),dataIndex:"update_time",key:"update_time",width:150,render:n=>n?(0,Te.p6)(n,"yyyy-MM-dd hh:mm"):"--"},{title:t("lineClass.trainingAttachment"),dataIndex:"attachment_count",key:"attachment_count",width:100,render:(n,l)=>e().createElement(ia.Z,{name:n,onClick:()=>this.seeFile(n,l)})},{title:t("common.operate"),width:135,fixed:"right",render:n=>e().createElement("span",{className:"cl-pointer",onClick:()=>{this.handleEvaluate(n)}},this.state.params.status==="settled"?t("study.lookStudyRecord"):t("lineClassStudy.toStudent"))}];return s},this.handleEvaluate=t=>{var s=t.evaluate_rule_vo.evaluate_type;s==="score"?this.handleRate(t):s==="questionnaire"&&this.handleQuestionnaire(t)},this.state={countList:{unfinished:0,finished:0,settled:0},operateColumn:null,attachmentVisible:!1,attachmentFileId:"",rateVisible:!1,questionnaireVisible:!1,params:{keyword:"",status:"unfinished",page_number:1,page_size:20,total:0},list:[],isLoading:!1}}componentDidMount(){this.initTableList()}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state,n=s.list,l=s.isLoading,c=s.params,u=s.rateVisible,P=s.questionnaireVisible,K=s.attachmentVisible,ae=s.attachmentFileId,ee=s.operateColumn,de=s.params.status,_e=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:Number(c.total),current:c.page_number,onChange:this.pageChange}),Ie=this.getTableColumns();return e().createElement("div",{className:a},e().createElement("div",{className:"".concat(a,"__content")},e().createElement(at.f,{columns:Ie,rowKey:"id",dataSource:n,pagination:_e,loading:l,scroll:{x:"max-content",y:"100%"},toolBarRender:this.toolBarRender,tableUUID:"8aa0d70c-81d2-4e65-8d32-84a91b79c936"})),e().createElement(Yt.Z,{title:t("lineClass.trainingAttachment"),visible:K,fileId:ae,onCancel:()=>{this.setState({attachmentFileId:"",attachmentVisible:!1})}}),e().createElement(wa.Z,{from:"evaluate",settled:de==="settled",title:t("lineClassStudy.toStudent"),operateColumn:ee,visible:u,type:"evaluate",onCancel:()=>{this.initTableList(),this.setState({rateVisible:!1})}}),e().createElement(Es.Z,{from:"myEvaluate",settled:de==="settled",title:t("lineClassStudy.toStudent"),operateColumn:ee,visible:P,onCancel:()=>{this.setState({questionnaireVisible:!1})},onSubmit:this.onSubmitQuestionnaire}))}}Cs.defaultProps={prefixCls:"to-student"};var ii=(0,f.Z)()(Cs),li=r(38394),la=r.n(li),za=r(39383),bs=r(8473);class Ss extends e().Component{constructor(i){var a;super(i);a=this,this.onRate=t=>{var s=this.state.operateColumn,n=s.id,l=s.evaluate_id,c=s.evaluate_rule_vo;re.WY.post({url:S.ZP.lineClassStudy.evaluateSubmit(n),data:{evaluate_object_id:n,evaluate_type:c.evaluate_type,evaluate_id:l,evaluateContentVo:{evaluateVo:{star:t}}}}).then(()=>{this.resetPagination(),this.setState({rateVisible:!1,operateColumn:{}})}).catch(()=>{})},this.onSubmitQuestionnaire=function(){var t=(0,B.Z)(I().mark(function s(n){var l,c,u,P;return I().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return l=a.state.operateColumn,c=l.id,u=l.evaluate_rule_vo,ae.next=3,(0,st.hR)(c,{evaluate_object_id:c,evaluate_type:u.evaluate_type,evaluate_id:u.evaluate_id,evaluate_content_vo:{questions:n,evaluate_vo:{questionnaire_id:u.evaluate_vo.questionnaire_id}}});case 3:P=ae.sent,la()(P,"data.data")&&P.data.code==="200000"&&(a.initTableList(),a.setState({questionnaireVisible:!1,operateColumn:{}}));case 5:case"end":return ae.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.handleChangeRadio=t=>{var s=t.target.value;this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{status:s})},()=>{this.resetPagination()})},this.handleSearch=t=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{keyword:t})},()=>{this.resetPagination()})},this.handleRate=t=>{this.setState({operateColumn:t}),t.is_evaluated?this.getMyEvaluateInfo(t):this.setState({rateVisible:!0})},this.handleQuestionnaire=t=>{this.setState({operateColumn:t,questionnaireVisible:!0})},this.pageChange=(t,s)=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:t,page_size:s})},()=>{this.initTableList()})},this.resetPagination=()=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:1,page_size:20})},()=>{this.initTableList()})},this.getEvaluateCount=()=>{(0,st.p_)({type:"lecturer",evaluate_type:"myEvaluate"}).then(t=>{t.data.code==="200000"&&this.setState({countList:t.data.data})})},this.initTableList=(0,B.Z)(I().mark(function t(){var s,n;return I().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.getEvaluateCount(),s=a.state.params,c.next=4,(0,st.g3)({type:"lecturer",evaluate_type:"myEvaluate",keyword:s.keyword,status:s.status,page_number:s.page_number,page_size:s.page_size});case 4:n=c.sent,n.data&&n.data.code==="200000"&&a.setState({list:n.data.data.list,params:(0,o.Z)((0,o.Z)({},a.state.params),{},{total:n.data.data.total})});case 6:case"end":return c.stop()}},t)})),this.seeFile=(t,s)=>{t!==0&&this.setState({attachmentVisible:!0,attachmentFileId:s.id})},this.toolBarRender=()=>{var t=this.props,s=t.prefixCls,n=t.t,l=this.state.countList;return e().createElement("div",{className:"".concat(s,"__header")},e().createElement("div",{className:"".concat(s,"__header__tab-radio")},e().createElement(p.ZP.Group,{defaultValue:"unfinished",onChange:this.handleChangeRadio},e().createElement(p.ZP.Button,{value:"unfinished"},n("personal.unFinish"),"(",l.unfinished,")"),e().createElement(p.ZP.Button,{value:"finished"},n("common.ended"),"(",l.finished,")"),e().createElement(p.ZP.Button,{value:"settled"},n("lineClass.haveAlready"),"(",l.settled,")"))),e().createElement("div",{className:"".concat(s,"__header__search")},e().createElement(ze.Z,{onSearch:this.handleSearch,placeholder:n("validation.pleaseEnter")})))},this.getMyEvaluateInfo=function(){var t=(0,B.Z)(I().mark(function s(n){var l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,st.K5)(n.id,{evaluate_id:n.evaluate_id,is_evaluated:!0,evaluate_object_id:n.id});case 2:l=u.sent,la()(l,"data.data")&&l.data.code==="200000"&&a.setState({evaluateDetail:l.data.data.evaluate_vo,rateVisible:!0});case 4:case"end":return u.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.getTableColumns=()=>{var t=this.props.t,s=[{title:t("lineClass.listTitle")+t("common.name"),dataIndex:"title",key:"title",fixed:"left",width:220,render:n=>e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},n))},{title:t("course.from"),dataIndex:"source_type",key:"source_type",width:100,render:n=>{switch(n){case"offline_course":return t("lineClass.listTitle");case"study_plan":return t("common.studyTask");case"study_project":return t("learning.learningProjectAddTitle");default:return"--"}}},{title:t("courseManage.attributionClassification"),dataIndex:"classify_name",key:"classify_name",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("component.lecturer"),dataIndex:"lecturer_name",key:"lecturer_name",width:100,render:(n,l)=>{var c=l.teacher_sync_type,u=l.teacher_sync_user_id,P=l.teacher_sync_source_type;return n&&c&&c==="inside"?e().createElement(ce.Z,{dataType:"userName",value:u,name:n,type:P}):e().createElement("span",null,n||"--")}},{title:t("lineClass.organizationDepartment"),dataIndex:"department_name",key:"department_name",width:200,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainee"),dataIndex:"trainees",key:"trainees",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("lineClassStudy.trainingPosition"),dataIndex:"address",key:"address",width:150,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainingTime"),dataIndex:"begin_time",key:"begin_time",width:260,render:(n,l)=>{var c=(0,Te.p6)(l.begin_time,"yyyy-MM-dd hh:mm"),u=l.end_time?(0,Te.p6)(l.end_time,"yyyy-MM-dd hh:mm"):"--";return"".concat(c," ~ ").concat(u)}},{title:t("learning.taskSummary"),dataIndex:"introduction",key:"introduction",width:300,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:300}},n)):e().createElement("span",null,"--")},{title:t("common.creator"),dataIndex:"create_user_name",key:"create_user_name",width:100,render:(n,l)=>{var c=l.creator_sync_user_id,u=l.creator_source_type;return e().createElement(ce.Z,{dataType:"userName",value:c,name:n,type:u})}},{title:t("common.updateTime"),dataIndex:"update_time",key:"update_time",width:150,render:n=>n?(0,Te.p6)(n,"yyyy-MM-dd hh:mm"):""},{title:t("lineClass.trainingAttachment"),dataIndex:"attachment_count",key:"attachment_count",width:100,render:(n,l)=>e().createElement(ia.Z,{name:n,onClick:()=>this.seeFile(n,l)})},{title:t("common.operate"),width:135,fixed:"right",render:(n,l)=>{var c=this.state.params.status;return e().createElement("span",{className:"cl-pointer",onClick:()=>{this.handleEvaluate(l)}},l.is_evaluated||c==="settled"?t("study.lookStudyRecord"):t("lineClassStudy.evaluationOfLecturer"))}}];return s},this.handleEvaluate=t=>{var s=this.props.t,n=t.is_evaluated,l=t.evaluate_rule_vo.evaluate_type;if(!n&&this.state.params.status==="settled"){k.default.warning(s("lineClassStudy.noEvaluate"));return}l==="star"?this.handleRate(t):this.handleQuestionnaire(t)},this.state={countList:{unfinished:0,finished:0,settled:0},evaluateDetail:{},operateColumn:{evaluate_rule_vo:{}},attachmentFileId:"",attachmentVisible:!1,rateVisible:!1,questionnaireVisible:!1,params:{keyword:"",status:"unfinished",page_number:1,page_size:20,total:0},list:[],isLoading:!1}}componentDidMount(){this.initTableList()}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state,n=s.list,l=s.isLoading,c=s.params,u=s.rateVisible,P=s.attachmentVisible,K=s.attachmentFileId,ae=s.questionnaireVisible,ee=s.operateColumn,de=s.evaluateDetail,_e=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:Number(c.total),current:c.page_number,onChange:this.pageChange}),Ie=this.getTableColumns();return e().createElement("div",{className:a},e().createElement("div",{className:"".concat(a,"__content")},e().createElement(at.f,{columns:Ie,rowKey:"id",dataSource:n,pagination:_e,loading:l,scroll:{x:"max-content",y:"100%"},toolBarRender:this.toolBarRender,tableUUID:"a8d035c7-2870-4e06-bc38-ceb46ac8e39a"})),e().createElement(Yt.Z,{title:t("lineClass.trainingAttachment"),visible:P,fileId:K,onCancel:()=>{this.setState({attachmentFileId:"",attachmentVisible:!1})}}),e().createElement(bs.Z,{title:t("lineClass.starRate"),disabled:ee.is_evaluated,visible:u,score:Number(de.star),onCancel:()=>{this.setState({rateVisible:!1})},onOk:this.onRate}),e().createElement(za.Z,{title:t("lineClassStudy.toLecturer"),typeQuestionnaire:ee.is_evaluated?"check":"edit",operateColumn:ee,showList:!1,type:"lecturer",visible:ae,onCancel:()=>{this.setState({questionnaireVisible:!1})},onSubmit:this.onSubmitQuestionnaire}))}}Ss.defaultProps={prefixCls:"to-lecturer"};var oi=(0,f.Z)()(Ss);class Ts extends e().Component{constructor(i){var a;super(i);a=this,this.onRate=function(){var t=(0,B.Z)(I().mark(function s(n){var l,c,u,P,K;return I().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return l=a.state.operateColumn,c=l.id,u=l.evaluate_rule_vo,P=l.evaluate_id,ee.next=3,(0,st.hR)(c,{evaluate_object_id:c,evaluate_type:u.evaluate_type,evaluate_id:P,evaluateContentVo:{evaluateVo:{star:n}}});case 3:K=ee.sent,K.data.code==="200000"&&(a.initTableList(),a.setState({rateVisible:!1,operateColumn:{evaluate_rule_vo:{}}}));case 5:case"end":return ee.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.onSubmitQuestionnaire=function(){var t=(0,B.Z)(I().mark(function s(n){var l,c,u,P;return I().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return l=a.state.operateColumn,c=l.id,u=l.evaluate_rule_vo,ae.next=3,(0,st.hR)(c,{evaluate_object_id:c,evaluate_type:u.evaluate_type,evaluate_id:u.evaluate_id,evaluate_content_vo:{questions:n,evaluate_vo:{questionnaire_id:u.evaluate_vo.questionnaire_id}}});case 3:P=ae.sent,la()(P,"data.data")&&P.data.code==="200000"&&(a.initTableList(),a.setState({questionnaireVisible:!1,operateColumn:{evaluate_rule_vo:{}}}));case 5:case"end":return ae.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.handleChangeRadio=t=>{var s=t.target.value;this.setState(n=>({params:(0,o.Z)((0,o.Z)({},n.params),{},{status:s})}),()=>{this.resetPagination()})},this.handleSearch=t=>{this.setState(s=>({params:(0,o.Z)((0,o.Z)({},s.params),{},{keyword:t})}),()=>{this.resetPagination()})},this.handleEvaluate=t=>{var s=this.props.t,n=t.is_evaluated,l=t.evaluate_rule_vo.evaluate_type;if(!n&&this.state.params.status==="settled"){k.default.warning(s("lineClassStudy.noEvaluate"));return}l==="star"?this.handleRate(t):this.handleQuestionnaire(t)},this.handleRate=t=>{this.setState({operateColumn:t}),t.is_evaluated?this.getMyEvaluateInfo(t):this.setState({rateVisible:!0})},this.handleQuestionnaire=t=>{this.setState({operateColumn:t,questionnaireVisible:!0})},this.resetPagination=()=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:1,page_size:20})},()=>{this.initTableList()})},this.getEvaluateCount=()=>{(0,st.p_)({type:"course",evaluate_type:"myEvaluate"}).then(t=>{t.data.code==="200000"&&this.setState({countList:t.data.data})})},this.pageChange=(t,s)=>{this.setState(n=>({params:(0,o.Z)((0,o.Z)({},n.params),{},{page_number:t,page_size:s})}),()=>{this.initTableList()})},this.initTableList=(0,B.Z)(I().mark(function t(){var s,n;return I().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.getEvaluateCount(),s=a.state.params,c.next=4,(0,st.g3)({type:"course",evaluate_type:"myEvaluate",keyword:s.keyword,status:s.status,page_number:s.page_number,page_size:s.page_size});case 4:n=c.sent,n.data&&n.data.code==="200000"&&a.setState({list:n.data.data.list,params:(0,o.Z)((0,o.Z)({},a.state.params),{},{total:n.data.data.total})});case 6:case"end":return c.stop()}},t)})),this.seeFile=(t,s)=>{t!==0&&this.setState({attachmentVisible:!0,attachmentFileId:s.id})},this.toolBarRender=()=>{var t=this.props,s=t.prefixCls,n=t.t,l=this.state.countList;return e().createElement("div",{className:"".concat(s,"__header")},e().createElement("div",{className:"".concat(s,"__header__tab-radio")},e().createElement(p.ZP.Group,{defaultValue:"unfinished",onChange:this.handleChangeRadio},e().createElement(p.ZP.Button,{value:"unfinished"},n("personal.unFinish"),"(",l.unfinished,")"),e().createElement(p.ZP.Button,{value:"finished"},n("common.ended"),"(",l.finished,")"),e().createElement(p.ZP.Button,{value:"settled"},n("lineClass.haveAlready"),"(",l.settled,")"))),e().createElement("div",{className:"".concat(s,"__header__search")},e().createElement(ze.Z,{onSearch:this.handleSearch,placeholder:n("validation.pleaseEnter")})))},this.getMyEvaluateInfo=function(){var t=(0,B.Z)(I().mark(function s(n){var l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,st.K5)(n.id,{evaluate_id:n.evaluate_id,is_evaluated:!0,evaluate_object_id:n.id});case 2:l=u.sent,la()(l,"data.data")&&l.data.code==="200000"&&a.setState({evaluateDetail:l.data.data.evaluate_vo,rateVisible:!0});case 4:case"end":return u.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),this.getTableColumns=()=>{var t=this.props.t,s=[{title:t("lineClass.listTitle")+t("common.name"),dataIndex:"title",key:"title",fixed:"left",width:220,render:n=>e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},n))},{title:t("course.from"),dataIndex:"source_type",key:"source_type",width:100,render:n=>{switch(n){case"offline_course":return t("lineClass.listTitle");case"study_plan":return t("common.studyTask");case"study_project":return t("learning.learningProjectAddTitle");default:return"--"}}},{title:t("courseManage.attributionClassification"),dataIndex:"classify_name",key:"classify_name",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("component.lecturer"),dataIndex:"lecturer_name",key:"lecturer_name",width:100,render:(n,l)=>{var c=l.teacher_sync_type,u=l.teacher_sync_user_id,P=l.teacher_sync_source_type;return n&&c&&c==="inside"?e().createElement(ce.Z,{dataType:"userName",value:u,name:n,type:P}):e().createElement("span",null,n||"--")}},{title:t("lineClass.organizationDepartment"),dataIndex:"department_name",key:"department_name",width:200,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainee"),dataIndex:"trainees",key:"trainees",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("lineClassStudy.trainingPosition"),dataIndex:"address",key:"address",width:150,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainingTime"),dataIndex:"begin_time",key:"begin_time",width:260,render:(n,l)=>{var c=(0,Te.p6)(l.begin_time,"yyyy-MM-dd hh:mm"),u=l.end_time?(0,Te.p6)(l.end_time,"yyyy-MM-dd hh:mm"):"--";return"".concat(c," ~ ").concat(u)}},{title:t("learning.taskSummary"),dataIndex:"introduction",key:"introduction",width:300,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:300}},n)):e().createElement("span",null,"--")},{title:t("common.creator"),dataIndex:"create_user_name",key:"create_user_name",width:100,render:(n,l)=>{var c=l.creator_sync_user_id,u=l.creator_source_type;return e().createElement(ce.Z,{dataType:"userName",value:c,name:n,type:u})}},{title:t("common.updateTime"),dataIndex:"update_time",key:"update_time",width:150,render:n=>n?(0,Te.p6)(n,"yyyy-MM-dd hh:mm"):"--"},{title:t("lineClass.trainingAttachment"),dataIndex:"attachment_count",key:"attachment_count",width:100,render:(n,l)=>e().createElement(ia.Z,{name:n,onClick:()=>this.seeFile(n,l)})},{title:t("common.operate"),width:135,fixed:"right",render:(n,l)=>{var c=this.state.params.status;return e().createElement("span",{className:"cl-pointer",onClick:()=>{this.handleEvaluate(l)}},l.is_evaluated||c==="settled"?t("study.lookStudyRecord"):t("lineClassStudy.evaluationOfCourse"))}}];return s},this.state={countList:{unfinished:0,finished:0,settled:0},evaluateDetail:{},operateColumn:{evaluate_rule_vo:{}},attachmentFileId:"",attachmentVisible:!1,rateVisible:!1,questionnaireVisible:!1,params:{keyword:"",status:"unfinished",page_number:1,page_size:20,total:0},list:[],isLoading:!1}}componentDidMount(){this.initTableList()}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state,n=s.list,l=s.isLoading,c=s.params,u=s.rateVisible,P=s.attachmentVisible,K=s.attachmentFileId,ae=s.questionnaireVisible,ee=s.operateColumn,de=s.evaluateDetail,_e=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:Number(c.total),current:c.page_number,onChange:this.pageChange}),Ie=this.getTableColumns();return e().createElement("div",{className:a},e().createElement("div",{className:"".concat(a,"__content")},e().createElement(at.f,{columns:Ie,rowKey:"id",dataSource:n,pagination:_e,loading:l,scroll:{x:"max-content",y:"100%"},toolBarRender:this.toolBarRender,tableUUID:"ab07c37a-0ea1-4028-89b8-9dd0dddd3d59"})),e().createElement(Yt.Z,{title:t("lineClass.trainingAttachment"),visible:P,fileId:K,onCancel:()=>{this.setState({attachmentFileId:"",attachmentVisible:!1})}}),e().createElement(bs.Z,{title:t("lineClass.starRate"),disabled:ee.is_evaluated,visible:u,score:Number(de.star),onCancel:()=>{this.setState({rateVisible:!1})},onOk:this.onRate}),e().createElement(za.Z,{type:"course",title:t("lineClassStudy.toCourse"),typeQuestionnaire:ee.is_evaluated?"check":"edit",operateColumn:ee,showList:!1,visible:ae,onCancel:()=>{this.setState({questionnaireVisible:!1})},onSubmit:this.onSubmitQuestionnaire}))}}Ts.defaultProps={prefixCls:"to-course"};var ci=(0,f.Z)()(Ts),$a=h.Z.TabPane;class Ps extends e().Component{constructor(i){super(i);this.state={defaultKey:"1"}}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state.defaultKey;return e().createElement("div",{className:a},e().createElement(h.Z,{tabPosition:"left",defaultActiveKey:"1",activeKey:s,className:"center-user-tab",onChange:n=>this.setState({defaultKey:n})},e().createElement($a,{tab:t("lineClassStudy.toStudent"),key:"1",className:"center-user-tab-left"},e().createElement(ii,null)),e().createElement($a,{tab:t("lineClassStudy.toLecturer"),key:"2",className:"center-user-tab-left"},e().createElement(oi,null)),e().createElement($a,{tab:t("lineClassStudy.toCourse"),key:"3",className:"center-user-tab-left"},e().createElement(ci,null))))}}Ps.defaultProps={prefixCls:"from-me-evaluate"};var ui=(0,f.Z)()(Ps),di=r(88902);class Is extends e().Component{constructor(i){super(i);this.onCancel=()=>{var a=this.props.onCancel;a()},this.getUserList=()=>{var a=this.props.operateColumn,t=this.state,s=t.pageNumber,n=t.pageSize,l={evaluate_id:a.evaluate_id,lecturer_id:a.lecturer_id,page_number:s,page_size:n};(0,st._C)(a.id,l).then(c=>{if(c.data.code==="200000"){var u=c.data.data;if(!u.page_data)return;this.setState({userList:u.page_data.list,starAverage:u.star_average,totalPages:u.page_data.pages||1})}})},this.formateStarAverage=()=>{var a=this.state.starAverage;return a.indexOf(".")!==-1?Math.floor(a)+.5:Number(a)},this.renderStartItem=a=>{var t=this.props,s=t.prefixCls,n=t.t,l="".concat(s,"__course");return e().createElement("div",{className:l},e().createElement("div",{className:"".concat(l,"__info")},e().createElement("img",{className:"".concat(l,"__img"),src:a.user_info.avatar||te()}),e().createElement(Me.Z,{title:e().createElement(ce.Z,{dataType:"userName",value:a.user_info.user_id,name:a.user_info.name,type:a.user_info.source_type})},e().createElement("span",{className:"".concat(l,"__name cl-text-ellipsis"),style:{width:60}},e().createElement(ce.Z,{dataType:"userName",value:a.user_info.user_id,name:a.user_info.name,type:a.user_info.source_type}))),e().createElement(xe.Z,{style:{color:"#FFA818","font-size":"16px"},value:a.course_evaluate_vo.star||0,disabled:!0})),e().createElement("div",{className:"".concat(l,"__time")},e().createElement("span",null,n("lineClassStudy.startTime"),"\uFF1A",(0,Te.p6)(a.evaluat_time,"yyyy-MM-dd hh:mm")," ")))},this.state={starAverage:0,userList:[],pageNumber:1,hasNextPage:!1,pageSize:10,totalPages:0}}componentDidUpdate(i){i.visible!==this.props.visible&&this.props.visible&&this.getUserList()}onChangePage(i){var a=this.state,t=a.pageNumber,s=a.totalPages;i==="prev"?this.setState({pageNumber:t-1},()=>{this.funGetUserList(),this.setState({hasNextPage:s>this.state.pageNumber})}):i==="next"&&this.setState({pageNumber:t+1},()=>{this.funGetUserList(),this.setState({hasNextPage:s>this.state.pageNumber})})}render(){var i=this.props,a=i.prefixCls,t=i.t,s=i.visible,n=this.state,l=n.userList,c=n.pageNumber,u=n.hasNextPage,P=n.starAverage,K={size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,footer:null};return e().createElement(Ua.ZP,(0,A.Z)({},K,{title:"".concat(t("lineClass.starRate")," (").concat(l.length,")"),visible:s,onCancel:this.onCancel}),e().createElement("div",{className:a},l.length?e().createElement("div",{className:"modal-content"},e().createElement("div",{className:"list-wrap"},e().createElement("div",{className:"rate-avarage"},e().createElement(xe.Z,{allowHalf:!0,style:{color:"#FFA818","font-size":"25px","margin-right":"22px"},value:this.formateStarAverage(),disabled:!0}),e().createElement("span",null,P,t("common.score"))),l.map(ae=>this.renderStartItem(ae))),e().createElement("div",{className:"page-content"},e().createElement(di.Z,{pageNumber:c,hasNextPage:u,onChangePage:ae=>{this.onChangePage(ae)}}))):e().createElement(Bt.Z,{tipText:t("lineClassStudy.noStudent")})))}}Is.defaultProps={prefixCls:"start-list"};var mi=(0,f.Z)()(Is);class Zs extends e().Component{constructor(i){var a;super(i);a=this,this.onRate=()=>{this.setState({rateVisible:!1})},this.handleChangeRadio=t=>{var s=t.target.value;this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{status:s})},()=>{this.resetPagination()})},this.handleSearch=t=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{keyword:t})},()=>{this.resetPagination()})},this.handleRate=()=>{this.setState({rateVisible:!0})},this.handleQuestionnaire=()=>{this.setState({questionnaireVisible:!0})},this.resetPagination=()=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:1,page_size:20})},()=>{this.initTableList()})},this.pageChange=(t,s)=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:t,page_size:s})},()=>{this.initTableList()})},this.getEvaluateCount=()=>{(0,st.p_)({type:"trainee",evaluate_type:"evaluateMy"}).then(t=>{t.data.code==="200000"&&this.setState({countList:t.data.data})})},this.initTableList=(0,B.Z)(I().mark(function t(){var s,n;return I().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.getEvaluateCount(),s=a.state.params,c.next=4,(0,st.g3)({type:"trainee",evaluate_type:"evaluateMy",keyword:s.keyword,status:s.status,page_number:s.page_number,page_size:s.page_size});case 4:n=c.sent,n.data&&n.data.code==="200000"&&a.setState({list:n.data.data.list,params:(0,o.Z)((0,o.Z)({},a.state.params),{},{total:n.data.data.total})});case 6:case"end":return c.stop()}},t)})),this.seeFile=(t,s)=>{t!==0&&this.setState({attachmentVisible:!0,attachmentFileId:s.id})},this.toolBarRender=()=>{var t=this.props,s=t.prefixCls,n=t.t,l=this.state.countList;return e().createElement("div",{className:"".concat(s,"__header")},e().createElement("div",{className:"".concat(s,"__header__tab-radio")},e().createElement(p.ZP.Group,{defaultValue:"unfinished",onChange:this.handleChangeRadio},e().createElement(p.ZP.Button,{value:"unfinished"},n("personal.unFinish"),"(",l.unfinished,")"),e().createElement(p.ZP.Button,{value:"finished"},n("common.ended"),"(",l.finished,")"),e().createElement(p.ZP.Button,{value:"settled"},n("lineClass.haveAlready"),"(",l.settled,")"))),e().createElement("div",{className:"".concat(s,"__header__search")},e().createElement(ze.Z,{onSearch:this.handleSearch,placeholder:n("validation.pleaseEnter")})))},this.getTableColumns=()=>{var t=this.props.t,s=[{title:t("lineClass.listTitle")+t("common.name"),dataIndex:"title",key:"title",fixed:"left",width:220,render:n=>e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},n))},{title:t("course.from"),dataIndex:"source_type",key:"source_type",width:100,render:n=>{switch(n){case"offline_course":return t("lineClass.listTitle");case"study_plan":return t("common.studyTask");case"study_project":return t("learning.learningProjectAddTitle");default:return"--"}}},{title:t("courseManage.attributionClassification"),dataIndex:"classify_name",key:"classify_name",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("lineClass.organizationDepartment"),dataIndex:"department_name",key:"department_name",width:200,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainee"),dataIndex:"trainees",key:"trainees",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("lineClassStudy.trainingPosition"),dataIndex:"address",key:"address",width:150,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainingTime"),dataIndex:"begin_time",key:"begin_time",width:260,render:(n,l)=>{var c=(0,Te.p6)(l.begin_time,"yyyy-MM-dd hh:mm"),u=l.end_time?(0,Te.p6)(l.end_time,"yyyy-MM-dd hh:mm"):"--";return"".concat(c," ~ ").concat(u)}},{title:t("learning.taskSummary"),dataIndex:"introduction",key:"introduction",width:300,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:300}},n)):e().createElement("span",null,"--")},{title:t("common.creator"),dataIndex:"create_user_name",key:"create_user_name",width:100,render:(n,l)=>{var c=l.creator_sync_user_id,u=l.creator_source_type;return e().createElement(ce.Z,{dataType:"userName",value:c,name:n,type:u})}},{title:t("common.updateTime"),dataIndex:"update_time",key:"update_time",width:150,render:n=>n?(0,Te.p6)(n,"yyyy-MM-dd hh:mm"):""},{title:t("lineClassStudy.trainingStatus"),dataIndex:"status",key:"status",width:100,render:n=>{switch(n){case"unpublished":return t("courseManage.unPublished");case"published":return t("courseManage.published");case"settled":return t("lineClass.haveAlready");default:return"--"}}},{title:t("lineClass.trainingAttachment"),dataIndex:"attachment_count",key:"attachment_count",width:100,render:(n,l)=>e().createElement(ia.Z,{name:n,onClick:()=>this.seeFile(n,l)})},{title:t("common.operate"),width:135,fixed:"right",render:(n,l)=>e().createElement("span",{className:"cl-pointer",onClick:()=>{this.handleDetail(l)}},t("study.lookStudyRecord"))}];return s},this.handleDetail=t=>{var s=t.is_evaluated,n=t.evaluate_rule_vo.evaluate_type,l=this.props.t;if(!s){k.default.warning(l("lineClassStudy.noEvaluate"));return}this.setState({operateColumn:t}),n==="star"?this.handleRate():this.handleQuestionnaire()},this.state={countList:{unfinished:0,finished:0,settled:0},attachmentFileId:"",attachmentVisible:!1,operateColumn:{},rateVisible:!1,questionnaireVisible:!1,params:{keyword:"",status:"unfinished",page_number:1,page_size:20,total:0},list:[],isLoading:!1}}componentDidMount(){this.initTableList()}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state,n=s.list,l=s.isLoading,c=s.params,u=s.rateVisible,P=s.questionnaireVisible,K=s.operateColumn,ae=s.attachmentFileId,ee=s.attachmentVisible,de=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:Number(c.total),current:c.page_number,onChange:this.pageChange}),_e=this.getTableColumns();return e().createElement("div",{className:a},e().createElement("div",{className:"".concat(a,"__content")},e().createElement(at.f,{columns:_e,rowKey:"id",dataSource:n,pagination:de,loading:l,scroll:{x:"max-content",y:"100%"},toolBarRender:this.toolBarRender,tableUUID:"b88a9781-e412-4c74-912a-1ba84cef0945"})),e().createElement(Yt.Z,{title:t("lineClass.trainingAttachment"),visible:ee,fileId:ae,onCancel:()=>{this.setState({attachmentFileId:"",attachmentVisible:!1})}}),e().createElement(mi,{operateColumn:K,visible:u,onCancel:()=>{this.setState({rateVisible:!1})}}),e().createElement(Es.Z,{from:"evaluateMy",title:t("common.questionnaire"),operateColumn:K,visible:P,onCancel:()=>{this.setState({questionnaireVisible:!1})},onSubmit:this.onSubmitQuestionnaire}))}}Zs.defaultProps={prefixCls:"from-student"};var pi=(0,f.Z)()(Zs),hi=r(86197);class gi extends e().Component{constructor(i){var a;super(i);a=this,this.onCancel=()=>{this.props.onCancel()},this.getEvaluateMyInfo=(0,B.Z)(I().mark(function t(){var s,n;return I().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.setState({evaluateDetail:null}),s=a.props.operateColumn,c.next=4,(0,st.RZ)(s.id,{evaluate_id:s.evaluate_id,type:"lecturer",evaluate_user_id:S.ZP.userId});case 4:n=c.sent,la()(n,"data.data")&&n.data.code==="200000"&&a.setState({evaluateDetail:n.data.data});case 6:case"end":return c.stop()}},t)})),this.state={evaluateDetail:null}}componentDidUpdate(i){i.visible!==this.props.visible&&this.props.visible&&this.getEvaluateMyInfo()}render(){var i=this.state.evaluateDetail,a=this.props,t=a.t,s=a.visible,n=a.title,l={okText:t("common.rate"),cancelText:t("common.cancel"),size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};return e().createElement(Ua.ZP,(0,A.Z)({},l,{title:n,visible:s,onCancel:this.onCancel,footer:null}),e().createElement("div",{className:"modal-content"},e().createElement("div",{className:"detail-wrap"},i?e().createElement(hi.Z,{evaluateDetail:i,status:"complete"}):e().createElement(Bt.Z,{tipText:t("lineClassStudy.noResult")}))))}}var vi=(0,f.Z)()(gi);class Ns extends e().Component{constructor(i){var a;super(i);a=this,this.onRate=()=>{this.setState({rateVisible:!1})},this.handleChangeRadio=t=>{var s=t.target.value;this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{status:s})},()=>{this.resetPagination()})},this.handleSearch=t=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{keyword:t})},()=>{this.resetPagination()})},this.handleRate=()=>{this.setState({rateVisible:!0})},this.handleQuestionnaire=()=>{this.setState({questionnaireVisible:!0})},this.resetPagination=()=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:1,page_size:20})},()=>{this.initTableList()})},this.pageChange=(t,s)=>{this.setState({params:(0,o.Z)((0,o.Z)({},this.state.params),{},{page_number:t,page_size:s})},()=>{this.initTableList()})},this.getEvaluateCount=()=>{(0,st.p_)({type:"lecturer",evaluate_type:"evaluateMy"}).then(t=>{t.data.code==="200000"&&this.setState({countList:t.data.data})})},this.initTableList=(0,B.Z)(I().mark(function t(){var s,n;return I().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.getEvaluateCount(),s=a.state.params,c.next=4,(0,st.g3)({type:"lecturer",evaluate_type:"evaluateMy",keyword:s.keyword,status:s.status,page_number:s.page_number,page_size:s.page_size});case 4:n=c.sent,n.data&&n.data.code==="200000"&&a.setState({list:n.data.data.list,params:(0,o.Z)((0,o.Z)({},a.state.params),{},{total:n.data.data.total})});case 6:case"end":return c.stop()}},t)})),this.seeFile=(t,s)=>{t!==0&&this.setState({attachmentVisible:!0,attachmentFileId:s.id})},this.toolBarRender=()=>{var t=this.props,s=t.prefixCls,n=t.t,l=this.state.countList;return e().createElement("div",{className:"".concat(s,"__header")},e().createElement("div",{className:"".concat(s,"__header__tab-radio")},e().createElement(p.ZP.Group,{defaultValue:"unfinished",onChange:this.handleChangeRadio},e().createElement(p.ZP.Button,{value:"unfinished"},n("personal.unFinish"),"(",l.unfinished,")"),e().createElement(p.ZP.Button,{value:"finished"},n("common.ended"),"(",l.finished,")"),e().createElement(p.ZP.Button,{value:"settled"},n("lineClass.haveAlready"),"(",l.settled,")"))),e().createElement("div",{className:"".concat(s,"__header__search")},e().createElement(ze.Z,{onSearch:this.handleSearch,placeholder:n("validation.pleaseEnter")})))},this.getTableColumns=()=>{var t=this.props.t,s=[{title:t("lineClass.listTitle")+t("common.name"),dataIndex:"title",key:"title",fixed:"left",width:220,render:n=>e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:220}},n))},{title:t("course.from"),dataIndex:"source_type",key:"source_type",width:100,render:n=>{switch(n){case"offline_course":return t("lineClass.listTitle");case"study_plan":return t("common.studyTask");case"study_project":return t("learning.learningProjectAddTitle");default:return"--"}}},{title:t("courseManage.attributionClassification"),dataIndex:"classify_name",key:"classify_name",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("component.lecturer"),dataIndex:"lecturer_name",key:"lecturer_name",width:100,render:(n,l)=>{var c=l.teacher_sync_type,u=l.teacher_sync_user_id,P=l.teacher_sync_source_type;return n&&c&&c==="inside"?e().createElement(ce.Z,{dataType:"userName",value:u,name:n,type:P}):e().createElement("span",null,n||"--")}},{title:t("lineClass.organizationDepartment"),dataIndex:"department_name",key:"department_name",width:200,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:200}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainee"),dataIndex:"trainees",key:"trainees",width:100,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:100}},n)):e().createElement("span",null,"--")},{title:t("lineClassStudy.trainingPosition"),dataIndex:"address",key:"address",width:150,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:150}},n)):e().createElement("span",null,"--")},{title:t("lineClass.trainingTime"),dataIndex:"begin_time",key:"begin_time",width:260,render:(n,l)=>{var c=(0,Te.p6)(l.begin_time,"yyyy-MM-dd hh:mm"),u=l.end_time?(0,Te.p6)(l.end_time,"yyyy-MM-dd hh:mm"):"--";return"".concat(c," ~ ").concat(u)}},{title:t("learning.taskSummary"),dataIndex:"introduction",key:"introduction",width:300,render:n=>n?e().createElement(Me.Z,{title:n},e().createElement("div",{className:"cl-text-ellipsis",style:{width:300}},n)):e().createElement("span",null,"--")},{title:t("common.creator"),dataIndex:"create_user_name",key:"create_user_name",width:100,render:(n,l)=>{var c=l.creator_sync_user_id,u=l.creator_source_type;return e().createElement(ce.Z,{dataType:"userName",value:c,name:n,type:u})}},{title:t("common.updateTime"),dataIndex:"update_time",key:"update_time",width:150,render:n=>n?(0,Te.p6)(n,"yyyy-MM-dd hh:mm"):""},{title:t("lineClassStudy.trainingStatus"),dataIndex:"status",key:"status",width:100,render:n=>{switch(n){case"unpublished":return t("courseManage.unPublished");case"published":return t("courseManage.published");case"settled":return t("lineClass.haveAlready");default:return"--"}}},{title:t("lineClass.trainingAttachment"),dataIndex:"attachment_count",key:"attachment_count",width:100,render:(n,l)=>e().createElement(ia.Z,{name:n,onClick:()=>this.seeFile(n,l)})},{title:t("common.operate"),width:135,fixed:"right",render:n=>e().createElement("span",{className:"cl-pointer",onClick:()=>{this.handleDetail(n)}},t("study.lookStudyRecord"))}];return s},this.handleDetail=t=>{var s=t.is_evaluated,n=t.evaluate_rule_vo.evaluate_type,l=this.props.t;if(!s){k.default.warning(l("lineClassStudy.noEvaluate"));return}this.setState({operateColumn:t}),n==="score"?this.handleRate():this.handleQuestionnaire()},this.state={countList:{unfinished:0,finished:0,settled:0},attachmentFileId:"",attachmentVisible:!1,operateColumn:{},rateVisible:!1,questionnaireVisible:!1,params:{keyword:"",status:"unfinished",page_number:1,page_size:20,total:0},list:[],isLoading:!1}}componentDidMount(){this.initTableList()}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state,n=s.list,l=s.isLoading,c=s.params,u=s.rateVisible,P=s.questionnaireVisible,K=s.operateColumn,ae=s.attachmentFileId,ee=s.attachmentVisible,de=(0,o.Z)((0,o.Z)({},S.XE.INITIAL_PAGINATION),{},{total:Number(c.total),current:c.page_number,onChange:this.pageChange}),_e=this.getTableColumns();return e().createElement("div",{className:a},e().createElement("div",{className:"".concat(a,"__content")},e().createElement(at.f,{columns:_e,rowKey:"id",dataSource:n,pagination:de,loading:l,scroll:{x:"max-content",y:"100%"},toolBarRender:this.toolBarRender,tableUUID:"ee6e2c0d-cbe2-42c9-902a-41539157e283"})),e().createElement(Yt.Z,{title:t("lineClass.trainingAttachment"),visible:ee,fileId:ae,onCancel:()=>{this.setState({attachmentFileId:"",attachmentVisible:!1})}}),e().createElement(vi,{operateColumn:K,title:t("learning.questionnaireAddToolScore"),visible:u,onCancel:()=>{this.setState({rateVisible:!1})}}),e().createElement(za.Z,{type:"student",operateColumn:K,showList:!1,typeQuestionnaire:"check",visible:P,onCancel:()=>{this.setState({questionnaireVisible:!1})}}))}}Ns.defaultProps={prefixCls:"from-lecturer"};var fi=(0,f.Z)()(Ns),Ls=h.Z.TabPane;class xs extends e().Component{constructor(i){super(i);this.state={defaultKey:"1"}}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state.defaultKey;return e().createElement("div",{className:a},e().createElement(h.Z,{tabPosition:"left",defaultActiveKey:"1",activeKey:s,className:"center-user-tab",onChange:n=>this.setState({defaultKey:n})},e().createElement(Ls,{tab:t("lineClassStudy.fromStudent"),key:"1",className:"center-user-tab-left"},e().createElement(pi,null)),e().createElement(Ls,{tab:t("lineClassStudy.fromLecturer"),key:"2",className:"center-user-tab-left"},e().createElement(fi,null))))}}xs.defaultProps={prefixCls:"to-me-evaluate"};var _i=(0,f.Z)()(xs),Ds=h.Z.TabPane;class Ms extends e().Component{constructor(i){super(i);this.state={defaultKey:"1"}}render(){var i=this.props,a=i.prefixCls,t=i.t,s=this.state.defaultKey;return e().createElement("div",{className:a},e().createElement(h.Z,{defaultActiveKey:"1",activeKey:s,className:"center-user-tab",onChange:n=>this.setState({defaultKey:n})},e().createElement(Ds,{tab:t("userCenter.myComment"),key:"1",className:"center-user-tab-left"},e().createElement(ui,null)),e().createElement(Ds,{tab:t("lineClassStudy.toMe"),key:"2",className:"center-user-tab-left"},e().createElement(_i,null))))}}Ms.defaultProps={prefixCls:"my-evaluate"};var yi=(0,f.Z)()(Ms),Ei=r(94749),Ci=r.n(Ei),bi=r(36431),Si=r.n(bi),Ti=r(36617),Pi=r.n(Ti),Ii=r(79458),Zi=r.n(Ii),Ni=[{goodsCode:"DD_GOODS-516004",goodsName:"\u9177\u5B66\u9662\u57F9\u8BAD\u670D\u52A1"}];class Li extends e().Component{constructor(){super(...arguments);this.state={goodsCode:Ni[0].goodsCode,isVip:!1},this.getUserIsVip=()=>{var i=S.ZP.Dashboard.getUserIsVip(),a={corp_id:this.props.corpId,eid:this.props.enterpriseId};re.WY.get({url:i,params:a}).then(t=>{this.setState({isVip:t.data.is_vip==="true"})})},this.handlePurchase=()=>{var i=this.props.t,a=this.state,t=a.goodsCode,s=a.isVip;if(!s)D.Z.warning({title:i("common.tip"),content:i("dashboard.tryUserTips")});else{var n=localStorage.getItem("corpId"),l=S.ZP.PaymentCheckOrder.purchaseGood({goodsCode:t,corpId:n});re.WY.get({url:l}).then(c=>{dd.version?dd.biz.util.openSlidePanel({url:c.data.result,title:"\u8D2D\u4E70\u670D\u52A1"}):D.Z.warning({title:i("common.tip"),content:i("dashboard.buyTips")})})}}}componentDidMount(){this.getUserIsVip()}render(){var i=this.props.t,a=[Ci(),Si(),Pi(),Zi()];return e().createElement("div",{className:"purchase-container"},e().createElement("div",{className:"purchase-img"},a.map((t,s)=>e().createElement("img",{key:s.toString(),src:t,className:"image",alt:""}))),e().createElement("div",{className:"purchase-footer"},e().createElement(fs.Z,{content:e().createElement(_s,null),trigger:"click"},e().createElement(M.Z,{className:"form-page-container-bottom-btn"},i("dashboard.consultNow"))),e().createElement(M.Z,{className:"form-page-container-bottom-btn",type:"primary",onClick:this.handlePurchase},i("dashboard.payments"))))}}var xi=E=>({appType:E.user.appType,isAdmin:E.user.isAdmin,resourceLibrary:E.resourceLibrary,corpId:E.user.corpId,account:E.user.account,enterpriseId:E.user.enterpriseId}),Os=(0,y.$j)(xi)((0,f.Z)()(Li)),qi=r(13062),Di=r(71230),el=r(48736),Mi=r(27049),tl=r(89032),Ia=r(15746);function Oi(E){var i=E.pageSize,a=E.pageNumber,t=S.ZP.trainingTandards.getMyTrainingTandards(),s={enterpriseId:S.ZP.enterpriseId,userId:S.ZP.userId,pageSize:i,pageNumber:a};return re.WY.get({url:t,params:s})}var Gt={pageNumber:1,pageSize:10};class Ri extends e().Component{constructor(){super(...arguments);this.state={dataList:[]},this.getDataList=()=>{var i=Gt.pageNumber,a=Gt.pageSize,t={pageSize:a,pageNumber:i};Oi(t).then(s=>{s.data&&s.data.data&&this.setState({dataList:s.data.data.list,dataTotal:s.data.data.total})})},this.pageChange=i=>{Gt.pageNumber=i,this.getDataList()},this.pageSizeChange=(i,a)=>{Gt.pageSize=a,this.getDataList()}}componentDidMount(){this.getDataList()}componentWillUnmount(){Gt.pageNumber=1,Gt.pageSize=10}render(){var i=this.state,a=i.dataTotal,t=i.dataList,s=this.props.t,n={current:Gt.pageNumber,total:a,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange};return e().createElement("div",{className:"my-study-target"},e().createElement("div",{className:"my-study-target-content"},t.length?t.map((l,c)=>e().createElement("div",{key:c.toString()},e().createElement("div",{className:"my-study-target-title"},l.objective_name),e().createElement("div",{className:"my-study-target-time"},s("certificateManage.effect"),"\uFF1A",e().createElement("span",{className:"my-study-target-text"},l.effect_date," - ",l.lapse_date," ")),e().createElement(Di.Z,{className:"my-study-target-content"},e().createElement(Ia.Z,{className:"my-study-target-content-item",span:11},e().createElement("span",null,s("trainingTandards.taskCredits"),"/",s("trainingTandards.targetCredits"),"\uFF1A",l.standard_score_by_task?e().createElement("span",{className:"my-study-target-text"},e().createElement("span",{className:l.actual_score_by_task<l.standard_score_by_task?"my-study-target-text-fail":""},l.actual_score_by_task),"/",l.standard_score_by_task):"--"),e().createElement("span",null,s("trainingTandards.selfStudyCredits"),"/",s("trainingTandards.targetCredits"),"\uFF1A",l.standard_score_by_self?e().createElement("span",{className:"my-study-target-text"},e().createElement("span",{className:l.actual_score_by_self<l.standard_score_by_self?"my-study-target-text-fail":""},l.actual_score_by_self),"/",l.standard_score_by_self):"--")),e().createElement(Ia.Z,{span:11,offset:2},e().createElement("span",null,s("trainingTandards.taskClassHours"),"/",s("trainingTandards.targetClassHours"),"\uFF1A",l.standard_hour_by_task?e().createElement("span",{className:"my-study-target-text"},e().createElement("span",{className:l.actual_hour_by_task<l.standard_hour_by_task?"my-study-target-text-fail":""},l.actual_hour_by_task),"/",l.standard_hour_by_task):"--"),e().createElement("span",null,s("trainingTandards.selfClassHours"),"/",s("trainingTandards.targetClassHours"),"\uFF1A",l.standard_hour_by_self?e().createElement("span",{className:"my-study-target-text"},e().createElement("span",{className:l.actual_hour_by_self<l.standard_hour_by_self?"my-study-target-text-fail":""},l.actual_hour_by_self),"/",l.standard_hour_by_self):"--")),e().createElement(Ia.Z,{span:11},e().createElement("span",null,s("trainingTandards.taskCertificate"),"/",s("trainingTandards.targetCertificate"),"\uFF1A",l.standard_certificate_by_task?e().createElement("span",{className:"my-study-target-text"},e().createElement("span",{className:l.actual_certificate_by_task<l.standard_certificate_by_task?"my-study-target-text-fail":""},l.actual_certificate_by_task),"/",l.standard_certificate_by_task):"--"),e().createElement("span",null,s("trainingTandards.selfCertificate"),"/",s("trainingTandards.targetCertificate"),"\uFF1A",l.standard_certificate_by_self?e().createElement("span",{className:"my-study-target-text"},e().createElement("span",{className:l.actual_certificate_by_self<l.standard_certificate_by_self?"my-study-target-text-fail":""},l.actual_certificate_by_self),"/",l.standard_certificate_by_self):"--")),e().createElement(Ia.Z,{span:11,offset:2},e().createElement("span",null,s("trainingTandards.integral"),"/",s("trainingTandards.targetIntegral"),"\uFF1A",l.standard_integral?e().createElement("span",{className:"my-study-target-text"},e().createElement("span",{className:l.actual_integral<l.standard_integral?"my-study-target-text-fail":""},l.actual_integral),"/",l.standard_integral):"--")),e().createElement(Mi.Z,null)))):e().createElement(Bt.Z,{className:"no-task-tip"})),e().createElement("div",{className:"my-study-target-footer"},t.length?e().createElement(C.Z,n):null))}}var Rs=(0,f.Z)()(Ri),ki=r(72805),wi=r.n(ki),Ai=r(4408),Bi=r(90978),Ui=r(98078),Wi=E=>({appType:E.user.appType,isAdmin:E.user.isAdmin,resourceLibrary:E.resourceLibrary,corpId:E.user.corpId,account:E.user.account,enterpriseId:E.user.enterpriseId,userInfo:E.user,qyShield:E.user.qyShield});class ks extends e().Component{constructor(i){var a;super(i);a=this,this.getShowOtherInfo=(0,B.Z)(I().mark(function t(){var s,n,l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=window.localStorage.getItem("enterpriseId"),u.prev=1,u.next=4,(0,Z.C)(s);case 4:n=u.sent,l=n.data,l.learn_open&&a.setState({learn_open:!0},()=>{a.getLearnAbilityCode()}),l.share_open&&a.setState({share_open:!0},()=>{a.getLearnShareCode()}),u.next=13;break;case 10:u.prev=10,u.t0=u.catch(1),a.setState({learn_open:!1,share_open:!1});case 13:case"end":return u.stop()}},t,null,[[1,10]])})),this.handleQueryToJump=()=>{var t=g.parse(ue.m8.location.search),s=t.tab,n="woderenwu",l=e().createElement(_a,null);switch(s){case"employeeFiles":case"mycredit":case"signBoard":case"mycertificate":case"studyRecord":case"reportRecord":n="peixunjilu",l=e().createElement(ss,null);break;case"checkin":case"teachingManagement":case"workApproval":case"reportApproval":case"resultsApproval":n="peixuncaozuo",l=e().createElement(Wa,null);break;case"mycreate":case"course":case"order":case"collect":n="wodegongxian",l=e().createElement(ys,null);break;case"servicePack":n="servicePack",l=e().createElement(Os,null);break;case"studyTarget":n="studyTarget",l=e().createElement(Rs,null);break;case"myObligatoryTask":case"myExamTask":case"mySelfStudyTask":case"myCoachingTask":case"trainingPlan":n="woderenwu",l=e().createElement(_a,null);break;case"hands_on_approval":case"training_annual_plan":case"training_month_plan":case"training_temp_plan":case"training_demand":case"training_task":case"approvalProcess":n="shenpicaozuo",l=e().createElement(gs,null);break;case"zexaMark":n="peixuncaozuo",l=e().createElement(Wa,null);default:}this.setState({activeTab:n,currentDom:l})},this.getBindMobile=()=>{var t=S.ZP.Login.getBindMobile();re.WY.get({url:t}).then(s=>{var n=s.data,l=n.login_email,c=n.login_mobile;this.setState({bindData:{loginEmail:l,loginMobile:c}})})},this.getRank=()=>{var t=S.ZP.points.myIntegral(this.props.userInfo.id);re.WY.get({url:t}).then(s=>{this.setState({rankData:s.data})}).catch(()=>{})},this.getLearnAbilityCode=(0,B.Z)(I().mark(function t(){var s,n,l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=S.ZP.learn.getAbilityCode(),u.prev=1,u.next=4,re.WY.get({url:s});case 4:n=u.sent,l=n.data,a.setState({abilityData:l}),u.next=12;break;case 9:u.prev=9,u.t0=u.catch(1),a.setState({abilityData:{}});case 12:case"end":return u.stop()}},t,null,[[1,9]])})),this.getLearnShareCode=(0,B.Z)(I().mark(function t(){var s,n,l;return I().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=S.ZP.learn.getShareCode(),u.prev=1,u.next=4,re.WY.get({url:s});case 4:n=u.sent,l=n.data,a.setState({shareData:l}),u.next=12;break;case 9:u.prev=9,u.t0=u.catch(1),a.setState({shareData:{}});case 12:case"end":return u.stop()}},t,null,[[1,9]])})),this.getMyScoreSummary=()=>{var t=S.ZP.Personal.getMyScoreSummary();re.WY.get({url:t}).then(s=>{var n=s.data.totalScore;this.setState({totalScore:n})})},this.getCertificate=()=>{var t=this.props.userInfo.id,s={source_type:0,user_id:t,begin_time:"",certificate_name:"",end_time:"",page_number:1,page_size:1};re.WY.get({url:S.ZP.CertificateList.getPersonalCertificate(),params:s}).then(n=>{this.setState({certificateNum:n.data.total})})},this.getProfile=()=>{var t=S.ZP.Personal.getProfile();re.WY.get({url:t}).then(s=>{s.data.code===0&&this.setState({userInfo:s.data.data})})},this.clickTab=t=>{if(t.key==="myTeaching"){(0,N.eJ)({url:"/lecturer/lecturerManage/details?lecturerId=".concat(this.state.showLecturerId,"&from=myTeaching")});return}this.setState({activeTab:t.key,currentDom:t.children})},this.getWhetherLecture=(0,B.Z)(I().mark(function t(){var s,n;return I().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.LI)();case 2:s=c.sent,n=s.data,a.setState({showLecturerId:n.data});case 5:case"end":return c.stop()}},t)})),this.getTabList=()=>{var t=this.props,s=t.t,n=t.appType,l=this.state,c=l.isDDAdmin,u=l.showLecturerId,P=[{title:s("dashboard.myTask"),icon:"icon-woderenwu",key:"woderenwu",show:!0,children:e().createElement(_a,null)},{title:s("trainingTandards.myStudyTarget"),icon:"icon-xuexilishi",key:"studyTarget",show:(0,Ui.WC)(),children:e().createElement(Rs,null)},{title:s("userCenter.trainingRecord"),icon:"icon-peixunjilu",key:"peixunjilu",show:!0,children:e().createElement(ss,null)},{title:s("userCenter.trainOperation"),icon:"icon-peixuncaozuo",key:"peixuncaozuo",show:!0,children:e().createElement(Wa,null)},{title:s("userCenter.approval"),icon:"icon-shenpicaozuo",key:"shenpicaozuo",show:!0,children:e().createElement(gs,null)},{title:s("userCenter.myContribution"),icon:"icon-wodegongxian",key:"wodegongxian",show:!0,children:e().createElement(ys,null)},{title:s("lineClass.myTeaching"),icon:"icon-wodeshouke",key:"myTeaching",show:u,children:null},{title:s("userCenter.myComment"),icon:"icon-Comment",key:"wodepingjia",show:!0,children:e().createElement(yi,null)},{title:s("dashboard.myCourse"),icon:"icon-xuexi_xuanzhong",key:"wodekecheng",show:(0,N.UI)("PERSONAL_MINE_COURSE"),children:e().createElement(gn,null)},{title:s("dashboard.servicePackage"),icon:"icon-peixunfuwubao",key:"servicePack",show:c&&n==="e_app",children:e().createElement(Os,null)}];return P},this.handleCloseBindAccountModal=()=>{},this.renderButtons=()=>{var t=this.state.bindData,s=t.loginEmail,n=t.loginMobile,l=this.props.t,c=s||n;return c?e().createElement("div",null,this.state.showAuthModal?e().createElement("span",{className:"bind-user-authentication",onClick:()=>this.showAuthenticationModal()},e().createElement(Qe.Z,{iconClass:"icon-icon_user"}),l("component.realAuthentication")):""):e().createElement("div",null,this.state.showAuthModal?e().createElement("span",{className:"bind-user-authentication",onClick:()=>this.showAuthenticationModal()},e().createElement(Qe.Z,{iconClass:"icon-icon_user"}),l("component.realAuthentication")):"")},this.personalCenterLink=t=>{(0,N.eJ)({url:"/personal/profile?tab=".concat(t)})},this.handleCloseChangePasswordModal=()=>{this.setState({changePasswordModalVisible:!1})},this.showAuthenticationModal=()=>{this.setState({showAuthentication:!0})},this.handleCloseAuthenticationModal=()=>{this.setState({showAuthentication:!1})},this.state={userInfo:{},activeTab:"woderenwu",currentDom:e().createElement(_a,null),bindAccountModalVisible:!1,changePasswordModalVisible:!1,isDDAdmin:!1,totalScore:0,certificateNum:0,rankData:{},abilityData:{},shareData:{},bindData:{loginEmail:"",loginMobile:""},showAuthentication:!1,showAuthModal:!1,showLecturerId:!1}}componentDidMount(){this.handleQueryToJump(),this.getUserGoodsInfo(),this.getProfile(),this.getMyScoreSummary(),this.getShowOtherInfo(),this.getRank(),this.getCertificate(),this.getBindMobile(),(0,Z.y2)().then(i=>{this.setState({showAuthModal:i.data.data||!1})}),this.getWhetherLecture()}componentDidUpdate(i){if(i.resourceLibrary.refresh!==this.props.resourceLibrary.refresh){var a=g.parse(ue.m8.location.search),t=a.tab;t&&this.handleQueryToJump()}this.props.userInfo.todaySignStatus!==i.userInfo.todaySignStatus&&this.props.userInfo.todaySignStatus&&(this.getRank(),this.props.dispatch({type:"refresh/refreshSignIn",payload:!0}))}getUserGoodsInfo(){var i={dingUserId:this.props.account,corpId:this.props.corpId},a=S.ZP.Dashboard.getUserGoodsInfo(i);re.WY.get({url:a}).then(t=>{if(t){var s=t.data;this.setState({isDDAdmin:s?s.isAdmin:!1})}})}render(){var i,a=this.state,t=a.userInfo,s=a.activeTab,n=a.rankData,l=a.totalScore,c=a.certificateNum,u=a.bindAccountModalVisible,P=a.changePasswordModalVisible,K=a.currentDom,ae=a.bindData,ee=a.showAuthentication,de=a.shareData,_e=a.abilityData,Ie=a.learn_open,Ue=a.share_open,ke=ae.loginEmail,De=ae.loginMobile,pe=this.props,Ee=pe.t,le=pe.prefixCls,Ke=this.getTabList(),qe=(0,kt.p)(),rt={color:qe};return e().createElement("div",{className:le},e().createElement(Ai.Z,{title:Ee("component.personalCenter")}),e().createElement("div",{className:"".concat(le,"__content")},e().createElement("div",{className:"".concat(le,"__content__left")},e().createElement("div",{className:"".concat(le,"__content__left__top")},e().createElement("div",{className:"".concat(le,"__content__left__avater")},e().createElement("img",{src:t.avatar||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png"),className:"avatar",alt:""})),e().createElement("div",{className:"".concat(le,"__content__left__name")},e().createElement(ce.Z,{dataType:"userName",value:t.unionid,name:t.name,type:t.sourceType||""})),e().createElement("div",{className:"".concat(le,"__content__left__level-name")},((i=n.level)===null||i===void 0?void 0:i.level_name)||Ee("personal.noPosition")),this.renderButtons()?e().createElement("div",{className:"".concat(le,"__content__left__button")},this.renderButtons()):null,e().createElement("div",{className:"".concat(le,"__content__left__num")},e().createElement("div",{onClick:()=>this.personalCenterLink("mycredit"),className:"".concat(le,"__content__left__num__content ").concat(le,"__link content__left__num__content_border_style")},e().createElement("p",{className:"label"},Ee("userCenter.credit")),e().createElement("p",{className:"nums"},l)),e().createElement("div",null),e().createElement("div",{onClick:()=>this.personalCenterLink("mycertificate"),className:"".concat(le,"__content__left__num__content ").concat(le,"__link content__left__num__content_border_style")},e().createElement("p",{className:"label"},Ee("userCenter.certificate")),e().createElement("p",{className:"nums"},c)),e().createElement("div",null),e().createElement("div",{onClick:()=>this.personalCenterLink("signBoard"),className:"".concat(le,"__content__left__num__content ").concat(le,"__link")},e().createElement("p",{className:"label"},Ee("userCenter.integral")),e().createElement("p",{className:"nums"},n.total||0)),Ie&&e().createElement("div",{className:"".concat(le,"__content__left__num__content  content__left__num__content_border_style")},e().createElement("p",{className:"label"},Ee("userCenter.learnAbility")),e().createElement("p",{className:"nums"},(0,N.YY)(_e.study_power)||0)),Ue&&e().createElement("div",{className:"".concat(le,"__content__left__num__content")},e().createElement("p",{className:"label"},Ee("userCenter.learnShare")),e().createElement("p",{className:"nums"},(0,N.YY)(de.study_power)||0))),e().createElement("div",{className:"".concat(le,"__content__left__menu")},Ke.map(Ne=>{var we=s===Ne.key;return Ne.show&&e().createElement("div",{className:"".concat(le,"__content__left__menu-item ").concat(we?"hover":""),onClick:()=>this.clickTab(Ne),style:we?rt:{},key:Ne.key},e().createElement(Qe.Z,{iconClass:Ne.icon,size:"18px",color:we?qe:""}),Ne.title)}))),e().createElement("div",{className:"".concat(le,"__content__left__sign")},e().createElement(Bi.Z,{prefixCls:"person-sign-in",type:"userCenter",noHeader:!0,params:{themeColor:qe},t:Ee}))),e().createElement("div",{className:"".concat(le,"__content__right")},e().createElement("div",{className:"".concat(le,"__content__right__background")},e().createElement("div",{className:"title-header"},e().createElement("p",null,"\u4E2A\u4EBA\u4E2D\u5FC3"),e().createElement("p",null,"Personal center")),e().createElement("img",{src:wi(),alt:""})),e().createElement("div",{className:"".concat(le,"__content__right__container")},K))),e().createElement(Y,{visible:u,onCancel:this.handleCloseBindAccountModal}),P&&e().createElement(J,{visible:P,mobile:De,email:ke,onCancel:this.handleCloseChangePasswordModal}),e().createElement(ie,{visible:ee,onHide:this.handleCloseAuthenticationModal}))}}ks.defaultProps={prefixCls:"user-center"};var Fi=(0,y.$j)(Wi)((0,f.Z)()(ks))},17676:function(be,me,r){"use strict";r.d(me,{E6:function(){return R},h$:function(){return e},_v:function(){return ue},R9:function(){return f},wq:function(){return g},BV:function(){return Z},Np:function(){return m},af:function(){return Q},RX:function(){return L},WF:function(){return M},gm:function(){return o}});var B=r(88986),T=r(37055),I=r(10237);function R(v){return I.WY.get({url:T.ZP.lineClassStudy.signCourses(),params:v})}function e(v){return I.WY.get({url:T.ZP.lineClassStudy.signCoursesCount(),params:v})}function ue(v){return I.WY.get({url:T.ZP.lineClassStudy.teachingsList(),params:v})}function f(v){return I.WY.get({url:T.ZP.lineClassStudy.teachingCoursesCount(),params:v})}function y(v){return request.get({url:CONFIG.lineClass.getOfflineCourseSignAnalysis(v)})}function g(v,k){return I.WY.post({url:T.ZP.lineClass.updateOfflineCourseSetting(),data:(0,B.Z)({courseId:v,enterpriseId:localStorage.getItem("enterpriseId")},k)})}function Z(v){return I.WY.get({url:T.ZP.lineClass.getOfflineCourseSetting(),params:{courseId:v,enterpriseId:localStorage.getItem("enterpriseId")}})}function m(v){return I.WY.post({url:T.ZP.lineClassStudy.lecturerRefuse(v)})}function d(v){return request.get({url:CONFIG.lineClassStudy.approvalsList(),params:v})}function q(){return request.get({url:CONFIG.lineClassStudy.approvalCoursesCount()})}function Q(v){return I.WY.post({url:T.ZP.lineClassStudy.resouceAdd(),data:v})}function L(v){return I.WY.get({url:T.ZP.lineClassStudy.getResource(),params:v})}function M(v){return I.WY.get({url:T.ZP.lineClassStudy.getLineCourse(),params:v})}function o(v){return I.WY.get({url:T.ZP.lineClassStudy.getStuAttendanceInfo(v),params:{}})}},7908:function(be,me,r){"use strict";var B=r(62029),T=r(34792),I=r(48086),R=r(12924),e=r.n(R),ue=r(91768),f=r(18329),y=r(6793),g=r(80991),Z=r(63273),m={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20,offset:0},sm:{span:20,offset:0}}};class d extends e().Component{constructor(Q){super(Q);this.onCancel=()=>{var L=this.props.onCancel;L()},this.onOk=()=>{this.state.formRef.submitForm()},this.onSubmit=L=>{var M=this.props,o=M.t,v=M.onUploadComplete;L.attachment&&L.attachment.length?v(L.attachment):I.default.warning(o("lineClassStudy.chooseAttachment"))},this.initRef=L=>{this.setState({formRef:L})},this.state={formRef:null,maxCount:10}}render(){var Q=this.props,L=Q.t,M=Q.visible,o=Q.prefixCls,v=Q.initData,k=this.state.maxCount,j={okText:L("common.submit"),cancelText:L("common.cancel"),size:"medium",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};return e().createElement(f.ZP,(0,B.Z)({},j,{title:L("lineClassStudy.uploadDatum"),visible:M,onCancel:this.onCancel,onOk:this.onOk}),e().createElement("div",{className:o},M?e().createElement(g.J9,{ref:this.initRef,initialValues:v,onSubmit:this.onSubmit,render:()=>e().createElement(g.l0,null,e().createElement(g.gN,(0,B.Z)({name:"attachment",canSelectCourse:!1,notLibrary:!0,maxFilesCount:k,uploadTips:"".concat((0,y.ZT)("".concat(L("lineClassStudy.uploadTip")),k),", ").concat(L("lineClassStudy.imgSizeError")),uploadComponentId:"aea320ed-12d8-40ee-9c26-bf6151db3423",label:L("component.practiceAttachment"),component:Z.Pg,displayType:"Custom",removeable:!0},m)))}):null))}}d.defaultProps={prefixCls:"upload-datum-dialog"},me.Z=(0,ue.Z)()(d)},17381:function(be,me,r){"use strict";r.d(me,{Xs:function(){return R},fV:function(){return e},_w:function(){return ue},G5:function(){return f},g2:function(){return y},uy:function(){return g},il:function(){return Z},y2:function(){return m},$k:function(){return q},gm:function(){return L},C:function(){return M},Wl:function(){return o},ZS:function(){return v},XZ:function(){return k},LI:function(){return j},fR:function(){return x},Pt:function(){return S}});var B=r(37055),T=r(10237),I=r(5430);function R(N){var F=N.login_mobile,ne=N.verification_code,J=N.password,W=N.encrypt,Y=B.ZP.Login.clResetPassword();return T.WY.post({url:Y,data:{login_mobile:F,verification_code:ne,password:J,encrypt:W}})}function e(){var N=B.ZP.points.getPointsCategory();return T.WY.get({url:N})}function ue(N){var F=N.login_mobile,ne=N.verification_code,J=N.password,W=N.encrypt,Y=B.ZP.Login.bindUserAccount();return T.WY.post({url:Y,data:{login_mobile:F,verification_code:ne,password:J,encrypt:W}})}function f(N){var F=N.action_type,ne=N.login_mobile,J=B.ZP.Login.bindSendVerification();return T.WY.post({url:J,data:{action_type:F,login_mobile:ne}})}function y(N){var F=N.action_type,ne=N.login_mobile,J=N.enterpriseId,W=B.ZP.Login.clSendVerification();return T.WY.post({url:W,data:{action_type:F,login_mobile:ne,enterprise_id:J}})}function g(N){var F=B.ZP.advancedSetting.identityQuery();return T.WY.get({url:F,params:N})}function Z(N){var F=B.ZP.advancedSetting.saveIdentity();return T.WY.post({url:F,data:N})}function m(N){var F=B.ZP.advancedSetting.isShowAuth();return T.WY.get({url:F,data:N})}function d(N){return request.get({url:CONFIG.lineClass.getOfflineCourseBasicById(N)})}function q(N){return T.WY.get({url:B.ZP.lineClassStudy.coursesInfo(N)})}function Q(N,F){return request.get({url:CONFIG.lineClassStudy.getAttendanceInfo(N),params:{type:F}})}function L(N){return T.WY.get({url:B.ZP.lineClassStudy.getStuAttendanceInfo(N),params:{}})}function M(N){var F=B.ZP.learn.getShowLearnStatus(N);return T.WY.get({url:F})}function o(N){var F=N.examId,ne=N.taskId,J=I.OB.examData.examTaskInfo(F);return T.WY.get({url:J,params:{task_id:ne}})}function v(N){var F=I.OB.examData.getExamsTaskList();return T.WY.get({url:F,params:N})}function k(N,F){var ne=I.OB.examData.checkStatus(N);return T.WY.get({url:ne,params:{task_id:F}})}function j(){var N=B.ZP.lineClass.whetherLecture();return T.WY.get({url:N})}function D(){var N=TRAINING_PROJECT_LIST.personal.list();return request.get({url:N})}function x(N){var F=N.startTime,ne=N.endTime,J=N.excludeSelf,W=J===void 0?!1:J,Y=N.pageNumber,V=N.pageSize,X=B.ZP.Personal.exportMyScore();return T.WY.get({url:X,params:{startTime:F,endTime:ne,excludeSelf:W,pageNumber:Y,pageSize:V}})}function S(N,F){var ne=F.begin_time,J=F.end_time,W=F.page_number,Y=F.page_size,V=F.integral_type,X=B.ZP.points.getUserPointsDetail(N);return T.WY.get({url:X,params:{begin_time:ne,end_time:J,page_number:W,page_size:Y,integral_type:V}})}function oe(N){var F=N.integral_type,ne=N.update_reason,J=N.begin_time,W=N.end_time,Y=CONFIG.points.exportPointsDetail();return request.post({url:Y,params:{integral_type:F,update_reason:ne,begin_time:J,end_time:W}})}},91705:function(be,me,r){"use strict";r.d(me,{Bw:function(){return R},CM:function(){return e},L_:function(){return ue},m5:function(){return f},dB:function(){return y},P8:function(){return g},Ad:function(){return Z},mr:function(){return m},a9:function(){return d},ON:function(){return q}});var B=r(88986),T=r(37055),I=r(10237);function R(Q,L){var M=T.ZP.submitReport.reportRecordList();return I.WY.get({url:M,params:(0,B.Z)((0,B.Z)({},Q),L)})}function e(Q){var L=T.ZP.submitReport.deleteReportRecord(Q);return I.WY.post({url:L})}function ue(Q){var L=T.ZP.submitReport.reportApprove();return I.WY.get({url:L,params:Q})}function f(Q,L){var M=T.ZP.submitReport.getApproveRecord(Q,L);return I.WY.get({url:M})}function y(Q){var L=T.ZP.submitReport.approveDraft(Q);return I.WY.get({url:L})}function g(Q,L){var M=T.ZP.submitReport.submitApprove(Q);return I.WY.post({url:M,data:L})}function Z(Q){var L=T.ZP.submitReport.reportManageList();return I.WY.get({url:L,params:Q})}function m(Q){var L="".concat(T.ZP.submitReport.sureToImportReport());return I.WY.post({url:L,params:Q})}function d(Q,L){var M=L?T.ZP.submitReport.reSubmit():T.ZP.submitReport.addOrEdit();return I.WY.post({url:M,data:Q})}function q(Q){var L=T.ZP.submitReport.getDetails(Q);return I.WY.get({url:L})}},56680:function(be,me,r){"use strict";r.d(me,{DC:function(){return R},Nf:function(){return e},vn:function(){return ue},u7:function(){return f},lN:function(){return y},dh:function(){return g},OI:function(){return Z},OV:function(){return m},rb:function(){return d},$F:function(){return q},QG:function(){return Q},oh:function(){return L},ov:function(){return M}});var B=r(76651),T=r(37055),I=r(10237);function R(o){var v=T.ZP.CertificateListMangement.getTableList(B.m8.location.query.id);return I.WY.get({url:v,params:o})}function e(o){var v=T.ZP.CertificateListMangement.updateStatus();return I.qg.post({url:v,data:o})}function ue(o,v){var k=T.ZP.CertificateListMangement.deleteCertificate(o);return I.qg.post({url:k,data:v})}function f(){var o=T.ZP.CertificateListMangement.certificateDetail(B.m8.location.query.id);return I.WY.get({url:o})}function y(o){var v=T.ZP.CertificateListMangement.certificateUser(B.m8.location.query.id);return I.WY.get({url:v,params:o})}function g(o){var v=T.ZP.CertificateListMangement.revokeCertificate({certificateId:B.m8.location.query.id});return I.WY.post({url:v,data:o})}function Z(o){var v=T.ZP.CertificateListMangement.remindCertificate({certificateId:B.m8.location.query.id});return I.WY.post({url:v,data:o})}function m(o){var v=T.ZP.CertificateListMangement.regenerateCertificate();return I.WY.post({url:v,params:{certificate_id:o}})}function d(o){var v=T.ZP.CertificateListMangement.certificateRelation({certificateId:B.m8.location.query.id});return I.WY.get({url:v,params:o})}function q(o){var v=T.ZP.CertificateListMangement.issuance();return I.WY.post({url:v,data:o})}function Q(o){var v=T.ZP.CertificateListMangement.exportUser({certificateId:B.m8.location.query.id});return I.WY.get({url:v,params:o})}function L(o){var v=T.ZP.CertificateListMangement.exportUserImg({certificateId:B.m8.location.query.id});return I.WY.get({url:v,params:o})}function M(o){var v=T.ZP.CertificateListMangement.submitTemplate({certificateId:B.m8.location.query.id});return I.WY.get({url:v,params:o})}},48336:function(be,me,r){"use strict";r.d(me,{Z:function(){return X}});var B=r(34792),T=r(48086),I=r(57361),R=r(47673),e=r(4107),ue=r(9754),f=r.n(ue),y=r(12924),g=r.n(y),Z=r(91768),m=r(76651),d=r(57119),q=r(56680),Q=r(66456),L=r(55313),M=r(43185),o=r(53251),v=r(62029),k=r(57663),j=r(71577),D=r(28216),x=r(84874),S=r(18329),oe=r(37055),N=r(97593);class F extends g().Component{constructor(w){super(w);this.onOk=()=>{var h=this.props.t;this.state.fileList.length&&(0,q.ov)({new_file_name:this.state.fileList[0].new_file_name}).then(_=>{_.data.check==="true"?(T.default.success(h("certificateManage.importSuccess")),this.props.onCloseModal(),this.props.onRefresh()):T.default.error(_.data.error_message)})},this.onDownloadTemplate=()=>{window.location.href="".concat(oe.ZP.CertificateListMangement.exportTemplateDown(),"?access_token=").concat(window.localStorage.getItem("token"))},this.beforeUpload=()=>{var h=this.state.modalConfig;h.okButtonProps.disabled=!0,this.setState({modalConfig:h})},this.fileChangeUpload=h=>{var _=this.props.t,C=this.state.modalConfig;if(h.file.status==="done"){T.default.success("".concat(h.file.name," ").concat(_("setting.uploadSuccess"))),h.file.response.check==="false"?this.setState({errorList:h.file.response.error_messages}):h.file.response.check==="true"&&(C.okButtonProps.disabled=!1,this.setState({modalConfig:C,errorList:[]}));var A=[{key:h.file.uid,file_name:h.file.response.file_name,new_file_name:h.file.response.new_file_name,failed_count:h.file.response.failed_count||0}];this.setState({fileList:A})}else h.file.status==="error"&&T.default.error("".concat(h.file.name," ").concat(_("setting.uploadFail")))},this.handleExportResource=()=>{(0,N.N)({page:"resourceSettings",props:this.props})},this.handleExportUser=()=>{window.location.href="".concat(oe.ZP.lineClass.userInfoDownload(),"?access_token=").concat(window.localStorage.getItem("token"))},this.state={errorList:[],fileList:[],modalConfig:{size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,okButtonProps:{disabled:!0}},uploadConfig:{name:"file",action:oe.ZP.CertificateListMangement.importTemplate,showUploadList:!1,data:{access_token:window.localStorage.getItem("token")},beforeUpload:this.beforeUpload,onChange:this.fileChangeUpload,accept:".xlsx"}}}componentDidUpdate(w){w.visible!==this.props.visible&&this.props.visible&&this.setState({errorList:[],fileList:[]})}render(){var w=this.state,h=w.uploadConfig,_=w.fileList,C=w.errorList,A=w.modalConfig,U=this.props,se=U.prefixCls,z=U.t,p=U.visible,H=U.onCloseModal,G=[{title:z("component.fileName"),dataIndex:"file_name",key:"uuid"},{title:z("component.failedLabel"),dataIndex:"failed_count"}];return g().createElement(S.ZP,(0,v.Z)({},A,{title:z("exam.importTemplate"),visible:p,onCancel:H,onOk:this.onOk}),g().createElement("div",{className:se},g().createElement("div",{className:"import-question-import"},g().createElement(j.Z,{className:"import-question-import-btn",onClick:this.onDownloadTemplate},g().createElement(x.Z,{iconClass:"icon-icon_donwloadx1"}),z("component.downloadTem")),g().createElement(o.Z,(0,v.Z)({className:"import-question-import-btn right"},h),g().createElement(j.Z,{type:"primary"},g().createElement(x.Z,{iconClass:"icon-import"}),z("component.importLabel")))),g().createElement("div",{className:"import-question-table"},g().createElement(L.Z,{dataSource:_,columns:G,bordered:!0,rowKey:re=>re.new_file_name,size:"middle",pagination:!1}),C.length>0?g().createElement("div",{className:"show-error-message"},g().createElement("div",{className:"tips"},g().createElement(x.Z,{iconClass:"icon-tishi"}),g().createElement("span",null,z("component.errorTips"),"\uFF1A")),g().createElement("div",{className:"error-content"},C.map((re,fe)=>g().createElement("div",{key:fe},re)))):null)))}}F.defaultProps={prefixCls:"additional-record-export"};var ne=(0,D.$j)()((0,Z.Z)()(F)),J=r(6793),W=r(65202),Y=e.Z.TextArea;class V extends g().Component{constructor(w){var h;super(w);h=this,this.handleRevokeCertificate=(0,I.Z)(f().mark(function _(){var C,A,U,se,z;return f().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(C=h.state.revokeModal,A=h.props,U=A.selectedItems,se=A.t,z=[],U.forEach(G=>{z.push(G.id)}),C.reason!==""){H.next=7;break}return T.default.error(se("certificateManage.inputRevokeReason")),H.abrupt("return");case 7:(0,q.dh)({revoke_reason:C.reason,certificate_record_ids:z}).then(G=>{h.handleCloseModal(),G.status===200&&h.props.onSearchKey()});case 8:case"end":return H.stop()}},_)})),this.handleRemindCertificate=(0,I.Z)(f().mark(function _(){var C,A;return f().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:C=h.props.selectedItems,A=[],C.forEach(z=>{A.push(z.id)}),(0,q.OI)({type:"validity",certificate_record_ids:A}).then(z=>{h.handleCloseModal(),z.status===200&&h.props.onSearchKey()});case 4:case"end":return se.stop()}},_)})),this.handleRetryCertificate=(0,I.Z)(f().mark(function _(){var C;return f().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:C=m.m8.location.query.id,(0,q.OV)(C).then(se=>{h.handleCloseModal(),se.status===200&&h.props.onSearchKey()});case 2:case"end":return U.stop()}},_)})),this.handleViewCertificate=_=>{var C=_.record;this.setState({viewModal:{visible:!0,record:C}})},this.handleOpenModal=_=>{var C=this.props.selectedItems;if(_==="import"){this.setState({userImportModal:{visible:!0}});return}if(_==="retry"){this.setState({retryModal:{visible:!0}});return}if(C.length<=0){T.default.info(this.props.t("validation.employeeNull"));return}_==="revoke"?this.setState({revokeModal:{visible:!0,reason:""}}):_==="remind"&&this.setState({remindModal:{visible:!0}})},this.handleCloseModal=()=>{this.setState({revokeModal:{visible:!1,reason:""},remindModal:{visible:!1},retryModal:{visible:!1},viewModal:{visible:!1,record:{}},userImportModal:{visible:!1}})},this.handleChange=(_,C)=>{_==="reason"&&this.setState({revokeModal:{visible:!0,reason:C.target.value}})},this.handleDownloadImg=()=>{var _=this.state.viewModal;_.record.image_url.indexOf("http://")>-1&&(_.record.image_url=_.record.image_url.replace("http://","https://"));var C=new Image;C.setAttribute("crossOrigin","anonymous"),C.onload=()=>{var A=document.createElement("canvas");A.width=C.width,A.height=C.height;var U=A.getContext("2d");U.drawImage(C,0,0,C.width,C.height);var se=A.toDataURL("image/png"),z=document.createElement("a"),p=new MouseEvent("click");z.download=_.record.certificate_name||"photo",z.href=se,z.dispatchEvent(p)},C.src=_.record.image_url},this.state={revokeModal:{visible:!1,reason:""},remindModal:{visible:!1},retryModal:{visible:!1},viewModal:{visible:!1,record:{}},userImportModal:{visible:!1}}}componentDidMount(){this.props.onRef(this)}render(){var w=this.props,h=w.prefixCls,_=w.t,C=w.onSearchKey,A=this.state,U=A.revokeModal,se=A.remindModal,z=A.retryModal,p=A.viewModal,H=A.userImportModal;return g().createElement("section",null,g().createElement(S.ZP,{visible:U.visible,title:"",closable:!1,width:500,onOk:this.handleRevokeCertificate,onCancel:this.handleCloseModal,className:"".concat(h," ").concat(h,"__Revoke")},g().createElement("div",{className:"modal_title"},g().createElement(d.Z,{className:"".concat(h,"__icon")}),_("certificateManage.certificateRevokeTitle")),g().createElement("div",{className:"modal_content"},g().createElement("p",null,_("certificateManage.certificateRevokeTip")),g().createElement("p",null,g().createElement("span",{style:{color:"red"}},"*\xA0"),_("certificateManage.revokeReason"),":"),g().createElement(Y,{value:U.reason,maxLength:200,onChange:this.handleChange.bind(this,"reason")}))),g().createElement(S.ZP,{visible:se.visible,title:"",closable:!1,width:500,onOk:this.handleRemindCertificate,onCancel:this.handleCloseModal,className:"".concat(h," ").concat(h,"__remind")},g().createElement("div",{className:"modal_title"},g().createElement(d.Z,{className:"".concat(h,"__icon")}),_("certificateManage.certificateRemindTitle")),g().createElement("div",{className:"modal_content"},g().createElement("p",null,_("certificateManage.certificateRemindTip")," "))),g().createElement(S.ZP,{visible:z.visible,title:"",closable:!1,width:500,onOk:this.handleRetryCertificate,onCancel:this.handleCloseModal,className:"".concat(h," ").concat(h,"__remind")},g().createElement("div",{className:"modal_title"},g().createElement(d.Z,{className:"".concat(h,"__icon")}),_("certificateManage.certificateRetryTitle")),g().createElement("div",{className:"modal_content"},g().createElement("p",null,_("certificateManage.certificateRetryTip")," "))),g().createElement(S.ZP,{visible:p.visible,title:_("certificateManage.certificateViewTitle"),footer:null,onCancel:this.handleCloseModal,className:"".concat(h," ").concat(h,"__view")},g().createElement("section",{className:"".concat(h,"__view__imgBox")},p.record.image_url!==""&&p.record.image_url!=="fail"&&g().createElement("div",{className:"".concat(h,"__view_img_box")},g().createElement("img",{className:"".concat(h,"__view_img_box_cell"),src:p.record.image_url,alt:""})),(p.record.image_url===""||p.record.image_url==="fail")&&g().createElement("div",{className:"".concat(h,"__view_failedImg_box")},g().createElement("img",{className:"".concat(h,"__view_failedImg_box_cell"),src:"https://sdn.coolcollege.cn/assets/kuxueyuan/certificate/no-certificate.png",alt:""}),p.record.image_url===""&&g().createElement("span",{className:"".concat(h,"__view_failedImg_box_text"),style:{color:(0,W.p)()}},_("certificateManage.certificateGeneration")),p.record.image_url==="fail"&&g().createElement("span",{className:"".concat(h,"__view_failedImg_box_text"),style:{color:(0,W.p)()}},_("certificateManage.certificateFailed"))),g().createElement("p",{onClick:this.handleDownloadImg,className:"".concat(h,"__view__download"),style:{color:(0,W.p)(),cursor:"pointer"},rel:"noreferrer"},_("other.downloadPictures"))),g().createElement("section",{className:"".concat(h,"__view__textBox")},g().createElement("p",{className:"certificate_name"},p.record.certificate_name),g().createElement("p",null,g().createElement("span",{className:"label"},_("certificateManage.code"),"\uFF1A"),g().createElement("span",{className:"value"},p.record.certificate_code)),g().createElement("p",null,g().createElement("span",{className:"label"},_("certificateManage.issue"),"\uFF1A"),g().createElement("span",{className:"value"},(0,J.p6)(p.record.issue_date))),g().createElement("p",null,g().createElement("span",{className:"label"},_("certificateManage.effect"),"\uFF1A"),g().createElement("span",{className:"value"},(0,J.p6)(p.record.effect_date))),g().createElement("p",null,g().createElement("span",{className:"label"},_("certificateManage.overdue"),"\uFF1A"),g().createElement("span",{className:"value"},p.record.overdue_date!==null?(0,J.p6)(p.record.overdue_date):_("certificateManage.noData"))),g().createElement("p",null,g().createElement("span",{className:"label"},_("certificateManage.sourceType"),"\uFF1A"),g().createElement("span",{className:"value"},p.record.source_type_name)),g().createElement("p",null,g().createElement("span",{className:"label"},_("certificateManage.sourceName"),"\uFF1A"),g().createElement("span",{className:"value"},p.record.source_name)),p.record.certificate_reason&&p.record.certificate_reason!==""&&g().createElement("p",null,g().createElement("span",{className:"label"},_("certificateManage.reason"),"\uFF1A"),g().createElement("span",{className:"value"},p.record.certificate_reason)),p.record.revoke_reason&&p.record.revoke_reason!==""&&g().createElement("p",null,g().createElement("span",{className:"label"},_("certificateManage.revokeReason"),"\uFF1A"),g().createElement("span",{className:"value"},p.record.revoke_reason)))),g().createElement(ne,{visible:H.visible,onCloseModal:this.handleCloseModal,onRefresh:C}))}}V.defaultProps={prefixCls:"certificate-single__Modal",viewShow:!1};var X=(0,Z.Z)()(V)},27550:function(be,me,r){"use strict";var B=r(57663),T=r(71577),I=r(63185),R=r(9676),e=r(43358),ue=r(34041),f=r(88983),y=r(47933),g=r(12924),Z=r.n(g),m=r(28216),d=r(91768),q=r(49101),Q=r(84391),L=r(1164),M=r(48479),o=r(2971),v=r(45601),k=r(7249),j=r(64549),D=r(31945),x=oe=>{var N=oe.user,F=oe.currentRoute,ne=oe.advancedSetting;return{currentPath:F.path,allAuthRoutes:F.allAuthRoutes,userLng:N.lng,themeColor:ne.themeColor}};class S extends Z().Component{constructor(N){super(N);this.setPlaceholder=()=>{var F=this.props,ne=F.currentPath,J=F.allAuthRoutes,W=F.userLng,Y=this.state.language,V=J[ne];if(!!V){var X=Y[W].searchInputPlaceholder,ie="";V.menuKey==="studyTemplate"||V.menuKey==="examTemplate"?ie=X.template:V.menuKey==="management"||V.menuKey==="employee"||V.menuKey==="obligatory"||V.menuKey==="elective"||V.menuKey==="plan"||V.menuKey==="evaluation"||V.menuKey==="myEvaluationPlan"?ie=X.task:ie=X[V.menuKey],this.setState({currentPlaceholder:ie})}},this.handleRadiosChange=F=>{this.props.onRadiosChange(F.target.value)},this.handleSelectChange=F=>{this.props.onSelectChange(F)},this.handleSearch=F=>{this.props.onSearch(F)},this.handleChange=F=>{this.props.onCheckboxChange(F.target.checked)},this.handleDownload=()=>{this.props.onDownload()},this.renderRadios=()=>{var F=this.props,ne=F.prefixCls,J=F.radioList,W=F.defaultRadioValue,Y=F.radioValue;if(!J.length)return null;var V=W||J[0].value,X="".concat(ne,"__radios");return Z().createElement("div",{className:X},typeof Y!="undefined"?Z().createElement(y.ZP.Group,{defaultValue:V,value:Y,onChange:this.handleRadiosChange},J.map(ie=>Z().createElement(y.ZP.Button,{key:ie.value,value:ie.value},ie.name))):Z().createElement(y.ZP.Group,{defaultValue:V,onChange:this.handleRadiosChange},J.map(ie=>Z().createElement(y.ZP.Button,{key:ie.value,value:ie.value},ie.name))))},this.renderSelect=()=>{var F=this.props,ne=F.prefixCls,J=F.selectList,W=F.defaultSelectValue;if(!J.length)return null;var Y=W||J[0].value,V="".concat(ne,"__select");return Z().createElement("div",{className:V},Z().createElement(ue.Z,{defaultValue:Y,onChange:this.handleSelectChange,getPopupContainer:()=>document.getElementsByClassName("cl-listQueryRow__select")[0],style:{minWidth:100}},J.map(X=>Z().createElement(ue.Z.Option,{key:X.value,value:X.value},X.name))))},this.renderOther=()=>{var F=this.props,ne=F.prefixCls,J=F.renderOther,W=F.showOther,Y="".concat(ne,"__other");if(W&&J&&typeof J=="function")return Z().createElement("div",{className:Y},J())},this.renderCheckbox=()=>{var F=this.props,ne=F.prefixCls,J=F.t,W=F.label,Y=F.showCheckbox,V=F.renderActionSelect,X="".concat(ne,"__checkbox");return!Y&&V&&typeof V=="function"?Z().createElement("div",{className:X},V()):Y?Z().createElement("div",{className:X},Z().createElement(R.Z,{onChange:this.handleChange},W||J("common.myCreated"))):null},this.renderSearch=()=>{var F=this.props,ne=F.prefixCls,J=F.showSearch,W=F.inputPlaceholder,Y=F.maxLength,V=Y===void 0?400:Y,X="".concat(ne,"__search");if(!J)return null;var ie=this.state.currentPlaceholder;return W?Z().createElement("div",{className:X},Z().createElement(M.Z,{onSearch:this.handleSearch,placeholder:W,width:272,maxLength:V})):Z().createElement("div",{className:X},Z().createElement(M.Z,{onSearch:this.handleSearch,placeholder:ie,width:272,maxLength:V}))},this.renderActionBtn=()=>{var F=this.props,ne=F.prefixCls,J=F.actionText,W=F.t,Y=F.tabLink,V=F.showBtn,X=F.renderActionBtn,ie=F.popOverProps,w=ie===void 0?[]:ie,h=F.renderGuide,_=h===void 0?!1:h,C=F.showDownloadBtn,A=C===void 0?!1:C,U=F.guideClassName,se=U===void 0?"guide-popover":U,z=F.themeColor,p="".concat(ne,"__action");return!V&&X&&typeof X=="function"?Z().createElement("div",{className:p},X()):!V||!J?null:Z().createElement("div",{className:p},Z().createElement(L.Z,{to:Y},Z().createElement(T.Z,{type:"primary",icon:Z().createElement(q.Z,null)},J)),Z().createElement(j.Z,{className:se,renderGuide:_,guidePageProps:w,direction:"left",showDownloadBtn:A}),A&&Z().createElement(T.Z,{style:{marginLeft:"8px",color:z,border:"1px solid ".concat(z)},icon:Z().createElement(Q.Z,null),onClick:this.handleDownload},W("common.exportData")))},this.renderQueryRow=()=>{var F=this.props,ne=F.queryRowParams,J=F.queryRowList,W=F.queryRowSelectedCourseIds,Y=F.queryRowSelectedProjectIds,V=F.queryRowOnForceRender,X=F.queryRowOnClassifyChange,ie=F.queryRowOnTypeChange,w=F.queryRowOnCourseTypeChange,h=F.queryRowAllowActions;return Z().createElement(D.Z,{params:ne,list:J,selectedCourseIds:W,selectedProjectIds:Y,onForceRender:V,onClassifyChange:X,onTypeChange:ie,onCourseTypeChange:w,allowActions:h,showRenderCondition:!1})},this.rendeExtraBtn=()=>{var F=this.props,ne=F.t,J=F.extraBtnSelectedRowKeys,W=F.extraBtnHandleMultiVisibleRange;return Z().createElement(T.Z,{disabled:J.length===0,onClick:W},ne("courseManage.setTheVisibility"))},this.state={language:{zh_cn:v.Z,en_us:o.Z,zh_hk:k.Z},currentPlaceholder:""}}componentDidMount(){this.setPlaceholder()}componentDidUpdate(N){N.userLng!==this.props.userLng&&this.setPlaceholder()}render(){var N=this.props,F=N.prefixCls,ne=N.wrapCls,J=N.showRenderRadios,W=J===void 0?!0:J,Y=N.showRenderQueryRow,V=N.showRendeExtraBtn,X=N.showRenderSelect;return Z().createElement(Z().Fragment,null,Z().createElement("div",{className:"render_other"},this.renderOther(),Z().createElement("header",{className:"".concat(F," ").concat(ne)},Z().createElement("section",{className:"".concat(F,"__radiocol")},this.renderActionBtn(),Y&&this.renderQueryRow(),V&&this.rendeExtraBtn()),Z().createElement("section",{className:"".concat(F,"__searchcol")},this.renderCheckbox(),W&&this.renderRadios(),X&&this.renderSelect(),this.renderSearch()))))}}S.defaultProps={prefixCls:"cl-listQueryRow",wrapCls:"",label:"",actionText:"add",showRadioList:!0,showCheckbox:!0,showSearch:!0,showBtn:!0,inputPlaceholder:"",defaultRadioValue:"",radioList:[],searchStylesProps:{},showRenderSelect:!1,selectList:[],renderActionBtn:()=>null,onRadiosChange:()=>{},onSearch:()=>{},onCheckboxChange:()=>{}},me.Z=(0,m.$j)(x)((0,d.Z)()(S))},28107:function(be,me,r){"use strict";var B=r(66456),T=r(55313),I=r(22385),R=r(31097),e=r(57663),ue=r(71577),f=r(71194),y=r(57016),g=r(88986),Z=r(12924),m=r.n(Z),d=r(91768),q=r(10237),Q=r(37055),L=r(6793),M=r(18329),o=r(95664);class v extends m().Component{constructor(j){super(j);this.onCancel=()=>{var D=this.props,x=D.handleReferenceList,S=D.onReferenceList;x?x():S&&S()},this.onContinueEdit=()=>{var D=this.props.continueEdit;D&&D()},this.initTableList=(D,x)=>{var S=this.props,oe=S.type,N=S.operation,F=S.resourceId,ne=S.t,J=this.state.resourceTypes,W=x||N;return this.setState({loading:!0}),q.WY.get({url:Q.ZP.deleteResource.check(),params:(0,g.Z)((0,g.Z)({},this.state.params),{},{type:oe,id:D||F})}).then(Y=>{if(Y.data.list&&Y.data.list.length===0)return!0;if(Y.data.total<2&&Y.data.list.length>0){var V=Y.data.list[0],X=V.title,ie=V.type_name,w=V.create_user_name,h="";return W==="continueEdit"?h=(0,L.ZT)("".concat(ne("component.continueEditReminderTip")),J[oe],"\u300A".concat(X,"\u300B").concat(ie)):W==="forbiddenEdit"?h=(0,L.ZT)("".concat(ne("component.forbiddenEditReminderTip")),J[oe],"\u300A".concat(X,"\u300B").concat(ie)):h=(0,L.ZT)("".concat(ne("component.deleteElseReminderTip")),J[oe],"\u300A".concat(X,"\u300B(").concat(w?ne("common.creator")+":"+w:"",")").concat(ie),ne(W==="delete"?"common.delete":"course.cancelRelease")),W==="move"?(y.Z.confirm({title:ne("common.tip"),content:(0,L.ZT)("".concat(ne("component.forbiddenMoveReminderTip")),"\u300A".concat(X,"\u300B").concat(ie)),okText:ne("common.ok"),onOk:()=>{this.onCancel()},onCancel:()=>{this.onCancel()}}),!1):(W==="continueEdit"?y.Z.confirm({title:ne("common.tip"),content:h,okText:ne("common.cancel"),cancelText:ne("course.continueEdit"),onOk:()=>{this.onCancel()},onCancel:()=>{W==="continueEdit"&&this.props.continueEdit()}}):y.Z.info({title:ne("common.tip"),content:h,okText:ne("common.ok"),onOk:()=>{this.onCancel()}}),!1)}setTimeout(()=>{this.setState({loading:!1,tableList:Y.data.list,tableTotal:Y.data.total,tableTotalPages:Y.data.pages})},300)})},this.handleTableChange=D=>{var x=this.state.params;x.page_number=D,this.setState({params:x},()=>{this.initTableList()})},this.renderFooter=()=>{var D=this.props,x=D.t,S=D.operation;return m().createElement("div",null,S==="continueEdit"?m().createElement(ue.Z,{type:"primary",onClick:this.onContinueEdit},x("course.continueEdit")):null,m().createElement(ue.Z,{type:"primary",onClick:this.onCancel},x("common.ok")))},this.state={loading:!0,params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0,resourceTypes:{questionnaire:this.props.t("common.questionnaire"),classify:this.props.t("course.category"),paper:this.props.t("exam.paperAddTitle"),question:this.props.t("learning.questionAddTitle"),course:this.props.t("study.course"),resource:this.props.t("common.courseware"),lecturer:this.props.t("course.lecturer"),evaluationProduct:this.props.t("questionn.evaluationTool")}},this.columns=[{title:this.props.t("common.number"),dataIndex:"userId",width:30,render:(D,x,S)=>S+1},{title:this.props.t("common.name"),dataIndex:"title",width:420,render:D=>m().createElement(R.Z,{title:D},m().createElement("div",{className:"cl-text-ellipsis",style:{width:420}},D))},{title:this.props.t("study.type"),dataIndex:"type_name",width:120},{title:this.props.t("common.creator"),dataIndex:"create_user_name",width:30}]}componentDidMount(){var j=this.props.onRef;j&&j(this)}componentDidUpdate(j){var D=this.props.onRef;D||this.props.visible&&this.props.visible!==j.visible&&this.props.resourceId&&this.setState({params:{id:"",type:"",page_number:1,page_size:10},tableList:[],tableTotal:0,tableTotalPages:0},()=>{this.initTableList()})}render(){var j=this.props,D=j.visible,x=j.type,S=j.operation,oe=j.t,N=this.state,F=N.loading,ne=N.params,J=N.tableList,W=N.tableTotal,Y=N.tableTotalPages,V=N.resourceTypes;return m().createElement("div",null,W>1?m().createElement(M.ZP,{visible:D,title:S==="move"?"".concat(oe("common.tip")):(0,L.ZT)("".concat(oe("component.deleteReminder")),oe(S==="delete"?"common.deletion":S==="cancelPublish"?"course.cancelRelease":"common.edit")),onCancel:this.onCancel,onOk:this.onCancel,footer:this.renderFooter()},m().createElement("div",{className:"referenceWithOther"},m().createElement("div",{className:"referenceWithOther__tip"},S==="continueEdit"?"".concat(oe("component.this")).concat(V[x]).concat(oe("component.continueEditReminderTip2")):S==="forbiddenEdit"?"".concat(oe("component.pleaseNote")).concat(V[x]).concat(oe("component.forbiddenEditReminderTip2")):S==="move"?"".concat(oe("component.forbiddenMoveTip")):(0,L.ZT)("".concat(oe("component.deleteReminderTip")),V[x],oe(S==="delete"?"common.delete":"course.cancelRelease"))),m().createElement(T.Z,{bordered:!0,size:"middle",columns:this.columns,rowKey:"id",dataSource:J,pagination:!1,loading:F}),m().createElement(o.Z,{defaultPageSize:10,totalNum:W,totalPage:Y,current:ne.page_number,showRenderRefresh:!1,onChange:this.handleTableChange}))):null)}}me.Z=(0,d.Z)()(v)},44548:function(be,me,r){"use strict";var B=r(62029),T=r(57361),I=r(33565),R=r(9754),e=r.n(R),ue=r(12924),f=r.n(ue),y=r(91768),g=r(94184),Z=r.n(g),m=r(65202),d=r(84874),q=r(18329),Q=r(38642);function L(M){var o=M.t,v=M.visible,k=M.onCancel,j=M.onOK,D=M.examInfo,x={size:"medium",destroyOnClose:!0,footerType:"custom",bodyStyle:{padding:"0"},maskClosable:!1},S=(0,m.p)(),oe=(0,ue.useState)([]),N=(0,I.Z)(oe,2),F=N[0],ne=N[1];(0,ue.useEffect)(()=>{v&&J()},[v]);function J(){return W.apply(this,arguments)}function W(){return W=(0,T.Z)(e().mark(function X(){var ie,w;return e().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:ie=[{title:o("examing.examTotalScore"),type:"total_score",icon:"icon-kaoshizongfen",val:"",units:o("common.examScoreUnit"),color:"#FF7130"},{title:o("examing.passScore"),type:"passing_score",icon:"icon-jigefenshu",val:"",units:o("common.examScoreUnit"),color:"#70B78E"},{title:o("common.examDuration"),type:"exam_duration",icon:"icon-datishichang",val:"",units:o("common.minutes"),color:"#C08564"},{title:o("examination.passGetScore"),type:"passed",icon:"icon-jigehuodexuefen",val:"",units:o("common.examScoreUnit"),color:"#6DD400"},{title:o("examination.failGetScore"),type:"failed",icon:"icon-bujigehuodexuefen",val:"",units:o("common.examScoreUnit"),color:"#FF4D4F"},{title:o("examination.absenceGetScore"),type:"absence",icon:"icon-quekaohuodexuefen",val:"",units:o("common.examScoreUnit"),color:"#FAAD14"},{title:o("exam.examItems"),type:"exam_times_vo",icon:"icon-kaoshicishu",val:"",units:o("common.times"),color:"#4268FF"},{title:o("examination.cutScreenCount"),type:"cut_screen_vo",icon:"icon-qiepingcishu",val:"",units:o("common.times"),color:"#40CBE0"},{title:o("examination.passGetCer"),type:"certificate_vo",icon:"icon-xingzhuangjiehe",val:"",units:"",color:"#9766CD"}],w=[],ie.forEach(C=>{if(C.type==="cut_screen_vo"){var A=D.cut_screen_vo.cut_screen_rule;A==="unlimited"?(C.val=o("examination.unlimitedTimes"),C.units=""):A==="disable"?(C.val=o("examination.notAllow"),C.units=""):A==="custom"&&(C.val=D.cut_screen_vo.complete_cut_screen_count+"/"+D.cut_screen_vo.cut_screen_count)}else if(C.type==="exam_times_vo"){var U=D.exam_times_vo.answer_rule;U==="unlimited"?(C.val=o("examination.unlimitedTimes"),C.units=""):U==="stopWhenPassed"?(C.val=o("examination.terminationAfterPassing"),C.units=""):U==="custom"&&(C.val=D.exam_times_vo.complete_makeup_count+"/"+D.exam_times_vo.makeup_count)}else if(C.type==="certificate_vo")D.certificate_vo.show==="true"?C.val=D.certificate_vo.certificate_name:C.val="";else if(C.type==="passed"||C.type==="failed"||C.type==="absence"){var se=D.reward_rule_vo,z=se.absence,p=se.passed,H=se.failed,G=se.type;G==="score"?C.type==="passed"&&p.checked==="true"?C.val=p.score:C.type==="failed"&&H.checked==="true"?C.val=H.score:C.type==="absence"&&z.checked==="true"?C.val=z.score:C.val=null:C.val=null}else C.val=D[C.type];if(C.val!==null&&C.val!==""){if((C.type==="total_score"||C.type==="passing_score")&&C.val===0)return;w.push(C)}}),ne(w);case 4:case"end":return _.stop()}},X)})),W.apply(this,arguments)}function Y(){return f().createElement("div",{className:"exam-instructions-footer-btns"},f().createElement("span",{className:"close-btn",onClick:()=>k()},o("common.close")),f().createElement("span",{className:"exam-data-btn",style:{backgroundColor:S},onClick:()=>V()},o("exam.enterExam")))}function V(){j()}return f().createElement(q.ZP,(0,B.Z)({title:o("exam.examInstructions")},x,{visible:v,width:628,onCancel:k,renderCustomFooter:Y}),f().createElement("div",{className:"exam-instructions-wrap"},f().createElement("div",{className:"exam-title"},D.title),f().createElement("div",{className:"exam-date-range"},D.unlimited==="true"?o("integralMall.notLimitLabel"):(0,Q.t6)(D.begin_time,D.end_time)),D.description&&f().createElement("div",{className:"exam-explain"},D.description),f().createElement("div",{className:"exam-cards-list"},F.map((X,ie)=>f().createElement("div",{className:Z()("exam-cards",ie%3==2?"no-margin-right":""),key:X.type},f().createElement("div",null,f().createElement(d.Z,{iconClass:X.icon,size:"18px",color:X.color}),f().createElement("span",{className:"title"},X.title)),f().createElement("div",{className:"infos cl-text-ellipsis"},X.val,X.units)))),f().createElement("div",{className:"exam-tips"},o("examination.autoSubmit"))))}me.Z=(0,y.Z)()(L)},19886:function(be,me,r){"use strict";var B=r(57361),T=r(18106),I=r(88108),R=r(9754),e=r.n(R),ue=r(12924),f=r.n(ue),y=r(91768),g=r(66708),Z=r(90734),m=r(38642),d=I.Z.TabPane;class q extends f().Component{constructor(){var L;super(...arguments);L=this,this.state={activeKey:"sign_in",qrCodeOption:{flag:"",scene:"",path:""}},this.onChangeTab=M=>{this.setState({activeKey:M},()=>this.createQrCode())},this.createQrCode=(0,B.Z)(e().mark(function M(){var o,v,k,j,D,x;return e().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(o=L.state.activeKey,v=L.props.detail,k=v.id,j=v.qrcode_type,D="",j!=="dynamic"){oe.next=10;break}return L.timer&&window.clearTimeout(L.timer),oe.next=7,(0,Z.bp)();case 7:x=oe.sent,D=x.data.data.server_time,L.timer=setTimeout(()=>{L.createQrCode()},1e4);case 10:L.setState({qrCodeOption:{flag:"offline",scene:"flag=offline&clockTimeId=".concat(k,"&qcTime=").concat(D,"&signStyle=").concat(o),mobile_url:"/offline-result?clockTimeId=".concat(k,"&qcTime=").concat(D,"&signStyle=").concat(o),mobile_type:"h5"}});case 11:case"end":return oe.stop()}},M)}))}componentDidMount(){var L=this;return(0,B.Z)(e().mark(function M(){var o,v,k;return e().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(o=L.props.detail,v=o.id,k=o.exist_sign_in_config,k){D.next=4;break}return D.next=4,L.setState({activeKey:"sign_out"});case 4:v&&L.createQrCode();case 5:case"end":return D.stop()}},M)}))()}componentDidUpdate(L){L.detail.id!==this.props.detail.id&&this.createQrCode()}componentWillUnmount(){this.timer&&window.clearTimeout(this.timer)}render(){var L=this.props,M=L.t,o=L.detail,v=o.title,k=o.sign_address,j=o.sign_range,D=o.sign_address_detail,x=o.qrcode_type,S=o.sign_in_begin_time,oe=o.sign_in_end_time,N=o.sign_out_begin_time,F=o.sign_out_end_time,ne=o.exist_sign_in_config,J=o.exist_sign_out_config,W=o.source_type,Y=L.open_transfer_student,V=L.can_save,X=L.universalFn,ie=this.state,w=ie.qrCodeOption,h=ie.activeKey;return f().createElement("div",{className:"checkin-qrcode"},f().createElement(I.Z,{className:"checkin-qrcode-tab",activeKey:h,centered:!0,onChange:this.onChangeTab},ne&&f().createElement(d,{tab:M("personal.checkInQRCode"),key:"sign_in"}),J&&f().createElement(d,{tab:M("lineClass.signOutCode"),key:"sign_out"})),f().createElement("div",{className:"checkin-qrcode-scene"},w.scene?f().createElement(g.Z,{option:w,activeKey:h,universalFn:X,canSave:x==="statics"&&V,refreshQrCode:x==="statics"?null:()=>this.createQrCode(),transfer:Y,source_type:W}):null),f().createElement("div",{className:"checkin-qrcode-content-box"},v?f().createElement("div",{className:"checkin-qrcode_course-time"},f().createElement("span",{className:"checkin-qrcode_course-name"},M("attendance.signCourse"),"\uFF1A"),f().createElement("span",{className:"checkin-qrcode_course-content"},v)):null,f().createElement("div",{className:"checkin-qrcode_course-time"},ne&&h==="sign_in"&&f().createElement(f().Fragment,null,f().createElement("span",{className:"checkin-qrcode_course-name"},M("component.checkInTime"),"\uFF1A"),f().createElement("span",{className:"checkin-qrcode_course-content"},(0,m.yM)(+new Date(S),+new Date(oe)))),J&&h==="sign_out"&&f().createElement(f().Fragment,null,f().createElement("span",{className:"checkin-qrcode_course-name"},M("lineClass.signBack"),"\uFF1A"),f().createElement("span",{className:"checkin-qrcode_course-content"},(0,m.yM)(+new Date(N),+new Date(F))))),k||D?f().createElement(f().Fragment,null,f().createElement("div",{className:"checkin-qrcode_course-time"},f().createElement("span",{className:"checkin-qrcode_course-name"},M("attendance.address"),"\uFF1A"),f().createElement("span",{className:"checkin-qrcode_course-content"},"".concat(k).concat(D))),f().createElement("div",{className:"checkin-qrcode_course-time"},f().createElement("span",{className:"checkin-qrcode_course-name"},M("attendance.attendancemethod"),"\uFF1A"),f().createElement("span",{className:"checkin-qrcode_course-content"},M("attendance.attendancemethodTip",{meter:j})))):null))}}q.defaultProps={detail:{id:"",qrcode_type:"statics",sign_address:"",sign_address_detail:"",sign_range:"",sign_in_begin_time:"",sign_in_end_time:"",sign_out_begin_time:"",sign_out_end_time:""},can_save:!0},me.Z=(0,y.Z)()(q)},90734:function(be,me,r){"use strict";r.d(me,{Tq:function(){return I},MI:function(){return R},bp:function(){return y},DD:function(){return g},hM:function(){return Z},HE:function(){return m},yt:function(){return Q},yy:function(){return L},$W:function(){return M}});var B=r(37055),T=r(10237);function I(o){return T.WY.get({url:B.ZP.lineClass.getOfflineCourseBasicById(o)})}function R(o){var v=o.type,k=o.planId,j=o.departmentId,D=j===void 0?"":j,x=o.postId,S=x===void 0?"":x,oe=o.keyword,N=oe===void 0?"":oe,F=o.courseId,ne=o.pageNumber,J=o.pageSize,W=o.signId,Y=W===void 0?"":W,V=o.source,X=o.userIds;return T.WY.get({url:B.ZP.lineClass.getMonitorUserList(Y),params:{plan_id:k,course_id:F,department_id:D,post_id:S,keyword:N,page_number:ne,page_size:J,sign_id:Y,source:V,type:v,userIds:X}})}function e(o){return request.get({url:CONFIG.lineClass.getOfflineCourseSignAnalysis(o)})}function ue(o){return request.get({url:CONFIG.lineClass.getOfflineSignSetting(o)})}function f(o){var v=o.courseId,k=o.signId,j=o.userId;return request.post({url:CONFIG.lineClass.offlineMarkLeave(v,k),params:{user_id:j}})}function y(){return T.WY.get({url:B.ZP.Common.getServerTime()})}function g(o){var v=o.integral,k=o.courseId,j=o.subsidy,D=o.is_lecturer_subsidy,x=o.lectureId;return T.WY.post({url:B.ZP.lineClass.commitCourseStatement(k),data:{integral:v,subsidy:j,is_lecturer_subsidy:D,lecture_id:x}})}function Z(o){var v=o.courseId,k=o.actual_cost,j=o.summary,D=o.summary_attachment_id_list;return T.WY.post({url:B.ZP.lineClass.commitOfflineCourseSummary(v),data:{actual_cost:k,summary:j,summary_attachment_id_list:D}})}function m(o){var v=o.courseId,k=o.lecturer_id;return T.WY.get({url:B.ZP.lineClass.getOfflineCourseSummary(v),param:{lecturer_id:k}})}function d(o){return request.get({url:CONFIG.lineClass.getOfflineDetail(o)})}function q(o){return request.get({url:CONFIG.lineClass.getEvaluateDataByOffline(o)})}function Q(o){var v=o.courseId,k=o.type,j=o.evaluate_id,D=o.evaluate_type,x=o.lecturer_id,S=o.post_id,oe=o.department_id,N=o.keyword,F=o.page_number,ne=o.page_size,J=o.userIds;return T.WY.get({url:B.ZP.lineClass.getEvaluateDetailDataList(v),params:{type:k,evaluate_id:j,evaluate_type:D,lecturer_id:x,post_id:S,department_id:oe,keyword:N,page_number:F,page_size:ne,userIds:J}})}function L(){return T.WY.post({url:B.ZP.lineClass.studyProjectsImportConfirm()})}function M(o,v,k){return T.WY.post({url:B.ZP.lineClass.attendanceConform(o,v,k)})}},89019:function(be,me,r){"use strict";r.r(me),r.d(me,{default:function(){return X}});var B=r(14781),T=r(53431),I=r(13254),R=r(14277),e=r(20228),ue=r(11382),f=r(57361),y=r(88986),g=r(9754),Z=r.n(g),m=r(12924),d=r.n(m),q=r(91768),Q=r(76651),L=r(57068),M=r(28216),o=r(27550),v=r(57663),k=r(71577),j=r(34669),D=r(82833),x=ie=>{var w=ie.item,h=ie.t;return d().createElement("div",{className:"my-self-study-table-card"},d().createElement("div",{className:"right-tip ".concat(w.biz_type===3?"project":"")},w.biz_type===3?h("learning.learningProjectAddTitle"):w.biz_type===8?h("live.live"):h("common.courseLabel")),d().createElement("img",{src:w.cover,alt:""}),d().createElement("div",{className:"my-self-study-table-card-info"},d().createElement("p",null,w.title),d().createElement("div",{className:"operation"},d().createElement(D.Z,{className:"progress",size:"small",percent:+w.process,status:w.process>=100?"success":"normal",strokeColor:w.process>=100?"#58D28B":""}),d().createElement(k.Z,{type:"link",onClick:()=>ie.linkToStudy(w)},w.process>=100?h("study.againStudy"):h("study.continueLearning")))))},S=(0,q.Z)()(x),oe=r(38642),N=r(64462),F=r(10237),ne=r(37055),J=r(4408),W=r(42837),Y={getRadiosNum:ne.ZP.MySelfStudy.getStatusNum,getTableList:ne.ZP.MySelfStudy.getList};class V extends d().Component{constructor(){var w;super(...arguments);w=this,this.state={params:{status:"",keyword:"",page_number:1,page_size:20},radioList:[],tableLoading:!0,tableList:[],tableTotal:0,wei:{visible:!1,record:{},planId:""}},this.initData=()=>{this.initRadioList(),this.initTableList()},this.initRadioList=()=>{var h=this.props.t;F.WY.get({url:Y.getRadiosNum()}).then(_=>{var C=_.data,A=C.total_count,U=C.finish_count,se=C.un_finish_count;this.setState({radioList:[{name:"".concat(h("common.all"),"(").concat(A,")"),value:""},{name:"".concat(h("common.unFinish"),"(").concat(se,")"),value:"unfinished"},{name:"".concat(h("dashboard.completed"),"(").concat(U,")"),value:"finished"}]})})},this.initTableList=()=>{this.setState({tableLoading:!0}),F.WY.get({url:Y.getTableList(),params:this.state.params}).then(h=>{setTimeout(()=>{this.setState({tableLoading:!1,tableList:h.data.list,tableTotal:h.data.total})},300)})},this.handleQueryRowRadiosChange=h=>{this.resetPagination().then(()=>{this.setState(_=>({params:(0,y.Z)((0,y.Z)({},_.params),{},{status:h})}),()=>{this.initTableList()})})},this.handleQueryRowSearch=h=>{this.resetPagination().then(()=>{this.setState(_=>({params:(0,y.Z)((0,y.Z)({},_.params),{},{keyword:h})}),()=>{this.initTableList()})})},this.handleNumberChange=h=>{this.setState(_=>({params:(0,y.Z)((0,y.Z)({},_.params),{},{page_number:h})}),()=>{this.initTableList()})},this.handleSizeChange=(h,_)=>{this.setState(C=>({params:(0,y.Z)((0,y.Z)({},C.params),{},{page_size:_})}),()=>{this.initTableList()})},this.resetPagination=()=>new Promise(h=>{this.setState(_=>({params:(0,y.Z)((0,y.Z)({},_.params),{},{page_number:1,page_size:20})}),()=>{h()})}),this.linkToStudy=function(){var h=(0,f.Z)(Z().mark(function _(C){var A,U;return Z().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(A=C.biz_type,U=C.live_type,A!==3){z.next=5;break}(0,oe.eJ)({url:"/training/trainingProject/traineeView?".concat(L.stringify({id:C.id,source:"first"}))}),z.next=15;break;case 5:if(!(A===1||A===0||A===8)){z.next=14;break}if(!(U==="live_course"&&A===8)){z.next=9;break}return(0,N.It)(C.id,w.props.t),z.abrupt("return");case 9:return z.next=11,w.props.dispatch({type:"currentRoute/updateState",payload:{shouldAddScanCount:!0}});case 11:Q.m8.push({pathname:"/course/enterpriseCourse",search:L.stringify({courseId:C.id})}),z.next=15;break;case 14:A===2&&w.setState({wei:{visible:!0,flag:"miniCourse",scene:"courseId=".concat(C.id,"&flag=miniCourse")}});case 15:case"end":return z.stop()}},_)}));return function(_){return h.apply(this,arguments)}}(),this.handleCancelWei=()=>{this.setState({wei:{visible:!1,flag:"",scene:""}})},this.renderTaskList=()=>{var h=this.props.prefixCls,_=this.state,C=_.tableList,A=_.tableLoading,U="".concat(h,"__content__tasks cl-flearfix"),se;return A?se=d().createElement(ue.Z,{size:"large"}):C.length?se=C.map(z=>d().createElement(S,{prefixCls:"".concat(h,"__content__tasks__item"),item:z,key:z.id,linkToStudy:this.linkToStudy})):se=d().createElement(R.Z,{image:R.Z.PRESENTED_IMAGE_SIMPLE}),d().createElement("div",{className:U},se)},this.renderPagination=()=>{var h=this.props.prefixCls,_=this.state,C=_.params,A=_.tableTotal,U="".concat(h,"__content__pagination"),se=(0,y.Z)((0,y.Z)({},ne.XE.INITIAL_PAGINATION),{},{total:A,current:C.page_number,pageSize:C.page_size,onChange:this.handleNumberChange,onShowSizeChange:this.handleSizeChange});return d().createElement("div",{className:U},d().createElement(T.Z,se))}}componentDidMount(){this.initData()}render(){var w=this.props,h=w.prefixCls,_=w.t,C=this.state,A=C.radioList,U=C.wei;return d().createElement("div",{className:h},d().createElement(J.Z,{title:_("leftMenuLists.selfStudy")}),d().createElement(o.Z,{radioList:A,defaultRadioValue:0,showCheckbox:!1,showBtn:!1,onRadiosChange:this.handleQueryRowRadiosChange,onSearch:this.handleQueryRowSearch,inputPlaceholder:_("learning.learnUpgrade.pleaseEnter")}),d().createElement("div",{className:"".concat(h,"__content")},this.renderTaskList(),this.renderPagination()),d().createElement(W.Z,{visible:U.visible,option:U,onCancel:this.handleCancelWei,title:_("component.microCourseScan"),tip:"component.useCustom"}))}}V.defaultProps={prefixCls:"my-self-study"};var X=(0,M.$j)()((0,q.Z)()(V))},50599:function(be,me,r){"use strict";r.d(me,{P:function(){return N},M:function(){return F}});var B=r(88986),T=r(57361),I=r(34792),R=r(48086),e=r(71194),ue=r(57016),f=r(9754),y=r.n(f),g=r(12924),Z=r.n(g),m=r(96486),d=r(57068),q=r(78138),Q=r.n(q),L=r(76651),M=r(57119),o=r(58697),v=r(65771),k=r(79734),j=r(94532),D=r(57482),x={cancelRelease:"cancelRelease",delete:"delete",publish:"publish",edit:"edit",detail:"detail",summary:"summary",exec:"exec",execDetail:"execDetail"},S=ne=>{var J=ne.t,W=ne.status,Y=ne.type,V="",X=()=>{},ie="";switch(Y){case x.cancelRelease:V="".concat(J("training.are_you_sure_you_want_to_cancel"),"\uFF1F"),X=D.S7,ie=J("training.cancellation_succeeded");break;case x.delete:V=["published","under_approval "].includes(W)?J("training.please_cancel_publishing_before_attempting_the_operation"):"".concat(J("training.are_you_sure_you_want_to_delete"),"\uFF1F"),X=["published","under_approval "].includes(W)?X:D.Kh,ie=J("common.deleteSuccess");break;default:break}return{title:V,method:X,successMsg:ie}},oe=r(38642),N=(ne,J,W)=>{var Y=J.fetchData,V=J.filterValue,X=J.biz_plan_type,ie=J.setModal,w=J.isDetail,h=w===void 0?!1:w,_=J.showDelete,C=_===void 0?!0:_,A=J.sourceType,U=(z,p,H)=>{var G=re=>{var fe=re.type,he=re.title,Ze=re.method,Se=re.successMsg;ue.Z.confirm({title:he,icon:Z().createElement(M.Z,null),onOk:()=>{try{if(Ze&&Ze(H.plan_id).then(()=>{Y&&Y(V)}),h&&fe==="delete"){var ye={[o.B.TEMP_PLAN]:"tempPlan",[o.B.MONTH_PLAN]:"monthPlan"},xe=ye[X]?"/training/trainingPlan/".concat(ye[X]):"";L.m8.push(xe);return}Se&&R.default.success(Se)}catch(Re){console.error(Re)}}})};return function(){var re=(0,T.Z)(y().mark(function fe(he){var Ze;return y().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:Ze=(0,B.Z)({type:he},S({status:p,type:he,t:ne})),ye.t0=he,ye.next=ye.t0==="publish"?4:ye.t0==="cancelRelease"?6:ye.t0==="delete"?8:ye.t0==="exec"?10:ye.t0==="execDetail"?12:ye.t0==="edit"?14:ye.t0==="detail"?16:18;break;case 4:return ie({visible:!0,source:H.source,plan_id:H.plan_id}),ye.abrupt("break",19);case 6:return G(Ze),ye.abrupt("break",19);case 8:return G(Ze),ye.abrupt("break",19);case 10:return W==="personal"?(0,oe.eJ)({url:"/personal/training/learn/management/add?".concat(d.stringify({type:"relation_plan",plan_id:z,from:"detail"}))}):L.m8.push({pathname:"/training/learn/management/add",search:d.stringify({type:"relation_plan",plan_id:z,from:X})}),ye.abrupt("break",19);case 12:return W==="personal"?(0,oe.eJ)({url:"/personal/training/plan/trainPlan/detail?".concat(d.stringify({bizType:o.B.EXEC,businessId:z,from:X,instanceId:H.workflow_instance_id}))}):L.m8.push({pathname:"/training/trainingPlan/trainPlan/detail",search:d.stringify({bizType:o.B.EXEC,businessId:z,from:X,instanceId:H.workflow_instance_id})}),ye.abrupt("break",19);case 14:return ie({visible:!0,plan_id:H.plan_id,source:H.source}),ye.abrupt("break",19);case 16:return L.m8.push({pathname:"/training/trainingPlan/trainPlan/detail",search:d.stringify({bizType:X,instanceId:H.workflow_instance_id,businessId:z})}),ye.abrupt("break",19);case 18:return ye.abrupt("break",19);case 19:case"end":return ye.stop()}},fe)}));return function(fe){return re.apply(this,arguments)}}()},se=F({t:ne});return W!=="approval"&&se.push({title:ne("common.operate"),dataIndex:"operate",key:"operate",width:150,fixed:"right",render:(z,p)=>Z().createElement("a",null,Z().createElement(k.Z,{showDetail:!h,showDelete:C,superEdit:X===o.B.MONTH_PLAN?p.source==="split":!1,canPublished:["unpublished","reject"].includes(p.status),canUnpublished:["under_approval","published"].includes(p.status)&&p.source==="normal",source:p.source,isHasTask:p.is_has_task||p.task_info&&p.task_info.title,status:p.status,onOperation:U(p.plan_id,p.status,p),type:"month",sourceType:A}))}),se};function F(ne){var J=ne.t;return[{title:J("trainingPlan.name"),dataIndex:"name",key:"name",width:150,fixed:"left",render:W=>Z().createElement(j.Z,{title:W||"--",width:150,placement:"topLeft",isCoolCopy:!0,copyTitle:W||"--"},W||"--")},{title:J("training.source"),dataIndex:"source",key:"source",width:80,render:(W,Y)=>{var V=W==="split"?"\u300A".concat(Y.source_name,"\u300B")||0:J("common.add");return Z().createElement(j.Z,{title:V,width:80,placement:"topLeft",isCoolCopy:!0,copyTitle:V},V)}},{title:J("training.training_type"),dataIndex:"category",key:"category",width:80,render:W=>Z().createElement(j.Z,{title:W||"--",width:80,placement:"topLeft",isCoolCopy:!0,copyTitle:W||"--"},W||"--")},{title:J("training.training_form"),dataIndex:"form",key:"form",width:80,render:W=>{var Y=v.K.filter(X=>X.key===W),V=Y.length>0?Y[0].title:"--";return Z().createElement(j.Z,{title:V,width:80,placement:"topLeft",isCoolCopy:!0,copyTitle:V},V)}},{title:J("training.executive_department"),dataIndex:"department_name",key:"department_name",width:80,render:W=>Z().createElement(j.Z,{title:W||"--",width:80,placement:"topLeft"},W||"--")},{title:J("training.training_month"),dataIndex:"training_month",key:"training_month",width:80,render:W=>Z().createElement(j.Z,{title:W||"-",width:80,placement:"topLeft"},W||"-")},{title:J("training.person_in_charge"),dataIndex:"directors",key:"directors",width:80,render:W=>{var Y=W&&W.map?W.map(V=>V.name).join(","):"--";return Z().createElement(j.Z,{title:Y,width:80,placement:"topLeft",isCoolCopy:!0,copyTitle:Y},Y)}},{title:J("training.executor"),dataIndex:"executors",key:"executors",width:80,render:W=>{var Y=W&&W.map?W.map(V=>V.name).join(","):"--";return Z().createElement(j.Z,{title:Y||"--",width:80,placement:"topLeft",isCoolCopy:!0,copyTitle:Y||"--"},Y||"--")}},{title:J("training.state"),dataIndex:"status",key:"status",width:80,render:W=>{var Y=(0,v.y)(J).filter(V=>V.key===W);return Y.length>0?Y[0].title:"--"}},{title:J("training.creator"),dataIndex:"create_user_name",key:"create_user_name",width:80},{title:J("training.creation_time"),dataIndex:"create_time",key:"create_time",width:130,render:W=>Q()(parseInt(W)).format("YYYY-MM-DD HH:mm")},{title:J("training.associated_task"),dataIndex:"task_info.title",key:"task_info.title",width:80,render:(W,Y)=>{var V=(0,m.get)(Y,"task_info.title")||"--";return Z().createElement(j.Z,{title:V,width:80,placement:"topLeft",isCoolCopy:!0,copyTitle:V},V)}},{title:J("training.training_time"),dataIndex:"task_info.begin_time",key:"task_info.begin_time",width:180,render:(W,Y)=>{var V=(0,m.get)(Y,"task_info.begin_time"),X=(0,m.get)(Y,"task_info.end_time"),ie=[];return V&&ie.push(Q()(parseInt(V)).format("YYYY-MM-DD HH:mm")),X&&ie.push(Q()(parseInt(X)).format("YYYY-MM-DD HH:mm")),ie.length?Z().createElement("div",null,ie.join("~")):"--"}},{title:J("training.training_institution_lecturer"),dataIndex:"lecturer",key:"lecturer",width:80,render:W=>{var Y=W||"--";return Z().createElement(j.Z,{title:Y,width:80,placement:"topLeft",isCoolCopy:!0,copyTitle:Y},Y)}},{title:J("training.complete"),dataIndex:"task_info.finish_user_count",key:"task_info.finish_user_count",width:90},{title:J("training.have_in_hand"),dataIndex:"task_info.on_going_user_count",key:"task_info.on_going_user_count",width:80},{title:"".concat(J("training.be_overdue")),dataIndex:"task_info.un_finish_user_count",key:"task_info.un_finish_user_count",width:100,render:(W,Y)=>{var V=parseInt((0,m.get)(Y,"task_info.un_finish_user_count"));return Number.isNaN(V)?"--":"".concat(V)}},{title:"".concat(J("training.completion_rate"),"(%)"),dataIndex:"task_info.finish_percent",key:"task_info.finish_percent",width:100,render:(W,Y)=>{var V=parseInt((0,m.get)(Y,"task_info.finish_percent"));return Number.isNaN(V)?"--":"".concat(V,"%")}},{title:"".concat(J("training.qualified_rate"),"(%)"),dataIndex:"task_info.qualified_rate",key:"task_info.qualified_rate",width:100,render:(W,Y)=>{var V=parseInt((0,m.get)(Y,"task_info.qualified_rate"));return Number.isNaN(V)?"--":"".concat(V,"%")}}].map(W=>(W.render||(W.render=(Y,V)=>{var X=(0,m.get)(V,W.dataIndex);return X===void 0?"--":X}),W))}},31945:function(be,me,r){"use strict";r.d(me,{Z:function(){return se}});var B=r(88983),T=r(47933),I=r(20228),R=r(11382),e=r(62029),ue=r(30887),f=r(99210),y=r(59250),g=r(13013),Z=r(57663),m=r(71577),d=r(63185),q=r(9676),Q=r(71194),L=r(57016),M=r(88986),o=r(34792),v=r(48086),k=r(43358),j=r(34041),D=r(12924),x=r.n(D),S=r(28216),oe=r(91768),N=r(57254),F=r(18329);class ne extends x().Component{constructor(){super(...arguments);this.onCancel=()=>{this.props.showReferenceCourseList()}}render(){var p=this.props,H=p.visible,G=p.courseList,re=p.t;return x().createElement(F.ZP,{visible:H,title:re("common.tip"),onCancel:this.onCancel,onOk:this.onCancel},x().createElement("div",{className:"referenceWithOtherCourses"},x().createElement("div",{className:"referenceWithOtherCourses__tip"},re("course.deleteCourseTip")),G.map((fe,he)=>x().createElement("div",{className:"referenceWithOtherCourses__item",key:he},G.length>1?"".concat(he+1,"\u3001"):null," ",fe))))}}var J=(0,oe.Z)()(ne),W=r(10237),Y=r(63848),V=r(58546),X=r(30389),ie=r(54792),w=r(86726),h=r(37055),_=j.Z.Option,C={setClassify:h.ZP.CourseManageList.setClassify,setScore:h.ZP.CourseManageList.setScore,setBatchEmployee:h.ZP.CourseManageList.setBatchEmployee,deleteCourse:h.ZP.CourseManageList.deleteCourse,exportCourseView:h.ZP.CourseManageList.exportCourseView,syncCourse:h.ZP.CourseManageList.syncCourse},A=z=>({qyShield:z.user.qyShield});class U extends x().Component{constructor(){super(...arguments);this.state={classifyProps:{visible:!1},scoreProps:{title:this.props.t("course.setCredits"),labelTxt:this.props.t("course.credit"),initialValue:"",visible:!1},employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}},asyncProps:{value:0,visible:!1},showReferenceCourseListProps:{visible:!1,courseList:[],onOk:this.showReferenceCourseList,onCancel:this.showReferenceCourseList}},this.handleChangeClassify=p=>{this.props.onClassifyChange(p)},this.handleChangeType=p=>{this.props.onTypeChange(p)},this.handleChangeCourseType=p=>{this.props.onCourseTypeChange(p)},this.actionChangeClassify=()=>{this.setState({classifyProps:{visible:!0}})},this.handleCategoryCancel=()=>{this.setState({classifyProps:{visible:!1}})},this.handleCategoryOk=p=>{var H=p.node,G=this.props,re=G.selectedCourseIds,fe=G.selectedProjectIds,he=G.onForceRender,Ze=G.t,Se=H.id;Se&&W.qg.post({url:C.setClassify(),data:{course_ids:re.join(","),project_ids:fe.join(","),classify_id:Se}}).then(()=>{v.default.success(Ze("course.setCourseClassifySuccess")),he()}),this.handleCategoryCancel()},this.actionSetScore=()=>{this.setState(p=>({scoreProps:(0,M.Z)((0,M.Z)({},p.scoreProps),{},{initialValue:"",visible:!0})}))},this.handleScoreCancel=()=>{this.setState(p=>({scoreProps:(0,M.Z)((0,M.Z)({},p.scoreProps),{},{visible:!1})}))},this.handleScoreOk=p=>{var H=p.value;if(H===0){this.handleScoreCancel();return}var G=this.props,re=G.selectedCourseIds,fe=G.selectedProjectIds,he=G.onForceRender,Ze=G.t;W.qg.post({url:C.setScore(),data:{course_ids:re.join(","),project_ids:fe.join(","),credit:H}}).then(()=>{v.default.success(Ze("course.setCourseScoreSuccess")),he()}),this.handleScoreCancel()},this.actionSetEmployeeRange=()=>{this.setState(p=>({employeeProps:(0,M.Z)((0,M.Z)({},p.employeeProps),{},{visible:!0})}))},this.handleEmployeeCancel=()=>{this.setState({employeeProps:{visible:!1,initialParams:{employeeRange:{rangeType:3,rangeList:{dept:[],post:[],group:[],user:[]}}}}})},this.handleEmployeeOk=p=>{var H=this.props,G=H.selectedCourseIds,re=H.selectedProjectIds,fe=H.onForceRender,he=H.t,Ze=p.isAll,Se=p.departmentIds,ye=p.groupIds,xe=p.postIds,Re=p.userIds,Fe=p.qy_we_chat_vo;W.WY.post({url:C.setBatchEmployee(),data:{course_ids:G.join(","),project_ids:re.join(","),department_ids:Se,group_ids:ye,is_all:Ze,post_ids:xe,user_ids:Re,qy_we_chat_vo:Fe}}).then(()=>{v.default.success(he("personal.batchSetRangeSuccess")),fe()}),this.handleEmployeeCancel()},this.showReferenceCourseList=p=>{this.setState(H=>({showReferenceCourseListProps:(0,M.Z)((0,M.Z)({},H.showReferenceCourseListProps),{},{visible:!H.showReferenceCourseListProps.visible,courseList:p||[]})}))},this.actionDelete=()=>{var p=this.props,H=p.selectedCourseIds,G=p.selectedProjectIds,re=p.list,fe=p.onForceRender,he=p.t,Ze=0,Se=0,ye=[];if(re.forEach(xe=>{H.includes(xe.course_id)&&(xe.reference_plan_count>0&&(Se+=1),xe.reference_plan_count>0&&ye.push(xe.title),xe.can_delete==="true"&&(Ze+=1))}),Se>0)this.showReferenceCourseList(ye);else if(Ze!==H.length)v.default.warning(he("personal.deletePlatformCourseTip"));else{if(G.length>0){v.default.warning(he("personal.deleteProjectCourseTip"));return}L.Z.confirm({title:he("common.tip"),content:he("common.confirmDeleteTitle"),onOk(){W.qg.post({url:C.deleteCourse(),data:{enterpriseId:h.ZP.enterpriseId,ids:H.join(","),project_ids:G.join(",")}}).then(xe=>{var Re=xe.data,Fe=Re.code,lt=Re.msg;v.default["".concat(Fe===0?"success":"warning")](lt),Fe===0&&fe()})}})}},this.actionSyncSetting=()=>{this.setState(p=>({asyncProps:(0,M.Z)((0,M.Z)({},p.asyncProps),{},{visible:!0})}))},this.onAsyncChange=p=>{this.setState(H=>({asyncProps:(0,M.Z)((0,M.Z)({},H.asyncProps),{},{value:p.target.value})}))},this.handleSyncCancel=()=>{this.setState({asyncProps:{visible:!1,value:0}})},this.handleSyncOk=()=>{var p=this.props,H=p.selectedCourseIds,G=p.selectedProjectIds,re=p.onForceRender,fe=p.t,he=this.state.asyncProps;W.qg.post({url:C.syncCourse(),data:{course_ids:H.join(","),project_ids:G.join(","),syncProgress:he.value}}).then(Ze=>{var Se=Ze.data,ye=Se.code,xe=Se.msg;ye===0?(v.default.success(fe("setting.setUpSucceed")),re()):v.default.warning(xe)}),this.handleSyncCancel()},this.actionImportDetail=()=>{var p=this.props,H=p.selectedCourseIds,G=p.selectedProjectIds,re=p.onForceRender,fe=p.t;if(H.concat(G).length>20){v.default.warning(fe("courseManage.exportMoreTip"));return}var he=C.exportCourseView(),Ze={course_Ids:H.join(","),project_Ids:G.join(",")};W.WY.get({url:he,params:Ze}).then(Se=>{Se.data.code===200&&v.default.success("\u6587\u4EF6\u751F\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5728\u6587\u4EF6\u4E0B\u8F7D\u4E2D\u4E0B\u8F7D"),re(),this.getDownloadingNumber()})},this.getDownloadingNumber=()=>{var p=h.ZP.downLoadCenter.getDownLoadingCount();W.WY.get({url:p,params:{}}).then(H=>{sessionStorage.setItem("downloadingCount",H.data.data),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:H.data.data})}).catch(()=>{sessionStorage.setItem("downloadingCount",0),this.props.dispatch({type:"download/updateDownloadingNumber",downloadingNumber:0})})},this.handleChangeCheckBox=p=>{this.props.onCheckboxChange(p.target.checked)},this.handleSharingQueryRowCheckboxChange=p=>{this.props.onSharingCheckboxChange(p.target.checked)},this.renderCondition=()=>{var p=this.props,H=p.prefixCls,G=p.params,re=p.qyShield,fe=p.t,he=G.classify_id?G.classify_id.split(","):[];return x().createElement("div",{className:"".concat(H,"__condition")},this.props.extraDom&&this.props.extraDom(),x().createElement(Y.Z,{onChange:this.handleChangeClassify,className:"cl-search-normal-width",value:he,showLabel:!1,placeholder:"Please select",queryType:"course_manage",unclassified:"true"}),x().createElement(j.Z,{value:G.type,className:"cl-search-normal-width",onChange:this.handleChangeType},x().createElement(_,{value:""},this.props.t("courseManage.allOrigin")),x().createElement(_,{value:"original"},this.props.t("courseManage.originalCourse")),x().createElement(_,{value:"notOriginal"},this.props.t("courseManage.nonOriginalCourse")),x().createElement(_,{value:"platform"},this.props.t("courseManage.platformProcurement"))),this.props.courseType&&this.props.courseType=="graphic"?null:x().createElement(j.Z,{value:G.course_type,className:"cl-search-normal-width",onChange:this.handleChangeCourseType},x().createElement(_,{value:"all"},this.props.t("courseManage.allType")),x().createElement(_,{value:"course"},this.props.t("common.courseLabel")),x().createElement(_,{value:"microCourse"},this.props.t("common.microCourse")),x().createElement(_,{value:"project"},this.props.t("leftMenuLists.studyProject"))),x().createElement(q.Z,{onChange:this.handleChangeCheckBox,style:{marginRight:16}},fe("common.myCreated")),this.props.courseType&&this.props.courseType==="graphic"&&re==="false"?x().createElement(q.Z,{onChange:this.handleSharingQueryRowCheckboxChange},fe("common.sharing")):null)},this.renderActions=()=>{var p=this.props,H=p.prefixCls,G=p.selectedCourseIds,re=p.selectedProjectIds,fe=p.showNum,he=fe===void 0?1:fe,Ze=this.props.allowActions,Se=(0,w.H3)("delete",Ze),ye=(0,w.H3)("adjustment_classification",Ze),xe=(0,w.H3)("set_visible",Ze),Re=(0,w.H3)("export",Ze),Fe=(0,w.H3)("set_score",Ze),lt=(0,w.H3)("progressSync",Ze),ot=[{name:this.props.t("courseManage.adjustClassification"),type:"actionChangeClassify",isShow:ye},{name:this.props.t("courseManage.exportViewDetail"),type:"actionImportDetail",isShow:Re},{name:this.props.t("courseManage.setCredits"),type:"actionSetScore",isShow:Fe},{name:this.props.t("courseManage.setTheVisibilityed"),type:"actionSetEmployeeRange",isShow:xe},{name:this.props.t("common.delete"),type:"actionDelete",isShow:Se},{name:this.props.t("common.scheduleSyncSetting"),type:"actionSyncSetting",isShow:lt}],gt=ot.filter(Qe=>Qe.isShow),je=[],Te=[];if(gt.length)he?(je=[...gt.slice(0,he)],Te=[...gt.slice(he)]):Te=[...gt];else return null;return x().createElement("div",{className:"".concat(H,"__action")},je.map(Qe=>x().createElement(m.Z,{style:{marginRight:"8px"},key:Qe.type,disabled:!(G.length+re.length),onClick:this[Qe.type]},Qe.name)),Te.length?x().createElement(g.Z,{disabled:!(G.length+re.length),overlay:this.renderMoreButton({buttons:Te})},x().createElement(m.Z,{className:"cl-pointer"},"".concat(this.props.t("common.more"))," ",x().createElement(N.Z,null))):"")}}renderMoreButton(p){var H=p.buttons,G=this.props,re=G.selectedCourseIds,fe=G.selectedProjectIds;return x().createElement(f.Z,{onClick:he=>{var Ze=he.key;this[Ze]()}},H.map(he=>he.isShow?x().createElement(f.Z.Item,{key:he.type,disabled:!(re.length+fe.length)},x().createElement("span",{className:"cl-pointer"},he.name)):null))}render(){var p=this.props,H=p.prefixCls,G=p.t,re=p.showRenderCondition,fe=re===void 0?!0:re,he=p.showRenderActions,Ze=he===void 0?!0:he,Se=this.state,ye=Se.classifyProps,xe=Se.scoreProps,Re=Se.employeeProps,Fe=Se.showReferenceCourseListProps,lt=Se.asyncProps;return x().createElement("div",{className:H},fe&&this.renderCondition(),Ze&&this.renderActions(),x().createElement(V.Z,(0,e.Z)({},ye,{title:G("personal.chooseClassify"),onCancel:this.handleCategoryCancel,onOk:this.handleCategoryOk})),x().createElement(ie.Z,(0,e.Z)({},xe,{onCancel:this.handleScoreCancel,onCreate:this.handleScoreOk})),Re.visible&&x().createElement(X.Z,(0,e.Z)({},Re,{title:G("courseManage.setTheVisibility"),mode:["all","part","private"],orgProps:{title:G("component.chooseVisibleScope")},isLoading:!Re.visible,onCancel:this.handleEmployeeCancel,onCreate:this.handleEmployeeOk})),lt.visible&&x().createElement(F.ZP,{wrapClassName:"cl-async-selector-modal",visible:lt.visible,title:G("common.scheduleSyncSetting"),okText:G("common.ok"),cancelText:G("common.cancel"),onCancel:this.handleSyncCancel,onOk:this.handleSyncOk},lt.visible?x().createElement("div",{className:"".concat(H,"__async")},x().createElement("p",null," ",G("common.scheduleSyncSettingTip")),x().createElement(T.ZP.Group,{onChange:this.onAsyncChange,value:lt.value},x().createElement(T.ZP,{value:0},G("common.outSync")),x().createElement(T.ZP,{value:1},G("common.synchronization")))):x().createElement(R.Z,{size:"large"})),x().createElement(J,(0,e.Z)({},Fe,{showReferenceCourseList:this.showReferenceCourseList})))}}U.defaultProps={prefixCls:"resource-course-list-page__release__content__queryrow",rangeType:""};var se=(0,oe.Z)()((0,S.$j)(A)(U))},67479:function(be,me,r){"use strict";r.d(me,{D:function(){return y},W:function(){return Z}});var B=r(57361),T=r(9754),I=r.n(T),R=r(57068),e=r(31916),ue=r(38642),f=r(5430);function y(m){return g.apply(this,arguments)}function g(){return g=(0,B.Z)(I().mark(function m(d){var q,Q,L,M,o;return I().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,k.next=3,(0,e.uH)();case 3:if(q=k.sent,q!=="old"){k.next=6;break}return k.abrupt("return",!1);case 6:return k.next=8,(0,e.fP)(d);case 8:if(Q=k.sent,L=Q.data,M=L.code,o=L.data,M!=="200000"){k.next=14;break}return k.abrupt("return",o.exam_type==="new");case 14:k.next=20;break;case 16:return k.prev=16,k.t0=k.catch(0),console.error("\u65B0\u65E7\u8003\u8BD5\u5224\u65AD",k.t0),k.abrupt("return",!1);case 20:case"end":return k.stop()}},m,null,[[0,16]])})),g.apply(this,arguments)}var Z={examing:function(){var m=(0,B.Z)(I().mark(function q(Q){var L,M,o;return I().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return L="",M=Q.pageFrom==="ding_myExamTask"?(0,ue.lz)(f.ZP.enterpriseId,"student"):"",k.next=4,y(Q.exam_id);case 4:return o=k.sent,o?L="".concat(M,"/training/examination/new-exam/examing?").concat(R.stringify(Q)):L="".concat(M,"/training/examination/exam/personal?").concat(R.stringify(Q)),k.abrupt("return",L);case 7:case"end":return k.stop()}},q)}));function d(q){return m.apply(this,arguments)}return d}(),parse:m=>"/training/examination/new-exam/parse?".concat(R.stringify(m)),examData:m=>"/training/examination/exam-data?exam_id=".concat(m.exam_id,"&task_id=").concat(m.task_id),marking:m=>"/training/examination/new-exam/marking?".concat(R.stringify(m))}},83940:function(be,me,r){"use strict";r.d(me,{v:function(){return T}});var B=r(75216);function T(I){var R=new B.Z,e="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCwp-dZYUGEJ8ixBevMmANELzri9jUet_m5AR8VkrktzuZZ0B0X-F-DYiYWmSn0_2MSWRxtiVU7d2ZzPYodBelubnH3YgxcOKJ8ILaLlCkWZd30L68MAO3JG65NWIgCDq9d0BFiOY6XzRFav2E5-u33hVk1jWspTlgL9ylaEB5ynQIDAQAB";R.setPublicKey(e);var ue=R.encrypt(I);return ue}},64462:function(be,me,r){"use strict";r.d(me,{K7:function(){return m},Vo:function(){return d},It:function(){return q}});var B=r(57361),T=r(34792),I=r(48086),R=r(9754),e=r.n(R),ue=r(37055),f=r(10237),y=r(60333),g=r(1164),Z=r(38642);function m(o,v){(v==="end"||v==="remarking")&&(0,Z.eJ)({url:"/course/enterpriseCourse?courseId=".concat(o)}),f.WY.get({url:ue.ZP.EnterpriseCourse.getEnterpriseCourse(),params:{id:o}}).then(k=>{var j=k.data.live_status;j==="end"||j==="remarking"?(0,Z.eJ)({url:"/course/enterpriseCourse?courseId=".concat(o)}):(0,y.uA)(o).then(D=>{var x=D.data;x.code===2e5?g.Z.targetTo({path:x.data.link,isExternalLink:!0}):I.default.error(x.message)}).catch(D=>{console.log(D)})}).catch(k=>{console.log(k)})}function d(o){(0,y.u0)(o).then(v=>{var k=v.data;k.code===2e5?window.open(k.data.link,"_blank"):I.default.error(k.message)}).catch(v=>{console.log(v)})}function q(o,v){return Q.apply(this,arguments)}function Q(){return Q=(0,B.Z)(e().mark(function o(v,k){var j;return e().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:j=window.navigator.userAgent,j.includes("DingTalk")?f.WY.get({url:ue.ZP.DdLive.getLiveDetail(),params:{courseId:v,appId:"cool"}}).then(S=>{var oe=S.data;dd.biz.util.openLink({url:oe.data.jumpUrl})}).catch(S=>{console.log(S)}):I.default.info(k("ddLive.ddInfo"));case 2:case"end":return x.stop()}},o)})),Q.apply(this,arguments)}function L(){}function M(){}},98233:function(be,me,r){"use strict";r.d(me,{nn:function(){return f},OV:function(){return Z},Md:function(){return d},uk:function(){return ue}});var B=r(57361),T=r(9754),I=r.n(T),R=r(57068),e=r(67479),ue={edit:Q=>"/training/learning/project/add?".concat(R.stringify(Q)),monitorDetail:Q=>{var L=Q.id,M=Q.projectId,o=Q.origin,v=Q.tab;return"/training/trainingProject/monitor?id=".concat(L,"&projectId=").concat(M,"&origin=").concat(o,"&tab=").concat(v)},traineeView:Q=>"/training/trainingProject/traineeView?".concat(R.stringify(Q)),manageView:Q=>"/training/trainingProject/manageView?".concat(R.stringify(Q)),previewView:Q=>"/training/trainingProject/previewView?".concat(R.stringify(Q))};function f(Q){var L=Q.origin,M=Q.search,o=M===void 0?"":M,v={project:"/knowledgeBase/project/examination/newPlan/detail?".concat(o),learning:"/training/learning/examination/newPlan/detail?".concat(o),employee:"/training/employee/examination/newPlan/detail?".concat(o),exam:"/training/examination/newPlan/detail?".concat(o)};return v[L]||"/training/examination/newPlan/detail?".concat(o)}function y(Q,L){if(Q){var M=R.stringify({id:L.id,title:L.title,origin:L.taskType,taskId:L.projectId});return f({origin:L.taskType,search:M})}var o=R.stringify({id:L.id,taskId:L.taskId,from:L.from,taskType:L.taskType,projectId:L.projectId});return"/training/learning/project/monitor/exam?".concat(o)}function g(Q,L){return Q?e.W.marking({exam_id:L.id,status:L.status,markScene:"manage"}):"/training/examination/plan/testPaper?id=".concat(L.id,"&from=").concat(L.from,"&taskId=").concat(L.taskId)}function Z(){return m.apply(this,arguments)}function m(){return m=(0,B.Z)(I().mark(function Q(){var L,M,o,v=arguments;return I().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(L=v.length>0&&v[0]!==void 0?v[0]:"unKnow",M=v.length>1?v[1]:void 0,L!=="unKnow"){j.next=7;break}return j.next=5,(0,e.D)(M.id);case 5:return o=j.sent,j.abrupt("return",y(o,M));case 7:return j.abrupt("return",y(L,M));case 8:case"end":return j.stop()}},Q)})),m.apply(this,arguments)}function d(){return q.apply(this,arguments)}function q(){return q=(0,B.Z)(I().mark(function Q(){var L,M,o,v=arguments;return I().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(L=v.length>0&&v[0]!==void 0?v[0]:"unKnow",M=v.length>1?v[1]:void 0,L!=="unKnow"){j.next=7;break}return j.next=5,(0,e.D)(M.id);case 5:return o=j.sent,j.abrupt("return",g(o,M));case 7:return j.abrupt("return",g(L,M));case 8:case"end":return j.stop()}},Q)})),q.apply(this,arguments)}},3427:function(be,me,r){be.exports=r.p+"static/certificateBg.8eee41c4.png"},69418:function(be){be.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAAAlCAYAAAAwTGn2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNTkwMzg1NC0yMjY0LTQ2YjMtOTJiNy0wMGY0MDllMmY1ZmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUM3Nzc5NzQzOTQ0MTFFOEIzQTlDMThBMDM4RjAzMTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUM3Nzc5NzMzOTQ0MTFFOEIzQTlDMThBMDM4RjAzMTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpmNGYzN2FjZS05NjZjLTQ2Y2UtOTMwYi04NmZjODNlNjRiNGUiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1Mjc3OTgwYS03ODYyLTExN2ItODI2OS1iNjljNTI0Mzc5OTgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz67FmvPAAAH1ElEQVR42uxca2wUVRj9Wvqyj6WlD1p5BCqCIJUUKEh5CRREAoYoJpooaFQETSomQkDBHyIqMVGCGghCIBLU+AogIsGCthIggBAsImApb0qxLaXdLmVbun5ndu8yu53Z2e1uu9PknuTAdh57v71z7rnf/WZ3IhwOB7UB9zInMIcwezG7MSNJQsI3bMwq5mnmfuYhpj3QN4kK4NgU5vPMOS6xSkgEi3rmNuZG5l5/T4rww2kTmIuZhUyL7GeJdsJh5pvMkmBFixRgE7O37FOJDoDDpTcYpLUtol3CXM7sIvtSooNxijmDWeavaCOYnzFflX0nEUZUMqcxj3rv0Frxvy8FK2ECdGfuYvYzctpnmZtlf0mYCP8w85gNWk7bl7lG9pGEyTCQ+Yme0/7EnC77SMKkVYXRzANq0Y5h/iH7RsLEgD7HqdODxbJPJEyOscx8IVp8j2BqZ4n8pV+r6Hxtc8Dnff5nneF5tqYWKjpn09yH7f81GLd74rpdocDmE9Z26QfEoherP+12VJwhxgv4B989eII60Q2EDVfstGBIS8DnHaux0/hecT6P+eG0jS7VN1NB33j3hXWL/u8GmmN3UL8UZ9vdEyIpPSFKEc+uc43u44ornK/HZznbmn2kzqONqX3jlPOMAEFm8nGDM2I09397ykY37S3uWL2Bdp8bnOgh8vaIs4MxizkPURV0tnkiZ2eV5vbSaWnKRVaLTaD6toPKbjS12i7EB6w500DbHk1171t1/O6FPFB/h+hfG6XGRih/P90vngUT2EXF++dyfOkJxi46ubiWrj+VoXvM8jM2KprUrV361984w4BkZi56fWRnE60Qpx7UYtMTnYAQ39bTDTQ9K1YRcP6PlfTVxFRaPznNIy1ZMMTSql0cn8XCr2hoCdnngyO+2CNG1+ngwtn8OTDgfE3rYh8ctz3iDBPy0CuZZo3Oe0oT2H7WRse83FQ9FarFZiQ6kcvOO1pPW8clKxd6UFIXdmU7vXe41n3Mjqpmqj5000P0S/OSqU9yFL1zrJ7m9ze2pTGp0ZQYE+mX072bm6S7H+0hxkAR6jjDhAeizDykKtkVcAHVHf3lcIth/hYoGjg3nJ4WRSv5om6taqJzMzMUMeb3jKPyG82K0DGAjvNAQQ6J9GPuvhvKMYqL192h+a73OsmODsfWTGtSY5TBIM7Tc1FAL1fFjID2IFq4p97n1uqTUMYZRqSbWrQALo6RINWLCDiqFrScUp0iwJ3hsgV8IcXFgpiX8TnYhkXcN2U2RUwQ7Mcju7pnAzGQSqvtVM65c68k7W7FIq+4ollXkADa0HNDMSOgPbGQQvtf/GWlt0YlG85aoYwzjLCYXrSBAimAFiDYOffH8+o/WnMxhnIYXL1oRrqHGNZNSFEc1sMN+Zj46Eh3TvvkgHjaXX6L9lU30cHH0jwcCuLCoMNgwmIwLzXap7BQHfkgX1+AhX3ilEWSEC3a31FxmwaxA88coD/1hzLOMMNuetHCIfXcUwuYyrXKRXBYCFa9Dc4qSjs5X19TFjeFv9cobV57JpNGZMZQzvYqKp+VoaQJAkKwcL5V7PKrzzsFNIpnBXUerHZ/iNFoAYky1kIfpSa0u4DdUh0LsG5MChXsqaEp2fe4Y/N26FDGGWbUoXdQBzLlsMJiAM7y+H1G01RdqykW9UejjkdaUeoq7awdmqSIGq67nkWDvBUr7WX945X6rXA29WodgoewSx9KpCX7az0Wehg46ul1w6arPuOBsPwpY2mJEu+LOJHOaO3HtlDFaQKcxSc8YdborvF0ObG3U3zFlxoVQeE16q0gXmNbdmLwEwam1sEZzjITBGRtcpaGLLGRVHe7RXEgODBeq4ELruWMqLMGgv2XGxWnb6tgXhtm8XkzIFRxmgAnIdoSM0YG4cwsuduhuPuD6ROAI2JBInK1w5yjBXMbErkkzl9UXKPUaLO/v66kF8jxkAdesDbTCv4fbrblwi0lpxS1T4HcbjHuMpGoAOD9sNpXL4L0gDtuix5MDFnf6SHYOMMMfLurBL3+C/N1s0WHHAxlqId7OG8zwnEhYjgK3AiuJKa25SO6KjkdBCamRyyqxJRuVD2A+OCgU7iNhcMt7tuzEPLCUqsiVrQLoIqAtj7KSXRXNZBKDOPp9+ezPL3zoqiSBxjKZpgp9l5sVAYY8sik6Aga3TO2leNhEYibH1s4Jw1GqBt54YiZAdWBUZbWddxg4zQBjsBj8NVEfLpLzCwzRYeR791xB680ukWMC61e/UJgQrTYZ7Ub3/nBnTNxg8AbcJ9kdiTk095TtqgsiEXRMtdgQB49tmec5vthgO1mYcwemNjq/fBZ65scftea8fkgPDGQ1H0g4B0HBBtsnCYAzHW1+D7tUnL+8lZCwqy4yezDrBVLTfz6tkb2i4SJ8SkEixdCtPjjbdkvEibFReZK8Ye6qLeOuUf2j4TJgMXJy6R64kyk1078hPyy7CcJE2EFc7d6g9YTZnKYvzFTZX9JhBnrmXPJWZ8lLacVKGVOYl6VfSYR5oXXK96C1RMtcJw5glks+06ig4E7Qvjab6ErZSV/RQtccTnuG+T9jRQJifYBTHIoc62vgyL8fHx9hku888j54zIJiVBiH/ND5k6tdKCtohXA7zPw3FA8gvERcj7/S0IiUNwi55O/i5jfkfN5tH7jfwEGAN2luv1fjxpNAAAAAElFTkSuQmCC"},49954:function(be,me,r){be.exports=r.p+"static/freeze.385c8b75.png"},94749:function(be,me,r){be.exports=r.p+"static/servicePack1.f861a912.png"},36431:function(be,me,r){be.exports=r.p+"static/servicePack2.0a3bd0b3.png"},36617:function(be,me,r){be.exports=r.p+"static/servicePack3.14aa97b4.png"},79458:function(be,me,r){be.exports=r.p+"static/servicePack4.d24576ed.png"},72805:function(be,me,r){be.exports=r.p+"static/user-center.0c0ac395.png"}}]);
