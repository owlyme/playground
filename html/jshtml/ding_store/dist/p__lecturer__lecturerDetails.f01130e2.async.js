(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[1755],{42837:function(le,q,e){"use strict";var B=e(12924),c=e.n(B),G=e(91768),d=e(28216),Y=e(66708),w=e(18329);class $ extends c().Component{render(){var C=this.props,h=C.visible,t=C.onCancel,D=C.title,_=C.t;return h?c().createElement(w.ZP,{visible:h,width:"400",footer:null,title:D||_("common.QRCodeScan"),bodyStyle:{minWidth:430},onCancel:t,destroyOnClose:!0},c().createElement(Y.Z,this.props)):null}}q.Z=(0,d.$j)()((0,G.Z)()($))},74525:function(le,q,e){"use strict";var B=e(57361),c=e(34792),G=e(48086),d=e(9754),Y=e.n(d),w=e(12924),$=e.n(w),I=e(91768),C=e(28216),h=e(92592),t=e(5430),D=e(10237),_=e(84874),o=e(16239),L=e(38642),j=e(28963);class S extends $().Component{constructor(s){var N;super(s);N=this,this.appId=sessionStorage.getItem("CL_E_APP_ID"),this.miniAppId=sessionStorage.getItem("CL_MINI_APP_ID"),this.initCode=()=>{var O=this.props,y=O.type,a=O.isProjectShare,l=O.isCommodityExchange,n=O.userInfo;["wx","weixin"].includes(y)?y==="weixin"&&n.appId==="9005"?this.initOtherCode():this.initWXCode():a&&y==="ding"?this.getProjectShareUrl():l&&y==="ding"?this.getCommodityExchangeUrl():y==="fullWebLink"?this.initOtherCode(this.props.option.scene):this.initOtherCode()},this.getCommodityExchangeUrl=()=>{var O=this.props,y=O.t,a=O.appType,l=O.orderId,n=this.props.option.scene,r=localStorage.getItem("uid");if(!o.Z[(0,o.c)()].showCl||a!=="e_app"){var u={deliverUserId:r,orderId:l,flag:"exchange"};h.toDataURL(JSON.stringify(u),{width:500}).then(g=>{this.setState({img:g})}).catch(()=>{G.default.error(y("integralMall.qrCodeFailed"))})}else{var v="/pages/messageRedirect/messageRedirect?".concat(n),i=encodeURIComponent(v),p="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/appId=".concat(this.appId,"&pVersion=1&miniAppId=").concat(this.miniAppId,"&packageType=1&page=").concat(i,"&corpId=").concat(this.props.userInfo.corpId);this.getShortLink(p).then(g=>{h.toDataURL(g.data.short_link,{width:500}).then(E=>{this.setState({img:E})}).catch(()=>{G.default.error(y("integralMall.qrCodeFailed"))})})}},this.getProjectShareUrl=()=>{var O=this.props.option.scene,y=encodeURIComponent("/pages/messageRedirect/messageRedirect?".concat(O)),a="dingtalk://dingtalkclient/action/open_micro_app/=questionMark=/corpId=".concat(this.props.userInfo.corpId,"&appId=").concat(this.appId,"&miniAppId=").concat(this.miniAppId,"&page=").concat(y);this.getShortLink(a).then(l=>{this.initOtherCode(l.data.short_link)})},this.getShortLink=O=>D.WY.post({url:t.ZP.Common.getQrUrl(),data:{link:O}}),this.initWXCode=(0,B.Z)(Y().mark(function O(){var y,a,l,n;return Y().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return y=N.props.option,a=y.scene,l=y.flag,u.next=3,D.WY.post({url:t.ZP.createWxCode(),data:{flag:l,scene:"".concat(a,"&enterpriseId=").concat(t.ZP.enterpriseId),enterprise_id:t.ZP.enterpriseId}});case 3:n=u.sent,N.setState({img:n.data.wx_code,linkUrl:"data:image/png;base64,".concat(n.data.wx_code)});case 5:case"end":return u.stop()}},O)})),this.initOtherCode=function(){var O=(0,B.Z)(Y().mark(function y(a){var l,n,r,u;return Y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(l=N.props,n=l.type,r=l.fsUrl,i.t0=a,i.t0){i.next=6;break}return i.next=5,N.handleScanCode();case 5:i.t0=i.sent;case 6:u=i.t0,n==="fs"&&r&&(u=r),N.setState({linkUrl:u}),h.toDataURL(u,{width:500}).then(p=>{N.setState({img:p})}).catch(()=>{G.default.error(N.props.t("personal.failedGenerateCode"))});case 10:case"end":return i.stop()}},y)}));return function(y){return O.apply(this,arguments)}}(),this.handleScanCode=(0,B.Z)(Y().mark(function O(){var y,a,l,n,r,u,v,i,p,g,E,A,J,P,se,re,F,ee;return Y().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(y=N.props,a=y.type,l=y.userInfo,n=y.universalFn,r=N.state.wxH5Url,u=N.props.option,v=u.scene,i=u.pc_url,p=i===void 0?"":i,g=u.mobile_url,E=g===void 0?"":g,A=u.pc_type,J=A===void 0?"":A,P=u.mobile_type,se=P===void 0?"":P,re=encodeURIComponent("/pages/messageRedirect/messageRedirect?"),F=encodeURIComponent(v),!n){U.next=12;break}return U.next=8,N.getShortLink((0,L.jr)({pc_url:p,mobile_url:E,pc_type:J,mobile_type:se}));case 8:return ee=U.sent,U.abrupt("return",(0,j.fZ)(ee.data.short_link));case 12:U.t0=a,U.next=U.t0==="app"?15:U.t0==="ding"?16:U.t0==="fs"?17:U.t0==="weixin"?18:19;break;case 15:return U.abrupt("return","".concat(v,"&fromApp=true"));case 16:return U.abrupt("return","dingtalk://dingtalkclient/action/open_micro_app?corpId=".concat(l.corpId,"&appId=").concat(N.appId,"&miniAppId=").concat(N.miniAppId,"&packageType=1&pVersion=1&page=").concat(re+F));case 17:return U.abrupt("return","https://applink.feishu.cn/client/web_app/open?appId=".concat("cli_a0aa5e0fe5f8500d","&path=").concat(encodeURIComponent("/index.html"),"&").concat(v,"&appType=lark"));case 18:return U.abrupt("return","".concat(r,"/#/pages/login/login-we-com/index?appType=weCom&corp=").concat(l.corpId,"&").concat(v));case 19:return U.abrupt("return","");case 20:case"end":return U.stop()}},O)})),this.saveQrcode=()=>{var O=this.state.img,y=this.props,a=y.type,l=y.t,n=y.userInfo,r=document.createElement("a");r.download=l("setting.Qrcode")+new Date().getTime(),r.href=a==="wx"||a==="weixin"&&n.appId!=="9005"?"data:image/png;base64,".concat(O):O,document.body.appendChild(r),r.click(),document.body.removeChild(r)},this.generatePoster=O=>{var y=O.linkUrl,a=O.type,l=O.activeKey,n=O.option,r=this.props.universalFn;typeof r=="function"&&r({linkUrl:y,type:a,activeKey:l,option:n})},this.state={img:"",linkUrl:"",wxH5Url:"https://mobile.coolcollege.cn"}}componentDidMount(){this.initCode()}componentDidUpdate(s){s.option.scene!==this.props.option.scene&&this.initCode()}render(){var s=this.props,N=s.type,O=s.tip,y=s.extraTip,a=s.t,l=s.canSave,n=s.refreshQrCode,r=s.label,u=s.saveText,v=u===void 0?"":u,i=s.downloadAsBtn,p=s.userInfo,g=s.universalFn,E=s.activeKey,A=s.option,J=this.state,P=J.img,se=J.linkUrl,re=localStorage.getItem("themeColor")||"#465dcd";return P?$().createElement("div",{className:"qr-code-content"},r?$().createElement("div",{className:"label-text"},r,":"):null,$().createElement("div",{className:"qr-code-div ".concat(r?"left":"")},N==="wx"||N==="weixin"&&p.appId!=="9005"?$().createElement("img",{src:"data:image/png;base64,".concat(P),alt:""}):$().createElement("img",{src:P,alt:""}),O?$().createElement("div",{className:"tip-text"},O):null,y?$().createElement("div",{className:"tip-text"},y):null,l?$().createElement("div",{className:"save_qrcode ".concat(i?"save-btn":""),style:{color:re},onClick:()=>this.saveQrcode()},i?null:$().createElement(_.Z,{iconClass:"icon-f-download",size:"14px"}),v||a("personal.saveCode")):null,g&&!n?$().createElement("div",{className:"save_qrcode",style:{color:re},onClick:()=>this.generatePoster({linkUrl:se,type:N,activeKey:E,option:A})},a("personal.saveCodePoster")):null,n?$().createElement("div",{className:"save_qrcode",style:{color:re},onClick:()=>n()},$().createElement(_.Z,{iconClass:"iconf-switch",size:"14px"}),a("personal.refreshCodeTip")):null)):$().createElement("div",{className:"qr-code-placeholder"})}}q.Z=(0,C.$j)(M=>{var s=M.user;return{userInfo:s,appType:s.appType,corpId:s.corpId}})((0,I.Z)()(S))},66708:function(le,q,e){"use strict";var B=e(93485),c=e(33565),G=e(57361),d=e(18106),Y=e(88108),w=e(9754),$=e.n(w),I=e(12924),C=e.n(I),h=e(91768),t=e(28216),D=e(89366),_=e(48194),o=e(74525),L=e(77779),j=e.n(L),S=e(6793),M=Y.Z.TabPane;class s extends C().Component{constructor(y){var a;super(y);a=this,this.initAppTypeScan=(0,G.Z)($().mark(function n(){var r,u,v,i,p,g,E,A,J,P,se;return $().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,Promise.all([(0,_.q)(),(0,_.$)()]);case 2:r=F.sent,u=(0,c.Z)(r,2),v=u[0],i=u[1],p=v.data.sync_organizes,g=i.data.list,E=!1,A=(0,B.Z)(g),F.prev=10,A.s();case 12:if((J=A.n()).done){F.next=19;break}if(P=J.value,P.type!=="wechat_applet_setting"){F.next=17;break}return E=P.switch_status==="OPEN",F.abrupt("break",19);case 17:F.next=12;break;case 19:F.next=24;break;case 21:F.prev=21,F.t0=F.catch(10),A.e(F.t0);case 24:return F.prev=24,A.f(),F.finish(24);case 27:se=a.props.universalFn?a.filterOrganizes(p):a.filterCode(p),E&&se.push("wx"),a.setState({scanTypes:se});case 30:case"end":return F.stop()}},n,null,[[10,21,24,27]])})),this.filterCode=n=>{var r=[...n],u=this.props.option;return r=r.map(v=>["third_oa_app","seeyon_app"].includes(v)?"ding":v),u&&u.flag==="exam_task"?[...new Set([...r])].filter(v=>v==="fs"):[...new Set([...r,"app"])]},this.filterOrganizes=n=>{var r=[...n],u=this.props.option;r=r.map(i=>["third_oa_app","seeyon_app"].includes(i)?"ding":i);var v=new Set([...r]);return v.size===1&&v.has("app")?u&&u.flag==="exam_task"?[...v].filter(i=>i==="fs"):[...v]:(v.delete("app"),u&&u.flag==="exam_task"?[...v].filter(i=>i==="fs"):[...v])};var l=y.t;this.state={scanTypes:[],commonTitle:{ding:l("common.sanCodeCommon"),fs:l("common.sanCodeCommon"),weixin:l("common.sanCodeCommon"),app:l("common.sanCodeCommon"),wx:l("common.weChatApplets")},tabTitle:{ding:l("common.dingDingSanCode"),fs:l("common.fsScanCode"),weixin:l("common.WeComSanCode"),app:l("common.appScanCode"),wx:l("common.wxScanCode")}}}componentDidMount(){this.initAppTypeScan()}UNSAFE_componentWillReceiveProps(){this.initAppTypeScan()}render(){var y=this.state,a=y.tabTitle,l=y.commonTitle,n=y.scanTypes,r=this.props,u=r.option,v=r.tip,i=r.t,p=r.extraTip,g=r.canSave,E=r.refreshQrCode,A=r.isCommodityExchange,J=r.type,P=r.center,se=P===void 0?!0:P,re=r.label,F=re===void 0?"":re,ee=r.saveText,Z=r.downloadAsBtn,U=Z===void 0?!1:Z,V=r.transfer,X=V===void 0?!1:V,W=r.source_type,ne=r.universalFn,k=r.activeKey;return C().createElement("div",{className:"".concat(j()["scan-code-box"]," ").concat(J==="card"?j()["card-tabs"]:"")},n.length===1?C().createElement(o.Z,{universalFn:ne,activeKey:k,type:n[0],option:u,tip:(0,S.ZT)(i(v),ne?l[n[0]]:a[n[0]]),extraTip:p,canSave:g,fsUrl:u.fsUrl,refreshQrCode:E,isCommodityExchange:A,label:F,saveText:ee,downloadAsBtn:U}):C().createElement(Y.Z,{defaultActiveKey:"1",centered:se,type:J},n.map((m,K)=>{var f=K+1;return C().createElement(M,{tab:ne?l[m]:a[m],key:f},X&&C().createElement("div",{className:j()["scan-code-transfer"]},C().createElement(D.Z,null),C().createElement("span",null,i("course.onlyScope",{source_type:i(W==="study_project"?"lineClass.project":"lineClass.task")}))),C().createElement(o.Z,{universalFn:ne,activeKey:k,type:m,option:u,tip:(0,S.ZT)(i(v),ne?l[m]:a[m]),extraTip:p,canSave:g,fsUrl:u.fsUrl,refreshQrCode:E,isCommodityExchange:A,label:F,saveText:ee,downloadAsBtn:U}))})))}}s.defaultProps={option:{flag:"",scene:""},tip:"",extraTip:"",canSave:!0,refreshQrCode:null};var N=O=>({appType:O.user.appType});q.Z=(0,t.$j)(N)((0,h.Z)()(s))},995:function(le,q,e){"use strict";var B=e(77883),c=e(21888),G=e(12924),d=e.n(G),Y=e(80991),w=e(91768),$=e(43859),I=e(6793);class C extends d().Component{constructor(){super(...arguments);this.state={},this.limitDecimals=t=>t&&t.toString().replace(/[^\d]+/g,""),this.handleMarkChange=t=>{this.props.formik.setFieldValue("mark",t)}}render(){var t=this.props,D=t.totalScore,_=t.mark,o=t.tip,L=t.disabled,j=t.t;return d().createElement("div",{className:""},d().createElement("div",{className:""},d().createElement(c.Z,{formatter:this.limitDecimals,parser:this.limitDecimals,min:0,disabled:L,defaultValue:_,onChange:this.handleMarkChange,max:D}),d().createElement("div",{style:{display:"none"}},d().createElement("input",{type:"text"})),d().createElement("span",{style:{marginLeft:"6px"}},j("personal.scoreLabel")),d().createElement("span",{className:"qualified-standard-tip"},o||(0,I.ZT)("".concat(j("lineClassStudy.markTip")),D,D))))}}C.defaultProps={},q.Z=(0,$.Z)((0,Y.$j)((0,w.Z)()(C)))},64481:function(le,q,e){"use strict";e.r(q),e.d(q,{default:function(){return f}});var B=e(22385),c=e(31097),G=e(34792),d=e(48086),Y=e(57361),w=e(18106),$=e(88108),I=e(9754),C=e.n(I),h=e(12924),t=e.n(h),D=e(91768),_=e(76651),o=e(28216),L=e(57068),j=e(13254),S=e(14277),M=e(96433),s=e(33304),N=e(84874);class O extends t().Component{render(){var b=this.props,R=b.prefixCls,H=b.t,z=b.list,Q=b.total,ie=b.click;return t().createElement("div",{className:R},t().createElement("div",{className:"".concat(R,"__header")},t().createElement("span",{className:"total"},H("common.courseNum"),"\uFF1A",Q)),t().createElement("div",{className:"".concat(R,"__content")},z.length>0?t().createElement("div",{className:"lists"},z.map(ae=>t().createElement("div",{className:"".concat(R,"__content__card"),key:ae.id,onClick:()=>ie&&ie({id:ae.id,visible:ae.is_visible,type:ae.course_type,resourceType:ae.resource_type,bizType:ae.biz_type,liveStatus:ae.live_status,liveType:ae.live_type})},t().createElement("img",{className:"cover",src:ae.cover}),t().createElement("div",{className:"info"},t().createElement("div",{className:"title"},ae.title),t().createElement("div",{className:"counts"},t().createElement("span",{className:"num"},t().createElement("span",null,t().createElement(N.Z,{iconClass:"iconFView"}),t().createElement("b",null,ae.play_count)),t().createElement("span",null,t().createElement(N.Z,{iconClass:"iconComment"}),t().createElement("b",null,ae.comment_count)),t().createElement("span",null,t().createElement(N.Z,{iconClass:"iconLikeFace"}),t().createElement("b",null,ae.like_count))),t().createElement("span",{className:"starIcon"},t().createElement(s.Z,{value:ae.score===0?5:ae.score,disabled:!0}))),t().createElement("div",{className:"update_time"},ae.update_time))))):t().createElement(S.Z,{image:S.Z.PRESENTED_IMAGE_SIMPLE})))}}O.defaultProps={prefixCls:"lecturer-card-list"};var y=(0,D.Z)()(O),a=e(88983),l=e(47933),n=e(14781),r=e(53431),u=e(71194),v=e(57016),i=e(88986),p=e(33565),g=e(38642),E=e(37055),A=e(6793),J=e(17676),P=e(7908),se=e(94288),re=e(74687),F=e(48479);function ee(T){var b=L.parse(_.m8.location.search),R=b.lecturerId,H=b.tab,z=T.t,Q=T.calTotalNum,ie=(0,h.useState)([]),ae=(0,p.Z)(ie,2),pe=ae[0],Ee=ae[1],fe=(0,h.useState)(0),ve=(0,p.Z)(fe,2),he=ve[0],ge=ve[1],Ie=(0,h.useState)(0),Me=(0,p.Z)(Ie,2),me=Me[0],Ye=Me[1],Ge=(0,h.useState)({ongoing_count:0,unstarted_count:0,finished_count:0}),Ae=(0,p.Z)(Ge,2),Te=Ae[0],Qe=Ae[1],Ve=(0,h.useState)({keyword:"",train_status:H||"ongoing",page_number:1,page_size:20}),Re=(0,p.Z)(Ve,2),oe=Re[0],ye=Re[1],ke=[{name:"".concat(z("common.ongoing"),"(").concat(Te.ongoing_count,")"),value:"ongoing"},{name:"".concat(z("common.notStarted"),"(").concat(Te.unstarted_count,")"),value:"unstarted"},{name:"".concat(z("common.ended"),"(").concat(Te.finished_count,")"),value:"finished"}],Je=(0,h.useState)({}),xe=(0,p.Z)(Je,2),Pe=xe[0],Oe=xe[1],He=(0,h.useState)([]),be=(0,p.Z)(He,2),Xe=be[0],qe=be[1],et=(0,h.useState)(!1),We=(0,p.Z)(et,2),tt=We[0],Se=We[1],at=(0,h.useState)(!1),Ke=(0,p.Z)(at,2),nt=Ke[0],Be=Ke[1],st=(0,h.useState)(!1),Fe=(0,p.Z)(st,2),rt=Fe[0],$e=Fe[1],it=(0,h.useState)(!1),je=(0,p.Z)(it,2),lt=je[0],Le=je[1];(0,h.useEffect)(()=>{ze()},[]),(0,h.useEffect)(()=>{ze()},[oe]);function ze(){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,Y.Z)(C().mark(function x(){var te;return C().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ot(),ce.next=3,(0,J._v)({keyword:oe.keyword,train_status:oe.train_status,page_number:oe.page_number,page_size:oe.page_size});case 3:te=ce.sent,te.data&&te.data.code==="200000"&&(Ee(te.data.data.list),ge(te.data.data.total));case 5:case"end":return ce.stop()}},x)})),Ze.apply(this,arguments)}function ot(){(0,J.R9)({keyword:oe.keyword}).then(x=>{if(x.data&&x.data.code==="200000"){var te=x.data.data;Q&&Q(te.ongoing_count+te.finished_count+te.unstarted_count),Ye(te.ongoing_count+te.finished_count+te.unstarted_count),Qe(x.data.data)}})}function ut(x){ye((0,i.Z)((0,i.Z)({},oe),{},{train_status:x.target.value,page_number:1}))}function ct(x){ye((0,i.Z)((0,i.Z)({},oe),{},{keyword:x,page_number:1}))}function dt(){return t().createElement("div",{className:"list-content"},pe.map((x,te)=>t().createElement(t().Fragment,null,mt(x,te))))}function mt(x,te){var ue=(0,A.p6)(x.begin_time,"yyyy.MM.dd hh:mm"),ce=x.end_time?(0,A.p6)(x.end_time,"yyyy.MM.dd hh:mm"):"--",de=oe.train_status!=="settled",Ne=localStorage.getItem("themeColor")||"#465dcd",_e=x.config,Ce=x.begin_time<new Date().getTime()||x.lecturer_status==="rejected";return t().createElement("div",{className:"cards",key:x.id,style:{marginRight:te%3==2?0:"10px"}},t().createElement("div",{onClick:()=>{Ct(x)}},t().createElement("div",{className:"img-content"},t().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1830342692685615104.png")})),t().createElement("div",{className:"base-infos"},t().createElement("div",{className:"title-top"},t().createElement(c.Z,{title:x.title},t().createElement("span",{className:"title"},x.title)),x.is_lecturer_confirm&&t().createElement(t().Fragment,null,t().createElement("span",{onClick:we=>{pt(we,x,Ce)},className:"refuse-btns ".concat(Ce?"refuse-btns-disabled":"")},z("lineClass.refuseTeach")))),t().createElement("div",{className:"time"},z("help.time"),"\uFF1A","".concat(ue," ~ ").concat(ce)),t().createElement(c.Z,{title:x.address},t().createElement("div",{className:"address ellipsis"},z("help.address"),"\uFF1A",x.address||"--")),t().createElement(c.Z,{title:x.introduction},t().createElement("div",{className:"address ellipsis"},z("lineClass.aim"),"\uFF1A",x.introduction||"--")))),t().createElement("div",{className:"bottom-btns",style:{color:Ne}},de&&_e&&_e.is_open_offline_assessment?t().createElement("span",{className:"btns",onClick:()=>{vt(x)}},z("lineClassStudy.inputScore")):null,de&&_e&&_e.is_open_upload?t().createElement("span",{className:"btns",onClick:()=>{_t(x)}},z("lineClassStudy.uploadDatum")):null,de&&_e&&_e.lecturer_student_evaluate&&R===x.lecturer_id?t().createElement("span",{className:"btns",onClick:()=>{ft(x)}},z("lineClass.evaluationOfStudent")):null))}function pt(x,te,ue){var ce=te.id;x.stopPropagation(),!ue&&v.Z.confirm({title:z("common.tip"),content:z("lineClassStudy.rejectConfirm"),okText:z("common.ok"),cancelText:z("common.cancel"),onOk:function(){var de=(0,Y.Z)(C().mark(function _e(){var Ce;return C().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,(0,J.Np)(ce);case 2:Ce=De.sent,Ce.data&&Ce.data.code==="200000"&&ye((0,i.Z)((0,i.Z)({},oe),{},{page_number:1}));case 4:case"end":return De.stop()}},_e)}));function Ne(){return de.apply(this,arguments)}return Ne}()})}function vt(x){var te=x.config.evaluate_rule_vo;Oe((0,i.Z)((0,i.Z)({},x),{},{evaluate_id:te.evaluate_id,evaluate_rule_vo:te})),Be(!0)}function _t(x){ht(x)}function ht(x){return Ue.apply(this,arguments)}function Ue(){return Ue=(0,Y.Z)(C().mark(function x(te){var ue;return C().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,(0,J.RX)({id:te.summary.activity_attachment_id});case 2:ue=de.sent,qe(ue.data||[]),Oe(te),Se(!0);case 6:case"end":return de.stop()}},x)})),Ue.apply(this,arguments)}function Et(x){var te=[];x.forEach(ue=>{te.push(ue.id)}),(0,J.af)({enterpriseId:E.ZP.enterpriseId,bizResourceList:[{bizCode:Pe.summary.activity_attachment_id,resourceIdList:te,isCovered:!0}]}).then(()=>{Se(!1),Oe({}),d.default.success("".concat(z("course.courseDetailCoverSuccess")))}).catch(()=>{})}function ft(x){var te=x.config,ue=te.evaluate_rule_vo,ce=te.evaluate_rule_vo.evaluate_type;Oe((0,i.Z)((0,i.Z)({},x),{},{evaluate_id:ue.evaluate_id,evaluate_rule_vo:ue})),ce==="score"?$e(!0):ce==="questionnaire"&&Le(!0)}function gt(){Le(!1),Oe({})}function Ct(x){(0,g.eJ)({url:"/personal/profile/checkinDetail?".concat(L.stringify({courseId:x.id}))})}function yt(){var x=oe.page_number,te=oe.page_size,ue=(0,i.Z)((0,i.Z)({},E.XE.INITIAL_PAGINATION),{},{total:he,current:x,pageSize:te,onChange:Pt,onShowSizeChange:Ot});return t().createElement("div",{className:"pagination-content"},t().createElement(r.Z,ue))}function Pt(x,te){ye((0,i.Z)((0,i.Z)({},oe),{},{page_number:x,page_size:te}))}function Ot(x){ye((0,i.Z)((0,i.Z)({},oe),{},{page_size:x,page_number:1}))}return t().createElement("div",{className:"line-class-list"},t().createElement("div",null,t().createElement("div",{className:"top_operate"},t().createElement("span",{className:"total"},z("common.courseNum"),"\uFF1A",me),t().createElement("span",null,t().createElement(l.ZP.Group,{defaultValue:oe.train_status,onChange:ut,className:"status-radios"},ke.map(x=>t().createElement(l.ZP.Button,{key:x.value,value:x.value},x.name))),t().createElement(F.Z,{onSearch:ct,placeholder:z("searchInputPlaceholder.lineClass"),width:272,maxLength:400})))),t().createElement("div",null,dt(),yt()),t().createElement(P.Z,{initData:{attachment:Xe},visible:tt,operateColumn:Pe,onCancel:()=>{Se(!1)},onUploadComplete:Et}),t().createElement(se.Z,{from:"rate",title:z("lineClass.inputScore"),operateColumn:Pe,visible:nt,type:"add",onCancel:()=>{Be(!1)}}),t().createElement(se.Z,{from:"evaluate",settled:oe.train_status==="settled",title:z("lineClass.evaluationOfStudent"),operateColumn:Pe,visible:rt,type:"evaluate",onCancel:()=>{$e(!1)}}),t().createElement(re.Z,{from:"myEvaluate",settled:oe.train_status==="settled",title:z("lineClass.evaluationOfStudent"),operateColumn:Pe,visible:lt,onCancel:()=>{Le(!1)},onSubmit:gt}))}var Z=(0,D.Z)()(ee),U=e(60667),V=e(42837),X=e(10237),W=e(64462),ne=e(4408),k=e(17381),m=$.Z.TabPane;class K extends t().Component{constructor(b){var R;super(b);R=this,this.goBack=()=>{_.m8.goBack()},this.getLecturerDetails=H=>{X.WY.get({url:E.ZP.Lecturer.getLecturerDetails(H),params:{}}).then(z=>{z.data.lecturer.adept_field=z.data.lecturer.adept_field?z.data.lecturer.adept_field.split(","):[this.props.t("lecturerPage.noTag")],z.data.courses.list=z.data.courses.list.map(Q=>(Q.update_time=(0,A.p6)(Q.update_time,"yyyy.MM.dd hh:mm"),Q)),this.setState({lecturer:z.data.lecturer,courses:z.data.courses.list,coursesTotal:z.data.courses.total})})},this.calTotalNum=H=>{this.setState({lineClassNum:H})},this.toCourseDetails=function(){var H=(0,Y.Z)(C().mark(function z(Q){var ie,ae,pe,Ee,fe,ve,he,ge,Ie;return C().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(ie=Q.id,ae=Q.visible,pe=Q.type,Ee=Q.resourceType,fe=Q.bizType,ve=Q.liveStatus,he=Q.liveType,ae!=="true"){me.next=10;break}return me.next=4,R.props.dispatch({type:"currentRoute/updateState",payload:{shouldAddScanCount:!0}});case 4:if(fe!==8){me.next=7;break}return he==="poly_wei"?(0,W.K7)(ie,ve):(ge=R.props.t,(0,W.It)(ie,ge)),me.abrupt("return");case 7:pe==="course"?(0,g.eJ)({url:"/course/enterpriseCourse?courseId=".concat(ie)}):pe==="project"?(0,g.eJ)({url:"/training/trainingProject/traineeView?id=".concat(ie,"&source=first")}):(Ie=Ee==="video",Ie?(0,g.eJ)({url:"/course/enterpriseCourse?courseId=".concat(ie)}):R.setState({weiProps:{visible:!0,flag:"miniCourse",scene:"courseId=".concat(ie,"&flag=miniCourse")}})),me.next=11;break;case 10:d.default.warning(R.props.t("lecturerPage.noPermissionWatch"));case 11:case"end":return me.stop()}},z)}));return function(z){return H.apply(this,arguments)}}(),this.handleCancelWei=()=>{this.setState({weiProps:{visible:!1,flag:"",scene:""}})},this.state={lecturer:{},courses:[],coursesTotal:0,lineClassNum:0,lecturerId:"",weiProps:{visible:!1,flag:"",scene:""}}}componentDidMount(){var b=L.parse(_.m8.location.search),R=b.lecturerId;R?this.getLecturerDetails(R):(0,k.LI)().then(H=>{var z=H.data.data;this.getLecturerDetails(z)}),this.props.dispatch({type:"currentRoute/updateState",payload:{headerMenuKey:"lecturerDemeanor"}})}render(){var b=this.props,R=b.prefixCls,H=b.t,z=this.state,Q=z.lecturer,ie=z.courses,ae=z.coursesTotal,pe=z.weiProps,Ee=z.lineClassNum,fe=L.parse(_.m8.location.search),ve=fe.from;return t().createElement("div",{className:R},t().createElement(ne.Z,{title:H("documentTitle.instructorDetails")}),t().createElement("div",{className:"".concat(R,"__content")},t().createElement("div",{className:"".concat(R,"__content__left")},t().createElement("div",{className:"".concat(R,"__content__left__avater")},t().createElement("img",{src:Q.avatar||"".concat("https://oss.coolcollege.cn","/1790708689137700864.png"),className:"avatar",alt:""})),t().createElement("div",{className:"".concat(R,"__content__left__name")},Q.type==="inside"?t().createElement(U.Z,{dataType:"userName",value:Q.sync_user_id,name:Q.lecturer_name,type:Q.source_type}):Q.lecturer_name,Q.sex===0?t().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1790706775494889472.png"),className:"sex",alt:""}):t().createElement("img",{src:"".concat("https://oss.coolcollege.cn","/1790706776073703424.png"),className:"sex",alt:""})),t().createElement("div",{className:"".concat(R,"__content__left__level-name"),title:Q.level_name||H("lecturerPage.noGrade")},Q.level_name||H("lecturerPage.noGrade")),Q.adept_field&&Q.adept_field!==[]?t().createElement("div",{className:"".concat(R,"__content__left__tags-list")},t().createElement("div",{className:"tags"},Q.adept_field.map((he,ge)=>t().createElement("span",{key:ge,className:"tag"},t().createElement(c.Z,{title:he},he))))):null,t().createElement("div",{className:"".concat(R,"__content__left__num")},t().createElement("div",{className:"".concat(R,"__content__left__num__content")},t().createElement("p",{className:"label"},H("common.courseNum")),t().createElement("p",{className:"nums"},ae+Ee))),t().createElement("div",{className:"".concat(R,"__content__left__personal")},t().createElement("p",null,H("common.selfIntroduction"),"\uFF1A"),Q.lecturer_describe?t().createElement("div",{dangerouslySetInnerHTML:{__html:Q.lecturer_describe}}):t().createElement("p",null,H("tutorial.noIntroduction")))),t().createElement("div",{className:"".concat(R,"__content__right")},t().createElement($.Z,{defaultActiveKey:ve==="myTeaching"?"2":"1"},t().createElement(m,{tab:H("common.courseLabel"),key:"1"},t().createElement(y,{list:ie,total:ae,click:this.toCourseDetails})),ve==="myTeaching"&&t().createElement(m,{tab:H("common.offline"),key:"2"},t().createElement(Z,{list:ie,calTotalNum:this.calTotalNum}))))),t().createElement(V.Z,{visible:pe.visible,option:pe,onCancel:this.handleCancelWei,title:H("component.microCourseScan"),tip:"component.useCustom"}))}}K.defaultProps={prefixCls:"lecturerDetails-container"};var f=(0,o.$j)()((0,D.Z)()(K))},17762:function(le,q,e){"use strict";var B=e(66456),c=e(55313),G=e(62029),d=e(88986),Y=e(34792),w=e(48086),$=e(12924),I=e.n($),C=e(91768),h=e(28216),t=e(37055),D=e(10237),_=e(18329),o=e(87312),L=e(84874),j=e(1164),S=e(76466),M=e(54531),s=e(6793);class N extends I().Component{constructor(y){super(y);this.onCancel=()=>{this.props.onCancel()},this.dealWatchType=a=>{var l=a.contentType||a.content_type,n=t.Yq.findIndex(A=>a.type.toLowerCase().includes(A))>-1,r=l.indexOf("video")>-1,u=t.Ss.indexOf(l)>-1,v=l.indexOf("image")>-1||a.type.indexOf("image")>-1||l.indexOf("picture")>-1||a.type.indexOf("picture")>-1,i=l.indexOf("html")>-1,p=l.indexOf("scorm")>-1,g=l.indexOf("h5")>-1,E="";return g?E="article":n?E="doc":r||u?E="video":v?E="image":i?E="html":p&&(E="scorm"),E},this.handlePreviewSystemFile=a=>{var l=this.state.previewInfo,n=a.status===1||a.status===2;if(n){w.default.warning(this.props.t("resourceLibrary.transcodingPlayerTip"));return}var r=a.contentType||a.content_type,u=this.dealWatchType(a),v=t.Ss.indexOf(r)>-1;if(u==="article"){var i=a.contentType,p=a.url,g=i==="h5/link";g?j.Z.targetTo({path:p,isExternalLink:!0}):j.Z.targetTo({path:"/training/resourceManage/library/articlePreview?id=".concat(a.id)});return}if(u==="scorm"){var E=a.url.split("//"),A=E[1].split("/"),J=[E[0],A[0]].join("//"),P="".concat(J,"/unzip_file/coolcollege-scorm/prod/preview.html?scormUrl=").concat(encodeURIComponent(a.url));j.Z.targetTo({path:P,isExternalLink:!0});return}var se={mode:"preview",watchType:u};u==="doc"?Object.assign(se,{resourceInfo:{type:"",docType:a.type,aliUrl:a.path,url:a.url,docTitle:a.name,playId:a.videoId||a.video_id,storageType:a.storage_type}}):u==="image"?Object.assign(se,{resourceInfo:{url:a.url,playId:a.videoId||a.video_id,storageType:a.storage_type}}):u==="html"?Object.assign(se,{resourceInfo:{url:a.url}}):Object.assign(se,{resourceInfo:{source:{FD:a.url,OD:a.path},originUrl:a.url,contentType:v?"mp3":a.type,playId:a.videoId||a.video_id,storageType:a.storage_type},autoPlay:!0,draggable:!0}),this.setState({resourcePlayInfo:se,previewInfo:(0,d.Z)((0,d.Z)({},l),{},{title:a.name,visible:!0,onCancel:this.cancelPreview})})},this.cancelPreview=()=>{var a=this.state.previewInfo;this.setState({resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{}},previewInfo:(0,d.Z)((0,d.Z)({},a),{},{visible:!1})})},this.funGetList=()=>{var a=this.props,l=a.fileId,n=a.fileList;l?D.WY.get({url:t.ZP.lineClassStudy.getResource(),params:{id:l}}).then(r=>{this.setState({files:r.data})}):this.setState({files:n||[]})},this.handlePreview=a=>{var l=this.props,n=l.appType,r=l.t,u=a.biz_type||a.bizType;if(n==="wx_app"&&u===3){w.default.info(r("lineClassStudy.ddFileNoSee"));return}if(n==="app"){this.handlePreviewSystemFile(a);return}if(!((a.type==="zip"||a.type==="rar")&&a.storage_type!=="DING_PAN")){if(!dd.version&&u===3){w.default.info(r("practiceOperation.dingFileTip"));return}if(u!==3){this.handlePreviewSystemFile(a);return}var v=t.ZP.DingSpaceId.getSpaceId(),i={corpId:this.props.corpId,userId:this.props.account,fileids:a.url,timeStamp:Date.parse(new Date)};D.WY.get({url:v,params:i}).then(p=>{p.data.code===0?this.ddSpacePreview(a):w.default.info(p.data.msg)}).catch(p=>{w.default.error(p.data)})}},this.ddSpacePreview=a=>{var l={spaceId:a.path,fileId:a.url,fileName:a.name,fileSize:a.size,fileType:a.type};(0,M.DR)(l)},this.getIconType=a=>{var l=t.e1[a.type];return l||"iconf-matter-picture"},this.renderModalPreview=()=>{var a=this.state,l=a.resourcePlayInfo,n=a.previewInfo;return I().createElement(S.Z,(0,G.Z)({},l,{previewInfo:n}))},this.renderCard=a=>{var l=this.props,n=l.prefixCls,r=l.t,u="".concat(n,"__file"),v=a.type;return v.indexOf("image")!==-1&&(v="png"),I().createElement(I().Fragment,null,I().createElement("div",{key:a.id,className:u},I().createElement("span",{className:"".concat(u,"__item")},I().createElement("span",{style:{"vertical-align":"middle"}},I().createElement(L.Z,{iconClass:t.e1[v],size:"16px"}))," ",I().createElement("span",{className:"".concat(u,"__name")},a.name),I().createElement("span",{className:"cl-pointer",style:{marginLeft:"15px","vertical-align":"middle"},onClick:()=>this.handlePreview(a)},r("common.preview")))))},this.renderTable=()=>{var a=this.props,l=a.t,n=a.useLocalList,r=a.fileList,u=this.state.files,v=n?r:u,i=[{title:l("common.number"),dataIndex:"id",width:80,key:"id",render:(p,g,E)=>I().createElement("span",null,E+1)},{title:l("practiceOperation.annex"),dataIndex:"name",key:"name",ellipsis:!0,render:(p,g)=>I().createElement("div",null,I().createElement(L.Z,{iconClass:this.getIconType(g),size:"16px"}),I().createElement("span",{style:{marginLeft:"8px"}},p))},{title:l("common.operate"),width:130,fixed:"right",render:(p,g)=>I().createElement("div",null,I().createElement("span",{className:"cl-pointer",onClick:()=>this.handlePreview(g)},l("common.preview")))}];return I().createElement(c.Z,{style:{minHeight:"400px"},columns:i,dataSource:v,pagination:!1})},this.renderFileList=()=>{var a=this.props,l=a.t,n=a.isComponent,r=a.isCard,u=a.fileList,v=a.useLocalList,i=a.prefixCls,p=a.title,g=this.state.files,E=v?u:g;if(n&&!r)return this.renderTable();if(r)return I().createElement(I().Fragment,null,E.length?I().createElement("div",{className:"file-list-item-card"},E.map(P=>this.renderCard(P))):I().createElement(o.Z,{tipText:l("lineClassStudy.noResult")}));var A=I().createElement("div",null,g.length>0?I().createElement("div",{className:"".concat(i,"_page")},I().createElement("div",{className:"".concat(i,"_page_num")},(0,s.ZT)(l("lineClassStudy.pageTotal"),g.length))):null),J={okText:l("common.ok"),cancelText:l("common.cancel"),size:"medium",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,footer:A};return I().createElement(_.ZP,(0,G.Z)({title:p||l("practiceOperation.annex")},J,{visible:this.props.visible,onCancel:this.onCancel}),I().createElement("div",{className:i},this.renderTable()))},this.state={files:[],resourcePlayInfo:{mode:"preview",watchType:"",resourceInfo:{},autoPlay:!0,draggable:!0},previewInfo:{visible:!1,destroyOnClose:!0,title:this.props.t("resourceLibrary.previewCourseware"),onCancel:()=>{}}}}componentDidMount(){this.funGetList()}componentDidUpdate(y){y.fileId!==this.props.fileId&&this.props.fileId&&this.funGetList()}render(){var y=this.state,a=y.resourcePlayInfo,l=y.previewInfo;return I().createElement("div",null,this.renderFileList(),I().createElement(S.Z,(0,G.Z)({},a,{previewInfo:l})))}}N.defaultProps={prefixCls:"file-list-line-class",title:"",fileId:"",isComponent:!1,fileList:[],useLocalList:!1,isCard:""},q.Z=(0,h.$j)(O=>({corpId:O.user.corpId,account:O.user.account}))((0,C.Z)()(N))},86197:function(le,q,e){"use strict";var B=e(12924),c=e.n(B),G=e(91768),d=e(15873),Y=e(43061),w=e(17762);class $ extends c().Component{constructor(){super(...arguments);this.renderStataus=()=>{var C=this.props,h=C.prefixCls,t=C.t,D=C.currentUser.status;return D==="passed"?c().createElement("div",{className:"".concat(h,"__status-throught")},c().createElement(d.Z,{style:{color:"#52C41A",fontSize:"33px"}}),c().createElement("span",{style:{"margin-left":"12px"}},t("common.passed"))):D==="rejected"?c().createElement("div",{className:"".concat(h,"__status-reject")},c().createElement(Y.Z,{style:{color:"#FF4D4F",fontSize:"33px"}}),c().createElement("span",{style:{"margin-left":"12px"}},t("lineClassStudy.rejected"))):null}}render(){var C=this.props,h=C.prefixCls,t=C.t,D=C.userStatus,_=C.evaluateDetail,o=C.evaluateDetail.evaluate_vo,L=C.currentUser,j=C.from,S=[];return j==="rate"?S=L.resources:S=_.resources,c().createElement("div",{className:h},D==="approved"?this.renderStataus():null,c().createElement("div",{className:"".concat(h,"__item")},c().createElement("div",{className:"".concat(h,"__label")},t("myExamTask.score"),"\uFF1A"),c().createElement("div",{className:"".concat(h,"__content")},(j==="rate"?L.score:o.score)||0)),c().createElement("div",{className:"".concat(h,"__item")},c().createElement("div",{className:"".concat(h,"__label")},t("examing.comments"),"\uFF1A"),c().createElement("div",{className:"".concat(h,"__content")},(j==="rate"?L.remark:o.comments)||"--")),c().createElement("div",{className:"".concat(h,"__item")},c().createElement("div",{className:"".concat(h,"__label")},t("practiceOperation.annex"),"\uFF1A"),c().createElement("div",{style:{width:"calc(100% - 100px)"}},S.length?c().createElement(w.Z,{useLocalList:!0,isCard:!0,isComponent:!0,fileList:S}):"--")))}}$.defaultProps={prefixCls:"approval-score",type:"",status:"",currentUser:{}},q.Z=(0,G.Z)()($)},94288:function(le,q,e){"use strict";e.d(q,{Z:function(){return se}});var B=e(62029),c=e(88986),G=e(57663),d=e(71577),Y=e(22385),w=e(31097),$=e(57361),I=e(18106),C=e(88108),h=e(9754),t=e.n(h),D=e(12924),_=e.n(D),o=e(91768),L=e(38394),j=e.n(L),S=e(72358),M=e(88902),s=e(80991),N=e(70075),O=e(6793),y=e(63273),a=e(995),l={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20,offset:0},sm:{span:20,offset:0}}};class n extends _().Component{constructor(){super(...arguments);this.initRef=F=>{this.formRef=F}}componentDidMount(){this.props.onFormMounted(this.formRef)}render(){var F=this.props,ee=F.initData,Z=F.t,U=F.maxScore,V=F.passScore,X=F.settled,W=F.maxNumber;return _().createElement(s.J9,{ref:this.initRef,initialValues:ee,onSubmit:this.props.onSubmit,render:()=>_().createElement(s.l0,null,_().createElement(s.gN,(0,B.Z)({name:"mark",disabled:X,required:!0,tip:"".concat(Z("myExamTask.perfect"),"\uFF1A").concat(U,"\uFF0C").concat(Z("exam.passingGrade"),"\uFF1A").concat(V),label:Z("myExamTask.score"),component:a.Z,displayType:"Custom",mark:0,totalScore:U,passScore:V},l)),_().createElement(s.gN,(0,B.Z)({name:"content",disabled:X,label:"".concat(Z("examing.comments")),component:N.Z,displayType:"Custom",LimitLength:300,char:!0},l)),_().createElement(s.gN,(0,B.Z)({name:"attachment",disabled:X,notLibrary:!0,maxFilesCount:W,uploadTips:(0,O.ZT)("".concat(Z("lineClassStudy.attachmentTip")),W),label:Z("component.practiceAttachment"),component:y.Pg,uploadComponentId:"aead50ed-12d8-40ee-9c26-bf6151db3423",displayType:"Custom",removeable:!0},l)))})}}n.defaultProps={initData:{},onFormMounted:()=>{}};var r=(0,o.Z)()(n),u=e(86197),v=e(10237),i=e(37055),p=e(87312),g=e(18329),E=e(60667),A=C.Z.TabPane,J={};class P extends _().Component{constructor(F){var ee;super(F);ee=this,this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{J.submitForm()},this.onFormMounted=Z=>{J=Z},this.handleChangeNameTabs=Z=>{var U=this.state.userList.filter(V=>V.user_info.id===Z);this.setState({currentUserId:Z,currentUser:U[0]},()=>{this.state.userStatus==="evaluated"&&this.getMyEvaluateInfo(U[0])})},this.handleChangeTypeTabs=Z=>{this.setState({pageNumber:1,userStatus:Z,evaluateDetail:{evaluate_vo:{},resources:[]}},()=>{this.funGetUserList()})},this.handleSubmit=Z=>{var U=this.props.type;U==="add"?this.handleSubmitScore(Z):U==="evaluate"&&this.handleSubmitEvaluate(Z)},this.handleSubmitScore=function(){var Z=(0,$.Z)(t().mark(function U(V){var X,W,ne;return t().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return X=ee.props.operateColumn.id,W=[],V.attachment.forEach(K=>{W.push(K.id)}),m.next=5,(0,S.ZQ)(X,{user_id:ee.state.currentUserId,score:V.mark,remark:V.content,resource_ids:W});case 5:ne=m.sent,j()(ne,"data.data")&&ne.data.code==="200000"&&ee.funGetUserList();case 7:case"end":return m.stop()}},U)}));return function(U){return Z.apply(this,arguments)}}(),this.handleSubmitEvaluate=function(){var Z=(0,$.Z)(t().mark(function U(V){var X,W,ne,k,m,K,f,T;return t().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return X=ee.props.operateColumn,W=X.id,ne=X.evaluate_id,k=X.evaluate_rule_vo,m=ee.state.ruleRes,K=[],V.attachment.forEach(H=>{K.push(H.id)}),f={evaluate_id:ne,evaluate_type:k.evaluate_type,evaluate_object_id:ee.state.currentUserId,evaluate_content_vo:{evaluate_vo:{score:V.mark,comments:V.content,content:K.length?K.join(","):"",passing_score:m.passing_score,total_score:m.total_score}}},R.next=7,(0,S.hR)(W,f);case 7:T=R.sent,j()(T,"data.data")&&T.data.code==="200000"&&ee.funGetUserList();case 9:case"end":return R.stop()}},U)}));return function(U){return Z.apply(this,arguments)}}(),this.initTabKey=()=>{var Z=this.props,U=Z.type,V=Z.operateColumn,X=Z.settled,W="";U==="add"?(W="scoring",this.setState({maxScore:V.config.assessment_total_score,passScore:V.config.assessment_pass_score})):U==="approval"?W="pending":U==="evaluate"&&(X?W="evaluated":W="evaluateing",this.setState({maxScore:V.evaluate_rule_vo.evaluate_vo.total_score,passScore:V.evaluate_rule_vo.evaluate_vo.passing_score,ruleRes:V.evaluate_rule_vo.evaluate_vo})),this.setState({userStatus:W},()=>{this.funGetUserList()})},this.funGetUserList=()=>{var Z=this.props,U=Z.type,V=Z.operateColumn,X=Z.operateColumn.id,W=this.state,ne=W.userStatus,k=W.pageNumber,m=W.pageSize,K=i.ZP.lineClassStudy.approveUserList(X),f=i.ZP.lineClassStudy.getLecturerEvaluateUserList(X),T=U==="evaluate"?f:K;v.WY.get({url:T,params:{page_number:k,page_size:m,user_status:ne,is_evaluated:ne==="evaluated",evaluate_id:V.evaluate_id||"",evaluate_type:V.evaluate_type}}).then(b=>{var R=b.data.data.list||[];this.setState({userList:R,totalPages:b.data.data.pages||0,currentUserId:R.length?R[0].user_id:"",currentUser:R.length?R[0]:"",total:Number(b.data.data.total)},()=>{R.length&&ne==="evaluated"&&this.getMyEvaluateInfo(this.state.currentUser),this.setState({hasNextPage:this.state.totalPages>k})})})},this.getMyEvaluateInfo=function(){var Z=(0,$.Z)(t().mark(function U(V){var X,W;return t().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return X=ee.props.operateColumn,k.next=3,(0,S.K5)(X.id,{evaluate_id:X.evaluate_id,is_evaluated:!0,evaluate_object_id:V.user_id});case 3:W=k.sent,j()(W,"data.data")&&W.data.code==="200000"&&ee.setState({evaluateDetail:W.data.data});case 5:case"end":return k.stop()}},U)}));return function(U){return Z.apply(this,arguments)}}(),this.approve=function(){var Z=(0,$.Z)(t().mark(function U(V){var X,W,ne;return t().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return X=ee.state.currentUserId,W=ee.props.operateColumn.id,m.next=4,(0,S.HM)(W,{status:V,user_id:X});case 4:ne=m.sent,j()(ne,"data.data")&&ne.data.code==="200000"&&ee.funGetUserList();case 6:case"end":return m.stop()}},U)}));return function(U){return Z.apply(this,arguments)}}(),this.renderNameList=()=>{var Z=this.state,U=Z.userList,V=Z.currentUserId,X=Z.pageNumber,W=Z.hasNextPage,ne=this.props.prefixCls;return _().createElement("div",null,_().createElement(C.Z,{tabPosition:"left",activeKey:V,className:"".concat(ne,"__tab"),onChange:this.handleChangeNameTabs},U.map(k=>_().createElement(A,{key:k.user_info.id,tab:_().createElement(w.Z,{title:k.user_info.name},_().createElement(E.Z,{dataType:"userName",value:k.user_info.user_id,name:k.user_info.name,type:k.user_info.source_type}))}))),_().createElement("div",{className:"name-list-page"},_().createElement(M.Z,{pageNumber:X,hasNextPage:W,onChangePage:k=>{this.onChangePage(k)}})))},this.renderContent=()=>{var Z=this.props,U=Z.operateColumn,V=Z.from,X=Z.settled,W=this.state,ne=W.currentUserId,k=W.initData,m=W.maxScore,K=W.passScore,f=W.userStatus,T=W.currentUser,b=W.evaluateDetail;return f==="scoring"||f==="evaluateing"?_().createElement(r,{maxNumber:5,settled:X,key:ne,course:U,onFormMounted:this.onFormMounted,onSubmit:this.handleSubmit,initData:k,maxScore:m,passScore:K}):f==="pending"||f==="approved"||f==="scored"||f==="evaluated"?_().createElement(u.Z,{key:ne,from:V,evaluateDetail:b,currentUser:T,userStatus:f}):null},this.renderFooter=()=>{var Z=this.props.t;return _().createElement("div",null,_().createElement(d.Z,{type:"primary",onClick:()=>{this.approve("passed")}},Z("common.approved")),_().createElement(d.Z,{type:"primary",danger:!0,onClick:()=>{this.approve("rejected")}},Z("common.reject")))},this.state={userList:[],total:0,pageNumber:1,hasNextPage:!1,pageSize:10,totalPages:0,userStatus:"",currentUserId:"",currentUser:null,maxScore:100,passScore:0,ruleRes:null,evaluateDetail:{evaluate_vo:{},resources:[]},initData:{content:"",attachment:[],mark:0}}}componentDidUpdate(F){F.visible!==this.props.visible&&this.props.visible&&this.initTabKey()}onChangePage(F){var ee=this.state,Z=ee.pageNumber,U=ee.totalPages;F==="prev"?this.setState({pageNumber:Z-1},()=>{this.funGetUserList(),this.setState({hasNextPage:U>this.state.pageNumber})}):F==="next"&&this.setState({pageNumber:Z+1},()=>{this.funGetUserList(),this.setState({hasNextPage:U>this.state.pageNumber})})}render(){var F=this.state,ee=F.userList,Z=F.userStatus,U=F.total,V=this.props,X=V.prefixCls,W=V.t,ne=V.visible,k=V.title,m=V.type,K=V.settled,f={okText:W(m==="approval"?"common.approved":"common.submit"),cancelText:W(m==="approval"?"common.turnDown":"common.cancel"),size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1,footer:this.renderFooter()};m!=="approval"&&delete f.footer,(Z==="scored"||Z==="approved"||Z==="evaluated"||K||!ee.length)&&(f=(0,c.Z)((0,c.Z)({},f),{},{footer:null}));var T=[];return m==="add"?T=[{type:"scoring",title:W("lineClassStudy.waitInput")},{type:"scored",title:W("lineClassStudy.hadInput")}]:m==="approval"?T=[{type:"pending",title:W("marketing.pending")},{type:"approved",title:W("lineClassStudy.hadApproval")}]:m==="evaluate"&&(T=[{type:"evaluateing",title:W("evaluation.noEvaluated")},{type:"evaluated",title:W("lineClassStudy.hadEvaluate")}]),_().createElement(g.ZP,(0,B.Z)({},f,{title:"".concat(k," (").concat(U,")"),visible:ne,onCancel:this.onCancel,onOk:this.onOk}),_().createElement("div",{className:X},_().createElement(C.Z,{activeKey:Z,onChange:this.handleChangeTypeTabs,className:"".concat(X,"__tab-type")},T.map(b=>_().createElement(A,{tab:b.title,key:b.type}))),_().createElement("div",{className:"".concat(X,"_container")},ee.length?_().createElement(_().Fragment,null,_().createElement("div",{className:"name-list"},this.renderNameList()),_().createElement("div",{className:"form-wrap"},this.renderContent())):_().createElement(p.Z,{tipText:W("lineClassStudy.noResult")}))))}}P.defaultProps={prefixCls:"input-score",title:"",type:"",from:"",settled:!1};var se=(0,o.Z)()(P)},88902:function(le,q,e){"use strict";var B=e(57663),c=e(71577),G=e(12924),d=e.n(G),Y=e(91768),w=e(67724),$=e(8812);class I extends d().Component{constructor(h){super(h);this.changePage=t=>{this.props.onChangePage(t)},this.state={}}render(){var h=this.props,t=h.prefixCls,D=h.pageNumber,_=h.hasNextPage;return d().createElement("div",{className:t},d().createElement("div",{className:"".concat(t,"-container")},d().createElement(c.Z,{onClick:()=>this.changePage("prev"),disabled:D===1,icon:d().createElement(w.Z,null)}),d().createElement("span",null," ",D),d().createElement(c.Z,{onClick:()=>this.changePage("next"),disabled:!_,icon:d().createElement($.Z,null)})))}}I.defaultProps={prefixCls:"simple-paging",pageNumber:1,hasNextPage:!1},q.Z=(0,Y.Z)()(I)},99359:function(le,q,e){"use strict";var B=e(62029),c=e(20228),G=e(11382),d=e(81211),Y=e(12924),w=e.n(Y),$=e(91768),I=e(76651),C=e(80991),h=e(10237),t=e(37055),D=e(50603);class _ extends w().Component{constructor(){super(...arguments);this.state={infos:{},questions:[],initialParams:{},isLoading:!1},this.initData=()=>{var L=this.props,j=L.questionnaire_result_vo,S=L.questionId;if(j&&this.setState({questions:j.questions,infos:j,initialParams:this.initFormParams(j.questions),isLoading:!1}),S){var M=t.ZP.EditQuestionnaire.getQuestionnaireInfo(this.props.questionId);h.WY.get({url:M}).then(s=>{var N=s.data,O=N.questions,y=(0,d.Z)(N,["questions"]);this.setState({questions:O,infos:y,initialParams:this.initFormParams(O),isLoading:!1})})}},this.initFormParams=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j={};return L.forEach(S=>{var M=S.type==="input"&&S.multiple_rows?"textarea":S.type;j["".concat(S.type,"_").concat(S.id)]={id:S.id,solution:{hasOtherOption:!1,options:"",otherAnswer:""},options:S.options,type:M,isRequired:S.is_must==="true"}}),j},this.handleSubmit=L=>{var j=[];Object.keys(L).forEach(S=>{var M=L[S],s=M.id,N=M.solution,O={};O.options=N.options,N.hasOtherOption&&(O.other_answer=N.otherAnswer),j.push({id:s,solution:O})}),this.props.onSubmit(j)},this.handleCancel=()=>{I.m8.goBack()},this.initRef=L=>{this.props.initRef(L)}}componentDidMount(){this.initData()}render(){var L=this.props.prefixCls,j=!1,S=this.state,M=S.initialParams,s=S.isLoading,N=S.questions,O=S.infos;return s?w().createElement(G.Z,{size:"large"}):w().createElement("div",{className:L},w().createElement("div",{className:"".concat(L,"__content")},N.length?w().createElement(C.J9,{ref:this.initRef,initialValues:M,onSubmit:this.handleSubmit,render:y=>w().createElement(D.Z,(0,B.Z)({showFooter:j},y,{questions:N,title:O.title,description:O.description,onCancel:this.handleCancel}))}):null))}}_.defaultProps={prefixCls:"participate-in-investigate-offline"},q.Z=(0,$.Z)()(_)},74687:function(le,q,e){"use strict";var B=e(62029),c=e(88986),G=e(22385),d=e(31097),Y=e(57361),w=e(18106),$=e(88108),I=e(9754),C=e.n(I),h=e(12924),t=e.n(h),D=e(91768),_=e(38394),o=e.n(_),L=e(72358),j=e(88902),S=e(99359),M=e(18329),s=e(87312),N=e(44970),O=e(37055),y=e(10237),a=e(60667),l=$.Z.TabPane;class n extends t().Component{constructor(u){var v;super(u);v=this,this.onCancel=()=>{this.props.onCancel()},this.onOk=()=>{this.state.formRef.submitForm()},this.onSubmit=i=>{this.onSubmitQuestionnaire(i)},this.onSubmitQuestionnaire=function(){var i=(0,Y.Z)(C().mark(function p(g){var E,A;return C().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return E=v.props.operateColumn,P.next=3,(0,L.hR)(E.id,{evaluate_object_id:v.state.currentUserId,evaluate_type:E.evaluate_rule_vo.evaluate_type,evaluate_id:E.evaluate_id,evaluate_content_vo:{questions:g,evaluate_vo:{questionnaire_id:E.evaluate_rule_vo.evaluate_vo.questionnaire_id}}});case 3:A=P.sent,o()(A,"data.data")&&A.data.code==="200000"&&v.setState({pageNumber:1},()=>{v.funGetUserList()});case 5:case"end":return P.stop()}},p)}));return function(p){return i.apply(this,arguments)}}(),this.handleChangeTabs=i=>{var p=this.props.from,g=this.state.userList.filter(E=>E.user_info.id===i);this.setState({currentUserId:i,currentUser:g[0]},()=>{this.state.userStatus==="evaluated"&&p==="myEvaluate"?this.getMyEvaluateInfo(g[0]):p==="evaluateMy"&&this.getEvaluateMyInfo(g[0])})},this.handleChangeTypeTabs=i=>{this.setState({pageNumber:1,userStatus:i},()=>{this.funGetUserList()})},this.getMyEvaluateInfo=function(){var i=(0,Y.Z)(C().mark(function p(g){var E,A;return C().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return E=v.props.operateColumn,P.next=3,(0,L.K5)(E.id,{evaluate_id:E.evaluate_id||"",is_evaluated:!0,evaluate_object_id:g.user_id});case 3:A=P.sent,o()(A,"data.data")&&A.data.code==="200000"&&v.setState({evaluateDetail:A.data.data});case 5:case"end":return P.stop()}},p)}));return function(p){return i.apply(this,arguments)}}(),this.getEvaluateMyInfo=function(){var i=(0,Y.Z)(C().mark(function p(g){var E,A;return C().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return E=v.props.operateColumn,P.next=3,(0,L.RZ)(E.id,{type:"trainee",evaluate_id:E.evaluate_id,evaluate_user_id:g.user_id});case 3:A=P.sent,o()(A,"data.data")&&A.data.code==="200000"&&v.setState({evaluateDetail:A.data.data});case 5:case"end":return P.stop()}},p)}));return function(p){return i.apply(this,arguments)}}(),this.funGetUserList=()=>{var i=this.props.from;i==="myEvaluate"?this.funMyEvaluateUserList():this.getEvaluateMyUserList()},this.funMyEvaluateUserList=()=>{var i=this.props,p=i.operateColumn,g=i.operateColumn.id,E=this.state,A=E.userStatus,J=E.pageNumber,P=E.pageSize,se=O.ZP.lineClassStudy.getLecturerEvaluateUserList(g);y.WY.get({url:se,params:{page_number:J,page_size:P,user_status:A,is_evaluated:A==="evaluated",evaluate_id:p.evaluate_id||p.evaluate_rule_vo.evaluate_id,evaluate_type:p.evaluate_type}}).then(re=>{if(re.data.code==="200000"){var F=re.data.data.list;this.setState({userList:F,totalPages:re.data.data.pages||1,currentUserId:F.length?F[0].user_id:"",currentUser:F.length?F[0]:"",total:Number(re.data.data.total)},()=>{F.length&&A==="evaluated"&&this.getMyEvaluateInfo(this.state.currentUser),this.setState({hasNextPage:this.state.totalPages>J})})}})},this.getEvaluateMyUserList=()=>{var i=this.props.operateColumn,p=this.state,g=p.pageNumber,E=p.pageSize,A={evaluate_id:i.evaluate_id,lecturer_id:i.lecturer_id,page_number:g,page_size:E};(0,L._C)(i.id,A).then(J=>{if(J.data.code==="200000"){var P=J.data.data;if(!P.page_data)return;this.setState({userList:P.page_data.list||[],totalPages:P.page_data.pages||1,currentUserId:P.page_data.list.length?P.page_data.list[0].user_id:"",currentUser:P.page_data.list.length?P.page_data.list[0]:"",total:Number(P.page_data.total)},()=>{this.state.userList.length&&this.getEvaluateMyInfo(this.state.currentUser),this.setState({hasNextPage:this.state.totalPages>g})})}})},this.initRef=i=>{this.setState({formRef:i})},this.renderNameList=()=>{var i=this.state,p=i.userList,g=i.currentUserId,E=i.pageNumber,A=i.hasNextPage,J=this.props.prefixCls;return t().createElement("div",null,t().createElement($.Z,{tabPosition:"left",activeKey:g,className:"".concat(J,"__tab"),onChange:this.handleChangeTabs},p.map(P=>t().createElement(l,{key:P.user_info.id,tab:t().createElement(d.Z,{title:t().createElement(a.Z,{dataType:"userName",value:P.user_info.user_id,name:P.user_info.name,type:P.user_info.source_type})},t().createElement(a.Z,{dataType:"userName",value:P.user_info.user_id,name:P.user_info.name,type:P.user_info.source_type}))}))),t().createElement("div",{className:"name-list-page"},t().createElement(j.Z,{pageNumber:E,hasNextPage:A,onChangePage:P=>{this.onChangePage(P)}})))},this.renderContent=()=>{var i=this.state,p=i.currentUserId,g=i.userStatus,E=i.evaluateDetail.questionnaire_result_vo,A=this.props,J=A.from,P=A.operateColumn.evaluate_rule_vo.evaluate_vo.questionnaire_id;return g==="evaluateing"?t().createElement(t().Fragment,null,P?t().createElement(S.Z,{key:p,questionId:P,initRef:this.initRef,onSubmit:this.onSubmit}):null):g==="evaluated"||J==="evaluateMy"?t().createElement(t().Fragment,null,E?t().createElement(N.Z,{questionnaireInfo:E,isPreview:!0,setQuestionValue:()=>{}}):null):null},this.state={evaluateDetail:{},formRef:null,userList:[],total:0,pageNumber:1,hasNextPage:!1,pageSize:10,totalPages:0,userStatus:"",currentUserId:"",currentUser:null}}componentDidUpdate(u){u.visible!==this.props.visible&&this.props.visible&&this.setState({userStatus:this.props.from==="myEvaluate"?"evaluateing":"",pageNumber:1},()=>{this.funGetUserList()})}onChangePage(u){var v=this.state,i=v.pageNumber,p=v.totalPages;u==="prev"?this.setState({pageNumber:i-1},()=>{this.funGetUserList(),this.setState({hasNextPage:p>this.state.pageNumber})}):u==="next"&&this.setState({pageNumber:i+1},()=>{this.funGetUserList(),this.setState({hasNextPage:p>this.state.pageNumber})})}render(){var u=this.state,v=u.userList,i=u.userStatus,p=u.total,g=this.props,E=g.prefixCls,A=g.t,J=g.visible,P=g.title,se=g.from,re={okText:A("common.submit"),cancelText:A("common.cancel"),size:"large",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};(i==="evaluated"||!v.length||se==="evaluateMy")&&(re=(0,c.Z)((0,c.Z)({},re),{},{footer:null}));var F=[{type:"evaluateing",title:A("evaluation.noEvaluated")},{type:"evaluated",title:A("lineClassStudy.hadEvaluate")}];return t().createElement(M.ZP,(0,B.Z)({},re,{title:"".concat(P," (").concat(p,")"),visible:J,onCancel:this.onCancel,onOk:this.onOk}),t().createElement("div",{className:E},se==="myEvaluate"?t().createElement($.Z,{activeKey:i,onChange:this.handleChangeTypeTabs,className:"".concat(E,"__tab-type")},F.map(ee=>t().createElement(l,{tab:ee.title,key:ee.type}))):null,t().createElement("div",{className:"".concat(E,"_container")},v.length?t().createElement(t().Fragment,null,t().createElement("div",{className:"name-list"},this.renderNameList()),t().createElement("div",{className:"form-wrap",style:{"padding-left":"32px"}},this.renderContent())):t().createElement(s.Z,{tipText:A("lineClassStudy.noResult")}))))}}n.defaultProps={prefixCls:"input-score",title:"",from:""},q.Z=(0,D.Z)()(n)},72358:function(le,q,e){"use strict";e.d(q,{g3:function(){return G},hR:function(){return d},ZQ:function(){return Y},HM:function(){return w},RZ:function(){return $},K5:function(){return I},az:function(){return C},_C:function(){return h},p_:function(){return t}});var B=e(37055),c=e(10237);function G(D){return c.WY.get({url:B.ZP.lineClassStudy.getMyEvaluate(),params:D})}function d(D,_){return c.WY.post({url:B.ZP.lineClassStudy.evaluateSubmit(D),data:_})}function Y(D,_){return c.WY.post({url:B.ZP.lineClassStudy.scoreSubmit(D),data:_})}function w(D,_){return c.WY.post({url:B.ZP.lineClassStudy.approvalSubmit(D),data:_})}function $(D,_){return c.WY.get({url:B.ZP.lineClassStudy.getEvaluateMyInfo(D),params:_})}function I(D,_){return c.WY.get({url:B.ZP.lineClassStudy.getMyEvaluateInfo(D),params:_})}function C(D,_){return c.WY.get({url:B.ZP.lineClassStudy.getMyEvaluateInfoManage(D),params:_})}function h(D,_){return c.WY.get({url:B.ZP.lineClassStudy.userEvaluateLecturerList(D),params:_})}function t(D){return c.WY.get({url:B.ZP.lineClassStudy.getEvaluateCount(),params:D})}},17676:function(le,q,e){"use strict";e.d(q,{E6:function(){return d},h$:function(){return Y},_v:function(){return w},R9:function(){return $},wq:function(){return C},BV:function(){return h},Np:function(){return t},af:function(){return o},RX:function(){return L},WF:function(){return j},gm:function(){return S}});var B=e(88986),c=e(37055),G=e(10237);function d(M){return G.WY.get({url:c.ZP.lineClassStudy.signCourses(),params:M})}function Y(M){return G.WY.get({url:c.ZP.lineClassStudy.signCoursesCount(),params:M})}function w(M){return G.WY.get({url:c.ZP.lineClassStudy.teachingsList(),params:M})}function $(M){return G.WY.get({url:c.ZP.lineClassStudy.teachingCoursesCount(),params:M})}function I(M){return request.get({url:CONFIG.lineClass.getOfflineCourseSignAnalysis(M)})}function C(M,s){return G.WY.post({url:c.ZP.lineClass.updateOfflineCourseSetting(),data:(0,B.Z)({courseId:M,enterpriseId:localStorage.getItem("enterpriseId")},s)})}function h(M){return G.WY.get({url:c.ZP.lineClass.getOfflineCourseSetting(),params:{courseId:M,enterpriseId:localStorage.getItem("enterpriseId")}})}function t(M){return G.WY.post({url:c.ZP.lineClassStudy.lecturerRefuse(M)})}function D(M){return request.get({url:CONFIG.lineClassStudy.approvalsList(),params:M})}function _(){return request.get({url:CONFIG.lineClassStudy.approvalCoursesCount()})}function o(M){return G.WY.post({url:c.ZP.lineClassStudy.resouceAdd(),data:M})}function L(M){return G.WY.get({url:c.ZP.lineClassStudy.getResource(),params:M})}function j(M){return G.WY.get({url:c.ZP.lineClassStudy.getLineCourse(),params:M})}function S(M){return G.WY.get({url:c.ZP.lineClassStudy.getStuAttendanceInfo(M),params:{}})}},7908:function(le,q,e){"use strict";var B=e(62029),c=e(34792),G=e(48086),d=e(12924),Y=e.n(d),w=e(91768),$=e(18329),I=e(6793),C=e(80991),h=e(63273),t={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20,offset:0},sm:{span:20,offset:0}}};class D extends Y().Component{constructor(o){super(o);this.onCancel=()=>{var L=this.props.onCancel;L()},this.onOk=()=>{this.state.formRef.submitForm()},this.onSubmit=L=>{var j=this.props,S=j.t,M=j.onUploadComplete;L.attachment&&L.attachment.length?M(L.attachment):G.default.warning(S("lineClassStudy.chooseAttachment"))},this.initRef=L=>{this.setState({formRef:L})},this.state={formRef:null,maxCount:10}}render(){var o=this.props,L=o.t,j=o.visible,S=o.prefixCls,M=o.initData,s=this.state.maxCount,N={okText:L("common.submit"),cancelText:L("common.cancel"),size:"medium",destroyOnClose:!0,bodyStyle:{padding:"0"},maskClosable:!1};return Y().createElement($.ZP,(0,B.Z)({},N,{title:L("lineClassStudy.uploadDatum"),visible:j,onCancel:this.onCancel,onOk:this.onOk}),Y().createElement("div",{className:S},j?Y().createElement(C.J9,{ref:this.initRef,initialValues:M,onSubmit:this.onSubmit,render:()=>Y().createElement(C.l0,null,Y().createElement(C.gN,(0,B.Z)({name:"attachment",canSelectCourse:!1,notLibrary:!0,maxFilesCount:s,uploadTips:"".concat((0,I.ZT)("".concat(L("lineClassStudy.uploadTip")),s),", ").concat(L("lineClassStudy.imgSizeError")),uploadComponentId:"aea320ed-12d8-40ee-9c26-bf6151db3423",label:L("component.practiceAttachment"),component:h.Pg,displayType:"Custom",removeable:!0},t)))}):null))}}D.defaultProps={prefixCls:"upload-datum-dialog"},q.Z=(0,w.Z)()(D)},17381:function(le,q,e){"use strict";e.d(q,{Xs:function(){return d},fV:function(){return Y},_w:function(){return w},G5:function(){return $},g2:function(){return I},uy:function(){return C},il:function(){return h},y2:function(){return t},$k:function(){return _},gm:function(){return L},C:function(){return j},Wl:function(){return S},ZS:function(){return M},XZ:function(){return s},LI:function(){return N},fR:function(){return y},Pt:function(){return a}});var B=e(37055),c=e(10237),G=e(5430);function d(n){var r=n.login_mobile,u=n.verification_code,v=n.password,i=n.encrypt,p=B.ZP.Login.clResetPassword();return c.WY.post({url:p,data:{login_mobile:r,verification_code:u,password:v,encrypt:i}})}function Y(){var n=B.ZP.points.getPointsCategory();return c.WY.get({url:n})}function w(n){var r=n.login_mobile,u=n.verification_code,v=n.password,i=n.encrypt,p=B.ZP.Login.bindUserAccount();return c.WY.post({url:p,data:{login_mobile:r,verification_code:u,password:v,encrypt:i}})}function $(n){var r=n.action_type,u=n.login_mobile,v=B.ZP.Login.bindSendVerification();return c.WY.post({url:v,data:{action_type:r,login_mobile:u}})}function I(n){var r=n.action_type,u=n.login_mobile,v=n.enterpriseId,i=B.ZP.Login.clSendVerification();return c.WY.post({url:i,data:{action_type:r,login_mobile:u,enterprise_id:v}})}function C(n){var r=B.ZP.advancedSetting.identityQuery();return c.WY.get({url:r,params:n})}function h(n){var r=B.ZP.advancedSetting.saveIdentity();return c.WY.post({url:r,data:n})}function t(n){var r=B.ZP.advancedSetting.isShowAuth();return c.WY.get({url:r,data:n})}function D(n){return request.get({url:CONFIG.lineClass.getOfflineCourseBasicById(n)})}function _(n){return c.WY.get({url:B.ZP.lineClassStudy.coursesInfo(n)})}function o(n,r){return request.get({url:CONFIG.lineClassStudy.getAttendanceInfo(n),params:{type:r}})}function L(n){return c.WY.get({url:B.ZP.lineClassStudy.getStuAttendanceInfo(n),params:{}})}function j(n){var r=B.ZP.learn.getShowLearnStatus(n);return c.WY.get({url:r})}function S(n){var r=n.examId,u=n.taskId,v=G.OB.examData.examTaskInfo(r);return c.WY.get({url:v,params:{task_id:u}})}function M(n){var r=G.OB.examData.getExamsTaskList();return c.WY.get({url:r,params:n})}function s(n,r){var u=G.OB.examData.checkStatus(n);return c.WY.get({url:u,params:{task_id:r}})}function N(){var n=B.ZP.lineClass.whetherLecture();return c.WY.get({url:n})}function O(){var n=TRAINING_PROJECT_LIST.personal.list();return request.get({url:n})}function y(n){var r=n.startTime,u=n.endTime,v=n.excludeSelf,i=v===void 0?!1:v,p=n.pageNumber,g=n.pageSize,E=B.ZP.Personal.exportMyScore();return c.WY.get({url:E,params:{startTime:r,endTime:u,excludeSelf:i,pageNumber:p,pageSize:g}})}function a(n,r){var u=r.begin_time,v=r.end_time,i=r.page_number,p=r.page_size,g=r.integral_type,E=B.ZP.points.getUserPointsDetail(n);return c.WY.get({url:E,params:{begin_time:u,end_time:v,page_number:i,page_size:p,integral_type:g}})}function l(n){var r=n.integral_type,u=n.update_reason,v=n.begin_time,i=n.end_time,p=CONFIG.points.exportPointsDetail();return request.post({url:p,params:{integral_type:r,update_reason:u,begin_time:v,end_time:i}})}},50603:function(le,q,e){"use strict";e.d(q,{Z:function(){return ne}});var B=e(57663),c=e(71577),G=e(12924),d=e.n(G),Y=e(91768),w=e(80991),$=e(88983),I=e(47933),C=e(47673),h=e(4107),t=e(88986);class D extends d().Component{constructor(){super(...arguments);this.handleRadioChange=m=>{var K=this.props,f=K.formik,T=K.name,b=m.target,R=b.isOtherOption,H=R===void 0?!1:R,z=b.value;f.setFieldValue(T,(0,t.Z)((0,t.Z)({},f.values[T]),{},{solution:(0,t.Z)((0,t.Z)({},f.values[T].solution),{},{hasOtherOption:H,options:z})}))},this.handleInputChange=m=>{var K=this.props,f=K.formik,T=K.name;f.setFieldValue(T,(0,t.Z)((0,t.Z)({},f.values[T]),{},{solution:(0,t.Z)((0,t.Z)({},f.values[T].solution),{},{otherAnswer:m.target.value})}))}}render(){var m=this.props.defaultFieldList,K=m.options,f=m.solution;return d().createElement(I.ZP.Group,{onChange:this.handleRadioChange,value:f.options},K.map(T=>{var b=T.id,R=T.title,H=T.other;return H?d().createElement(I.ZP,{key:b,value:b,isOtherOption:!0},R,d().createElement(h.Z,{style:{marginLeft:10,width:210},value:f.otherAnswer,onChange:this.handleInputChange})):d().createElement(I.ZP,{key:b,value:b},R)}))}}var _=(0,w.$j)(D);class o extends d().Component{constructor(){super(...arguments);this.handleChange=m=>{var K=this.props,f=K.formik,T=K.name;f.setFieldValue(T,(0,t.Z)((0,t.Z)({},f.values[T]),{},{solution:(0,t.Z)((0,t.Z)({},f.values[T].solution),{},{options:m.target.value})}))}}render(){var m=this.props.defaultFieldList.solution;return d().createElement(h.Z,{value:m.options,onChange:this.handleChange})}}var L=(0,w.$j)(o);class j extends d().Component{constructor(){super(...arguments);this.handleChange=m=>{var K=this.props,f=K.formik,T=K.name;f.setFieldValue(T,(0,t.Z)((0,t.Z)({},f.values[T]),{},{solution:(0,t.Z)((0,t.Z)({},f.values[T].solution),{},{options:m.target.value})}))}}render(){var m=this.props.defaultFieldList.solution;return d().createElement(h.Z.TextArea,{value:m.options,onChange:this.handleChange})}}var S=(0,w.$j)(j),M=e(96433),s=e(33304),N=e(22385),O=e(31097),y=e(17264),a=e.n(y),l=h.Z.TextArea;class n extends d().Component{constructor(){super(...arguments);this.handleChange=(m,K)=>{var f=this.props,T=f.formik,b=f.name;T.setFieldValue(b,(0,t.Z)((0,t.Z)({},T.values[b]),{},{solution:(0,t.Z)((0,t.Z)({},T.values[b].solution),{},{[K]:m})}))}}render(){var m=this.props.defaultFieldList,K=m.solution,f=m.options,T=K.options?parseInt(K.options):0,b=this.props,R=b.question,H=R.instruction,z=R.instruction_must,Q=R.must,ie=b.t;return d().createElement("div",null,d().createElement("div",{className:a()["score-box"]},d().createElement(O.Z,{title:f[0].title},d().createElement("div",{className:a()["score-title"]},f[0].title)),d().createElement("div",{className:a()["score-rate"]},d().createElement(s.Z,{value:T,count:f.length,onChange:ae=>{this.handleChange(ae,"options")},tooltips:f.map(ae=>ae.title)})),d().createElement(O.Z,{title:f[f.length-1].title},d().createElement("div",{className:a()["score-title"]},f[f.length-1].title))),H&&d().createElement(l,{rows:5,maxLength:300,onChange:ae=>{this.handleChange(ae.target.value,"instruction_content")},placeholder:"".concat(ie("learning.scoringExplanation")).concat(Q&&z?"\uFF08".concat(ie("learning.required"),"\uFF09"):"")}))}}var r=(0,Y.Z)()((0,w.$j)(n)),u=e(63185),v=e(9676);class i extends d().Component{constructor(){super(...arguments);this.handleCheckboxChange=m=>{var K=this.props,f=K.formik,T=K.name,b=f.values[T].options.find(H=>H.other),R=b?b.id:"";f.setFieldValue(T,(0,t.Z)((0,t.Z)({},f.values[T]),{},{solution:(0,t.Z)((0,t.Z)({},f.values[T].solution),{},{hasOtherOption:m.indexOf(R)>-1,options:m.join(",")})}))},this.handleInputChange=m=>{var K=this.props,f=K.formik,T=K.name;f.setFieldValue(T,(0,t.Z)((0,t.Z)({},f.values[T]),{},{solution:(0,t.Z)((0,t.Z)({},f.values[T].solution),{},{otherAnswer:m.target.value})}))}}render(){var m=this.props.defaultFieldList,K=m.options,f=m.solution,T=[];return K.map(b=>{var R=b.id,H=b.title,z=b.other,Q=z===void 0?!1:z,ie=Q?d().createElement(d().Fragment,null,H,d().createElement(h.Z,{style:{marginLeft:10,width:210},value:f.otherAnswer,onChange:this.handleInputChange})):H;T.push({label:ie,value:R,other:Q})}),d().createElement(v.Z.Group,{options:T,value:f.options.split(","),onChange:this.handleCheckboxChange})}}var p=(0,w.$j)(i),g=e(43859),E=(0,g.Z)(_),A=(0,g.Z)(L),J=(0,g.Z)(S),P=(0,g.Z)(r),se=(0,g.Z)(p),re=e(3407),F=e(6793),ee=(0,F.me)(),Z=re.Z[ee].learning.validation,U=k=>{var m,K=k.solution,f=k.isRequired,T=k.instruction,b=k.instruction_must,R=k.type,H=K.hasOtherOption,z=K.options,Q=K.otherAnswer,ie=K.instruction_content;return f&&((!z.toString().length||H&&!Q)&&(m=Z.participateInInvestigate),R==="score"&&T&&b&&!ie&&(m=Z.participateInInvestigate)),m},V=e(19256),X=e.n(V);class W extends d().Component{constructor(){super(...arguments);this.handlePropsSubmit=()=>{var m=this.props.handleSubmit;m()},this.renderFooter=()=>{var m=this.props,K=m.isSubmitting,f=K===void 0?!1:K,T=m.onCancel,b=m.t;return d().createElement("footer",{className:"cl-form-fixed-footer"},d().createElement("div",{className:"cl-form-fixed-footer__container"},d().createElement(c.Z,{onClick:T},b("common.cancel")),d().createElement(c.Z,{type:"primary",loading:f,onClick:this.handlePropsSubmit},b("common.submit"))))},this.renderContent=()=>{var m=this.props,K=m.questions,f=m.title,T=m.description;return d().createElement(w.l0,{className:"cl-form"},d().createElement("h1",{className:"cl-form-htitle"},f),d().createElement("h4",{className:X().investigatesDesc},T),K.map(b=>this.renderField(b)))},this.renderField=m=>{var K=this.props,f=K.values,T=K.t,b="".concat(m.type,"_").concat(m.id),R=f[b],H=R.type,z=R.isRequired,Q;switch(H){case"single":Q=E;break;case"multiple":Q=se;break;case"input":Q=A;break;case"textarea":Q=J;break;case"score":Q=P;break;default:Q=null;break}if(!Q)return null;var ie=m.type==="single"?"\u3010".concat(T("learning.questionnaireAddToolSingle"),"\u3011"):m.type==="multiple"?"\u3010".concat(T("learning.questionnaireAddToolMul"),"\u3011"):"",ae="".concat(ie).concat(m.title);return d().createElement(w.gN,{key:b,component:Q,label:ae,required:z,displayType:"Custom",name:b,defaultFieldList:R,validate:U,question:m})}}render(){var m=this.props.showFooter;return d().createElement(d().Fragment,null,m?this.renderFooter():null,this.renderContent())}}W.defaultProps={showFooter:!0};var ne=(0,Y.Z)()(W)},44970:function(le,q,e){"use strict";var B=e(49111),c=e(19650),G=e(96433),d=e(33304),Y=e(22385),w=e(31097),$=e(88983),I=e(47933),C=e(63185),h=e(9676),t=e(47673),D=e(4107),_=e(12924),o=e.n(_),L=e(91768),j=D.Z.TextArea;class S extends o().Component{constructor(){super(...arguments);this.setQuestionValue=(s,N)=>{this.props.setQuestionValue(s,N)},this.renderQuestionItem=(s,N)=>{var O=!1,y=this.props,a=y.isPreview,l=y.t;return(s.type==="single"||s.type==="multiple")&&(O=s.options.find(n=>n.is_other==="true")),o().createElement("div",{key:N,className:"questionnaire-view-question"},o().createElement("div",{className:"questionnaire-view-question-title"},s.is_must==="true"?o().createElement("span",{className:"question-must-icon"},"*"):null,s.type==="single"?"\u3010".concat(l("learning.questionnaireAddToolSingle"),"\u3011"):s.type==="multiple"?"\u3010".concat(l("learning.questionnaireAddToolMul"),"\u3011"):null,s.title),s.type==="multiple"?o().createElement("div",{className:"questionnaire-view-question-option"},s.options.map((n,r)=>n.is_other==="true"?null:a?o().createElement(h.Z,{checked:s.answer.normal.indexOf(n.id)!==-1,disabled:a,key:r,className:"option-item"},o().createElement("span",{style:{whiteSpace:"normal",wordBreak:"break-all"}},n.title)):o().createElement(h.Z,{key:r,className:"option-item"},o().createElement("span",{style:{whiteSpace:"normal",wordBreak:"break-all"}},n.title))),O?a?o().createElement(h.Z,{disabled:a,checked:!!s.answer.other,className:"option-item"},l("learning.questionnaireAddQusOptionOther"),s.answer.other?o().createElement(D.Z,{value:s.answer.other,disabled:a,className:"other-input"}):o().createElement(D.Z,{disabled:a,className:"other-input"})):o().createElement(h.Z,{className:"option-item"},l("learning.questionnaireAddQusOptionOther"),o().createElement(D.Z,{className:"other-input"})):null):null,s.type==="single"?o().createElement("div",{className:"questionnaire-view-question-option"},s.options.map((n,r)=>n.is_other==="true"?null:a?o().createElement(I.ZP,{disabled:a,key:r,checked:s.answer.normal.indexOf(n.id)!==-1,className:"option-item"},o().createElement("span",{style:{whiteSpace:"normal",wordBreak:"break-all"}},n.title)):o().createElement(I.ZP,{key:r,checked:r===s.value,onClick:()=>this.setQuestionValue(N,r),className:"option-item"},o().createElement("span",{style:{whiteSpace:"normal",wordBreak:"break-all"}},n.title))),O?a?o().createElement(I.ZP,{disabled:a,checked:!!s.answer.other,className:"option-item"},l("learning.questionnaireAddQusOptionOther"),s.answer.other?o().createElement(D.Z,{value:s.answer.other,disabled:a,className:"other-input"}):o().createElement(D.Z,{disabled:a,className:"other-input"})):o().createElement(I.ZP,{checked:s.value===-1,onClick:()=>this.setQuestionValue(N,-1),className:"option-item"},l("learning.questionnaireAddQusOptionOther"),o().createElement(D.Z,{className:"other-input"})):null):null,s.type==="score"?o().createElement("div",{className:"questionnaire-view-question-score"},a?o().createElement(c.Z,{direction:"vertical"},o().createElement("div",{className:"questionnaire-view-question-score-box"},o().createElement(w.Z,{title:s.options[0].title},o().createElement("div",{className:"questionnaire-view-question-score-title"},s.options[0].title)),o().createElement("div",{className:"questionnaire-view-question-score-rate"},o().createElement(d.Z,{disabled:!0,value:s.answer.normal[0],tooltips:s.options.map((n,r)=>o().createElement("div",{className:"questionnaire-view-question-score-rate-tip",key:r.toString},o().createElement("div",{className:"ellipsis"},n.title),o().createElement("div",null,l("learning.score"),"\uFF1A",n.score))),count:s.options.length})),o().createElement(w.Z,{title:s.options[s.options.length-1].title},o().createElement("div",{className:"questionnaire-view-question-score-title"},s.options[s.options.length-1].title))),s.instruction==!0&&o().createElement(j,{disabled:!0,value:s.answer.instructionContent?s.answer.instructionContent:s.answer.instruction_content,className:"questionnaire-view-question-score-textarea",rows:4,placeholder:"".concat(l("learning.scoringExplanation")).concat(s.must&&s.instruction_must?"\uFF08".concat(l("learning.required"),"\uFF09"):""),maxLength:300})):o().createElement(c.Z,{direction:"vertical"},o().createElement("div",{className:"questionnaire-view-question-score-box"},o().createElement(w.Z,{title:s.options[0].title},o().createElement("div",{className:"questionnaire-view-question-score-title"},s.options[0].title)),o().createElement("div",{className:"questionnaire-view-question-score-rate"},o().createElement(d.Z,{tooltips:s.options.map((n,r)=>o().createElement("div",{className:"questionnaire-view-question-score-rate-tip",key:r.toString},o().createElement("div",null,n.title),o().createElement("div",null,l("learning.score"),"\uFF1A",n.score))),count:s.options.length})),o().createElement(w.Z,{title:s.options[s.options.length-1].title},o().createElement("div",{className:"questionnaire-view-question-score-title"},s.options[s.options.length-1].title))),s.instruction==!0&&o().createElement(j,{className:"questionnaire-view-question-score-textarea",rows:4,placeholder:"".concat(l("learning.scoringExplanation")).concat(s.instruction_must?"\uFF08".concat(l("learning.required"),"\uFF09"):""),maxLength:300}))):null,s.type==="input"?o().createElement("div",{className:"questionnaire-view-question-input"},s.is_multiple_rows==="1"||s.is_multiple_rows==="true"?o().createElement(j,{rows:3,value:a?s.answer.normal[0]:"",disabled:a}):o().createElement(D.Z,{value:a?s.answer.normal[0]:"",disabled:a})):null)}}render(){var s=this.props.questionnaireInfo;return o().createElement("div",null,o().createElement("div",{className:"questionnaire-view-title"},s.title),o().createElement("div",{className:"questionnaire-view-desc"},s.description),o().createElement("div",{className:"questionnaire-view-list"},s.questions.map((N,O)=>this.renderQuestionItem(N,O))))}}q.Z=(0,L.Z)()(S)},64462:function(le,q,e){"use strict";e.d(q,{K7:function(){return t},Vo:function(){return D},It:function(){return _}});var B=e(57361),c=e(34792),G=e(48086),d=e(9754),Y=e.n(d),w=e(37055),$=e(10237),I=e(60333),C=e(1164),h=e(38642);function t(S,M){(M==="end"||M==="remarking")&&(0,h.eJ)({url:"/course/enterpriseCourse?courseId=".concat(S)}),$.WY.get({url:w.ZP.EnterpriseCourse.getEnterpriseCourse(),params:{id:S}}).then(s=>{var N=s.data.live_status;N==="end"||N==="remarking"?(0,h.eJ)({url:"/course/enterpriseCourse?courseId=".concat(S)}):(0,I.uA)(S).then(O=>{var y=O.data;y.code===2e5?C.Z.targetTo({path:y.data.link,isExternalLink:!0}):G.default.error(y.message)}).catch(O=>{console.log(O)})}).catch(s=>{console.log(s)})}function D(S){(0,I.u0)(S).then(M=>{var s=M.data;s.code===2e5?window.open(s.data.link,"_blank"):G.default.error(s.message)}).catch(M=>{console.log(M)})}function _(S,M){return o.apply(this,arguments)}function o(){return o=(0,B.Z)(Y().mark(function S(M,s){var N;return Y().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:N=window.navigator.userAgent,N.includes("DingTalk")?$.WY.get({url:w.ZP.DdLive.getLiveDetail(),params:{courseId:M,appId:"cool"}}).then(a=>{var l=a.data;dd.biz.util.openLink({url:l.data.jumpUrl})}).catch(a=>{console.log(a)}):G.default.info(s("ddLive.ddInfo"));case 2:case"end":return y.stop()}},S)})),o.apply(this,arguments)}function L(){}function j(){}}}]);
