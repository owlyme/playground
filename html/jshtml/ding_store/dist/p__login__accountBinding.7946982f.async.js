(self.webpackChunkkuxueyuan_manage=self.webpackChunkkuxueyuan_manage||[]).push([[8113],{61934:function(x,_,r){"use strict";r.r(_);var C=r(13062),p=r(71230),l=r(89032),i=r(15746),g=r(62029),u=r(57663),h=r(71577),q=r(47673),d=r(4107),ee=r(34792),F=r(48086),re=r(9715),o=r(86585),L=r(33565),m=r(12924),t=r.n(m),V=r(91768),I=r(57068),c=r(76651),S=r(82318),A=r(24663),T=r(37055),B=r(10237),W={clSendVerification:T.ZP.Login.clSendVerification,clJoinEnterprise:T.ZP.Login.clJoinEnterprise};function N(w){var e=w.t,v=null,a=(0,S.X)(),z=o.Z.useForm(),$=(0,L.Z)(z,1),O=$[0],j=(0,m.useState)(""),R=(0,L.Z)(j,2),E=R[0],J=R[1],X=(0,m.useState)(e("registerLogin.getVerificationCode")),Z=(0,L.Z)(X,2),y=Z[0],K=Z[1],Y={labelCol:{span:5},wrapperCol:{span:16}};(0,m.useEffect)(()=>{a?document.getElementById("root").style.minWidth="1300px":document.getElementById("root").style.minWidth="100%"},[a]);var H=()=>{var s=I.parse(c.m8.location.search),n=s.enterprise_id,P=O.validateFields(["login_mobile"]);P.then(f=>{B.WY.post({url:W.clSendVerification(),data:{action_type:"join_enterprise",login_mobile:f.login_mobile,enterprise_id:n}}).then(D=>{var M=D.data,b=M.is_register,Q=M.result,k=M.is_join_enterprise;if(b==="true"&&k==="true"){F.default.success(e("registerLogin.mobileHasRegistered")),c.m8.push({pathname:"/account-bind-result"});return}Q==="true"&&(J(b==="true"),U(60))})})},G=s=>{var n=I.parse(c.m8.location.search),P=n.enterprise_id,f=n.department_id;return P&&(s.enterprise_id=P),f&&(s.department_id=f),!E&&s.password!==s.password_sure?O.setFields([{name:"password_sure",errors:[e("registerLogin.passwordsInconsistent")]}]):(s.password_sure&&delete s.password_sure,B.WY.post({url:W.clJoinEnterprise(),data:s}).then(D=>{D.data.result==="true"&&c.m8.push({pathname:"/account-bind-result"})}))},U=s=>{K("".concat(s," s")),clearTimeout(v),v=setTimeout(()=>{var n=s-1;s===1?(clearTimeout(v),K(e("registerLogin.getVerificationCode"))):U(n)},1e3)};return t().createElement("div",{className:a?"account-bind account-bind-pc":"account-bind account-bind-mobile"},t().createElement(p.Z,{className:"account-bind-content"},t().createElement(i.Z,{span:24},t().createElement("h3",{className:"bind-desc"},e("registerLogin.bindAccount")),t().createElement(o.Z,(0,g.Z)({layout:"horizontal"},Y,{form:O,name:"control",onFinish:G}),t().createElement(o.Z.Item,{name:"login_mobile",label:a?e("marketing.telPhone"):"",validateFirst:!0,rules:[{required:!0,message:e("registerLogin.phoneValidation")},{pattern:/^[0-9-]+$/,message:e("marketing.checkTel")},{max:16,message:e("registerLogin.phoneValidationTips")}]},t().createElement(d.Z,{size:a?"middle":"large",prefix:a?null:t().createElement("span",{className:"login-mo-some"},e("marketing.telPhone")),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",bordered:!1})),t().createElement(o.Z.Item,{label:a?e("registerLogin.verificationCode"):"",name:"verification_code",rules:[{required:!0,message:e("registerLogin.codeValidation")},{pattern:/^\d{6}$/,message:e("registerLogin.codeValidationTips")}]},t().createElement(d.Z,{size:a?"middle":"large",prefix:a?null:t().createElement("span",{className:"login-mo-some"},e("registerLogin.verificationCode")),suffix:t().createElement(h.Z,{className:"get_verification_code",type:"link",disabled:y!==e("registerLogin.getVerificationCode"),onClick:H},y),placeholder:e("registerLogin.inputVerificationCode")})),E!==""&&!E&&t().createElement(m.Fragment,null,t().createElement(o.Z.Item,{name:"user_name",label:a?e("common.userName"):"",validateFirst:!0,rules:[{required:!0,message:e("registerLogin.userNameValid")},{whitespace:!0,message:e("registerLogin.userNameValid")},{min:1,message:e("registerLogin.least1ValidCharacter")},{max:20,message:e("registerLogin.validCharacters20")},{pattern:/^[\u4E00-\u9FA5 A-Za-z]+$/,message:e("registerLogin.nameValidTips")}]},t().createElement(d.Z,{size:a?"middle":"large",prefix:a?null:t().createElement("span",{className:"login-mo-some"},e("common.userName")),placeholder:e("marketing.nameError"),maxLength:30})),t().createElement(o.Z.Item,{name:"password",label:a?e("lab.virtualPassword"):"",validateFirst:!0,rules:[{required:!0,message:e("registerLogin.passwordValidation")},{min:6,message:e("registerLogin.passwordLength6")},{max:20,message:e("registerLogin.passwordLength20")},{validator:(s,n)=>(0,A.u)(e,n)}]},t().createElement(d.Z.Password,{size:a?"middle":"large",prefix:a?null:t().createElement("span",{className:"login-mo-some"},e("lab.virtualPassword")),autoComplete:"new-password",placeholder:e("registerLogin.enterPassword")})),t().createElement(o.Z.Item,{name:"password_sure",label:a?e("registerLogin.confirmPassword"):"",validateFirst:!0,rules:[{required:!0,message:e("registerLogin.confirmPasswordValid")},{min:6,message:e("registerLogin.confirmPasswordLength6")},{max:20,message:e("registerLogin.confirmPasswordLength20")},{validator:(s,n)=>(0,A.u)(e,n)}]},t().createElement(d.Z.Password,{size:a?"middle":"large",prefix:a?null:t().createElement("span",{className:"login-mo-some"},e("registerLogin.confirmPassword")),placeholder:e("registerLogin.againEnterPassword")}))),t().createElement(o.Z.Item,{wrapperCol:{offset:a?5:0,span:16}},t().createElement(h.Z,{disabled:E==="",className:"account-bind-sure",size:a?"middle":"large",block:!0,type:"primary",htmlType:"submit"},e("localStorage.onSure")))))))}_.default=(0,V.Z)()(N)},82318:function(x,_,r){"use strict";r.d(_,{X:function(){return C},j:function(){return p}});var C=()=>{for(var l=navigator.userAgent,i=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],g=!0,u=0;u<i.length;u++)if(l.indexOf(i[u])>0){g=!1;break}return g},p=()=>{var l=navigator.userAgent,i=0;return l.indexOf("MicroMessenger")>0&&(i=1),l.indexOf("DingTalk")>0&&(i=2),i}}}]);
