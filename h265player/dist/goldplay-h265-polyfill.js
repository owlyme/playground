/*! GoldPlay built @2023/11/20 ‰∏ãÂçà7:43:46 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.GoldPlay=e():t.GoldPlay=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=170)}([function(t,e,n){var r=n(69);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(69);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(49);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(10).default,i=n(1);t.exports=function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(12),i=n(19),o=n(32),a=n(27),s=n(36),u=function(t,e,n){var l,c,f,h,d=t&u.F,p=t&u.G,v=t&u.S,y=t&u.P,g=t&u.B,m=p?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,b=p?i:i[e]||(i[e]={}),x=b.prototype||(b.prototype={});for(l in p&&(n=e),n)f=((c=!d&&m&&void 0!==m[l])?m:n)[l],h=g&&c?s(f,r):y&&"function"==typeof f?s(Function.call,f):f,m&&a(m,l,f,t&u.U),b[l]!=f&&o(b,l,h),y&&x[l]!=f&&(x[l]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return a}));var r={projectName:"GOLDPLAY",projectAbbreviation:"GP",mode:"production",basePath:"./",get distPath(){var t="";return("development"==this.mode||"test"==this.mode)&&(t="/dist/"),t},get libPath(){return this.distPath+"lib/"},hideBarBoxTime:300,speedList:[{name:"0.5X",value:.5},{name:"1.0X",value:1},{name:"1.5X",value:1.5},{name:"2.0X",value:2},{name:"3.0X",value:3}]},i={maxDuration:30,maxSize:1024e6,maxRetryCount:3},o=1/9e4,a={READYBUFFERLENGTH:1e3,MAXBUFFERLENGTH:5e3}},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(0),u=n.n(s),l=n(9),c=console||{};function f(t,e){if(c[t]){if(this.disabled||this.level<0)return;if("production"===l.c.mode&&("error"!==t||"warn"!==t))return;if(1===this.level&&["info"].includes(t))return;if(2===this.level&&["log","info"].includes(t))return;if(this.level>2&&"error"!==t)return;for(var n=(new Date).toLocaleString(),r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=["[32m".concat(e,"[39m")].concat(i,[n]);"error"!==t&&"warn"!==t||(a=[e].concat(i,[n])),"function"==typeof c[t]&&c[t].apply(c,a)}}var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,t),u()(this,"prefix",l.c.projectName),u()(this,"joiner",">"),u()(this,"left","["),u()(this,"right","]"),u()(this,"disabled",!1),u()(this,"level",0),Object.assign(this,n),"string"==typeof e?this.file=e:e&&e.constructor&&(this.file=e.constructor.name)}return a()(t,[{key:"setDisabled",value:function(t){this.disabled=t}},{key:"setLevel",value:function(t){this.level=t}}],[{key:"get",value:function(e,n){return new t(e,n)}}]),t}();["info","log","debug","warn","error"].forEach((function(t){h.prototype[t]=function(e,n){n=void 0===n?"":this.joiner+n;for(var r=this.left+e+n+this.right,i=this.left+this.prefix+" "+this.file+this.right+r,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];f.apply(this,[t,i].concat(a))}})),e.a=h},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(15);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(76)("wks"),i=n(52),o=n(12).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(38),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(94)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(13)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(14),i=n(135),o=n(47),a=Object.defineProperty;e.f=n(20)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return gt})),n.d(e,"c",(function(){return ct})),function(t){t.ERROR="ERROR",t.INFO="INFO",t.DATA="DATA",t.DEMUX_DATA="DEMUX_DATA",t.DONE="DONE"}(r||(r={}));var i=Object.create||function(t){var e=function(){};return e.prototype=t,new e},o=Object.keys||function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e);return e},a=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};let s,u=10;class l{constructor(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}static listenerCount(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)}emit(t,...e){var n,r,i,o,a,s,u="error"===t;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(u){if(arguments.length>1&&(n=arguments[1]),n instanceof Error)throw n;var l=new Error('Unhandled "error" event. ('+n+")");throw l.context=n,l}if(!(r=s[t]))return!1;var c="function"==typeof r;switch(i=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=v(t,r),o=0;o<r;++o)try{i[o].call(n)}catch(t){console.error(t)}}(r,c,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=v(t,i),a=0;a<i;++a)try{o[a].call(n,r)}catch(t){console.error(t)}}(r,c,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=v(t,o),s=0;s<o;++s)try{a[s].call(n,r,i)}catch(t){console.error(t)}}(r,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,s=v(t,a),u=0;u<a;++u)try{s[u].call(n,r,i,o)}catch(t){console.error(t)}}(r,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),a=1;a<i;a++)o[a-1]=arguments[a];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=v(t,i),a=0;a<i;++a)try{o[a].apply(n,r)}catch(t){console.error(t)}}(r,c,this,o)}return!0}on(t,e){return function(t,e,n){var r,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');(o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]):(o=t._events=i(null),t._eventsCount=0);if(a){if("function"==typeof a?a=o[e]=[a,n]:a.push(n),!a.warned&&(r=void 0===(s=t)._maxListeners?l.defaultMaxListeners:s._maxListeners)&&r>0&&a.length>r){a.warned=!0;class n extends Error{}let r=new n("Possible Dispatcher memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');r.name="MaxListenersExceededWarning",r.emitter=t,r.type=e,r.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",r.name,r.message)}}else a=o[e]=n,++t._eventsCount;var s;return t}(this,t,e)}once(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,function(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=a.call(h,r);return i.listener=n,r.wrapFn=i,i}(this,t,e)),this}off(t,e){return f.call(this,t,e)}removeAllListeners(t){var e,n,r;if(!(n=this._events))return this;if(!n.off)return 0===arguments.length?(this._events=i(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=i(null):delete n[t]),this;if(0===arguments.length){var a,s=o(n);for(r=0;r<s.length;++r)"off"!==(a=s[r])&&this.removeAllListeners(a);return this.removeAllListeners("off"),this._events=i(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.off(t,e);else if(e)for(r=e.length-1;r>=0;r--)this.off(t,e[r]);return this}listeners(t){return d(this,t,!0)}rawListeners(t){return d(this,t,!1)}listenerCount(){return l.listenerCount.apply(this,arguments)}}try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),s=0===c.x}catch(t){s=!1}function f(t,e){var n,r,o,a,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=i(null):(delete r[t],r.off&&this.emit("off",t,n.listener||e));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){s=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),r.off&&this.emit("off",t,s||e)}return this}function h(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function d(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):v(i,i.length):[]}function p(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}s?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):l.defaultMaxListeners=u;class y extends l{}var g=Object.prototype.toString;function m(t){return!!t&&"object"==typeof t}function b(t){return"number"==typeof t&&!isNaN(t)}function x(t){return m(t)&&"[object arraybuffer]"===g.call(t).toLowerCase()}class k{constructor(){this.list_=[]}get byteLength(){if(!b(this.byteLength_)){let t=0;for(let e,n=0;n<this.list_.length;n++)e=this.list_[n],t+=e.byteLength;this.byteLength_=t}return this.byteLength_}get bytes(){const{bufferList:t}=this;let e=null;return t.length>0&&(e=0===t.length?t[0]:this.toNewBytes()),e}get empty(){return 0===this.list_.length}get bufferList(){return this.list_}clear(){let t=this.list_.length;t>0&&this.list_.splice(0,t),this.byteLength_=null}toNewBytes(){let t=null,e=0;for(;null===t;)try{e++,t=new Uint8Array(this.byteLength)}catch(t){if(e>50)throw t}for(let e=0,n=0;e<this.list_.length;e++){let r=this.list_[e];t.set(r,n),n+=r.byteLength}return t}append(t){t instanceof k?this.list_=this.list_.concat(t.bufferList):this.list_.push(t),this.byteLength_=null}cut(t,e=!0){let n=null;if(t>0&&!this.empty){let r=this.list_,i=0,o=0;for(;r.length>0;){let a=r.shift();if(0!==o){let o=t-i;if(a.byteLength>=o){e&&n.set(a.subarray(0,o),i),a=a.subarray(o),a.byteLength>0&&r.unshift(a);break}e&&n.set(a,i),i+=a.byteLength;break}if(a.byteLength>=t){e&&(n=a.subarray(0,t)),a.byteLength>t&&(a=a.subarray(t),r.unshift(a));break}if(e){try{n=new Uint8Array(t)}catch(e){throw`alloc_memory_error@ cache buffer: ${t} ${e.message}`}n.set(a,0)}i+=a.byteLength,o++}this.byteLength_=null}return n}}class w{constructor(){this.map_={}}push(t,e){Object.prototype.hasOwnProperty.call(this.map_,t)?this.map_[t].push(e):this.map_[t]=[e]}get(t){let e=this.map_[t];return e?e.slice():null}getAll(){let t=[];for(let e in this.map_)t.push.apply(t,this.map_[e]);return t}remove(t,e){let n=this.map_[t];if(n)for(let t=0;t<n.length;++t)n[t]==e&&(n.splice(t,1),--t)}clear(){this.map_={}}forEach(t){for(let e in this.map_)t(e,this.map_[e])}}class P{constructor(t,e,n){this.target=t,this.type=e,this.listener=n,this.target.addEventListener?this.target.addEventListener(e,n,!1):this.target.on&&this.target.on(e,n,!1)}off(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}}class _{constructor(){this.bindingMap_=new w}destroy(){this.removeAll(),this.bindingMap_=null}on(t,e,n){if(!this.bindingMap_)return;let r=new P(t,e,n);return this.bindingMap_.push(e,r),this}once(t,e,n){this.on(t,e,function(r){this.off(t,e),n(r)}.bind(this))}off(t,e){if(!this.bindingMap_)return;let n=this.bindingMap_.get(e)||[];for(let r=0;r<n.length;++r){let i=n[r];i.target==t&&(i.off(),this.bindingMap_.remove(e,i))}}removeAll(){if(!this.bindingMap_)return;let t=this.bindingMap_.getAll();for(let e=0;e<t.length;++e)t[e].off();this.bindingMap_.clear()}}let S;S="undefined"==typeof window?self:window;let B=S.console;const E="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof importScripts;let T=new class extends l{constructor(){super(),this._enable=!1}get enable(){return this._enable}set enable(t){this._enable=t,this.MSG_NAME="__log__"}log(...t){E?T.emit(this.MSG_NAME,"log",[...t].join("")):this._enable&&B.log.call(B,">>>",...t)}debug(...t){E?T.emit(this.MSG_NAME,"debug",[...t].join("")):this._enable&&B.debug&&B.debug.call(B,">>>",...t)}assert(...t){if(this._enable&&B.assert){let e=t[0],n=Array.prototype.slice.call(t,1);n.unshift(">>>"),B.assert.call(B,e,...n)}}warn(...t){E?T.emit(this.MSG_NAME,"warn",[...t].join("")):this._enable&&B.warn.call(B,">>>",...t)}error(...t){E?T.emit(this.MSG_NAME,"error",[...t].join("")):this._enable&&B.error.call(B,">>>",...t)}};class R extends l{constructor(){super()}pipe(t){return this.on("reset",(function(){t.reset()})),this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),t}unpipe(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}push(t,e){this.emit("data",t)}flush(t){this.emit("done",t)}reset(){this.emit("reset")}}class L extends R{constructor(t={}){super(),t.debug&&(T.enable=!0),this.ctx_=new y,this.options_=t,this.cache_buffer_=new k}listenEndStream_(){this.eventManager_=new _,this.eventManager_.on(this.endStream,"data",t=>{this.emit(r.DEMUX_DATA,t)}).on(this.endStream,"done",t=>{this.emit(r.DONE,t)}).on(this.ctx_,"error",t=>{this.emit(r.ERROR,t)})}constraintPushData_(t){let e=null;return x(t)||m(n=t)&&"[object uint8array]"===g.call(n).toLowerCase()?(e=x(t)?new Uint8Array(t):t,e):(T.error("Data pushed is not an ArrayBuffer or Uint8Array: "+t),e);var n}reset(){}destroy(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll()}}var A;!function(t){t[t.WORKER_EXCEPTION=0]="WORKER_EXCEPTION",t[t.WORKER_MSG_EXCEPTION=1]="WORKER_MSG_EXCEPTION",t[t.TS_SYNC_BYTE=2]="TS_SYNC_BYTE",t[t.FLV_HEAD_SIGNATURE=3]="FLV_HEAD_SIGNATURE",t[t.FLV_NOT_EXPECTED_ADJACENT_DATA=4]="FLV_NOT_EXPECTED_ADJACENT_DATA"}(A||(A={}));var C=A;class D{constructor(t){var e,n=0,r=((15&t[1])<<8|t[2])-4-5;for(this.pmtTable=[];n<r;n+=4)if(0==(e=t[n+8]<<8|t[n+9])){let e=(31&t[10+n])<<8|t[11+n];T.log("packet->network_PID %0x /n/n",e)}else this.pmtTable.push({programNum:e,program_map_PID:(31&t[10+n])<<8|t[11+n]})}}class O{constructor(t){let e=(15&t[1])<<8|t[2];const n=(15&t[10])<<8|t[11];if(n<0)return;if(n>2){let e=0;for(;e<n;){e+=t[13+e]}}var r=12+n,i=e-n-9-4,o=r+i;if(r>=o)return void T.warn(`es_section_pos < es_section_end ${r}, ${o}`);this.pes_table=[];let a=0;for(;a<i;){let e=r+a,n=t[e],i=8191&(t[e+1]<<8|t[e+2]),o=4095&(t[e+3]<<8|t[e+4]);this.pes_table.push({streamType:n,PID:i}),a+=o+5}}}class M{constructor(){this.pat_table=[],this.pes_streams=[]}get currentProgramPID(){let t=[];for(let e=0;e<this.pat_table.length;e++)t.push(this.pat_table[e].pid);return t.length>0?t[0]:-1}get tracks(){return this.pes_streams}reset(){this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}parse(t){0===t.PID?this._parsePat(t):1===t.PID||2===t.PID||3<=t.PID&&t.PID<=15||17===t.PID||t.PID===this.currentProgramPID&&this._parsePmt(t)}findTrack(t){let e=null,n=this.pes_streams;for(let r=0;r<n.length;r++)if(n[r].id===t){e=n[r];break}return e}_parsePat(t){let e;if(t.payload_unit_start_indicator){let n=t.payload[0];e=t.payload.subarray(n+1)}else e=t.payload;let n=new D(e);for(var r=0;r<n.pmtTable.length;r++)this._add_pid_to_pmt(n.pmtTable[r].programNum,n.pmtTable[r].program_map_PID);return n}_add_pid_to_pmt(t,e){let n=this.pat_table;(function(t){for(let e,r=0;r<n.length;r++)if(e=n[r],e.id===t)return{idx:r,item:e};return null})(t)||n.push({id:t,pid:e})}_parsePmt(t){let e;if(t.payload_unit_start_indicator){let n=t.payload[0];e=t.payload.subarray(n+1)}else e=t.payload;let n=new O(e);for(var r=0;r<n.pes_table.length;r++)this._add_pes_stream(n.pes_table[r]);return n}_add_pes_stream(t){let e=this.pes_streams;(function(t){for(let n,r=0;r<e.length;r++)if(n=e[r],n.id===t)return{idx:r,item:n};return null})(t.PID)||e.push({id:t.PID,stream_type:t.streamType,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0})}}class U extends R{constructor(t,e){super(),this.context=t,this.PSI=e,this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}push(t){let e=t;for(let t,n=0;n<e.length;n++)switch(t=e[n],t.type){case"video":this._complexVideo(t);break;case"audio":this._complexAudio(t);break;case"caption":this._complexCaption(t)}}flush(){this.emit("done"),this._clearStream()}reset(){this._clearStream()}_clearStream(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}_complexVideo(t){let e=this.PSI.findTrack(t.trackId);e&&(e.type="video",e.gops=t,e.firstDTS=t[0][0].dts,e.firstPTS=t[0][0].pts,e.duration=Number.POSITIVE_INFINITY,this.videoTrack=e,this.emit("data",{videoTrack:this.videoTrack}))}_complexAudio(t){let e=this.PSI.findTrack(t.trackId);e&&(e.type="audio",e.frames=t,e.firstPTS=e.firstDTS=t[0].dts,e.duration=Number.POSITIVE_INFINITY,this.audioTrack=e,this.emit("data",{audioTrack:this.audioTrack}))}_complexCaption(){}}const N={mac:!1,iphone:!1,android:!1},I={version:!1,CHROME:!1,SAFARI:!1,FIREFOX:!1,IE11:!1,IE:!1,EDGE:!1,WECHAT:!1};let F=navigator.userAgent.toLowerCase();var j=/(edge)\/([\w.]+)/.exec(F)||/(opr)[/]([\w.]+)/.exec(F)||/(chrome)[ /]([\w.]+)/.exec(F)||/(firefox)[ /]([\w.]+)/.exec(F)||/(iemobile)[/]([\w.]+)/.exec(F)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(F)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(F)||/(webkit)[ /]([\w.]+)/.exec(F)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(F)||/(msie) ([\w.]+)/.exec(F)||F.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(F)||F.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(F)||[],H=/(ipad)/.exec(F)||/(ipod)/.exec(F)||/(windows phone)/.exec(F)||/(iphone)/.exec(F)||/(kindle)/.exec(F)||/(silk)/.exec(F)||/(android)/.exec(F)||/(win)/.exec(F)||/(mac)/.exec(F)||/(linux)/.exec(F)||/(cros)/.exec(F)||/(playbook)/.exec(F)||/(bb)/.exec(F)||/(blackberry)/.exec(F)||[],W={version:void 0},V={browser:j[5]||j[3]||j[1]||"",version:j[2]||j[4]||"0",versionNumber:j[4]||j[2]||"0",platform:H[0]||""};if(V.browser){W[V.browser]=!0;let t=V.versionNumber.split(".");W.version={major:parseInt(V.versionNumber,10),string:V.version},t.length>1&&(W.version.minor=parseInt(t[1],10)),t.length>2&&(W.version.build=parseInt(t[2],10))}I.version=W.version,I.CHROME=!!W.chrome,I.SAFARI=!!W.safari&&!I.CHROME,I.FIREFOX=!!W.firefox,I.IE11=/rv:11/.test(F),I.IE=!!W.msie||I.IE11,I.EDGE=!!W.edge,I.WECHAT=/(wechat)|(micromessenger)/.test(F),N.mac=!!V.platform.mac,N.iphone=!!V.platform.iphone,N.android=!!V.platform.android;var z=I,G=N;const X=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];const Y=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];class $ extends l{constructor(){super()}push(t){let e,n,r,i,o,{pts:a,dts:s,payload:u}=t,l=u,c=0,f=0;for(;c+5<l.length;){if(255!==l[c]||240!=(246&l[c+1])){c++;continue}if(n=2*(1&~l[c+1]),e=(3&l[c+3])<<11|l[c+4]<<3|(224&l[c+5])>>5,i=1024*(1+(3&l[c+6])),o=9e4*i/Y[(60&l[c+2])>>>2],r=c+e,l.byteLength<r)return;let t={pts:a+f*o,dts:s+f*o,sampleCount:i,audioObjectType:1+(l[c+2]>>>6&3),channelCount:(1&l[c+2])<<2|(192&l[c+3])>>>6,sampleRate:Y[(60&l[c+2])>>>2],samplingFrequencyIndex:(60&l[c+2])>>>2,sampleSize:16,data:l.subarray(c+7+n,r)};if(this.emit("frame",t),l.byteLength===r)return l=void 0,void this.emit("done");f++,l=l.subarray(r)}}}class q extends R{constructor(t){super(),this.PSI=t,this.trackId=null,this.codec=new $,this.codec.on("frame",t=>{this.frames.push(t),this.frames.byteLength+=t.data.byteLength,this.frames.trackId=this.trackId}),this._newFrames()}push(t){15===t.stream_type&&(this.trackId=t.pid,this.codec.push({dts:t.pes.DTS,pts:t.pes.PTS,payload:t.pes.data_byte}))}flush(){if(this.frames.length>0){let t=this.frames.length,e=this.frames[0],n=this.frames[t-1],r=n.sampleRate*n.sampleCount/9e4;this.frames.firstDTS=e.dts,this.frames.firstPTS=e.pts,this.frames.duration=1===t?r:r+(n.pts-e.pts),this._updateTrackMeta(e),this.emit("data",this.frames),this.reset(),this.emit("done")}}reset(){this.trackId=null,this._newFrames()}_newFrames(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0}_updateTrackMeta(t){let e=this.PSI.findTrack(this.trackId),n=((t,e,n)=>{let r,i,o=t;if(!(e>X.length-1))return z.FIREFOX?e>=6?(t=5,i=new Array(4),r=e-3):(t=2,i=new Array(2),r=e):G.android?(t=2,i=new Array(2),r=e):(t=5,i=new Array(4),e>=6?r=e-3:(1===n&&(t=2,i=new Array(2)),r=e)),i[0]=t<<3,i[0]|=(14&e)>>1,i[1]|=(1&e)<<7,i[1]|=n<<3,5===t&&(i[1]|=(14&r)>>1,i[2]=(1&r)<<7,i[2]|=8,i[3]=0),{config:i,sampleRate:X[e],channelCount:n,codec:"mp4a.40."+t,realCodec:"mp4a.40."+o};T.error("invalid sampling index:"+e)})(t.audioObjectType,t.samplingFrequencyIndex,t.channelCount);e.config=n.config,e.sampleRate=n.sampleRate,e.inputTimeScale=e.inputTimeScale||e.timescale,e.timescale=n.sampleRate,e.channelCount=n.channelCount,e.codec=n.codec,e.realCodec=n.realCodec,e.isAAC=!0}}function K(t){let e=0;return ArrayBuffer.isView(t)&&(e=t.byteOffset,t=t.buffer),new DataView(t,e)}class Q{constructor(){}readUint8(t,e){return K(t).getUint8(e)}readUint16(t,e,n=!1){return K(t).getUint16(e,n)}readUint32(t,e,n=!1){return K(t).getUint32(e,n)}}function Z(t,e=0,n=1){let r=0,i=0,o=0,a="",s=0;for(let o=e;o<e+n;o++)r=Math.floor(o/8),i=7-o%8,s=t[r]>>i&1,a+=s;return o=parseInt(a,2),o}function J(t,e=0){let n=[],r=8*t.byteLength,i=!1,o=0,a=0,s=0,u="";for(let u=e;u<r;u++)if(o=Math.floor(u/8),a=7-u%8,s=t[o]>>a&1,!i){if(0!==s){i=!0,e=u;break}n.push(0)}let l=n.length+1;for(let n=e;n<e+l;n++)o=Math.floor(n/8),a=7-n%8,s=t[o]>>a&1,u+=s;return{bitLength:n.length+l,value:parseInt(u,2)-1}}var tt={readUEV:J,readSEV:function(t,e=0){let n=J(t,e),r=n.value,i=Math.pow(-1,r+1)*Math.ceil(r/2);return{bitLength:n.bitLength,value:i}},readBit:Z,readByte:function(t,e=0){return Z(t,e,8)}};let et=0;function nt(t,e){let n,r=8,i=8;for(var o=0;o<e;o++)0!=i&&(n=tt.readUEV(t,et),et+=n.bitLength,i=(r+n.value+256)%256),r=t[o]}class rt extends Q{constructor(t){switch(super(),this.forbidden_zero_bit=t[0]>>7,this.ref_idc=t[0]>>5&3,this.unit_type=31&t[0],this.data=function(t){let e,n=t.byteLength,r=[],i=1,o=new Uint8Array(0);for(;i<n-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;e=n-r.length;try{o=new Uint8Array(e)}catch(t){throw"epsb alloc mem error "+e}let a=0;for(i=0;i<e;a++,i++)a===r[0]&&(a++,r.shift()),o[i]=t[a];return o}(t.subarray(1)),this.rawData=t,this.unit_type){case 1:break;case 2:case 3:case 4:case 5:break;case 7:this.sps=function(t){et=0;let e,n,r,i,o,a,s,u=t[0],l=t[1],c=t[2],f=t.subarray(3),h=0,d=[1,1],p=1,v=0,y=!0,g=tt.readUEV(f,et);if(et+=g.bitLength,100==u||110==u||122==u||244==u||44==u||83==u||86==u||118==u||128==u){let t=tt.readUEV(f,et);et+=t.bitLength,3==t.value&&(et+=1);let e=tt.readUEV(f,et);et+=e.bitLength;let n=tt.readUEV(f,et);if(et+=n.bitLength,et+=1,h=tt.readBit(f,et),et+=1,h)for(let e=0;e<(3!=t.value?8:12);e++){let t=tt.readBit(f,et);et+=1,t&&nt(f,e<6?16:64)}}let m=tt.readUEV(f,et);et+=m.bitLength;let b=tt.readUEV(f,et),x=b.value;if(et+=b.bitLength,0===x)e=tt.readUEV(f,et),et+=e.bitLength;else if(1===x){et+=1,n=tt.readSEV(f,et),et+=n.bitLength,r=tt.readSEV(f,et),et+=r.bitLength,i=tt.readUEV(f,et),et+=i.bitLength;for(let t,e=0;e<i.value;e++)t=tt.readSEV(f,et),et+=t.bitLength}let k=tt.readUEV(f,et);et+=k.bitLength,et+=1;let w=tt.readUEV(f,et);et+=w.bitLength;let P=tt.readUEV(f,et);et+=P.bitLength;let _=tt.readBit(f,et);et+=1,_||(et+=1),et+=1;let S=tt.readBit(f,et);et+=1;let B=0,E=0,T=0,R=0;if(S){let t=tt.readUEV(f,et);et+=t.bitLength,B=t.value;let e=tt.readUEV(f,et);et+=e.bitLength,E=e.value;let n=tt.readUEV(f,et);et+=n.bitLength,T=n.value;let r=tt.readUEV(f,et);et+=r.bitLength,R=r.value}let L=tt.readBit(f,et);if(et+=1,L){let t=tt.readBit(f,et);if(et+=1,t){const t=tt.readByte(f,et);switch(et+=8,t){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:{let t=tt.readByte(f,et);et+=8;let e=tt.readByte(f,et);et+=8;let n=tt.readByte(f,et);et+=8;let r=tt.readByte(f,et);et+=8,d=[t<<8|e,n<<8|r];break}}d&&(p=d[0]/d[1]),255===t&&(et+=16,et+=16)}let e=tt.readBit(f,et);et+=1,e&&(et+=1);let n=tt.readBit(f,et);if(et+=1,n){o=tt.readBit(f,et,3),et+=3,et+=1;let t=tt.readBit(f,et);et+=1,t&&(et+=24)}let r=tt.readBit(f,et);if(et+=1,r){let t=tt.readUEV(f,et);et+=t.bitLength;let e=tt.readUEV(f,et);et+=e.bitLength}let i=tt.readBit(f,et);et+=1,i&&(a=tt.readBit(f,et,32),et+=32,s=tt.readBit(f,et,32),et+=32,y=!!tt.readBit(f,et),et+=1,v=s/(2*a))}return{payload:f,profile_idc:u,profile_compatibility:l,level_idc:c,sps_id:g.value,log2_max_frame_num_minus4:b.value,pic_order_cnt_type:x,log2_max_pic_order_cnt_lsb_minus4:e?e.value:0,width:Math.ceil((16*(w.value+1)-2*B-2*E)*p),height:(2-_)*(P.value+1)*16-2*T-2*R,pixelRatio:d,video_format:o,fps:v,fixedFPS:y}}(this.data);break;case 8:this.pps=function(t){let e,n,r=0,i=t,o=[],a=0;r+=tt.readUEV(i,r).bitLength,r+=tt.readUEV(i,r).bitLength,r+=1,r+=1;let s=tt.readUEV(i,r);if(r+=s.bitLength,s.value>0){let t=tt.readUEV(i,r);r+=t.bitLength;let u,l=0;switch(t.value){case 0:for(l=0;l<=t.value;l++)u=tt.readUEV(i,r),r+=u.bitLength;break;case 2:for(l=0;l<=t.value;l++)u=tt.readUEV(i,r),r+=u.bitLength,u=tt.readUEV(i,r),r+=u.bitLength;break;case 3:case 4:case 5:r+=1,e=tt.readUEV(i,r),r+=e.bitLength;break;case 6:{n=tt.readUEV(i,r),r+=n.bitLength;let t=Math.ceil(Math.log2(s.value+1));for(a=0;a<=n.value;a++)o.push(tt.readBit(i,r,t)),r+=t}}}return r+=tt.readUEV(i,r).bitLength,r+=tt.readUEV(i,r).bitLength,r+=1,r+=1,r+=tt.readSEV(i,r).bitLength,r+=tt.readSEV(i,r).bitLength,r+=tt.readSEV(i,r).bitLength,r+=1,r+=1,r+=1,{sliceGroupNum:s.value+1}}(this.data);break;case 6:this.sei=(this.data,{});break;case 9:this.primary_pic_type=this.data[0]>>5}}}class it extends l{constructor(){super(...arguments),this.lastState=null,this.lastNALu=null,this.lastNALuState=null}spitNalu_(t,e,n){let r=new rt(t);r.pts=e,r.dts=n,this.lastNALu=r,this.emit("nalu",r)}push(t){const{lastState:e,lastNALuState:n}=this;let r=0,i=-1,{pts:o,dts:a,payload:s,naluSizeLength:u}=t;if(u){let t=0,e=0,n=0,r=s.length;do{e=0;for(let n=0;n<u;n++)e|=s[t+n]<<8*(u-n-1);t+=u,n=t+e,n>r&&(n=r),this.spitNalu_(s.subarray(t,n),o,a),t=n}while(t<r)}else{let t=s.byteLength-1,u=0;do{if(0!==s[t])break;u++,t--}while(t>0);u>=3&&(s=s.subarray(0,t+1));const l=s.length;let c=0;do{let t=s[r++];if(0!==c)if(1!==c)if(t)if(1===t){if(i>=0)this.lastNALuState=c,this.spitNalu_(s.subarray(i,r-1-c),o,a);else{const t=this.lastNALu;if(t){e&&r<=4-e&&n&&(t.rawData=t.rawData.subarray(0,t.rawData.byteLength-e));let i=r-c-1;if(i>0){T.log(`overflow NALU found: ${i}/${o}/${a}`);let e=new k;e.append(t.rawData),e.append(s.subarray(0,i));let n=e.toNewBytes();e.clear(),t.rawData=n}}}r<l&&(i=r,c=0)}else c=0;else c=3;else c=t?0:2;else c=t?0:1}while(r<l);i>=0&&c>=0&&(this.lastNALuState=c,this.spitNalu_(s.subarray(i,l),o,a)),this.lastState=c}this.emit("done")}reset(){this.lastState=null,this.lastNALu=null,this.lastNALuState=null}}class ot extends R{constructor(t){super(),this.PSI=t,this.trackId=null,this.currentFrame=[],this.codec=new it,this._newGop(),this._newGops(),this.codec.on("nalu",t=>{if(7===t.unit_type){let e=this.PSI.findTrack(this.trackId),n=(t=>{let e="avc1.",n=[t.profile_idc,t.profile_compatibility,t.level_idc];for(let t=0;t<n.length;t++){let r=n[t].toString(16);r.length<2&&(r="0"+r),e+=r}return{codec:e}})(t.sps);e.codec=n.codec,e.width=t.sps.width,e.height=t.sps.height,e.profileIdc=t.sps.profile_idc,e.profileCompatibility=t.sps.profile_compatibility,e.levelIdc=t.sps.level_idc,e.pixelRatio=t.sps.pixelRatio,e.sps=[t.rawData]}else if(8===t.unit_type){this.PSI.findTrack(this.trackId).pps=[t.rawData]}this._grouping(t)})}push(t){const{stream_type:e,pes:n,pid:r}=t;if(27===e||36===e){this.trackId=r;let t={pts:n.PTS,dts:n.DTS,payload:n.data_byte};this.codec.push(t)}}flush(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this._pushFrameIntoGop(),this.currentFrame=[]),this.gop.length>0&&this._pushGopIntoGroup()}reset(){this.codec.reset(),this.currentFrame=[],this._newGop(),this._newGops()}_grouping(t){9===t.unit_type?(this.currentFrame.length>0&&(this.currentFrame.duration=t.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this._pushGopIntoGroup()),this.currentFrame.keyframe||this.gop.length>0?this._pushFrameIntoGop():T.warn("h264 codec drop frame")),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=t.pts,this.currentFrame.dts=t.dts):(5===t.unit_type&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=t.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(t)),this.currentFrame.duration=t.dts-this.currentFrame.dts}_newGop(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}_pushFrameIntoGop(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}_newGops(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}_pushGopIntoGroup(){let t=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=t.dts,this.gops.firstPTS=t.pts,this.gops.push(this.gop),this.emit("data",this.gops),this._newGop(),this._newGops(),this.emit("done")}}class at extends R{constructor(t,e,n={}){super(),this.context=t,this.PSI=e,this.options=n,this.tracks=[],this.adtsStream=new q(e),this.avcStream=new ot(e),this.streams=[this.adtsStream,this.avcStream],n.decodeCodec&&(this.avcStream.on("data",t=>{let e=n.config.stubTime;if(b(e)){let n=(t.firstPTS+t.duration)/9e4;if(n<e)return void T.warn(`drop avc gop, start/end/stubTime(${t.firstPTS}/${n}/${e})`)}this.tracks.push(t),this.emit("data",this.tracks),this.tracks=[],this.adtsStream.flush()}),this.adtsStream.on("data",t=>{let e=n.config.stubTime;if(b(e)){let n=(t.firstPTS+t.duration)/9e4;if(n<e)return void T.warn(`drop adts, start/end/stubTime(${t.firstPTS}/${n}/${e})`)}this.tracks.push(t),this.emit("data",this.tracks),this.tracks=[]}))}push(t){const{options:e,adtsStream:n,avcStream:r}=this;let{stream_type:i}=t;if(e.decodeCodec)switch(i){case 27:case 36:r.push(t);break;case 15:n.push(t);break;default:T.warn("ts elementary encounter unknown stream type "+i)}else this.emit("data",t)}flush(){let{streams:t,tracks:e}=this;for(let e=0;e<this.streams.length;e++){t[e].flush()}e.length>0&&this.emit("data",e),this.emit("done"),e.splice(0,e.length)}reset(){this.tracks=[];for(let t=0;t<this.streams.length;t++){this.streams[t].reset()}this.emit("reset")}}class st{constructor(t){let e=t[7]>>6,n=t[8];this.PTS=0,2==(2&e)&&(this.PTS=this.calcTimestamp_(t,9)),this.DTS=this.PTS,1==(1&e)&&(this.DTS=this.calcTimestamp_(t,14)),this.data_byte=t.subarray(9+n)}calcTimestamp_(t,e){return 536870912*(14&t[e])+(t[e+1]<<22)+(t[e+2]>>1<<15)+(t[e+3]<<7)+(t[e+4]>>1)}}class ut extends R{constructor(t,e){super(),this.context=t,this.PSI=e,this.PID=null,this.cache_buffer=new k}push(t){const e=this;t.PID>31&&t.PID<8191&&(-1==this.PSI.currentProgramPID?e._pushPacket(t):this.PSI.currentProgramPID!==t.PID&&(1===t.payload_unit_start_indicator&&e._assembleOnePES(),e._pushPacket(t)))}flush(){this._assembleOnePES(),this.emit("done")}reset(){this._clearCached(),this.emit("reset")}_clearCached(){this.PID=null,this.cache_buffer.clear()}_pushPacket(t){let e=this.cache_buffer.empty;e&&0===t.payload_unit_start_indicator||(e&&(this.PID=t.PID),this.cache_buffer.append(t.payload))}_assembleOnePES(){const t=this;if(!this.cache_buffer.empty){let e;try{e=this.cache_buffer.toNewBytes()}catch(t){throw"pes alloc mem err "+this.cache_buffer.byteLength}let n=new st(e),r=this.PSI.findTrack(this.PID);if(r){let e={pid:r.id,stream_type:r.stream_type,pes:n};t.emit("data",e)}t._clearCached()}}}class lt{constructor(t){if(this.sync_byte=t[0],this.payload_unit_start_indicator=t[1]>>6&1,this.PID=8191&(t[1]<<8|t[2]),this.afc=t[3]>>4&3,this.has_payload=1&this.afc,this.has_adaptation=2&this.afc,this.has_payload)if(this.has_adaptation){let e=t[4];this.payload=t.subarray(5+e)}else this.payload=t.subarray(4)}valid(){return 71===this.sync_byte&&1===this.has_payload}}class ct extends L{constructor(t={}){super(t),this.psi_=new M(this.ctx_),this.pesStream_=new ut(this.ctx_,this.psi_),this.elementaryStream_=new at(this.ctx_,this.psi_,t),this.complexStream_=new U(this.ctx_,this.psi_),this.pipe(this.pesStream_),this.pesStream_.pipe(this.elementaryStream_),this.elementaryStream_.pipe(this.complexStream_),super.listenEndStream_()}get endStream(){let t=this.elementaryStream_;return this.options_.decodeCodec&&(t=this.complexStream_),t}push(t,e){const{done:n}=e,{options_:r,ctx_:i,cache_buffer_:o,psi_:a}=this;let s=super.constraintPushData_(t),u=o.byteLength,l=null;for(r.config=e,T.log(`hls demux received ${s.byteLength} bytes, cache ${u} bytes. ${n?"chunk done":""}`),o.append(s);o.byteLength>=188;){let t=o.cut(188);if(t){let e=new lt(t);if(!e.valid()){let n=`Encounter invalid ts packet, packet_length(${t.length}), cache_length(${this.cache_buffer_.byteLength}), has_payload(${e.has_payload}), data(${t})`;T.error(n),this.reset(),i.emit("error",C.TS_SYNC_BYTE,n,{startByte:l,endByte:l+t.byteLength});break}a.parse(e),this.emit("data",e),l+=t.byteLength}}o.empty&&n&&this.emit("done")}reset(){this.cache_buffer_.clear(),this.emit("reset")}}let ft=function(t){let e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3]),e},ht=function(t){return new Date(1e3*t-20828448e5)},dt=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},pt={avc1:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:vt(t.subarray(78,t.byteLength))}},avcC:function(t){let e,n,r,i,o=new DataView(t.buffer,t.byteOffset,t.byteLength),a={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},s=31&t[5];for(r=6,i=0;i<s;i++)n=o.getUint16(r),r+=2,a.sps.push(new Uint8Array(t.subarray(r,r+n))),r+=n;for(e=t[r],r++,i=0;i<e;i++)n=o.getUint16(r),r+=2,a.pps.push(new Uint8Array(t.subarray(r,r+n))),r+=n;return a},btrt:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},esds:function(t){new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[35]>>>3&31,samplingFrequencyIndex:(7&t[35])<<8+(128&t[36])>>7,channelConfiguration:(120&t[36])>>3}}}},ftyp:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={majorBrand:ft(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},r=8;for(;r<t.byteLength;)n.compatibleBrands.push(ft(t.subarray(r,r+4))),r+=4;return n},dinf:function(t){return{boxes:vt(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:vt(t.subarray(8))}},hdlr:function(t){let e={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:ft(t.subarray(8,12)),name:""},n=8;for(n=24;n<t.byteLength;n++){if(0===t[n]){n++;break}e.name+=String.fromCharCode(t[n])}return e.name=decodeURIComponent(decodeURIComponent(e.name)),e},mdhd:function(t){let e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:"",creationTime:new Date,modificationTime:new Date,timescale:0,duration:0};return 1===i.version?(r+=4,i.creationTime=ht(n.getUint32(r)),r+=8,i.modificationTime=ht(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=8,i.duration=n.getUint32(r)):(i.creationTime=ht(n.getUint32(r)),r+=4,i.modificationTime=ht(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=4,i.duration=n.getUint32(r)),r+=4,e=n.getUint16(r),i.language+=String.fromCharCode(96+(e>>10)),i.language+=String.fromCharCode(96+((960&e)>>5)),i.language+=String.fromCharCode(96+(31&e)),i},mdia:function(t){return{boxes:vt(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:vt(t)}},mp4a:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536,streamDescriptor:void 0};return t.byteLength>28&&(n.streamDescriptor=vt(t.subarray(28))[0]),n},moof:function(t){return{boxes:vt(t)}},moov:function(t){return{boxes:vt(t)}},mvex:function(t){return{boxes:vt(t)}},mvhd:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),creationTime:new Date,modificationTime:new Date,timescale:0,duration:0,rate:0,volume:0,matrix:new Uint32Array(0),nextTrackId:0};return 1===r.version?(n+=4,r.creationTime=ht(e.getUint32(n)),n+=8,r.modificationTime=ht(e.getUint32(n)),n+=4,r.timescale=e.getUint32(n),n+=8,r.duration=e.getUint32(n)):(r.creationTime=ht(e.getUint32(n)),n+=4,r.modificationTime=ht(e.getUint32(n)),n+=4,r.timescale=e.getUint32(n),n+=4,r.duration=e.getUint32(n)),n+=4,r.rate=e.getUint16(n)+e.getUint16(n+2)/16,n+=4,r.volume=e.getUint8(n)+e.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=e.getUint32(n),r},pdin:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){let e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]};for(e=4;e<t.byteLength;e++)n.samples.push({dependsOn:(48&t[e])>>4,isDependedOn:(12&t[e])>>2,hasRedundancy:3&t[e]});return n},sidx:function(t){let e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(e=24;i;e+=12,i--)r.references.push({referenceType:(128&t[e])>>>7,referencedSize:2147483647&n.getUint32(e),subsegmentDuration:n.getUint32(e+4),startsWithSap:!!(128&t[e+8]),sapType:(112&t[e+8])>>>4,sapDeltaTime:268435455&n.getUint32(e+8)});return r},stbl:function(t){return{boxes:vt(t)}},stco:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=e.getUint32(4),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),entryCount:n,chunkOffsets:[]};for(let t=8;n;t+=4,n--)r.chunkOffsets.push(e.getUint32(t));return r},stsc:function(t){let e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=n.getUint32(4),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]};for(e=8;r;e+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(e),samplesPerChunk:n.getUint32(e+4),sampleDescriptionIndex:n.getUint32(e+8)});return i},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),boxes:vt(t.subarray(8))}},stsz:function(t){let e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(e=12;e<t.byteLength;e+=4)r.entries.push(n.getUint32(e));return r},stts:function(t){let e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(e=8;i;e+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(e),sampleDelta:n.getUint32(e+4)});return r},styp:function(t){return pt.ftyp(t)},tfdt:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},tfhd:function(t){let e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],o=2&r.flags[2],a=8&r.flags[2],s=16&r.flags[2],u=32&r.flags[2];return e=8,i&&(e+=4,r.baseDataOffset=n.getUint32(12),e+=4),o&&(r.sampleDescriptionIndex=n.getUint32(e),e+=4),a&&(r.defaultSampleDuration=n.getUint32(e),e+=4),s&&(r.defaultSampleSize=n.getUint32(e),e+=4),u&&(r.defaultSampleFlags=n.getUint32(e)),r},tkhd:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),creationTime:new Date,modificationTime:new Date,trackId:0,duration:0,layer:0,alternateGroup:0,volume:0,width:0,height:0,matrix:new Uint32Array(0)};return 1===r.version?(n+=4,r.creationTime=ht(e.getUint32(n)),n+=8,r.modificationTime=ht(e.getUint32(n)),n+=4,r.trackId=e.getUint32(n),n+=4,n+=8,r.duration=e.getUint32(n)):(r.creationTime=ht(e.getUint32(n)),n+=4,r.modificationTime=ht(e.getUint32(n)),n+=4,r.trackId=e.getUint32(n),n+=4,n+=4,r.duration=e.getUint32(n)),n+=4,n+=8,r.layer=e.getUint16(n),n+=2,r.alternateGroup=e.getUint16(n),n+=2,r.volume=e.getUint8(n)+e.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,r.width=e.getUint16(n)+e.getUint16(n+2)/16,n+=4,r.height=e.getUint16(n)+e.getUint16(n+2)/16,r},traf:function(t){return{boxes:vt(t)}},trak:function(t){return{boxes:vt(t)}},trex:function(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:e.getUint16(22)}},trun:function(t){let e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=1&n.flags[2],o=4&n.flags[2],a=1&n.flags[1],s=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],c=r.getUint32(4),f=8;for(i&&(n.dataOffset=r.getUint32(f),f+=4),o&&c&&(e={flags:dt(t.subarray(f,f+4))},f+=4,a&&(e.duration=r.getUint32(f),f+=4),s&&(e.size=r.getUint32(f),f+=4),l&&(e.compositionTimeOffset=r.getUint32(f),f+=4),n.samples.push(e),c--);c--;)e={},a&&(e.duration=r.getUint32(f),f+=4),s&&(e.size=r.getUint32(f),f+=4),u&&(e.flags=dt(t.subarray(f,f+4)),f+=4),l&&(e.compositionTimeOffset=r.getUint32(f),f+=4),n.samples.push(e);return n},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}}},vt=function(t){let e,n,r,i,o=0,a=[],s=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;o<t.byteLength;)e=s.getUint32(o),n=ft(t.subarray(o+4,o+8)),r=e>1?o+e:t.byteLength,i=(pt[n]||function(t){return{data:t}})(t.subarray(o+8,r)),i.size=e,i.type=n,a.push(i),o=r;return a};const yt={mp4toJSON:vt};class gt extends L{constructor(t={}){super(t),super.listenEndStream_()}get endStream(){return this}push(t){let e=super.constraintPushData_(t);T.log(`mp4 demux received ${e.byteLength} bytes`);let n=yt.mp4toJSON(e);this.emit("data",n)}}var mt,bt;!function(t){t[t.HEAD=0]="HEAD",t[t.BODY=1]="BODY"}(mt||(mt={})),function(t){t[t.SCRIPT_DATA=18]="SCRIPT_DATA",t[t.VIDEO=9]="VIDEO",t[t.AUDIO=8]="AUDIO"}(bt||(bt={}));var xt,kt,wt,Pt;!function(t){t[t.AAC=10]="AAC"}(xt||(xt={})),function(t){t[t.MONO=0]="MONO",t[t.STEREO=1]="STEREO"}(kt||(kt={}));!function(t){t[t.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",t[t.AAC_RAW=1]="AAC_RAW"}(wt||(wt={}));!function(t){t[t.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",t[t.NALU=1]="NALU",t[t.SEQUENCE_END=2]="SEQUENCE_END"}(Pt||(Pt={}));const _t=new it,St=[];_t.on("nalu",t=>{St.push(t)});var Bt;!function(t){t[t.AVC=7]="AVC"}(Bt||(Bt={}))},function(t,e,n){var r=n(43);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(49),i=n(92);function o(e,n,a){return i()?(t.exports=o=Reflect.construct.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(0),u=n.n(s),l=n(9),c={eval:EvalError,range:RangeError,reference:ReferenceError,syntax:SyntaxError,type:TypeError,uri:URIError,default:Error},f=null,h=(f||(f=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1001;return i()(this,t),u()(this,"type",""),u()(this,"errorName","DefaultError"),u()(this,"code",null),u()(this,"message",""),u()(this,"stack",""),this.type=e,this.code=n,this.throws.bind(this)}return a()(t,[{key:"throws",value:function(t){for(var e="",n=Error,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(t instanceof Error){for(var a in c)if(t instanceof c[a]){this.errorName=c[a].name,n=t.constructor;break}this.stack=t.stack,i&&i.splice&&(e=i[0],i.splice(0,1))}else e=t.toString();this.message="[".concat(l.c.projectName," ERROR:")+this.type+"-"+this.code+"]"+e;try{throw new n(this.message,"[args]:",i)}catch(t){this.stack=this.stack||t.stack,console.error(t,"[message]:",e,"[args]:",i)}}}]),t}())),f)},function(t,e,n){var r=n(90),i=n(70);t.exports=function(t,e){var n=i(t,e,"get");return r(t,n)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(12),i=n(32),o=n(31),a=n(52)("src"),s=n(175),u=(""+s).split("toString");n(19).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(l&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,n){var r=n(7),i=n(13),o=n(43),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,u,"next",t)}function u(t){n(a,i,o,s,u,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(91),i=n(70);t.exports=function(t,e,n){var o=i(t,e,"set");return r(t,o,n),n},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(21),i=n(51);t.exports=n(20)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(71),i=n(43);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";var r=n(13);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,n){var r=n(2),i=n(49),o=n(93),a=n(24);function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(37);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(72),i=n(51),o=n(33),a=n(47),s=n(31),u=n(135),l=Object.getOwnPropertyDescriptor;e.f=n(20)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(7),i=n(19),o=n(13);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(t,e,n){var r=n(36),i=n(71),o=n(23),a=n(17),s=n(151);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,f=6==t,h=5==t||f,d=e||s;return function(e,s,p){for(var v,y,g=o(e),m=i(g),b=r(s,p,3),x=a(m.length),k=0,w=n?d(e,x):u?d(e,0):void 0;x>k;k++)if((h||k in m)&&(y=b(v=m[k],k,g),t))if(n)w[k]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return k;case 2:w.push(v)}else if(c)return!1;return f?-1:l||c?c:w}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";if(n(20)){var r=n(53),i=n(12),o=n(13),a=n(7),s=n(87),u=n(130),l=n(36),c=n(67),f=n(51),h=n(32),d=n(68),p=n(38),v=n(17),y=n(162),g=n(55),m=n(47),b=n(31),x=n(73),k=n(15),w=n(23),P=n(122),_=n(56),S=n(58),B=n(57).f,E=n(124),T=n(52),R=n(16),L=n(41),A=n(77),C=n(74),D=n(126),O=n(65),M=n(80),U=n(66),N=n(125),I=n(153),F=n(21),j=n(39),H=F.f,W=j.f,V=i.RangeError,z=i.TypeError,G=i.Uint8Array,X=Array.prototype,Y=u.ArrayBuffer,$=u.DataView,q=L(0),K=L(2),Q=L(3),Z=L(4),J=L(5),tt=L(6),et=A(!0),nt=A(!1),rt=D.values,it=D.keys,ot=D.entries,at=X.lastIndexOf,st=X.reduce,ut=X.reduceRight,lt=X.join,ct=X.sort,ft=X.slice,ht=X.toString,dt=X.toLocaleString,pt=R("iterator"),vt=R("toStringTag"),yt=T("typed_constructor"),gt=T("def_constructor"),mt=s.CONSTR,bt=s.TYPED,xt=s.VIEW,kt=L(1,(function(t,e){return Bt(C(t,t[gt]),e)})),wt=o((function(){return 1===new G(new Uint16Array([1]).buffer)[0]})),Pt=!!G&&!!G.prototype.set&&o((function(){new G(1).set({})})),_t=function(t,e){var n=p(t);if(n<0||n%e)throw V("Wrong offset!");return n},St=function(t){if(k(t)&&bt in t)return t;throw z(t+" is not a typed array!")},Bt=function(t,e){if(!k(t)||!(yt in t))throw z("It is not a typed array constructor!");return new t(e)},Et=function(t,e){return Tt(C(t,t[gt]),e)},Tt=function(t,e){for(var n=0,r=e.length,i=Bt(t,r);r>n;)i[n]=e[n++];return i},Rt=function(t,e,n){H(t,e,{get:function(){return this._d[n]}})},Lt=function(t){var e,n,r,i,o,a,s=w(t),u=arguments.length,c=u>1?arguments[1]:void 0,f=void 0!==c,h=E(s);if(null!=h&&!P(h)){for(a=h.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(f&&u>2&&(c=l(c,arguments[2],2)),e=0,n=v(s.length),i=Bt(this,n);n>e;e++)i[e]=f?c(s[e],e):s[e];return i},At=function(){for(var t=0,e=arguments.length,n=Bt(this,e);e>t;)n[t]=arguments[t++];return n},Ct=!!G&&o((function(){dt.call(new G(1))})),Dt=function(){return dt.apply(Ct?ft.call(St(this)):St(this),arguments)},Ot={copyWithin:function(t,e){return I.call(St(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Z(St(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(St(this),arguments)},filter:function(t){return Et(this,K(St(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return J(St(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(St(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){q(St(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(St(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(St(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return lt.apply(St(this),arguments)},lastIndexOf:function(t){return at.apply(St(this),arguments)},map:function(t){return kt(St(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(St(this),arguments)},reduceRight:function(t){return ut.apply(St(this),arguments)},reverse:function(){for(var t,e=St(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return Q(St(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ct.call(St(this),t)},subarray:function(t,e){var n=St(this),r=n.length,i=g(t,r);return new(C(n,n[gt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===e?r:g(e,r))-i))}},Mt=function(t,e){return Et(this,ft.call(St(this),t,e))},Ut=function(t){St(this);var e=_t(arguments[1],1),n=this.length,r=w(t),i=v(r.length),o=0;if(i+e>n)throw V("Wrong length!");for(;o<i;)this[e+o]=r[o++]},Nt={entries:function(){return ot.call(St(this))},keys:function(){return it.call(St(this))},values:function(){return rt.call(St(this))}},It=function(t,e){return k(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ft=function(t,e){return It(t,e=m(e,!0))?f(2,t[e]):W(t,e)},jt=function(t,e,n){return!(It(t,e=m(e,!0))&&k(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?H(t,e,n):(t[e]=n.value,t)};mt||(j.f=Ft,F.f=jt),a(a.S+a.F*!mt,"Object",{getOwnPropertyDescriptor:Ft,defineProperty:jt}),o((function(){ht.call({})}))&&(ht=dt=function(){return lt.call(this)});var Ht=d({},Ot);d(Ht,Nt),h(Ht,pt,Nt.values),d(Ht,{slice:Mt,set:Ut,constructor:function(){},toString:ht,toLocaleString:Dt}),Rt(Ht,"buffer","b"),Rt(Ht,"byteOffset","o"),Rt(Ht,"byteLength","l"),Rt(Ht,"length","e"),H(Ht,vt,{get:function(){return this[bt]}}),t.exports=function(t,e,n,u){var l=t+((u=!!u)?"Clamped":"")+"Array",f="get"+t,d="set"+t,p=i[l],g=p||{},m=p&&S(p),b=!p||!s.ABV,w={},P=p&&p.prototype,E=function(t,n){H(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[f](n*e+r.o,wt)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*e+i.o,r,wt)}(this,n,t)},enumerable:!0})};b?(p=n((function(t,n,r,i){c(t,p,l,"_d");var o,a,s,u,f=0,d=0;if(k(n)){if(!(n instanceof Y||"ArrayBuffer"==(u=x(n))||"SharedArrayBuffer"==u))return bt in n?Tt(p,n):Lt.call(p,n);o=n,d=_t(r,e);var g=n.byteLength;if(void 0===i){if(g%e)throw V("Wrong length!");if((a=g-d)<0)throw V("Wrong length!")}else if((a=v(i)*e)+d>g)throw V("Wrong length!");s=a/e}else s=y(n),o=new Y(a=s*e);for(h(t,"_d",{b:o,o:d,l:a,e:s,v:new $(o)});f<s;)E(t,f++)})),P=p.prototype=_(Ht),h(P,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&M((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=n((function(t,n,r,i){var o;return c(t,p,l),k(n)?n instanceof Y||"ArrayBuffer"==(o=x(n))||"SharedArrayBuffer"==o?void 0!==i?new g(n,_t(r,e),i):void 0!==r?new g(n,_t(r,e)):new g(n):bt in n?Tt(p,n):Lt.call(p,n):new g(y(n))})),q(m!==Function.prototype?B(g).concat(B(m)):B(g),(function(t){t in p||h(p,t,g[t])})),p.prototype=P,r||(P.constructor=p));var T=P[pt],R=!!T&&("values"==T.name||null==T.name),L=Nt.values;h(p,yt,!0),h(P,bt,l),h(P,xt,!0),h(P,gt,p),(u?new p(1)[vt]==l:vt in P)||H(P,vt,{get:function(){return l}}),w[l]=p,a(a.G+a.W+a.F*(p!=g),w),a(a.S,l,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o((function(){g.of.call(p,1)})),l,{from:Lt,of:At}),"BYTES_PER_ELEMENT"in P||h(P,"BYTES_PER_ELEMENT",e),a(a.P,l,Ot),U(l),a(a.P+a.F*Pt,l,{set:Ut}),a(a.P+a.F*!R,l,Nt),r||P.toString==ht||(P.toString=ht),a(a.P+a.F*o((function(){new p(1).slice()})),l,{slice:Mt}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){P.toLocaleString.call([1,2])}))),l,{toLocaleString:Dt}),O[l]=R?T:L,r||R||h(P,pt,L)}}else t.exports=function(){}},function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t,e,r){var o={};o[r]=[];var a=e.toString(),s=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var u,l=s[1],c=new RegExp("(\\\\n|\\W)"+i(l)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(a);)"dll-reference"!==u[3]&&o[r].push(u[3]);for(c=new RegExp("\\("+i(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(a);)t[u[2]]||(o[r].push(u[1]),t[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var f,h=Object.keys(o),d=0;d<h.length;d++)for(var p=0;p<o[h[d]].length;p++)f=o[h[d]][p],isNaN(1*f)||(o[h[d]][p]=1*o[h[d]][p]);return o}function a(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){e=e||{};var i={main:n.m},s=e.all?{main:Object.keys(i.main)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};a(n);)for(var s=Object.keys(n),u=0;u<s.length;u++){var l=s[u],c=n[l].pop();if(i[l]=i[l]||{},!i[l][c]&&t[l][c]){i[l][c]=!0,r[l]=r[l]||[],r[l].push(c);for(var f=o(t,t[l][c],l),h=Object.keys(f),d=0;d<h.length;d++)n[h[d]]=n[h[d]]||[],n[h[d]]=n[h[d]].concat(f[h[d]])}}return r}(i,t),u="";Object.keys(s).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;s[t][e];)e++;s[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),u=u+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var l=new window.Blob([u],{type:"text/javascript"});if(e.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),f=new window.Worker(c);return f.objectURL=c,f}},function(t,e,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){var t=function(){},e={},n={},r={};function i(t,e){if(t){var i=r[t];if(n[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function o(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function a(e,n,r,i){var o,s,u=document,l=r.async,c=(r.numRetries||0)+1,f=r.before||t,h=e.replace(/[\?|#].*$/,""),d=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(h)?((s=u.createElement("link")).rel="stylesheet",s.href=d,(o="hideFocus"in s)&&s.relList&&(o=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(s=u.createElement("img")).src=d:((s=u.createElement("script")).src=e,s.async=void 0===l||l),s.onload=s.onerror=s.onbeforeload=function(t){var u=t.type[0];if(o)try{s.sheet.cssText.length||(u="e")}catch(t){18!=t.code&&(u="e")}if("e"==u){if((i+=1)<c)return a(e,n,r,i)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(e,u,t.defaultPrevented)},!1!==f(e,s)&&u.head.appendChild(s)}function s(t,n,r){var s,u;if(n&&n.trim&&(s=n),u=(s?r:n)||{},s){if(s in e)throw"LoadJS";e[s]=!0}function l(e,n){!function(t,e,n){var r,i,o=(t=t.push?t:[t]).length,s=o,u=[];for(r=function(t,n,r){if("e"==n&&u.push(t),"b"==n){if(!r)return;u.push(t)}--o||e(u)},i=0;i<s;i++)a(t[i],r,n)}(t,(function(t){o(u,t),e&&o({success:e,error:n},t),i(s,t)}),u)}if(u.returnPromise)return new Promise(l);l()}return s.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,o,a,s=[],u=t.length,l=u;for(i=function(t,n){n.length&&s.push(t),--l||e(s)};u--;)o=t[u],(a=n[o])?i(o,a):(r[o]=r[o]||[]).push(i)}(t,(function(t){o(e,t)})),s},s.done=function(t){i(t,[])},s.reset=function(){e={},n={},r={}},s.isDefined=function(t){return t in e},s})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r=n(15);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(52)("meta"),i=n(15),o=n(31),a=n(21).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(13)((function(){return u(Object.preventExtensions({}))})),c=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return l&&f.NEED&&u(t)&&!o(t,r)&&c(t),t}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){!function(){"use strict";function e(t,e){throw new Error("abstract")}e.prototype.drawFrame=function(t){throw new Error("abstract")},e.prototype.clear=function(){throw new Error("abstract")},t.exports=e}()},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=!1},function(t,e,n){var r=n(137),i=n(109);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(38),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(14),i=n(138),o=n(109),a=n(108)("IE_PROTO"),s=function(){},u=function(){var t,e=n(106)("iframe"),r=o.length;for(e.style.display="none",n(110).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(137),i=n(109).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(31),i=n(23),o=n(108)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(16)("unscopables"),i=Array.prototype;null==i[r]&&n(32)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){var r=n(15);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){var n={validateDimension:function(t){if(t<=0||t!==(0|t))throw"YUV plane dimensions must be a positive integer"},validateOffset:function(t){if(t<0||t!==(0|t))throw"YUV plane offsets must be a non-negative integer"},format:function(t){var e=t.width,n=t.height,r=t.chromaWidth||e,i=t.chromaHeight||n,o=t.cropLeft||0,a=t.cropTop||0,s=t.cropWidth||e-o,u=t.cropHeight||n-a,l=t.displayWidth||s,c=t.displayHeight||u;return this.validateDimension(e),this.validateDimension(n),this.validateDimension(r),this.validateDimension(i),this.validateOffset(o),this.validateOffset(a),this.validateDimension(s),this.validateDimension(u),this.validateDimension(l),this.validateDimension(c),{width:e,height:n,chromaWidth:r,chromaHeight:i,cropLeft:o,cropTop:a,cropWidth:s,cropHeight:u,displayWidth:l,displayHeight:c}},allocPlane:function(t,e){return n.validateDimension(t),n.validateDimension(e),{bytes:new Uint8Array(t*e),stride:t}},suitableStride:function(t){n.validateDimension(t);var e=t%4;return 0==e?t:t+(4-e)},allocPlane:function(t,e,n,r,i){var o,a;if(this.validateDimension(t),this.validateDimension(e),i=i||0,r=r||this.suitableStride(t),this.validateDimension(r),r<t)throw"Invalid input stride for YUV plane; must be larger than width";if(o=r*e,n){if(n.length-i<o)throw"Invalid input buffer for YUV plane; must be large enough for stride times height";a=n.slice(i,i+o)}else a=new Uint8Array(o),r=r||this.suitableStride(t);return{bytes:a,stride:r}},lumaPlane:function(t,e,n,r){return this.allocPlane(t.width,t.height,e,n,r)},chromaPlane:function(t,e,n,r){return this.allocPlane(t.chromaWidth,t.chromaHeight,e,n,r)},frame:function(t,e,n,r){return{format:t,y:e=e||this.lumaPlane(t),u:n=n||this.chromaPlane(t),v:r=r||this.chromaPlane(t)}},copyPlane:function(t){return{bytes:t.bytes.slice(),stride:t.stride}},copyFrame:function(t){return{format:t.format,y:this.copyPlane(t.y),u:this.copyPlane(t.u),v:this.copyPlane(t.v)}},transferables:function(t){return[t.y.bytes.buffer,t.u.bytes.buffer,t.v.bytes.buffer]}};t.exports=n},function(t,e,n){var r=n(101),i=n(102),o=n(103),a=n(105);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(21).f,i=n(31),o=n(16)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(7),i=n(43),o=n(13),a=n(112),s="["+a+"]",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),c=function(t,e,n){var i={},s=o((function(){return!!a[t]()||"‚Äã¬Ö"!="‚Äã¬Ö"[t]()})),u=i[t]=s?e(f):a[t];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},f=c.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(12),i=n(21),o=n(20),a=n(16)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(27);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(10).default,i=n(89);t.exports=function(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(42);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(42),i=n(16)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(14),i=n(37),o=n(16)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){!function(){"use strict";var e=n(50),r=n(95),i=n(98),o={FrameSink:e,SoftwareFrameSink:r,WebGLFrameSink:i,attach:function(t,e){return("webGL"in(e=e||{})?e.webGL:i.isAvailable())?new i(t,e):new r(t,e)}};t.exports=o}()},function(t,e,n){var r=n(19),i=n(12),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(53)?"pure":"global",copyright:"¬© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(33),i=n(17),o=n(55);t.exports=function(t){return function(e,n,a){var s,u=r(e),l=i(u.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(42);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(16)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(14);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(73),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";n(155);var r=n(27),i=n(32),o=n(13),a=n(43),s=n(16),u=n(127),l=s("species"),c=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var h=s(t),d=!o((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),p=d?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[l]=function(){return n}),n[h](""),!e})):void 0;if(!d||!p||"replace"===t&&!c||"split"===t&&!f){var v=/./[h],y=n(a,h,""[t],(function(t,e,n,r,i){return e.exec===u?d&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=y[0],m=y[1];r(String.prototype,t,g),i(RegExp.prototype,h,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},function(t,e,n){var r=n(36),i=n(150),o=n(122),a=n(14),s=n(17),u=n(124),l={},c={};(e=t.exports=function(t,e,n,f,h){var d,p,v,y,g=h?function(){return t}:u(t),m=r(n,f,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=s(t.length);d>b;b++)if((y=e?m(a(p=t[b])[0],p[1]):m(t[b]))===l||y===c)return y}else for(v=g.call(t);!(p=v.next()).done;)if((y=i(v,m,p.value,e))===l||y===c)return y}).BREAK=l,e.RETURN=c},function(t,e,n){var r=n(12).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(12),i=n(7),o=n(27),a=n(68),s=n(48),u=n(84),l=n(67),c=n(15),f=n(13),h=n(80),d=n(63),p=n(113);t.exports=function(t,e,n,v,y,g){var m=r[t],b=m,x=y?"set":"add",k=b&&b.prototype,w={},P=function(t){var e=k[t];o(k,t,"delete"==t||"has"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(g||k.forEach&&!f((function(){(new b).entries().next()})))){var _=new b,S=_[x](g?{}:-0,1)!=_,B=f((function(){_.has(1)})),E=h((function(t){new b(t)})),T=!g&&f((function(){for(var t=new b,e=5;e--;)t[x](e,e);return!t.has(-0)}));E||((b=e((function(e,n){l(e,b,t);var r=p(new m,e,b);return null!=n&&u(n,y,r[x],r),r}))).prototype=k,k.constructor=b),(B||T)&&(P("delete"),P("has"),y&&P("get")),(T||S)&&P(x),g&&k.clear&&delete k.clear}else b=v.getConstructor(e,t,y,x),a(b.prototype,n),s.NEED=!0;return d(b,t),w[t]=b,i(i.G+i.W+i.F*(b!=m),w),g||v.setStrong(b,t,y),b}},function(t,e,n){for(var r,i=n(12),o=n(32),a=n(52),s=a("typed_array"),u=a("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(1),u=n.n(s),l=n(5),c=n.n(l),f=n(6),h=n.n(f),d=n(2),p=n.n(d),v=n(0),y=n.n(v),g=n(26),m=n.n(g),b=n(30),x=n.n(b),k=n(11);function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _=k.a.get("Events.js"),S=function(){function t(e){i()(this,t),y()(this,"eventsQueue",{}),y()(this,"target",{}),y()(this,"disallowRepeat",!1),this.target=e}return a()(t,[{key:"add",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=w(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;this.on(o,n,r)}}catch(t){i.e(t)}finally{i.f()}}},{key:"on",value:function(t,e,n){if(void 0===this.eventsQueue[t]&&(this.eventsQueue[t]={methods:[],once:!1}),"function"==typeof e){if(!this.disallowRepeat||!this.eventsQueue[t].methods.includes(e))return this.eventsQueue[t].methods.push(e),void 0!==n&&(this.eventsQueue[t].once=n),this.target}else _.error("on","the argument is not function.",e)}},{key:"once",value:function(t,e){this.on(t,e,!0)}},{key:"off",value:function(t,e){var n=this.eventsQueue[t];if(n){var r=n.methods;if(e)for(var i=r.length;i--;)r[i]===e&&r.splice(i,1);else delete this.eventsQueue[t];return this.target}}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=this.eventsQueue[t];if(o){var a=o.methods;return a.forEach((function(t){t.apply(e.target,r)})),o.once&&this.off(t),this.target}}},{key:"clear",value:function(t){delete this.eventsQueue[t]}},{key:"clearAll",value:function(){this.eventsQueue={}}}]),t}(),B=function(t){var e=new S(t);return function(t){return e.target=t,e}},E=n(10),T=n.n(E),R=k.a.get("Element.js"),L=function(){function t(){i()(this,t)}return a()(t,null,[{key:"createEl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1?arguments[1]:void 0;if("string"!=typeof t)return R.error("please input element name"),null;var n=document.createElement(t,e);return n}},{key:"registerElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HTMLElement,n=arguments.length>2?arguments[2]:void 0,r=document.registerElement(t,{prototype:Object.create(e.prototype),extends:n});return r}},{key:"addEl",value:function(t,e){if(t&&e)try{e.appendChild(t)}catch(t){R.error(t)}}},{key:"removeEl",value:function(t){try{var e=t.parentNode;e&&e.removeChild(t)}catch(t){R.error(t)}}},{key:"addClass",value:function(t){try{for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=t.classList).add.apply(e,r)}catch(t){R.error(t)}}},{key:"removeClass",value:function(){}},{key:"hasClass",value:function(){}},{key:"isElement",value:function(t){try{return t instanceof HTMLElement}catch(e){return"object"===T()(t)&&1===t.nodeType&&"object"===T()(t.style)&&"object"===T()(t.ownerDocument)}}},{key:"setAttributes",value:function(e,n){if(t.isElement(e))for(var r=0,i=n.length;r<i;r++){var o=n[r],a=o.name;a=o.name.replace(/["|']/g,""),e.setAttribute(a,o.value)}}},{key:"syncAttributes",value:function(e,n){var r=n.attributes;t.setAttributes(e,r);var i=e.attributes;t.setAttributes(n,i)}},{key:"getClientWidth",value:function(){return document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth}},{key:"getClientHeight",value:function(){return document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight}},{key:"adaptSizeElement",value:function(t,e,n,r){var i=n,o=r;o.width=t||o.width||i.offsetWidth,o.height=e||o.height||i.offsetHeight;var a=o.width,s=o.height,u=0;o.style.position="absolute",i.offsetWidth<=0&&(i.style.width=a+"px"),i.offsetHeight<=0&&(i.style.height=s+"px");var l=i.offsetWidth/a,c=i.offsetHeight/s;u=c>l?l:c,o.style.top=i.offsetTop+(i.offsetHeight-s*u)/2+"px",o.style.left=i.offsetLeft+(i.offsetWidth-a*u)/2+"px",o.style.transform="scale(".concat(u,", ").concat(u,")"),o.style["transform-origin"]="top left",o.style.display="inline-block"}}]),t}(),A=n(24),C=n.n(A),D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),y()(this,"logger",null),y()(this,"__instance__",null),y()(this,"__singleton__",null),this.options=e,this.setLogger(this.constructor.name+".js")}return a()(t,[{key:"setLogger",value:function(t){this.logger=new k.a(t)}},{key:"getLogger",value:function(){return this.logger}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"events",get:function(){return this.options&&this.options.events?this.options.events(this):B(this)}},{key:"toString",value:function(){return JSON.stringify(this)}}],[{key:"getInstance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.__instance__=C()(this,e),this.__instance__}},{key:"getSingleton",value:function(){if(!this.__singleton__){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.__singleton__=C()(this,e)}return this.__singleton__}}]),t}();function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var M=function(t){c()(n,t);var e=O(n);function n(t){var r;return i()(this,n),r=e.call(this),y()(u()(r),"component",null),r.component=t.component,r}return a()(n,[{key:"confirm",value:function(){}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.component.data.content=t,"default"!==this.component.data.display&&""!==this.component.data.display||this.component.showBox(),"show"!==this.component.data.display&&this.component.show()}},{key:"hide",value:function(){this.component.hide()}}]),n}(D),U=n(25),N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),y()(this,"logger",null),this.options=e,this.debug=e.debug||!1,this.setLogger(this.constructor.name+".js")}return a()(t,[{key:"setLogger",value:function(t){this.logger=new k.a(t)}},{key:"getLogger",value:function(){return this.logger}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"events",get:function(){return this.options&&this.options.events?this.options.events(this):B(this)}},{key:"alert",get:function(){var t="";return this.options&&this.options.alertError&&(t=this.options.alertError),t}},{key:"toString",value:function(){return JSON.stringify(this)}}]),t}(),I=n(9);function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var j=function(t){c()(n,t);var e=F(n);function n(){var t;return i()(this,n),t=e.call(this),y()(u()(t),"dataManage",null),y()(u()(t),"sourceURL",""),t}return a()(n,[{key:"init",value:function(){}},{key:"setDataManage",value:function(t){this.dataManage=t}},{key:"setSourceURL",value:function(t){this.sourceURL=t}},{key:"getDataManage",value:function(){return this.getDataManage}},{key:"getSourceURL",value:function(){return this.getSourceURL}}]),n}(N),H={LOAD_PLAYLIST:10,get 10(){return"loading playlist"},LOADED_PLAYLIST:11,get 11(){return"playlist is loaded"},IDLE:0,get 0(){return"is free"},LOADING:1,get 1(){return"loading segment"},DONE:2,get 2(){return"segment is loaded"},ERROR:3,get 3(){return"load get error"}},W=k.a.get("M3U8Parser.js",{level:2}),V={lineDelimiter:/\r?\n/,extensionHeader:"#EXTM3U",tagPrefix:"#EXT",segmentPrefix:"#EXTINF",segmentParse:/^#EXTINF: *([0-9.]+)(, *(.+?)?)?$/,tagParse:/^#EXT-X-([A-Z-]+)(:(.+))?$/,version:"VERSION",allowCache:"ALLOW-CACHE",combined:"COMBINED",endList:"ENDLIST",targetDuration:"TARGETDURATION",mediaSequence:"MEDIA-SEQUENCE",discontinuity:"DISCONTINUITY",streamInf:"STREAM-INF",isComment:function(t){return t&&"#"===t[0]&&!t.startsWith(V.tagPrefix)},isBlank:function(t){return""===t},canStrip:function(t){return V.isBlank(t)||V.isComment(t)}},z=0,G=1,X={file:void 0,name:void 0,start:0,end:0,discontinuity:void 0,duration:void 0},Y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,t),y()(this,"source",""),y()(this,"segments",[]),y()(this,"_currentSegment",null),y()(this,"discontinuous",null),y()(this,"tags",{VERSION:void 0,TARGETDURATION:void 0}),y()(this,"_state",null),this.source=e,this.options=n,this.parse(this.source)}return a()(t,[{key:"readSegment",value:function(t){var e=V.segmentParse.exec(t);if(null!==e){var n=parseFloat(e[1],10),r=e[3];n%1!=0&&this.tags.VERSION>=3&&W.info("readsegment","Version must be 3 or higher to support floating.","duration:",n),n<this.tags.TARGETDURATION&&W.info("readsegment","Segment duration must be less than the TARGETDURATION","duration:",n),n*=1e3,this._currentSegment=Object.assign({},X,{duration:n,name:r,discontinuity:this.discontinuous});var i=this.segments[this.segments.length-1]||{start:0,end:0};this._currentSegment.start=i.end,this._currentSegment.end=i.end+n,this.discontinuous=!1,this._state=G}else W.warn("readsegment","read segment failed","line:",t)}},{key:"readTag",value:function(t){var e=V.tagParse.exec(t);if(null!==e)return{name:e[1],value:e[3]}}},{key:"readLine",value:function(t){if(t.startsWith(V.segmentPrefix))return this.readSegment(t);var e=this.readTag(t);if(e)switch(e.name){case V.version:this.tags.VERSION=parseFloat(e.value,10);break;case V.mediaSequence:this.tags.MEDIA_SEQUENCE=parseFloat(e.value,10);break;case V.allowCache:this.tags.ALLOW_CACHE=!!/\s*(YES|yes)\s*/.test(e.value);break;case V.discontinuity:this.tags.DISCONTINUITY=!0,this.discontinuous=!0;break;case V.targetDuration:this.tags.TARGETDURATION=parseFloat(e.value,10);break;case V.combined:this.tags.COMBINED=e.value;break;case V.streamInf:this.tags.STREAM_INF=e.value;break;case V.endList:this.tags.ENDLIST="EOF";break;default:W.warn("readLine","unknow line","line:",t)}}},{key:"addFile",value:function(t){if("#"!==t[0]){this._currentSegment.file=t;var e=this.parseSDParam(t);if(e>=0){this._currentSegment.start=e,this._currentSegment.end=e+this._currentSegment.duration;var n=this.segments[this.segments.length-1]||{sd:0,start:0,end:0};n.duration=e-n.start,n.end=e}this._currentSegment.name||(this._currentSegment.name=t.substr(Math.max(0,t.lastIndexOf("/")),t.lastIndexOf("."))),this.segments.push(this._currentSegment),this._state=z}else{var r=this.readTag(t);switch(r.name){case"PROGRAM-DATE-TIME":var i=new Date(r.value);this._currentSegment.time=i;break;default:W.warn("addFile","Invalid tag.","tag.name:",r.name)}}}},{key:"parseSDParam",value:function(t){var e=-1;try{var n=new URL(t).searchParams.get("sd");n&&(e=parseInt(n,10))}catch(t){}return e}},{key:"parse",value:function(t){var e=this;if("string"==typeof(t=t||this.source)){this._state=z,this.discontinuous=!1;var n=t.split(V.lineDelimiter);if(n[0]==V.extensionHeader)return n.forEach((function(t){if(!V.canStrip(t))switch(e._state){case z:e.readLine(t);break;case G:e.addFile(t);break;default:Object(U.a)("parsing m3u8 get an error, it is unknow state.")}})),this;W.error("parse","it is not a valid  m3u8 header","header:",n[0])}else Object(U.a)("m3u8 file is not text.",t)}},{key:"version",get:function(){return this.tags.VERSION}},{key:"duration",get:function(){return this.segments.length?this.segments.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n="number"==typeof t?t:t.duration;return n+e.duration})):0}},{key:"targetDuration",get:function(){return this.tags.TARGETDURATION}},{key:"mediaSequence",get:function(){return this.tags.MEDIA_SEQUENCE}},{key:"allowCache",get:function(){return this.tags.ALLOW_CACHE}},{key:"length",get:function(){return this.segments.length}}]),t}(),$=n(46),q=n.n($);function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Object";return function(e){var n="[object "+t+"]";return Object.prototype.toString.call(e)==n}}var Q=function(){function t(){i()(this,t)}return a()(t,null,[{key:"importScripts",value:function(t,e,n){var r="ready"+Date.now();t instanceof Array?q()(t,r):q()([t],r),q.a.ready(r,{success:e,error:n})}},{key:"blobData",value:function(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}},{key:"escapeHTML",value:function(e){if(t.isString(e))return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"getInnerWidthHeight",value:function(){return{width:window.innerWidth,height:window.innerHeight}}},{key:"Fullscreen",value:function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&(t.webkitRequestFullScreen(),setTimeout((function(){document.dispatchEvent(new Event("fullscreenchange"))}),0))}},{key:"exitFullscreen",value:function(){var t=document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&(t.webkitExitFullscreen(),setTimeout((function(){document.dispatchEvent(new Event("fullscreenchange"))}),0))}},{key:"buildFilePath",value:function(t,e){return t.map((function(t){return e+t}))}},{key:"insertSort",value:function(t,e,n){var r,i,o=t.length;if(0!==o)if(n){var a=n(e);r=a.key,i=a.value;for(var s=0;s<o;s++)if(i<t[s][r]){for(var u=o;u>s;)t[u]=t[u-1],u--;return void(t[s]=e)}t.push(e)}else{i=e;for(var l=0;l<o;l++)if(i<t[l]){for(var c=o;c>l;)t[c]=t[c-1],c--;return void(t[l]=i)}t.push(i)}else t.push(e)}},{key:"isSafari",value:function(){var t=navigator.userAgent;return/Safari/.test(t)&&!/Chrome/.test(t)}},{key:"msec2sec",value:function(t){var e=(t/1e3).toFixed(3);return parseFloat(e,10)}}]),t}();y()(Q,"isObject",(function(){return K("Object")})),y()(Q,"isString",(function(){return K("String")})),y()(Q,"isFunction",(function(){return K("Function")}));var Z=n(35),J=n.n(Z);function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var et=function(t){c()(n,t);var e=tt(n);function n(){return i()(this,n),e.call(this)}return a()(n,[{key:"size",get:function(){return this.length}},{key:"add",value:function(t){this.push(Object.freeze(t))}},{key:"addAll",value:function(t){var e=this;t.forEach((function(t){e.add(t)}))}},{key:"get",value:function(t){return this[t]}},{key:"getLast",value:function(){return this[this.length-1]}},{key:"getBy",value:function(t){var e=this;if("function"==typeof t){var n=new this.constructor;return this.every((function(r,i){return!0===t.call(e,r,i,e)&&n.add(r),!0})),n}}},{key:"indexOfByTime",value:function(t,e){e||(e=function(e){return t>=e.start&&t<e.end});for(var n=this.length-1,r=0;r<=n;){var i=Math.floor((n+r)/2),o=this[i];if(e(o))return i;o.start>t?n=i-1:r=i+1}return-1}},{key:"getByTime",value:function(t){var e=this.indexOfByTime(t);if(e>=0)return this[e]}},{key:"getByKey",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])&&(e=e[0]),this.getBy((function(t){var n=!1;return e.every((function(e){return!Object.prototype.hasOwnProperty.call(t,e)||(n=!0,!1)})),n}))}},{key:"getByValue",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])&&(e=e[0]),this.getBy((function(t){var n=!1;return t.each((function(t,r){if(e.includes(r))return n=!0,!1})),n}))}},{key:"getByKeyValue",value:function(t,e){return this.getBy((function(n){return n[t]===e}))}},{key:"getValues",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])&&(e=e[0]),this.map((function(t){return e.length?t.get(t,e):t.getValues(t)}))}},{key:"indexOfBy",value:function(t){var e=0,n=this.length;for(t=t||function(){return!1};e<n;){if(!0===t.call(this,this[e],e,this))return e;e++}return-1}},{key:"indexOfByKey",value:function(t,e){return this.indexOfBy((function(n){return n[t]===e}))}},{key:"indexOfByKeyValue",value:function(t,e){return this.indexOfByKey(t,e)}},{key:"each",value:function(t){if("function"==typeof t)return this.forEach(t),this}},{key:"remove",value:function(t,e){return this.length<=0||(t=t<0?0:t,e=e||t+1,this.splice(t,e-t)),this}},{key:"removeItem",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])&&(e=e[0]),this.removeBy((function(t){return e.includes(t)}))}},{key:"removeBy",value:function(t){for(var e=0,n=this.length;e<n;e++)!0===t.call(this,this[e],e,this)&&(this.splice(e,1),n--,e--);return this}},{key:"removeByKeyValue",value:function(t,e){return this.removeBy((function(n){return n[t]===e}))}},{key:"toJSON",value:function(){var t=Array.from(this);return t.forEach((function(e,n){t[n]=e&&"function"==typeof e.toJSON?e.toJSON():e})),t}},{key:"toArray",value:function(){return Array.from(this)}}]),n}(J()(Array)),nt=function(){function t(){i()(this,t)}return a()(t,[{key:"pair",value:function(){return Object.entries(this)}},{key:"keys",value:function(){return Object.keys(this)}},{key:"set",value:function(t,e){return this[t]=e,this}},{key:"get",value:function(t){return this[t]}},{key:"add",value:function(t,e){return Object.prototype.hasOwnProperty.call(this,t)||this.set(t,e),this}},{key:"addAll",value:function(t){for(var e in t)this.add(e,t[e]);return this}},{key:"toJSON",value:function(){var t={};for(var e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t[e]=this[e]);return t}}]),t}();function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var it=function(t){c()(n,t);var e=rt(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"no",0),y()(u()(r),"name",null),y()(u()(r),"duration",0),y()(u()(r),"file",null),y()(u()(r),"start",0),y()(u()(r),"end",0),Object.assign(u()(r),t),r}return a()(n)}(nt);function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var at=function(t){c()(n,t);var e=ot(n);function n(t){return i()(this,n),e.call(this,t)}return a()(n,[{key:"add",value:function(t){t instanceof it||(t=new it(t)),t.no=this.length+1,Q.isObject(t)&&this.push(t)}}]),n}(et),st={ProcessorResetEnd:"DataProcessorController.processorResetEnd",DataProcessorReady:"DataProcessorController.dataProcessorReady",DecodeStartDecode:"DecodeController.startDecode",DecodeFlush:"DecodeController.flush",DecodeDecoded:"DecodeController.decoded",DecodeApppendEnd:"DecodeController.appendEnd",DecodeFlushEnd:"DecodeController.flushEnd",DecodeReady:"DecodeController.ready",DemuxResetEnd:"DemuxController.resetEnd",DemuxStartDemux:"DemuxController.startDemux",DemuxLast:"DemuxController.last",DemuxVideo:"DemuxController.video",DemuxAAC:"DemuxController.AAC",DemuxReady:"DemuxController.ready",ImagePlayerRenderEnd:"ImagePlayer.renderEnd",ImagePlayerWait:"ImagePlayer.wait",ImagePlayerReady:"ImagePlayer.ready",ImagePlayerEnd:"ImagePlayer.end",ImagePlayerBuffeUpdate:"ImagePlayer.bufferUpdate",ControlBarPlay:"ControlBar.onPlay",ControlBarPause:"ControlBar.onPause",ControlBarPauseLoading:"ControlBar.onPauseLoading",DataManageReadBufferByNo:"DataManage.readBufferByNo",DataManageReadBuffer:"DataManage.readBuffer",DataManageRead:"DataManage.onRead",DataManageSeek:"DataManage.onSeek",DataManageFirstLoaded:"DataManage.onFirstLoaded",LoaderPlayListStart:"Loader.playlistStart",LoaderLoading:"Loader.onLoading",LoaderError:"Loader.onError",LoaderLoaded:"Loader.onLoaded",LoaderUpdateSpeed:"Loader.updateSpeed",LoaderLoadFile:"Loader.loadFile",LoaderPlayListLoaded:"Loader.playlistLoaded",LoaderMP4Loaded:"loader.mp4Loaded",AudioPlayerReady:"AudioPlayer.MSEReady",AudioPlayerDataReady:"AudioPlayer.dataReady",AudioPlayerWait:"AudioPlayer.wait",AudioPlayerEnd:"AudioPlayer.end",AudioPlayerPlaySuccess:"AudioPlayer.playSuccess",AudioPlayerPlayFail:"AudioPlayer.playFail",PlayerMaxPTS:"DemuxController.maxpts",PlayerSeekEnd:"Player.seekend",PlayerSpeedTo:"Player.speedTo",PlayerChangeRate:"Player.changeRate",PlayerChangeSrc:"Player.changeSrc",PlayerPlaying:"Player.playing",PlayerTimeUpdate:"Player.timeUpdate",PlayerbufferUpdate:"Player.bufferupdate",PlayerResetReady:"Player.resetReady",PlayerWait:"Player.wait",PlayerLoadNext:"Player.loadNext",PlayerOnPlay:"Player.onPlay",PlayerOnPause:"Player.onPause",PlayerOnSeek:"Player.onSeek",PlayerOnVolume:"Player.onVolume",PlayerReady:"Player.ready",PlayerPlay:"Player.play",PlayerReset:"Player.reset",PlayerLoadedMetaData:"Player.loadedMetaData",PlayerEnd:"Player.end",PlayerPause:"Player.pause",PlayerSeeking:"Player.seeking",PlayerAlert:"Player.alert",PlayerThrowError:"Player.throwError",StreamDataReady:"StreamController.dataReady"};function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var lt=function(t){c()(n,t);var e=ut(n);function n(t){var r;return i()(this,n),r=e.call(this),y()(u()(r),"state",H.IDLE),y()(u()(r),"maxBufferDuration",I.b.maxDuration),y()(u()(r),"maxBufferSize",I.b.maxSize),y()(u()(r),"baseUrl",""),y()(u()(r),"options",null),y()(u()(r),"httpWorker",null),y()(u()(r),"sourceData",null),y()(u()(r),"segmentPool",[]),y()(u()(r),"currentNo",null),y()(u()(r),"maxRetryCount",I.b.maxRetryCount),r.options=t,r.loaderController=r.options.loaderController,r.dataController=r.loaderController.dataController,r.httpWorker=t.httpWorker,r.setSegmentPool(new at),r}return a()(n,[{key:"loadPlaylist",value:function(t){var e=this;this.httpWorker.postMessage({type:"invoke",fileType:"m3u8",method:"get",name:"playlist",url:this.sourceURL}),this.httpWorker.onmessage=function(n){var r=n.data,i=n.data.data;if(i)"playlist"==r.name&&e.parsePlaylist(i,t);else{var o="Get the ".concat(r.fileType," file error. URL: ").concat(r.url);e.events.emit(st.PlayerAlert,o),e.events.emit(st.LoaderError,o,r);var a=[e.state,"request playlist error.","data:",r,o];e.events.emit(st.PlayerThrowError,a)}}}},{key:"parsePlaylist",value:function(t,e){var n=new Y(t);if(n.segments&&n.segments.length){n.segments.forEach((function(t){t.start=Q.msec2sec(t.start),t.end=Q.msec2sec(t.end),t.duration=Q.msec2sec(t.duration)})),this.setSourceData(Object.freeze(n)),this.segmentPool.addAll(n.segments),e.call(this,n)}else{this.events.emit(st.LoaderError,n),this.events.emit(st.PlayerAlert,"Parse playlist file error.");var r=[this.state,"Parse playlist error.","data:",n];this.events.emit(st.PlayerThrowError,r)}}},{key:"setSourceData",value:function(t){this.sourceData=t}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setSegmentPool",value:function(t){this.segmentPool=t}},{key:"getSegmentPool",value:function(){return this.segmentPool}},{key:"isNotFree",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t="["+t+"]loader is not free. please wait.",this.state!==H.IDLE&&this.state!==H.DONE&&(this.logger.warn("isNotFree","check status for loader","notice:",t),!0)}},{key:"getBaseUrl",value:function(t){var e=this.options.sourceURL;if(!(t.indexOf("//")>-1)){var n=e.lastIndexOf("/");return e.substr(0,n+1)}return""}},{key:"checkLoadCondition",value:function(t){return!(t.no>this.segmentPool.length)&&(!(this.dataController.getHLSBufferPool().bufferDuration>this.maxBufferDuration)||(this.logger.info("checkLoadCondition","stop load next segment.","bufferDuration:",this.dataController.getHLSBufferPool().bufferDuration,"maxBufferDuration:",this.maxBufferDuration),!1))}},{key:"loadFile",value:function(t,e,n){var r=this;if(t instanceof it)if(this.isNotFree()&&"seek"!==e&&"start"!==e)this.logger.warn("loadFile","is loading","segment:",t,"type:",e);else{if(!this.checkLoadCondition(t))return this.state=H.IDLE,void this.logger.warn("loadFile","checkLoadCondition failed","segment:",t,"type:",e);this.currentNo=t.no;var i=this.getBaseUrl(t.file)+t.file,o=1,a=function(t,e){return"function"==typeof r.options.processURL?r.options.processURL(t,e):t},s=function(){r.httpWorker.postMessage({type:"invoke",fileType:"ts",method:"get",name:t.no,url:a(i,t)})};this.state=H.LOADING,this.events.emit(st.LoaderLoading,t,e,n),this.httpWorker.onmessage=function(i){r.state=H.DONE;var a=i.data;if(r.logger.info("loadfile","httpWorker","onmessage get data"),a&&"error"!==a.type)"notice"===a.type?"speed"===a.noticeType&&r.events.emit(st.LoaderUpdateSpeed,a.data):"ts"===a.fileType&&a.name===t.no?(r.logger.info("loadFile","read success","data no:",a.name),r.state=H.IDLE,r.events.emit(st.LoaderLoaded,a,t,e,n)):r.logger.warn("loadFile","is not ts file or the segment'no is not equal.","fileType:",a.fileType,"data:",a);else if(r.state=H.ERROR,o<=r.maxRetryCount)r.logger.warn("loadFile","retry to load","count:",o,"segment:",t),s(),o+=1;else{r.events.emit(st.LoaderError,t,e,n);r.events.emit(st.PlayerAlert,"Load file error, please concat administrator.");var u=[r.state,"Load File error.","load count:",o,"segment:",t];r.events.emit(st.PlayerThrowError,u)}},s()}}},{key:"destroy",value:function(){this.httpWorker&&this.httpWorker.terminate()}}]),n}(j),ct=n(22);function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){y()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var vt={HLS:lt,MP4:function(t){c()(n,t);var e=ft(n);function n(t){var r;return i()(this,n),r=e.call(this),y()(u()(r),"state",H.IDLE),y()(u()(r),"maxBufferDuration",I.b.maxDuration),y()(u()(r),"maxBufferSize",I.b.maxSize),y()(u()(r),"baseUrl",""),y()(u()(r),"options",null),y()(u()(r),"httpWorker",null),y()(u()(r),"mp4Meta",null),y()(u()(r),"segmentPool",[]),y()(u()(r),"currentNo",null),y()(u()(r),"maxRetryCount",I.b.maxRetryCount),r.options=t,r.loaderController=r.options.loaderController,r.dataController=r.loaderController.dataController,r.httpWorker=t.httpWorker,r}return a()(n,[{key:"loadRange",value:function(t){}},{key:"preload",value:function(t){var e=this;this.httpWorker.postMessage({type:"invoke",fileType:"mp4",method:"get",name:"preloadmp4",url:this.sourceURL,options:{headers:{withCredentials:!1,cache:"no-cache",mode:"cors",responseType:"arraybuffer",Pragma:"no-cache",fileTpe:"mp4"}}}),this.httpWorker.onmessage=function(t){var n=t.data;if(t.data.data)"preloadmp4"==n.name&&(console.log("mp4 event:",t),t.data.data.arrayBuffer().then((function(t){console.error("mp4 arrayBuffer first done:",t),e.events.emit(st.LoaderMP4Loaded,t);var n=new ct.b({debug:!0});n.on(ct.a.DEMUX_DATA,(function(t){console.log("MP4Demux on:",t)})),n.on(ct.a.DONE,(function(t){console.log("MP4Demux done:",t)})),n.push(t)})),e.loadFragment({start:0,end:100},""));else{var r="Get the ".concat(n.fileType," file error. URL: ").concat(n.url);e.events.emit(st.PlayerAlert,r),e.events.emit(st.LoaderError,r,n);var i=[e.state,"preload mp4 error.","data:",n,r];e.events.emit(st.PlayerThrowError,i)}}}},{key:"isNotFree",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t="["+t+"]loader is not free. please wait.",this.state!==H.IDLE&&this.state!==H.DONE&&(this.logger.warn("isNotFree","check status for loader","notice:",t),!0)}},{key:"getBaseUrl",value:function(t){var e=this.options.sourceURL;if(!(t.indexOf("//")>-1)){var n=e.lastIndexOf("/");return e.substr(0,n+1)}return""}},{key:"checkLoadCondition",value:function(t){return!(t.no>this.segmentPool.length)&&(!(this.dataController.getMP4BufferPool().bufferDuration>this.maxBufferDuration)||(this.logger.info("checkLoadCondition","stop load next segment.","bufferDuration:",this.dataController.getMP4BufferPool().bufferDuration,"maxBufferDuration:",this.maxBufferDuration),!1))}},{key:"loadFragment",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{start:0,end:1048576},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"play",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e;if(this.isNotFree()&&"seek"!==n&&"start"!==n)this.logger.warn("loadFile","is loading","segment:",i,"type:",n);else{if(!this.checkLoadCondition(i))return this.state=H.IDLE,void this.logger.warn("loadFile","checkLoadCondition failed","segment:",i,"type:",n);var o=1,a=function(e,n){return"function"==typeof t.options.processURL?t.options.processURL(e,n):e},s=function(){t.httpWorker.postMessage({type:"invoke",fileType:"mp4",method:"get",name:i.no,url:a(url,i)})};this.state=H.LOADING,this.events.emit(st.LoaderLoading,i,n,r),this.httpWorker.onmessage=function(e){t.state=H.DONE;var a=e.data;if(t.logger.info("loadfile","httpWorker","onmessage get data"),a&&"error"!==a.type)"notice"===a.type?"speed"===a.noticeType&&t.events.emit(st.LoaderUpdateSpeed,a.data):"mp4"===a.fileType&&a.name===i.no?(t.logger.info("loadFile","read success","data no:",a.name),t.state=H.IDLE,t.events.emit(st.LoaderLoaded,a,i,n,r)):t.logger.warn("loadFile","is not mp4 file or the segment'no is not equal.","fileType:",a.fileType,"data:",a);else if(t.state=H.ERROR,o<=t.maxRetryCount)t.logger.warn("loadFile","retry to load","count:",o,"segment:",i),s(),o+=1;else{t.events.emit(st.LoaderError,i,n,r);t.events.emit(st.PlayerAlert,"Load file error, please concat administrator.");var u=[t.state,"Load File error.","load count:",o,"segment:",i];t.events.emit(st.PlayerThrowError,u)}},s()}}},{key:"destroy",value:function(){this.httpWorker&&this.httpWorker.terminate()}}]),n}(j)},yt=function(t){c()(n,t);var e=pt(n);function n(t,r){var o;return i()(this,n),o=e.call(this),y()(u()(o),"state",null),y()(u()(o),"exeLoader",null),y()(u()(o),"dataManage",null),y()(u()(o),"type","HLS"),y()(u()(o),"options",null),y()(u()(o),"dataController",null),o.type=t||o.type,o.player=r.player,o.options=r.player.options,o.dataController=o.player.dataController,o.init(o.type,o.options),o}return a()(n,[{key:"init",value:function(t,e){this.bindEvent(),this.setExeLoader(new vt[t](dt(dt({},e),{},{player:this.player,loaderController:this}))),this.setSourceURL(e.sourceURL),this.player.dataManage?this.setDataManage(this.player.dataManage):this.setDataManage(this.dataController.getDataManage(t,e)),this.exeLoader.setDataManage(this.dataManage)}},{key:"run",value:function(){switch(this.state=H.LOAD_PLAYLIST,this.events.emit(st.LoaderPlayListStart,this),this.logger.info("run",H[this.state],"url:",this.options.sourceURL),this.type.toUpperCase()){case"HLS":this.loadHLS();break;case"MP4":this.loadMP4();break;default:this.logger.erro("run","this ".concat(this.type," is not valid."),this.type)}}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoaderLoadFile,(function(e,n,r){t.exeLoader.loadFile(e,n,r)}))}},{key:"loadMP4",value:function(t){var e=this;this.exeLoader.preload((function(n){n?("function"==typeof t&&(console.info("mp4Preload data:",n),t.call(e,n)),e.state=H.PRELOADED_MP4,e.events.emit(st.LoaderMP4Loaded,e),"function"==typeof t&&t.call(e,n)):e.logger.error("run","start preload mp4","data:",n)}))}},{key:"loadHLS",value:function(t){var e=this;this.exeLoader.loadPlaylist((function(n){n?(e.dataController.setHLSSourceData(e.exeLoader.getSourceData()),e.dataController.setHLSSegmentPool(e.exeLoader.getSegmentPool()),e.state=H.LOADED_PLAYLIST,e.events.emit(st.LoaderPlayListLoaded,e),"function"==typeof t&&t.call(e,n)):e.logger.error("run","start load m3u8","data:",n)}))}},{key:"switchPlaylist",value:function(t,e){this.setSourceURL(t),this.dataController.clearDataManage(),this.state=H.LOAD_PLAYLIST,this.events.emit(st.LoaderPlayListStart,this),this.logger.info("switchPlaylist",H[this.state],"url:",t),this.loadHLS(e)}},{key:"setExeLoader",value:function(t){this.exeLoader=t}},{key:"getExeLoader",value:function(){return this.exeLoader}},{key:"setSourceURL",value:function(t){this.exeLoader.setSourceURL(t)}},{key:"getSourceURL",value:function(){return this.exeLoader.getSourceURL()}},{key:"setDataManage",value:function(t){this.dataManage=t}},{key:"getDataManage",value:function(){return this.dataManage}},{key:"getSourceData",value:function(){return this.exeLoader.getSourceData()}},{key:"destroy",value:function(){this.exeLoader.destroy()}}]),n}(D);function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var mt=function(t){c()(n,t);var e=gt(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"no",0),y()(u()(r),"start",0),y()(u()(r),"end",0),y()(u()(r),"blob",null),y()(u()(r),"arrayBuffer",null),y()(u()(r),"duration",0),Object.assign(u()(r),t),r}return a()(n,[{key:"size",get:function(){return this.blob.size}}]),n}(nt);function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var xt=function(t){c()(n,t);var e=bt(n);function n(t){return i()(this,n),e.call(this,t)}return a()(n,[{key:"add",value:function(t){t instanceof mt||(t=new mt(t));var e=this.length;if(0!==e){for(;e--;)if(t.no<=this[e].no)return void this.splice(e,1,t);return this.push(t),this}this.push(t)}},{key:"getBufferSize",value:function(){return this.length<=0?0:this.reduce((function(t,e){return isNaN(t)&&(t=t.blob.size),t+e.blob.size}))}},{key:"bufferSize",get:function(){return this.getBufferSize()}},{key:"getBufferDuration",value:function(){return this.length<=0?0:this.reduce((function(t,e){return isNaN(t)&&(t=t.end-t.start),t+(e.end-e.start)}))}},{key:"bufferDuration",get:function(){return this.getBufferDuration()}}]),n}(et);function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var wt=function(t){c()(n,t);var e=kt(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this),y()(u()(t),"bufferPool",[]),y()(u()(t),"sourceData",{}),y()(u()(t),"options",{}),y()(u()(t),"segmentPool",[]),y()(u()(t),"readBufferNo",null),y()(u()(t),"startLoadTime",null),y()(u()(t),"currentSeekTime",null),t.options=r,t.init(),t}return a()(n,[{key:"init",value:function(){var t=this;this.setBufferPool(new xt),this.events.on(st.DataManageReadBufferByNo,(function(e,n){t.readBufferByNo(e,n)})),this.events.on(st.DataManageReadBuffer,(function(e,n){t.readBuffer(e,n)})),this.events.on(st.LoaderLoaded,(function(e,n,r,i){var o=t.createBuffer({arrayBuffer:e.arrayBuffer},n);if(t.segmentLoaded(n,o),"seek"===r&&i===t.currentSeekTime)return t.events.emit(st.DataManageSeek,o,i),void t.removeBufferByNo(o.no);i===t.startLoadTime&&t.events.emit(st.DataManageFirstLoaded,o,i)}))}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"startLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.logger.info("startLoad","begin to load ts data","time:",t),isNaN(t)?this.logger.error("seekTime","seek","time:",t):(this.startLoadTime=t,this.loadSegmentByTime(t,"start"))}},{key:"readBuffer",value:function(t,e){var n=this.getSegmentByTime(t);n&&this.readBufferByNo(n.no,e)}},{key:"segmentLoaded",value:function(t,e){e&&this.addBufferPool(e),t.no===this.options.player.currentIndex&&this.readBufferByNo(t.no),t.no<this.segmentPool.getLast().no&&this.loadSegmentByNo(t.no+1)}},{key:"seekTime",value:function(t){if(isNaN(t))this.logger.error("seekTime","seek","time:",t);else{var e;this.currentSeekTime=t;var n=this.bufferPool.indexOfByTime(t);n>-1?(e=this.bufferPool[n],this.events.emit(st.DataManageSeek,e,t)):(this.removeBufferPool(this.bufferPool.length),this.loadSegmentByTime(t,"seek"))}}},{key:"loadSegmentByTime",value:function(t,e){if(!isNaN(t)){var n=this.segmentPool.indexOfByTime(t);if(n>=0){var r=this.segmentPool[n];this.events.emit(st.LoaderLoadFile,r,e,t)}else this.logger.error("loadSegmentByTime","time over","time:",t,"type:",e)}}},{key:"createBuffer",value:function(t,e){if(t){var n={start:e.start,end:e.end,no:e.no,duration:e.end-e.start,arrayBuffer:t.arrayBuffer};return new mt(n)}}},{key:"isValidSegmentNo",value:function(t){return!isNaN(t)&&t>0&&t<=this.segmentPool.length}},{key:"loadSegmentByNo",value:function(t){var e=t-1,n=this.segmentPool.get(e);n&&this.events.emit(st.LoaderLoadFile,n,"play")}},{key:"readBufferByNo",value:function(t,e){this.isValidSegmentNo(t)?(this.readBufferNo=t,e=e||function(t){this.events.emit(st.DataManageRead,t)},this.getBlobByNo(t,e)):this.logger.error("readBufferByNo","check buffer no","is not valid no",t)}},{key:"getSegmentByTime",value:function(t){var e=this.segmentPool.indexOfByTime(t);return this.segmentPool[e]}},{key:"getBlobByNo",value:function(t,e){if(isNaN(t))this.logger.error("getBlobByNo","isNaN","no:",t);else{var n;if(!this.isBufferReading)return this.isBufferReading=!0,n=this.bufferPool.getByKeyValue("no",t)[0],"function"==typeof e&&(e.call(this,n),n&&this.removeBufferByNo(n.no)),this.isBufferReading=!1,n;this.logger.warn("getBlobByNo","isBufferReading","no:",t)}}},{key:"addBufferPool",value:function(t){if(this.bufferPool.length){if(this.bufferPool[0].no===t.no+1)return this.bufferPool.unshift(t),!0;var e=this.bufferPool.getLast();if(t.no-e.no==1)return this.bufferPool.push(t),!0;if(this.bufferPool.indexOfByKey("no",t.no))return!0;this.bufferPool.splice(0,this.bufferPool.length)}this.bufferPool.push(t)}},{key:"removeBufferPool",value:function(t){this.bufferPool.splice(0,t+1)}},{key:"removeBufferByNo",value:function(t){var e=this.bufferPool.indexOfByKey("no",t);if(!(e<=-1))return this.removeBufferPool(e),this.bufferPool.length?this.bufferPool.getLast().no<this.segmentPool.getLast().no&&this.loadSegmentByNo(this.bufferPool.getLast().no+1):t<this.segmentPool.getLast().no&&this.loadSegmentByNo(t+1),!0}},{key:"clear",value:function(){this.sourceData={},this.readBufferNo=null,this.currentSeekTime=null,this.bufferPool.length=0,this.segmentPool.length=0}},{key:"getSegmentByNo",value:function(t){return this.segmentPool.get(t-1)}},{key:"getSegment",value:function(t){return this.segmentPool.getByTime(t)}},{key:"setSourceData",value:function(t){this.sourceData=t}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setBufferPool",value:function(t){this.bufferPool=t}},{key:"getBufferPool",value:function(){return this.bufferPool}},{key:"setSegmentPool",value:function(t){this.segmentPool=t}},{key:"getSegmentPool",value:function(){return this.segmentPool}}]),n}(N);function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var _t=function(t){c()(n,t);var e=Pt(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this),y()(u()(t),"bufferPool",[]),y()(u()(t),"sourceData",{}),y()(u()(t),"options",{}),y()(u()(t),"segmentPool",[]),y()(u()(t),"readBufferNo",null),y()(u()(t),"startLoadTime",null),y()(u()(t),"currentSeekTime",null),t.options=r,t.init(),t}return a()(n,[{key:"init",value:function(){var t=this;this.setBufferPool(new xt),this.events.on(st.DataManageReadBufferByNo,(function(e,n){t.readBufferByNo(e,n)})),this.events.on(st.DataManageReadBuffer,(function(e,n){t.readBuffer(e,n)})),this.events.on(st.LoaderLoaded,(function(e,n,r,i){var o=t.createBuffer({arrayBuffer:e.arrayBuffer},n);if(t.segmentLoaded(n,o),"seek"===r&&i===t.currentSeekTime)return t.events.emit(st.DataManageSeek,o,i),void t.removeBufferByNo(o.no);i===t.startLoadTime&&t.events.emit(st.DataManageFirstLoaded,o,i)}))}},{key:"setOptions",value:function(t){Object.assign(this.options,t)}},{key:"startLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.logger.info("startLoad","begin to load ts data","time:",t),isNaN(t)?this.logger.error("seekTime","seek","time:",t):(this.startLoadTime=t,this.loadSegmentByTime(t,"start"))}},{key:"readBuffer",value:function(t,e){var n=this.getSegmentByTime(t);n&&this.readBufferByNo(n.no,e)}},{key:"segmentLoaded",value:function(t,e){e&&this.addBufferPool(e),t.no===this.options.player.currentIndex&&this.readBufferByNo(t.no),t.no<this.segmentPool.getLast().no&&this.loadSegmentByNo(t.no+1)}},{key:"seekTime",value:function(t){if(isNaN(t))this.logger.error("seekTime","seek","time:",t);else{var e;this.currentSeekTime=t;var n=this.bufferPool.indexOfByTime(t);n>-1?(e=this.bufferPool[n],this.events.emit(st.DataManageSeek,e,t)):(this.removeBufferPool(this.bufferPool.length),this.loadSegmentByTime(t,"seek"))}}},{key:"loadSegmentByTime",value:function(t,e){if(!isNaN(t)){var n=this.segmentPool.indexOfByTime(t);if(n>=0){var r=this.segmentPool[n];this.events.emit(st.LoaderLoadFile,r,e,t)}else this.logger.error("loadSegmentByTime","time over","time:",t,"type:",e)}}},{key:"createBuffer",value:function(t,e){if(t){var n={start:e.start,end:e.end,no:e.no,duration:e.end-e.start,arrayBuffer:t.arrayBuffer};return new mt(n)}}},{key:"isValidSegmentNo",value:function(t){return!isNaN(t)&&t>0&&t<=this.segmentPool.length}},{key:"loadSegmentByNo",value:function(t){var e=t-1,n=this.segmentPool.get(e);n&&this.events.emit(st.LoaderLoadFile,n,"play")}},{key:"readBufferByNo",value:function(t,e){this.isValidSegmentNo(t)?(this.readBufferNo=t,e=e||function(t){this.events.emit(st.DataManageRead,t)},this.getBlobByNo(t,e)):this.logger.error("readBufferByNo","check buffer no","is not valid no",t)}},{key:"getSegmentByTime",value:function(t){var e=this.segmentPool.indexOfByTime(t);return this.segmentPool[e]}},{key:"getBlobByNo",value:function(t,e){if(isNaN(t))this.logger.error("getBlobByNo","isNaN","no:",t);else{var n;if(!this.isBufferReading)return this.isBufferReading=!0,n=this.bufferPool.getByKeyValue("no",t)[0],"function"==typeof e&&(e.call(this,n),n&&this.removeBufferByNo(n.no)),this.isBufferReading=!1,n;this.logger.warn("getBlobByNo","isBufferReading","no:",t)}}},{key:"addBufferPool",value:function(t){if(this.bufferPool.length){if(this.bufferPool[0].no===t.no+1)return this.bufferPool.unshift(t),!0;var e=this.bufferPool.getLast();if(t.no-e.no==1)return this.bufferPool.push(t),!0;if(this.bufferPool.indexOfByKey("no",t.no))return!0;this.bufferPool.splice(0,this.bufferPool.length)}this.bufferPool.push(t)}},{key:"removeBufferPool",value:function(t){this.bufferPool.splice(0,t+1)}},{key:"removeBufferByNo",value:function(t){var e=this.bufferPool.indexOfByKey("no",t);if(!(e<=-1))return this.removeBufferPool(e),this.bufferPool.length?this.bufferPool.getLast().no<this.segmentPool.getLast().no&&this.loadSegmentByNo(this.bufferPool.getLast().no+1):t<this.segmentPool.getLast().no&&this.loadSegmentByNo(t+1),!0}},{key:"clear",value:function(){this.sourceData={},this.readBufferNo=null,this.currentSeekTime=null,this.bufferPool.length=0,this.segmentPool.length=0}},{key:"getSegmentByNo",value:function(t){return this.segmentPool.get(t-1)}},{key:"getSegment",value:function(t){return this.segmentPool.getByTime(t)}},{key:"setSourceData",value:function(t){this.sourceData=t}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setBufferPool",value:function(t){this.bufferPool=t}},{key:"getBufferPool",value:function(){return this.bufferPool}},{key:"setSegmentPool",value:function(t){this.segmentPool=t}},{key:"getSegmentPool",value:function(){return this.segmentPool}}]),n}(N);function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Bt=function(t){c()(n,t);var e=St(n);function n(t){var r;return i()(this,n),r=e.call(this),y()(u()(r),"type",null),y()(u()(r),"dataManage",null),y()(u()(r),"hlsDataManage",null),y()(u()(r),"mp4DataManage",null),r.options=t,r.type=r.options.type||"HLS",r}return a()(n,[{key:"setDataManage",value:function(t){switch(t.type.toUpperCase()){case"HLS":this.setHLSDataManage(t),this.dataManage=this.hlsDataManage;break;case"MP4":this.setMP4DataManage(t),this.dataManage=this.mp4DataManage}}},{key:"setHLSDataManage",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hlsDataManage=C()(wt,e)}},{key:"setMP4DataManage",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.mp4DataManage=C()(_t,e)}},{key:"getHLSDataManage",value:function(){if(null==this.hlsDataManage){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.setHLSDataManage(e)}return this.hlsDataManage}},{key:"getMP4DataManage",value:function(){if(null==this.mp4DataManage){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.mp4DataManage(e)}return this.mp4DataManage}},{key:"getMP4BufferPool",value:function(){return this.mp4DataManage.bufferPool}},{key:"getHLSBufferPool",value:function(){return this.hlsDataManage.bufferPool}},{key:"setHLSSourceData",value:function(t){this.hlsDataManage.setSourceData(t)}},{key:"setHLSSegmentPool",value:function(t){this.hlsDataManage.setSegmentPool(t)}},{key:"startLoad",value:function(t){switch(t=Math.max(t,0),this.type.toUpperCase()){case"HLS":this.hlsDataManage.startLoad(t);break;case"MP4":this.mp4DataManage.startLoad(t);break;default:this.logger.error("startLoad","type error",this.type)}}},{key:"clearDataManage",value:function(){this.dataManage.clear()}},{key:"getDataManage",value:function(t){if(t)switch(t.toUpperCase()){case"HLS":return this.getHLSDataManage();case"MP4":return this.getMP4DataManage()}}}]),n}(D);function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Tt,Rt,Lt=function(t){c()(n,t);var e=Et(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"checkHanlder",null),y()(u()(r),"resetStatus",{processor:!1,audioPlayer:!1}),r.player=t.player,r.player?(r.audioPlayer=t.audioPlayer,r.imagePlayer=t.imagePlayer,r.dataManage=t.dataManage,r.bindEvent(),r):h()(r)}return a()(n,[{key:"bindEvent",value:function(){var t=this;this.events.on(st.ProcessorResetEnd,(function(){t.checkResetReady("processor")})),this.events.on(st.AudioPlayerReady,(function(){t.checkResetReady("audioPlayer")})),this.events.on(st.PlayerResetReady,(function(){t.onResetReady()})),this.events.on(st.DataManageSeek,(function(e,n){t.onSeek(e,n)})),this.events.on(st.ImagePlayerRenderEnd,(function(e,n){t.onRenderEnd(e,n)})),this.events.on(st.ImagePlayerWait,(function(){t.audioPlayer.pause()}))}},{key:"play",value:function(t){this.logger.warn("play","play start"),this.sync(t)}},{key:"sync",value:function(t){var e=this.player,n=this.audioPlayer,r=this.imagePlayer,i=n.offset,o=r.offset,a=Math.min(i,o),s=Math.max(i,o);n.need||(a=o,s=o);var u=e.playbackRate;if(e.seeking&&(e.seeking=!1),!e.reseting&&"pause"!==e.status&&"waiting"!==n.status&&"wait"!==r.status)if("end"!==e.status){if(this.setCurrentTime(t),!(t<a))return n.need&&t>=i&&t<=o?(this.events.once(st.AudioPlayerPlaySuccess,(function(){r.render(o)})),n.playbackRate=u,void n.play()):void(t>=o&&(!n.need||t<=i)?r.render(t):t>s&&(this.audioPlayer.playbackRate=u,this.audioPlayer.play(),r.render(t)));this.sync(a)}else n.paused||n.pause()}},{key:"setCurrentTime",value:function(t){this.player.currentTime=t,this.events.emit(st.PlayerTimeUpdate,t)}},{key:"pause",value:function(){this.audioPlayer.pause(),this.clearDrawHanlder()}},{key:"seek",value:function(t){var e=this,n=this.imagePlayer.isBuffered(t),r=this.audioPlayer.isBuffered(t);this.player.pause(),n&&r?(this.logger.warn("seek","seek in buffer, time: ".concat(t,", buffer: ").concat(this.player.buffer()[0],", ").concat(this.player.buffer()[1])),this.audioPlayer.onSeekedHandler=function(){e.player.play()},this.audioPlayer.currentTime=t):this.reset()}},{key:"reset",value:function(t){this.logger.info("reset","reset start"),this.player.reseting=!0,this.events.emit(st.PlayerReset,t),this.resetStatus={processor:!1,audioPlayer:!1},this.player.processController.reset(),this.player.streamController.reset(),this.player.audioPlayer.reset(t),this.player.imagePlayer.reset(),this.player.currentIndex=null}},{key:"checkResetReady",value:function(t){var e=this.resetStatus;if(t&&"string"==typeof t){e[t]=!0;for(var n=Object.keys(e),r=0;r<n.length;r++)if(!e[n[r]])return!1;this.logger.warn("checkResetReady","reset ready"),this.events.emit(st.PlayerResetReady)}}},{key:"onResetReady",value:function(){this.player.reseting=!1,this.logger.info("onResetReady","reset Ready"),this.player.changing&&this.events.emit(st.DataProcessorReady),this.player.seeking&&this.player.dataManage.seekTime(this.player.currentTime/1e3)}},{key:"onSeek",value:function(t,e){var n=this.player.currentTime;this.logger.info("onseek",n,t,t.no,e),t&&t.no&&Math.abs(n-Math.floor(1e3*e))<2?(this.player.currentIndex=t.no,this.logger.info("seektime:",t.no,e,this.player.currentTime),this.player.seekSegmentNo=t.no,this.player.streamController.startLoad(t.no)):this.logger.warn("seek failue, not found data",n,t,e)}},{key:"clearDrawHanlder",value:function(){clearTimeout(this.drawFrameHanlder),this.drawFrameHanlder=null}},{key:"onRenderEnd",value:function(t,e){this.player.seekTime&&(this.logger.info("onRenderEnd","seektoRenderTime:",Date.now()-this.player.seekTime),this.player.seekTime=null);var n=this.imagePlayer,r=this.audioPlayer,i=this.player.playbackRate,o=r.currentTime,a=n.currentTime,s=r.offset,u=n.fragDuration,l=o-a,c=0;r.need?a<s?this.drawNext(a+u*i,u):(l>0&&l>u?u=(c=a+Math.ceil(l/u+i)*u)-o:(c=a+u*i,u-=l),this.drawNext(c,u)):this.drawNext(t+e,Math.ceil(e/i))}},{key:"drawNext",value:function(t,e){var n=this;this.drawFrameHanlder&&this.clearDrawHanlder(),this.drawFrameHanlder=setTimeout((function(){n.sync(t)}),e)}}]),n}(N);function At(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function Ot(t){if(Tt){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Tt.apply(void 0,[t].concat(n))}}function Mt(t){if(Rt){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Rt.apply(void 0,[t].concat(n))}}var Ut=function(){function t(e){i()(this,t),this.payload=e,this.nri=(96&this.payload[0])>>5,this.ntype=31&this.payload[0]}return a()(t,[{key:"toString",value:function(){return"".concat(t.type(this),": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri>>6}},{key:"type",value:function(){return this.ntype}},{key:"isKeyframe",value:function(){return this.ntype==t.IDR}},{key:"getSize",value:function(){return 4+this.payload.byteLength}},{key:"getData",value:function(){var t=new Uint8Array(this.getSize());return new DataView(t.buffer).setUint32(0,this.getSize()-4),t.set(this.payload,4),t}}],[{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){return y()(y()(y()(y()(y()(y()({},t.IDR,"IDR"),t.SEI,"SEI"),t.SPS,"SPS"),t.PPS,"PPS"),t.NDR,"NDR"),t.AUD,"AUD")}},{key:"type",value:function(e){return e.ntype in t.TYPES?t.TYPES[e.ntype]:"UNKNOWN"}}]),t}(),Nt=function(){function t(e){i()(this,t),this.data=e,this.index=0,this.bitLength=8*e.byteLength}return a()(t,[{key:"bitsAvailable",get:function(){return this.bitLength-this.index}},{key:"skipBits",value:function(t){if(this.bitsAvailable<t)return!1;this.index+=t}},{key:"readBits",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getBits(t,this.index,e);return n}},{key:"getBits",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.bitsAvailable<t)return 0;var r=e%8,i=this.data[e/8|0]&255>>>r,o=8-r;if(o>=t)return n&&(this.index+=t),i>>o-t;n&&(this.index+=o);var a=t-o;return i<<a|this.getBits(a,e+o,n)}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitLength-this.index;++t)if(0!==this.getBits(1,this.index+t,!1))return this.index+=t,t;return t}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readBits(8*t)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}}]),t}(),It=function(){function t(e){i()(this,t),this.remuxer=e,this.track=e.mp4track}return a()(t,[{key:"parseSPS",value:function(e){var n=t.readSPS(new Uint8Array(e));this.track.width=n.width,this.track.height=n.height,this.track.sps=[new Uint8Array(e)],this.track.codec="avc1.";for(var r=new DataView(e.buffer,e.byteOffset+1,4),i=0;i<3;++i){var o=r.getUint8(i).toString(16);o.length<2&&(o="0"+o),this.track.codec+=o}}},{key:"parsePPS",value:function(t){this.track.pps=[new Uint8Array(t)]}},{key:"parseNAL",value:function(t){if(!t)return!1;var e=!1;switch(t.type()){case Ut.NDR:case Ut.IDR:e=!0;break;case Ut.PPS:this.track.pps||(this.parsePPS(t.getData().subarray(4)),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),e=!0;break;case Ut.SPS:this.track.sps||(this.parseSPS(t.getData().subarray(4)),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),e=!0;break;case Ut.AUD:Ot("AUD - ignoing and disable HD mode for live channel"),this.remuxer.isHDAvail&&(this.remuxer.isHDAvail=!1);break;case Ut.SEI:Ot("SEI - ignoing")}return e}}],[{key:"extractNALu",value:function(t){for(var e,n,r=0,i=t.byteLength,o=0,a=[];r<i;)switch(e=t[r++],o){case 0:0===e&&(o=1);break;case 1:o=0===e?2:0;break;case 2:case 3:0===e?o=3:1===e&&r<i?(n&&a.push(t.subarray(n,r-o-1)),n=r,o=0):o=0}return n&&a.push(t.subarray(n,i)),a}},{key:"skipScalingList",value:function(t,e){for(var n=8,r=8,i=0;i<e;i++)0!==r&&(r=(n+t.readEG()+256)%256),n=0===r?n:r}},{key:"readSPS",value:function(e){var n,r,i,o,a,s,u=new Nt(e),l=0,c=0,f=0,h=0,d=1;if(u.readUByte(),n=u.readUByte(),u.readBits(5),u.skipBits(3),u.readUByte(),u.skipUEG(),100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n){var p=u.readUEG();if(3===p&&u.skipBits(1),u.skipUEG(),u.skipUEG(),u.skipBits(1),u.readBoolean()){s=3!==p?8:12;for(var v=0;v<s;++v)u.readBoolean()&&(v<6?t.skipScalingList(u,16):t.skipScalingList(u,64))}}u.skipUEG();var y=u.readUEG();if(0===y)u.readUEG();else if(1===y){u.skipBits(1),u.skipEG(),u.skipEG(),r=u.readUEG();for(var g=0;g<r;++g)u.skipEG()}if(u.skipUEG(),u.skipBits(1),i=u.readUEG(),o=u.readUEG(),0===(a=u.readBits(1))&&u.skipBits(1),u.skipBits(1),u.readBoolean()&&(l=u.readUEG(),c=u.readUEG(),f=u.readUEG(),h=u.readUEG()),u.readBoolean()){if(u.readBoolean()){var m;switch(u.readUByte()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[u.readUByte()<<8|u.readUByte(),u.readUByte()<<8|u.readUByte()]}m&&(d=m[0]/m[1])}if(u.readBoolean()&&u.skipBits(1),u.readBoolean()&&(u.skipBits(4),u.readBoolean()&&u.skipBits(24)),u.readBoolean()&&(u.skipUEG(),u.skipUEG()),u.readBoolean())u.readUInt(),u.readUInt(),u.readBoolean()}return{width:Math.ceil((16*(i+1)-2*l-2*c)*d),height:(2-a)*(o+1)*16-(a?2:4)*(f+h)}}}]),t}(),Ft=function(){function t(e){i()(this,t),this.listener={},this.type=""|e}return a()(t,[{key:"on",value:function(t,e){return this.listener[t]||(this.listener[t]=[]),this.listener[t].push(e),!0}},{key:"off",value:function(t,e){if(this.listener[t]){var n=this.listener[t].indexOf(e);return n>-1&&this.listener[t].splice(n,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(t,e){return!!this.listener[t]&&(this.listener[t].map((function(t){t.apply(null,[e])})),!0)}}]),t}(),jt=Math.pow(2,32)-1,Ht=function(){function t(){i()(this,t)}return a()(t,null,[{key:"init",value:function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,u,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))}},{key:"box",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i,o=8,a=n.length,s=a;a--;)o+=n[a].byteLength;for((i=new Uint8Array(o))[0]=o>>24&255,i[1]=o>>16&255,i[2]=o>>8&255,i[3]=255&o,i.set(t,4),a=0,o=8;a<s;++a)i.set(n[a],o),o+=n[a].byteLength;return i}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,n){n*=e;var r=Math.floor(n/(jt+1)),i=Math.floor(n%(jt+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))}},{key:"moof",value:function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))}},{key:"moov",value:function(e,n,r){for(var i=e.length,o=[];i--;)o[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(r,n)].concat(o).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))}},{key:"mvhd",value:function(e,n){n*=e;var r=Math.floor(n/(jt+1)),i=Math.floor(n%(jt+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)}},{key:"sdtp",value:function(e){var n,r,i=e.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,o)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"avc1",value:function(e){var n,r,i,o=[],a=[];for(n=0;n<e.sps.length;n++)i=(r=e.sps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)i=(r=e.pps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(a))),u=e.width,l=e.height;return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(t){var e=t.config.byteLength,n=new Uint8Array(26+e+3);return n.set([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]),n.set(t.config,26),n.set([6,1,2],26+e),n}},{key:"mp4a",value:function(e){var n=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"stsd",value:function(e){return"audio"===e.type?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var n=e.id,r=e.duration*e.timescale,i=e.width,o=e.height,a=Math.floor(r/(jt+1)),s=Math.floor(r%(jt+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(e,n){var r=t.sdtp(e),i=e.id,o=Math.floor(n/(jt+1)),a=Math.floor(n%(jt+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),t.trun(e,r.length+16+20+8+16+8+8),r)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,n){var r,i,o,a,s,u,l=e.samples||[],c=l.length,f=12+16*c,h=new Uint8Array(f);for(n+=8+f,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)o=(i=l[r]).duration,a=i.size,s=i.flags,u=i.cts,h.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return t.box(t.types.trun,h)}},{key:"initSegment",value:function(e,n,r){t.types||t.init();var i,o=t.moov(e,n,r);return(i=new Uint8Array(t.FTYP.byteLength+o.byteLength)).set(t.FTYP),i.set(o,t.FTYP.byteLength),i}}]),t}(),Wt=function(){function t(e){i()(this,t),this.remuxer=e,this.track=e.mp4track,this.aacHeader=null}return a()(t,[{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getAACHeaderData",get:function(){return this.aacHeader}},{key:"setAACHeaderData",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.aacHeader=t}},{key:"getHeaderLength",value:function(t){return 1&t[1]?7:9}},{key:"getFrameLength",value:function(t){return(3&t[3])<<11|t[4]<<3|(224&t[5])>>>5}},{key:"isAACPattern",value:function(t){return 255===t[0]&&240==(240&t[1])&&0==(6&t[1])}},{key:"extractAAC",value:function(t){var e,n,r=0,i=t.byteLength,o=[];if(!this.isAACPattern(t))return Mt("Invalid ADTS audio format"),o;for(e=this.getHeaderLength(t),this.aacHeader||(this.aacHeader=t.subarray(0,e));r<i;)n=this.getFrameLength(t),o.push(t.subarray(e,n)),t=t.slice(n),r+=n;return o}},{key:"setAACConfig",value:function(){var t,e,n,r=new Uint8Array(2),i=this.getAACHeaderData;i&&(t=1+((192&i[2])>>>6),e=(60&i[2])>>>2,n=(1&i[2])<<2,n|=(192&i[3])>>>6,r[0]=t<<3,r[0]|=(14&e)>>1,r[1]|=(1&e)<<7,r[1]|=n<<3,this.track.codec="mp4a.40."+t,this.track.channelCount=n,this.track.config=r,this.remuxer.readyToDecode=!0)}}]),t}(),Vt=1,zt=function(){function t(){i()(this,t),this.seq=1}return a()(t,[{key:"flush",value:function(){this.seq++,this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!(!this.readyToDecode||!this.samples.length)||null}}],[{key:"getTrackID",value:function(){return Vt++}}]),t}(),Gt=function(t){c()(n,t);var e=Dt(n);function n(){var t;return i()(this,n),(t=e.call(this)).readyToDecode=!1,t.nextDts=0,t.dts=0,t.timescale=1e3,t.mp4track={id:zt.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:t.timescale,duration:t.timescale,samples:[],config:"",codec:""},t.samples=[],t.aac=new Wt(u()(t)),t}return a()(n,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale}},{key:"remux",value:function(t){var e,n,r,i=At(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;e=(n=o.units).byteLength,this.samples.push({units:n,size:e,duration:o.duration}),this.mp4track.len+=e,this.readyToDecode||this.aac.setAACConfig()}}catch(t){i.e(t)}finally{i.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var t,e,n=new Uint8Array(this.mp4track.len),r=0,i=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var o=this.samples.shift();(e=o.duration)<=0?(Ot("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(e)),this.mp4track.len-=o.size):(this.nextDts+=e,t={size:o.size,duration:e,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},n.set(o.units,r),r+=o.size,i.push(t))}return i.length?new Uint8Array(n.buffer,0,this.mp4track.len):null}}]),n}(zt),Xt=function(t){c()(n,t);var e=Dt(n);function n(){var t;return i()(this,n),(t=e.call(this)).readyToDecode=!1,t.nextDts=0,t.dts=0,t.timescale=1e3,t.mp4track={id:zt.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t.timescale,duration:t.timescale,samples:[]},t.samples=[],t.h264=new It(u()(t)),t}return a()(n,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps=""}},{key:"remux",value:function(t){var e,n,r,i,o,a,s=At(t);try{for(s.s();!(a=s.n()).done;){e=a.value,n=[],i=0,o=!1;var u,l=At(e.units);try{for(l.s();!(u=l.n()).done;)r=u.value,this.h264.parseNAL(r)&&(n.push(r),i+=r.getSize(),o||(o=r.isKeyframe()))}catch(t){l.e(t)}finally{l.f()}n.length>0&&this.readyToDecode&&(this.mp4track.len+=i,this.samples.push({units:n,size:i,keyFrame:o,duration:e.duration}))}}catch(t){s.e(t)}finally{s.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var t,e,n=new Uint8Array(this.mp4track.len),r=0,i=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var o=this.samples.shift(),a=o.units;if((e=o.duration)<=0)Ot("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(e)),this.mp4track.len-=o.size;else{this.nextDts+=e,t={size:o.size,duration:e,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:o.keyFrame?0:1,dependsOn:o.keyFrame?2:1}};var s,u=At(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;n.set(l.getData(),r),r+=l.getSize()}}catch(t){u.e(t)}finally{u.f()}i.push(t)}}return i.length?new Uint8Array(n.buffer,0,this.mp4track.len):null}}]),n}(zt);function Yt(t,e){var n=new Uint8Array((0|t.byteLength)+(0|e.byteLength));return n.set(t,0),n.set(e,0|t.byteLength),n}var $t=function(t){c()(n,t);var e=Dt(n);function n(t){var r;return i()(this,n),(r=e.call(this,"remuxer")).initialized=!1,r.trackTypes=[],r.tracks={},r.mediaDuration=t?1/0:1e3,r}return a()(n,[{key:"addTrack",value:function(t){"video"!==t&&"both"!==t||(this.tracks.video=new Xt,this.trackTypes.push("video")),"audio"!==t&&"both"!==t||(this.tracks.audio=new Gt,this.trackTypes.push("audio"))}},{key:"reset",value:function(){var t,e=At(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.tracks[n].resetTrack()}}catch(t){e.e(t)}finally{e.f()}this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(this.initialized){var t,e=At(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var n=t.value,r=this.tracks[n],i=r.getPayload();if(i&&i.byteLength){var o={type:n,payload:Yt(Ht.moof(r.seq,r.dts,r.mp4track),Ht.mdat(i)),dts:r.dts};this.dispatch("buffer",o);var a=(h=r.dts/1e3,d=void 0,p=void 0,v=void 0,y=void 0,y="",d=Math.floor(h),(p=parseInt(d/3600,10)%24)>0&&(y+=(p<10?"0"+p:p)+":"),y+=((v=parseInt(d/60,10)%60)<10?"0"+v:v)+":"+((d=d<0?0:d%60)<10?"0"+d:d));Ot("put segment (".concat(n,"): ").concat(r.seq," dts: ").concat(r.dts," samples: ").concat(r.mp4track.samples.length," second: ").concat(a)),r.flush()}}}catch(t){e.e(t)}finally{e.f()}}else if(this.isReady()){this.dispatch("ready");var s,u=At(this.trackTypes);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=this.tracks[l],f={type:l,payload:Ht.initSegment([c.mp4track],this.mediaDuration,c.mp4track.timescale)};this.dispatch("buffer",f)}}catch(t){u.e(t)}finally{u.f()}Ot("Initial segment generated."),this.initialized=!0}var h,d,p,v,y}},{key:"isReady",value:function(){var t,e=At(this.trackTypes);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!this.tracks[n].readyToDecode||!this.tracks[n].samples.length)return!1}}catch(t){e.e(t)}finally{e.f()}return!0}},{key:"remux",value:function(t){var e,n=At(this.trackTypes);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=t[r];"audio"===r&&this.tracks.video&&!this.tracks.video.readyToDecode||i.length>0&&this.tracks[r].remux(i)}}catch(t){n.e(t)}finally{n.f()}this.flush()}}]),n}(Ft),qt=function(t){c()(n,t);var e=Dt(n);function n(t,r){var o;return i()(this,n),(o=e.call(this,"buffer")).type=r,o.queue=new Uint8Array,o.cleaning=!1,o.pendingCleaning=0,o.cleanOffset=30,o.cleanRanges=[],o.sourceBuffer=t,o.sourceBuffer.addEventListener("updateend",(function(){o.dispatch("updateend",Date.now()),o.pendingCleaning>0&&(o.initCleanup(o.pendingCleaning),o.pendingCleaning=0),o.cleaning=!1,o.cleanRanges.length&&o.doCleanup()})),o.sourceBuffer.addEventListener("error",(function(t){o.dispatch("error",{type:o.type,name:"buffer",error:t})})),o}return a()(n,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(this.cleanRanges.length){var t=this.cleanRanges.shift();Ot("".concat(this.type," remove range [").concat(t[0]," - ").concat(t[1],")")),this.cleaning=!0,this.sourceBuffer.remove(t[0],t[1]),this.dispatch("clearBuffer")}else this.cleaning=!1}},{key:"initCleanup",value:function(t){if(this.sourceBuffer.updating)this.pendingCleaning=t;else if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var e=0;e<this.sourceBuffer.buffered.length;++e){var n=this.sourceBuffer.buffered.start(e),r=this.sourceBuffer.buffered.end(e);t-n>this.cleanOffset&&n<(r=t-this.cleanOffset)&&this.cleanRanges.push([n,r])}this.doCleanup()}}},{key:"doAppend",value:function(){if(this.queue.length&&!this.sourceBuffer.updating)try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(t){if("QuotaExceededError"===t.name)return Ot("".concat(this.type," buffer quota full")),void this.dispatch("error",{type:this.type,name:"QuotaExceeded",error:"buffer error"});Mt("Error occured while appending ".concat(this.type," buffer -  ").concat(t.name,": ").concat(t.message)),this.dispatch("error",{type:this.type,name:"unexpectedError",error:"buffer error"})}}},{key:"feed",value:function(t){this.queue=Yt(this.queue,t)}}]),n}(Ft);window.MediaSource=window.MediaSource||window.WebKitMediaSource;var Kt=function(t){c()(n,t);var e=Dt(n);function n(t){var r;i()(this,n),r=e.call(this,"jmuxer"),window.MediaSource=window.MediaSource||window.WebKitMediaSource;if(r.options=Object.assign({},{node:"",mode:"both",flushingTime:1500,clearBuffer:!0,onReady:null,fps:30,debug:!1,onClearBuffer:null},t),r.options.debug&&(Tt=console.log,Rt=console.error),"string"==typeof r.options.node&&""==r.options.node&&Mt("no video element were found to render, provide a valid video element"),r.options.fps||(r.options.fps=30),r.frameDuration=1e3/r.options.fps|0,r.node="string"==typeof r.options.node?document.getElementById(r.options.node):r.options.node,r.sourceBuffers={},r.isMSESupported=!!window.MediaSource,!r.isMSESupported)throw"Oops! Browser does not support media source extension.";return r.setupMSE(),r.remuxController=new $t(r.options.clearBuffer),r.remuxController.addTrack(r.options.mode),"audio"===r.options.mode&&(r.aacParser=r.remuxController.tracks.audio.aac),r.mseReady=!1,r.lastCleaningTime=Date.now(),r.keyframeCache=[],r.frameCounter=0,r.remuxController.on("buffer",r.onBuffer.bind(u()(r))),r.remuxController.on("ready",r.createBuffer.bind(u()(r))),r.startInterval(),r}return a()(n,[{key:"setupMSE",value:function(){this.mediaSource=new MediaSource,this.node.src=URL.createObjectURL(this.mediaSource),this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"feed",value:function(t){var e,n,r,i=!1,o={video:[],audio:[]};t&&this.remuxController&&(r=t.duration?parseInt(t.duration):0,t.video&&(e=It.extractNALu(t.video)).length>0&&(o.video=this.getVideoFrames(e,r),i=!0),t.audio&&(n=this.aacParser.extractAAC(t.audio)).length>0&&(o.audio=this.getAudioFrames(n,r),i=!0),i?this.remuxController.remux(o):Mt("Input object must have video and/or audio property. Make sure it is not empty and valid typed array"))}},{key:"getVideoFrames",value:function(t,e){var n,r,i,o,a=[],s=[],u=0,l=[],c=At(t);try{for(c.s();!(o=c.n()).done;)n=o.value,r=new Ut(n),a.push(r),r.type()!==Ut.IDR&&r.type()!==Ut.NDR||(s.push({units:a}),a=[],this.options.clearBuffer&&(r.type()===Ut.IDR&&l.push(this.frameCounter),this.frameCounter++))}catch(t){c.e(t)}finally{c.f()}return e?(i=e/s.length|0,u=e-i*s.length):i=this.frameDuration,s.map((function(t){t.duration=u>0?i+1:i,0!==u&&u--})),this.options.clearBuffer&&(l=l.map((function(t){return t*i/1e3})),this.keyframeCache=this.keyframeCache.concat(l)),s}},{key:"getAudioFrames",value:function(t,e){var n,r,i,o=[],a=0,s=At(t);try{for(s.s();!(i=s.n()).done;)n=i.value,o.push({units:n})}catch(t){s.e(t)}finally{s.f()}return e?(r=e/o.length|0,a=e-r*o.length):r=this.frameDuration,o.map((function(t){t.duration=a>0?r+1:r,0!==a&&a--})),o}},{key:"destroy",value:function(){if(this.aacParser=null,this.stopInterval(),this.mediaSource){try{this.bufferControllers&&(this.mediaSource.endOfStream(),this.removeSourceBuffer())}catch(t){Mt("mediasource is not available to end ".concat(t.message))}this.mediaSource=null}if(this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var t in this.bufferControllers)this.bufferControllers[t].destroy();this.bufferControllers=null}this.node=!1,this.mseReady=!1,this.videoStarted=!1}},{key:"createBuffer",value:function(){if(this.mseReady&&this.remuxController&&this.remuxController.isReady()&&!this.bufferControllers)for(var t in this.bufferControllers={},this.remuxController.tracks){var e=this.remuxController.tracks[t];if(!n.isSupported("".concat(t,'/mp4; codecs="').concat(e.mp4track.codec,'"')))return Mt("Browser does not support codec"),!1;var r=this.mediaSource.addSourceBuffer("".concat(t,'/mp4; codecs="').concat(e.mp4track.codec,'"'));this.bufferControllers[t]=new qt(r,t),this.sourceBuffers[t]=r,this.bufferControllers[t].on("error",this.onBufferError.bind(this)),this.bufferControllers[t].on("clearBuffer",this.onClearBuffer.bind(this)),this.bufferControllers[t].on("updateend",this.onUpdateEnd.bind(this))}}},{key:"onUpdateEnd",value:function(t){"function"==typeof this.options.onUpdateEnd&&this.options.onUpdateEnd(t)}},{key:"startInterval",value:function(){var t=this;this.interval=setInterval((function(){t.bufferControllers&&(t.releaseBuffer(),t.clearBuffer())}),this.options.flushingTime)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"releaseBuffer",value:function(){for(var t in this.bufferControllers)this.bufferControllers[t].doAppend()}},{key:"getSafeBufferClearLimit",value:function(t){for(var e,n="audio"===this.options.mode&&t||0,r=0;r<this.keyframeCache.length&&!(this.keyframeCache[r]>=t);r++)e=this.keyframeCache[r];return e&&(this.keyframeCache=this.keyframeCache.filter((function(t){return t<e&&(n=t),t>=e}))),n}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var t in this.bufferControllers){var e=this.getSafeBufferClearLimit(this.node.currentTime);this.bufferControllers[t].initCleanup(e)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(t){this.bufferControllers&&this.bufferControllers[t.type]&&this.bufferControllers[t.type].feed(t.payload)}},{key:"onClearBuffer",value:function(){"function"==typeof this.options.onClearBuffer&&this.options.onClearBuffer()}},{key:"removeSourceBuffer",value:function(){if(this.mediaSource){var t=this.sourceBuffers;for(var e in t)this.mediaSource.removeSourceBuffer(t[e])}}},{key:"onMSEOpen",value:function(){this.mseReady=!0,this.createBuffer(),"function"==typeof this.options.onReady&&(this.options.onReady(),this.options.onReady=null)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(t){if("QuotaExceeded"!=t.name){if(this.mediaSource.sourceBuffers.length>0&&this.sourceBuffers[t.type]&&this.mediaSource.removeSourceBuffer(this.sourceBuffers[t.type]),0==this.mediaSource.sourceBuffers.length)try{this.mediaSource.endOfStream()}catch(t){Mt("mediasource is not available to end")}}else this.bufferControllers[t.type].initCleanup(this.node.currentTime)}}],[{key:"isSupported",value:function(t){return window.MediaSource&&window.MediaSource.isTypeSupported(t)}}]),n}(Ft);function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Zt=function(t){c()(n,t);var e=Qt(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"source",[]),y()(u()(r),"onPlay",void 0),r.source=t.source,r.onPlay=t.onPlay,r.init(),r}return a()(n,[{key:"init",value:function(){}},{key:"extract",value:function(t,e){for(var n=this.provide(e),r=0;r<n.size;r++)t[2*r]=n.left[r],t[2*r+1]=n.right[r];return n.size}},{key:"provide",value:function(t){for(var e=t,n=new Float32Array(e),r=new Float32Array(e),i=0,o=0,a=0;this.source.length>0;){var s=this.source.shift(),u=s.loadedPosition||0;o=s.startTime+s.duration*u/s.length;var l=Math.min(s.length-u,e-i),c=s.getChannelData(0),f=s.numberOfChannels>1?s.getChannelData(1):s.getChannelData(0);if(n.set(c.slice(u,u+l),i),r.set(f.slice(u,u+l),i),a+=l,i+=l,(u+=l)<s.length){s.loadedPosition=u,this.source.unshift(s);break}}return this.onPlay&&this.onPlay(o),{left:n,right:r,size:a}}}]),n}(N);function Jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ee(t,e,n){return e&&te(t.prototype,e),n&&te(t,n),t}function ne(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oe(t,e){return!e||"object"!==T()(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t,e,n){return(ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=re(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var se=function(){function t(){Jt(this,t),this._vector=new Float32Array,this._position=0,this._frameCount=0}return ee(t,[{key:"clear",value:function(){this.receive(this._frameCount),this.rewind()}},{key:"put",value:function(t){this._frameCount+=t}},{key:"putSamples",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=2*(e=e||0);n>=0||(n=(t.length-r)/2);var i=2*n;this.ensureCapacity(n+this._frameCount);var o=this.endIndex;this.vector.set(t.subarray(r,r+i),o),this._frameCount+=n}},{key:"putBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=e||0,n>=0||(n=t.frameCount-e),this.putSamples(t.vector,t.position+e,n)}},{key:"receive",value:function(t){t>=0&&!(t>this._frameCount)||(t=this.frameCount),this._frameCount-=t,this._position+=t}},{key:"receiveSamples",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=2*e,r=this.startIndex;t.set(this._vector.subarray(r,r+n)),this.receive(e)}},{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.startIndex+2*e,i=2*n;t.set(this._vector.subarray(r,r+i))}},{key:"ensureCapacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=parseInt(2*t);if(this._vector.length<e){var n=new Float32Array(e);n.set(this._vector.subarray(this.startIndex,this.endIndex)),this._vector=n,this._position=0}else this.rewind()}},{key:"ensureAdditionalCapacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.ensureCapacity(this._frameCount+t)}},{key:"rewind",value:function(){this._position>0&&(this._vector.set(this._vector.subarray(this.startIndex,this.endIndex)),this._position=0)}},{key:"vector",get:function(){return this._vector}},{key:"position",get:function(){return this._position}},{key:"startIndex",get:function(){return 2*this._position}},{key:"frameCount",get:function(){return this._frameCount}},{key:"endIndex",get:function(){return 2*(this._position+this._frameCount)}}]),t}(),ue=function(){function t(e){Jt(this,t),e?(this._inputBuffer=new se,this._outputBuffer=new se):this._inputBuffer=this._outputBuffer=null}return ee(t,[{key:"clear",value:function(){this._inputBuffer.clear(),this._outputBuffer.clear()}},{key:"inputBuffer",get:function(){return this._inputBuffer},set:function(t){this._inputBuffer=t}},{key:"outputBuffer",get:function(){return this._outputBuffer},set:function(t){this._outputBuffer=t}}]),t}(),le=function(t){function e(t){var n;return Jt(this,e),(n=oe(this,re(e).call(this,t))).reset(),n._rate=1,n}return ne(e,t),ee(e,[{key:"reset",value:function(){this.slopeCount=0,this.prevSampleL=0,this.prevSampleR=0}},{key:"clone",value:function(){var t=new e;return t.rate=this._rate,t}},{key:"process",value:function(){var t=this._inputBuffer.frameCount;this._outputBuffer.ensureAdditionalCapacity(t/this._rate+1);var e=this.transpose(t);this._inputBuffer.receive(),this._outputBuffer.put(e)}},{key:"transpose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0===t)return 0;for(var e=this._inputBuffer.vector,n=this._inputBuffer.startIndex,r=this._outputBuffer.vector,i=this._outputBuffer.endIndex,o=0,a=0;this.slopeCount<1;)r[i+2*a]=(1-this.slopeCount)*this.prevSampleL+this.slopeCount*e[n],r[i+2*a+1]=(1-this.slopeCount)*this.prevSampleR+this.slopeCount*e[n+1],a+=1,this.slopeCount+=this._rate;if(this.slopeCount-=1,1!==t)t:for(;;){for(;this.slopeCount>1;)if(this.slopeCount-=1,(o+=1)>=t-1)break t;var s=n+2*o;r[i+2*a]=(1-this.slopeCount)*e[s]+this.slopeCount*e[s+2],r[i+2*a+1]=(1-this.slopeCount)*e[s+1]+this.slopeCount*e[s+3],a+=1,this.slopeCount+=this._rate}return this.prevSampleL=e[n+2*t-2],this.prevSampleR=e[n+2*t-1],a}},{key:"rate",set:function(t){this._rate=t}}]),e}(ue),ce=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;Jt(this,t),this._pipe=e,this.inputSize=n}return ee(t,[{key:"fillInputBuffer",value:function(){throw new Error("fillInputBuffer() not overridden")}},{key:"fillOutputBuffer",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.inputSize;this.outputBuffer.frameCount<t;){var n=e-this.inputBuffer.frameCount;if(this.fillInputBuffer(n),this.inputBuffer.frameCount<e)break;this._pipe.process()}}},{key:"clear",value:function(){this._pipe.clear()}},{key:"pipe",get:function(){return this._pipe}},{key:"inputBuffer",get:function(){return this._pipe.inputBuffer}},{key:"outputBuffer",get:function(){return this._pipe.outputBuffer}}]),t}(),fe=function(){},he=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe;return Jt(this,e),(r=oe(this,re(e).call(this,n,i))).callback=o,r.sourceSound=t,r.historyBufferSize=22050,r._sourcePosition=0,r.outputBufferPosition=0,r._position=0,r}return ne(e,t),ee(e,[{key:"onEnd",value:function(){this.callback()}},{key:"fillInputBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Float32Array(2*t),n=this.sourceSound.extract(e,t,this._sourcePosition);this._sourcePosition+=n,this.inputBuffer.putSamples(e,0,n)}},{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.fillOutputBuffer(this.outputBufferPosition+e);var n=Math.min(e,this.outputBuffer.frameCount-this.outputBufferPosition);this.outputBuffer.extract(t,this.outputBufferPosition,n);var r=this.outputBufferPosition+n;return this.outputBufferPosition=Math.min(this.historyBufferSize,r),this.outputBuffer.receive(Math.max(r-this.historyBufferSize,0)),this._position+=n,n}},{key:"handleSampleData",value:function(t){this.extract(t.data,4096)}},{key:"clear",value:function(){ae(re(e.prototype),"clear",this).call(this),this.outputBufferPosition=0}},{key:"position",get:function(){return this._position},set:function(t){if(t>this._position)throw new RangeError("New position may not be greater than current position");var e=this.outputBufferPosition-(this._position-t);if(e<0)throw new RangeError("New position falls outside of history buffer");this.outputBufferPosition=e,this._position=t}},{key:"sourcePosition",get:function(){return this._sourcePosition},set:function(t){this.clear(),this._sourcePosition=t}}]),e}(ce),de=[[124,186,248,310,372,434,496,558,620,682,744,806,868,930,992,1054,1116,1178,1240,1302,1364,1426,1488,0],[-100,-75,-50,-25,25,50,75,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-20,-15,-10,-5,5,10,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-4,-3,-2,-1,1,2,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],pe=function(t){function e(t){var n;return Jt(this,e),(n=oe(this,re(e).call(this,t)))._quickSeek=!0,n.midBufferDirty=!1,n.midBuffer=null,n.overlapLength=0,n.autoSeqSetting=!0,n.autoSeekSetting=!0,n._tempo=1,n.setParameters(44100,0,0,8),n}return ne(e,t),ee(e,[{key:"clear",value:function(){ae(re(e.prototype),"clear",this).call(this),this.clearMidBuffer()}},{key:"clearMidBuffer",value:function(){this.midBufferDirty&&(this.midBufferDirty=!1,this.midBuffer=null)}},{key:"setParameters",value:function(t,e,n,r){t>0&&(this.sampleRate=t),r>0&&(this.overlapMs=r),e>0?(this.sequenceMs=e,this.autoSeqSetting=!1):this.autoSeqSetting=!0,n>0?(this.seekWindowMs=n,this.autoSeekSetting=!1):this.autoSeekSetting=!0,this.calculateSequenceParameters(),this.calculateOverlapLength(this.overlapMs),this.tempo=this._tempo}},{key:"calculateOverlapLength",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t=(t=this.sampleRate*e/1e3)<16?16:t,t-=t%8,this.overlapLength=t,this.refMidBuffer=new Float32Array(2*this.overlapLength),this.midBuffer=new Float32Array(2*this.overlapLength)}},{key:"checkLimits",value:function(t,e,n){return t<e?e:t>n?n:t}},{key:"calculateSequenceParameters",value:function(){var t,e;this.autoSeqSetting&&(t=150+-50*this._tempo,t=this.checkLimits(t,50,125),this.sequenceMs=Math.floor(t+.5)),this.autoSeekSetting&&(e=25- -10/1.5*.5+-10/1.5*this._tempo,e=this.checkLimits(e,15,25),this.seekWindowMs=Math.floor(e+.5)),this.seekWindowLength=Math.floor(this.sampleRate*this.sequenceMs/1e3),this.seekLength=Math.floor(this.sampleRate*this.seekWindowMs/1e3)}},{key:"clone",value:function(){var t=new e;return t.tempo=this._tempo,t.setParameters(this.sampleRate,this.sequenceMs,this.seekWindowMs,this.overlapMs),t}},{key:"seekBestOverlapPosition",value:function(){return this._quickSeek?this.seekBestOverlapPositionStereoQuick():this.seekBestOverlapPositionStereo()}},{key:"seekBestOverlapPositionStereo",value:function(){var t,e,n,r=0;for(this.preCalculateCorrelationReferenceStereo(),t=0,e=Number.MIN_VALUE;r<this.seekLength;r+=1)(n=this.calculateCrossCorrelationStereo(2*r,this.refMidBuffer))>e&&(e=n,t=r);return t}},{key:"seekBestOverlapPositionStereoQuick",value:function(){var t,e,n,r,i,o=0;for(this.preCalculateCorrelationReferenceStereo(),e=Number.MIN_VALUE,t=0,r=0,i=0;o<4;o+=1){for(var a=0;de[o][a]&&!((i=r+de[o][a])>=this.seekLength);)(n=this.calculateCrossCorrelationStereo(2*i,this.refMidBuffer))>e&&(e=n,t=i),a+=1;r=t}return t}},{key:"preCalculateCorrelationReferenceStereo",value:function(){for(var t,e,n=0;n<this.overlapLength;n+=1)e=n*(this.overlapLength-n),t=2*n,this.refMidBuffer[t]=this.midBuffer[t]*e,this.refMidBuffer[t+1]=this.midBuffer[t+1]*e}},{key:"calculateCrossCorrelationStereo",value:function(t,e){var n=this._inputBuffer.vector;t+=this._inputBuffer.startIndex;for(var r,i=0,o=2,a=2*this.overlapLength;o<a;o+=2)i+=n[r=o+t]*e[o]+n[r+1]*e[o+1];return i}},{key:"overlap",value:function(t){this.overlapStereo(2*t)}},{key:"overlapStereo",value:function(t){var e=this._inputBuffer.vector;t+=this._inputBuffer.startIndex;for(var n,r,i,o,a,s=this._outputBuffer.vector,u=this._outputBuffer.endIndex,l=0,c=1/this.overlapLength;l<this.overlapLength;l+=1)r=(this.overlapLength-l)*c,i=l*c,o=(n=2*l)+t,s[(a=n+u)+0]=e[o+0]*i+this.midBuffer[n+0]*r,s[a+1]=e[o+1]*i+this.midBuffer[n+1]*r}},{key:"process",value:function(){var t,e,n;if(null===this.midBuffer){if(this._inputBuffer.frameCount<this.overlapLength)return;this.midBuffer=new Float32Array(2*this.overlapLength),this._inputBuffer.receiveSamples(this.midBuffer,this.overlapLength)}for(;this._inputBuffer.frameCount>=this.sampleReq;){t=this.seekBestOverlapPosition(),this._outputBuffer.ensureAdditionalCapacity(this.overlapLength),this.overlap(Math.floor(t)),this._outputBuffer.put(this.overlapLength),(e=this.seekWindowLength-2*this.overlapLength)>0&&this._outputBuffer.putBuffer(this._inputBuffer,t+this.overlapLength,e);var r=this._inputBuffer.startIndex+2*(t+this.seekWindowLength-this.overlapLength);this.midBuffer.set(this._inputBuffer.vector.subarray(r,r+2*this.overlapLength)),this.skipFract+=this.nominalSkip,n=Math.floor(this.skipFract),this.skipFract-=n,this._inputBuffer.receive(n)}}},{key:"tempo",set:function(t){var e;this._tempo=t,this.calculateSequenceParameters(),this.nominalSkip=this._tempo*(this.seekWindowLength-this.overlapLength),this.skipFract=0,e=Math.floor(this.nominalSkip+.5),this.sampleReq=Math.max(e+this.overlapLength,this.seekWindowLength)+this.seekLength},get:function(){return this._tempo}},{key:"inputChunkSize",get:function(){return this.sampleReq}},{key:"outputChunkSize",get:function(){return this.overlapLength+Math.max(0,this.seekWindowLength-2*this.overlapLength)}},{key:"quickSeek",set:function(t){this._quickSeek=t}}]),e}(ue),ve=function(t,e){return(t>e?t-e:e-t)>1e-10},ye=function(){function t(){Jt(this,t),this.transposer=new le(!1),this.stretch=new pe(!1),this._inputBuffer=new se,this._intermediateBuffer=new se,this._outputBuffer=new se,this._rate=0,this._tempo=0,this.virtualPitch=1,this.virtualRate=1,this.virtualTempo=1,this.calculateEffectiveRateAndTempo()}return ee(t,[{key:"clear",value:function(){this.transposer.clear(),this.stretch.clear()}},{key:"clone",value:function(){var e=new t;return e.rate=this.rate,e.tempo=this.tempo,e}},{key:"calculateEffectiveRateAndTempo",value:function(){var t=this._tempo,e=this._rate;this._tempo=this.virtualTempo/this.virtualPitch,this._rate=this.virtualRate*this.virtualPitch,ve(this._tempo,t)&&(this.stretch.tempo=this._tempo),ve(this._rate,e)&&(this.transposer.rate=this._rate),this._rate>1?this._outputBuffer!=this.transposer.outputBuffer&&(this.stretch.inputBuffer=this._inputBuffer,this.stretch.outputBuffer=this._intermediateBuffer,this.transposer.inputBuffer=this._intermediateBuffer,this.transposer.outputBuffer=this._outputBuffer):this._outputBuffer!=this.stretch.outputBuffer&&(this.transposer.inputBuffer=this._inputBuffer,this.transposer.outputBuffer=this._intermediateBuffer,this.stretch.inputBuffer=this._intermediateBuffer,this.stretch.outputBuffer=this._outputBuffer)}},{key:"process",value:function(){this._rate>1?(this.stretch.process(),this.transposer.process()):(this.transposer.process(),this.stretch.process())}},{key:"rate",get:function(){return this._rate},set:function(t){this.virtualRate=t,this.calculateEffectiveRateAndTempo()}},{key:"rateChange",set:function(t){this._rate=1+.01*t}},{key:"tempo",get:function(){return this._tempo},set:function(t){this.virtualTempo=t,this.calculateEffectiveRateAndTempo()}},{key:"tempoChange",set:function(t){this.tempo=1+.01*t}},{key:"pitch",set:function(t){this.virtualPitch=t,this.calculateEffectiveRateAndTempo()}},{key:"pitchOctaves",set:function(t){this.pitch=Math.exp(.69314718056*t),this.calculateEffectiveRateAndTempo()}},{key:"pitchSemitones",set:function(t){this.pitchOctaves=t/12}},{key:"inputBuffer",get:function(){return this._inputBuffer}},{key:"outputBuffer",get:function(){return this._outputBuffer}}]),t}(),ge=function(){function t(e){Jt(this,t),this.buffer=e,this._position=0}return ee(t,[{key:"extract",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.position=n;for(var r=this.buffer.getChannelData(0),i=this.dualChannel?this.buffer.getChannelData(1):this.buffer.getChannelData(0),o=0;o<e;o++)t[2*o]=r[o+n],t[2*o+1]=i[o+n];return Math.min(e,r.length-n)}},{key:"dualChannel",get:function(){return this.buffer.numberOfChannels>1}},{key:"position",get:function(){return this._position},set:function(t){this._position=t}}]),t}(),me=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fe,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4096,i=t.createScriptProcessor(r,2,2),o=new Float32Array(2*r);return i.onaudioprocess=function(t){var i=t.outputBuffer.getChannelData(0),a=t.outputBuffer.getChannelData(1),s=e.extract(o,r);n(e.sourcePosition),0===s&&e.onEnd();for(var u=0;u<s;u++)i[u]=o[2*u],a[u]=o[2*u+1]},i},be=function(t){var e,n,r,i=Math.floor(t/60),o=t-60*i;return"".concat(i,":").concat((e=parseInt(o),r=r||"0",(e+="").length>=(n=2)?e:new Array(n-e.length+1).join(r)+e))},xe=function(t){var e=this.timePlayed,n=this.sampleRate;if(this.sourcePosition=t,this.timePlayed=t/n,e!==this.timePlayed){var r=new CustomEvent("play",{detail:{timePlayed:this.timePlayed,formattedTimePlayed:this.formattedTimePlayed,percentagePlayed:this.percentagePlayed}});this._node.dispatchEvent(r)}};!function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe;Jt(this,t),this._soundtouch=new ye;var a=new ge(n);this.timePlayed=0,this.sourcePosition=0,this._filter=new he(a,this._soundtouch,o),this._node=me(e,this._filter,(function(t){return xe.call(i,t)})),this.tempo=1,this.rate=1,this.duration=n.duration,this.sampleRate=e.sampleRate,this.listeners=[]}ee(t,[{key:"connect",value:function(t){this._node.connect(t)}},{key:"disconnect",value:function(){this._node.disconnect()}},{key:"on",value:function(t,e){this.listeners.push({name:t,cb:e}),this._node.addEventListener(t,(function(t){return e(t.detail)}))}},{key:"off",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.listeners;e&&(n=n.filter((function(t){return t.name===e}))),n.forEach((function(e){t._node.removeEventListener(e.name,(function(t){return e.cb(t.detail)}))}))}},{key:"formattedDuration",get:function(){return be(this.duration)}},{key:"formattedTimePlayed",get:function(){return be(this.timePlayed)}},{key:"percentagePlayed",get:function(){return 100*this._filter.sourcePosition/(this.duration*this.sampleRate)},set:function(t){this._filter.sourcePosition=parseInt(t*this.duration*this.sampleRate)}},{key:"node",get:function(){return this._node}},{key:"pitch",set:function(t){this._soundtouch.pitch=t}},{key:"pitchSemitones",set:function(t){this._soundtouch.pitchSemitones=t}},{key:"rate",set:function(t){this._soundtouch.rate=t}},{key:"tempo",set:function(t){this._soundtouch.tempo=t}}])}();function ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var we=function(t){c()(n,t);var e=ke(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"soundTouch",void 0),y()(u()(r),"filter",void 0),r.init(t.source),r}return a()(n,[{key:"init",value:function(t){this.soundTouch=new ye,this.soundTouch.tempo=1,this.soundTouch.rate=1,this.filter=new he(t,this.soundTouch,2048)}},{key:"rate",set:function(t){this.soundTouch.tempo=t}},{key:"provide",value:function(t){for(var e=new Float32Array(2*t),n=this.filter.extract(e,t),r=new Float32Array(n),i=new Float32Array(n),o=0;o<n;o++)r[o]=e[2*o],i[o]=e[2*o+1];return{size:n,left:r,right:i}}}]),n}(N);function Pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var _e=function(t){c()(n,t);var e=Pe(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"currentRate",1),y()(u()(r),"source",[]),y()(u()(r),"commonProcessor",void 0),y()(u()(r),"rateProcessor",void 0),y()(u()(r),"audioTime",0),r.source=t.source,r.init(),r}return a()(n,[{key:"init",value:function(){var t=this;this.commonProcessor=new Zt({source:this.source,onPlay:function(e){t.audioTime=e}}),this.rateProcessor=new we({source:this.commonProcessor})}},{key:"rate",set:function(t){this.currentRate=t,this.rateProcessor.rate=t}},{key:"provide",value:function(t){var e=(1===this.currentRate?this.commonProcessor:this.rateProcessor).provide(t);return e.audioTime=this.audioTime,e}}]),n}(N);function Se(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Be="canplaythrough",Ee="seeked",Te="waiting",Re=function(t){c()(n,t);var e=Se(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"audioContext",null),y()(u()(r),"scriptNode",null),y()(u()(r),"gainNode",null),y()(u()(r),"delay",0),y()(u()(r),"audioBuffer",new ArrayBuffer(0)),y()(u()(r),"decodedBuffer",[]),y()(u()(r),"isFirstPlay",!0),y()(u()(r),"defaultVolume",1),y()(u()(r),"currentRate",1),y()(u()(r),"eventListeners",{}),y()(u()(r),"canPlay",!1),y()(u()(r),"interval",void 0),y()(u()(r),"seekTimeDelta",0),y()(u()(r),"audioTime",0),y()(u()(r),"audioProvider",void 0),y()(u()(r),"isWaiting",!1),t=Object.assign({},t),r.flushTime=t.flushTime||1e3,r.onReady=t.onReady,r.init(),r}return a()(n,[{key:"init",value:function(){this.audioProvider=new _e({source:this.decodedBuffer}),"function"==typeof this.onReady&&setTimeout(this.onReady,0)}},{key:"feed",value:function(t){var e=t.audio;this.audioBuffer=this.appendByteArray(this.audioBuffer,e),this.canPlay||(this.canPlay=!0,this.triggerEvent(Be))}},{key:"appendByteArray",value:function(t,e){var n=new Uint8Array((0|t.byteLength)+(0|e.byteLength));return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),0|t.byteLength),n.buffer}},{key:"decodeAudioData",value:function(t){var e=this;this.audioBuffer&&this.audioBuffer.byteLength>0&&(this.audioContext.decodeAudioData(this.audioBuffer,(function(n){n.startTime=e.delay,e.delay+=n.duration,e.decodedBuffer.push(n),t&&t.call()}),(function(t){e.logger.error("decodeAudioData",t)})),this.audioBuffer=new ArrayBuffer(0))}},{key:"play",value:function(){var t=this;return new Promise((function(e,n){t.isFirstPlay?(t.isFirstPlay=!1,t.logger.info("startPlay"),t.audioContext=new(window.AudioContext||window.webkitAudioContext),t.gainNode=t.audioContext.createGain(),t.gainNode.gain.value=t.defaultVolume,t.scriptNode=t.audioContext.createScriptProcessor(2048,2,2),t.scriptNode.onaudioprocess=function(e){var n=e.outputBuffer,r=n.length,i=t.audioProvider.provide(r);if(0!==i.size){t.isWaiting&&(t.isWaiting=!1,t.triggerEvent(Be));var o=n.getChannelData(0),a=n.getChannelData(1);if(0!=i.audioTime&&(t.audioTime=i.audioTime),o.set(i.left),a.set(i.right),i.size<r){var s=new Float32Array(r-i.size);o.set(s,i.size),a.set(s,i.size)}}else t.isWaiting||(t.isWaiting=!0,t.triggerEvent(Te))},t.scriptNode.connect(t.gainNode),t.gainNode.connect(t.audioContext.destination),t.decodeAudioData.call(t,t.testAutoplay.bind(t,e,n)),t.interval=setInterval(t.decodeAudioData.bind(t),t.flushTime)):"suspended"===t.audioContext.state?t.audioContext.resume().then((function(){t.logger.info("play","Audio is resumed"),e()})):(t.logger.info("Audio resumed from waiting"),e())}))}},{key:"currentTime",get:function(){return this.audioTime},set:function(t){var e=this;for(this.audioTime=t;this.decodedBuffer.length>0;){var n=this.decodedBuffer.shift();if(n.startTime<=t&&n.startTime+n.duration>t){n.loadedPosition=parseInt(n.length*(t-n.startTime)/n.duration),this.decodedBuffer.unshift(n);break}}setTimeout((function(){e.triggerEvent(Ee)}),0)}},{key:"pause",value:function(){var t=this;this.audioContext&&this.audioContext.suspend().then((function(){t.logger.info("pause","Audio is paused")}))}},{key:"addEventListener",value:function(t,e){this.eventListeners[t]=e}},{key:"triggerEvent",value:function(t){var e=this.eventListeners[t];e&&e.call()}},{key:"buffer",value:function(){var t=0;this.decodedBuffer.length>0&&(t=this.decodedBuffer[0].startTime);return{start:1e3*t,end:parseInt(1e3*this.delay)}}},{key:"volume",get:function(){return this.gainNode.gain.value},set:function(t){this.gainNode?this.gainNode.gain.value=t:this.defaultVolume=t}},{key:"destroy",value:function(){this.delay=0,this.audioContext&&(clearInterval(this.interval),this.scriptNode.disconnect(),this.scriptNode=null,this.audioContext.close(),this.audioContext=null),this.gainNode=null,this.audioBuffer=new ArrayBuffer(0),this.canPlay=!1,this.isFirstPlay=!0,this.decodedBuffer.length=0,this.seekTimeDelta=0,this.audioTime=0}},{key:"playbackRate",set:function(t){t!==this.currentRate&&(this.currentRate=t,this.audioProvider.rate=t)}},{key:"testAutoplay",value:function(t,e){var n=L.createEl("audio"),r=n.play();n=null;var i=!1;void 0!==r?(r.catch((function(){i=!0})),setTimeout((function(){r=null,i?e("Autoplay is prevented"):t()}),100)):e("Promise is undefined")}}]),n}(N);function Le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ae=function(t){c()(n,t);var e=Le(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"need",!0),y()(u()(t),"first",!1),y()(u()(t),"offset",0),y()(u()(t),"currentPTS",0),y()(u()(t),"ready",!1),y()(u()(t),"end",!1),y()(u()(t),"lastData",null),y()(u()(t),"nodeParent",null),y()(u()(t),"useJMuxer",!1),t.player=r.audioNode,t.createAudioMuxer(),t.bindEvent(),t.logger.info("audioDecoder",t.useJMuxer?"JMuxer":"AudioContext"),t}return a()(n,[{key:"bindEvent",value:function(){var t=this;this.bindNodeEvent(),this.events.on(st.PlayerMaxPTS,(function(e){t.currentPTS===e&&(t.end=!0)}))}},{key:"bindNodeEvent",value:function(){var t=this;this.addEventListener("seeked",(function(){t.onSeekedHandler&&t.onSeekedHandler(),t.events.emit("AudioPlayer.seeked")})),this.addEventListener("canplaythrough",(function(){t.logger.info("canplaythrough"),t.ready||(t.ready=!0,t.status="ready",t.logger.info("constructor","canplaythrough","ready"),t.events.emit(st.AudioPlayerDataReady))})),this.addEventListener("waiting",(function(){t.ready=!1,t.end?(t.useJMuxer||t.player.destroy(),t.status="end",t.events.emit(st.AudioPlayerEnd,"audio"),t.logger.info("audioPlayer end")):(t.logger.warn("audioPlayer waiting",t.player.currentTime,t.currentPTS),t.status="waiting",t.events.emit(st.AudioPlayerWait,"audio"))}))}},{key:"reset",value:function(){this.lastData=null,this.first=!1,this.offset=0,this.currentPTS=0,this.ready=!1,this.end=!1,this.clear(),this.createAudioMuxer(),this.bindNodeEvent(),this.stime=null}},{key:"createNode",value:function(){this.player=document.createElement("audio"),this.player.classList.add("goldplay__audio--player"),this.parentNode.appendChild(this.player)}},{key:"createAudioMuxer",value:function(){this.useJMuxer?this.audioDecoder=new Kt({node:this.player,mode:"audio",debug:!1,clearBuffer:!0,flushingTime:10,onReady:this.onMSEReady.bind(this)}):(this.audioDecoder=new Re({flushTime:100,onReady:this.onMSEReady.bind(this)}),this.player=this.audioDecoder)}},{key:"onMSEReady",value:function(){this.logger.info("onMSEReady","AudioPlayerReady"),this.events.emit(st.AudioPlayerReady)}},{key:"clear",value:function(){this.audioDecoder.destroy(),this.audioDecoder=null}},{key:"play",value:function(){var t=this;"playing"!==this.status&&(this.status="playing",this.player.play().then((function(){t.events.emit(st.AudioPlayerPlaySuccess)})).catch((function(e){t.logger.error("play","errorInfo:",e),t.events.emit(st.AudioPlayerPlayFail)})))}},{key:"muted",set:function(t){this.player.muted=!!t}},{key:"playbackRate",set:function(t){this.player.playbackRate=t}},{key:"pause",value:function(){"pause"!==this.status&&(this.status="pause",this.player.pause())}},{key:"volume",get:function(){return this.player.volume},set:function(t){this.player.volume=t,this.muted=0===t}},{key:"currentTime",get:function(){return parseInt(1e3*this.player.currentTime+this.offset)},set:function(t){this.player.currentTime=(t-this.offset)/1e3}},{key:"paused",get:function(){return this.player.paused}},{key:"send",value:function(t){if(!t.PTS)return this.need=!1,void this.events.emit(st.AudioPlayerDataReady);if(this.need=!0,this.audioDecoder){if(this.stime||(this.stime=Date.now()),(t=this.format(t)).audioEnd)return this.logger.info("push","audioEnd"),this.feed(this.lastData),void(this.lastData=null);if(this.first||(this.first=!0,this.offset=t.start),t.PTS>this.currentPTS){if(!this.lastData)return void(this.lastData=t);this.lastData.duration=t.PTS-this.lastData.PTS,this.feed(this.lastData),t.duration=this.lastData.duration,this.lastData=t}}else this.logger.error("send","audioDecoder is:",this.audioDecoder)}},{key:"feed",value:function(t){this.audioDecoder.feed({audio:t.data_byte,duration:t.duration}),this.currentPTS=t.PTS}},{key:"format",value:function(t){return t&&t.data_byte&&(t.start=t.PTS),t}},{key:"addEventListener",value:function(t,e){this.player.addEventListener(t,e)}},{key:"isBuffered",value:function(t){return-1!==[this.buffer()].findIndex((function(e){return t>=e.start&&t<e.end}))}},{key:"buffer",value:function(){if(this.useJMuxer){for(var t=this.player.buffered,e=t.length,n={};e>0;)n.start=1e3*t.start(e-1)+this.offset,n.end=1e3*t.end(e-1)+this.offset,e--;return n}var r=this.player.buffer();return{start:r.start+this.offset,end:r.end+this.offset}}},{key:"offset",set:function(t){this.offset=t}}]),n}(N),Ce={playerContainer:"goldplay__container",screenContainer:"goldplay__screen--container",screenCanvas:"goldplay__screen--canvas",audioContainer:"goldplay__audio--container",audioPlayer:"goldplay__audio--player",controlContainer:"goldplay__control--container",containerFullPage:"goldplay__container-fullpage",containerFullScreen:"goldplay__container-fullscreen",controlContainerFloat:"goldplay__control--container-float",bigPlayButton:"goldplay__screen--bigplay",poster:"goldplay__screen--poster",nearside:"goldplay__control--nearside",sidebar:"goldplay__control--sidebar",buttonBlock:"goldplay__control--button-block",playButton:"goldplay__control--play",pauseButton:"goldplay__control--pause",replayButton:"goldplay__control--replay",speedBar:"goldplay__speed-bar",speedBarBox:"goldplay__speed-bar--box",rateBar:"goldplay__rate-bar",rateBarBox:"goldplay__rate-bar--box",fullPage:"goldplay__control--fullpage",fullScreen:"goldplay__control--fullscreen",waitingBar:"goldplay__waiting-bar",progressBar:"goldplay__progress-bar",progressBarHover:"goldplay__progress-bar-hover",progressBarPlay:"goldplay__progressbar--play",progressBarPlayHover:"goldplay__progressbar--play-hover",progressBarLoad:"goldplay__progressbar--load",progressBarLoadHover:"goldplay__progressbar--load-hover",progressBarDot:"goldplay__progressbar--dot",progressBarDotHover:"goldplay__progressbar--dot-hover",volumeBar:"goldplay__volume-bar",volumeBarAudio:"goldplay__volume-bar--audio",volumeBarAudioOn:"goldplay__volume-bar--audio-on",volumeBarAudioOff:"goldplay__volume-bar--audio-off",volumeBarHandle:"goldplay__volume-bar--handle",volumeBarRod:"goldplay__volume-bar--rod",volumeBarRodHover:"goldplay__volume-bar--rod-hover",volumeBarSize:"goldplay__volume-bar--size",volumeBarColumn:"goldplay__volume-bar--column",alertBox:"goldplay__alter-box",alertClose:"goldplay__alter--close"};function De(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Oe=Ce,Me=function(){function t(){i()(this,t)}return a()(t,null,[{key:"createContainer",value:function(t){var e=function(t){c()(n,t);var e=De(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n)}(J()(HTMLDivElement));customElements.get("gp-container")||customElements.define("gp-container",e,{extends:"div"});var n=L.createEl("gp-container","div");return n.className=Oe.playerContainer,n.style.width=(t.options.width?t.options.width:t.el.offsetWidth)+"px",n.style.height=(t.options.height?t.options.height:t.el.offsetHeight)+"px",n}},{key:"createScreenContainer",value:function(t){var e=t.$container,n=function(t){c()(n,t);var e=De(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n)}(J()(HTMLDivElement));customElements.get("gp-screen")||customElements.define("gp-screen",n,{extends:"div"});var r,o=L.createEl("gp-screen","div");return o.classList.add(Oe.screenContainer),r=t.controlBarAutoHide?e.offsetHeight:e.offsetHeight-t.controlBarHeight,o.style.height=r+"px",o}},{key:"createAudioContainer",value:function(){var t=L.createEl("gp-audio");return t.classList.add(Oe.audioContainer),t.style.display="none",t}},{key:"createAudio",value:function(){var t=L.createEl("audio");return t.classList.add(Oe.audioPlayer),t.controls=!0,t}},{key:"clearCavans",value:function(t){var e=t.getContext("webgl");e.clear(e.COLOR_BUFFER_BIT)}}]),t}();y()(Me,"createCanvas",(function(t){var e=L.createEl("canvas");return e.style.display="none",e.classList.add(Oe.screenCanvas),e.width=t.options.screenWidth||t.screenWidth,e.height=t.options.screenHeight||t.screenHeight,e}));var Ue=k.a.get("Template.js"),Ne=function(){function t(){i()(this,t)}return a()(t,null,[{key:"mergeVar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t||""===t)return t;try{var n=new RegExp("\\${'?\"?\\s*([.:a-z0-9_s]+?)\\s*'?\"?}","ig");return t.replace(n,(function(t,n){n=n.trim();var r=e[n];return r=(r=void 0===(r=null===r?"":r)?"":r)||""}))}catch(e){return Ue.error("mergeVar","replace variable","error:",e),t}}},{key:"makeValue",value:function(e,n,r){if("string"!=typeof n&&"function"!=typeof n)return n;if("function"==typeof n&&(n=n.call(this,this.data)),!r)return t.escapeHTML.call(this,n);var i,o=function(e){var n="";return e&&(n=" ".concat(t.slotReplaceName,'="true"')),'<gp-slot style="display:none"'.concat(n,"></gp-slot>")};if(t.isSoltType(r)){if("function"!=typeof this.getComponent)return Ue.error("makeValue","the object is not support slot mode.",this.getComponent,n),n;switch(r){case t.slotTypeMap.component:i=n;var a=this.getComponent(i);"object"===T()(a)&&a.element?(a.element.setAttribute(t.slotReplaceName,"true"),n=a.element.outerHTML):n=o(i);break;case t.slotTypeMap.html:n=t.mergeVar.call(this,n,this.data)}var s="";void 0!==i&&(s=" ".concat(t.slotComName,'="').concat(i,'" '));var u="$1 "+t.slotTypeName+'="'+r+'" '+t.slotKeyName+'="'+e+'"'+s+"$2";return"string"==typeof n&&(n=(n=""===n?o():n).replace(/^\s*(<\s?[\w-]*)(.*[\r|\n|>])/,u)),n}if("string"==typeof r){var l=Ie[r];return"function"==typeof l&&(n=l.call(this,n)),n}return t.escapeHTML.call(this,n)}},{key:"escapeHTML",value:function(t){return"string"!=typeof t?t:t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"generate",value:function(e,n,r){var i=this,o=r[r.length-1]||{},a=[e[0]];return n.forEach((function(n,s){if(n){var u,l,c=n.split(t.pipSeparator);c.length>1&&(n=c[0],l=c[1]),u=Number.isInteger(n)?r[n]:o[n],void 0!==(u=t.makeValue.bind(i)(n,u,l))&&a.push(u),void 0!==e[s+1]&&a.push(e[s+1])}})),a.join("")}},{key:"create",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o;o=Array.isArray(e)?"array":"function"==typeof e?"function":"string";var a=this;if("object"===T()(a)||"function"==typeof a)if(void 0!==e&&""!==e)switch(void 0!==a.data&&null!==a.data||(Ue.info("create","this object.data is undefined or null",a),a.data={}),o){case"array":return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=i[i.length-1]||{};"object"===T()(a)&&(a.__template__={tplObj:e,keys:r,dict:s});var u=t.generate.bind(a);return u(e,r,i)};case"function":var s=t.create.bind(a);return e.call(a,a.data,s,a);default:return function(n){return n=void 0!==n?n:a.data,t.mergeVar(e,n)}}else Ue.error("create","have not give tplObj parameter.",e);else Ue.error("create","this is not an object.",a)}},{key:"isSoltType",value:function(e){return e=String(e).toLowerCase(),t.slotTypeMap[e]}}]),t}();Ne.pipSeparator="|",Ne.slotTypeName="gp-slot-type",Ne.slotKeyName="gp-slot-key",Ne.slotComName="gp-slot-com",Ne.slotReplaceName="gp-slot-replace",Ne.slotTypeMap={html:"html",component:"component"};var Ie={trim:function(t){return t.trim()},upperCase:function(t){return t.toUpperCase()},lowerCase:function(t){return t.toLowerCase()}},Fe=Ne,je=n(29),He=n.n(je),We=n(18),Ve=n.n(We),ze=k.a.get("Observer.js"),Ge=function(){function t(e){i()(this,t),y()(this,"object",null),this.setObject(e)}var e;return a()(t,[{key:"setObject",value:function(t){this.object=t}},{key:"watch",value:(e=He()(Ve.a.mark((function t(e,n,r){var i;return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"==typeof(i=this.object).watch){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,i.watch(e,n,r);case 5:!1!==t.sent&&"function"==typeof i.render&&i.render(e,n,r),"function"==typeof i.afterWatch&&i.afterWatch(e,n,r);case 8:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=e.set,i=e.get;t=t||n.data;var o=n.object,a={set:function(t,e,i){return"function"==typeof r?r.call(n,t,e,i):(t[e]!==i&&(t[e]=i,o.__template__&&Object.prototype.hasOwnProperty.call(o.__template__.dict,e)&&n.watch(t,e,i)),!0)},get:function(t,e){return"function"==typeof i?i.call(n,t,e):"object"===T()(t[e])&&null!==t[e]?new Proxy(t[e],a):Reflect.get(t,e)}};return new Proxy(t,a)}}]),t}(),Xe=function(t){return"object"!==T()(t)&&ze.error("observer","this is not an object."),new Ge(t)};function Ye(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return $e(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function Ke(t){if(t){var e=[],n=[];for(n.push(t);n.length;){var r=n.shift(),i=r.getAttribute(Fe.slotTypeName);if(!Fe.isSoltType(i)){e.push(r);for(var o=r.children,a=0,s=o.length;a<s;a++)n.push(o[a])}}return e}}var Qe,Ze=function(t){return t.getAttribute&&t.getAttribute(Fe.slotTypeName)===Fe.slotTypeMap.html},Je=function(t,e){return!(!(n=t).getAttribute||n.getAttribute(Fe.slotTypeName)!==Fe.slotTypeMap.component||t.getAttribute(Fe.slotComName)===e.getAttribute(Fe.slotComName));var n},tn=function(t,e,n){var r;(t||e)&&(!t&&e?n.appendChild(e):!e&&t?n.removeChild(t):t.tagName!==e.tagName||(r=e,Ze(t)&&Ze(r))||Je(t,e)?t.replaceWith(e.cloneNode(!0)):t.nodeType===Node.TEXT_NODE&&t.nodeValue!==e.nodeValue?t.nodeValue=e.nodeValue:t.setAttribute&&L.setAttributes(t,e))},en=function(t){c()(n,t);var e=qe(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"createTemplate",null),y()(u()(t),"template",""),y()(u()(t),"element",null),y()(u()(t),"eventsList",{}),y()(u()(t),"data",{}),y()(u()(t),"id",""),t.id=r.id||t.constructor.name,t.options=r,t.createTemplate=Fe.create.bind(u()(t)),t}return a()(n,[{key:"getTemplate",value:function(){return this.template}},{key:"setTemplate",value:function(t){this.template=t}},{key:"init",value:function(){this.data=Xe(this).create(this.data),this.render(),"function"==typeof this.afterInit&&this.afterInit()}},{key:"afterInit",value:function(){}},{key:"initProps",value:function(){}},{key:"bindEvent",value:function(){}},{key:"watch",value:function(){}},{key:"render",value:function(){var t="";t="function"==typeof this.template?this.template(this.data):this.template;var e=L.createEl("div");if("string"==typeof t){e.innerHTML=t;var n,r=e.firstElementChild,i=Ye(r.querySelectorAll("["+Fe.slotReplaceName+"]"));try{for(i.s();!(n=i.n()).done;){var o=n.value;if("true"===o.getAttribute(Fe.slotReplaceName)){var a=o.getAttribute(Fe.slotComName),s=this.getComponent(a);if(!s)continue;var u=s.element;L.isElement(this.element)?o.replaceWith(u.cloneNode(!0)):o.replaceWith(u),s.element.removeAttribute(Fe.slotReplaceName)}}}catch(t){i.e(t)}finally{i.f()}L.isElement(this.element)?this.replaceNode(this.element,r):this.element=r}else this.logger.error("render:","this template is not html string","html:",t)}},{key:"replaceNode",value:function(t,e){if(t&&e){var n=Ke(t),r=Ke(e),i=n.length,o=r.length,a=Math.max(i,o);if(a<=0||t.tagName!==e.tagName)return t.replaceWith(e),void(this.element=e);for(;a--;){var s=n[a],u=r[a];if(s)if(u){if(s.tagName===u.tagName&&L.syncAttributes(s,u),!s.isEqualNode(u)){var l=Math.max(s.childNodes.length,u.childNodes.length);if(l<=0)tn(s,u,s.parentNode);else for(var c=0,f=l;c<f;c++){var h=s.childNodes[c],d=u.childNodes[c];(h||d)&&tn(h,d,s)}}}else s.parentNode.removeChild(s);else t.appendChild(u)}}}},{key:"show",value:function(){this.data.display="show",this.element&&(this.element.style.display="inline-block")}},{key:"hide",value:function(){this.data.display="hide",this.element&&(this.element.style.display="none")}},{key:"resetPosition",value:function(){var t=this.element.parentNode,e=t.offsetWidth,n=t.offsetHeight;this.element.style.marginTop=(n-this.element.offsetHeight)/2+"px",this.element.style.marginLeft=(e-this.element.offsetWidth)/2+"px"}},{key:"replace",value:function(t){this.element.replaceWith(t),this.element=t}},{key:"update",value:function(t){this.element.innerHTML=t}},{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,n,r),{destroy:function(){t.removeEventListener(e,n)}}}},{key:"removeEventListenerAll",value:function(){var t=this;Object.keys(this.eventsList).forEach((function(e){t.eventsList[e].destroy()}))}},{key:"getComponent",value:function(t){if(void 0!==t)return this.options.componentsController?this.options.componentsController.getComponent(t):void 0}},{key:"getHTMLString",value:function(){return this.element.outerHTML}},{key:"destroy",value:function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.events.emit("Component_"+this.id+".destroy",this),this.removeEventListenerAll()}}]),n}(N),nn=n(8),rn=n.n(nn),on={formatHHMMSS:function(t){var e=parseInt(t,10),n=Math.floor(e/3600),r=Math.floor((e-3600*n)/60),i=e-3600*n-60*r;n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i);var o="";return"00"!==n&&(o=n+":"),o+r+":"+i}},an={formatBytes:function(t,e){if(0==t)return"0 Bytes";var n=e<=0?0:e||2,r=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}};function sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var un,ln="data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAA+CAYAAABuk1SaAAAZ2ElEQVR4nO2de1wV1fbA157ZcyTe\n6sjj8FJeoqghiJAovsAHkJSUmpZl3bTHTe/NzO71k131Z97y9tJft9SrojdNLTQUH6iR4EcTUTRN\nBERCRAQcURCUnNfvDzl2OMzrPDDsd75/wZ6ZvdfMnLX3XmuvtQfAjh07duzYsWPHjh07duzYsdMp\nQFKFoig+aDnsAEC0F9UzxgNiORG4L8+y31pSh7czxiQBmBeAu9rEcbaW8f8DCP2mFvh3lOOhIc6H\nCh2tFxOeDeKn+TuDv8N/RD9b1e3tjPHUEJg6py8/pyAV/AEAlpwil2i9PlZPBQ/xEIdEdBcfjewu\nRJ5NAy/aAcKYFiguTCMqL96C8tIGoqSsEZUV3YSi/KtsuaWyxvtSfRP1YsLzIfzzrjpwdV8vhlha\n18NCh40g0V5UzxA3CO3pLPbEBOD6X1H91dtQff4mFBcxbJ3VDTwAwmnKY3EUvyStpzgRAGgAgMom\nKPTfJEbZov4RflS/7xK4He46CDaUMS1QTG8Q+6hdOyaAilzwKL9guLcYb5BNA0xxAxR/V0FmbrqI\nvjp7ja3RclGkJ+W/bBC/bKyvOMbQViGD9kdmCGM1tvtQYTyC2ExBBvSg9MO8YegT/vyTiT5iQmux\n1Itjau9A3Yoi8rOMX9D24ussY3ZjD4AxAVTk/nFcNpjcw4KT5KylJ7jV1tY/zJcKO5zMHTatP72U\n+NcLP/DzlK5dMZRcODtceMP0WjNh1pQQ/1l6Ci2taOCa5E6aGKyL3z6azTBta/YxPG3FT+xmK9rv\ntBgrCGFtZalB1JCs8cT6MxO5nz5/jNua6CNOgXsPU+7l0Z6PQN+lUfyq4qe48wuj8WvWymBrIjwo\nXynlAAC42IgsnqIY8HPFDlLKAQDwqwB3la7NeZzYagPlAACgX+4tvFMxhf8lpRcVK3VCrJ4KllIO\nAIDyRrD6OTwMWKwgw3ypsIKJxN7MBC4zxV98ASx7YfTiSH7RkSeITEvl6Ai2jOK+Bpn7qWiCCmvr\nfyYYTZWrn0Dy7yRrPLF+lF4cJXethdBZY7hdU3tTY0wPZCZwmXJtVTZBpQ1l6LRYpCBLBuPZh5O5\nw9E9xHFgg54szlMcciCF+NrKemxChAflG+YGYXLHq5vFamvbyKuBvCWnyDktPFRpveaV/tRTKf5i\nCthWOQzQm0dwm2K8qUBDQZwPFer5CHjInM/U3BY02S8PO2YrSHYysendgfy70P5FMeW34Pj8AvzS\n+Gwc3X879g7ZhruGZ2DP+N04fHouTs6qROkAIGVz0Ik+YsKbEXi6BfdgU07XsVUTDuDUyiYolDou\niCBY28axarbs3ePcihF78EiQfh5tCOpKuX45hPsCOkY5DNDfjOK+Mfxz5ApbmvY9TmNaoFjq5Lpm\n3urn8DBglpv39NPowFhfiIC2L4phWoCZeYSatb3sbt4H0pfWAUARAOyRM34BgP44hv/IzxVvu9zI\ntZgjl63ZWc4eDelKjb4wibsARnJyAtSwvLKNYA7Hqtmy0imoNNRN+Yf/9gBhPnSscgAAgL8z+E8J\npRK2lLIHAQAyyti8CA8q8fST3Cnj9mvvQJ1nRwvTSdA8gmQnE5siurVXjk0Xic30BrHP9rK7eVrq\n2X+JLYzZiWNAZiQZ7IEGa5WpI7lwg72ZXkqkG5edqUdnaps5m/act3m4rXZO9hUyO6cabQMNo42V\n0DNC+BnGBafr2KrMS2incdm5G+jnDpaj06BJQRYMwjONfeCtMGtLiHXTDvJzzG00/ypbbvrjM+BK\ngau59XUUZ2+is8b/19wBm8+7HUlwVDtne9ndvFG7hMlp3+M00KYkzOl6OLi2hPhwz2W0UeM1AAAw\n1lccE9SVavMOTtcTp4z/r2uBh2IdyxaoTrEiPSn/wif4pWAyxBc3QPFLh/j5ljb8+Xni8xdChRdM\n6mWOX4PjltZpa1gBtQnVaObUe/uOJKOMzetLU+FFadw5kJ9yMc/m4ue+Kmb3RbQWeDiRRKwnEftp\nLPdJoAsEKlwLAEAHOENPADhjKLhr4nq+xSLZdZM/GqojyBdDeCnjkJmSg5+xpuGCGrbilaP4Vfit\nd2OezcXPnetEq+wYiW06EB0But9LFgNFDFsXuws/BjKjwsoiYuVXxew+47K6Zl7YWc4eDdwsxmRX\nof1qbXg5gpfx/yRq25F2IX//5/CgUFSQMQFUZIyH2M4mSC8l0k/XsZpdlHJ8eZb9dsB2/GjqQRwX\n+g3ubfpiOxu0g+0NZQHM94odq2bL5KaoOyqI75Sufe4Qeg5UplxOWHna100ndlOT8Y+CooLM7cfP\nBYnR44ti4gtbCXDmGludeZE9WlrP1tuqzo7iERIcfm8ZDKSXERukymtV7KS6Zl5YdIpcpHROIwuN\nSse7dKLn0NHI2iB9acqjKE1st7pafgvKrYkIfZjRkaLVU4sYbyowugcM9nUUfXu6CAFTAuUXJZW4\n2CCWSZXzGtZpjtWhYwqHmfM3pNc+DHSGqaatmB5GJbnqwDXvKuSduca2WwSWVZBRepAMaUi/QG5Y\nbGMhO4LQblS3QFcIDHKFwBu/ws2SBiiubhKrrcmRcFSZeigxOZQa9W4E927+BOgHNljT+JUX7zax\nUOFMQU/jcqVQFQNNHMga2Udq0VGpH4oxLhQ4axa0FT9X7ODliLwCXSGwhwN4dCFFHSsgrv5XqP/l\nFpRfuiVWVj3A9S+9C9btGcfv3jj8/tIFkxpEpWZeZI8anyerIIl6PlGq/Pg11Gm8TKZ4OmEitRd6\n4qUQ/qXSp8XBYPJD5ASoWT4Ef7KtHG0rqGErzK3fCZv/w/B0wsTqYcKarSPFCabyWENdMy9UTkP1\npgqiBb0j6GUOMR+cIT/YKXPQgDkjaUovKvbZYH7a5WfuB7HKwawYSq5ceY5YceEGe1Nr/ZaSEoBS\nIrpBglERvXUkt9XDiQwAI7tQsrfRu2BdaoA4QerY5U4apDYxWBd/7in+3Oo4LiPGQ0wCiZeBCfCa\n15//oCCVK/jXEPyOuW2Y673xdcUOBU/wBakB4osS8jCbLhIrzInHshXJfkKyVHlONcrZWd62B5VC\n60i6JZFYmTWG2zUlUPwzqHcO9OxwYdGFSdwF45iwjkK8NxVt46xwIMG3bzeir3GZpIL4OCE9SNxQ\n9W04U98idjpj+u9ReOb20WwG7dBmPs/k16E9G8uIjzMvoXXVt+EM/PZA6Lf683N/noR+8HXFmg1O\nZwzOnk5Yc/RB1lh+l78zRJoUM5+fJxbrN5M+0w7yc4puoCKt9dmCAT0o/fRgQSrmjfnTYeJlLXVo\nGUmzxhPrpwSqjhpS0EdSuCMeTqTqc/Z0wsTMftTE7GRiU+10dO700+jAlFAqQe06AIA159jvFhaS\n70FbJWHumKx1SU6xertLG44XGlBZZ8tznjsQT/9ocJuFTObNfHJu5iX03cUbbGOM0bmj/KgBc8L5\nOa2jI92vK4w4+jh/BAA0ZQhiArxa5/iqhvDyIfjtef0hwqSYmfwDnry1lM15vbXAmRLNnrZZw3eJ\n3A6QGM3id+Ph5TdZRe+VAbWRdEIgNWRnouWRx5gAr0lBxCQA2CJ3TqA7di2ZxJ80zsb0fAT6bhnJ\nRczoQ81Yf57NUmtncQH379rp6HXPR+5ni1bmX2XLVXPSe7uKoTKC2yyHfUAPSh/rCbE6AnQ6QtRh\nAmEAAF4UOVEE4ETE3RXgLi8AhxAQzlh0PnAF7TdOE43zoUKPpPAfgZFyROzAA0/XsVUfS7SZc5k9\nAwAvvR1JvfhhNPcBAND+zuC/ZgS57OVD/N+0yI00GMGt0QfzwCRKIO17nJZRxmqKWesIDqQQXyf6\ngOn0hUnZjx/Pq2I1j2QOKm7eVH8hFay0t1ptYFkF+Xa08I2xchhBr4/n1gNADy3trC8l17/zKL8c\nAOBoHTrqb3Jc8gevdxR9pMrDu4p99S5YV32Lszqi9Xgql+9Agq8512RUoNUAMMvw/9ph3FowUo4R\ne/BILQuYHxay69aOIHu/1Ft4G+5l1v1pmC+14XAVq+jeBNDmJXpvIP8emPxA0kuJ9N9LOcJpyiMj\ngctI9IEwE7mYcdl4/L4K9oQ59akpiLej6KV0vIW/X48sSouyiQG6iAPjRNOpaxtSg6ghph4pKX6+\n+VvgZQFDFEwxOS75sq+1oGtS5e46CPZ4BMkl0ZhF9W0wO/HoSjO6Yvg7pRcVa5zYlHkJ7Tx0mdUc\nZfpeITKef9J/G6BxBFE5Hk5THhIODubTc8RnWmWzBtN8ldmPUlPPpXHnwtxgKBgpRwsPVVGZOMpc\n5TCgZCPk1pC5EsXMolPkG1GZOCD0G9Ip9BvSKexb3GNcNo6WCqjESH62Ek0L7TyUJtCDuouD1O4B\nAODmr2DwmDFSHlrJmyxvks+7jqTbGZ0WkXoAp4J54dvMpz+jTw3/vNybfxmMHtKGMiy5sixHVSPX\nsqUc3R/Ck/zEpAE9KDn3533UplhShmlxAxTbIjRHC/UtQj3AvXWX8qkof0Us95mJPEzmJbQucCsZ\ndLKGtdQjSSOFriK9RExvdYrc5+0CPP+949z/nqxhKysbuNuVDdzt4usss6+CPZG0R3i+4Bpqo6ic\nCLK2Li8iVTt4cA8hRu0cAAD3LuBu+FtqBiH5sssaQHKVFgDg1TD+VS0Nq3H2Gluz6SKhdVcMZuoh\nPK38JtcIAODvhh1Nemnmp+viaXNl+L6a/N7oX3qYNwxVu4ZQCc+ZGcbPMi07VksorVzblKeDiKcy\nxhKrto7ktga6gGlPy7xyFL+auk94ydppstJUs7aZE2J3ko+tKSH+CfcS6orTS4R0qXMjPCjfZ8Oo\ncZ6PiJpnJj/Vt/FISjLWVxwT6I5VUyf6uYv9AAAOXEEHpY5LDmOtax0MSAxj0T3EQXE+VOiRK2yp\nWuO24kgtOrq5hL0fhRrRHZkmbsHFG9o8MMZUNbddgxij58cCwDala6hWZ4IUUV6U/8nU9nnc136V\nnrJ2BJ8/xm2VKGZyqlHOnGPkHK17YalB3nPYyPbklQ3cbQD4W1BXahkAQF0ze3/q19MNOyf6ooQn\nA/gnTz8pvWalxL4K9gTMUpvsAj3UCw0FgD1KJ0XRQhQAQGYlmSm1Mi7ZC1y4wd78+QbIzefpVuPY\navq4iZrikFYUkW3m72ESbmi9CzY7PshN99vwCgAw+t6OIYqQCp68OM+283wDXQixQ4L7WnjQEprB\nTM/Fz4/aJUy2lXIAKNsIxly8wTYaOq84Hyo0fSS5vGIK/8uaodyOJD9xOljo7Xr9R/w6qIwif4/g\nVO3K1j3cmKO1IGnQyw6Te6vIvXLHwtwgbMVQcqFa40qEdKXcI2llT4SBssa2U76+boLpzoN0qDuS\ndE0rMcRDGGL8vzMFziFdKXe58wEAKAUFGebJD5MqD3YVg8yVTQ1fV+zQmvwkB7PkFDnHexPpvbGY\nVexFLYEkkOYF01g9FZw5jlh7JIU78kKo8BYYeR4LrqF9Lx7GqbG7cAiYYZN+fobdVn5LeW+uMDcI\nSw2ihsgdj/Cg7ntRC2ul7THZm8ypRjkgLzA9O1x4w5JwDQOz+oivgMbeg+XbDuUhbu3Xacb5iOPM\nlaF1AzZj6G4OoJjrYJo8ZEwfd+kRMclPTDJXNiUmh1Kj8lL4XEyAlDuVWVhIvh6yDYe8e5xb0VEL\nu0rPwZiF0fi1Y49zP5qE2zAZFWh1XBaOi94ujF9XxO48Vs3K2r1yPJ2DnwZlpaI3xHOyzpvBHvds\ntFXFhOxOmfIjSAV7oomVj/qE1nCN3AlERrQX1VPhvHakBVPxb/Xn52o938epbXCdlIv4nUf5+eaE\njcwdKL3FkMo9Kxqn11uQbBjOs2GUpAKbmzC1ZgS5zMgAb0fiPipxcQH3744O+NOyaJw1nli/OJJf\nBCaOgjfzyblp2cIsa+3YkzVs5dzj5FxQUBJ3HbgvjcF/kTo2pRc/GQBgTxWxW+56xWFy2RlymYqM\n9HBvcWJBKleQPpJcntKLilXyj3s6YWLBIDwzYzQnuZ2lHP8YyLdJ8Cm+SZyXkmV9vLBeS33je1KD\nPhrcZgXeAKMWa0YqKEhxA5JbaKS/Gs79N5ym2hnwnCBv6Jry9yg88+Xewp9A4dldbBAeSK6O0nMA\nAMgYS6yS2uguvZRI//g0t9FWcnx0ituYVYmyQGG2syCCXzC+J9VmXcTfDTu27lLJHKsRZb2Mije5\nsRS07ohBvxAqvJU1hvuxdJJQsieJ2LBoMP7z9DAqKTFAFzExWBe/chi58NIz/KWlUfwqMNMwi/EQ\nB68ZQS4zGOKn65GkSzfRR0zInUBkyK1neDtjPD+SenHvWG6vlAy5V1Ge2pREyUg/eZ04qXApfS6N\nOzf7UWpqWHeK9nTCRIw3FRjsKhkuIclYH2GslNzGdHdADyQdVmmKNT2MSjLeEd+YTeXkJlvLkrJX\nmFF7R3GnFXrvWG6v8e8iwQclAACdUYG2K23lpDhMXm7kWuYOxHNleltJ3HUQnOQnBif58bbcJZF+\nubfwDoUIDADzTl4TC0HaDU0P9xYnnpnIxWeOI3buriJ3VzdDtasOXOM8hbir04TXlO4j+wqRPVxF\nECUj/VA1HJKR6758K2I5i38gq0rIVcO9uXgAoHOqEYzSt9+F3+UBbZukNNX8RyTXLtTGQAsvdkhS\n1LAsPKz0aa5Erl0AoM9M5H7ydcV+VY1cy/9EcUsAgFlfSq5PU6hX1RPx0SluYyfZqJj5soRYBQBQ\n0cA15V5FSnFNdGqA+OLqOC4jawz34+YRXPbrfYSFoJKwk3MV5agJodRzltaz9fl1HZdQtrmE3T/h\nwD2Pz7OHiC5NbPtz3LsgRS+crZCbYg3oQemVvGvxXmK8ZLkv1VeqXCul9Wx9/G48HFSM9pwk/vu/\nR+GZhqSxrF9YxUVcTa665P04WaXhjoCpvQNFTAsUrywi3tNvJn2MPR2tayM2kym/Dh039aQgibUo\ntZX0f5xql2NgU3aWs0ePVbNlThg5OlPtjzti0eK0YDmklEFuBHHRgTModERLo/ilk0OpNutN0V5U\nz7xkLtf4OnNsMwN5VWzRxO8pxc31Qt1gyPuD7k3zl58ll6vVqUlBzl5ja8Zn4/FKDdsYJi4Lx3lu\nFMPpDWKfNw7zi01DIzLK2LzSBrDVaj4z/wTZbhM8qV0e1fz/eyvYE3JhC1rQujn2gO4wwNI2zMWV\nEts9B7mYtKvNYg2o9OJbR3Jbi6egwyuHkQu3JBIrC1K5AjBRKj9n0axIbwPby+7mzcjDM1RkAABg\nNpUh1VAnzYs9eyvYE2raaSOY8dl4vBYX4DOH8DM2kIf55GfiE6lI4AAnMcC0DIGo+sxm5BFaXpAk\nSkF6xgTJGPe22H3elECX9gudcrZY+U2uUcM0kw5zg6Fv9BUWyaXjBrpA4DBfyqIdX9afZ7NmH8Nz\nQOEd5F5FeVoCSM36/MH2srt5w3bjYU2s9R+RkYEZl43H79UYgn2yhq2c8oNVSsJkV6H9fz3Cvy91\ncEA3sV0vrSUfpKqRawnPwOGWPKdgF1GTV8vDQTq4T4t85jKwu2iaGanIh2fJD8D6jktzCoIUK35i\nN79dgOfLyMF8VoQ1pR+Y/TAPV7HFQVvJoE9+JhbING4JTGUTFFqSn7CllD1o4fSP+fw88e+xu4Vp\ncidIhcJojUE6x7B1od+QvVcVE++bI9tYX3GMFoPVTSe6SZWr2UjmonfBOn9nME20AwrJp91mlLF5\nrTs/ar1vJr8O7TE9P8lPTDIOBzGXDwvZdVJKUnsH6rR+jcCih1nbzAl/PcK/H7EDDzT3ByABs+QU\nucR/kxhlaX7C3gr2hN/XpN8/fyLnaZCFyb2Kto/ag0e/nse/Z66sV+9oT/SqvsXdnZXLL4jKxFHL\nz5LzWz9GoyYfnZfM5aptPnC5GV2Wlg9Z/QUsYzhBlJryMWo73b/wAz9v6WlyKWh4H68cxa/G7BCS\n//wjfsP0/Faj32I+LGTXtdZ7v715x7HiR1KNsclXbv3dsOM4PzQu2ZdPHu4txsvkChvDVDZB5X/L\nyP9uuIA22nLbUW9njOP1KH6opzA0yEUM8ncW/RvuosaKJlRReB2dPFCFDqptjGZgehiVtHE4twFa\nNxZbcopc8u5xboU18oXTlIe/M/j7OoGvjgSd6U6IJALCz1H0L2DQcaUU3ZCulLvpB3466tPMr/Sn\nnjL6whUzvwDP/6CQXafl2tYMyydieggxAS6ivwMJDtdbUP3FW6js0FUid99lcZ+xA2ZhNH5tahD/\nTFcddNv2C7H1jcO81fsUBnWlXC9O4hoAAG7ehTK177t3yGegDehdsK6XK+rp5wT+ekdRr3cEvQsl\nugAA1N1BtZXNqPJCI5SZkx77e+Lvhh31Tkh/6y40dqad5wHubQ/7VC/xKT8n0a+skbiwuUzc3FFf\n5wp0x67eTsjregvUd9ZPd8tRmEZkR9LiGNC4cUaHKogdO52JTQnkZ9OChKkAQOfXoT0xO6Q3zTPG\npt9Jt2Ons7IwGr9mUA4AYF48TM5Qu8YUm+1zZcdOZ2JmP2ri6rj7ofbMm/nkXEumyPYplp0/HDP6\nUCmtm8fRAAA51WjbqF3CZK3X220QO39YWreivR993sRCRcg2MsSczEq7DWLnoSfSk/K/OQNdeLEv\nNQHg3o4ymeOItSapGcygTBxtTdqxfQSx81CyYBCe2Zp8Z+xybpPa23877m/JTi6qm1fbsdPZobuI\nBmVolzadX4eOT84hJlc0sFZ/rto+xbLzUJJ/jTgO7cNYmPkFeH7MDiG5ooGzybfc7VMsOw8tS2Pw\nX+YP4Oc3cdD0nxJy7epitNoWYUtIKlPOjh07duzYsWPHjh07dh4A/wcMRwRD90zgYwAAAABJRU5E\nrkJggg==",cn=function(t){c()(n,t);var e=sn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(Qe||(Qe=rn()(['\n  <gp-poster class="goldplay__screen--poster">\n  <img src="','" width="','" data-display="','" heigth="','" class="goldplay__screen--poster-image">\n  <gp-speed class="goldplay__screen--poster-speed">',"</gp-speed>\n  </gp-poster>\n  "])),"poster","width","display","height","speed")),y()(u()(t),"data",{poster:"",status:"",display:"show",speed:"",width:"",height:""}),y()(u()(t),"options",{}),t.options=r,r.player.poster?t.data.poster=r.player.poster:t.data.poster=ln,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"resetPosition",value:function(){if(this.element)this.element.parentNode.offsetWidth,this.element.parentNode.offsetHeight}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoaderUpdateSpeed,(function(e){"show"===t.data.display&&(t.data.speed=an.formatBytes(e.speed)+" /s")}))}},{key:"hide",value:function(){"hide"!==this.data.display&&(this.element.style.opacity=0,this.element.style.display="none",this.data.display="hide")}}]),n}(en);function fn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var hn=function(t){c()(n,t);var e=fn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(un||(un=rn()(['\n    <gp-control class="goldplay__control--container ','" style="width:',"px;height:","px;opacity:",'" data-status="','">\n      ',"\n      ","\n      ","\n    </gp-control>\n  "])),"containerFloatCss","width","height","opacity","status","progressBarName|component","sideControlBarName|component","nearControlBarName|component")),y()(u()(t),"hideDelayTime",void 0),y()(u()(t),"hideTimeCount",void 0),y()(u()(t),"data",{progressBarName:"progressBar",sideControlBarName:"sideControlBar",nearControlBarName:"nearControlBar",width:"",height:"",opacity:1,containerFloatCss:"",display:"show",status:""}),y()(u()(t),"options",{}),t.options=r,t.hideDelayTime=t.options.player.controlBarAutoHideTime||3,r.player.controlBarAutoHide&&(t.data.containerFloatCss=t.options.cssName.controlContainerFloat,t.resetPosition()),Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"initProps",value:function(){this.hideTimeCount=this.hideDelayTime}},{key:"bindEvent",value:function(){var t=this,e=this.options;e.player.controlBarAutoHide&&(e.$container.addEventListener("mousemove",(function(){t.hideTimeCount<=0&&(t.data.display="show",t.show()),t.hideTimeCount=t.hideDelayTime})),setInterval((function(){t.hideTimeCount>0?t.hideTimeCount-=1:"hide"!==t.data.display&&(t.data.display="hide",t.hide())}),100))}},{key:"setSize",value:function(t,e){void 0!==t&&(this.data.width=t),void 0!==e&&(this.data.height=e)}},{key:"show",value:function(){var t,e=this;this.options.player.controlBarAutoHide?(clearTimeout(t),t=setTimeout((function(){e.data.opacity=1}),1)):this.data.opacity=1}},{key:"hide",value:function(){this.data.opacity=0}},{key:"resetPosition",value:function(){this.setSize(this.options.$container.offsetWidth,this.options.player.controlBarHeight)}}]),n}(en),dn=k.a.get("Delegator.js");function pn(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:"object"===T()(t)&&(1===t.nodeType&&"string"==typeof t.nodeName)}function vn(t){t.preventDefault(),t.stopPropagation()}function yn(t,e,n,r,i){var o=function(t,e){if(t&&t.matches){if(!Array.isArray(e))return t.matches(e);for(var n=0,r=e.length;n<r;n++)if(t.matches(e[n]))return!0}return!1};function a(t){for(var e=(t=t||window.event).target||t.srcElement,i=t.currentTarget,a=!0;a&&e!==i&&e;){if(o(e,n)&&(a=!1!==r.call(e,t)),!a)return void vn(t);e=e.parentNode}}r.__delegateWrapper=a,function(t,e,n,r){void 0===r&&(r="blur"===e||"focus"===e),pn(t)&&t.addEventListener(e,n,r)}(t,e,a,i)}var gn,mn=function(){function t(e){return i()(this,t),y()(this,"element",null),pn(e)?this.element=e:dn.error("constructor","new instance","element:",this.element),this}return a()(t,[{key:"off",value:function(t,e,n){return e.__delegateWrapper&&delete(e=e.__delegateWrapper).__delegateWrapper,this.element.removeEventListener(t,e,n),this}},{key:"on",value:function(t,e,n,r){var i=this;return Array.isArray(e)?e.forEach((function(e){yn(i.element,t,e,n,r)})):yn(this.element,t,e,n,r),this}},{key:"once",value:function(t,e,n,r){return this.on(t,e,n,{capture:r,once:!0}),this}}]),t}(),bn=null,xn=function(t){return"string"==typeof t&&(t=document.querySelector(t)),bn?bn.element=t:bn=new mn(t),bn},kn=function(){function t(e,n){var r=n.$container,o=n.type,a=n.scope,s=n.onStart,u=n.onDrag,l=n.onRelease;i()(this,t),y()(this,"$container",null),y()(this,"$ele",null),y()(this,"active",!1),y()(this,"offsetX",0),y()(this,"offsetY",0),y()(this,"offsetLeft",0),y()(this,"offsetTop",0),y()(this,"orginOffsetLeft",0),y()(this,"orginOffsetTop",0),y()(this,"orginOffsetWidth",0),y()(this,"orginOffsetHeight",0),y()(this,"initialX",0),y()(this,"initialY",0),y()(this,"type","default"),y()(this,"scope",{}),this.$container=r||document.body,this.$ele=e,this.type=o,this.scope=a,this.eventsList={},this.onStart=s,this.onDrag=u,this.onRelease=l,this.bindEvent()}return a()(t,[{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,n,r),{destroy:function(){t.removeEventListener(e,n)}}}},{key:"removeEventListenerAll",value:function(){var t=this;Object.keys(this.eventsList).forEach((function(e){t.eventsList[e].destroy()}))}},{key:"bindEvent",value:function(){var t=this;this.eventsList.mousedown=this.addEventListener(this.$container,"mousedown",(function(e){t.start(e)}),!1),this.eventsList.mouseup=this.addEventListener(this.$container,"mouseup",(function(e){t.release(e)}),!1),this.eventsList.mousemove=this.addEventListener(this.$container,"mousemove",(function(e){t.drag(e)}),!1)}},{key:"start",value:function(t){t.target===this.$ele&&(void 0===this.scope&&void 0!==this.$container&&(this.scope={left:this.$container.offsetLeft,right:this.$container.offsetLeft+this.$container.offsetWidth,top:this.$container.offsetTop,bottom:this.$container.offsetTop+this.$container.offsetHeight}),this.offsetLeft=this.$ele.offsetLeft,this.offsetTop=this.$ele.offsetTop,this.active=!0,this.initialX=t.clientX,this.initialY=t.clientY,this.orginOffsetLeft=this.$ele.offsetLeft,this.orginOffsetTop=this.$ele.offsetTop,this.orginOffsetWidth=this.$ele.offsetWidth,this.orginOffsetHeight=this.$ele.offsetHeight,"function"==typeof this.onStart&&this.onStart.call(this,this.offsetX,this.offsetY,t,this))}},{key:"release",value:function(t){this.active=!1,"function"==typeof this.onRelease&&this.onRelease.call(this,this.offsetX,this.offsetY,t,this)}},{key:"drag",value:function(t){this.active&&(t.preventDefault(),t.stopPropagation(),this.offsetX=t.clientX-this.initialX+this.offsetLeft,this.offsetY=t.clientY-this.initialY+this.offsetTop,this.setPosition(t))}},{key:"setPosition",value:function(t){switch(this.type){case"vertical":this.offsetX=this.orginOffsetLeft,this.offsetY<this.scope.top&&(this.offsetY=this.scope.top),this.offsetY>this.scope.bottom-this.orginOffsetHeight&&(this.offsetY=this.scope.bottom-this.orginOffsetHeight);break;case"level":this.offsetY=this.orginOffsetTop,this.offsetX>this.scope.right-this.orginOffsetWidth&&(this.offsetX=this.scope.right-this.orginOffsetWidth),this.offsetX<this.scope.left&&(this.offsetX=this.scope.left);break;default:isNaN(this.scope.right)||this.offsetX>this.scope.right-this.orginOffsetWidth&&(this.offsetX=this.scope.right-this.orginOffsetWidth),isNaN(this.scope.left)||this.offsetX<this.scope.left&&(this.offsetX=this.scope.left),isNaN(this.scope.top)||this.offsetY<this.scope.top&&(this.offsetY=this.scope.top),isNaN(this.scope.bottom)||this.offsetY>this.scope.bottom-this.orginOffsetHeight&&(this.offsetY=this.scope.bottom-this.orginOffsetHeight)}this.$ele.style.left=this.offsetX+"px",this.$ele.style.top=this.offsetY+"px","function"==typeof this.onDrag&&this.onDrag.call(this,this.offsetX,this.offsetY,t,this)}},{key:"destroy",value:function(){this.$ele.parentNode.removeChild(this.$ele),this.removeEventListenerAll()}}]),t}(),wn=function(t,e){return new kn(t,e)};function Pn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var _n,Sn=function(t){c()(n,t);var e=Pn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(gn||(gn=rn()(['\n    <gp-control-progressbar class="goldplay__progress-bar ','" data-status="','">\n      <div class="goldplay__progressbar--load ','">\n      </div>\n      <div class="goldplay__progressbar--play ','">\n      </div>\n      <span class="goldplay__progressbar--dot ','" title="','"></span>\n    </gp-control-progressbar>\n  '])),"progressBarHoverCss","status","progressBarLoadHoverCss","progressBarPlayHoverCss","progressBarDotHoverCss","time")),y()(u()(t),"options",{}),y()(u()(t),"data",{playWidth:"",dot:"",time:"",status:""}),y()(u()(t),"setProgressBarSize",(function(e){t.$progressBarPlay.style.width=e+"px"})),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){var t=this.options.cssName;"dragstart"===this.data.status?(this.data.progressBarHoverCss=t.progressBarHover,this.data.progressBarLoadHoverCss=t.progressBarLoadHover,this.data.progressBarPlayHoverCss=t.progressBarPlayHover,this.data.progressBarDotHoverCss=t.progressBarDotHover):"dragend"===this.data.status&&(this.data.progressBarHoverCss="",this.data.progressBarLoadHoverCss="",this.data.progressBarPlayHoverCss="",this.data.progressBarDotHoverCss="")}},{key:"afterInit",value:function(){}},{key:"initProps",value:function(){var t=this.element,e=this.options.cssName;this.$progressDragDot=t.querySelector("."+e.progressBarDot),this.$progressBarPlay=t.querySelector("."+e.progressBarPlay),this.$progressBarLoad=t.querySelector("."+e.progressBarLoad),this.timer=this.getComponent("timer"),this.pauseButton=this.getComponent("pauseButton")}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,n=!1;this.events.on(st.PlayerTimeUpdate,(function(e){var r=t.options.dataManage.sourceData.duration;if(!n&&e&&r){var i=e/1e3/r*t.progressBarWidth;t.setProgressPosition(i),t.timer.data.time=on.formatHHMMSS(e/1e3)}})),this.events.on(st.PlayerbufferUpdate,(function(e){!n&&e&&t.updateProgressLoad(e)})),xn(this.options.$controlBarContainer).on("click","."+e.progressBar,(function(n){if(n.target!==t.$progressDragDot){var r=(t.options.dataManage.sourceData.duration||0)/t.progressBarWidth,i=0;n.target.classList.contains(e.progressBarLoad)&&(i=n.target.offsetLeft-n.target.parentNode.offsetLeft);var o=i+n.offsetX,a=o*r*1e3;return t.setProgressPosition(o),t.logger.info("bindEvent","click to seek","seekTime:",a,"offsetX:",o),n.target!==t.$progressBarLoad&&t.clearLoadBar(n.offsetX),t.timer.data.time=on.formatHHMMSS(a/1e3),t.events.emit(st.PlayerOnSeek,a),!1}})),this.progressDragEvent=wn(this.$progressDragDot,{$container:document.body,type:"level",scope:{left:this.progressBarLeft,right:this.progressBarLeft+this.progressBarWidth,top:this.$progressDragDot.offsetTop,bottom:this.$progressDragDot.offsetTop+this.$progressDragDot.offsetHeight},onStart:function(){n=!0,t.data.status="dragstart"},onDrag:function(e){var n;n=t.options.player.controlBarAutoHide?e:e-t.options.$controlBarContainer.offsetLeft;var r=0,i=t.$progressDragDot.offsetWidth;t.progressBarWidth-n<=i&&(r=i),t.setProgressBarSize(n),t.data.status="draging";var o=t.getSeekTime(t.progressBarWidth-r);t.timer.data.time=on.formatHHMMSS(o/1e3),t.data.time=t.timer.data.time},onRelease:function(e,r,i){if(n){var o=t.getSeekTime();i.target!==t.$progressBarLoad&&t.clearLoadBar(e),t.events.emit(st.PlayerOnSeek,o),t.logger.info("bindEvent","onDrag release seek","seekTime:",o),t.data.status="dragend",n=!1}}})}},{key:"setProgressPosition",value:function(t){var e=Math.min(t,this.progressBarWidth),n=this.$progressDragDot,r=this.progressBarWidth,i=0,o=n.offsetWidth/2;e>r||r-e<=o?i=o-(r-e):e<=o&&(i=-(o-e));var a=e-i-n.offsetWidth/2;this.setProgressPlayWidth(e),this.setProgressDragDotLeft(a+this.progressBarLeft)}},{key:"setProgressPlayWidth",value:function(t){this.$progressBarPlay.style.width=t+"px"}},{key:"setProgressDragDotLeft",value:function(t){this.$progressDragDot.style.left=t+"px"}},{key:"getProgressPlayLeftWidth",value:function(){return{offsetLeft:this.$progressBarPlay.offsetLeft,offsetWidth:this.$progressBarPlay.offsetWidth}}},{key:"getProgressLoadLeftWidth",value:function(){return{offsetLeft:this.$progressBarLoad.offsetLeft,offsetWidth:this.$progressBarLoad.offsetWidth}}},{key:"setProgressLoadLeftWidth",value:function(t,e){var n=this.progressBarLeft+this.progressBarWidth;(t=Math.min(t,n))+e>n&&(e=n-t),this.$progressBarLoad.style.left=t+"px",this.$progressBarLoad.style.width=e+"px"}},{key:"updateProgressLoad",value:function(t){var e=this.options.dataManage.sourceData.duration;if(e){var n=this.progressBarWidth,r=this.progressBarLeft,i=t[0]/1e3/e*n,o=t[1]/1e3/e*n,a=Math.floor(r+i),s=Math.floor(o-i);this.setProgressLoadLeftWidth(a,s)}}},{key:"getSeekTime",value:function(t,e){var n=this.progressBarWidth,r=(e=e||this.options.dataManage.sourceData.duration||0)/(t||n);return this.$progressBarPlay.offsetWidth*r*1e3}},{key:"clearLoadBar",value:function(t){t<this.$progressBarLoad.offsetLeft-this.progressBarLeft&&(this.$progressBarLoad.style.width="0px")}},{key:"getDragDotPosition",value:function(){return{offsetLeft:this.$progressDragDot.offsetLeft,offsetTop:this.$progressDragDot.offsetTop,left:this.$progressDragDot.style.left,top:this.$progressDragDot.style.top}}},{key:"progressBarWidth",get:function(){return this.element.offsetWidth}},{key:"progressBarLeft",get:function(){return this.element.offsetLeft}},{key:"clearDragDotTop",value:function(){this.$progressDragDot.style.top=""}}]),n}(en);function Bn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var En,Tn,Rn=function(t){c()(n,t);var e=Bn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(_n||(_n=rn()(['\n  <gp-button class="goldplay__control--play" data-status="','" title="','">\n  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  viewBox="0 0 232.153 232.153" width="20" height="20" style="enable-background:new 0 0 232.153 232.153;" xml:space="preserve">\n  <g >\n  <path style="fill-rule:evenodd;clip-rule:evenodd;" d="M203.791,99.628L49.307,2.294c-4.567-2.719-10.238-2.266-14.521-2.266\n    c-17.132,0-17.056,13.227-17.056,16.578v198.94c0,2.833-0.075,16.579,17.056,16.579c4.283,0,9.955,0.451,14.521-2.267\n    l154.483-97.333c12.68-7.545,10.489-16.449,10.489-16.449S216.471,107.172,203.791,99.628z" fill="#f1f1f1"/>\n  </g>\n  </svg>\n  </gp-button>\n  '])),"status","title")),y()(u()(t),"data",{title:"play",play:">"}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n)}(en);function Ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var An,Cn=Fe.create(En||(En=rn()(['\n<svg style="display:','" class="goldplay__control--pausing" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 26 26" style="background:none" xml:space="preserve">\n<g>\n<path d="M2.667,0h6v26h-6V0z M15.333,0v26h6V0H15.333z" fill="#f1f1f1"/>\n</g>\n</svg>\n'])),"pauseHide"),Dn=function(t){c()(n,t);var e=Ln(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate((function(t,e){return e(Tn||(Tn=rn()(['\n  <gp-button class="goldplay__control--pause" title="','" status="','">\n  ',"\n  </gp-button>\n  "])),"title","status","icon|html")}))),y()(u()(t),"data",{title:"pause",pauseHide:"",pauseLoadingHide:"none",icon:Cn,status:"",display:""}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){"pauseloading"===this.data.status?(this.data.pauseHide="none",this.data.pauseLoadingHide="inline-block",this.data.title="loading",this.data.icon='\n<svg version="1.1" class="goldplay__control--pause-loading" style="display:${\'pauseLoadingHide\'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 612 792" style="background:none;margin: -4px 0 0 -5px;" xml:space="preserve">\n<linearGradient id="goldplay-pause-loading-gradient" gradientUnits="userSpaceOnUse" x1="1.98" y1="784.6123" x2="26.2101" y2="770.623" gradientTransform="matrix(21.8571 0 0 21.8571 -2.0895 -16600.5293)">\n    <stop offset="0.1682" style="stop-color:#f1f1f1;stop-opacity:0"></stop>\n    <stop offset="0.7502" style="stop-color:#f1f1f1"></stop>\n    <stop offset="1" style="stop-color:#f1f1f1"></stop>\n</linearGradient>\n<path style="transform-origin: center center;animation: goldplay-rotate-360 .8s linear infinite;" fill="url(#goldplay-pause-loading-gradient)" d="M306,133.714c144.257,0,262.286,118.028,262.286,262.286c0,144.257-118.029,262.286-262.286,262.286\n  C161.743,658.286,43.714,540.257,43.714,396C43.714,251.743,161.743,133.714,306,133.714 M306,90C137.7,90,0,227.7,0,396\n  s137.7,306,306,306s306-137.7,306-306S474.3,90,306,90L306,90z">\n    <animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0" to="360" dur=".8s" repeatCount="indefinite" />\n</path>\n<g>\n    <g>\n        <path fill="#f1f1f1" d="M229.5,514.028L229.5,514.028c-13.114,0-21.857-8.742-21.857-21.856V295.457\n        c0-10.929,8.743-21.857,21.857-21.857l0,0c10.929,0,21.857,8.743,21.857,21.857v196.715\n        C251.357,503.1,242.614,514.028,229.5,514.028z"></path>\n        <path fill="#f1f1f1" d="M229.5,273.6c-13.114,0-21.857,8.743-21.857,21.857v196.715c0,10.928,8.743,21.856,21.857,21.856\n        s21.857-10.929,21.857-21.856V295.457C251.357,282.343,242.614,273.6,229.5,273.6L229.5,273.6z"></path>\n    </g>\n    <g>\n        <path fill="#f1f1f1" d="M382.5,518.4L382.5,518.4c-13.114,0-21.857-8.743-21.857-21.857V299.829\n        c0-10.929,8.743-21.857,21.857-21.857l0,0c10.929,0,21.857,8.743,21.857,21.857v196.714\n        C404.357,509.657,395.614,518.4,382.5,518.4z"></path>\n        <path fill="#f1f1f1" d="M382.5,277.972c-10.929,0-21.857,8.743-21.857,21.857v196.714c0,10.929,10.929,21.857,21.857,21.857\n        s21.857-10.929,21.857-21.857V299.829C404.357,288.9,393.429,277.972,382.5,277.972L382.5,277.972z"></path>\n    </g>\n</g>\n</svg>\n'):"pause"===this.data.status&&(this.data.pauseHide="inline-block",this.data.pauseLoadingHide="none",this.data.title="pause",this.data.icon=Cn)}}]),n}(en);function On(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Mn,Un,Nn,In=function(t){c()(n,t);var e=On(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(An||(An=rn()(['\n  <gp-button class="goldplay__control--replay" title="','" data-display="','">\n  <svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n  width="24px" height="24px" viewBox="0 0 245.000000 206.000000"\n  preserveAspectRatio="xMidYMid meet">\n <g transform="translate(0.000000,206.000000) scale(0.100000,-0.100000)"\n fill="#f1f1f1" stroke="1">\n <path d="M1250 2046 c-286 -55 -525 -211 -681 -445 -91 -136 -152 -302 -167\n -453 -12 -119 3 -108 -143 -109 -70 -1 -156 -4 -192 -8 l-65 -6 262 -265 262\n -265 266 265 265 265 -62 6 c-35 4 -123 7 -197 8 l-134 1 7 69 c26 284 232\n 543 504 635 201 69 404 53 596 -47 62 -32 103 -63 177 -137 83 -83 102 -108\n 142 -190 63 -130 77 -193 77 -340 0 -178 -37 -298 -134 -435 -91 -126 -220\n -224 -369 -278 -72 -26 -99 -31 -218 -35 -117 -4 -146 -1 -215 17 -104 29\n -205 79 -283 142 l-63 52 -89 -89 c-49 -49 -89 -96 -89 -106 0 -24 154 -136\n 253 -185 89 -44 177 -74 272 -95 84 -17 303 -15 391 5 403 91 691 371 795 772\n 19 76 23 114 22 240 0 129 -4 164 -27 249 -99 377 -406 673 -778 751 -104 22\n -297 28 -385 11z"/>\n <path d="M1227 1418 c-9 -68 -7 -695 2 -770 l6 -57 240 200 c132 110 251 210\n 264 223 l23 24 -257 213 c-141 118 -260 215 -264 217 -5 1 -11 -21 -14 -50z"/>\n </g>\n </svg>\n  </gp-button>\n  '])),"title","display")),y()(u()(t),"data",{title:"replay",display:"",replay:"->"}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n)}(en);function Fn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var jn,Hn=Fe.create(Mn||(Mn=rn()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20px" height="20px" viewBox="0 0 24 24" style="margin-left: -5px;">\n<path d="M5.2 7.68l6.175-5.293a.5.5 0 0 1 .825.38v17.825a.5.5 0 0 1-.825.38L5.2 15.679H3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2.2zm9 13.35v-2.375l.007-.003C16.852 17.493 19 14.897 19 11.479s-2.148-6.014-4.793-7.173a4.11 4.11 0 0 0-.007-.003V2c.027.006.054.012.082.02.852.221 1.274.453 1.436.535A10 10 0 0 1 21.2 11.48c0 4.106-2.474 7.633-6.013 9.174-.526.229-.583.284-.987.377zm0-13.973c1.5.925 2.5 2.582 2.5 4.473 0 1.892-1 3.55-2.5 4.473V7.057z" fill="#f1f1f1"></path>\n</svg>\n'])),"audioOnHide"),Wn=Fe.create(Un||(Un=rn()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20px" height="20px" viewBox="0 0 24 24" style="margin-left: -5px;">\n<path d="M12.2 13.914v6.678a.5.5 0 0 1-.825.38L5.2 15.679H3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2.2l.412-.353-2.558-2.558a.5.5 0 0 1 0-.707l.707-.707a.5.5 0 0 1 .707 0l16.849 16.849a.5.5 0 0 1 0 .707l-.707.707a.5.5 0 0 1-.707 0l-2.386-2.386a10 10 0 0 1-2.33 1.422c-.526.229-.583.284-.987.377v-2.375l.007-.003a8.332 8.332 0 0 0 1.717-1.014l-1.67-1.669a5.251 5.251 0 0 1-.054.034v-.089l-2-2zM8.373 4.96l3.002-2.572a.5.5 0 0 1 .825.38v6.019L8.373 4.959zm9.867 9.867c.48-.99.76-2.115.76-3.347 0-3.418-2.148-6.014-4.793-7.173a4.11 4.11 0 0 0-.007-.003V2c.027.006.054.012.082.02.852.221 1.274.453 1.436.535A10 10 0 0 1 21.2 11.48a9.954 9.954 0 0 1-1.326 4.98l-1.634-1.633zm-1.766-1.766L14.2 10.786V7.057a5.247 5.247 0 0 1 2.274 6.003z" fill="#f1f1f1"></path>\n</svg>\n'])),"audioOffHide"),Vn=function(t){c()(n,t);var e=Fn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(Nn||(Nn=rn()(['\n  <gp-volume class="goldplay__volume-bar">\n    <gp-overbox class="goldplay-hoverbox goldplay__volume-bar--handle">\n      <span class="goldplay__volume-bar--precent">','</span>\n      <span class="goldplay__volume-bar--rod ','" title="adjust volume"></span>\n      <span class="goldplay__volume-bar--size">&nbsp;</span>\n      <span class="goldplay__volume-bar--column">&nbsp;</span>\n    </gp-overbox>\n    <gp-button class="goldplay__volume-bar--audio ','" title="','" data-mute="','" data-volume-size="','"  data-last-volume="','">\n    ',"\n    </gp-button>\n  </gp-volume>\n  "])),"dataPrecent","volumeBarRodHoverCss","audioOffClass","title","dataMute","dataVolumeSize","dataLastVolume","icon|html")),y()(u()(t),"options",{}),y()(u()(t),"data",{audioONHide:"",audioOffHide:"",audioOffClass:"",dataVolumeSize:"",dataPrecent:"",dataLastVolume:"",dataMute:"",volumeBarRodHoverCss:"",icon:Hn,title:"turn off"}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){this.data.dataPrecent=Math.floor(100*this.data.dataVolumeSize),""!==this.data.audioOffClass?(this.data.dataMute="true",this.data.audioOffHide="inline-block",this.data.audioOnHide="none",this.data.icon=Wn,this.data.title="turn on"):(this.data.dataMute="",this.data.audioOffHide="none",this.data.audioOnHide="inline-block",this.data.icon=Hn,this.data.title="turn off")}},{key:"initProps",value:function(){var t=this.element,e=this.options.cssName;this.INIT_VOLUME_SIZE=void 0===this.options.player.defaultVolumeSize?.5:this.options.player.defaultVolumeSize,this.$volumeBarHandle=t.querySelector("."+e.volumeBarHandle),this.$volumeBarRod=t.querySelector("."+e.volumeBarRod),this.$volumeBarAudio=t.querySelector("."+e.volumeBarAudio),this.$volumeBarSize=t.querySelector("."+e.volumeBarSize),this.$volumeBarColumn=t.querySelector("."+e.volumeBarColumn),this.volumeBarColumnHeight=this.$volumeBarColumn.offsetHeight,this.volumeBarColumnTop=this.$volumeBarColumn.offsetTop,this.volumeBarRodHeight=this.$volumeBarRod.offsetHeight,this.volumeBarRodHeightHalf=this.volumeBarRodHeight/2,this.volumeBarColumnRealTop=this.volumeBarColumnTop+this.volumeBarRodHeightHalf,this.volumeBarColumnMaxHeight=this.volumeBarColumnHeight-this.volumeBarRodHeight}},{key:"bindEvent",value:function(){var t,e=this,n=this.options.$controlBarContainer,r=this.options.cssName;xn(n).on("mouseover","."+r.volumeBar,(function(){clearTimeout(t),e.showVolumeBarHandle()})),xn(n).on("mousewheel","."+r.volumeBarHandle,(function(t){var n=t.wheelDelta/500;n=e.data.dataVolumeSize+n,e.setVolumeSize(n),t.preventDefault(),t.stopPropagation()})),xn(n).on("click",["."+r.volumeBarColumn,"."+r.volumeBarSize],(function(t){var n=0;return t.target===e.$volumeBarColumn?n=(e.$volumeBarColumn.offsetHeight-t.offsetY)/t.target.offsetHeight:t.target===e.$volumeBarSize&&(n=e.$volumeBarColumn.offsetHeight-t.target.offsetHeight+t.offsetY,n=e.$volumeBarColumn.offsetHeight-n,n/=e.$volumeBarColumn.offsetHeight),e.setVolumeSize(n),!1})),xn(n).on("click","."+r.volumeBarAudio,(function(t){return e.$volumeBarAudio.classList.contains(r.volumeBarAudioOff)?e.setAudioOn(t.offsetY):e.setAudioOff(t.offsetY),!1}));xn(n).on("mouseout","."+r.volumeBar,(function(n){t=setTimeout((function(){!function(t){var n=e.element,r={y:n.offsetTop+e.$volumeBarHandle.offsetTop,x:n.offsetLeft};return r.width=n.offsetWidth,r.height=e.$volumeBarHandle.offsetHeight,t.pageX>r.x&&t.pageX<r.x+r.width&&t.pageY>r.y&&t.pageY<r.y+r.height}(n)?e.hideVolumeBarHandle():clearTimeout(t)}),I.c.hideBarBoxTime)})),this.volumeDragEvent=wn(this.$volumeBarRod,{$container:this.element,type:"vertical",scope:{top:this.volumeBarColumnTop,right:0,bottom:this.volumeBarColumnTop+this.volumeBarColumnHeight,left:0},onStart:function(){e.data.volumeBarRodHoverCss=e.options.cssName.volumeBarRodHover},onDrag:function(t,n){n-=1,e.dragHandle(n)},onRelease:function(){e.data.volumeBarRodHoverCss=""}})}},{key:"hideVolumeBarHandle",value:function(){this.$volumeBarHandle.style.visibility="hidden"}},{key:"showVolumeBarHandle",value:function(){this.$volumeBarHandle.style.visibility="visible"}},{key:"getVolume",value:function(){var t=(this.$volumeBarSize.offsetHeight-this.volumeBarRodHeight)/this.volumeBarColumnMaxHeight;return t=Math.min(t,1),(t=Math.max(t,0)).toFixed(2)}},{key:"setVolume",value:function(t){this.data.dataVolumeSize=Number(t),this.events.emit(st.PlayerOnVolume,t)}},{key:"initVolumeSize",value:function(){this.data.dataLastVolume=this.INIT_VOLUME_SIZE,this.setAudioOn()}},{key:"setAudioOn",value:function(){var t=this.data.dataLastVolume||0;this.setVolume(t);var e=parseFloat(t,10),n=Math.floor(e*this.volumeBarColumnMaxHeight),r=this.volumeBarColumnTop+(this.volumeBarColumnMaxHeight-n);this.$volumeBarSize.style.marginTop=r+"px",this.$volumeBarSize.style.height=n+this.volumeBarRodHeight+"px",this.$volumeBarRod.style.top=r+"px",this.data.audioOffClass=""}},{key:"setAudioOff",value:function(){this.setVolume(0),this.data.audioOffClass=this.options.cssName.volumeBarAudioOff;var t=this.getVolume();t>0&&(this.data.dataLastVolume=t),this.$volumeBarSize.style.height=this.volumeBarRodHeight+"px",this.$volumeBarSize.style.marginTop=this.volumeBarColumnRealTop-this.volumeBarRodHeightHalf+this.volumeBarColumnMaxHeight+"px",this.$volumeBarRod.style.top=this.volumeBarColumnRealTop+this.volumeBarColumnMaxHeight-this.volumeBarRodHeightHalf+"px"}},{key:"dragHandle",value:function(t){this.$volumeBarSize.style.marginTop=t+1+"px",this.$volumeBarSize.style.height=this.volumeBarColumnHeight-t+this.volumeBarRodHeight+"px";var e=this.getVolume();e<=0?this.setAudioOff(t):"true"==this.data.dataMute&&this.setAudioOn(t),this.setVolume(e)}},{key:"setVolumeSize",value:function(t){if((t=t.toFixed(2))>=1?t=1:t<.001&&(t=0),t!==this.data.dataVolumeSize){this.setVolume(t);var e=this.volumeBarColumnMaxHeight,n=e-t*e+this.volumeBarColumnTop;this.$volumeBarSize.style.marginTop=n+"px",this.$volumeBarSize.style.height=t*e+this.volumeBarRodHeight+"px",this.$volumeBarRod.style.top=n+"px",t<=0?this.data.audioOffClass=this.options.cssName.volumeBarAudioOff:"true"==this.data.dataMute&&(this.data.audioOffClass="")}}}]),n}(en);function zn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Gn,Xn=function(t){c()(n,t);var e=zn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(jn||(jn=rn()(['\n  <gp-wait class="goldplay-tip goldplay__waiting-bar" title="','" data-status="','">\n    <span class="goldplay__waiting-bar--icon">\n    <svg width="60px" height="60px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background: none;opacity:0.8">\n    <circle cx="50" cy="50" fill="none" stroke-linecap="round" r="40" stroke-width="8" stroke="#f6f6f6" stroke-dasharray="62.83185307179586 62.83185307179586" transform="rotate(17.8841 50 50)">\n    <animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="0.7s" begin="0s" repeatCount="indefinite">\n    </animateTransform>\n    </circle>\n    </svg>\n  </span>\n  <gp-speed class="goldplay__waiting-bar--speed">',"</gp-speed>\n  </gp-wait>\n  "])),"title","status","speed")),y()(u()(t),"data",{title:"waiting",speed:"",status:"",display:"show"}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"initProps",value:function(){}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoaderUpdateSpeed,(function(e){"show"===t.data.display&&(t.data.speed=an.formatBytes(e.speed)+" /s")}))}},{key:"showWaiting",value:function(){var t=this.options.cssName,e=this.options.$screenContainer;e.querySelector("."+t.waitingBar)||e.prepend(this.element),this.data.display="show",this.show(),this.resetPosition()}},{key:"hideWaiting",value:function(){var t=this.options.cssName;this.options.$screenContainer.querySelector("."+t.waitingBar)&&(this.data.display="hide",this.data.speed="Loading...",this.hide())}}]),n}(en);function Yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var $n,qn=function(t){c()(n,t);var e=Yn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(Gn||(Gn=rn()(['\n  <gp-alert class="goldplay-tip goldplay__alter-box" title="','" data-display="','">\n  <em title="close" class="goldplay__alter--close">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background:none;opacity:0.6" xml:space="preserve" width="20px" height="20px" viewBox="0 0 496.158 496.158">\n    <path style="fill:#ff3300;" d="M496.158,248.085c0-137.021-111.07-248.082-248.076-248.082C111.07,0.003,0,111.063,0,248.085\n    c0,137.002,111.07,248.07,248.082,248.07C385.088,496.155,496.158,385.087,496.158,248.085z"/>\n    <path style="fill:#FFFFFF;" d="M277.042,248.082l72.528-84.196c7.91-9.182,6.876-23.041-2.31-30.951\n    c-9.172-7.904-23.032-6.876-30.947,2.306l-68.236,79.212l-68.229-79.212c-7.91-9.188-21.771-10.216-30.954-2.306\n    c-9.186,7.91-10.214,21.77-2.304,30.951l72.522,84.196l-72.522,84.192c-7.91,9.182-6.882,23.041,2.304,30.951\n    c4.143,3.569,9.241,5.318,14.316,5.318c6.161,0,12.294-2.586,16.638-7.624l68.229-79.212l68.236,79.212\n    c4.338,5.041,10.47,7.624,16.637,7.624c5.069,0,10.168-1.749,14.311-5.318c9.186-7.91,10.22-21.77,2.31-30.951L277.042,248.082z"/>\n    </svg>\n  </em>\n  <span class="goldplay__alter--warn">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    width="30" height="30" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n    <path style="fill:#495A79;" d="M501.461,383.799L320.501,51.401C306.7,28.6,282.7,14.8,256,14.8s-50.7,13.8-64.501,36.601\n      L10.539,383.799C-3.259,407.501-3.56,435.701,9.941,459.4c13.499,23.699,37.798,37.8,65.099,37.8h361.92\n      c27.301,0,51.601-14.101,65.099-37.8C515.56,435.701,515.259,407.501,501.461,383.799z"/>\n    <path style="fill:#42516D;" d="M502.059,459.4c-13.499,23.699-37.798,37.8-65.099,37.8H256V14.8c26.7,0,50.7,13.801,64.501,36.601\n      L501.461,383.8C515.259,407.501,515.56,435.701,502.059,459.4z"/>\n    <path style="fill:#FFDE33;" d="M475.661,399.1L294.699,66.699C286.601,52.9,271.901,44.8,256,44.8s-30.601,8.101-38.699,21.899\n      L36.339,399.1c-8.399,14.101-8.399,31.199-0.298,45.3c8.099,14.399,22.798,22.8,39,22.8h361.92c16.201,0,30.901-8.401,39-22.8\n      C484.06,430.299,484.06,413.201,475.661,399.1z"/>\n    <path style="fill:#FFBC33;" d="M475.96,444.4c-8.099,14.399-22.798,22.8-39,22.8H256V44.8c15.901,0,30.601,8.101,38.699,21.899\n      L475.661,399.1C484.06,413.201,484.06,430.299,475.96,444.4z"/>\n    <g>\n      <path style="fill:#495A79;" d="M256,437.2c-16.538,0-30-13.462-30-30s13.462-30,30-30s30,13.462,30,30S272.538,437.2,256,437.2z"/>\n      <path style="fill:#495A79;" d="M286,317.2c0,16.538-13.462,30-30,30s-30-13.462-30-30v-150c0-16.538,13.462-30,30-30\n        s30,13.462,30,30V317.2z"/>\n    </g>\n    <g>\n      <path style="fill:#42516D;" d="M286,407.2c0-16.538-13.462-30-30-30v60C272.538,437.2,286,423.738,286,407.2z"/>\n      <path style="fill:#42516D;" d="M286,317.2v-150c0-16.538-13.462-30-30-30v210C272.538,347.2,286,333.738,286,317.2z"/>\n    </g>\n    </svg>\n  </span>\n  <gp-content class="goldplay__alter--content">',"</gp-content>\n  </gp-alert>\n  "])),"title","display","content|trim")),y()(u()(t),"data",{title:"alert",display:"default",content:""}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"bindEvent",value:function(){var t=this,e=this.options.$screenContainer,n=this.options.cssName;xn(e).on("click","."+n.alertClose,(function(){t.hide()}))}},{key:"afterWatch",value:function(){"show"===this.data.display&&this.resetPosition()}},{key:"showBox",value:function(){var t=this.options.cssName,e=this.options.$screenContainer;e.querySelector("."+t.alertBox)||e.prepend(this.element),this.data.display="show",this.show()}},{key:"hideBox",value:function(){var t=this.options.cssName;this.options.$screenContainer.querySelector("."+t.alertBox)&&(this.data.display="hide",this.hide())}},{key:"show",value:function(){this.element.style.opacity=1,this.element.style.display="inline-block",this.resetPosition()}},{key:"hide",value:function(){this.element.style.opacity=0,this.element.style.display="none"}}]),n}(en);function Kn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Qn,Zn=function(t){c()(n,t);var e=Kn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate($n||($n=rn()(['\n  <gp-time class="goldplay__control--timer">\n  <span gid="time" class="goldplay__control--timer-play">','</span>\n  <span gid="slash">','</span>\n  <span gid="total-time" class="goldplay__control--timer-total">',"</span>\n  </gp-time>\n  "])),"time","slash","totalTime")),y()(u()(t),"data",{time:"00:00",totalTime:"",slash:"/"}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"setTotalTime",value:function(t){var e=t.sourceData;this.data.totalTime=on.formatHHMMSS(e.duration)}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.LoaderPlayListLoaded,(function(e){t.setTotalTime(e.dataManage)}))}},{key:"updateTime",value:function(t){this.element.querySelector('[gid="time"]').innerHTML=t}},{key:"updateTotalTime",value:function(t){this.element.querySelector('[gid="total-time"]').innerHTML=t}}]),n}(en);function Jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function tr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return er(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var nr,rr=function(t){c()(n,t);var e=Jn(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(Qn||(Qn=rn()(['\n  <gp-speed class="goldplay__speed-bar" title="','">\n  <gp-overbox class="goldplay-hoverbox goldplay__speed-bar--box">\n  ','\n  </gp-overbox>\n  <gp-button class="goldplay__speed-bar--link">\n  ',"\n  </gp-button>\n  </gp-speed>\n  "])),"title","speedListHTML|html","currentSpeedName")),y()(u()(t),"data",{title:"speed",currentSpeed:1,speedList:null,currentSpeedName:"ÂÄçÈÄü",speedListHTML:""}),y()(u()(t),"options",{}),t.options=r,t.speedList=t.options.player.options.speedList||I.c.speedList,t.updateSpeedListHTML(),Object.assign(t.data,r.data),t.init(),t.initProps(),t.showHideBar(),t}return a()(n,[{key:"initProps",value:function(){var t=this.options.cssName;this.$barBox=this.element.querySelector("."+t.speedBarBox)}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,n=this.options.$controlBarContainer;xn(n).on("mouseover","."+e.speedBar,(function(){clearTimeout(r),t.showBarBoxHandle()}));var r;xn(n).on("mouseout","."+e.speedBar,(function(e){r=setTimeout((function(){!function(e){var n=t.element,r={y:t.$barBox.offsetTop,x:n.offsetLeft};return r.width=n.offsetWidth,r.height=t.$barBox.offsetHeight,e.pageX>r.x&&e.pageX<r.x+r.width&&e.pageY>r.y&&e.pageY<r.y+r.height}(e)?t.hideBarBoxHandle():clearTimeout(r)}),I.c.hideBarBoxTime)})),xn(this.element).on("click","[gp-node-li]",(function(e){var n=e.target,r=parseFloat(n.getAttribute("value"),10);if(r!==t.data.currentSpeed){t.data.currentSpeed=r;var i=t.speedList.filter((function(t){return t.value===r}));t.events.emit(st.PlayerSpeedTo,i[0]),t.updateSpeedListHTML()}}))}},{key:"showHideBar",value:function(){this.speedList.length<=0&&this.hide()}},{key:"resetBoxPosition",value:function(){var t=33+28*this.speedList.length,e=(this.$barBox.offsetWidth-this.element.offsetWidth)/2;this.$barBox.style.marginTop=-t+"px",this.$barBox.style.marginLeft=-e+"px"}},{key:"hideBarBoxHandle",value:function(){this.$barBox.style.visibility="hidden"}},{key:"showBarBoxHandle",value:function(){this.$barBox.style.visibility="visible"}},{key:"updateSpeedListHTML",value:function(t){var e=this.speedList;if(!(e.length<=0)){void 0===t&&(t=this.data.currentSpeed);var n,r=e.slice(0,e.length).reverse(),i=tr(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.value===t?o.selected=!0:delete o.selected}}catch(t){i.e(t)}finally{i.f()}return this.data.speedListHTML=function(t){if(t){var e,n=["<ul>"],r=tr(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o="",a="";i.selected&&(o="gp-selected",a=" selected=".concat(i.selected)),n.push('\n    <li class="'.concat(o,'" gp-node-li value="').concat(i.value,'" ').concat(a,">").concat(i.name,"</li>\n    "))}}catch(t){r.e(t)}finally{r.f()}return n.push("</ul>"),n.join("")}}(r)}}}]),n}(en);function ir(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var or,ar=function(t){c()(n,t);var e=ir(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(nr||(nr=rn()(['\n  <gp-subtitle class="goldplay__subtitle">\n  </gp-subtitle>\n  '])))),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n)}(en);function sr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function ur(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cr,fr=function(t){c()(n,t);var e=sr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"rateList",[]),y()(u()(t),"defaultRate",{value:"600",name:"È´òÊ∏Ö"}),y()(u()(t),"template",t.createTemplate(or||(or=rn()(['\n  <gp-rate class="goldplay__rate-bar" title="','">\n  <gp-overbox class="goldplay-hoverbox goldplay__rate-bar--box">\n  ','\n  </gp-overbox>\n  <gp-button class="goldplay__rate-bar--link">\n  ',"\n  </gp-button>\n  </gp-rate>\n  "])),"title","rateListHTML|html","currentRateName")),y()(u()(t),"data",{title:"stream rate",currentRate:"600",currentRateName:"È´òÊ∏Ö",rateListHTML:""}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.rateList=t.options.player.options.rateList||t.rateList,t.defaultRate=t.options.player.options.defaultRate||t.defaultRate,t.setDefaultRate(),t.updateRateListHTML(),t.init(),t.initProps(),t.showHideBar(),t}return a()(n,[{key:"initProps",value:function(){var t=this.options.cssName;this.$barBox=this.element.querySelector("."+t.rateBarBox)}},{key:"setDefaultRate",value:function(){var t=this;if(!(this.rateList.length<=0)){var e=this.rateList.find((function(e){return String(e.value)===String(t.defaultRate.value)}));e?(this.data.currentRateName=e.name,this.data.currentRate=e.value):(this.data.currentRateName=this.rateList[0].name,this.data.currentRate=this.rateList[0].value)}}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,n=this.options.$controlBarContainer;xn(n).on("mouseover","."+e.rateBar,(function(){clearTimeout(r),t.showBarBoxHandle()}));var r;xn(n).on("mouseout","."+e.rateBar,(function(e){r=setTimeout((function(){!function(e){var n=t.element,r={y:t.$barBox.offsetTop,x:n.offsetLeft};return r.width=n.offsetWidth,r.height=t.$barBox.offsetHeight,e.pageX>r.x&&e.pageX<r.x+r.width&&e.pageY>r.y&&e.pageY<r.y+r.height}(e)?t.hideBarBoxHandle():clearTimeout(r)}),I.c.hideBarBoxTime)})),xn(this.element).on("click","[gp-node-li]",(function(e){var n=e.target.getAttribute("value");if(n!==t.data.currentRate){t.data.currentRate=n;var r=t.rateList.filter((function(t){return t.value===n}));t.events.emit(st.PlayerChangeRate,r[0]),t.data.currentRateName=r[0].name,t.updateRateListHTML(),t.hideBarBoxHandle()}}))}},{key:"showHideBar",value:function(){var t=this.rateList;t&&t.length<=0&&this.hide()}},{key:"resetBoxPosition",value:function(){var t=33+28*this.rateList.length,e=(this.$barBox.offsetWidth-this.element.offsetWidth)/2;this.$barBox.style.marginTop=-t+"px",this.$barBox.style.marginLeft=-e+"px"}},{key:"hideBarBoxHandle",value:function(){this.$barBox.style.visibility="hidden"}},{key:"showBarBoxHandle",value:function(){this.$barBox.style.visibility="visible"}},{key:"updateRateListHTML",value:function(t){var e=this.rateList;if(!(e.length<=0)){void 0===t&&(t=this.data.currentRate);var n,r=e.slice(0,e.length).reverse(),i=ur(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.value===t?o.selected=!0:delete o.selected}}catch(t){i.e(t)}finally{i.f()}return this.data.rateListHTML=function(t){if(t){var e,n=["<ul>"],r=ur(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o="",a="";i.selected&&(o="gp-selected",a=" selected=".concat(i.selected)),n.push('\n    <li class="'.concat(o,'" gp-node-li value="').concat(i.value,'" ').concat(a,">").concat(i.name,"</li>\n    "))}}catch(t){r.e(t)}finally{r.f()}return n.push("</ul>"),n.join("")}}(r)}}}]),n}(en);function hr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var dr,pr,vr,yr=function(t){c()(n,t);var e=hr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(cr||(cr=rn()(['\n  <gp-setting class="goldplay__setting-bar">\n  </gp-setting>\n  '])))),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n)}(en);function gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var mr,br=Fe.create(dr||(dr=rn()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20" height="20" viewBox="0 0 24 24">\n  <path d="M2.5 4h19a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-19a.5.5 0 0 1-.5-.5v-15a.5.5 0 0 1 .5-.5zM5 7v10h14V7H5z" fill="#f1f1f1"></path>\n</svg>\n'])),"fullpageHide"),xr=Fe.create(pr||(pr=rn()(['\n<svg xmlns="http://www.w3.org/2000/svg" style="display:','" width="20" height="20" viewBox="0 0 24 24">\n<path d="M3.5 6h17a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-17a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5zM6 9v6h12V9H6z" fill="#f1f1f1"></path>\n</svg>\n'])),"fullpageExitHide"),kr=function(t){c()(n,t);var e=gr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"containerOriginStyle",""),y()(u()(t),"template",t.createTemplate(vr||(vr=rn()(['\n  <gp-button class="goldplay__control--fullpage" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "])),"title","status","icon|html")),y()(u()(t),"data",{fullpageHide:"",fullpageExitHide:"none",status:"",icon:br,title:"fullpage"}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){"fullpage"===this.data.status?(this.data.fullpageHide="none",this.data.fullpageExitHide="inline-block",this.data.title="exit fullspage",this.data.icon=xr):(this.data.fullpageHide="inline-block",this.data.fullpageExitHide="none",this.data.title="fullpage",this.data.icon=br)}},{key:"initProps",value:function(){var t=this.options;this.$container=this.options.$container,this.$screenContainer=t.$screenContainer,this.$controlBarContainer=this.getComponent("controlBarContainer").element,this.originWidth=t.$container.offsetWidth,this.originHeight=t.$container.offsetHeight,this.containerOriginStyle=t.$container.getAttribute("style"),this.screenContainerOrginStyle=this.$screenContainer.getAttribute("style"),this.controlContainerOrginWidth=this.$controlBarContainer.style.width}},{key:"bindEvent",value:function(){var t=this,e=this.options.cssName,n=document,r=window;xn(this.$controlBarContainer).on("click","."+e.fullPage,(function(){var e=t.data.status;"fullscreen"===t.getComponent("fullScreen").data.status&&Q.exitFullscreen(),"fullpage"===e?t.exitFullPage():t.fullPage()})),this.eventsList.esckeyup=this.addEventListener(n,"keyup",(function(e){27===e.keyCode&&"fullpage"===t.data.status&&t.exitFullPage()})),this.eventsList.windowresize=this.addEventListener(r,"resize",(function(){if("fullpage"===t.data.status){var e=Q.getInnerWidthHeight();t.resizeTo(e.width,e.height),t.resetPosition()}}))}},{key:"fullPage",value:function(){this.data.status="fullpage";var t=this.options,e=this.options.cssName,n=Q.getInnerWidthHeight();this.saveOriginPosition(),t.$container.classList.add(e.containerFullPage),this.resizeTo(n.width,n.height),this.resetPosition(),scrollTo(0,0)}},{key:"saveOriginPosition",value:function(){var t=this.getComponent("progressBar");this.posterOriginStyle=this.getComponent("poster").element.getAttribute("style"),this.originScroll={scrollX:scrollX,scrollY:scrollY},this.progressBarOriginLeft=t.progressBarLeft,this.progressBarOriginWidth=t.progressBarWidth,this.progressBarPlayWidthRate=t.getProgressPlayLeftWidth().offsetWidth/this.progressBarOriginWidth,this.progressBarLoadWidthRate=t.getProgressLoadLeftWidth().offsetWidth/this.progressBarOriginWidth,this.progressBarLoadLeftRate=(t.getProgressLoadLeftWidth().offsetLeft-this.progressBarOriginLeft)/this.progressBarOriginWidth}},{key:"setProgressBarPosition",value:function(){var t=this.getComponent("progressBar"),e=t.progressBarWidth,n=t.progressBarLeft,r=e*this.progressBarPlayWidthRate,i=e*this.progressBarLoadWidthRate,o=e*this.progressBarLoadLeftRate;t.setProgressPosition(r),t.setProgressLoadLeftWidth(o+n,i),this.getComponent("progressBar").clearDragDotTop()}},{key:"resizeTo",value:function(t,e){var n=this.options,r=n.player,i=r.controlBarAutoHide?e:e-r.controlBarHeight;r.$screenContainer.style.width=t+"px",r.$screenContainer.style.height=i+"px",n.$container.style.width=t+"px",n.$container.style.height=e+"px"}},{key:"resetPosition",value:function(){var t=this.options;this.setProgressBarPosition(),t.player.resizeScreen(),this.getComponent("bigPlayButton").resetPosition(),this.getComponent("poster").resetPosition(),this.getComponent("waitingBar").resetPosition(),this.getComponent("controlBarContainer").resetPosition()}},{key:"exitFullPage",value:function(){this.data.status="exitfullpage";var t=this.options.cssName;this.saveOriginPosition(),this.$container.classList.remove(t.containerFullPage),this.resetScreen()}},{key:"resetScreen",value:function(){this.$container.setAttribute("style",this.containerOriginStyle),this.$screenContainer.setAttribute("style",this.screenContainerOrginStyle),this.$controlBarContainer.style.width=this.controlContainerOrginWidth,this.getComponent("poster").element.setAttribute("style",this.posterOriginStyle),scrollTo(this.originScroll.scrollX,this.originScroll.scrollY),this.resetPosition()}}]),n}(en);function wr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Pr,_r,Sr='\n<svg xmlns="http://www.w3.org/2000/svg" gid="fullscreen" style="display:${\'fullscreenHide\'}" width="20" height="20" viewBox="0 0 24 24">\n<path d="M15 5.057V2h6.5a.5.5 0 0 1 .5.5V9h-2.943V5.057H15zm-6 0H5.057V9H2V2.5a.5.5 0 0 1 .5-.5H9v3.057zM15 22v-2.943h4.057V15H22v6.5a.5.5 0 0 1-.5.5H15zm-6 0H2.5a.5.5 0 0 1-.5-.5V15h3.057v4.057H9V22z" fill="#f1f1f1"></path>\n</svg>\n',Br=function(t){c()(n,t);var e=wr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(mr||(mr=rn()(['\n  <gp-button class="goldplay__control--fullscreen" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "])),"title","status","icon|html")),y()(u()(t),"data",{fullscreenHide:"inline-block",fullscreenExitHide:"none",status:"",icon:Sr,title:"fullscreen"}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){"fullscreen"===this.data.status?(this.data.fullscreenHide="none",this.data.fullscreenExitHide="inline-block",this.data.title="exit fullscreen",this.data.icon='\n<svg xmlns="http://www.w3.org/2000/svg" gid="fullscreenExit" style="display:${\'fullscreenExitHide\'}"  width="20" height="20" viewBox="0 0 24 24">\n<path d="M22 5.943V9h-6.5a.5.5 0 0 1-.5-.5V2h2.943v3.943H22zm-20 0h3.943V2H9v6.5a.5.5 0 0 1-.5.5H2V5.943zM22 15v2.943h-4.057V22H15v-6.5a.5.5 0 0 1 .5-.5H22zM2 15h6.5a.5.5 0 0 1 .5.5V22H5.943v-4.057H2V15z" fill="#f1f1f1"></path>\n</svg>\n'):(this.data.fullscreenHide="inline-block",this.data.fullscreenExitHide="none",this.data.title="fullscreen",this.data.icon=Sr)}},{key:"initProps",value:function(){this.getComponent("fullPage").initProps.call(this)}},{key:"bindEvent",value:function(){var t=this,e=this.options.$container,n=this.options.cssName,r=document,i=window;this.eventsList.fullscreenchange=this.addEventListener(r,"fullscreenchange",(function(){if(document.fullscreenElement||document.webkitFullscreenElement)t.fullScreen();else{var r=t.getComponent("fullPage");"fullpage"===r.data.status?(e.classList.remove(n.containerFullScreen),t.data.status="exitfullscreen",r.fullPage()):t.exitFullScreen()}})),this.eventsList.windowresize=this.addEventListener(i,"resize",(function(){document.fullscreenElement&&(t.resizeTo(screen.width,screen.height-(window.outerHeight-window.innerHeight)),t.resetPosition())})),xn(this.$controlBarContainer).on("click","."+n.fullScreen,(function(){var e=t.data.status;t.saveOriginPosition(),"fullscreen"===e?Q.exitFullscreen():Q.Fullscreen()}))}},{key:"fullScreen",value:function(){this.data.status="fullscreen";var t=this.options,e=this.options.cssName,n={width:screen.width,height:screen.height-(outerHeight-innerHeight)};Q.isSafari()&&(n.height=n.height+38),t.$container.classList.add(e.containerFullScreen),this.resizeTo(n.width,n.height),this.resetPosition(),scrollTo(0,0)}},{key:"saveOriginPosition",value:function(){this.getComponent("fullPage").saveOriginPosition.call(this)}},{key:"resizeTo",value:function(t,e){this.getComponent("fullPage").resizeTo.call(this,t,e)}},{key:"resetPosition",value:function(){this.getComponent("fullPage").resetPosition.call(this)}},{key:"setProgressBarPosition",value:function(){this.getComponent("fullPage").setProgressBarPosition.call(this)}},{key:"exitFullScreen",value:function(){this.data.status="exitfullscreen";var t=this.options.cssName;this.saveOriginPosition(),this.options.$container.classList.remove(t.containerFullScreen),this.resetScreen(),this.saveOriginPosition()}},{key:"resetScreen",value:function(){this.getComponent("fullPage").resetScreen.call(this)}}]),n}(en);function Er(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Tr=Fe.create(Pr||(Pr=rn()(['<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\nwidth="','" height="','" viewBox="0 0 438.533 438.533" style="','" xml:space="preserve">\n<g>\n<path d="M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0\n c-39.781,0-76.466,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267\n s9.804,76.463,29.407,110.062c19.607,33.585,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407\n s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.599,29.403-70.287,29.403-110.062\n C438.533,179.489,428.732,142.795,409.133,109.203z M328.904,234.966L173.588,326.33c-2.856,1.711-5.902,2.567-9.136,2.567\n c-3.045,0-6.09-0.764-9.135-2.286c-6.09-3.614-9.136-8.939-9.136-15.985V127.907c0-7.041,3.046-12.371,9.136-15.987\n c6.28-3.427,12.369-3.333,18.271,0.284l155.316,91.36c6.088,3.424,9.134,8.663,9.134,15.703\n C338.038,226.308,334.992,231.537,328.904,234.966z" fill="','">\n</g>\n</svg>\n'])),"width","height","iconStyle","fillColor"),Rr=function(t){c()(n,t);var e=Er(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"template",t.createTemplate(_r||(_r=rn()(['\n  <gp-button class="goldplay__screen--bigplay" title="','" data-status="','">\n  ',"\n  </gp-button>\n  "])),"title","status","icon|html")),y()(u()(t),"data",{titie:"click to play",iconStyle:"opacity:0.5",display:"hide",status:"",width:100,height:100,fillColor:"#999",icon:Tr}),y()(u()(t),"options",{}),t.options=r,Object.assign(t.data,r.data),t.init(),t}return a()(n,[{key:"watch",value:function(){if("show"===this.data.display){var t=(this.element.parentNode.offsetHeight-this.data.height)/2;this.data.iconStyle="opacity:0.7;margin-top:".concat(t,"px")}}},{key:"resetPosition",value:function(){if("show"===this.data.display){var t=this.element.parentNode,e=t.offsetWidth,n=t.offsetHeight;!0===this.options.player.controlBarAutoHide&&(n-=this.options.player.controlBarHeight);var r=t.offsetTop,i=t.offsetLeft;this.element.style.width=e+"px",this.element.style.height=n+"px",this.element.style.top=r+"px",this.element.style.left=i+"px"}}},{key:"bindEvent",value:function(){var t=this,e=this.options.$screenContainer,n=this.options.cssName;xn(e).on("click","."+n.bigPlayButton,(function(){t.events.emit(st.PlayerOnPlay,t),t.events.emit(st.ControlBarPlay,t),t.hide()})),xn(e).on("mouseover","."+n.bigPlayButton,(function(){t.data.fillColor=t.options.bigPlayButtonColor||"#fff"})),xn(e).on("mouseout","."+n.bigPlayButton,(function(e){var n=t.element,r={y:n.offsetTop,x:n.offsetLeft};r.width=n.offsetWidth,r.height=n.offsetHeight,e.pageX>r.x&&e.pageX<r.x+r.width&&e.pageY>r.y&&e.pageY<r.y+r.height||(t.data.fillColor="#999")}))}},{key:"show",value:function(){var t=this;"show"!==this.data.display&&(this.data.display="show",this.element.style.opacity="1",setTimeout((function(){t.element.style.display="inline-block"}),1))}},{key:"hide",value:function(){"hide"!==this.data.display&&(this.element.style.opacity="0",this.data.display="hide",this.element.style.display="none")}}]),n}(en);function Lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ar=function(t){c()(n,t);var e=Lr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),(t=e.call(this,r)).options=Object.assign(t.options,r),t.componentsController=t.options.componentsController,t.init(),t}return a()(n,[{key:"render",value:function(){var t=this,e=L.createEl("gp-button-block");e.classList.add("goldplay__control--button-block"),n.componentList.forEach((function(n){var r=t.componentsController.getComponent(n);e.appendChild(r.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t){n.componentList.push(t)}}]),n}(en);y()(Ar,"componentList",["playButton","pauseButton","replayButton"]);var Cr=Ar;function Dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Or=function(t){c()(n,t);var e=Dr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),(t=e.call(this,r)).options=Object.assign(t.options,r),t.componentsController=t.options.componentsController,t.init(),t}return a()(n,[{key:"render",value:function(){var t=this,e=L.createEl("gp-control-sidebar");e.classList.add("goldplay__control--sidebar"),n.componentList.forEach((function(n){var r=t.componentsController.getComponent(n);e.appendChild(r.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t,e){(e<0||e>n.componentList.length)&&(e=n.componentList.length),n.componentList.splice(e,0,t)}}]),n}(en);y()(Or,"componentList",["speedBar","rateBar","volumeBar","fullPage","fullScreen"]);var Mr=Or;function Ur(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Nr=function(t){c()(n,t);var e=Ur(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),(t=e.call(this,r)).options=Object.assign(t.options,r),t.componentsController=t.options.componentsController,t.init(),t}return a()(n,[{key:"render",value:function(){var t=this,e=L.createEl("gp-control-nearside");e.classList.add("goldplay__control--button-block"),n.componentList.forEach((function(n){var r=t.componentsController.getComponent(n);e.appendChild(r.element)})),this.element=e}}],[{key:"addCustomControl",value:function(t,e){(e<0||e>n.componentList.length)&&(e=n.componentList.length),n.componentList.splice(e,0,t)}}]),n}(en);y()(Nr,"componentList",["playControl","timer"]);var Ir=Nr,Fr={BaseComponent:en,controlBarContainer:hn,bigPlayButton:Rr,poster:cn,progressBar:Sn,playButton:Rn,pauseButton:Dn,replayButton:In,volumeBar:Vn,waitingBar:Xn,alertBox:qn,timer:Zn,speedBar:rr,subtitle:ar,rateBar:fr,settingBar:yr,fullPage:kr,fullScreen:Br,playControl:Cr,sideControlBar:Mr,nearControlBar:Ir};function jr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Hr=Ce,Wr=function(t){return t.substr(0,1).toUpperCase()+t.substr(1)},Vr=function(t){c()(n,t);var e=jr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"allComponents",{}),y()(u()(t),"controlBarController",null),y()(u()(t),"options",{cssName:Hr}),t.options=Object.assign(t.options,r),t.options.componentsController=u()(t),t.initComponents(),t.$container=t.options.$container,t.$screenContainer=t.options.$screenContainer,t.$canvas=t.options.$canvas,t.$audioContainer=t.options.$audioContainer,t.$audio=t.options.$audio,t.options.$controlBarContainer=t.controlBarContainer.element,t.bindEvent(),t}return a()(n,[{key:"run",value:function(){for(var t in this.controlBarController.run(),Fr)this[t]&&"function"==typeof this[t].registerMethod&&this[t].registerMethod()}},{key:"initComponents",value:function(){for(var t in Fr){var e=Fr[t];this.allComponents[t]||this.createComponent(e,t)}}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.PlayerLoadedMetaData,(function(){t.poster.hide()})),this.events.on(st.AudioPlayerPlayFail,(function(){t.drawBigPlayButton(),t.getComponent("poster").hide(),t.events.emit(st.PlayerOnPause,t),t.events.emit(st.ControlBarPause,t)})),this.bindAlertBoxEvent(),this.bindWaitingBarEvent()}},{key:"bindWaitingBarEvent",value:function(){this.waitingBar.initProps(),this.waitingBar.bindEvent()}},{key:"drawBigPlayButton",value:function(){this.$screenContainer.prepend(this.bigPlayButton.element),this.bigPlayButton.show(),this.bigPlayButton.bindEvent(),this.bigPlayButton.resetPosition()}},{key:"setControlBarController",value:function(t){this.controlBarController=t}},{key:"getControlBarController",value:function(){return this.controlBarController||this.options.player.controlBarContainer}},{key:"bindAlertBoxEvent",value:function(){this.alertBox.initProps(),this.alertBox.bindEvent()}},{key:"drawPoster",value:function(){this.$screenContainer.prepend(this.poster.element),this.poster.data.display="show",this.poster.bindEvent(),this.poster.resetPosition()}},{key:"createComponent",value:function(t,e){var n=Wr(e);this["set"+n](new t(this.options)),this[e]=this["get"+n](),this.allComponents[e]||(this.allComponents[e]=this[e])}},{key:"getComponent",value:function(t){return this.allComponents[t]||Fr[t]&&this.createComponent(Fr[t],t),this.allComponents[t]}},{key:"resetAllComponents",value:function(){var t=this,e=Object.getOwnPropertyNames(this),n={};e.forEach((function(e){Fr[e]&&(n[e]=t[e])})),this.allComponents=n}},{key:"getAllComponents",value:function(){return this.allComponents}}]),n}(D);for(var zr in Vr.addComponet=function(t){var e=Wr(t);Vr.prototype["set"+e]=function(e){this[t]=e},Vr.prototype["get"+e]=function(){return this[t]}},Fr)Vr.addComponet(zr);var Gr=Vr;function Xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Yr=Ce,$r=function(t){c()(n,t);var e=Xr(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),t=e.call(this,r),y()(u()(t),"player",null),y()(u()(t),"dataManage",null),y()(u()(t),"options",{cssName:Yr}),t.options=Object.assign(t.options,r),t.player=t.options.player,t.dataManage=t.player.dataManage,t.componentsController=t.player.componentsController,t.$screenContainer=t.player.$screenContainer,t.initComponents(),t}return a()(n,[{key:"initComponents",value:function(){var t=this.componentsController;Object.assign(this,t.getAllComponents()),this.container=this.controlBarContainer}},{key:"run",value:function(){this.timer.setTotalTime(this.dataManage),this.drawLayout(),this.bindEvent(),this.player.autoPlay?this.events.emit(st.ControlBarPlay):this.events.emit(st.ControlBarPause)}},{key:"bindEvent",value:function(){this.bindContainerEvent(),this.bindTimerEvent(),this.bindPlayEvent(),this.bindProgressEvent(),this.bindSpeedEvent(),this.bindRateEvent(),this.bindVolumeEvent(),this.bindFullPage(),this.bindFullScreen()}},{key:"bindContainerEvent",value:function(){this.container.initProps(),this.container.bindEvent()}},{key:"bindTimerEvent",value:function(){this.timer.initProps(),this.timer.bindEvent()}},{key:"bindSpeedEvent",value:function(){this.speedBar.bindEvent(),this.speedBar.resetBoxPosition()}},{key:"bindRateEvent",value:function(){this.rateBar.bindEvent(),this.rateBar.resetBoxPosition()}},{key:"bindFullPage",value:function(){this.fullPage.initProps(),this.fullPage.bindEvent()}},{key:"bindFullScreen",value:function(){this.fullScreen.initProps(),this.fullScreen.bindEvent()}},{key:"bindPlayEvent",value:function(){var t=this;this.events.on(st.ControlBarPlay,(function(){"pause"!==t.pauseButton.data.status&&(t.pauseButton.data.status="pause"),t.replayButton.hide(),t.playButton.hide(),t.pauseButton.show(),t.bigPlayButton.hide()})),this.events.on(st.ControlBarPause,(function(){"pause"!==t.player.status&&(t.pauseButton.data.status="pause"),t.playButton.show(),t.pauseButton.hide()})),this.events.on(st.PlayerEnd,(function(){t.replayButton.show(),t.pauseButton.hide(),t.playButton.hide()})),[st.PlayerWait,st.PlayerSeeking,st.PlayerReset,st.PlayerChangeRate,st.PlayerChangeSrc].forEach((function(e){t.events.on(e,(function(){t.waitingBar.showWaiting()}))})),this.events.on(st.PlayerSeekEnd,(function(){t.waitingBar.hideWaiting()})),this.events.on(st.PlayerPlay,(function(){t.waitingBar.hideWaiting(),t.events.emit(st.ControlBarPlay,t)})),this.events.on(st.PlayerPause,(function(){t.events.emit(st.ControlBarPause,t)})),this.events.on(st.PlayerPlaying,(function(){t.waitingBar.hideWaiting()})),this.events.on(st.PlayerOnSeek,(function(e){e<1e3*t.dataManage.sourceData.duration&&t.events.emit(st.ControlBarPauseLoading)})),this.events.on(st.ControlBarPauseLoading,(function(){"pauseloading"!==t.pauseButton.data.status&&(t.pauseButton.data.status="pauseloading"),t.replayButton.hide(),t.playButton.hide(),t.pauseButton.show()})),xn(this.options.$container).on("click","."+Yr.playButton,(function(){"play"!==t.player.status&&t.events.emit(st.PlayerOnPlay,t)})),xn(this.options.$container).on("click","."+Yr.pauseButton,(function(){"pause"!==t.player.status&&t.events.emit(st.PlayerOnPause,t)})),xn(this.options.$container).on("click","."+Yr.replayButton,(function(){t.events.emit(st.PlayerOnSeek,t.player.startTime)}))}},{key:"bindProgressEvent",value:function(){this.progressBar.initProps(),this.progressBar.bindEvent()}},{key:"bindVolumeEvent",value:function(){this.volumeBar.initProps(),this.volumeBar.initVolumeSize(),this.volumeBar.bindEvent()}},{key:"drawLayout",value:function(){var t=this.options.$container,e=this.container.element;t.append(e)}},{key:"destroy",value:function(){this.removeEventListenerGlobal(),this.container.destroy()}},{key:"removeEventListenerGlobal",value:function(){this.progressBar.progressDragEvent&&this.progressBar.progressDragEvent.removeEventListenerAll(),this.volumeBar.volumeDragEvent&&this.volumeBar.volumeDragEvent.removeEventListenerAll(),this.fullPage.removeEventListenerAll(),this.fullScreen.removeEventListenerAll()}}]),n}(D),qr=n(45),Kr=n.n(qr);function Qr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Zr=function(t){c()(n,t);var e=Qr(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"isLast",!1),r.type=t.type,r.libPath=t.libPath,r.player=t.player,r.init(),r}return a()(n,[{key:"init",value:function(){"ts"==this.type&&this.initNornalWorker(),this.bindEvent(),this.loadjs()}},{key:"initNornalWorker",value:function(){this.processor=this.initWorker()}},{key:"initWorker",value:function(){var t=this,e=Kr()(134);return e.onmessage=function(e){var n=e.data,r=n.type,i=n.data;switch(r){case"dataProcessorReady":t.onDataProcessorReady();break;case"decoded":t.onDecoded(i);break;case"demuxedAAC":t.onDemuxedAAC(i);break;case"partEnd":t.onPartEnd(i);break;case"resetEnd":t.onResetEnd();break;case"maxPTS":t.onMaxPTS(i);break;case"flushEnd":t.onFlushEnd(i)}},e}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.DemuxStartDemux,this.onStartDemux.bind(this)),this.events.on(st.DemuxLast,(function(){t.isLast=!0})),this.events.on(st.DecodeFlush,(function(){t.flush()}))}},{key:"flush",value:function(){this.processor.postMessage({type:"flush"})}},{key:"loadjs",value:function(){this.processor.postMessage({type:"loadwasm",libPath:this.libPath})}},{key:"reset",value:function(){this.isLast=!1,this.processor.terminate(),this.initNornalWorker(),this.loadjs()}},{key:"onFlushEnd",value:function(t){this.events.emit(st.DecodeFlushEnd,t)}},{key:"onMaxPTS",value:function(t){this.events.emit(st.PlayerMaxPTS,t.maxAudioPTS,t.maxVideoPTS)}},{key:"onDemuxedAAC",value:function(t){this.events.emit(st.DemuxAAC,t)}},{key:"onDataProcessorReady",value:function(){this.player.seeking||this.player.reseting?this.events.emit(st.ProcessorResetEnd):this.events.emit(st.DataProcessorReady)}},{key:"onStartDemux",value:function(t){this.player.reseting||(this.logger.info("onStartDemux","postMessage to demux"),t&&t.arrayBuffer?this.processor.postMessage({type:"startDemux",data:t.arrayBuffer,isLast:this.isLast},[t.arrayBuffer.buffer]):this.logger.error("onStartDemux","data is null","data:",t))}},{key:"onDecoded",value:function(t){this.player.reseting||this.events.emit(st.DecodeDecoded,t)}},{key:"onPartEnd",value:function(t){this.events.emit(st.DecodeApppendEnd,t)}},{key:"onResetEnd",value:function(){this.events.emit(st.ProcessorResetEnd)}},{key:"destroy",value:function(){this.processor&&this.processor.terminate()}}]),n}(N);function Jr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ti=function(t){c()(n,t);var e=Jr(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"currentIndex",null),y()(u()(r),"retryTime",0),y()(u()(r),"dataReady",{audioReady:!1,imageReady:!1}),y()(u()(r),"hasInit",!1),y()(u()(r),"dataManageStatus","loading"),y()(u()(r),"duration",0),y()(u()(r),"tsNumber",0),r.dataManage=t.dataManage,r.imagePlayer=t.imagePlayer,r.audioPlayer=t.audioPlayer,r.player=t.player,r.bindEvent(),r}return a()(n,[{key:"bindEvent",value:function(){var t=this;this.events.on(st.DataManageRead,(function(e){t.onRead(e)})),this.events.on(st.DemuxVideo,(function(e,n){t.onVideoDemuxed(e,n)})),this.events.on(st.DemuxAAC,(function(e){t.onAACDemuxed(e)})),this.events.on(st.DecodeDecoded,(function(e){t.onDecoded(e)})),this.events.on(st.DecodeApppendEnd,(function(e){t.onAppendEnd(e)})),this.events.on(st.ImagePlayerReady,(function(){t.logger.info("bindevent","Events.ImagePlayerReady"),t.checkDataReady("imageReady")})),this.events.on(st.AudioPlayerDataReady,(function(){t.logger.info("bindevent","Events.AudioPlayerDataReady"),t.player.receiveAACTime=null,t.checkDataReady("audioReady")})),this.events.on(st.AudioPlayerWait,(function(){t.dataReady.audioReady=!1,t.events.emit(st.PlayerWait,"audioPlayer")})),this.events.on(st.ImagePlayerWait,(function(){t.dataReady.imageReady=!1,t.events.emit(st.PlayerWait,"imagePlayer")})),this.events.on(st.ImagePlayerEnd,(function(){t.logger.info("bindevent","........imageplayer end"),t.events.emit(st.PlayerEnd)})),this.events.on(st.PlayerWait,(function(){t.logger.warn("player status wait"),t.player.status="wait","loadend"===t.dataManageStatus&&(t.dataManageStatus="loading",t.loadNext())})),this.events.on(st.PlayerLoadNext,(function(){"loadend"===t.dataManageStatus&&(t.dataManageStatus="loading",t.loadNext())})),this.events.on(st.DecodeFlushEnd,(function(e){t.logger.info("flushend>>>>>>>>>>>>>>>",e),t.imagePlayer.maxPTS=e}))}},{key:"checkDataReady",value:function(t){var e=this.dataReady;e[t]=!0;for(var n=Object.keys(e),r=0,i=0;i<n.length&&e[n[i]];i++)r++;r==n.length&&this.events.emit(st.StreamDataReady)}},{key:"setBaseInfo",value:function(t){this.duration=t.duration,this.tsNumber=t.tsNumber}},{key:"reset",value:function(){this.dataReady={audioReady:!1,imageReady:!1},this.currentIndex=null,this.dataManageStatus="loading"}},{key:"startLoad",value:function(t){this.logger.info("startLoad","index:",t),this.currentIndex=t,this.player.currentIndex=t,this.events.emit(st.DataManageReadBufferByNo,t)}},{key:"loadNext",value:function(){this.player.reseting||(this.currentIndex>=this.tsNumber?this.logger.info("loadNext","load end","currentIndex",this.currentIndex,"tsNumber:",this.tsNumber):(this.currentIndex+=1,this.player.currentIndex=this.currentIndex,this.logger.info("loadNext","load next ts","tsno:",this.currentIndex),this.events.emit(st.DataManageReadBufferByNo,this.currentIndex)))}},{key:"onDecoded",value:function(t){var e=this;t.forEach((function(t){e.player.reseting||t.pts>=e.player.currentTime&&e.imagePlayer.push(t)}))}},{key:"onAppendEnd",value:function(t){return t?(this.logger.info("onAppendEnd","events.decodeFlush",t),void this.events.emit(st.DecodeFlush)):(this.logger.info("onAppendEnd","start load next ts condition",this.checkBuffer(),this.currentIndex),this.checkBuffer()&&null!==this.currentIndex?(this.logger.info("onAppendEnd","load next ts. currentIndex:",this.currentIndex),void this.loadNext()):(this.dataManageStatus="loadend",void this.logger.info("onAppendEnd","load ts stop")))}},{key:"onAACDemuxed",value:function(t){var e=this;this.player.reseting||(t.length||this.audioPlayer.send({}),t.forEach((function(t){(t.PTS>=e.player.currentTime||t.audioEnd)&&(!e.player.receiveAACTime&&e.player.seeking&&(e.player.receiveAACTime=Date.now()),e.audioPlayer.send(t))})))}},{key:"onVideoDemuxed",value:function(t){this.player.reseting||this.events.emit(st.DecodeStartDecode,t)}},{key:"checkBuffer",value:function(){var t=this.player,e=t.currentTime;return!((t.buffer()[1]||0)-e>=t.maxBufferLength)}},{key:"onRead",value:function(t){this.player.reseting?console.error("onRead reseting"):t&&t.arrayBuffer&&t.no===this.currentIndex?(this.retryTime=0,this.logger.warn("onRead","get stream data"),t.no===this.tsNumber&&(this.logger.info("onRead","the last ts"),this.events.emit(st.DemuxLast)),this.events.emit(st.DemuxStartDemux,t)):this.logger.error("onRead","load ts failred","tsno:",this.currentIndex)}}]),n}(N);function ei(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ni=function(t){c()(n,t);var e=ei(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"maxBufferLength",0),y()(u()(r),"duration",0),y()(u()(r),"pool",[]),y()(u()(r),"start",0),y()(u()(r),"end",0),y()(u()(r),"offset",0),y()(u()(r),"fps",25),r.maxBufferLength=t.maxBufferLength,r}return a()(n,[{key:"push",value:function(t){var e=this.pool,n=e.length;0===n&&(this.offset=t.pts,this.start=t.pts,this.fps=t.fps);var r=this.insertSort(e,t);e[r-1]&&(e[r-1].duration=e[r].pts-e[r-1].pts),e[r+1]&&(e[r].duration=e[r+1].pts-e[r].pts),this.end=this.pool[n].pts+this.pool[n].duration,this.duration=this.end-this.start}},{key:"insertSort",value:function(t,e){var n=t.length;if(0===n)return t.push(e),0;for(var r=0;r<n;r++)if(e.pts<t[r].pts){for(var i=n;i>r;)t[i]=t[i-1],i--;return t[r]=e,r}return t.push(e),t.length-1}},{key:"reset",value:function(){this.duration=0,this.pool=[],this.start=0,this.end=0,this.offset=0}},{key:"findByIndex",value:function(t){var e=this.buffer.length;return t<e?(this.currentIndex=t,this.buffer[t]):(this.logger.error("input index ".concat(t,"is not found, current maxIndex is ").concat(e-1)),null)}},{key:"find",value:function(t){var e=this.pool,n=e.length;if(this.isBuffered(t)&&0!==n){var r=this.findIndex(t);if(-1!==r){var i=e[r];return this.checkBuffer(t),i}}}},{key:"findIndex",value:function(t){return this.pool.findIndex((function(e){var n=parseInt(e.pts);return t>=n&&t<n+e.duration}))}},{key:"isBuffered",value:function(t){return t>=this.start&&t<this.end}},{key:"checkBuffer",value:function(t){if(this.duration>this.maxBufferLength){if(t>this.start){var e=this.findIndex(t),n=this.pool.splice(0,e);n.forEach((function(t){null})),n=null,this.start=this.pool[0].pts,this.duration=this.end-this.start}return!1}return this.events.emit(st.PlayerLoadNext),!0}},{key:"buffer",value:function(){return{start:this.start,end:this.end}}}]),n}(N),ri=n(75),ii=n.n(ri),oi=n(61),ai=n.n(oi);function si(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ui=function(t){c()(n,t);var e=si(n);function n(t){var r;return i()(this,n),r=e.call(this),y()(u()(r),"canvas",null),r.setCanvas(t.canvas),r.setRender(),r}return a()(n,[{key:"setCanvas",value:function(t){this.canvas=t}},{key:"setRender",value:function(t){this.render=ii.a.attach(t||this.canvas)}},{key:"clear",value:function(){this.render.clear()}},{key:"drawFrame",value:function(t){var e,n,r,i,o,a=Date.now(),s=t.buf_y,u=t.buf_u,l=t.buf_v,c=t.width,f=t.height,h=c/2,d=f/2;e={bytes:s,stride:t.stride_y},n={bytes:u,stride:t.stride_u},r={bytes:l,stride:t.stride_v},i=ai.a.format({width:c,height:f,chromaWidth:h,chromaHeight:d}),o=ai.a.frame(i,e,n,r),this.render.drawFrame(o);var p=Date.now();p-a>10&&this.logger.warn("drawFrame","reandertime:",p-a)}}]),n}(N);function li(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ci=function(t){c()(n,t);var e=li(n);function n(t){var r;return i()(this,n),r=e.call(this,t),y()(u()(r),"status","pause"),y()(u()(r),"_currentTime",0),y()(u()(r),"maxPTS",null),y()(u()(r),"ready",!1),y()(u()(r),"firstRender",!1),r.imageData=new ni({events:t.events,maxBufferLength:t.maxBufferLength}),r.screen=new ui({canvas:t.canvas}),r.playHandler=null,r.player=t.player,r.debug=t.debug||!1,r}return a()(n,[{key:"setScreenRender",value:function(t){this.screen.setCanvas(t),this.screen.setRender(t)}},{key:"clear",value:function(){this.screen.clear()}},{key:"play",value:function(t){"play"!==this.status&&(this.status="play",this.render(t))}},{key:"pause",value:function(){"pause"!==this.status&&(this.status="pause",clearTimeout(this.playHandler),this.playHandler=null)}},{key:"checkBuffer",value:function(){return this.imageData.checkBuffer(this.currentTime)}},{key:"push",value:function(t){this.player.reseting||(this.imageData.push(t),this.end-this.player.currentTime>I.d.READYBUFFERLENGTH&&!this.ready&&(this.ready=!0,this.status="ready",this.events.emit(st.ImagePlayerReady)),this.events.emit(st.ImagePlayerBuffeUpdate))}},{key:"find",value:function(t){return this.imageData.find(t)}},{key:"buffer",value:function(){return this.imageData.buffer()}},{key:"isBuffered",value:function(t){return this.imageData.isBuffered(t)}},{key:"render",value:function(t){if(!(t<this.imageData.offset)){var e=this.find(t);return e?(this.firstRender||(this.firstRender=!0,this.events.emit(st.PlayerLoadedMetaData,e.width,e.height)),this.screen.drawFrame(e),this.currentTime=e.pts,this.events.emit(st.ImagePlayerRenderEnd,t,e.duration),e):this.maxPTS&&t>=this.maxPTS+this.fragDuration?(this.status="end",void this.events.emit(st.ImagePlayerEnd,this.maxPTS)):(this.logger.warn("Events.ImagePlayerWait",t,this.start,this.end,this.maxPTS),this.logger.warn("render","not yuv data"),this.status="wait",this.ready=!1,this.events.emit(st.ImagePlayerWait,"image","this"),!1)}}},{key:"reset",value:function(){this.status="pause",this.ready=!1,this.imageData.reset(),this.maxPTS=null,this.currentTime=0}},{key:"currentTime",get:function(){return this._currentTime},set:function(t){this._currentTime=t}},{key:"offset",get:function(){return this.imageData.offset}},{key:"fragDuration",get:function(){return Math.ceil(1e3/this.imageData.fps)}},{key:"start",get:function(){return this.imageData.start}},{key:"end",get:function(){return this.imageData.end}},{key:"duration",get:function(){return this.imageData.duration}}]),n}(N);function fi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function hi(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}var di=new WeakMap,pi=new WeakMap,vi=new WeakMap,yi=new WeakMap,gi=new WeakMap;function mi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var bi=function(t){c()(n,t);var e=mi(n);function n(t,r){var o;return i()(this,n),o=e.call(this,t,r),y()(u()(o),"libPath",null),o.options.processURL=r.processURL,o.libPath=r.libPath,o.poster=r.poster,!1!==o.options.needInit&&o.init(),o}return a()(n,null,[{key:"getComponent",value:function(t){return Fr[t]}},{key:"registerComponent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if("string"!=typeof t||!t)throw new Error('Illegal component name, "'.concat(t,'"; must be a non-empty string.'));var i=Object.prototype.isPrototypeOf.call(en,e.prototype);if(!i)throw new Error('Illegal component, "'.concat(t,'"; must be a BaseComponent subclass.'));Fr[t]=e,Gr.addComponet(t),"left"===n?Ir.addCustomControl(t,r):Mr.addCustomControl(t,r)}}]),n}(function(t){c()(n,t);var e=fi(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,n),r=e.call(this),y()(u()(r),"mode",I.c.mode),y()(u()(r),"$container",null),y()(u()(r),"componentsController",null),y()(u()(r),"controlBarController",null),y()(u()(r),"controlBarHeight",50),y()(u()(r),"alertError",null),y()(u()(r),"dataController",null),y()(u()(r),"demuxer",null),y()(u()(r),"decoder",null),y()(u()(r),"preload",!0),y()(u()(r),"startTime",0),y()(u()(r),"screenWidth",null),y()(u()(r),"screenHeight",null),y()(u()(r),"options",{}),hi(u()(r),di,{writable:!0,value:I.c.libPath}),y()(u()(r),"readyStatus",{dataProcessor:!1,firstData:!1,audioPlayer:!1}),y()(u()(r),"reseting",!1),hi(u()(r),pi,{writable:!0,value:0}),hi(u()(r),vi,{writable:!0,value:!1}),hi(u()(r),yi,{writable:!0,value:1}),hi(u()(r),gi,{writable:!0,value:!1}),y()(u()(r),"maxBufferLength",I.d.MAXBUFFERLENGTH),y()(u()(r),"seekSegmentNo",-1),y()(u()(r),"status","init"),y()(u()(r),"loader",null),y()(u()(r),"currentIndex",null),y()(u()(r),"startIndex",1),y()(u()(r),"dataManage",null),y()(u()(r),"paused",!1),y()(u()(r),"autoPlay",!0),y()(u()(r),"duration",0),y()(u()(r),"tsNumber",0),t||r.logger.error("Please pass in a dom object as the display container"),r.el=t,Object.assign(r.options,o),r.options.sourceURL=r.options.sourceURL||r.options.source,r.options.streamList=r.options.streamList||[],r.options.events=B(),r.maxBufferLength=void 0!==o.maxBufferLength?o.maxBufferLength:r.maxBufferLength,r.autoPlay=void 0!==o.autoPlay?o.autoPlay:r.autoPlay,r.controlBarAutoHide=void 0!==o.controlBarAutoHide?o.controlBarAutoHide:r.controlBarAutoHide,x()(u()(r),di,void 0!==o.libPath?o.libPath:m()(u()(r),di)),r.preload=void 0===o.preload?r.preload:o.preload,r.startTime=void 0===o.startTime?r.startTime:o.startTime,r.originStartTime=r.startTime,r.playbackRate=void 0===o.playbackRate?r.playbackRate:o.playbackRate,r}return a()(n,[{key:"setAlertError",value:function(){this.options.alertError=this.alertError=M.getInstance({player:this,component:this.componentsController.alertBox,events:this.options.events})}},{key:"setDataController",value:function(){this.dataController=Bt.getInstance({player:this,events:this.options.events})}},{key:"setDataManage",value:function(){this.dataController.setDataManage({player:this,type:this.options.type,events:this.options.events}),this.dataManage=this.dataController.dataManage}},{key:"setComponentsController",value:function(){this.componentsController=Gr.getInstance({$container:this.$container,$screenContainer:this.$screenContainer,$canvas:this.$canvas,$audioContainer:this.$audioContainer,$audio:this.$audio,dataManage:this.dataManage,bigPlayButtonColor:this.bigPlayButtonColor,player:this,events:this.options.events})}},{key:"setControlBarController",value:function(){var t=Object.assign({},this.options,{$container:this.$container,$screenContainer:this.$screenContainer,controlBarAutoHide:this.controlBarAutoHide,player:this});this.controlBarController=$r.getInstance(t)}},{key:"setLoadController",value:function(){this.loaderController=yt.getInstance(this.options.type,{player:this,events:this.options.events})}},{key:"setProcessorController",value:function(){this.processController=new Zr({type:"ts",libPath:m()(this,di),events:this.options.events,player:this})}},{key:"setStreamController",value:function(){this.streamController=new ti({events:this.options.events,dataManage:this.dataManage,imagePlayer:this.imagePlayer,audioPlayer:this.audioPlayer,player:this})}},{key:"setImagerPlayer",value:function(){this.imagePlayer=new ci({events:this.options.events,canvas:this.$canvas,maxBufferLength:this.maxBufferLength,player:this})}},{key:"setAudioPlayer",value:function(){this.audioPlayer=new Ae({player:this,events:this.options.events,audioNode:this.$audio})}},{key:"setAction",value:function(){this.action=new Lt({player:this,screen:this.screen,imagePlayer:this.imagePlayer,dataManage:this.dataManage,audioPlayer:this.audioPlayer,events:this.options.events})}},{key:"init",value:function(){this.controlBarHeight=this.options.controlBarHeight||this.controlBarHeight,this.options.httpWorker=Kr()(100,{name:"httpWorker"}),this.currentTime=this.startTime,this.addEl(),this.setDataController(),this.setDataManage(),this.setComponentsController(),this.setLoadController(),this.setControlBarController(),this.componentsController.setControlBarController(this.controlBarController),this.setAlertError(),this.setProcessorController(),this.setImagerPlayer(),this.setAudioPlayer(),this.setAction(),this.setStreamController(),this.componentsController.drawPoster(),this.preload&&this.run(),this.bindEvent()}},{key:"bindEvent",value:function(){var t=this;this.events.on(st.PlayerOnPlay,(function(){t.play()})),this.events.on(st.PlayerOnPause,(function(){t.pause()})),this.events.on(st.PlayerOnVolume,(function(e){t.volume=e})),this.events.on(st.DataProcessorReady,(function(){t.logger.info("bindEvent","decoder ready"),t.checkReady("dataProcessor")})),this.events.on(st.AudioPlayerReady,(function(){t.logger.info("bindEvent","audioPlayer ready"),t.seeking||t.checkReady("audioPlayer")})),this.events.on(st.PlayerReady,(function(){t.logger.info("bindEvent","player ready"),t.onReady()})),this.events.on(st.PlayerSpeedTo,(function(e){t.changeSpeed(e)})),this.events.on(st.PlayerChangeRate,(function(e){t.changeRate(e)})),this.events.on(st.PlayerWait,(function(){t.onWait()})),this.events.on(st.PlayerPlay,(function(){t.onPlay()})),this.events.on(st.LoaderPlayListLoaded,(function(e){"function"==typeof t.options.afterLoadPlaylist&&t.options.afterLoadPlaylist(t.laodData.sourceData);var n=e.dataManage.sourceData;t.duration=n.duration,t.tsNumber=n.length,t.streamController.setBaseInfo({duration:t.duration,tsNumber:t.tsNumber}),t.dataController.startLoad(t.startTime),t.setStartTime(t.originStartTime)})),this.events.on(st.DataManageFirstLoaded,(function(e){t.logger.info("bindEvent","first data ready"),t.startIndex=e.no,t.streamController.currentIndex=e.no,t.checkReady("firstData")})),this.events.on(st.StreamDataReady,(function(){t.logger.info("bindEvent","dataReady"),t.onDataReady()})),this.events.on(st.PlayerLoadedMetaData,(function(e,n){t.setCanvas(),t.resizeScreen(e,n)})),this.events.on(st.PlayerEnd,(function(){t.status="end"})),this.events.on(st.ImagePlayerBuffeUpdate,(function(){var e=t.buffer();t.events.emit(st.PlayerbufferUpdate,e)})),this.events.on(st.PlayerOnSeek,(function(e){t.seek(Math.floor(e))})),this.events.on(st.PlayerAlert,(function(e){t.alertError.show(e)})),this.events.on(st.PlayerThrowError,(function(e){U.a.apply(t,e)}))}},{key:"reset",value:function(t){this.action&&this.action.reset(t)}},{key:"switchPlaylist",value:function(t,e){this.loaderController.switchPlaylist(t,e)}},{key:"changeSpeed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.playbackRate=t.value||1}},{key:"setStartTime",value:function(t){this.startTime=t}},{key:"changeRate",value:function(t){this.pause(),this.events.emit(st.ControlBarPauseLoading,this),this.setStartTime((this.currentTime-5e3)/1e3),this.changing=!0,this.seeking=!1,this.imagePlayer.firstRender=!1,this.readyStatus={dataProcessor:!1,firstData:!1,audioPlayer:!1},this.reset(!0),this.switchPlaylist(t.url)}},{key:"changeSrc",value:function(t,e){this.pause(),this.events.emit(st.ControlBarPauseLoading,this),this.events.emit(st.PlayerChangeSrc,this),this.changing=!0,this.seeking=!1,this.imagePlayer.firstRender=!1,this.readyStatus={dataProcessor:!1,firstData:!1,audioPlayer:!1},this.currentTime=this.startTime,this.imagePlayer.clear(),this.reset(!0),this.switchPlaylist(t,e)}},{key:"setCanvas",value:function(){var t=Me.createCanvas(this);if(L.isElement(this.$canvas)){if(this.$canvas.width&&this.$canvas.height)return this.imagePlayer.setScreenRender(t),this.$canvas.replaceWith(t),void(this.$canvas=t)}else this.$screen.appendChild(t),this.$canvas=t}},{key:"destroy",value:function(){this.controlBarController&&(this.controlBarController.destroy(),delete this.controlBarController),this.$container&&(this.el.removeChild(this.$container),delete this.$container),this.processController.destroy(),this.loaderController.destroy()}},{key:"run",value:function(){this.loaderController.run()}},{key:"checkReady",value:function(t){var e=this.readyStatus;if(t&&"string"==typeof t){e[t]=!0;for(var n=Object.keys(e),r=0;r<n.length;r++)if(!e[n[r]])return!1;return this.logger.info("checkReady","player ready"),this.events.emit(st.PlayerReady),!0}return this.logger.error("checkReady","check ready","type is no correct, type:",t),!1}},{key:"addEl",value:function(){var t,e,n,r;this.el?(t=Me.createContainer(this),this.el.appendChild(t),this.$container=t,e=Me.createScreenContainer(this),this.$screen=e,t.appendChild(e),this.$screenContainer=e,this.setCanvas(),r=Me.createAudio(this),this.$audio=r,(n=Me.createAudioContainer(this)).appendChild(r),this.$audioContainer=n,t.appendChild(n)):this.logger.error("addEl","not found el.","el:",this.options.el)}},{key:"onWait",value:function(){this.logger.info("onWait","wait,wait,wait")}},{key:"onPlay",value:function(){this.logger.info("onPlay","play, play, play")}},{key:"onReady",value:function(){this.changing||this.componentsController.run(),this.changing&&this.logger.info("onReady","change ready","startIndex:",this.startIndex),this.streamController.startLoad(this.startIndex)}},{key:"onDataReady",value:function(){this.changing&&(this.changing=!1,this.play()),(this.seeking||this.autoPlay&&!this.paused)&&this.play()}},{key:"buffer",value:function(){var t=this.imagePlayer.buffer(),e=this.audioPlayer.buffer(),n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?[n,r]:[0,0]}},{key:"play",value:function(){this.logger.info("play",this.status),"playing"!==this.status&&(this.logger.info("start play"),this.status="playing",this.paused=!1,this.action.play(this.currentTime),this.events.emit(st.PlayerPlay,this))}},{key:"on",value:function(t,e){this.events.on("Player."+t,e)}},{key:"off",value:function(t,e){this.events.off("Player."+t,e)}},{key:"once",value:function(t,e){this.events.once("Player."+t,e)}},{key:"pause",value:function(){"pause"!=this.status&&(this.logger.info("pause"),this.status="pause",this.action.pause(),this.paused=!0,this.events.emit(st.PlayerPause,this))}},{key:"seek",value:function(t){t<this.startTime||(t>=1e3*this.duration?this.logger.info("seek","seek to time:",t):(this.seekTime=Date.now(),this.seeking=!0,this.currentTime=t,this.action.seek(t)))}},{key:"muted",get:function(){return m()(this,gi)},set:function(t){x()(this,gi,!!t)}},{key:"playbackRate",get:function(){return m()(this,yi)},set:function(t){x()(this,yi,t)}},{key:"seeking",get:function(){return m()(this,vi)},set:function(t){x()(this,vi,t),t?this.events.emit(st.PlayerSeeking):this.events.emit(st.PlayerSeekEnd)}},{key:"currentTime",get:function(){return m()(this,pi)},set:function(t){x()(this,pi,t)}},{key:"volume",get:function(){return this.audioPlayer.volume},set:function(t){this.audioPlayer.volume=t}},{key:"resizeScreen",value:function(t,e){L.adaptSizeElement(t,e,this.$screenContainer,this.$canvas)}}]),n}(N));e.default=bi},function(t,e,n){var r=n(10).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){return e.get?e.get.call(t):e.value},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(10).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=i=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),a=new C(r||[]);return s(o,"_invoke",{value:T(t,n,a)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var v="suspendedStart",y="executing",g="completed",m={};function b(){}function x(){}function k(){}var w={};h(w,l,(function(){return this}));var P=Object.getPrototypeOf,_=P&&P(P(D([])));_&&_!==o&&a.call(_,l)&&(w=_);var S=k.prototype=b.prototype=Object.create(w);function B(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,o,s,u){var l=p(t[i],t,o);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==r(f)&&a.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}))}u(l.arg)}var i;s(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function T(t,n,r){var i=v;return function(o,a){if(i===y)throw new Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=R(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=y;var l=p(t,n,r);if("normal"===l.type){if(i=r.done?g:"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=g,r.method="throw",r.arg=l.arg)}}}function R(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(r(t)+" is not iterable")}return x.prototype=k,s(S,"constructor",{value:k,configurable:!0}),s(k,"constructor",{value:x,configurable:!0}),x.displayName=h(k,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,h(t,f,"GeneratorFunction")),t.prototype=Object.create(S),t},n.awrap=function(t){return{__await:t}},B(E.prototype),h(E.prototype,c,(function(){return this})),n.AsyncIterator=E,n.async=function(t,e,r,i,o){void 0===o&&(o=Promise);var a=new E(d(t,e,r,i),o);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},B(S),h(S,f,"Generator"),h(S,l,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=D,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},n}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){!function(){"use strict";var e=n(50),r=n(96);function i(t){var e=t.getContext("2d"),n=null,i=null,o=null;return this.drawFrame=function(a){var s=a.format;t.width===s.displayWidth&&t.height===s.displayHeight||(t.width=s.displayWidth,t.height=s.displayHeight),null!==n&&n.width==s.width&&n.height==s.height||function(t,r){for(var i=(n=e.createImageData(t,r)).data,o=t*r*4,a=0;a<o;a+=4)i[a+3]=255}(s.width,s.height),r.convertYCbCr(a,n.data);var u,l,c,f=s.cropWidth!=s.displayWidth||s.cropHeight!=s.displayHeight;f?(i||(l=s.cropWidth,c=s.cropHeight,(i=document.createElement("canvas")).width=l,i.height=c,o=i.getContext("2d")),u=o):u=e,u.putImageData(n,-s.cropLeft,-s.cropTop,s.cropLeft,s.cropTop,s.cropWidth,s.cropHeight),f&&e.drawImage(i,0,0,s.displayWidth,s.displayHeight)},this.clear=function(){e.clearRect(0,0,t.width,t.height)},this}i.prototype=Object.create(e.prototype),t.exports=i}()},function(t,e,n){!function(){"use strict";var e=n(97);
/**
	 * Basic YCbCr->RGB conversion
	 *
	 * @author Brion Vibber <brion@pobox.com>
	 * @copyright 2014-2019
	 * @license MIT-style
	 *
	 * @param {YUVFrame} buffer - input frame buffer
	 * @param {Uint8ClampedArray} output - array to draw RGBA into
	 * Assumes that the output array already has alpha channel set to opaque.
	 */t.exports={convertYCbCr:function(t,n){var r=0|t.format.width,i=0|t.format.height,o=0|e(t.format.width/t.format.chromaWidth),a=0|e(t.format.height/t.format.chromaHeight),s=t.y.bytes,u=t.u.bytes,l=t.v.bytes,c=0|t.y.stride,f=0|t.u.stride,h=0|t.v.stride,d=r<<2,p=0,v=0,y=0,g=0,m=0,b=0,x=0,k=0,w=0,P=0,_=0,S=0,B=0,E=0,T=0,R=0,L=0,A=0;if(1==o&&1==a)for(x=0,k=d,A=0,R=0;R<i;R+=2){for(y=(v=R*c|0)+c|0,g=A*f|0,m=A*h|0,T=0;T<r;T+=2)w=0|u[g++],S=(409*(P=0|l[m++])|0)-57088|0,B=(100*w|0)+(208*P|0)-34816|0,E=(516*w|0)-70912|0,_=298*s[v++]|0,n[x]=_+S>>8,n[x+1]=_-B>>8,n[x+2]=_+E>>8,x+=4,_=298*s[v++]|0,n[x]=_+S>>8,n[x+1]=_-B>>8,n[x+2]=_+E>>8,x+=4,_=298*s[y++]|0,n[k]=_+S>>8,n[k+1]=_-B>>8,n[k+2]=_+E>>8,k+=4,_=298*s[y++]|0,n[k]=_+S>>8,n[k+1]=_-B>>8,n[k+2]=_+E>>8,k+=4;x+=d,k+=d,A++}else for(b=0,R=0;R<i;R++)for(L=0,p=R*c|0,g=(A=R>>a)*f|0,m=A*h|0,T=0;T<r;T++)w=0|u[g+(L=T>>o)],S=(409*(P=0|l[m+L])|0)-57088|0,B=(100*w|0)+(208*P|0)-34816|0,E=(516*w|0)-70912|0,_=298*s[p++]|0,n[b]=_+S>>8,n[b+1]=_-B>>8,n[b+2]=_+E>>8,b+=4}}}()},function(t,e){!function(){"use strict";
/**
   * Convert a ratio into a bit-shift count; for instance a ratio of 2
   * becomes a bit-shift of 1, while a ratio of 1 is a bit-shift of 0.
   *
   * @author Brion Vibber <brion@pobox.com>
   * @copyright 2016
   * @license MIT-style
   *
   * @param {number} ratio - the integer ratio to convert.
   * @returns {number} - number of bits to shift to multiply/divide by the ratio.
   * @throws exception if given a non-power-of-two
   */t.exports=function(t){for(var e=0,n=t>>1;0!=n;)n>>=1,e++;if(t!==1<<e)throw"chroma plane dimensions must be power of 2 ratio to luma plane dimensions; got "+t;return e}}()},function(t,e,n){!function(){"use strict";var e=n(50),r=n(99);function i(t){var e,n,o=this,a=i.contextForCanvas(t);if(null===a)throw new Error("WebGL unavailable");function s(t,e){var n=a.createShader(t);if(a.shaderSource(n,e),a.compileShader(n),!a.getShaderParameter(n,a.COMPILE_STATUS)){var r=a.getShaderInfoLog(n);throw a.deleteShader(n),new Error("GL shader compilation for "+t+" failed: "+r)}return n}var u,l,c,f,h,d,p,v,y,g,m=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),b={},x={},k={};function w(t,e){return b[t]&&!e||(b[t]=a.createTexture()),b[t]}function P(t,e,n,r,o){var s=!b[t]||e,u=w(t,e);if(a.activeTexture(a.TEXTURE0),i.stripe){var l=!b[t+"_temp"]||e,c=w(t+"_temp",e);a.bindTexture(a.TEXTURE_2D,c),l?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n/4,r,0,a.RGBA,a.UNSIGNED_BYTE,o)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n/4,r,a.RGBA,a.UNSIGNED_BYTE,o);var f=b[t+"_stripe"],h=!f||e;h&&(f=w(t+"_stripe",e)),a.bindTexture(a.TEXTURE_2D,f),h&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n,1,0,a.RGBA,a.UNSIGNED_BYTE,function(t){if(k[t])return k[t];for(var e=t,n=new Uint32Array(e),r=0;r<e;r+=4)n[r]=255,n[r+1]=65280,n[r+2]=16711680,n[r+3]=4278190080;return k[t]=new Uint8Array(n.buffer)}(n)))}else a.bindTexture(a.TEXTURE_2D,u),s?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,n,r,0,a.ALPHA,a.UNSIGNED_BYTE,o)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.ALPHA,a.UNSIGNED_BYTE,o)}function _(t,e,r,i){var o=b[t];a.useProgram(n);var s=x[t];s&&!e||(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r,i,0,a.RGBA,a.UNSIGNED_BYTE,null),s=x[t]=a.createFramebuffer()),a.bindFramebuffer(a.FRAMEBUFFER,s),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,o,0);var p=b[t+"_temp"];a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,p),a.uniform1i(d,1);var v=b[t+"_stripe"];a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,v),a.uniform1i(h,2),a.bindBuffer(a.ARRAY_BUFFER,u),a.enableVertexAttribArray(l),a.vertexAttribPointer(l,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,c),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.viewport(0,0,r,i),a.drawArrays(a.TRIANGLES,0,m.length/2),a.bindFramebuffer(a.FRAMEBUFFER,null)}function S(t,n,r){a.activeTexture(n),a.bindTexture(a.TEXTURE_2D,b[t]),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.uniform1i(a.getUniformLocation(e,t),r)}function B(t,e){var n=s(a.VERTEX_SHADER,t),r=s(a.FRAGMENT_SHADER,e),i=a.createProgram();if(a.attachShader(i,n),a.attachShader(i,r),a.linkProgram(i),!a.getProgramParameter(i,a.LINK_STATUS)){var o=a.getProgramInfoLog(i);throw a.deleteProgram(i),new Error("GL program linking failed: "+o)}return i}return o.drawFrame=function(s){var b=s.format,x=!e||t.width!==b.displayWidth||t.height!==b.displayHeight;if(x&&(t.width=b.displayWidth,t.height=b.displayHeight,o.clear()),e||function(){if(i.stripe){n=B(r.vertexStripe,r.fragmentStripe),a.getAttribLocation(n,"aPosition"),c=a.createBuffer();var t=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);a.bindBuffer(a.ARRAY_BUFFER,c),a.bufferData(a.ARRAY_BUFFER,t,a.STATIC_DRAW),f=a.getAttribLocation(n,"aTexturePosition"),h=a.getUniformLocation(n,"uStripe"),d=a.getUniformLocation(n,"uTexture")}e=B(r.vertex,r.fragment),u=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,u),a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW),l=a.getAttribLocation(e,"aPosition"),p=a.createBuffer(),v=a.getAttribLocation(e,"aLumaPosition"),y=a.createBuffer(),g=a.getAttribLocation(e,"aChromaPosition")}(),x){var k=function(t,e,n){var r=b.cropLeft/n,i=(b.cropLeft+b.cropWidth)/n,o=(b.cropTop+b.cropHeight)/b.height,s=b.cropTop/b.height,u=new Float32Array([r,o,i,o,r,s,r,s,i,o,i,s]);a.bindBuffer(a.ARRAY_BUFFER,t),a.bufferData(a.ARRAY_BUFFER,u,a.STATIC_DRAW)};k(p,0,s.y.stride),k(y,0,s.u.stride*b.width/b.chromaWidth)}P("uTextureY",x,s.y.stride,b.height,s.y.bytes),P("uTextureCb",x,s.u.stride,b.chromaHeight,s.u.bytes),P("uTextureCr",x,s.v.stride,b.chromaHeight,s.v.bytes),i.stripe&&(_("uTextureY",x,s.y.stride,b.height),_("uTextureCb",x,s.u.stride,b.chromaHeight),_("uTextureCr",x,s.v.stride,b.chromaHeight)),a.useProgram(e),a.viewport(0,0,t.width,t.height),S("uTextureY",a.TEXTURE0,0),S("uTextureCb",a.TEXTURE1,1),S("uTextureCr",a.TEXTURE2,2),a.bindBuffer(a.ARRAY_BUFFER,u),a.enableVertexAttribArray(l),a.vertexAttribPointer(l,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,p),a.enableVertexAttribArray(v),a.vertexAttribPointer(v,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,y),a.enableVertexAttribArray(g),a.vertexAttribPointer(g,2,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLES,0,m.length/2)},o.clear=function(){a.viewport(0,0,t.width,t.height),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},o.clear(),o}i.stripe=!1,i.contextForCanvas=function(t){var e={preferLowPowerToHighPerformance:!0,powerPreference:"low-power",failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0};return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)},i.isAvailable=function(){var t,e=document.createElement("canvas");e.width=1,e.height=1;try{t=i.contextForCanvas(e)}catch(t){return!1}if(t){var n=t.TEXTURE0,r=t.createTexture(),o=new Uint8Array(16),a=i.stripe?1:4,s=i.stripe?t.RGBA:t.ALPHA,u=i.stripe?t.NEAREST:t.LINEAR;return t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,u),t.texImage2D(t.TEXTURE_2D,0,s,a,4,0,s,t.UNSIGNED_BYTE,o),!t.getError()}return!1},i.prototype=Object.create(e.prototype),t.exports=i}()},function(t,e){t.exports={vertex:"precision mediump float;\n\nattribute vec2 aPosition;\nattribute vec2 aLumaPosition;\nattribute vec2 aChromaPosition;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vLumaPosition = aLumaPosition;\n    vChromaPosition = aChromaPosition;\n}\n",fragment:"// inspired by https://github.com/mbebenita/Broadway/blob/master/Player/canvas.js\n\nprecision mediump float;\n\nuniform sampler2D uTextureY;\nuniform sampler2D uTextureCb;\nuniform sampler2D uTextureCr;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n   // Y, Cb, and Cr planes are uploaded as ALPHA textures.\n   float fY = texture2D(uTextureY, vLumaPosition).w;\n   float fCb = texture2D(uTextureCb, vChromaPosition).w;\n   float fCr = texture2D(uTextureCr, vChromaPosition).w;\n\n   // Premultipy the Y...\n   float fYmul = fY * 1.1643828125;\n\n   // And convert that to RGB!\n   gl_FragColor = vec4(\n     fYmul + 1.59602734375 * fCr - 0.87078515625,\n     fYmul - 0.39176171875 * fCb - 0.81296875 * fCr + 0.52959375,\n     fYmul + 2.017234375   * fCb - 1.081390625,\n     1\n   );\n}\n",vertexStripe:"precision mediump float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexturePosition;\nvarying vec2 vTexturePosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vTexturePosition = aTexturePosition;\n}\n",fragmentStripe:"// extra 'stripe' texture fiddling to work around IE 11's poor performance on gl.LUMINANCE and gl.ALPHA textures\n\nprecision mediump float;\n\nuniform sampler2D uStripe;\nuniform sampler2D uTexture;\nvarying vec2 vTexturePosition;\nvoid main() {\n   // Y, Cb, and Cr planes are mapped into a pseudo-RGBA texture\n   // so we can upload them without expanding the bytes on IE 11\n   // which doesn't allow LUMINANCE or ALPHA textures\n   // The stripe textures mark which channel to keep for each pixel.\n   // Each texture extraction will contain the relevant value in one\n   // channel only.\n\n   float fLuminance = dot(\n      texture2D(uStripe, vTexturePosition),\n      texture2D(uTexture, vTexturePosition)\n   );\n\n   gl_FragColor = vec4(0, 0, 0, fLuminance);\n}\n"}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(0),u=n.n(s),l=n(62),c=n.n(l),f=n(10),h=n.n(f),d=n(29),p=n.n(d),v=n(18),y=n.n(v),g=n(11),m=n(25);function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var k=g.a.get("HTTP.js",{level:2}),w=function(){var t=p()(y.a.mark((function t(e){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e instanceof Blob)){t.next=5;break}return t.next=3,new Response(e).arrayBuffer();case 3:return n=t.sent,t.abrupt("return",new Uint8Array(n,0));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var P=function(t){if(t)return Object.entries(t).reduce((function(t,e,n){var r=c()(e,2),i=r[0],o=r[1];return t+(0===n?i+"="+encodeURIComponent(o):"&"+i+"="+encodeURIComponent(o))}),"")};function _(t,e){var n=("function"==typeof t.clone?t.clone():void 0)||t,r=function(t,e){var n={body:e,headers:function(t){return t.headers.entries?function(t){var e,n=Object.create(Object.getPrototypeOf(t.headers)),r=b(t.headers.entries());try{for(r.s();!(e=r.n()).done;){var i=c()(e.value,2),o=i[0],a=i[1];n[o]=a}}catch(t){r.e(t)}finally{r.f()}return n}(t):function(t){var e={},n=t.headers.__headers__;for(var r in n)e[r]=n[r].join("");return e}(t)}(t),response:t,status:t.status,statusText:t.statusText};return t.ok?Promise.resolve(n):Promise.reject(n)};return t[e]().then((function(t){return r(n,t)}))}function S(t,e){var n=t.headers.get("content-type"),r=t.clone().body.getReader(),i=0,o=i,a=setInterval((function(){var t=50*(i-o);t<=1||(k.info("HTTP>handleResponse","".concat(o," | ").concat(i),"".concat(t.toFixed(2)," Bytes/s")),self.postMessage({type:"notice",method:"fetch",noticeType:"speed",data:{speed:t,intervalValue:20,lastReceived:o,bytesReceived:i}}),o=i)}),20);return r.read().then((function o(s){return s.done?(clearInterval(a),function(){if("ts"===e||"video"===e)return _(t,"blob");if(n.includes("json"))return _(t,"json");if(n.includes("text"))return _(t,"text");if(n.includes("form"))return _(t,"formData");if(n.includes("video")||n.includes("image")||n.includes("octet-stream"))return _(t,"blob");try{return _(t,"text")}catch(e){return Object(m.a)(e,"[HTTP>handleResponse:unknow content-type]",n,t),Promise.resolve(t)}}()):(i+=s.value.length,r.read().then(o))}))}var B=null,E=(B||(B=new(function(){function t(e){i()(this,t),u()(this,"options",{"content-type":"application/json;charset=UTF-8",mode:"cors",referrer:"about:client",referrerPolicy:"no-referrer-when-downgrade"}),Object.assign(this.options,e)}var e;return a()(t,[{key:"setOptions",value:function(t){var e=Object.assign(this.options,t);e.url=function(t){var e=t.url,n=t.params;return n?e+"?"+P(n):e}(e),e.method=e.method||"get",e.headers=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.headers,n=void 0===e?{}:e,r=t.method,i=void 0===r?"get":r,o=t.username,a=t.password,s=t.token,u=new Headers(n);if(o||a){if(!o)throw new TypeError("username required for basic authentication");if(!a)throw new TypeError("password required for basic authentication");var l="object"===("undefined"==typeof win?"undefined":h()(win))&&win.btoa?btoa:function(t){return t};u.set("Authorization","Basic "+l(o+":"+a))}return s&&u.set("Authorization","Bearer "+s),"get"===i||u.get("content-type")||u.set("content-type","application/json"),u}(e),e.body=function(t){var e=t.headers.get("content-type");if(e)return e.includes("json")?JSON.stringify(t.body):e.includes("x-www-form-urlencoded")?P(t.body):t.body}(e),delete e.username,delete e.password,delete e.token,this.options=e}},{key:"request",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(t)return this.setOptions(Object.assign({url:t},e)),fetch(this.options.url,this.options).then((function(t){return S(t,n)}));k.error("[HTTP>request]","url is undefined","url:",t,"options:",e)}},{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=p()(y.a.mark((function t(e){var n,r,i,o,a=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,i=a.length>3?a[3]:void 0,e){t.next=6;break}return k.wran("[HTTP>fetch]","url is undefined","url:",e,"options:",n),t.abrupt("return");case 6:return this.setOptions(Object.assign({url:e},n)),k.info("[HTTP>fetch]","http fetch","url:",e,"options:",n),t.next=10,fetch(e,n);case 10:(o=t.sent).ok?o.text().then((function(t){self.postMessage({type:"invoke",method:"fetch",fileType:i,name:r,data:t})})):self.postMessage({result:"failed"});case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())},{key:"get",value:(e=p()(y.a.mark((function t(e){var n,r,i,o,a,s=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,i=s.length>3?s[3]:void 0,n.method="get",k.info("[HTTP>get]","http get","url:",e,"options:",n,"name:",r,"fileType:",i),a={type:"invoke",method:"get",fileType:i,name:r,url:e},t.prev=6,t.next=9,this.request.call(this,e,n,i);case 9:o=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),k.error("[HTTP>get]","networks error","url:",e,"options:",n,"name:",r,"fileType:",i,"ex:",t.t0);case 15:if(!o||!o.body){t.next=24;break}if(a.data=o.body,"ts"!==i&&"video"!==i){t.next=21;break}return t.next=20,w(a.data);case 20:a.arrayBuffer=t.sent;case 21:a.arrayBuffer?self.postMessage(a,[a.arrayBuffer.buffer]):self.postMessage(a),t.next=27;break;case 24:a.type="error",a.data=o,self.postMessage(a);case 27:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(t){return e.apply(this,arguments)})}]),t}())({})),B);e.default=function(t){t.onmessage=function(t){var e=t.data,n=e.type,r=e.method;switch(n){case"invoke":E[r].call(E,e.url,e.options,e.name,e.fileType)}}}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(104);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(15),i=n(12).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){e.f=n(16)},function(t,e,n){var r=n(76)("keys"),i=n(52);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(12).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(15),i=n(14),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(36)(Function.call,n(39).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r ¬†·öÄ·†é‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ\u2028\u2029\ufeff"},function(t,e,n){var r=n(15),i=n(111).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(38),i=n(43);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(38),i=n(43);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(53),i=n(7),o=n(27),a=n(32),s=n(65),u=n(149),l=n(63),c=n(58),f=n(16)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,p,v,y,g){u(n,e,p);var m,b,x,k=function(t){if(!h&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",P="values"==v,_=!1,S=t.prototype,B=S[f]||S["@@iterator"]||v&&S[v],E=B||k(v),T=v?P?k("entries"):E:void 0,R="Array"==e&&S.entries||B;if(R&&(x=c(R.call(new t)))!==Object.prototype&&x.next&&(l(x,w,!0),r||"function"==typeof x[f]||a(x,f,d)),P&&B&&"values"!==B.name&&(_=!0,E=function(){return B.call(this)}),r&&!g||!h&&!_&&S[f]||a(S,f,E),s[e]=E,s[w]=d,v)if(m={values:P?E:k("values"),keys:y?E:k("keys"),entries:T},g)for(b in m)b in S||o(S,b,m[b]);else i(i.P+i.F*(h||_),e,m);return m}},function(t,e,n){var r=n(120),i=n(43);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(15),i=n(42),o=n(16)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(16)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(65),i=n(16)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(21),i=n(51);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(73),i=n(16)("iterator"),o=n(65);t.exports=n(19).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){"use strict";var r=n(23),i=n(55),o=n(17);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:i(u,n);l>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(59),i=n(154),o=n(65),a=n(33);t.exports=n(118)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r,i,o=n(81),a=RegExp.prototype.exec,s=String.prototype.replace,u=a,l=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),c=void 0!==/()??/.exec("")[1];(l||c)&&(u=function(t){var e,n,r,i,u=this;return c&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),l&&(e=u.lastIndex),r=a.call(u,t),l&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),c&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=u},function(t,e,n){"use strict";var r=n(117)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r,i,o,a=n(36),s=n(143),u=n(110),l=n(106),c=n(12),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){m.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},d=function(t){delete g[t]},"process"==n(42)(f)?r=function(t){f.nextTick(a(m,t,1))}:v&&v.now?r=function(t){v.now(a(m,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:h,clear:d}},function(t,e,n){"use strict";var r=n(12),i=n(20),o=n(53),a=n(87),s=n(32),u=n(68),l=n(13),c=n(67),f=n(38),h=n(17),d=n(162),p=n(57).f,v=n(21).f,y=n(125),g=n(63),m=r.ArrayBuffer,b=r.DataView,x=r.Math,k=r.RangeError,w=r.Infinity,P=m,_=x.abs,S=x.pow,B=x.floor,E=x.log,T=x.LN2,R=i?"_b":"buffer",L=i?"_l":"byteLength",A=i?"_o":"byteOffset";function C(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,l=u>>1,c=23===e?S(2,-24)-S(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=_(t))!=t||t===w?(i=t!=t?1:0,r=u):(r=B(E(t)/T),t*(o=S(2,-r))<1&&(r--,o*=2),(t+=r+l>=1?c/o:c*S(2,1-l))*o>=2&&(r++,o/=2),r+l>=u?(i=0,r=u):r+l>=1?(i=(t*o-1)*S(2,e),r+=l):(i=t*S(2,l-1)*S(2,e),r=0));e>=8;a[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*h,a}function D(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,l=t[u--],c=127&l;for(l>>=7;s>0;c=256*c+t[u],u--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:l?-w:w;r+=S(2,e),c-=a}return(l?-1:1)*r*S(2,c-e)}function O(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function M(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function N(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function I(t){return C(t,52,8)}function F(t){return C(t,23,4)}function j(t,e,n){v(t.prototype,e,{get:function(){return this[n]}})}function H(t,e,n,r){var i=d(+n);if(i+e>t[L])throw k("Wrong index!");var o=t[R]._b,a=i+t[A],s=o.slice(a,a+e);return r?s:s.reverse()}function W(t,e,n,r,i,o){var a=d(+n);if(a+e>t[L])throw k("Wrong index!");for(var s=t[R]._b,u=a+t[A],l=r(+i),c=0;c<e;c++)s[u+c]=l[o?c:e-c-1]}if(a.ABV){if(!l((function(){m(1)}))||!l((function(){new m(-1)}))||l((function(){return new m,new m(1.5),new m(NaN),"ArrayBuffer"!=m.name}))){for(var V,z=(m=function(t){return c(this,m),new P(d(t))}).prototype=P.prototype,G=p(P),X=0;G.length>X;)(V=G[X++])in m||s(m,V,P[V]);o||(z.constructor=m)}var Y=new b(new m(2)),$=b.prototype.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||u(b.prototype,{setInt8:function(t,e){$.call(this,t,e<<24>>24)},setUint8:function(t,e){$.call(this,t,e<<24>>24)}},!0)}else m=function(t){c(this,m,"ArrayBuffer");var e=d(t);this._b=y.call(new Array(e),0),this[L]=e},b=function(t,e,n){c(this,b,"DataView"),c(t,m,"DataView");var r=t[L],i=f(e);if(i<0||i>r)throw k("Wrong offset!");if(i+(n=void 0===n?r-i:h(n))>r)throw k("Wrong length!");this[R]=t,this[A]=i,this[L]=n},i&&(j(m,"byteLength","_l"),j(b,"buffer","_b"),j(b,"byteLength","_l"),j(b,"byteOffset","_o")),u(b.prototype,{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return O(H(this,4,t,arguments[1]))},getUint32:function(t){return O(H(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return D(H(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return D(H(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){W(this,1,t,M,e)},setUint8:function(t,e){W(this,1,t,M,e)},setInt16:function(t,e){W(this,2,t,U,e,arguments[2])},setUint16:function(t,e){W(this,2,t,U,e,arguments[2])},setInt32:function(t,e){W(this,4,t,N,e,arguments[2])},setUint32:function(t,e){W(this,4,t,N,e,arguments[2])},setFloat32:function(t,e){W(this,4,t,F,e,arguments[2])},setFloat64:function(t,e){W(this,8,t,I,e,arguments[2])}});g(m,"ArrayBuffer"),g(b,"DataView"),s(b.prototype,a.VIEW,!0),e.ArrayBuffer=m,e.DataView=b},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(167)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(9),u=function(){function t(e){i()(this,t),this.decode=e,this.result=[]}return a()(t,[{key:"openDecode",value:function(){var t=this,e=Module.addFunction((function(e,n,r,i,o,a,s,u,l){var c=HEAPU8.subarray(e,e+i*u),f=HEAPU8.subarray(n,n+o*u/2),h=HEAPU8.subarray(r,r+a*u/2),d={stride_y:i,stride_u:o,stride_v:a,width:s,height:u,buf_y:new Uint8Array(c),buf_u:new Uint8Array(f),buf_v:new Uint8Array(h),pts:l};t.result.push(d)}));Module._openDecoder(e,1)}},{key:"decodeData",value:function(t,e){var n=t.length,r=Module._malloc(n);Module.HEAPU8.set(t,r),Module._decodeData(r,n,e),Module._free(r)}},{key:"flush",value:function(){for(Module._flushDecoder();this.checkData();)this.decode.getDecodeYUV()}},{key:"closeDecode",value:function(){Module._closeDecoder()}},{key:"getYUV",value:function(){var t=null;return this.result.length>0&&(t=this.result.shift()),t}},{key:"checkData",value:function(){return this.result.length>0}}]),t}(),l=function(){function t(e){i()(this,t),this.decode=e}return a()(t,[{key:"openDecode",value:function(){return _web_decoder_open()}},{key:"closeDecode",value:function(t){_web_decoder_close(t)}},{key:"decodeData",value:function(t,e,n){var r=t.length||0;Module.ccall("web_decoder_decode_frame","number",["number","array","number","number"],[n,t,r,e])}},{key:"flush",value:function(t){var e=this.decode;if(_web_decoder_decode_frame)for(;;){if(_web_decoder_decode_frame(t,null,0,0)<0||!_web_got_frame(t))break;e.getDecodeYUV(t)}}},{key:"getYUV",value:function(t){var e=_web_get_stride_y(t),n=_web_get_stride_u(t),r=_web_get_stride_v(t),i=_web_get_width(t),o=_web_get_height(t),a=_web_get_frame_y(t),u=_web_get_frame_u(t),l=_web_get_frame_v(t),c=parseInt(_web_got_frame_pts(t)*s.a*1e3),f=HEAPU8.subarray(a,a+e*o),h=HEAPU8.subarray(u,u+n*o/2),d=HEAPU8.subarray(l,l+r*o/2);return{stride_y:e,stride_u:n,stride_v:r,width:i,height:o,buf_y:new Uint8Array(f),buf_u:new Uint8Array(h),buf_v:new Uint8Array(d),pts:c}}},{key:"checkData",value:function(t){return _web_got_frame(t)}}]),t}(),c=function(){function t(){i()(this,t),this.p=null,this.ptsList=[],this.ptsOffset=0,this.fps=0,this.lastDuration=0,this.previousPTS=0,this.status=!1,this.yuvArray=[],this.decodeTool=null}return a()(t,[{key:"loadWASM",value:function(t){var e=t.data.libPath;self.Module={locateFile:function(t){return e+t}},self.importScripts(e+"libffmpeg.js"),self.Module.onRuntimeInitialized=function(){console.log("wasm loaded"),Module._web_decoder_open?self.decode.decodeTool=new l(self.decode,this.event):self.decode.decodeTool=new u(self.decode,this.event),self.decode.openDecode(),self.decode.onWasmLoaded()}}},{key:"openDecode",value:function(){try{this.status||(this.p=this.decodeTool.openDecode(),this.status=!0),console.log("opendecode")}catch(t){console.error(t)}}},{key:"closeDecode",value:function(){this.status&&(this.decodeTool.closeDecode(this.p),this.status=!1)}},{key:"push",value:function(t){var e=this;t.forEach((function(t){var n=t.PTS,r=t.data_byte,i=t.partEnd,o=t.lastTS,a=e.ptsList;e.insertSort(a,parseInt(n*s.a*1e3)),e.decodeTool.decodeData(r,n,e.p),e.decodeTool.checkData(e.p)&&e.getDecodeYUV(e.p,i,o)}))}},{key:"getDecodeYUV",value:function(t,e,n){if(!this.reseting){var r=0;this.fps||(this.fps=this.getFPS());var i=this.decodeTool.getYUV(t),o=this.ptsList.shift();if(i.pts=o,this.previousPTS&&o?(r=parseInt(o-this.previousPTS),this.lastDuration=r):r=this.lastDuration,i.duration=r,i.fps=this.fps,o)this.previousPTS=o,this.yuvArray.push(i),this.yuvArray.length>10&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]);e&&(this.yuvArray.length&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]),self.postMessage({type:"partEnd",data:n}))}}},{key:"reset",value:function(){this.reseting=!0,this.ptsList=[],this.ptsOffset=0,this.previousPTS=0,this.fps=0,this.yuvArray=[],this.closeDecode(),this.openDecode(),self.postMessage({type:"resetEnd",data:Date.now()}),this.reseting=!1}},{key:"flush",value:function(){this.decodeTool.flush(this.p),this.yuvArray.length&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]),this.closeDecode(),self.postMessage({type:"flushEnd",data:this.previousPTS})}},{key:"getFPS",value:function(){var t=this.ptsList;return t.length>=2?Math.round(1e3/(t[1]-t[0])):null}},{key:"onWasmLoaded",value:function(){self.postMessage({type:"dataProcessorReady"})}},{key:"insertSort",value:function(t,e){var n=t.length;if(0!==n){for(var r=0;r<n;r++)if(e<t[r]){for(var i=n;i>r;)t[i]=t[i-1],i--;return void(t[r]=e)}t.push(e)}else t.push(e)}}]),t}(),f=n(0),h=n.n(f),d=n(22),p=function(){function t(e){i()(this,t),h()(this,"previousPes",{}),h()(this,"maxAudioPTS",0),h()(this,"maxVideoPTS",0),h()(this,"offset",0),e?(this.init(),this.dataArray=[],this.videoArray=[],this.audioArray=[],this.decode=e):console.error("class TsDemux need pass decode parmas")}return a()(t,[{key:"init",value:function(){var t=this;try{this.demuxer=new d.c({enableWorker:!1,debug:!1,onlyDemuxElementary:!0}),this.demuxer.on(d.a.DEMUX_DATA,(function(e){e instanceof Array?(console.log("data"),t.dataArray.push(e),t.demuxed(t.dataArray),t.dataArray=[]):t.dataArray.push(e)})),this.demuxer.on(d.a.DONE,(function(e){var n={};t.demuxed(t.dataArray),t.dataArray=[],t.previousPes.partEnd=!0,t.previousPes.lastTS=t.isLast,t.isLast?(t.maxPTS=Math.min(t.maxAudioPTS,t.maxVideoPTS),n.audioEnd=!0,t.audioQueue(n),self.postMessage({type:"demuxedAAC",data:t.audioArray}),t.audioArray=[],self.postMessage({type:"maxPTS",data:{maxAudioPTS:t.maxAudioPTS,maxVideoPTS:t.maxVideoPTS}})):(self.postMessage({type:"demuxedAAC",data:t.audioArray}),t.audioArray=[]),t.decode.push(t.videoArray),t.videoArray=[],t.previousPes=null}))}catch(t){console.error("init demuxer failed.")}}},{key:"push",value:function(t){this.demuxer.push(t,{done:!0})}},{key:"demuxed",value:function(t){var e=this;t.forEach((function(t){e.tsDemuxed(t)}))}},{key:"tsDemuxed",value:function(t){var e=t.stream_type,n=t.pes||{};switch(e){case 36:this.videoQueue(n);break;case 3:case 15:case 17:n.PTS=Math.round(n.PTS*s.a*1e3),this.maxAudioPTS=Math.max(n.PTS,this.maxAudioPTS),this.audioQueue(n)}}},{key:"audioQueue",value:function(t){this.audioArray.push(t)}},{key:"videoQueue",value:function(t){this.previousPes=t,this.maxVideoPTS=Math.max(this.maxVideoPTS,t.PTS),this.videoArray.push(t)}},{key:"destroy",value:function(){this.demuxer.destroy()}}]),t}();self.decode=new c,self.demuxer=new p(self.decode);e.default=function(t){t.onmessage=function(e){var n=e.data,r=n.type,i=n.data,o=n.isLast;switch(r){case"startDemux":t.demuxer.isLast=o,t.demuxer.push(i);break;case"loadwasm":t.decode.loadWASM(e);break;case"flush":t.decode.flush()}}}},function(t,e,n){t.exports=!n(20)&&!n(13)((function(){return 7!=Object.defineProperty(n(106)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(12),i=n(19),o=n(53),a=n(107),s=n(21).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(31),i=n(33),o=n(77)(!1),a=n(108)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var r=n(21),i=n(14),o=n(54);t.exports=n(20)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(33),i=n(57).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(20),i=n(54),o=n(78),a=n(72),s=n(23),u=n(71),l=Object.assign;t.exports=!l||n(13)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=r}))?function(t,e){for(var n=s(t),l=arguments.length,c=1,f=o.f,h=a.f;l>c;)for(var d,p=u(arguments[c++]),v=f?i(p).concat(f(p)):i(p),y=v.length,g=0;y>g;)d=v[g++],r&&!h.call(p,d)||(n[d]=p[d]);return n}:l},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(37),i=n(15),o=n(143),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(12).parseInt,i=n(64).trim,o=n(112),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(12).parseFloat,i=n(64).trim;t.exports=1/r(n(112)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(42);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(15),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){"use strict";var r=n(56),i=n(51),o=n(63),a={};n(32)(a,n(16)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(14);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(265);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(37),i=n(23),o=n(71),a=n(17);t.exports=function(t,e,n,s,u){r(e);var l=i(t),c=o(l),f=a(l.length),h=u?f-1:0,d=u?-1:1;if(n<2)for(;;){if(h in c){s=c[h],h+=d;break}if(h+=d,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=d)h in c&&(s=e(s,c[h],h,l));return s}},function(t,e,n){"use strict";var r=n(23),i=n(55),o=n(17);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?a:i(l,a))-u,a-s),f=1;for(u<s&&s<u+c&&(f=-1,u+=c-1,s+=c-1);c-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(127);n(7)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){n(20)&&"g"!=/./g.flags&&n(21).f(RegExp.prototype,"flags",{configurable:!0,get:n(81)})},function(t,e,n){"use strict";var r,i,o,a,s=n(53),u=n(12),l=n(36),c=n(73),f=n(7),h=n(15),d=n(37),p=n(67),v=n(84),y=n(74),g=n(129).set,m=n(285)(),b=n(158),x=n(286),k=n(85),w=n(159),P=u.TypeError,_=u.process,S=_&&_.versions,B=S&&S.v8||"",E=u.Promise,T="process"==c(_),R=function(){},L=i=b.f,A=!!function(){try{var t=E.resolve(1),e=(t.constructor={})[n(16)("species")]=function(t){t(R,R)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==B.indexOf("6.6")&&-1===k.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;m((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&U(t),t._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===e.promise?l(P("Promise-chain cycle")):(o=C(n))?o.call(n,u,l):u(n)):l(r)}catch(t){c&&!a&&c.exit(),l(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)}))}},O=function(t){g.call(u,(function(){var e,n,r,i=t._v,o=M(t);if(o&&(e=x((function(){T?_.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=T||M(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},M=function(t){return 1!==t._h&&0===(t._a||t._c).length},U=function(t){g.call(u,(function(){var e;T?_.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw P("Promise can't be resolved itself");(e=C(t))?m((function(){var r={_w:n,_d:!1};try{e.call(t,l(I,r,1),l(N,r,1))}catch(t){N.call(r,t)}})):(n._v=t,n._s=1,D(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};A||(E=function(t){p(this,E,"Promise","_h"),d(t),r.call(this);try{t(l(I,this,1),l(N,this,1))}catch(t){N.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(68)(E.prototype,{then:function(t,e){var n=L(y(this,E));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=l(I,t,1),this.reject=l(N,t,1)},b.f=L=function(t){return t===E||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!A,{Promise:E}),n(63)(E,"Promise"),n(66)("Promise"),a=n(19).Promise,f(f.S+f.F*!A,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(t){return w(s&&this===a?E:this,t)}}),f(f.S+f.F*!(A&&n(80)((function(t){E.all(t).catch(R)}))),"Promise",{all:function(t){var e=this,n=L(e),r=n.resolve,i=n.reject,o=x((function(){var n=[],o=0,a=1;v(t,!1,(function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=L(e),r=n.reject,i=x((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(37);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){var r=n(14),i=n(15),o=n(158);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(21).f,i=n(56),o=n(68),a=n(36),s=n(67),u=n(84),l=n(118),c=n(154),f=n(66),h=n(20),d=n(48).fastKey,p=n(60),v=h?"_s":"size",y=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var c=t((function(t,r){s(t,c,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,null!=r&&u(r,n,t[l],t)}));return o(c.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=p(this,e),r=y(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){p(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,e),t)}}),h&&r(c.prototype,"size",{get:function(){return p(this,e)[v]}}),c},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,n){l(t,e,(function(t,n){this._t=p(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))}),n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(68),i=n(48).getWeak,o=n(14),a=n(15),s=n(67),u=n(84),l=n(41),c=n(31),f=n(60),h=l(5),d=l(6),p=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return h(t.a,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var l=t((function(t,r){s(t,l,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=r&&u(r,n,t[o],t)}));return r(l.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(f(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(f(this,e)).has(t):n&&c(n,this._i)}}),l},def:function(t,e,n){var r=i(o(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},function(t,e,n){var r=n(38),i=n(17);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(57),i=n(78),o=n(14),a=n(12).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(17),i=n(114),o=n(43);t.exports=function(t,e,n,a){var s=String(o(t)),u=s.length,l=void 0===n?" ":String(n),c=r(e);if(c<=u||""==l)return s;var f=c-u,h=i.call(l,Math.ceil(f/l.length));return h.length>f&&(h=h.slice(0,f)),a?h+s:s+h}},function(t,e,n){var r=n(20),i=n(54),o=n(33),a=n(72).f;t.exports=function(t){return function(e){for(var n,s=o(e),u=i(s),l=u.length,c=0,f=[];l>c;)n=u[c++],r&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},,,function(t,e,n){n(171),t.exports=n(357)},function(t,e,n){"use strict";n(172);var r,i=(r=n(344))&&r.__esModule?r:{default:r};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(t,e,n){"use strict";n(173),n(316),n(318),n(321),n(323),n(325),n(327),n(329),n(331),n(333),n(335),n(337),n(339),n(343)},function(t,e,n){n(174),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(255),n(256),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(126),n(279),n(155),n(280),n(156),n(281),n(282),n(283),n(284),n(157),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),t.exports=n(19)},function(t,e,n){"use strict";var r=n(12),i=n(31),o=n(20),a=n(7),s=n(27),u=n(48).KEY,l=n(13),c=n(76),f=n(63),h=n(52),d=n(16),p=n(107),v=n(136),y=n(176),g=n(79),m=n(14),b=n(15),x=n(23),k=n(33),w=n(47),P=n(51),_=n(56),S=n(139),B=n(39),E=n(78),T=n(21),R=n(54),L=B.f,A=T.f,C=S.f,D=r.Symbol,O=r.JSON,M=O&&O.stringify,U=d("_hidden"),N=d("toPrimitive"),I={}.propertyIsEnumerable,F=c("symbol-registry"),j=c("symbols"),H=c("op-symbols"),W=Object.prototype,V="function"==typeof D&&!!E.f,z=r.QObject,G=!z||!z.prototype||!z.prototype.findChild,X=o&&l((function(){return 7!=_(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=L(W,e);r&&delete W[e],A(t,e,n),r&&t!==W&&A(W,e,r)}:A,Y=function(t){var e=j[t]=_(D.prototype);return e._k=t,e},$=V&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},q=function(t,e,n){return t===W&&q(H,e,n),m(t),e=w(e,!0),m(n),i(j,e)?(n.enumerable?(i(t,U)&&t[U][e]&&(t[U][e]=!1),n=_(n,{enumerable:P(0,!1)})):(i(t,U)||A(t,U,P(1,{})),t[U][e]=!0),X(t,e,n)):A(t,e,n)},K=function(t,e){m(t);for(var n,r=y(e=k(e)),i=0,o=r.length;o>i;)q(t,n=r[i++],e[n]);return t},Q=function(t){var e=I.call(this,t=w(t,!0));return!(this===W&&i(j,t)&&!i(H,t))&&(!(e||!i(this,t)||!i(j,t)||i(this,U)&&this[U][t])||e)},Z=function(t,e){if(t=k(t),e=w(e,!0),t!==W||!i(j,e)||i(H,e)){var n=L(t,e);return!n||!i(j,e)||i(t,U)&&t[U][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=C(k(t)),r=[],o=0;n.length>o;)i(j,e=n[o++])||e==U||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===W,r=C(n?H:k(t)),o=[],a=0;r.length>a;)!i(j,e=r[a++])||n&&!i(W,e)||o.push(j[e]);return o};V||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===W&&e.call(H,n),i(this,U)&&i(this[U],t)&&(this[U][t]=!1),X(this,t,P(1,n))};return o&&G&&X(W,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",(function(){return this._k})),B.f=Z,T.f=q,n(57).f=S.f=J,n(72).f=Q,E.f=tt,o&&!n(53)&&s(W,"propertyIsEnumerable",Q,!0),p.f=function(t){return Y(d(t))}),a(a.G+a.W+a.F*!V,{Symbol:D});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var rt=R(d.store),it=0;rt.length>it;)v(rt[it++]);a(a.S+a.F*!V,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=D(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!V,"Object",{create:function(t,e){return void 0===e?_(t):K(_(t),e)},defineProperty:q,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:J,getOwnPropertySymbols:tt});var ot=l((function(){E.f(1)}));a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return E.f(x(t))}}),O&&a(a.S+a.F*(!V||l((function(){var t=D();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!$(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!$(e))return e}),r[1]=e,M.apply(O,r)}}),D.prototype[N]||n(32)(D.prototype,N,D.prototype.valueOf),f(D,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){t.exports=n(76)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(54),i=n(78),o=n(72);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,n){var r=n(7);r(r.S,"Object",{create:n(56)})},function(t,e,n){var r=n(7);r(r.S+r.F*!n(20),"Object",{defineProperty:n(21).f})},function(t,e,n){var r=n(7);r(r.S+r.F*!n(20),"Object",{defineProperties:n(138)})},function(t,e,n){var r=n(33),i=n(39).f;n(40)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},function(t,e,n){var r=n(23),i=n(58);n(40)("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},function(t,e,n){var r=n(23),i=n(54);n(40)("keys",(function(){return function(t){return i(r(t))}}))},function(t,e,n){n(40)("getOwnPropertyNames",(function(){return n(139).f}))},function(t,e,n){var r=n(15),i=n(48).onFreeze;n(40)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(15),i=n(48).onFreeze;n(40)("seal",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(15),i=n(48).onFreeze;n(40)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(15);n(40)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(15);n(40)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(15);n(40)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},function(t,e,n){var r=n(7);r(r.S+r.F,"Object",{assign:n(140)})},function(t,e,n){var r=n(7);r(r.S,"Object",{is:n(141)})},function(t,e,n){var r=n(7);r(r.S,"Object",{setPrototypeOf:n(111).set})},function(t,e,n){"use strict";var r=n(73),i={};i[n(16)("toStringTag")]="z",i+""!="[object z]"&&n(27)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(t,e,n){var r=n(7);r(r.P,"Function",{bind:n(142)})},function(t,e,n){var r=n(21).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(20)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(15),i=n(58),o=n(16)("hasInstance"),a=Function.prototype;o in a||n(21).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(7),i=n(144);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(7),i=n(145);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(12),i=n(31),o=n(42),a=n(113),s=n(47),u=n(13),l=n(57).f,c=n(39).f,f=n(21).f,h=n(64).trim,d=r.Number,p=d,v=d.prototype,y="Number"==o(n(56)(v)),g="trim"in String.prototype,m=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=g?e.trim():h(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),l=0,c=u.length;l<c;l++)if((a=u.charCodeAt(l))<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(y?u((function(){v.valueOf.call(n)})):"Number"!=o(n))?a(new p(m(e)),n,d):m(e)};for(var b,x=n(20)?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;x.length>k;k++)i(p,b=x[k])&&!i(d,b)&&f(d,b,c(p,b));d.prototype=v,v.constructor=d,n(27)(r,"Number",d)}},function(t,e,n){"use strict";var r=n(7),i=n(38),o=n(146),a=n(114),s=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*l[n],l[n]=r%1e7,r=u(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},p=function(t,e,n){return 0===e?n:e%2==1?p(t,e-1,n*t):p(t*t,e/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(13)((function(){s.call({})}))),"Number",{toFixed:function(t){var e,n,r,s,u=o(this,c),l=i(t),v="",y="0";if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*p(2,69,1))-69)<0?u*p(2,-e,1):u/p(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=l;r>=7;)f(1e7,0),r-=7;for(f(p(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),y=d()}else f(0,n),f(1<<-e,0),y=d()+a.call("0",l);return y=l>0?v+((s=y.length)<=l?"0."+a.call("0",l-s)+y:y.slice(0,s-l)+"."+y.slice(s-l)):v+y}})},function(t,e,n){"use strict";var r=n(7),i=n(13),o=n(146),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(7);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(7),i=n(12).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(7);r(r.S,"Number",{isInteger:n(147)})},function(t,e,n){var r=n(7);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(7),i=n(147),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(7);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(7);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(7),i=n(145);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(7),i=n(144);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(7),i=n(148),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){var r=n(7),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(7),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(7),i=n(115);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(7);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(7),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(7),i=n(116);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(7);r(r.S,"Math",{fround:n(219)})},function(t,e,n){var r=n(115),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),l=r(t);return i<u?l*(i/u/a+1/o-1/o)*u*a:(n=(e=(1+a/o)*i)-(e-i))>s||n!=n?l*(1/0):l*n}},function(t,e,n){var r=n(7),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var r=n(7),i=Math.imul;r(r.S+r.F*n(13)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(7);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(7);r(r.S,"Math",{log1p:n(148)})},function(t,e,n){var r=n(7);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(7);r(r.S,"Math",{sign:n(115)})},function(t,e,n){var r=n(7),i=n(116),o=Math.exp;r(r.S+r.F*n(13)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(7),i=n(116),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(7);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(7),i=n(55),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(7),i=n(33),o=n(17);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(64)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,n){"use strict";var r=n(117)(!0);n(118)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";var r=n(7),i=n(117)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(7),i=n(17),o=n(119),a="".endsWith;r(r.P+r.F*n(121)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){"use strict";var r=n(7),i=n(119);r(r.P+r.F*n(121)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(7);r(r.P,"String",{repeat:n(114)})},function(t,e,n){"use strict";var r=n(7),i=n(17),o=n(119),a="".startsWith;r(r.P+r.F*n(121)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(28)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,n){"use strict";n(28)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,n){"use strict";n(28)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,n){"use strict";n(28)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,n){"use strict";n(28)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,n){"use strict";n(28)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,n){"use strict";n(28)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,n){"use strict";n(28)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,n){"use strict";n(28)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,n){"use strict";n(28)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,n){"use strict";n(28)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,n){"use strict";n(28)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,n){"use strict";n(28)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,n){var r=n(7);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(7),i=n(23),o=n(47);r(r.P+r.F*n(13)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(7),i=n(254);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(13),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(27)(r,"toString",(function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"}))},function(t,e,n){var r=n(16)("toPrimitive"),i=Date.prototype;r in i||n(32)(i,r,n(257))},function(t,e,n){"use strict";var r=n(14),i=n(47);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(7);r(r.S,"Array",{isArray:n(79)})},function(t,e,n){"use strict";var r=n(36),i=n(7),o=n(23),a=n(150),s=n(122),u=n(17),l=n(123),c=n(124);i(i.S+i.F*!n(80)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,f,h=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v,g=0,m=c(h);if(y&&(v=r(v,p>2?arguments[2]:void 0,2)),null==m||d==Array&&s(m))for(n=new d(e=u(h.length));e>g;g++)l(n,g,y?v(h[g],g):h[g]);else for(f=m.call(h),n=new d;!(i=f.next()).done;g++)l(n,g,y?a(f,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){"use strict";var r=n(7),i=n(123);r(r.S+r.F*n(13)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(7),i=n(33),o=[].join;r(r.P+r.F*(n(71)!=Object||!n(34)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(7),i=n(110),o=n(42),a=n(55),s=n(17),u=[].slice;r(r.P+r.F*n(13)((function(){i&&u.call(i)})),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=a(t,n),l=a(e,n),c=s(l-i),f=new Array(c),h=0;h<c;h++)f[h]="String"==r?this.charAt(i+h):this[i+h];return f}})},function(t,e,n){"use strict";var r=n(7),i=n(37),o=n(23),a=n(13),s=[].sort,u=[1,2,3];r(r.P+r.F*(a((function(){u.sort(void 0)}))||!a((function(){u.sort(null)}))||!n(34)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(7),i=n(41)(0),o=n(34)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(15),i=n(79),o=n(16)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(7),i=n(41)(1);r(r.P+r.F*!n(34)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(41)(2);r(r.P+r.F*!n(34)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(41)(3);r(r.P+r.F*!n(34)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(41)(4);r(r.P+r.F*!n(34)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(152);r(r.P+r.F*!n(34)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(7),i=n(152);r(r.P+r.F*!n(34)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(7),i=n(77)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(34)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),i=n(33),o=n(38),a=n(17),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(34)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(7);r(r.P,"Array",{copyWithin:n(153)}),n(59)("copyWithin")},function(t,e,n){var r=n(7);r(r.P,"Array",{fill:n(125)}),n(59)("fill")},function(t,e,n){"use strict";var r=n(7),i=n(41)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(59)("find")},function(t,e,n){"use strict";var r=n(7),i=n(41)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(59)(o)},function(t,e,n){n(66)("Array")},function(t,e,n){var r=n(12),i=n(113),o=n(21).f,a=n(57).f,s=n(120),u=n(81),l=r.RegExp,c=l,f=l.prototype,h=/a/g,d=/a/g,p=new l(h)!==h;if(n(20)&&(!p||n(13)((function(){return d[n(16)("match")]=!1,l(h)!=h||l(d)==d||"/a/i"!=l(h,"i")})))){l=function(t,e){var n=this instanceof l,r=s(t),o=void 0===e;return!n&&r&&t.constructor===l&&o?t:i(p?new c(r&&!o?t.source:t,e):c((r=t instanceof l)?t.source:t,r&&o?u.call(t):e),n?this:f,l)};for(var v=function(t){t in l||o(l,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},y=a(c),g=0;y.length>g;)v(y[g++]);f.constructor=l,l.prototype=f,n(27)(r,"RegExp",l)}n(66)("RegExp")},function(t,e,n){"use strict";n(156);var r=n(14),i=n(81),o=n(20),a=/./.toString,s=function(t){n(27)(RegExp.prototype,"toString",t,!0)};n(13)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(t,e,n){"use strict";var r=n(14),i=n(17),o=n(128),a=n(82);n(83)("match",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var u=r(t),l=String(this);if(!u.global)return a(u,l);var c=u.unicode;u.lastIndex=0;for(var f,h=[],d=0;null!==(f=a(u,l));){var p=String(f[0]);h[d]=p,""===p&&(u.lastIndex=o(l,i(u.lastIndex),c)),d++}return 0===d?null:h}]}))},function(t,e,n){"use strict";var r=n(14),i=n(23),o=n(17),a=n(38),s=n(128),u=n(82),l=Math.max,c=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(83)("replace",2,(function(t,e,n,p){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=p(n,t,this,e);if(i.done)return i.value;var f=r(t),h=String(this),d="function"==typeof e;d||(e=String(e));var y=f.global;if(y){var g=f.unicode;f.lastIndex=0}for(var m=[];;){var b=u(f,h);if(null===b)break;if(m.push(b),!y)break;""===String(b[0])&&(f.lastIndex=s(h,o(f.lastIndex),g))}for(var x,k="",w=0,P=0;P<m.length;P++){b=m[P];for(var _=String(b[0]),S=l(c(a(b.index),h.length),0),B=[],E=1;E<b.length;E++)B.push(void 0===(x=b[E])?x:String(x));var T=b.groups;if(d){var R=[_].concat(B,S,h);void 0!==T&&R.push(T);var L=String(e.apply(void 0,R))}else L=v(_,h,S,B,T,e);S>=w&&(k+=h.slice(w,S)+L,w=S+_.length)}return k+h.slice(w)}];function v(t,e,r,o,a,s){var u=r+t.length,l=o.length,c=d;return void 0!==a&&(a=i(a),c=h),n.call(s,c,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>l){var h=f(c/10);return 0===h?n:h<=l?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):n}s=o[c-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var r=n(14),i=n(141),o=n(82);n(83)("search",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=r(t),u=String(this),l=s.lastIndex;i(l,0)||(s.lastIndex=0);var c=o(s,u);return i(s.lastIndex,l)||(s.lastIndex=l),null===c?-1:c.index}]}))},function(t,e,n){"use strict";var r=n(120),i=n(14),o=n(74),a=n(128),s=n(17),u=n(82),l=n(127),c=n(13),f=Math.min,h=[].push,d="length",p=!c((function(){RegExp(4294967295,"y")}));n(83)("split",2,(function(t,e,n,c){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[d]||2!="ab".split(/(?:ab)*/)[d]||4!=".".split(/(.?)(.?)/)[d]||".".split(/()()/)[d]>1||"".split(/.?/)[d]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,s,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,p=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,c+"g");(o=l.call(v,i))&&!((a=v.lastIndex)>f&&(u.push(i.slice(f,o.index)),o[d]>1&&o.index<i[d]&&h.apply(u,o.slice(1)),s=o[0][d],f=a,u[d]>=p));)v.lastIndex===o.index&&v.lastIndex++;return f===i[d]?!s&&v.test("")||u.push(""):u.push(i.slice(f)),u[d]>p?u.slice(0,p):u}:"0".split(void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(t,e){var r=c(v,t,this,e,v!==n);if(r.done)return r.value;var l=i(t),h=String(this),d=o(l,RegExp),y=l.unicode,g=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(p?"y":"g"),m=new d(p?l:"^(?:"+l.source+")",g),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===h.length)return null===u(m,h)?[h]:[];for(var x=0,k=0,w=[];k<h.length;){m.lastIndex=p?k:0;var P,_=u(m,p?h:h.slice(k));if(null===_||(P=f(s(m.lastIndex+(p?0:k)),h.length))===x)k=a(h,k,y);else{if(w.push(h.slice(x,k)),w.length===b)return w;for(var S=1;S<=_.length-1;S++)if(w.push(_[S]),w.length===b)return w;k=x=P}}return w.push(h.slice(x)),w}]}))},function(t,e,n){var r=n(12),i=n(129).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(42)(a);t.exports=function(){var t,e,n,l=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var f=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){"use strict";var r=n(160),i=n(60);t.exports=n(86)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(160),i=n(60);t.exports=n(86)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(12),o=n(41)(0),a=n(27),s=n(48),u=n(140),l=n(161),c=n(15),f=n(60),h=n(60),d=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,v=Object.isExtensible,y=l.ufstore,g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(c(t)){var e=p(t);return!0===e?y(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(f(this,"WeakMap"),t,e)}},b=t.exports=n(86)("WeakMap",g,m,l,!0,!0);h&&d&&(u((r=l.getConstructor(g,"WeakMap")).prototype,m),s.NEED=!0,o(["delete","has","get","set"],(function(t){var e=b.prototype,n=e[t];a(e,t,(function(e,i){if(c(e)&&!v(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)}))})))},function(t,e,n){"use strict";var r=n(161),i=n(60);n(86)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(7),i=n(87),o=n(130),a=n(14),s=n(55),u=n(17),l=n(15),c=n(12).ArrayBuffer,f=n(74),h=o.ArrayBuffer,d=o.DataView,p=i.ABV&&c.isView,v=h.prototype.slice,y=i.VIEW;r(r.G+r.W+r.F*(c!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||l(t)&&y in t}}),r(r.P+r.U+r.F*n(13)((function(){return!new h(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(f(this,h))(u(i-r)),l=new d(this),c=new d(o),p=0;r<i;)c.setUint8(p++,l.getUint8(r++));return o}}),n(66)("ArrayBuffer")},function(t,e,n){var r=n(7);r(r.G+r.W+r.F*!n(87).ABV,{DataView:n(130).DataView})},function(t,e,n){n(44)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(44)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(44)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){n(44)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(44)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(44)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(44)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(44)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(44)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(7),i=n(37),o=n(14),a=(n(12).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(13)((function(){a((function(){}))})),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return a?a(r,e,u):s.call(r,e,u)}})},function(t,e,n){var r=n(7),i=n(56),o=n(37),a=n(14),s=n(15),u=n(13),l=n(142),c=(n(12).Reflect||{}).construct,f=u((function(){function t(){}return!(c((function(){}),[],t)instanceof t)})),h=!u((function(){c((function(){}))}));r(r.S+r.F*(f||h),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!f)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var u=n.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},function(t,e,n){var r=n(21),i=n(7),o=n(14),a=n(47);i(i.S+i.F*n(13)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(7),i=n(39).f,o=n(14);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(7),i=n(14),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(149)(o,"Object",(function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var r=n(39),i=n(58),o=n(31),a=n(7),s=n(15),u=n(14);a(a.S,"Reflect",{get:function t(e,n){var a,l,c=arguments.length<3?e:arguments[2];return u(e)===c?e[n]:(a=r.f(e,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(c):void 0:s(l=i(e))?t(l,n,c):void 0}})},function(t,e,n){var r=n(39),i=n(7),o=n(14);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(7),i=n(58),o=n(14);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(7);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(7),i=n(14),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(7);r(r.S,"Reflect",{ownKeys:n(163)})},function(t,e,n){var r=n(7),i=n(14),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(21),i=n(39),o=n(58),a=n(31),s=n(7),u=n(51),l=n(14),c=n(15);s(s.S,"Reflect",{set:function t(e,n,s){var f,h,d=arguments.length<4?e:arguments[3],p=i.f(l(e),n);if(!p){if(c(h=o(e)))return t(h,n,s,d);p=u(0)}if(a(p,"value")){if(!1===p.writable||!c(d))return!1;if(f=i.f(d,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(d,n,f)}else r.f(d,n,u(0,s));return!0}return void 0!==p.set&&(p.set.call(d,s),!0)}})},function(t,e,n){var r=n(7),i=n(111);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){n(317),t.exports=n(19).Array.includes},function(t,e,n){"use strict";var r=n(7),i=n(77)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(59)("includes")},function(t,e,n){n(319),t.exports=n(19).Array.flatMap},function(t,e,n){"use strict";var r=n(7),i=n(320),o=n(23),a=n(17),s=n(37),u=n(151);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(59)("flatMap")},function(t,e,n){"use strict";var r=n(79),i=n(15),o=n(17),a=n(36),s=n(16)("isConcatSpreadable");t.exports=function t(e,n,u,l,c,f,h,d){for(var p,v,y=c,g=0,m=!!h&&a(h,d,3);g<l;){if(g in u){if(p=m?m(u[g],g,n):u[g],v=!1,i(p)&&(v=void 0!==(v=p[s])?!!v:r(p)),v&&f>0)y=t(e,n,p,o(p.length),y,f-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=p}y++}g++}return y}},function(t,e,n){n(322),t.exports=n(19).String.padStart},function(t,e,n){"use strict";var r=n(7),i=n(164),o=n(85),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){n(324),t.exports=n(19).String.padEnd},function(t,e,n){"use strict";var r=n(7),i=n(164),o=n(85),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){n(326),t.exports=n(19).String.trimLeft},function(t,e,n){"use strict";n(64)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,n){n(328),t.exports=n(19).String.trimRight},function(t,e,n){"use strict";n(64)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,n){n(330),t.exports=n(107).f("asyncIterator")},function(t,e,n){n(136)("asyncIterator")},function(t,e,n){n(332),t.exports=n(19).Object.getOwnPropertyDescriptors},function(t,e,n){var r=n(7),i=n(163),o=n(33),a=n(39),s=n(123);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=a.f,l=i(r),c={},f=0;l.length>f;)void 0!==(n=u(r,e=l[f++]))&&s(c,e,n);return c}})},function(t,e,n){n(334),t.exports=n(19).Object.values},function(t,e,n){var r=n(7),i=n(165)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){n(336),t.exports=n(19).Object.entries},function(t,e,n){var r=n(7),i=n(165)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";n(157),n(338),t.exports=n(19).Promise.finally},function(t,e,n){"use strict";var r=n(7),i=n(19),o=n(12),a=n(74),s=n(159);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){n(340),n(341),n(342),t.exports=n(19)},function(t,e,n){var r=n(12),i=n(7),o=n(85),a=[].slice,s=/MSIE .\./.test(o),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(7),i=n(129);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(126),i=n(54),o=n(27),a=n(12),s=n(32),u=n(65),l=n(16),c=l("iterator"),f=l("toStringTag"),h=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),v=0;v<p.length;v++){var y,g=p[v],m=d[g],b=a[g],x=b&&b.prototype;if(x&&(x[c]||s(x,c,h),x[f]||s(x,f,g),u[g]=h,m))for(y in r)x[y]||o(x,y,r[y],!0)}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),s=new S(i||[]);return r(a,"_invoke",{value:k(t,n,s)}),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(B([])));g&&g!==e&&n.call(g,o)&&(v=g);var m=p.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var i;r(this,"_invoke",{value:function(r,o){function a(){return new e((function(i,a){!function r(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}(r,o,i,a)}))}return i=i?i.then(a,a):a()}})}function k(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=c(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function B(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=p,r(m,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(x.prototype),u(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=B,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:B(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){n(345),t.exports=n(166).global},function(t,e,n){var r=n(346);r(r.G,{global:n(131)})},function(t,e,n){var r=n(131),i=n(166),o=n(347),a=n(349),s=n(356),u=function(t,e,n){var l,c,f,h=t&u.F,d=t&u.G,p=t&u.S,v=t&u.P,y=t&u.B,g=t&u.W,m=d?i:i[e]||(i[e]={}),b=m.prototype,x=d?r:p?r[e]:(r[e]||{}).prototype;for(l in d&&(n=e),n)(c=!h&&x&&void 0!==x[l])&&s(m,l)||(f=c?x[l]:n[l],m[l]=d&&"function"!=typeof x[l]?n[l]:y&&c?o(f,r):g&&x[l]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((m.virtual||(m.virtual={}))[l]=f,t&u.R&&b&&!b[l]&&a(b,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(348);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(350),i=n(355);t.exports=n(133)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(351),i=n(352),o=n(354),a=Object.defineProperty;e.f=n(133)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(132);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(133)&&!n(167)((function(){return 7!=Object.defineProperty(n(353)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(132),i=n(131).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(132);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";n.r(e);var r=n(88);n(358);e.default=r.default},function(t,e,n){}])}));